(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Va(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function FT(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var hp={exports:{}},vs={},yp={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function OT(){if(Lx)return Xe;Lx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,q={};function w(z,X,_e){this.props=z,this.context=X,this.refs=q,this.updater=_e||g}w.prototype.isReactComponent={},w.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function b(){}b.prototype=w.prototype;function C(z,X,_e){this.props=z,this.context=X,this.refs=q,this.updater=_e||g}var S=C.prototype=new b;S.constructor=C,x(S,w.prototype),S.isPureReactComponent=!0;var M=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function R(z,X,_e){var W,J={},re=null,ue=null;if(X!=null)for(W in X.ref!==void 0&&(ue=X.ref),X.key!==void 0&&(re=""+X.key),X)I.call(X,W)&&!N.hasOwnProperty(W)&&(J[W]=X[W]);var ae=arguments.length-2;if(ae===1)J.children=_e;else if(1<ae){for(var he=Array(ae),Ee=0;Ee<ae;Ee++)he[Ee]=arguments[Ee+2];J.children=he}if(z&&z.defaultProps)for(W in ae=z.defaultProps,ae)J[W]===void 0&&(J[W]=ae[W]);return{$$typeof:e,type:z,key:re,ref:ue,props:J,_owner:E.current}}function P(z,X){return{$$typeof:e,type:z.type,key:X,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function F(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(_e){return X[_e]})}var O=/\/+/g;function Q(z,X){return typeof z=="object"&&z!==null&&z.key!=null?F(""+z.key):X.toString(36)}function j(z,X,_e,W,J){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var ue=!1;if(z===null)ue=!0;else switch(re){case"string":case"number":ue=!0;break;case"object":switch(z.$$typeof){case e:case t:ue=!0}}if(ue)return ue=z,J=J(ue),z=W===""?"."+Q(ue,0):W,M(J)?(_e="",z!=null&&(_e=z.replace(O,"$&/")+"/"),j(J,X,_e,"",function(Ee){return Ee})):J!=null&&(D(J)&&(J=P(J,_e+(!J.key||ue&&ue.key===J.key?"":(""+J.key).replace(O,"$&/")+"/")+z)),X.push(J)),1;if(ue=0,W=W===""?".":W+":",M(z))for(var ae=0;ae<z.length;ae++){re=z[ae];var he=W+Q(re,ae);ue+=j(re,X,_e,he,J)}else if(he=h(z),typeof he=="function")for(z=he.call(z),ae=0;!(re=z.next()).done;)re=re.value,he=W+Q(re,ae++),ue+=j(re,X,_e,he,J);else if(re==="object")throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ue}function U(z,X,_e){if(z==null)return z;var W=[],J=0;return j(z,W,"","",function(re){return X.call(_e,re,J++)}),W}function H(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(_e){(z._status===0||z._status===-1)&&(z._status=1,z._result=_e)},function(_e){(z._status===0||z._status===-1)&&(z._status=2,z._result=_e)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},G={transition:null},Y={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:G,ReactCurrentOwner:E};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:U,forEach:function(z,X,_e){U(z,function(){X.apply(this,arguments)},_e)},count:function(z){var X=0;return U(z,function(){X++}),X},toArray:function(z){return U(z,function(X){return X})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Xe.Component=w,Xe.Fragment=n,Xe.Profiler=a,Xe.PureComponent=C,Xe.StrictMode=i,Xe.Suspense=d,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Xe.act=oe,Xe.cloneElement=function(z,X,_e){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var W=x({},z.props),J=z.key,re=z.ref,ue=z._owner;if(X!=null){if(X.ref!==void 0&&(re=X.ref,ue=E.current),X.key!==void 0&&(J=""+X.key),z.type&&z.type.defaultProps)var ae=z.type.defaultProps;for(he in X)I.call(X,he)&&!N.hasOwnProperty(he)&&(W[he]=X[he]===void 0&&ae!==void 0?ae[he]:X[he])}var he=arguments.length-2;if(he===1)W.children=_e;else if(1<he){ae=Array(he);for(var Ee=0;Ee<he;Ee++)ae[Ee]=arguments[Ee+2];W.children=ae}return{$$typeof:e,type:z.type,key:J,ref:re,props:W,_owner:ue}},Xe.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},Xe.createElement=R,Xe.createFactory=function(z){var X=R.bind(null,z);return X.type=z,X},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(z){return{$$typeof:l,render:z}},Xe.isValidElement=D,Xe.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:H}},Xe.memo=function(z,X){return{$$typeof:p,type:z,compare:X===void 0?null:X}},Xe.startTransition=function(z){var X=G.transition;G.transition={};try{z()}finally{G.transition=X}},Xe.unstable_act=oe,Xe.useCallback=function(z,X){return te.current.useCallback(z,X)},Xe.useContext=function(z){return te.current.useContext(z)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(z){return te.current.useDeferredValue(z)},Xe.useEffect=function(z,X){return te.current.useEffect(z,X)},Xe.useId=function(){return te.current.useId()},Xe.useImperativeHandle=function(z,X,_e){return te.current.useImperativeHandle(z,X,_e)},Xe.useInsertionEffect=function(z,X){return te.current.useInsertionEffect(z,X)},Xe.useLayoutEffect=function(z,X){return te.current.useLayoutEffect(z,X)},Xe.useMemo=function(z,X){return te.current.useMemo(z,X)},Xe.useReducer=function(z,X,_e){return te.current.useReducer(z,X,_e)},Xe.useRef=function(z){return te.current.useRef(z)},Xe.useState=function(z){return te.current.useState(z)},Xe.useSyncExternalStore=function(z,X,_e){return te.current.useSyncExternalStore(z,X,_e)},Xe.useTransition=function(){return te.current.useTransition()},Xe.version="18.3.1",Xe}var Dx;function Xs(){return Dx||(Dx=1,yp.exports=OT()),yp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function AT(){if(Bx)return vs;Bx=1;var e=Xs(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,p){var m,_={},h=null,g=null;p!==void 0&&(h=""+p),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(g=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(_[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)_[m]===void 0&&(_[m]=d[m]);return{$$typeof:t,type:l,key:h,ref:g,props:_,_owner:a.current}}return vs.Fragment=n,vs.jsx=u,vs.jsxs=u,vs}var zx;function LT(){return zx||(zx=1,hp.exports=AT()),hp.exports}var f=LT(),A=Xs();const vk=Va(A);var ll={},gp={exports:{}},Rr={},vp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function DT(){return $x||($x=1,(function(e){function t(G,Y){var oe=G.length;G.push(Y);e:for(;0<oe;){var z=oe-1>>>1,X=G[z];if(0<a(X,Y))G[z]=Y,G[oe]=X,oe=z;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var Y=G[0],oe=G.pop();if(oe!==Y){G[0]=oe;e:for(var z=0,X=G.length,_e=X>>>1;z<_e;){var W=2*(z+1)-1,J=G[W],re=W+1,ue=G[re];if(0>a(J,oe))re<X&&0>a(ue,J)?(G[z]=ue,G[re]=oe,z=re):(G[z]=J,G[W]=oe,z=W);else if(re<X&&0>a(ue,oe))G[z]=ue,G[re]=oe,z=re;else break e}}return Y}function a(G,Y){var oe=G.sortIndex-Y.sortIndex;return oe!==0?oe:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var d=[],p=[],m=1,_=null,h=3,g=!1,x=!1,q=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var Y=n(p);Y!==null;){if(Y.callback===null)i(p);else if(Y.startTime<=G)i(p),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=n(p)}}function M(G){if(q=!1,S(G),!x)if(n(d)!==null)x=!0,H(I);else{var Y=n(p);Y!==null&&te(M,Y.startTime-G)}}function I(G,Y){x=!1,q&&(q=!1,b(R),R=-1),g=!0;var oe=h;try{for(S(Y),_=n(d);_!==null&&(!(_.expirationTime>Y)||G&&!F());){var z=_.callback;if(typeof z=="function"){_.callback=null,h=_.priorityLevel;var X=z(_.expirationTime<=Y);Y=e.unstable_now(),typeof X=="function"?_.callback=X:_===n(d)&&i(d),S(Y)}else i(d);_=n(d)}if(_!==null)var _e=!0;else{var W=n(p);W!==null&&te(M,W.startTime-Y),_e=!1}return _e}finally{_=null,h=oe,g=!1}}var E=!1,N=null,R=-1,P=5,D=-1;function F(){return!(e.unstable_now()-D<P)}function O(){if(N!==null){var G=e.unstable_now();D=G;var Y=!0;try{Y=N(!0,G)}finally{Y?Q():(E=!1,N=null)}}else E=!1}var Q;if(typeof C=="function")Q=function(){C(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,U=j.port2;j.port1.onmessage=O,Q=function(){U.postMessage(null)}}else Q=function(){w(O,0)};function H(G){N=G,E||(E=!0,Q())}function te(G,Y){R=w(function(){G(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,H(I))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var oe=h;h=Y;try{return G()}finally{h=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=h;h=G;try{return Y()}finally{h=oe}},e.unstable_scheduleCallback=function(G,Y,oe){var z=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?z+oe:z):oe=z,G){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=oe+X,G={id:m++,callback:Y,priorityLevel:G,startTime:oe,expirationTime:X,sortIndex:-1},oe>z?(G.sortIndex=oe,t(p,G),n(d)===null&&G===n(p)&&(q?(b(R),R=-1):q=!0,te(M,oe-z))):(G.sortIndex=X,t(d,G),x||g||(x=!0,H(I))),G},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(G){var Y=h;return function(){var oe=h;h=Y;try{return G.apply(this,arguments)}finally{h=oe}}}})(xp)),xp}var Hx;function BT(){return Hx||(Hx=1,vp.exports=DT()),vp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function zT(){if(Wx)return Rr;Wx=1;var e=Xs(),t=BT();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function s(r,o){u(r,o),u(r+"Capture",o)}function u(r,o){for(a[r]=o,r=0;r<o.length;r++)i.add(o[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function h(r){return d.call(_,r)?!0:d.call(m,r)?!1:p.test(r)?_[r]=!0:(m[r]=!0,!1)}function g(r,o,c,y){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,o,c,y){if(o===null||typeof o>"u"||g(r,o,c,y))return!0;if(y)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function q(r,o,c,y,v,k,V){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=r,this.type=o,this.sanitizeURL=k,this.removeEmptyString=V}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];w[o]=new q(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function S(r,o,c,y){var v=w.hasOwnProperty(o)?w[o]:null;(v!==null?v.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,v,y)&&(c=null),y||v===null?h(o)&&(c===null?r.removeAttribute(o):r.setAttribute(o,""+c)):v.mustUseProperty?r[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,y=v.attributeNamespace,c===null?r.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,y?r.setAttributeNS(y,o,c):r.setAttribute(o,c))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),E=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),G=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Object.assign,z;function X(r){if(z===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+r}var _e=!1;function W(r,o){if(!r||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(fe){var y=fe}Reflect.construct(r,[],o)}else{try{o.call()}catch(fe){y=fe}r.call(o.prototype)}else{try{throw Error()}catch(fe){y=fe}r()}}catch(fe){if(fe&&y&&typeof fe.stack=="string"){for(var v=fe.stack.split(`
`),k=y.stack.split(`
`),V=v.length-1,K=k.length-1;1<=V&&0<=K&&v[V]!==k[K];)K--;for(;1<=V&&0<=K;V--,K--)if(v[V]!==k[K]){if(V!==1||K!==1)do if(V--,K--,0>K||v[V]!==k[K]){var ee=`
`+v[V].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=V&&0<=K);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?X(r):""}function J(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=W(r.type,!1),r;case 11:return r=W(r.type.render,!1),r;case 1:return r=W(r.type,!0),r;default:return""}}function re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case E:return"Portal";case P:return"Profiler";case R:return"StrictMode";case Q:return"Suspense";case j:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case O:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return o=r.displayName||null,o!==null?o:re(r.type)||"Memo";case H:o=r._payload,r=r._init;try{return re(r(o))}catch{}}return null}function ue(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ae(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function he(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ee(r){var o=he(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,k=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(V){y=""+V,k.call(this,V)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return y},setValue:function(V){y=""+V},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function je(r){r._valueTracker||(r._valueTracker=Ee(r))}function Ie(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),y="";return r&&(y=he(r)?r.checked?"true":"false":r.value),r=y,r!==c?(o.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Pe(r,o){var c=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Fe(r,o){var c=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;c=ae(o.value!=null?o.value:c),r._wrapperState={initialChecked:y,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function We(r,o){o=o.checked,o!=null&&S(r,"checked",o,!1)}function Be(r,o){We(r,o);var c=ae(o.value),y=o.type;if(c!=null)y==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?et(r,o.type,c):o.hasOwnProperty("defaultValue")&&et(r,o.type,ae(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function rt(r,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,c||o===r.value||(r.value=o),r.defaultValue=o}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function et(r,o,c){(o!=="number"||Te(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var pt=Array.isArray;function lt(r,o,c,y){if(r=r.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=o.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&y&&(r[c].defaultSelected=!0)}else{for(c=""+ae(c),o=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,y&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function ct(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function st(r,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(pt(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}r._wrapperState={initialValue:ae(c)}}function Cr(r,o){var c=ae(o.value),y=ae(o.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),o.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),y!=null&&(r.defaultValue=""+y)}function Zt(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function zt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?zt(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ot,Or=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,y,v){MSApp.execUnsafeLocalFunction(function(){return r(o,c,y,v)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ot.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Tt(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mr=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(r){mr.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Yr[o]=Yr[r]})});function $t(r,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Yr.hasOwnProperty(r)&&Yr[r]?(""+o).trim():o+"px"}function Qe(r,o){r=r.style;for(var c in o)if(o.hasOwnProperty(c)){var y=c.indexOf("--")===0,v=$t(c,o[c],y);c==="float"&&(c="cssFloat"),y?r.setProperty(c,v):r[c]=v}}var qi=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nt(r,o){if(o){if(qi[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function cn(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function at(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ar=null,Lr=null,hr=null;function Zn(r){if(r=is(r)){if(typeof Ar!="function")throw Error(n(280));var o=r.stateNode;o&&(o=qu(o),Ar(r.stateNode,r.type,o))}}function Vn(r){Lr?hr?hr.push(r):hr=[r]:Lr=r}function Pt(){if(Lr){var r=Lr,o=hr;if(hr=Lr=null,Zn(r),o)for(r=0;r<o.length;r++)Zn(o[r])}}function er(r,o){return r(o)}function Ht(){}var ft=!1;function $o(r,o,c){if(ft)return r(o,c);ft=!0;try{return er(r,o,c)}finally{ft=!1,(Lr!==null||hr!==null)&&(Ht(),Pt())}}function vt(r,o){var c=r.stateNode;if(c===null)return null;var y=qu(c);if(y===null)return null;c=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var to=!1;if(l)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){to=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{to=!1}function Qr(r,o,c,y,v,k,V,K,ee){var fe=Array.prototype.slice.call(arguments,3);try{o.apply(c,fe)}catch(qe){this.onError(qe)}}var At=!1,Lt=null,Ut=!1,Gt=null,yr={onError:function(r){At=!0,Lt=r}};function ir(r,o,c,y,v,k,V,K,ee){At=!1,Lt=null,Qr.apply(yr,arguments)}function gr(r,o,c,y,v,k,V,K,ee){if(ir.apply(this,arguments),At){if(At){var fe=Lt;At=!1,Lt=null}else throw Error(n(198));Ut||(Ut=!0,Gt=fe)}}function Et(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function Xr(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function or(r){if(Et(r)!==r)throw Error(n(188))}function ro(r){var o=r.alternate;if(!o){if(o=Et(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,y=o;;){var v=c.return;if(v===null)break;var k=v.alternate;if(k===null){if(y=v.return,y!==null){c=y;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===c)return or(v),r;if(k===y)return or(v),o;k=k.sibling}throw Error(n(188))}if(c.return!==y.return)c=v,y=k;else{for(var V=!1,K=v.child;K;){if(K===c){V=!0,c=v,y=k;break}if(K===y){V=!0,y=v,c=k;break}K=K.sibling}if(!V){for(K=k.child;K;){if(K===c){V=!0,c=k,y=v;break}if(K===y){V=!0,y=k,c=v;break}K=K.sibling}if(!V)throw Error(n(189))}}if(c.alternate!==y)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function no(r){return r=ro(r),r!==null?ar(r):null}function ar(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=ar(r);if(o!==null)return o;r=r.sibling}return null}var Si=t.unstable_scheduleCallback,Ci=t.unstable_cancelCallback,io=t.unstable_shouldYield,Jn=t.unstable_requestPaint,_t=t.unstable_now,ei=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,ti=t.unstable_UserBlockingPriority,pn=t.unstable_NormalPriority,mt=t.unstable_LowPriority,Zr=t.unstable_IdlePriority,Fn=null,Kt=null;function Ho(r){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Fn,r,void 0,(r.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:$a,ri=Math.log,fn=Math.LN2;function $a(r){return r>>>=0,r===0?32:31-(ri(r)/fn|0)|0}var oo=64,ki=4194304;function kr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _n(r,o){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,k=r.pingedLanes,V=c&268435455;if(V!==0){var K=V&~v;K!==0?y=kr(K):(k&=V,k!==0&&(y=kr(k)))}else V=c&~v,V!==0?y=kr(V):k!==0&&(y=kr(k));if(y===0)return 0;if(o!==0&&o!==y&&(o&v)===0&&(v=y&-y,k=o&-o,v>=k||v===16&&(k&4194240)!==0))return o;if((y&4)!==0&&(y|=c&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)c=31-vr(o),v=1<<c,y|=r[c],o&=~v;return y}function Wo(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ha(r,o){for(var c=r.suspendedLanes,y=r.pingedLanes,v=r.expirationTimes,k=r.pendingLanes;0<k;){var V=31-vr(k),K=1<<V,ee=v[V];ee===-1?((K&c)===0||(K&y)!==0)&&(v[V]=Wo(K,o)):ee<=o&&(r.expiredLanes|=K),k&=~K}}function tr(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Mr(){var r=oo;return oo<<=1,(oo&4194240)===0&&(oo=64),r}function ao(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function xr(r,o,c){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-vr(o),r[o]=c}function ni(r,o){var c=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<c;){var v=31-vr(c),k=1<<v;o[v]=0,y[v]=-1,r[v]=-1,c&=~k}}function Uo(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var y=31-vr(c),v=1<<y;v&o|r[y]&o&&(r[y]|=o),c&=~v}}var Ne=0;function du(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var so,Go,Ko,Yo,$e,Qo=!1,uo=[],Dr=null,mn=null,hn=null,On=new Map,Mi=new Map,An=[],Jr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lo(r,o){switch(r){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":On.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(o.pointerId)}}function co(r,o,c,y,v,k){return r===null||r.nativeEvent!==k?(r={blockedOn:o,domEventName:c,eventSystemFlags:y,nativeEvent:k,targetContainers:[v]},o!==null&&(o=is(o),o!==null&&Go(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function Rc(r,o,c,y,v){switch(o){case"focusin":return Dr=co(Dr,r,o,c,y,v),!0;case"dragenter":return mn=co(mn,r,o,c,y,v),!0;case"mouseover":return hn=co(hn,r,o,c,y,v),!0;case"pointerover":var k=v.pointerId;return On.set(k,co(On.get(k)||null,r,o,c,y,v)),!0;case"gotpointercapture":return k=v.pointerId,Mi.set(k,co(Mi.get(k)||null,r,o,c,y,v)),!0}return!1}function po(r){var o=yo(r.target);if(o!==null){var c=Et(o);if(c!==null){if(o=c.tag,o===13){if(o=Xr(c),o!==null){r.blockedOn=o,$e(r.priority,function(){Ko(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xo(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Ua(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var y=new c.constructor(c.type,c);me=y,c.target.dispatchEvent(y),me=null}else return o=is(c),o!==null&&Go(o),r.blockedOn=c,!1;o.shift()}return!0}function pu(r,o,c){Xo(r)&&c.delete(o)}function Vc(){Qo=!1,Dr!==null&&Xo(Dr)&&(Dr=null),mn!==null&&Xo(mn)&&(mn=null),hn!==null&&Xo(hn)&&(hn=null),On.forEach(pu),Mi.forEach(pu)}function sr(r,o){r.blockedOn===o&&(r.blockedOn=null,Qo||(Qo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Vc)))}function fo(r){function o(v){return sr(v,r)}if(0<uo.length){sr(uo[0],r);for(var c=1;c<uo.length;c++){var y=uo[c];y.blockedOn===r&&(y.blockedOn=null)}}for(Dr!==null&&sr(Dr,r),mn!==null&&sr(mn,r),hn!==null&&sr(hn,r),On.forEach(o),Mi.forEach(o),c=0;c<An.length;c++)y=An[c],y.blockedOn===r&&(y.blockedOn=null);for(;0<An.length&&(c=An[0],c.blockedOn===null);)po(c),c.blockedOn===null&&An.shift()}var Ei=M.ReactCurrentBatchConfig,Zo=!0;function Fc(r,o,c,y){var v=Ne,k=Ei.transition;Ei.transition=null;try{Ne=1,Wa(r,o,c,y)}finally{Ne=v,Ei.transition=k}}function Oc(r,o,c,y){var v=Ne,k=Ei.transition;Ei.transition=null;try{Ne=4,Wa(r,o,c,y)}finally{Ne=v,Ei.transition=k}}function Wa(r,o,c,y){if(Zo){var v=Ua(r,o,c,y);if(v===null)ad(r,o,y,Jo,c),lo(r,y);else if(Rc(v,r,o,c,y))y.stopPropagation();else if(lo(r,y),o&4&&-1<Jr.indexOf(r)){for(;v!==null;){var k=is(v);if(k!==null&&so(k),k=Ua(r,o,c,y),k===null&&ad(r,o,y,Jo,c),k===v)break;v=k}v!==null&&y.stopPropagation()}else ad(r,o,y,null,c)}}var Jo=null;function Ua(r,o,c,y){if(Jo=null,r=at(y),r=yo(r),r!==null)if(o=Et(r),o===null)r=null;else if(c=o.tag,c===13){if(r=Xr(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Jo=r,null}function fu(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ei()){case dn:return 1;case ti:return 4;case pn:case mt:return 16;case Zr:return 536870912;default:return 16}default:return 16}}var Ln=null,Ga=null,Er=null;function ii(){if(Er)return Er;var r,o=Ga,c=o.length,y,v="value"in Ln?Ln.value:Ln.textContent,k=v.length;for(r=0;r<c&&o[r]===v[r];r++);var V=c-r;for(y=1;y<=V&&o[c-y]===v[k-y];y++);return Er=v.slice(r,1<y?1-y:void 0)}function Ii(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function oi(){return!0}function Ka(){return!1}function wr(r){function o(c,y,v,k,V){this._reactName=c,this._targetInst=v,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var K in r)r.hasOwnProperty(K)&&(c=r[K],this[K]=c?c(k):k[K]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?oi:Ka,this.isPropagationStopped=Ka,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),o}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=wr(Ti),mo=oe({},Ti,{view:0,detail:0}),Ac=wr(mo),Ya,Qa,ho,Ni=oe({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ho&&(ho&&r.type==="mousemove"?(Ya=r.screenX-ho.screenX,Qa=r.screenY-ho.screenY):Qa=Ya=0,ho=r),Ya)},movementY:function(r){return"movementY"in r?r.movementY:Qa}}),Xa=wr(Ni),Lc=oe({},Ni,{dataTransfer:0}),Dc=wr(Lc),Bc=oe({},mo,{relatedTarget:0}),ea=wr(Bc),ai=oe({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=wr(ai),$c=oe({},Ti,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hc=wr($c),Wc=oe({},Ti,{data:0}),_u=wr(Wc),Uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=mu[r])?!!o[r]:!1}function ta(){return Kc}var Yc=oe({},mo,{key:function(r){if(r.key){var o=Uc[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ii(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(r){return r.type==="keypress"?Ii(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ii(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),T=wr(Yc),B=oe({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$=wr(B),L=oe({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Z=wr(L),ne=oe({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),ce=wr(ne),pe=oe({},Ni,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ve=wr(pe),be=[9,13,27,32],ke=l&&"CompositionEvent"in window,de=null;l&&"documentMode"in document&&(de=document.documentMode);var ge=l&&"TextEvent"in window&&!de,we=l&&(!ke||de&&8<de&&11>=de),ye=" ",Ce=!1;function Ve(r,o){switch(r){case"keyup":return be.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Re(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ke=!1;function Ze(r,o){switch(r){case"compositionend":return Re(o);case"keypress":return o.which!==32?null:(Ce=!0,ye);case"textInput":return r=o.data,r===ye&&Ce?null:r;default:return null}}function ut(r,o){if(Ke)return r==="compositionend"||!ke&&Ve(r,o)?(r=ii(),Er=Ga=Ln=null,Ke=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return we&&o.locale!=="ko"?null:o.data;default:return null}}var nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!nt[r.type]:o==="textarea"}function ur(r,o,c,y){Vn(y),o=xu(o,"onChange"),0<o.length&&(c=new _o("onChange","change",null,c,y),r.push({event:c,listeners:o}))}var xt=null,yn=null;function Qc(r){tv(r,0)}function hu(r){var o=aa(r);if(Ie(o))return r}function OI(r,o){if(r==="change")return o}var Ag=!1;if(l){var Xc;if(l){var Zc="oninput"in document;if(!Zc){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),Zc=typeof Lg.oninput=="function"}Xc=Zc}else Xc=!1;Ag=Xc&&(!document.documentMode||9<document.documentMode)}function Dg(){xt&&(xt.detachEvent("onpropertychange",Bg),yn=xt=null)}function Bg(r){if(r.propertyName==="value"&&hu(yn)){var o=[];ur(o,yn,r,at(r)),$o(Qc,o)}}function AI(r,o,c){r==="focusin"?(Dg(),xt=o,yn=c,xt.attachEvent("onpropertychange",Bg)):r==="focusout"&&Dg()}function LI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return hu(yn)}function DI(r,o){if(r==="click")return hu(o)}function BI(r,o){if(r==="input"||r==="change")return hu(o)}function zI(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gn=typeof Object.is=="function"?Object.is:zI;function Za(r,o){if(gn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),y=Object.keys(o);if(c.length!==y.length)return!1;for(y=0;y<c.length;y++){var v=c[y];if(!d.call(o,v)||!gn(r[v],o[v]))return!1}return!0}function zg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $g(r,o){var c=zg(r);r=0;for(var y;c;){if(c.nodeType===3){if(y=r+c.textContent.length,r<=o&&y>=o)return{node:c,offset:o-r};r=y}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=zg(c)}}function Hg(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Hg(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Wg(){for(var r=window,o=Te();o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Te(r.document)}return o}function Jc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function $I(r){var o=Wg(),c=r.focusedElem,y=r.selectionRange;if(o!==c&&c&&c.ownerDocument&&Hg(c.ownerDocument.documentElement,c)){if(y!==null&&Jc(c)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(r,c.value.length);else if(r=(o=c.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var v=c.textContent.length,k=Math.min(y.start,v);y=y.end===void 0?k:Math.min(y.end,v),!r.extend&&k>y&&(v=y,y=k,k=v),v=$g(c,k);var V=$g(c,y);v&&V&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==V.node||r.focusOffset!==V.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),r.removeAllRanges(),k>y?(r.addRange(o),r.extend(V.node,V.offset)):(o.setEnd(V.node,V.offset),r.addRange(o)))}}for(o=[],r=c;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)r=o[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var HI=l&&"documentMode"in document&&11>=document.documentMode,ra=null,ed=null,Ja=null,td=!1;function Ug(r,o,c){var y=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;td||ra==null||ra!==Te(y)||(y=ra,"selectionStart"in y&&Jc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ja&&Za(Ja,y)||(Ja=y,y=xu(ed,"onSelect"),0<y.length&&(o=new _o("onSelect","select",null,o,c),r.push({event:o,listeners:y}),o.target=ra)))}function yu(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var na={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},rd={},Gg={};l&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function gu(r){if(rd[r])return rd[r];if(!na[r])return r;var o=na[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Gg)return rd[r]=o[c];return r}var Kg=gu("animationend"),Yg=gu("animationiteration"),Qg=gu("animationstart"),Xg=gu("transitionend"),Zg=new Map,Jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(r,o){Zg.set(r,o),s(o,[r])}for(var nd=0;nd<Jg.length;nd++){var id=Jg[nd],WI=id.toLowerCase(),UI=id[0].toUpperCase()+id.slice(1);ji(WI,"on"+UI)}ji(Kg,"onAnimationEnd"),ji(Yg,"onAnimationIteration"),ji(Qg,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Xg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GI=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function ev(r,o,c){var y=r.type||"unknown-event";r.currentTarget=c,gr(y,o,void 0,r),r.currentTarget=null}function tv(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var y=r[c],v=y.event;y=y.listeners;e:{var k=void 0;if(o)for(var V=y.length-1;0<=V;V--){var K=y[V],ee=K.instance,fe=K.currentTarget;if(K=K.listener,ee!==k&&v.isPropagationStopped())break e;ev(v,K,fe),k=ee}else for(V=0;V<y.length;V++){if(K=y[V],ee=K.instance,fe=K.currentTarget,K=K.listener,ee!==k&&v.isPropagationStopped())break e;ev(v,K,fe),k=ee}}}if(Ut)throw r=Gt,Ut=!1,Gt=null,r}function ht(r,o){var c=o[pd];c===void 0&&(c=o[pd]=new Set);var y=r+"__bubble";c.has(y)||(rv(o,r,2,!1),c.add(y))}function od(r,o,c){var y=0;o&&(y|=4),rv(c,r,y,o)}var vu="_reactListening"+Math.random().toString(36).slice(2);function ts(r){if(!r[vu]){r[vu]=!0,i.forEach(function(c){c!=="selectionchange"&&(GI.has(c)||od(c,!1,r),od(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[vu]||(o[vu]=!0,od("selectionchange",!1,o))}}function rv(r,o,c,y){switch(fu(o)){case 1:var v=Fc;break;case 4:v=Oc;break;default:v=Wa}c=v.bind(null,o,c,r),v=void 0,!to||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),y?v!==void 0?r.addEventListener(o,c,{capture:!0,passive:v}):r.addEventListener(o,c,!0):v!==void 0?r.addEventListener(o,c,{passive:v}):r.addEventListener(o,c,!1)}function ad(r,o,c,y,v){var k=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var K=y.stateNode.containerInfo;if(K===v||K.nodeType===8&&K.parentNode===v)break;if(V===4)for(V=y.return;V!==null;){var ee=V.tag;if((ee===3||ee===4)&&(ee=V.stateNode.containerInfo,ee===v||ee.nodeType===8&&ee.parentNode===v))return;V=V.return}for(;K!==null;){if(V=yo(K),V===null)return;if(ee=V.tag,ee===5||ee===6){y=k=V;continue e}K=K.parentNode}}y=y.return}$o(function(){var fe=k,qe=at(c),Se=[];e:{var xe=Zg.get(r);if(xe!==void 0){var Oe=_o,Le=r;switch(r){case"keypress":if(Ii(c)===0)break e;case"keydown":case"keyup":Oe=T;break;case"focusin":Le="focus",Oe=ea;break;case"focusout":Le="blur",Oe=ea;break;case"beforeblur":case"afterblur":Oe=ea;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=Z;break;case Kg:case Yg:case Qg:Oe=zc;break;case Xg:Oe=ce;break;case"scroll":Oe=Ac;break;case"wheel":Oe=ve;break;case"copy":case"cut":case"paste":Oe=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=$}var De=(o&4)!==0,jt=!De&&r==="scroll",se=De?xe!==null?xe+"Capture":null:xe;De=[];for(var ie=fe,le;ie!==null;){le=ie;var Me=le.stateNode;if(le.tag===5&&Me!==null&&(le=Me,se!==null&&(Me=vt(ie,se),Me!=null&&De.push(rs(ie,Me,le)))),jt)break;ie=ie.return}0<De.length&&(xe=new Oe(xe,Le,null,c,qe),Se.push({event:xe,listeners:De}))}}if((o&7)===0){e:{if(xe=r==="mouseover"||r==="pointerover",Oe=r==="mouseout"||r==="pointerout",xe&&c!==me&&(Le=c.relatedTarget||c.fromElement)&&(yo(Le)||Le[si]))break e;if((Oe||xe)&&(xe=qe.window===qe?qe:(xe=qe.ownerDocument)?xe.defaultView||xe.parentWindow:window,Oe?(Le=c.relatedTarget||c.toElement,Oe=fe,Le=Le?yo(Le):null,Le!==null&&(jt=Et(Le),Le!==jt||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Oe=null,Le=fe),Oe!==Le)){if(De=Xa,Me="onMouseLeave",se="onMouseEnter",ie="mouse",(r==="pointerout"||r==="pointerover")&&(De=$,Me="onPointerLeave",se="onPointerEnter",ie="pointer"),jt=Oe==null?xe:aa(Oe),le=Le==null?xe:aa(Le),xe=new De(Me,ie+"leave",Oe,c,qe),xe.target=jt,xe.relatedTarget=le,Me=null,yo(qe)===fe&&(De=new De(se,ie+"enter",Le,c,qe),De.target=le,De.relatedTarget=jt,Me=De),jt=Me,Oe&&Le)t:{for(De=Oe,se=Le,ie=0,le=De;le;le=ia(le))ie++;for(le=0,Me=se;Me;Me=ia(Me))le++;for(;0<ie-le;)De=ia(De),ie--;for(;0<le-ie;)se=ia(se),le--;for(;ie--;){if(De===se||se!==null&&De===se.alternate)break t;De=ia(De),se=ia(se)}De=null}else De=null;Oe!==null&&nv(Se,xe,Oe,De,!1),Le!==null&&jt!==null&&nv(Se,jt,Le,De,!0)}}e:{if(xe=fe?aa(fe):window,Oe=xe.nodeName&&xe.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&xe.type==="file")var ze=OI;else if(Rt(xe))if(Ag)ze=BI;else{ze=LI;var Ue=AI}else(Oe=xe.nodeName)&&Oe.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(ze=DI);if(ze&&(ze=ze(r,fe))){ur(Se,ze,c,qe);break e}Ue&&Ue(r,xe,fe),r==="focusout"&&(Ue=xe._wrapperState)&&Ue.controlled&&xe.type==="number"&&et(xe,"number",xe.value)}switch(Ue=fe?aa(fe):window,r){case"focusin":(Rt(Ue)||Ue.contentEditable==="true")&&(ra=Ue,ed=fe,Ja=null);break;case"focusout":Ja=ed=ra=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,Ug(Se,c,qe);break;case"selectionchange":if(HI)break;case"keydown":case"keyup":Ug(Se,c,qe)}var Ge;if(ke)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ke?Ve(r,c)&&(Ye="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ye="onCompositionStart");Ye&&(we&&c.locale!=="ko"&&(Ke||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ke&&(Ge=ii()):(Ln=qe,Ga="value"in Ln?Ln.value:Ln.textContent,Ke=!0)),Ue=xu(fe,Ye),0<Ue.length&&(Ye=new _u(Ye,r,null,c,qe),Se.push({event:Ye,listeners:Ue}),Ge?Ye.data=Ge:(Ge=Re(c),Ge!==null&&(Ye.data=Ge)))),(Ge=ge?Ze(r,c):ut(r,c))&&(fe=xu(fe,"onBeforeInput"),0<fe.length&&(qe=new _u("onBeforeInput","beforeinput",null,c,qe),Se.push({event:qe,listeners:fe}),qe.data=Ge))}tv(Se,o)})}function rs(r,o,c){return{instance:r,listener:o,currentTarget:c}}function xu(r,o){for(var c=o+"Capture",y=[];r!==null;){var v=r,k=v.stateNode;v.tag===5&&k!==null&&(v=k,k=vt(r,c),k!=null&&y.unshift(rs(r,k,v)),k=vt(r,o),k!=null&&y.push(rs(r,k,v))),r=r.return}return y}function ia(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function nv(r,o,c,y,v){for(var k=o._reactName,V=[];c!==null&&c!==y;){var K=c,ee=K.alternate,fe=K.stateNode;if(ee!==null&&ee===y)break;K.tag===5&&fe!==null&&(K=fe,v?(ee=vt(c,k),ee!=null&&V.unshift(rs(c,ee,K))):v||(ee=vt(c,k),ee!=null&&V.push(rs(c,ee,K)))),c=c.return}V.length!==0&&r.push({event:o,listeners:V})}var KI=/\r\n?/g,YI=/\u0000|\uFFFD/g;function iv(r){return(typeof r=="string"?r:""+r).replace(KI,`
`).replace(YI,"")}function wu(r,o,c){if(o=iv(o),iv(r)!==o&&c)throw Error(n(425))}function bu(){}var sd=null,ud=null;function ld(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,QI=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(r){return ov.resolve(null).then(r).catch(ZI)}:cd;function ZI(r){setTimeout(function(){throw r})}function dd(r,o){var c=o,y=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(y===0){r.removeChild(v),fo(o);return}y--}else c!=="$"&&c!=="$?"&&c!=="$!"||y++;c=v}while(c);fo(o)}function Pi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function av(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Dn="__reactFiber$"+oa,ns="__reactProps$"+oa,si="__reactContainer$"+oa,pd="__reactEvents$"+oa,JI="__reactListeners$"+oa,eT="__reactHandles$"+oa;function yo(r){var o=r[Dn];if(o)return o;for(var c=r.parentNode;c;){if(o=c[si]||c[Dn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=av(r);r!==null;){if(c=r[Dn])return c;r=av(r)}return o}r=c,c=r.parentNode}return null}function is(r){return r=r[Dn]||r[si],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function aa(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function qu(r){return r[ns]||null}var fd=[],sa=-1;function Ri(r){return{current:r}}function yt(r){0>sa||(r.current=fd[sa],fd[sa]=null,sa--)}function dt(r,o){sa++,fd[sa]=r.current,r.current=o}var Vi={},lr=Ri(Vi),Ir=Ri(!1),go=Vi;function ua(r,o){var c=r.type.contextTypes;if(!c)return Vi;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var v={},k;for(k in c)v[k]=o[k];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=v),v}function Tr(r){return r=r.childContextTypes,r!=null}function Su(){yt(Ir),yt(lr)}function sv(r,o,c){if(lr.current!==Vi)throw Error(n(168));dt(lr,o),dt(Ir,c)}function uv(r,o,c){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return c;y=y.getChildContext();for(var v in y)if(!(v in o))throw Error(n(108,ue(r)||"Unknown",v));return oe({},c,y)}function Cu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Vi,go=lr.current,dt(lr,r),dt(Ir,Ir.current),!0}function lv(r,o,c){var y=r.stateNode;if(!y)throw Error(n(169));c?(r=uv(r,o,go),y.__reactInternalMemoizedMergedChildContext=r,yt(Ir),yt(lr),dt(lr,r)):yt(Ir),dt(Ir,c)}var ui=null,ku=!1,_d=!1;function cv(r){ui===null?ui=[r]:ui.push(r)}function tT(r){ku=!0,cv(r)}function Fi(){if(!_d&&ui!==null){_d=!0;var r=0,o=Ne;try{var c=ui;for(Ne=1;r<c.length;r++){var y=c[r];do y=y(!0);while(y!==null)}ui=null,ku=!1}catch(v){throw ui!==null&&(ui=ui.slice(r+1)),Si(dn,Fi),v}finally{Ne=o,_d=!1}}return null}var la=[],ca=0,Mu=null,Eu=0,en=[],tn=0,vo=null,li=1,ci="";function xo(r,o){la[ca++]=Eu,la[ca++]=Mu,Mu=r,Eu=o}function dv(r,o,c){en[tn++]=li,en[tn++]=ci,en[tn++]=vo,vo=r;var y=li;r=ci;var v=32-vr(y)-1;y&=~(1<<v),c+=1;var k=32-vr(o)+v;if(30<k){var V=v-v%5;k=(y&(1<<V)-1).toString(32),y>>=V,v-=V,li=1<<32-vr(o)+v|c<<v|y,ci=k+r}else li=1<<k|c<<v|y,ci=r}function md(r){r.return!==null&&(xo(r,1),dv(r,1,0))}function hd(r){for(;r===Mu;)Mu=la[--ca],la[ca]=null,Eu=la[--ca],la[ca]=null;for(;r===vo;)vo=en[--tn],en[tn]=null,ci=en[--tn],en[tn]=null,li=en[--tn],en[tn]=null}var Br=null,zr=null,wt=!1,vn=null;function pv(r,o){var c=an(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=r,o=r.deletions,o===null?(r.deletions=[c],r.flags|=16):o.push(c)}function fv(r,o){switch(r.tag){case 5:var c=r.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Br=r,zr=Pi(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Br=r,zr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=vo!==null?{id:li,overflow:ci}:null,r.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=an(18,null,null,0),c.stateNode=o,c.return=r,r.child=c,Br=r,zr=null,!0):!1;default:return!1}}function yd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gd(r){if(wt){var o=zr;if(o){var c=o;if(!fv(r,o)){if(yd(r))throw Error(n(418));o=Pi(c.nextSibling);var y=Br;o&&fv(r,o)?pv(y,c):(r.flags=r.flags&-4097|2,wt=!1,Br=r)}}else{if(yd(r))throw Error(n(418));r.flags=r.flags&-4097|2,wt=!1,Br=r}}}function _v(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Br=r}function Iu(r){if(r!==Br)return!1;if(!wt)return _v(r),wt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!ld(r.type,r.memoizedProps)),o&&(o=zr)){if(yd(r))throw mv(),Error(n(418));for(;o;)pv(r,o),o=Pi(o.nextSibling)}if(_v(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(o===0){zr=Pi(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}r=r.nextSibling}zr=null}}else zr=Br?Pi(r.stateNode.nextSibling):null;return!0}function mv(){for(var r=zr;r;)r=Pi(r.nextSibling)}function da(){zr=Br=null,wt=!1}function vd(r){vn===null?vn=[r]:vn.push(r)}var rT=M.ReactCurrentBatchConfig;function os(r,o,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var y=c.stateNode}if(!y)throw Error(n(147,r));var v=y,k=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===k?o.ref:(o=function(V){var K=v.refs;V===null?delete K[k]:K[k]=V},o._stringRef=k,o)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Tu(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function hv(r){var o=r._init;return o(r._payload)}function yv(r){function o(se,ie){if(r){var le=se.deletions;le===null?(se.deletions=[ie],se.flags|=16):le.push(ie)}}function c(se,ie){if(!r)return null;for(;ie!==null;)o(se,ie),ie=ie.sibling;return null}function y(se,ie){for(se=new Map;ie!==null;)ie.key!==null?se.set(ie.key,ie):se.set(ie.index,ie),ie=ie.sibling;return se}function v(se,ie){return se=Hi(se,ie),se.index=0,se.sibling=null,se}function k(se,ie,le){return se.index=le,r?(le=se.alternate,le!==null?(le=le.index,le<ie?(se.flags|=2,ie):le):(se.flags|=2,ie)):(se.flags|=1048576,ie)}function V(se){return r&&se.alternate===null&&(se.flags|=2),se}function K(se,ie,le,Me){return ie===null||ie.tag!==6?(ie=cp(le,se.mode,Me),ie.return=se,ie):(ie=v(ie,le),ie.return=se,ie)}function ee(se,ie,le,Me){var ze=le.type;return ze===N?qe(se,ie,le.props.children,Me,le.key):ie!==null&&(ie.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===H&&hv(ze)===ie.type)?(Me=v(ie,le.props),Me.ref=os(se,ie,le),Me.return=se,Me):(Me=el(le.type,le.key,le.props,null,se.mode,Me),Me.ref=os(se,ie,le),Me.return=se,Me)}function fe(se,ie,le,Me){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=dp(le,se.mode,Me),ie.return=se,ie):(ie=v(ie,le.children||[]),ie.return=se,ie)}function qe(se,ie,le,Me,ze){return ie===null||ie.tag!==7?(ie=Eo(le,se.mode,Me,ze),ie.return=se,ie):(ie=v(ie,le),ie.return=se,ie)}function Se(se,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=cp(""+ie,se.mode,le),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:return le=el(ie.type,ie.key,ie.props,null,se.mode,le),le.ref=os(se,null,ie),le.return=se,le;case E:return ie=dp(ie,se.mode,le),ie.return=se,ie;case H:var Me=ie._init;return Se(se,Me(ie._payload),le)}if(pt(ie)||Y(ie))return ie=Eo(ie,se.mode,le,null),ie.return=se,ie;Tu(se,ie)}return null}function xe(se,ie,le,Me){var ze=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return ze!==null?null:K(se,ie,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return le.key===ze?ee(se,ie,le,Me):null;case E:return le.key===ze?fe(se,ie,le,Me):null;case H:return ze=le._init,xe(se,ie,ze(le._payload),Me)}if(pt(le)||Y(le))return ze!==null?null:qe(se,ie,le,Me,null);Tu(se,le)}return null}function Oe(se,ie,le,Me,ze){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return se=se.get(le)||null,K(ie,se,""+Me,ze);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:return se=se.get(Me.key===null?le:Me.key)||null,ee(ie,se,Me,ze);case E:return se=se.get(Me.key===null?le:Me.key)||null,fe(ie,se,Me,ze);case H:var Ue=Me._init;return Oe(se,ie,le,Ue(Me._payload),ze)}if(pt(Me)||Y(Me))return se=se.get(le)||null,qe(ie,se,Me,ze,null);Tu(ie,Me)}return null}function Le(se,ie,le,Me){for(var ze=null,Ue=null,Ge=ie,Ye=ie=0,Xt=null;Ge!==null&&Ye<le.length;Ye++){Ge.index>Ye?(Xt=Ge,Ge=null):Xt=Ge.sibling;var it=xe(se,Ge,le[Ye],Me);if(it===null){Ge===null&&(Ge=Xt);break}r&&Ge&&it.alternate===null&&o(se,Ge),ie=k(it,ie,Ye),Ue===null?ze=it:Ue.sibling=it,Ue=it,Ge=Xt}if(Ye===le.length)return c(se,Ge),wt&&xo(se,Ye),ze;if(Ge===null){for(;Ye<le.length;Ye++)Ge=Se(se,le[Ye],Me),Ge!==null&&(ie=k(Ge,ie,Ye),Ue===null?ze=Ge:Ue.sibling=Ge,Ue=Ge);return wt&&xo(se,Ye),ze}for(Ge=y(se,Ge);Ye<le.length;Ye++)Xt=Oe(Ge,se,Ye,le[Ye],Me),Xt!==null&&(r&&Xt.alternate!==null&&Ge.delete(Xt.key===null?Ye:Xt.key),ie=k(Xt,ie,Ye),Ue===null?ze=Xt:Ue.sibling=Xt,Ue=Xt);return r&&Ge.forEach(function(Wi){return o(se,Wi)}),wt&&xo(se,Ye),ze}function De(se,ie,le,Me){var ze=Y(le);if(typeof ze!="function")throw Error(n(150));if(le=ze.call(le),le==null)throw Error(n(151));for(var Ue=ze=null,Ge=ie,Ye=ie=0,Xt=null,it=le.next();Ge!==null&&!it.done;Ye++,it=le.next()){Ge.index>Ye?(Xt=Ge,Ge=null):Xt=Ge.sibling;var Wi=xe(se,Ge,it.value,Me);if(Wi===null){Ge===null&&(Ge=Xt);break}r&&Ge&&Wi.alternate===null&&o(se,Ge),ie=k(Wi,ie,Ye),Ue===null?ze=Wi:Ue.sibling=Wi,Ue=Wi,Ge=Xt}if(it.done)return c(se,Ge),wt&&xo(se,Ye),ze;if(Ge===null){for(;!it.done;Ye++,it=le.next())it=Se(se,it.value,Me),it!==null&&(ie=k(it,ie,Ye),Ue===null?ze=it:Ue.sibling=it,Ue=it);return wt&&xo(se,Ye),ze}for(Ge=y(se,Ge);!it.done;Ye++,it=le.next())it=Oe(Ge,se,Ye,it.value,Me),it!==null&&(r&&it.alternate!==null&&Ge.delete(it.key===null?Ye:it.key),ie=k(it,ie,Ye),Ue===null?ze=it:Ue.sibling=it,Ue=it);return r&&Ge.forEach(function(VT){return o(se,VT)}),wt&&xo(se,Ye),ze}function jt(se,ie,le,Me){if(typeof le=="object"&&le!==null&&le.type===N&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case I:e:{for(var ze=le.key,Ue=ie;Ue!==null;){if(Ue.key===ze){if(ze=le.type,ze===N){if(Ue.tag===7){c(se,Ue.sibling),ie=v(Ue,le.props.children),ie.return=se,se=ie;break e}}else if(Ue.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===H&&hv(ze)===Ue.type){c(se,Ue.sibling),ie=v(Ue,le.props),ie.ref=os(se,Ue,le),ie.return=se,se=ie;break e}c(se,Ue);break}else o(se,Ue);Ue=Ue.sibling}le.type===N?(ie=Eo(le.props.children,se.mode,Me,le.key),ie.return=se,se=ie):(Me=el(le.type,le.key,le.props,null,se.mode,Me),Me.ref=os(se,ie,le),Me.return=se,se=Me)}return V(se);case E:e:{for(Ue=le.key;ie!==null;){if(ie.key===Ue)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){c(se,ie.sibling),ie=v(ie,le.children||[]),ie.return=se,se=ie;break e}else{c(se,ie);break}else o(se,ie);ie=ie.sibling}ie=dp(le,se.mode,Me),ie.return=se,se=ie}return V(se);case H:return Ue=le._init,jt(se,ie,Ue(le._payload),Me)}if(pt(le))return Le(se,ie,le,Me);if(Y(le))return De(se,ie,le,Me);Tu(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ie!==null&&ie.tag===6?(c(se,ie.sibling),ie=v(ie,le),ie.return=se,se=ie):(c(se,ie),ie=cp(le,se.mode,Me),ie.return=se,se=ie),V(se)):c(se,ie)}return jt}var pa=yv(!0),gv=yv(!1),Nu=Ri(null),ju=null,fa=null,xd=null;function wd(){xd=fa=ju=null}function bd(r){var o=Nu.current;yt(Nu),r._currentValue=o}function qd(r,o,c){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===c)break;r=r.return}}function _a(r,o){ju=r,xd=fa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Nr=!0),r.firstContext=null)}function rn(r){var o=r._currentValue;if(xd!==r)if(r={context:r,memoizedValue:o,next:null},fa===null){if(ju===null)throw Error(n(308));fa=r,ju.dependencies={lanes:0,firstContext:r}}else fa=fa.next=r;return o}var wo=null;function Sd(r){wo===null?wo=[r]:wo.push(r)}function vv(r,o,c,y){var v=o.interleaved;return v===null?(c.next=c,Sd(o)):(c.next=v.next,v.next=c),o.interleaved=c,di(r,y)}function di(r,o){r.lanes|=o;var c=r.alternate;for(c!==null&&(c.lanes|=o),c=r,r=r.return;r!==null;)r.childLanes|=o,c=r.alternate,c!==null&&(c.childLanes|=o),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Oi=!1;function Cd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xv(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function pi(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Ai(r,o,c){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(tt&2)!==0){var v=y.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),y.pending=o,di(r,c)}return v=y.interleaved,v===null?(o.next=o,Sd(y)):(o.next=v.next,v.next=o),y.interleaved=o,di(r,c)}function Pu(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,Uo(r,c)}}function wv(r,o){var c=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,c===y)){var v=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var V={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};k===null?v=k=V:k=k.next=V,c=c.next}while(c!==null);k===null?v=k=o:k=k.next=o}else v=k=o;c={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:y.shared,effects:y.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}function Ru(r,o,c,y){var v=r.updateQueue;Oi=!1;var k=v.firstBaseUpdate,V=v.lastBaseUpdate,K=v.shared.pending;if(K!==null){v.shared.pending=null;var ee=K,fe=ee.next;ee.next=null,V===null?k=fe:V.next=fe,V=ee;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,K=qe.lastBaseUpdate,K!==V&&(K===null?qe.firstBaseUpdate=fe:K.next=fe,qe.lastBaseUpdate=ee))}if(k!==null){var Se=v.baseState;V=0,qe=fe=ee=null,K=k;do{var xe=K.lane,Oe=K.eventTime;if((y&xe)===xe){qe!==null&&(qe=qe.next={eventTime:Oe,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Le=r,De=K;switch(xe=o,Oe=c,De.tag){case 1:if(Le=De.payload,typeof Le=="function"){Se=Le.call(Oe,Se,xe);break e}Se=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=De.payload,xe=typeof Le=="function"?Le.call(Oe,Se,xe):Le,xe==null)break e;Se=oe({},Se,xe);break e;case 2:Oi=!0}}K.callback!==null&&K.lane!==0&&(r.flags|=64,xe=v.effects,xe===null?v.effects=[K]:xe.push(K))}else Oe={eventTime:Oe,lane:xe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},qe===null?(fe=qe=Oe,ee=Se):qe=qe.next=Oe,V|=xe;if(K=K.next,K===null){if(K=v.shared.pending,K===null)break;xe=K,K=xe.next,xe.next=null,v.lastBaseUpdate=xe,v.shared.pending=null}}while(!0);if(qe===null&&(ee=Se),v.baseState=ee,v.firstBaseUpdate=fe,v.lastBaseUpdate=qe,o=v.shared.interleaved,o!==null){v=o;do V|=v.lane,v=v.next;while(v!==o)}else k===null&&(v.shared.lanes=0);So|=V,r.lanes=V,r.memoizedState=Se}}function bv(r,o,c){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],v=y.callback;if(v!==null){if(y.callback=null,y=c,typeof v!="function")throw Error(n(191,v));v.call(y)}}}var as={},Bn=Ri(as),ss=Ri(as),us=Ri(as);function bo(r){if(r===as)throw Error(n(174));return r}function kd(r,o){switch(dt(us,o),dt(ss,r),dt(Bn,as),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Jt(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Jt(o,r)}yt(Bn),dt(Bn,o)}function ma(){yt(Bn),yt(ss),yt(us)}function qv(r){bo(us.current);var o=bo(Bn.current),c=Jt(o,r.type);o!==c&&(dt(ss,r),dt(Bn,c))}function Md(r){ss.current===r&&(yt(Bn),yt(ss))}var kt=Ri(0);function Vu(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ed=[];function Id(){for(var r=0;r<Ed.length;r++)Ed[r]._workInProgressVersionPrimary=null;Ed.length=0}var Fu=M.ReactCurrentDispatcher,Td=M.ReactCurrentBatchConfig,qo=0,Mt=null,Dt=null,Yt=null,Ou=!1,ls=!1,cs=0,nT=0;function cr(){throw Error(n(321))}function Nd(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!gn(r[c],o[c]))return!1;return!0}function jd(r,o,c,y,v,k){if(qo=k,Mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fu.current=r===null||r.memoizedState===null?sT:uT,r=c(y,v),ls){k=0;do{if(ls=!1,cs=0,25<=k)throw Error(n(301));k+=1,Yt=Dt=null,o.updateQueue=null,Fu.current=lT,r=c(y,v)}while(ls)}if(Fu.current=Du,o=Dt!==null&&Dt.next!==null,qo=0,Yt=Dt=Mt=null,Ou=!1,o)throw Error(n(300));return r}function Pd(){var r=cs!==0;return cs=0,r}function zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r,Yt}function nn(){if(Dt===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Dt.next;var o=Yt===null?Mt.memoizedState:Yt.next;if(o!==null)Yt=o,Dt=r;else{if(r===null)throw Error(n(310));Dt=r,r={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r}return Yt}function ds(r,o){return typeof o=="function"?o(r):o}function Rd(r){var o=nn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=Dt,v=y.baseQueue,k=c.pending;if(k!==null){if(v!==null){var V=v.next;v.next=k.next,k.next=V}y.baseQueue=v=k,c.pending=null}if(v!==null){k=v.next,y=y.baseState;var K=V=null,ee=null,fe=k;do{var qe=fe.lane;if((qo&qe)===qe)ee!==null&&(ee=ee.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),y=fe.hasEagerState?fe.eagerState:r(y,fe.action);else{var Se={lane:qe,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};ee===null?(K=ee=Se,V=y):ee=ee.next=Se,Mt.lanes|=qe,So|=qe}fe=fe.next}while(fe!==null&&fe!==k);ee===null?V=y:ee.next=K,gn(y,o.memoizedState)||(Nr=!0),o.memoizedState=y,o.baseState=V,o.baseQueue=ee,c.lastRenderedState=y}if(r=c.interleaved,r!==null){v=r;do k=v.lane,Mt.lanes|=k,So|=k,v=v.next;while(v!==r)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Vd(r){var o=nn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=c.dispatch,v=c.pending,k=o.memoizedState;if(v!==null){c.pending=null;var V=v=v.next;do k=r(k,V.action),V=V.next;while(V!==v);gn(k,o.memoizedState)||(Nr=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),c.lastRenderedState=k}return[k,y]}function Sv(){}function Cv(r,o){var c=Mt,y=nn(),v=o(),k=!gn(y.memoizedState,v);if(k&&(y.memoizedState=v,Nr=!0),y=y.queue,Fd(Ev.bind(null,c,y,r),[r]),y.getSnapshot!==o||k||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,ps(9,Mv.bind(null,c,y,v,o),void 0,null),Qt===null)throw Error(n(349));(qo&30)!==0||kv(c,o,v)}return v}function kv(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Mv(r,o,c,y){o.value=c,o.getSnapshot=y,Iv(o)&&Tv(r)}function Ev(r,o,c){return c(function(){Iv(o)&&Tv(r)})}function Iv(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!gn(r,c)}catch{return!0}}function Tv(r){var o=di(r,1);o!==null&&qn(o,r,1,-1)}function Nv(r){var o=zn();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:r},o.queue=r,r=r.dispatch=aT.bind(null,Mt,r),[o.memoizedState,r]}function ps(r,o,c,y){return r={tag:r,create:o,destroy:c,deps:y,next:null},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.lastEffect=r.next=r):(c=o.lastEffect,c===null?o.lastEffect=r.next=r:(y=c.next,c.next=r,r.next=y,o.lastEffect=r)),r}function jv(){return nn().memoizedState}function Au(r,o,c,y){var v=zn();Mt.flags|=r,v.memoizedState=ps(1|o,c,void 0,y===void 0?null:y)}function Lu(r,o,c,y){var v=nn();y=y===void 0?null:y;var k=void 0;if(Dt!==null){var V=Dt.memoizedState;if(k=V.destroy,y!==null&&Nd(y,V.deps)){v.memoizedState=ps(o,c,k,y);return}}Mt.flags|=r,v.memoizedState=ps(1|o,c,k,y)}function Pv(r,o){return Au(8390656,8,r,o)}function Fd(r,o){return Lu(2048,8,r,o)}function Rv(r,o){return Lu(4,2,r,o)}function Vv(r,o){return Lu(4,4,r,o)}function Fv(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Ov(r,o,c){return c=c!=null?c.concat([r]):null,Lu(4,4,Fv.bind(null,o,r),c)}function Od(){}function Av(r,o){var c=nn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Nd(o,y[1])?y[0]:(c.memoizedState=[r,o],r)}function Lv(r,o){var c=nn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Nd(o,y[1])?y[0]:(r=r(),c.memoizedState=[r,o],r)}function Dv(r,o,c){return(qo&21)===0?(r.baseState&&(r.baseState=!1,Nr=!0),r.memoizedState=c):(gn(c,o)||(c=Mr(),Mt.lanes|=c,So|=c,r.baseState=!0),o)}function iT(r,o){var c=Ne;Ne=c!==0&&4>c?c:4,r(!0);var y=Td.transition;Td.transition={};try{r(!1),o()}finally{Ne=c,Td.transition=y}}function Bv(){return nn().memoizedState}function oT(r,o,c){var y=zi(r);if(c={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null},zv(r))$v(o,c);else if(c=vv(r,o,c,y),c!==null){var v=qr();qn(c,r,y,v),Hv(c,o,y)}}function aT(r,o,c){var y=zi(r),v={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null};if(zv(r))$v(o,v);else{var k=r.alternate;if(r.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var V=o.lastRenderedState,K=k(V,c);if(v.hasEagerState=!0,v.eagerState=K,gn(K,V)){var ee=o.interleaved;ee===null?(v.next=v,Sd(o)):(v.next=ee.next,ee.next=v),o.interleaved=v;return}}catch{}finally{}c=vv(r,o,v,y),c!==null&&(v=qr(),qn(c,r,y,v),Hv(c,o,y))}}function zv(r){var o=r.alternate;return r===Mt||o!==null&&o===Mt}function $v(r,o){ls=Ou=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function Hv(r,o,c){if((c&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,Uo(r,c)}}var Du={readContext:rn,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},sT={readContext:rn,useCallback:function(r,o){return zn().memoizedState=[r,o===void 0?null:o],r},useContext:rn,useEffect:Pv,useImperativeHandle:function(r,o,c){return c=c!=null?c.concat([r]):null,Au(4194308,4,Fv.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Au(4194308,4,r,o)},useInsertionEffect:function(r,o){return Au(4,2,r,o)},useMemo:function(r,o){var c=zn();return o=o===void 0?null:o,r=r(),c.memoizedState=[r,o],r},useReducer:function(r,o,c){var y=zn();return o=c!==void 0?c(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=oT.bind(null,Mt,r),[y.memoizedState,r]},useRef:function(r){var o=zn();return r={current:r},o.memoizedState=r},useState:Nv,useDebugValue:Od,useDeferredValue:function(r){return zn().memoizedState=r},useTransition:function(){var r=Nv(!1),o=r[0];return r=iT.bind(null,r[1]),zn().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,c){var y=Mt,v=zn();if(wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Qt===null)throw Error(n(349));(qo&30)!==0||kv(y,o,c)}v.memoizedState=c;var k={value:c,getSnapshot:o};return v.queue=k,Pv(Ev.bind(null,y,k,r),[r]),y.flags|=2048,ps(9,Mv.bind(null,y,k,c,o),void 0,null),c},useId:function(){var r=zn(),o=Qt.identifierPrefix;if(wt){var c=ci,y=li;c=(y&~(1<<32-vr(y)-1)).toString(32)+c,o=":"+o+"R"+c,c=cs++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=nT++,o=":"+o+"r"+c.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},uT={readContext:rn,useCallback:Av,useContext:rn,useEffect:Fd,useImperativeHandle:Ov,useInsertionEffect:Rv,useLayoutEffect:Vv,useMemo:Lv,useReducer:Rd,useRef:jv,useState:function(){return Rd(ds)},useDebugValue:Od,useDeferredValue:function(r){var o=nn();return Dv(o,Dt.memoizedState,r)},useTransition:function(){var r=Rd(ds)[0],o=nn().memoizedState;return[r,o]},useMutableSource:Sv,useSyncExternalStore:Cv,useId:Bv,unstable_isNewReconciler:!1},lT={readContext:rn,useCallback:Av,useContext:rn,useEffect:Fd,useImperativeHandle:Ov,useInsertionEffect:Rv,useLayoutEffect:Vv,useMemo:Lv,useReducer:Vd,useRef:jv,useState:function(){return Vd(ds)},useDebugValue:Od,useDeferredValue:function(r){var o=nn();return Dt===null?o.memoizedState=r:Dv(o,Dt.memoizedState,r)},useTransition:function(){var r=Vd(ds)[0],o=nn().memoizedState;return[r,o]},useMutableSource:Sv,useSyncExternalStore:Cv,useId:Bv,unstable_isNewReconciler:!1};function xn(r,o){if(r&&r.defaultProps){o=oe({},o),r=r.defaultProps;for(var c in r)o[c]===void 0&&(o[c]=r[c]);return o}return o}function Ad(r,o,c,y){o=r.memoizedState,c=c(y,o),c=c==null?o:oe({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Bu={isMounted:function(r){return(r=r._reactInternals)?Et(r)===r:!1},enqueueSetState:function(r,o,c){r=r._reactInternals;var y=qr(),v=zi(r),k=pi(y,v);k.payload=o,c!=null&&(k.callback=c),o=Ai(r,k,v),o!==null&&(qn(o,r,v,y),Pu(o,r,v))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var y=qr(),v=zi(r),k=pi(y,v);k.tag=1,k.payload=o,c!=null&&(k.callback=c),o=Ai(r,k,v),o!==null&&(qn(o,r,v,y),Pu(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=qr(),y=zi(r),v=pi(c,y);v.tag=2,o!=null&&(v.callback=o),o=Ai(r,v,y),o!==null&&(qn(o,r,y,c),Pu(o,r,y))}};function Wv(r,o,c,y,v,k,V){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,k,V):o.prototype&&o.prototype.isPureReactComponent?!Za(c,y)||!Za(v,k):!0}function Uv(r,o,c){var y=!1,v=Vi,k=o.contextType;return typeof k=="object"&&k!==null?k=rn(k):(v=Tr(o)?go:lr.current,y=o.contextTypes,k=(y=y!=null)?ua(r,v):Vi),o=new o(c,k),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Bu,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=k),o}function Gv(r,o,c,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,y),o.state!==r&&Bu.enqueueReplaceState(o,o.state,null)}function Ld(r,o,c,y){var v=r.stateNode;v.props=c,v.state=r.memoizedState,v.refs={},Cd(r);var k=o.contextType;typeof k=="object"&&k!==null?v.context=rn(k):(k=Tr(o)?go:lr.current,v.context=ua(r,k)),v.state=r.memoizedState,k=o.getDerivedStateFromProps,typeof k=="function"&&(Ad(r,o,k,c),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Bu.enqueueReplaceState(v,v.state,null),Ru(r,c,v,y),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function ha(r,o){try{var c="",y=o;do c+=J(y),y=y.return;while(y);var v=c}catch(k){v=`
Error generating stack: `+k.message+`
`+k.stack}return{value:r,source:o,stack:v,digest:null}}function Dd(r,o,c){return{value:r,source:null,stack:c??null,digest:o??null}}function Bd(r,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function Kv(r,o,c){c=pi(-1,c),c.tag=3,c.payload={element:null};var y=o.value;return c.callback=function(){Ku||(Ku=!0,rp=y),Bd(r,o)},c}function Yv(r,o,c){c=pi(-1,c),c.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var v=o.value;c.payload=function(){return y(v)},c.callback=function(){Bd(r,o)}}var k=r.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(c.callback=function(){Bd(r,o),typeof y!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var V=o.stack;this.componentDidCatch(o.value,{componentStack:V!==null?V:""})}),c}function Qv(r,o,c){var y=r.pingCache;if(y===null){y=r.pingCache=new cT;var v=new Set;y.set(o,v)}else v=y.get(o),v===void 0&&(v=new Set,y.set(o,v));v.has(c)||(v.add(c),r=ST.bind(null,r,o,c),o.then(r,r))}function Xv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Zv(r,o,c,y,v){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=pi(-1,1),o.tag=2,Ai(c,o,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var dT=M.ReactCurrentOwner,Nr=!1;function br(r,o,c,y){o.child=r===null?gv(o,null,c,y):pa(o,r.child,c,y)}function Jv(r,o,c,y,v){c=c.render;var k=o.ref;return _a(o,v),y=jd(r,o,c,y,k,v),c=Pd(),r!==null&&!Nr?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,fi(r,o,v)):(wt&&c&&md(o),o.flags|=1,br(r,o,y,v),o.child)}function ex(r,o,c,y,v){if(r===null){var k=c.type;return typeof k=="function"&&!lp(k)&&k.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=k,tx(r,o,k,y,v)):(r=el(c.type,null,y,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(k=r.child,(r.lanes&v)===0){var V=k.memoizedProps;if(c=c.compare,c=c!==null?c:Za,c(V,y)&&r.ref===o.ref)return fi(r,o,v)}return o.flags|=1,r=Hi(k,y),r.ref=o.ref,r.return=o,o.child=r}function tx(r,o,c,y,v){if(r!==null){var k=r.memoizedProps;if(Za(k,y)&&r.ref===o.ref)if(Nr=!1,o.pendingProps=y=k,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Nr=!0);else return o.lanes=r.lanes,fi(r,o,v)}return zd(r,o,c,y,v)}function rx(r,o,c){var y=o.pendingProps,v=y.children,k=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(ga,$r),$r|=c;else{if((c&1073741824)===0)return r=k!==null?k.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,dt(ga,$r),$r|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=k!==null?k.baseLanes:c,dt(ga,$r),$r|=y}else k!==null?(y=k.baseLanes|c,o.memoizedState=null):y=c,dt(ga,$r),$r|=y;return br(r,o,v,c),o.child}function nx(r,o){var c=o.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function zd(r,o,c,y,v){var k=Tr(c)?go:lr.current;return k=ua(o,k),_a(o,v),c=jd(r,o,c,y,k,v),y=Pd(),r!==null&&!Nr?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,fi(r,o,v)):(wt&&y&&md(o),o.flags|=1,br(r,o,c,v),o.child)}function ix(r,o,c,y,v){if(Tr(c)){var k=!0;Cu(o)}else k=!1;if(_a(o,v),o.stateNode===null)$u(r,o),Uv(o,c,y),Ld(o,c,y,v),y=!0;else if(r===null){var V=o.stateNode,K=o.memoizedProps;V.props=K;var ee=V.context,fe=c.contextType;typeof fe=="object"&&fe!==null?fe=rn(fe):(fe=Tr(c)?go:lr.current,fe=ua(o,fe));var qe=c.getDerivedStateFromProps,Se=typeof qe=="function"||typeof V.getSnapshotBeforeUpdate=="function";Se||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==y||ee!==fe)&&Gv(o,V,y,fe),Oi=!1;var xe=o.memoizedState;V.state=xe,Ru(o,y,V,v),ee=o.memoizedState,K!==y||xe!==ee||Ir.current||Oi?(typeof qe=="function"&&(Ad(o,c,qe,y),ee=o.memoizedState),(K=Oi||Wv(o,c,K,y,xe,ee,fe))?(Se||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(o.flags|=4194308)):(typeof V.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=ee),V.props=y,V.state=ee,V.context=fe,y=K):(typeof V.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{V=o.stateNode,xv(r,o),K=o.memoizedProps,fe=o.type===o.elementType?K:xn(o.type,K),V.props=fe,Se=o.pendingProps,xe=V.context,ee=c.contextType,typeof ee=="object"&&ee!==null?ee=rn(ee):(ee=Tr(c)?go:lr.current,ee=ua(o,ee));var Oe=c.getDerivedStateFromProps;(qe=typeof Oe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(K!==Se||xe!==ee)&&Gv(o,V,y,ee),Oi=!1,xe=o.memoizedState,V.state=xe,Ru(o,y,V,v);var Le=o.memoizedState;K!==Se||xe!==Le||Ir.current||Oi?(typeof Oe=="function"&&(Ad(o,c,Oe,y),Le=o.memoizedState),(fe=Oi||Wv(o,c,fe,y,xe,Le,ee)||!1)?(qe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(y,Le,ee),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(y,Le,ee)),typeof V.componentDidUpdate=="function"&&(o.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof V.componentDidUpdate!="function"||K===r.memoizedProps&&xe===r.memoizedState||(o.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&xe===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Le),V.props=y,V.state=Le,V.context=ee,y=fe):(typeof V.componentDidUpdate!="function"||K===r.memoizedProps&&xe===r.memoizedState||(o.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&xe===r.memoizedState||(o.flags|=1024),y=!1)}return $d(r,o,c,y,k,v)}function $d(r,o,c,y,v,k){nx(r,o);var V=(o.flags&128)!==0;if(!y&&!V)return v&&lv(o,c,!1),fi(r,o,k);y=o.stateNode,dT.current=o;var K=V&&typeof c.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&V?(o.child=pa(o,r.child,null,k),o.child=pa(o,null,K,k)):br(r,o,K,k),o.memoizedState=y.state,v&&lv(o,c,!0),o.child}function ox(r){var o=r.stateNode;o.pendingContext?sv(r,o.pendingContext,o.pendingContext!==o.context):o.context&&sv(r,o.context,!1),kd(r,o.containerInfo)}function ax(r,o,c,y,v){return da(),vd(v),o.flags|=256,br(r,o,c,y),o.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function Wd(r){return{baseLanes:r,cachePool:null,transitions:null}}function sx(r,o,c){var y=o.pendingProps,v=kt.current,k=!1,V=(o.flags&128)!==0,K;if((K=V)||(K=r!==null&&r.memoizedState===null?!1:(v&2)!==0),K?(k=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),dt(kt,v&1),r===null)return gd(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(V=y.children,r=y.fallback,k?(y=o.mode,k=o.child,V={mode:"hidden",children:V},(y&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=V):k=tl(V,y,0,null),r=Eo(r,y,c,null),k.return=o,r.return=o,k.sibling=r,o.child=k,o.child.memoizedState=Wd(c),o.memoizedState=Hd,r):Ud(o,V));if(v=r.memoizedState,v!==null&&(K=v.dehydrated,K!==null))return pT(r,o,V,y,K,v,c);if(k){k=y.fallback,V=o.mode,v=r.child,K=v.sibling;var ee={mode:"hidden",children:y.children};return(V&1)===0&&o.child!==v?(y=o.child,y.childLanes=0,y.pendingProps=ee,o.deletions=null):(y=Hi(v,ee),y.subtreeFlags=v.subtreeFlags&14680064),K!==null?k=Hi(K,k):(k=Eo(k,V,c,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,V=r.child.memoizedState,V=V===null?Wd(c):{baseLanes:V.baseLanes|c,cachePool:null,transitions:V.transitions},k.memoizedState=V,k.childLanes=r.childLanes&~c,o.memoizedState=Hd,y}return k=r.child,r=k.sibling,y=Hi(k,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=c),y.return=o,y.sibling=null,r!==null&&(c=o.deletions,c===null?(o.deletions=[r],o.flags|=16):c.push(r)),o.child=y,o.memoizedState=null,y}function Ud(r,o){return o=tl({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function zu(r,o,c,y){return y!==null&&vd(y),pa(o,r.child,null,c),r=Ud(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function pT(r,o,c,y,v,k,V){if(c)return o.flags&256?(o.flags&=-257,y=Dd(Error(n(422))),zu(r,o,V,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(k=y.fallback,v=o.mode,y=tl({mode:"visible",children:y.children},v,0,null),k=Eo(k,v,V,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,(o.mode&1)!==0&&pa(o,r.child,null,V),o.child.memoizedState=Wd(V),o.memoizedState=Hd,k);if((o.mode&1)===0)return zu(r,o,V,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var K=y.dgst;return y=K,k=Error(n(419)),y=Dd(k,y,void 0),zu(r,o,V,y)}if(K=(V&r.childLanes)!==0,Nr||K){if(y=Qt,y!==null){switch(V&-V){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|V))!==0?0:v,v!==0&&v!==k.retryLane&&(k.retryLane=v,di(r,v),qn(y,r,v,-1))}return up(),y=Dd(Error(n(421))),zu(r,o,V,y)}return v.data==="$?"?(o.flags|=128,o.child=r.child,o=CT.bind(null,r),v._reactRetry=o,null):(r=k.treeContext,zr=Pi(v.nextSibling),Br=o,wt=!0,vn=null,r!==null&&(en[tn++]=li,en[tn++]=ci,en[tn++]=vo,li=r.id,ci=r.overflow,vo=o),o=Ud(o,y.children),o.flags|=4096,o)}function ux(r,o,c){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),qd(r.return,o,c)}function Gd(r,o,c,y,v){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:c,tailMode:v}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=c,k.tailMode=v)}function lx(r,o,c){var y=o.pendingProps,v=y.revealOrder,k=y.tail;if(br(r,o,y.children,c),y=kt.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ux(r,c,o);else if(r.tag===19)ux(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(dt(kt,y),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)r=c.alternate,r!==null&&Vu(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Gd(o,!1,v,c,k);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Vu(r)===null){o.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Gd(o,!0,c,null,k);break;case"together":Gd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function $u(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function fi(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),So|=o.lanes,(c&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Hi(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Hi(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function fT(r,o,c){switch(o.tag){case 3:ox(o),da();break;case 5:qv(o);break;case 1:Tr(o.type)&&Cu(o);break;case 4:kd(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,v=o.memoizedProps.value;dt(Nu,y._currentValue),y._currentValue=v;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(dt(kt,kt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?sx(r,o,c):(dt(kt,kt.current&1),r=fi(r,o,c),r!==null?r.sibling:null);dt(kt,kt.current&1);break;case 19:if(y=(c&o.childLanes)!==0,(r.flags&128)!==0){if(y)return lx(r,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),dt(kt,kt.current),y)break;return null;case 22:case 23:return o.lanes=0,rx(r,o,c)}return fi(r,o,c)}var cx,Kd,dx,px;cx=function(r,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Kd=function(){},dx=function(r,o,c,y){var v=r.memoizedProps;if(v!==y){r=o.stateNode,bo(Bn.current);var k=null;switch(c){case"input":v=Pe(r,v),y=Pe(r,y),k=[];break;case"select":v=oe({},v,{value:void 0}),y=oe({},y,{value:void 0}),k=[];break;case"textarea":v=ct(r,v),y=ct(r,y),k=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=bu)}Nt(c,y);var V;c=null;for(fe in v)if(!y.hasOwnProperty(fe)&&v.hasOwnProperty(fe)&&v[fe]!=null)if(fe==="style"){var K=v[fe];for(V in K)K.hasOwnProperty(V)&&(c||(c={}),c[V]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(a.hasOwnProperty(fe)?k||(k=[]):(k=k||[]).push(fe,null));for(fe in y){var ee=y[fe];if(K=v!=null?v[fe]:void 0,y.hasOwnProperty(fe)&&ee!==K&&(ee!=null||K!=null))if(fe==="style")if(K){for(V in K)!K.hasOwnProperty(V)||ee&&ee.hasOwnProperty(V)||(c||(c={}),c[V]="");for(V in ee)ee.hasOwnProperty(V)&&K[V]!==ee[V]&&(c||(c={}),c[V]=ee[V])}else c||(k||(k=[]),k.push(fe,c)),c=ee;else fe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,K=K?K.__html:void 0,ee!=null&&K!==ee&&(k=k||[]).push(fe,ee)):fe==="children"?typeof ee!="string"&&typeof ee!="number"||(k=k||[]).push(fe,""+ee):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(a.hasOwnProperty(fe)?(ee!=null&&fe==="onScroll"&&ht("scroll",r),k||K===ee||(k=[])):(k=k||[]).push(fe,ee))}c&&(k=k||[]).push("style",c);var fe=k;(o.updateQueue=fe)&&(o.flags|=4)}},px=function(r,o,c,y){c!==y&&(o.flags|=4)};function fs(r,o){if(!wt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var y=null;c!==null;)c.alternate!==null&&(y=c),c=c.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function dr(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,y=0;if(o)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=y,r.childLanes=c,o}function _T(r,o,c){var y=o.pendingProps;switch(hd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(o),null;case 1:return Tr(o.type)&&Su(),dr(o),null;case 3:return y=o.stateNode,ma(),yt(Ir),yt(lr),Id(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(Iu(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vn!==null&&(op(vn),vn=null))),Kd(r,o),dr(o),null;case 5:Md(o);var v=bo(us.current);if(c=o.type,r!==null&&o.stateNode!=null)dx(r,o,c,y,v),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(n(166));return dr(o),null}if(r=bo(Bn.current),Iu(o)){y=o.stateNode,c=o.type;var k=o.memoizedProps;switch(y[Dn]=o,y[ns]=k,r=(o.mode&1)!==0,c){case"dialog":ht("cancel",y),ht("close",y);break;case"iframe":case"object":case"embed":ht("load",y);break;case"video":case"audio":for(v=0;v<es.length;v++)ht(es[v],y);break;case"source":ht("error",y);break;case"img":case"image":case"link":ht("error",y),ht("load",y);break;case"details":ht("toggle",y);break;case"input":Fe(y,k),ht("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!k.multiple},ht("invalid",y);break;case"textarea":st(y,k),ht("invalid",y)}Nt(c,k),v=null;for(var V in k)if(k.hasOwnProperty(V)){var K=k[V];V==="children"?typeof K=="string"?y.textContent!==K&&(k.suppressHydrationWarning!==!0&&wu(y.textContent,K,r),v=["children",K]):typeof K=="number"&&y.textContent!==""+K&&(k.suppressHydrationWarning!==!0&&wu(y.textContent,K,r),v=["children",""+K]):a.hasOwnProperty(V)&&K!=null&&V==="onScroll"&&ht("scroll",y)}switch(c){case"input":je(y),rt(y,k,!0);break;case"textarea":je(y),Zt(y);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(y.onclick=bu)}y=v,o.updateQueue=y,y!==null&&(o.flags|=4)}else{V=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=zt(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=V.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=V.createElement(c,{is:y.is}):(r=V.createElement(c),c==="select"&&(V=r,y.multiple?V.multiple=!0:y.size&&(V.size=y.size))):r=V.createElementNS(r,c),r[Dn]=o,r[ns]=y,cx(r,o,!1,!1),o.stateNode=r;e:{switch(V=cn(c,y),c){case"dialog":ht("cancel",r),ht("close",r),v=y;break;case"iframe":case"object":case"embed":ht("load",r),v=y;break;case"video":case"audio":for(v=0;v<es.length;v++)ht(es[v],r);v=y;break;case"source":ht("error",r),v=y;break;case"img":case"image":case"link":ht("error",r),ht("load",r),v=y;break;case"details":ht("toggle",r),v=y;break;case"input":Fe(r,y),v=Pe(r,y),ht("invalid",r);break;case"option":v=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},v=oe({},y,{value:void 0}),ht("invalid",r);break;case"textarea":st(r,y),v=ct(r,y),ht("invalid",r);break;default:v=y}Nt(c,v),K=v;for(k in K)if(K.hasOwnProperty(k)){var ee=K[k];k==="style"?Qe(r,ee):k==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Or(r,ee)):k==="children"?typeof ee=="string"?(c!=="textarea"||ee!=="")&&Tt(r,ee):typeof ee=="number"&&Tt(r,""+ee):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?ee!=null&&k==="onScroll"&&ht("scroll",r):ee!=null&&S(r,k,ee,V))}switch(c){case"input":je(r),rt(r,y,!1);break;case"textarea":je(r),Zt(r);break;case"option":y.value!=null&&r.setAttribute("value",""+ae(y.value));break;case"select":r.multiple=!!y.multiple,k=y.value,k!=null?lt(r,!!y.multiple,k,!1):y.defaultValue!=null&&lt(r,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=bu)}switch(c){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return dr(o),null;case 6:if(r&&o.stateNode!=null)px(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(c=bo(us.current),bo(Bn.current),Iu(o)){if(y=o.stateNode,c=o.memoizedProps,y[Dn]=o,(k=y.nodeValue!==c)&&(r=Br,r!==null))switch(r.tag){case 3:wu(y.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wu(y.nodeValue,c,(r.mode&1)!==0)}k&&(o.flags|=4)}else y=(c.nodeType===9?c:c.ownerDocument).createTextNode(y),y[Dn]=o,o.stateNode=y}return dr(o),null;case 13:if(yt(kt),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&zr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)mv(),da(),o.flags|=98560,k=!1;else if(k=Iu(o),y!==null&&y.dehydrated!==null){if(r===null){if(!k)throw Error(n(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[Dn]=o}else da(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;dr(o),k=!1}else vn!==null&&(op(vn),vn=null),k=!0;if(!k)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(kt.current&1)!==0?Bt===0&&(Bt=3):up())),o.updateQueue!==null&&(o.flags|=4),dr(o),null);case 4:return ma(),Kd(r,o),r===null&&ts(o.stateNode.containerInfo),dr(o),null;case 10:return bd(o.type._context),dr(o),null;case 17:return Tr(o.type)&&Su(),dr(o),null;case 19:if(yt(kt),k=o.memoizedState,k===null)return dr(o),null;if(y=(o.flags&128)!==0,V=k.rendering,V===null)if(y)fs(k,!1);else{if(Bt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(V=Vu(r),V!==null){for(o.flags|=128,fs(k,!1),y=V.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=c,c=o.child;c!==null;)k=c,r=y,k.flags&=14680066,V=k.alternate,V===null?(k.childLanes=0,k.lanes=r,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=V.childLanes,k.lanes=V.lanes,k.child=V.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=V.memoizedProps,k.memoizedState=V.memoizedState,k.updateQueue=V.updateQueue,k.type=V.type,r=V.dependencies,k.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return dt(kt,kt.current&1|2),o.child}r=r.sibling}k.tail!==null&&_t()>va&&(o.flags|=128,y=!0,fs(k,!1),o.lanes=4194304)}else{if(!y)if(r=Vu(V),r!==null){if(o.flags|=128,y=!0,c=r.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),fs(k,!0),k.tail===null&&k.tailMode==="hidden"&&!V.alternate&&!wt)return dr(o),null}else 2*_t()-k.renderingStartTime>va&&c!==1073741824&&(o.flags|=128,y=!0,fs(k,!1),o.lanes=4194304);k.isBackwards?(V.sibling=o.child,o.child=V):(c=k.last,c!==null?c.sibling=V:o.child=V,k.last=V)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=_t(),o.sibling=null,c=kt.current,dt(kt,y?c&1|2:c&1),o):(dr(o),null);case 22:case 23:return sp(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?($r&1073741824)!==0&&(dr(o),o.subtreeFlags&6&&(o.flags|=8192)):dr(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function mT(r,o){switch(hd(o),o.tag){case 1:return Tr(o.type)&&Su(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ma(),yt(Ir),yt(lr),Id(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Md(o),null;case 13:if(yt(kt),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));da()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return yt(kt),null;case 4:return ma(),null;case 10:return bd(o.type._context),null;case 22:case 23:return sp(),null;case 24:return null;default:return null}}var Hu=!1,pr=!1,hT=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function ya(r,o){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(y){It(r,o,y)}else c.current=null}function Yd(r,o,c){try{c()}catch(y){It(r,o,y)}}var fx=!1;function yT(r,o){if(sd=Zo,r=Wg(),Jc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var y=c.getSelection&&c.getSelection();if(y&&y.rangeCount!==0){c=y.anchorNode;var v=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var V=0,K=-1,ee=-1,fe=0,qe=0,Se=r,xe=null;t:for(;;){for(var Oe;Se!==c||v!==0&&Se.nodeType!==3||(K=V+v),Se!==k||y!==0&&Se.nodeType!==3||(ee=V+y),Se.nodeType===3&&(V+=Se.nodeValue.length),(Oe=Se.firstChild)!==null;)xe=Se,Se=Oe;for(;;){if(Se===r)break t;if(xe===c&&++fe===v&&(K=V),xe===k&&++qe===y&&(ee=V),(Oe=Se.nextSibling)!==null)break;Se=xe,xe=Se.parentNode}Se=Oe}c=K===-1||ee===-1?null:{start:K,end:ee}}else c=null}c=c||{start:0,end:0}}else c=null;for(ud={focusedElem:r,selectionRange:c},Zo=!1,Ae=o;Ae!==null;)if(o=Ae,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ae=r;else for(;Ae!==null;){o=Ae;try{var Le=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var De=Le.memoizedProps,jt=Le.memoizedState,se=o.stateNode,ie=se.getSnapshotBeforeUpdate(o.elementType===o.type?De:xn(o.type,De),jt);se.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var le=o.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){It(o,o.return,Me)}if(r=o.sibling,r!==null){r.return=o.return,Ae=r;break}Ae=o.return}return Le=fx,fx=!1,Le}function _s(r,o,c){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&r)===r){var k=v.destroy;v.destroy=void 0,k!==void 0&&Yd(o,c,k)}v=v.next}while(v!==y)}}function Wu(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&r)===r){var y=c.create;c.destroy=y()}c=c.next}while(c!==o)}}function Qd(r){var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof o=="function"?o(r):o.current=r}}function _x(r){var o=r.alternate;o!==null&&(r.alternate=null,_x(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Dn],delete o[ns],delete o[pd],delete o[JI],delete o[eT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function mx(r){return r.tag===5||r.tag===3||r.tag===4}function hx(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||mx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(r,o):c.insertBefore(r,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(r,c)):(o=c,o.appendChild(r)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=bu));else if(y!==4&&(r=r.child,r!==null))for(Xd(r,o,c),r=r.sibling;r!==null;)Xd(r,o,c),r=r.sibling}function Zd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(Zd(r,o,c),r=r.sibling;r!==null;)Zd(r,o,c),r=r.sibling}var rr=null,wn=!1;function Li(r,o,c){for(c=c.child;c!==null;)yx(r,o,c),c=c.sibling}function yx(r,o,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Fn,c)}catch{}switch(c.tag){case 5:pr||ya(c,o);case 6:var y=rr,v=wn;rr=null,Li(r,o,c),rr=y,wn=v,rr!==null&&(wn?(r=rr,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):rr.removeChild(c.stateNode));break;case 18:rr!==null&&(wn?(r=rr,c=c.stateNode,r.nodeType===8?dd(r.parentNode,c):r.nodeType===1&&dd(r,c),fo(r)):dd(rr,c.stateNode));break;case 4:y=rr,v=wn,rr=c.stateNode.containerInfo,wn=!0,Li(r,o,c),rr=y,wn=v;break;case 0:case 11:case 14:case 15:if(!pr&&(y=c.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var k=v,V=k.destroy;k=k.tag,V!==void 0&&((k&2)!==0||(k&4)!==0)&&Yd(c,o,V),v=v.next}while(v!==y)}Li(r,o,c);break;case 1:if(!pr&&(ya(c,o),y=c.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=c.memoizedProps,y.state=c.memoizedState,y.componentWillUnmount()}catch(K){It(c,o,K)}Li(r,o,c);break;case 21:Li(r,o,c);break;case 22:c.mode&1?(pr=(y=pr)||c.memoizedState!==null,Li(r,o,c),pr=y):Li(r,o,c);break;default:Li(r,o,c)}}function gx(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new hT),o.forEach(function(y){var v=kT.bind(null,r,y);c.has(y)||(c.add(y),y.then(v,v))})}}function bn(r,o){var c=o.deletions;if(c!==null)for(var y=0;y<c.length;y++){var v=c[y];try{var k=r,V=o,K=V;e:for(;K!==null;){switch(K.tag){case 5:rr=K.stateNode,wn=!1;break e;case 3:rr=K.stateNode.containerInfo,wn=!0;break e;case 4:rr=K.stateNode.containerInfo,wn=!0;break e}K=K.return}if(rr===null)throw Error(n(160));yx(k,V,v),rr=null,wn=!1;var ee=v.alternate;ee!==null&&(ee.return=null),v.return=null}catch(fe){It(v,o,fe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)vx(o,r),o=o.sibling}function vx(r,o){var c=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bn(o,r),$n(r),y&4){try{_s(3,r,r.return),Wu(3,r)}catch(De){It(r,r.return,De)}try{_s(5,r,r.return)}catch(De){It(r,r.return,De)}}break;case 1:bn(o,r),$n(r),y&512&&c!==null&&ya(c,c.return);break;case 5:if(bn(o,r),$n(r),y&512&&c!==null&&ya(c,c.return),r.flags&32){var v=r.stateNode;try{Tt(v,"")}catch(De){It(r,r.return,De)}}if(y&4&&(v=r.stateNode,v!=null)){var k=r.memoizedProps,V=c!==null?c.memoizedProps:k,K=r.type,ee=r.updateQueue;if(r.updateQueue=null,ee!==null)try{K==="input"&&k.type==="radio"&&k.name!=null&&We(v,k),cn(K,V);var fe=cn(K,k);for(V=0;V<ee.length;V+=2){var qe=ee[V],Se=ee[V+1];qe==="style"?Qe(v,Se):qe==="dangerouslySetInnerHTML"?Or(v,Se):qe==="children"?Tt(v,Se):S(v,qe,Se,fe)}switch(K){case"input":Be(v,k);break;case"textarea":Cr(v,k);break;case"select":var xe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!k.multiple;var Oe=k.value;Oe!=null?lt(v,!!k.multiple,Oe,!1):xe!==!!k.multiple&&(k.defaultValue!=null?lt(v,!!k.multiple,k.defaultValue,!0):lt(v,!!k.multiple,k.multiple?[]:"",!1))}v[ns]=k}catch(De){It(r,r.return,De)}}break;case 6:if(bn(o,r),$n(r),y&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,k=r.memoizedProps;try{v.nodeValue=k}catch(De){It(r,r.return,De)}}break;case 3:if(bn(o,r),$n(r),y&4&&c!==null&&c.memoizedState.isDehydrated)try{fo(o.containerInfo)}catch(De){It(r,r.return,De)}break;case 4:bn(o,r),$n(r);break;case 13:bn(o,r),$n(r),v=r.child,v.flags&8192&&(k=v.memoizedState!==null,v.stateNode.isHidden=k,!k||v.alternate!==null&&v.alternate.memoizedState!==null||(tp=_t())),y&4&&gx(r);break;case 22:if(qe=c!==null&&c.memoizedState!==null,r.mode&1?(pr=(fe=pr)||qe,bn(o,r),pr=fe):bn(o,r),$n(r),y&8192){if(fe=r.memoizedState!==null,(r.stateNode.isHidden=fe)&&!qe&&(r.mode&1)!==0)for(Ae=r,qe=r.child;qe!==null;){for(Se=Ae=qe;Ae!==null;){switch(xe=Ae,Oe=xe.child,xe.tag){case 0:case 11:case 14:case 15:_s(4,xe,xe.return);break;case 1:ya(xe,xe.return);var Le=xe.stateNode;if(typeof Le.componentWillUnmount=="function"){y=xe,c=xe.return;try{o=y,Le.props=o.memoizedProps,Le.state=o.memoizedState,Le.componentWillUnmount()}catch(De){It(y,c,De)}}break;case 5:ya(xe,xe.return);break;case 22:if(xe.memoizedState!==null){bx(Se);continue}}Oe!==null?(Oe.return=xe,Ae=Oe):bx(Se)}qe=qe.sibling}e:for(qe=null,Se=r;;){if(Se.tag===5){if(qe===null){qe=Se;try{v=Se.stateNode,fe?(k=v.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(K=Se.stateNode,ee=Se.memoizedProps.style,V=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,K.style.display=$t("display",V))}catch(De){It(r,r.return,De)}}}else if(Se.tag===6){if(qe===null)try{Se.stateNode.nodeValue=fe?"":Se.memoizedProps}catch(De){It(r,r.return,De)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===r)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===r)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===r)break e;qe===Se&&(qe=null),Se=Se.return}qe===Se&&(qe=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:bn(o,r),$n(r),y&4&&gx(r);break;case 21:break;default:bn(o,r),$n(r)}}function $n(r){var o=r.flags;if(o&2){try{e:{for(var c=r.return;c!==null;){if(mx(c)){var y=c;break e}c=c.return}throw Error(n(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&(Tt(v,""),y.flags&=-33);var k=hx(r);Zd(r,k,v);break;case 3:case 4:var V=y.stateNode.containerInfo,K=hx(r);Xd(r,K,V);break;default:throw Error(n(161))}}catch(ee){It(r,r.return,ee)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function gT(r,o,c){Ae=r,xx(r)}function xx(r,o,c){for(var y=(r.mode&1)!==0;Ae!==null;){var v=Ae,k=v.child;if(v.tag===22&&y){var V=v.memoizedState!==null||Hu;if(!V){var K=v.alternate,ee=K!==null&&K.memoizedState!==null||pr;K=Hu;var fe=pr;if(Hu=V,(pr=ee)&&!fe)for(Ae=v;Ae!==null;)V=Ae,ee=V.child,V.tag===22&&V.memoizedState!==null?qx(v):ee!==null?(ee.return=V,Ae=ee):qx(v);for(;k!==null;)Ae=k,xx(k),k=k.sibling;Ae=v,Hu=K,pr=fe}wx(r)}else(v.subtreeFlags&8772)!==0&&k!==null?(k.return=v,Ae=k):wx(r)}}function wx(r){for(;Ae!==null;){var o=Ae;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:pr||Wu(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!pr)if(c===null)y.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:xn(o.type,c.memoizedProps);y.componentDidUpdate(v,c.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var k=o.updateQueue;k!==null&&bv(o,k,y);break;case 3:var V=o.updateQueue;if(V!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}bv(o,V,c)}break;case 5:var K=o.stateNode;if(c===null&&o.flags&4){c=K;var ee=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&c.focus();break;case"img":ee.src&&(c.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var fe=o.alternate;if(fe!==null){var qe=fe.memoizedState;if(qe!==null){var Se=qe.dehydrated;Se!==null&&fo(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}pr||o.flags&512&&Qd(o)}catch(xe){It(o,o.return,xe)}}if(o===r){Ae=null;break}if(c=o.sibling,c!==null){c.return=o.return,Ae=c;break}Ae=o.return}}function bx(r){for(;Ae!==null;){var o=Ae;if(o===r){Ae=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Ae=c;break}Ae=o.return}}function qx(r){for(;Ae!==null;){var o=Ae;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Wu(4,o)}catch(ee){It(o,c,ee)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var v=o.return;try{y.componentDidMount()}catch(ee){It(o,v,ee)}}var k=o.return;try{Qd(o)}catch(ee){It(o,k,ee)}break;case 5:var V=o.return;try{Qd(o)}catch(ee){It(o,V,ee)}}}catch(ee){It(o,o.return,ee)}if(o===r){Ae=null;break}var K=o.sibling;if(K!==null){K.return=o.return,Ae=K;break}Ae=o.return}}var vT=Math.ceil,Uu=M.ReactCurrentDispatcher,Jd=M.ReactCurrentOwner,on=M.ReactCurrentBatchConfig,tt=0,Qt=null,Vt=null,nr=0,$r=0,ga=Ri(0),Bt=0,ms=null,So=0,Gu=0,ep=0,hs=null,jr=null,tp=0,va=1/0,_i=null,Ku=!1,rp=null,Di=null,Yu=!1,Bi=null,Qu=0,ys=0,np=null,Xu=-1,Zu=0;function qr(){return(tt&6)!==0?_t():Xu!==-1?Xu:Xu=_t()}function zi(r){return(r.mode&1)===0?1:(tt&2)!==0&&nr!==0?nr&-nr:rT.transition!==null?(Zu===0&&(Zu=Mr()),Zu):(r=Ne,r!==0||(r=window.event,r=r===void 0?16:fu(r.type)),r)}function qn(r,o,c,y){if(50<ys)throw ys=0,np=null,Error(n(185));xr(r,c,y),((tt&2)===0||r!==Qt)&&(r===Qt&&((tt&2)===0&&(Gu|=c),Bt===4&&$i(r,nr)),Pr(r,y),c===1&&tt===0&&(o.mode&1)===0&&(va=_t()+500,ku&&Fi()))}function Pr(r,o){var c=r.callbackNode;Ha(r,o);var y=_n(r,r===Qt?nr:0);if(y===0)c!==null&&Ci(c),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(c!=null&&Ci(c),o===1)r.tag===0?tT(Cx.bind(null,r)):cv(Cx.bind(null,r)),XI(function(){(tt&6)===0&&Fi()}),c=null;else{switch(du(y)){case 1:c=dn;break;case 4:c=ti;break;case 16:c=pn;break;case 536870912:c=Zr;break;default:c=pn}c=Px(c,Sx.bind(null,r))}r.callbackPriority=o,r.callbackNode=c}}function Sx(r,o){if(Xu=-1,Zu=0,(tt&6)!==0)throw Error(n(327));var c=r.callbackNode;if(xa()&&r.callbackNode!==c)return null;var y=_n(r,r===Qt?nr:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=Ju(r,y);else{o=y;var v=tt;tt|=2;var k=Mx();(Qt!==r||nr!==o)&&(_i=null,va=_t()+500,ko(r,o));do try{bT();break}catch(K){kx(r,K)}while(!0);wd(),Uu.current=k,tt=v,Vt!==null?o=0:(Qt=null,nr=0,o=Bt)}if(o!==0){if(o===2&&(v=tr(r),v!==0&&(y=v,o=ip(r,v))),o===1)throw c=ms,ko(r,0),$i(r,y),Pr(r,_t()),c;if(o===6)$i(r,y);else{if(v=r.current.alternate,(y&30)===0&&!xT(v)&&(o=Ju(r,y),o===2&&(k=tr(r),k!==0&&(y=k,o=ip(r,k))),o===1))throw c=ms,ko(r,0),$i(r,y),Pr(r,_t()),c;switch(r.finishedWork=v,r.finishedLanes=y,o){case 0:case 1:throw Error(n(345));case 2:Mo(r,jr,_i);break;case 3:if($i(r,y),(y&130023424)===y&&(o=tp+500-_t(),10<o)){if(_n(r,0)!==0)break;if(v=r.suspendedLanes,(v&y)!==y){qr(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=cd(Mo.bind(null,r,jr,_i),o);break}Mo(r,jr,_i);break;case 4:if($i(r,y),(y&4194240)===y)break;for(o=r.eventTimes,v=-1;0<y;){var V=31-vr(y);k=1<<V,V=o[V],V>v&&(v=V),y&=~k}if(y=v,y=_t()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*vT(y/1960))-y,10<y){r.timeoutHandle=cd(Mo.bind(null,r,jr,_i),y);break}Mo(r,jr,_i);break;case 5:Mo(r,jr,_i);break;default:throw Error(n(329))}}}return Pr(r,_t()),r.callbackNode===c?Sx.bind(null,r):null}function ip(r,o){var c=hs;return r.current.memoizedState.isDehydrated&&(ko(r,o).flags|=256),r=Ju(r,o),r!==2&&(o=jr,jr=c,o!==null&&op(o)),r}function op(r){jr===null?jr=r:jr.push.apply(jr,r)}function xT(r){for(var o=r;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var y=0;y<c.length;y++){var v=c[y],k=v.getSnapshot;v=v.value;try{if(!gn(k(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $i(r,o){for(o&=~ep,o&=~Gu,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var c=31-vr(o),y=1<<c;r[c]=-1,o&=~y}}function Cx(r){if((tt&6)!==0)throw Error(n(327));xa();var o=_n(r,0);if((o&1)===0)return Pr(r,_t()),null;var c=Ju(r,o);if(r.tag!==0&&c===2){var y=tr(r);y!==0&&(o=y,c=ip(r,y))}if(c===1)throw c=ms,ko(r,0),$i(r,o),Pr(r,_t()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Mo(r,jr,_i),Pr(r,_t()),null}function ap(r,o){var c=tt;tt|=1;try{return r(o)}finally{tt=c,tt===0&&(va=_t()+500,ku&&Fi())}}function Co(r){Bi!==null&&Bi.tag===0&&(tt&6)===0&&xa();var o=tt;tt|=1;var c=on.transition,y=Ne;try{if(on.transition=null,Ne=1,r)return r()}finally{Ne=y,on.transition=c,tt=o,(tt&6)===0&&Fi()}}function sp(){$r=ga.current,yt(ga)}function ko(r,o){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,QI(c)),Vt!==null)for(c=Vt.return;c!==null;){var y=c;switch(hd(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Su();break;case 3:ma(),yt(Ir),yt(lr),Id();break;case 5:Md(y);break;case 4:ma();break;case 13:yt(kt);break;case 19:yt(kt);break;case 10:bd(y.type._context);break;case 22:case 23:sp()}c=c.return}if(Qt=r,Vt=r=Hi(r.current,null),nr=$r=o,Bt=0,ms=null,ep=Gu=So=0,jr=hs=null,wo!==null){for(o=0;o<wo.length;o++)if(c=wo[o],y=c.interleaved,y!==null){c.interleaved=null;var v=y.next,k=c.pending;if(k!==null){var V=k.next;k.next=v,y.next=V}c.pending=y}wo=null}return r}function kx(r,o){do{var c=Vt;try{if(wd(),Fu.current=Du,Ou){for(var y=Mt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}Ou=!1}if(qo=0,Yt=Dt=Mt=null,ls=!1,cs=0,Jd.current=null,c===null||c.return===null){Bt=1,ms=o,Vt=null;break}e:{var k=r,V=c.return,K=c,ee=o;if(o=nr,K.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var fe=ee,qe=K,Se=qe.tag;if((qe.mode&1)===0&&(Se===0||Se===11||Se===15)){var xe=qe.alternate;xe?(qe.updateQueue=xe.updateQueue,qe.memoizedState=xe.memoizedState,qe.lanes=xe.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Oe=Xv(V);if(Oe!==null){Oe.flags&=-257,Zv(Oe,V,K,k,o),Oe.mode&1&&Qv(k,fe,o),o=Oe,ee=fe;var Le=o.updateQueue;if(Le===null){var De=new Set;De.add(ee),o.updateQueue=De}else Le.add(ee);break e}else{if((o&1)===0){Qv(k,fe,o),up();break e}ee=Error(n(426))}}else if(wt&&K.mode&1){var jt=Xv(V);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),Zv(jt,V,K,k,o),vd(ha(ee,K));break e}}k=ee=ha(ee,K),Bt!==4&&(Bt=2),hs===null?hs=[k]:hs.push(k),k=V;do{switch(k.tag){case 3:k.flags|=65536,o&=-o,k.lanes|=o;var se=Kv(k,ee,o);wv(k,se);break e;case 1:K=ee;var ie=k.type,le=k.stateNode;if((k.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Di===null||!Di.has(le)))){k.flags|=65536,o&=-o,k.lanes|=o;var Me=Yv(k,K,o);wv(k,Me);break e}}k=k.return}while(k!==null)}Ix(c)}catch(ze){o=ze,Vt===c&&c!==null&&(Vt=c=c.return);continue}break}while(!0)}function Mx(){var r=Uu.current;return Uu.current=Du,r===null?Du:r}function up(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Qt===null||(So&268435455)===0&&(Gu&268435455)===0||$i(Qt,nr)}function Ju(r,o){var c=tt;tt|=2;var y=Mx();(Qt!==r||nr!==o)&&(_i=null,ko(r,o));do try{wT();break}catch(v){kx(r,v)}while(!0);if(wd(),tt=c,Uu.current=y,Vt!==null)throw Error(n(261));return Qt=null,nr=0,Bt}function wT(){for(;Vt!==null;)Ex(Vt)}function bT(){for(;Vt!==null&&!io();)Ex(Vt)}function Ex(r){var o=jx(r.alternate,r,$r);r.memoizedProps=r.pendingProps,o===null?Ix(r):Vt=o,Jd.current=null}function Ix(r){var o=r;do{var c=o.alternate;if(r=o.return,(o.flags&32768)===0){if(c=_T(c,o,$r),c!==null){Vt=c;return}}else{if(c=mT(c,o),c!==null){c.flags&=32767,Vt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Bt=6,Vt=null;return}}if(o=o.sibling,o!==null){Vt=o;return}Vt=o=r}while(o!==null);Bt===0&&(Bt=5)}function Mo(r,o,c){var y=Ne,v=on.transition;try{on.transition=null,Ne=1,qT(r,o,c,y)}finally{on.transition=v,Ne=y}return null}function qT(r,o,c,y){do xa();while(Bi!==null);if((tt&6)!==0)throw Error(n(327));c=r.finishedWork;var v=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var k=c.lanes|c.childLanes;if(ni(r,k),r===Qt&&(Vt=Qt=null,nr=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Yu||(Yu=!0,Px(pn,function(){return xa(),null})),k=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||k){k=on.transition,on.transition=null;var V=Ne;Ne=1;var K=tt;tt|=4,Jd.current=null,yT(r,c),vx(c,r),$I(ud),Zo=!!sd,ud=sd=null,r.current=c,gT(c),Jn(),tt=K,Ne=V,on.transition=k}else r.current=c;if(Yu&&(Yu=!1,Bi=r,Qu=v),k=r.pendingLanes,k===0&&(Di=null),Ho(c.stateNode),Pr(r,_t()),o!==null)for(y=r.onRecoverableError,c=0;c<o.length;c++)v=o[c],y(v.value,{componentStack:v.stack,digest:v.digest});if(Ku)throw Ku=!1,r=rp,rp=null,r;return(Qu&1)!==0&&r.tag!==0&&xa(),k=r.pendingLanes,(k&1)!==0?r===np?ys++:(ys=0,np=r):ys=0,Fi(),null}function xa(){if(Bi!==null){var r=du(Qu),o=on.transition,c=Ne;try{if(on.transition=null,Ne=16>r?16:r,Bi===null)var y=!1;else{if(r=Bi,Bi=null,Qu=0,(tt&6)!==0)throw Error(n(331));var v=tt;for(tt|=4,Ae=r.current;Ae!==null;){var k=Ae,V=k.child;if((Ae.flags&16)!==0){var K=k.deletions;if(K!==null){for(var ee=0;ee<K.length;ee++){var fe=K[ee];for(Ae=fe;Ae!==null;){var qe=Ae;switch(qe.tag){case 0:case 11:case 15:_s(8,qe,k)}var Se=qe.child;if(Se!==null)Se.return=qe,Ae=Se;else for(;Ae!==null;){qe=Ae;var xe=qe.sibling,Oe=qe.return;if(_x(qe),qe===fe){Ae=null;break}if(xe!==null){xe.return=Oe,Ae=xe;break}Ae=Oe}}}var Le=k.alternate;if(Le!==null){var De=Le.child;if(De!==null){Le.child=null;do{var jt=De.sibling;De.sibling=null,De=jt}while(De!==null)}}Ae=k}}if((k.subtreeFlags&2064)!==0&&V!==null)V.return=k,Ae=V;else e:for(;Ae!==null;){if(k=Ae,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:_s(9,k,k.return)}var se=k.sibling;if(se!==null){se.return=k.return,Ae=se;break e}Ae=k.return}}var ie=r.current;for(Ae=ie;Ae!==null;){V=Ae;var le=V.child;if((V.subtreeFlags&2064)!==0&&le!==null)le.return=V,Ae=le;else e:for(V=ie;Ae!==null;){if(K=Ae,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Wu(9,K)}}catch(ze){It(K,K.return,ze)}if(K===V){Ae=null;break e}var Me=K.sibling;if(Me!==null){Me.return=K.return,Ae=Me;break e}Ae=K.return}}if(tt=v,Fi(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Fn,r)}catch{}y=!0}return y}finally{Ne=c,on.transition=o}}return!1}function Tx(r,o,c){o=ha(c,o),o=Kv(r,o,1),r=Ai(r,o,1),o=qr(),r!==null&&(xr(r,1,o),Pr(r,o))}function It(r,o,c){if(r.tag===3)Tx(r,r,c);else for(;o!==null;){if(o.tag===3){Tx(o,r,c);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Di===null||!Di.has(y))){r=ha(c,r),r=Yv(o,r,1),o=Ai(o,r,1),r=qr(),o!==null&&(xr(o,1,r),Pr(o,r));break}}o=o.return}}function ST(r,o,c){var y=r.pingCache;y!==null&&y.delete(o),o=qr(),r.pingedLanes|=r.suspendedLanes&c,Qt===r&&(nr&c)===c&&(Bt===4||Bt===3&&(nr&130023424)===nr&&500>_t()-tp?ko(r,0):ep|=c),Pr(r,o)}function Nx(r,o){o===0&&((r.mode&1)===0?o=1:(o=ki,ki<<=1,(ki&130023424)===0&&(ki=4194304)));var c=qr();r=di(r,o),r!==null&&(xr(r,o,c),Pr(r,c))}function CT(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),Nx(r,c)}function kT(r,o){var c=0;switch(r.tag){case 13:var y=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(o),Nx(r,c)}var jx;jx=function(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps||Ir.current)Nr=!0;else{if((r.lanes&c)===0&&(o.flags&128)===0)return Nr=!1,fT(r,o,c);Nr=(r.flags&131072)!==0}else Nr=!1,wt&&(o.flags&1048576)!==0&&dv(o,Eu,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;$u(r,o),r=o.pendingProps;var v=ua(o,lr.current);_a(o,c),v=jd(null,o,y,r,v,c);var k=Pd();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tr(y)?(k=!0,Cu(o)):k=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Cd(o),v.updater=Bu,o.stateNode=v,v._reactInternals=o,Ld(o,y,r,c),o=$d(null,o,y,!0,k,c)):(o.tag=0,wt&&k&&md(o),br(null,o,v,c),o=o.child),o;case 16:y=o.elementType;e:{switch($u(r,o),r=o.pendingProps,v=y._init,y=v(y._payload),o.type=y,v=o.tag=ET(y),r=xn(y,r),v){case 0:o=zd(null,o,y,r,c);break e;case 1:o=ix(null,o,y,r,c);break e;case 11:o=Jv(null,o,y,r,c);break e;case 14:o=ex(null,o,y,xn(y.type,r),c);break e}throw Error(n(306,y,""))}return o;case 0:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),zd(r,o,y,v,c);case 1:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),ix(r,o,y,v,c);case 3:e:{if(ox(o),r===null)throw Error(n(387));y=o.pendingProps,k=o.memoizedState,v=k.element,xv(r,o),Ru(o,y,null,c);var V=o.memoizedState;if(y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){v=ha(Error(n(423)),o),o=ax(r,o,y,c,v);break e}else if(y!==v){v=ha(Error(n(424)),o),o=ax(r,o,y,c,v);break e}else for(zr=Pi(o.stateNode.containerInfo.firstChild),Br=o,wt=!0,vn=null,c=gv(o,null,y,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(da(),y===v){o=fi(r,o,c);break e}br(r,o,y,c)}o=o.child}return o;case 5:return qv(o),r===null&&gd(o),y=o.type,v=o.pendingProps,k=r!==null?r.memoizedProps:null,V=v.children,ld(y,v)?V=null:k!==null&&ld(y,k)&&(o.flags|=32),nx(r,o),br(r,o,V,c),o.child;case 6:return r===null&&gd(o),null;case 13:return sx(r,o,c);case 4:return kd(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=pa(o,null,y,c):br(r,o,y,c),o.child;case 11:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Jv(r,o,y,v,c);case 7:return br(r,o,o.pendingProps,c),o.child;case 8:return br(r,o,o.pendingProps.children,c),o.child;case 12:return br(r,o,o.pendingProps.children,c),o.child;case 10:e:{if(y=o.type._context,v=o.pendingProps,k=o.memoizedProps,V=v.value,dt(Nu,y._currentValue),y._currentValue=V,k!==null)if(gn(k.value,V)){if(k.children===v.children&&!Ir.current){o=fi(r,o,c);break e}}else for(k=o.child,k!==null&&(k.return=o);k!==null;){var K=k.dependencies;if(K!==null){V=k.child;for(var ee=K.firstContext;ee!==null;){if(ee.context===y){if(k.tag===1){ee=pi(-1,c&-c),ee.tag=2;var fe=k.updateQueue;if(fe!==null){fe=fe.shared;var qe=fe.pending;qe===null?ee.next=ee:(ee.next=qe.next,qe.next=ee),fe.pending=ee}}k.lanes|=c,ee=k.alternate,ee!==null&&(ee.lanes|=c),qd(k.return,c,o),K.lanes|=c;break}ee=ee.next}}else if(k.tag===10)V=k.type===o.type?null:k.child;else if(k.tag===18){if(V=k.return,V===null)throw Error(n(341));V.lanes|=c,K=V.alternate,K!==null&&(K.lanes|=c),qd(V,c,o),V=k.sibling}else V=k.child;if(V!==null)V.return=k;else for(V=k;V!==null;){if(V===o){V=null;break}if(k=V.sibling,k!==null){k.return=V.return,V=k;break}V=V.return}k=V}br(r,o,v.children,c),o=o.child}return o;case 9:return v=o.type,y=o.pendingProps.children,_a(o,c),v=rn(v),y=y(v),o.flags|=1,br(r,o,y,c),o.child;case 14:return y=o.type,v=xn(y,o.pendingProps),v=xn(y.type,v),ex(r,o,y,v,c);case 15:return tx(r,o,o.type,o.pendingProps,c);case 17:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),$u(r,o),o.tag=1,Tr(y)?(r=!0,Cu(o)):r=!1,_a(o,c),Uv(o,y,v),Ld(o,y,v,c),$d(null,o,y,!0,r,c);case 19:return lx(r,o,c);case 22:return rx(r,o,c)}throw Error(n(156,o.tag))};function Px(r,o){return Si(r,o)}function MT(r,o,c,y){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(r,o,c,y){return new MT(r,o,c,y)}function lp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ET(r){if(typeof r=="function")return lp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===O)return 11;if(r===U)return 14}return 2}function Hi(r,o){var c=r.alternate;return c===null?(c=an(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function el(r,o,c,y,v,k){var V=2;if(y=r,typeof r=="function")lp(r)&&(V=1);else if(typeof r=="string")V=5;else e:switch(r){case N:return Eo(c.children,v,k,o);case R:V=8,v|=8;break;case P:return r=an(12,c,o,v|2),r.elementType=P,r.lanes=k,r;case Q:return r=an(13,c,o,v),r.elementType=Q,r.lanes=k,r;case j:return r=an(19,c,o,v),r.elementType=j,r.lanes=k,r;case te:return tl(c,v,k,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:V=10;break e;case F:V=9;break e;case O:V=11;break e;case U:V=14;break e;case H:V=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=an(V,c,o,v),o.elementType=r,o.type=y,o.lanes=k,o}function Eo(r,o,c,y){return r=an(7,r,y,o),r.lanes=c,r}function tl(r,o,c,y){return r=an(22,r,y,o),r.elementType=te,r.lanes=c,r.stateNode={isHidden:!1},r}function cp(r,o,c){return r=an(6,r,null,o),r.lanes=c,r}function dp(r,o,c){return o=an(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function IT(r,o,c,y,v){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function pp(r,o,c,y,v,k,V,K,ee){return r=new IT(r,o,c,K,ee),o===1?(o=1,k===!0&&(o|=8)):o=0,k=an(3,null,null,o),r.current=k,k.stateNode=r,k.memoizedState={element:y,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(k),r}function TT(r,o,c){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:y==null?null:""+y,children:r,containerInfo:o,implementation:c}}function Rx(r){if(!r)return Vi;r=r._reactInternals;e:{if(Et(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Tr(c))return uv(r,c,o)}return o}function Vx(r,o,c,y,v,k,V,K,ee){return r=pp(c,y,!0,r,v,k,V,K,ee),r.context=Rx(null),c=r.current,y=qr(),v=zi(c),k=pi(y,v),k.callback=o??null,Ai(c,k,v),r.current.lanes=v,xr(r,v,y),Pr(r,y),r}function rl(r,o,c,y){var v=o.current,k=qr(),V=zi(v);return c=Rx(c),o.context===null?o.context=c:o.pendingContext=c,o=pi(k,V),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=Ai(v,o,V),r!==null&&(qn(r,v,V,k),Pu(r,v,V)),V}function nl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Fx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function fp(r,o){Fx(r,o),(r=r.alternate)&&Fx(r,o)}function NT(){return null}var Ox=typeof reportError=="function"?reportError:function(r){console.error(r)};function _p(r){this._internalRoot=r}il.prototype.render=_p.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));rl(r,o,null,null)},il.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Co(function(){rl(null,r,null,null)}),o[si]=null}};function il(r){this._internalRoot=r}il.prototype.unstable_scheduleHydration=function(r){if(r){var o=Yo();r={blockedOn:null,target:r,priority:o};for(var c=0;c<An.length&&o!==0&&o<An[c].priority;c++);An.splice(c,0,r),c===0&&po(r)}};function mp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ol(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ax(){}function jT(r,o,c,y,v){if(v){if(typeof y=="function"){var k=y;y=function(){var fe=nl(V);k.call(fe)}}var V=Vx(o,y,r,0,null,!1,!1,"",Ax);return r._reactRootContainer=V,r[si]=V.current,ts(r.nodeType===8?r.parentNode:r),Co(),V}for(;v=r.lastChild;)r.removeChild(v);if(typeof y=="function"){var K=y;y=function(){var fe=nl(ee);K.call(fe)}}var ee=pp(r,0,!1,null,null,!1,!1,"",Ax);return r._reactRootContainer=ee,r[si]=ee.current,ts(r.nodeType===8?r.parentNode:r),Co(function(){rl(o,ee,c,y)}),ee}function al(r,o,c,y,v){var k=c._reactRootContainer;if(k){var V=k;if(typeof v=="function"){var K=v;v=function(){var ee=nl(V);K.call(ee)}}rl(o,V,r,v)}else V=jT(c,o,r,v,y);return nl(V)}so=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var c=kr(o.pendingLanes);c!==0&&(Uo(o,c|1),Pr(o,_t()),(tt&6)===0&&(va=_t()+500,Fi()))}break;case 13:Co(function(){var y=di(r,1);if(y!==null){var v=qr();qn(y,r,1,v)}}),fp(r,1)}},Go=function(r){if(r.tag===13){var o=di(r,134217728);if(o!==null){var c=qr();qn(o,r,134217728,c)}fp(r,134217728)}},Ko=function(r){if(r.tag===13){var o=zi(r),c=di(r,o);if(c!==null){var y=qr();qn(c,r,o,y)}fp(r,o)}},Yo=function(){return Ne},$e=function(r,o){var c=Ne;try{return Ne=r,o()}finally{Ne=c}},Ar=function(r,o,c){switch(o){case"input":if(Be(r,c),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var y=c[o];if(y!==r&&y.form===r.form){var v=qu(y);if(!v)throw Error(n(90));Ie(y),Be(y,v)}}}break;case"textarea":Cr(r,c);break;case"select":o=c.value,o!=null&&lt(r,!!c.multiple,o,!1)}},er=ap,Ht=Co;var PT={usingClientEntryPoint:!1,Events:[is,aa,qu,Vn,Pt,ap]},gs={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RT={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=no(r),r===null?null:r.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||NT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Fn=sl.inject(RT),Kt=sl}catch{}}return Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT,Rr.createPortal=function(r,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(o))throw Error(n(200));return TT(r,o,null,c)},Rr.createRoot=function(r,o){if(!mp(r))throw Error(n(299));var c=!1,y="",v=Ox;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=pp(r,1,!1,null,null,c,!1,y,v),r[si]=o.current,ts(r.nodeType===8?r.parentNode:r),new _p(o)},Rr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=no(o),r=r===null?null:r.stateNode,r},Rr.flushSync=function(r){return Co(r)},Rr.hydrate=function(r,o,c){if(!ol(o))throw Error(n(200));return al(null,r,o,!0,c)},Rr.hydrateRoot=function(r,o,c){if(!mp(r))throw Error(n(405));var y=c!=null&&c.hydratedSources||null,v=!1,k="",V=Ox;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onRecoverableError!==void 0&&(V=c.onRecoverableError)),o=Vx(o,null,r,1,c??null,v,!1,k,V),r[si]=o.current,ts(r),y)for(r=0;r<y.length;r++)c=y[r],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new il(o)},Rr.render=function(r,o,c){if(!ol(o))throw Error(n(200));return al(null,r,o,!1,c)},Rr.unmountComponentAtNode=function(r){if(!ol(r))throw Error(n(40));return r._reactRootContainer?(Co(function(){al(null,null,r,!1,function(){r._reactRootContainer=null,r[si]=null})}),!0):!1},Rr.unstable_batchedUpdates=ap,Rr.unstable_renderSubtreeIntoContainer=function(r,o,c,y){if(!ol(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return al(r,o,c,!1,y)},Rr.version="18.3.1-next-f1338f8080-20240426",Rr}var Ux;function xk(){if(Ux)return gp.exports;Ux=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gp.exports=zT(),gp.exports}var Gx;function $T(){if(Gx)return ll;Gx=1;var e=xk();return ll.createRoot=e.createRoot,ll.hydrateRoot=e.hydrateRoot,ll}var HT=$T();const WT=Va(HT);function Ft(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Ft(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var UT={value:()=>{}};function oc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new El(n)}function El(e){this._=e}function GT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}El.prototype=oc.prototype={constructor:El,on:function(e,t){var n=this._,i=GT(e+"",n),a,s=-1,u=i.length;if(arguments.length<2){for(;++s<u;)if((a=(e=i[s]).type)&&(a=KT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=i[s]).type)n[a]=Kx(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Kx(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new El(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,s;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,n)}};function KT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Kx(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=UT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var p0="http://www.w3.org/1999/xhtml";const Yx={svg:"http://www.w3.org/2000/svg",xhtml:p0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ac(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yx.hasOwnProperty(t)?{space:Yx[t],local:e}:e}function YT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===p0&&t.documentElement.namespaceURI===p0?t.createElement(e):t.createElementNS(n,e)}}function QT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wk(e){var t=ac(e);return(t.local?QT:YT)(t)}function XT(){}function U0(e){return e==null?XT:function(){return this.querySelector(e)}}function ZT(e){typeof e!="function"&&(e=U0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=new Array(u),d,p,m=0;m<u;++m)(d=s[m])&&(p=e.call(d,d.__data__,m,s))&&("__data__"in d&&(p.__data__=d.__data__),l[m]=p);return new Kr(i,this._parents)}function JT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function e5(){return[]}function bk(e){return e==null?e5:function(){return this.querySelectorAll(e)}}function t5(e){return function(){return JT(e.apply(this,arguments))}}function r5(e){typeof e=="function"?e=t5(e):e=bk(e);for(var t=this._groups,n=t.length,i=[],a=[],s=0;s<n;++s)for(var u=t[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&(i.push(e.call(d,d.__data__,p,u)),a.push(d));return new Kr(i,a)}function qk(e){return function(){return this.matches(e)}}function Sk(e){return function(t){return t.matches(e)}}var n5=Array.prototype.find;function i5(e){return function(){return n5.call(this.children,e)}}function o5(){return this.firstElementChild}function a5(e){return this.select(e==null?o5:i5(typeof e=="function"?e:Sk(e)))}var s5=Array.prototype.filter;function u5(){return Array.from(this.children)}function l5(e){return function(){return s5.call(this.children,e)}}function c5(e){return this.selectAll(e==null?u5:l5(typeof e=="function"?e:Sk(e)))}function d5(e){typeof e!="function"&&(e=qk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new Kr(i,this._parents)}function Ck(e){return new Array(e.length)}function p5(){return new Kr(this._enter||this._groups.map(Ck),this._parents)}function Vl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vl.prototype={constructor:Vl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function f5(e){return function(){return e}}function _5(e,t,n,i,a,s){for(var u=0,l,d=t.length,p=s.length;u<p;++u)(l=t[u])?(l.__data__=s[u],i[u]=l):n[u]=new Vl(e,s[u]);for(;u<d;++u)(l=t[u])&&(a[u]=l)}function m5(e,t,n,i,a,s,u){var l,d,p=new Map,m=t.length,_=s.length,h=new Array(m),g;for(l=0;l<m;++l)(d=t[l])&&(h[l]=g=u.call(d,d.__data__,l,t)+"",p.has(g)?a[l]=d:p.set(g,d));for(l=0;l<_;++l)g=u.call(e,s[l],l,s)+"",(d=p.get(g))?(i[l]=d,d.__data__=s[l],p.delete(g)):n[l]=new Vl(e,s[l]);for(l=0;l<m;++l)(d=t[l])&&p.get(h[l])===d&&(a[l]=d)}function h5(e){return e.__data__}function y5(e,t){if(!arguments.length)return Array.from(this,h5);var n=t?m5:_5,i=this._parents,a=this._groups;typeof e!="function"&&(e=f5(e));for(var s=a.length,u=new Array(s),l=new Array(s),d=new Array(s),p=0;p<s;++p){var m=i[p],_=a[p],h=_.length,g=g5(e.call(m,m&&m.__data__,p,i)),x=g.length,q=l[p]=new Array(x),w=u[p]=new Array(x),b=d[p]=new Array(h);n(m,_,q,w,b,g,t);for(var C=0,S=0,M,I;C<x;++C)if(M=q[C]){for(C>=S&&(S=C+1);!(I=w[S])&&++S<x;);M._next=I||null}}return u=new Kr(u,i),u._enter=l,u._exit=d,u}function g5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function v5(){return new Kr(this._exit||this._groups.map(Ck),this._parents)}function x5(e,t,n){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),i&&a?i.merge(a).order():a}function w5(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,s=i.length,u=Math.min(a,s),l=new Array(a),d=0;d<u;++d)for(var p=n[d],m=i[d],_=p.length,h=l[d]=new Array(_),g,x=0;x<_;++x)(g=p[x]||m[x])&&(h[x]=g);for(;d<a;++d)l[d]=n[d];return new Kr(l,this._parents)}function b5(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,s=i[a],u;--a>=0;)(u=i[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function q5(e){e||(e=S5);function t(_,h){return _&&h?e(_.__data__,h.__data__):!_-!h}for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var u=n[s],l=u.length,d=a[s]=new Array(l),p,m=0;m<l;++m)(p=u[m])&&(d[m]=p);d.sort(t)}return new Kr(a,this._parents).order()}function S5(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function C5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function k5(){return Array.from(this)}function M5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length;a<s;++a){var u=i[a];if(u)return u}return null}function E5(){let e=0;for(const t of this)++e;return e}function I5(){return!this.node()}function T5(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],s=0,u=a.length,l;s<u;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function N5(e){return function(){this.removeAttribute(e)}}function j5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P5(e,t){return function(){this.setAttribute(e,t)}}function R5(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function V5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function F5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function O5(e,t){var n=ac(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?j5:N5:typeof t=="function"?n.local?F5:V5:n.local?R5:P5)(n,t))}function kk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function A5(e){return function(){this.style.removeProperty(e)}}function L5(e,t,n){return function(){this.style.setProperty(e,t,n)}}function D5(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function B5(e,t,n){return arguments.length>1?this.each((t==null?A5:typeof t=="function"?D5:L5)(e,t,n??"")):Ma(this.node(),e)}function Ma(e,t){return e.style.getPropertyValue(t)||kk(e).getComputedStyle(e,null).getPropertyValue(t)}function z5(e){return function(){delete this[e]}}function $5(e,t){return function(){this[e]=t}}function H5(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function W5(e,t){return arguments.length>1?this.each((t==null?z5:typeof t=="function"?H5:$5)(e,t)):this.node()[e]}function Mk(e){return e.trim().split(/^|\s+/)}function G0(e){return e.classList||new Ek(e)}function Ek(e){this._node=e,this._names=Mk(e.getAttribute("class")||"")}Ek.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ik(e,t){for(var n=G0(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Tk(e,t){for(var n=G0(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function U5(e){return function(){Ik(this,e)}}function G5(e){return function(){Tk(this,e)}}function K5(e,t){return function(){(t.apply(this,arguments)?Ik:Tk)(this,e)}}function Y5(e,t){var n=Mk(e+"");if(arguments.length<2){for(var i=G0(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?K5:t?U5:G5)(n,t))}function Q5(){this.textContent=""}function X5(e){return function(){this.textContent=e}}function Z5(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function J5(e){return arguments.length?this.each(e==null?Q5:(typeof e=="function"?Z5:X5)(e)):this.node().textContent}function eN(){this.innerHTML=""}function tN(e){return function(){this.innerHTML=e}}function rN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nN(e){return arguments.length?this.each(e==null?eN:(typeof e=="function"?rN:tN)(e)):this.node().innerHTML}function iN(){this.nextSibling&&this.parentNode.appendChild(this)}function oN(){return this.each(iN)}function aN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sN(){return this.each(aN)}function uN(e){var t=typeof e=="function"?e:wk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lN(){return null}function cN(e,t){var n=typeof e=="function"?e:wk(e),i=t==null?lN:typeof t=="function"?t:U0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function dN(){var e=this.parentNode;e&&e.removeChild(this)}function pN(){return this.each(dN)}function fN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _N(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mN(e){return this.select(e?_N:fN)}function hN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function yN(e){return function(t){e.call(this,t,this.__data__)}}function gN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function vN(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function xN(e,t,n){return function(){var i=this.__on,a,s=yN(t);if(i){for(var u=0,l=i.length;u<l;++u)if((a=i[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(a):this.__on=[a]}}function wN(e,t,n){var i=gN(e+""),a,s=i.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,p=l.length,m;d<p;++d)for(a=0,m=l[d];a<s;++a)if((u=i[a]).type===m.type&&u.name===m.name)return m.value}return}for(l=t?xN:vN,a=0;a<s;++a)this.each(l(i[a],t,n));return this}function Nk(e,t,n){var i=kk(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function bN(e,t){return function(){return Nk(this,e,t)}}function qN(e,t){return function(){return Nk(this,e,t.apply(this,arguments))}}function SN(e,t){return this.each((typeof t=="function"?qN:bN)(e,t))}function*CN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length,u;a<s;++a)(u=i[a])&&(yield u)}var jk=[null];function Kr(e,t){this._groups=e,this._parents=t}function Zs(){return new Kr([[document.documentElement]],jk)}function kN(){return this}Kr.prototype=Zs.prototype={constructor:Kr,select:ZT,selectAll:r5,selectChild:a5,selectChildren:c5,filter:d5,data:y5,enter:p5,exit:v5,join:x5,merge:w5,selection:kN,order:b5,sort:q5,call:C5,nodes:k5,node:M5,size:E5,empty:I5,each:T5,attr:O5,style:B5,property:W5,classed:Y5,text:J5,html:nN,raise:oN,lower:sN,append:uN,insert:cN,remove:pN,clone:mN,datum:hN,on:wN,dispatch:SN,[Symbol.iterator]:CN};function Ur(e){return typeof e=="string"?new Kr([[document.querySelector(e)]],[document.documentElement]):new Kr([[e]],jk)}function MN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kn(e,t){if(e=MN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const EN={passive:!1},Fs={capture:!0,passive:!1};function wp(e){e.stopImmediatePropagation()}function Sa(e){e.preventDefault(),e.stopImmediatePropagation()}function Pk(e){var t=e.document.documentElement,n=Ur(e).on("dragstart.drag",Sa,Fs);"onselectstart"in t?n.on("selectstart.drag",Sa,Fs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Rk(e,t){var n=e.document.documentElement,i=Ur(e).on("dragstart.drag",null);t&&(i.on("click.drag",Sa,Fs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const cl=e=>()=>e;function f0(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:s,x:u,y:l,dx:d,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}f0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function IN(e){return!e.ctrlKey&&!e.button}function TN(){return this.parentNode}function NN(e,t){return t??{x:e.x,y:e.y}}function jN(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vk(){var e=IN,t=TN,n=NN,i=jN,a={},s=oc("start","drag","end"),u=0,l,d,p,m,_=0;function h(M){M.on("mousedown.drag",g).filter(i).on("touchstart.drag",w).on("touchmove.drag",b,EN).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(M,I){if(!(m||!e.call(this,M,I))){var E=S(this,t.call(this,M,I),M,I,"mouse");E&&(Ur(M.view).on("mousemove.drag",x,Fs).on("mouseup.drag",q,Fs),Pk(M.view),wp(M),p=!1,l=M.clientX,d=M.clientY,E("start",M))}}function x(M){if(Sa(M),!p){var I=M.clientX-l,E=M.clientY-d;p=I*I+E*E>_}a.mouse("drag",M)}function q(M){Ur(M.view).on("mousemove.drag mouseup.drag",null),Rk(M.view,p),Sa(M),a.mouse("end",M)}function w(M,I){if(e.call(this,M,I)){var E=M.changedTouches,N=t.call(this,M,I),R=E.length,P,D;for(P=0;P<R;++P)(D=S(this,N,M,I,E[P].identifier,E[P]))&&(wp(M),D("start",M,E[P]))}}function b(M){var I=M.changedTouches,E=I.length,N,R;for(N=0;N<E;++N)(R=a[I[N].identifier])&&(Sa(M),R("drag",M,I[N]))}function C(M){var I=M.changedTouches,E=I.length,N,R;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),N=0;N<E;++N)(R=a[I[N].identifier])&&(wp(M),R("end",M,I[N]))}function S(M,I,E,N,R,P){var D=s.copy(),F=kn(P||E,I),O,Q,j;if((j=n.call(M,new f0("beforestart",{sourceEvent:E,target:h,identifier:R,active:u,x:F[0],y:F[1],dx:0,dy:0,dispatch:D}),N))!=null)return O=j.x-F[0]||0,Q=j.y-F[1]||0,function U(H,te,G){var Y=F,oe;switch(H){case"start":a[R]=U,oe=u++;break;case"end":delete a[R],--u;case"drag":F=kn(G||te,I),oe=u;break}D.call(H,M,new f0(H,{sourceEvent:te,subject:j,target:h,identifier:R,active:oe,x:F[0]+O,y:F[1]+Q,dx:F[0]-Y[0],dy:F[1]-Y[1],dispatch:D}),N)}}return h.filter=function(M){return arguments.length?(e=typeof M=="function"?M:cl(!!M),h):e},h.container=function(M){return arguments.length?(t=typeof M=="function"?M:cl(M),h):t},h.subject=function(M){return arguments.length?(n=typeof M=="function"?M:cl(M),h):n},h.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:cl(!!M),h):i},h.on=function(){var M=s.on.apply(s,arguments);return M===s?h:M},h.clickDistance=function(M){return arguments.length?(_=(M=+M)*M,h):Math.sqrt(_)},h}function K0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fk(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Js(){}var Os=.7,Fl=1/Os,Ca="\\s*([+-]?\\d+)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PN=/^#([0-9a-f]{3,8})$/,RN=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),VN=new RegExp(`^rgb\\(${Gn},${Gn},${Gn}\\)$`),FN=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${As}\\)$`),ON=new RegExp(`^rgba\\(${Gn},${Gn},${Gn},${As}\\)$`),AN=new RegExp(`^hsl\\(${As},${Gn},${Gn}\\)$`),LN=new RegExp(`^hsla\\(${As},${Gn},${Gn},${As}\\)$`),Qx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K0(Js,Ro,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xx,formatHex:Xx,formatHex8:DN,formatHsl:BN,formatRgb:Zx,toString:Zx});function Xx(){return this.rgb().formatHex()}function DN(){return this.rgb().formatHex8()}function BN(){return Ok(this).formatHsl()}function Zx(){return this.rgb().formatRgb()}function Ro(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=PN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jx(t):n===3?new Vr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=RN.exec(e))?new Vr(t[1],t[2],t[3],1):(t=VN.exec(e))?new Vr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=FN.exec(e))?dl(t[1],t[2],t[3],t[4]):(t=ON.exec(e))?dl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=AN.exec(e))?r1(t[1],t[2]/100,t[3]/100,1):(t=LN.exec(e))?r1(t[1],t[2]/100,t[3]/100,t[4]):Qx.hasOwnProperty(e)?Jx(Qx[e]):e==="transparent"?new Vr(NaN,NaN,NaN,0):null}function Jx(e){return new Vr(e>>16&255,e>>8&255,e&255,1)}function dl(e,t,n,i){return i<=0&&(e=t=n=NaN),new Vr(e,t,n,i)}function zN(e){return e instanceof Js||(e=Ro(e)),e?(e=e.rgb(),new Vr(e.r,e.g,e.b,e.opacity)):new Vr}function _0(e,t,n,i){return arguments.length===1?zN(e):new Vr(e,t,n,i??1)}function Vr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}K0(Vr,_0,Fk(Js,{brighter(e){return e=e==null?Fl:Math.pow(Fl,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new Vr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vr(jo(this.r),jo(this.g),jo(this.b),Ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:e1,formatHex:e1,formatHex8:$N,formatRgb:t1,toString:t1}));function e1(){return`#${To(this.r)}${To(this.g)}${To(this.b)}`}function $N(){return`#${To(this.r)}${To(this.g)}${To(this.b)}${To((isNaN(this.opacity)?1:this.opacity)*255)}`}function t1(){const e=Ol(this.opacity);return`${e===1?"rgb(":"rgba("}${jo(this.r)}, ${jo(this.g)}, ${jo(this.b)}${e===1?")":`, ${e})`}`}function Ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function To(e){return e=jo(e),(e<16?"0":"")+e.toString(16)}function r1(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,n,i)}function Ok(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Js||(e=Ro(e)),!e)return new En;if(e instanceof En)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),u=NaN,l=s-a,d=(s+a)/2;return l?(t===s?u=(n-i)/l+(n<i)*6:n===s?u=(i-t)/l+2:u=(t-n)/l+4,l/=d<.5?s+a:2-s-a,u*=60):l=d>0&&d<1?0:u,new En(u,l,d,e.opacity)}function HN(e,t,n,i){return arguments.length===1?Ok(e):new En(e,t,n,i??1)}function En(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}K0(En,HN,Fk(Js,{brighter(e){return e=e==null?Fl:Math.pow(Fl,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Vr(bp(e>=240?e-240:e+120,a,i),bp(e,a,i),bp(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new En(n1(this.h),pl(this.s),pl(this.l),Ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ol(this.opacity);return`${e===1?"hsl(":"hsla("}${n1(this.h)}, ${pl(this.s)*100}%, ${pl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function n1(e){return e=(e||0)%360,e<0?e+360:e}function pl(e){return Math.max(0,Math.min(1,e||0))}function bp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Y0=e=>()=>e;function WN(e,t){return function(n){return e+n*t}}function UN(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function GN(e){return(e=+e)==1?Ak:function(t,n){return n-t?UN(t,n,e):Y0(isNaN(t)?n:t)}}function Ak(e,t){var n=t-e;return n?WN(e,n):Y0(isNaN(e)?t:e)}const Al=(function e(t){var n=GN(t);function i(a,s){var u=n((a=_0(a)).r,(s=_0(s)).r),l=n(a.g,s.g),d=n(a.b,s.b),p=Ak(a.opacity,s.opacity);return function(m){return a.r=u(m),a.g=l(m),a.b=d(m),a.opacity=p(m),a+""}}return i.gamma=e,i})(1);function KN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function YN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QN(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),u;for(u=0;u<i;++u)a[u]=Is(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(l){for(u=0;u<i;++u)s[u]=a[u](l);return s}}function XN(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ZN(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Is(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var m0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qp=new RegExp(m0.source,"g");function JN(e){return function(){return e}}function ej(e){return function(t){return e(t)+""}}function Lk(e,t){var n=m0.lastIndex=qp.lastIndex=0,i,a,s,u=-1,l=[],d=[];for(e=e+"",t=t+"";(i=m0.exec(e))&&(a=qp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[u]?l[u]+=s:l[++u]=s),(i=i[0])===(a=a[0])?l[u]?l[u]+=a:l[++u]=a:(l[++u]=null,d.push({i:u,x:Wn(i,a)})),n=qp.lastIndex;return n<t.length&&(s=t.slice(n),l[u]?l[u]+=s:l[++u]=s),l.length<2?d[0]?ej(d[0].x):JN(t):(t=d.length,function(p){for(var m=0,_;m<t;++m)l[(_=d[m]).i]=_.x(p);return l.join("")})}function Is(e,t){var n=typeof t,i;return t==null||n==="boolean"?Y0(t):(n==="number"?Wn:n==="string"?(i=Ro(t))?(t=i,Al):Lk:t instanceof Ro?Al:t instanceof Date?XN:YN(t)?KN:Array.isArray(t)?QN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ZN:Wn)(e,t)}var i1=180/Math.PI,h0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dk(e,t,n,i,a,s){var u,l,d;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),e*i<t*n&&(e=-e,t=-t,d=-d,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*i1,skewX:Math.atan(d)*i1,scaleX:u,scaleY:l}}var fl;function tj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?h0:Dk(t.a,t.b,t.c,t.d,t.e,t.f)}function rj(e){return e==null||(fl||(fl=document.createElementNS("http://www.w3.org/2000/svg","g")),fl.setAttribute("transform",e),!(e=fl.transform.baseVal.consolidate()))?h0:(e=e.matrix,Dk(e.a,e.b,e.c,e.d,e.e,e.f))}function Bk(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function s(p,m,_,h,g,x){if(p!==_||m!==h){var q=g.push("translate(",null,t,null,n);x.push({i:q-4,x:Wn(p,_)},{i:q-2,x:Wn(m,h)})}else(_||h)&&g.push("translate("+_+t+h+n)}function u(p,m,_,h){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),h.push({i:_.push(a(_)+"rotate(",null,i)-2,x:Wn(p,m)})):m&&_.push(a(_)+"rotate("+m+i)}function l(p,m,_,h){p!==m?h.push({i:_.push(a(_)+"skewX(",null,i)-2,x:Wn(p,m)}):m&&_.push(a(_)+"skewX("+m+i)}function d(p,m,_,h,g,x){if(p!==_||m!==h){var q=g.push(a(g)+"scale(",null,",",null,")");x.push({i:q-4,x:Wn(p,_)},{i:q-2,x:Wn(m,h)})}else(_!==1||h!==1)&&g.push(a(g)+"scale("+_+","+h+")")}return function(p,m){var _=[],h=[];return p=e(p),m=e(m),s(p.translateX,p.translateY,m.translateX,m.translateY,_,h),u(p.rotate,m.rotate,_,h),l(p.skewX,m.skewX,_,h),d(p.scaleX,p.scaleY,m.scaleX,m.scaleY,_,h),p=m=null,function(g){for(var x=-1,q=h.length,w;++x<q;)_[(w=h[x]).i]=w.x(g);return _.join("")}}}var nj=Bk(tj,"px, ","px)","deg)"),ij=Bk(rj,", ",")",")"),oj=1e-12;function o1(e){return((e=Math.exp(e))+1/e)/2}function aj(e){return((e=Math.exp(e))-1/e)/2}function sj(e){return((e=Math.exp(2*e))-1)/(e+1)}const Il=(function e(t,n,i){function a(s,u){var l=s[0],d=s[1],p=s[2],m=u[0],_=u[1],h=u[2],g=m-l,x=_-d,q=g*g+x*x,w,b;if(q<oj)b=Math.log(h/p)/t,w=function(N){return[l+N*g,d+N*x,p*Math.exp(t*N*b)]};else{var C=Math.sqrt(q),S=(h*h-p*p+i*q)/(2*p*n*C),M=(h*h-p*p-i*q)/(2*h*n*C),I=Math.log(Math.sqrt(S*S+1)-S),E=Math.log(Math.sqrt(M*M+1)-M);b=(E-I)/t,w=function(N){var R=N*b,P=o1(I),D=p/(n*C)*(P*sj(t*R+I)-aj(I));return[l+D*g,d+D*x,p*P/o1(t*R+I)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return a.rho=function(s){var u=Math.max(.001,+s),l=u*u,d=l*l;return e(u,l,d)},a})(Math.SQRT2,2,4);var Ea=0,Ss=0,xs=0,zk=1e3,Ll,Cs,Dl=0,Vo=0,sc=0,Ls=typeof performance=="object"&&performance.now?performance:Date,$k=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Q0(){return Vo||($k(uj),Vo=Ls.now()+sc)}function uj(){Vo=0}function Bl(){this._call=this._time=this._next=null}Bl.prototype=Hk.prototype={constructor:Bl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Q0():+n)+(t==null?0:+t),!this._next&&Cs!==this&&(Cs?Cs._next=this:Ll=this,Cs=this),this._call=e,this._time=n,y0()},stop:function(){this._call&&(this._call=null,this._time=1/0,y0())}};function Hk(e,t,n){var i=new Bl;return i.restart(e,t,n),i}function lj(){Q0(),++Ea;for(var e=Ll,t;e;)(t=Vo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ea}function a1(){Vo=(Dl=Ls.now())+sc,Ea=Ss=0;try{lj()}finally{Ea=0,dj(),Vo=0}}function cj(){var e=Ls.now(),t=e-Dl;t>zk&&(sc-=t,Dl=e)}function dj(){for(var e,t=Ll,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ll=n);Cs=e,y0(i)}function y0(e){if(!Ea){Ss&&(Ss=clearTimeout(Ss));var t=e-Vo;t>24?(e<1/0&&(Ss=setTimeout(a1,e-Ls.now()-sc)),xs&&(xs=clearInterval(xs))):(xs||(Dl=Ls.now(),xs=setInterval(cj,zk)),Ea=1,$k(a1))}}function s1(e,t,n){var i=new Bl;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var pj=oc("start","end","cancel","interrupt"),fj=[],Wk=0,u1=1,g0=2,Tl=3,l1=4,v0=5,Nl=6;function uc(e,t,n,i,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;_j(e,n,{name:t,index:i,group:a,on:pj,tween:fj,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wk})}function X0(e,t){var n=Pn(e,t);if(n.state>Wk)throw new Error("too late; already scheduled");return n}function Yn(e,t){var n=Pn(e,t);if(n.state>Tl)throw new Error("too late; already running");return n}function Pn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _j(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=Hk(s,0,n.time);function s(p){n.state=u1,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var m,_,h,g;if(n.state!==u1)return d();for(m in i)if(g=i[m],g.name===n.name){if(g.state===Tl)return s1(u);g.state===l1?(g.state=Nl,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[m]):+m<t&&(g.state=Nl,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[m])}if(s1(function(){n.state===Tl&&(n.state=l1,n.timer.restart(l,n.delay,n.time),l(p))}),n.state=g0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===g0){for(n.state=Tl,a=new Array(h=n.tween.length),m=0,_=-1;m<h;++m)(g=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++_]=g);a.length=_+1}}function l(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=v0,1),_=-1,h=a.length;++_<h;)a[_].call(e,m);n.state===v0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Nl,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function jl(e,t){var n=e.__transition,i,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((i=n[u]).name!==t){s=!1;continue}a=i.state>g0&&i.state<v0,i.state=Nl,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[u]}s&&delete e.__transition}}function mj(e){return this.each(function(){jl(this,e)})}function hj(e,t){var n,i;return function(){var a=Yn(this,e),s=a.tween;if(s!==n){i=n=s;for(var u=0,l=i.length;u<l;++u)if(i[u].name===t){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function yj(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var s=Yn(this,e),u=s.tween;if(u!==i){a=(i=u).slice();for(var l={name:t,value:n},d=0,p=a.length;d<p;++d)if(a[d].name===t){a[d]=l;break}d===p&&a.push(l)}s.tween=a}}function gj(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Pn(this.node(),n).tween,a=0,s=i.length,u;a<s;++a)if((u=i[a]).name===e)return u.value;return null}return this.each((t==null?hj:yj)(n,e,t))}function Z0(e,t,n){var i=e._id;return e.each(function(){var a=Yn(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Pn(a,i).value[t]}}function Uk(e,t){var n;return(typeof t=="number"?Wn:t instanceof Ro?Al:(n=Ro(t))?(t=n,Al):Lk)(e,t)}function vj(e){return function(){this.removeAttribute(e)}}function xj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wj(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===i?s:s=t(i=u,n)}}function bj(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===i?s:s=t(i=u,n)}}function qj(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function Sj(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function Cj(e,t){var n=ac(e),i=n==="transform"?ij:Uk;return this.attrTween(e,typeof t=="function"?(n.local?Sj:qj)(n,i,Z0(this,"attr."+e,t)):t==null?(n.local?xj:vj)(n):(n.local?bj:wj)(n,i,t))}function kj(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Mj(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ej(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Mj(e,s)),n}return a._value=t,a}function Ij(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&kj(e,s)),n}return a._value=t,a}function Tj(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=ac(e);return this.tween(n,(i.local?Ej:Ij)(i,t))}function Nj(e,t){return function(){X0(this,e).delay=+t.apply(this,arguments)}}function jj(e,t){return t=+t,function(){X0(this,e).delay=t}}function Pj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nj:jj)(t,e)):Pn(this.node(),t).delay}function Rj(e,t){return function(){Yn(this,e).duration=+t.apply(this,arguments)}}function Vj(e,t){return t=+t,function(){Yn(this,e).duration=t}}function Fj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rj:Vj)(t,e)):Pn(this.node(),t).duration}function Oj(e,t){if(typeof t!="function")throw new Error;return function(){Yn(this,e).ease=t}}function Aj(e){var t=this._id;return arguments.length?this.each(Oj(t,e)):Pn(this.node(),t).ease}function Lj(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Yn(this,e).ease=n}}function Dj(e){if(typeof e!="function")throw new Error;return this.each(Lj(this._id,e))}function Bj(e){typeof e!="function"&&(e=qk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new vi(i,this._parents,this._name,this._id)}function zj(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,s=Math.min(i,a),u=new Array(i),l=0;l<s;++l)for(var d=t[l],p=n[l],m=d.length,_=u[l]=new Array(m),h,g=0;g<m;++g)(h=d[g]||p[g])&&(_[g]=h);for(;l<i;++l)u[l]=t[l];return new vi(u,this._parents,this._name,this._id)}function $j(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Hj(e,t,n){var i,a,s=$j(t)?X0:Yn;return function(){var u=s(this,e),l=u.on;l!==i&&(a=(i=l).copy()).on(t,n),u.on=a}}function Wj(e,t){var n=this._id;return arguments.length<2?Pn(this.node(),n).on.on(e):this.each(Hj(n,e,t))}function Uj(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Gj(){return this.on("end.remove",Uj(this._id))}function Kj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=U0(e));for(var i=this._groups,a=i.length,s=new Array(a),u=0;u<a;++u)for(var l=i[u],d=l.length,p=s[u]=new Array(d),m,_,h=0;h<d;++h)(m=l[h])&&(_=e.call(m,m.__data__,h,l))&&("__data__"in m&&(_.__data__=m.__data__),p[h]=_,uc(p[h],t,n,h,p,Pn(m,n)));return new vi(s,this._parents,t,n)}function Yj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bk(e));for(var i=this._groups,a=i.length,s=[],u=[],l=0;l<a;++l)for(var d=i[l],p=d.length,m,_=0;_<p;++_)if(m=d[_]){for(var h=e.call(m,m.__data__,_,d),g,x=Pn(m,n),q=0,w=h.length;q<w;++q)(g=h[q])&&uc(g,t,n,q,h,x);s.push(h),u.push(m)}return new vi(s,u,t,n)}var Qj=Zs.prototype.constructor;function Xj(){return new Qj(this._groups,this._parents)}function Zj(e,t){var n,i,a;return function(){var s=Ma(this,e),u=(this.style.removeProperty(e),Ma(this,e));return s===u?null:s===n&&u===i?a:a=t(n=s,i=u)}}function Gk(e){return function(){this.style.removeProperty(e)}}function Jj(e,t,n){var i,a=n+"",s;return function(){var u=Ma(this,e);return u===a?null:u===i?s:s=t(i=u,n)}}function eP(e,t,n){var i,a,s;return function(){var u=Ma(this,e),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),Ma(this,e))),u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l))}}function tP(e,t){var n,i,a,s="style."+t,u="end."+s,l;return function(){var d=Yn(this,e),p=d.on,m=d.value[s]==null?l||(l=Gk(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(u,a=m),d.on=i}}function rP(e,t,n){var i=(e+="")=="transform"?nj:Uk;return t==null?this.styleTween(e,Zj(e,i)).on("end.style."+e,Gk(e)):typeof t=="function"?this.styleTween(e,eP(e,i,Z0(this,"style."+e,t))).each(tP(this._id,e)):this.styleTween(e,Jj(e,i,t),n).on("end.style."+e,null)}function nP(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function iP(e,t,n){var i,a;function s(){var u=t.apply(this,arguments);return u!==a&&(i=(a=u)&&nP(e,u,n)),i}return s._value=t,s}function oP(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,iP(e,t,n??""))}function aP(e){return function(){this.textContent=e}}function sP(e){return function(){var t=e(this);this.textContent=t??""}}function uP(e){return this.tween("text",typeof e=="function"?sP(Z0(this,"text",e)):aP(e==null?"":e+""))}function lP(e){return function(t){this.textContent=e.call(this,t)}}function cP(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&lP(a)),t}return i._value=e,i}function dP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cP(e))}function pP(){for(var e=this._name,t=this._id,n=Kk(),i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)if(d=u[p]){var m=Pn(d,t);uc(d,e,n,p,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new vi(i,this._parents,e,n)}function fP(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(s,u){var l={value:u},d={value:function(){--a===0&&s()}};n.each(function(){var p=Yn(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),p.on=t}),a===0&&s()})}var _P=0;function vi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Kk(){return++_P}var mi=Zs.prototype;vi.prototype={constructor:vi,select:Kj,selectAll:Yj,selectChild:mi.selectChild,selectChildren:mi.selectChildren,filter:Bj,merge:zj,selection:Xj,transition:pP,call:mi.call,nodes:mi.nodes,node:mi.node,size:mi.size,empty:mi.empty,each:mi.each,on:Wj,attr:Cj,attrTween:Tj,style:rP,styleTween:oP,text:uP,textTween:dP,remove:Gj,tween:gj,delay:Pj,duration:Fj,ease:Aj,easeVarying:Dj,end:fP,[Symbol.iterator]:mi[Symbol.iterator]};function mP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hP={time:null,delay:0,duration:250,ease:mP};function yP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gP(e){var t,n;e instanceof vi?(t=e._id,e=e._name):(t=Kk(),(n=hP).time=Q0(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&uc(d,e,t,p,u,n||yP(d,t));return new vi(i,this._parents,e,t)}Zs.prototype.interrupt=mj;Zs.prototype.transition=gP;const _l=e=>()=>e;function vP(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function yi(e,t,n){this.k=e,this.x=t,this.y=n}yi.prototype={constructor:yi,scale:function(e){return e===1?this:new yi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lc=new yi(1,0,0);Yk.prototype=yi.prototype;function Yk(e){for(;!e.__zoom;)if(!(e=e.parentNode))return lc;return e.__zoom}function Sp(e){e.stopImmediatePropagation()}function ws(e){e.preventDefault(),e.stopImmediatePropagation()}function xP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wP(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function c1(){return this.__zoom||lc}function bP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qP(){return navigator.maxTouchPoints||"ontouchstart"in this}function SP(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function Qk(){var e=xP,t=wP,n=SP,i=bP,a=qP,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=Il,p=oc("start","zoom","end"),m,_,h,g=500,x=150,q=0,w=10;function b(j){j.property("__zoom",c1).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(j,U,H,te){var G=j.selection?j.selection():j;G.property("__zoom",c1),j!==G?I(j,U,H,te):G.interrupt().each(function(){E(this,arguments).event(te).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},b.scaleBy=function(j,U,H,te){b.scaleTo(j,function(){var G=this.__zoom.k,Y=typeof U=="function"?U.apply(this,arguments):U;return G*Y},H,te)},b.scaleTo=function(j,U,H,te){b.transform(j,function(){var G=t.apply(this,arguments),Y=this.__zoom,oe=H==null?M(G):typeof H=="function"?H.apply(this,arguments):H,z=Y.invert(oe),X=typeof U=="function"?U.apply(this,arguments):U;return n(S(C(Y,X),oe,z),G,u)},H,te)},b.translateBy=function(j,U,H,te){b.transform(j,function(){return n(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),u)},null,te)},b.translateTo=function(j,U,H,te,G){b.transform(j,function(){var Y=t.apply(this,arguments),oe=this.__zoom,z=te==null?M(Y):typeof te=="function"?te.apply(this,arguments):te;return n(lc.translate(z[0],z[1]).scale(oe.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof H=="function"?-H.apply(this,arguments):-H),Y,u)},te,G)};function C(j,U){return U=Math.max(s[0],Math.min(s[1],U)),U===j.k?j:new yi(U,j.x,j.y)}function S(j,U,H){var te=U[0]-H[0]*j.k,G=U[1]-H[1]*j.k;return te===j.x&&G===j.y?j:new yi(j.k,te,G)}function M(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function I(j,U,H,te){j.on("start.zoom",function(){E(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(te).end()}).tween("zoom",function(){var G=this,Y=arguments,oe=E(G,Y).event(te),z=t.apply(G,Y),X=H==null?M(z):typeof H=="function"?H.apply(G,Y):H,_e=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),W=G.__zoom,J=typeof U=="function"?U.apply(G,Y):U,re=d(W.invert(X).concat(_e/W.k),J.invert(X).concat(_e/J.k));return function(ue){if(ue===1)ue=J;else{var ae=re(ue),he=_e/ae[2];ue=new yi(he,X[0]-ae[0]*he,X[1]-ae[1]*he)}oe.zoom(null,ue)}})}function E(j,U,H){return!H&&j.__zooming||new N(j,U)}function N(j,U){this.that=j,this.args=U,this.active=0,this.sourceEvent=null,this.extent=t.apply(j,U),this.taps=0}N.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,U){return this.mouse&&j!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var U=Ur(this.that).datum();p.call(j,this.that,new vP(j,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:p}),U)}};function R(j,...U){if(!e.apply(this,arguments))return;var H=E(this,U).event(j),te=this.__zoom,G=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,i.apply(this,arguments)))),Y=kn(j);if(H.wheel)(H.mouse[0][0]!==Y[0]||H.mouse[0][1]!==Y[1])&&(H.mouse[1]=te.invert(H.mouse[0]=Y)),clearTimeout(H.wheel);else{if(te.k===G)return;H.mouse=[Y,te.invert(Y)],jl(this),H.start()}ws(j),H.wheel=setTimeout(oe,x),H.zoom("mouse",n(S(C(te,G),H.mouse[0],H.mouse[1]),H.extent,u));function oe(){H.wheel=null,H.end()}}function P(j,...U){if(h||!e.apply(this,arguments))return;var H=j.currentTarget,te=E(this,U,!0).event(j),G=Ur(j.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",_e,!0),Y=kn(j,H),oe=j.clientX,z=j.clientY;Pk(j.view),Sp(j),te.mouse=[Y,this.__zoom.invert(Y)],jl(this),te.start();function X(W){if(ws(W),!te.moved){var J=W.clientX-oe,re=W.clientY-z;te.moved=J*J+re*re>q}te.event(W).zoom("mouse",n(S(te.that.__zoom,te.mouse[0]=kn(W,H),te.mouse[1]),te.extent,u))}function _e(W){G.on("mousemove.zoom mouseup.zoom",null),Rk(W.view,te.moved),ws(W),te.event(W).end()}}function D(j,...U){if(e.apply(this,arguments)){var H=this.__zoom,te=kn(j.changedTouches?j.changedTouches[0]:j,this),G=H.invert(te),Y=H.k*(j.shiftKey?.5:2),oe=n(S(C(H,Y),te,G),t.apply(this,U),u);ws(j),l>0?Ur(this).transition().duration(l).call(I,oe,te,j):Ur(this).call(b.transform,oe,te,j)}}function F(j,...U){if(e.apply(this,arguments)){var H=j.touches,te=H.length,G=E(this,U,j.changedTouches.length===te).event(j),Y,oe,z,X;for(Sp(j),oe=0;oe<te;++oe)z=H[oe],X=kn(z,this),X=[X,this.__zoom.invert(X),z.identifier],G.touch0?!G.touch1&&G.touch0[2]!==X[2]&&(G.touch1=X,G.taps=0):(G.touch0=X,Y=!0,G.taps=1+!!m);m&&(m=clearTimeout(m)),Y&&(G.taps<2&&(_=X[0],m=setTimeout(function(){m=null},g)),jl(this),G.start())}}function O(j,...U){if(this.__zooming){var H=E(this,U).event(j),te=j.changedTouches,G=te.length,Y,oe,z,X;for(ws(j),Y=0;Y<G;++Y)oe=te[Y],z=kn(oe,this),H.touch0&&H.touch0[2]===oe.identifier?H.touch0[0]=z:H.touch1&&H.touch1[2]===oe.identifier&&(H.touch1[0]=z);if(oe=H.that.__zoom,H.touch1){var _e=H.touch0[0],W=H.touch0[1],J=H.touch1[0],re=H.touch1[1],ue=(ue=J[0]-_e[0])*ue+(ue=J[1]-_e[1])*ue,ae=(ae=re[0]-W[0])*ae+(ae=re[1]-W[1])*ae;oe=C(oe,Math.sqrt(ue/ae)),z=[(_e[0]+J[0])/2,(_e[1]+J[1])/2],X=[(W[0]+re[0])/2,(W[1]+re[1])/2]}else if(H.touch0)z=H.touch0[0],X=H.touch0[1];else return;H.zoom("touch",n(S(oe,z,X),H.extent,u))}}function Q(j,...U){if(this.__zooming){var H=E(this,U).event(j),te=j.changedTouches,G=te.length,Y,oe;for(Sp(j),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),Y=0;Y<G;++Y)oe=te[Y],H.touch0&&H.touch0[2]===oe.identifier?delete H.touch0:H.touch1&&H.touch1[2]===oe.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(oe=kn(oe,this),Math.hypot(_[0]-oe[0],_[1]-oe[1])<w)){var z=Ur(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(j){return arguments.length?(i=typeof j=="function"?j:_l(+j),b):i},b.filter=function(j){return arguments.length?(e=typeof j=="function"?j:_l(!!j),b):e},b.touchable=function(j){return arguments.length?(a=typeof j=="function"?j:_l(!!j),b):a},b.extent=function(j){return arguments.length?(t=typeof j=="function"?j:_l([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),b):t},b.scaleExtent=function(j){return arguments.length?(s[0]=+j[0],s[1]=+j[1],b):[s[0],s[1]]},b.translateExtent=function(j){return arguments.length?(u[0][0]=+j[0][0],u[1][0]=+j[1][0],u[0][1]=+j[0][1],u[1][1]=+j[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(j){return arguments.length?(n=j,b):n},b.duration=function(j){return arguments.length?(l=+j,b):l},b.interpolate=function(j){return arguments.length?(d=j,b):d},b.on=function(){var j=p.on.apply(p,arguments);return j===p?b:j},b.clickDistance=function(j){return arguments.length?(q=(j=+j)*j,b):Math.sqrt(q)},b.tapDistance=function(j){return arguments.length?(w=+j,b):w},b}const Kn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ds=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xk=["Enter"," ","Escape"],Zk={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ia;(function(e){e.Strict="strict",e.Loose="loose"})(Ia||(Ia={}));var Po;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Po||(Po={}));var Bs;(function(e){e.Partial="partial",e.Full="full"})(Bs||(Bs={}));const Jk={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Yi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Yi||(Yi={}));var zl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(zl||(zl={}));var He;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(He||(He={}));const d1={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top};function eM(e){return e===null?null:e?"valid":"invalid"}const tM=e=>"id"in e&&"source"in e&&"target"in e,CP=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),J0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),eu=(e,t=[0,0])=>{const{width:n,height:i}=xi(e),a=e.origin??t,s=n*a[0],u=i*a[1];return{x:e.position.x-s,y:e.position.y-u}},kP=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):J0(a)?a:t.nodeLookup.get(a.id));const l=u?$l(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return cc(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dc(n)},tu=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=cc(n,$l(a)),i=!0)}),i?dc(n):{x:0,y:0,width:0,height:0}},eg=(e,t,[n,i,a]=[0,0,1],s=!1,u=!1)=>{const l={...nu(t,[n,i,a]),width:t.width/a,height:t.height/a},d=[];for(const p of e.values()){const{measured:m,selectable:_=!0,hidden:h=!1}=p;if(u&&!_||h)continue;const g=m.width??p.width??p.initialWidth??null,x=m.height??p.height??p.initialHeight??null,q=zs(l,Na(p)),w=(g??0)*(x??0),b=s&&q>0;(!p.internals.handleBounds||b||q>=w||p.dragging)&&d.push(p)}return d},MP=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function EP(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&n.set(a.id,a)}),n}async function IP({nodes:e,width:t,height:n,panZoom:i,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const l=EP(e,u),d=tu(l),p=tg(d,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await i.setViewport(p,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function rM({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),l=u.parentId?n.get(u.parentId):void 0,{x:d,y:p}=l?l.internals.positionAbsolute:{x:0,y:0},m=u.origin??i;let _=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!l)s==null||s("005",Kn.error005());else{const g=l.measured.width,x=l.measured.height;g&&x&&(_=[[d,p],[d+g,p+x]])}else l&&ja(u.extent)&&(_=[[u.extent[0][0]+d,u.extent[0][1]+p],[u.extent[1][0]+d,u.extent[1][1]+p]]);const h=ja(_)?Fo(t,_,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Kn.error015())),{position:{x:h.x-d+(u.measured.width??0)*m[0],y:h.y-p+(u.measured.height??0)*m[1]},positionAbsolute:h}}async function TP({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:a}){const s=new Set(e.map(h=>h.id)),u=[];for(const h of n){if(h.deletable===!1)continue;const g=s.has(h.id),x=!g&&h.parentId&&u.find(q=>q.id===h.parentId);(g||x)&&u.push(h)}const l=new Set(t.map(h=>h.id)),d=i.filter(h=>h.deletable!==!1),m=MP(u,d);for(const h of d)l.has(h.id)&&!m.find(x=>x.id===h.id)&&m.push(h);if(!a)return{edges:m,nodes:u};const _=await a({nodes:u,edges:m});return typeof _=="boolean"?_?{edges:m,nodes:u}:{edges:[],nodes:[]}:_}const Ta=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Fo=(e={x:0,y:0},t,n)=>({x:Ta(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ta(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function nM(e,t,n){const{width:i,height:a}=xi(n),{x:s,y:u}=n.internals.positionAbsolute;return Fo(e,[[s,u],[s+i,u+a]],t)}const p1=(e,t,n)=>e<t?Ta(Math.abs(e-t),1,t)/t:e>n?-Ta(Math.abs(e-n),1,t)/t:0,iM=(e,t,n=15,i=40)=>{const a=p1(e.x,i,t.width-i)*n,s=p1(e.y,i,t.height-i)*n;return[a,s]},cc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),x0=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),dc=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Na=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=J0(e)?e.internals.positionAbsolute:eu(e,t);return{x:n,y:i,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},$l=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=J0(e)?e.internals.positionAbsolute:eu(e,t);return{x:n,y:i,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},oM=(e,t)=>dc(cc(x0(e),x0(t))),zs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},f1=e=>Tn(e.width)&&Tn(e.height)&&Tn(e.x)&&Tn(e.y),Tn=e=>!isNaN(e)&&isFinite(e),NP=(e,t)=>{},ru=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),nu=({x:e,y:t},[n,i,a],s=!1,u=[1,1])=>{const l={x:(e-n)/a,y:(t-i)/a};return s?ru(l,u):l},Hl=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i});function wa(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function jP(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=wa(e,n),a=wa(e,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof e=="object"){const i=wa(e.top??e.y??0,n),a=wa(e.bottom??e.y??0,n),s=wa(e.left??e.x??0,t),u=wa(e.right??e.x??0,t);return{top:i,right:u,bottom:a,left:s,x:s+u,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function PP(e,t,n,i,a,s){const{x:u,y:l}=Hl(e,[t,n,i]),{x:d,y:p}=Hl({x:e.x+e.width,y:e.y+e.height},[t,n,i]),m=a-d,_=s-p;return{left:Math.floor(u),top:Math.floor(l),right:Math.floor(m),bottom:Math.floor(_)}}const tg=(e,t,n,i,a,s)=>{const u=jP(s,t,n),l=(t-u.x)/e.width,d=(n-u.y)/e.height,p=Math.min(l,d),m=Ta(p,i,a),_=e.x+e.width/2,h=e.y+e.height/2,g=t/2-_*m,x=n/2-h*m,q=PP(e,g,x,m,t,n),w={left:Math.min(q.left-u.left,0),top:Math.min(q.top-u.top,0),right:Math.min(q.right-u.right,0),bottom:Math.min(q.bottom-u.bottom,0)};return{x:g-w.left+w.right,y:x-w.top+w.bottom,zoom:m}},$s=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ja(e){return e!=null&&e!=="parent"}function xi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function aM(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function sM(e,t={width:0,height:0},n,i,a){const s={...e},u=i.get(n);if(u){const l=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function _1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function RP(){let e,t;return{promise:new Promise((i,a)=>{e=i,t=a}),resolve:e,reject:t}}function VP(e){return{...Zk,...e||{}}}function Ts(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:a}){const{x:s,y:u}=Nn(e),l=nu({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},i),{x:d,y:p}=n?ru(l,t):l;return{xSnapped:d,ySnapped:p,...l}}const rg=e=>({width:e.offsetWidth,height:e.offsetHeight}),uM=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},FP=["INPUT","SELECT","TEXTAREA"];function lM(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:FP.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const cM=e=>"clientX"in e,Nn=(e,t)=>{var s,u;const n=cM(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},m1=(e,t,n,i,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...rg(u)}})};function dM({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l}){const d=e*.125+a*.375+u*.375+n*.125,p=t*.125+s*.375+l*.375+i*.125,m=Math.abs(d-e),_=Math.abs(p-t);return[d,p,m,_]}function ml(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function h1({pos:e,x1:t,y1:n,x2:i,y2:a,c:s}){switch(e){case He.Left:return[t-ml(t-i,s),n];case He.Right:return[t+ml(i-t,s),n];case He.Top:return[t,n-ml(n-a,s)];case He.Bottom:return[t,n+ml(a-n,s)]}}function ng({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:i,targetY:a,targetPosition:s=He.Top,curvature:u=.25}){const[l,d]=h1({pos:n,x1:e,y1:t,x2:i,y2:a,c:u}),[p,m]=h1({pos:s,x1:i,y1:a,x2:e,y2:t,c:u}),[_,h,g,x]=dM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:l,sourceControlY:d,targetControlX:p,targetControlY:m});return[`M${e},${t} C${l},${d} ${p},${m} ${i},${a}`,_,h,g,x]}function pM({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(i-t)/2,l=i<t?i+u:i-u;return[s,l,a,u]}function OP({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const u=a&&n?i+1e3:i,l=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+l}function AP({sourceNode:e,targetNode:t,width:n,height:i,transform:a}){const s=cc($l(e),$l(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:i/a[2]};return zs(u,dc(s))>0}const LP=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,DP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),w0=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||LP;let a;return tM(e)?a={...e}:a={...e,id:i(e)},DP(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function ig({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,s,u,l]=pM({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,s,u,l]}const y1={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},BP=({source:e,sourcePosition:t=He.Bottom,target:n})=>t===He.Left||t===He.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},g1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zP({source:e,sourcePosition:t=He.Bottom,target:n,targetPosition:i=He.Top,center:a,offset:s,stepPosition:u}){const l=y1[t],d=y1[i],p={x:e.x+l.x*s,y:e.y+l.y*s},m={x:n.x+d.x*s,y:n.y+d.y*s},_=BP({source:p,sourcePosition:t,target:m}),h=_.x!==0?"x":"y",g=_[h];let x=[],q,w;const b={x:0,y:0},C={x:0,y:0},[,,S,M]=pM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[h]*d[h]===-1){h==="x"?(q=a.x??p.x+(m.x-p.x)*u,w=a.y??(p.y+m.y)/2):(q=a.x??(p.x+m.x)/2,w=a.y??p.y+(m.y-p.y)*u);const E=[{x:q,y:p.y},{x:q,y:m.y}],N=[{x:p.x,y:w},{x:m.x,y:w}];l[h]===g?x=h==="x"?E:N:x=h==="x"?N:E}else{const E=[{x:p.x,y:m.y}],N=[{x:m.x,y:p.y}];if(h==="x"?x=l.x===g?N:E:x=l.y===g?E:N,t===i){const O=Math.abs(e[h]-n[h]);if(O<=s){const Q=Math.min(s-1,s-O);l[h]===g?b[h]=(p[h]>e[h]?-1:1)*Q:C[h]=(m[h]>n[h]?-1:1)*Q}}if(t!==i){const O=h==="x"?"y":"x",Q=l[h]===d[O],j=p[O]>m[O],U=p[O]<m[O];(l[h]===1&&(!Q&&j||Q&&U)||l[h]!==1&&(!Q&&U||Q&&j))&&(x=h==="x"?E:N)}const R={x:p.x+b.x,y:p.y+b.y},P={x:m.x+C.x,y:m.y+C.y},D=Math.max(Math.abs(R.x-x[0].x),Math.abs(P.x-x[0].x)),F=Math.max(Math.abs(R.y-x[0].y),Math.abs(P.y-x[0].y));D>=F?(q=(R.x+P.x)/2,w=x[0].y):(q=x[0].x,w=(R.y+P.y)/2)}return[[e,{x:p.x+b.x,y:p.y+b.y},...x,{x:m.x+C.x,y:m.y+C.y},n],q,w,S,M]}function $P(e,t,n,i){const a=Math.min(g1(e,t)/2,g1(t,n)/2,i),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+a*p},${u}Q ${s},${u} ${s},${u+a*m}`}const l=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${u+a*d}Q ${s},${u} ${s+a*l},${u}`}function Wl({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:i,targetY:a,targetPosition:s=He.Top,borderRadius:u=5,centerX:l,centerY:d,offset:p=20,stepPosition:m=.5}){const[_,h,g,x,q]=zP({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:s,center:{x:l,y:d},offset:p,stepPosition:m});return[_.reduce((b,C,S)=>{let M="";return S>0&&S<_.length-1?M=$P(_[S-1],C,_[S+1],u):M=`${S===0?"M":"L"}${C.x} ${C.y}`,b+=M,b},""),h,g,x,q]}function v1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function HP(e){var _;const{sourceNode:t,targetNode:n}=e;if(!v1(t)||!v1(n))return null;const i=t.internals.handleBounds||x1(t.handles),a=n.internals.handleBounds||x1(n.handles),s=w1((i==null?void 0:i.source)??[],e.sourceHandle),u=w1(e.connectionMode===Ia.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(_=e.onError)==null||_.call(e,"008",Kn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||He.Bottom,d=(u==null?void 0:u.position)||He.Top,p=Oo(t,s,l),m=Oo(n,u,d);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:l,targetPosition:d}}function x1(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Oo(e,t,n=He.Left,i=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??xi(e);if(i)return{x:a+u/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case He.Top:return{x:a+u/2,y:s};case He.Right:return{x:a+u,y:s+l/2};case He.Bottom:return{x:a+u/2,y:s+l};case He.Left:return{x:a,y:s+l/2}}}function w1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function b0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function WP(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,l)=>([l.markerStart||i,l.markerEnd||a].forEach(d=>{if(d&&typeof d=="object"){const p=b0(d,t);s.has(p)||(u.push({id:p,color:d.color||n,...d}),s.add(p))}}),u),[]).sort((u,l)=>u.id.localeCompare(l.id))}const fM=1e3,UP=10,og={nodeOrigin:[0,0],nodeExtent:Ds,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},GP={...og,checkEquality:!0};function ag(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function KP(e,t,n){const i=ag(og,n);for(const a of e.values())if(a.parentId)ug(a,e,t,i);else{const s=eu(a,i.nodeOrigin),u=ja(a.extent)?a.extent:i.nodeExtent,l=Fo(s,u,xi(a));a.internals.positionAbsolute=l}}function YP(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],i=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&i.push(s)}return{source:n,target:i}}function sg(e){return e==="manual"}function q0(e,t,n,i={}){var p,m;const a=ag(GP,i),s={i:0},u=new Map(t),l=a!=null&&a.elevateNodesOnSelect&&!sg(a.zIndexMode)?fM:0;let d=e.length>0;t.clear(),n.clear();for(const _ of e){let h=u.get(_.id);if(a.checkEquality&&_===(h==null?void 0:h.internals.userNode))t.set(_.id,h);else{const g=eu(_,a.nodeOrigin),x=ja(_.extent)?_.extent:a.nodeExtent,q=Fo(g,x,xi(_));h={...a.defaults,..._,measured:{width:(p=_.measured)==null?void 0:p.width,height:(m=_.measured)==null?void 0:m.height},internals:{positionAbsolute:q,handleBounds:YP(_,h),z:_M(_,l,a.zIndexMode),userNode:_}},t.set(_.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(d=!1),_.parentId&&ug(h,t,n,i,s)}return d}function QP(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ug(e,t,n,i,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:l,zIndexMode:d}=ag(og,i),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}QP(e,n),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*UP),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const _=s&&!sg(d)?fM:0,{x:h,y:g,z:x}=XP(e,m,u,l,_,d),{positionAbsolute:q}=e.internals,w=h!==q.x||g!==q.y;(w||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:h,y:g}:q,z:x}})}function _M(e,t,n){const i=Tn(e.zIndex)?e.zIndex:0;return sg(n)?i:i+(e.selected?t:0)}function XP(e,t,n,i,a,s){const{x:u,y:l}=t.internals.positionAbsolute,d=xi(e),p=eu(e,n),m=ja(e.extent)?Fo(p,e.extent,d):p;let _=Fo({x:u+m.x,y:l+m.y},i,d);e.extent==="parent"&&(_=nM(_,d,t));const h=_M(e,a,s),g=t.internals.z??0;return{x:_.x,y:_.y,z:g>=h?g+1:h}}function lg(e,t,n,i=[0,0]){var u;const a=[],s=new Map;for(const l of e){const d=t.get(l.parentId);if(!d)continue;const p=((u=s.get(l.parentId))==null?void 0:u.expandedRect)??Na(d),m=oM(p,l.rect);s.set(l.parentId,{expandedRect:m,parent:d})}return s.size>0&&s.forEach(({expandedRect:l,parent:d},p)=>{var S;const m=d.internals.positionAbsolute,_=xi(d),h=d.origin??i,g=l.x<m.x?Math.round(Math.abs(m.x-l.x)):0,x=l.y<m.y?Math.round(Math.abs(m.y-l.y)):0,q=Math.max(_.width,Math.round(l.width)),w=Math.max(_.height,Math.round(l.height)),b=(q-_.width)*h[0],C=(w-_.height)*h[1];(g>0||x>0||b||C)&&(a.push({id:p,type:"position",position:{x:d.position.x-g+b,y:d.position.y-x+C}}),(S=n.get(p))==null||S.forEach(M=>{e.some(I=>I.id===M.id)||a.push({id:M.id,type:"position",position:{x:M.position.x+g,y:M.position.y+x}})})),(_.width<l.width||_.height<l.height||g||x)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:q+(g?h[0]*g-b:0),height:w+(x?h[1]*x-C:0)}})}),a}function ZP(e,t,n,i,a,s,u){const l=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!l)return{changes:[],updatedInternals:d};const p=[],m=window.getComputedStyle(l),{m22:_}=new window.DOMMatrixReadOnly(m.transform),h=[];for(const g of e.values()){const x=t.get(g.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),d=!0;continue}const q=rg(g.nodeElement),w=x.measured.width!==q.width||x.measured.height!==q.height;if(!!(q.width&&q.height&&(w||!x.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),S=ja(x.extent)?x.extent:s;let{positionAbsolute:M}=x.internals;x.parentId&&x.extent==="parent"?M=nM(M,q,t.get(x.parentId)):S&&(M=Fo(M,S,q));const I={...x,measured:q,internals:{...x.internals,positionAbsolute:M,handleBounds:{source:m1("source",g.nodeElement,C,_,x.id),target:m1("target",g.nodeElement,C,_,x.id)}}};t.set(x.id,I),x.parentId&&ug(I,t,n,{nodeOrigin:a,zIndexMode:u}),d=!0,w&&(p.push({id:x.id,type:"dimensions",dimensions:q}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:Na(I,a)}))}}if(h.length>0){const g=lg(h,t,n,a);p.push(...g)}return{changes:p,updatedInternals:d}}async function JP({delta:e,panZoom:t,transform:n,translateExtent:i,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],i),l=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(l)}function b1(e,t,n,i,a,s){let u=a;const l=i.get(u)||new Map;i.set(u,l.set(n,t)),u=`${a}-${e}`;const d=i.get(u)||new Map;if(i.set(u,d.set(n,t)),s){u=`${a}-${e}-${s}`;const p=i.get(u)||new Map;i.set(u,p.set(n,t))}}function mM(e,t,n){e.clear(),t.clear();for(const i of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:l=null}=i,d={edgeId:i.id,source:a,target:s,sourceHandle:u,targetHandle:l},p=`${a}-${u}--${s}-${l}`,m=`${s}-${l}--${a}-${u}`;b1("source",d,m,e,a,u),b1("target",d,p,e,s,l),t.set(i.id,i)}}function hM(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:hM(n,t):!1}function q1(e,t,n){var a;let i=e;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function eR(e,t,n,i){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===i)&&(!u.parentId||!hM(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const l=e.get(s);l&&a.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function Cp({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var u,l,d;const a=[];for(const[p,m]of t){const _=(u=n.get(p))==null?void 0:u.internals.userNode;_&&a.push({..._,position:m.position,dragging:i})}if(!e)return[a[0],a];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((d=t.get(e))==null?void 0:d.position)||s.position,dragging:i}:a[0],a]}function tR({dragItems:e,snapGrid:t,x:n,y:i}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:i-a.distance.y},u=ru(s,t);return{x:u.x-s.x,y:u.y-s.y}}function rR({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:a}){let s={x:null,y:null},u=0,l=new Map,d=!1,p={x:0,y:0},m=null,_=!1,h=null,g=!1,x=!1,q=null;function w({noDragClassName:C,handleSelector:S,domNode:M,isSelectable:I,nodeId:E,nodeClickDistance:N=0}){h=Ur(M);function R({x:O,y:Q}){const{nodeLookup:j,nodeExtent:U,snapGrid:H,snapToGrid:te,nodeOrigin:G,onNodeDrag:Y,onSelectionDrag:oe,onError:z,updateNodePositions:X}=t();s={x:O,y:Q};let _e=!1;const W=l.size>1,J=W&&U?x0(tu(l)):null,re=W&&te?tR({dragItems:l,snapGrid:H,x:O,y:Q}):null;for(const[ue,ae]of l){if(!j.has(ue))continue;let he={x:O-ae.distance.x,y:Q-ae.distance.y};te&&(he=re?{x:Math.round(he.x+re.x),y:Math.round(he.y+re.y)}:ru(he,H));let Ee=null;if(W&&U&&!ae.extent&&J){const{positionAbsolute:Te}=ae.internals,Pe=Te.x-J.x+U[0][0],Fe=Te.x+ae.measured.width-J.x2+U[1][0],We=Te.y-J.y+U[0][1],Be=Te.y+ae.measured.height-J.y2+U[1][1];Ee=[[Pe,We],[Fe,Be]]}const{position:je,positionAbsolute:Ie}=rM({nodeId:ue,nextPosition:he,nodeLookup:j,nodeExtent:Ee||U,nodeOrigin:G,onError:z});_e=_e||ae.position.x!==je.x||ae.position.y!==je.y,ae.position=je,ae.internals.positionAbsolute=Ie}if(x=x||_e,!!_e&&(X(l,!0),q&&(i||Y||!E&&oe))){const[ue,ae]=Cp({nodeId:E,dragItems:l,nodeLookup:j});i==null||i(q,l,ue,ae),Y==null||Y(q,ue,ae),E||oe==null||oe(q,ae)}}async function P(){if(!m)return;const{transform:O,panBy:Q,autoPanSpeed:j,autoPanOnNodeDrag:U}=t();if(!U){d=!1,cancelAnimationFrame(u);return}const[H,te]=iM(p,m,j);(H!==0||te!==0)&&(s.x=(s.x??0)-H/O[2],s.y=(s.y??0)-te/O[2],await Q({x:H,y:te})&&R(s)),u=requestAnimationFrame(P)}function D(O){var W;const{nodeLookup:Q,multiSelectionActive:j,nodesDraggable:U,transform:H,snapGrid:te,snapToGrid:G,selectNodesOnDrag:Y,onNodeDragStart:oe,onSelectionDragStart:z,unselectNodesAndEdges:X}=t();_=!0,(!Y||!I)&&!j&&E&&((W=Q.get(E))!=null&&W.selected||X()),I&&Y&&E&&(e==null||e(E));const _e=Ts(O.sourceEvent,{transform:H,snapGrid:te,snapToGrid:G,containerBounds:m});if(s=_e,l=eR(Q,U,_e,E),l.size>0&&(n||oe||!E&&z)){const[J,re]=Cp({nodeId:E,dragItems:l,nodeLookup:Q});n==null||n(O.sourceEvent,l,J,re),oe==null||oe(O.sourceEvent,J,re),E||z==null||z(O.sourceEvent,re)}}const F=Vk().clickDistance(N).on("start",O=>{const{domNode:Q,nodeDragThreshold:j,transform:U,snapGrid:H,snapToGrid:te}=t();m=(Q==null?void 0:Q.getBoundingClientRect())||null,g=!1,x=!1,q=O.sourceEvent,j===0&&D(O),s=Ts(O.sourceEvent,{transform:U,snapGrid:H,snapToGrid:te,containerBounds:m}),p=Nn(O.sourceEvent,m)}).on("drag",O=>{const{autoPanOnNodeDrag:Q,transform:j,snapGrid:U,snapToGrid:H,nodeDragThreshold:te,nodeLookup:G}=t(),Y=Ts(O.sourceEvent,{transform:j,snapGrid:U,snapToGrid:H,containerBounds:m});if(q=O.sourceEvent,(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||E&&!G.has(E))&&(g=!0),!g){if(!d&&Q&&_&&(d=!0,P()),!_){const oe=Nn(O.sourceEvent,m),z=oe.x-p.x,X=oe.y-p.y;Math.sqrt(z*z+X*X)>te&&D(O)}(s.x!==Y.xSnapped||s.y!==Y.ySnapped)&&l&&_&&(p=Nn(O.sourceEvent,m),R(Y))}}).on("end",O=>{if(!(!_||g)&&(d=!1,_=!1,cancelAnimationFrame(u),l.size>0)){const{nodeLookup:Q,updateNodePositions:j,onNodeDragStop:U,onSelectionDragStop:H}=t();if(x&&(j(l,!1),x=!1),a||U||!E&&H){const[te,G]=Cp({nodeId:E,dragItems:l,nodeLookup:Q,dragging:!1});a==null||a(O.sourceEvent,l,te,G),U==null||U(O.sourceEvent,te,G),E||H==null||H(O.sourceEvent,G)}}}).filter(O=>{const Q=O.target;return!O.button&&(!C||!q1(Q,`.${C}`,M))&&(!S||q1(Q,S,M))});h.call(F)}function b(){h==null||h.on(".drag",null)}return{update:w,destroy:b}}function nR(e,t,n){const i=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())zs(a,Na(s))>0&&i.push(s);return i}const iR=250;function oR(e,t,n,i){var l,d;let a=[],s=1/0;const u=nR(e,n,t+iR);for(const p of u){const m=[...((l=p.internals.handleBounds)==null?void 0:l.source)??[],...((d=p.internals.handleBounds)==null?void 0:d.target)??[]];for(const _ of m){if(i.nodeId===_.nodeId&&i.type===_.type&&i.id===_.id)continue;const{x:h,y:g}=Oo(p,_,_.position,!0),x=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));x>t||(x<s?(a=[{..._,x:h,y:g}],s=x):x===s&&a.push({..._,x:h,y:g}))}}if(!a.length)return null;if(a.length>1){const p=i.type==="source"?"target":"source";return a.find(m=>m.type===p)??a[0]}return a[0]}function yM(e,t,n,i,a,s=!1){var p,m,_;const u=i.get(e);if(!u)return null;const l=a==="strict"?(p=u.internals.handleBounds)==null?void 0:p[t]:[...((m=u.internals.handleBounds)==null?void 0:m.source)??[],...((_=u.internals.handleBounds)==null?void 0:_.target)??[]],d=(n?l==null?void 0:l.find(h=>h.id===n):l==null?void 0:l[0])??null;return d&&s?{...d,...Oo(u,d,d.position,!0)}:d}function gM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function aR(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const vM=()=>!0;function sR(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:l,nodeLookup:d,lib:p,autoPanOnConnect:m,flowId:_,panBy:h,cancelConnection:g,onConnectStart:x,onConnect:q,onConnectEnd:w,isValidConnection:b=vM,onReconnectEnd:C,updateConnection:S,getTransform:M,getFromHandle:I,autoPanSpeed:E,dragThreshold:N=1,handleDomNode:R}){const P=uM(e.target);let D=0,F;const{x:O,y:Q}=Nn(e),j=gM(s,R),U=l==null?void 0:l.getBoundingClientRect();let H=!1;if(!U||!j)return;const te=yM(a,j,i,d,t);if(!te)return;let G=Nn(e,U),Y=!1,oe=null,z=!1,X=null;function _e(){if(!m||!U)return;const[je,Ie]=iM(G,U,E);h({x:je,y:Ie}),D=requestAnimationFrame(_e)}const W={...te,nodeId:a,type:j,position:te.position},J=d.get(a);let ue={inProgress:!0,isValid:null,from:Oo(J,W,He.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:J,to:G,toHandle:null,toPosition:d1[W.position],toNode:null,pointer:G};function ae(){H=!0,S(ue),x==null||x(e,{nodeId:a,handleId:i,handleType:j})}N===0&&ae();function he(je){if(!H){const{x:Be,y:rt}=Nn(je),et=Be-O,pt=rt-Q;if(!(et*et+pt*pt>N*N))return;ae()}if(!I()||!W){Ee(je);return}const Ie=M();G=Nn(je,U),F=oR(nu(G,Ie,!1,[1,1]),n,d,W),Y||(_e(),Y=!0);const Te=xM(je,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:u?"target":"source",isValidConnection:b,doc:P,lib:p,flowId:_,nodeLookup:d});X=Te.handleDomNode,oe=Te.connection,z=aR(!!F,Te.isValid);const Pe=d.get(a),Fe=Pe?Oo(Pe,W,He.Left,!0):ue.from,We={...ue,from:Fe,isValid:z,to:Te.toHandle&&z?Hl({x:Te.toHandle.x,y:Te.toHandle.y},Ie):G,toHandle:Te.toHandle,toPosition:z&&Te.toHandle?Te.toHandle.position:d1[W.position],toNode:Te.toHandle?d.get(Te.toHandle.nodeId):null,pointer:G};S(We),ue=We}function Ee(je){if(!("touches"in je&&je.touches.length>0)){if(H){(F||X)&&oe&&z&&(q==null||q(oe));const{inProgress:Ie,...Te}=ue,Pe={...Te,toPosition:ue.toHandle?ue.toPosition:null};w==null||w(je,Pe),s&&(C==null||C(je,Pe))}g(),cancelAnimationFrame(D),Y=!1,z=!1,oe=null,X=null,P.removeEventListener("mousemove",he),P.removeEventListener("mouseup",Ee),P.removeEventListener("touchmove",he),P.removeEventListener("touchend",Ee)}}P.addEventListener("mousemove",he),P.addEventListener("mouseup",Ee),P.addEventListener("touchmove",he),P.addEventListener("touchend",Ee)}function xM(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:a,fromType:s,doc:u,lib:l,flowId:d,isValidConnection:p=vM,nodeLookup:m}){const _=s==="target",h=t?u.querySelector(`.${l}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:x}=Nn(e),q=u.elementFromPoint(g,x),w=q!=null&&q.classList.contains(`${l}-flow__handle`)?q:h,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const C=gM(void 0,w),S=w.getAttribute("data-nodeid"),M=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),E=w.classList.contains("connectableend");if(!S||!C)return b;const N={source:_?S:i,sourceHandle:_?M:a,target:_?i:S,targetHandle:_?a:M};b.connection=N;const P=I&&E&&(n===Ia.Strict?_&&C==="source"||!_&&C==="target":S!==i||M!==a);b.isValid=P&&p(N),b.toHandle=yM(S,C,M,m,n,!0)}return b}const S0={onPointerDown:sR,isValid:xM};function uR({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const a=Ur(e);function s({translateExtent:l,width:d,height:p,zoomStep:m=1,pannable:_=!0,zoomable:h=!0,inversePan:g=!1}){const x=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const M=n(),I=S.sourceEvent.ctrlKey&&$s()?10:1,E=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*m,N=M[2]*Math.pow(2,E*I);t.scaleTo(N)};let q=[0,0];const w=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(q=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},b=S=>{const M=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const I=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],E=[I[0]-q[0],I[1]-q[1]];q=I;const N=i()*Math.max(M[2],Math.log(M[2]))*(g?-1:1),R={x:M[0]-E[0]*N,y:M[1]-E[1]*N},P=[[0,0],[d,p]];t.setViewportConstrained({x:R.x,y:R.y,zoom:M[2]},P,l)},C=Qk().on("start",w).on("zoom",_?b:null).on("zoom.wheel",h?x:null);a.call(C,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:kn}}const pc=e=>({x:e.x,y:e.y,zoom:e.k}),kp=({x:e,y:t,zoom:n})=>lc.translate(e,t).scale(n),ba=(e,t)=>e.target.closest(`.${t}`),wM=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),lR=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Mp=(e,t=0,n=lR,i=()=>{})=>{const a=typeof t=="number"&&t>0;return a||i(),a?e.transition().duration(t).ease(n).on("end",i):e},bM=e=>{const t=e.ctrlKey&&$s()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function cR({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:d,onPanZoomEnd:p}){return m=>{if(ba(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const _=n.property("__zoom").k||1;if(m.ctrlKey&&u){const w=kn(m),b=bM(m),C=_*Math.pow(2,b);i.scaleTo(n,C,w,m);return}const h=m.deltaMode===1?20:1;let g=a===Po.Vertical?0:m.deltaX*h,x=a===Po.Horizontal?0:m.deltaY*h;!$s()&&m.shiftKey&&a!==Po.Vertical&&(g=m.deltaY*h,x=0),i.translateBy(n,-(g/_)*s,-(x/_)*s,{internal:!0});const q=pc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(m,q),e.panScrollTimeout=setTimeout(()=>{p==null||p(m,q),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(m,q))}}function dR({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,a){const s=i.type==="wheel",u=!t&&s&&!i.ctrlKey,l=ba(i,e);if(i.ctrlKey&&s&&l&&i.preventDefault(),u||l)return null;i.preventDefault(),n.call(this,i,a)}}function pR({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,u,l;if((s=i.sourceEvent)!=null&&s.internal)return;const a=pc(i.transform);e.mouseButton=((u=i.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,a))}}function fR({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:a}){return s=>{var u,l;e.usedRightMouseButton=!!(n&&wM(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||i([s.transform.x,s.transform.y,s.transform.k]),a&&!((l=s.sourceEvent)!=null&&l.internal)&&(a==null||a(s.sourceEvent,pc(s.transform)))}}function _R({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var l;if(!((l=u.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&wM(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,i(!1),a)){const d=pc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,d)},n?150:0)}}}function mR({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:l,noPanClassName:d,lib:p,connectionInProgress:m}){return _=>{var w;const h=e||t,g=n&&_.ctrlKey,x=_.type==="wheel";if(_.button===1&&_.type==="mousedown"&&(ba(_,`${p}-flow__node`)||ba(_,`${p}-flow__edge`)))return!0;if(!i&&!h&&!a&&!s&&!n||u||m&&!x||ba(_,l)&&x||ba(_,d)&&(!x||a&&x&&!e)||!n&&_.ctrlKey&&x)return!1;if(!n&&_.type==="touchstart"&&((w=_.touches)==null?void 0:w.length)>1)return _.preventDefault(),!1;if(!h&&!a&&!g&&x||!i&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(i)&&!i.includes(_.button)&&_.type==="mousedown")return!1;const q=Array.isArray(i)&&i.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||x)&&q}}function hR({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),_=Qk().scaleExtent([t,n]).translateExtent(i),h=Ur(e).call(_);C({x:a.x,y:a.y,zoom:Ta(a.zoom,t,n)},[[0,0],[m.width,m.height]],i);const g=h.on("wheel.zoom"),x=h.on("dblclick.zoom");_.wheelDelta(bM);function q(F,O){return h?new Promise(Q=>{_==null||_.interpolate((O==null?void 0:O.interpolate)==="linear"?Is:Il).transform(Mp(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>Q(!0)),F)}):Promise.resolve(!1)}function w({noWheelClassName:F,noPanClassName:O,onPaneContextMenu:Q,userSelectionActive:j,panOnScroll:U,panOnDrag:H,panOnScrollMode:te,panOnScrollSpeed:G,preventScrolling:Y,zoomOnPinch:oe,zoomOnScroll:z,zoomOnDoubleClick:X,zoomActivationKeyPressed:_e,lib:W,onTransformChange:J,connectionInProgress:re,paneClickDistance:ue,selectionOnDrag:ae}){j&&!p.isZoomingOrPanning&&b();const he=U&&!_e&&!j;_.clickDistance(ae?1/0:!Tn(ue)||ue<0?0:ue);const Ee=he?cR({zoomPanValues:p,noWheelClassName:F,d3Selection:h,d3Zoom:_,panOnScrollMode:te,panOnScrollSpeed:G,zoomOnPinch:oe,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):dR({noWheelClassName:F,preventScrolling:Y,d3ZoomHandler:g});if(h.on("wheel.zoom",Ee,{passive:!1}),!j){const Ie=pR({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:u});_.on("start",Ie);const Te=fR({zoomPanValues:p,panOnDrag:H,onPaneContextMenu:!!Q,onPanZoom:s,onTransformChange:J});_.on("zoom",Te);const Pe=_R({zoomPanValues:p,panOnDrag:H,panOnScroll:U,onPaneContextMenu:Q,onPanZoomEnd:l,onDraggingChange:d});_.on("end",Pe)}const je=mR({zoomActivationKeyPressed:_e,panOnDrag:H,zoomOnScroll:z,panOnScroll:U,zoomOnDoubleClick:X,zoomOnPinch:oe,userSelectionActive:j,noPanClassName:O,noWheelClassName:F,lib:W,connectionInProgress:re});_.filter(je),X?h.on("dblclick.zoom",x):h.on("dblclick.zoom",null)}function b(){_.on("zoom",null)}async function C(F,O,Q){const j=kp(F),U=_==null?void 0:_.constrain()(j,O,Q);return U&&await q(U),new Promise(H=>H(U))}async function S(F,O){const Q=kp(F);return await q(Q,O),new Promise(j=>j(Q))}function M(F){if(h){const O=kp(F),Q=h.property("__zoom");(Q.k!==F.zoom||Q.x!==F.x||Q.y!==F.y)&&(_==null||_.transform(h,O,null,{sync:!0}))}}function I(){const F=h?Yk(h.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function E(F,O){return h?new Promise(Q=>{_==null||_.interpolate((O==null?void 0:O.interpolate)==="linear"?Is:Il).scaleTo(Mp(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>Q(!0)),F)}):Promise.resolve(!1)}function N(F,O){return h?new Promise(Q=>{_==null||_.interpolate((O==null?void 0:O.interpolate)==="linear"?Is:Il).scaleBy(Mp(h,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>Q(!0)),F)}):Promise.resolve(!1)}function R(F){_==null||_.scaleExtent(F)}function P(F){_==null||_.translateExtent(F)}function D(F){const O=!Tn(F)||F<0?0:F;_==null||_.clickDistance(O)}return{update:w,destroy:b,setViewport:S,setViewportConstrained:C,getViewport:I,scaleTo:E,scaleBy:N,setScaleExtent:R,setTranslateExtent:P,syncViewport:M,setClickDistance:D}}var Pa;(function(e){e.Line="line",e.Handle="handle"})(Pa||(Pa={}));function yR({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:a,affectsY:s}){const u=e-t,l=n-i,d=[u>0?1:u<0?-1:0,l>0?1:l<0?-1:0];return u&&a&&(d[0]=d[0]*-1),l&&s&&(d[1]=d[1]*-1),d}function S1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:a}}function Ui(e,t){return Math.max(0,t-e)}function Gi(e,t){return Math.max(0,e-t)}function hl(e,t,n){return Math.max(0,t-e,e-n)}function C1(e,t){return e?!t:t}function gR(e,t,n,i,a,s,u,l){let{affectsX:d,affectsY:p}=t;const{isHorizontal:m,isVertical:_}=t,h=m&&_,{xSnapped:g,ySnapped:x}=n,{minWidth:q,maxWidth:w,minHeight:b,maxHeight:C}=i,{x:S,y:M,width:I,height:E,aspectRatio:N}=e;let R=Math.floor(m?g-e.pointerX:0),P=Math.floor(_?x-e.pointerY:0);const D=I+(d?-R:R),F=E+(p?-P:P),O=-s[0]*I,Q=-s[1]*E;let j=hl(D,q,w),U=hl(F,b,C);if(u){let G=0,Y=0;d&&R<0?G=Ui(S+R+O,u[0][0]):!d&&R>0&&(G=Gi(S+D+O,u[1][0])),p&&P<0?Y=Ui(M+P+Q,u[0][1]):!p&&P>0&&(Y=Gi(M+F+Q,u[1][1])),j=Math.max(j,G),U=Math.max(U,Y)}if(l){let G=0,Y=0;d&&R>0?G=Gi(S+R,l[0][0]):!d&&R<0&&(G=Ui(S+D,l[1][0])),p&&P>0?Y=Gi(M+P,l[0][1]):!p&&P<0&&(Y=Ui(M+F,l[1][1])),j=Math.max(j,G),U=Math.max(U,Y)}if(a){if(m){const G=hl(D/N,b,C)*N;if(j=Math.max(j,G),u){let Y=0;!d&&!p||d&&!p&&h?Y=Gi(M+Q+D/N,u[1][1])*N:Y=Ui(M+Q+(d?R:-R)/N,u[0][1])*N,j=Math.max(j,Y)}if(l){let Y=0;!d&&!p||d&&!p&&h?Y=Ui(M+D/N,l[1][1])*N:Y=Gi(M+(d?R:-R)/N,l[0][1])*N,j=Math.max(j,Y)}}if(_){const G=hl(F*N,q,w)/N;if(U=Math.max(U,G),u){let Y=0;!d&&!p||p&&!d&&h?Y=Gi(S+F*N+O,u[1][0])/N:Y=Ui(S+(p?P:-P)*N+O,u[0][0])/N,U=Math.max(U,Y)}if(l){let Y=0;!d&&!p||p&&!d&&h?Y=Ui(S+F*N,l[1][0])/N:Y=Gi(S+(p?P:-P)*N,l[0][0])/N,U=Math.max(U,Y)}}}P=P+(P<0?U:-U),R=R+(R<0?j:-j),a&&(h?D>F*N?P=(C1(d,p)?-R:R)/N:R=(C1(d,p)?-P:P)*N:m?(P=R/N,p=d):(R=P*N,d=p));const H=d?S+R:S,te=p?M+P:M;return{width:I+(d?-R:R),height:E+(p?-P:P),x:s[0]*R*(d?-1:1)+H,y:s[1]*P*(p?-1:1)+te}}const qM={width:0,height:0,x:0,y:0},vR={...qM,pointerX:0,pointerY:0,aspectRatio:1};function xR(e){return[[0,0],[e.measured.width,e.measured.height]]}function wR(e,t,n){const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,l=n[0]*s,d=n[1]*u;return[[i-l,a-d],[i+s-l,a+u-d]]}function bR({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:a}){const s=Ur(e);let u={controlDirection:S1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:p,boundaries:m,keepAspectRatio:_,resizeDirection:h,onResizeStart:g,onResize:x,onResizeEnd:q,shouldResize:w}){let b={...qM},C={...vR};u={boundaries:m,resizeDirection:h,keepAspectRatio:_,controlDirection:S1(p)};let S,M=null,I=[],E,N,R,P=!1;const D=Vk().on("start",F=>{const{nodeLookup:O,transform:Q,snapGrid:j,snapToGrid:U,nodeOrigin:H,paneDomNode:te}=n();if(S=O.get(t),!S)return;M=(te==null?void 0:te.getBoundingClientRect())??null;const{xSnapped:G,ySnapped:Y}=Ts(F.sourceEvent,{transform:Q,snapGrid:j,snapToGrid:U,containerBounds:M});b={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},C={...b,pointerX:G,pointerY:Y,aspectRatio:b.width/b.height},E=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(E=O.get(S.parentId),N=E&&S.extent==="parent"?xR(E):void 0),I=[],R=void 0;for(const[oe,z]of O)if(z.parentId===t&&(I.push({id:oe,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const X=wR(z,S,z.origin??H);R?R=[[Math.min(X[0][0],R[0][0]),Math.min(X[0][1],R[0][1])],[Math.max(X[1][0],R[1][0]),Math.max(X[1][1],R[1][1])]]:R=X}g==null||g(F,{...b})}).on("drag",F=>{const{transform:O,snapGrid:Q,snapToGrid:j,nodeOrigin:U}=n(),H=Ts(F.sourceEvent,{transform:O,snapGrid:Q,snapToGrid:j,containerBounds:M}),te=[];if(!S)return;const{x:G,y:Y,width:oe,height:z}=b,X={},_e=S.origin??U,{width:W,height:J,x:re,y:ue}=gR(C,u.controlDirection,H,u.boundaries,u.keepAspectRatio,_e,N,R),ae=W!==oe,he=J!==z,Ee=re!==G&&ae,je=ue!==Y&&he;if(!Ee&&!je&&!ae&&!he)return;if((Ee||je||_e[0]===1||_e[1]===1)&&(X.x=Ee?re:b.x,X.y=je?ue:b.y,b.x=X.x,b.y=X.y,I.length>0)){const Fe=re-G,We=ue-Y;for(const Be of I)Be.position={x:Be.position.x-Fe+_e[0]*(W-oe),y:Be.position.y-We+_e[1]*(J-z)},te.push(Be)}if((ae||he)&&(X.width=ae&&(!u.resizeDirection||u.resizeDirection==="horizontal")?W:b.width,X.height=he&&(!u.resizeDirection||u.resizeDirection==="vertical")?J:b.height,b.width=X.width,b.height=X.height),E&&S.expandParent){const Fe=_e[0]*(X.width??0);X.x&&X.x<Fe&&(b.x=Fe,C.x=C.x-(X.x-Fe));const We=_e[1]*(X.height??0);X.y&&X.y<We&&(b.y=We,C.y=C.y-(X.y-We))}const Ie=yR({width:b.width,prevWidth:oe,height:b.height,prevHeight:z,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Te={...b,direction:Ie};(w==null?void 0:w(F,Te))!==!1&&(P=!0,x==null||x(F,Te),i(X,te))}).on("end",F=>{P&&(q==null||q(F,{...b}),a==null||a({...b}),P=!1)});s.call(D)}function d(){s.on(".drag",null)}return{update:l,destroy:d}}var Ep={exports:{}},Ip={},Tp={exports:{}},Np={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function qR(){if(k1)return Np;k1=1;var e=Xs();function t(_,h){return _===h&&(_!==0||1/_===1/h)||_!==_&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function l(_,h){var g=h(),x=i({inst:{value:g,getSnapshot:h}}),q=x[0].inst,w=x[1];return s(function(){q.value=g,q.getSnapshot=h,d(q)&&w({inst:q})},[_,g,h]),a(function(){return d(q)&&w({inst:q}),_(function(){d(q)&&w({inst:q})})},[_]),u(g),g}function d(_){var h=_.getSnapshot;_=_.value;try{var g=h();return!n(_,g)}catch{return!0}}function p(_,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:l;return Np.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Np}var M1;function SR(){return M1||(M1=1,Tp.exports=qR()),Tp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1;function CR(){if(E1)return Ip;E1=1;var e=Xs(),t=SR();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Ip.useSyncExternalStoreWithSelector=function(p,m,_,h,g){var x=s(null);if(x.current===null){var q={hasValue:!1,value:null};x.current=q}else q=x.current;x=l(function(){function b(E){if(!C){if(C=!0,S=E,E=h(E),g!==void 0&&q.hasValue){var N=q.value;if(g(N,E))return M=N}return M=E}if(N=M,i(S,E))return N;var R=h(E);return g!==void 0&&g(N,R)?(S=E,N):(S=E,M=R)}var C=!1,S,M,I=_===void 0?null:_;return[function(){return b(m())},I===null?void 0:function(){return b(I())}]},[m,_,h,g]);var w=a(p,x[0],x[1]);return u(function(){q.hasValue=!0,q.value=w},[w]),d(w),w},Ip}var I1;function kR(){return I1||(I1=1,Ep.exports=CR()),Ep.exports}var MR=kR();const ER=Va(MR),IR={},T1=e=>{let t;const n=new Set,i=(m,_)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const g=t;t=_??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,g))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(IR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,d);return d},TR=e=>e?T1(e):T1,{useDebugValue:NR}=vk,{useSyncExternalStoreWithSelector:jR}=ER,PR=e=>e;function SM(e,t=PR,n){const i=jR(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return NR(i),i}const N1=(e,t)=>{const n=TR(e),i=(a,s=t)=>SM(n,a,s);return Object.assign(i,n),i},RR=(e,t)=>e?N1(e,t):N1;function qt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var VR=xk();const FR=Va(VR),fc=A.createContext(null),OR=fc.Provider,CM=Kn.error001();function Je(e,t){const n=A.useContext(fc);if(n===null)throw new Error(CM);return SM(n,e,t)}function St(){const e=A.useContext(fc);if(e===null)throw new Error(CM);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const j1={display:"none"},AR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kM="react-flow__node-desc",MM="react-flow__edge-desc",LR="react-flow__aria-live",DR=e=>e.ariaLiveMessage,BR=e=>e.ariaLabelConfig;function zR({rfId:e}){const t=Je(DR);return f.jsx("div",{id:`${LR}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:AR,children:t})}function $R({rfId:e,disableKeyboardA11y:t}){const n=Je(BR);return f.jsxs(f.Fragment,{children:[f.jsx("div",{id:`${kM}-${e}`,style:j1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),f.jsx("div",{id:`${MM}-${e}`,style:j1,children:n["edge.a11yDescription.default"]}),!t&&f.jsx(zR,{rfId:e})]})}const Ra=A.forwardRef(({position:e="top-left",children:t,className:n,style:i,...a},s)=>{const u=`${e}`.split("-");return f.jsx("div",{className:Ft(["react-flow__panel",n,...u]),style:i,ref:s,...a,children:t})});Ra.displayName="Panel";function HR({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:f.jsx(Ra,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const WR=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},yl=e=>e.id;function UR(e,t){return qt(e.selectedNodes.map(yl),t.selectedNodes.map(yl))&&qt(e.selectedEdges.map(yl),t.selectedEdges.map(yl))}function GR({onSelectionChange:e}){const t=St(),{selectedNodes:n,selectedEdges:i}=Je(WR,UR);return A.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,i,e]),null}const KR=e=>!!e.onSelectionChangeHandlers;function YR({onSelectionChange:e}){const t=Je(KR);return e||t?f.jsx(GR,{onSelectionChange:e}):null}const EM=[0,0],QR={x:0,y:0,zoom:1},XR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],P1=[...XR,"rfId"],ZR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),R1={translateExtent:Ds,nodeOrigin:EM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function JR(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:l,setDefaultNodesAndEdges:d}=Je(ZR,qt),p=St();A.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=R1,l()}),[]);const m=A.useRef(R1);return A.useEffect(()=>{for(const _ of P1){const h=e[_],g=m.current[_];h!==g&&(typeof e[_]>"u"||(_==="nodes"?t(h):_==="edges"?n(h):_==="minZoom"?i(h):_==="maxZoom"?a(h):_==="translateExtent"?s(h):_==="nodeExtent"?u(h):_==="ariaLabelConfig"?p.setState({ariaLabelConfig:VP(h)}):_==="fitView"?p.setState({fitViewQueued:h}):_==="fitViewOptions"?p.setState({fitViewOptions:h}):p.setState({[_]:h})))}m.current=e},P1.map(_=>e[_])),null}function V1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function e4(e){var i;const[t,n]=A.useState(e==="system"?null:e);return A.useEffect(()=>{if(e!=="system"){n(e);return}const a=V1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(i=V1())!=null&&i.matches?"dark":"light"}const F1=typeof document<"u"?document:null;function Hs(e=null,t={target:F1,actInsideInputWithModifier:!0}){const[n,i]=A.useState(!1),a=A.useRef(!1),s=A.useRef(new Set([])),[u,l]=A.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(_=>typeof _=="string").map(_=>_.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((_,h)=>_.concat(...h),[]);return[p,m]}return[[],[]]},[e]);return A.useEffect(()=>{const d=(t==null?void 0:t.target)??F1,p=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const m=g=>{var w,b;if(a.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!a.current||a.current&&!p)&&lM(g))return!1;const q=A1(g.code,l);if(s.current.add(g[q]),O1(u,s.current,!1)){const C=((b=(w=g.composedPath)==null?void 0:w.call(g))==null?void 0:b[0])||g.target,S=(C==null?void 0:C.nodeName)==="BUTTON"||(C==null?void 0:C.nodeName)==="A";t.preventDefault!==!1&&(a.current||!S)&&g.preventDefault(),i(!0)}},_=g=>{const x=A1(g.code,l);O1(u,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(g[x]),g.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",_),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",_),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),n}function O1(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function A1(e,t){return t.includes(e)?"code":"key"}const t4=()=>{const e=St();return A.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:a,minZoom:s,maxZoom:u,panZoom:l}=e.getState(),d=tg(t,i,a,s,u,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:d}=u.getBoundingClientRect(),p={x:t.x-l,y:t.y-d},m=n.snapGrid??a,_=n.snapToGrid??s;return nu(p,i,_,m)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),u=Hl(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function IM(e,t){const n=[],i=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const u=i.get(s.id);u?u.push(s):i.set(s.id,[s])}for(const s of t){const u=i.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const l={...s};for(const d of u)r4(d,l);n.push(l)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function r4(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function TM(e,t){return IM(e,t)}function NM(e,t){return IM(e,t)}function Io(e,t){return{id:e,type:"select",selected:t}}function qa(e,t=new Set,n=!1){const i=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),i.push(Io(s.id,u)))}return i}function L1({items:e=[],lookup:t}){var a;const n=[],i=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const l=t.get(u.id),d=((a=l==null?void 0:l.internals)==null?void 0:a.userNode)??l;d!==void 0&&d!==u&&n.push({id:u.id,item:u,type:"replace"}),d===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function D1(e){return{id:e.id,type:"remove"}}const B1=e=>CP(e),n4=e=>tM(e);function jM(e){return A.forwardRef(e)}const i4=typeof window<"u"?A.useLayoutEffect:A.useEffect;function z1(e){const[t,n]=A.useState(BigInt(0)),[i]=A.useState(()=>o4(()=>n(a=>a+BigInt(1))));return i4(()=>{const a=i.get();a.length&&(e(a),i.reset())},[t]),i}function o4(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const PM=A.createContext(null);function a4({children:e}){const t=St(),n=A.useCallback(l=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:m,onNodesChange:_,nodeLookup:h,fitViewQueued:g,onNodesChangeMiddlewareMap:x}=t.getState();let q=d;for(const b of l)q=typeof b=="function"?b(q):b;let w=L1({items:q,lookup:h});for(const b of x.values())w=b(w);m&&p(q),w.length>0?_==null||_(w):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:C,setNodes:S}=t.getState();b&&S(C)})},[]),i=z1(n),a=A.useCallback(l=>{const{edges:d=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:_,edgeLookup:h}=t.getState();let g=d;for(const x of l)g=typeof x=="function"?x(g):x;m?p(g):_&&_(L1({items:g,lookup:h}))},[]),s=z1(a),u=A.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return f.jsx(PM.Provider,{value:u,children:e})}function s4(){const e=A.useContext(PM);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const u4=e=>!!e.panZoom;function cg(){const e=t4(),t=St(),n=s4(),i=Je(u4),a=A.useMemo(()=>{const s=_=>t.getState().nodeLookup.get(_),u=_=>{n.nodeQueue.push(_)},l=_=>{n.edgeQueue.push(_)},d=_=>{var b,C;const{nodeLookup:h,nodeOrigin:g}=t.getState(),x=B1(_)?_:h.get(_.id),q=x.parentId?sM(x.position,x.measured,x.parentId,h,g):x.position,w={...x,position:q,width:((b=x.measured)==null?void 0:b.width)??x.width,height:((C=x.measured)==null?void 0:C.height)??x.height};return Na(w)},p=(_,h,g={replace:!1})=>{u(x=>x.map(q=>{if(q.id===_){const w=typeof h=="function"?h(q):h;return g.replace&&B1(w)?w:{...q,...w}}return q}))},m=(_,h,g={replace:!1})=>{l(x=>x.map(q=>{if(q.id===_){const w=typeof h=="function"?h(q):h;return g.replace&&n4(w)?w:{...q,...w}}return q}))};return{getNodes:()=>t.getState().nodes.map(_=>({..._})),getNode:_=>{var h;return(h=s(_))==null?void 0:h.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:_=[]}=t.getState();return _.map(h=>({...h}))},getEdge:_=>t.getState().edgeLookup.get(_),setNodes:u,setEdges:l,addNodes:_=>{const h=Array.isArray(_)?_:[_];n.nodeQueue.push(g=>[...g,...h])},addEdges:_=>{const h=Array.isArray(_)?_:[_];n.edgeQueue.push(g=>[...g,...h])},toObject:()=>{const{nodes:_=[],edges:h=[],transform:g}=t.getState(),[x,q,w]=g;return{nodes:_.map(b=>({...b})),edges:h.map(b=>({...b})),viewport:{x,y:q,zoom:w}}},deleteElements:async({nodes:_=[],edges:h=[]})=>{const{nodes:g,edges:x,onNodesDelete:q,onEdgesDelete:w,triggerNodeChanges:b,triggerEdgeChanges:C,onDelete:S,onBeforeDelete:M}=t.getState(),{nodes:I,edges:E}=await TP({nodesToRemove:_,edgesToRemove:h,nodes:g,edges:x,onBeforeDelete:M}),N=E.length>0,R=I.length>0;if(N){const P=E.map(D1);w==null||w(E),C(P)}if(R){const P=I.map(D1);q==null||q(I),b(P)}return(R||N)&&(S==null||S({nodes:I,edges:E})),{deletedNodes:I,deletedEdges:E}},getIntersectingNodes:(_,h=!0,g)=>{const x=f1(_),q=x?_:d(_),w=g!==void 0;return q?(g||t.getState().nodes).filter(b=>{const C=t.getState().nodeLookup.get(b.id);if(C&&!x&&(b.id===_.id||!C.internals.positionAbsolute))return!1;const S=Na(w?b:C),M=zs(S,q);return h&&M>0||M>=S.width*S.height||M>=q.width*q.height}):[]},isNodeIntersecting:(_,h,g=!0)=>{const q=f1(_)?_:d(_);if(!q)return!1;const w=zs(q,h);return g&&w>0||w>=h.width*h.height||w>=q.width*q.height},updateNode:p,updateNodeData:(_,h,g={replace:!1})=>{p(_,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},updateEdge:m,updateEdgeData:(_,h,g={replace:!1})=>{m(_,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},getNodesBounds:_=>{const{nodeLookup:h,nodeOrigin:g}=t.getState();return kP(_,{nodeLookup:h,nodeOrigin:g})},getHandleConnections:({type:_,id:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}-${_}${h?`-${h}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:_,handleId:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}${_?h?`-${_}-${h}`:`-${_}`:""}`))==null?void 0:x.values())??[])},fitView:async _=>{const h=t.getState().fitViewResolver??RP();return t.setState({fitViewQueued:!0,fitViewOptions:_,fitViewResolver:h}),n.nodeQueue.push(g=>[...g]),h.promise}}},[]);return A.useMemo(()=>({...a,...e,viewportInitialized:i}),[i])}const $1=e=>e.selected,l4=typeof window<"u"?window:void 0;function c4({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=St(),{deleteElements:i}=cg(),a=Hs(e,{actInsideInputWithModifier:!1}),s=Hs(t,{target:l4});A.useEffect(()=>{if(a){const{edges:u,nodes:l}=n.getState();i({nodes:l.filter($1),edges:u.filter($1)}),n.setState({nodesSelectionActive:!1})}},[a]),A.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function d4(e){const t=St();A.useEffect(()=>{const n=()=>{var a,s,u,l;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const i=rg(e.current);(i.height===0||i.width===0)&&((l=(u=t.getState()).onError)==null||l.call(u,"004",Kn.error004())),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const _c={position:"absolute",width:"100%",height:"100%",top:0,left:0},p4=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function f4({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=Po.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:d,translateExtent:p,minZoom:m,maxZoom:_,zoomActivationKeyCode:h,preventScrolling:g=!0,children:x,noWheelClassName:q,noPanClassName:w,onViewportChange:b,isControlledViewport:C,paneClickDistance:S,selectionOnDrag:M}){const I=St(),E=A.useRef(null),{userSelectionActive:N,lib:R,connectionInProgress:P}=Je(p4,qt),D=Hs(h),F=A.useRef();d4(E);const O=A.useCallback(Q=>{b==null||b({x:Q[0],y:Q[1],zoom:Q[2]}),C||I.setState({transform:Q})},[b,C]);return A.useEffect(()=>{if(E.current){F.current=hR({domNode:E.current,minZoom:m,maxZoom:_,translateExtent:p,viewport:d,onDraggingChange:H=>I.setState({paneDragging:H}),onPanZoomStart:(H,te)=>{const{onViewportChangeStart:G,onMoveStart:Y}=I.getState();Y==null||Y(H,te),G==null||G(te)},onPanZoom:(H,te)=>{const{onViewportChange:G,onMove:Y}=I.getState();Y==null||Y(H,te),G==null||G(te)},onPanZoomEnd:(H,te)=>{const{onViewportChangeEnd:G,onMoveEnd:Y}=I.getState();Y==null||Y(H,te),G==null||G(te)}});const{x:Q,y:j,zoom:U}=F.current.getViewport();return I.setState({panZoom:F.current,transform:[Q,j,U],domNode:E.current.closest(".react-flow")}),()=>{var H;(H=F.current)==null||H.destroy()}}},[]),A.useEffect(()=>{var Q;(Q=F.current)==null||Q.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:w,userSelectionActive:N,noWheelClassName:q,lib:R,onTransformChange:O,connectionInProgress:P,selectionOnDrag:M,paneClickDistance:S})},[e,t,n,i,a,s,u,l,D,g,w,N,q,R,O,P,M,S]),f.jsx("div",{className:"react-flow__renderer",ref:E,style:_c,children:x})}const _4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function m4(){const{userSelectionActive:e,userSelectionRect:t}=Je(_4,qt);return e&&t?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const jp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},h4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function y4({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Bs.Full,panOnDrag:i,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:l,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:_,onPaneMouseMove:h,onPaneMouseLeave:g,children:x}){const q=St(),{userSelectionActive:w,elementsSelectable:b,dragging:C,connectionInProgress:S}=Je(h4,qt),M=b&&(e||w),I=A.useRef(null),E=A.useRef(),N=A.useRef(new Set),R=A.useRef(new Set),P=A.useRef(!1),D=G=>{if(P.current||S){P.current=!1;return}d==null||d(G),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},F=G=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){G.preventDefault();return}p==null||p(G)},O=m?G=>m(G):void 0,Q=G=>{P.current&&(G.stopPropagation(),P.current=!1)},j=G=>{var J,re;const{domNode:Y}=q.getState();if(E.current=Y==null?void 0:Y.getBoundingClientRect(),!E.current)return;const oe=G.target===I.current;if(!oe&&!!G.target.closest(".nokey")||!e||!(s&&oe||t)||G.button!==0||!G.isPrimary)return;(re=(J=G.target)==null?void 0:J.setPointerCapture)==null||re.call(J,G.pointerId),P.current=!1;const{x:_e,y:W}=Nn(G.nativeEvent,E.current);q.setState({userSelectionRect:{width:0,height:0,startX:_e,startY:W,x:_e,y:W}}),oe||(G.stopPropagation(),G.preventDefault())},U=G=>{const{userSelectionRect:Y,transform:oe,nodeLookup:z,edgeLookup:X,connectionLookup:_e,triggerNodeChanges:W,triggerEdgeChanges:J,defaultEdgeOptions:re,resetSelectedElements:ue}=q.getState();if(!E.current||!Y)return;const{x:ae,y:he}=Nn(G.nativeEvent,E.current),{startX:Ee,startY:je}=Y;if(!P.current){const We=t?0:a;if(Math.hypot(ae-Ee,he-je)<=We)return;ue(),u==null||u(G)}P.current=!0;const Ie={startX:Ee,startY:je,x:ae<Ee?ae:Ee,y:he<je?he:je,width:Math.abs(ae-Ee),height:Math.abs(he-je)},Te=N.current,Pe=R.current;N.current=new Set(eg(z,Ie,oe,n===Bs.Partial,!0).map(We=>We.id)),R.current=new Set;const Fe=(re==null?void 0:re.selectable)??!0;for(const We of N.current){const Be=_e.get(We);if(Be)for(const{edgeId:rt}of Be.values()){const et=X.get(rt);et&&(et.selectable??Fe)&&R.current.add(rt)}}if(!_1(Te,N.current)){const We=qa(z,N.current,!0);W(We)}if(!_1(Pe,R.current)){const We=qa(X,R.current);J(We)}q.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},H=G=>{var Y,oe;G.button===0&&((oe=(Y=G.target)==null?void 0:Y.releasePointerCapture)==null||oe.call(Y,G.pointerId),!w&&G.target===I.current&&q.getState().userSelectionRect&&(D==null||D(G)),q.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(l==null||l(G),q.setState({nodesSelectionActive:N.current.size>0})))},te=i===!0||Array.isArray(i)&&i.includes(0);return f.jsxs("div",{className:Ft(["react-flow__pane",{draggable:te,dragging:C,selection:e}]),onClick:M?void 0:jp(D,I),onContextMenu:jp(F,I),onWheel:jp(O,I),onPointerEnter:M?void 0:_,onPointerMove:M?U:h,onPointerUp:M?H:void 0,onPointerDownCapture:M?j:void 0,onClickCapture:M?Q:void 0,onPointerLeave:g,ref:I,style:_c,children:[x,f.jsx(m4,{})]})}function C0({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:l,onError:d}=t.getState(),p=l.get(e);if(!p){d==null||d("012",Kn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&u)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function RM({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}){const l=St(),[d,p]=A.useState(!1),m=A.useRef();return A.useEffect(()=>{m.current=rR({getStoreItems:()=>l.getState(),onNodeMouseDown:_=>{C0({id:_,store:l,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),A.useEffect(()=>{var _,h;if(t)(_=m.current)==null||_.destroy();else if(e.current)return(h=m.current)==null||h.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var g;(g=m.current)==null||g.destroy()}},[n,i,t,s,e,a]),d}const g4=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function VM(){const e=St();return A.useCallback(n=>{const{nodeExtent:i,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:l,updateNodePositions:d,nodeLookup:p,nodeOrigin:m}=e.getState(),_=new Map,h=g4(u),g=a?s[0]:5,x=a?s[1]:5,q=n.direction.x*g*n.factor,w=n.direction.y*x*n.factor;for(const[,b]of p){if(!h(b))continue;let C={x:b.internals.positionAbsolute.x+q,y:b.internals.positionAbsolute.y+w};a&&(C=ru(C,s));const{position:S,positionAbsolute:M}=rM({nodeId:b.id,nextPosition:C,nodeLookup:p,nodeExtent:i,nodeOrigin:m,onError:l});b.position=S,b.internals.positionAbsolute=M,_.set(b.id,b)}d(_)},[])}const dg=A.createContext(null),v4=dg.Provider;dg.Consumer;const FM=()=>A.useContext(dg),x4=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),w4=(e,t,n)=>i=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=i,{fromHandle:l,toHandle:d,isValid:p}=u,m=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:m,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Ia.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:m&&p}};function b4({type:e="source",position:t=He.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:l,children:d,className:p,onMouseDown:m,onTouchStart:_,...h},g){var U,H;const x=u||null,q=e==="target",w=St(),b=FM(),{connectOnClick:C,noPanClassName:S,rfId:M}=Je(x4,qt),{connectingFrom:I,connectingTo:E,clickConnecting:N,isPossibleEndHandle:R,connectionInProcess:P,clickConnectionInProcess:D,valid:F}=Je(w4(b,x,e),qt);b||(H=(U=w.getState()).onError)==null||H.call(U,"010",Kn.error010());const O=te=>{const{defaultEdgeOptions:G,onConnect:Y,hasDefaultEdges:oe}=w.getState(),z={...G,...te};if(oe){const{edges:X,setEdges:_e}=w.getState();_e(w0(z,X))}Y==null||Y(z),l==null||l(z)},Q=te=>{if(!b)return;const G=cM(te.nativeEvent);if(a&&(G&&te.button===0||!G)){const Y=w.getState();S0.onPointerDown(te.nativeEvent,{handleDomNode:te.currentTarget,autoPanOnConnect:Y.autoPanOnConnect,connectionMode:Y.connectionMode,connectionRadius:Y.connectionRadius,domNode:Y.domNode,nodeLookup:Y.nodeLookup,lib:Y.lib,isTarget:q,handleId:x,nodeId:b,flowId:Y.rfId,panBy:Y.panBy,cancelConnection:Y.cancelConnection,onConnectStart:Y.onConnectStart,onConnectEnd:Y.onConnectEnd,updateConnection:Y.updateConnection,onConnect:O,isValidConnection:n||Y.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:Y.autoPanSpeed,dragThreshold:Y.connectionDragThreshold})}G?m==null||m(te):_==null||_(te)},j=te=>{const{onClickConnectStart:G,onClickConnectEnd:Y,connectionClickStartHandle:oe,connectionMode:z,isValidConnection:X,lib:_e,rfId:W,nodeLookup:J,connection:re}=w.getState();if(!b||!oe&&!a)return;if(!oe){G==null||G(te.nativeEvent,{nodeId:b,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:b,type:e,id:x}});return}const ue=uM(te.target),ae=n||X,{connection:he,isValid:Ee}=S0.isValid(te.nativeEvent,{handle:{nodeId:b,id:x,type:e},connectionMode:z,fromNodeId:oe.nodeId,fromHandleId:oe.id||null,fromType:oe.type,isValidConnection:ae,flowId:W,doc:ue,lib:_e,nodeLookup:J});Ee&&he&&O(he);const je=structuredClone(re);delete je.inProgress,je.toPosition=je.toHandle?je.toHandle.position:null,Y==null||Y(te,je),w.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${M}-${b}-${x}-${e}`,className:Ft(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,p,{source:!q,target:q,connectable:i,connectablestart:a,connectableend:s,clickconnecting:N,connectingfrom:I,connectingto:E,valid:F,connectionindicator:i&&(!P||R)&&(P||D?s:a)}]),onMouseDown:Q,onTouchStart:Q,onClick:C?j:void 0,ref:g,...h,children:d})}const Ws=A.memo(jM(b4));function q4({data:e,isConnectable:t,sourcePosition:n=He.Bottom}){return f.jsxs(f.Fragment,{children:[e==null?void 0:e.label,f.jsx(Ws,{type:"source",position:n,isConnectable:t})]})}function S4({data:e,isConnectable:t,targetPosition:n=He.Top,sourcePosition:i=He.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx(Ws,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,f.jsx(Ws,{type:"source",position:i,isConnectable:t})]})}function C4(){return null}function k4({data:e,isConnectable:t,targetPosition:n=He.Top}){return f.jsxs(f.Fragment,{children:[f.jsx(Ws,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Ul={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},H1={input:q4,default:S4,output:k4,group:C4};function M4(e){var t,n,i,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((i=e.style)==null?void 0:i.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const E4=e=>{const{width:t,height:n,x:i,y:a}=tu(e.nodeLookup,{filter:s=>!!s.selected});return{width:Tn(t)?t:null,height:Tn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${a}px)`}};function I4({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=St(),{width:a,height:s,transformString:u,userSelectionActive:l}=Je(E4,qt),d=VM(),p=A.useRef(null);if(A.useEffect(()=>{var h;n||(h=p.current)==null||h.focus({preventScroll:!0})},[n]),RM({nodeRef:p}),l||!a||!s)return null;const m=e?h=>{const g=i.getState().nodes.filter(x=>x.selected);e(h,g)}:void 0,_=h=>{Object.prototype.hasOwnProperty.call(Ul,h.key)&&(h.preventDefault(),d({direction:Ul[h.key],factor:h.shiftKey?4:1}))};return f.jsx("div",{className:Ft(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:f.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:_,style:{width:a,height:s}})})}const W1=typeof window<"u"?window:void 0,T4=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function OM({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:m,selectionMode:_,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:q,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:M,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:N,panOnDrag:R,defaultViewport:P,translateExtent:D,minZoom:F,maxZoom:O,preventScrolling:Q,onSelectionContextMenu:j,noWheelClassName:U,noPanClassName:H,disableKeyboardA11y:te,onViewportChange:G,isControlledViewport:Y}){const{nodesSelectionActive:oe,userSelectionActive:z}=Je(T4,qt),X=Hs(p,{target:W1}),_e=Hs(q,{target:W1}),W=_e||R,J=_e||M,re=m&&W!==!0,ue=X||z||re;return c4({deleteKeyCode:d,multiSelectionKeyCode:x}),f.jsx(f4,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:J,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:N,panOnDrag:!X&&W,defaultViewport:P,translateExtent:D,minZoom:F,maxZoom:O,zoomActivationKeyCode:w,preventScrolling:Q,noWheelClassName:U,noPanClassName:H,onViewportChange:G,isControlledViewport:Y,paneClickDistance:l,selectionOnDrag:re,children:f.jsxs(y4,{onSelectionStart:h,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:W,isSelecting:!!ue,selectionMode:_,selectionKeyPressed:X,paneClickDistance:l,selectionOnDrag:re,children:[e,oe&&f.jsx(I4,{onSelectionContextMenu:j,noPanClassName:H,disableKeyboardA11y:te})]})})}OM.displayName="FlowRenderer";const N4=A.memo(OM),j4=e=>t=>e?eg(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function P4(e){return Je(A.useCallback(j4(e),[e]),qt)}const R4=e=>e.updateNodeInternals;function V4(){const e=Je(R4),[t]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:a.target,force:!0})}),e(i)}));return A.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function F4({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const a=St(),s=A.useRef(null),u=A.useRef(null),l=A.useRef(e.sourcePosition),d=A.useRef(e.targetPosition),p=A.useRef(t),m=n&&!!e.internals.handleBounds;return A.useEffect(()=>{s.current&&!e.hidden&&(!m||u.current!==s.current)&&(u.current&&(i==null||i.unobserve(u.current)),i==null||i.observe(s.current),u.current=s.current)},[m,e.hidden]),A.useEffect(()=>()=>{u.current&&(i==null||i.unobserve(u.current),u.current=null)},[]),A.useEffect(()=>{if(s.current){const _=p.current!==t,h=l.current!==e.sourcePosition,g=d.current!==e.targetPosition;(_||h||g)&&(p.current=t,l.current=e.sourcePosition,d.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function O4({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:l,elementsSelectable:d,nodesConnectable:p,nodesFocusable:m,resizeObserver:_,noDragClassName:h,noPanClassName:g,disableKeyboardA11y:x,rfId:q,nodeTypes:w,nodeClickDistance:b,onError:C}){const{node:S,internals:M,isParent:I}=Je(ae=>{const he=ae.nodeLookup.get(e),Ee=ae.parentLookup.has(e);return{node:he,internals:he.internals,isParent:Ee}},qt);let E=S.type||"default",N=(w==null?void 0:w[E])||H1[E];N===void 0&&(C==null||C("003",Kn.error003(E)),E="default",N=(w==null?void 0:w.default)||H1.default);const R=!!(S.draggable||l&&typeof S.draggable>"u"),P=!!(S.selectable||d&&typeof S.selectable>"u"),D=!!(S.connectable||p&&typeof S.connectable>"u"),F=!!(S.focusable||m&&typeof S.focusable>"u"),O=St(),Q=aM(S),j=F4({node:S,nodeType:E,hasDimensions:Q,resizeObserver:_}),U=RM({nodeRef:j,disabled:S.hidden||!R,noDragClassName:h,handleSelector:S.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:b}),H=VM();if(S.hidden)return null;const te=xi(S),G=M4(S),Y=P||R||t||n||i||a,oe=n?ae=>n(ae,{...M.userNode}):void 0,z=i?ae=>i(ae,{...M.userNode}):void 0,X=a?ae=>a(ae,{...M.userNode}):void 0,_e=s?ae=>s(ae,{...M.userNode}):void 0,W=u?ae=>u(ae,{...M.userNode}):void 0,J=ae=>{const{selectNodesOnDrag:he,nodeDragThreshold:Ee}=O.getState();P&&(!he||!R||Ee>0)&&C0({id:e,store:O,nodeRef:j}),t&&t(ae,{...M.userNode})},re=ae=>{if(!(lM(ae.nativeEvent)||x)){if(Xk.includes(ae.key)&&P){const he=ae.key==="Escape";C0({id:e,store:O,unselect:he,nodeRef:j})}else if(R&&S.selected&&Object.prototype.hasOwnProperty.call(Ul,ae.key)){ae.preventDefault();const{ariaLabelConfig:he}=O.getState();O.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),H({direction:Ul[ae.key],factor:ae.shiftKey?4:1})}}},ue=()=>{var Pe;if(x||!((Pe=j.current)!=null&&Pe.matches(":focus-visible")))return;const{transform:ae,width:he,height:Ee,autoPanOnNodeFocus:je,setCenter:Ie}=O.getState();if(!je)return;eg(new Map([[e,S]]),{x:0,y:0,width:he,height:Ee},ae,!0).length>0||Ie(S.position.x+te.width/2,S.position.y+te.height/2,{zoom:ae[2]})};return f.jsx("div",{className:Ft(["react-flow__node",`react-flow__node-${E}`,{[g]:R},S.className,{selected:S.selected,selectable:P,parent:I,draggable:R,dragging:U}]),ref:j,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:Q?"visible":"hidden",...S.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:oe,onMouseMove:z,onMouseLeave:X,onContextMenu:_e,onClick:J,onDoubleClick:W,onKeyDown:F?re:void 0,tabIndex:F?0:void 0,onFocus:F?ue:void 0,role:S.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${kM}-${q}`,"aria-label":S.ariaLabel,...S.domAttributes,children:f.jsx(v4,{value:e,children:f.jsx(N,{id:e,data:S.data,type:E,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:S.selected??!1,selectable:P,draggable:R,deletable:S.deletable??!0,isConnectable:D,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:U,dragHandle:S.dragHandle,zIndex:M.z,parentId:S.parentId,...te})})})}var A4=A.memo(O4);const L4=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function AM(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=Je(L4,qt),u=P4(e.onlyRenderVisibleElements),l=V4();return f.jsx("div",{className:"react-flow__nodes",style:_c,children:u.map(d=>f.jsx(A4,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},d))})}AM.displayName="NodeRenderer";const D4=A.memo(AM);function B4(e){return Je(A.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const i=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&AP({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&i.push(a.id)}return i},[e]),qt)}const z4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return f.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},$4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return f.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},U1={[zl.Arrow]:z4,[zl.ArrowClosed]:$4};function H4(e){const t=St();return A.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(U1,e)?U1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Kn.error009(e)),null)},[e])}const W4=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=H4(t);return d?f.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:f.jsx(d,{color:n,strokeWidth:u})}):null},LM=({defaultColor:e,rfId:t})=>{const n=Je(s=>s.edges),i=Je(s=>s.defaultEdgeOptions),a=A.useMemo(()=>WP(n,{id:t,defaultColor:e,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[n,i,t,e]);return a.length?f.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:f.jsx("defs",{children:a.map(s=>f.jsx(W4,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};LM.displayName="MarkerDefinitions";var U4=A.memo(LM);function DM({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:p,...m}){const[_,h]=A.useState({x:1,y:0,width:0,height:0}),g=Ft(["react-flow__edge-textwrapper",p]),x=A.useRef(null);return A.useEffect(()=>{if(x.current){const q=x.current.getBBox();h({x:q.x,y:q.y,width:q.width,height:q.height})}},[n]),n?f.jsxs("g",{transform:`translate(${e-_.width/2} ${t-_.height/2})`,className:g,visibility:_.width?"visible":"hidden",...m,children:[a&&f.jsx("rect",{width:_.width+2*u[0],x:-u[0],y:-u[1],height:_.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),f.jsx("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:x,style:i,children:n}),d]}):null}DM.displayName="EdgeText";const G4=A.memo(DM);function mc({path:e,labelX:t,labelY:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,interactionWidth:p=20,...m}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...m,d:e,fill:"none",className:Ft(["react-flow__edge-path",m.className])}),p?f.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,i&&Tn(t)&&Tn(n)?f.jsx(G4,{x:t,y:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d}):null]})}function G1({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===He.Left||e===He.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function BM({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:i,targetY:a,targetPosition:s=He.Top}){const[u,l]=G1({pos:n,x1:e,y1:t,x2:i,y2:a}),[d,p]=G1({pos:s,x1:i,y1:a,x2:e,y2:t}),[m,_,h,g]=dM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:p});return[`M${e},${t} C${u},${l} ${d},${p} ${i},${a}`,m,_,h,g]}function zM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})=>{const[C,S,M]=BM({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l}),I=e.isInternal?void 0:t;return f.jsx(mc,{id:I,path:C,labelX:S,labelY:M,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})})}const K4=zM({isInternal:!1}),$M=zM({isInternal:!0});K4.displayName="SimpleBezierEdge";$M.displayName="SimpleBezierEdgeInternal";function HM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,sourcePosition:g=He.Bottom,targetPosition:x=He.Top,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,M,I]=Wl({sourceX:n,sourceY:i,sourcePosition:g,targetX:a,targetY:s,targetPosition:x,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),E=e.isInternal?void 0:t;return f.jsx(mc,{id:E,path:S,labelX:M,labelY:I,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:q,markerStart:w,interactionWidth:C})})}const WM=HM({isInternal:!1}),UM=HM({isInternal:!0});WM.displayName="SmoothStepEdge";UM.displayName="SmoothStepEdgeInternal";function GM(e){return A.memo(({id:t,...n})=>{var a;const i=e.isInternal?void 0:t;return f.jsx(WM,{...n,id:i,pathOptions:A.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const Y4=GM({isInternal:!1}),KM=GM({isInternal:!0});Y4.displayName="StepEdge";KM.displayName="StepEdgeInternal";function YM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:g,markerStart:x,interactionWidth:q})=>{const[w,b,C]=ig({sourceX:n,sourceY:i,targetX:a,targetY:s}),S=e.isInternal?void 0:t;return f.jsx(mc,{id:S,path:w,labelX:b,labelY:C,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:g,markerStart:x,interactionWidth:q})})}const Q4=YM({isInternal:!1}),QM=YM({isInternal:!0});Q4.displayName="StraightEdge";QM.displayName="StraightEdgeInternal";function XM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u=He.Bottom,targetPosition:l=He.Top,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,M,I]=ng({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return f.jsx(mc,{id:E,path:S,labelX:M,labelY:I,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:C})})}const X4=XM({isInternal:!1}),ZM=XM({isInternal:!0});X4.displayName="BezierEdge";ZM.displayName="BezierEdgeInternal";const K1={default:ZM,straight:QM,step:KM,smoothstep:UM,simplebezier:$M},Y1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Z4=(e,t,n)=>n===He.Left?e-t:n===He.Right?e+t:e,J4=(e,t,n)=>n===He.Top?e-t:n===He.Bottom?e+t:e,Q1="react-flow__edgeupdater";function X1({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:l}){return f.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Ft([Q1,`${Q1}-${l}`]),cx:Z4(t,i,e),cy:J4(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function e6({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:a,targetX:s,targetY:u,sourcePosition:l,targetPosition:d,onReconnect:p,onReconnectStart:m,onReconnectEnd:_,setReconnecting:h,setUpdateHover:g}){const x=St(),q=(M,I)=>{if(M.button!==0)return;const{autoPanOnConnect:E,domNode:N,isValidConnection:R,connectionMode:P,connectionRadius:D,lib:F,onConnectStart:O,onConnectEnd:Q,cancelConnection:j,nodeLookup:U,rfId:H,panBy:te,updateConnection:G}=x.getState(),Y=I.type==="target",oe=(_e,W)=>{h(!1),_==null||_(_e,n,I.type,W)},z=_e=>p==null?void 0:p(n,_e),X=(_e,W)=>{h(!0),m==null||m(M,n,I.type),O==null||O(_e,W)};S0.onPointerDown(M.nativeEvent,{autoPanOnConnect:E,connectionMode:P,connectionRadius:D,domNode:N,handleId:I.id,nodeId:I.nodeId,nodeLookup:U,isTarget:Y,edgeUpdaterType:I.type,lib:F,flowId:H,cancelConnection:j,panBy:te,isValidConnection:R,onConnect:z,onConnectStart:X,onConnectEnd:Q,onReconnectEnd:oe,updateConnection:G,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},w=M=>q(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=M=>q(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>g(!0),S=()=>g(!1);return f.jsxs(f.Fragment,{children:[(e===!0||e==="source")&&f.jsx(X1,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:w,onMouseEnter:C,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&f.jsx(X1,{position:d,centerX:s,centerY:u,radius:t,onMouseDown:b,onMouseEnter:C,onMouseOut:S,type:"target"})]})}function t6({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,reconnectRadius:m,onReconnect:_,onReconnectStart:h,onReconnectEnd:g,rfId:x,edgeTypes:q,noPanClassName:w,onError:b,disableKeyboardA11y:C}){let S=Je(Ie=>Ie.edgeLookup.get(e));const M=Je(Ie=>Ie.defaultEdgeOptions);S=M?{...M,...S}:S;let I=S.type||"default",E=(q==null?void 0:q[I])||K1[I];E===void 0&&(b==null||b("011",Kn.error011(I)),I="default",E=(q==null?void 0:q.default)||K1.default);const N=!!(S.focusable||t&&typeof S.focusable>"u"),R=typeof _<"u"&&(S.reconnectable||n&&typeof S.reconnectable>"u"),P=!!(S.selectable||i&&typeof S.selectable>"u"),D=A.useRef(null),[F,O]=A.useState(!1),[Q,j]=A.useState(!1),U=St(),{zIndex:H,sourceX:te,sourceY:G,targetX:Y,targetY:oe,sourcePosition:z,targetPosition:X}=Je(A.useCallback(Ie=>{const Te=Ie.nodeLookup.get(S.source),Pe=Ie.nodeLookup.get(S.target);if(!Te||!Pe)return{zIndex:S.zIndex,...Y1};const Fe=HP({id:e,sourceNode:Te,targetNode:Pe,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:Ie.connectionMode,onError:b});return{zIndex:OP({selected:S.selected,zIndex:S.zIndex,sourceNode:Te,targetNode:Pe,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Fe||Y1}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),qt),_e=A.useMemo(()=>S.markerStart?`url('#${b0(S.markerStart,x)}')`:void 0,[S.markerStart,x]),W=A.useMemo(()=>S.markerEnd?`url('#${b0(S.markerEnd,x)}')`:void 0,[S.markerEnd,x]);if(S.hidden||te===null||G===null||Y===null||oe===null)return null;const J=Ie=>{var We;const{addSelectedEdges:Te,unselectNodesAndEdges:Pe,multiSelectionActive:Fe}=U.getState();P&&(U.setState({nodesSelectionActive:!1}),S.selected&&Fe?(Pe({nodes:[],edges:[S]}),(We=D.current)==null||We.blur()):Te([e])),a&&a(Ie,S)},re=s?Ie=>{s(Ie,{...S})}:void 0,ue=u?Ie=>{u(Ie,{...S})}:void 0,ae=l?Ie=>{l(Ie,{...S})}:void 0,he=d?Ie=>{d(Ie,{...S})}:void 0,Ee=p?Ie=>{p(Ie,{...S})}:void 0,je=Ie=>{var Te;if(!C&&Xk.includes(Ie.key)&&P){const{unselectNodesAndEdges:Pe,addSelectedEdges:Fe}=U.getState();Ie.key==="Escape"?((Te=D.current)==null||Te.blur(),Pe({edges:[S]})):Fe([e])}};return f.jsx("svg",{style:{zIndex:H},children:f.jsxs("g",{className:Ft(["react-flow__edge",`react-flow__edge-${I}`,S.className,w,{selected:S.selected,animated:S.animated,inactive:!P&&!a,updating:F,selectable:P}]),onClick:J,onDoubleClick:re,onContextMenu:ue,onMouseEnter:ae,onMouseMove:he,onMouseLeave:Ee,onKeyDown:N?je:void 0,tabIndex:N?0:void 0,role:S.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":N?`${MM}-${x}`:void 0,ref:D,...S.domAttributes,children:[!Q&&f.jsx(E,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:P,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:te,sourceY:G,targetX:Y,targetY:oe,sourcePosition:z,targetPosition:X,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:_e,markerEnd:W,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),R&&f.jsx(e6,{edge:S,isReconnectable:R,reconnectRadius:m,onReconnect:_,onReconnectStart:h,onReconnectEnd:g,sourceX:te,sourceY:G,targetX:Y,targetY:oe,sourcePosition:z,targetPosition:X,setUpdateHover:O,setReconnecting:j})]})})}var r6=A.memo(t6);const n6=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function JM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:_,onEdgeDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:q}){const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,onError:S}=Je(n6,qt),M=B4(t);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(U4,{defaultColor:e,rfId:n}),M.map(I=>f.jsx(r6,{id:I,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,onClick:m,reconnectRadius:_,onDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:S,edgeTypes:i,disableKeyboardA11y:q},I))]})}JM.displayName="EdgeRenderer";const i6=A.memo(JM),o6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function a6({children:e}){const t=Je(o6);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function s6(e){const t=cg(),n=A.useRef(!1);A.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const u6=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function l6(e){const t=Je(u6),n=St();return A.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function c6(e){return e.connection.inProgress?{...e.connection,to:nu(e.connection.to,e.transform)}:{...e.connection}}function d6(e){return c6}function p6(e){const t=d6();return Je(t,qt)}const f6=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function _6({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:a,width:s,height:u,isValid:l,inProgress:d}=Je(f6,qt);return!(s&&a&&d)?null:f.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Ft(["react-flow__connection",eM(l)]),children:f.jsx(eE,{style:t,type:n,CustomComponent:i,isValid:l})})})}const eE=({style:e,type:t=Yi.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:l,fromPosition:d,to:p,toNode:m,toHandle:_,toPosition:h,pointer:g}=p6();if(!a)return;if(n)return f.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:l,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:h,connectionStatus:eM(i),toNode:m,toHandle:_,pointer:g});let x="";const q={sourceX:s.x,sourceY:s.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:h};switch(t){case Yi.Bezier:[x]=ng(q);break;case Yi.SimpleBezier:[x]=BM(q);break;case Yi.Step:[x]=Wl({...q,borderRadius:0});break;case Yi.SmoothStep:[x]=Wl(q);break;default:[x]=ig(q)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};eE.displayName="ConnectionLine";const m6={};function Z1(e=m6){A.useRef(e),St(),A.useEffect(()=>{},[e])}function h6(){St(),A.useRef(!1),A.useEffect(()=>{},[])}function tE({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:_,onSelectionStart:h,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:q,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:C,selectionOnDrag:S,selectionMode:M,multiSelectionKeyCode:I,panActivationKeyCode:E,zoomActivationKeyCode:N,deleteKeyCode:R,onlyRenderVisibleElements:P,elementsSelectable:D,defaultViewport:F,translateExtent:O,minZoom:Q,maxZoom:j,preventScrolling:U,defaultMarkerColor:H,zoomOnScroll:te,zoomOnPinch:G,panOnScroll:Y,panOnScrollSpeed:oe,panOnScrollMode:z,zoomOnDoubleClick:X,panOnDrag:_e,onPaneClick:W,onPaneMouseEnter:J,onPaneMouseMove:re,onPaneMouseLeave:ue,onPaneScroll:ae,onPaneContextMenu:he,paneClickDistance:Ee,nodeClickDistance:je,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Fe,reconnectRadius:We,onReconnect:Be,onReconnectStart:rt,onReconnectEnd:et,noDragClassName:pt,noWheelClassName:lt,noPanClassName:ct,disableKeyboardA11y:st,nodeExtent:Cr,rfId:Zt,viewport:zt,onViewportChange:Jt}){return Z1(e),Z1(t),h6(),s6(n),l6(zt),f.jsx(N4,{onPaneClick:W,onPaneMouseEnter:J,onPaneMouseMove:re,onPaneMouseLeave:ue,onPaneContextMenu:he,onPaneScroll:ae,paneClickDistance:Ee,deleteKeyCode:R,selectionKeyCode:C,selectionOnDrag:S,selectionMode:M,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:I,panActivationKeyCode:E,zoomActivationKeyCode:N,elementsSelectable:D,zoomOnScroll:te,zoomOnPinch:G,zoomOnDoubleClick:X,panOnScroll:Y,panOnScrollSpeed:oe,panOnScrollMode:z,panOnDrag:_e,defaultViewport:F,translateExtent:O,minZoom:Q,maxZoom:j,onSelectionContextMenu:_,preventScrolling:U,noDragClassName:pt,noWheelClassName:lt,noPanClassName:ct,disableKeyboardA11y:st,onViewportChange:Jt,isControlledViewport:!!zt,children:f.jsxs(a6,{children:[f.jsx(i6,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:Be,onReconnectStart:rt,onReconnectEnd:et,onlyRenderVisibleElements:P,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Fe,reconnectRadius:We,defaultMarkerColor:H,noPanClassName:ct,disableKeyboardA11y:st,rfId:Zt}),f.jsx(_6,{style:q,type:x,component:w,containerStyle:b}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(D4,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:je,onlyRenderVisibleElements:P,noPanClassName:ct,noDragClassName:pt,disableKeyboardA11y:st,nodeExtent:Cr,rfId:Zt}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}tE.displayName="GraphView";const y6=A.memo(tE),J1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:_,zIndexMode:h="basic"}={})=>{const g=new Map,x=new Map,q=new Map,w=new Map,b=i??t??[],C=n??e??[],S=m??[0,0],M=_??Ds;mM(q,w,b);const I=q0(C,g,x,{nodeOrigin:S,nodeExtent:M,zIndexMode:h});let E=[0,0,1];if(u&&a&&s){const N=tu(g,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:R,y:P,zoom:D}=tg(N,a,s,d,p,(l==null?void 0:l.padding)??.1);E=[R,P,D]}return{rfId:"1",width:a??0,height:s??0,transform:E,nodes:C,nodesInitialized:I,nodeLookup:g,parentLookup:x,edges:b,edgeLookup:w,connectionLookup:q,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:Ds,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ia.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Jk},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:NP,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Zk,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},g6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:_,zIndexMode:h})=>RR((g,x)=>{async function q(){const{nodeLookup:w,panZoom:b,fitViewOptions:C,fitViewResolver:S,width:M,height:I,minZoom:E,maxZoom:N}=x();b&&(await IP({nodes:w,width:M,height:I,panZoom:b,minZoom:E,maxZoom:N},C),S==null||S.resolve(!0),g({fitViewResolver:null}))}return{...J1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:_,defaultNodes:n,defaultEdges:i,zIndexMode:h}),setNodes:w=>{const{nodeLookup:b,parentLookup:C,nodeOrigin:S,elevateNodesOnSelect:M,fitViewQueued:I,zIndexMode:E}=x(),N=q0(w,b,C,{nodeOrigin:S,nodeExtent:_,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:E});I&&N?(q(),g({nodes:w,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:w,nodesInitialized:N})},setEdges:w=>{const{connectionLookup:b,edgeLookup:C}=x();mM(b,C,w),g({edges:w})},setDefaultNodesAndEdges:(w,b)=>{if(w){const{setNodes:C}=x();C(w),g({hasDefaultNodes:!0})}if(b){const{setEdges:C}=x();C(b),g({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:b,nodeLookup:C,parentLookup:S,domNode:M,nodeOrigin:I,nodeExtent:E,debug:N,fitViewQueued:R,zIndexMode:P}=x(),{changes:D,updatedInternals:F}=ZP(w,C,S,M,I,E,P);F&&(KP(C,S,{nodeOrigin:I,nodeExtent:E,zIndexMode:P}),R?(q(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(D==null?void 0:D.length)>0&&(N&&console.log("React Flow: trigger node changes",D),b==null||b(D)))},updateNodePositions:(w,b=!1)=>{const C=[];let S=[];const{nodeLookup:M,triggerNodeChanges:I,connection:E,updateConnection:N,onNodesChangeMiddlewareMap:R}=x();for(const[P,D]of w){const F=M.get(P),O=!!(F!=null&&F.expandParent&&(F!=null&&F.parentId)&&(D!=null&&D.position)),Q={id:P,type:"position",position:O?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:b};if(F&&E.inProgress&&E.fromNode.id===F.id){const j=Oo(F,E.fromHandle,He.Left,!0);N({...E,from:j})}O&&F.parentId&&C.push({id:P,parentId:F.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),S.push(Q)}if(C.length>0){const{parentLookup:P,nodeOrigin:D}=x(),F=lg(C,M,P,D);S.push(...F)}for(const P of R.values())S=P(S);I(S)},triggerNodeChanges:w=>{const{onNodesChange:b,setNodes:C,nodes:S,hasDefaultNodes:M,debug:I}=x();if(w!=null&&w.length){if(M){const E=TM(w,S);C(E)}I&&console.log("React Flow: trigger node changes",w),b==null||b(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:b,setEdges:C,edges:S,hasDefaultEdges:M,debug:I}=x();if(w!=null&&w.length){if(M){const E=NM(w,S);C(E)}I&&console.log("React Flow: trigger edge changes",w),b==null||b(w)}},addSelectedNodes:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const E=w.map(N=>Io(N,!0));M(E);return}M(qa(S,new Set([...w]),!0)),I(qa(C))},addSelectedEdges:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const E=w.map(N=>Io(N,!0));I(E);return}I(qa(C,new Set([...w]))),M(qa(S,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:b}={})=>{const{edges:C,nodes:S,nodeLookup:M,triggerNodeChanges:I,triggerEdgeChanges:E}=x(),N=w||S,R=b||C,P=N.map(F=>{const O=M.get(F.id);return O&&(O.selected=!1),Io(F.id,!1)}),D=R.map(F=>Io(F.id,!1));I(P),E(D)},setMinZoom:w=>{const{panZoom:b,maxZoom:C}=x();b==null||b.setScaleExtent([w,C]),g({minZoom:w})},setMaxZoom:w=>{const{panZoom:b,minZoom:C}=x();b==null||b.setScaleExtent([C,w]),g({maxZoom:w})},setTranslateExtent:w=>{var b;(b=x().panZoom)==null||b.setTranslateExtent(w),g({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:b,triggerNodeChanges:C,triggerEdgeChanges:S,elementsSelectable:M}=x();if(!M)return;const I=b.reduce((N,R)=>R.selected?[...N,Io(R.id,!1)]:N,[]),E=w.reduce((N,R)=>R.selected?[...N,Io(R.id,!1)]:N,[]);C(I),S(E)},setNodeExtent:w=>{const{nodes:b,nodeLookup:C,parentLookup:S,nodeOrigin:M,elevateNodesOnSelect:I,nodeExtent:E,zIndexMode:N}=x();w[0][0]===E[0][0]&&w[0][1]===E[0][1]&&w[1][0]===E[1][0]&&w[1][1]===E[1][1]||(q0(b,C,S,{nodeOrigin:M,nodeExtent:w,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:N}),g({nodeExtent:w}))},panBy:w=>{const{transform:b,width:C,height:S,panZoom:M,translateExtent:I}=x();return JP({delta:w,panZoom:M,transform:b,translateExtent:I,width:C,height:S})},setCenter:async(w,b,C)=>{const{width:S,height:M,maxZoom:I,panZoom:E}=x();if(!E)return Promise.resolve(!1);const N=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:I;return await E.setViewport({x:S/2-w*N,y:M/2-b*N,zoom:N},{duration:C==null?void 0:C.duration,ease:C==null?void 0:C.ease,interpolate:C==null?void 0:C.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Jk}})},updateConnection:w=>{g({connection:w})},reset:()=>g({...J1()})}},Object.is);function v6({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:d,fitView:p,nodeOrigin:m,nodeExtent:_,zIndexMode:h,children:g}){const[x]=A.useState(()=>g6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:p,minZoom:u,maxZoom:l,fitViewOptions:d,nodeOrigin:m,nodeExtent:_,zIndexMode:h}));return f.jsx(OR,{value:x,children:f.jsx(a4,{children:g})})}function x6({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:d,minZoom:p,maxZoom:m,nodeOrigin:_,nodeExtent:h,zIndexMode:g}){return A.useContext(fc)?f.jsx(f.Fragment,{children:e}):f.jsx(v6,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:_,nodeExtent:h,zIndexMode:g,children:e})}const w6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function b6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:l,onEdgeClick:d,onInit:p,onMove:m,onMoveStart:_,onMoveEnd:h,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:E,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:P,onNodesDelete:D,onEdgesDelete:F,onDelete:O,onSelectionChange:Q,onSelectionDragStart:j,onSelectionDrag:U,onSelectionDragStop:H,onSelectionContextMenu:te,onSelectionStart:G,onSelectionEnd:Y,onBeforeDelete:oe,connectionMode:z,connectionLineType:X=Yi.Bezier,connectionLineStyle:_e,connectionLineComponent:W,connectionLineContainerStyle:J,deleteKeyCode:re="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:ae=!1,selectionMode:he=Bs.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:je=$s()?"Meta":"Control",zoomActivationKeyCode:Ie=$s()?"Meta":"Control",snapToGrid:Te,snapGrid:Pe,onlyRenderVisibleElements:Fe=!1,selectNodesOnDrag:We,nodesDraggable:Be,autoPanOnNodeFocus:rt,nodesConnectable:et,nodesFocusable:pt,nodeOrigin:lt=EM,edgesFocusable:ct,edgesReconnectable:st,elementsSelectable:Cr=!0,defaultViewport:Zt=QR,minZoom:zt=.5,maxZoom:Jt=2,translateExtent:ot=Ds,preventScrolling:Or=!0,nodeExtent:Tt,defaultMarkerColor:Yr="#b1b1b7",zoomOnScroll:mr=!0,zoomOnPinch:$t=!0,panOnScroll:Qe=!1,panOnScrollSpeed:qi=.5,panOnScrollMode:Nt=Po.Free,zoomOnDoubleClick:cn=!0,panOnDrag:me=!0,onPaneClick:at,onPaneMouseEnter:Ar,onPaneMouseMove:Lr,onPaneMouseLeave:hr,onPaneScroll:Zn,onPaneContextMenu:Vn,paneClickDistance:Pt=1,nodeClickDistance:er=0,children:Ht,onReconnect:ft,onReconnectStart:$o,onReconnectEnd:vt,onEdgeContextMenu:to,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Qr,onEdgeMouseMove:At,onEdgeMouseLeave:Lt,reconnectRadius:Ut=10,onNodesChange:Gt,onEdgesChange:yr,noDragClassName:ir="nodrag",noWheelClassName:gr="nowheel",noPanClassName:Et="nopan",fitView:Xr,fitViewOptions:or,connectOnClick:ro,attributionPosition:no,proOptions:ar,defaultEdgeOptions:Si,elevateNodesOnSelect:Ci=!0,elevateEdgesOnSelect:io=!1,disableKeyboardA11y:Jn=!1,autoPanOnConnect:_t,autoPanOnNodeDrag:ei,autoPanSpeed:dn,connectionRadius:ti,isValidConnection:pn,onError:mt,style:Zr,id:Fn,nodeDragThreshold:Kt,connectionDragThreshold:Ho,viewport:vr,onViewportChange:ri,width:fn,height:$a,colorMode:oo="light",debug:ki,onScroll:kr,ariaLabelConfig:_n,zIndexMode:Wo="basic",...Ha},tr){const Mr=Fn||"1",ao=e4(oo),xr=A.useCallback(ni=>{ni.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),kr==null||kr(ni)},[kr]);return f.jsx("div",{"data-testid":"rf__wrapper",...Ha,onScroll:xr,style:{...Zr,...w6},ref:tr,className:Ft(["react-flow",a,ao]),id:Fn,role:"application",children:f.jsxs(x6,{nodes:e,edges:t,width:fn,height:$a,fitView:Xr,fitViewOptions:or,minZoom:zt,maxZoom:Jt,nodeOrigin:lt,nodeExtent:Tt,zIndexMode:Wo,children:[f.jsx(y6,{onInit:p,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:u,connectionLineType:X,connectionLineStyle:_e,connectionLineComponent:W,connectionLineContainerStyle:J,selectionKeyCode:ue,selectionOnDrag:ae,selectionMode:he,deleteKeyCode:re,multiSelectionKeyCode:je,panActivationKeyCode:Ee,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Fe,defaultViewport:Zt,translateExtent:ot,minZoom:zt,maxZoom:Jt,preventScrolling:Or,zoomOnScroll:mr,zoomOnPinch:$t,zoomOnDoubleClick:cn,panOnScroll:Qe,panOnScrollSpeed:qi,panOnScrollMode:Nt,panOnDrag:me,onPaneClick:at,onPaneMouseEnter:Ar,onPaneMouseMove:Lr,onPaneMouseLeave:hr,onPaneScroll:Zn,onPaneContextMenu:Vn,paneClickDistance:Pt,nodeClickDistance:er,onSelectionContextMenu:te,onSelectionStart:G,onSelectionEnd:Y,onReconnect:ft,onReconnectStart:$o,onReconnectEnd:vt,onEdgeContextMenu:to,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Qr,onEdgeMouseMove:At,onEdgeMouseLeave:Lt,reconnectRadius:Ut,defaultMarkerColor:Yr,noDragClassName:ir,noWheelClassName:gr,noPanClassName:Et,rfId:Mr,disableKeyboardA11y:Jn,nodeExtent:Tt,viewport:vr,onViewportChange:ri}),f.jsx(JR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,nodesDraggable:Be,autoPanOnNodeFocus:rt,nodesConnectable:et,nodesFocusable:pt,edgesFocusable:ct,edgesReconnectable:st,elementsSelectable:Cr,elevateNodesOnSelect:Ci,elevateEdgesOnSelect:io,minZoom:zt,maxZoom:Jt,nodeExtent:Tt,onNodesChange:Gt,onEdgesChange:yr,snapToGrid:Te,snapGrid:Pe,connectionMode:z,translateExtent:ot,connectOnClick:ro,defaultEdgeOptions:Si,fitView:Xr,fitViewOptions:or,onNodesDelete:D,onEdgesDelete:F,onDelete:O,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:P,onSelectionDrag:U,onSelectionDragStart:j,onSelectionDragStop:H,onMove:m,onMoveStart:_,onMoveEnd:h,noPanClassName:Et,nodeOrigin:lt,rfId:Mr,autoPanOnConnect:_t,autoPanOnNodeDrag:ei,autoPanSpeed:dn,onError:mt,connectionRadius:ti,isValidConnection:pn,selectNodesOnDrag:We,nodeDragThreshold:Kt,connectionDragThreshold:Ho,onBeforeDelete:oe,debug:ki,ariaLabelConfig:_n,zIndexMode:Wo}),f.jsx(YR,{onSelectionChange:Q}),Ht,f.jsx(HR,{proOptions:ar,position:no}),f.jsx($R,{rfId:Mr,disableKeyboardA11y:Jn})]})})}var q6=jM(b6);function S6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>TM(a,s)),[]);return[t,n,i]}function C6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>NM(a,s)),[]);return[t,n,i]}function k6({dimensions:e,lineWidth:t,variant:n,className:i}){return f.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ft(["react-flow__background-pattern",n,i])})}function M6({radius:e,className:t}){return f.jsx("circle",{cx:e,cy:e,r:e,className:Ft(["react-flow__background-pattern","dots",t])})}var Xi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Xi||(Xi={}));const E6={[Xi.Dots]:1,[Xi.Lines]:1,[Xi.Cross]:6},I6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function rE({id:e,variant:t=Xi.Dots,gap:n=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:l,style:d,className:p,patternClassName:m}){const _=A.useRef(null),{transform:h,patternId:g}=Je(I6,qt),x=i||E6[t],q=t===Xi.Dots,w=t===Xi.Cross,b=Array.isArray(n)?n:[n,n],C=[b[0]*h[2]||1,b[1]*h[2]||1],S=x*h[2],M=Array.isArray(s)?s:[s,s],I=w?[S,S]:C,E=[M[0]*h[2]||1+I[0]/2,M[1]*h[2]||1+I[1]/2],N=`${g}${e||""}`;return f.jsxs("svg",{className:Ft(["react-flow__background",p]),style:{...d,..._c,"--xy-background-color-props":l,"--xy-background-pattern-color-props":u},ref:_,"data-testid":"rf__background",children:[f.jsx("pattern",{id:N,x:h[0]%C[0],y:h[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:q?f.jsx(M6,{radius:S/2,className:m}):f.jsx(k6,{dimensions:I,lineWidth:a,variant:t,className:m})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}rE.displayName="Background";const T6=A.memo(rE);function N6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function j6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function P6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function R6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function V6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function gl({children:e,className:t,...n}){return f.jsx("button",{type:"button",className:Ft(["react-flow__controls-button",t]),...n,children:e})}const F6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function nE({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:p,children:m,position:_="bottom-left",orientation:h="vertical","aria-label":g}){const x=St(),{isInteractive:q,minZoomReached:w,maxZoomReached:b,ariaLabelConfig:C}=Je(F6,qt),{zoomIn:S,zoomOut:M,fitView:I}=cg(),E=()=>{S(),s==null||s()},N=()=>{M(),u==null||u()},R=()=>{I(a),l==null||l()},P=()=>{x.setState({nodesDraggable:!q,nodesConnectable:!q,elementsSelectable:!q}),d==null||d(!q)},D=h==="horizontal"?"horizontal":"vertical";return f.jsxs(Ra,{className:Ft(["react-flow__controls",D,p]),position:_,style:e,"data-testid":"rf__controls","aria-label":g??C["controls.ariaLabel"],children:[t&&f.jsxs(f.Fragment,{children:[f.jsx(gl,{onClick:E,className:"react-flow__controls-zoomin",title:C["controls.zoomIn.ariaLabel"],"aria-label":C["controls.zoomIn.ariaLabel"],disabled:b,children:f.jsx(N6,{})}),f.jsx(gl,{onClick:N,className:"react-flow__controls-zoomout",title:C["controls.zoomOut.ariaLabel"],"aria-label":C["controls.zoomOut.ariaLabel"],disabled:w,children:f.jsx(j6,{})})]}),n&&f.jsx(gl,{className:"react-flow__controls-fitview",onClick:R,title:C["controls.fitView.ariaLabel"],"aria-label":C["controls.fitView.ariaLabel"],children:f.jsx(P6,{})}),i&&f.jsx(gl,{className:"react-flow__controls-interactive",onClick:P,title:C["controls.interactive.ariaLabel"],"aria-label":C["controls.interactive.ariaLabel"],children:q?f.jsx(V6,{}):f.jsx(R6,{})}),m]})}nE.displayName="Controls";const O6=A.memo(nE);function A6({id:e,x:t,y:n,width:i,height:a,style:s,color:u,strokeColor:l,strokeWidth:d,className:p,borderRadius:m,shapeRendering:_,selected:h,onClick:g}){const{background:x,backgroundColor:q}=s||{},w=u||x||q;return f.jsx("rect",{className:Ft(["react-flow__minimap-node",{selected:h},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,style:{fill:w,stroke:l,strokeWidth:d},shapeRendering:_,onClick:g?b=>g(b,e):void 0})}const L6=A.memo(A6),D6=e=>e.nodes.map(t=>t.id),Pp=e=>e instanceof Function?e:()=>e;function B6({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s=L6,onClick:u}){const l=Je(D6,qt),d=Pp(t),p=Pp(e),m=Pp(n),_=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:l.map(h=>f.jsx($6,{id:h,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:_},h))})}function z6({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:l,onClick:d}){const{node:p,x:m,y:_,width:h,height:g}=Je(x=>{const{internals:q}=x.nodeLookup.get(e),w=q.userNode,{x:b,y:C}=q.positionAbsolute,{width:S,height:M}=xi(w);return{node:w,x:b,y:C,width:S,height:M}},qt);return!p||p.hidden||!aM(p)?null:f.jsx(l,{x:m,y:_,width:h,height:g,style:p.style,selected:!!p.selected,className:i(p),color:t(p),borderRadius:a,strokeColor:n(p),strokeWidth:s,shapeRendering:u,onClick:d,id:p.id})}const $6=A.memo(z6);var H6=A.memo(B6);const W6=200,U6=150,G6=e=>!e.hidden,K6=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?oM(tu(e.nodeLookup,{filter:G6}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Y6="react-flow__minimap-desc";function iE({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:l,bgColor:d,maskColor:p,maskStrokeColor:m,maskStrokeWidth:_,position:h="bottom-right",onClick:g,onNodeClick:x,pannable:q=!1,zoomable:w=!1,ariaLabel:b,inversePan:C,zoomStep:S=1,offsetScale:M=5}){const I=St(),E=A.useRef(null),{boundingRect:N,viewBB:R,rfId:P,panZoom:D,translateExtent:F,flowWidth:O,flowHeight:Q,ariaLabelConfig:j}=Je(K6,qt),U=(e==null?void 0:e.width)??W6,H=(e==null?void 0:e.height)??U6,te=N.width/U,G=N.height/H,Y=Math.max(te,G),oe=Y*U,z=Y*H,X=M*Y,_e=N.x-(oe-N.width)/2-X,W=N.y-(z-N.height)/2-X,J=oe+X*2,re=z+X*2,ue=`${Y6}-${P}`,ae=A.useRef(0),he=A.useRef();ae.current=Y,A.useEffect(()=>{if(E.current&&D)return he.current=uR({domNode:E.current,panZoom:D,getTransform:()=>I.getState().transform,getViewScale:()=>ae.current}),()=>{var Te;(Te=he.current)==null||Te.destroy()}},[D]),A.useEffect(()=>{var Te;(Te=he.current)==null||Te.update({translateExtent:F,width:O,height:Q,inversePan:C,pannable:q,zoomStep:S,zoomable:w})},[q,w,C,S,F,O,Q]);const Ee=g?Te=>{var We;const[Pe,Fe]=((We=he.current)==null?void 0:We.pointer(Te))||[0,0];g(Te,{x:Pe,y:Fe})}:void 0,je=x?A.useCallback((Te,Pe)=>{const Fe=I.getState().nodeLookup.get(Pe).internals.userNode;x(Te,Fe)},[]):void 0,Ie=b??j["minimap.ariaLabel"];return f.jsx(Ra,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof _=="number"?_*Y:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Ft(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:U,height:H,viewBox:`${_e} ${W} ${J} ${re}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:E,onClick:Ee,children:[Ie&&f.jsx("title",{id:ue,children:Ie}),f.jsx(H6,{onClick:je,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:l}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${_e-X},${W-X}h${J+X*2}v${re+X*2}h${-J-X*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}iE.displayName="MiniMap";const Q6=A.memo(iE),X6=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Z6={[Pa.Line]:"right",[Pa.Handle]:"bottom-right"};function J6({nodeId:e,position:t,variant:n=Pa.Handle,className:i,style:a=void 0,children:s,color:u,minWidth:l=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:_=!1,resizeDirection:h,autoScale:g=!0,shouldResize:x,onResizeStart:q,onResize:w,onResizeEnd:b}){const C=FM(),S=typeof e=="string"?e:C,M=St(),I=A.useRef(null),E=n===Pa.Handle,N=Je(A.useCallback(X6(E&&g),[E,g]),qt),R=A.useRef(null),P=t??Z6[n];A.useEffect(()=>{if(!(!I.current||!S))return R.current||(R.current=bR({domNode:I.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:F,transform:O,snapGrid:Q,snapToGrid:j,nodeOrigin:U,domNode:H}=M.getState();return{nodeLookup:F,transform:O,snapGrid:Q,snapToGrid:j,nodeOrigin:U,paneDomNode:H}},onChange:(F,O)=>{const{triggerNodeChanges:Q,nodeLookup:j,parentLookup:U,nodeOrigin:H}=M.getState(),te=[],G={x:F.x,y:F.y},Y=j.get(S);if(Y&&Y.expandParent&&Y.parentId){const oe=Y.origin??H,z=F.width??Y.measured.width??0,X=F.height??Y.measured.height??0,_e={id:Y.id,parentId:Y.parentId,rect:{width:z,height:X,...sM({x:F.x??Y.position.x,y:F.y??Y.position.y},{width:z,height:X},Y.parentId,j,oe)}},W=lg([_e],j,U,H);te.push(...W),G.x=F.x?Math.max(oe[0]*z,F.x):void 0,G.y=F.y?Math.max(oe[1]*X,F.y):void 0}if(G.x!==void 0&&G.y!==void 0){const oe={id:S,type:"position",position:{...G}};te.push(oe)}if(F.width!==void 0&&F.height!==void 0){const z={id:S,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};te.push(z)}for(const oe of O){const z={...oe,type:"position"};te.push(z)}Q(te)},onEnd:({width:F,height:O})=>{const Q={id:S,type:"dimensions",resizing:!1,dimensions:{width:F,height:O}};M.getState().triggerNodeChanges([Q])}})),R.current.update({controlPosition:P,boundaries:{minWidth:l,minHeight:d,maxWidth:p,maxHeight:m},keepAspectRatio:_,resizeDirection:h,onResizeStart:q,onResize:w,onResizeEnd:b,shouldResize:x}),()=>{var F;(F=R.current)==null||F.destroy()}},[P,l,d,p,m,_,q,w,b,x]);const D=P.split("-");return f.jsx("div",{className:Ft(["react-flow__resize-control","nodrag",...D,n,i]),ref:I,style:{...a,scale:N,...u&&{[E?"backgroundColor":"borderColor"]:u}},children:s})}A.memo(J6);const Gl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Kl=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Yl=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Zi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},hc=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},e3=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let Hr=hc(Zi.PRODUCTS,Gl),Cn=hc(Zi.MACHINES,Kl),Mn=hc(Zi.RECIPES,Yl);const bt=e=>Hr.find(t=>t.id===e),gt=e=>Cn.find(t=>t.id===e),pg=(e,t,n)=>{e.length=0,e.push(...t),e3(n,e)},k0=e=>pg(Hr,e,Zi.PRODUCTS),M0=e=>pg(Cn,e,Zi.MACHINES),E0=e=>pg(Mn,e,Zi.RECIPES),t3=()=>hc(Zi.CANVAS_STATE,null),r3=()=>localStorage.removeItem(Zi.CANVAS_STATE),n3=()=>{k0(Gl),M0(Kl),E0(Yl),r3()},fg=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),i3=e=>e==="p_variableproduct",hi=(e,t,n)=>{if(i3(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const i=t(e);return i?i.name:"Unknown Product"},o3=e=>fg(e)?"Variable":typeof e=="number"?e.toString():e,bs=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,a3=e=>{if(fg(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:bs(e.drilling),idle:bs(e.idle)};if("max"in e&&"average"in e)return{max:bs(e.max),average:bs(e.average)}}return bs(e)},s3=e=>fg(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,ew=(e,t)=>{const n=o3(e.quantity),i=hi(e.product_id,t);return`${n}x ${i}`},u3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],oE=e=>u3.includes(e),Wr=18,Qi=18,In=100,fr={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},_g=(e,t={},n=Wr,i=null,a=null)=>{const s=fr[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[i]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Qi,l=t.heatLoss??s.defaultHeatLoss;return u-l;default:return n}},tw=(e,t)=>{const n=fr[e];if(!n||n.type!=="configurable")return null;const i=n.tempOptions.find(a=>a.temp===t);return i?i.power:null},Ql=e=>e==null?"":`${Math.round(e)}C`,l3=e=>{const t=fr[e];return t&&t.type==="configurable"},c3=e=>{const t=fr[e];return t&&t.type==="boiler"},d3=e=>{const t=fr[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},p3=e=>e<=0?1/0:e>=400?2:800/e,f3=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,_3=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,m3=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},h3=e=>e<=0?1/0:64/(.176*Math.abs(e)),sn={m_industrial_drill:{type:"steam_input",formula:p3},m_alloyer:{type:"steam_input",formula:f3},m_coal_liquefaction_plant:{type:"steam_input",formula:_3},m_steam_cracking_plant:{type:"steam_input",formula:m3},m_water_treatment_plant:{type:"steam_input",formula:h3}},Gr=e=>e in sn,Un=(e,t,n)=>{const i=sn[e];if(!i)return n;const a=i.formula(t);return isFinite(a)?a:n},gi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),rw=(e,t)=>{const n=new Map,i=new Map;Object.keys(e.nodes).forEach(l=>{const d=e.nodes[l];d&&(d.inputs.forEach((p,m)=>{i.set(`${l}:${m}`,Wr)}),d.outputs.forEach((p,m)=>{n.set(`${l}:${m}`,Wr)}))});const{sorted:a,cycleNodes:s}=g3(e),u=(l,d=!1)=>{const p=e.nodes[l];if(!p)return!1;const m={id:p.recipe.machine_id},_=fr[m.id];let h=!1;return p.inputs.forEach((g,x)=>{const q=y3(e,t,l,x,n,!d),w=i.get(`${l}:${x}`),b=q!==null?q:w;Math.abs(b-w)>.01&&(i.set(`${l}:${x}`,b),h=!0)}),p.outputs.forEach((g,x)=>{var w,b;let q=Wr;if(_){if(_.type==="fixed")q=_.outputTemp;else if(_.type==="additive"){if(p.inputs.length>0){const C=i.get(`${l}:0`)||Wr;C>_.maxTemp?q=C:q=Math.min(C+_.tempIncrease,_.maxTemp)}}else if(_.type==="configurable")q=((w=p.recipe.temperatureSettings)==null?void 0:w.temperature)||_.tempOptions[0].temp;else if(_.type==="product_dependent"){if(p.inputs.length>0){const C=p.inputs[0].productId;q=_.temps[C]||_.temps.p_water||400}}else if(_.type==="boiler"){if(p.inputs.length>=2){const C=i.get(`${l}:1`)||Wr,S=((b=p.recipe.temperatureSettings)==null?void 0:b.heatLoss)||_.defaultHeatLoss,M=C-S;x===0?q=M*.85:x===1&&(M<_.minSteamTemp?q=Math.max(M,Wr):q=M)}}else if(_.type==="passthrough"){const C=p.inputs.findIndex(S=>S.productId===_.inputProduct);C>=0&&(q=i.get(`${l}:${C}`)||Wr)}}n.set(`${l}:${x}`,q)}),h};if(a.forEach(l=>{s.has(l)||u(l)}),s.size>0){let d=0,p=!0;const m=a.filter(h=>s.has(h));for(;p&&d<100;)p=!1,m.forEach(h=>{u(h,!0)&&(p=!0)}),d++;const _=new Set;a.forEach(h=>{if(s.has(h))return;const g=e.nodes[h];g&&g.inputs.forEach((x,q)=>{const w=e.products[x.productId];if(!w)return;w.connections.filter(C=>C.targetNodeId===h&&C.targetInputIndex===q).forEach(C=>{s.has(C.sourceNodeId)&&_.add(h)})})}),_.forEach(h=>{u(h,!1)})}return{outputTemperatures:n,inputTemperatures:i}},y3=(e,t,n,i,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[i].productId];if(!u)return s?Wr:null;const l=u.connections.filter(_=>_.targetNodeId===n&&_.targetInputIndex===i);if(l.length===0)return s?Wr:null;const d=[];if(l.forEach(_=>{var g;const h=a.get(`${_.sourceNodeId}:${_.sourceOutputIndex}`);if(h!=null){const x=((g=t.byConnection[_.id])==null?void 0:g.flowRate)||0;d.push({temp:h,flow:x})}}),d.length===0)return s?Wr:null;const p=d.reduce((_,h)=>_+h.flow,0);if(p>0){const _=d.reduce((h,g)=>h+g.temp*g.flow,0);return Math.round(_/p*1e10)/1e10}const m=d.reduce((_,h)=>_+h.temp,0);return Math.round(m/d.length*1e10)/1e10},g3=e=>{const t=[],n=new Set,i=new Set,a=new Set,s=(u,l=[])=>{if(n.has(u))return;if(i.has(u)){const m=l.indexOf(u);for(let _=m;_<l.length;_++)a.add(l[_]);a.add(u);return}i.add(u);const d=[...l,u],p=e.nodes[u];p&&p.inputs.forEach((m,_)=>{const h=e.products[m.productId];h&&h.connections.filter(x=>x.targetNodeId===u&&x.targetInputIndex===_).forEach(x=>{n.has(x.sourceNodeId)||s(x.sourceNodeId,d)})}),i.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},I0=(e,t,n)=>e.map(i=>{if(!n.nodes[i.id])return i;const s={id:i.data.recipe.machine_id},u=fr[s.id],l=Gr(s.id),d=i.data.recipe.outputs.map((m,_)=>{const h=t.outputTemperatures.get(`${i.id}:${_}`);if(h!=null){if((u==null?void 0:u.type)==="boiler"&&m.product_id==="p_steam"){const g=u.minSteamTemp||100;return h<g?{...m,temperature:h,quantity:0,originalQuantity:m.originalQuantity||m.quantity}:{...m,temperature:h,quantity:m.originalQuantity||m.quantity,originalQuantity:m.originalQuantity||m.quantity}}return{...m,temperature:h}}return m});let p={...i.data.recipe,outputs:d};if(l){const m=sn[s.id];if((m==null?void 0:m.type)==="steam_input"){const _=i.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(_>=0){const h=t.inputTemperatures.get(`${i.id}:${_}`);if(h!=null&&(p={...p,tempDependentInputTemp:h},s.id==="m_water_treatment_plant")){const x=90*Un(s.id,h,1);p={...p,inputs:p.inputs.map((q,w)=>w===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(q.product_id)?{...q,quantity:x,originalQuantity:90}:q)}}}}}return{...i,data:{...i.data,recipe:p}}}),T0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],N0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],v3={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},x3=12,w3=3.1,b3=.1,q3=.02,S3=2,Us={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},C3=()=>Object.keys(Us).map(e=>parseInt(e)).sort((e,t)=>e-t),k3=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},M3=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Ao=(e,t,n,i)=>{if(!e||!i)return null;const a=k3(e,i),s=M3(t||"none",i),u=n?1.1:1,l=.5*a*s*u,d=Math.ceil(100/l),p=x3,m=n?100:50,_=2*i/m,h=d+p+_,g=d/h;return{deteriorationRate:l,lifeTime:d,replacementTime:p,travelTime:_,totalCycleTime:h,dutyCycle:g,drillingPower:w3,idlePower:b3,pollution:q3}},aE=(e,t,n,i)=>{const a=[],s=Ao(e,t,n,i);if(!s){if(e){const u=T0.find(l=>l.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=N0.find(l=>l.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=T0.find(l=>l.id===e);if(u){const l=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(l.toFixed(6))})}}if(t&&t!=="none"){const u=N0.find(l=>l.id===t);if(u!=null&&u.product_id){const d=(v3[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(d.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:S3}),a},sE=(e,t,n,i)=>{if(!i)return[];const a=Us[i];if(!a)return[];const s=Ao(e,t,n,i);if(!s)return a.map(l=>({...l,quantity:"Variable"}));const u=n?1.1:1;return a.map(l=>{const d=l.quantity*u*s.dutyCycle;return{product_id:l.product_id,quantity:parseFloat(d.toFixed(4))}})},nw={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},iw=4,E3=20,I3=4,ow=5e5,T3=.3,N3=10,vl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},j3=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),i=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:i,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},uE=j3(),P3=e=>uE.find(t=>t.productId===e),iu=(e,t,n=0)=>{const i=P3(e);if(!i)return null;const s=Math.log2(i.innerStage)+(i.outerStage-1)*6,u=iw*s,l=t?I3:E3,d=n/6,p=s*iw*(l+d)+N3,m=vl.logic_plates*s,_=vl.copper_wires*s,h=vl.semiconductors*s,g=vl.gold_wires*s,x=[{product_id:"p_logic_plate",quantity:m},{product_id:"p_copper_wire",quantity:_},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:g}];t&&x.push({product_id:"p_machine_oil",quantity:parseFloat((T3*p).toFixed(6))});const q=[{product_id:e,quantity:1}],w=ow/l,b=ow/(t?.8:4);return{outerStage:i.outerStage,innerStage:i.innerStage,totalStages:s,totalSteps:u,avgStepTime:l,cycleTime:p,inputs:x,outputs:q,avgPowerConsumption:w,maxPowerConsumption:b,logicPlates:m,copperWires:_,semiconductors:h,goldWires:g}},lE=(e,t)=>{const n=iu(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},cE=(e,t)=>{const n=iu(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},aw={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},j0=11,dE=2,R3=2e5,pE=1,V3=3,fE=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,_E=e=>Math.ceil(e/V3),Xl=(e,t,n,i,a,s)=>{if(!e||!t||!n||!i||a!==1)return null;const u=_E(n),l=fE(s),d=n*pE,p=e/l,m=t/j0,_=Math.min(p,m),h=_*dE,g=t*R3/j0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:i,controller:a,growthTime:l,waterConsumption:d,sustainableHarvestRate:p,maxHarvestRate:m,actualHarvestRate:_,logOutput:h,avgPowerConsumption:g,isTreeLimited:p<m}},mE=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*pE}],mg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const i=fE(n),a=e/i,s=t/j0,l=Math.min(a,s)*dE;return[{product_id:"p_oak_log",quantity:parseFloat(l.toFixed(6))}]},sw={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},hg=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],hE={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},F3={r_industrial_firebox_07:1},yE=e=>hg.find(t=>t.id===e),Zl=(e,t)=>{const n=hE[e],i=yE(t);if(!n||!i)return null;const a=n/i.energy,s=F3[e]||0,u=a+s,l=1,d=a;return{energyNeeded:n,fuelEnergy:i.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:l,fuelPerCycle:d}},P0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const i=Zl(n,t);if(!i)return e;const a=yE(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(i.fuelPerCycle.toFixed(6))},u=hg.map(d=>d.product_id),l=e.filter(d=>d.product_id!=="p_variableproduct"&&!u.includes(d.product_id));return[s,...l]},gE=e=>e in hE,vE=(e,t)=>{const i=(e-100)/5;let a=1,s=1;e<100?(a=1+i*.05,s=1+i*.06666666666666667):e>100&&(a=1+i*.05,s=1+i*.1);const l=(t-100)/5;let d=1,p=1;t<100?(d=1+l*-.0625,p=1+l*.05):t>100&&(d=1+l*-.0425,p=1+l*.25);const m=a*d,_=a,h=s+p-1;return{inputMultiplier:m,outputMultiplier:_,powerMultiplier:h}},O3=(e,t,n)=>{const i=vE(t,n),a=e.inputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.inputMultiplier).toFixed(6)):l.quantity})),s=e.outputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.outputMultiplier).toFixed(6)):l.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*i.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Ki=7e3,yg=140,gg=70,xE=1e6,uw=240,Rp=29.166666666666668,Ns=240,wE=480,Pl=(e,t)=>{const n=e+t;let i;return n<=Ns?i=Rp:n>=wE?i=Rp/2:i=Rp*Ns/n,{cycleTime:i,concreteBlocksPerCycle:yg,leadIngotsPerCycle:gg,totalFlow:n,powerConsumption:xE}},Jl=(e,t,n,i)=>{const a=Math.min(e,uw),s=Math.min(t,uw),u=a+s;let l,d;return u<=Ns?(l=Ki,d=Ki):u>=wE?(l=Ki/2,d=Ki/2):(l=Ki*Ns/u,d=Ki*Ns/u),[{product_id:n||"p_variableproduct",quantity:l,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:i||"p_variableproduct",quantity:d,isAnyProduct:i==="p_any_fluid"||!i,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:yg},{product_id:"p_lead_ingot",quantity:gg}]},R0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:xE,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Ki,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Ki,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:yg},{product_id:"p_lead_ingot",quantity:gg}],outputs:[],isWasteFacility:!0},V0=15,A3=2,L3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],js=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;L3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},F0=e=>{const t=[];for(let n=0;n<A3;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:V0})}return t},O0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:V0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:V0}],outputs:[],isLiquidDump:!0},bE=15,qE=8,D3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ps=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;D3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},A0=e=>{const t=[];for(let n=0;n<qE;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:bE})}return t},L0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(qE).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:bE})),outputs:[],isLiquidBurner:!0},lw=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",B3=(e,t,n)=>{switch(e){case"drill":return z3();case"assembler":return $3();case"treeFarm":return H3(n);case"firebox":return W3(t);case"temperature":return U3(t);case"boiler":return G3();case"chemicalPlant":return K3();case"wasteFacility":return Y3();case"liquidDump":return Q3();case"liquidBurner":return X3();default:return null}},z3=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...T0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:N0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...C3().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Ao(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),f.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=aE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=sE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),i=e.drillHead&&e.depth?Ao(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:i}}}),$3=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,i=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return i?f.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:i}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?iu(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Total Stages: ",e.totalStages]}),f.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),f.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),f.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),f.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),f.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),f.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),f.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,l;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((l=e.microchip)==null?void 0:l.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},i=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=lE(i,t.machineOil),s=cE(i,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),H3=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=_E(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Xl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),f.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),f.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&f.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const i=mE(t.sprinklers),a=mg(t.trees,t.harvesters,e);return{settings:t,inputs:i,outputs:a,metrics:null}}}),W3=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:hg.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>Zl(e.id,t.fuel),renderMetrics:(t,n)=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),f.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),f.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&f.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),f.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),f.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:P0(e.inputs,n.fuel,e.id).map((i,a)=>{const s=typeof i.quantity=="number"?i.quantity.toFixed(4):i.quantity,u=hi(i.product_id,bt);return f.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const i=Zl(n.id,t.fuel),a=P0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:i}}}),U3=e=>{var i,a;const t=e.machine_id,n=fr[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(i=n.tempOptions)==null?void 0:i[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Ql(s.temp)} - ${lw(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const l=u.temperature,d=tw(t,l);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:["Output Temperature: ",Ql(l)]}),f.jsxs("div",{children:["Power Consumption: ",lw(d)]})]})}}],onApply:(s,u)=>{const l=tw(t,s.temperature),d=u.outputs.map(p=>({...p,temperature:_g(t,s)}));return{settings:s,inputs:[],outputs:d,metrics:l}}}},G3=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[" Boiler uses the ",f.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),f.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),f.jsx("div",{children:" If output temp < 100C, no steam is produced"}),f.jsx("div",{children:" Water output is cooled (no temperature)"}),f.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),K3=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>vE(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),f.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[f.jsx("div",{children:" Speed affects input/output quantities and power"}),f.jsx("div",{children:" Efficiency affects input quantities and power"}),f.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),Y3=()=>{const e=Hr.filter(n=>n.type==="item").sort((n,i)=>n.name.localeCompare(i.name)),t=Hr.filter(n=>n.type==="fluid").sort((n,i)=>n.name.localeCompare(i.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 240/s"}),f.jsx("div",{children:" Fixed requirements per cycle:"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const i=Jl(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:i,outputs:[],metrics:null}}}},Q3=()=>{const e=Hr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=[n.fluidProductId0,n.fluidProductId1],a=F0(i),s=js(a);return f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to dispose of them"}),f.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],i=F0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},X3=()=>{const e=Hr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=Array(8).fill(0).map((u,l)=>n[`fluidProductId${l}`]),a=A0(i),s=Ps(a);return f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),f.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),i=A0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},Z3=({recipeType:e,nodeId:t,currentSettings:n,recipe:i,globalPollution:a,onSettingsChange:s,onClose:u})=>{var w;const l=B3(e,i,a),[d,p]=A.useState(n||l.defaultSettings),m=A.useRef(null),_=b=>{const C=m.current;if(!C)return;const S=C.scrollHeight>C.clientHeight,M=C.scrollTop===0&&b.deltaY<0,I=C.scrollTop+C.clientHeight>=C.scrollHeight&&b.deltaY>0;S&&!M&&!I||b.preventDefault(),b.stopPropagation()},h=(b,C)=>{p(typeof b=="object"?S=>({...S,...b}):S=>({...S,[b]:C}))},g=()=>{const b=l.onApply(d,i);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,b.settings,b.inputs,b.outputs);break;case"firebox":s(t,b.settings,b.inputs,b.metrics);break;case"temperature":s(t,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":s(t,b.settings);break;default:s(t,b.settings,b.inputs,b.outputs,b.metrics)}u()},x=()=>{p(l.defaultSettings)},q=l.calculateMetrics?l.calculateMetrics(d,i):null;return FR.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:u,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:_,children:[f.jsx("h3",{className:"drill-settings-title",children:l.title}),f.jsxs("div",{className:"drill-settings-content",children:[l.fields.map((b,C)=>f.jsx(J3,{field:b,value:d[b.key],settings:d,onChange:(S,M)=>{b.type==="dual-select"?h(S,M):h(b.key,S)}},C)),q&&l.renderMetrics&&f.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:l.renderMetrics(q,d)})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:g,className:"btn btn-primary",disabled:(w=l.hasErrors)==null?void 0:w.call(l,d),children:"Apply"})]})]})}),document.body)},J3=({field:e,value:t,settings:n,onChange:i})=>{var a,s;switch(e.type){case"select":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("select",{value:t,onChange:u=>i(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>f.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&f.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return f.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:f.jsxs("label",{className:"drill-setting-label",children:[f.jsx("input",{type:"checkbox",checked:t,onChange:u=>i(u.target.checked),className:"drill-checkbox"}),f.jsx("span",{children:e.label})]})});case"number":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>i(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&f.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>i(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),f.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),f.jsx("button",{onClick:()=>i(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[f.jsxs("span",{children:["Min: ",e.min]}),f.jsxs("span",{children:["Default: ",e.defaultValue]}),f.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("input",{type:"text",value:t,onChange:u=>i(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const l=u.target.value;i(e.outerKey,l),l&&parseInt(l)>1&&i(e.innerKey,"64")},className:"select",style:{flex:1},children:[f.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>f.jsxs("option",{value:u,children:[u,"x"]},u))]}),f.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>i(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[f.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?f.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>f.jsxs("option",{value:u,children:[u,"x"]},u))]}),f.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return f.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),f.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},Rs=44,D0=8,cw=10,dw=20,pw=380,eV=120,xl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,tV=A.memo(({data:e,id:t})=>{var mr,$t,Qe,qi,Nt,cn;const{recipe:n,machine:i,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:l,onOutputClick:d,isTarget:p,onDrillSettingsChange:m,onLogicAssemblerSettingsChange:_,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:g,onTemperatureSettingsChange:x,onBoilerSettingsChange:q,onChemicalPlantSettingsChange:w,globalPollution:b,flows:C,isMobile:S,mobileActionMode:M,onMachineCountModeChange:I,zoomLevel:E}=e,N=!E||E>=.25,[R,P]=A.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!i)return null;const D=n.isMineshaftDrill||n.id==="r_mineshaft_drill",F=n.isLogicAssembler||n.id==="r_logic_assembler",O=n.isTreeFarm||n.id==="r_tree_farm",Q=n.isWasteFacility||n.id==="r_underground_waste_facility",j=n.isLiquidDump||n.id==="r_liquid_dump",U=n.isLiquidBurner||n.id==="r_liquid_burner",H=D||F||O||Q||j||U,te=l3(i.id),G=c3(i.id),Y=fr[i.id],oe=i.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",z=i.id==="m_chemical_plant",X=Gr(i.id),_e=X?sn[i.id]:null;let W=n.cycle_time;const J=W==="Variable"||typeof W!="number"||W<=0;if(J&&!H?W="Variable":J&&H&&(W=1),X&&(_e==null?void 0:_e.type)==="steam_input"&&typeof W=="number"&&!(i.id==="m_steam_cracking_plant"&&!gi(n))){const me=n.tempDependentInputTemp??In;W=Un(i.id,me,W)}const re={outputs:[]};if(Y){const me=Y.type==="boiler",at=(mr=n.outputs)==null?void 0:mr.some(Pt=>["p_water","p_filtered_water","p_distilled_water"].includes(Pt.product_id)),Ar=($t=n.outputs)==null?void 0:$t.some(Pt=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Pt.product_id)),Lr=(Qe=n.inputs)==null?void 0:Qe.some(Pt=>["p_water","p_filtered_water","p_distilled_water"].includes(Pt.product_id)),hr=n.id==="r_industrial_firebox_07",Zn=i.id==="m_industrial_firebox";(!Zn||Zn&&!hr&&(Lr||at))&&((qi=n.outputs)==null||qi.forEach((Pt,er)=>{if(oE(Pt.product_id)&&Pt.temperature!=null){const Ht=["p_water","p_filtered_water","p_distilled_water"].includes(Pt.product_id),ft=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Pt.product_id);me?ft&&Ar&&re.outputs.push({temp:Pt.temperature,index:er}):(Ht&&at||ft&&Ar)&&re.outputs.push({temp:Pt.temperature,index:er})}}))}const ue=A.useCallback(me=>{if(me==="Variable")return"Variable";if(typeof me!="number")return String(me);if(W==="Variable")return s==="perSecond"?"Variable":String(xl(me));let at=s==="perSecond"?me/W:me;return u==="total"&&(at*=a||0),String(xl(at))},[W,s,u,a]),ae=A.useCallback(me=>{if(me==="Variable"||typeof me!="number")return me;if(s==="perSecond")return"1s";if(me>=60){const at=Math.floor(me/60),Ar=me%60;return`${at}m ${xl(Ar)}s`}return`${xl(me)}s`},[s]),he=A.useMemo(()=>ae(W),[W,ae]);let Ee=n.power_consumption,je=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Ee=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Ee={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Ee={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(je=n.pollution*a));const Ie=a3(Ee),Te=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),Pe=n.power_type==="HV"?" HV":"",Fe=n.inputs.length,We=n.outputs.length,Be=Math.max(Fe,We,1),rt=Fe>0,et=We>0,pt=pw-cw*2,lt=rt&&et?Math.floor((pt-dw)/2):rt?pt:0,ct=rt&&et?Math.floor((pt-dw)/2):et?pt:0,st=pw,Zt=Be*Rs+(Be-1)*D0+24,Jt=eV+Zt+12,ot=a??0,Or=Number.isInteger(ot)?ot.toString():ot.toFixed(2),Tt=e.machineCountMode||"free",Yr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`custom-node ${p?"target":""}`,style:{width:st,height:Jt},onMouseDownCapture:me=>{me.button===1&&(me.preventDefault(),me.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[f.jsxs("div",{className:"node-info-area",children:[re.outputs.length>0&&f.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:re.outputs.map((me,at)=>f.jsx("div",{children:Ql(me.temp)},`output-${at}`))}),X&&(_e==null?void 0:_e.type)==="steam_input"&&gi(n)&&f.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Ql(n.tempDependentInputTemp??In)}),D&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("drill")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),F&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("assembler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),O&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("treeFarm")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),oe&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("firebox")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),z&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("chemicalPlant")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),Q&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("wasteFacility")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),j&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("liquidDump")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),U&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("liquidBurner")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),te&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("temperature")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),G&&f.jsx("button",{onClick:me=>{me.stopPropagation(),P("boiler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),f.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),f.jsxs("div",{className:"node-stats-row",children:[f.jsxs("div",{className:"node-stats",style:{gap:Te?"1px":"3px",minHeight:"65px",visibility:N?"visible":"hidden"},children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",he]}),Te?"drilling"in Ie?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,Pe]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,Pe]})]}):f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",s3(je)]})]}),f.jsxs("div",{className:"node-machine-info",style:{visibility:N?"visible":"hidden"},children:[f.jsx("div",{className:"node-machine-name",title:i.name,style:{color:i.tier===1?"var(--tier-1-color)":i.tier===2?"var(--tier-2-color)":i.tier===3?"var(--tier-3-color)":i.tier===4?"var(--tier-4-color)":(i.tier===5,"var(--tier-5-color)")},children:i.name}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{className:"node-machine-count",style:Yr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Or}),Tt!=="free"&&f.jsx("button",{onClick:me=>{me.stopPropagation(),I&&I(t,Tt,a)},onDoubleClick:me=>me.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:me=>me.currentTarget.style.opacity="1",onMouseLeave:me=>me.currentTarget.style.opacity="0.8",title:Tt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Nt=e.cappedMachineCount)==null?void 0:Nt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((cn=e.cappedMachineCount)==null?void 0:cn.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Tt==="locked"?"":""})]})]})]})]}),f.jsxs("div",{className:"node-io-area",children:[f.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:rt&&et?`${lt}px 1fr ${ct}px`:"1fr",padding:`0 ${cw}px`},children:[rt&&f.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((me,at)=>f.jsx("div",{className:"node-rect-wrapper",children:f.jsx(fw,{side:"left",index:at,width:lt,input:me,onClick:l,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${at}-${me.product_id}`))}),rt&&et&&f.jsx("div",{className:"node-io-gap"}),et&&f.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((me,at)=>f.jsx("div",{className:"node-rect-wrapper",children:f.jsx(fw,{side:"right",index:at,width:ct,input:me,onClick:d,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${at}-${me.product_id}`))})]}),f.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((me,at)=>f.jsx(_w,{side:"left",index:at,onClick:l,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Fe,rightCount:We},`handle-left-${t}-${at}`)),n.outputs.map((me,at)=>f.jsx(_w,{side:"right",index:at,onClick:d,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Fe,rightCount:We},`handle-right-${t}-${at}`))]})]})]}),R&&f.jsx(Z3,{recipeType:R,nodeId:t,currentSettings:R==="drill"?n.drillSettings:R==="assembler"?n.assemblerSettings:R==="treeFarm"?n.treeFarmSettings:R==="firebox"?n.fireboxSettings:R==="temperature"||R==="boiler"?n.temperatureSettings:R==="chemicalPlant"?n.chemicalPlantSettings:R==="wasteFacility"?n.wasteFacilitySettings:R==="liquidDump"?n.liquidDumpSettings:R==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:b||0,onSettingsChange:R==="drill"?m:R==="assembler"?_:R==="treeFarm"?h:R==="firebox"?g:R==="temperature"?x:R==="boiler"?q:R==="chemicalPlant"?w:R==="wasteFacility"?e.onWasteFacilitySettingsChange:R==="liquidDump"?e.onLiquidDumpSettingsChange:R==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>P(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,i=t.data;return!(n.recipe!==i.recipe||n.machineCount!==i.machineCount||n.flows!==i.flows||n.suggestions!==i.suggestions||n.displayMode!==i.displayMode||n.machineDisplayMode!==i.machineDisplayMode||n.isTarget!==i.isTarget||n.zoomLevel!==i.zoomLevel||n.machineCountMode!==i.machineCountMode)}),fw=({side:e,index:t,width:n,input:i,onClick:a,nodeId:s,formatQuantity:u,isMobile:l,mobileActionMode:d})=>{const p=e==="left",m=hi(i.product_id,bt,i.acceptedType),_=u(i.quantity),h=!l||d==="pan";return f.jsx("div",{onClick:g=>{a&&h&&(g.stopPropagation(),a(i.product_id,s,t,g))},title:`${_}x ${m}`,className:`node-rect ${p?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${Rs}px`,minWidth:`${n}px`},children:f.jsxs("span",{className:"node-rect-text",children:[_,"x ",m]})})},_w=({side:e,index:t,onClick:n,nodeId:i,productId:a,flows:s,onHandleDoubleClick:u,suggestions:l,input:d,data:p,leftCount:m,rightCount:_})=>{var D,F;const g=getComputedStyle(document.documentElement),x=g.getPropertyValue("--handle-input-supplied").trim(),q=g.getPropertyValue("--handle-input-deficient").trim(),w=g.getPropertyValue("--handle-output-connected").trim(),b=g.getPropertyValue("--handle-output-excess").trim();let C=e==="left"?x:w;if(s){const O=e==="left"?(D=s.inputFlows)==null?void 0:D[t]:(F=s.outputFlows)==null?void 0:F[t];if(O){const Q=e==="left"?O.needed-O.connected:O.produced-O.connected;Math.abs(Q)>1e-6&&Q>0&&(C=e==="left"?q:b)}}const S=bt(a),I=(S==null?void 0:S.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",P=12+(Math.max(m,_)-(e==="left"?m:_))*(Rs+D0)/2+t*(Rs+D0)+Rs/2+11;return f.jsx(Ws,{type:e==="left"?"target":"source",position:e==="left"?He.Left:He.Right,id:`${e}-${t}`,style:{background:C,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:I,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${P}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:O=>{n&&O.ctrlKey&&(O.stopPropagation(),n(a,i,t,O))},onDoubleClick:O=>{u&&(O.stopPropagation(),u(i,e,t,a,l))}})},rV=({id:e,sourceX:t,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,data:l})=>{const d=(l==null?void 0:l.edgePath)||"orthogonal",p=(l==null?void 0:l.edgeStyle)||"animated",[m]=A.useMemo(()=>d==="straight"?ig({sourceX:t,sourceY:n,targetX:i,targetY:a}):d==="orthogonal"?Wl({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u,borderRadius:8}):ng({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),[t,n,i,a,s,u,d]),_=p==="animated"?"custom-edge custom-edge-animated":p==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return f.jsx("path",{id:e,className:_,d:m,fill:"none"})},nV=A.memo(rV,(e,t)=>{var n,i,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((i=t.data)==null?void 0:i.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),ka={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},iV=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:ka},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],ec=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,i])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,i)})},Rl=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):ka}catch{return ka}},B0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),oV=()=>(ec(ka),B0(ka),ka),aV=({onClose:e})=>{const[t,n]=A.useState(Rl()),[i,a]=A.useState(!1),s=_=>{const h={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},g={..._.theme,...h};n(g),ec(g),B0(g)},u=(_,h)=>{const g={...t,[_]:h};n(g),ec(g),B0(g)},l=()=>{const _=oV();n(_)},d=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],p=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],m=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),style:{width:i?"700px":"600px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Theme Editor"}),i?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Path Type:"}),f.jsx("select",{value:t.edgePath||"bezier",onChange:_=>u("edgePath",_.target.value),className:"select",style:{marginTop:"6px"},children:p.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Line Style:"}),f.jsx("select",{value:t.edgeStyle||"animated",onChange:_=>u("edgeStyle",_.target.value),className:"select",style:{marginTop:"6px"},children:m.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]})]})]}),d.map(_=>f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:_.title}),f.jsx("div",{className:"theme-color-grid",children:_.colors.map(h=>{const g=t[h.key]||"#000000",x=g.length>7?g.substring(0,7):g;return f.jsxs("div",{className:"theme-color-item",children:[f.jsx("label",{className:"theme-color-label",children:h.label}),f.jsxs("div",{className:"theme-color-inputs",children:[f.jsx("input",{type:"color",value:x,onChange:q=>{const w=t[h.key];if(w&&w.length>7){const b=w.substring(7);u(h.key,q.target.value+b)}else u(h.key,q.target.value)},className:"theme-color-picker"}),f.jsx("input",{type:"text",value:t[h.key],onChange:q=>u(h.key,q.target.value),className:"input theme-color-text"})]})]},h.key)})})]},_.title))]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:l,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[f.jsx("div",{style:{marginBottom:"20px"},children:f.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:iV.map(_=>f.jsx("div",{onClick:()=>s(_),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:_.name}),f.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:_.description})]}),f.jsx("div",{style:{display:"flex",gap:"6px"},children:[_.theme.colorPrimary,_.theme.bgMain,_.theme.inputBorder,_.theme.outputBorder].map((h,g)=>f.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},g))})]})},_.id))})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},sV=({onClose:e})=>f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Help & Controls"}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",f.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),f.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[f.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)"},children:[f.jsx("div",{children:"Cycle: 4s"}),f.jsx("div",{children:"Power: 150kW"}),f.jsx("div",{children:"Pollution: 0%/hr"})]}),f.jsxs("div",{style:{textAlign:"right"},children:[f.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),f.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),f.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),f.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),f.jsx("div",{style:{minWidth:"250px"},children:f.jsxs("div",{style:{marginBottom:"15px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),f.jsxs("div",{style:{marginTop:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),f.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),f.jsxs("div",{style:{marginTop:"25px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",f.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:["Use ",f.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",f.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:["Use ",f.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),f.jsxs("div",{style:{paddingLeft:"15px"},children:[f.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),f.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),f.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),f.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),f.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),uV="industrialist_db",lV=1,_r="canvas_saves",Gs="industrialist_current_save_id";let wl=null;const Ji=()=>new Promise((e,t)=>{if(wl){e(wl);return}const n=indexedDB.open(uV,lV);n.onerror=()=>{console.error("IndexedDB failed to open:",n.error),t(n.error)},n.onsuccess=()=>{wl=n.result,e(wl)},n.onupgradeneeded=i=>{const a=i.target.result;if(!a.objectStoreNames.contains(_r)){const s=a.createObjectStore(_r,{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("name","name",{unique:!1})}}}),SE=async()=>{try{const e=await Ji();return new Promise((t,n)=>{const s=e.transaction([_r],"readonly").objectStore(_r).getAll();s.onsuccess=()=>{const u=s.result,l={};u.forEach(d=>{l[d.id]=d}),t(l)},s.onerror=()=>{console.error("Error getting saves:",s.error),n(s.error)}})}catch(e){return console.error("Error accessing IndexedDB:",e),{}}},cV=async(e,t)=>{var n;try{const i=await Ji(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return new Promise((u,l)=>{const m=i.transaction([_r],"readwrite").objectStore(_r).add(s);m.onsuccess=()=>{localStorage.setItem(Gs,a),u(s)},m.onerror=()=>{console.error("Error saving canvas:",m.error),l(m.error)}})}catch(i){return console.error("Error saving to IndexedDB:",i),null}},dV=async e=>{try{const t=await Ji();return new Promise((n,i)=>{const u=t.transaction([_r],"readonly").objectStore(_r).get(e);u.onsuccess=()=>{const l=u.result;l?(localStorage.setItem(Gs,e),n(l.data)):n(null)},u.onerror=()=>{console.error("Error loading save:",u.error),i(u.error)}})}catch(t){return console.error("Error loading from IndexedDB:",t),null}},pV=async e=>{try{const t=await Ji();return new Promise((n,i)=>{const u=t.transaction([_r],"readwrite").objectStore(_r).delete(e);u.onsuccess=()=>{localStorage.getItem(Gs)===e&&localStorage.removeItem(Gs),n(!0)},u.onerror=()=>{console.error("Error deleting save:",u.error),i(u.error)}})}catch(t){return console.error("Error deleting from IndexedDB:",t),!1}},fV=async(e,t)=>{try{const n=await Ji();return new Promise((i,a)=>{const u=n.transaction([_r],"readwrite").objectStore(_r),l=u.get(e);l.onsuccess=()=>{const d=l.result;if(d){d.name=t;const p=u.put(d);p.onsuccess=()=>i(!0),p.onerror=()=>{console.error("Error updating save:",p.error),a(p.error)}}else i(!1)},l.onerror=()=>{console.error("Error getting save for rename:",l.error),a(l.error)}})}catch(n){return console.error("Error renaming in IndexedDB:",n),!1}},_V=async()=>{try{const e=localStorage.getItem(Gs);if(!e)return"Untitled";const t=await Ji();return new Promise(n=>{const s=t.transaction([_r],"readonly").objectStore(_r).get(e);s.onsuccess=()=>{const u=s.result;n((u==null?void 0:u.name)||"Untitled")},s.onerror=()=>{console.error("Error getting current save name:",s.error),n("Untitled")}})}catch{return"Untitled"}},mV=async()=>{const e="industrialist_saves";try{const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t),i=Object.keys(n);if(i.length===0){localStorage.removeItem(e);return}const a=await Ji(),s=await SE();if(Object.keys(s).length>0){localStorage.removeItem(e);return}for(const u of i){const l=n[u];await new Promise((d,p)=>{const h=a.transaction([_r],"readwrite").objectStore(_r).add(l);h.onsuccess=()=>d(),h.onerror=()=>{console.error(`Error migrating save ${u}:`,h.error),d()}})}localStorage.removeItem(e),console.log(`Migrated ${i.length} saves from localStorage to IndexedDB`)}catch(t){console.error("Error during migration:",t)}},hV=async()=>{try{await Ji(),await mV()}catch(e){console.error("Failed to initialize save system:",e)}},yV=({onClose:e,onLoad:t,currentCanvas:n,onImport:i,onExportCanvas:a})=>{const[s,u]=A.useState({}),[l,d]=A.useState(""),[p,m]=A.useState(null),[_,h]=A.useState(""),[g,x]=A.useState(null),[q,w]=A.useState("Untitled"),[b,C]=A.useState(!0),[S,M]=A.useState(!1);A.useEffect(()=>{I()},[]);const I=async()=>{C(!0);try{const j=await SE();u(j);const U=localStorage.getItem("industrialist_current_save_id");x(U);const H=await _V();w(H)}catch(j){console.error("Error loading saves:",j)}finally{C(!1)}},E=async()=>{if(!l.trim()){alert("Please enter a name for your save");return}M(!0);try{const j=await cV(l.trim(),n);j?(d(""),await I(),alert(`Canvas saved as "${j.name}"`)):alert("Failed to save canvas")}catch(j){console.error("Error saving:",j),alert("Failed to save canvas")}finally{M(!1)}},N=async j=>{if(window.confirm("Load this save? Your current canvas will be replaced.")){C(!0);try{const U=await dV(j);U?(x(j),t(U),e()):alert("Failed to load save")}catch(U){console.error("Error loading:",U),alert("Failed to load save")}finally{C(!1)}}},R=async j=>{const U=s[j];if(window.confirm(`Delete save "${U.name}"? This cannot be undone.`))try{await pV(j)?await I():alert("Failed to delete save")}catch(H){console.error("Error deleting:",H),alert("Failed to delete save")}},P=j=>{m(j),h(s[j].name)},D=async j=>{if(!_.trim()){alert("Name cannot be empty");return}try{await fV(j,_.trim())?(await I(),m(null),h("")):alert("Failed to rename save")}catch(U){console.error("Error renaming:",U),alert("Failed to rename save")}},F=()=>{m(null),h("")},O=j=>new Date(j).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),Q=Object.values(s).sort((j,U)=>U.timestamp-j.timestamp);return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Save Manager"}),f.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:q})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[f.jsx("input",{type:"text",value:l,onChange:j=>d(j.target.value),onKeyPress:j=>j.key==="Enter"&&E(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),f.jsx("button",{onClick:E,className:"btn btn-primary",style:{minWidth:"120px"},disabled:S,children:S?"Saving...":"Save Current"})]}),f.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("button",{onClick:()=>{i&&i()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),f.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[f.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",Q.length,")"]}),b?f.jsx("div",{className:"empty-state",children:"Loading saves..."}):Q.length===0?f.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Q.map(j=>f.jsxs("div",{style:{padding:"15px",background:g===j.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:g===j.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[p===j.id?f.jsx("div",{style:{marginBottom:"10px"},children:f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("input",{type:"text",value:_,onChange:U=>h(U.target.value),onKeyPress:U=>{U.key==="Enter"&&D(j.id),U.key==="Escape"&&F()},className:"input",style:{flex:1},autoFocus:!0}),f.jsx("button",{onClick:()=>D(j.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:F,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[j.name,g===j.id&&f.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[O(j.timestamp),"  ",j.nodeCount," nodes"]})]})}),p!==j.id&&f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("button",{onClick:()=>N(j.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),f.jsx("button",{onClick:()=>P(j.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),f.jsx("button",{onClick:()=>R(j.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},j.id))})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},gV=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],vV=({recipe:e,onClose:t,onSave:n,availableProducts:i,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var E,N,R;const l=!u&&gV.includes(e.id),d=!u&&(((E=e.inputs)==null?void 0:E.some(P=>P.product_id==="p_variableproduct"))||((N=e.outputs)==null?void 0:N.some(P=>P.product_id==="p_variableproduct"))),[p,m]=A.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),_=(P,D)=>{m(F=>({...F,[P]:D}))},h=(P,D,F)=>{const O=[...p.inputs];O[P]={...O[P],[D]:F},m(Q=>({...Q,inputs:O}))},g=(P,D,F)=>{const O=[...p.outputs];O[P]={...O[P],[D]:F},m(Q=>({...Q,outputs:O}))},x=()=>{const P=[...p.inputs,{product_id:"",quantity:1}];m(D=>({...D,inputs:P}))},q=P=>{const D=p.inputs.filter((F,O)=>O!==P);m(F=>({...F,inputs:D}))},w=()=>{const P=[...p.outputs,{product_id:"",quantity:1}];m(D=>({...D,outputs:P}))},b=P=>{const D=p.outputs.filter((F,O)=>O!==P);m(F=>({...F,outputs:D}))},C=P=>{const F=`r_${P.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,O=s.filter(j=>j.id.startsWith(F)).map(j=>{const U=j.id.match(/_(\d+)$/);return U?parseInt(U[1]):0});let Q=1;for(;O.includes(Q);)Q++;return`${F}${String(Q).padStart(2,"0")}`},S=()=>{if(u){if(!p.name||!p.name.trim())return alert("Recipe name is required"),!1;if(!p.machine_id)return alert("Machine is required"),!1;if(!a.find(U=>U.id===p.machine_id))return alert("Selected machine does not exist"),!1}const D=[...p.inputs.map(j=>j.product_id),...p.outputs.map(j=>j.product_id)].filter(j=>j&&j!=="p_variableproduct"&&j!=="p_any_fluid"&&j!=="p_any_item"&&!i.find(U=>U.id===j));if(D.length>0)return alert(`Invalid product IDs: ${D.join(", ")}`),!1;const F=p.inputs.some(j=>!j.product_id),O=p.outputs.some(j=>!j.product_id);return F||O?(alert("All inputs and outputs must have a product selected"),!1):typeof p.cycle_time=="number"&&p.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((p.inputs.some(j=>j.quantity==="Variable")||p.outputs.some(j=>j.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},M=()=>{if(!S())return;let P={...p};if(u){const D=a.find(F=>F.id===p.machine_id);P.id=C(D.name)}n(P),t()},I=a.find(P=>P.id===e.machine_id);return l||d?f.jsx("div",{className:"modal-overlay",onClick:t,children:f.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"600px"},children:[f.jsx("h2",{className:"modal-title",children:l?"Special Recipe":"Variable Product Recipe"}),f.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:l?f.jsxs(f.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",f.jsx("br",{}),f.jsx("br",{}),"Special recipes include:",f.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[f.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),f.jsx("li",{children:"Logic Assembler (microchip stages)"}),f.jsx("li",{children:"Tree Farm (layout configuration)"}),f.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),f.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):f.jsx(f.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),f.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):f.jsx("div",{className:"modal-overlay",onClick:t,children:f.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[f.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),f.jsx("input",{type:"text",value:p.name,onChange:P=>_("name",P.target.value),placeholder:"Enter recipe name",className:"input"})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?f.jsxs("select",{value:p.machine_id,onChange:P=>_("machine_id",P.target.value),className:"select",children:[f.jsx("option",{value:"",children:"Select a machine"}),a.sort((P,D)=>P.name.localeCompare(D.name)).map(P=>f.jsxs("option",{value:P.id,children:[P.name," (Tier ",P.tier||1,")"]},P.id))]}):f.jsx("div",{style:{color:(I==null?void 0:I.tier)===1?"var(--tier-1-color)":(I==null?void 0:I.tier)===2?"var(--tier-2-color)":(I==null?void 0:I.tier)===3?"var(--tier-3-color)":(I==null?void 0:I.tier)===4?"var(--tier-4-color)":(I==null?void 0:I.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(I==null?void 0:I.name)||e.machine_id}),u&&p.machine_id&&f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",C(((R=a.find(P=>P.id===p.machine_id))==null?void 0:R.name)||"")]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:p.cycle_time==="Variable"?"":p.cycle_time,onChange:P=>_("cycle_time",parseFloat(P.target.value)),placeholder:p.cycle_time==="Variable"?"Variable":"",className:"input",disabled:p.cycle_time==="Variable",title:p.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),f.jsx("input",{type:"number",step:"1000",value:typeof p.power_consumption=="number"?p.power_consumption:"",onChange:P=>_("power_consumption",parseFloat(P.target.value)),placeholder:"Variable",className:"input"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),f.jsxs("select",{value:p.power_type||"MV",onChange:P=>_("power_type",P.target.value),className:"select",children:[f.jsx("option",{value:"LV",children:"LV"}),f.jsx("option",{value:"MV",children:"MV"}),f.jsx("option",{value:"HV",children:"HV"})]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),f.jsx("input",{type:"number",step:"0.1",value:p.pollution,onChange:P=>_("pollution",parseFloat(P.target.value)),className:"input"})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[f.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),f.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),p.inputs.map((P,D)=>f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[f.jsxs("select",{value:P.product_id,onChange:F=>h(D,"product_id",F.target.value),className:"select",style:{flex:2},children:[f.jsx("option",{value:"",children:"Select Product"}),[...i].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,O)=>F.name.localeCompare(O.name)).map(F=>f.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>h(D,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),f.jsx("button",{onClick:()=>q(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.inputs.length===0&&f.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[f.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),f.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),p.outputs.map((P,D)=>f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[f.jsxs("select",{value:P.product_id,onChange:F=>g(D,"product_id",F.target.value),className:"select",style:{flex:2},children:[f.jsx("option",{value:"",children:"Select Product"}),[...i].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,O)=>F.name.localeCompare(O.name)).map(F=>f.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>g(D,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),f.jsx("button",{onClick:()=>b(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.outputs.length===0&&f.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},tc="industrialist_custom_products",rc="industrialist_custom_machines",nc="industrialist_custom_recipes",xV=(e,t,n)=>{localStorage.getItem(tc)||localStorage.setItem(tc,JSON.stringify(e)),localStorage.getItem(rc)||localStorage.setItem(rc,JSON.stringify(t)),localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(n))},Fa=()=>{try{const e=localStorage.getItem(tc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Oa=()=>{try{const e=localStorage.getItem(rc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},ou=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Ks=e=>{try{return localStorage.setItem(tc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Ys=e=>{try{return localStorage.setItem(rc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},Qs=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},mw=(e,t)=>{const n=Fa(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Ks(n)):!1},hw=(e,t)=>{const n=Oa(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Ys(n)):!1},wV=(e,t)=>{const n=ou(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Qs(n)):!1},bV=e=>Ks(e),qV=e=>Ys(e),SV=e=>Qs(e),CV=(e,t,n)=>{const i={};return e&&(i.products=Fa()),t&&(i.machines=Oa()),n&&(i.recipes=ou()),i},kV=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=Fa(),i=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Ks(a)&&(t.products=e.products.length)}if(e.machines){const n=Oa(),i=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Ys(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=ou(),i=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Qs(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},bl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,Sr=e=>typeof e!="number"?e:e>=1e9?bl(e/1e9)+"B":e>=1e6?bl(e/1e6)+"M":e>=1e3?bl(e/1e3)+"k":bl(e),Vp=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,MV=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return Mn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const l=a.inputs.some(p=>p.product_id===e&&p.product_id!=="p_variableproduct"),d=t.includes(e)&&n.includes(a.id)&&a.inputs.some(p=>p.product_id==="p_variableproduct");return l||d||u})},EV=e=>Mn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),ql=e=>{const t=Mn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[R0]:e==="m_liquid_dump"?[O0]:e==="m_liquid_burner"?[L0]:t},CE=(e,t,n,i,a=Wr)=>{const s=(i==null?void 0:i.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const l=Math.max(t,a),d=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return l<s?{...u,temperature:l,quantity:0,originalQuantity:d}:{...u,temperature:l,quantity:d,originalQuantity:d}}return u}if(oE(u.product_id)){const l=Math.max(t,a);return{...u,temperature:l}}return u})},qs=(e,t)=>{let n={...e};const i=fr[t];if(i){const s=d3(t),u=i.type==="boiler",l=u?Qi:Wr,d=u?{...s,coolantTemp:Qi}:s;let p=null;if(i.type==="product_dependent"&&e.inputs){const h=e.inputs.find(g=>["p_water","p_filtered_water","p_distilled_water"].includes(g.product_id));p=(h==null?void 0:h.product_id)||null}const m=_g(t,d,l,p,u?Qi:null),_=CE(e.outputs,m,u,i,l);n={...n,outputs:_,temperatureSettings:d}}if(Gr(t)){const s=sn[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:In})}return n},IV=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:i,onDataChange:a})=>{const[s,u]=A.useState("products"),[l,d]=A.useState(""),[p,m]=A.useState(!0),[_,h]=A.useState(!0),[g,x]=A.useState(!0),q=A.useRef(null),w=()=>{const S=CV(p,_,g),M=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),I=URL.createObjectURL(M),E=document.createElement("a");E.href=I,E.download=`industrialist-data-${Date.now()}.json`,E.click(),URL.revokeObjectURL(I)},b=()=>{var S;(S=q.current)==null||S.click()},C=S=>{var E;const M=(E=S.target.files)==null?void 0:E[0];if(!M)return;const I=new FileReader;I.onload=N=>{try{const R=JSON.parse(N.target.result),P=R.products||R.machines||R.recipes,D=R.canvas;if(!P&&D){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),S.target.value="";return}if(!P){alert("This file does not contain any game data (products, machines, or recipes)."),S.target.value="";return}if(D&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){S.target.value="";return}const F=kV(R);let O=`Import complete:
`;F.products>0&&(O+=`- ${F.products} products imported/updated
`),F.machines>0&&(O+=`- ${F.machines} machines imported/updated
`),F.recipes>0&&(O+=`- ${F.recipes} recipes imported/updated
`),F.errors.length>0&&(O+=`
Errors: ${F.errors.join(", ")}`),alert(O),a()}catch(R){alert(`Import failed: ${R.message}`)}},I.readAsText(M),S.target.value=""};return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[f.jsx("h2",{className:"modal-title",children:"Data Manager"}),f.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[f.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),f.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:p,onChange:S=>m(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:_,onChange:S=>h(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:g,onChange:S=>x(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),f.jsx("button",{onClick:w,className:"btn btn-primary",children:"Export Data"})]})]}),f.jsx("input",{ref:q,type:"file",accept:".json",style:{display:"none"},onChange:C})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[f.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),f.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),f.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:l,onChange:S=>d(S.target.value),className:"input"})}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&f.jsx(TV,{searchTerm:l,defaultProducts:t,onDataChange:a}),s==="machines"&&f.jsx(NV,{searchTerm:l,defaultMachines:n,onDataChange:a}),s==="recipes"&&f.jsx(jV,{searchTerm:l,defaultRecipes:i,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},TV=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[_,h]=A.useState({name:"",type:"item",price:0,rp_multiplier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Fa())},x=i.filter(E=>E.name.toLowerCase().includes(e.toLowerCase())||E.id.toLowerCase().includes(e.toLowerCase())).sort((E,N)=>E.name.localeCompare(N.name)),q=E=>{u(E.id),d({price:E.price==="Variable"?"":E.price,rp_multiplier:E.rp_multiplier==="Variable"?"":E.rp_multiplier,type:E.type})},w=E=>{const N={price:l.price===""?"Variable":parseFloat(l.price),rp_multiplier:l.rp_multiplier===""?"Variable":parseFloat(l.rp_multiplier),type:l.type};mw(E,N)?(g(),n(),u(null)):alert("Failed to update product")},b=()=>{u(null),d({})},C=E=>{const N=t.find(P=>P.id===E);if(!N){alert("Default product not found");return}const R={price:N.price,rp_multiplier:N.rp_multiplier,type:N.type};mw(E,R)?(g(),n()):alert("Failed to reset product to default")},S=E=>"p_"+E.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!_.name.trim()){alert("Product name is required");return}const E=S(_.name);if(i.find(P=>P.id===E)){alert(`Product ID "${E}" already exists. Please use a different name.`);return}const N={id:E,name:_.name.trim(),type:_.type,price:parseFloat(_.price)||0,rp_multiplier:parseFloat(_.rp_multiplier)||1},R=[...i,N];Ks(R)?(g(),n(),m(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},I=E=>{var R;if(!window.confirm(`Delete product "${(R=i.find(P=>P.id===E))==null?void 0:R.name}"? This cannot be undone.`))return;const N=i.filter(P=>P.id!==E);Ks(N)?(g(),n()):alert("Failed to delete product")};return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Product"})}),p&&f.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),f.jsx("input",{type:"text",value:_.name,onChange:E=>h({..._,name:E.target.value}),className:"input",placeholder:"Product name"}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",_.name?S(_.name):"p_..."]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),f.jsxs("select",{value:_.type,onChange:E=>h({..._,type:E.target.value}),className:"select",children:[f.jsx("option",{value:"item",children:"Item"}),f.jsx("option",{value:"fluid",children:"Fluid"})]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),f.jsx("input",{type:"number",value:_.price,onChange:E=>h({..._,price:E.target.value}),className:"input",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),f.jsx("input",{type:"number",step:"0.1",value:_.rp_multiplier,onChange:E=>h({..._,rp_multiplier:E.target.value}),className:"input",placeholder:"1"})]})]}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Product Name"}),f.jsx("div",{children:"Type"}),f.jsx("div",{children:"Price"}),f.jsx("div",{children:"RP Mult"}),f.jsx("div",{children:"Actions"})]}),x.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name}),s===E.id?f.jsxs(f.Fragment,{children:[f.jsxs("select",{value:l.type,onChange:N=>d({...l,type:N.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[f.jsx("option",{value:"item",children:"Item"}),f.jsx("option",{value:"fluid",children:"Fluid"})]}),f.jsx("input",{type:"number",value:l.price,onChange:N=>d({...l,price:N.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:E.price==="Variable",title:E.price==="Variable"?"Cannot edit Variable values":""}),f.jsx("input",{type:"number",value:l.rp_multiplier,onChange:N=>d({...l,rp_multiplier:N.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:E.rp_multiplier==="Variable",title:E.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>w(E.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),f.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.type}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.price==="Variable"?"Variable":`$${Sr(E.price)}`}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.rp_multiplier==="Variable"?"Variable":`${E.rp_multiplier>=1e3?Sr(E.rp_multiplier):E.rp_multiplier}x`}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>q(E),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>C(E.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),f.jsx("button",{onClick:()=>I(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},E.id))]})},NV=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[_,h]=A.useState({name:"",cost:0,tier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Oa())},x=i.filter(E=>E.name.toLowerCase().includes(e.toLowerCase())||E.id.toLowerCase().includes(e.toLowerCase())).sort((E,N)=>E.name.localeCompare(N.name)),q=E=>{u(E.id),d({cost:E.cost,tier:E.tier||1})},w=E=>{const N={cost:parseFloat(l.cost),tier:parseInt(l.tier)};hw(E,N)?(g(),n(),u(null)):alert("Failed to update machine")},b=()=>{u(null),d({})},C=E=>{const N=t.find(P=>P.id===E);if(!N){alert("Default machine not found");return}const R={cost:N.cost,tier:N.tier};hw(E,R)?(g(),n()):alert("Failed to reset machine to default")},S=E=>"m_"+E.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!_.name.trim()){alert("Machine name is required");return}const E=S(_.name);if(i.find(P=>P.id===E)){alert(`Machine ID "${E}" already exists. Please use a different name.`);return}const N={id:E,name:_.name.trim(),cost:parseFloat(_.cost)||0,tier:parseInt(_.tier)||1},R=[...i,N];Ys(R)?(g(),n(),m(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},I=E=>{var R;if(!window.confirm(`Delete machine "${(R=i.find(P=>P.id===E))==null?void 0:R.name}"? This cannot be undone.`))return;const N=i.filter(P=>P.id!==E);Ys(N)?(g(),n()):alert("Failed to delete machine")};return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Machine"})}),p&&f.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[f.jsxs("div",{style:{gridColumn:"1 / -1"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),f.jsx("input",{type:"text",value:_.name,onChange:E=>h({..._,name:E.target.value}),className:"input",placeholder:"Machine name"}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",_.name?S(_.name):"m_..."]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),f.jsx("input",{type:"number",value:_.cost,onChange:E=>h({..._,cost:E.target.value}),className:"input",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),f.jsxs("select",{value:_.tier,onChange:E=>h({..._,tier:E.target.value}),className:"select",children:[f.jsx("option",{value:"1",children:"Tier 1"}),f.jsx("option",{value:"2",children:"Tier 2"}),f.jsx("option",{value:"3",children:"Tier 3"}),f.jsx("option",{value:"4",children:"Tier 4"}),f.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Machine Name"}),f.jsx("div",{children:"Cost"}),f.jsx("div",{children:"Tier"}),f.jsx("div",{children:"Actions"})]}),x.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name}),s===E.id?f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"number",value:l.cost,onChange:N=>d({...l,cost:N.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),f.jsx("input",{type:"number",min:"1",max:"5",value:l.tier,onChange:N=>d({...l,tier:N.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>w(E.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),f.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",Sr(E.cost)]}),f.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",E.tier||1]}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>q(E),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>C(E.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),f.jsx("button",{onClick:()=>I(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},E.id))]})},jV=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:i,onDataChange:a})=>{const[s,u]=A.useState([]),[l,d]=A.useState([]),[p,m]=A.useState([]),[_,h]=A.useState(null),[g,x]=A.useState(!1);A.useEffect(()=>{q(),w(),b()},[]);const q=()=>{u(ou())},w=()=>{d(Fa())},b=()=>{m(Oa())},C=(E,N=!1)=>{if(N){const R=[...s,E];Qs(R)?(q(),w(),b(),a()):alert("Failed to create recipe")}else wV(E.id,E)?(q(),w(),b(),a()):alert("Failed to save recipe")},S=E=>{var R;if(!window.confirm(`Delete recipe "${((R=s.find(P=>P.id===E))==null?void 0:R.name)||E}"? This cannot be undone.`))return;const N=s.filter(P=>P.id!==E);Qs(N)?(q(),w(),b(),a()):alert("Failed to delete recipe")},M=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),x(!0)},I=s.filter(E=>{var N;return((N=E.name)==null?void 0:N.toLowerCase().includes(e.toLowerCase()))||E.id.toLowerCase().includes(e.toLowerCase())}).sort((E,N)=>{const R=E.name||E.id,P=N.name||N.id;return R.localeCompare(P)});return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Recipe Name"}),f.jsx("div",{children:"Machine"}),f.jsx("div",{children:"Cycle Time"}),f.jsx("div",{children:"Power"}),f.jsx("div",{children:"Actions"})]}),I.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name||E.id}),f.jsx("div",{style:{color:(()=>{const N=p.find(R=>R.id===E.machine_id);if(!N)return"var(--text-secondary)";switch(N.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const N=p.find(R=>R.id===E.machine_id);return N?N.name:E.machine_id})()}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof E.cycle_time=="number"?`${E.cycle_time}s`:String(E.cycle_time)}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof E.power_consumption=="number"?`${Sr(E.power_consumption)}W`:typeof E.power_consumption=="object"&&E.power_consumption!==null?`${Sr(E.power_consumption.max||E.power_consumption.average||0)}W`:String(E.power_consumption)}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>{h(E),x(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>S(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},E.id)),_&&f.jsx(vV,{recipe:_,onClose:()=>{h(null),x(!1)},onSave:E=>C(E,g),availableProducts:l,defaultMachines:p,allRecipes:s,isCreatingNew:g})]})},Vs=(e,t)=>{var s,u,l,d,p,m;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},i=e.length;for(let _=0;_<i;_++){const h=e[_],g=h.id,x=(s=h.data)==null?void 0:s.recipe,q=((u=h.data)==null?void 0:u.machineCount)||0,w=(l=h.data)==null?void 0:l.machine;if(!x)return;const b=x.isMineshaftDrill||x.id==="r_mineshaft_drill",C=x.isLogicAssembler||x.id==="r_logic_assembler",S=x.isTreeFarm||x.id==="r_tree_farm",M=w&&w.id==="m_industrial_firebox",I=w&&Gr(w.id),E=b||C||S||M||I;let N=x.cycle_time;if(N==="Variable"||typeof N!="number"||N<=0){if(!E)return;N=1}const R=w&&Gr(w.id),P=R?sn[w.id]:null;if(R&&(P==null?void 0:P.type)==="steam_input"&&!(w.id==="m_steam_cracking_plant"&&!gi(x))){const O=x.tempDependentInputTemp??In;N=Un(w.id,O,N)}const D={id:g,recipe:x,machineCount:q,cycleTime:N,isSpecialRecipe:E,isMineshaftDrill:b,isLogicAssembler:C,isTempDependent:R,machineCountMode:((d=h.data)==null?void 0:d.machineCountMode)||"free",cappedMachineCount:(p=h.data)==null?void 0:p.cappedMachineCount,inputs:[],outputs:[]};(m=x.inputs)==null||m.forEach((O,Q)=>{const j=O.product_id;if(j==="p_variableproduct")return;const U=typeof O.quantity=="number"?O.quantity:0;if(O.quantity==="Variable"&&!E)return;const H=b?U*q:U/N*q,te=D.inputs.length;D.inputs.push({productId:j,quantity:U,rate:H,index:te,recipeIndex:Q,connectedRate:0,temperature:null}),n.products[j]||(n.products[j]={producers:[],consumers:[],connections:[]}),n.products[j].consumers.push({nodeId:g,inputIndex:te,rate:H})});const F=x.outputs;F==null||F.forEach((O,Q)=>{const j=O.product_id;if(j==="p_variableproduct")return;const U=typeof O.quantity=="number"?O.quantity:0;if(O.quantity==="Variable"&&!E)return;const H=b?U*q:U/N*q,te=D.outputs.length;D.outputs.push({productId:j,quantity:U,rate:H,index:te,recipeIndex:Q,connectedRate:0,temperature:O.temperature||null}),n.products[j]||(n.products[j]={producers:[],consumers:[],connections:[]}),n.products[j].producers.push({nodeId:g,outputIndex:te,rate:H})}),n.nodes[g]=D}const a=t.length;for(let _=0;_<a;_++){const h=t[_],g=n.nodes[h.source],x=n.nodes[h.target];if(!g||!x)continue;const q=parseInt(h.sourceHandle.split("-")[1]),w=parseInt(h.targetHandle.split("-")[1]),b=g.outputs.find(I=>I.recipeIndex===q),C=x.inputs.find(I=>I.recipeIndex===w);if(!b||!C||b.productId!==C.productId)return;const S=b.productId;b.temperature!==void 0&&b.temperature!==null&&(C.temperature=b.temperature);const M={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:b.index,targetInputIndex:C.index,productId:S,sourceRate:b.rate,targetRate:C.rate,flowRate:0,temperature:b.temperature||null};n.connections.push(M),n.products[S]&&n.products[S].connections.push(M)}return n};class PV{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}}let z0=new PV(100);class RV{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const i=this.find(t),a=this.find(n);i!==a&&(this.rank[i]<this.rank[a]?this.parent[i]=a:this.rank[i]>this.rank[a]?this.parent[a]=i:(this.parent[a]=i,this.rank[i]++))}}const VV=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const i=[],a=new Map;n.producers.forEach(m=>{const _=`out:${m.nodeId}:${m.outputIndex}`;a.has(_)||(a.set(_,i.length),i.push({type:"output",nodeId:m.nodeId,index:m.outputIndex,rate:m.rate}))}),n.consumers.forEach(m=>{const _=`in:${m.nodeId}:${m.inputIndex}`;a.has(_)||(a.set(_,i.length),i.push({type:"input",nodeId:m.nodeId,index:m.inputIndex,rate:m.rate}))});const s=new RV(i.length);n.connections.forEach(m=>{const _=`out:${m.sourceNodeId}:${m.sourceOutputIndex}`,h=`in:${m.targetNodeId}:${m.targetInputIndex}`,g=a.get(_),x=a.get(h);g!==void 0&&x!==void 0&&s.union(g,x)});const u=new Map;for(let m=0;m<i.length;m++){const _=s.find(m);u.has(_)||u.set(_,[]),u.get(_).push(m)}const l=[],d=new Map;let p=0;return u.forEach((m,_)=>{const h={id:p,ports:m.map(g=>i[g]),connections:[]};n.connections.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=a.get(x);q!==void 0&&s.find(q)===_&&h.connections.push(g)}),m.forEach(g=>{const x=i[g],q=x.type==="output"?`out:${x.nodeId}:${x.index}`:`in:${x.nodeId}:${x.index}`;d.set(q,p)}),l.push(h),p++}),{components:l,portToComponent:d,ports:i,portToIndex:a}},FV=e=>{const t=e.ports.map(i=>`${i.type}:${i.nodeId}:${i.index}:${i.rate}`).sort().join("|"),n=e.connections.map(i=>`${i.sourceNodeId}:${i.sourceOutputIndex}->${i.targetNodeId}:${i.targetInputIndex}`).sort().join("|");return`${t}##${n}`},OV=(e,t,n)=>{const i=kE(e,t),a=ME(e,t),s={totalProduction:i,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:l}=VV(e,t);return u.forEach(d=>{if(d.connections.length===0)return;const p=FV(d),m=`${t}:comp${d.id}`,_=z0.get(m);let h;if(_&&_.hash===p)h=JSON.parse(JSON.stringify(_.result));else{const g=LV(d.connections,i),x=BV(g);h={connectedFlow:0,connections:{}},d.connections.forEach((w,b)=>{const C=x.connectionFlows[b]||0;h.connections[w.id]={flowRate:C,supplyRatio:w.sourceRate>0?C/w.sourceRate:0,demandRatio:w.targetRate>0?C/w.targetRate:0},h.connectedFlow+=C});const q=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});z0.set(m,{hash:p,result:q})}Object.assign(s.connections,h.connections),s.connectedFlow+=h.connectedFlow}),s},AV=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,LV=(e,t)=>{const n=new Map;let i=0;const a=g=>{let x=n.get(g);return x===void 0&&(x=i++,n.set(g,x)),x},s=a("virtual-source"),u=a("virtual-sink"),l=new Map,d=new Map;e.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=`in:${g.targetNodeId}:${g.targetInputIndex}`;a(x),a(q),l.has(x)||l.set(x,g.sourceRate),d.has(q)||d.set(q,g.targetRate)});const p=Array.from({length:i},()=>[]),m=[],_=t||1e6,h=(g,x,q,w=-1)=>{const b=m.length,C=m.length+1;m.push({to:x,cap:q,flow:0,rev:C,connIndex:w}),m.push({to:g,cap:0,flow:0,rev:b,connIndex:-1}),p[g].push(b),p[x].push(C)};return l.forEach((g,x)=>{h(s,a(x),g)}),d.forEach((g,x)=>{h(a(x),u,g)}),e.forEach((g,x)=>{const q=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,w=`in:${g.targetNodeId}:${g.targetInputIndex}`,b=a(q),C=a(w);h(b,C,_,x)}),{adj:p,edges:m,nodeCount:i,SOURCE:s,SINK:u}};class DV{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const BV=e=>{const{adj:t,edges:n,nodeCount:i,SOURCE:a,SINK:s}=e,u=new Int32Array(i),l=new Int32Array(i),d=new DV(i),p=()=>{for(u.fill(-1),u[a]=0,d.clear(),d.push(a);!d.isEmpty();){const w=d.shift(),b=t[w],C=b.length;for(let S=0;S<C;S++){const M=n[b[S]],I=M.cap-M.flow;u[M.to]<0&&I>1e-15&&(u[M.to]=u[w]+1,d.push(M.to))}}return u[s]>=0},m=()=>{const w=[a],b=new Int32Array(i).fill(-1),C=new Uint8Array(i);for(C[a]=1;w.length>0;){const S=w[w.length-1];if(S===s){let E=1e15,N=s;for(;N!==a;){const R=b[N],P=n[R],D=P.cap-P.flow;E=Math.min(E,D);let F=!1;for(let O=0;O<i;O++){const Q=t[O];for(let j=0;j<Q.length;j++)if(Q[j]===R){N=O,F=!0;break}if(F)break}}for(N=s;N!==a;){const R=b[N];n[R].flow+=E,n[n[R].rev].flow-=E;let P=!1;for(let D=0;D<i;D++){const F=t[D];for(let O=0;O<F.length;O++)if(F[O]===R){N=D,P=!0;break}if(P)break}}return E}let M=!1;const I=t[S];for(let E=l[S];E<I.length;E++){const N=I[E],R=n[N],P=R.cap-R.flow;if(u[S]+1===u[R.to]&&P>1e-15&&!C[R.to]){C[R.to]=1,b[R.to]=N,w.push(R.to),l[S]=E,M=!0;break}}M||(w.pop(),l[S]=I.length)}return 0};let _=0,h=0;const g=1e5;for(;p()&&h++<g;)for(l.fill(0);;){const w=m();if(w===0)break;_+=w}const x=[],q=n.length;for(let w=0;w<q;w++){const b=n[w];b.connIndex>=0&&(x[b.connIndex]=AV(b.flow))}return{totalFlow:_,connectionFlows:x}},Fp=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const i=e.nodes[n];t.byNode[n]={inputFlows:i.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:i.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:kE(e,n),totalConsumption:ME(e,n),connectedFlow:0};return}const s=OV(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const l=s.connections[u.id];if(l){t.byConnection[u.id]=l;const d=t.byNode[u.sourceNodeId];d&&(d.outputFlows[u.sourceOutputIndex].connected+=l.flowRate,d.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const p=t.byNode[u.targetNodeId];p&&(p.inputFlows[u.targetInputIndex].connected+=l.flowRate,p.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},kE=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((i,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return i+u.rate},0):0},ME=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((i,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return i+u.rate},0):0},Sn=()=>{z0.clear()},Hn=1e-10,zV=(e,t,n,i)=>{var m,_;const a=new Map,s=new Set,u=(m=e.nodes[n])==null?void 0:m.inputs[i];if(!u)return a;const l=u.productId;if(!e.products[l])return a;const p=[{nodeId:n,inputIndex:i,productId:l}];for(s.add(`${n}:${i}`);p.length>0;){const{nodeId:h,inputIndex:g,productId:x}=p.shift();(((_=e.products[x])==null?void 0:_.connections.filter(w=>w.targetNodeId===h&&w.targetInputIndex===g))||[]).forEach(w=>{var M,I;const b=e.nodes[w.sourceNodeId];if(!b)return;const C=`${w.sourceNodeId}:${w.sourceOutputIndex}`,S=(M=t.byNode[w.sourceNodeId])==null?void 0:M.outputFlows[w.sourceOutputIndex];if(S){a.set(C,{nodeId:w.sourceNodeId,outputIndex:w.sourceOutputIndex,maxFlow:S.produced});const E=b.outputs[w.sourceOutputIndex];if(!E)return;(((I=e.products[E.productId])==null?void 0:I.connections.filter(R=>R.sourceNodeId===w.sourceNodeId&&R.sourceOutputIndex===w.sourceOutputIndex))||[]).forEach(R=>{var F;if(R.targetNodeId===h&&R.targetInputIndex===g)return;const P=`${R.targetNodeId}:${R.targetInputIndex}`;if(s.has(P))return;s.add(P);const D=(F=e.nodes[R.targetNodeId])==null?void 0:F.inputs[R.targetInputIndex];D&&p.push({nodeId:R.targetNodeId,inputIndex:R.targetInputIndex,productId:D.productId})})}})}return a},$V=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];s&&a.inputs.forEach((u,l)=>{const d=s.inputFlows[l];if(!d)return;const p=d.needed-d.connected;if(p<=Hn)return;if(u.productId,zV(e,t,i,l).forEach((h,g)=>{var P;const x=e.nodes[h.nodeId];if(!x)return;const q=x.machineCount||0;if(q<=0)return;const w=x.machineCountMode||"free";if(w==="locked")return;let b=x.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const C=x.outputs[h.outputIndex];if(!C)return;const S=C.originalQuantity!==void 0?C.originalQuantity:C.quantity;if(typeof S!="number")return;const M=x.isMineshaftDrill?S:S/b;if(typeof M!="number"||M<=Hn)return;const I=(P=t.byNode[h.nodeId])==null?void 0:P.outputFlows[h.outputIndex];if(!I)return;const E=p/M;let N=q+E;if(w==="capped"&&x.cappedMachineCount&&(N=Math.min(N,x.cappedMachineCount),N<=q+Hn))return;const R=x.outputs.length>1&&x.outputs.some((D,F)=>{if(F===h.outputIndex)return!1;const O=e.products[D.productId];return!O||!O.connections.some(j=>j.sourceNodeId===h.nodeId&&j.sourceOutputIndex===F)?!1:O.connections.some(j=>j.sourceNodeId!==h.nodeId||j.sourceOutputIndex!==F?!1:O.connections.filter(H=>H.targetNodeId===j.targetNodeId&&H.targetInputIndex===j.targetInputIndex&&H.sourceNodeId!==h.nodeId).length===0)});n.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:C.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:I.produced,targetFlow:I.produced+p,deltaFlow:p,currentMachineCount:q,suggestedMachineCount:N,machineDelta:E,hasConstrainedOutputs:R,isMultiOutput:x.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const h=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof h=="number"&&h>Hn){const g=p/h,x=(a.machineCount||0)-g;x>Hn&&n.push({nodeId:i,handleType:"input",handleIndex:l,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:d.connected,targetFlow:d.connected,deltaFlow:-p,currentMachineCount:a.machineCount||0,suggestedMachineCount:x,machineDelta:-g})}}})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let l=a.cycleTime;(typeof l!="number"||l<=0)&&(l=1),a.outputs.forEach((d,p)=>{var S;const m=s.outputFlows[p];if(!m)return;const _=m.produced-m.connected;if(_<=Hn||(a.machineCountMode||"free")==="locked")return;const g=d.originalQuantity!==void 0?d.originalQuantity:d.quantity,x=a.isMineshaftDrill?g:g/l;if(typeof x!="number"||x<=Hn)return;const q=_/x,w=u-q;w>Hn&&n.push({nodeId:i,handleType:"output",handleIndex:p,productId:d.productId,adjustmentType:"decrease",reason:"excess",currentFlow:m.produced,targetFlow:m.produced-_,deltaFlow:-_,currentMachineCount:u,suggestedMachineCount:w,machineDelta:-q});const b=d.productId;(((S=e.products[b])==null?void 0:S.connections.filter(M=>M.sourceNodeId===i&&M.sourceOutputIndex===p))||[]).forEach(M=>{var Q,j,U,H;const I=e.nodes[M.targetNodeId];if(!I)return;const E=I.machineCount||0;if(E<=0)return;const N=I.machineCountMode||"free";if(N==="locked")return;let R=I.cycleTime;(typeof R!="number"||R<=0)&&(R=1);const P=I.inputs[M.targetInputIndex];if(!P)return;const D=I.isMineshaftDrill?P.quantity:P.quantity/R;if(typeof D!="number"||D<=Hn)return;const F=_/D;let O=E+F;N==="capped"&&I.cappedMachineCount&&(O=Math.min(O,I.cappedMachineCount),O<=E+Hn)||n.push({nodeId:M.targetNodeId,handleType:"input",handleIndex:M.targetInputIndex,productId:P.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((j=(Q=t.byNode[M.targetNodeId])==null?void 0:Q.inputFlows[M.targetInputIndex])==null?void 0:j.connected)||0,targetFlow:(((H=(U=t.byNode[M.targetNodeId])==null?void 0:U.inputFlows[M.targetInputIndex])==null?void 0:H.connected)||0)+_,deltaFlow:_,currentMachineCount:E,suggestedMachineCount:O,machineDelta:F})})})}),n.forEach(i=>{const a=Math.round(i.suggestedMachineCount*1e10)/1e10,s=Math.round(i.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;i.suggestedMachineCount=u?Math.round(i.suggestedMachineCount*1e20)/1e20:Math.round(i.suggestedMachineCount*1e10)/1e10;const l=Math.round(i.machineDelta*1e10)/1e10,d=Math.round(i.machineDelta*1e20)/1e20,p=Math.abs(d-l)>1e-12;i.machineDelta=p?Math.round(i.machineDelta*1e20)/1e20:Math.round(i.machineDelta*1e10)/1e10}),n},Sl=(e,t)=>{const n=[],i=[];Object.keys(e.products).forEach(u=>{const l=e.products[u],d=t.byProduct[u];if(!d)return;const p=d.totalProduction,m=d.connectedFlow,_=p-m;if(Math.abs(_)>1e-6&&_>0){const h=bt(u);h&&n.push({productId:u,product:h,excessRate:_,totalProduction:p,connectedConsumption:m,percentageExcess:p>0?_/p*100:0})}l.consumers.forEach(h=>{var x;const g=(x=t.byNode[h.nodeId])==null?void 0:x.inputFlows[h.inputIndex];if(g){const q=g.needed-g.connected;if(Math.abs(q)>1e-6&&q>0){const w=bt(u);if(w){let b=i.find(C=>C.productId===u);b?(b.deficiencyRate+=q,b.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q})):i.push({productId:u,product:w,deficiencyRate:q,totalConsumption:d.totalConsumption,connectedProduction:m,percentageDeficient:d.totalConsumption>0?q/d.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q}]})}}}})}),n.sort((u,l)=>l.excessRate-u.excessRate),i.sort((u,l)=>l.deficiencyRate-u.deficiencyRate);const s=n.length>0||i.length>0?$V(e,t):[];return{excess:n,deficiency:i,suggestions:s}},yw=(e,t,n={})=>{const{skipTemperature:i=!1,previousTemperatureData:a=null}=n,s=Vs(e,t),u=Fp(s);if(i){const C=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Sl(s,u),graph:s,flows:u,temperatureData:C}}if(!Object.values(s.nodes).some(C=>{const S=C.recipe.machine_id;return fr[S]||Gr(S)})){const C={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Sl(s,u),graph:s,flows:u,temperatureData:C}}const d=rw(s,u),p=I0(e,d,s);if(!p.some((C,S)=>{var F,O,Q,j,U,H,te,G;const M=e[S],I=(O=(F=M.data)==null?void 0:F.recipe)==null?void 0:O.tempDependentInputTemp,E=(j=(Q=C.data)==null?void 0:Q.recipe)==null?void 0:j.tempDependentInputTemp,N=(H=(U=M.data)==null?void 0:U.recipe)==null?void 0:H.outputs.map(Y=>Y.temperature).filter(Y=>Y!==void 0),R=(G=(te=C.data)==null?void 0:te.recipe)==null?void 0:G.outputs.map(Y=>Y.temperature).filter(Y=>Y!==void 0),P=Math.abs((I||0)-(E||0))>.1,D=N.length!==R.length||N.some((Y,oe)=>Math.abs((Y||0)-(R[oe]||0))>.1);return P||D}))return{...Sl(s,u),graph:s,flows:u,temperatureData:d};const _=Vs(p,t),h=Fp(_),g=rw(_,h),x=I0(p,g,_),q=Vs(x,t),w=Fp(q);return{...Sl(q,w),graph:q,flows:w,temperatureData:g}},HV=e=>e.excess||[],WV=e=>e.deficiency||[],UV=(e,t,n,i,a,s,u)=>{if(!n||!t)return 1;const l=t.data.recipe,d=t.data.machineCount||0,p=gt(l.machine_id);let m=l.cycle_time;if((typeof m!="number"||m<=0)&&(m=1),p&&Gr(p.id)){const w=sn[p.id];if((w==null?void 0:w.type)==="steam_input"&&(p.id!=="m_steam_cracking_plant"||gi(l))){const b=l.tempDependentInputTemp??In;m=Un(p.id,b,m)}}const _=EE(e,n,null,a,s,i);let h=_.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const g=gt(_.machine_id);if(g&&Gr(g.id)){const w=sn[g.id];if((w==null?void 0:w.type)==="steam_input"&&(g.id!=="m_steam_cracking_plant"||gi(_))){const b=_.tempDependentInputTemp??In;h=Un(g.id,b,h)}}let x=0,q=!1;if(u&&u.byNode&&u.byNode[t.id]){const w=u.byNode[t.id];if(n.isOutput){const b=w.outputFlows[n.outputIndex];if(b){q=!0;const C=b.produced-b.connected;x=Math.max(0,C)}}else{const b=w.inputFlows[n.inputIndex];if(b){q=!0;const C=b.needed-b.connected;x=Math.max(0,C)}}}if(q&&x===0)return 0;if(!q)if(n.isOutput){const w=l.outputs[n.outputIndex];if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;typeof b=="number"&&(x=b/m*d)}}else{const w=l.inputs[n.inputIndex];w&&typeof w.quantity=="number"&&(x=w.quantity/m*d)}if(n.isOutput){const w=_.inputs.find(b=>b.product_id===n.productId);if(w&&typeof w.quantity=="number"&&w.quantity>0){const b=w.quantity/h;return x/b}}else{const w=_.outputs.find(b=>b.product_id===n.productId);if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;if(typeof b=="number"&&b>0){const C=b/h;return x/C}}}return 1},EE=(e,t,n,i,a,s)=>{var d,p,m,_,h,g,x,q,w,b,C,S;let u={...e};const l=gt(e.machine_id);if(!IE(u))return u;if((l==null?void 0:l.id)==="m_industrial_firebox"&&gE(e.id)){const M=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let I=((d=i==null?void 0:i.fireboxConfig)==null?void 0:d.fuel)||"p_coke_fuel";const E=(t==null?void 0:t.productId)||(n==null?void 0:n.id);E&&M.includes(E)&&(I=E);const N=Zl(e.id,I);return N&&(u={...u,inputs:P0(e.inputs,I,e.id),fireboxSettings:{fuel:I},cycle_time:N.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const M=((p=i==null?void 0:i.drillConfig)==null?void 0:p.drillHead)||"steel",I=((m=i==null?void 0:i.drillConfig)==null?void 0:m.consumable)||"hydrochloric_acid",E=((_=i==null?void 0:i.drillConfig)==null?void 0:_.machineOil)!==void 0?i.drillConfig.machineOil:!0,N=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],R={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let P=M,D=100;const F=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(F)if(N.includes(F))P=R[F];else if(t!=null&&t.isOutput)D=100;else{const U=s(F,P,I,E);U&&(D=U)}const O=aE(P,I,E,D),Q=sE(P,I,E,D),j=Ao(P,I,E,D);return u={...u,inputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:Q.length>0?Q:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:P,consumable:I,machineOil:E,depth:D},cycle_time:1,power_consumption:j?{max:j.drillingPower*1e6,average:(j.drillingPower*j.lifeTime+j.idlePower*(j.replacementTime+j.travelTime))/j.totalCycleTime*1e6}:"Variable",pollution:j?j.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const M=((h=i==null?void 0:i.assemblerConfig)==null?void 0:h.outerStage)||1,I=((g=i==null?void 0:i.assemblerConfig)==null?void 0:g.innerStage)||2,E=((x=i==null?void 0:i.assemblerConfig)==null?void 0:x.machineOil)!==void 0?i.assemblerConfig.machineOil:!0,N=((q=i==null?void 0:i.assemblerConfig)==null?void 0:q.tickCircuitDelay)||0;let R=M===1?`p_${I}x_microchip`:`p_${M}x${I}x_microchip`;const P=(t==null?void 0:t.productId)||(n==null?void 0:n.id);P&&P.includes("microchip")&&(R=P);const D=lE(R,E),F=cE(R,E),O=iu(R,E,N),Q=R.match(/p_(?:(\d+)x)?(\d+)x_microchip/),j=Q&&Q[1]?parseInt(Q[1]):1,U=Q?parseInt(Q[2]):I;return u={...u,inputs:D.length>0?D:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:j,innerStage:U,machineOil:E,tickCircuitDelay:N},cycle_time:O?O.cycleTime:"Variable",power_consumption:O?{max:O.maxPowerConsumption,average:O.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const M=((w=i==null?void 0:i.treeFarmConfig)==null?void 0:w.trees)||450,I=((b=i==null?void 0:i.treeFarmConfig)==null?void 0:b.harvesters)||20,E=((C=i==null?void 0:i.treeFarmConfig)==null?void 0:C.sprinklers)||24,N=((S=i==null?void 0:i.treeFarmConfig)==null?void 0:S.outputs)||8,R=1,P=mE(E),D=mg(M,I,a),F=Xl(M,I,E,N,R,a);return u={...u,inputs:P.length>0?P:[{product_id:"p_water",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:M,harvesters:I,sprinklers:E,outputs:N,controller:R},cycle_time:1,power_consumption:F?F.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let M="p_any_item",I="p_any_fluid";const E=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(E)if(E==="p_concrete_block"||E==="p_lead_ingot")M="p_fission_byproducts",I="p_depleted_uf6_waste";else{const P=bt(E);(P==null?void 0:P.type)==="item"?(M=E,I="p_any_fluid"):(P==null?void 0:P.type)==="fluid"&&(M="p_any_item",I=E)}else M="p_fission_byproducts",I="p_depleted_uf6_waste";const N=Jl(0,0,M,I),R=Pl(0,0);return u={...u,inputs:N,outputs:[],wasteFacilitySettings:{itemProductId:M,fluidProductId:I,itemFlowRate:0,fluidFlowRate:0},cycle_time:R.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let M=["p_water","p_residue"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const R=bt(I);(R==null?void 0:R.type)==="fluid"&&(M=[I,I])}const E=F0(M),N=js(E);return u={...u,inputs:E,outputs:[],liquidDumpSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:N},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let M=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const R=bt(I);(R==null?void 0:R.type)==="fluid"&&(M=Array(8).fill(I))}const E=A0(M),N=Ps(E);return u={...u,inputs:E,outputs:[],liquidBurnerSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:N},u}return u},GV=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],KV=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Us).forEach(n=>{n.forEach(i=>t.add(i.product_id))}),Array.from(t)}return e==="r_logic_assembler"?uE.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},IE=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&gE(e.id),gw=1e-10,YV=(e,t,n,i,a,s=null)=>{if(t<gw)return new Map([[e,n]]);const u=n/t,l=new Map;l.set(e,n);const d=new Map;d.set(e,u);const p=new Set([e]),m=[e];for(;m.length>0;){const x=m.shift(),q=i.nodes[x];q&&(q.outputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.sourceNodeId===x))||[]).forEach(S=>{p.has(S.targetNodeId)||(p.add(S.targetNodeId),m.push(S.targetNodeId))})}),q.inputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.targetNodeId===x))||[]).forEach(S=>{p.has(S.sourceNodeId)||(p.add(S.sourceNodeId),m.push(S.sourceNodeId))})}))}const _=10;let h=0,g=!0;for(;g&&h<_;)g=!1,h++,p.forEach(x=>{var N;if(x===e)return;const q=i.nodes[x];if(!q)return;const w=(N=s==null?void 0:s.find(R=>R.id===x))==null?void 0:N.data,b=(w==null?void 0:w.machineCountMode)||q.machineCountMode||"free";if(b==="locked")return;const C=q.machineCount||0;if(C<gw)return;const S=[],M=[];if(q.outputs.forEach((R,P)=>{var F;(((F=i.products[R.productId])==null?void 0:F.connections.filter(O=>O.sourceNodeId===x&&O.sourceOutputIndex===P))||[]).forEach(O=>{const Q=d.get(O.targetNodeId);Q!==void 0&&(S.push(Q),M.push({type:"output",productId:R.productId,targetNodeId:O.targetNodeId,ratio:Q}))})}),q.inputs.forEach((R,P)=>{var F;(((F=i.products[R.productId])==null?void 0:F.connections.filter(O=>O.targetNodeId===x&&O.targetInputIndex===P))||[]).forEach(O=>{const Q=d.get(O.sourceNodeId);Q!==void 0&&(S.push(Q),M.push({type:"input",productId:R.productId,sourceNodeId:O.sourceNodeId,ratio:Q}))})}),S.length===0)return;const I=Math.max(...S),E=d.get(x)||1;if(Math.abs(I-E)>1e-4){d.set(x,I);let R=C*I;if(b==="capped"){const P=(w==null?void 0:w.cappedMachineCount)||q.cappedMachineCount;typeof P=="number"&&(R=Math.min(R,P))}l.set(x,R),g=!0}});return l};var vw={},Op,xw;function TE(){if(xw)return Op;xw=1;function e(t,n,i,a){this.feasible=i,this.evaluation=n,this.bounded=a,this._tableau=t}return Op=e,e.prototype.generateSolutionSet=function(){for(var t={},n=this._tableau,i=n.varIndexByRow,a=n.variablesPerIndex,s=n.matrix,u=n.rhsColumn,l=n.height-1,d=Math.round(1/n.precision),p=1;p<=l;p+=1){var m=i[p],_=a[m];if(!(_===void 0||_.isSlack===!0)){var h=s[p][u];t[_.id]=Math.round((Number.EPSILON+h)*d)/d}}return t},Op}var Ap,ww;function QV(){if(ww)return Ap;ww=1;var e=TE();function t(n,i,a,s,u){e.call(this,n,i,a,s),this.iter=u}return Ap=t,t.prototype=Object.create(e.prototype),t.constructor=t,Ap}var Lp,bw;function Qn(){if(bw)return Lp;bw=1;var e=TE(),t=QV();function n(a){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=a||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Lp=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function i(a,s){this.priority=a,this.reducedCosts=new Array(s);for(var u=0;u<s;u+=1)this.reducedCosts[u]=0}return i.prototype.copy=function(){var a=new i(this.priority,this.reducedCosts.length);return a.reducedCosts=this.reducedCosts.slice(),a},n.prototype.setOptionalObjective=function(a,s,u){var l=this.objectivesByPriority[a];if(l===void 0){var d=Math.max(this.width,s+1);l=new i(a,d),this.objectivesByPriority[a]=l,this.optionalObjectives.push(l),this.optionalObjectives.sort(function(p,m){return p.priority-m.priority})}l.reducedCosts[s]=u},n.prototype.initialize=function(a,s,u,l){this.variables=u,this.unrestrictedVars=l,this.width=a,this.height=s;for(var d=new Array(a),p=0;p<a;p++)d[p]=0;this.matrix=new Array(s);for(var m=0;m<s;m++)this.matrix[m]=d.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=a+s-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var a=this.model.variables,s=this.model.constraints,u=a.length,l=s.length,d,p,m=this.matrix[0],_=this.model.isMinimization===!0?-1:1;for(d=0;d<u;d+=1){var h=a[d],g=h.priority,x=_*h.cost;g===0?m[d+1]=x:this.setOptionalObjective(g,d+1,x),p=a[d].index,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=d+1,this.varIndexByCol[d+1]=p}for(var q=1,w=0;w<l;w+=1){var b=s[w],C=b.index;this.rowByVarIndex[C]=q,this.colByVarIndex[C]=-1,this.varIndexByRow[q]=C;var S,M,I,E=b.terms,N=E.length,R=this.matrix[q++];if(b.isUpperBound){for(S=0;S<N;S+=1)M=E[S],I=this.colByVarIndex[M.variable.index],R[I]=M.coefficient;R[0]=b.rhs}else{for(S=0;S<N;S+=1)M=E[S],I=this.colByVarIndex[M.variable.index],R[I]=-M.coefficient;R[0]=-b.rhs}}},n.prototype.setModel=function(a){this.model=a;var s=a.nVariables+1,u=a.nConstraints+1;return this.initialize(s,u,a.variables,a.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},n.prototype.density=function(){for(var a=0,s=this.matrix,u=0;u<this.height;u++)for(var l=s[u],d=0;d<this.width;d++)l[d]!==0&&(a+=1);return a/(this.height*this.width)},n.prototype.setEvaluation=function(){var a=Math.round(1/this.precision),s=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+s)*a)/a;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},n.prototype.getSolution=function(){var a=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new t(this,a,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,a,this.feasible,this.bounded)},Lp}var qw;function XV(){if(qw)return vw;qw=1;var e=Qn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d,p=0;;){for(var m=0,_=-this.precision,h=1;h<=l;h++){d=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var g=a[h][s];g<_&&(_=g,m=h)}if(m===0)return this.feasible=!0,p;for(var x=0,q=-1/0,w=a[0],b=a[m],C=1;C<=u;C++){var S=b[C];if(d=this.unrestrictedVars[this.varIndexByCol[C]]===!0,d||S<-this.precision){var M=-w[C]/S;q<M&&(q=M,x=C)}}if(x===0)return this.feasible=!1,p;if(n){i.push([this.varIndexByRow[m],this.varIndexByCol[x]]);var I=this.checkForCycles(i);if(I.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+I[0]),this.model.messages.push("Length :"+I[1]),this.feasible=!1,p}this.pivot(m,x),p+=1}},e.prototype.phase2=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d=this.precision,p=this.optionalObjectives.length,m=null,_=0,h,g;;){var x=a[this.costRowIndex];p>0&&(m=[]);for(var q=0,w=d,b=!1,C=1;C<=u;C++){if(h=x[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,p>0&&-d<h&&h<d){m.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}if(p>0)for(var S=0;q===0&&m.length>0&&S<p;){var M=[],I=this.optionalObjectives[S].reducedCosts;w=d;for(var E=0;E<m.length;E++){if(C=m[E],h=I[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,-d<h&&h<d){M.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}m=M,S+=1}if(q===0)return this.setEvaluation(),this.simplexIters+=1,_;var N=0,R=1/0;this.varIndexByRow;for(var P=1;P<=l;P++){var D=a[P],F=D[s],O=D[q];if(!(-d<O&&O<d)){if(O>0&&d>F&&F>-d){R=0,N=P;break}var Q=b?-F/O:F/O;Q>d&&R>Q&&(R=Q,N=P)}}if(R===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[q],_;if(n){i.push([this.varIndexByRow[N],this.varIndexByCol[q]]);var j=this.checkForCycles(i);if(j.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+j[0]),this.model.messages.push("Length :"+j[1]),this.feasible=!1,_}this.pivot(N,q,!0),_+=1}};var t=[];return e.prototype.pivot=function(n,i){var a=this.matrix,s=a[n][i],u=this.height-1,l=this.width-1,d=this.varIndexByRow[n],p=this.varIndexByCol[i];this.varIndexByRow[n]=p,this.varIndexByCol[i]=d,this.rowByVarIndex[p]=n,this.rowByVarIndex[d]=-1,this.colByVarIndex[p]=-1,this.colByVarIndex[d]=i;for(var m=a[n],_=0,h=0;h<=l;h++)m[h]>=-1e-16&&m[h]<=1e-16?m[h]=0:(m[h]/=s,t[_]=h,_+=1);m[i]=1/s;var g,x,q;this.precision;for(var w=0;w<=u;w++)if(w!==n&&!(a[w][i]>=-1e-16&&a[w][i]<=1e-16)){var b=a[w];if(g=b[i],g>=-1e-16&&g<=1e-16)g!==0&&(b[i]=0);else{for(x=0;x<_;x++)h=t[x],q=m[h],q>=-1e-16&&q<=1e-16?q!==0&&(m[h]=0):b[h]=b[h]-g*q;b[i]=-g/s}}var C=this.optionalObjectives.length;if(C>0)for(var S=0;S<C;S+=1){var M=this.optionalObjectives[S].reducedCosts;if(g=M[i],g!==0){for(x=0;x<_;x++)h=t[x],q=m[h],q!==0&&(M[h]=M[h]-g*q);M[i]=-g/s}}},e.prototype.checkForCycles=function(n){for(var i=0;i<n.length-1;i++)for(var a=i+1;a<n.length;a++){var s=n[i],u=n[a];if(s[0]===u[0]&&s[1]===u[1]){if(a-i>n.length-a)break;for(var l=!0,d=1;d<a-i;d++){var p=n[i+d],m=n[a+d];if(p[0]!==m[0]||p[1]!==m[1]){l=!1;break}}if(l)return[i,a-i]}}return[]},vw}var Sw={},Dp,Cw;function vg(){if(Cw)return Dp;Cw=1;function e(l,d,p,m){this.id=l,this.cost=d,this.index=p,this.value=0,this.priority=m}function t(l,d,p,m){e.call(this,l,d,p,m)}t.prototype.isInteger=!0;function n(l,d){e.call(this,l,0,d,0)}n.prototype.isSlack=!0;function i(l,d){this.variable=l,this.coefficient=d}function a(l,d,p){return p===0||p==="required"?null:(d=d||1,p=p||1,l.isMinimization===!1&&(d=-d),l.addVariable(d,"r"+l.relaxationIndex++,!1,!1,p))}function s(l,d,p,m){this.slack=new n("s"+p,p),this.index=p,this.model=m,this.rhs=l,this.isUpperBound=d,this.terms=[],this.termsByVarIndex={},this.relaxation=null}s.prototype.addTerm=function(l,d){var p=d.index,m=this.termsByVarIndex[p];if(m===void 0)m=new i(d,l),this.termsByVarIndex[p]=m,this.terms.push(m),this.isUpperBound===!0&&(l=-l),this.model.updateConstraintCoefficient(this,d,l);else{var _=m.coefficient+l;this.setVariableCoefficient(_,d)}return this},s.prototype.removeTerm=function(l){return this},s.prototype.setRightHandSide=function(l){if(l!==this.rhs){var d=l-this.rhs;this.isUpperBound===!0&&(d=-d),this.rhs=l,this.model.updateRightHandSide(this,d)}return this},s.prototype.setVariableCoefficient=function(l,d){var p=d.index;if(p===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var m=this.termsByVarIndex[p];if(m===void 0)this.addTerm(l,d);else if(l!==m.coefficient){var _=l-m.coefficient;this.isUpperBound===!0&&(_=-_),m.coefficient=l,this.model.updateConstraintCoefficient(this,d,_)}return this},s.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this._relax(this.relaxation)},s.prototype._relax=function(l){l!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,l):this.setVariableCoefficient(1,l))};function u(l,d){this.upperBound=l,this.lowerBound=d,this.model=l.model,this.rhs=l.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(l,d){return this.upperBound.addTerm(l,d),this.lowerBound.addTerm(l,d),this},u.prototype.removeTerm=function(l){return this.upperBound.removeTerm(l),this.lowerBound.removeTerm(l),this},u.prototype.setRightHandSide=function(l){this.upperBound.setRightHandSide(l),this.lowerBound.setRightHandSide(l),this.rhs=l},u.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Dp={Constraint:s,Variable:e,IntegerVariable:t,SlackVariable:n,Equality:u,Term:i},Dp}var kw;function ZV(){if(kw)return Sw;kw=1;var e=Qn(),t=vg().SlackVariable;return e.prototype.addCutConstraints=function(n){for(var i=n.length,a=this.height,s=a+i,u=a;u<s;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var l,d=this.width-1,p=0;p<i;p+=1){var m=n[p],_=a+p,h=m.type==="min"?-1:1,g=m.varIndex,x=this.rowByVarIndex[g],q=this.matrix[_];if(x===-1){for(q[this.rhsColumn]=h*m.value,l=1;l<=d;l+=1)q[l]=0;q[this.colByVarIndex[g]]=h}else{var w=this.matrix[x],b=w[this.rhsColumn];for(q[this.rhsColumn]=h*(m.value-b),l=1;l<=d;l+=1)q[l]=-h*w[l]}var C=this.getNewElementIndex();this.varIndexByRow[_]=C,this.rowByVarIndex[C]=_,this.colByVarIndex[C]=-1,this.variablesPerIndex[C]=new t("s"+C,C),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=Math.floor(s);for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]];if(!m.isInteger)i[l][p]=Math.min(0,i[n][p]/(1-u));else{var _=i[n][p],h=Math.floor(_)+Math.max(0,_-Math.floor(_)-u)/(1-u);i[l][p]=h}}for(var g=0;g<this.width;g+=1)i[l][g]-=i[n][g];return!0},e.prototype._addUpperBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=-u;for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]],_=i[n][p],h=_-Math.floor(_);m.isInteger?h<=u?i[l][p]=-h:i[l][p]=-(1-h)*u/h:_>=0?i[l][p]=-_:i[l][p]=_*u/(1-u)}return!0},e.prototype.applyMIRCuts=function(){},Sw}var Mw={},Ew;function JV(){if(Ew)return Mw;Ew=1;var e=Qn();return e.prototype._putInBase=function(t){var n=this.rowByVarIndex[t];if(n===-1){for(var i=this.colByVarIndex[t],a=1;a<this.height;a+=1){var s=this.matrix[a][i];if(s<-this.precision||this.precision<s){n=a;break}}this.pivot(n,i)}return n},e.prototype._takeOutOfBase=function(t){var n=this.colByVarIndex[t];if(n===-1){for(var i=this.rowByVarIndex[t],a=this.matrix[i],s=1;s<this.height;s+=1){var u=a[s];if(u<-this.precision||this.precision<u){n=s;break}}this.pivot(i,n)}return n},e.prototype.updateVariableValues=function(){for(var t=this.variables.length,n=Math.round(1/this.precision),i=0;i<t;i+=1){var a=this.variables[i],s=a.index,u=this.rowByVarIndex[s];if(u===-1)a.value=0;else{var l=this.matrix[u][this.rhsColumn];a.value=Math.round((l+Number.EPSILON)*n)/n}}},e.prototype.updateRightHandSide=function(t,n){var i=this.height-1,a=this.rowByVarIndex[t.index];if(a===-1){for(var s=this.colByVarIndex[t.index],u=0;u<=i;u+=1){var l=this.matrix[u];l[this.rhsColumn]-=n*l[s]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[this.rhsColumn]-=n*m[s]}}else this.matrix[a][this.rhsColumn]-=n},e.prototype.updateConstraintCoefficient=function(t,n,i){if(t.index===n.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var a=this._putInBase(t.index),s=this.colByVarIndex[n.index];if(s===-1)for(var u=this.rowByVarIndex[n.index],l=0;l<this.width;l+=1)this.matrix[a][l]+=i*this.matrix[u][l];else this.matrix[a][s]-=i},e.prototype.updateCost=function(t,n){var i=t.index,a=this.width-1,s=this.colByVarIndex[i];if(s===-1){var u=this.matrix[this.rowByVarIndex[i]],l;if(t.priority===0){var d=this.matrix[0];for(l=0;l<=a;l+=1)d[l]+=n*u[l]}else{var p=this.objectivesByPriority[t.priority].reducedCosts;for(l=0;l<=a;l+=1)p[l]+=n*u[l]}}else this.matrix[0][s]-=n},e.prototype.addConstraint=function(t){var n=t.isUpperBound?1:-1,i=this.height,a=this.matrix[i];a===void 0&&(a=this.matrix[0].slice(),this.matrix[i]=a);for(var s=this.width-1,u=0;u<=s;u+=1)a[u]=0;a[this.rhsColumn]=n*t.rhs;for(var l=t.terms,d=l.length,p=0;p<d;p+=1){var m=l[p],_=m.coefficient,h=m.variable.index,g=this.rowByVarIndex[h];if(g===-1)a[this.colByVarIndex[h]]+=n*_;else{var x=this.matrix[g];for(x[this.rhsColumn],u=0;u<=s;u+=1)a[u]-=n*_*x[u]}}var q=t.index;this.varIndexByRow[i]=q,this.rowByVarIndex[q]=i,this.colByVarIndex[q]=-1,this.height+=1},e.prototype.removeConstraint=function(t){var n=t.index,i=this.height-1,a=this._putInBase(n),s=this.matrix[i];this.matrix[i]=this.matrix[a],this.matrix[a]=s,this.varIndexByRow[a]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.slack.index=-1,this.height-=1},e.prototype.addVariable=function(t){var n=this.height-1,i=this.width,a=this.model.isMinimization===!0?-t.cost:t.cost,s=t.priority,u=this.optionalObjectives.length;if(u>0)for(var l=0;l<u;l+=1)this.optionalObjectives[l].reducedCosts[i]=0;s===0?this.matrix[0][i]=a:(this.setOptionalObjective(s,i,a),this.matrix[0][i]=0);for(var d=1;d<=n;d+=1)this.matrix[d][i]=0;var p=t.index;this.varIndexByCol[i]=p,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=i,this.width+=1},e.prototype.removeVariable=function(t){var n=t.index,i=this._takeOutOfBase(n),a=this.width-1;if(i!==a){for(var s=this.height-1,u=0;u<=s;u+=1){var l=this.matrix[u];l[i]=l[a]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[i]=m[a]}var _=this.varIndexByCol[a];this.varIndexByCol[i]=_,this.colByVarIndex[_]=i}this.varIndexByCol[a]=-1,this.colByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.index=-1,this.width-=1},Mw}var Iw={},Tw;function eF(){if(Tw)return Iw;Tw=1;var e=Qn();return e.prototype.log=function(t,n){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i=5,a="",s=[" "],u,l,d,p,m,_,h,g,x,q,w;for(l=1;l<this.width;l+=1)m=this.varIndexByCol[l],p=this.variablesPerIndex[m],p===void 0?_="c"+m:_=p.id,h=_.length,g=" ",x="	",h>5?g+=" ":x+="	",s[l]=g,a+=x+_;console.log(a);var b,C=this.matrix[this.costRowIndex],S="	";for(u=1;u<this.width;u+=1)b="	",S+=b,S+=s[u],S+=C[u].toFixed(i);for(b="	",S+=b+s[0]+C[0].toFixed(i),console.log(S+"	Z"),d=1;d<this.height;d+=1){for(q=this.matrix[d],w="	",l=1;l<this.width;l+=1)b="	",w+=b+s[l]+q[l].toFixed(i);b="	",w+=b+s[0]+q[0].toFixed(i),m=this.varIndexByRow[d],p=this.variablesPerIndex[m],p===void 0?_="c"+m:_=p.id,console.log(w+"	"+_)}console.log("");var M=this.optionalObjectives.length;if(M>0){console.log("    Optional objectives:");for(var I=0;I<M;I+=1){var E=this.optionalObjectives[I].reducedCosts,N="";for(u=1;u<this.width;u+=1)b=E[u]<0?"":" ",N+=b,N+=s[u],N+=E[u].toFixed(i);b=E[0]<0?"":" ",N+=b+s[0]+E[0].toFixed(i),console.log(N+" z"+I)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},Iw}var Nw={},jw;function tF(){if(jw)return Nw;jw=1;var e=Qn();return e.prototype.copy=function(){var t=new e(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var n=[],i=0;i<this.optionalObjectives.length;i++)n[i]=this.optionalObjectives[i].copy();t.optionalObjectives=n;for(var a=this.matrix,s=new Array(this.height),u=0;u<this.height;u++)s[u]=a[u].slice();return t.matrix=s,t},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var t=this.savedState,n=t.matrix;this.nVars=t.nVars,this.model=t.model,this.variables=t.variables,this.variablesPerIndex=t.variablesPerIndex,this.unrestrictedVars=t.unrestrictedVars,this.lastElementIndex=t.lastElementIndex,this.width=t.width,this.height=t.height;var i,a;for(i=0;i<this.height;i+=1){var s=n[i],u=this.matrix[i];for(a=0;a<this.width;a+=1)u[a]=s[a]}var l=t.varIndexByRow;for(a=0;a<this.height;a+=1)this.varIndexByRow[a]=l[a];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var d=t.varIndexByCol;for(i=0;i<this.width;i+=1)this.varIndexByCol[i]=d[i];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var p=t.rowByVarIndex,m=t.colByVarIndex,_=0;_<this.nVars;_+=1)this.rowByVarIndex[_]=p[_],this.colByVarIndex[_]=m[_];if(t.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<t.optionalObjectives.length;h++){var g=t.optionalObjectives[h].copy();this.optionalObjectives[h]=g,this.optionalObjectivePerPriority[g.priority]=g}}}},Nw}var Pw={},Rw;function rF(){if(Rw)return Pw;Rw=1;var e=Qn();function t(n,i){this.index=n,this.value=i}return e.prototype.getMostFractionalVar=function(){for(var n=0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l].index,p=this.rowByVarIndex[d];if(p!==-1){var m=this.matrix[p][this.rhsColumn],_=Math.abs(m-Math.round(m));n<_&&(n=_,i=d,a=m)}}return new t(i,a)},e.prototype.getFractionalVarWithLowestCost=function(){for(var n=1/0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l],p=d.index,m=this.rowByVarIndex[p];if(m!==-1){var _=this.matrix[m][this.rhsColumn];if(Math.abs(_-Math.round(_))>this.precision){var h=d.cost;n>h&&(n=h,i=p,a=_)}}}return new t(i,a)},Pw}var Vw={},Fw;function nF(){if(Fw)return Vw;Fw=1;var e=Qn();return e.prototype.countIntegerValues=function(){for(var t=0,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=i-Math.floor(i),i<this.precision&&-i<this.precision&&(t+=1)}return t},e.prototype.isIntegral=function(){for(var t=this.model.integerVariables,n=t.length,i=0;i<n;i++){var a=this.rowByVarIndex[t[i].index];if(a!==-1){var s=this.matrix[a][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(t){for(var n=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var a=this.matrix[i][this.rhsColumn];a=Math.abs(a);var s=Math.min(a-Math.floor(a),Math.floor(a+1));if(s<this.precision){if(!t)return 0}else n===-1?n=a:n*=a}return n===-1?0:n},Vw}var Bp,Ow;function iF(){return Ow||(Ow=1,XV(),ZV(),JV(),eF(),tF(),rF(),nF(),Bp=Qn()),Bp}var Aw={},Lw;function NE(){if(Lw)return Aw;Lw=1;var e=Qn();function t(a,s,u){this.type=a,this.varIndex=s,this.value=u}function n(a,s){this.relaxedEvaluation=a,this.cuts=s}function i(a,s){return s.relaxedEvaluation-a.relaxedEvaluation}return e.prototype.applyCuts=function(a){if(this.restore(),this.addCutConstraints(a),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var l=this.computeFractionalVolume(!0);l>=.9*u&&(s=!1)}},e.prototype.branchAndCut=function(){var a=[],s=0,u=this.model.tolerance,l=!0,d=1e99;this.model.timeout&&(d=Date.now()+this.model.timeout);for(var p=1/0,m=null,_=[],h=0;h<this.optionalObjectives.length;h+=1)_.push(1/0);var g=new n(-1/0,[]),x;for(a.push(g);a.length>0&&l===!0&&Date.now()<d;)if(this.model.isMinimization?x=this.bestPossibleEval*(1+u):x=this.bestPossibleEval*(1-u),u>0&&p<x&&(l=!1),g=a.pop(),!(g.relaxedEvaluation>p)){var q=g.cuts;if(this.applyCuts(q),s++,this.feasible!==!1){var w=this.evaluation;if(!(w>p)){if(w===p){for(var b=!0,C=0;C<this.optionalObjectives.length&&!(this.optionalObjectives[C].reducedCosts[0]>_[C]);C+=1)if(this.optionalObjectives[C].reducedCosts[0]<_[C]){b=!1;break}if(b)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}m=g,p=w;for(var S=0;S<this.optionalObjectives.length;S+=1)_[S]=this.optionalObjectives[S].reducedCosts[0]}else{s===1&&this.save();for(var M=this.getMostFractionalVar(),I=M.index,E=[],N=[],R=q.length,P=0;P<R;P+=1){var D=q[P];D.varIndex===I?D.type==="min"?N.push(D):E.push(D):(E.push(D),N.push(D))}var F=Math.ceil(M.value),O=Math.floor(M.value),Q=new t("min",I,F);E.push(Q);var j=new t("max",I,O);N.push(j),a.push(new n(w,E)),a.push(new n(w,N)),a.sort(i)}}}}m!==null&&this.applyCuts(m.cuts),this.branchAndCutIterations=s},Aw}var zp,Dw;function oF(){if(Dw)return zp;Dw=1;var e=Qn();NE();var t=vg(),n=t.Constraint,i=t.Equality,a=t.Variable,s=t.IntegerVariable;t.Term;function u(l,d){this.tableau=new e(l),this.name=d,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return zp=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var l=this.lastElementIndex;return this.lastElementIndex+=1,l},u.prototype._addConstraint=function(l){var d=l.slack;this.tableau.variablesPerIndex[d.index]=d,this.constraints.push(l),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(l)},u.prototype.smallerThan=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.greaterThan=function(l){var d=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.equal=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(d);var p=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),new i(d,p)},u.prototype.addVariable=function(l,d,p,m,_){if(typeof _=="string")switch(_){case"required":_=0;break;case"strong":_=1;break;case"medium":_=2;break;case"weak":_=3;break;default:_=0;break}var h=this.tableau.getNewElementIndex();d==null&&(d="v"+h),l==null&&(l=0),_==null&&(_=0);var g;return p?(g=new s(d,l,h,_),this.integerVariables.push(g)):g=new a(d,l,h,_),this.variables.push(g),this.tableau.variablesPerIndex[h]=g,m&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(g),g},u.prototype._removeConstraint=function(l){var d=this.constraints.indexOf(l);if(d===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(d,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(l),l.relaxation&&this.removeVariable(l.relaxation)},u.prototype.removeConstraint=function(l){return l.isEquality?(this._removeConstraint(l.upperBound),this._removeConstraint(l.lowerBound)):this._removeConstraint(l),this},u.prototype.removeVariable=function(l){var d=this.variables.indexOf(l);if(d===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(d,1),this.tableauInitialized===!0&&this.tableau.removeVariable(l),this},u.prototype.updateRightHandSide=function(l,d){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(l,d),this},u.prototype.updateConstraintCoefficient=function(l,d,p){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(l,d,p),this},u.prototype.setCost=function(l,d){var p=l-d.cost;return this.isMinimization===!1&&(p=-p),d.cost=l,this.tableau.updateCost(d,p),this},u.prototype.loadJson=function(l){this.isMinimization=l.opType!=="max";for(var d=l.variables,p=l.constraints,m={},_={},h=Object.keys(p),g=h.length,x=0;x<g;x+=1){var q=h[x],w=p[q],b=w.equal,C=w.weight,S=w.priority,M=C!==void 0||S!==void 0,I,E;if(b===void 0){var N=w.min;N!==void 0&&(I=this.greaterThan(N),m[q]=I,M&&I.relax(C,S));var R=w.max;R!==void 0&&(E=this.smallerThan(R),_[q]=E,M&&E.relax(C,S))}else{I=this.greaterThan(b),m[q]=I,E=this.smallerThan(b),_[q]=E;var P=new i(I,E);M&&P.relax(C,S)}}var D=Object.keys(d),F=D.length;this.tolerance=l.tolerance||0,l.timeout&&(this.timeout=l.timeout),l.options&&(l.options.timeout&&(this.timeout=l.options.timeout),this.tolerance===0&&(this.tolerance=l.options.tolerance||0),l.options.useMIRCuts&&(this.useMIRCuts=l.options.useMIRCuts),typeof l.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=l.options.exitOnCycles);for(var O=l.ints||{},Q=l.binaries||{},j=l.unrestricted||{},U=l.optimize,H=0;H<F;H+=1){var te=D[H],G=d[te],Y=G[U]||0,oe=!!Q[te],z=!!O[te]||oe,X=!!j[te],_e=this.addVariable(Y,te,z,X);oe&&this.smallerThan(1).addTerm(1,_e);var W=Object.keys(G);for(x=0;x<W.length;x+=1){var J=W[x];if(J!==U){var re=G[J],ue=m[J];ue!==void 0&&ue.addTerm(re,_e);var ae=_[J];ae!==void 0&&ae.addTerm(re,_e)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(l){this.useMIRCuts=l},u.prototype.debug=function(l){this.checkForCycles=l},u.prototype.log=function(l){return this.tableau.log(l)},zp}var $p={},Bw;function aF(){return Bw||(Bw=1,$p.CleanObjectiveAttributes=function(e){var t,n,i;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){t=Math.random();for(n in e.variables)e.variables[n][e.optimize]&&(e.variables[n][t]=e.variables[n][e.optimize]);return e.constraints[t]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(i in e.optimize)if(e.constraints[i])if(e.constraints[i]==="equal")delete e.optimize[i];else{t=Math.random();for(n in e.variables)e.variables[n][i]&&(e.variables[n][t]=e.variables[n][i]);e.constraints[t]=e.constraints[i],delete e.constraints[i]}return e}}),$p}var Cl={},Hp,zw;function $0(){if(zw)return Hp;zw=1;function e(n){var i={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},a={opType:"",optimize:"_obj",constraints:{},variables:{}},s={">=":"min","<=":"max","=":"equal"},u="",l=null,d="",p="",m="",_=0;typeof n=="string"&&(n=n.split(`
`));for(var h=0;h<n.length;h++)if(m="__"+h,u=n[h],l=null,i.is_objective.test(u))a.opType=u.match(/(max|min)/gi)[0],l=u.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}).slice(1),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0].replace(/\;$/,""),a.variables[p]=a.variables[p]||{},a.variables[p]._obj=d});else if(i.is_int.test(u))l=u.match(i.parse_int).slice(1),a.ints=a.ints||{},l.forEach(function(q){q=q.replace(";",""),a.ints[q]=1});else if(i.is_bin.test(u))l=u.match(i.parse_bin).slice(1),a.binaries=a.binaries||{},l.forEach(function(q){q=q.replace(";",""),a.binaries[q]=1});else if(i.is_constraint.test(u)){var g=u.indexOf(":"),x=g===-1?u:u.slice(g+1);l=x.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0],a.variables[p]=a.variables[p]||{},a.variables[p][m]=d}),_=parseFloat(u.match(i.parse_rhs)[0]),u=s[u.match(i.parse_dir)[0]],a.constraints[m]=a.constraints[m]||{},a.constraints[m][u]=_}else i.is_unrestricted.test(u)&&(l=u.match(i.parse_int).slice(1),a.unrestricted=a.unrestricted||{},l.forEach(function(q){q=q.replace(";",""),a.unrestricted[q]=1}));return a}function t(n){if(!n)throw new Error("Solver requires a model to operate on");var i="",a={max:"<=",min:">=",equal:"="},s=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(n.opType){i+=n.opType+":";for(var u in n.variables)n.variables[u][u]=n.variables[u][u]?n.variables[u][u]:1,n.variables[u][n.optimize]&&(i+=" "+n.variables[u][n.optimize]+" "+u.replace(s,"_"))}else i+="max:";i+=`;

`;for(var l in n.constraints)for(var d in n.constraints[l])if(typeof a[d]<"u"){for(var p in n.variables)typeof n.variables[p][l]<"u"&&(i+=" "+n.variables[p][l]+" "+p.replace(s,"_"));i+=" "+a[d]+" "+n.constraints[l][d],i+=`;
`}if(n.ints){i+=`

`;for(var m in n.ints)i+="int "+m.replace(s,"_")+`;
`}if(n.unrestricted){i+=`

`;for(var _ in n.unrestricted)i+="unrestricted "+_.replace(s,"_")+`;
`}return i}return Hp=function(n){return n.length?e(n):t(n)},Hp}const sF={},uF=Object.freeze(Object.defineProperty({__proto__:null,default:sF},Symbol.toStringTag,{value:"Module"})),$w=FT(uF);var Hw;function lF(){if(Hw)return Cl;Hw=1,Cl.reformat=$0();function e(t){return t=t.replace("\\r\\n",`\r
`),t=t.split(`\r
`),t=t.filter(function(n){var i;return i=new RegExp(" 0$","gi"),!(i.test(n)===!0||(i=new RegExp("\\d$","gi"),i.test(n)===!1))}).map(function(n){return n.split(/\:{0,1} +(?=\d)/)}).reduce(function(n,i,a){return n[i[0]]=i[1],n},{}),t}return Cl.solve=function(t){return new Promise(function(n,i){typeof window<"u"&&i("Function Not Available in Browser");var a=$0()(t);t.external||i("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||i("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||i("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||i("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var s=$w;s.writeFile(t.external.tempName,a,function(u,l){if(u)i(u);else{var d=$w.execFile;t.external.args.push(t.external.tempName),d(t.external.binPath,t.external.args,function(p,m){if(p)if(p.code===1)n(e(m));else{var _={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:p.code,meaning:_[p.code],data:m};i(h)}else n(e(m))})}})})},Cl}var Wp,Ww;function cF(){return Ww||(Ww=1,Wp={lpsolve:lF()}),Wp}var Up,Uw;function Gw(){return Uw||(Uw=1,Up=function(e,t){var n=t.optimize,i=JSON.parse(JSON.stringify(t.optimize)),a=Object.keys(t.optimize),s,u=0,l={},d="",p={},m=[],_,h,g,x;for(delete t.optimize,_=0;_<a.length;_++)i[a[_]]=0;for(_=0;_<a.length;_++){t.optimize=a[_],t.opType=n[a[_]],s=e.Solve(t,void 0,void 0,!0);for(x in a)if(!t.variables[a[x]]){s[a[x]]=s[a[x]]?s[a[x]]:0;for(g in t.variables)t.variables[g][a[x]]&&s[g]&&(s[a[x]]+=s[g]*t.variables[g][a[x]])}for(d="base",h=0;h<a.length;h++)s[a[h]]?d+="-"+(s[a[h]]*1e3|0)/1e3:d+="-0";if(!l[d]){for(l[d]=1,u++,h=0;h<a.length;h++)s[a[h]]&&(i[a[h]]+=s[a[h]]);delete s.feasible,delete s.result,m.push(s)}}for(_=0;_<a.length;_++)t.constraints[a[_]]={equal:i[a[_]]/u};t.optimize="cheater-"+Math.random(),t.opType="max";for(_ in t.variables)t.variables[_].cheater=1;for(_ in m)for(g in m[_])p[g]=p[g]||{min:1e99,max:-1e99};for(_ in p)for(g in m)m[g][_]?(m[g][_]>p[_].max&&(p[_].max=m[g][_]),m[g][_]<p[_].min&&(p[_].min=m[g][_])):(m[g][_]=0,p[_].min=0);return s=e.Solve(t,void 0,void 0,!0),{midpoint:s,vertices:m,ranges:p}}),Up}var Gp,Kw;function dF(){if(Kw)return Gp;Kw=1;var e=iF(),t=oF(),n=NE(),i=vg(),a=aF(),s=i.Constraint,u=i.Variable,l=i.Numeral,d=i.Term,p=cF(),m=function(){this.Model=t,this.branchAndCut=n,this.Constraint=s,this.Variable=u,this.Numeral=l,this.Term=d,this.Tableau=e,this.lastSolvedModel=null,this.External=p,this.Solve=function(_,h,g,x){if(x)for(var q in a)_=a[q](_);if(!_)throw new Error("Solver requires a model to operate on");if(typeof _.optimize=="object"&&Object.keys(_.optimize>1))return Gw()(this,_);if(_.external){var w=Object.keys(p);if(w=JSON.stringify(w),!_.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+w);if(!p[_.external.solver])throw new Error("No support (yet) for "+_.external.solver+". Please use one of these instead:"+w);return p[_.external.solver].solve(_)}else{_ instanceof t||(_=new t(h).loadJson(_));var b=_.solve();if(this.lastSolvedModel=_,b.solutionSet=b.generateSolutionSet(),g)return b;var C={};return C.feasible=b.feasible,C.result=b.evaluation,C.bounded=b.bounded,b._tableau.__isIntegral&&(C.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(S){b.solutionSet[S]!==0&&(C[S]=b.solutionSet[S])}),C}},this.ReformatLP=$0(),this.MultiObjective=function(_){return Gw()(this,_)}};return typeof window=="object"?window.solver=new m:typeof self=="object"&&(self.solver=new m),Gp=new m,Gp}var pF=dF();const fF=Va(pF),No=1e-8,jE=1e15,PE=1e12,RE=1e9,H0=1e3,W0=100,VE=10,FE=1e-5,OE=1e-6,_F=(e,t=new Set)=>{const n={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(i=>{var E,N;const a=e.nodes[i],s=`m_${i}`,u=`mc_${i}`,l=a.machineCount||0,d=a.machineCountMode||"free",p=a.cappedMachineCount;a.cycleTime;const m=a.recipe.power_consumption;let _=0;typeof m=="number"?_=m:typeof m=="object"&&m!==null&&"max"in m&&(_=m.max);const h=a.recipe.pollution,g=typeof h=="number"?h:0,x=gt(a.recipe.machine_id),q=x&&typeof x.cost=="number"?x.cost:0,w=(((E=a.recipe.inputs)==null?void 0:E.length)||0)+(((N=a.recipe.outputs)==null?void 0:N.length)||0),b=Math.ceil(_/15e5)*2,C=w*2,S=1+b+C;n.variables[s]={total_cost:FE*_+VE*g+OE*q},n.variables[u]={total_cost:RE*S},n.ints[u]=1;const M=`ceiling_${i}`;n.constraints[M]={min:0},n.variables[u][M]=1,n.variables[s][M]=-1;const I=`nonneg_${i}`;if(n.constraints[I]={min:0},n.variables[s][I]=1,d==="locked"){const R=`lock_${i}`;n.constraints[R]={equal:l},n.variables[s][R]=1}else if(d==="capped"&&typeof p=="number"){const R=`cap_${i}`;n.constraints[R]={max:p},n.variables[s][R]=1}}),e.connections.forEach(i=>{const a=`f_${i.id}`;n.variables[a]={total_cost:0};const s=`flow_nonneg_${i.id}`;n.constraints[s]={min:0},n.variables[a][s]=1}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.has(i);a.outputs.forEach((u,l)=>{const d=`flow_out_${i}_${l}`,p=`excess_${i}_${l}`,m=e.connections.filter(C=>C.sourceNodeId===i&&C.sourceOutputIndex===l),h=m.length>0?H0:W0,g=s?1:h;n.variables[p]={total_cost:g,[d]:-1};const x=`m_${i}`;let q=a.cycleTime;(typeof q!="number"||q<=0)&&(q=1);const w=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof w!="number")return;const b=a.isMineshaftDrill?w:w/q;n.constraints[d]={equal:0},n.variables[x][d]||(n.variables[x][d]=0),n.variables[x][d]+=b,m.forEach(C=>{const S=`f_${C.id}`;n.variables[S][d]||(n.variables[S][d]=0),n.variables[S][d]-=1})}),a.inputs.forEach((u,l)=>{const d=e.connections.filter(M=>M.targetNodeId===i&&M.targetInputIndex===l);if(d.length===0)return;const p=`flow_in_${i}_${l}`,m=`deficit_${i}_${l}`,_=`m_${i}`;let h=a.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const g=u.quantity;if(typeof g!="number")return;const x=a.isMineshaftDrill?g:g/h;n.variables[m]={total_cost:PE,[p]:1};const q=`deficit_indicator_${i}_${l}`;n.variables[q]={total_cost:jE},n.ints[q]=1;const w=`deficit_binary_${i}_${l}`;n.constraints[w]={min:0,max:1},n.variables[q][w]=1;const b=`deficit_link_${i}_${l}`;n.constraints[b]={max:0};const C=x*1e4;n.variables[m][b]=1,n.variables[q][b]=-C,n.constraints[p]={min:0},d.forEach(M=>{const I=`f_${M.id}`;n.variables[I][p]||(n.variables[I][p]=0),n.variables[I][p]+=1}),n.variables[_][p]||(n.variables[_][p]=0),n.variables[_][p]-=x;const S=`max_flow_in_${i}_${l}`;n.constraints[S]={max:0},d.forEach(M=>{const I=`f_${M.id}`;n.variables[I][S]||(n.variables[I][S]=0),n.variables[I][S]+=1}),n.variables[_][S]=-x})}),t.forEach(i=>{const a=e.nodes[i];a&&a.outputs.forEach((s,u)=>{const l=`excess_${i}_${u}`,d=e.connections.filter(w=>w.sourceNodeId===i&&w.sourceOutputIndex===u);let p=a.cycleTime;(typeof p!="number"||p<=0)&&(p=1);const m=s.originalQuantity!==void 0?s.originalQuantity:s.quantity;if(typeof m!="number")return;const h=(a.isMineshaftDrill?m:m/p)*(a.machineCount||0);let g=0;d.forEach(w=>{const b=e.nodes[w.targetNodeId];if(!b)return;const C=b.inputs[w.targetInputIndex];if(!C)return;let S=b.cycleTime;(typeof S!="number"||S<=0)&&(S=1);const M=C.quantity;if(typeof M!="number")return;const E=(b.isMineshaftDrill?M:M/S)*(b.machineCount||0);g+=Math.min(h-g,E)});const x=Math.max(0,h-g),q=`min_excess_${i}_${u}`;n.constraints[q]={min:x},n.variables[l][q]=1})}),n},mF=e=>{const t=Object.keys(e.nodes),n=new Map;t.forEach((g,x)=>n.set(g,x));const i=t.length,a=new Int32Array(i).fill(-1),s=new Int32Array(i),u=new Uint8Array(i),l=[];let d=0;const p=[],m=g=>{a[g]=d,s[g]=d,d++,l.push(g),u[g]=1;const x=t[g];if(e.nodes[x].outputs.forEach(w=>{const b=e.products[w.productId];b&&b.connections.forEach(C=>{if(C.sourceNodeId!==x)return;const S=n.get(C.targetNodeId);S!==void 0&&(a[S]===-1?(m(S),s[g]=Math.min(s[g],s[S])):u[S]&&(s[g]=Math.min(s[g],a[S])))})}),s[g]===a[g]){const w=[];let b;do b=l.pop(),u[b]=0,w.push(t[b]);while(b!==g);w.length>1&&p.push(w)}};for(let g=0;g<i;g++)a[g]===-1&&m(g);const _=[];p.forEach(g=>{var S;const x=new Set(g),q=new Set;if(e.connections.forEach(M=>{const I=x.has(M.sourceNodeId),E=x.has(M.targetNodeId);if(I&&E){const N=M.productId;q.add(N)}}),q.size===0)return;let w=!1;for(const M of q)if(e.connections.some(E=>{if(E.productId!==M)return!1;const N=!x.has(E.sourceNodeId),R=x.has(E.targetNodeId);return N&&R})){w=!0;break}if(w)return;let b=!0;const C=[];for(const M of q){let I=!1;for(const E of g){const N=e.nodes[E];let R=N.cycleTime;(typeof R!="number"||R<=0)&&(R=1);const P=N.isMineshaftDrill||((S=N.recipe)==null?void 0:S.isMineshaftDrill);let D=0;N.outputs.forEach(O=>{if(O.productId===M){const Q=O.originalQuantity!==void 0?O.originalQuantity:O.quantity;typeof Q=="number"&&(D+=P?Q:Q/R)}});let F=0;if(N.inputs.forEach(O=>{O.productId===M&&typeof O.quantity=="number"&&(F+=P?O.quantity:O.quantity/R)}),D>=F-1e-10){I=!0;break}}I||(b=!1,C.push(M))}b||_.push({nodes:g,nodeNames:g.map(M=>{var I,E;return((E=(I=e.nodes[M])==null?void 0:I.recipe)==null?void 0:E.name)||M}),problematicProducts:C})});const h=new Set;return p.forEach(g=>g.forEach(x=>h.add(x))),t.forEach(g=>{var w;if(h.has(g))return;const x=e.nodes[g];if(!x)return;const q=new Map;if(e.connections.forEach(b=>{if(b.sourceNodeId===g&&b.targetNodeId===g){const C=b.productId,S=x.outputs[b.sourceOutputIndex],M=x.inputs[b.targetInputIndex];S&&M&&S.productId===C&&M.productId===C&&q.set(C,{inputRate:M.rate,outputRate:S.rate})}}),q.size>0){let b=!1;for(const[C,S]of q){const M=e.products[C],I=1e-10;if(!(S.outputRate>S.inputRate+I)){if(S.outputRate<S.inputRate-I){if(!M.producers.some(N=>N.nodeId!==g)){b=!0;break}continue}if(Math.abs(S.outputRate-S.inputRate)<I){const E=M.consumers.some(R=>R.nodeId!==g),N=M.producers.some(R=>R.nodeId!==g);if(!E&&!N)continue;if(E&&!N){b=!0;break}if(N)continue}}}b&&_.push({nodes:[g],nodeNames:[((w=x.recipe)==null?void 0:w.name)||g],isSelfFeeding:!0})}}),_},hF=(e,t=new Set)=>{const n=mF(e);if(n.length>0)return{feasible:!1,unsustainableLoops:n,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const i=_F(e,t),a=Object.keys(i.variables).length,s=Object.keys(i.constraints).length,u=Object.keys(i.ints).length,l=a-u,d=Object.keys(e.nodes).length,p=e.connections.length;console.log("%c[LP Solver] Model Statistics:","color: #3498db; font-weight: bold"),console.log(`  Graph: ${d} nodes, ${p} connections`),console.log(`  Variables: ${a} total (${l} continuous, ${u} integer)`),console.log(`  Constraints: ${s}`);let m=0,_=0,h=0,g=0,x=0,q=0;Object.keys(i.variables).forEach(M=>{M.startsWith("m_")&&!M.startsWith("mc_")?m++:M.startsWith("mc_")?_++:M.startsWith("f_")?h++:M.startsWith("excess_")?g++:M.startsWith("deficit_")&&!M.includes("indicator")?x++:M.startsWith("deficit_indicator_")&&q++}),console.log("  Variable breakdown:"),console.log(`    Machine counts: ${m}`),console.log(`    Ceiling vars (model count): ${_}`),console.log(`    Flow vars: ${h}`),console.log(`    Excess vars (amount only): ${g}`),console.log(`    Deficit vars: ${x}`),console.log(`    Deficit indicators: ${q}`),console.log("%c[LP Solver] Solving...","color: #f39c12; font-weight: bold");const w=performance.now(),b=fF.Solve(i),S=performance.now()-w;if(b.feasible){console.log(`%c[LP Solver] Solution found in ${S.toFixed(2)}ms`,"color: #2ecc71; font-weight: bold"),console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let M=0,I=0,E=0,N=0,R=0,P=0,D=0,F=0,O=0,Q=0,j=0,U=0,H=0,te=0,G=0,Y=0,oe=0;Object.keys(b).forEach(X=>{var _e,W;if(X.startsWith("deficit_indicator_")){const J=b[X]||0;J>No&&(Q+=J,I+=J*jE)}if(X.startsWith("deficit_")&&!X.includes("indicator")){const J=b[X]||0;J>No&&(j+=J,E+=J*PE)}if(X.startsWith("excess_")){const J=b[X]||0;if(J>No){const re=X.split("_"),ue=re.slice(1,-1).join("_"),ae=parseInt(re[re.length-1]),he=e.connections.some(je=>je.sourceNodeId===ue&&je.sourceOutputIndex===ae),Ee=he?H0:W0;he?U+=J:H+=J,R+=J*Ee}}if(X.startsWith("m_")){const J=X.substring(2),re=e.nodes[J],ue=b[X]||0;re.cycleTime;const ae=re.recipe.power_consumption;let he=0;typeof ae=="number"?he=ae:typeof ae=="object"&&ae!==null&&"max"in ae&&(he=ae.max);const Ee=re.recipe.pollution,je=typeof Ee=="number"?Ee:0,Ie=gt(re.recipe.machine_id),Te=Ie&&typeof Ie.cost=="number"?Ie.cost:0,Pe=(((_e=re.recipe.inputs)==null?void 0:_e.length)||0)+(((W=re.recipe.outputs)==null?void 0:W.length)||0),Fe=Math.ceil(he/15e5)*2,We=Pe*2,Be=1+Fe+We,rt=Math.ceil(ue),et=rt*Be,pt=ue*he,lt=ue*je,ct=rt*Te;te+=et,G+=pt,Y+=lt,oe+=ct,P+=et*RE,D+=pt*FE,F+=lt*VE,O+=ct*OE}}),M=I+E+N+R+P+D+F+O,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${Q} inputs (cost: ${I.toExponential(2)})`),console.log(`    Deficiency amount: ${j.toFixed(4)} (cost: ${E.toExponential(2)})`),console.log(`    Connected excess amount: ${U.toFixed(4)} (cost: ${(U*H0).toExponential(2)})`),console.log(`    Unconnected excess amount: ${H.toFixed(4)} (cost: ${(H*W0).toExponential(2)})`),console.log(`    Model count: ${te.toFixed(0)} (cost: ${P.toExponential(2)})`),console.log(`    Power: ${G.toFixed(0)} W (cost: ${D.toFixed(2)})`),console.log(`    Pollution: ${Y.toFixed(2)} %/hr (cost: ${F.toFixed(2)})`),console.log(`    Machine cost: $${oe.toFixed(0)} (cost: ${O.toFixed(2)})`),console.log(`    Total: ${M.toExponential(2)}`),console.log("  Machine Count Changes:");let z=!1;Object.keys(e.nodes).forEach(X=>{var ae;const _e=e.nodes[X],W=`m_${X}`,J=b[W]||0,re=_e.machineCount||0;Math.abs(J-re)>No&&(z=!0,console.log(`    ${((ae=_e==null?void 0:_e.recipe)==null?void 0:ae.name)||X}: ${re.toFixed(4)}  ${J.toFixed(4)}`))}),z||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return b},yF=(e,t)=>{const n=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(t.nodes).forEach(i=>{const a=t.nodes[i],s=`m_${i}`,u=e[s]!==void 0?e[s]:0,l=a.machineCount||0;if(u>=-No){const d=Math.max(0,u);Math.abs(d-l)>No&&n.set(i,d)}}),n},Yw=(e,t,n,i={})=>{const{allowDeficiency:a=!1}=i;if(n.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const s=Vs(e,t),u=new Set(n.map(_=>_.recipeBoxId)),l=hF(s,u);if(!l.feasible){if(l.unsustainableLoops){const _=l.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${_}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let d=!1;const p=[];if(Object.keys(l).forEach(_=>{var h;if(_.startsWith("deficit_")&&!_.includes("indicator")){const g=l[_]||0;if(g>No){d=!0;const x=_.split("_"),q=parseInt(x[x.length-1]),w=x.slice(1,-1).join("_"),b=s.nodes[w];if(b){const C=b.inputs[q];p.push({nodeId:w,nodeName:((h=b.recipe)==null?void 0:h.name)||w,inputIndex:q,productId:C==null?void 0:C.productId,deficitAmount:g})}}}}),d&&!a){const _=p.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${_}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:p}}const m=yF(l,s);return{success:m.size>0,updates:m,converged:!0,iterations:1,message:m.size>0?`Updated ${m.size} nodes`:"Network already balanced"}};function xg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kp,Qw;function gF(){if(Qw)return Kp;Qw=1;function e(){this.__data__=[],this.size=0}return Kp=e,Kp}var Yp,Xw;function Aa(){if(Xw)return Yp;Xw=1;function e(t,n){return t===n||t!==t&&n!==n}return Yp=e,Yp}var Qp,Zw;function yc(){if(Zw)return Qp;Zw=1;var e=Aa();function t(n,i){for(var a=n.length;a--;)if(e(n[a][0],i))return a;return-1}return Qp=t,Qp}var Xp,Jw;function vF(){if(Jw)return Xp;Jw=1;var e=yc(),t=Array.prototype,n=t.splice;function i(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var l=s.length-1;return u==l?s.pop():n.call(s,u,1),--this.size,!0}return Xp=i,Xp}var Zp,eb;function xF(){if(eb)return Zp;eb=1;var e=yc();function t(n){var i=this.__data__,a=e(i,n);return a<0?void 0:i[a][1]}return Zp=t,Zp}var Jp,tb;function wF(){if(tb)return Jp;tb=1;var e=yc();function t(n){return e(this.__data__,n)>-1}return Jp=t,Jp}var ef,rb;function bF(){if(rb)return ef;rb=1;var e=yc();function t(n,i){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return ef=t,ef}var tf,nb;function gc(){if(nb)return tf;nb=1;var e=gF(),t=vF(),n=xF(),i=wF(),a=bF();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,tf=s,tf}var rf,ib;function qF(){if(ib)return rf;ib=1;var e=gc();function t(){this.__data__=new e,this.size=0}return rf=t,rf}var nf,ob;function SF(){if(ob)return nf;ob=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return nf=e,nf}var of,ab;function CF(){if(ab)return of;ab=1;function e(t){return this.__data__.get(t)}return of=e,of}var af,sb;function kF(){if(sb)return af;sb=1;function e(t){return this.__data__.has(t)}return af=e,af}var sf,ub;function AE(){if(ub)return sf;ub=1;var e=typeof ul=="object"&&ul&&ul.Object===Object&&ul;return sf=e,sf}var uf,lb;function Rn(){if(lb)return uf;lb=1;var e=AE(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return uf=n,uf}var lf,cb;function La(){if(cb)return lf;cb=1;var e=Rn(),t=e.Symbol;return lf=t,lf}var cf,db;function MF(){if(db)return cf;db=1;var e=La(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;function s(u){var l=n.call(u,a),d=u[a];try{u[a]=void 0;var p=!0}catch{}var m=i.call(u);return p&&(l?u[a]=d:delete u[a]),m}return cf=s,cf}var df,pb;function EF(){if(pb)return df;pb=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return df=n,df}var pf,fb;function Lo(){if(fb)return pf;fb=1;var e=La(),t=MF(),n=EF(),i="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(l){return l==null?l===void 0?a:i:s&&s in Object(l)?t(l):n(l)}return pf=u,pf}var ff,_b;function un(){if(_b)return ff;_b=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ff=e,ff}var _f,mb;function au(){if(mb)return _f;mb=1;var e=Lo(),t=un(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(l){if(!t(l))return!1;var d=e(l);return d==i||d==a||d==n||d==s}return _f=u,_f}var mf,hb;function IF(){if(hb)return mf;hb=1;var e=Rn(),t=e["__core-js_shared__"];return mf=t,mf}var hf,yb;function TF(){if(yb)return hf;yb=1;var e=IF(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!t&&t in i}return hf=n,hf}var yf,gb;function LE(){if(gb)return yf;gb=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return yf=n,yf}var gf,vb;function NF(){if(vb)return gf;vb=1;var e=au(),t=TF(),n=un(),i=LE(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(h){if(!n(h)||t(h))return!1;var g=e(h)?m:s;return g.test(i(h))}return gf=_,gf}var vf,xb;function jF(){if(xb)return vf;xb=1;function e(t,n){return t==null?void 0:t[n]}return vf=e,vf}var xf,wb;function Do(){if(wb)return xf;wb=1;var e=NF(),t=jF();function n(i,a){var s=t(i,a);return e(s)?s:void 0}return xf=n,xf}var wf,bb;function wg(){if(bb)return wf;bb=1;var e=Do(),t=Rn(),n=e(t,"Map");return wf=n,wf}var bf,qb;function vc(){if(qb)return bf;qb=1;var e=Do(),t=e(Object,"create");return bf=t,bf}var qf,Sb;function PF(){if(Sb)return qf;Sb=1;var e=vc();function t(){this.__data__=e?e(null):{},this.size=0}return qf=t,qf}var Sf,Cb;function RF(){if(Cb)return Sf;Cb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Sf=e,Sf}var Cf,kb;function VF(){if(kb)return Cf;kb=1;var e=vc(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var l=u[s];return l===t?void 0:l}return i.call(u,s)?u[s]:void 0}return Cf=a,Cf}var kf,Mb;function FF(){if(Mb)return kf;Mb=1;var e=vc(),t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return kf=i,kf}var Mf,Eb;function OF(){if(Eb)return Mf;Eb=1;var e=vc(),t="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&a===void 0?t:a,this}return Mf=n,Mf}var Ef,Ib;function AF(){if(Ib)return Ef;Ib=1;var e=PF(),t=RF(),n=VF(),i=FF(),a=OF();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Ef=s,Ef}var If,Tb;function LF(){if(Tb)return If;Tb=1;var e=AF(),t=gc(),n=wg();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return If=i,If}var Tf,Nb;function DF(){if(Nb)return Tf;Nb=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Tf=e,Tf}var Nf,jb;function xc(){if(jb)return Nf;jb=1;var e=DF();function t(n,i){var a=n.__data__;return e(i)?a[typeof i=="string"?"string":"hash"]:a.map}return Nf=t,Nf}var jf,Pb;function BF(){if(Pb)return jf;Pb=1;var e=xc();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return jf=t,jf}var Pf,Rb;function zF(){if(Rb)return Pf;Rb=1;var e=xc();function t(n){return e(this,n).get(n)}return Pf=t,Pf}var Rf,Vb;function $F(){if(Vb)return Rf;Vb=1;var e=xc();function t(n){return e(this,n).has(n)}return Rf=t,Rf}var Vf,Fb;function HF(){if(Fb)return Vf;Fb=1;var e=xc();function t(n,i){var a=e(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return Vf=t,Vf}var Ff,Ob;function bg(){if(Ob)return Ff;Ob=1;var e=LF(),t=BF(),n=zF(),i=$F(),a=HF();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Ff=s,Ff}var Of,Ab;function WF(){if(Ab)return Of;Ab=1;var e=gc(),t=wg(),n=bg(),i=200;function a(s,u){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<i-1)return d.push([s,u]),this.size=++l.size,this;l=this.__data__=new n(d)}return l.set(s,u),this.size=l.size,this}return Of=a,Of}var Af,Lb;function wc(){if(Lb)return Af;Lb=1;var e=gc(),t=qF(),n=SF(),i=CF(),a=kF(),s=WF();function u(l){var d=this.__data__=new e(l);this.size=d.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,Af=u,Af}var Lf,Db;function qg(){if(Db)return Lf;Db=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a&&n(t[i],i,t)!==!1;);return t}return Lf=e,Lf}var Df,Bb;function DE(){if(Bb)return Df;Bb=1;var e=Do(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Df=t,Df}var Bf,zb;function bc(){if(zb)return Bf;zb=1;var e=DE();function t(n,i,a){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return Bf=t,Bf}var zf,$b;function qc(){if($b)return zf;$b=1;var e=bc(),t=Aa(),n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l){var d=s[u];(!(i.call(s,u)&&t(d,l))||l===void 0&&!(u in s))&&e(s,u,l)}return zf=a,zf}var $f,Hb;function su(){if(Hb)return $f;Hb=1;var e=qc(),t=bc();function n(i,a,s,u){var l=!s;s||(s={});for(var d=-1,p=a.length;++d<p;){var m=a[d],_=u?u(s[m],i[m],m,s,i):void 0;_===void 0&&(_=i[m]),l?t(s,m,_):e(s,m,_)}return s}return $f=n,$f}var Hf,Wb;function UF(){if(Wb)return Hf;Wb=1;function e(t,n){for(var i=-1,a=Array(t);++i<t;)a[i]=n(i);return a}return Hf=e,Hf}var Wf,Ub;function Xn(){if(Ub)return Wf;Ub=1;function e(t){return t!=null&&typeof t=="object"}return Wf=e,Wf}var Uf,Gb;function GF(){if(Gb)return Uf;Gb=1;var e=Lo(),t=Xn(),n="[object Arguments]";function i(a){return t(a)&&e(a)==n}return Uf=i,Uf}var Gf,Kb;function uu(){if(Kb)return Gf;Kb=1;var e=GF(),t=Xn(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&i.call(u,"callee")&&!a.call(u,"callee")};return Gf=s,Gf}var Kf,Yb;function Ot(){if(Yb)return Kf;Yb=1;var e=Array.isArray;return Kf=e,Kf}var ks={exports:{}},Yf,Qb;function KF(){if(Qb)return Yf;Qb=1;function e(){return!1}return Yf=e,Yf}ks.exports;var Xb;function Da(){return Xb||(Xb=1,(function(e,t){var n=Rn(),i=KF(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,l=u?n.Buffer:void 0,d=l?l.isBuffer:void 0,p=d||i;e.exports=p})(ks,ks.exports)),ks.exports}var Qf,Zb;function Sc(){if(Zb)return Qf;Zb=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return Qf=n,Qf}var Xf,Jb;function Sg(){if(Jb)return Xf;Jb=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Xf=t,Xf}var Zf,e2;function YF(){if(e2)return Zf;e2=1;var e=Lo(),t=Sg(),n=Xn(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",m="[object Number]",_="[object Object]",h="[object RegExp]",g="[object Set]",x="[object String]",q="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",C="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",R="[object Uint8ClampedArray]",P="[object Uint16Array]",D="[object Uint32Array]",F={};F[C]=F[S]=F[M]=F[I]=F[E]=F[N]=F[R]=F[P]=F[D]=!0,F[i]=F[a]=F[w]=F[s]=F[b]=F[u]=F[l]=F[d]=F[p]=F[m]=F[_]=F[h]=F[g]=F[x]=F[q]=!1;function O(Q){return n(Q)&&t(Q.length)&&!!F[e(Q)]}return Zf=O,Zf}var Jf,t2;function Cc(){if(t2)return Jf;t2=1;function e(t){return function(n){return t(n)}}return Jf=e,Jf}var Ms={exports:{}};Ms.exports;var r2;function Cg(){return r2||(r2=1,(function(e,t){var n=AE(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s&&n.process,l=(function(){try{var d=a&&a.require&&a.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}})();e.exports=l})(Ms,Ms.exports)),Ms.exports}var e_,n2;function lu(){if(n2)return e_;n2=1;var e=YF(),t=Cc(),n=Cg(),i=n&&n.isTypedArray,a=i?t(i):e;return e_=a,e_}var t_,i2;function BE(){if(i2)return t_;i2=1;var e=UF(),t=uu(),n=Ot(),i=Da(),a=Sc(),s=lu(),u=Object.prototype,l=u.hasOwnProperty;function d(p,m){var _=n(p),h=!_&&t(p),g=!_&&!h&&i(p),x=!_&&!h&&!g&&s(p),q=_||h||g||x,w=q?e(p.length,String):[],b=w.length;for(var C in p)(m||l.call(p,C))&&!(q&&(C=="length"||g&&(C=="offset"||C=="parent")||x&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,b)))&&w.push(C);return w}return t_=d,t_}var r_,o2;function kc(){if(o2)return r_;o2=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||e;return n===a}return r_=t,r_}var n_,a2;function zE(){if(a2)return n_;a2=1;function e(t,n){return function(i){return t(n(i))}}return n_=e,n_}var i_,s2;function QF(){if(s2)return i_;s2=1;var e=zE(),t=e(Object.keys,Object);return i_=t,i_}var o_,u2;function kg(){if(u2)return o_;u2=1;var e=kc(),t=QF(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&u.push(l);return u}return o_=a,o_}var a_,l2;function wi(){if(l2)return a_;l2=1;var e=au(),t=Sg();function n(i){return i!=null&&t(i.length)&&!e(i)}return a_=n,a_}var s_,c2;function eo(){if(c2)return s_;c2=1;var e=BE(),t=kg(),n=wi();function i(a){return n(a)?e(a):t(a)}return s_=i,s_}var u_,d2;function XF(){if(d2)return u_;d2=1;var e=su(),t=eo();function n(i,a){return i&&e(a,t(a),i)}return u_=n,u_}var l_,p2;function ZF(){if(p2)return l_;p2=1;function e(t){var n=[];if(t!=null)for(var i in Object(t))n.push(i);return n}return l_=e,l_}var c_,f2;function JF(){if(f2)return c_;f2=1;var e=un(),t=kc(),n=ZF(),i=Object.prototype,a=i.hasOwnProperty;function s(u){if(!e(u))return n(u);var l=t(u),d=[];for(var p in u)p=="constructor"&&(l||!a.call(u,p))||d.push(p);return d}return c_=s,c_}var d_,_2;function Bo(){if(_2)return d_;_2=1;var e=BE(),t=JF(),n=wi();function i(a){return n(a)?e(a,!0):t(a)}return d_=i,d_}var p_,m2;function eO(){if(m2)return p_;m2=1;var e=su(),t=Bo();function n(i,a){return i&&e(a,t(a),i)}return p_=n,p_}var Es={exports:{}};Es.exports;var h2;function $E(){return h2||(h2=1,(function(e,t){var n=Rn(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?n.Buffer:void 0,l=u?u.allocUnsafe:void 0;function d(p,m){if(m)return p.slice();var _=p.length,h=l?l(_):new p.constructor(_);return p.copy(h),h}e.exports=d})(Es,Es.exports)),Es.exports}var f_,y2;function HE(){if(y2)return f_;y2=1;function e(t,n){var i=-1,a=t.length;for(n||(n=Array(a));++i<a;)n[i]=t[i];return n}return f_=e,f_}var __,g2;function WE(){if(g2)return __;g2=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=0,u=[];++i<a;){var l=t[i];n(l,i,t)&&(u[s++]=l)}return u}return __=e,__}var m_,v2;function UE(){if(v2)return m_;v2=1;function e(){return[]}return m_=e,m_}var h_,x2;function Mg(){if(x2)return h_;x2=1;var e=WE(),t=UE(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(l){return i.call(u,l)}))}:t;return h_=s,h_}var y_,w2;function tO(){if(w2)return y_;w2=1;var e=su(),t=Mg();function n(i,a){return e(i,t(i),a)}return y_=n,y_}var g_,b2;function Eg(){if(b2)return g_;b2=1;function e(t,n){for(var i=-1,a=n.length,s=t.length;++i<a;)t[s+i]=n[i];return t}return g_=e,g_}var v_,q2;function Mc(){if(q2)return v_;q2=1;var e=zE(),t=e(Object.getPrototypeOf,Object);return v_=t,v_}var x_,S2;function GE(){if(S2)return x_;S2=1;var e=Eg(),t=Mc(),n=Mg(),i=UE(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var l=[];u;)e(l,n(u)),u=t(u);return l}:i;return x_=s,x_}var w_,C2;function rO(){if(C2)return w_;C2=1;var e=su(),t=GE();function n(i,a){return e(i,t(i),a)}return w_=n,w_}var b_,k2;function KE(){if(k2)return b_;k2=1;var e=Eg(),t=Ot();function n(i,a,s){var u=a(i);return t(i)?u:e(u,s(i))}return b_=n,b_}var q_,M2;function YE(){if(M2)return q_;M2=1;var e=KE(),t=Mg(),n=eo();function i(a){return e(a,n,t)}return q_=i,q_}var S_,E2;function nO(){if(E2)return S_;E2=1;var e=KE(),t=GE(),n=Bo();function i(a){return e(a,n,t)}return S_=i,S_}var C_,I2;function iO(){if(I2)return C_;I2=1;var e=Do(),t=Rn(),n=e(t,"DataView");return C_=n,C_}var k_,T2;function oO(){if(T2)return k_;T2=1;var e=Do(),t=Rn(),n=e(t,"Promise");return k_=n,k_}var M_,N2;function QE(){if(N2)return M_;N2=1;var e=Do(),t=Rn(),n=e(t,"Set");return M_=n,M_}var E_,j2;function aO(){if(j2)return E_;j2=1;var e=Do(),t=Rn(),n=e(t,"WeakMap");return E_=n,E_}var I_,P2;function Ba(){if(P2)return I_;P2=1;var e=iO(),t=wg(),n=oO(),i=QE(),a=aO(),s=Lo(),u=LE(),l="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",_="[object WeakMap]",h="[object DataView]",g=u(e),x=u(t),q=u(n),w=u(i),b=u(a),C=s;return(e&&C(new e(new ArrayBuffer(1)))!=h||t&&C(new t)!=l||n&&C(n.resolve())!=p||i&&C(new i)!=m||a&&C(new a)!=_)&&(C=function(S){var M=s(S),I=M==d?S.constructor:void 0,E=I?u(I):"";if(E)switch(E){case g:return h;case x:return l;case q:return p;case w:return m;case b:return _}return M}),I_=C,I_}var T_,R2;function sO(){if(R2)return T_;R2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=i.length,s=new i.constructor(a);return a&&typeof i[0]=="string"&&t.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return T_=n,T_}var N_,V2;function XE(){if(V2)return N_;V2=1;var e=Rn(),t=e.Uint8Array;return N_=t,N_}var j_,F2;function Ig(){if(F2)return j_;F2=1;var e=XE();function t(n){var i=new n.constructor(n.byteLength);return new e(i).set(new e(n)),i}return j_=t,j_}var P_,O2;function uO(){if(O2)return P_;O2=1;var e=Ig();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return P_=t,P_}var R_,A2;function lO(){if(A2)return R_;A2=1;var e=/\w*$/;function t(n){var i=new n.constructor(n.source,e.exec(n));return i.lastIndex=n.lastIndex,i}return R_=t,R_}var V_,L2;function cO(){if(L2)return V_;L2=1;var e=La(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function i(a){return n?Object(n.call(a)):{}}return V_=i,V_}var F_,D2;function ZE(){if(D2)return F_;D2=1;var e=Ig();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return F_=t,F_}var O_,B2;function dO(){if(B2)return O_;B2=1;var e=Ig(),t=uO(),n=lO(),i=cO(),a=ZE(),s="[object Boolean]",u="[object Date]",l="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",_="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",M="[object Uint8Array]",I="[object Uint8ClampedArray]",E="[object Uint16Array]",N="[object Uint32Array]";function R(P,D,F){var O=P.constructor;switch(D){case g:return e(P);case s:case u:return new O(+P);case x:return t(P,F);case q:case w:case b:case C:case S:case M:case I:case E:case N:return a(P,F);case l:return new O;case d:case _:return new O(P);case p:return n(P);case m:return new O;case h:return i(P)}}return O_=R,O_}var A_,z2;function JE(){if(z2)return A_;z2=1;var e=un(),t=Object.create,n=(function(){function i(){}return function(a){if(!e(a))return{};if(t)return t(a);i.prototype=a;var s=new i;return i.prototype=void 0,s}})();return A_=n,A_}var L_,$2;function eI(){if($2)return L_;$2=1;var e=JE(),t=Mc(),n=kc();function i(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return L_=i,L_}var D_,H2;function pO(){if(H2)return D_;H2=1;var e=Ba(),t=Xn(),n="[object Map]";function i(a){return t(a)&&e(a)==n}return D_=i,D_}var B_,W2;function fO(){if(W2)return B_;W2=1;var e=pO(),t=Cc(),n=Cg(),i=n&&n.isMap,a=i?t(i):e;return B_=a,B_}var z_,U2;function _O(){if(U2)return z_;U2=1;var e=Ba(),t=Xn(),n="[object Set]";function i(a){return t(a)&&e(a)==n}return z_=i,z_}var $_,G2;function mO(){if(G2)return $_;G2=1;var e=_O(),t=Cc(),n=Cg(),i=n&&n.isSet,a=i?t(i):e;return $_=a,$_}var H_,K2;function tI(){if(K2)return H_;K2=1;var e=wc(),t=qg(),n=qc(),i=XF(),a=eO(),s=$E(),u=HE(),l=tO(),d=rO(),p=YE(),m=nO(),_=Ba(),h=sO(),g=dO(),x=eI(),q=Ot(),w=Da(),b=fO(),C=un(),S=mO(),M=eo(),I=Bo(),E=1,N=2,R=4,P="[object Arguments]",D="[object Array]",F="[object Boolean]",O="[object Date]",Q="[object Error]",j="[object Function]",U="[object GeneratorFunction]",H="[object Map]",te="[object Number]",G="[object Object]",Y="[object RegExp]",oe="[object Set]",z="[object String]",X="[object Symbol]",_e="[object WeakMap]",W="[object ArrayBuffer]",J="[object DataView]",re="[object Float32Array]",ue="[object Float64Array]",ae="[object Int8Array]",he="[object Int16Array]",Ee="[object Int32Array]",je="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Te="[object Uint16Array]",Pe="[object Uint32Array]",Fe={};Fe[P]=Fe[D]=Fe[W]=Fe[J]=Fe[F]=Fe[O]=Fe[re]=Fe[ue]=Fe[ae]=Fe[he]=Fe[Ee]=Fe[H]=Fe[te]=Fe[G]=Fe[Y]=Fe[oe]=Fe[z]=Fe[X]=Fe[je]=Fe[Ie]=Fe[Te]=Fe[Pe]=!0,Fe[Q]=Fe[j]=Fe[_e]=!1;function We(Be,rt,et,pt,lt,ct){var st,Cr=rt&E,Zt=rt&N,zt=rt&R;if(et&&(st=lt?et(Be,pt,lt,ct):et(Be)),st!==void 0)return st;if(!C(Be))return Be;var Jt=q(Be);if(Jt){if(st=h(Be),!Cr)return u(Be,st)}else{var ot=_(Be),Or=ot==j||ot==U;if(w(Be))return s(Be,Cr);if(ot==G||ot==P||Or&&!lt){if(st=Zt||Or?{}:x(Be),!Cr)return Zt?d(Be,a(st,Be)):l(Be,i(st,Be))}else{if(!Fe[ot])return lt?Be:{};st=g(Be,ot,Cr)}}ct||(ct=new e);var Tt=ct.get(Be);if(Tt)return Tt;ct.set(Be,st),S(Be)?Be.forEach(function($t){st.add(We($t,rt,et,$t,Be,ct))}):b(Be)&&Be.forEach(function($t,Qe){st.set(Qe,We($t,rt,et,Qe,Be,ct))});var Yr=zt?Zt?m:p:Zt?I:M,mr=Jt?void 0:Yr(Be);return t(mr||Be,function($t,Qe){mr&&(Qe=$t,$t=Be[Qe]),n(st,Qe,We($t,rt,et,Qe,Be,ct))}),st}return H_=We,H_}var W_,Y2;function hO(){if(Y2)return W_;Y2=1;var e=tI(),t=4;function n(i){return e(i,t)}return W_=n,W_}var U_,Q2;function Tg(){if(Q2)return U_;Q2=1;function e(t){return function(){return t}}return U_=e,U_}var G_,X2;function yO(){if(X2)return G_;X2=1;function e(t){return function(n,i,a){for(var s=-1,u=Object(n),l=a(n),d=l.length;d--;){var p=l[t?d:++s];if(i(u[p],p,u)===!1)break}return n}}return G_=e,G_}var K_,Z2;function Ng(){if(Z2)return K_;Z2=1;var e=yO(),t=e();return K_=t,K_}var Y_,J2;function jg(){if(J2)return Y_;J2=1;var e=Ng(),t=eo();function n(i,a){return i&&e(i,a,t)}return Y_=n,Y_}var Q_,eq;function gO(){if(eq)return Q_;eq=1;var e=wi();function t(n,i){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,l=i?u:-1,d=Object(a);(i?l--:++l<u)&&s(d[l],l,d)!==!1;);return a}}return Q_=t,Q_}var X_,tq;function Ec(){if(tq)return X_;tq=1;var e=jg(),t=gO(),n=t(e);return X_=n,X_}var Z_,rq;function zo(){if(rq)return Z_;rq=1;function e(t){return t}return Z_=e,Z_}var J_,nq;function rI(){if(nq)return J_;nq=1;var e=zo();function t(n){return typeof n=="function"?n:e}return J_=t,J_}var em,iq;function nI(){if(iq)return em;iq=1;var e=qg(),t=Ec(),n=rI(),i=Ot();function a(s,u){var l=i(s)?e:t;return l(s,n(u))}return em=a,em}var tm,oq;function iI(){return oq||(oq=1,tm=nI()),tm}var rm,aq;function vO(){if(aq)return rm;aq=1;var e=Ec();function t(n,i){var a=[];return e(n,function(s,u,l){i(s,u,l)&&a.push(s)}),a}return rm=t,rm}var nm,sq;function xO(){if(sq)return nm;sq=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return nm=t,nm}var im,uq;function wO(){if(uq)return im;uq=1;function e(t){return this.__data__.has(t)}return im=e,im}var om,lq;function oI(){if(lq)return om;lq=1;var e=bg(),t=xO(),n=wO();function i(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,om=i,om}var am,cq;function bO(){if(cq)return am;cq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(t[i],i,t))return!0;return!1}return am=e,am}var sm,dq;function aI(){if(dq)return sm;dq=1;function e(t,n){return t.has(n)}return sm=e,sm}var um,pq;function sI(){if(pq)return um;pq=1;var e=oI(),t=bO(),n=aI(),i=1,a=2;function s(u,l,d,p,m,_){var h=d&i,g=u.length,x=l.length;if(g!=x&&!(h&&x>g))return!1;var q=_.get(u),w=_.get(l);if(q&&w)return q==l&&w==u;var b=-1,C=!0,S=d&a?new e:void 0;for(_.set(u,l),_.set(l,u);++b<g;){var M=u[b],I=l[b];if(p)var E=h?p(I,M,b,l,u,_):p(M,I,b,u,l,_);if(E!==void 0){if(E)continue;C=!1;break}if(S){if(!t(l,function(N,R){if(!n(S,R)&&(M===N||m(M,N,d,p,_)))return S.push(R)})){C=!1;break}}else if(!(M===I||m(M,I,d,p,_))){C=!1;break}}return _.delete(u),_.delete(l),C}return um=s,um}var lm,fq;function qO(){if(fq)return lm;fq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a,s){i[++n]=[s,a]}),i}return lm=e,lm}var cm,_q;function Pg(){if(_q)return cm;_q=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a){i[++n]=a}),i}return cm=e,cm}var dm,mq;function SO(){if(mq)return dm;mq=1;var e=La(),t=XE(),n=Aa(),i=sI(),a=qO(),s=Pg(),u=1,l=2,d="[object Boolean]",p="[object Date]",m="[object Error]",_="[object Map]",h="[object Number]",g="[object RegExp]",x="[object Set]",q="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",C="[object DataView]",S=e?e.prototype:void 0,M=S?S.valueOf:void 0;function I(E,N,R,P,D,F,O){switch(R){case C:if(E.byteLength!=N.byteLength||E.byteOffset!=N.byteOffset)return!1;E=E.buffer,N=N.buffer;case b:return!(E.byteLength!=N.byteLength||!F(new t(E),new t(N)));case d:case p:case h:return n(+E,+N);case m:return E.name==N.name&&E.message==N.message;case g:case q:return E==N+"";case _:var Q=a;case x:var j=P&u;if(Q||(Q=s),E.size!=N.size&&!j)return!1;var U=O.get(E);if(U)return U==N;P|=l,O.set(E,N);var H=i(Q(E),Q(N),P,D,F,O);return O.delete(E),H;case w:if(M)return M.call(E)==M.call(N)}return!1}return dm=I,dm}var pm,hq;function CO(){if(hq)return pm;hq=1;var e=YE(),t=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l,d,p,m){var _=l&t,h=e(s),g=h.length,x=e(u),q=x.length;if(g!=q&&!_)return!1;for(var w=g;w--;){var b=h[w];if(!(_?b in u:i.call(u,b)))return!1}var C=m.get(s),S=m.get(u);if(C&&S)return C==u&&S==s;var M=!0;m.set(s,u),m.set(u,s);for(var I=_;++w<g;){b=h[w];var E=s[b],N=u[b];if(d)var R=_?d(N,E,b,u,s,m):d(E,N,b,s,u,m);if(!(R===void 0?E===N||p(E,N,l,d,m):R)){M=!1;break}I||(I=b=="constructor")}if(M&&!I){var P=s.constructor,D=u.constructor;P!=D&&"constructor"in s&&"constructor"in u&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(M=!1)}return m.delete(s),m.delete(u),M}return pm=a,pm}var fm,yq;function kO(){if(yq)return fm;yq=1;var e=wc(),t=sI(),n=SO(),i=CO(),a=Ba(),s=Ot(),u=Da(),l=lu(),d=1,p="[object Arguments]",m="[object Array]",_="[object Object]",h=Object.prototype,g=h.hasOwnProperty;function x(q,w,b,C,S,M){var I=s(q),E=s(w),N=I?m:a(q),R=E?m:a(w);N=N==p?_:N,R=R==p?_:R;var P=N==_,D=R==_,F=N==R;if(F&&u(q)){if(!u(w))return!1;I=!0,P=!1}if(F&&!P)return M||(M=new e),I||l(q)?t(q,w,b,C,S,M):n(q,w,N,b,C,S,M);if(!(b&d)){var O=P&&g.call(q,"__wrapped__"),Q=D&&g.call(w,"__wrapped__");if(O||Q){var j=O?q.value():q,U=Q?w.value():w;return M||(M=new e),S(j,U,b,C,M)}}return F?(M||(M=new e),i(q,w,b,C,S,M)):!1}return fm=x,fm}var _m,gq;function uI(){if(gq)return _m;gq=1;var e=kO(),t=Xn();function n(i,a,s,u,l){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:e(i,a,s,u,n,l)}return _m=n,_m}var mm,vq;function MO(){if(vq)return mm;vq=1;var e=wc(),t=uI(),n=1,i=2;function a(s,u,l,d){var p=l.length,m=p,_=!d;if(s==null)return!m;for(s=Object(s);p--;){var h=l[p];if(_&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++p<m;){h=l[p];var g=h[0],x=s[g],q=h[1];if(_&&h[2]){if(x===void 0&&!(g in s))return!1}else{var w=new e;if(d)var b=d(x,q,g,s,u,w);if(!(b===void 0?t(q,x,n|i,d,w):b))return!1}}return!0}return mm=a,mm}var hm,xq;function lI(){if(xq)return hm;xq=1;var e=un();function t(n){return n===n&&!e(n)}return hm=t,hm}var ym,wq;function EO(){if(wq)return ym;wq=1;var e=lI(),t=eo();function n(i){for(var a=t(i),s=a.length;s--;){var u=a[s],l=i[u];a[s]=[u,l,e(l)]}return a}return ym=n,ym}var gm,bq;function cI(){if(bq)return gm;bq=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return gm=e,gm}var vm,qq;function IO(){if(qq)return vm;qq=1;var e=MO(),t=EO(),n=cI();function i(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return vm=i,vm}var xm,Sq;function za(){if(Sq)return xm;Sq=1;var e=Lo(),t=Xn(),n="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&e(a)==n}return xm=i,xm}var wm,Cq;function Rg(){if(Cq)return wm;Cq=1;var e=Ot(),t=za(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,u){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:i.test(s)||!n.test(s)||u!=null&&s in Object(u)}return wm=a,wm}var bm,kq;function TO(){if(kq)return bm;kq=1;var e=bg(),t="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,l=a?a.apply(this,u):u[0],d=s.cache;if(d.has(l))return d.get(l);var p=i.apply(this,u);return s.cache=d.set(l,p)||d,p};return s.cache=new(n.Cache||e),s}return n.Cache=e,bm=n,bm}var qm,Mq;function NO(){if(Mq)return qm;Mq=1;var e=TO(),t=500;function n(i){var a=e(i,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return qm=n,qm}var Sm,Eq;function jO(){if(Eq)return Sm;Eq=1;var e=NO(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,l,d,p){s.push(d?p.replace(n,"$1"):l||u)}),s});return Sm=i,Sm}var Cm,Iq;function Ic(){if(Iq)return Cm;Iq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=n(t[i],i,t);return s}return Cm=e,Cm}var km,Tq;function PO(){if(Tq)return km;Tq=1;var e=La(),t=Ic(),n=Ot(),i=za(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(l){if(typeof l=="string")return l;if(n(l))return t(l,u)+"";if(i(l))return s?s.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return km=u,km}var Mm,Nq;function dI(){if(Nq)return Mm;Nq=1;var e=PO();function t(n){return n==null?"":e(n)}return Mm=t,Mm}var Em,jq;function Tc(){if(jq)return Em;jq=1;var e=Ot(),t=Rg(),n=jO(),i=dI();function a(s,u){return e(s)?s:t(s,u)?[s]:n(i(s))}return Em=a,Em}var Im,Pq;function cu(){if(Pq)return Im;Pq=1;var e=za();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return Im=t,Im}var Tm,Rq;function Nc(){if(Rq)return Tm;Rq=1;var e=Tc(),t=cu();function n(i,a){a=e(a,i);for(var s=0,u=a.length;i!=null&&s<u;)i=i[t(a[s++])];return s&&s==u?i:void 0}return Tm=n,Tm}var Nm,Vq;function RO(){if(Vq)return Nm;Vq=1;var e=Nc();function t(n,i,a){var s=n==null?void 0:e(n,i);return s===void 0?a:s}return Nm=t,Nm}var jm,Fq;function VO(){if(Fq)return jm;Fq=1;function e(t,n){return t!=null&&n in Object(t)}return jm=e,jm}var Pm,Oq;function pI(){if(Oq)return Pm;Oq=1;var e=Tc(),t=uu(),n=Ot(),i=Sc(),a=Sg(),s=cu();function u(l,d,p){d=e(d,l);for(var m=-1,_=d.length,h=!1;++m<_;){var g=s(d[m]);if(!(h=l!=null&&p(l,g)))break;l=l[g]}return h||++m!=_?h:(_=l==null?0:l.length,!!_&&a(_)&&i(g,_)&&(n(l)||t(l)))}return Pm=u,Pm}var Rm,Aq;function fI(){if(Aq)return Rm;Aq=1;var e=VO(),t=pI();function n(i,a){return i!=null&&t(i,a,e)}return Rm=n,Rm}var Vm,Lq;function FO(){if(Lq)return Vm;Lq=1;var e=uI(),t=RO(),n=fI(),i=Rg(),a=lI(),s=cI(),u=cu(),l=1,d=2;function p(m,_){return i(m)&&a(_)?s(u(m),_):function(h){var g=t(h,m);return g===void 0&&g===_?n(h,m):e(_,g,l|d)}}return Vm=p,Vm}var Fm,Dq;function _I(){if(Dq)return Fm;Dq=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Fm=e,Fm}var Om,Bq;function OO(){if(Bq)return Om;Bq=1;var e=Nc();function t(n){return function(i){return e(i,n)}}return Om=t,Om}var Am,zq;function AO(){if(zq)return Am;zq=1;var e=_I(),t=OO(),n=Rg(),i=cu();function a(s){return n(s)?e(i(s)):t(s)}return Am=a,Am}var Lm,$q;function bi(){if($q)return Lm;$q=1;var e=IO(),t=FO(),n=zo(),i=Ot(),a=AO();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?i(u)?t(u[0],u[1]):e(u):a(u)}return Lm=s,Lm}var Dm,Hq;function mI(){if(Hq)return Dm;Hq=1;var e=WE(),t=vO(),n=bi(),i=Ot();function a(s,u){var l=i(s)?e:t;return l(s,n(u,3))}return Dm=a,Dm}var Bm,Wq;function LO(){if(Wq)return Bm;Wq=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i,a){return i!=null&&t.call(i,a)}return Bm=n,Bm}var zm,Uq;function hI(){if(Uq)return zm;Uq=1;var e=LO(),t=pI();function n(i,a){return i!=null&&t(i,a,e)}return zm=n,zm}var $m,Gq;function DO(){if(Gq)return $m;Gq=1;var e=kg(),t=Ba(),n=uu(),i=Ot(),a=wi(),s=Da(),u=kc(),l=lu(),d="[object Map]",p="[object Set]",m=Object.prototype,_=m.hasOwnProperty;function h(g){if(g==null)return!0;if(a(g)&&(i(g)||typeof g=="string"||typeof g.splice=="function"||s(g)||l(g)||n(g)))return!g.length;var x=t(g);if(x==d||x==p)return!g.size;if(u(g))return!e(g).length;for(var q in g)if(_.call(g,q))return!1;return!0}return $m=h,$m}var Hm,Kq;function yI(){if(Kq)return Hm;Kq=1;function e(t){return t===void 0}return Hm=e,Hm}var Wm,Yq;function gI(){if(Yq)return Wm;Yq=1;var e=Ec(),t=wi();function n(i,a){var s=-1,u=t(i)?Array(i.length):[];return e(i,function(l,d,p){u[++s]=a(l,d,p)}),u}return Wm=n,Wm}var Um,Qq;function vI(){if(Qq)return Um;Qq=1;var e=Ic(),t=bi(),n=gI(),i=Ot();function a(s,u){var l=i(s)?e:n;return l(s,t(u,3))}return Um=a,Um}var Gm,Xq;function BO(){if(Xq)return Gm;Xq=1;function e(t,n,i,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(i=t[++s]);++s<u;)i=n(i,t[s],s,t);return i}return Gm=e,Gm}var Km,Zq;function zO(){if(Zq)return Km;Zq=1;function e(t,n,i,a,s){return s(t,function(u,l,d){i=a?(a=!1,u):n(i,u,l,d)}),i}return Km=e,Km}var Ym,Jq;function xI(){if(Jq)return Ym;Jq=1;var e=BO(),t=Ec(),n=bi(),i=zO(),a=Ot();function s(u,l,d){var p=a(u)?e:i,m=arguments.length<3;return p(u,n(l,4),d,m,t)}return Ym=s,Ym}var Qm,eS;function $O(){if(eS)return Qm;eS=1;var e=Lo(),t=Ot(),n=Xn(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==i}return Qm=a,Qm}var Xm,tS;function HO(){if(tS)return Xm;tS=1;var e=_I(),t=e("length");return Xm=t,Xm}var Zm,rS;function WO(){if(rS)return Zm;rS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+e+a+s+"]");function d(p){return l.test(p)}return Zm=d,Zm}var Jm,nS;function UO(){if(nS)return Jm;nS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="["+e+"]",l="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+d+")",m="[^"+e+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",x=p+"?",q="["+s+"]?",w="(?:"+g+"(?:"+[m,_,h].join("|")+")"+q+x+")*",b=q+x+w,C="(?:"+[m+l+"?",l,_,h,u].join("|")+")",S=RegExp(d+"(?="+d+")|"+C+b,"g");function M(I){for(var E=S.lastIndex=0;S.test(I);)++E;return E}return Jm=M,Jm}var eh,iS;function GO(){if(iS)return eh;iS=1;var e=HO(),t=WO(),n=UO();function i(a){return t(a)?n(a):e(a)}return eh=i,eh}var th,oS;function KO(){if(oS)return th;oS=1;var e=kg(),t=Ba(),n=wi(),i=$O(),a=GO(),s="[object Map]",u="[object Set]";function l(d){if(d==null)return 0;if(n(d))return i(d)?a(d):d.length;var p=t(d);return p==s||p==u?d.size:e(d).length}return th=l,th}var rh,aS;function YO(){if(aS)return rh;aS=1;var e=qg(),t=JE(),n=jg(),i=bi(),a=Mc(),s=Ot(),u=Da(),l=au(),d=un(),p=lu();function m(_,h,g){var x=s(_),q=x||u(_)||p(_);if(h=i(h,4),g==null){var w=_&&_.constructor;q?g=x?new w:[]:d(_)?g=l(w)?t(a(_)):{}:g={}}return(q?e:n)(_,function(b,C,S){return h(g,b,C,S)}),g}return rh=m,rh}var nh,sS;function QO(){if(sS)return nh;sS=1;var e=La(),t=uu(),n=Ot(),i=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(i&&s&&s[i])}return nh=a,nh}var ih,uS;function Vg(){if(uS)return ih;uS=1;var e=Eg(),t=QO();function n(i,a,s,u,l){var d=-1,p=i.length;for(s||(s=t),l||(l=[]);++d<p;){var m=i[d];a>0&&s(m)?a>1?n(m,a-1,s,u,l):e(l,m):u||(l[l.length]=m)}return l}return ih=n,ih}var oh,lS;function XO(){if(lS)return oh;lS=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return oh=e,oh}var ah,cS;function wI(){if(cS)return ah;cS=1;var e=XO(),t=Math.max;function n(i,a,s){return a=t(a===void 0?i.length-1:a,0),function(){for(var u=arguments,l=-1,d=t(u.length-a,0),p=Array(d);++l<d;)p[l]=u[a+l];l=-1;for(var m=Array(a+1);++l<a;)m[l]=u[l];return m[a]=s(p),e(i,this,m)}}return ah=n,ah}var sh,dS;function ZO(){if(dS)return sh;dS=1;var e=Tg(),t=DE(),n=zo(),i=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return sh=i,sh}var uh,pS;function JO(){if(pS)return uh;pS=1;var e=800,t=16,n=Date.now;function i(a){var s=0,u=0;return function(){var l=n(),d=t-(l-u);if(u=l,d>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return uh=i,uh}var lh,fS;function bI(){if(fS)return lh;fS=1;var e=ZO(),t=JO(),n=t(e);return lh=n,lh}var ch,_S;function jc(){if(_S)return ch;_S=1;var e=zo(),t=wI(),n=bI();function i(a,s){return n(t(a,s,e),a+"")}return ch=i,ch}var dh,mS;function qI(){if(mS)return dh;mS=1;function e(t,n,i,a){for(var s=t.length,u=i+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return dh=e,dh}var ph,hS;function eA(){if(hS)return ph;hS=1;function e(t){return t!==t}return ph=e,ph}var fh,yS;function tA(){if(yS)return fh;yS=1;function e(t,n,i){for(var a=i-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return fh=e,fh}var _h,gS;function rA(){if(gS)return _h;gS=1;var e=qI(),t=eA(),n=tA();function i(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return _h=i,_h}var mh,vS;function nA(){if(vS)return mh;vS=1;var e=rA();function t(n,i){var a=n==null?0:n.length;return!!a&&e(n,i,0)>-1}return mh=t,mh}var hh,xS;function iA(){if(xS)return hh;xS=1;function e(t,n,i){for(var a=-1,s=t==null?0:t.length;++a<s;)if(i(n,t[a]))return!0;return!1}return hh=e,hh}var yh,wS;function oA(){if(wS)return yh;wS=1;function e(){}return yh=e,yh}var gh,bS;function aA(){if(bS)return gh;bS=1;var e=QE(),t=oA(),n=Pg(),i=1/0,a=e&&1/n(new e([,-0]))[1]==i?function(s){return new e(s)}:t;return gh=a,gh}var vh,qS;function sA(){if(qS)return vh;qS=1;var e=oI(),t=nA(),n=iA(),i=aI(),a=aA(),s=Pg(),u=200;function l(d,p,m){var _=-1,h=t,g=d.length,x=!0,q=[],w=q;if(m)x=!1,h=n;else if(g>=u){var b=p?null:a(d);if(b)return s(b);x=!1,h=i,w=new e}else w=p?[]:q;e:for(;++_<g;){var C=d[_],S=p?p(C):C;if(C=m||C!==0?C:0,x&&S===S){for(var M=w.length;M--;)if(w[M]===S)continue e;p&&w.push(S),q.push(C)}else h(w,S,m)||(w!==q&&w.push(S),q.push(C))}return q}return vh=l,vh}var xh,SS;function SI(){if(SS)return xh;SS=1;var e=wi(),t=Xn();function n(i){return t(i)&&e(i)}return xh=n,xh}var wh,CS;function uA(){if(CS)return wh;CS=1;var e=Vg(),t=jc(),n=sA(),i=SI(),a=t(function(s){return n(e(s,1,i,!0))});return wh=a,wh}var bh,kS;function lA(){if(kS)return bh;kS=1;var e=Ic();function t(n,i){return e(i,function(a){return n[a]})}return bh=t,bh}var qh,MS;function CI(){if(MS)return qh;MS=1;var e=lA(),t=eo();function n(i){return i==null?[]:e(i,t(i))}return qh=n,qh}var Sh,ES;function ln(){if(ES)return Sh;ES=1;var e;if(typeof xg=="function")try{e={clone:hO(),constant:Tg(),each:iI(),filter:mI(),has:hI(),isArray:Ot(),isEmpty:DO(),isFunction:au(),isUndefined:yI(),keys:eo(),map:vI(),reduce:xI(),size:KO(),transform:YO(),union:uA(),values:CI()}}catch{}return e||(e=window._),Sh=e,Sh}var Ch,IS;function Fg(){if(IS)return Ch;IS=1;var e=ln();Ch=a;var t="\0",n="\0",i="";function a(m){this._isDirected=e.has(m,"directed")?m.directed:!0,this._isMultigraph=e.has(m,"multigraph")?m.multigraph:!1,this._isCompound=e.has(m,"compound")?m.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(m){return this._label=m,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultNodeLabelFn=m,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var m=this;return e.filter(this.nodes(),function(_){return e.isEmpty(m._in[_])})},a.prototype.sinks=function(){var m=this;return e.filter(this.nodes(),function(_){return e.isEmpty(m._out[_])})},a.prototype.setNodes=function(m,_){var h=arguments,g=this;return e.each(m,function(x){h.length>1?g.setNode(x,_):g.setNode(x)}),this},a.prototype.setNode=function(m,_){return e.has(this._nodes,m)?(arguments.length>1&&(this._nodes[m]=_),this):(this._nodes[m]=arguments.length>1?_:this._defaultNodeLabelFn(m),this._isCompound&&(this._parent[m]=n,this._children[m]={},this._children[n][m]=!0),this._in[m]={},this._preds[m]={},this._out[m]={},this._sucs[m]={},++this._nodeCount,this)},a.prototype.node=function(m){return this._nodes[m]},a.prototype.hasNode=function(m){return e.has(this._nodes,m)},a.prototype.removeNode=function(m){var _=this;if(e.has(this._nodes,m)){var h=function(g){_.removeEdge(_._edgeObjs[g])};delete this._nodes[m],this._isCompound&&(this._removeFromParentsChildList(m),delete this._parent[m],e.each(this.children(m),function(g){_.setParent(g)}),delete this._children[m]),e.each(e.keys(this._in[m]),h),delete this._in[m],delete this._preds[m],e.each(e.keys(this._out[m]),h),delete this._out[m],delete this._sucs[m],--this._nodeCount}return this},a.prototype.setParent=function(m,_){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(_))_=n;else{_+="";for(var h=_;!e.isUndefined(h);h=this.parent(h))if(h===m)throw new Error("Setting "+_+" as parent of "+m+" would create a cycle");this.setNode(_)}return this.setNode(m),this._removeFromParentsChildList(m),this._parent[m]=_,this._children[_][m]=!0,this},a.prototype._removeFromParentsChildList=function(m){delete this._children[this._parent[m]][m]},a.prototype.parent=function(m){if(this._isCompound){var _=this._parent[m];if(_!==n)return _}},a.prototype.children=function(m){if(e.isUndefined(m)&&(m=n),this._isCompound){var _=this._children[m];if(_)return e.keys(_)}else{if(m===n)return this.nodes();if(this.hasNode(m))return[]}},a.prototype.predecessors=function(m){var _=this._preds[m];if(_)return e.keys(_)},a.prototype.successors=function(m){var _=this._sucs[m];if(_)return e.keys(_)},a.prototype.neighbors=function(m){var _=this.predecessors(m);if(_)return e.union(_,this.successors(m))},a.prototype.isLeaf=function(m){var _;return this.isDirected()?_=this.successors(m):_=this.neighbors(m),_.length===0},a.prototype.filterNodes=function(m){var _=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});_.setGraph(this.graph());var h=this;e.each(this._nodes,function(q,w){m(w)&&_.setNode(w,q)}),e.each(this._edgeObjs,function(q){_.hasNode(q.v)&&_.hasNode(q.w)&&_.setEdge(q,h.edge(q))});var g={};function x(q){var w=h.parent(q);return w===void 0||_.hasNode(w)?(g[q]=w,w):w in g?g[w]:x(w)}return this._isCompound&&e.each(_.nodes(),function(q){_.setParent(q,x(q))}),_},a.prototype.setDefaultEdgeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultEdgeLabelFn=m,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(m,_){var h=this,g=arguments;return e.reduce(m,function(x,q){return g.length>1?h.setEdge(x,q,_):h.setEdge(x,q),q}),this},a.prototype.setEdge=function(){var m,_,h,g,x=!1,q=arguments[0];typeof q=="object"&&q!==null&&"v"in q?(m=q.v,_=q.w,h=q.name,arguments.length===2&&(g=arguments[1],x=!0)):(m=q,_=arguments[1],h=arguments[3],arguments.length>2&&(g=arguments[2],x=!0)),m=""+m,_=""+_,e.isUndefined(h)||(h=""+h);var w=l(this._isDirected,m,_,h);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=g),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(m),this.setNode(_),this._edgeLabels[w]=x?g:this._defaultEdgeLabelFn(m,_,h);var b=d(this._isDirected,m,_,h);return m=b.v,_=b.w,Object.freeze(b),this._edgeObjs[w]=b,s(this._preds[_],m),s(this._sucs[m],_),this._in[_][w]=b,this._out[m][w]=b,this._edgeCount++,this},a.prototype.edge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h);return this._edgeLabels[g]},a.prototype.hasEdge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h);return e.has(this._edgeLabels,g)},a.prototype.removeEdge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h),x=this._edgeObjs[g];return x&&(m=x.v,_=x.w,delete this._edgeLabels[g],delete this._edgeObjs[g],u(this._preds[_],m),u(this._sucs[m],_),delete this._in[_][g],delete this._out[m][g],this._edgeCount--),this},a.prototype.inEdges=function(m,_){var h=this._in[m];if(h){var g=e.values(h);return _?e.filter(g,function(x){return x.v===_}):g}},a.prototype.outEdges=function(m,_){var h=this._out[m];if(h){var g=e.values(h);return _?e.filter(g,function(x){return x.w===_}):g}},a.prototype.nodeEdges=function(m,_){var h=this.inEdges(m,_);if(h)return h.concat(this.outEdges(m,_))};function s(m,_){m[_]?m[_]++:m[_]=1}function u(m,_){--m[_]||delete m[_]}function l(m,_,h,g){var x=""+_,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}return x+i+q+i+(e.isUndefined(g)?t:g)}function d(m,_,h,g){var x=""+_,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}var b={v:x,w:q};return g&&(b.name=g),b}function p(m,_){return l(m,_.v,_.w,_.name)}return Ch}var kh,TS;function cA(){return TS||(TS=1,kh="2.1.8"),kh}var Mh,NS;function dA(){return NS||(NS=1,Mh={Graph:Fg(),version:cA()}),Mh}var Eh,jS;function pA(){if(jS)return Eh;jS=1;var e=ln(),t=Fg();Eh={write:n,read:s};function n(u){var l={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:i(u),edges:a(u)};return e.isUndefined(u.graph())||(l.value=e.clone(u.graph())),l}function i(u){return e.map(u.nodes(),function(l){var d=u.node(l),p=u.parent(l),m={v:l};return e.isUndefined(d)||(m.value=d),e.isUndefined(p)||(m.parent=p),m})}function a(u){return e.map(u.edges(),function(l){var d=u.edge(l),p={v:l.v,w:l.w};return e.isUndefined(l.name)||(p.name=l.name),e.isUndefined(d)||(p.value=d),p})}function s(u){var l=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(d){l.setNode(d.v,d.value),d.parent&&l.setParent(d.v,d.parent)}),e.each(u.edges,function(d){l.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),l}return Eh}var Ih,PS;function fA(){if(PS)return Ih;PS=1;var e=ln();Ih=t;function t(n){var i={},a=[],s;function u(l){e.has(i,l)||(i[l]=!0,s.push(l),e.each(n.successors(l),u),e.each(n.predecessors(l),u))}return e.each(n.nodes(),function(l){s=[],u(l),s.length&&a.push(s)}),a}return Ih}var Th,RS;function kI(){if(RS)return Th;RS=1;var e=ln();Th=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,i){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:i}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,i){var a=this._keyIndices[n];if(i>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+i);this._arr[a].priority=i,this._decrease(a)},t.prototype._heapify=function(n){var i=this._arr,a=2*n,s=a+1,u=n;a<i.length&&(u=i[a].priority<i[u].priority?a:u,s<i.length&&(u=i[s].priority<i[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var i=this._arr,a=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,i){var a=this._arr,s=this._keyIndices,u=a[n],l=a[i];a[n]=l,a[i]=u,s[l.key]=n,s[u.key]=i},Th}var Nh,VS;function MI(){if(VS)return Nh;VS=1;var e=ln(),t=kI();Nh=i;var n=e.constant(1);function i(s,u,l,d){return a(s,String(u),l||n,d||function(p){return s.outEdges(p)})}function a(s,u,l,d){var p={},m=new t,_,h,g=function(x){var q=x.v!==_?x.v:x.w,w=p[q],b=l(x),C=h.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+b);C<w.distance&&(w.distance=C,w.predecessor=_,m.decrease(q,C))};for(s.nodes().forEach(function(x){var q=x===u?0:Number.POSITIVE_INFINITY;p[x]={distance:q},m.add(x,q)});m.size()>0&&(_=m.removeMin(),h=p[_],h.distance!==Number.POSITIVE_INFINITY);)d(_).forEach(g);return p}return Nh}var jh,FS;function _A(){if(FS)return jh;FS=1;var e=MI(),t=ln();jh=n;function n(i,a,s){return t.transform(i.nodes(),function(u,l){u[l]=e(i,l,a,s)},{})}return jh}var Ph,OS;function EI(){if(OS)return Ph;OS=1;var e=ln();Ph=t;function t(n){var i=0,a=[],s={},u=[];function l(d){var p=s[d]={onStack:!0,lowlink:i,index:i++};if(a.push(d),n.successors(d).forEach(function(h){e.has(s,h)?s[h].onStack&&(p.lowlink=Math.min(p.lowlink,s[h].index)):(l(h),p.lowlink=Math.min(p.lowlink,s[h].lowlink))}),p.lowlink===p.index){var m=[],_;do _=a.pop(),s[_].onStack=!1,m.push(_);while(d!==_);u.push(m)}}return n.nodes().forEach(function(d){e.has(s,d)||l(d)}),u}return Ph}var Rh,AS;function mA(){if(AS)return Rh;AS=1;var e=ln(),t=EI();Rh=n;function n(i){return e.filter(t(i),function(a){return a.length>1||a.length===1&&i.hasEdge(a[0],a[0])})}return Rh}var Vh,LS;function hA(){if(LS)return Vh;LS=1;var e=ln();Vh=n;var t=e.constant(1);function n(a,s,u){return i(a,s||t,u||function(l){return a.outEdges(l)})}function i(a,s,u){var l={},d=a.nodes();return d.forEach(function(p){l[p]={},l[p][p]={distance:0},d.forEach(function(m){p!==m&&(l[p][m]={distance:Number.POSITIVE_INFINITY})}),u(p).forEach(function(m){var _=m.v===p?m.w:m.v,h=s(m);l[p][_]={distance:h,predecessor:p}})}),d.forEach(function(p){var m=l[p];d.forEach(function(_){var h=l[_];d.forEach(function(g){var x=h[p],q=m[g],w=h[g],b=x.distance+q.distance;b<w.distance&&(w.distance=b,w.predecessor=q.predecessor)})})}),l}return Vh}var Fh,DS;function II(){if(DS)return Fh;DS=1;var e=ln();Fh=t,t.CycleException=n;function t(i){var a={},s={},u=[];function l(d){if(e.has(s,d))throw new n;e.has(a,d)||(s[d]=!0,a[d]=!0,e.each(i.predecessors(d),l),delete s[d],u.push(d))}if(e.each(i.sinks(),l),e.size(a)!==i.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,Fh}var Oh,BS;function yA(){if(BS)return Oh;BS=1;var e=II();Oh=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Oh}var Ah,zS;function TI(){if(zS)return Ah;zS=1;var e=ln();Ah=t;function t(i,a,s){e.isArray(a)||(a=[a]);var u=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],d={};return e.each(a,function(p){if(!i.hasNode(p))throw new Error("Graph does not have node: "+p);n(i,p,s==="post",d,u,l)}),l}function n(i,a,s,u,l,d){e.has(u,a)||(u[a]=!0,s||d.push(a),e.each(l(a),function(p){n(i,p,s,u,l,d)}),s&&d.push(a))}return Ah}var Lh,$S;function gA(){if($S)return Lh;$S=1;var e=TI();Lh=t;function t(n,i){return e(n,i,"post")}return Lh}var Dh,HS;function vA(){if(HS)return Dh;HS=1;var e=TI();Dh=t;function t(n,i){return e(n,i,"pre")}return Dh}var Bh,WS;function xA(){if(WS)return Bh;WS=1;var e=ln(),t=Fg(),n=kI();Bh=i;function i(a,s){var u=new t,l={},d=new n,p;function m(h){var g=h.v===p?h.w:h.v,x=d.priority(g);if(x!==void 0){var q=s(h);q<x&&(l[g]=p,d.decrease(g,q))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(h){d.add(h,Number.POSITIVE_INFINITY),u.setNode(h)}),d.decrease(a.nodes()[0],0);for(var _=!1;d.size()>0;){if(p=d.removeMin(),e.has(l,p))u.setEdge(p,l[p]);else{if(_)throw new Error("Input graph is not connected: "+a);_=!0}a.nodeEdges(p).forEach(m)}return u}return Bh}var zh,US;function wA(){return US||(US=1,zh={components:fA(),dijkstra:MI(),dijkstraAll:_A(),findCycles:mA(),floydWarshall:hA(),isAcyclic:yA(),postorder:gA(),preorder:vA(),prim:xA(),tarjan:EI(),topsort:II()}),zh}var $h,GS;function bA(){if(GS)return $h;GS=1;var e=dA();return $h={Graph:e.Graph,json:pA(),alg:wA(),version:e.version},$h}var Hh,KS;function jn(){if(KS)return Hh;KS=1;var e;if(typeof xg=="function")try{e=bA()}catch{}return e||(e=window.graphlib),Hh=e,Hh}var Wh,YS;function qA(){if(YS)return Wh;YS=1;var e=tI(),t=1,n=4;function i(a){return e(a,t|n)}return Wh=i,Wh}var Uh,QS;function Pc(){if(QS)return Uh;QS=1;var e=Aa(),t=wi(),n=Sc(),i=un();function a(s,u,l){if(!i(l))return!1;var d=typeof u;return(d=="number"?t(l)&&n(u,l.length):d=="string"&&u in l)?e(l[u],s):!1}return Uh=a,Uh}var Gh,XS;function SA(){if(XS)return Gh;XS=1;var e=jc(),t=Aa(),n=Pc(),i=Bo(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(l,d){l=Object(l);var p=-1,m=d.length,_=m>2?d[2]:void 0;for(_&&n(d[0],d[1],_)&&(m=1);++p<m;)for(var h=d[p],g=i(h),x=-1,q=g.length;++x<q;){var w=g[x],b=l[w];(b===void 0||t(b,a[w])&&!s.call(l,w))&&(l[w]=h[w])}return l});return Gh=u,Gh}var Kh,ZS;function CA(){if(ZS)return Kh;ZS=1;var e=bi(),t=wi(),n=eo();function i(a){return function(s,u,l){var d=Object(s);if(!t(s)){var p=e(u,3);s=n(s),u=function(_){return p(d[_],_,d)}}var m=a(s,u,l);return m>-1?d[p?s[m]:m]:void 0}}return Kh=i,Kh}var Yh,JS;function kA(){if(JS)return Yh;JS=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return Yh=t,Yh}var Qh,eC;function MA(){if(eC)return Qh;eC=1;var e=kA(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return Qh=n,Qh}var Xh,tC;function EA(){if(tC)return Xh;tC=1;var e=MA(),t=un(),n=za(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return i;if(t(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=t(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=e(p);var _=s.test(p);return _||u.test(p)?l(p.slice(2),_?2:8):a.test(p)?i:+p}return Xh=d,Xh}var Zh,rC;function NI(){if(rC)return Zh;rC=1;var e=EA(),t=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return Zh=i,Zh}var Jh,nC;function IA(){if(nC)return Jh;nC=1;var e=NI();function t(n){var i=e(n),a=i%1;return i===i?a?i-a:i:0}return Jh=t,Jh}var ey,iC;function TA(){if(iC)return ey;iC=1;var e=qI(),t=bi(),n=IA(),i=Math.max;function a(s,u,l){var d=s==null?0:s.length;if(!d)return-1;var p=l==null?0:n(l);return p<0&&(p=i(d+p,0)),e(s,t(u,3),p)}return ey=a,ey}var ty,oC;function NA(){if(oC)return ty;oC=1;var e=CA(),t=TA(),n=e(t);return ty=n,ty}var ry,aC;function jI(){if(aC)return ry;aC=1;var e=Vg();function t(n){var i=n==null?0:n.length;return i?e(n,1):[]}return ry=t,ry}var ny,sC;function jA(){if(sC)return ny;sC=1;var e=Ng(),t=rI(),n=Bo();function i(a,s){return a==null?a:e(a,t(s),n)}return ny=i,ny}var iy,uC;function PA(){if(uC)return iy;uC=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return iy=e,iy}var oy,lC;function RA(){if(lC)return oy;lC=1;var e=bc(),t=jg(),n=bi();function i(a,s){var u={};return s=n(s,3),t(a,function(l,d,p){e(u,d,s(l,d,p))}),u}return oy=i,oy}var ay,cC;function Og(){if(cC)return ay;cC=1;var e=za();function t(n,i,a){for(var s=-1,u=n.length;++s<u;){var l=n[s],d=i(l);if(d!=null&&(p===void 0?d===d&&!e(d):a(d,p)))var p=d,m=l}return m}return ay=t,ay}var sy,dC;function VA(){if(dC)return sy;dC=1;function e(t,n){return t>n}return sy=e,sy}var uy,pC;function FA(){if(pC)return uy;pC=1;var e=Og(),t=VA(),n=zo();function i(a){return a&&a.length?e(a,n,t):void 0}return uy=i,uy}var ly,fC;function PI(){if(fC)return ly;fC=1;var e=bc(),t=Aa();function n(i,a,s){(s!==void 0&&!t(i[a],s)||s===void 0&&!(a in i))&&e(i,a,s)}return ly=n,ly}var cy,_C;function OA(){if(_C)return cy;_C=1;var e=Lo(),t=Mc(),n=Xn(),i="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,d=u.call(Object);function p(m){if(!n(m)||e(m)!=i)return!1;var _=t(m);if(_===null)return!0;var h=l.call(_,"constructor")&&_.constructor;return typeof h=="function"&&h instanceof h&&u.call(h)==d}return cy=p,cy}var dy,mC;function RI(){if(mC)return dy;mC=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return dy=e,dy}var py,hC;function AA(){if(hC)return py;hC=1;var e=su(),t=Bo();function n(i){return e(i,t(i))}return py=n,py}var fy,yC;function LA(){if(yC)return fy;yC=1;var e=PI(),t=$E(),n=ZE(),i=HE(),a=eI(),s=uu(),u=Ot(),l=SI(),d=Da(),p=au(),m=un(),_=OA(),h=lu(),g=RI(),x=AA();function q(w,b,C,S,M,I,E){var N=g(w,C),R=g(b,C),P=E.get(R);if(P){e(w,C,P);return}var D=I?I(N,R,C+"",w,b,E):void 0,F=D===void 0;if(F){var O=u(R),Q=!O&&d(R),j=!O&&!Q&&h(R);D=R,O||Q||j?u(N)?D=N:l(N)?D=i(N):Q?(F=!1,D=t(R,!0)):j?(F=!1,D=n(R,!0)):D=[]:_(R)||s(R)?(D=N,s(N)?D=x(N):(!m(N)||p(N))&&(D=a(R))):F=!1}F&&(E.set(R,D),M(D,R,S,I,E),E.delete(R)),e(w,C,D)}return fy=q,fy}var _y,gC;function DA(){if(gC)return _y;gC=1;var e=wc(),t=PI(),n=Ng(),i=LA(),a=un(),s=Bo(),u=RI();function l(d,p,m,_,h){d!==p&&n(p,function(g,x){if(h||(h=new e),a(g))i(d,p,x,m,l,_,h);else{var q=_?_(u(d,x),g,x+"",d,p,h):void 0;q===void 0&&(q=g),t(d,x,q)}},s)}return _y=l,_y}var my,vC;function BA(){if(vC)return my;vC=1;var e=jc(),t=Pc();function n(i){return e(function(a,s){var u=-1,l=s.length,d=l>1?s[l-1]:void 0,p=l>2?s[2]:void 0;for(d=i.length>3&&typeof d=="function"?(l--,d):void 0,p&&t(s[0],s[1],p)&&(d=l<3?void 0:d,l=1),a=Object(a);++u<l;){var m=s[u];m&&i(a,m,u,d)}return a})}return my=n,my}var hy,xC;function zA(){if(xC)return hy;xC=1;var e=DA(),t=BA(),n=t(function(i,a,s){e(i,a,s)});return hy=n,hy}var yy,wC;function VI(){if(wC)return yy;wC=1;function e(t,n){return t<n}return yy=e,yy}var gy,bC;function $A(){if(bC)return gy;bC=1;var e=Og(),t=VI(),n=zo();function i(a){return a&&a.length?e(a,n,t):void 0}return gy=i,gy}var vy,qC;function HA(){if(qC)return vy;qC=1;var e=Og(),t=bi(),n=VI();function i(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return vy=i,vy}var xy,SC;function WA(){if(SC)return xy;SC=1;var e=Rn(),t=function(){return e.Date.now()};return xy=t,xy}var wy,CC;function UA(){if(CC)return wy;CC=1;var e=qc(),t=Tc(),n=Sc(),i=un(),a=cu();function s(u,l,d,p){if(!i(u))return u;l=t(l,u);for(var m=-1,_=l.length,h=_-1,g=u;g!=null&&++m<_;){var x=a(l[m]),q=d;if(x==="__proto__"||x==="constructor"||x==="prototype")return u;if(m!=h){var w=g[x];q=p?p(w,x,g):void 0,q===void 0&&(q=i(w)?w:n(l[m+1])?[]:{})}e(g,x,q),g=g[x]}return u}return wy=s,wy}var by,kC;function GA(){if(kC)return by;kC=1;var e=Nc(),t=UA(),n=Tc();function i(a,s,u){for(var l=-1,d=s.length,p={};++l<d;){var m=s[l],_=e(a,m);u(_,m)&&t(p,n(m,a),_)}return p}return by=i,by}var qy,MC;function KA(){if(MC)return qy;MC=1;var e=GA(),t=fI();function n(i,a){return e(i,a,function(s,u){return t(i,u)})}return qy=n,qy}var Sy,EC;function YA(){if(EC)return Sy;EC=1;var e=jI(),t=wI(),n=bI();function i(a){return n(t(a,void 0,e),a+"")}return Sy=i,Sy}var Cy,IC;function QA(){if(IC)return Cy;IC=1;var e=KA(),t=YA(),n=t(function(i,a){return i==null?{}:e(i,a)});return Cy=n,Cy}var ky,TC;function XA(){if(TC)return ky;TC=1;var e=Math.ceil,t=Math.max;function n(i,a,s,u){for(var l=-1,d=t(e((a-i)/(s||1)),0),p=Array(d);d--;)p[u?d:++l]=i,i+=s;return p}return ky=n,ky}var My,NC;function ZA(){if(NC)return My;NC=1;var e=XA(),t=Pc(),n=NI();function i(a){return function(s,u,l){return l&&typeof l!="number"&&t(s,u,l)&&(u=l=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),l=l===void 0?s<u?1:-1:n(l),e(s,u,l,a)}}return My=i,My}var Ey,jC;function JA(){if(jC)return Ey;jC=1;var e=ZA(),t=e();return Ey=t,Ey}var Iy,PC;function eL(){if(PC)return Iy;PC=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return Iy=e,Iy}var Ty,RC;function tL(){if(RC)return Ty;RC=1;var e=za();function t(n,i){if(n!==i){var a=n!==void 0,s=n===null,u=n===n,l=e(n),d=i!==void 0,p=i===null,m=i===i,_=e(i);if(!p&&!_&&!l&&n>i||l&&d&&m&&!p&&!_||s&&d&&m||!a&&m||!u)return 1;if(!s&&!l&&!_&&n<i||_&&a&&u&&!s&&!l||p&&a&&u||!d&&u||!m)return-1}return 0}return Ty=t,Ty}var Ny,VC;function rL(){if(VC)return Ny;VC=1;var e=tL();function t(n,i,a){for(var s=-1,u=n.criteria,l=i.criteria,d=u.length,p=a.length;++s<d;){var m=e(u[s],l[s]);if(m){if(s>=p)return m;var _=a[s];return m*(_=="desc"?-1:1)}}return n.index-i.index}return Ny=t,Ny}var jy,FC;function nL(){if(FC)return jy;FC=1;var e=Ic(),t=Nc(),n=bi(),i=gI(),a=eL(),s=Cc(),u=rL(),l=zo(),d=Ot();function p(m,_,h){_.length?_=e(_,function(q){return d(q)?function(w){return t(w,q.length===1?q[0]:q)}:q}):_=[l];var g=-1;_=e(_,s(n));var x=i(m,function(q,w,b){var C=e(_,function(S){return S(q)});return{criteria:C,index:++g,value:q}});return a(x,function(q,w){return u(q,w,h)})}return jy=p,jy}var Py,OC;function iL(){if(OC)return Py;OC=1;var e=Vg(),t=nL(),n=jc(),i=Pc(),a=n(function(s,u){if(s==null)return[];var l=u.length;return l>1&&i(s,u[0],u[1])?u=[]:l>2&&i(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return Py=a,Py}var Ry,AC;function oL(){if(AC)return Ry;AC=1;var e=dI(),t=0;function n(i){var a=++t;return e(i)+a}return Ry=n,Ry}var Vy,LC;function aL(){if(LC)return Vy;LC=1;function e(t,n,i){for(var a=-1,s=t.length,u=n.length,l={};++a<s;){var d=a<u?n[a]:void 0;i(l,t[a],d)}return l}return Vy=e,Vy}var Fy,DC;function sL(){if(DC)return Fy;DC=1;var e=qc(),t=aL();function n(i,a){return t(i||[],a||[],e)}return Fy=n,Fy}var Oy,BC;function Ct(){if(BC)return Oy;BC=1;var e;if(typeof xg=="function")try{e={cloneDeep:qA(),constant:Tg(),defaults:SA(),each:iI(),filter:mI(),find:NA(),flatten:jI(),forEach:nI(),forIn:jA(),has:hI(),isUndefined:yI(),last:PA(),map:vI(),mapValues:RA(),max:FA(),merge:zA(),min:$A(),minBy:HA(),now:WA(),pick:QA(),range:JA(),reduce:xI(),sortBy:iL(),uniqueId:oL(),values:CI(),zipObject:sL()}}catch{}return e||(e=window._),Oy=e,Oy}var Ay,zC;function uL(){if(zC)return Ay;zC=1,Ay=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,a=i._prev;if(a!==i)return t(a),a},e.prototype.enqueue=function(i){var a=this._sentinel;i._prev&&i._next&&t(i),i._next=a._next,a._next._prev=i,a._next=i,i._prev=a},e.prototype.toString=function(){for(var i=[],a=this._sentinel,s=a._prev;s!==a;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"};function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,a){if(i!=="_next"&&i!=="_prev")return a}return Ay}var Ly,$C;function lL(){if($C)return Ly;$C=1;var e=Ct(),t=jn().Graph,n=uL();Ly=a;var i=e.constant(1);function a(p,m){if(p.nodeCount()<=1)return[];var _=l(p,m||i),h=s(_.graph,_.buckets,_.zeroIdx);return e.flatten(e.map(h,function(g){return p.outEdges(g.v,g.w)}),!0)}function s(p,m,_){for(var h=[],g=m[m.length-1],x=m[0],q;p.nodeCount();){for(;q=x.dequeue();)u(p,m,_,q);for(;q=g.dequeue();)u(p,m,_,q);if(p.nodeCount()){for(var w=m.length-2;w>0;--w)if(q=m[w].dequeue(),q){h=h.concat(u(p,m,_,q,!0));break}}}return h}function u(p,m,_,h,g){var x=g?[]:void 0;return e.forEach(p.inEdges(h.v),function(q){var w=p.edge(q),b=p.node(q.v);g&&x.push({v:q.v,w:q.w}),b.out-=w,d(m,_,b)}),e.forEach(p.outEdges(h.v),function(q){var w=p.edge(q),b=q.w,C=p.node(b);C.in-=w,d(m,_,C)}),p.removeNode(h.v),x}function l(p,m){var _=new t,h=0,g=0;e.forEach(p.nodes(),function(w){_.setNode(w,{v:w,in:0,out:0})}),e.forEach(p.edges(),function(w){var b=_.edge(w.v,w.w)||0,C=m(w),S=b+C;_.setEdge(w.v,w.w,S),g=Math.max(g,_.node(w.v).out+=C),h=Math.max(h,_.node(w.w).in+=C)});var x=e.range(g+h+3).map(function(){return new n}),q=h+1;return e.forEach(_.nodes(),function(w){d(x,q,_.node(w))}),{graph:_,buckets:x,zeroIdx:q}}function d(p,m,_){_.out?_.in?p[_.out-_.in+m].enqueue(_):p[p.length-1].enqueue(_):p[0].enqueue(_)}return Ly}var Dy,HC;function cL(){if(HC)return Dy;HC=1;var e=Ct(),t=lL();Dy={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,l(s)):i(s);e.forEach(u,function(d){var p=s.edge(d);s.removeEdge(d),p.forwardName=d.name,p.reversed=!0,s.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function l(d){return function(p){return d.edge(p).weight}}}function i(s){var u=[],l={},d={};function p(m){e.has(d,m)||(d[m]=!0,l[m]=!0,e.forEach(s.outEdges(m),function(_){e.has(l,_.w)?u.push(_):p(_.w)}),delete l[m])}return e.forEach(s.nodes(),p),u}function a(s){e.forEach(s.edges(),function(u){var l=s.edge(u);if(l.reversed){s.removeEdge(u);var d=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(u.w,u.v,l,d)}})}return Dy}var By,WC;function Fr(){if(WC)return By;WC=1;var e=Ct(),t=jn().Graph;By={addDummyNode:n,simplify:i,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:l,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:m,addBorderNode:_,maxRank:h,partition:g,time:x,notime:q};function n(w,b,C,S){var M;do M=e.uniqueId(S);while(w.hasNode(M));return C.dummy=b,w.setNode(M,C),M}function i(w){var b=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(C){b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){var S=b.edge(C.v,C.w)||{weight:0,minlen:1},M=w.edge(C);b.setEdge(C.v,C.w,{weight:S.weight+M.weight,minlen:Math.max(S.minlen,M.minlen)})}),b}function a(w){var b=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(C){w.children(C).length||b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){b.setEdge(C,w.edge(C))}),b}function s(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.outEdges(C),function(M){S[M.w]=(S[M.w]||0)+w.edge(M).weight}),S});return e.zipObject(w.nodes(),b)}function u(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.inEdges(C),function(M){S[M.v]=(S[M.v]||0)+w.edge(M).weight}),S});return e.zipObject(w.nodes(),b)}function l(w,b){var C=w.x,S=w.y,M=b.x-C,I=b.y-S,E=w.width/2,N=w.height/2;if(!M&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var R,P;return Math.abs(I)*E>Math.abs(M)*N?(I<0&&(N=-N),R=N*M/I,P=N):(M<0&&(E=-E),R=E,P=E*I/M),{x:C+R,y:S+P}}function d(w){var b=e.map(e.range(h(w)+1),function(){return[]});return e.forEach(w.nodes(),function(C){var S=w.node(C),M=S.rank;e.isUndefined(M)||(b[M][S.order]=C)}),b}function p(w){var b=e.min(e.map(w.nodes(),function(C){return w.node(C).rank}));e.forEach(w.nodes(),function(C){var S=w.node(C);e.has(S,"rank")&&(S.rank-=b)})}function m(w){var b=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),C=[];e.forEach(w.nodes(),function(I){var E=w.node(I).rank-b;C[E]||(C[E]=[]),C[E].push(I)});var S=0,M=w.graph().nodeRankFactor;e.forEach(C,function(I,E){e.isUndefined(I)&&E%M!==0?--S:S&&e.forEach(I,function(N){w.node(N).rank+=S})})}function _(w,b,C,S){var M={width:0,height:0};return arguments.length>=4&&(M.rank=C,M.order=S),n(w,"border",M,b)}function h(w){return e.max(e.map(w.nodes(),function(b){var C=w.node(b).rank;if(!e.isUndefined(C))return C}))}function g(w,b){var C={lhs:[],rhs:[]};return e.forEach(w,function(S){b(S)?C.lhs.push(S):C.rhs.push(S)}),C}function x(w,b){var C=e.now();try{return b()}finally{console.log(w+" time: "+(e.now()-C)+"ms")}}function q(w,b){return b()}return By}var zy,UC;function dL(){if(UC)return zy;UC=1;var e=Ct(),t=Fr();zy={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){i(s,u)})}function i(s,u){var l=u.v,d=s.node(l).rank,p=u.w,m=s.node(p).rank,_=u.name,h=s.edge(u),g=h.labelRank;if(m!==d+1){s.removeEdge(u);var x,q,w;for(w=0,++d;d<m;++w,++d)h.points=[],q={width:0,height:0,edgeLabel:h,edgeObj:u,rank:d},x=t.addDummyNode(s,"edge",q,"_d"),d===g&&(q.width=h.width,q.height=h.height,q.dummy="edge-label",q.labelpos=h.labelpos),s.setEdge(l,x,{weight:h.weight},_),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,p,{weight:h.weight},_)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var l=s.node(u),d=l.edgeLabel,p;for(s.setEdge(l.edgeObj,d);l.dummy;)p=s.successors(u)[0],s.removeNode(u),d.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(d.x=l.x,d.y=l.y,d.width=l.width,d.height=l.height),u=p,l=s.node(u)})}return zy}var $y,GC;function ic(){if(GC)return $y;GC=1;var e=Ct();$y={longestPath:t,slack:n};function t(i){var a={};function s(u){var l=i.node(u);if(e.has(a,u))return l.rank;a[u]=!0;var d=e.min(e.map(i.outEdges(u),function(p){return s(p.w)-i.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),l.rank=d}e.forEach(i.sources(),s)}function n(i,a){return i.node(a.w).rank-i.node(a.v).rank-i.edge(a).minlen}return $y}var Hy,KC;function FI(){if(KC)return Hy;KC=1;var e=Ct(),t=jn().Graph,n=ic().slack;Hy=i;function i(l){var d=new t({directed:!1}),p=l.nodes()[0],m=l.nodeCount();d.setNode(p,{});for(var _,h;a(d,l)<m;)_=s(d,l),h=d.hasNode(_.v)?n(l,_):-n(l,_),u(d,l,h);return d}function a(l,d){function p(m){e.forEach(d.nodeEdges(m),function(_){var h=_.v,g=m===h?_.w:h;!l.hasNode(g)&&!n(d,_)&&(l.setNode(g,{}),l.setEdge(m,g,{}),p(g))})}return e.forEach(l.nodes(),p),l.nodeCount()}function s(l,d){return e.minBy(d.edges(),function(p){if(l.hasNode(p.v)!==l.hasNode(p.w))return n(d,p)})}function u(l,d,p){e.forEach(l.nodes(),function(m){d.node(m).rank+=p})}return Hy}var Wy,YC;function pL(){if(YC)return Wy;YC=1;var e=Ct(),t=FI(),n=ic().slack,i=ic().longestPath,a=jn().alg.preorder,s=jn().alg.postorder,u=Fr().simplify;Wy=l,l.initLowLimValues=_,l.initCutValues=d,l.calcCutValue=m,l.leaveEdge=g,l.enterEdge=x,l.exchangeEdges=q;function l(S){S=u(S),i(S);var M=t(S);_(M),d(M,S);for(var I,E;I=g(M);)E=x(M,S,I),q(M,S,I,E)}function d(S,M){var I=s(S,S.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(E){p(S,M,E)})}function p(S,M,I){var E=S.node(I),N=E.parent;S.edge(I,N).cutvalue=m(S,M,I)}function m(S,M,I){var E=S.node(I),N=E.parent,R=!0,P=M.edge(I,N),D=0;return P||(R=!1,P=M.edge(N,I)),D=P.weight,e.forEach(M.nodeEdges(I),function(F){var O=F.v===I,Q=O?F.w:F.v;if(Q!==N){var j=O===R,U=M.edge(F).weight;if(D+=j?U:-U,b(S,I,Q)){var H=S.edge(I,Q).cutvalue;D+=j?-H:H}}}),D}function _(S,M){arguments.length<2&&(M=S.nodes()[0]),h(S,{},1,M)}function h(S,M,I,E,N){var R=I,P=S.node(E);return M[E]=!0,e.forEach(S.neighbors(E),function(D){e.has(M,D)||(I=h(S,M,I,D,E))}),P.low=R,P.lim=I++,N?P.parent=N:delete P.parent,I}function g(S){return e.find(S.edges(),function(M){return S.edge(M).cutvalue<0})}function x(S,M,I){var E=I.v,N=I.w;M.hasEdge(E,N)||(E=I.w,N=I.v);var R=S.node(E),P=S.node(N),D=R,F=!1;R.lim>P.lim&&(D=P,F=!0);var O=e.filter(M.edges(),function(Q){return F===C(S,S.node(Q.v),D)&&F!==C(S,S.node(Q.w),D)});return e.minBy(O,function(Q){return n(M,Q)})}function q(S,M,I,E){var N=I.v,R=I.w;S.removeEdge(N,R),S.setEdge(E.v,E.w,{}),_(S),d(S,M),w(S,M)}function w(S,M){var I=e.find(S.nodes(),function(N){return!M.node(N).parent}),E=a(S,I);E=E.slice(1),e.forEach(E,function(N){var R=S.node(N).parent,P=M.edge(N,R),D=!1;P||(P=M.edge(R,N),D=!0),M.node(N).rank=M.node(R).rank+(D?P.minlen:-P.minlen)})}function b(S,M,I){return S.hasEdge(M,I)}function C(S,M,I){return I.low<=M.lim&&M.lim<=I.lim}return Wy}var Uy,QC;function fL(){if(QC)return Uy;QC=1;var e=ic(),t=e.longestPath,n=FI(),i=pL();Uy=a;function a(d){switch(d.graph().ranker){case"network-simplex":l(d);break;case"tight-tree":u(d);break;case"longest-path":s(d);break;default:l(d)}}var s=t;function u(d){t(d),n(d)}function l(d){i(d)}return Uy}var Gy,XC;function _L(){if(XC)return Gy;XC=1;var e=Ct();Gy=t;function t(a){var s=i(a);e.forEach(a.graph().dummyChains,function(u){for(var l=a.node(u),d=l.edgeObj,p=n(a,s,d.v,d.w),m=p.path,_=p.lca,h=0,g=m[h],x=!0;u!==d.w;){if(l=a.node(u),x){for(;(g=m[h])!==_&&a.node(g).maxRank<l.rank;)h++;g===_&&(x=!1)}if(!x){for(;h<m.length-1&&a.node(g=m[h+1]).minRank<=l.rank;)h++;g=m[h]}a.setParent(u,g),u=a.successors(u)[0]}})}function n(a,s,u,l){var d=[],p=[],m=Math.min(s[u].low,s[l].low),_=Math.max(s[u].lim,s[l].lim),h,g;h=u;do h=a.parent(h),d.push(h);while(h&&(s[h].low>m||_>s[h].lim));for(g=h,h=l;(h=a.parent(h))!==g;)p.push(h);return{path:d.concat(p.reverse()),lca:g}}function i(a){var s={},u=0;function l(d){var p=u;e.forEach(a.children(d),l),s[d]={low:p,lim:u++}}return e.forEach(a.children(),l),s}return Gy}var Ky,ZC;function mL(){if(ZC)return Ky;ZC=1;var e=Ct(),t=Fr();Ky={run:n,cleanup:u};function n(l){var d=t.addDummyNode(l,"root",{},"_root"),p=a(l),m=e.max(e.values(p))-1,_=2*m+1;l.graph().nestingRoot=d,e.forEach(l.edges(),function(g){l.edge(g).minlen*=_});var h=s(l)+1;e.forEach(l.children(),function(g){i(l,d,_,h,m,p,g)}),l.graph().nodeRankFactor=_}function i(l,d,p,m,_,h,g){var x=l.children(g);if(!x.length){g!==d&&l.setEdge(d,g,{weight:0,minlen:p});return}var q=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),b=l.node(g);l.setParent(q,g),b.borderTop=q,l.setParent(w,g),b.borderBottom=w,e.forEach(x,function(C){i(l,d,p,m,_,h,C);var S=l.node(C),M=S.borderTop?S.borderTop:C,I=S.borderBottom?S.borderBottom:C,E=S.borderTop?m:2*m,N=M!==I?1:_-h[g]+1;l.setEdge(q,M,{weight:E,minlen:N,nestingEdge:!0}),l.setEdge(I,w,{weight:E,minlen:N,nestingEdge:!0})}),l.parent(g)||l.setEdge(d,q,{weight:0,minlen:_+h[g]})}function a(l){var d={};function p(m,_){var h=l.children(m);h&&h.length&&e.forEach(h,function(g){p(g,_+1)}),d[m]=_}return e.forEach(l.children(),function(m){p(m,1)}),d}function s(l){return e.reduce(l.edges(),function(d,p){return d+l.edge(p).weight},0)}function u(l){var d=l.graph();l.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(l.edges(),function(p){var m=l.edge(p);m.nestingEdge&&l.removeEdge(p)})}return Ky}var Yy,JC;function hL(){if(JC)return Yy;JC=1;var e=Ct(),t=Fr();Yy=n;function n(a){function s(u){var l=a.children(u),d=a.node(u);if(l.length&&e.forEach(l,s),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,m=d.maxRank+1;p<m;++p)i(a,"borderLeft","_bl",u,d,p),i(a,"borderRight","_br",u,d,p)}}e.forEach(a.children(),s)}function i(a,s,u,l,d,p){var m={width:0,height:0,rank:p,borderType:s},_=d[s][p-1],h=t.addDummyNode(a,"border",m,u);d[s][p]=h,a.setParent(h,l),_&&a.setEdge(_,h,{weight:1})}return Yy}var Qy,ek;function yL(){if(ek)return Qy;ek=1;var e=Ct();Qy={adjust:t,undo:n};function t(p){var m=p.graph().rankdir.toLowerCase();(m==="lr"||m==="rl")&&i(p)}function n(p){var m=p.graph().rankdir.toLowerCase();(m==="bt"||m==="rl")&&s(p),(m==="lr"||m==="rl")&&(l(p),i(p))}function i(p){e.forEach(p.nodes(),function(m){a(p.node(m))}),e.forEach(p.edges(),function(m){a(p.edge(m))})}function a(p){var m=p.width;p.width=p.height,p.height=m}function s(p){e.forEach(p.nodes(),function(m){u(p.node(m))}),e.forEach(p.edges(),function(m){var _=p.edge(m);e.forEach(_.points,u),e.has(_,"y")&&u(_)})}function u(p){p.y=-p.y}function l(p){e.forEach(p.nodes(),function(m){d(p.node(m))}),e.forEach(p.edges(),function(m){var _=p.edge(m);e.forEach(_.points,d),e.has(_,"x")&&d(_)})}function d(p){var m=p.x;p.x=p.y,p.y=m}return Qy}var Xy,tk;function gL(){if(tk)return Xy;tk=1;var e=Ct();Xy=t;function t(n){var i={},a=e.filter(n.nodes(),function(p){return!n.children(p).length}),s=e.max(e.map(a,function(p){return n.node(p).rank})),u=e.map(e.range(s+1),function(){return[]});function l(p){if(!e.has(i,p)){i[p]=!0;var m=n.node(p);u[m.rank].push(p),e.forEach(n.successors(p),l)}}var d=e.sortBy(a,function(p){return n.node(p).rank});return e.forEach(d,l),u}return Xy}var Zy,rk;function vL(){if(rk)return Zy;rk=1;var e=Ct();Zy=t;function t(i,a){for(var s=0,u=1;u<a.length;++u)s+=n(i,a[u-1],a[u]);return s}function n(i,a,s){for(var u=e.zipObject(s,e.map(s,function(h,g){return g})),l=e.flatten(e.map(a,function(h){return e.sortBy(e.map(i.outEdges(h),function(g){return{pos:u[g.w],weight:i.edge(g).weight}}),"pos")}),!0),d=1;d<s.length;)d<<=1;var p=2*d-1;d-=1;var m=e.map(new Array(p),function(){return 0}),_=0;return e.forEach(l.forEach(function(h){var g=h.pos+d;m[g]+=h.weight;for(var x=0;g>0;)g%2&&(x+=m[g+1]),g=g-1>>1,m[g]+=h.weight;_+=h.weight*x})),_}return Zy}var Jy,nk;function xL(){if(nk)return Jy;nk=1;var e=Ct();Jy=t;function t(n,i){return e.map(i,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(l,d){var p=n.edge(d),m=n.node(d.v);return{sum:l.sum+p.weight*m.order,weight:l.weight+p.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return Jy}var e0,ik;function wL(){if(ik)return e0;ik=1;var e=Ct();e0=t;function t(a,s){var u={};e.forEach(a,function(d,p){var m=u[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(m.barycenter=d.barycenter,m.weight=d.weight)}),e.forEach(s.edges(),function(d){var p=u[d.v],m=u[d.w];!e.isUndefined(p)&&!e.isUndefined(m)&&(m.indegree++,p.out.push(u[d.w]))});var l=e.filter(u,function(d){return!d.indegree});return n(l)}function n(a){var s=[];function u(p){return function(m){m.merged||(e.isUndefined(m.barycenter)||e.isUndefined(p.barycenter)||m.barycenter>=p.barycenter)&&i(p,m)}}function l(p){return function(m){m.in.push(p),--m.indegree===0&&a.push(m)}}for(;a.length;){var d=a.pop();s.push(d),e.forEach(d.in.reverse(),u(d)),e.forEach(d.out,l(d))}return e.map(e.filter(s,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function i(a,s){var u=0,l=0;a.weight&&(u+=a.barycenter*a.weight,l+=a.weight),s.weight&&(u+=s.barycenter*s.weight,l+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/l,a.weight=l,a.i=Math.min(s.i,a.i),s.merged=!0}return e0}var t0,ok;function bL(){if(ok)return t0;ok=1;var e=Ct(),t=Fr();t0=n;function n(s,u){var l=t.partition(s,function(q){return e.has(q,"barycenter")}),d=l.lhs,p=e.sortBy(l.rhs,function(q){return-q.i}),m=[],_=0,h=0,g=0;d.sort(a(!!u)),g=i(m,p,g),e.forEach(d,function(q){g+=q.vs.length,m.push(q.vs),_+=q.barycenter*q.weight,h+=q.weight,g=i(m,p,g)});var x={vs:e.flatten(m,!0)};return h&&(x.barycenter=_/h,x.weight=h),x}function i(s,u,l){for(var d;u.length&&(d=e.last(u)).i<=l;)u.pop(),s.push(d.vs),l++;return l}function a(s){return function(u,l){return u.barycenter<l.barycenter?-1:u.barycenter>l.barycenter?1:s?l.i-u.i:u.i-l.i}}return t0}var r0,ak;function qL(){if(ak)return r0;ak=1;var e=Ct(),t=xL(),n=wL(),i=bL();r0=a;function a(l,d,p,m){var _=l.children(d),h=l.node(d),g=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,q={};g&&(_=e.filter(_,function(I){return I!==g&&I!==x}));var w=t(l,_);e.forEach(w,function(I){if(l.children(I.v).length){var E=a(l,I.v,p,m);q[I.v]=E,e.has(E,"barycenter")&&u(I,E)}});var b=n(w,p);s(b,q);var C=i(b,m);if(g&&(C.vs=e.flatten([g,C.vs,x],!0),l.predecessors(g).length)){var S=l.node(l.predecessors(g)[0]),M=l.node(l.predecessors(x)[0]);e.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+S.order+M.order)/(C.weight+2),C.weight+=2}return C}function s(l,d){e.forEach(l,function(p){p.vs=e.flatten(p.vs.map(function(m){return d[m]?d[m].vs:m}),!0)})}function u(l,d){e.isUndefined(l.barycenter)?(l.barycenter=d.barycenter,l.weight=d.weight):(l.barycenter=(l.barycenter*l.weight+d.barycenter*d.weight)/(l.weight+d.weight),l.weight+=d.weight)}return r0}var n0,sk;function SL(){if(sk)return n0;sk=1;var e=Ct(),t=jn().Graph;n0=n;function n(a,s,u){var l=i(a),d=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(p){return a.node(p)});return e.forEach(a.nodes(),function(p){var m=a.node(p),_=a.parent(p);(m.rank===s||m.minRank<=s&&s<=m.maxRank)&&(d.setNode(p),d.setParent(p,_||l),e.forEach(a[u](p),function(h){var g=h.v===p?h.w:h.v,x=d.edge(g,p),q=e.isUndefined(x)?0:x.weight;d.setEdge(g,p,{weight:a.edge(h).weight+q})}),e.has(m,"minRank")&&d.setNode(p,{borderLeft:m.borderLeft[s],borderRight:m.borderRight[s]}))}),d}function i(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return n0}var i0,uk;function CL(){if(uk)return i0;uk=1;var e=Ct();i0=t;function t(n,i,a){var s={},u;e.forEach(a,function(l){for(var d=n.parent(l),p,m;d;){if(p=n.parent(d),p?(m=s[p],s[p]=d):(m=u,u=d),m&&m!==d){i.setEdge(m,d);return}d=p}})}return i0}var o0,lk;function kL(){if(lk)return o0;lk=1;var e=Ct(),t=gL(),n=vL(),i=qL(),a=SL(),s=CL(),u=jn().Graph,l=Fr();o0=d;function d(h){var g=l.maxRank(h),x=p(h,e.range(1,g+1),"inEdges"),q=p(h,e.range(g-1,-1,-1),"outEdges"),w=t(h);_(h,w);for(var b=Number.POSITIVE_INFINITY,C,S=0,M=0;M<4;++S,++M){m(S%2?x:q,S%4>=2),w=l.buildLayerMatrix(h);var I=n(h,w);I<b&&(M=0,C=e.cloneDeep(w),b=I)}_(h,C)}function p(h,g,x){return e.map(g,function(q){return a(h,q,x)})}function m(h,g){var x=new u;e.forEach(h,function(q){var w=q.graph().root,b=i(q,w,x,g);e.forEach(b.vs,function(C,S){q.node(C).order=S}),s(q,x,b.vs)})}function _(h,g){e.forEach(g,function(x){e.forEach(x,function(q,w){h.node(q).order=w})})}return o0}var a0,ck;function ML(){if(ck)return a0;ck=1;var e=Ct(),t=jn().Graph,n=Fr();a0={positionX:x,findType1Conflicts:i,findType2Conflicts:a,addConflict:u,hasConflict:l,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:h,findSmallestWidthAlignment:_,balance:g};function i(b,C){var S={};function M(I,E){var N=0,R=0,P=I.length,D=e.last(E);return e.forEach(E,function(F,O){var Q=s(b,F),j=Q?b.node(Q).order:P;(Q||F===D)&&(e.forEach(E.slice(R,O+1),function(U){e.forEach(b.predecessors(U),function(H){var te=b.node(H),G=te.order;(G<N||j<G)&&!(te.dummy&&b.node(U).dummy)&&u(S,H,U)})}),R=O+1,N=j)}),E}return e.reduce(C,M),S}function a(b,C){var S={};function M(E,N,R,P,D){var F;e.forEach(e.range(N,R),function(O){F=E[O],b.node(F).dummy&&e.forEach(b.predecessors(F),function(Q){var j=b.node(Q);j.dummy&&(j.order<P||j.order>D)&&u(S,Q,F)})})}function I(E,N){var R=-1,P,D=0;return e.forEach(N,function(F,O){if(b.node(F).dummy==="border"){var Q=b.predecessors(F);Q.length&&(P=b.node(Q[0]).order,M(N,D,O,R,P),D=O,R=P)}M(N,D,N.length,P,E.length)}),N}return e.reduce(C,I),S}function s(b,C){if(b.node(C).dummy)return e.find(b.predecessors(C),function(S){return b.node(S).dummy})}function u(b,C,S){if(C>S){var M=C;C=S,S=M}var I=b[C];I||(b[C]=I={}),I[S]=!0}function l(b,C,S){if(C>S){var M=C;C=S,S=M}return e.has(b[C],S)}function d(b,C,S,M){var I={},E={},N={};return e.forEach(C,function(R){e.forEach(R,function(P,D){I[P]=P,E[P]=P,N[P]=D})}),e.forEach(C,function(R){var P=-1;e.forEach(R,function(D){var F=M(D);if(F.length){F=e.sortBy(F,function(H){return N[H]});for(var O=(F.length-1)/2,Q=Math.floor(O),j=Math.ceil(O);Q<=j;++Q){var U=F[Q];E[D]===D&&P<N[U]&&!l(S,D,U)&&(E[U]=D,E[D]=I[D]=I[U],P=N[U])}}})}),{root:I,align:E}}function p(b,C,S,M,I){var E={},N=m(b,C,S,I),R=I?"borderLeft":"borderRight";function P(O,Q){for(var j=N.nodes(),U=j.pop(),H={};U;)H[U]?O(U):(H[U]=!0,j.push(U),j=j.concat(Q(U))),U=j.pop()}function D(O){E[O]=N.inEdges(O).reduce(function(Q,j){return Math.max(Q,E[j.v]+N.edge(j))},0)}function F(O){var Q=N.outEdges(O).reduce(function(U,H){return Math.min(U,E[H.w]-N.edge(H))},Number.POSITIVE_INFINITY),j=b.node(O);Q!==Number.POSITIVE_INFINITY&&j.borderType!==R&&(E[O]=Math.max(E[O],Q))}return P(D,N.predecessors.bind(N)),P(F,N.successors.bind(N)),e.forEach(M,function(O){E[O]=E[S[O]]}),E}function m(b,C,S,M){var I=new t,E=b.graph(),N=q(E.nodesep,E.edgesep,M);return e.forEach(C,function(R){var P;e.forEach(R,function(D){var F=S[D];if(I.setNode(F),P){var O=S[P],Q=I.edge(O,F);I.setEdge(O,F,Math.max(N(b,D,P),Q||0))}P=D})}),I}function _(b,C){return e.minBy(e.values(C),function(S){var M=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(S,function(E,N){var R=w(b,N)/2;M=Math.max(E+R,M),I=Math.min(E-R,I)}),M-I})}function h(b,C){var S=e.values(C),M=e.min(S),I=e.max(S);e.forEach(["u","d"],function(E){e.forEach(["l","r"],function(N){var R=E+N,P=b[R],D;if(P!==C){var F=e.values(P);D=N==="l"?M-e.min(F):I-e.max(F),D&&(b[R]=e.mapValues(P,function(O){return O+D}))}})})}function g(b,C){return e.mapValues(b.ul,function(S,M){if(C)return b[C.toLowerCase()][M];var I=e.sortBy(e.map(b,M));return(I[1]+I[2])/2})}function x(b){var C=n.buildLayerMatrix(b),S=e.merge(i(b,C),a(b,C)),M={},I;e.forEach(["u","d"],function(N){I=N==="u"?C:e.values(C).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(I=e.map(I,function(O){return e.values(O).reverse()}));var P=(N==="u"?b.predecessors:b.successors).bind(b),D=d(b,I,S,P),F=p(b,I,D.root,D.align,R==="r");R==="r"&&(F=e.mapValues(F,function(O){return-O})),M[N+R]=F})});var E=_(b,M);return h(M,E),g(M,b.graph().align)}function q(b,C,S){return function(M,I,E){var N=M.node(I),R=M.node(E),P=0,D;if(P+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":D=-N.width/2;break;case"r":D=N.width/2;break}if(D&&(P+=S?D:-D),D=0,P+=(N.dummy?C:b)/2,P+=(R.dummy?C:b)/2,P+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":D=R.width/2;break;case"r":D=-R.width/2;break}return D&&(P+=S?D:-D),D=0,P}}function w(b,C){return b.node(C).width}return a0}var s0,dk;function EL(){if(dk)return s0;dk=1;var e=Ct(),t=Fr(),n=ML().positionX;s0=i;function i(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,l){s.node(l).x=u})}function a(s){var u=t.buildLayerMatrix(s),l=s.graph().ranksep,d=0;e.forEach(u,function(p){var m=e.max(e.map(p,function(_){return s.node(_).height}));e.forEach(p,function(_){s.node(_).y=d+m/2}),d+=m+l})}return s0}var u0,pk;function IL(){if(pk)return u0;pk=1;var e=Ct(),t=cL(),n=dL(),i=fL(),a=Fr().normalizeRanks,s=_L(),u=Fr().removeEmptyRanks,l=mL(),d=hL(),p=yL(),m=kL(),_=EL(),h=Fr(),g=jn().Graph;u0=x;function x(W,J){var re=J&&J.debugTiming?h.time:h.notime;re("layout",function(){var ue=re("  buildLayoutGraph",function(){return P(W)});re("  runLayout",function(){q(ue,re)}),re("  updateInputGraph",function(){w(W,ue)})})}function q(W,J){J("    makeSpaceForEdgeLabels",function(){D(W)}),J("    removeSelfEdges",function(){Y(W)}),J("    acyclic",function(){t.run(W)}),J("    nestingGraph.run",function(){l.run(W)}),J("    rank",function(){i(h.asNonCompoundGraph(W))}),J("    injectEdgeLabelProxies",function(){F(W)}),J("    removeEmptyRanks",function(){u(W)}),J("    nestingGraph.cleanup",function(){l.cleanup(W)}),J("    normalizeRanks",function(){a(W)}),J("    assignRankMinMax",function(){O(W)}),J("    removeEdgeLabelProxies",function(){Q(W)}),J("    normalize.run",function(){n.run(W)}),J("    parentDummyChains",function(){s(W)}),J("    addBorderSegments",function(){d(W)}),J("    order",function(){m(W)}),J("    insertSelfEdges",function(){oe(W)}),J("    adjustCoordinateSystem",function(){p.adjust(W)}),J("    position",function(){_(W)}),J("    positionSelfEdges",function(){z(W)}),J("    removeBorderNodes",function(){G(W)}),J("    normalize.undo",function(){n.undo(W)}),J("    fixupEdgeLabelCoords",function(){H(W)}),J("    undoCoordinateSystem",function(){p.undo(W)}),J("    translateGraph",function(){j(W)}),J("    assignNodeIntersects",function(){U(W)}),J("    reversePoints",function(){te(W)}),J("    acyclic.undo",function(){t.undo(W)})}function w(W,J){e.forEach(W.nodes(),function(re){var ue=W.node(re),ae=J.node(re);ue&&(ue.x=ae.x,ue.y=ae.y,J.children(re).length&&(ue.width=ae.width,ue.height=ae.height))}),e.forEach(W.edges(),function(re){var ue=W.edge(re),ae=J.edge(re);ue.points=ae.points,e.has(ae,"x")&&(ue.x=ae.x,ue.y=ae.y)}),W.graph().width=J.graph().width,W.graph().height=J.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],M=["width","height"],I={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function P(W){var J=new g({multigraph:!0,compound:!0}),re=_e(W.graph());return J.setGraph(e.merge({},C,X(re,b),e.pick(re,S))),e.forEach(W.nodes(),function(ue){var ae=_e(W.node(ue));J.setNode(ue,e.defaults(X(ae,M),I)),J.setParent(ue,W.parent(ue))}),e.forEach(W.edges(),function(ue){var ae=_e(W.edge(ue));J.setEdge(ue,e.merge({},N,X(ae,E),e.pick(ae,R)))}),J}function D(W){var J=W.graph();J.ranksep/=2,e.forEach(W.edges(),function(re){var ue=W.edge(re);ue.minlen*=2,ue.labelpos.toLowerCase()!=="c"&&(J.rankdir==="TB"||J.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})}function F(W){e.forEach(W.edges(),function(J){var re=W.edge(J);if(re.width&&re.height){var ue=W.node(J.v),ae=W.node(J.w),he={rank:(ae.rank-ue.rank)/2+ue.rank,e:J};h.addDummyNode(W,"edge-proxy",he,"_ep")}})}function O(W){var J=0;e.forEach(W.nodes(),function(re){var ue=W.node(re);ue.borderTop&&(ue.minRank=W.node(ue.borderTop).rank,ue.maxRank=W.node(ue.borderBottom).rank,J=e.max(J,ue.maxRank))}),W.graph().maxRank=J}function Q(W){e.forEach(W.nodes(),function(J){var re=W.node(J);re.dummy==="edge-proxy"&&(W.edge(re.e).labelRank=re.rank,W.removeNode(J))})}function j(W){var J=Number.POSITIVE_INFINITY,re=0,ue=Number.POSITIVE_INFINITY,ae=0,he=W.graph(),Ee=he.marginx||0,je=he.marginy||0;function Ie(Te){var Pe=Te.x,Fe=Te.y,We=Te.width,Be=Te.height;J=Math.min(J,Pe-We/2),re=Math.max(re,Pe+We/2),ue=Math.min(ue,Fe-Be/2),ae=Math.max(ae,Fe+Be/2)}e.forEach(W.nodes(),function(Te){Ie(W.node(Te))}),e.forEach(W.edges(),function(Te){var Pe=W.edge(Te);e.has(Pe,"x")&&Ie(Pe)}),J-=Ee,ue-=je,e.forEach(W.nodes(),function(Te){var Pe=W.node(Te);Pe.x-=J,Pe.y-=ue}),e.forEach(W.edges(),function(Te){var Pe=W.edge(Te);e.forEach(Pe.points,function(Fe){Fe.x-=J,Fe.y-=ue}),e.has(Pe,"x")&&(Pe.x-=J),e.has(Pe,"y")&&(Pe.y-=ue)}),he.width=re-J+Ee,he.height=ae-ue+je}function U(W){e.forEach(W.edges(),function(J){var re=W.edge(J),ue=W.node(J.v),ae=W.node(J.w),he,Ee;re.points?(he=re.points[0],Ee=re.points[re.points.length-1]):(re.points=[],he=ae,Ee=ue),re.points.unshift(h.intersectRect(ue,he)),re.points.push(h.intersectRect(ae,Ee))})}function H(W){e.forEach(W.edges(),function(J){var re=W.edge(J);if(e.has(re,"x"))switch((re.labelpos==="l"||re.labelpos==="r")&&(re.width-=re.labeloffset),re.labelpos){case"l":re.x-=re.width/2+re.labeloffset;break;case"r":re.x+=re.width/2+re.labeloffset;break}})}function te(W){e.forEach(W.edges(),function(J){var re=W.edge(J);re.reversed&&re.points.reverse()})}function G(W){e.forEach(W.nodes(),function(J){if(W.children(J).length){var re=W.node(J),ue=W.node(re.borderTop),ae=W.node(re.borderBottom),he=W.node(e.last(re.borderLeft)),Ee=W.node(e.last(re.borderRight));re.width=Math.abs(Ee.x-he.x),re.height=Math.abs(ae.y-ue.y),re.x=he.x+re.width/2,re.y=ue.y+re.height/2}}),e.forEach(W.nodes(),function(J){W.node(J).dummy==="border"&&W.removeNode(J)})}function Y(W){e.forEach(W.edges(),function(J){if(J.v===J.w){var re=W.node(J.v);re.selfEdges||(re.selfEdges=[]),re.selfEdges.push({e:J,label:W.edge(J)}),W.removeEdge(J)}})}function oe(W){var J=h.buildLayerMatrix(W);e.forEach(J,function(re){var ue=0;e.forEach(re,function(ae,he){var Ee=W.node(ae);Ee.order=he+ue,e.forEach(Ee.selfEdges,function(je){h.addDummyNode(W,"selfedge",{width:je.label.width,height:je.label.height,rank:Ee.rank,order:he+ ++ue,e:je.e,label:je.label},"_se")}),delete Ee.selfEdges})})}function z(W){e.forEach(W.nodes(),function(J){var re=W.node(J);if(re.dummy==="selfedge"){var ue=W.node(re.e.v),ae=ue.x+ue.width/2,he=ue.y,Ee=re.x-ae,je=ue.height/2;W.setEdge(re.e,re.label),W.removeNode(J),re.label.points=[{x:ae+2*Ee/3,y:he-je},{x:ae+5*Ee/6,y:he-je},{x:ae+Ee,y:he},{x:ae+5*Ee/6,y:he+je},{x:ae+2*Ee/3,y:he+je}],re.label.x=re.x,re.label.y=re.y}})}function X(W,J){return e.mapValues(e.pick(W,J),Number)}function _e(W){var J={};return e.forEach(W,function(re,ue){J[ue.toLowerCase()]=re}),J}return u0}var l0,fk;function TL(){if(fk)return l0;fk=1;var e=Ct(),t=Fr(),n=jn().Graph;l0={debugOrdering:i};function i(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(l){u.setNode(l,{label:l}),u.setParent(l,"layer"+a.node(l).rank)}),e.forEach(a.edges(),function(l){u.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,d){var p="layer"+d;u.setNode(p,{rank:"same"}),e.reduce(l,function(m,_){return u.setEdge(m,_,{style:"invis"}),_})}),u}return l0}var c0,_k;function NL(){return _k||(_k=1,c0="0.8.5"),c0}var d0,mk;function jL(){return mk||(mk=1,d0={graphlib:jn(),layout:IL(),debug:TL(),util:{time:Fr().time,notime:Fr().notime},version:NL()}),d0}var PL=jL();const hk=Va(PL),RL=44,VL=8,yk=120,FL=380,OL=e=>{var d,p,m;const t=(d=e.data)==null?void 0:d.recipe;if(!t)return yk+100;const n=((p=t.inputs)==null?void 0:p.length)||0,i=((m=t.outputs)==null?void 0:m.length)||0,a=Math.max(n,i,1),u=a*RL+(a-1)*VL+24;return yk+u+12},AL=(e,t)=>{if(!e||e.length===0)return e;const n=new hk.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=FL,u=OL(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),hk.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},LL={custom:tV},DL={custom:nV},kl=e=>typeof e=="number"?e.toFixed(4):"0",Ml=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:i,styleType:a})=>{const[s,u]=A.useState(""),[l,d]=A.useState(!1),p=l?s:kl(n),m=()=>{if(!l)return;const q=parseFloat(s);isNaN(q)||i(q),d(!1),u("")},_=a==="input",h=_?"var(--input-bg)":"var(--output-bg)",g=_?"var(--input-border)":"var(--output-border)",x=_?"var(--input-text)":"var(--output-text)";return f.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${g}`,borderRadius:"var(--radius-sm)"},children:[f.jsx("div",{style:{color:x,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",kl(t),"/s"]}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[_?"Current Deficiency:":"Current Excess:"," ",kl(Math.abs(n)),"/s"]}),f.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:_?"Target Additional Demand:":"Target Excess:"}),f.jsx("input",{type:"text",value:p,onFocus:()=>{d(!0),u(kl(n))},onChange:q=>u(q.target.value),onBlur:m,onKeyPress:q=>q.key==="Enter"&&m(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),f.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},gk=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function BL(){const[e,t,n]=S6([]),[i,a,s]=C6([]),[u,l]=A.useState(0),[d,p]=A.useState(!1),[m,_]=A.useState(!1),[h,g]=A.useState(null),[x,q]=A.useState(null),[w,b]=A.useState("product"),[C,S]=A.useState("button"),[M,I]=A.useState(""),[E,N]=A.useState("name_asc"),[R,P]=A.useState("all"),[D,F]=A.useState("all"),[O,Q]=A.useState("all"),[j,U]=A.useState(null),[H,te]=A.useState([]),[G,Y]=A.useState(!1),[oe,z]=A.useState(!1),[X,_e]=A.useState("targets"),[W,J]=A.useState(0),[re,ue]=A.useState(!1),[ae,he]=A.useState(null),[Ee,je]=A.useState(""),[Ie,Te]=A.useState(null),[Pe,Fe]=A.useState("free"),[We,Be]=A.useState(!1),[rt,et]=A.useState(!1),[pt,lt]=A.useState(!1),[ct,st]=A.useState(!1),[Cr,Zt]=A.useState(!1),[zt,Jt]=A.useState(!1),[ot,Or]=A.useState(()=>{const T=Rl();return{edgePath:T.edgePath||"orthogonal",edgeStyle:T.edgeStyle||"animated"}}),[Tt,Yr]=A.useState(!1),[mr,$t]=A.useState(!1),[Qe,qi]=A.useState(!1),[Nt,cn]=A.useState("pan"),[me,at]=A.useState(0),[Ar,Lr]=A.useState(!1),[hr,Zn]=A.useState(!0),[Vn,Pt]=A.useState(1),[er,Ht]=A.useState({}),[ft,$o]=A.useState("perSecond"),[vt,to]=A.useState("total"),[Wt,Qr]=A.useState([]),[At,Lt]=A.useState(null),[Ut,Gt]=A.useState(null),[yr,ir]=A.useState(null),[gr,Et]=A.useState(null),[Xr,or]=A.useState(null),[ro,no]=A.useState({}),[ar,Si]=A.useState(null),[Ci,io]=A.useState({}),[Jn,_t]=A.useState("all"),[ei,dn]=A.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[ti,pn]=A.useState([]),[mt,Zr]=A.useState(null),[Fn,Kt]=A.useState(null),[Ho,vr]=A.useState({x:0,y:0}),ri=A.useRef(null),fn=A.useRef(null),$a=A.useRef(null),ki=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",kr=A.useRef(null),_n=A.useRef([]),Wo=A.useCallback(T=>{const B=T.filter(Z=>Z.type!=="remove"),$=B.filter(Z=>Z.type==="position"),L=B.filter(Z=>Z.type!=="position");$.length>0&&n($),L.length>0&&(_n.current.push(...L),kr.current&&clearTimeout(kr.current),kr.current=setTimeout(()=>{_n.current.length>0&&(n(_n.current),_n.current=[])},50))},[n]),Ha=A.useCallback(T=>{s(T)},[s]);A.useEffect(()=>{const T=Rl();ec(T),Or({edgePath:T.edgePath||"orthogonal",edgeStyle:T.edgeStyle||"animated"}),xV(Hr,Cn,Mn);const B=()=>{const $="ontouchstart"in window||navigator.maxTouchPoints>0,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);qi($&&L)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const tr=A.useCallback(()=>({onInputClick:pu,onOutputClick:Vc,isMobile:Qe,mobileActionMode:Nt,onDrillSettingsChange:fo,onLogicAssemblerSettingsChange:Ei,onTreeFarmSettingsChange:Zo,onIndustrialFireboxSettingsChange:Fc,onTemperatureSettingsChange:Oc,onBoilerSettingsChange:Wa,onChemicalPlantSettingsChange:Ua,onWasteFacilitySettingsChange:fu,onLiquidDumpSettingsChange:Ln,onLiquidBurnerSettingsChange:Ga,onMiddleClick:Ac,onHandleDoubleClick:Jo,onMachineCountModeChange:Lc}),[Qe,Nt]);A.useEffect(()=>{hV().catch(L=>{console.error("Failed to initialize save system:",L)});const T=t3();if(!(T!=null&&T.nodes))return;const B=tr(),$=T.nodes.map(L=>{var ce,pe,ve,be;const Z=gt((pe=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:pe.machine_id);let ne=(ve=L.data)==null?void 0:ve.recipe;return Z&&ne&&!((be=ne.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(ne=qs(ne,Z.id)),{...L,data:{...L.data,recipe:ne,machine:Z,machineCount:L.data.machineCount??1,displayMode:ft,machineDisplayMode:vt,...B,globalPollution:me,flows:null,suggestions:[]}}});t($),a(T.edges||[]),te(T.targetProducts||[]),Ht(T.soldProducts||{}),Qr(T.favoriteRecipes||[]),Lt(T.lastDrillConfig||null),Gt(T.lastAssemblerConfig||null),ir(T.lastTreeFarmConfig||null),Et(T.lastFireboxConfig||null),or(T.lastWasteFacilityConfig||null),l(T.nodeId||0),J(T.targetIdCounter||0)},[]),A.useEffect(()=>{t(T=>{let B=!1;const $=T.map(L=>L.data.displayMode===ft&&L.data.machineDisplayMode===vt&&L.data.zoomLevel===Vn?L:(B=!0,{...L,data:{...L.data,displayMode:ft,machineDisplayMode:vt,zoomLevel:Vn}}));return B?$:T})},[ft,vt,Vn,t]),A.useEffect(()=>{a(T=>{let B=!1;const $=T.map(L=>{var Z,ne;return((Z=L.data)==null?void 0:Z.edgePath)===ot.edgePath&&((ne=L.data)==null?void 0:ne.edgeStyle)===ot.edgeStyle?L:(B=!0,{...L,data:ot})});return B?$:T})},[ot,a]);const Mr=A.useCallback(T=>({id:T.id,type:T.type,position:T.position,sourcePosition:T.sourcePosition,targetPosition:T.targetPosition,data:{recipe:T.data.recipe,machineCount:T.data.machineCount,machineCountMode:T.data.machineCountMode,cappedMachineCount:T.data.cappedMachineCount,isTarget:T.data.isTarget,leftHandles:T.data.leftHandles,rightHandles:T.data.rightHandles}}),[]);A.useEffect(()=>{const T={nodes:e.map(Mr),edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Ut,lastTreeFarmConfig:yr,lastFireboxConfig:gr,lastWasteFacilityConfig:Xr};localStorage.setItem("industrialist_canvas_state",JSON.stringify(T))},[e,i,H,u,W,er,Wt,At,Ut,yr,gr,Xr,Mr]);const ao=A.useCallback(()=>{var Z,ne;let T=0,B=0,$=0;const L=e.length;for(let ce=0;ce<L;ce++){const pe=e[ce],{recipe:ve,machine:be,machineCount:ke=0}=pe.data||{};if(!ve)continue;const de=typeof ve.pollution=="number"?ve.pollution:parseFloat(ve.pollution);!isNaN(de)&&isFinite(de)&&(B+=de*ke);const ge=(((Z=ve.inputs)==null?void 0:Z.length)||0)+(((ne=ve.outputs)==null?void 0:ne.length)||0),we=Math.ceil(ke);if((be==null?void 0:be.id)==="m_industrial_firebox"){$+=we*(1+ge*2);continue}if((be==null?void 0:be.id)==="m_tree_farm"&&ve.treeFarmSettings){const{trees:Re,harvesters:Ke,sprinklers:Ze,controller:ut,outputs:nt}=ve.treeFarmSettings,Rt=typeof ve.power_consumption=="number"?ve.power_consumption:0;T+=Rt*ke;const ur=Math.ceil(Ze/3),xt=ve.power_type==="HV"?2:Math.ceil(Rt/15e5)*2,yn=Re+Ke+Ze+ur*3+ut+nt*3+xt;$+=we*yn;continue}const ye=ve.power_consumption;let Ce=0;typeof ye=="number"?(Ce=ye,T+=ye*ke):typeof ye=="object"&&ye!==null&&"max"in ye&&(Ce=ye.max,T+=Ce*ke);const Ve=ve.power_type==="HV"?2:Math.ceil(Ce/15e5)*2;$+=we*(1+Ve+ge*2)}return{totalPower:T,totalPollution:B,totalModelCount:$}},[e]),xr=A.useMemo(()=>ao(),[e]);A.useEffect(()=>{if(hr||xr.totalPollution===0)return;const T=setInterval(()=>{if(Ar)return;const B=xr.totalPollution/3600;at($=>{if(typeof $!="number"||isNaN($)||!isFinite($))return $;const L=parseFloat(($+B).toFixed(4));return L!==$?L:$})},1e3);return()=>clearInterval(T)},[xr.totalPollution,Ar,hr]),A.useEffect(()=>{const T=setInterval(Sn,2e4);return()=>clearInterval(T)},[]);const ni=A.useRef(null),Uo=A.useRef(me);A.useEffect(()=>{if(!(Math.abs(me-Uo.current)<.01))return Uo.current=me,ni.current&&clearTimeout(ni.current),ni.current=setTimeout(()=>{t(T=>{let B=!1;const $=T.map(L=>{const{recipe:Z,machine:ne,globalPollution:ce}=L.data||{};if(Z!=null&&Z.isTreeFarm&&Z.treeFarmSettings){const{trees:pe,harvesters:ve,sprinklers:be,outputs:ke,controller:de}=Z.treeFarmSettings,ge=mg(pe,ve,me),we=Xl(pe,ve,be,ke,de,me);return B=!0,{...L,data:{...L.data,recipe:{...Z,outputs:ge,power_consumption:we?we.avgPowerConsumption:"Variable"},globalPollution:me}}}if((ne==null?void 0:ne.id)==="m_air_separation_unit"){const pe=gk(me),ve=Z.outputs.map(be=>be.product_id==="p_residue"?{...be,quantity:parseFloat(pe.toFixed(6))}:be);return B=!0,{...L,data:{...L.data,recipe:{...Z,outputs:ve},globalPollution:me}}}return ce!==me?(B=!0,{...L,data:{...L.data,globalPollution:me}}):L});return B?$:T})},250),()=>clearTimeout(ni.current)},[me,t]);const[Ne,du]=A.useState(()=>yw([],[],{skipTemperature:!0})),so=A.useRef(null),Go=A.useRef(""),Ko=A.useRef(!1),Yo=A.useRef(null),$e=A.useCallback((T="general")=>{Yo.current=T,Ko.current=!0},[]);A.useEffect(()=>{if(Ko.current)return so.current&&clearTimeout(so.current),so.current=setTimeout(()=>{const T=`${e.length}-${i.length}-${e.map(B=>{var $,L,Z,ne,ce,pe,ve,be,ke,de,ge,we,ye;return`${B.id}:${($=B.data)==null?void 0:$.machineCount}:${JSON.stringify(((Z=(L=B.data)==null?void 0:L.recipe)==null?void 0:Z.temperatureSettings)||{})}:${JSON.stringify(((ce=(ne=B.data)==null?void 0:ne.recipe)==null?void 0:ce.drillSettings)||{})}:${JSON.stringify(((ve=(pe=B.data)==null?void 0:pe.recipe)==null?void 0:ve.assemblerSettings)||{})}:${JSON.stringify(((ke=(be=B.data)==null?void 0:be.recipe)==null?void 0:ke.treeFarmSettings)||{})}:${JSON.stringify(((ge=(de=B.data)==null?void 0:de.recipe)==null?void 0:ge.fireboxSettings)||{})}:${JSON.stringify(((ye=(we=B.data)==null?void 0:we.recipe)==null?void 0:ye.chemicalPlantSettings)||{})}`}).join(",")}`;if(T!==Go.current){const B=Yo.current||"general",$=["connection","node","temperatureSettings","boilerSettings"].includes(B);console.log(`[Recalculation] Reason: ${B}, Temperature propagation: ${$}`);const L=yw(e,i,{skipTemperature:!$,previousTemperatureData:$?null:Ne==null?void 0:Ne.temperatureData});du(L),Go.current=T}Ko.current=!1,Yo.current=null},100),()=>clearTimeout(so.current)},[e,i,Ne]);const Qo=A.useMemo(()=>HV(Ne),[Ne]),uo=A.useMemo(()=>WV(Ne),[Ne]),Dr=A.useRef(null),mn=A.useRef(null),hn=A.useCallback((T,B,$)=>{var pe,ve,be,ke,de,ge;const L=(pe=T.data)==null?void 0:pe.recipe,Z=B.byNode[T.id];if(T.data.flows===Z&&T.data.suggestions===$)return T;const ne=T.data.flows!==Z,ce=T.data.suggestions!==$&&(((ve=T.data.suggestions)==null?void 0:ve.length)!==($==null?void 0:$.length)||JSON.stringify(T.data.suggestions)!==JSON.stringify($||[]));if(L!=null&&L.isWasteFacility){const we=Math.min(((be=Z==null?void 0:Z.inputFlows[0])==null?void 0:be.connected)||0,240),ye=Math.min(((ke=Z==null?void 0:Z.inputFlows[1])==null?void 0:ke.connected)||0,240),Ce=L.wasteFacilitySettings||{};if(!ne&&!ce&&Ce.itemFlowRate===we&&Ce.fluidFlowRate===ye)return T;const Ve=Pl(we,ye),Re=Jl(we,ye,L.inputs[0].product_id,L.inputs[1].product_id);return{...T,data:{...T.data,recipe:{...L,inputs:Re,cycle_time:Ve.cycleTime,wasteFacilitySettings:{...Ce,itemFlowRate:we,fluidFlowRate:ye}},flows:Z||null,suggestions:$||[],zoomLevel:T.data.zoomLevel}}}if(L!=null&&L.isLiquidDump){const we=((de=T.data)==null?void 0:de.machineCount)||1,ye=L.inputs.map((Ve,Re)=>{var Ze;return Math.min(((Ze=Z==null?void 0:Z.inputFlows[Re])==null?void 0:Ze.connected)||0,15*we)/we}),Ce=js(L.inputs,ye);return!ne&&!ce&&L.pollution===Ce?T:{...T,data:{...T.data,recipe:{...L,pollution:Ce},flows:Z||null,suggestions:$||[],zoomLevel:T.data.zoomLevel}}}if(L!=null&&L.isLiquidBurner){const we=((ge=T.data)==null?void 0:ge.machineCount)||1,ye=L.inputs.map((Ve,Re)=>{var Ze;return Math.min(((Ze=Z==null?void 0:Z.inputFlows[Re])==null?void 0:Ze.connected)||0,15*we)/we}),Ce=Ps(L.inputs,ye);return!ne&&!ce&&L.pollution===Ce?T:{...T,data:{...T.data,recipe:{...L,pollution:Ce},flows:Z||null,suggestions:$||[],zoomLevel:T.data.zoomLevel}}}return!ne&&!ce?T:{...T,data:{...T.data,flows:Z||null,suggestions:$||[],zoomLevel:T.data.zoomLevel}}},[]);A.useEffect(()=>{var T;if((T=Ne==null?void 0:Ne.flows)!=null&&T.byNode&&mn.current!==Ne.flows)return mn.current=Ne.flows,Dr.current&&clearTimeout(Dr.current),Dr.current=setTimeout(()=>{t(B=>{let $=B;Ne.temperatureData&&($=I0(B,Ne.temperatureData,Ne.graph));let L=!1;const Z=$.map(ne=>{const ce=hn(ne,Ne.flows,Ne.suggestions);return ce!==ne&&(L=!0),ce});return L?Z:B})},250),()=>clearTimeout(Dr.current)},[Ne,t,hn]);const On=A.useMemo(()=>Qo.map(T=>{const B=H.some($=>{var Z,ne,ce;const L=e.find(pe=>pe.id===$.recipeBoxId);return(ce=(ne=(Z=L==null?void 0:L.data)==null?void 0:Z.recipe)==null?void 0:ne.outputs)==null?void 0:ce.some(pe=>pe.product_id===T.productId)});return{...T,isSold:er[T.productId]??(B&&typeof T.product.price=="number"&&T.product.price>1)}}),[Qo,er,H,e]),Mi=A.useMemo(()=>On.reduce((T,B)=>B.isSold&&typeof B.product.price=="number"?T+B.product.price*B.excessRate:T,0),[On]),An=A.useMemo(()=>{const T=new Map,B=new Map,$=(Z,ne,ce)=>{T.set(Z,(T.get(Z)||0)+ne),B.has(Z)||B.set(Z,ce)};e.forEach(Z=>{var ve,be,ke,de,ge,we;const{machine:ne,machineCount:ce=0,recipe:pe}=Z.data||{};if(ne){if(ne.id==="m_tree_farm"&&(pe!=null&&pe.treeFarmSettings)){const{trees:ye,harvesters:Ce,sprinklers:Ve,outputs:Re,controller:Ke}=pe.treeFarmSettings,Ze=Math.ceil(Ve/3);$("m_tree",Math.ceil(ye*ce),((ve=gt("m_tree"))==null?void 0:ve.cost)||0),$("m_tree_harvester",Math.ceil(Ce*ce),((be=gt("m_tree_harvester"))==null?void 0:be.cost)||0),$("m_tree_farm_sprinkler",Math.ceil(Ve*ce),((ke=gt("m_tree_farm_sprinkler"))==null?void 0:ke.cost)||0),$("m_tree_farm_water_tank",Math.ceil(Ze*ce),((de=gt("m_tree_farm_water_tank"))==null?void 0:de.cost)||0),$("m_tree_farm_output",Math.ceil(Re*ce),((ge=gt("m_tree_farm_output"))==null?void 0:ge.cost)||0),$("m_tree_farm_controller",Math.ceil(Ke*ce),((we=gt("m_tree_farm_controller"))==null?void 0:we.cost)||0);return}$(ne.id,Math.ceil(ce),typeof ne.cost=="number"?ne.cost:0)}});const L=Array.from(T.entries()).map(([Z,ne])=>{const ce=Cn.find(ve=>ve.id===Z),pe=B.get(Z);return{machineId:Z,machine:ce,count:ne,cost:pe,totalCost:ne*pe}}).sort((Z,ne)=>Z.machine.name.localeCompare(ne.machine.name));return{stats:L,totalCost:L.reduce((Z,ne)=>Z+ne.totalCost,0)}},[e,Cn]),Jr=(T,B)=>t($=>$.map(L=>L.id===T?{...L,data:B(L.data)}:L)),lo=A.useCallback((T,B,$,L)=>{const Z=Object.keys(Us).map(pe=>parseInt(pe));let ne=null,ce=0;return Z.forEach(pe=>{const be=Us[pe].find(ke=>ke.product_id===T);if(be){const ke=Ao(B,$,L,pe);if(ke){const de=L?1.1:1,ge=be.quantity*de*ke.dutyCycle;ge>ce&&(ce=ge,ne=pe)}}}),ne},[]),co=A.useCallback((T,B,$)=>{const L={drillConfig:At,assemblerConfig:Ut,treeFarmConfig:yr,fireboxConfig:gr},Z=(Ne==null?void 0:Ne.flows)||null;return UV(T,B,$,lo,L,me,Z)},[At,Ut,yr,gr,lo,me,Ne]),Rc=A.useCallback(T=>{const B=e.find(ne=>ne.id===T.source),$=e.find(ne=>ne.id===T.target);if(!B||!$)return;const L=B.data.recipe.outputs[parseInt(T.sourceHandle.split("-")[1])],Z=$.data.recipe.inputs[parseInt(T.targetHandle.split("-")[1])];if(!(!L||!Z)){if(Z.isAnyProduct){const ne=bt(L.product_id);if(Z.acceptedType&&(ne==null?void 0:ne.type)!==Z.acceptedType)return;t(ce=>ce.map(pe=>{var ke;if(pe.id!==$.id)return pe;const ve=parseInt(T.targetHandle.split("-")[1]),be=[...pe.data.recipe.inputs];if(be[ve]={...be[ve],product_id:L.product_id,isAnyProduct:!1},pe.data.recipe.isWasteFacility){const de=pe.data.recipe.wasteFacilitySettings||{},ge=(ke=Ne==null?void 0:Ne.flows)==null?void 0:ke.byNode[T.source],we=parseInt(T.sourceHandle.split("-")[1]),ye=ge!=null&&ge.outputFlows[we]?ge.outputFlows[we].produced-ge.outputFlows[we].connected:0,Ce=Math.min(ye,240);ve===0?de.itemFlowRate=Ce:ve===1&&(de.fluidFlowRate=Ce);const Ve=Pl(de.itemFlowRate||0,de.fluidFlowRate||0),Re=Jl(de.itemFlowRate||0,de.fluidFlowRate||0,ve===0?L.product_id:be[0].product_id,ve===1?L.product_id:be[1].product_id);return{...pe,data:{...pe.data,recipe:{...pe.data.recipe,inputs:Re,cycle_time:Ve.cycleTime,wasteFacilitySettings:de}}}}if(pe.data.recipe.isLiquidDump||pe.data.recipe.isLiquidBurner){const de=pe.data.recipe.isLiquidDump?js(be):Ps(be);return{...pe,data:{...pe.data,recipe:{...pe.data.recipe,inputs:be,pollution:de}}}}return{...pe,data:{...pe.data,recipe:{...pe.data.recipe,inputs:be}}}}))}else if(L.product_id!==Z.product_id)return;a(ne=>w0({...T,type:"custom",animated:!1,data:ot},ne)),Sn(),$e("connection")}},[a,e,ot,$e,t,Ne]),po=()=>{p(!1),g(null),q(null),b("product"),I(""),N("name_asc"),P("all"),F("all"),U(null),S("button"),no({}),Q("all")},Xo=A.useCallback(()=>{p(!0),U(null),S("button")},[]),pu=A.useCallback((T,B,$,L)=>{if(L!=null&&L.ctrlKey){a(ne=>ne.filter(ce=>!(ce.target===B&&ce.targetHandle===`left-${$}`))),Sn(),$e("connection");return}const Z=bt(T);Z&&(p(!0),g(Z),U({nodeId:B,inputIndex:$,productId:T}),S("rectangle"),F("producers"))},[a,Qe,Nt,$e]),Vc=A.useCallback((T,B,$,L)=>{var ve,be;if(L!=null&&L.ctrlKey){a(ke=>ke.filter(de=>!(de.source===B&&de.sourceHandle===`right-${$}`))),Sn(),$e("connection");return}const Z=_o.current.find(ke=>ke.id===B),ne=(be=(ve=Z==null?void 0:Z.data)==null?void 0:ve.recipe)==null?void 0:be.machine_id,ce=ne&&fr[ne],pe=bt(T);pe&&(p(!0),g(pe),U({nodeId:B,outputIndex:$,productId:T,isOutput:!0,isFromHeatSource:!!ce}),S("rectangle"),F("consumers"))},[a,Qe,Nt,$e]),sr=A.useCallback((T,B,$)=>{a(L=>{const Z=L.filter(ne=>{var ce,pe,ve,be;if(ne.source===T){const ke=parseInt(ne.sourceHandle.split("-")[1]);if(ke>=$.length)return!1;const de=$[ke],ge=e.find(Ce=>Ce.id===ne.target);if(!ge)return!1;const we=parseInt(ne.targetHandle.split("-")[1]),ye=(pe=(ce=ge.data)==null?void 0:ce.recipe)==null?void 0:pe.inputs[we];if(!ye||ye.product_id!==de.product_id)return!1}if(ne.target===T){const ke=parseInt(ne.targetHandle.split("-")[1]);if(ke>=B.length)return!1;const de=B[ke],ge=e.find(Ce=>Ce.id===ne.source);if(!ge)return!1;const we=parseInt(ne.sourceHandle.split("-")[1]),ye=(be=(ve=ge.data)==null?void 0:ve.recipe)==null?void 0:be.outputs[we];if(!ye||ye.product_id!==de.product_id)return!1}return!0});return Z.length!==L.length&&(Sn(),$e("connection")),Z})},[a,e,$e]),fo=A.useCallback((T,B,$,L)=>{Lt({drillHead:B.drillHead,consumable:B.consumable,machineOil:B.machineOil});const Z=B.drillHead&&B.depth?Ao(B.drillHead,B.consumable,B.machineOil,B.depth):null;Jr(T,ne=>({...ne,recipe:{...ne.recipe,inputs:$.length>0?$:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:B,cycle_time:1,power_consumption:Z?{max:Z.drillingPower*1e6,average:(Z.drillingPower*Z.lifeTime+Z.idlePower*(Z.replacementTime+Z.travelTime))/Z.totalCycleTime*1e6}:"Variable",pollution:Z?Z.pollution:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),sr(T,$,L),$e("settings")},[sr,$e]),Ei=A.useCallback((T,B,$,L)=>{Gt({outerStage:B.outerStage,innerStage:B.innerStage,machineOil:B.machineOil,tickCircuitDelay:B.tickCircuitDelay});const ne=!B.outerStage||!B.innerStage?"":B.outerStage===1?`p_${B.innerStage}x_microchip`:`p_${B.outerStage}x${B.innerStage}x_microchip`,ce=ne?iu(ne,B.machineOil,B.tickCircuitDelay):null;Jr(T,pe=>({...pe,recipe:{...pe.recipe,inputs:$.length>0?$:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:B,cycle_time:ce?ce.cycleTime:"Variable",power_consumption:ce?{max:ce.maxPowerConsumption,average:ce.avgPowerConsumption}:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),sr(T,$,L),$e("settings")},[sr,$e]),Zo=A.useCallback((T,B,$,L)=>{ir({trees:B.trees,harvesters:B.harvesters,sprinklers:B.sprinklers,outputs:B.outputs});const Z=Xl(B.trees,B.harvesters,B.sprinklers,B.outputs,B.controller,me);Jr(T,ne=>({...ne,recipe:{...ne.recipe,inputs:$.length>0?$:[{product_id:"p_water",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:B,cycle_time:1,power_consumption:Z?Z.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),a(ne=>ne.filter(ce=>{if(ce.source===T||ce.target===T){const pe=parseInt((ce.source===T?ce.sourceHandle:ce.targetHandle).split("-")[1]);return ce.source===T?pe<L.length:pe<$.length}return!0})),$e("settings")},[a,me,$e]),Fc=A.useCallback((T,B,$,L)=>{Et({fuel:B.fuel}),Jr(T,Z=>({...Z,recipe:{...Z.recipe,inputs:$,fireboxSettings:B,cycle_time:L?L.cycleTime:Z.recipe.cycle_time,power_consumption:0}})),$e("settings")},[$e]),Oc=A.useCallback((T,B,$,L)=>{t(Z=>Z.map(ne=>{if(ne.id!==T)return ne;const ce=gt(ne.data.recipe.machine_id),pe=Gr(ce==null?void 0:ce.id);let ve=ne.data.recipe.power_type;(ce==null?void 0:ce.id)==="m_electric_water_heater"&&(ve=B.temperature>=320?"HV":"MV");let be={...ne.data.recipe,outputs:$,temperatureSettings:B,power_consumption:L??ne.data.recipe.power_consumption,power_type:ve};if((ce==null?void 0:ce.id)==="m_water_treatment_plant"&&pe){const ke=B.temperature||In,de=Un(ce.id,ke,1),ge=90*de,we=17.6,ye=17.6;be={...be,inputs:be.inputs.map(Ce=>Ce.product_id==="p_water"?{...Ce,quantity:we*de,originalQuantity:we}:Ce.product_id==="p_distilled_water"?{...Ce,quantity:ye*de,originalQuantity:ye}:Ce),outputs:be.outputs.map(Ce=>Ce.product_id==="p_steam"?{...Ce,quantity:ge,originalQuantity:90}:Ce)}}return{...ne,data:{...ne.data,recipe:be}}})),$e("temperatureSettings")},[t,$e]),Wa=A.useCallback((T,B)=>{t($=>$.map(L=>{if(L.id!==T)return L;const Z=gt(L.data.recipe.machine_id),ne=fr[Z==null?void 0:Z.id];return!ne||ne.type!=="boiler"?L:{...L,data:{...L.data,recipe:{...L.data.recipe,temperatureSettings:B}}}})),$e("boilerSettings")},[t,$e]),Jo=A.useCallback((T,B,$,L,Z)=>{const ne=B==="right"?"output":"input",ce=Z==null?void 0:Z.find(pe=>pe.nodeId===T&&pe.handleType===ne&&pe.handleIndex===$);ce&&(t(pe=>pe.map(ve=>{var ge,we;if(ve.id!==T)return ve;const be=((ge=ve.data)==null?void 0:ge.machineCountMode)||"free",ke=(we=ve.data)==null?void 0:we.cappedMachineCount;if(be==="locked")return console.log(`Node ${T} is locked - suggestion ignored`),ve;let de=ce.suggestedMachineCount;return be==="capped"&&typeof ke=="number"&&de>ke&&(console.log(`Node ${T} is capped at ${ke} - clamping suggestion from ${de} to ${ke}`),de=ke),{...ve,data:{...ve.data,machineCount:de}}})),$e("machineCount"))},[t,$e]),Ua=A.useCallback((T,B)=>{t($=>$.map(L=>{if(L.id!==T)return L;const Z=gt(L.data.recipe.machine_id);if((Z==null?void 0:Z.id)!=="m_chemical_plant")return L;const ne=Mn.find(pe=>pe.id===L.data.recipe.id);if(!ne)return L;const ce=O3(ne,B.speedFactor,B.efficiencyFactor);return{...L,data:{...L.data,recipe:ce}}})),$e("settings")},[t,$e]),fu=A.useCallback((T,B,$,L)=>{or({itemProductId:B.itemProductId,fluidProductId:B.fluidProductId}),t(Z=>Z.map(ne=>{if(ne.id!==T)return ne;const ce=ne.data.recipe.wasteFacilitySettings||{},pe=ce.itemFlowRate||0,ve=ce.fluidFlowRate||0,be=Pl(pe,ve);return{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,wasteFacilitySettings:{...B,itemFlowRate:pe,fluidFlowRate:ve},cycle_time:be.cycleTime},leftHandles:Math.max($.length,1)}}})),sr(T,$,L),$e("settings")},[sr,$e,t]),Ln=A.useCallback((T,B,$,L)=>{t(Z=>Z.map(ne=>ne.id!==T?ne:{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,liquidDumpSettings:B,pollution:js($)},leftHandles:Math.max($.length,1)}})),sr(T,$,L),$e("settings")},[sr,$e,t]),Ga=A.useCallback((T,B,$,L)=>{t(Z=>Z.map(ne=>ne.id!==T?ne:{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,liquidBurnerSettings:B,pollution:Ps($)},leftHandles:Math.max($.length,1)}})),sr(T,$,L),$e("settings")},[sr,$e,t]),Er=A.useCallback((T,B=null)=>{var ge,we;const $=gt(T.machine_id);if(!$||!T.inputs||!T.outputs){alert("Error: Invalid machine or recipe data");return}let L=qs(T,$.id);const Z=`node-${u}`,ne=j?e.find(ye=>ye.id===j.nodeId):null;let ce;if(ne)ce={x:ne.position.x+(j.isOutput?400:-400),y:ne.position.y};else if(fn.current&&ri.current){const ye=ri.current.getBoundingClientRect(),Ce=fn.current.screenToFlowPosition({x:ye.left+ye.width/2,y:ye.top+ye.height/2}),Ve=320,Re=300,Ke=50;let Ze={x:Ce.x-Ve/2,y:Ce.y-Re/2},ut=0;for(;ut<20&&e.some(xt=>{const yn=Math.abs(xt.position.x-Ze.x),Qc=Math.abs(xt.position.y-Ze.y);return yn<Ve+Ke&&Qc<Re+Ke});){const Rt=ut/20*Math.PI*2,ur=100+ut*50;Ze={x:Ce.x-Ve/2+Math.cos(Rt)*ur,y:Ce.y-Re/2+Math.sin(Rt)*ur},ut++}ce=Ze}else ce={x:Math.random()*400+100,y:Math.random()*300+100};if(((ge=fr[$.id])==null?void 0:ge.type)==="boiler"){const ye={heatLoss:((we=L.temperatureSettings)==null?void 0:we.heatLoss)??0,coolantTemp:Qi},Ce=_g($.id,ye,Qi,null,Qi),Ve=fr[$.id],Re=CE(L.outputs,Ce,!0,Ve,Qi);L={...L,outputs:Re,temperatureSettings:ye}}const ve={drillConfig:At,assemblerConfig:Ut,treeFarmConfig:yr,fireboxConfig:gr};if(IE(L)&&(L=EE(L,j,h,ve,me,lo),L.drillSettings&&Lt({drillHead:L.drillSettings.drillHead,consumable:L.drillSettings.consumable,machineOil:L.drillSettings.machineOil}),L.assemblerSettings&&Gt({outerStage:L.assemblerSettings.outerStage,innerStage:L.assemblerSettings.innerStage,machineOil:L.assemblerSettings.machineOil,tickCircuitDelay:L.assemblerSettings.tickCircuitDelay}),L.treeFarmSettings&&ir({trees:L.treeFarmSettings.trees,harvesters:L.treeFarmSettings.harvesters,sprinklers:L.treeFarmSettings.sprinklers,outputs:L.treeFarmSettings.outputs}),L.fireboxSettings&&Et({fuel:L.fireboxSettings.fuel})),$.id==="m_air_separation_unit"){const ye=gk(me),Ce=L.outputs.map(Ve=>Ve.product_id==="p_residue"?{...Ve,quantity:parseFloat(ye.toFixed(6))}:Ve);L={...L,outputs:Ce}}const be=B!==null?B:ro[T.id]??1,ke=tr(),de={id:Z,type:"custom",position:ce,data:{recipe:L,machine:$,machineCount:be,machineCountMode:"free",cappedMachineCount:void 0,displayMode:ft,machineDisplayMode:vt,leftHandles:Math.max(L.inputs.length,1),rightHandles:Math.max(L.outputs.length,1),...ke,globalPollution:me,isTarget:!1,flows:null,suggestions:[],zoomLevel:Vn},sourcePosition:"right",targetPosition:"left"};return t(ye=>{const Ce=[...ye,de];return $e("node"),j&&be>0&&setTimeout(()=>{var Ke,Ze,ut;const Ve=j.isOutput?"inputs":"outputs";let Re=-1;if((L.isWasteFacility||L.id==="r_underground_waste_facility")&&!j.isOutput)j.productId==="p_concrete_block"?Re=2:j.productId==="p_lead_ingot"?Re=3:Re=L[Ve].findIndex(nt=>nt.product_id===j.productId);else if(j.isOutput&&j.isFromHeatSource){const nt=gt(L.machine_id);if(nt&&((Ke=fr[nt.id])==null?void 0:Ke.type)==="boiler"&&L.inputs.length>=2){const ur=(Ze=L.inputs[0])==null?void 0:Ze.product_id,xt=(ut=L.inputs[1])==null?void 0:ut.product_id;ur===xt&&xt===j.productId||xt===j.productId?Re=1:Re=L[Ve].findIndex(yn=>yn.product_id===j.productId)}else Re=L[Ve].findIndex(ur=>ur.product_id===j.productId)}else Re=L[Ve].findIndex(nt=>nt.product_id===j.productId);if(Re!==-1){const nt=j.isOutput?j.outputIndex:Re,Rt=j.isOutput?Re:j.inputIndex,ur={source:j.isOutput?j.nodeId:Z,sourceHandle:`right-${nt}`,target:j.isOutput?Z:j.nodeId,targetHandle:`left-${Rt}`,type:"custom",animated:!1,data:ot};a(xt=>w0(ur,xt)),Sn(),$e("connection")}},50),Ce}),l(ye=>ye+1),$e(),Z},[u,e,t,a,ft,vt,At,Ut,yr,gr,lo,ro,me,h,$e,j,ot,tr]),ii=A.useCallback(T=>{t(B=>B.filter($=>$.id!==T)),a(B=>B.filter($=>$.source!==T&&$.target!==T)),te(B=>B.filter($=>$.recipeBoxId!==T)),Sn(),$e("node")},[t,a,$e]),Ii=A.useCallback(T=>{var $;H.find(L=>L.recipeBoxId===T.id)?(te(L=>L.filter(Z=>Z.recipeBoxId!==T.id)),t(L=>L.map(Z=>Z.id===T.id?{...Z,data:{...Z.data,isTarget:!1}}:Z))):($=T.data)!=null&&$.recipe&&(te(L=>[...L,{id:`target_${W}`,recipeBoxId:T.id}]),J(L=>L+1),t(L=>L.map(Z=>Z.id===T.id?{...Z,data:{...Z.data,isTarget:!0}}:Z)))},[H,W,t]),oi=A.useCallback((T,B,$,L)=>{var Ve;const Z=H.find(Re=>Re.id===T);if(!Z)return;const ne=e.find(Re=>Re.id===Z.recipeBoxId);if(!ne)return;const{recipe:ce,machine:pe,machineCount:ve=0}=ne.data||{};if(!ce)return;const be=ce.isMineshaftDrill||ce.id==="r_mineshaft_drill";let ke=ce.cycle_time;if((typeof ke!="number"||ke<=0)&&(ke=1),Gr(pe==null?void 0:pe.id)){const Re=sn[pe.id];if((Re==null?void 0:Re.type)==="steam_input"&&gi(ce)){const Ke=ce.tempDependentInputTemp??In;ke=Un(pe.id,Ke,ke)}}(typeof ke!="number"||ke<=0)&&(ke=1);const ge=(Ve=Ne==null?void 0:Ne.flows)==null?void 0:Ve.byNode[Z.recipeBoxId];if(!ge)return;let we=0,ye=0;if(B==="output"){const Re=ge.outputFlows[$];if(!Re)return;we=Re.connected;const Ke=ce.outputs[$],Ze=Ke.originalQuantity!==void 0?Ke.originalQuantity:Ke.quantity;ye=be?Ze:Ze/ke}else{const Re=ge.inputFlows[$];if(!Re)return;we=Re.connected;const Ke=ce.inputs[$];ye=be?Ke.quantity:Ke.quantity/ke}if(ye<=0)return;const Ce=(we+L)/ye;Jr(Z.recipeBoxId,Re=>({...Re,machineCount:Ce})),$e("machineCount")},[H,e,Ne,$e]),Ka=A.useCallback(T=>{const B=H.find($=>$.id===T);B&&(te($=>$.filter(L=>L.id!==T)),Jr(B.recipeBoxId,$=>({...$,isTarget:!1})))},[H]),wr=A.useCallback((T,B)=>{if(Qe){if(Nt==="target"){Ii(B);return}else if(Nt==="delete"){ii(B.id);return}}T.shiftKey&&!T.ctrlKey&&!T.altKey?Ii(B):T.ctrlKey&&T.altKey&&ii(B.id)},[Qe,Nt,Ii,ii]),Ti=A.useCallback((T,B)=>{var $,L;T.stopPropagation(),he(B.id),je(String((($=B.data)==null?void 0:$.machineCount)??0)),Fe(((L=B.data)==null?void 0:L.machineCountMode)||"free"),ue(!0)},[]),_o=A.useRef(e),mo=A.useRef(i);A.useEffect(()=>{_o.current=e},[e]),A.useEffect(()=>{mo.current=i},[i]);const Ac=A.useCallback(T=>{const B=_o.current.find($=>$.id===T);B&&Si({recipe:{...B.data.recipe},machine:B.data.machine,machineCount:B.data.machineCount})},[]),Ya=A.useCallback(T=>{if(!ri.current)return;const B=ri.current.getBoundingClientRect();vr({x:T.clientX-B.left,y:T.clientY-B.top})},[]),Qa=A.useCallback(T=>{if(!ar||T.button!==0||(T.stopPropagation(),!fn.current))return;const B=fn.current.screenToFlowPosition({x:T.clientX,y:T.clientY});B.x-=160,B.y-=150;const $=`node-${u}`,L=tr(),Z={id:$,type:"custom",position:B,data:{recipe:ar.recipe,machine:ar.machine,machineCount:ar.machineCount,displayMode:ft,machineDisplayMode:vt,leftHandles:ar.recipe.inputs.length,rightHandles:ar.recipe.outputs.length,...L,globalPollution:me,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(ne=>[...ne,Z]),l(ne=>ne+1),Si(null),$e("node")},[ar,u,ft,vt,me,t,tr,$e]),ho=A.useCallback(T=>{T.button===2&&Si(null)},[]),Ni=A.useCallback((T=!1)=>{var $,L;let B=parseFloat(Ee);if(isNaN(B)||B<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}B=0}if(ae&&!Ie){const Z=e.find(pe=>pe.id===ae),ne=(($=Z==null?void 0:Z.data)==null?void 0:$.machineCount)||0;let ce=(L=Z==null?void 0:Z.data)==null?void 0:L.cappedMachineCount;if(Pe==="capped"?ce=B:Pe==="free"&&(ce=void 0),T&&ne>0&&B!==ne){const pe=Vs(e,i),ve=Ne==null?void 0:Ne.flows;if(ve){const be=YV(ae,ne,B,pe,ve,e);t(ke=>ke.map(de=>{const ge=be.get(de.id);return de.id===ae?{...de,data:{...de.data,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}}:ge!==void 0?{...de,data:{...de.data,machineCount:ge}}:de}))}else Jr(ae,be=>({...be,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Jr(ae,pe=>({...pe,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Ie&&Jr(Ie,Z=>({...Z,machineCount:B}));ue(!1),he(null),je(""),Fe("free"),Te(null),$e("machineCount")},[ae,Ee,Pe,Ie,e,i,Ne,t,ii,$e]),Xa=A.useCallback(()=>{Ie&&(ii(Ie),p(!0),g(null),q(null),b("product")),ue(!1),he(null),je(""),Fe("free"),Te(null)},[Ie,ii]),Lc=A.useCallback((T,B,$)=>{let L,Z;B==="free"?(L="capped",Z=$):B==="capped"?(L="locked",Z=$):(L="free",Z=void 0),t(ne=>ne.map(ce=>ce.id!==T?ce:{...ce,data:{...ce.data,machineCountMode:L,cappedMachineCount:Z}}))},[t]),Dc=A.useCallback(()=>{const T=AL(e,i);t(T)},[e,i,t]),Bc=A.useCallback(()=>{if(H.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let T=Yw(e,i,H,{allowDeficiency:!1});if(!T.success&&T.hasDeficiency)if(window.confirm(`${T.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))T=Yw(e,i,H,{allowDeficiency:!0});else return;T.success?(t(B=>B.map($=>{const L=T.updates.get($.id);return L!==void 0?{...$,data:{...$.data,machineCount:L}}:$})),$e("machineCount"),alert(`Success! Updated ${T.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(T.message||"No changes needed - production line is already balanced.")},[H,e,i,t,$e]),ea=()=>{if(!h)return[];const T=bt(h.id),B=EV(h.id),$=MV(h.id),L=[nw,aw,sw,R0,O0,L0],Z=L.filter(pe=>KV(pe.id).includes(h.id)),ne=L.filter(pe=>{if(GV(pe.id).includes(h.id))return!0;if(T){if(pe.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(pe.id==="r_liquid_dump"||pe.id==="r_liquid_burner")return!1}return!1}),ce=L.filter(pe=>pe.id==="r_liquid_dump"||pe.id==="r_liquid_burner"?(T==null?void 0:T.type)==="fluid":pe.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return D==="producers"?[...B,...Z]:D==="consumers"?[...$,...ne]:D==="disposal"?ce:Array.from(new Map([...B,...$,...Z,...ne,...ce].map(pe=>[pe.id,pe])).values())};A.useEffect(()=>{if(d){const T=w==="product"?ea():ql(x==null?void 0:x.id),B=j?e.find(L=>L.id===j.nodeId):null,$={};T.forEach(L=>{$[L.id]=co(L,B,j)}),no($)}},[d,w,h,x,j,e,D]);const ai=A.useCallback(()=>{t([]),a([]),l(0),te([]),J(0),Ht({}),Lt(null),Gt(null),ir(null),Et(null),or(null),Sn()},[t,a,l,te,J,Ht,Lt,Gt,ir,Et,or]),zc=A.useCallback(()=>{const T=document.createElement("input");T.type="file",T.accept=".json",T.onchange=B=>{var Z;const $=(Z=B.target.files)==null?void 0:Z[0];if(!$)return;const L=new FileReader;L.onload=ne=>{try{const ce=JSON.parse(ne.target.result);if(!ce.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const pe=ce.canvas.nodes||[],ve=[];if(pe.forEach(de=>{var we,ye,Ce,Ve,Re,Ke,Ze,ut;const ge=(ye=(we=de.data)==null?void 0:we.recipe)==null?void 0:ye.machine_id;ge&&!gt(ge)&&ve.push(`Machine: ${ge}`),(Re=(Ve=(Ce=de.data)==null?void 0:Ce.recipe)==null?void 0:Ve.inputs)==null||Re.forEach(nt=>{nt.product_id!=="p_variableproduct"&&!bt(nt.product_id)&&ve.push(`Product: ${nt.product_id}`)}),(ut=(Ze=(Ke=de.data)==null?void 0:Ke.recipe)==null?void 0:Ze.outputs)==null||ut.forEach(nt=>{nt.product_id!=="p_variableproduct"&&!bt(nt.product_id)&&ve.push(`Product: ${nt.product_id}`)})}),ve.length>0){const de=[...new Set(ve)];alert(`Cannot import canvas - missing items:
${de.slice(0,10).join(`
`)}${de.length>10?`
...and ${de.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const be=tr(),ke=pe.map(de=>{var ye,Ce,Ve,Re;const ge=gt((Ce=(ye=de.data)==null?void 0:ye.recipe)==null?void 0:Ce.machine_id);let we=(Ve=de.data)==null?void 0:Ve.recipe;return ge&&we&&!((Re=we.outputs)!=null&&Re.some(Ke=>Ke.temperature!==void 0))&&(we=qs(we,ge.id)),{...de,data:{...de.data,recipe:we,machine:ge,machineCount:de.data.machineCount??1,displayMode:ft,machineDisplayMode:vt,...be,globalPollution:me,flows:null,suggestions:[]}}});ai(),setTimeout(()=>{t(ke),a(ce.canvas.edges||[]),te(ce.canvas.targetProducts||[]),Ht(ce.canvas.soldProducts||{}),Qr(ce.canvas.favoriteRecipes||[]),Lt(ce.canvas.lastDrillConfig||null),Gt(ce.canvas.lastAssemblerConfig||null),ir(ce.canvas.lastTreeFarmConfig||null),Et(ce.canvas.lastFireboxConfig||null),or(ce.canvas.lastWasteFacilityConfig||null),l(ce.canvas.nodeId||0),J(ce.canvas.targetIdCounter||0),Sn(),$e("node")},50),alert("Canvas imported successfully!")}catch(ce){alert(`Import failed: ${ce.message}`)}},L.readAsText($)},T.click()},[ft,vt,me,tr,ai,t,a,te,Ht,Qr,Lt,Gt,ir,Et,or,l,J,$e]),$c=A.useCallback(T=>{var L;const B=(L=T.target.files)==null?void 0:L[0];if(!B)return;const $=new FileReader;$.onload=Z=>{var ne,ce;try{const pe=JSON.parse(Z.target.result),ve=pe.products||pe.machines||pe.recipes,be=pe.canvas;if(ve){const ke=new Map((pe.products||[]).map(Ce=>[Ce.id,Ce])),de=Array.from(ke.values()),ge=new Set(((ne=pe.machines)==null?void 0:ne.map(Ce=>Ce.id))||[]),we=(pe.recipes||[]).filter(Ce=>ge.has(Ce.machine_id)),ye=[...Hr];if(de.forEach(Ce=>{const Ve=ye.findIndex(Re=>Re.id===Ce.id);Ve>=0?ye[Ve]=Ce:ye.push(Ce)}),k0(ye),((ce=pe.machines)==null?void 0:ce.length)>0){const Ce=[...Cn],Ve=new Set(pe.machines.map(Ke=>Ke.id)),Re=Mn.filter(Ke=>!Ve.has(Ke.machine_id));pe.machines.forEach(Ke=>{const Ze=Ce.findIndex(ut=>ut.id===Ke.id);Ze>=0?Ce[Ze]=Ke:Ce.push(Ke)}),M0(Ce),E0([...Re,...we])}if(!be){alert("Data import successful!"),window.location.reload();return}}if(be){const ke=pe.canvas.nodes||[],de=[];if(ke.forEach(ye=>{var Ve,Re,Ke,Ze,ut,nt,Rt,ur;const Ce=(Re=(Ve=ye.data)==null?void 0:Ve.recipe)==null?void 0:Re.machine_id;Ce&&!gt(Ce)&&de.push(`Machine: ${Ce}`),(ut=(Ze=(Ke=ye.data)==null?void 0:Ke.recipe)==null?void 0:Ze.inputs)==null||ut.forEach(xt=>{xt.product_id!=="p_variableproduct"&&!bt(xt.product_id)&&de.push(`Product: ${xt.product_id}`)}),(ur=(Rt=(nt=ye.data)==null?void 0:nt.recipe)==null?void 0:Rt.outputs)==null||ur.forEach(xt=>{xt.product_id!=="p_variableproduct"&&!bt(xt.product_id)&&de.push(`Product: ${xt.product_id}`)})}),de.length>0){const ye=[...new Set(de)];alert(`Cannot import canvas - missing items:
${ye.slice(0,10).join(`
`)}${ye.length>10?`
...and ${ye.length-10} more`:""}`),T.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){T.target.value="";return}const ge=tr(),we=ke.map(ye=>{var Re,Ke,Ze,ut;const Ce=gt((Ke=(Re=ye.data)==null?void 0:Re.recipe)==null?void 0:Ke.machine_id);let Ve=(Ze=ye.data)==null?void 0:Ze.recipe;return Ce&&Ve&&!((ut=Ve.outputs)!=null&&ut.some(nt=>nt.temperature!==void 0))&&(Ve=qs(Ve,Ce.id)),{...ye,data:{...ye.data,recipe:Ve,machine:Ce,machineCount:ye.data.machineCount??1,displayMode:ft,machineDisplayMode:vt,...ge,globalPollution:me,flows:null,suggestions:[]}}});ai(),setTimeout(()=>{t(we),a(pe.canvas.edges||[]),te(pe.canvas.targetProducts||[]),Ht(pe.canvas.soldProducts||{}),Qr(pe.canvas.favoriteRecipes||[]),Lt(pe.canvas.lastDrillConfig||null),Gt(pe.canvas.lastAssemblerConfig||null),ir(pe.canvas.lastTreeFarmConfig||null),Et(pe.canvas.lastFireboxConfig||null),or(pe.canvas.lastWasteFacilityConfig||null),l(pe.canvas.nodeId||0),J(pe.canvas.targetIdCounter||0),Sn(),$e("node")},50),alert("Canvas import successful!")}}catch(pe){alert(`Import failed: ${pe.message}`)}},$.readAsText(B),T.target.value=""},[ft,vt,me,tr,ai,t,a,te,Ht,Qr,Lt,Gt,ir,l,J]);A.useCallback(()=>{const T=new Blob([JSON.stringify({products:Hr,machines:Cn,recipes:Mn},null,2)],{type:"application/json"}),B=URL.createObjectURL(T),$=document.createElement("a");$.href=B,$.download=`industrialist-data-${Date.now()}.json`,$.click(),URL.revokeObjectURL(B)},[Hr,Cn,Mn]);const Hc=A.useCallback(()=>{const T={nodes:e.map(Mr),edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Ut,lastTreeFarmConfig:yr,lastFireboxConfig:gr,lastWasteFacilityConfig:Xr},B=new Blob([JSON.stringify({canvas:T},null,2)],{type:"application/json"}),$=URL.createObjectURL(B),L=document.createElement("a");L.href=$,L.download=`industrialist-canvas-${Date.now()}.json`,L.click(),URL.revokeObjectURL($)},[e,i,H,u,W,er,Wt,At,Ut,yr,gr,Xr,Mr]);A.useCallback(()=>{const T=new Blob([JSON.stringify({products:Hr,machines:Cn,recipes:Mn,canvas:{nodes:e.map(Mr),edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Ut,lastTreeFarmConfig:yr,lastFireboxConfig:gr,lastWasteFacilityConfig:Xr}},null,2)],{type:"application/json"}),B=URL.createObjectURL(T),$=document.createElement("a");$.href=B,$.download=`industrialist-export-${Date.now()}.json`,$.click(),URL.revokeObjectURL(B)},[e,i,H,u,W,er,Wt,At,Ut,yr,gr,Mr]);const Wc=A.useCallback(()=>{const T=Fa(),B=Oa(),$=ou();k0(T),M0(B),E0($),$e("node")},[$e]),_u=A.useCallback(T=>{const B=tr(),$=T.nodes.map(L=>{var ce,pe,ve,be;const Z=gt((pe=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:pe.machine_id);let ne=(ve=L.data)==null?void 0:ve.recipe;return Z&&ne&&!((be=ne.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(ne=qs(ne,Z.id)),{...L,data:{...L.data,recipe:ne,machine:Z,machineCount:L.data.machineCount??1,displayMode:ft,machineDisplayMode:vt,...B,globalPollution:me,flows:null,suggestions:[]}}});ai(),setTimeout(()=>{t($),a(T.edges||[]),te(T.targetProducts||[]),Ht(T.soldProducts||{}),Qr(T.favoriteRecipes||[]),Lt(T.lastDrillConfig||null),Gt(T.lastAssemblerConfig||null),ir(T.lastTreeFarmConfig||null),Et(T.lastFireboxConfig||null),or(T.lastWasteFacilityConfig||null),l(T.nodeId||0),J(T.targetIdCounter||0),Sn(),$e("node")},50)},[ft,vt,me,tr,ai,t,a,te,Ht,Qr,Lt,Gt,ir,Et,or,l,J,$e]),Uc=A.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(n3(),bV(Gl),qV(Kl),SV(Yl),t([]),a([]),l(0),te([]),J(0),Ht({}),Lt(null),Gt(null),ir(null),Et(null),or(null),window.location.reload())},[t,a,Hr,Cn,Mn]);A.useEffect(()=>{const T=B=>{if(B.key==="industrialist_theme")try{const $=JSON.parse(B.newValue);Or({edgePath:$.edgePath||"orthogonal",edgeStyle:$.edgeStyle||"animated"})}catch($){console.error("Error parsing theme from storage:",$)}};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]),A.useEffect(()=>{if(!rt){const T=Rl();Or({edgePath:T.edgePath||"orthogonal",edgeStyle:T.edgeStyle||"animated"})}},[rt]);const Gc=Hr.filter(T=>T.name.toLowerCase().includes(M.toLowerCase())&&(R==="all"||T.type===R)).sort((T,B)=>E==="name_asc"?T.name.localeCompare(B.name):E==="name_desc"?B.name.localeCompare(T.name):E==="price_asc"?(T.price==="Variable"?1/0:T.price)-(B.price==="Variable"?1/0:B.price):E==="price_desc"?(B.price==="Variable"?-1/0:B.price)-(T.price==="Variable"?-1/0:T.price):E==="rp_asc"?(T.rp_multiplier==="Variable"?1/0:T.rp_multiplier)-(B.rp_multiplier==="Variable"?1/0:B.rp_multiplier):(B.rp_multiplier==="Variable"?-1/0:B.rp_multiplier)-(T.rp_multiplier==="Variable"?-1/0:T.rp_multiplier)),mu=Cn.filter(T=>{const B=T.name.toLowerCase().includes(M.toLowerCase()),$=T.id==="m_mineshaft_drill"||T.id==="m_logic_assembler"||T.id==="m_tree_farm"||T.id==="m_underground_waste_facility"||T.id==="m_liquid_dump"||T.id==="m_liquid_burner"||ql(T.id).length>0,L=O==="all"||T.tier!==void 0&&T.tier.toString()===O;return B&&$&&L}).sort((T,B)=>T.name.localeCompare(B.name)),Kc=T=>{if(T.id==="m_mineshaft_drill")Er(nw,1);else if(T.id==="m_logic_assembler")Er(aw,1);else if(T.id==="m_tree_farm")Er(sw,1);else if(T.id==="m_underground_waste_facility")Er(R0,1);else if(T.id==="m_liquid_dump")Er(O0,1);else if(T.id==="m_liquid_burner")Er(L0,1);else{q(T);return}po()},ta=(w==="product"?ea():ql(x==null?void 0:x.id)).sort((T,B)=>{const $=Wt.includes(T.id),L=Wt.includes(B.id);if($&&!L)return-1;if(!$&&L)return 1;const Z=gt(T.machine_id),ne=gt(B.machine_id);return((Z==null?void 0:Z.name)||"").localeCompare((ne==null?void 0:ne.name)||"")}),Yc=T=>{Qr(B=>B.includes(T)?B.filter($=>$!==T):[...B,T])};return f.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[f.jsxs(q6,{ref:ri,nodes:e,edges:i,onNodesChange:Wo,onEdgesChange:Ha,onConnect:Rc,onNodeClick:wr,onNodeDoubleClick:Ti,onMouseMove:Ya,onClick:Qa,onContextMenu:ho,onInit:T=>{fn.current=T,Pt(T.getZoom())},onMoveEnd:(T,B)=>{Pt(B.zoom)},nodeTypes:LL,edgeTypes:DL,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:ot.edgePath==="straight"?"straight":ot.edgePath==="orthogonal"?"smoothstep":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:ot.edgeStyle==="animated"||ot.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[f.jsx(T6,{color:"#333",gap:16,size:1}),!Qe&&f.jsx(O6,{className:(zt||Tt)&&!mr?"controls-shifted":"",position:"bottom-left"}),!Qe&&f.jsx(Q6,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),f.jsx(Ra,{position:"top-left",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:f.jsx("div",{className:`left-panel-container ${mr?"collapsed":""}`,style:Qe?{maxWidth:"100%"}:{},children:f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[f.jsxs("div",{className:"stats-panel",children:[f.jsx("h3",{className:"stats-title",children:ki}),f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Power:"}),f.jsx("div",{className:"stat-value",children:Vp(xr.totalPower)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Pollution:"}),f.jsxs("div",{className:"stat-value",style:{color:xr.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[xr.totalPollution.toFixed(2),"%/hr"]})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),f.jsx("div",{className:"stat-value",children:xr.totalModelCount.toFixed(0)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Profit:"}),f.jsxs("div",{className:"stat-value",style:{color:Mi>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",Sr(Mi),"/s"]})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Cost:"}),f.jsxs("div",{className:"stat-value",children:["$",Sr(An.totalCost)]})]})]})]}),f.jsxs("div",{className:"flex-col action-buttons-container",children:[f.jsx("button",{onClick:Xo,className:"btn btn-primary",children:"+ Select Recipe"}),f.jsx("button",{onClick:()=>{z(!0),_e("targets")},className:"btn btn-secondary",children:"View Recipes"}),f.jsx("button",{onClick:Bc,className:"btn btn-secondary",children:"Compute Machines"}),f.jsx("button",{onClick:Dc,className:"btn btn-secondary",children:"Auto Layout"}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>Jt(!zt),className:"btn btn-secondary btn-square",title:zt?"Close more statistics":"Open more statistics",children:zt?"":""}),f.jsx("button",{onClick:()=>$t(!mr),className:"btn btn-secondary btn-square btn-panel-toggle",title:mr?"Show left panel":"Hide left panel",children:mr?"":""})]})]})]}),(zt||Tt)&&f.jsxs("div",{className:`extended-panel ${Tt?"closing":""}`,children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Qe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Qe?"wrap":"nowrap",gap:Qe?"10px":"0"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Qe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Qe&&f.jsx("button",{onClick:()=>Jt(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),f.jsxs("div",{style:{display:"flex",gap:Qe?"5px":"10px",flexWrap:"wrap"},children:[f.jsx("button",{onClick:()=>$o(T=>T==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:ft==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:ft==="perSecond"?"Per Second":"Per Cycle"}),f.jsx("button",{onClick:()=>to(T=>T==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:vt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:vt==="perMachine"?"Per Machine":"Total"})]})]}),f.jsxs("div",{className:"extended-panel-content",children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("button",{onClick:()=>Zn(T=>!T),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:hr?"Resume pollution change":"Pause pollution change",children:hr?"":""}),f.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:me,onFocus:()=>Lr(!0),onBlur:T=>{Lr(!1);const B=T.target.value,$=parseFloat(B);at(!isNaN($)&&isFinite($)?parseFloat($.toFixed(4)):0)},onChange:T=>at(T.target.value===""?"":parseFloat(T.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),On.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:On.map(T=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:T.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:T.product.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[Sr(T.excessRate),"/s"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof T.product.price=="number"&&f.jsxs("div",{style:{color:T.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",Sr(T.product.price*T.excessRate),"/s"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[f.jsx("input",{type:"checkbox",checked:T.isSold,onChange:B=>Ht($=>({...$,[T.productId]:B.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},T.productId))})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),uo.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:uo.map(T=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:T.product.name}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",Sr(T.deficiencyRate),"/s"]})]}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[T.affectedNodes.length," node",T.affectedNodes.length!==1?"s":""," affected"]})]},T.productId))})]})]})]})]})})}),f.jsxs(Ra,{position:"top-right",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:[Qe&&f.jsxs("div",{className:"mobile-controls-container",children:[f.jsx("button",{onClick:()=>cn(T=>T==="target"?"pan":"target"),className:`btn ${Nt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),f.jsx("button",{onClick:()=>cn(T=>T==="delete"?"pan":"delete"),className:`btn ${Nt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),f.jsxs("div",{className:`menu-container ${We?"":"closed"}`,style:Qe?{maxWidth:"calc(100vw - 10px)"}:{},children:[f.jsx("button",{onClick:()=>Be(!We),className:"btn btn-secondary btn-menu-toggle",style:Qe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:We?">":"<"}),f.jsxs("div",{className:"menu-buttons",style:Qe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[f.jsx("button",{onClick:()=>{ai(),$e("node")},className:"btn btn-secondary",children:"Clear All"}),f.jsx("button",{onClick:()=>st(!0),className:"btn btn-secondary",children:"Saves"}),f.jsx("button",{onClick:()=>Zt(!0),className:"btn btn-secondary",children:"Data"}),f.jsx("button",{onClick:Uc,className:"btn btn-secondary",children:"Restore Defaults"}),f.jsx("button",{onClick:()=>et(!0),className:"btn btn-secondary",children:"Theme Editor"}),f.jsx("button",{onClick:()=>lt(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),f.jsx("input",{ref:$a,type:"file",accept:".json",style:{display:"none"},onChange:$c}),(re||m)&&f.jsx("div",{className:"modal-overlay",onClick:Xa,children:re&&f.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),style:{width:"450px"},children:[f.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("button",{onClick:()=>{const T=["free","capped","locked"],$=(T.indexOf(Pe)+1)%T.length,L=T[$];Fe(L)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:Pe==="locked"?"#ef4444":Pe==="capped"?"#f59e0b":"var(--bg-secondary)",color:Pe==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${Pe==="free"?"Free (LP/suggestions can change)":Pe==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:Pe==="free"?" Free":Pe==="capped"?" Cap":" Lock"}),f.jsx("input",{type:"number",min:"0",step:"0.1",value:Ee,onChange:T=>je(T.target.value),onKeyPress:T=>{T.key==="Enter"&&Ni(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),f.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[Pe==="free"&&"Free: LP solver and suggestions can modify this count",Pe==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Ee)||0} (the value when Apply is pressed)`,Pe==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ae&&!Ie&&f.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:f.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),f.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:Xa,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),f.jsx("button",{onClick:()=>Ni(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ae&&!Ie&&f.jsx("button",{onClick:()=>Ni(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),d&&f.jsx("div",{className:"modal-overlay",onClick:po,children:f.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),children:[f.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:x?`Recipes for ${x.name}`:"Select Product or Machine"}),!h&&!x?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-lg",children:f.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[f.jsx("button",{onClick:()=>b("product"),className:`btn ${w==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),f.jsx("button",{onClick:()=>b("machine"),className:`btn ${w==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),w==="product"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg flex-col",children:[f.jsx("input",{type:"text",placeholder:"Search products...",value:M,onChange:T=>I(T.target.value),className:"input"}),f.jsxs("div",{className:"flex-row",children:[f.jsxs("select",{value:R,onChange:T=>P(T.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Types"}),f.jsx("option",{value:"item",children:"Items Only"}),f.jsx("option",{value:"fluid",children:"Fluids Only"})]}),f.jsxs("select",{value:E,onChange:T=>N(T.target.value),className:"select",children:[f.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),f.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),f.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),f.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),f.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[f.jsxs("div",{className:"product-table-header",children:[f.jsx("div",{children:"Product"}),f.jsx("div",{className:"text-right",children:"Price"}),f.jsx("div",{className:"text-right",children:"RP Mult"})]}),Gc.map(T=>f.jsxs("div",{onClick:()=>g(T),className:"product-row",children:[f.jsxs("div",{children:[f.jsx("div",{className:"product-name",children:T.name}),f.jsx("div",{className:"product-type",children:T.type==="item"?" Item":" Fluid"})]}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:T.price==="Variable"?"Variable":`${Sr(T.price)}`}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:T.rp_multiplier==="Variable"?"Variable":T.rp_multiplier>=1e3?`${Sr(T.rp_multiplier)}x`:`${T.rp_multiplier.toFixed(1)}x`})]},T.id))]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:"Search machines...",value:M,onChange:T=>I(T.target.value),className:"input",style:{flex:3}}),f.jsxs("select",{value:O,onChange:T=>Q(T.target.value),className:"select",style:{flex:1},children:[f.jsx("option",{value:"all",children:"All Tiers"}),f.jsx("option",{value:"1",children:"Tier 1"}),f.jsx("option",{value:"2",children:"Tier 2"}),f.jsx("option",{value:"3",children:"Tier 3"}),f.jsx("option",{value:"4",children:"Tier 4"}),f.jsx("option",{value:"5",children:"Tier 5"})]})]}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:mu.length===0?f.jsx("div",{className:"empty-state",children:"No machines found"}):mu.map(T=>f.jsxs("div",{onClick:()=>Kc(T),className:"recipe-card",style:{cursor:"pointer"},children:[f.jsx("div",{className:"recipe-machine",style:{color:T.tier===1?"var(--tier-1-color)":T.tier===2?"var(--tier-2-color)":T.tier===3?"var(--tier-3-color)":T.tier===4?"var(--tier-4-color)":(T.tier===5,"var(--tier-5-color)")},children:T.name}),f.jsx("div",{className:"recipe-details",style:{color:"#999"},children:T.id==="m_mineshaft_drill"||T.id==="m_logic_assembler"||T.id==="m_tree_farm"?"Click to create box":`${ql(T.id).length} recipe(s)`})]},T.id))})]})]}):f.jsxs(f.Fragment,{children:[C==="button"&&f.jsx("button",{onClick:()=>{g(null),q(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&f.jsx("div",{className:"mb-lg",children:f.jsxs("select",{value:D,onChange:T=>F(T.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Recipes"}),f.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),f.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),f.jsx("option",{value:"disposal",children:"Disposal"})]})}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:ta.length===0?f.jsx("div",{className:"empty-state",children:"No recipes found"}):ta.map(T=>{const B=gt(T.machine_id),$=Wt.includes(T.id),L=ro[T.id]??1;return B&&T.inputs&&T.outputs?f.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("button",{onClick:Z=>{Z.stopPropagation(),Yc(T.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:$?"none":"grayscale(100%)",opacity:$?1:.4,transition:"all 0.2s"},onMouseEnter:Z=>{Z.currentTarget.style.transform="scale(1.2)",Z.currentTarget.style.opacity="1"},onMouseLeave:Z=>{Z.currentTarget.style.transform="scale(1)",Z.currentTarget.style.opacity=$?"1":"0.4"},title:$?"Remove from favorites":"Add to favorites",children:""}),f.jsx("div",{onClick:Z=>{Z.stopPropagation();const ne=L<=0?1:L,ce=Er(T,ne);_(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),je(String(ne)),ue(!0),_(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:j&&L<=0?"var(--delete-bg)":"var(--color-primary)",color:j&&L<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:j&&L<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:Z=>{j&&L<=0?(Z.currentTarget.style.background="var(--delete-hover-bg)",Z.currentTarget.style.color="var(--delete-hover-color)"):(Z.currentTarget.style.background="var(--color-primary-hover)",Z.currentTarget.style.transform="scale(1.05)",Z.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:Z=>{j&&L<=0?(Z.currentTarget.style.background="var(--delete-bg)",Z.currentTarget.style.color="var(--delete-color)"):(Z.currentTarget.style.background="var(--color-primary)",Z.currentTarget.style.transform="scale(1)",Z.currentTarget.style.borderColor="transparent")},title:j?L<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(L)?L:L.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(L)?L:L.toFixed(2)}),f.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:Z=>{if(Z.stopPropagation(),L<=0){const ce=Er(T,1);_(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),je("1"),ue(!0),_(!1)},50)}else Er(T),po()},children:[f.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[f.jsx("div",{className:"recipe-machine",style:{color:B.tier===1?"var(--tier-1-color)":B.tier===2?"var(--tier-2-color)":B.tier===3?"var(--tier-3-color)":B.tier===4?"var(--tier-4-color)":(B.tier===5,"var(--tier-5-color)")},children:B.name}),T.power_type==="HV"&&f.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),f.jsx("span",{children:T.inputs.map(Z=>ew(Z,bt)).join(", ")})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),f.jsx("span",{children:T.outputs.map(Z=>ew(Z,bt)).join(", ")})]})]})]},T.id):null})})]}),f.jsx("button",{onClick:po,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),G&&f.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:f.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[f.jsx("h2",{className:"modal-title",children:"Target Products"}),f.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:H.length===0?f.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):H.map(T=>{var ke;const B=e.find(de=>de.id===T.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Z=0}=B.data||{};if(!$)return null;let ne=$.cycle_time;if((typeof ne!="number"||ne<=0)&&(ne=1),Gr(L==null?void 0:L.id)){const de=sn[L.id];if((de==null?void 0:de.type)==="steam_input"&&gi($)){const ge=$.tempDependentInputTemp??In;ne=Un(L.id,ge,ne)}}(typeof ne!="number"||ne<=0)&&(ne=1);const pe=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=Ne==null?void 0:Ne.flows)==null?void 0:ke.byNode[T.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((de,ge)=>{var we;if(typeof de.quantity=="number"){const Ce=(pe?de.quantity:de.quantity/ne)*Z,Ve=((we=ve==null?void 0:ve.inputFlows[ge])==null?void 0:we.connected)||0;be.inputs[ge]={totalRate:Ce,connectedFlow:Ve,deficiency:Math.max(0,Ce-Ve)}}}),$.outputs.forEach((de,ge)=>{var ye;const we=de.quantity;if(typeof we=="number"){const Ve=(pe?we:we/ne)*Z,Re=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Ve,connectedFlow:Re,excess:Math.max(0,Ve-Re)}}}),f.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Z.toFixed(4)]})]}),f.jsx("button",{onClick:()=>Ka(T.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((de,ge)=>{const we=be.inputs[ge];return we?f.jsx(Ml,{productName:hi(de.product_id,bt),connectedFlow:we.connectedFlow,currentExcess:we.deficiency,onTargetExcessCommit:ye=>oi(T.id,"input",ge,ye),styleType:"input"},ge):null})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((de,ge)=>{const we=be.outputs[ge];return we?f.jsx(Ml,{productName:hi(de.product_id,bt),connectedFlow:we.connectedFlow,currentExcess:we.excess,onTargetExcessCommit:ye=>oi(T.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},T.id)})}),f.jsx("button",{onClick:()=>Y(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),oe&&f.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:f.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[f.jsx("h2",{className:"modal-title",children:"Recipes"}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[f.jsx("button",{onClick:()=>_e("targets"),className:X==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:X==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),f.jsx("button",{onClick:()=>_e("canvas"),className:X==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:X==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),X==="canvas"&&f.jsx("div",{style:{marginBottom:"15px"},children:f.jsxs("select",{value:Jn,onChange:T=>_t(T.target.value),className:"select",style:{width:"100%"},children:[f.jsx("option",{value:"all",children:"All Recipes"}),f.jsx("option",{value:"excess",children:"Has Excess"}),f.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),f.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:X==="targets"?f.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[f.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),f.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsx("button",{onClick:()=>{dn(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),pn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),f.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:T=>T.preventDefault(),onDrop:T=>{T.preventDefault(),mt&&mt!=="Deficiencies"&&ti.includes(mt)&&(pn(B=>B.filter($=>$!==mt)),dn(B=>[...B,mt])),Zr(null),Kt(null)},children:ei.length===0?f.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):ei.map((T,B)=>{const $=ei.length,L=$>1?B/($-1):0,Z=Math.round(239-205*L),ne=Math.round(68+129*L),ce=Math.round(68+26*L),pe=`rgb(${Z}, ${ne}, ${ce})`;return f.jsx("div",{draggable:T!=="Deficiencies",onDragStart:()=>T!=="Deficiencies"&&Zr(T),onDragOver:ve=>{ve.preventDefault(),mt&&mt!==T&&T!=="Deficiencies"&&Kt(B)},onDragLeave:()=>Kt(null),onDrop:ve=>{ve.preventDefault(),ve.stopPropagation(),mt&&mt!==T&&T!=="Deficiencies"&&(ti.includes(mt)?(pn(be=>be.filter(ke=>ke!==mt)),dn(be=>{const ke=[...be];return ke.splice(B,0,mt),ke})):ei.includes(mt)&&dn(be=>{const ke=be.filter(ge=>ge!==mt),de=ke.indexOf(T);return ke.splice(de,0,mt),ke})),Kt(null),Zr(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${pe}`,borderRadius:"var(--radius-sm)",cursor:T==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:T==="Deficiencies"?.7:mt===T?.5:1,boxShadow:Fn===B&&T!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:Fn===B&&T!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{Zr(null),Kt(null)},title:T==="Deficiencies"?"Deficiencies must always be active":"",children:T},T)})})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),f.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:T=>T.preventDefault(),onDrop:T=>{T.preventDefault(),mt&&mt!=="Deficiencies"&&ei.includes(mt)&&(dn(B=>B.filter($=>$!==mt)),pn(B=>[...B,mt])),Zr(null)},children:ti.length===0?f.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):ti.map(T=>f.jsx("div",{draggable:!0,onDragStart:()=>Zr(T),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>Zr(null),children:T},T))})]})]})]}),f.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),f.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),f.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:H.length===0?f.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):H.map(T=>{var ke;const B=e.find(de=>de.id===T.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Z=0}=B.data||{};if(!$)return null;let ne=$.cycle_time;if((typeof ne!="number"||ne<=0)&&(ne=1),Gr(L==null?void 0:L.id)){const de=sn[L.id];if((de==null?void 0:de.type)==="steam_input"&&gi($)){const ge=$.tempDependentInputTemp??In;ne=Un(L.id,ge,ne)}}(typeof ne!="number"||ne<=0)&&(ne=1);const pe=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=Ne==null?void 0:Ne.flows)==null?void 0:ke.byNode[T.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((de,ge)=>{var we;if(typeof de.quantity=="number"){const Ce=(pe?de.quantity:de.quantity/ne)*Z,Ve=((we=ve==null?void 0:ve.inputFlows[ge])==null?void 0:we.connected)||0;be.inputs[ge]={totalRate:Ce,connectedFlow:Ve,deficiency:Math.max(0,Ce-Ve)}}}),$.outputs.forEach((de,ge)=>{var ye;const we=de.quantity;if(typeof we=="number"){const Ve=(pe?we:we/ne)*Z,Re=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Ve,connectedFlow:Re,excess:Math.max(0,Ve-Re)}}}),f.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Z.toFixed(4)]})]}),f.jsx("button",{onClick:()=>Ka(T.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((de,ge)=>{const we=be.inputs[ge];return we?f.jsx(Ml,{productName:hi(de.product_id,bt),connectedFlow:we.connectedFlow,currentExcess:we.deficiency,onTargetExcessCommit:ye=>oi(T.id,"input",ge,ye),styleType:"input"},ge):null})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((de,ge)=>{const we=be.outputs[ge];return we?f.jsx(Ml,{productName:hi(de.product_id,bt),connectedFlow:we.connectedFlow,currentExcess:we.excess,onTargetExcessCommit:ye=>oi(T.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},T.id)})})]})]}):f.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?f.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(T=>{var ve;if(Jn==="all")return!0;const{recipe:B,machineCount:$=0}=T.data||{};if(!B)return!1;let L=B.cycle_time;(typeof L!="number"||L<=0)&&(L=1);const Z=(ve=Ne==null?void 0:Ne.flows)==null?void 0:ve.byNode[T.id];if(!Z)return!1;const ne=B.isMineshaftDrill||B.id==="r_mineshaft_drill";let ce=!1,pe=!1;return B.inputs.forEach((be,ke)=>{var de;if(typeof be.quantity=="number"){const we=(ne?be.quantity:be.quantity/L)*$,ye=((de=Z.inputFlows[ke])==null?void 0:de.connected)||0;Math.max(0,we-ye)>.001&&(pe=!0)}}),B.outputs.forEach((be,ke)=>{var ge;const de=be.originalQuantity!==void 0?be.originalQuantity:be.quantity;if(typeof de=="number"){const ye=(ne?de:de/L)*$,Ce=((ge=Z.outputFlows[ke])==null?void 0:ge.connected)||0;Math.max(0,ye-Ce)>.001&&(ce=!0)}}),Jn==="excess"?ce:Jn==="deficiency"?pe:!0}).map(T=>{const{recipe:B,machine:$,machineCount:L=0,machineCountMode:Z="free",cappedMachineCount:ne}=T.data||{};if(!B||!$)return null;let ce=B.cycle_time;if((typeof ce!="number"||ce<=0)&&(ce=1),Gr($==null?void 0:$.id)){const de=sn[$.id];if((de==null?void 0:de.type)==="steam_input"&&gi(B)){const ge=B.tempDependentInputTemp??In;ce=Un($.id,ge,ce)}}const ve=B.power_consumption;let be="Variable";typeof ve=="number"?be=Vp(ve*L):typeof ve=="object"&&ve!==null&&"max"in ve&&(be=`${Vp(ve.max*L)} (max)`);const ke=typeof B.pollution=="number"?B.pollution*L:0;return f.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:B.name}),f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("div",{style:{color:$.tier===1?"var(--tier-1-color)":$.tier===2?"var(--tier-2-color)":$.tier===3?"var(--tier-3-color)":$.tier===4?"var(--tier-4-color)":($.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",Sr(Math.ceil(L)*(typeof $.cost=="number"?$.cost:0))]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof ce=="number"?`${ce.toFixed(2)}s`:"Variable"]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",be]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",ke.toFixed(2),"%/hr"]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),B.inputs.map((de,ge)=>{var nt,Rt;const we=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=de.quantity,Ve=(typeof ye=="number"?we?ye:ye/ce:0)*L,Re=(nt=Ne==null?void 0:Ne.flows)==null?void 0:nt.byNode[T.id],Ke=((Rt=Re==null?void 0:Re.inputFlows[ge])==null?void 0:Rt.connected)||0,ut=Math.max(0,Ve-Ke)>.001;return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:ut?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[f.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:ut?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),f.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:hi(de.product_id,bt)}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?Sr(Ve):"Var","/s"]})]},ge)})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),B.outputs.map((de,ge)=>{var nt,Rt;const we=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=de.originalQuantity!==void 0?de.originalQuantity:de.quantity,Ve=(typeof ye=="number"?we?ye:ye/ce:0)*L,Re=(nt=Ne==null?void 0:Ne.flows)==null?void 0:nt.byNode[T.id],Ke=((Rt=Re==null?void 0:Re.outputFlows[ge])==null?void 0:Rt.connected)||0,ut=Math.max(0,Ve-Ke)>.001;return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:ut?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[f.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:ut?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),f.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:hi(de.product_id,bt)}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?Sr(Ve):"Var","/s"]})]},ge)})]})]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[f.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),f.jsx("input",{type:"number",min:"0",step:"0.1",value:Ci[T.id]!==void 0?Ci[T.id]:L.toFixed(2),onFocus:()=>{io(de=>({...de,[T.id]:L.toFixed(2)}))},onChange:de=>{io(ge=>({...ge,[T.id]:de.target.value}))},onBlur:()=>{const de=parseFloat(Ci[T.id]);!isNaN(de)&&de>=0&&(Jr(T.id,ge=>({...ge,machineCount:de})),$e("machineCount")),io(ge=>{const we={...ge};return delete we[T.id],we})},onKeyPress:de=>{de.key==="Enter"&&de.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),f.jsx("button",{onClick:()=>{const de=["free","capped","locked"],we=(de.indexOf(Z)+1)%de.length,ye=de[we];t(Ce=>Ce.map(Ve=>Ve.id!==T.id?Ve:{...Ve,data:{...Ve.data,machineCountMode:ye,cappedMachineCount:ye==="free"?void 0:L}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:Z==="locked"?"#ef4444":Z==="capped"?"#f59e0b":"var(--bg-secondary)",color:Z==="free"?"var(--text-primary)":"#fff",border:Z==="free"?"2px solid var(--border-primary)":"none"},title:Z==="free"?"Free: LP/suggestions can change":Z==="capped"?`Capped: Max ${(ne==null?void 0:ne.toFixed(2))||L.toFixed(2)}`:"Locked: Cannot be changed",children:Z==="free"?" Free":Z==="capped"?" Cap":" Lock"}),f.jsx("button",{onClick:()=>{fn.current&&(fn.current.fitView({nodes:[{id:T.id}],padding:.5,duration:500}),z(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},T.id)})})})}),f.jsx("button",{onClick:()=>z(!1),className:"btn btn-secondary",children:"Close"})]})}),rt&&f.jsx(aV,{onClose:()=>et(!1)}),pt&&f.jsx(sV,{onClose:()=>lt(!1)}),ct&&f.jsx(yV,{onClose:()=>st(!1),onLoad:_u,currentCanvas:{nodes:e.map(Mr),edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Ut,lastTreeFarmConfig:yr,lastFireboxConfig:gr,lastWasteFacilityConfig:Xr},onImport:zc,onExportCanvas:Hc}),Cr&&f.jsx(IV,{onClose:()=>Zt(!1),defaultProducts:Gl,defaultMachines:Kl,defaultRecipes:Yl,onDataChange:Wc}),Qe&&Nt!=="pan"&&f.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Nt==="target"&&" Target Mode: Tap nodes to mark as targets",Nt==="delete"&&" Delete Mode: Tap nodes to delete"]}),ar&&f.jsxs("div",{className:"pending-node-preview",style:{left:`${Ho.x+20}px`,top:`${Ho.y+20}px`},children:[f.jsx("div",{className:"pending-node-recipe-name",children:ar.recipe.name}),f.jsx("div",{className:"pending-node-machine-name",children:ar.machine.name}),f.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",ar.machineCount]}),f.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}WT.createRoot(document.getElementById("root")).render(f.jsx(vk.StrictMode,{children:f.jsx(BL,{})}));

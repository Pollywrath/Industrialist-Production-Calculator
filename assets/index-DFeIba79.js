(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ws(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mp={exports:{}},fs={},hp={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function A5(){if(bx)return Ze;bx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function y(H){return H===null||typeof H!="object"?null:(H=f&&H[f]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function w(H,J,me){this.props=H,this.context=J,this.refs=k,this.updater=me||v}w.prototype.isReactComponent={},w.prototype.setState=function(H,J){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,J,"setState")},w.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function b(){}b.prototype=w.prototype;function E(H,J,me){this.props=H,this.context=J,this.refs=k,this.updater=me||v}var q=E.prototype=new b;q.constructor=E,x(q,w.prototype),q.isPureReactComponent=!0;var M=Array.isArray,I=Object.prototype.hasOwnProperty,C={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function R(H,J,me){var W,te={},oe=null,pe=null;if(J!=null)for(W in J.ref!==void 0&&(pe=J.ref),J.key!==void 0&&(oe=""+J.key),J)I.call(J,W)&&!T.hasOwnProperty(W)&&(te[W]=J[W]);var ue=arguments.length-2;if(ue===1)te.children=me;else if(1<ue){for(var ve=Array(ue),Ie=0;Ie<ue;Ie++)ve[Ie]=arguments[Ie+2];te.children=ve}if(H&&H.defaultProps)for(W in ue=H.defaultProps,ue)te[W]===void 0&&(te[W]=ue[W]);return{$$typeof:e,type:H,key:oe,ref:pe,props:te,_owner:C.current}}function P(H,J){return{$$typeof:e,type:H.type,key:J,ref:H.ref,props:H.props,_owner:H._owner}}function z(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function F(H){var J={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(me){return J[me]})}var D=/\/+/g;function X(H,J){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):J.toString(36)}function N(H,J,me,W,te){var oe=typeof H;(oe==="undefined"||oe==="boolean")&&(H=null);var pe=!1;if(H===null)pe=!0;else switch(oe){case"string":case"number":pe=!0;break;case"object":switch(H.$$typeof){case e:case t:pe=!0}}if(pe)return pe=H,te=te(pe),H=W===""?"."+X(pe,0):W,M(te)?(me="",H!=null&&(me=H.replace(D,"$&/")+"/"),N(te,J,me,"",function(Ie){return Ie})):te!=null&&(z(te)&&(te=P(te,me+(!te.key||pe&&pe.key===te.key?"":(""+te.key).replace(D,"$&/")+"/")+H)),J.push(te)),1;if(pe=0,W=W===""?".":W+":",M(H))for(var ue=0;ue<H.length;ue++){oe=H[ue];var ve=W+X(oe,ue);pe+=N(oe,J,me,ve,te)}else if(ve=y(H),typeof ve=="function")for(H=ve.call(H),ue=0;!(oe=H.next()).done;)oe=oe.value,ve=W+X(oe,ue++),pe+=N(oe,J,me,ve,te);else if(oe==="object")throw J=String(H),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return pe}function G(H,J,me){if(H==null)return H;var W=[],te=0;return N(H,W,"","",function(oe){return J.call(me,oe,te++)}),W}function $(H){if(H._status===-1){var J=H._result;J=J(),J.then(function(me){(H._status===0||H._status===-1)&&(H._status=1,H._result=me)},function(me){(H._status===0||H._status===-1)&&(H._status=2,H._result=me)}),H._status===-1&&(H._status=0,H._result=J)}if(H._status===1)return H._result.default;throw H._result}var re={current:null},Y={transition:null},Q={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:Y,ReactCurrentOwner:C};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:G,forEach:function(H,J,me){G(H,function(){J.apply(this,arguments)},me)},count:function(H){var J=0;return G(H,function(){J++}),J},toArray:function(H){return G(H,function(J){return J})||[]},only:function(H){if(!z(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ze.Component=w,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=E,Ze.StrictMode=o,Ze.Suspense=p,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ze.act=ie,Ze.cloneElement=function(H,J,me){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var W=x({},H.props),te=H.key,oe=H.ref,pe=H._owner;if(J!=null){if(J.ref!==void 0&&(oe=J.ref,pe=C.current),J.key!==void 0&&(te=""+J.key),H.type&&H.type.defaultProps)var ue=H.type.defaultProps;for(ve in J)I.call(J,ve)&&!T.hasOwnProperty(ve)&&(W[ve]=J[ve]===void 0&&ue!==void 0?ue[ve]:J[ve])}var ve=arguments.length-2;if(ve===1)W.children=me;else if(1<ve){ue=Array(ve);for(var Ie=0;Ie<ve;Ie++)ue[Ie]=arguments[Ie+2];W.children=ue}return{$$typeof:e,type:H.type,key:te,ref:oe,props:W,_owner:pe}},Ze.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},Ze.createElement=R,Ze.createFactory=function(H){var J=R.bind(null,H);return J.type=H,J},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:c,render:H}},Ze.isValidElement=z,Ze.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:$}},Ze.memo=function(H,J){return{$$typeof:_,type:H,compare:J===void 0?null:J}},Ze.startTransition=function(H){var J=Y.transition;Y.transition={};try{H()}finally{Y.transition=J}},Ze.unstable_act=ie,Ze.useCallback=function(H,J){return re.current.useCallback(H,J)},Ze.useContext=function(H){return re.current.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H){return re.current.useDeferredValue(H)},Ze.useEffect=function(H,J){return re.current.useEffect(H,J)},Ze.useId=function(){return re.current.useId()},Ze.useImperativeHandle=function(H,J,me){return re.current.useImperativeHandle(H,J,me)},Ze.useInsertionEffect=function(H,J){return re.current.useInsertionEffect(H,J)},Ze.useLayoutEffect=function(H,J){return re.current.useLayoutEffect(H,J)},Ze.useMemo=function(H,J){return re.current.useMemo(H,J)},Ze.useReducer=function(H,J,me){return re.current.useReducer(H,J,me)},Ze.useRef=function(H){return re.current.useRef(H)},Ze.useState=function(H){return re.current.useState(H)},Ze.useSyncExternalStore=function(H,J,me){return re.current.useSyncExternalStore(H,J,me)},Ze.useTransition=function(){return re.current.useTransition()},Ze.version="18.3.1",Ze}var qx;function Us(){return qx||(qx=1,hp.exports=A5()),hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function F5(){if(Sx)return fs;Sx=1;var e=Us(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(c,p,_){var h,f={},y=null,v=null;_!==void 0&&(y=""+_),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(v=p.ref);for(h in p)o.call(p,h)&&!s.hasOwnProperty(h)&&(f[h]=p[h]);if(c&&c.defaultProps)for(h in p=c.defaultProps,p)f[h]===void 0&&(f[h]=p[h]);return{$$typeof:t,type:c,key:y,ref:v,props:f,_owner:a.current}}return fs.Fragment=n,fs.jsx=u,fs.jsxs=u,fs}var kx;function L5(){return kx||(kx=1,mp.exports=F5()),mp.exports}var d=L5(),L=Us();const Mk=Ws(L);var dl={},yp={exports:{}},Nr={},gp={exports:{}},vp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx;function O5(){return Cx||(Cx=1,(function(e){function t(Y,Q){var ie=Y.length;Y.push(Q);e:for(;0<ie;){var H=ie-1>>>1,J=Y[H];if(0<a(J,Q))Y[H]=Q,Y[ie]=J,ie=H;else break e}}function n(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var Q=Y[0],ie=Y.pop();if(ie!==Q){Y[0]=ie;e:for(var H=0,J=Y.length,me=J>>>1;H<me;){var W=2*(H+1)-1,te=Y[W],oe=W+1,pe=Y[oe];if(0>a(te,ie))oe<J&&0>a(pe,te)?(Y[H]=pe,Y[oe]=ie,H=oe):(Y[H]=te,Y[W]=ie,H=W);else if(oe<J&&0>a(pe,ie))Y[H]=pe,Y[oe]=ie,H=oe;else break e}}return Q}function a(Y,Q){var ie=Y.sortIndex-Q.sortIndex;return ie!==0?ie:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var p=[],_=[],h=1,f=null,y=3,v=!1,x=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(Y){for(var Q=n(_);Q!==null;){if(Q.callback===null)o(_);else if(Q.startTime<=Y)o(_),Q.sortIndex=Q.expirationTime,t(p,Q);else break;Q=n(_)}}function M(Y){if(k=!1,q(Y),!x)if(n(p)!==null)x=!0,$(I);else{var Q=n(_);Q!==null&&re(M,Q.startTime-Y)}}function I(Y,Q){x=!1,k&&(k=!1,b(R),R=-1),v=!0;var ie=y;try{for(q(Q),f=n(p);f!==null&&(!(f.expirationTime>Q)||Y&&!F());){var H=f.callback;if(typeof H=="function"){f.callback=null,y=f.priorityLevel;var J=H(f.expirationTime<=Q);Q=e.unstable_now(),typeof J=="function"?f.callback=J:f===n(p)&&o(p),q(Q)}else o(p);f=n(p)}if(f!==null)var me=!0;else{var W=n(_);W!==null&&re(M,W.startTime-Q),me=!1}return me}finally{f=null,y=ie,v=!1}}var C=!1,T=null,R=-1,P=5,z=-1;function F(){return!(e.unstable_now()-z<P)}function D(){if(T!==null){var Y=e.unstable_now();z=Y;var Q=!0;try{Q=T(!0,Y)}finally{Q?X():(C=!1,T=null)}}else C=!1}var X;if(typeof E=="function")X=function(){E(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,G=N.port2;N.port1.onmessage=D,X=function(){G.postMessage(null)}}else X=function(){w(D,0)};function $(Y){T=Y,C||(C=!0,X())}function re(Y,Q){R=w(function(){Y(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,$(I))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var ie=y;y=Q;try{return Y()}finally{y=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ie=y;y=Y;try{return Q()}finally{y=ie}},e.unstable_scheduleCallback=function(Y,Q,ie){var H=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?H+ie:H):ie=H,Y){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,Y={id:h++,callback:Q,priorityLevel:Y,startTime:ie,expirationTime:J,sortIndex:-1},ie>H?(Y.sortIndex=ie,t(_,Y),n(p)===null&&Y===n(_)&&(k?(b(R),R=-1):k=!0,re(M,ie-H))):(Y.sortIndex=J,t(p,Y),x||v||(x=!0,$(I))),Y},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Y){var Q=y;return function(){var ie=y;y=Q;try{return Y.apply(this,arguments)}finally{y=ie}}}})(vp)),vp}var Mx;function D5(){return Mx||(Mx=1,gp.exports=O5()),gp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function V5(){if(Ex)return Nr;Ex=1;var e=Us(),t=D5();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function s(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)o.add(i[r])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function y(r){return p.call(f,r)?!0:p.call(h,r)?!1:_.test(r)?f[r]=!0:(h[r]=!0,!1)}function v(r,i,l,m){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,i,l,m){if(i===null||typeof i>"u"||v(r,i,l,m))return!0;if(m)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(r,i,l,m,g,S,A){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=S,this.removeEmptyString=A}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];w[i]=new k(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function E(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(b,E);w[i]=new k(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(b,E);w[i]=new k(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(b,E);w[i]=new k(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function q(r,i,l,m){var g=w.hasOwnProperty(i)?w[i]:null;(g!==null?g.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,l,g,m)&&(l=null),m||g===null?y(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):g.mustUseProperty?r[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,m=g.attributeNamespace,l===null?r.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,m?r.setAttributeNS(m,i,l):r.setAttribute(i,l))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,H;function J(r){if(H===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);H=i&&i[1]||""}return`
`+H+r}var me=!1;function W(r,i){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(_e){var m=_e}Reflect.construct(r,[],i)}else{try{i.call()}catch(_e){m=_e}r.call(i.prototype)}else{try{throw Error()}catch(_e){m=_e}r()}}catch(_e){if(_e&&m&&typeof _e.stack=="string"){for(var g=_e.stack.split(`
`),S=m.stack.split(`
`),A=g.length-1,U=S.length-1;1<=A&&0<=U&&g[A]!==S[U];)U--;for(;1<=A&&0<=U;A--,U--)if(g[A]!==S[U]){if(A!==1||U!==1)do if(A--,U--,0>U||g[A]!==S[U]){var ee=`
`+g[A].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=A&&0<=U);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?J(r):""}function te(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=W(r.type,!1),r;case 11:return r=W(r.type.render,!1),r;case 1:return r=W(r.type,!0),r;default:return""}}function oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case C:return"Portal";case P:return"Profiler";case R:return"StrictMode";case X:return"Suspense";case N:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Consumer";case z:return(r._context.displayName||"Context")+".Provider";case D:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return i=r.displayName||null,i!==null?i:oe(r.type)||"Memo";case $:i=r._payload,r=r._init;try{return oe(r(i))}catch{}}return null}function pe(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ve(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ie(r){var i=ve(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,S=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(A){m=""+A,S.call(this,A)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Re(r){r._valueTracker||(r._valueTracker=Ie(r))}function je(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),m="";return r&&(m=ve(r)?r.checked?"true":"false":r.value),r=m,r!==l?(i.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Pe(r,i){var l=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ae(r,i){var l=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;l=ue(i.value!=null?i.value:l),r._wrapperState={initialChecked:m,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ue(r,i){i=i.checked,i!=null&&q(r,"checked",i,!1)}function Be(r,i){Ue(r,i);var l=ue(i.value),m=i.type;if(l!=null)m==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?at(r,i.type,l):i.hasOwnProperty("defaultValue")&&at(r,i.type,ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function st(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function at(r,i,l){(i!=="number"||Te(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var It=Array.isArray;function wt(r,i,l,m){if(r=r.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=i.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&m&&(r[l].defaultSelected=!0)}else{for(l=""+ue(l),i=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,m&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function bt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lt(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(n(92));if(It(l)){if(1<l.length)throw Error(n(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:ue(l)}}function Cr(r,i){var l=ue(i.value),m=ue(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),m!=null&&(r.defaultValue=""+m)}function tr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function At(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?At(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var nt,Ar=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,m,g){MSApp.execUnsafeLocalFunction(function(){return r(i,l,m,g)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=nt.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Nt(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rr=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(r){rr.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Qr[i]=Qr[r]})});function Gt(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Qr.hasOwnProperty(r)&&Qr[r]?(""+i).trim():i+"px"}function Xe(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var m=l.indexOf("--")===0,g=Gt(l,i[l],m);l==="float"&&(l="cssFloat"),m?r.setProperty(l,g):r[l]=g}}var vi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(r,i){if(i){if(vi[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function pn(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function it(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Fr=null,Lr=null,mr=null;function Qn(r){if(r=Ja(r)){if(typeof Fr!="function")throw Error(n(280));var i=r.stateNode;i&&(i=ku(i),Fr(r.stateNode,r.type,i))}}function Pn(r){Lr?mr?mr.push(r):mr=[r]:Lr=r}function Ft(){if(Lr){var r=Lr,i=mr;if(mr=Lr=null,Qn(r),i)for(r=0;r<i.length;r++)Qn(i[r])}}function nr(r,i){return r(i)}function Kt(){}var dt=!1;function Do(r,i,l){if(dt)return r(i,l);dt=!0;try{return nr(r,i,l)}finally{dt=!1,(Lr!==null||mr!==null)&&(Kt(),Ft())}}function mt(r,i){var l=r.stateNode;if(l===null)return null;var m=ku(l);if(m===null)return null;l=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var Zi=!1;if(c)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Zi=!1}function Xr(r,i,l,m,g,S,A,U,ee){var _e=Array.prototype.slice.call(arguments,3);try{i.apply(l,_e)}catch(be){this.onError(be)}}var zt=!1,Bt=null,Qt=!1,Xt=null,hr={onError:function(r){zt=!0,Bt=r}};function ar(r,i,l,m,g,S,A,U,ee){zt=!1,Bt=null,Xr.apply(hr,arguments)}function yr(r,i,l,m,g,S,A,U,ee){if(ar.apply(this,arguments),zt){if(zt){var _e=Bt;zt=!1,Bt=null}else throw Error(n(198));Qt||(Qt=!0,Xt=_e)}}function jt(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Zr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function sr(r){if(jt(r)!==r)throw Error(n(188))}function Ji(r){var i=r.alternate;if(!i){if(i=jt(r),i===null)throw Error(n(188));return i!==r?null:r}for(var l=r,m=i;;){var g=l.return;if(g===null)break;var S=g.alternate;if(S===null){if(m=g.return,m!==null){l=m;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===l)return sr(g),r;if(S===m)return sr(g),i;S=S.sibling}throw Error(n(188))}if(l.return!==m.return)l=g,m=S;else{for(var A=!1,U=g.child;U;){if(U===l){A=!0,l=g,m=S;break}if(U===m){A=!0,m=g,l=S;break}U=U.sibling}if(!A){for(U=S.child;U;){if(U===l){A=!0,l=S,m=g;break}if(U===m){A=!0,m=S,l=g;break}U=U.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==m)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:i}function eo(r){return r=Ji(r),r!==null?ur(r):null}function ur(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ur(r);if(i!==null)return i;r=r.sibling}return null}var xi=t.unstable_scheduleCallback,wi=t.unstable_cancelCallback,to=t.unstable_shouldYield,Xn=t.unstable_requestPaint,pt=t.unstable_now,Rn=t.unstable_getCurrentPriorityLevel,_n=t.unstable_ImmediatePriority,bi=t.unstable_UserBlockingPriority,An=t.unstable_NormalPriority,Vo=t.unstable_LowPriority,zo=t.unstable_IdlePriority,gr=null,Lt=null;function Zn(r){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(gr,r,void 0,(r.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:au,La=Math.log,Fn=Math.LN2;function au(r){return r>>>=0,r===0?32:31-(La(r)/Fn|0)|0}var qi=64,Ln=4194304;function vr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Si(r,i){var l=r.pendingLanes;if(l===0)return 0;var m=0,g=r.suspendedLanes,S=r.pingedLanes,A=l&268435455;if(A!==0){var U=A&~g;U!==0?m=vr(U):(S&=A,S!==0&&(m=vr(S)))}else A=l&~g,A!==0?m=vr(A):S!==0&&(m=vr(S));if(m===0)return 0;if(i!==0&&i!==m&&(i&g)===0&&(g=m&-m,S=i&-i,g>=S||g===16&&(S&4194240)!==0))return i;if((m&4)!==0&&(m|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)l=31-qt(i),g=1<<l,m|=r[l],i&=~g;return m}function Bo(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(r,i){for(var l=r.suspendedLanes,m=r.pingedLanes,g=r.expirationTimes,S=r.pendingLanes;0<S;){var A=31-qt(S),U=1<<A,ee=g[A];ee===-1?((U&l)===0||(U&m)!==0)&&(g[A]=Bo(U,i)):ee<=i&&(r.expiredLanes|=U),S&=~U}}function Or(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ki(){var r=qi;return qi<<=1,(qi&4194240)===0&&(qi=64),r}function Dr(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Jr(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-qt(i),r[i]=l}function ro(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<l;){var g=31-qt(l),S=1<<g;i[g]=0,m[g]=-1,r[g]=-1,l&=~S}}function We(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var m=31-qt(l),g=1<<m;g&i|r[m]&i&&(r[m]|=i),l&=~g}}var ot=0;function no(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Oa,io,Ho,He,Da,$o=!1,Jn=[],fn=null,mn=null,Vr=null,Ci=new Map,oo=new Map,Ht=[],Wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(r,i){switch(r){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":Ci.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(i.pointerId)}}function ao(r,i,l,m,g,S){return r===null||r.nativeEvent!==S?(r={blockedOn:i,domEventName:l,eventSystemFlags:m,nativeEvent:S,targetContainers:[g]},i!==null&&(i=Ja(i),i!==null&&io(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Uo(r,i,l,m,g){switch(i){case"focusin":return fn=ao(fn,r,i,l,m,g),!0;case"dragenter":return mn=ao(mn,r,i,l,m,g),!0;case"mouseover":return Vr=ao(Vr,r,i,l,m,g),!0;case"pointerover":var S=g.pointerId;return Ci.set(S,ao(Ci.get(S)||null,r,i,l,m,g)),!0;case"gotpointercapture":return S=g.pointerId,oo.set(S,ao(oo.get(S)||null,r,i,l,m,g)),!0}return!1}function uu(r){var i=fo(r.target);if(i!==null){var l=jt(i);if(l!==null){if(i=l.tag,i===13){if(i=Zr(l),i!==null){r.blockedOn=i,Da(r.priority,function(){Ho(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Go(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=za(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var m=new l.constructor(l.type,l);fe=m,l.target.dispatchEvent(m),fe=null}else return i=Ja(l),i!==null&&io(i),r.blockedOn=l,!1;i.shift()}return!0}function lu(r,i,l){Go(r)&&l.delete(i)}function en(){$o=!1,fn!==null&&Go(fn)&&(fn=null),mn!==null&&Go(mn)&&(mn=null),Vr!==null&&Go(Vr)&&(Vr=null),Ci.forEach(lu),oo.forEach(lu)}function so(r,i){r.blockedOn===i&&(r.blockedOn=null,$o||($o=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,en)))}function uo(r){function i(g){return so(g,r)}if(0<Jn.length){so(Jn[0],r);for(var l=1;l<Jn.length;l++){var m=Jn[l];m.blockedOn===r&&(m.blockedOn=null)}}for(fn!==null&&so(fn,r),mn!==null&&so(mn,r),Vr!==null&&so(Vr,r),Ci.forEach(i),oo.forEach(i),l=0;l<Ht.length;l++)m=Ht[l],m.blockedOn===r&&(m.blockedOn=null);for(;0<Ht.length&&(l=Ht[0],l.blockedOn===null);)uu(l),l.blockedOn===null&&Ht.shift()}var Mi=M.ReactCurrentBatchConfig,Ko=!0;function Fc(r,i,l,m){var g=ot,S=Mi.transition;Mi.transition=null;try{ot=1,Va(r,i,l,m)}finally{ot=g,Mi.transition=S}}function Lc(r,i,l,m){var g=ot,S=Mi.transition;Mi.transition=null;try{ot=4,Va(r,i,l,m)}finally{ot=g,Mi.transition=S}}function Va(r,i,l,m){if(Ko){var g=za(r,i,l,m);if(g===null)od(r,i,m,Yo,l),su(r,m);else if(Uo(g,r,i,l,m))m.stopPropagation();else if(su(r,m),i&4&&-1<Wo.indexOf(r)){for(;g!==null;){var S=Ja(g);if(S!==null&&Oa(S),S=za(r,i,l,m),S===null&&od(r,i,m,Yo,l),S===g)break;g=S}g!==null&&m.stopPropagation()}else od(r,i,m,null,l)}}var Yo=null;function za(r,i,l,m){if(Yo=null,r=it(m),r=fo(r),r!==null)if(i=jt(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Zr(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Yo=r,null}function cu(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rn()){case _n:return 1;case bi:return 4;case An:case Vo:return 16;case zo:return 536870912;default:return 16}default:return 16}}var On=null,zr=null,hn=null;function Qo(){if(hn)return hn;var r,i=zr,l=i.length,m,g="value"in On?On.value:On.textContent,S=g.length;for(r=0;r<l&&i[r]===g[r];r++);var A=l-r;for(m=1;m<=A&&i[l-m]===g[S-m];m++);return hn=g.slice(r,1<m?1-m:void 0)}function ei(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function lo(){return!0}function du(){return!1}function wr(r){function i(l,m,g,S,A){this._reactName=l,this._targetInst=g,this.type=m,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(l=r[U],this[U]=l?l(S):S[U]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?lo:du,this.isPropagationStopped=du,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),i}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=wr(Dn),co=ie({},Dn,{view:0,detail:0}),Oc=wr(co),Ha,$a,ti,po=ie({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ti&&(ti&&r.type==="mousemove"?(Ha=r.screenX-ti.screenX,$a=r.screenY-ti.screenY):$a=Ha=0,ti=r),Ha)},movementY:function(r){return"movementY"in r?r.movementY:$a}}),pu=wr(po),Dc=ie({},po,{dataTransfer:0}),Vc=wr(Dc),zc=ie({},co,{relatedTarget:0}),Wa=wr(zc),Bc=ie({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=wr(Bc),_u=ie({},Dn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ri=wr(_u),$c=ie({},Dn,{data:0}),fu=wr($c),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Gc[r])?!!i[r]:!1}function Ua(){return Kc}var mu=ie({},co,{key:function(r){if(r.key){var i=Wc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ei(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Uc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(r){return r.type==="keypress"?ei(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ei(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Yc=wr(mu),hu=ie({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=wr(hu),j=ie({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),V=wr(j),B=ie({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=wr(B),K=ie({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=wr(K),ae=[9,13,27,32],le=c&&"CompositionEvent"in window,ye=null;c&&"documentMode"in document&&(ye=document.documentMode);var qe=c&&"TextEvent"in window&&!ye,Ee=c&&(!le||ye&&8<ye&&11>=ye),de=" ",ge=!1;function xe(r,i){switch(r){case"keyup":return ae.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Se=!1;function Ne(r,i){switch(r){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(ge=!0,de);case"textInput":return r=i.data,r===de&&ge?null:r;default:return null}}function Ce(r,i){if(Se)return r==="compositionend"||!le&&xe(r,i)?(r=Qo(),hn=zr=On=null,Se=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ee&&i.locale!=="ko"?null:i.data;default:return null}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ye(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!De[r.type]:i==="textarea"}function ut(r,i,l,m){Pn(m),i=bu(i,"onChange"),0<i.length&&(l=new Ba("onChange","change",null,l,m),r.push({event:l,listeners:i}))}var Je=null,St=null;function br(r){Og(r,0)}function kt(r){var i=ta(r);if(je(i))return r}function _o(r,i){if(r==="change")return i}var gu=!1;if(c){var Qc;if(c){var Xc="oninput"in document;if(!Xc){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Xc=typeof bg.oninput=="function"}Qc=Xc}else Qc=!1;gu=Qc&&(!document.documentMode||9<document.documentMode)}function qg(){Je&&(Je.detachEvent("onpropertychange",Sg),St=Je=null)}function Sg(r){if(r.propertyName==="value"&&kt(St)){var i=[];ut(i,St,r,it(r)),Do(br,i)}}function LE(r,i,l){r==="focusin"?(qg(),Je=i,St=l,Je.attachEvent("onpropertychange",Sg)):r==="focusout"&&qg()}function OE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return kt(St)}function DE(r,i){if(r==="click")return kt(i)}function VE(r,i){if(r==="input"||r==="change")return kt(i)}function zE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var yn=typeof Object.is=="function"?Object.is:zE;function Ga(r,i){if(yn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),m=Object.keys(i);if(l.length!==m.length)return!1;for(m=0;m<l.length;m++){var g=l[m];if(!p.call(i,g)||!yn(r[g],i[g]))return!1}return!0}function kg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Cg(r,i){var l=kg(r);r=0;for(var m;l;){if(l.nodeType===3){if(m=r+l.textContent.length,r<=i&&m>=i)return{node:l,offset:i-r};r=m}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=kg(l)}}function Mg(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Mg(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Eg(){for(var r=window,i=Te();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=Te(r.document)}return i}function Zc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function BE(r){var i=Eg(),l=r.focusedElem,m=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Mg(l.ownerDocument.documentElement,l)){if(m!==null&&Zc(l)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var g=l.textContent.length,S=Math.min(m.start,g);m=m.end===void 0?S:Math.min(m.end,g),!r.extend&&S>m&&(g=m,m=S,S=g),g=Cg(l,S);var A=Cg(l,m);g&&A&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==A.node||r.focusOffset!==A.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),r.removeAllRanges(),S>m?(r.addRange(i),r.extend(A.node,A.offset)):(i.setEnd(A.node,A.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var HE=c&&"documentMode"in document&&11>=document.documentMode,Xo=null,Jc=null,Ka=null,ed=!1;function Ig(r,i,l){var m=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ed||Xo==null||Xo!==Te(m)||(m=Xo,"selectionStart"in m&&Zc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ka&&Ga(Ka,m)||(Ka=m,m=bu(Jc,"onSelect"),0<m.length&&(i=new Ba("onSelect","select",null,i,l),r.push({event:i,listeners:m}),i.target=Xo)))}function vu(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Zo={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},td={},jg={};c&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function xu(r){if(td[r])return td[r];if(!Zo[r])return r;var i=Zo[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in jg)return td[r]=i[l];return r}var Tg=xu("animationend"),Ng=xu("animationiteration"),Pg=xu("animationstart"),Rg=xu("transitionend"),Ag=new Map,Fg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(r,i){Ag.set(r,i),s(i,[r])}for(var rd=0;rd<Fg.length;rd++){var nd=Fg[rd],$E=nd.toLowerCase(),WE=nd[0].toUpperCase()+nd.slice(1);Ei($E,"on"+WE)}Ei(Tg,"onAnimationEnd"),Ei(Ng,"onAnimationIteration"),Ei(Pg,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Rg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function Lg(r,i,l){var m=r.type||"unknown-event";r.currentTarget=l,yr(m,i,void 0,r),r.currentTarget=null}function Og(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var m=r[l],g=m.event;m=m.listeners;e:{var S=void 0;if(i)for(var A=m.length-1;0<=A;A--){var U=m[A],ee=U.instance,_e=U.currentTarget;if(U=U.listener,ee!==S&&g.isPropagationStopped())break e;Lg(g,U,_e),S=ee}else for(A=0;A<m.length;A++){if(U=m[A],ee=U.instance,_e=U.currentTarget,U=U.listener,ee!==S&&g.isPropagationStopped())break e;Lg(g,U,_e),S=ee}}}if(Qt)throw r=Xt,Qt=!1,Xt=null,r}function _t(r,i){var l=i[dd];l===void 0&&(l=i[dd]=new Set);var m=r+"__bubble";l.has(m)||(Dg(i,r,2,!1),l.add(m))}function id(r,i,l){var m=0;i&&(m|=4),Dg(l,r,m,i)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Qa(r){if(!r[wu]){r[wu]=!0,o.forEach(function(l){l!=="selectionchange"&&(UE.has(l)||id(l,!1,r),id(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[wu]||(i[wu]=!0,id("selectionchange",!1,i))}}function Dg(r,i,l,m){switch(cu(i)){case 1:var g=Fc;break;case 4:g=Lc;break;default:g=Va}l=g.bind(null,i,l,r),g=void 0,!Zi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),m?g!==void 0?r.addEventListener(i,l,{capture:!0,passive:g}):r.addEventListener(i,l,!0):g!==void 0?r.addEventListener(i,l,{passive:g}):r.addEventListener(i,l,!1)}function od(r,i,l,m,g){var S=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var U=m.stateNode.containerInfo;if(U===g||U.nodeType===8&&U.parentNode===g)break;if(A===4)for(A=m.return;A!==null;){var ee=A.tag;if((ee===3||ee===4)&&(ee=A.stateNode.containerInfo,ee===g||ee.nodeType===8&&ee.parentNode===g))return;A=A.return}for(;U!==null;){if(A=fo(U),A===null)return;if(ee=A.tag,ee===5||ee===6){m=S=A;continue e}U=U.parentNode}}m=m.return}Do(function(){var _e=S,be=it(l),ke=[];e:{var we=Ag.get(r);if(we!==void 0){var Fe=Ba,Oe=r;switch(r){case"keypress":if(ei(l)===0)break e;case"keydown":case"keyup":Fe=Yc;break;case"focusin":Oe="focus",Fe=Wa;break;case"focusout":Oe="blur",Fe=Wa;break;case"beforeblur":case"afterblur":Fe=Wa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=V;break;case Tg:case Ng:case Pg:Fe=Hc;break;case Rg:Fe=O;break;case"scroll":Fe=Oc;break;case"wheel":Fe=Z;break;case"copy":case"cut":case"paste":Fe=ri;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=yu}var Ve=(i&4)!==0,Rt=!Ve&&r==="scroll",se=Ve?we!==null?we+"Capture":null:we;Ve=[];for(var ne=_e,ce;ne!==null;){ce=ne;var Me=ce.stateNode;if(ce.tag===5&&Me!==null&&(ce=Me,se!==null&&(Me=mt(ne,se),Me!=null&&Ve.push(Xa(ne,Me,ce)))),Rt)break;ne=ne.return}0<Ve.length&&(we=new Fe(we,Oe,null,l,be),ke.push({event:we,listeners:Ve}))}}if((i&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Fe=r==="mouseout"||r==="pointerout",we&&l!==fe&&(Oe=l.relatedTarget||l.fromElement)&&(fo(Oe)||Oe[ni]))break e;if((Fe||we)&&(we=be.window===be?be:(we=be.ownerDocument)?we.defaultView||we.parentWindow:window,Fe?(Oe=l.relatedTarget||l.toElement,Fe=_e,Oe=Oe?fo(Oe):null,Oe!==null&&(Rt=jt(Oe),Oe!==Rt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Fe=null,Oe=_e),Fe!==Oe)){if(Ve=pu,Me="onMouseLeave",se="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Ve=yu,Me="onPointerLeave",se="onPointerEnter",ne="pointer"),Rt=Fe==null?we:ta(Fe),ce=Oe==null?we:ta(Oe),we=new Ve(Me,ne+"leave",Fe,l,be),we.target=Rt,we.relatedTarget=ce,Me=null,fo(be)===_e&&(Ve=new Ve(se,ne+"enter",Oe,l,be),Ve.target=ce,Ve.relatedTarget=Rt,Me=Ve),Rt=Me,Fe&&Oe)t:{for(Ve=Fe,se=Oe,ne=0,ce=Ve;ce;ce=Jo(ce))ne++;for(ce=0,Me=se;Me;Me=Jo(Me))ce++;for(;0<ne-ce;)Ve=Jo(Ve),ne--;for(;0<ce-ne;)se=Jo(se),ce--;for(;ne--;){if(Ve===se||se!==null&&Ve===se.alternate)break t;Ve=Jo(Ve),se=Jo(se)}Ve=null}else Ve=null;Fe!==null&&Vg(ke,we,Fe,Ve,!1),Oe!==null&&Rt!==null&&Vg(ke,Rt,Oe,Ve,!0)}}e:{if(we=_e?ta(_e):window,Fe=we.nodeName&&we.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&we.type==="file")var ze=_o;else if(Ye(we))if(gu)ze=VE;else{ze=OE;var Ge=LE}else(Fe=we.nodeName)&&Fe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(ze=DE);if(ze&&(ze=ze(r,_e))){ut(ke,ze,l,be);break e}Ge&&Ge(r,we,_e),r==="focusout"&&(Ge=we._wrapperState)&&Ge.controlled&&we.type==="number"&&at(we,"number",we.value)}switch(Ge=_e?ta(_e):window,r){case"focusin":(Ye(Ge)||Ge.contentEditable==="true")&&(Xo=Ge,Jc=_e,Ka=null);break;case"focusout":Ka=Jc=Xo=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,Ig(ke,l,be);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":Ig(ke,l,be)}var Ke;if(le)e:{switch(r){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Se?xe(r,l)&&(Qe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Qe="onCompositionStart");Qe&&(Ee&&l.locale!=="ko"&&(Se||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Se&&(Ke=Qo()):(On=be,zr="value"in On?On.value:On.textContent,Se=!0)),Ge=bu(_e,Qe),0<Ge.length&&(Qe=new fu(Qe,r,null,l,be),ke.push({event:Qe,listeners:Ge}),Ke?Qe.data=Ke:(Ke=he(l),Ke!==null&&(Qe.data=Ke)))),(Ke=qe?Ne(r,l):Ce(r,l))&&(_e=bu(_e,"onBeforeInput"),0<_e.length&&(be=new fu("onBeforeInput","beforeinput",null,l,be),ke.push({event:be,listeners:_e}),be.data=Ke))}Og(ke,i)})}function Xa(r,i,l){return{instance:r,listener:i,currentTarget:l}}function bu(r,i){for(var l=i+"Capture",m=[];r!==null;){var g=r,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=mt(r,l),S!=null&&m.unshift(Xa(r,S,g)),S=mt(r,i),S!=null&&m.push(Xa(r,S,g))),r=r.return}return m}function Jo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Vg(r,i,l,m,g){for(var S=i._reactName,A=[];l!==null&&l!==m;){var U=l,ee=U.alternate,_e=U.stateNode;if(ee!==null&&ee===m)break;U.tag===5&&_e!==null&&(U=_e,g?(ee=mt(l,S),ee!=null&&A.unshift(Xa(l,ee,U))):g||(ee=mt(l,S),ee!=null&&A.push(Xa(l,ee,U)))),l=l.return}A.length!==0&&r.push({event:i,listeners:A})}var GE=/\r\n?/g,KE=/\u0000|\uFFFD/g;function zg(r){return(typeof r=="string"?r:""+r).replace(GE,`
`).replace(KE,"")}function qu(r,i,l){if(i=zg(i),zg(r)!==i&&l)throw Error(n(425))}function Su(){}var ad=null,sd=null;function ud(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,YE=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,QE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(r){return Bg.resolve(null).then(r).catch(XE)}:ld;function XE(r){setTimeout(function(){throw r})}function cd(r,i){var l=i,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(m===0){r.removeChild(g),uo(i);return}m--}else l!=="$"&&l!=="$?"&&l!=="$!"||m++;l=g}while(l);uo(i)}function Ii(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Hg(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Vn="__reactFiber$"+ea,Za="__reactProps$"+ea,ni="__reactContainer$"+ea,dd="__reactEvents$"+ea,ZE="__reactListeners$"+ea,JE="__reactHandles$"+ea;function fo(r){var i=r[Vn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[ni]||l[Vn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Hg(r);r!==null;){if(l=r[Vn])return l;r=Hg(r)}return i}r=l,l=r.parentNode}return null}function Ja(r){return r=r[Vn]||r[ni],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ta(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ku(r){return r[Za]||null}var pd=[],ra=-1;function ji(r){return{current:r}}function ft(r){0>ra||(r.current=pd[ra],pd[ra]=null,ra--)}function ct(r,i){ra++,pd[ra]=r.current,r.current=i}var Ti={},lr=ji(Ti),Mr=ji(!1),mo=Ti;function na(r,i){var l=r.type.contextTypes;if(!l)return Ti;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in l)g[S]=i[S];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=g),g}function Er(r){return r=r.childContextTypes,r!=null}function Cu(){ft(Mr),ft(lr)}function $g(r,i,l){if(lr.current!==Ti)throw Error(n(168));ct(lr,i),ct(Mr,l)}function Wg(r,i,l){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return l;m=m.getChildContext();for(var g in m)if(!(g in i))throw Error(n(108,pe(r)||"Unknown",g));return ie({},l,m)}function Mu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ti,mo=lr.current,ct(lr,r),ct(Mr,Mr.current),!0}function Ug(r,i,l){var m=r.stateNode;if(!m)throw Error(n(169));l?(r=Wg(r,i,mo),m.__reactInternalMemoizedMergedChildContext=r,ft(Mr),ft(lr),ct(lr,r)):ft(Mr),ct(Mr,l)}var ii=null,Eu=!1,_d=!1;function Gg(r){ii===null?ii=[r]:ii.push(r)}function e5(r){Eu=!0,Gg(r)}function Ni(){if(!_d&&ii!==null){_d=!0;var r=0,i=ot;try{var l=ii;for(ot=1;r<l.length;r++){var m=l[r];do m=m(!0);while(m!==null)}ii=null,Eu=!1}catch(g){throw ii!==null&&(ii=ii.slice(r+1)),xi(_n,Ni),g}finally{ot=i,_d=!1}}return null}var ia=[],oa=0,Iu=null,ju=0,tn=[],rn=0,ho=null,oi=1,ai="";function yo(r,i){ia[oa++]=ju,ia[oa++]=Iu,Iu=r,ju=i}function Kg(r,i,l){tn[rn++]=oi,tn[rn++]=ai,tn[rn++]=ho,ho=r;var m=oi;r=ai;var g=32-qt(m)-1;m&=~(1<<g),l+=1;var S=32-qt(i)+g;if(30<S){var A=g-g%5;S=(m&(1<<A)-1).toString(32),m>>=A,g-=A,oi=1<<32-qt(i)+g|l<<g|m,ai=S+r}else oi=1<<S|l<<g|m,ai=r}function fd(r){r.return!==null&&(yo(r,1),Kg(r,1,0))}function md(r){for(;r===Iu;)Iu=ia[--oa],ia[oa]=null,ju=ia[--oa],ia[oa]=null;for(;r===ho;)ho=tn[--rn],tn[rn]=null,ai=tn[--rn],tn[rn]=null,oi=tn[--rn],tn[rn]=null}var Br=null,Hr=null,ht=!1,gn=null;function Yg(r,i){var l=sn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function Qg(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Br=r,Hr=Ii(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Br=r,Hr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=ho!==null?{id:oi,overflow:ai}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=sn(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,Br=r,Hr=null,!0):!1;default:return!1}}function hd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function yd(r){if(ht){var i=Hr;if(i){var l=i;if(!Qg(r,i)){if(hd(r))throw Error(n(418));i=Ii(l.nextSibling);var m=Br;i&&Qg(r,i)?Yg(m,l):(r.flags=r.flags&-4097|2,ht=!1,Br=r)}}else{if(hd(r))throw Error(n(418));r.flags=r.flags&-4097|2,ht=!1,Br=r}}}function Xg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Br=r}function Tu(r){if(r!==Br)return!1;if(!ht)return Xg(r),ht=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ud(r.type,r.memoizedProps)),i&&(i=Hr)){if(hd(r))throw Zg(),Error(n(418));for(;i;)Yg(r,i),i=Ii(i.nextSibling)}if(Xg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Hr=Ii(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Hr=null}}else Hr=Br?Ii(r.stateNode.nextSibling):null;return!0}function Zg(){for(var r=Hr;r;)r=Ii(r.nextSibling)}function aa(){Hr=Br=null,ht=!1}function gd(r){gn===null?gn=[r]:gn.push(r)}var t5=M.ReactCurrentBatchConfig;function es(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var m=l.stateNode}if(!m)throw Error(n(147,r));var g=m,S=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(A){var U=g.refs;A===null?delete U[S]:U[S]=A},i._stringRef=S,i)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function Nu(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Jg(r){var i=r._init;return i(r._payload)}function ev(r){function i(se,ne){if(r){var ce=se.deletions;ce===null?(se.deletions=[ne],se.flags|=16):ce.push(ne)}}function l(se,ne){if(!r)return null;for(;ne!==null;)i(se,ne),ne=ne.sibling;return null}function m(se,ne){for(se=new Map;ne!==null;)ne.key!==null?se.set(ne.key,ne):se.set(ne.index,ne),ne=ne.sibling;return se}function g(se,ne){return se=Vi(se,ne),se.index=0,se.sibling=null,se}function S(se,ne,ce){return se.index=ce,r?(ce=se.alternate,ce!==null?(ce=ce.index,ce<ne?(se.flags|=2,ne):ce):(se.flags|=2,ne)):(se.flags|=1048576,ne)}function A(se){return r&&se.alternate===null&&(se.flags|=2),se}function U(se,ne,ce,Me){return ne===null||ne.tag!==6?(ne=lp(ce,se.mode,Me),ne.return=se,ne):(ne=g(ne,ce),ne.return=se,ne)}function ee(se,ne,ce,Me){var ze=ce.type;return ze===T?be(se,ne,ce.props.children,Me,ce.key):ne!==null&&(ne.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===$&&Jg(ze)===ne.type)?(Me=g(ne,ce.props),Me.ref=es(se,ne,ce),Me.return=se,Me):(Me=rl(ce.type,ce.key,ce.props,null,se.mode,Me),Me.ref=es(se,ne,ce),Me.return=se,Me)}function _e(se,ne,ce,Me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=cp(ce,se.mode,Me),ne.return=se,ne):(ne=g(ne,ce.children||[]),ne.return=se,ne)}function be(se,ne,ce,Me,ze){return ne===null||ne.tag!==7?(ne=ko(ce,se.mode,Me,ze),ne.return=se,ne):(ne=g(ne,ce),ne.return=se,ne)}function ke(se,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=lp(""+ne,se.mode,ce),ne.return=se,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return ce=rl(ne.type,ne.key,ne.props,null,se.mode,ce),ce.ref=es(se,null,ne),ce.return=se,ce;case C:return ne=cp(ne,se.mode,ce),ne.return=se,ne;case $:var Me=ne._init;return ke(se,Me(ne._payload),ce)}if(It(ne)||Q(ne))return ne=ko(ne,se.mode,ce,null),ne.return=se,ne;Nu(se,ne)}return null}function we(se,ne,ce,Me){var ze=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ze!==null?null:U(se,ne,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:return ce.key===ze?ee(se,ne,ce,Me):null;case C:return ce.key===ze?_e(se,ne,ce,Me):null;case $:return ze=ce._init,we(se,ne,ze(ce._payload),Me)}if(It(ce)||Q(ce))return ze!==null?null:be(se,ne,ce,Me,null);Nu(se,ce)}return null}function Fe(se,ne,ce,Me,ze){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return se=se.get(ce)||null,U(ne,se,""+Me,ze);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:return se=se.get(Me.key===null?ce:Me.key)||null,ee(ne,se,Me,ze);case C:return se=se.get(Me.key===null?ce:Me.key)||null,_e(ne,se,Me,ze);case $:var Ge=Me._init;return Fe(se,ne,ce,Ge(Me._payload),ze)}if(It(Me)||Q(Me))return se=se.get(ce)||null,be(ne,se,Me,ze,null);Nu(ne,Me)}return null}function Oe(se,ne,ce,Me){for(var ze=null,Ge=null,Ke=ne,Qe=ne=0,er=null;Ke!==null&&Qe<ce.length;Qe++){Ke.index>Qe?(er=Ke,Ke=null):er=Ke.sibling;var rt=we(se,Ke,ce[Qe],Me);if(rt===null){Ke===null&&(Ke=er);break}r&&Ke&&rt.alternate===null&&i(se,Ke),ne=S(rt,ne,Qe),Ge===null?ze=rt:Ge.sibling=rt,Ge=rt,Ke=er}if(Qe===ce.length)return l(se,Ke),ht&&yo(se,Qe),ze;if(Ke===null){for(;Qe<ce.length;Qe++)Ke=ke(se,ce[Qe],Me),Ke!==null&&(ne=S(Ke,ne,Qe),Ge===null?ze=Ke:Ge.sibling=Ke,Ge=Ke);return ht&&yo(se,Qe),ze}for(Ke=m(se,Ke);Qe<ce.length;Qe++)er=Fe(Ke,se,Qe,ce[Qe],Me),er!==null&&(r&&er.alternate!==null&&Ke.delete(er.key===null?Qe:er.key),ne=S(er,ne,Qe),Ge===null?ze=er:Ge.sibling=er,Ge=er);return r&&Ke.forEach(function(zi){return i(se,zi)}),ht&&yo(se,Qe),ze}function Ve(se,ne,ce,Me){var ze=Q(ce);if(typeof ze!="function")throw Error(n(150));if(ce=ze.call(ce),ce==null)throw Error(n(151));for(var Ge=ze=null,Ke=ne,Qe=ne=0,er=null,rt=ce.next();Ke!==null&&!rt.done;Qe++,rt=ce.next()){Ke.index>Qe?(er=Ke,Ke=null):er=Ke.sibling;var zi=we(se,Ke,rt.value,Me);if(zi===null){Ke===null&&(Ke=er);break}r&&Ke&&zi.alternate===null&&i(se,Ke),ne=S(zi,ne,Qe),Ge===null?ze=zi:Ge.sibling=zi,Ge=zi,Ke=er}if(rt.done)return l(se,Ke),ht&&yo(se,Qe),ze;if(Ke===null){for(;!rt.done;Qe++,rt=ce.next())rt=ke(se,rt.value,Me),rt!==null&&(ne=S(rt,ne,Qe),Ge===null?ze=rt:Ge.sibling=rt,Ge=rt);return ht&&yo(se,Qe),ze}for(Ke=m(se,Ke);!rt.done;Qe++,rt=ce.next())rt=Fe(Ke,se,Qe,rt.value,Me),rt!==null&&(r&&rt.alternate!==null&&Ke.delete(rt.key===null?Qe:rt.key),ne=S(rt,ne,Qe),Ge===null?ze=rt:Ge.sibling=rt,Ge=rt);return r&&Ke.forEach(function(R5){return i(se,R5)}),ht&&yo(se,Qe),ze}function Rt(se,ne,ce,Me){if(typeof ce=="object"&&ce!==null&&ce.type===T&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:e:{for(var ze=ce.key,Ge=ne;Ge!==null;){if(Ge.key===ze){if(ze=ce.type,ze===T){if(Ge.tag===7){l(se,Ge.sibling),ne=g(Ge,ce.props.children),ne.return=se,se=ne;break e}}else if(Ge.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===$&&Jg(ze)===Ge.type){l(se,Ge.sibling),ne=g(Ge,ce.props),ne.ref=es(se,Ge,ce),ne.return=se,se=ne;break e}l(se,Ge);break}else i(se,Ge);Ge=Ge.sibling}ce.type===T?(ne=ko(ce.props.children,se.mode,Me,ce.key),ne.return=se,se=ne):(Me=rl(ce.type,ce.key,ce.props,null,se.mode,Me),Me.ref=es(se,ne,ce),Me.return=se,se=Me)}return A(se);case C:e:{for(Ge=ce.key;ne!==null;){if(ne.key===Ge)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){l(se,ne.sibling),ne=g(ne,ce.children||[]),ne.return=se,se=ne;break e}else{l(se,ne);break}else i(se,ne);ne=ne.sibling}ne=cp(ce,se.mode,Me),ne.return=se,se=ne}return A(se);case $:return Ge=ce._init,Rt(se,ne,Ge(ce._payload),Me)}if(It(ce))return Oe(se,ne,ce,Me);if(Q(ce))return Ve(se,ne,ce,Me);Nu(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ne!==null&&ne.tag===6?(l(se,ne.sibling),ne=g(ne,ce),ne.return=se,se=ne):(l(se,ne),ne=lp(ce,se.mode,Me),ne.return=se,se=ne),A(se)):l(se,ne)}return Rt}var sa=ev(!0),tv=ev(!1),Pu=ji(null),Ru=null,ua=null,vd=null;function xd(){vd=ua=Ru=null}function wd(r){var i=Pu.current;ft(Pu),r._currentValue=i}function bd(r,i,l){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===l)break;r=r.return}}function la(r,i){Ru=r,vd=ua=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Ir=!0),r.firstContext=null)}function nn(r){var i=r._currentValue;if(vd!==r)if(r={context:r,memoizedValue:i,next:null},ua===null){if(Ru===null)throw Error(n(308));ua=r,Ru.dependencies={lanes:0,firstContext:r}}else ua=ua.next=r;return i}var go=null;function qd(r){go===null?go=[r]:go.push(r)}function rv(r,i,l,m){var g=i.interleaved;return g===null?(l.next=l,qd(i)):(l.next=g.next,g.next=l),i.interleaved=l,si(r,m)}function si(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Pi=!1;function Sd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ui(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ri(r,i,l){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(tt&2)!==0){var g=m.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),m.pending=i,si(r,l)}return g=m.interleaved,g===null?(i.next=i,qd(m)):(i.next=g.next,g.next=i),m.interleaved=i,si(r,l)}function Au(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,l|=m,i.lanes=l,We(r,l)}}function iv(r,i){var l=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,l===m)){var g=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var A={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?g=S=A:S=S.next=A,l=l.next}while(l!==null);S===null?g=S=i:S=S.next=i}else g=S=i;l={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:m.shared,effects:m.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Fu(r,i,l,m){var g=r.updateQueue;Pi=!1;var S=g.firstBaseUpdate,A=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var ee=U,_e=ee.next;ee.next=null,A===null?S=_e:A.next=_e,A=ee;var be=r.alternate;be!==null&&(be=be.updateQueue,U=be.lastBaseUpdate,U!==A&&(U===null?be.firstBaseUpdate=_e:U.next=_e,be.lastBaseUpdate=ee))}if(S!==null){var ke=g.baseState;A=0,be=_e=ee=null,U=S;do{var we=U.lane,Fe=U.eventTime;if((m&we)===we){be!==null&&(be=be.next={eventTime:Fe,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Oe=r,Ve=U;switch(we=i,Fe=l,Ve.tag){case 1:if(Oe=Ve.payload,typeof Oe=="function"){ke=Oe.call(Fe,ke,we);break e}ke=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ve.payload,we=typeof Oe=="function"?Oe.call(Fe,ke,we):Oe,we==null)break e;ke=ie({},ke,we);break e;case 2:Pi=!0}}U.callback!==null&&U.lane!==0&&(r.flags|=64,we=g.effects,we===null?g.effects=[U]:we.push(U))}else Fe={eventTime:Fe,lane:we,tag:U.tag,payload:U.payload,callback:U.callback,next:null},be===null?(_e=be=Fe,ee=ke):be=be.next=Fe,A|=we;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;we=U,U=we.next,we.next=null,g.lastBaseUpdate=we,g.shared.pending=null}}while(!0);if(be===null&&(ee=ke),g.baseState=ee,g.firstBaseUpdate=_e,g.lastBaseUpdate=be,i=g.shared.interleaved,i!==null){g=i;do A|=g.lane,g=g.next;while(g!==i)}else S===null&&(g.shared.lanes=0);wo|=A,r.lanes=A,r.memoizedState=ke}}function ov(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],g=m.callback;if(g!==null){if(m.callback=null,m=l,typeof g!="function")throw Error(n(191,g));g.call(m)}}}var ts={},zn=ji(ts),rs=ji(ts),ns=ji(ts);function vo(r){if(r===ts)throw Error(n(174));return r}function kd(r,i){switch(ct(ns,i),ct(rs,r),ct(zn,ts),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ut(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ut(i,r)}ft(zn),ct(zn,i)}function ca(){ft(zn),ft(rs),ft(ns)}function av(r){vo(ns.current);var i=vo(zn.current),l=Ut(i,r.type);i!==l&&(ct(rs,r),ct(zn,l))}function Cd(r){rs.current===r&&(ft(zn),ft(rs))}var Ct=ji(0);function Lu(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Md=[];function Ed(){for(var r=0;r<Md.length;r++)Md[r]._workInProgressVersionPrimary=null;Md.length=0}var Ou=M.ReactCurrentDispatcher,Id=M.ReactCurrentBatchConfig,xo=0,Mt=null,$t=null,Zt=null,Du=!1,is=!1,os=0,r5=0;function cr(){throw Error(n(321))}function jd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!yn(r[l],i[l]))return!1;return!0}function Td(r,i,l,m,g,S){if(xo=S,Mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ou.current=r===null||r.memoizedState===null?a5:s5,r=l(m,g),is){S=0;do{if(is=!1,os=0,25<=S)throw Error(n(301));S+=1,Zt=$t=null,i.updateQueue=null,Ou.current=u5,r=l(m,g)}while(is)}if(Ou.current=Bu,i=$t!==null&&$t.next!==null,xo=0,Zt=$t=Mt=null,Du=!1,i)throw Error(n(300));return r}function Nd(){var r=os!==0;return os=0,r}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Mt.memoizedState=Zt=r:Zt=Zt.next=r,Zt}function on(){if($t===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=$t.next;var i=Zt===null?Mt.memoizedState:Zt.next;if(i!==null)Zt=i,$t=r;else{if(r===null)throw Error(n(310));$t=r,r={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Zt===null?Mt.memoizedState=Zt=r:Zt=Zt.next=r}return Zt}function as(r,i){return typeof i=="function"?i(r):i}function Pd(r){var i=on(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var m=$t,g=m.baseQueue,S=l.pending;if(S!==null){if(g!==null){var A=g.next;g.next=S.next,S.next=A}m.baseQueue=g=S,l.pending=null}if(g!==null){S=g.next,m=m.baseState;var U=A=null,ee=null,_e=S;do{var be=_e.lane;if((xo&be)===be)ee!==null&&(ee=ee.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),m=_e.hasEagerState?_e.eagerState:r(m,_e.action);else{var ke={lane:be,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ee===null?(U=ee=ke,A=m):ee=ee.next=ke,Mt.lanes|=be,wo|=be}_e=_e.next}while(_e!==null&&_e!==S);ee===null?A=m:ee.next=U,yn(m,i.memoizedState)||(Ir=!0),i.memoizedState=m,i.baseState=A,i.baseQueue=ee,l.lastRenderedState=m}if(r=l.interleaved,r!==null){g=r;do S=g.lane,Mt.lanes|=S,wo|=S,g=g.next;while(g!==r)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Rd(r){var i=on(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var m=l.dispatch,g=l.pending,S=i.memoizedState;if(g!==null){l.pending=null;var A=g=g.next;do S=r(S,A.action),A=A.next;while(A!==g);yn(S,i.memoizedState)||(Ir=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,m]}function sv(){}function uv(r,i){var l=Mt,m=on(),g=i(),S=!yn(m.memoizedState,g);if(S&&(m.memoizedState=g,Ir=!0),m=m.queue,Ad(dv.bind(null,l,m,r),[r]),m.getSnapshot!==i||S||Zt!==null&&Zt.memoizedState.tag&1){if(l.flags|=2048,ss(9,cv.bind(null,l,m,g,i),void 0,null),Jt===null)throw Error(n(349));(xo&30)!==0||lv(l,i,g)}return g}function lv(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Mt.updateQueue,i===null?(i={lastEffect:null,stores:null},Mt.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function cv(r,i,l,m){i.value=l,i.getSnapshot=m,pv(i)&&_v(r)}function dv(r,i,l){return l(function(){pv(i)&&_v(r)})}function pv(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!yn(r,l)}catch{return!0}}function _v(r){var i=si(r,1);i!==null&&bn(i,r,1,-1)}function fv(r){var i=Bn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:r},i.queue=r,r=r.dispatch=o5.bind(null,Mt,r),[i.memoizedState,r]}function ss(r,i,l,m){return r={tag:r,create:i,destroy:l,deps:m,next:null},i=Mt.updateQueue,i===null?(i={lastEffect:null,stores:null},Mt.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(m=l.next,l.next=r,r.next=m,i.lastEffect=r)),r}function mv(){return on().memoizedState}function Vu(r,i,l,m){var g=Bn();Mt.flags|=r,g.memoizedState=ss(1|i,l,void 0,m===void 0?null:m)}function zu(r,i,l,m){var g=on();m=m===void 0?null:m;var S=void 0;if($t!==null){var A=$t.memoizedState;if(S=A.destroy,m!==null&&jd(m,A.deps)){g.memoizedState=ss(i,l,S,m);return}}Mt.flags|=r,g.memoizedState=ss(1|i,l,S,m)}function hv(r,i){return Vu(8390656,8,r,i)}function Ad(r,i){return zu(2048,8,r,i)}function yv(r,i){return zu(4,2,r,i)}function gv(r,i){return zu(4,4,r,i)}function vv(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function xv(r,i,l){return l=l!=null?l.concat([r]):null,zu(4,4,vv.bind(null,i,r),l)}function Fd(){}function wv(r,i){var l=on();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&jd(i,m[1])?m[0]:(l.memoizedState=[r,i],r)}function bv(r,i){var l=on();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&jd(i,m[1])?m[0]:(r=r(),l.memoizedState=[r,i],r)}function qv(r,i,l){return(xo&21)===0?(r.baseState&&(r.baseState=!1,Ir=!0),r.memoizedState=l):(yn(l,i)||(l=ki(),Mt.lanes|=l,wo|=l,r.baseState=!0),i)}function n5(r,i){var l=ot;ot=l!==0&&4>l?l:4,r(!0);var m=Id.transition;Id.transition={};try{r(!1),i()}finally{ot=l,Id.transition=m}}function Sv(){return on().memoizedState}function i5(r,i,l){var m=Oi(r);if(l={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null},kv(r))Cv(i,l);else if(l=rv(r,i,l,m),l!==null){var g=Sr();bn(l,r,m,g),Mv(l,i,m)}}function o5(r,i,l){var m=Oi(r),g={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null};if(kv(r))Cv(i,g);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var A=i.lastRenderedState,U=S(A,l);if(g.hasEagerState=!0,g.eagerState=U,yn(U,A)){var ee=i.interleaved;ee===null?(g.next=g,qd(i)):(g.next=ee.next,ee.next=g),i.interleaved=g;return}}catch{}finally{}l=rv(r,i,g,m),l!==null&&(g=Sr(),bn(l,r,m,g),Mv(l,i,m))}}function kv(r){var i=r.alternate;return r===Mt||i!==null&&i===Mt}function Cv(r,i){is=Du=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Mv(r,i,l){if((l&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,l|=m,i.lanes=l,We(r,l)}}var Bu={readContext:nn,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},a5={readContext:nn,useCallback:function(r,i){return Bn().memoizedState=[r,i===void 0?null:i],r},useContext:nn,useEffect:hv,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,Vu(4194308,4,vv.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Vu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Vu(4,2,r,i)},useMemo:function(r,i){var l=Bn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var m=Bn();return i=l!==void 0?l(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=i5.bind(null,Mt,r),[m.memoizedState,r]},useRef:function(r){var i=Bn();return r={current:r},i.memoizedState=r},useState:fv,useDebugValue:Fd,useDeferredValue:function(r){return Bn().memoizedState=r},useTransition:function(){var r=fv(!1),i=r[0];return r=n5.bind(null,r[1]),Bn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var m=Mt,g=Bn();if(ht){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Jt===null)throw Error(n(349));(xo&30)!==0||lv(m,i,l)}g.memoizedState=l;var S={value:l,getSnapshot:i};return g.queue=S,hv(dv.bind(null,m,S,r),[r]),m.flags|=2048,ss(9,cv.bind(null,m,S,l,i),void 0,null),l},useId:function(){var r=Bn(),i=Jt.identifierPrefix;if(ht){var l=ai,m=oi;l=(m&~(1<<32-qt(m)-1)).toString(32)+l,i=":"+i+"R"+l,l=os++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=r5++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},s5={readContext:nn,useCallback:wv,useContext:nn,useEffect:Ad,useImperativeHandle:xv,useInsertionEffect:yv,useLayoutEffect:gv,useMemo:bv,useReducer:Pd,useRef:mv,useState:function(){return Pd(as)},useDebugValue:Fd,useDeferredValue:function(r){var i=on();return qv(i,$t.memoizedState,r)},useTransition:function(){var r=Pd(as)[0],i=on().memoizedState;return[r,i]},useMutableSource:sv,useSyncExternalStore:uv,useId:Sv,unstable_isNewReconciler:!1},u5={readContext:nn,useCallback:wv,useContext:nn,useEffect:Ad,useImperativeHandle:xv,useInsertionEffect:yv,useLayoutEffect:gv,useMemo:bv,useReducer:Rd,useRef:mv,useState:function(){return Rd(as)},useDebugValue:Fd,useDeferredValue:function(r){var i=on();return $t===null?i.memoizedState=r:qv(i,$t.memoizedState,r)},useTransition:function(){var r=Rd(as)[0],i=on().memoizedState;return[r,i]},useMutableSource:sv,useSyncExternalStore:uv,useId:Sv,unstable_isNewReconciler:!1};function vn(r,i){if(r&&r.defaultProps){i=ie({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function Ld(r,i,l,m){i=r.memoizedState,l=l(m,i),l=l==null?i:ie({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Hu={isMounted:function(r){return(r=r._reactInternals)?jt(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var m=Sr(),g=Oi(r),S=ui(m,g);S.payload=i,l!=null&&(S.callback=l),i=Ri(r,S,g),i!==null&&(bn(i,r,g,m),Au(i,r,g))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var m=Sr(),g=Oi(r),S=ui(m,g);S.tag=1,S.payload=i,l!=null&&(S.callback=l),i=Ri(r,S,g),i!==null&&(bn(i,r,g,m),Au(i,r,g))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=Sr(),m=Oi(r),g=ui(l,m);g.tag=2,i!=null&&(g.callback=i),i=Ri(r,g,m),i!==null&&(bn(i,r,m,l),Au(i,r,m))}};function Ev(r,i,l,m,g,S,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,S,A):i.prototype&&i.prototype.isPureReactComponent?!Ga(l,m)||!Ga(g,S):!0}function Iv(r,i,l){var m=!1,g=Ti,S=i.contextType;return typeof S=="object"&&S!==null?S=nn(S):(g=Er(i)?mo:lr.current,m=i.contextTypes,S=(m=m!=null)?na(r,g):Ti),i=new i(l,S),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Hu,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=S),i}function jv(r,i,l,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,m),i.state!==r&&Hu.enqueueReplaceState(i,i.state,null)}function Od(r,i,l,m){var g=r.stateNode;g.props=l,g.state=r.memoizedState,g.refs={},Sd(r);var S=i.contextType;typeof S=="object"&&S!==null?g.context=nn(S):(S=Er(i)?mo:lr.current,g.context=na(r,S)),g.state=r.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(Ld(r,i,S,l),g.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Hu.enqueueReplaceState(g,g.state,null),Fu(r,l,g,m),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function da(r,i){try{var l="",m=i;do l+=te(m),m=m.return;while(m);var g=l}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:r,source:i,stack:g,digest:null}}function Dd(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function Vd(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var l5=typeof WeakMap=="function"?WeakMap:Map;function Tv(r,i,l){l=ui(-1,l),l.tag=3,l.payload={element:null};var m=i.value;return l.callback=function(){Qu||(Qu=!0,tp=m),Vd(r,i)},l}function Nv(r,i,l){l=ui(-1,l),l.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var g=i.value;l.payload=function(){return m(g)},l.callback=function(){Vd(r,i)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){Vd(r,i),typeof m!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var A=i.stack;this.componentDidCatch(i.value,{componentStack:A!==null?A:""})}),l}function Pv(r,i,l){var m=r.pingCache;if(m===null){m=r.pingCache=new l5;var g=new Set;m.set(i,g)}else g=m.get(i),g===void 0&&(g=new Set,m.set(i,g));g.has(l)||(g.add(l),r=q5.bind(null,r,i,l),i.then(r,r))}function Rv(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Av(r,i,l,m,g){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=ui(-1,1),i.tag=2,Ri(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var c5=M.ReactCurrentOwner,Ir=!1;function qr(r,i,l,m){i.child=r===null?tv(i,null,l,m):sa(i,r.child,l,m)}function Fv(r,i,l,m,g){l=l.render;var S=i.ref;return la(i,g),m=Td(r,i,l,m,S,g),l=Nd(),r!==null&&!Ir?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,li(r,i,g)):(ht&&l&&fd(i),i.flags|=1,qr(r,i,m,g),i.child)}function Lv(r,i,l,m,g){if(r===null){var S=l.type;return typeof S=="function"&&!up(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=S,Ov(r,i,S,m,g)):(r=rl(l.type,null,m,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(S=r.child,(r.lanes&g)===0){var A=S.memoizedProps;if(l=l.compare,l=l!==null?l:Ga,l(A,m)&&r.ref===i.ref)return li(r,i,g)}return i.flags|=1,r=Vi(S,m),r.ref=i.ref,r.return=i,i.child=r}function Ov(r,i,l,m,g){if(r!==null){var S=r.memoizedProps;if(Ga(S,m)&&r.ref===i.ref)if(Ir=!1,i.pendingProps=m=S,(r.lanes&g)!==0)(r.flags&131072)!==0&&(Ir=!0);else return i.lanes=r.lanes,li(r,i,g)}return zd(r,i,l,m,g)}function Dv(r,i,l){var m=i.pendingProps,g=m.children,S=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(_a,$r),$r|=l;else{if((l&1073741824)===0)return r=S!==null?S.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,ct(_a,$r),$r|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:l,ct(_a,$r),$r|=m}else S!==null?(m=S.baseLanes|l,i.memoizedState=null):m=l,ct(_a,$r),$r|=m;return qr(r,i,g,l),i.child}function Vv(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function zd(r,i,l,m,g){var S=Er(l)?mo:lr.current;return S=na(i,S),la(i,g),l=Td(r,i,l,m,S,g),m=Nd(),r!==null&&!Ir?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,li(r,i,g)):(ht&&m&&fd(i),i.flags|=1,qr(r,i,l,g),i.child)}function zv(r,i,l,m,g){if(Er(l)){var S=!0;Mu(i)}else S=!1;if(la(i,g),i.stateNode===null)Wu(r,i),Iv(i,l,m),Od(i,l,m,g),m=!0;else if(r===null){var A=i.stateNode,U=i.memoizedProps;A.props=U;var ee=A.context,_e=l.contextType;typeof _e=="object"&&_e!==null?_e=nn(_e):(_e=Er(l)?mo:lr.current,_e=na(i,_e));var be=l.getDerivedStateFromProps,ke=typeof be=="function"||typeof A.getSnapshotBeforeUpdate=="function";ke||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(U!==m||ee!==_e)&&jv(i,A,m,_e),Pi=!1;var we=i.memoizedState;A.state=we,Fu(i,m,A,g),ee=i.memoizedState,U!==m||we!==ee||Mr.current||Pi?(typeof be=="function"&&(Ld(i,l,be,m),ee=i.memoizedState),(U=Pi||Ev(i,l,U,m,we,ee,_e))?(ke||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(i.flags|=4194308)):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=ee),A.props=m,A.state=ee,A.context=_e,m=U):(typeof A.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{A=i.stateNode,nv(r,i),U=i.memoizedProps,_e=i.type===i.elementType?U:vn(i.type,U),A.props=_e,ke=i.pendingProps,we=A.context,ee=l.contextType,typeof ee=="object"&&ee!==null?ee=nn(ee):(ee=Er(l)?mo:lr.current,ee=na(i,ee));var Fe=l.getDerivedStateFromProps;(be=typeof Fe=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(U!==ke||we!==ee)&&jv(i,A,m,ee),Pi=!1,we=i.memoizedState,A.state=we,Fu(i,m,A,g);var Oe=i.memoizedState;U!==ke||we!==Oe||Mr.current||Pi?(typeof Fe=="function"&&(Ld(i,l,Fe,m),Oe=i.memoizedState),(_e=Pi||Ev(i,l,_e,m,we,Oe,ee)||!1)?(be||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,Oe,ee),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,Oe,ee)),typeof A.componentDidUpdate=="function"&&(i.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof A.componentDidUpdate!="function"||U===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Oe),A.props=m,A.state=Oe,A.context=ee,m=_e):(typeof A.componentDidUpdate!="function"||U===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),m=!1)}return Bd(r,i,l,m,S,g)}function Bd(r,i,l,m,g,S){Vv(r,i);var A=(i.flags&128)!==0;if(!m&&!A)return g&&Ug(i,l,!1),li(r,i,S);m=i.stateNode,c5.current=i;var U=A&&typeof l.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&A?(i.child=sa(i,r.child,null,S),i.child=sa(i,null,U,S)):qr(r,i,U,S),i.memoizedState=m.state,g&&Ug(i,l,!0),i.child}function Bv(r){var i=r.stateNode;i.pendingContext?$g(r,i.pendingContext,i.pendingContext!==i.context):i.context&&$g(r,i.context,!1),kd(r,i.containerInfo)}function Hv(r,i,l,m,g){return aa(),gd(g),i.flags|=256,qr(r,i,l,m),i.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function $d(r){return{baseLanes:r,cachePool:null,transitions:null}}function $v(r,i,l){var m=i.pendingProps,g=Ct.current,S=!1,A=(i.flags&128)!==0,U;if((U=A)||(U=r!==null&&r.memoizedState===null?!1:(g&2)!==0),U?(S=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),ct(Ct,g&1),r===null)return yd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(A=m.children,r=m.fallback,S?(m=i.mode,S=i.child,A={mode:"hidden",children:A},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=A):S=nl(A,m,0,null),r=ko(r,m,l,null),S.return=i,r.return=i,S.sibling=r,i.child=S,i.child.memoizedState=$d(l),i.memoizedState=Hd,r):Wd(i,A));if(g=r.memoizedState,g!==null&&(U=g.dehydrated,U!==null))return d5(r,i,A,m,U,g,l);if(S){S=m.fallback,A=i.mode,g=r.child,U=g.sibling;var ee={mode:"hidden",children:m.children};return(A&1)===0&&i.child!==g?(m=i.child,m.childLanes=0,m.pendingProps=ee,i.deletions=null):(m=Vi(g,ee),m.subtreeFlags=g.subtreeFlags&14680064),U!==null?S=Vi(U,S):(S=ko(S,A,l,null),S.flags|=2),S.return=i,m.return=i,m.sibling=S,i.child=m,m=S,S=i.child,A=r.child.memoizedState,A=A===null?$d(l):{baseLanes:A.baseLanes|l,cachePool:null,transitions:A.transitions},S.memoizedState=A,S.childLanes=r.childLanes&~l,i.memoizedState=Hd,m}return S=r.child,r=S.sibling,m=Vi(S,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=l),m.return=i,m.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=m,i.memoizedState=null,m}function Wd(r,i){return i=nl({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function $u(r,i,l,m){return m!==null&&gd(m),sa(i,r.child,null,l),r=Wd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function d5(r,i,l,m,g,S,A){if(l)return i.flags&256?(i.flags&=-257,m=Dd(Error(n(422))),$u(r,i,A,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(S=m.fallback,g=i.mode,m=nl({mode:"visible",children:m.children},g,0,null),S=ko(S,g,A,null),S.flags|=2,m.return=i,S.return=i,m.sibling=S,i.child=m,(i.mode&1)!==0&&sa(i,r.child,null,A),i.child.memoizedState=$d(A),i.memoizedState=Hd,S);if((i.mode&1)===0)return $u(r,i,A,null);if(g.data==="$!"){if(m=g.nextSibling&&g.nextSibling.dataset,m)var U=m.dgst;return m=U,S=Error(n(419)),m=Dd(S,m,void 0),$u(r,i,A,m)}if(U=(A&r.childLanes)!==0,Ir||U){if(m=Jt,m!==null){switch(A&-A){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(m.suspendedLanes|A))!==0?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,si(r,g),bn(m,r,g,-1))}return sp(),m=Dd(Error(n(421))),$u(r,i,A,m)}return g.data==="$?"?(i.flags|=128,i.child=r.child,i=S5.bind(null,r),g._reactRetry=i,null):(r=S.treeContext,Hr=Ii(g.nextSibling),Br=i,ht=!0,gn=null,r!==null&&(tn[rn++]=oi,tn[rn++]=ai,tn[rn++]=ho,oi=r.id,ai=r.overflow,ho=i),i=Wd(i,m.children),i.flags|=4096,i)}function Wv(r,i,l){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),bd(r.return,i,l)}function Ud(r,i,l,m,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:l,tailMode:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=l,S.tailMode=g)}function Uv(r,i,l){var m=i.pendingProps,g=m.revealOrder,S=m.tail;if(qr(r,i,m.children,l),m=Ct.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wv(r,l,i);else if(r.tag===19)Wv(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(ct(Ct,m),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)r=l.alternate,r!==null&&Lu(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),Ud(i,!1,g,l,S);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Lu(r)===null){i.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}Ud(i,!0,l,null,S);break;case"together":Ud(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function li(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),wo|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,l=Vi(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Vi(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function p5(r,i,l){switch(i.tag){case 3:Bv(i),aa();break;case 5:av(i);break;case 1:Er(i.type)&&Mu(i);break;case 4:kd(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,g=i.memoizedProps.value;ct(Pu,m._currentValue),m._currentValue=g;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(ct(Ct,Ct.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?$v(r,i,l):(ct(Ct,Ct.current&1),r=li(r,i,l),r!==null?r.sibling:null);ct(Ct,Ct.current&1);break;case 19:if(m=(l&i.childLanes)!==0,(r.flags&128)!==0){if(m)return Uv(r,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ct(Ct,Ct.current),m)break;return null;case 22:case 23:return i.lanes=0,Dv(r,i,l)}return li(r,i,l)}var Gv,Gd,Kv,Yv;Gv=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Gd=function(){},Kv=function(r,i,l,m){var g=r.memoizedProps;if(g!==m){r=i.stateNode,vo(zn.current);var S=null;switch(l){case"input":g=Pe(r,g),m=Pe(r,m),S=[];break;case"select":g=ie({},g,{value:void 0}),m=ie({},m,{value:void 0}),S=[];break;case"textarea":g=bt(r,g),m=bt(r,m),S=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Su)}Pt(l,m);var A;l=null;for(_e in g)if(!m.hasOwnProperty(_e)&&g.hasOwnProperty(_e)&&g[_e]!=null)if(_e==="style"){var U=g[_e];for(A in U)U.hasOwnProperty(A)&&(l||(l={}),l[A]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(a.hasOwnProperty(_e)?S||(S=[]):(S=S||[]).push(_e,null));for(_e in m){var ee=m[_e];if(U=g!=null?g[_e]:void 0,m.hasOwnProperty(_e)&&ee!==U&&(ee!=null||U!=null))if(_e==="style")if(U){for(A in U)!U.hasOwnProperty(A)||ee&&ee.hasOwnProperty(A)||(l||(l={}),l[A]="");for(A in ee)ee.hasOwnProperty(A)&&U[A]!==ee[A]&&(l||(l={}),l[A]=ee[A])}else l||(S||(S=[]),S.push(_e,l)),l=ee;else _e==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,U=U?U.__html:void 0,ee!=null&&U!==ee&&(S=S||[]).push(_e,ee)):_e==="children"?typeof ee!="string"&&typeof ee!="number"||(S=S||[]).push(_e,""+ee):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(a.hasOwnProperty(_e)?(ee!=null&&_e==="onScroll"&&_t("scroll",r),S||U===ee||(S=[])):(S=S||[]).push(_e,ee))}l&&(S=S||[]).push("style",l);var _e=S;(i.updateQueue=_e)&&(i.flags|=4)}},Yv=function(r,i,l,m){l!==m&&(i.flags|=4)};function us(r,i){if(!ht)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function dr(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,m=0;if(i)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,m|=g.subtreeFlags&14680064,m|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,m|=g.subtreeFlags,m|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=m,r.childLanes=l,i}function _5(r,i,l){var m=i.pendingProps;switch(md(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(i),null;case 1:return Er(i.type)&&Cu(),dr(i),null;case 3:return m=i.stateNode,ca(),ft(Mr),ft(lr),Ed(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Tu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gn!==null&&(ip(gn),gn=null))),Gd(r,i),dr(i),null;case 5:Cd(i);var g=vo(ns.current);if(l=i.type,r!==null&&i.stateNode!=null)Kv(r,i,l,m,g),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(n(166));return dr(i),null}if(r=vo(zn.current),Tu(i)){m=i.stateNode,l=i.type;var S=i.memoizedProps;switch(m[Vn]=i,m[Za]=S,r=(i.mode&1)!==0,l){case"dialog":_t("cancel",m),_t("close",m);break;case"iframe":case"object":case"embed":_t("load",m);break;case"video":case"audio":for(g=0;g<Ya.length;g++)_t(Ya[g],m);break;case"source":_t("error",m);break;case"img":case"image":case"link":_t("error",m),_t("load",m);break;case"details":_t("toggle",m);break;case"input":Ae(m,S),_t("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},_t("invalid",m);break;case"textarea":lt(m,S),_t("invalid",m)}Pt(l,S),g=null;for(var A in S)if(S.hasOwnProperty(A)){var U=S[A];A==="children"?typeof U=="string"?m.textContent!==U&&(S.suppressHydrationWarning!==!0&&qu(m.textContent,U,r),g=["children",U]):typeof U=="number"&&m.textContent!==""+U&&(S.suppressHydrationWarning!==!0&&qu(m.textContent,U,r),g=["children",""+U]):a.hasOwnProperty(A)&&U!=null&&A==="onScroll"&&_t("scroll",m)}switch(l){case"input":Re(m),st(m,S,!0);break;case"textarea":Re(m),tr(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=Su)}m=g,i.updateQueue=m,m!==null&&(i.flags|=4)}else{A=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=At(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=A.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=A.createElement(l,{is:m.is}):(r=A.createElement(l),l==="select"&&(A=r,m.multiple?A.multiple=!0:m.size&&(A.size=m.size))):r=A.createElementNS(r,l),r[Vn]=i,r[Za]=m,Gv(r,i,!1,!1),i.stateNode=r;e:{switch(A=pn(l,m),l){case"dialog":_t("cancel",r),_t("close",r),g=m;break;case"iframe":case"object":case"embed":_t("load",r),g=m;break;case"video":case"audio":for(g=0;g<Ya.length;g++)_t(Ya[g],r);g=m;break;case"source":_t("error",r),g=m;break;case"img":case"image":case"link":_t("error",r),_t("load",r),g=m;break;case"details":_t("toggle",r),g=m;break;case"input":Ae(r,m),g=Pe(r,m),_t("invalid",r);break;case"option":g=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},g=ie({},m,{value:void 0}),_t("invalid",r);break;case"textarea":lt(r,m),g=bt(r,m),_t("invalid",r);break;default:g=m}Pt(l,g),U=g;for(S in U)if(U.hasOwnProperty(S)){var ee=U[S];S==="style"?Xe(r,ee):S==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Ar(r,ee)):S==="children"?typeof ee=="string"?(l!=="textarea"||ee!=="")&&Nt(r,ee):typeof ee=="number"&&Nt(r,""+ee):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?ee!=null&&S==="onScroll"&&_t("scroll",r):ee!=null&&q(r,S,ee,A))}switch(l){case"input":Re(r),st(r,m,!1);break;case"textarea":Re(r),tr(r);break;case"option":m.value!=null&&r.setAttribute("value",""+ue(m.value));break;case"select":r.multiple=!!m.multiple,S=m.value,S!=null?wt(r,!!m.multiple,S,!1):m.defaultValue!=null&&wt(r,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Su)}switch(l){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return dr(i),null;case 6:if(r&&i.stateNode!=null)Yv(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(n(166));if(l=vo(ns.current),vo(zn.current),Tu(i)){if(m=i.stateNode,l=i.memoizedProps,m[Vn]=i,(S=m.nodeValue!==l)&&(r=Br,r!==null))switch(r.tag){case 3:qu(m.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&qu(m.nodeValue,l,(r.mode&1)!==0)}S&&(i.flags|=4)}else m=(l.nodeType===9?l:l.ownerDocument).createTextNode(m),m[Vn]=i,i.stateNode=m}return dr(i),null;case 13:if(ft(Ct),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ht&&Hr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Zg(),aa(),i.flags|=98560,S=!1;else if(S=Tu(i),m!==null&&m.dehydrated!==null){if(r===null){if(!S)throw Error(n(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Vn]=i}else aa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dr(i),S=!1}else gn!==null&&(ip(gn),gn=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Ct.current&1)!==0?Wt===0&&(Wt=3):sp())),i.updateQueue!==null&&(i.flags|=4),dr(i),null);case 4:return ca(),Gd(r,i),r===null&&Qa(i.stateNode.containerInfo),dr(i),null;case 10:return wd(i.type._context),dr(i),null;case 17:return Er(i.type)&&Cu(),dr(i),null;case 19:if(ft(Ct),S=i.memoizedState,S===null)return dr(i),null;if(m=(i.flags&128)!==0,A=S.rendering,A===null)if(m)us(S,!1);else{if(Wt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(A=Lu(r),A!==null){for(i.flags|=128,us(S,!1),m=A.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=l,l=i.child;l!==null;)S=l,r=m,S.flags&=14680066,A=S.alternate,A===null?(S.childLanes=0,S.lanes=r,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=A.childLanes,S.lanes=A.lanes,S.child=A.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=A.memoizedProps,S.memoizedState=A.memoizedState,S.updateQueue=A.updateQueue,S.type=A.type,r=A.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return ct(Ct,Ct.current&1|2),i.child}r=r.sibling}S.tail!==null&&pt()>fa&&(i.flags|=128,m=!0,us(S,!1),i.lanes=4194304)}else{if(!m)if(r=Lu(A),r!==null){if(i.flags|=128,m=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),us(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!ht)return dr(i),null}else 2*pt()-S.renderingStartTime>fa&&l!==1073741824&&(i.flags|=128,m=!0,us(S,!1),i.lanes=4194304);S.isBackwards?(A.sibling=i.child,i.child=A):(l=S.last,l!==null?l.sibling=A:i.child=A,S.last=A)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=pt(),i.sibling=null,l=Ct.current,ct(Ct,m?l&1|2:l&1),i):(dr(i),null);case 22:case 23:return ap(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?($r&1073741824)!==0&&(dr(i),i.subtreeFlags&6&&(i.flags|=8192)):dr(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function f5(r,i){switch(md(i),i.tag){case 1:return Er(i.type)&&Cu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ca(),ft(Mr),ft(lr),Ed(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Cd(i),null;case 13:if(ft(Ct),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));aa()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ft(Ct),null;case 4:return ca(),null;case 10:return wd(i.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var Uu=!1,pr=!1,m5=typeof WeakSet=="function"?WeakSet:Set,Le=null;function pa(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(m){Tt(r,i,m)}else l.current=null}function Kd(r,i,l){try{l()}catch(m){Tt(r,i,m)}}var Qv=!1;function h5(r,i){if(ad=Ko,r=Eg(),Zc(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var m=l.getSelection&&l.getSelection();if(m&&m.rangeCount!==0){l=m.anchorNode;var g=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var A=0,U=-1,ee=-1,_e=0,be=0,ke=r,we=null;t:for(;;){for(var Fe;ke!==l||g!==0&&ke.nodeType!==3||(U=A+g),ke!==S||m!==0&&ke.nodeType!==3||(ee=A+m),ke.nodeType===3&&(A+=ke.nodeValue.length),(Fe=ke.firstChild)!==null;)we=ke,ke=Fe;for(;;){if(ke===r)break t;if(we===l&&++_e===g&&(U=A),we===S&&++be===m&&(ee=A),(Fe=ke.nextSibling)!==null)break;ke=we,we=ke.parentNode}ke=Fe}l=U===-1||ee===-1?null:{start:U,end:ee}}else l=null}l=l||{start:0,end:0}}else l=null;for(sd={focusedElem:r,selectionRange:l},Ko=!1,Le=i;Le!==null;)if(i=Le,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Le=r;else for(;Le!==null;){i=Le;try{var Oe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ve=Oe.memoizedProps,Rt=Oe.memoizedState,se=i.stateNode,ne=se.getSnapshotBeforeUpdate(i.elementType===i.type?Ve:vn(i.type,Ve),Rt);se.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ce=i.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){Tt(i,i.return,Me)}if(r=i.sibling,r!==null){r.return=i.return,Le=r;break}Le=i.return}return Oe=Qv,Qv=!1,Oe}function ls(r,i,l){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var g=m=m.next;do{if((g.tag&r)===r){var S=g.destroy;g.destroy=void 0,S!==void 0&&Kd(i,l,S)}g=g.next}while(g!==m)}}function Gu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var m=l.create;l.destroy=m()}l=l.next}while(l!==i)}}function Yd(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Xv(r){var i=r.alternate;i!==null&&(r.alternate=null,Xv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Vn],delete i[Za],delete i[dd],delete i[ZE],delete i[JE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zv(r){return r.tag===5||r.tag===3||r.tag===4}function Jv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Zv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qd(r,i,l){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Su));else if(m!==4&&(r=r.child,r!==null))for(Qd(r,i,l),r=r.sibling;r!==null;)Qd(r,i,l),r=r.sibling}function Xd(r,i,l){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Xd(r,i,l),r=r.sibling;r!==null;)Xd(r,i,l),r=r.sibling}var ir=null,xn=!1;function Ai(r,i,l){for(l=l.child;l!==null;)ex(r,i,l),l=l.sibling}function ex(r,i,l){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(gr,l)}catch{}switch(l.tag){case 5:pr||pa(l,i);case 6:var m=ir,g=xn;ir=null,Ai(r,i,l),ir=m,xn=g,ir!==null&&(xn?(r=ir,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):ir.removeChild(l.stateNode));break;case 18:ir!==null&&(xn?(r=ir,l=l.stateNode,r.nodeType===8?cd(r.parentNode,l):r.nodeType===1&&cd(r,l),uo(r)):cd(ir,l.stateNode));break;case 4:m=ir,g=xn,ir=l.stateNode.containerInfo,xn=!0,Ai(r,i,l),ir=m,xn=g;break;case 0:case 11:case 14:case 15:if(!pr&&(m=l.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){g=m=m.next;do{var S=g,A=S.destroy;S=S.tag,A!==void 0&&((S&2)!==0||(S&4)!==0)&&Kd(l,i,A),g=g.next}while(g!==m)}Ai(r,i,l);break;case 1:if(!pr&&(pa(l,i),m=l.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=l.memoizedProps,m.state=l.memoizedState,m.componentWillUnmount()}catch(U){Tt(l,i,U)}Ai(r,i,l);break;case 21:Ai(r,i,l);break;case 22:l.mode&1?(pr=(m=pr)||l.memoizedState!==null,Ai(r,i,l),pr=m):Ai(r,i,l);break;default:Ai(r,i,l)}}function tx(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new m5),i.forEach(function(m){var g=k5.bind(null,r,m);l.has(m)||(l.add(m),m.then(g,g))})}}function wn(r,i){var l=i.deletions;if(l!==null)for(var m=0;m<l.length;m++){var g=l[m];try{var S=r,A=i,U=A;e:for(;U!==null;){switch(U.tag){case 5:ir=U.stateNode,xn=!1;break e;case 3:ir=U.stateNode.containerInfo,xn=!0;break e;case 4:ir=U.stateNode.containerInfo,xn=!0;break e}U=U.return}if(ir===null)throw Error(n(160));ex(S,A,g),ir=null,xn=!1;var ee=g.alternate;ee!==null&&(ee.return=null),g.return=null}catch(_e){Tt(g,i,_e)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rx(i,r),i=i.sibling}function rx(r,i){var l=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(wn(i,r),Hn(r),m&4){try{ls(3,r,r.return),Gu(3,r)}catch(Ve){Tt(r,r.return,Ve)}try{ls(5,r,r.return)}catch(Ve){Tt(r,r.return,Ve)}}break;case 1:wn(i,r),Hn(r),m&512&&l!==null&&pa(l,l.return);break;case 5:if(wn(i,r),Hn(r),m&512&&l!==null&&pa(l,l.return),r.flags&32){var g=r.stateNode;try{Nt(g,"")}catch(Ve){Tt(r,r.return,Ve)}}if(m&4&&(g=r.stateNode,g!=null)){var S=r.memoizedProps,A=l!==null?l.memoizedProps:S,U=r.type,ee=r.updateQueue;if(r.updateQueue=null,ee!==null)try{U==="input"&&S.type==="radio"&&S.name!=null&&Ue(g,S),pn(U,A);var _e=pn(U,S);for(A=0;A<ee.length;A+=2){var be=ee[A],ke=ee[A+1];be==="style"?Xe(g,ke):be==="dangerouslySetInnerHTML"?Ar(g,ke):be==="children"?Nt(g,ke):q(g,be,ke,_e)}switch(U){case"input":Be(g,S);break;case"textarea":Cr(g,S);break;case"select":var we=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!S.multiple;var Fe=S.value;Fe!=null?wt(g,!!S.multiple,Fe,!1):we!==!!S.multiple&&(S.defaultValue!=null?wt(g,!!S.multiple,S.defaultValue,!0):wt(g,!!S.multiple,S.multiple?[]:"",!1))}g[Za]=S}catch(Ve){Tt(r,r.return,Ve)}}break;case 6:if(wn(i,r),Hn(r),m&4){if(r.stateNode===null)throw Error(n(162));g=r.stateNode,S=r.memoizedProps;try{g.nodeValue=S}catch(Ve){Tt(r,r.return,Ve)}}break;case 3:if(wn(i,r),Hn(r),m&4&&l!==null&&l.memoizedState.isDehydrated)try{uo(i.containerInfo)}catch(Ve){Tt(r,r.return,Ve)}break;case 4:wn(i,r),Hn(r);break;case 13:wn(i,r),Hn(r),g=r.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(ep=pt())),m&4&&tx(r);break;case 22:if(be=l!==null&&l.memoizedState!==null,r.mode&1?(pr=(_e=pr)||be,wn(i,r),pr=_e):wn(i,r),Hn(r),m&8192){if(_e=r.memoizedState!==null,(r.stateNode.isHidden=_e)&&!be&&(r.mode&1)!==0)for(Le=r,be=r.child;be!==null;){for(ke=Le=be;Le!==null;){switch(we=Le,Fe=we.child,we.tag){case 0:case 11:case 14:case 15:ls(4,we,we.return);break;case 1:pa(we,we.return);var Oe=we.stateNode;if(typeof Oe.componentWillUnmount=="function"){m=we,l=we.return;try{i=m,Oe.props=i.memoizedProps,Oe.state=i.memoizedState,Oe.componentWillUnmount()}catch(Ve){Tt(m,l,Ve)}}break;case 5:pa(we,we.return);break;case 22:if(we.memoizedState!==null){ox(ke);continue}}Fe!==null?(Fe.return=we,Le=Fe):ox(ke)}be=be.sibling}e:for(be=null,ke=r;;){if(ke.tag===5){if(be===null){be=ke;try{g=ke.stateNode,_e?(S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(U=ke.stateNode,ee=ke.memoizedProps.style,A=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,U.style.display=Gt("display",A))}catch(Ve){Tt(r,r.return,Ve)}}}else if(ke.tag===6){if(be===null)try{ke.stateNode.nodeValue=_e?"":ke.memoizedProps}catch(Ve){Tt(r,r.return,Ve)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===r)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===r)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===r)break e;be===ke&&(be=null),ke=ke.return}be===ke&&(be=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:wn(i,r),Hn(r),m&4&&tx(r);break;case 21:break;default:wn(i,r),Hn(r)}}function Hn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Zv(l)){var m=l;break e}l=l.return}throw Error(n(160))}switch(m.tag){case 5:var g=m.stateNode;m.flags&32&&(Nt(g,""),m.flags&=-33);var S=Jv(r);Xd(r,S,g);break;case 3:case 4:var A=m.stateNode.containerInfo,U=Jv(r);Qd(r,U,A);break;default:throw Error(n(161))}}catch(ee){Tt(r,r.return,ee)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function y5(r,i,l){Le=r,nx(r)}function nx(r,i,l){for(var m=(r.mode&1)!==0;Le!==null;){var g=Le,S=g.child;if(g.tag===22&&m){var A=g.memoizedState!==null||Uu;if(!A){var U=g.alternate,ee=U!==null&&U.memoizedState!==null||pr;U=Uu;var _e=pr;if(Uu=A,(pr=ee)&&!_e)for(Le=g;Le!==null;)A=Le,ee=A.child,A.tag===22&&A.memoizedState!==null?ax(g):ee!==null?(ee.return=A,Le=ee):ax(g);for(;S!==null;)Le=S,nx(S),S=S.sibling;Le=g,Uu=U,pr=_e}ix(r)}else(g.subtreeFlags&8772)!==0&&S!==null?(S.return=g,Le=S):ix(r)}}function ix(r){for(;Le!==null;){var i=Le;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:pr||Gu(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!pr)if(l===null)m.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:vn(i.type,l.memoizedProps);m.componentDidUpdate(g,l.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&ov(i,S,m);break;case 3:var A=i.updateQueue;if(A!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}ov(i,A,l)}break;case 5:var U=i.stateNode;if(l===null&&i.flags&4){l=U;var ee=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&l.focus();break;case"img":ee.src&&(l.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var _e=i.alternate;if(_e!==null){var be=_e.memoizedState;if(be!==null){var ke=be.dehydrated;ke!==null&&uo(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}pr||i.flags&512&&Yd(i)}catch(we){Tt(i,i.return,we)}}if(i===r){Le=null;break}if(l=i.sibling,l!==null){l.return=i.return,Le=l;break}Le=i.return}}function ox(r){for(;Le!==null;){var i=Le;if(i===r){Le=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Le=l;break}Le=i.return}}function ax(r){for(;Le!==null;){var i=Le;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Gu(4,i)}catch(ee){Tt(i,l,ee)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var g=i.return;try{m.componentDidMount()}catch(ee){Tt(i,g,ee)}}var S=i.return;try{Yd(i)}catch(ee){Tt(i,S,ee)}break;case 5:var A=i.return;try{Yd(i)}catch(ee){Tt(i,A,ee)}}}catch(ee){Tt(i,i.return,ee)}if(i===r){Le=null;break}var U=i.sibling;if(U!==null){U.return=i.return,Le=U;break}Le=i.return}}var g5=Math.ceil,Ku=M.ReactCurrentDispatcher,Zd=M.ReactCurrentOwner,an=M.ReactCurrentBatchConfig,tt=0,Jt=null,Ot=null,or=0,$r=0,_a=ji(0),Wt=0,cs=null,wo=0,Yu=0,Jd=0,ds=null,jr=null,ep=0,fa=1/0,ci=null,Qu=!1,tp=null,Fi=null,Xu=!1,Li=null,Zu=0,ps=0,rp=null,Ju=-1,el=0;function Sr(){return(tt&6)!==0?pt():Ju!==-1?Ju:Ju=pt()}function Oi(r){return(r.mode&1)===0?1:(tt&2)!==0&&or!==0?or&-or:t5.transition!==null?(el===0&&(el=ki()),el):(r=ot,r!==0||(r=window.event,r=r===void 0?16:cu(r.type)),r)}function bn(r,i,l,m){if(50<ps)throw ps=0,rp=null,Error(n(185));Jr(r,l,m),((tt&2)===0||r!==Jt)&&(r===Jt&&((tt&2)===0&&(Yu|=l),Wt===4&&Di(r,or)),Tr(r,m),l===1&&tt===0&&(i.mode&1)===0&&(fa=pt()+500,Eu&&Ni()))}function Tr(r,i){var l=r.callbackNode;xr(r,i);var m=Si(r,r===Jt?or:0);if(m===0)l!==null&&wi(l),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(l!=null&&wi(l),i===1)r.tag===0?e5(ux.bind(null,r)):Gg(ux.bind(null,r)),QE(function(){(tt&6)===0&&Ni()}),l=null;else{switch(no(m)){case 1:l=_n;break;case 4:l=bi;break;case 16:l=An;break;case 536870912:l=zo;break;default:l=An}l=hx(l,sx.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function sx(r,i){if(Ju=-1,el=0,(tt&6)!==0)throw Error(n(327));var l=r.callbackNode;if(ma()&&r.callbackNode!==l)return null;var m=Si(r,r===Jt?or:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=tl(r,m);else{i=m;var g=tt;tt|=2;var S=cx();(Jt!==r||or!==i)&&(ci=null,fa=pt()+500,qo(r,i));do try{w5();break}catch(U){lx(r,U)}while(!0);xd(),Ku.current=S,tt=g,Ot!==null?i=0:(Jt=null,or=0,i=Wt)}if(i!==0){if(i===2&&(g=Or(r),g!==0&&(m=g,i=np(r,g))),i===1)throw l=cs,qo(r,0),Di(r,m),Tr(r,pt()),l;if(i===6)Di(r,m);else{if(g=r.current.alternate,(m&30)===0&&!v5(g)&&(i=tl(r,m),i===2&&(S=Or(r),S!==0&&(m=S,i=np(r,S))),i===1))throw l=cs,qo(r,0),Di(r,m),Tr(r,pt()),l;switch(r.finishedWork=g,r.finishedLanes=m,i){case 0:case 1:throw Error(n(345));case 2:So(r,jr,ci);break;case 3:if(Di(r,m),(m&130023424)===m&&(i=ep+500-pt(),10<i)){if(Si(r,0)!==0)break;if(g=r.suspendedLanes,(g&m)!==m){Sr(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=ld(So.bind(null,r,jr,ci),i);break}So(r,jr,ci);break;case 4:if(Di(r,m),(m&4194240)===m)break;for(i=r.eventTimes,g=-1;0<m;){var A=31-qt(m);S=1<<A,A=i[A],A>g&&(g=A),m&=~S}if(m=g,m=pt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*g5(m/1960))-m,10<m){r.timeoutHandle=ld(So.bind(null,r,jr,ci),m);break}So(r,jr,ci);break;case 5:So(r,jr,ci);break;default:throw Error(n(329))}}}return Tr(r,pt()),r.callbackNode===l?sx.bind(null,r):null}function np(r,i){var l=ds;return r.current.memoizedState.isDehydrated&&(qo(r,i).flags|=256),r=tl(r,i),r!==2&&(i=jr,jr=l,i!==null&&ip(i)),r}function ip(r){jr===null?jr=r:jr.push.apply(jr,r)}function v5(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var m=0;m<l.length;m++){var g=l[m],S=g.getSnapshot;g=g.value;try{if(!yn(S(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Di(r,i){for(i&=~Jd,i&=~Yu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-qt(i),m=1<<l;r[l]=-1,i&=~m}}function ux(r){if((tt&6)!==0)throw Error(n(327));ma();var i=Si(r,0);if((i&1)===0)return Tr(r,pt()),null;var l=tl(r,i);if(r.tag!==0&&l===2){var m=Or(r);m!==0&&(i=m,l=np(r,m))}if(l===1)throw l=cs,qo(r,0),Di(r,i),Tr(r,pt()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,So(r,jr,ci),Tr(r,pt()),null}function op(r,i){var l=tt;tt|=1;try{return r(i)}finally{tt=l,tt===0&&(fa=pt()+500,Eu&&Ni())}}function bo(r){Li!==null&&Li.tag===0&&(tt&6)===0&&ma();var i=tt;tt|=1;var l=an.transition,m=ot;try{if(an.transition=null,ot=1,r)return r()}finally{ot=m,an.transition=l,tt=i,(tt&6)===0&&Ni()}}function ap(){$r=_a.current,ft(_a)}function qo(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,YE(l)),Ot!==null)for(l=Ot.return;l!==null;){var m=l;switch(md(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Cu();break;case 3:ca(),ft(Mr),ft(lr),Ed();break;case 5:Cd(m);break;case 4:ca();break;case 13:ft(Ct);break;case 19:ft(Ct);break;case 10:wd(m.type._context);break;case 22:case 23:ap()}l=l.return}if(Jt=r,Ot=r=Vi(r.current,null),or=$r=i,Wt=0,cs=null,Jd=Yu=wo=0,jr=ds=null,go!==null){for(i=0;i<go.length;i++)if(l=go[i],m=l.interleaved,m!==null){l.interleaved=null;var g=m.next,S=l.pending;if(S!==null){var A=S.next;S.next=g,m.next=A}l.pending=m}go=null}return r}function lx(r,i){do{var l=Ot;try{if(xd(),Ou.current=Bu,Du){for(var m=Mt.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}Du=!1}if(xo=0,Zt=$t=Mt=null,is=!1,os=0,Zd.current=null,l===null||l.return===null){Wt=1,cs=i,Ot=null;break}e:{var S=r,A=l.return,U=l,ee=i;if(i=or,U.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var _e=ee,be=U,ke=be.tag;if((be.mode&1)===0&&(ke===0||ke===11||ke===15)){var we=be.alternate;we?(be.updateQueue=we.updateQueue,be.memoizedState=we.memoizedState,be.lanes=we.lanes):(be.updateQueue=null,be.memoizedState=null)}var Fe=Rv(A);if(Fe!==null){Fe.flags&=-257,Av(Fe,A,U,S,i),Fe.mode&1&&Pv(S,_e,i),i=Fe,ee=_e;var Oe=i.updateQueue;if(Oe===null){var Ve=new Set;Ve.add(ee),i.updateQueue=Ve}else Oe.add(ee);break e}else{if((i&1)===0){Pv(S,_e,i),sp();break e}ee=Error(n(426))}}else if(ht&&U.mode&1){var Rt=Rv(A);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),Av(Rt,A,U,S,i),gd(da(ee,U));break e}}S=ee=da(ee,U),Wt!==4&&(Wt=2),ds===null?ds=[S]:ds.push(S),S=A;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var se=Tv(S,ee,i);iv(S,se);break e;case 1:U=ee;var ne=S.type,ce=S.stateNode;if((S.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Fi===null||!Fi.has(ce)))){S.flags|=65536,i&=-i,S.lanes|=i;var Me=Nv(S,U,i);iv(S,Me);break e}}S=S.return}while(S!==null)}px(l)}catch(ze){i=ze,Ot===l&&l!==null&&(Ot=l=l.return);continue}break}while(!0)}function cx(){var r=Ku.current;return Ku.current=Bu,r===null?Bu:r}function sp(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Jt===null||(wo&268435455)===0&&(Yu&268435455)===0||Di(Jt,or)}function tl(r,i){var l=tt;tt|=2;var m=cx();(Jt!==r||or!==i)&&(ci=null,qo(r,i));do try{x5();break}catch(g){lx(r,g)}while(!0);if(xd(),tt=l,Ku.current=m,Ot!==null)throw Error(n(261));return Jt=null,or=0,Wt}function x5(){for(;Ot!==null;)dx(Ot)}function w5(){for(;Ot!==null&&!to();)dx(Ot)}function dx(r){var i=mx(r.alternate,r,$r);r.memoizedProps=r.pendingProps,i===null?px(r):Ot=i,Zd.current=null}function px(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=_5(l,i,$r),l!==null){Ot=l;return}}else{if(l=f5(l,i),l!==null){l.flags&=32767,Ot=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Wt=6,Ot=null;return}}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=r}while(i!==null);Wt===0&&(Wt=5)}function So(r,i,l){var m=ot,g=an.transition;try{an.transition=null,ot=1,b5(r,i,l,m)}finally{an.transition=g,ot=m}return null}function b5(r,i,l,m){do ma();while(Li!==null);if((tt&6)!==0)throw Error(n(327));l=r.finishedWork;var g=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var S=l.lanes|l.childLanes;if(ro(r,S),r===Jt&&(Ot=Jt=null,or=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,hx(An,function(){return ma(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=an.transition,an.transition=null;var A=ot;ot=1;var U=tt;tt|=4,Zd.current=null,h5(r,l),rx(l,r),BE(sd),Ko=!!ad,sd=ad=null,r.current=l,y5(l),Xn(),tt=U,ot=A,an.transition=S}else r.current=l;if(Xu&&(Xu=!1,Li=r,Zu=g),S=r.pendingLanes,S===0&&(Fi=null),Zn(l.stateNode),Tr(r,pt()),i!==null)for(m=r.onRecoverableError,l=0;l<i.length;l++)g=i[l],m(g.value,{componentStack:g.stack,digest:g.digest});if(Qu)throw Qu=!1,r=tp,tp=null,r;return(Zu&1)!==0&&r.tag!==0&&ma(),S=r.pendingLanes,(S&1)!==0?r===rp?ps++:(ps=0,rp=r):ps=0,Ni(),null}function ma(){if(Li!==null){var r=no(Zu),i=an.transition,l=ot;try{if(an.transition=null,ot=16>r?16:r,Li===null)var m=!1;else{if(r=Li,Li=null,Zu=0,(tt&6)!==0)throw Error(n(331));var g=tt;for(tt|=4,Le=r.current;Le!==null;){var S=Le,A=S.child;if((Le.flags&16)!==0){var U=S.deletions;if(U!==null){for(var ee=0;ee<U.length;ee++){var _e=U[ee];for(Le=_e;Le!==null;){var be=Le;switch(be.tag){case 0:case 11:case 15:ls(8,be,S)}var ke=be.child;if(ke!==null)ke.return=be,Le=ke;else for(;Le!==null;){be=Le;var we=be.sibling,Fe=be.return;if(Xv(be),be===_e){Le=null;break}if(we!==null){we.return=Fe,Le=we;break}Le=Fe}}}var Oe=S.alternate;if(Oe!==null){var Ve=Oe.child;if(Ve!==null){Oe.child=null;do{var Rt=Ve.sibling;Ve.sibling=null,Ve=Rt}while(Ve!==null)}}Le=S}}if((S.subtreeFlags&2064)!==0&&A!==null)A.return=S,Le=A;else e:for(;Le!==null;){if(S=Le,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:ls(9,S,S.return)}var se=S.sibling;if(se!==null){se.return=S.return,Le=se;break e}Le=S.return}}var ne=r.current;for(Le=ne;Le!==null;){A=Le;var ce=A.child;if((A.subtreeFlags&2064)!==0&&ce!==null)ce.return=A,Le=ce;else e:for(A=ne;Le!==null;){if(U=Le,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Gu(9,U)}}catch(ze){Tt(U,U.return,ze)}if(U===A){Le=null;break e}var Me=U.sibling;if(Me!==null){Me.return=U.return,Le=Me;break e}Le=U.return}}if(tt=g,Ni(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(gr,r)}catch{}m=!0}return m}finally{ot=l,an.transition=i}}return!1}function _x(r,i,l){i=da(l,i),i=Tv(r,i,1),r=Ri(r,i,1),i=Sr(),r!==null&&(Jr(r,1,i),Tr(r,i))}function Tt(r,i,l){if(r.tag===3)_x(r,r,l);else for(;i!==null;){if(i.tag===3){_x(i,r,l);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fi===null||!Fi.has(m))){r=da(l,r),r=Nv(i,r,1),i=Ri(i,r,1),r=Sr(),i!==null&&(Jr(i,1,r),Tr(i,r));break}}i=i.return}}function q5(r,i,l){var m=r.pingCache;m!==null&&m.delete(i),i=Sr(),r.pingedLanes|=r.suspendedLanes&l,Jt===r&&(or&l)===l&&(Wt===4||Wt===3&&(or&130023424)===or&&500>pt()-ep?qo(r,0):Jd|=l),Tr(r,i)}function fx(r,i){i===0&&((r.mode&1)===0?i=1:(i=Ln,Ln<<=1,(Ln&130023424)===0&&(Ln=4194304)));var l=Sr();r=si(r,i),r!==null&&(Jr(r,i,l),Tr(r,l))}function S5(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),fx(r,l)}function k5(r,i){var l=0;switch(r.tag){case 13:var m=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(i),fx(r,l)}var mx;mx=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||Mr.current)Ir=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return Ir=!1,p5(r,i,l);Ir=(r.flags&131072)!==0}else Ir=!1,ht&&(i.flags&1048576)!==0&&Kg(i,ju,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Wu(r,i),r=i.pendingProps;var g=na(i,lr.current);la(i,l),g=Td(null,i,m,r,g,l);var S=Nd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Er(m)?(S=!0,Mu(i)):S=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Sd(i),g.updater=Hu,i.stateNode=g,g._reactInternals=i,Od(i,m,r,l),i=Bd(null,i,m,!0,S,l)):(i.tag=0,ht&&S&&fd(i),qr(null,i,g,l),i=i.child),i;case 16:m=i.elementType;e:{switch(Wu(r,i),r=i.pendingProps,g=m._init,m=g(m._payload),i.type=m,g=i.tag=M5(m),r=vn(m,r),g){case 0:i=zd(null,i,m,r,l);break e;case 1:i=zv(null,i,m,r,l);break e;case 11:i=Fv(null,i,m,r,l);break e;case 14:i=Lv(null,i,m,vn(m.type,r),l);break e}throw Error(n(306,m,""))}return i;case 0:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:vn(m,g),zd(r,i,m,g,l);case 1:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:vn(m,g),zv(r,i,m,g,l);case 3:e:{if(Bv(i),r===null)throw Error(n(387));m=i.pendingProps,S=i.memoizedState,g=S.element,nv(r,i),Fu(i,m,null,l);var A=i.memoizedState;if(m=A.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){g=da(Error(n(423)),i),i=Hv(r,i,m,l,g);break e}else if(m!==g){g=da(Error(n(424)),i),i=Hv(r,i,m,l,g);break e}else for(Hr=Ii(i.stateNode.containerInfo.firstChild),Br=i,ht=!0,gn=null,l=tv(i,null,m,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(aa(),m===g){i=li(r,i,l);break e}qr(r,i,m,l)}i=i.child}return i;case 5:return av(i),r===null&&yd(i),m=i.type,g=i.pendingProps,S=r!==null?r.memoizedProps:null,A=g.children,ud(m,g)?A=null:S!==null&&ud(m,S)&&(i.flags|=32),Vv(r,i),qr(r,i,A,l),i.child;case 6:return r===null&&yd(i),null;case 13:return $v(r,i,l);case 4:return kd(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=sa(i,null,m,l):qr(r,i,m,l),i.child;case 11:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:vn(m,g),Fv(r,i,m,g,l);case 7:return qr(r,i,i.pendingProps,l),i.child;case 8:return qr(r,i,i.pendingProps.children,l),i.child;case 12:return qr(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(m=i.type._context,g=i.pendingProps,S=i.memoizedProps,A=g.value,ct(Pu,m._currentValue),m._currentValue=A,S!==null)if(yn(S.value,A)){if(S.children===g.children&&!Mr.current){i=li(r,i,l);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var U=S.dependencies;if(U!==null){A=S.child;for(var ee=U.firstContext;ee!==null;){if(ee.context===m){if(S.tag===1){ee=ui(-1,l&-l),ee.tag=2;var _e=S.updateQueue;if(_e!==null){_e=_e.shared;var be=_e.pending;be===null?ee.next=ee:(ee.next=be.next,be.next=ee),_e.pending=ee}}S.lanes|=l,ee=S.alternate,ee!==null&&(ee.lanes|=l),bd(S.return,l,i),U.lanes|=l;break}ee=ee.next}}else if(S.tag===10)A=S.type===i.type?null:S.child;else if(S.tag===18){if(A=S.return,A===null)throw Error(n(341));A.lanes|=l,U=A.alternate,U!==null&&(U.lanes|=l),bd(A,l,i),A=S.sibling}else A=S.child;if(A!==null)A.return=S;else for(A=S;A!==null;){if(A===i){A=null;break}if(S=A.sibling,S!==null){S.return=A.return,A=S;break}A=A.return}S=A}qr(r,i,g.children,l),i=i.child}return i;case 9:return g=i.type,m=i.pendingProps.children,la(i,l),g=nn(g),m=m(g),i.flags|=1,qr(r,i,m,l),i.child;case 14:return m=i.type,g=vn(m,i.pendingProps),g=vn(m.type,g),Lv(r,i,m,g,l);case 15:return Ov(r,i,i.type,i.pendingProps,l);case 17:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:vn(m,g),Wu(r,i),i.tag=1,Er(m)?(r=!0,Mu(i)):r=!1,la(i,l),Iv(i,m,g),Od(i,m,g,l),Bd(null,i,m,!0,r,l);case 19:return Uv(r,i,l);case 22:return Dv(r,i,l)}throw Error(n(156,i.tag))};function hx(r,i){return xi(r,i)}function C5(r,i,l,m){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(r,i,l,m){return new C5(r,i,l,m)}function up(r){return r=r.prototype,!(!r||!r.isReactComponent)}function M5(r){if(typeof r=="function")return up(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===G)return 14}return 2}function Vi(r,i){var l=r.alternate;return l===null?(l=sn(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rl(r,i,l,m,g,S){var A=2;if(m=r,typeof r=="function")up(r)&&(A=1);else if(typeof r=="string")A=5;else e:switch(r){case T:return ko(l.children,g,S,i);case R:A=8,g|=8;break;case P:return r=sn(12,l,i,g|2),r.elementType=P,r.lanes=S,r;case X:return r=sn(13,l,i,g),r.elementType=X,r.lanes=S,r;case N:return r=sn(19,l,i,g),r.elementType=N,r.lanes=S,r;case re:return nl(l,g,S,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:A=10;break e;case F:A=9;break e;case D:A=11;break e;case G:A=14;break e;case $:A=16,m=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=sn(A,l,i,g),i.elementType=r,i.type=m,i.lanes=S,i}function ko(r,i,l,m){return r=sn(7,r,m,i),r.lanes=l,r}function nl(r,i,l,m){return r=sn(22,r,m,i),r.elementType=re,r.lanes=l,r.stateNode={isHidden:!1},r}function lp(r,i,l){return r=sn(6,r,null,i),r.lanes=l,r}function cp(r,i,l){return i=sn(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function E5(r,i,l,m,g){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dr(0),this.expirationTimes=Dr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dr(0),this.identifierPrefix=m,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function dp(r,i,l,m,g,S,A,U,ee){return r=new E5(r,i,l,U,ee),i===1?(i=1,S===!0&&(i|=8)):i=0,S=sn(3,null,null,i),r.current=S,S.stateNode=r,S.memoizedState={element:m,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(S),r}function I5(r,i,l){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:m==null?null:""+m,children:r,containerInfo:i,implementation:l}}function yx(r){if(!r)return Ti;r=r._reactInternals;e:{if(jt(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Er(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(Er(l))return Wg(r,l,i)}return i}function gx(r,i,l,m,g,S,A,U,ee){return r=dp(l,m,!0,r,g,S,A,U,ee),r.context=yx(null),l=r.current,m=Sr(),g=Oi(l),S=ui(m,g),S.callback=i??null,Ri(l,S,g),r.current.lanes=g,Jr(r,g,m),Tr(r,m),r}function il(r,i,l,m){var g=i.current,S=Sr(),A=Oi(g);return l=yx(l),i.context===null?i.context=l:i.pendingContext=l,i=ui(S,A),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=Ri(g,i,A),r!==null&&(bn(r,g,A,S),Au(r,g,A)),A}function ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function vx(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function pp(r,i){vx(r,i),(r=r.alternate)&&vx(r,i)}function j5(){return null}var xx=typeof reportError=="function"?reportError:function(r){console.error(r)};function _p(r){this._internalRoot=r}al.prototype.render=_p.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));il(r,i,null,null)},al.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;bo(function(){il(null,r,null,null)}),i[ni]=null}};function al(r){this._internalRoot=r}al.prototype.unstable_scheduleHydration=function(r){if(r){var i=He();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Ht.length&&i!==0&&i<Ht[l].priority;l++);Ht.splice(l,0,r),l===0&&uu(r)}};function fp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function sl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function wx(){}function T5(r,i,l,m,g){if(g){if(typeof m=="function"){var S=m;m=function(){var _e=ol(A);S.call(_e)}}var A=gx(i,m,r,0,null,!1,!1,"",wx);return r._reactRootContainer=A,r[ni]=A.current,Qa(r.nodeType===8?r.parentNode:r),bo(),A}for(;g=r.lastChild;)r.removeChild(g);if(typeof m=="function"){var U=m;m=function(){var _e=ol(ee);U.call(_e)}}var ee=dp(r,0,!1,null,null,!1,!1,"",wx);return r._reactRootContainer=ee,r[ni]=ee.current,Qa(r.nodeType===8?r.parentNode:r),bo(function(){il(i,ee,l,m)}),ee}function ul(r,i,l,m,g){var S=l._reactRootContainer;if(S){var A=S;if(typeof g=="function"){var U=g;g=function(){var ee=ol(A);U.call(ee)}}il(i,A,r,g)}else A=T5(l,i,r,g,m);return ol(A)}Oa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=vr(i.pendingLanes);l!==0&&(We(i,l|1),Tr(i,pt()),(tt&6)===0&&(fa=pt()+500,Ni()))}break;case 13:bo(function(){var m=si(r,1);if(m!==null){var g=Sr();bn(m,r,1,g)}}),pp(r,1)}},io=function(r){if(r.tag===13){var i=si(r,134217728);if(i!==null){var l=Sr();bn(i,r,134217728,l)}pp(r,134217728)}},Ho=function(r){if(r.tag===13){var i=Oi(r),l=si(r,i);if(l!==null){var m=Sr();bn(l,r,i,m)}pp(r,i)}},He=function(){return ot},Da=function(r,i){var l=ot;try{return ot=r,i()}finally{ot=l}},Fr=function(r,i,l){switch(i){case"input":if(Be(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var m=l[i];if(m!==r&&m.form===r.form){var g=ku(m);if(!g)throw Error(n(90));je(m),Be(m,g)}}}break;case"textarea":Cr(r,l);break;case"select":i=l.value,i!=null&&wt(r,!!l.multiple,i,!1)}},nr=op,Kt=bo;var N5={usingClientEntryPoint:!1,Events:[Ja,ta,ku,Pn,Ft,op]},_s={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P5={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=eo(r),r===null?null:r.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||j5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{gr=ll.inject(P5),Lt=ll}catch{}}return Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N5,Nr.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(i))throw Error(n(200));return I5(r,i,null,l)},Nr.createRoot=function(r,i){if(!fp(r))throw Error(n(299));var l=!1,m="",g=xx;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=dp(r,1,!1,null,null,l,!1,m,g),r[ni]=i.current,Qa(r.nodeType===8?r.parentNode:r),new _p(i)},Nr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=eo(i),r=r===null?null:r.stateNode,r},Nr.flushSync=function(r){return bo(r)},Nr.hydrate=function(r,i,l){if(!sl(i))throw Error(n(200));return ul(null,r,i,!0,l)},Nr.hydrateRoot=function(r,i,l){if(!fp(r))throw Error(n(405));var m=l!=null&&l.hydratedSources||null,g=!1,S="",A=xx;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),i=gx(i,null,r,1,l??null,g,!1,S,A),r[ni]=i.current,Qa(r),m)for(r=0;r<m.length;r++)l=m[r],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new al(i)},Nr.render=function(r,i,l){if(!sl(i))throw Error(n(200));return ul(null,r,i,!1,l)},Nr.unmountComponentAtNode=function(r){if(!sl(r))throw Error(n(40));return r._reactRootContainer?(bo(function(){ul(null,null,r,!1,function(){r._reactRootContainer=null,r[ni]=null})}),!0):!1},Nr.unstable_batchedUpdates=op,Nr.unstable_renderSubtreeIntoContainer=function(r,i,l,m){if(!sl(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ul(r,i,l,!1,m)},Nr.version="18.3.1-next-f1338f8080-20240426",Nr}var Ix;function Ek(){if(Ix)return yp.exports;Ix=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yp.exports=V5(),yp.exports}var jx;function z5(){if(jx)return dl;jx=1;var e=Ek();return dl.createRoot=e.createRoot,dl.hydrateRoot=e.hydrateRoot,dl}var B5=z5();const H5=Ws(B5);function Dt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=Dt(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var $5={value:()=>{}};function sc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Il(n)}function Il(e){this._=e}function W5(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Il.prototype=sc.prototype={constructor:Il,on:function(e,t){var n=this._,o=W5(e+"",n),a,s=-1,u=o.length;if(arguments.length<2){for(;++s<u;)if((a=(e=o[s]).type)&&(a=U5(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=o[s]).type)n[a]=Tx(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Tx(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Il(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,s;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,a=s.length;o<a;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,s=o.length;a<s;++a)o[a].value.apply(t,n)}};function U5(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Tx(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=$5,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var e0="http://www.w3.org/1999/xhtml";const Nx={svg:"http://www.w3.org/2000/svg",xhtml:e0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nx.hasOwnProperty(t)?{space:Nx[t],local:e}:e}function G5(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===e0&&t.documentElement.namespaceURI===e0?t.createElement(e):t.createElementNS(n,e)}}function K5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ik(e){var t=uc(e);return(t.local?K5:G5)(t)}function Y5(){}function T0(e){return e==null?Y5:function(){return this.querySelector(e)}}function Q5(e){typeof e!="function"&&(e=T0(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=new Array(u),p,_,h=0;h<u;++h)(p=s[h])&&(_=e.call(p,p.__data__,h,s))&&("__data__"in p&&(_.__data__=p.__data__),c[h]=_);return new Yr(o,this._parents)}function X5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Z5(){return[]}function jk(e){return e==null?Z5:function(){return this.querySelectorAll(e)}}function J5(e){return function(){return X5(e.apply(this,arguments))}}function eI(e){typeof e=="function"?e=J5(e):e=jk(e);for(var t=this._groups,n=t.length,o=[],a=[],s=0;s<n;++s)for(var u=t[s],c=u.length,p,_=0;_<c;++_)(p=u[_])&&(o.push(e.call(p,p.__data__,_,u)),a.push(p));return new Yr(o,a)}function Tk(e){return function(){return this.matches(e)}}function Nk(e){return function(t){return t.matches(e)}}var tI=Array.prototype.find;function rI(e){return function(){return tI.call(this.children,e)}}function nI(){return this.firstElementChild}function iI(e){return this.select(e==null?nI:rI(typeof e=="function"?e:Nk(e)))}var oI=Array.prototype.filter;function aI(){return Array.from(this.children)}function sI(e){return function(){return oI.call(this.children,e)}}function uI(e){return this.selectAll(e==null?aI:sI(typeof e=="function"?e:Nk(e)))}function lI(e){typeof e!="function"&&(e=Tk(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=[],p,_=0;_<u;++_)(p=s[_])&&e.call(p,p.__data__,_,s)&&c.push(p);return new Yr(o,this._parents)}function Pk(e){return new Array(e.length)}function cI(){return new Yr(this._enter||this._groups.map(Pk),this._parents)}function Ll(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ll.prototype={constructor:Ll,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dI(e){return function(){return e}}function pI(e,t,n,o,a,s){for(var u=0,c,p=t.length,_=s.length;u<_;++u)(c=t[u])?(c.__data__=s[u],o[u]=c):n[u]=new Ll(e,s[u]);for(;u<p;++u)(c=t[u])&&(a[u]=c)}function _I(e,t,n,o,a,s,u){var c,p,_=new Map,h=t.length,f=s.length,y=new Array(h),v;for(c=0;c<h;++c)(p=t[c])&&(y[c]=v=u.call(p,p.__data__,c,t)+"",_.has(v)?a[c]=p:_.set(v,p));for(c=0;c<f;++c)v=u.call(e,s[c],c,s)+"",(p=_.get(v))?(o[c]=p,p.__data__=s[c],_.delete(v)):n[c]=new Ll(e,s[c]);for(c=0;c<h;++c)(p=t[c])&&_.get(y[c])===p&&(a[c]=p)}function fI(e){return e.__data__}function mI(e,t){if(!arguments.length)return Array.from(this,fI);var n=t?_I:pI,o=this._parents,a=this._groups;typeof e!="function"&&(e=dI(e));for(var s=a.length,u=new Array(s),c=new Array(s),p=new Array(s),_=0;_<s;++_){var h=o[_],f=a[_],y=f.length,v=hI(e.call(h,h&&h.__data__,_,o)),x=v.length,k=c[_]=new Array(x),w=u[_]=new Array(x),b=p[_]=new Array(y);n(h,f,k,w,b,v,t);for(var E=0,q=0,M,I;E<x;++E)if(M=k[E]){for(E>=q&&(q=E+1);!(I=w[q])&&++q<x;);M._next=I||null}}return u=new Yr(u,o),u._enter=c,u._exit=p,u}function hI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yI(){return new Yr(this._exit||this._groups.map(Pk),this._parents)}function gI(e,t,n){var o=this.enter(),a=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),o&&a?o.merge(a).order():a}function vI(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,s=o.length,u=Math.min(a,s),c=new Array(a),p=0;p<u;++p)for(var _=n[p],h=o[p],f=_.length,y=c[p]=new Array(f),v,x=0;x<f;++x)(v=_[x]||h[x])&&(y[x]=v);for(;p<a;++p)c[p]=n[p];return new Yr(c,this._parents)}function xI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,s=o[a],u;--a>=0;)(u=o[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function wI(e){e||(e=bI);function t(f,y){return f&&y?e(f.__data__,y.__data__):!f-!y}for(var n=this._groups,o=n.length,a=new Array(o),s=0;s<o;++s){for(var u=n[s],c=u.length,p=a[s]=new Array(c),_,h=0;h<c;++h)(_=u[h])&&(p[h]=_);p.sort(t)}return new Yr(a,this._parents).order()}function bI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function SI(){return Array.from(this)}function kI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,s=o.length;a<s;++a){var u=o[a];if(u)return u}return null}function CI(){let e=0;for(const t of this)++e;return e}function MI(){return!this.node()}function EI(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],s=0,u=a.length,c;s<u;++s)(c=a[s])&&e.call(c,c.__data__,s,a);return this}function II(e){return function(){this.removeAttribute(e)}}function jI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TI(e,t){return function(){this.setAttribute(e,t)}}function NI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function PI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function RI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function AI(e,t){var n=uc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?jI:II:typeof t=="function"?n.local?RI:PI:n.local?NI:TI)(n,t))}function Rk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function FI(e){return function(){this.style.removeProperty(e)}}function LI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function OI(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function DI(e,t,n){return arguments.length>1?this.each((t==null?FI:typeof t=="function"?OI:LI)(e,t,n??"")):ba(this.node(),e)}function ba(e,t){return e.style.getPropertyValue(t)||Rk(e).getComputedStyle(e,null).getPropertyValue(t)}function VI(e){return function(){delete this[e]}}function zI(e,t){return function(){this[e]=t}}function BI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function HI(e,t){return arguments.length>1?this.each((t==null?VI:typeof t=="function"?BI:zI)(e,t)):this.node()[e]}function Ak(e){return e.trim().split(/^|\s+/)}function N0(e){return e.classList||new Fk(e)}function Fk(e){this._node=e,this._names=Ak(e.getAttribute("class")||"")}Fk.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lk(e,t){for(var n=N0(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Ok(e,t){for(var n=N0(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function $I(e){return function(){Lk(this,e)}}function WI(e){return function(){Ok(this,e)}}function UI(e,t){return function(){(t.apply(this,arguments)?Lk:Ok)(this,e)}}function GI(e,t){var n=Ak(e+"");if(arguments.length<2){for(var o=N0(this.node()),a=-1,s=n.length;++a<s;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?UI:t?$I:WI)(n,t))}function KI(){this.textContent=""}function YI(e){return function(){this.textContent=e}}function QI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XI(e){return arguments.length?this.each(e==null?KI:(typeof e=="function"?QI:YI)(e)):this.node().textContent}function ZI(){this.innerHTML=""}function JI(e){return function(){this.innerHTML=e}}function ej(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tj(e){return arguments.length?this.each(e==null?ZI:(typeof e=="function"?ej:JI)(e)):this.node().innerHTML}function rj(){this.nextSibling&&this.parentNode.appendChild(this)}function nj(){return this.each(rj)}function ij(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oj(){return this.each(ij)}function aj(e){var t=typeof e=="function"?e:Ik(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sj(){return null}function uj(e,t){var n=typeof e=="function"?e:Ik(e),o=t==null?sj:typeof t=="function"?t:T0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function lj(){var e=this.parentNode;e&&e.removeChild(this)}function cj(){return this.each(lj)}function dj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _j(e){return this.select(e?pj:dj)}function fj(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mj(e){return function(t){e.call(this,t,this.__data__)}}function hj(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function yj(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function gj(e,t,n){return function(){var o=this.__on,a,s=mj(t);if(o){for(var u=0,c=o.length;u<c;++u)if((a=o[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(a):this.__on=[a]}}function vj(e,t,n){var o=hj(e+""),a,s=o.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var p=0,_=c.length,h;p<_;++p)for(a=0,h=c[p];a<s;++a)if((u=o[a]).type===h.type&&u.name===h.name)return h.value}return}for(c=t?gj:yj,a=0;a<s;++a)this.each(c(o[a],t,n));return this}function Dk(e,t,n){var o=Rk(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function xj(e,t){return function(){return Dk(this,e,t)}}function wj(e,t){return function(){return Dk(this,e,t.apply(this,arguments))}}function bj(e,t){return this.each((typeof t=="function"?wj:xj)(e,t))}function*qj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,s=o.length,u;a<s;++a)(u=o[a])&&(yield u)}var Vk=[null];function Yr(e,t){this._groups=e,this._parents=t}function Gs(){return new Yr([[document.documentElement]],Vk)}function Sj(){return this}Yr.prototype=Gs.prototype={constructor:Yr,select:Q5,selectAll:eI,selectChild:iI,selectChildren:uI,filter:lI,data:mI,enter:cI,exit:yI,join:gI,merge:vI,selection:Sj,order:xI,sort:wI,call:qI,nodes:SI,node:kI,size:CI,empty:MI,each:EI,attr:AI,style:DI,property:HI,classed:GI,text:XI,html:tj,raise:nj,lower:oj,append:aj,insert:uj,remove:cj,clone:_j,datum:fj,on:vj,dispatch:bj,[Symbol.iterator]:qj};function Gr(e){return typeof e=="string"?new Yr([[document.querySelector(e)]],[document.documentElement]):new Yr([[e]],Vk)}function kj(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Sn(e,t){if(e=kj(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cj={passive:!1},js={capture:!0,passive:!1};function xp(e){e.stopImmediatePropagation()}function va(e){e.preventDefault(),e.stopImmediatePropagation()}function zk(e){var t=e.document.documentElement,n=Gr(e).on("dragstart.drag",va,js);"onselectstart"in t?n.on("selectstart.drag",va,js):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bk(e,t){var n=e.document.documentElement,o=Gr(e).on("dragstart.drag",null);t&&(o.on("click.drag",va,js),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pl=e=>()=>e;function t0(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:s,x:u,y:c,dx:p,dy:_,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:_,enumerable:!0,configurable:!0},_:{value:h}})}t0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mj(e){return!e.ctrlKey&&!e.button}function Ej(){return this.parentNode}function Ij(e,t){return t??{x:e.x,y:e.y}}function jj(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hk(){var e=Mj,t=Ej,n=Ij,o=jj,a={},s=sc("start","drag","end"),u=0,c,p,_,h,f=0;function y(M){M.on("mousedown.drag",v).filter(o).on("touchstart.drag",w).on("touchmove.drag",b,Cj).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,I){if(!(h||!e.call(this,M,I))){var C=q(this,t.call(this,M,I),M,I,"mouse");C&&(Gr(M.view).on("mousemove.drag",x,js).on("mouseup.drag",k,js),zk(M.view),xp(M),_=!1,c=M.clientX,p=M.clientY,C("start",M))}}function x(M){if(va(M),!_){var I=M.clientX-c,C=M.clientY-p;_=I*I+C*C>f}a.mouse("drag",M)}function k(M){Gr(M.view).on("mousemove.drag mouseup.drag",null),Bk(M.view,_),va(M),a.mouse("end",M)}function w(M,I){if(e.call(this,M,I)){var C=M.changedTouches,T=t.call(this,M,I),R=C.length,P,z;for(P=0;P<R;++P)(z=q(this,T,M,I,C[P].identifier,C[P]))&&(xp(M),z("start",M,C[P]))}}function b(M){var I=M.changedTouches,C=I.length,T,R;for(T=0;T<C;++T)(R=a[I[T].identifier])&&(va(M),R("drag",M,I[T]))}function E(M){var I=M.changedTouches,C=I.length,T,R;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),T=0;T<C;++T)(R=a[I[T].identifier])&&(xp(M),R("end",M,I[T]))}function q(M,I,C,T,R,P){var z=s.copy(),F=Sn(P||C,I),D,X,N;if((N=n.call(M,new t0("beforestart",{sourceEvent:C,target:y,identifier:R,active:u,x:F[0],y:F[1],dx:0,dy:0,dispatch:z}),T))!=null)return D=N.x-F[0]||0,X=N.y-F[1]||0,function G($,re,Y){var Q=F,ie;switch($){case"start":a[R]=G,ie=u++;break;case"end":delete a[R],--u;case"drag":F=Sn(Y||re,I),ie=u;break}z.call($,M,new t0($,{sourceEvent:re,subject:N,target:y,identifier:R,active:ie,x:F[0]+D,y:F[1]+X,dx:F[0]-Q[0],dy:F[1]-Q[1],dispatch:z}),T)}}return y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:pl(!!M),y):e},y.container=function(M){return arguments.length?(t=typeof M=="function"?M:pl(M),y):t},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:pl(M),y):n},y.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:pl(!!M),y):o},y.on=function(){var M=s.on.apply(s,arguments);return M===s?y:M},y.clickDistance=function(M){return arguments.length?(f=(M=+M)*M,y):Math.sqrt(f)},y}function P0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $k(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ks(){}var Ts=.7,Ol=1/Ts,xa="\\s*([+-]?\\d+)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tj=/^#([0-9a-f]{3,8})$/,Nj=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),Pj=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),Rj=new RegExp(`^rgba\\(${xa},${xa},${xa},${Ns}\\)$`),Aj=new RegExp(`^rgba\\(${Un},${Un},${Un},${Ns}\\)$`),Fj=new RegExp(`^hsl\\(${Ns},${Un},${Un}\\)$`),Lj=new RegExp(`^hsla\\(${Ns},${Un},${Un},${Ns}\\)$`),Px={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P0(Ks,jo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rx,formatHex:Rx,formatHex8:Oj,formatHsl:Dj,formatRgb:Ax,toString:Ax});function Rx(){return this.rgb().formatHex()}function Oj(){return this.rgb().formatHex8()}function Dj(){return Wk(this).formatHsl()}function Ax(){return this.rgb().formatRgb()}function jo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tj.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fx(t):n===3?new Pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nj.exec(e))?new Pr(t[1],t[2],t[3],1):(t=Pj.exec(e))?new Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rj.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=Aj.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Fj.exec(e))?Dx(t[1],t[2]/100,t[3]/100,1):(t=Lj.exec(e))?Dx(t[1],t[2]/100,t[3]/100,t[4]):Px.hasOwnProperty(e)?Fx(Px[e]):e==="transparent"?new Pr(NaN,NaN,NaN,0):null}function Fx(e){return new Pr(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,o){return o<=0&&(e=t=n=NaN),new Pr(e,t,n,o)}function Vj(e){return e instanceof Ks||(e=jo(e)),e?(e=e.rgb(),new Pr(e.r,e.g,e.b,e.opacity)):new Pr}function r0(e,t,n,o){return arguments.length===1?Vj(e):new Pr(e,t,n,o??1)}function Pr(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}P0(Pr,r0,$k(Ks,{brighter(e){return e=e==null?Ol:Math.pow(Ol,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ts:Math.pow(Ts,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pr(Eo(this.r),Eo(this.g),Eo(this.b),Dl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lx,formatHex:Lx,formatHex8:zj,formatRgb:Ox,toString:Ox}));function Lx(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function zj(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ox(){const e=Dl(this.opacity);return`${e===1?"rgb(":"rgba("}${Eo(this.r)}, ${Eo(this.g)}, ${Eo(this.b)}${e===1?")":`, ${e})`}`}function Dl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Eo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mo(e){return e=Eo(e),(e<16?"0":"")+e.toString(16)}function Dx(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Cn(e,t,n,o)}function Wk(e){if(e instanceof Cn)return new Cn(e.h,e.s,e.l,e.opacity);if(e instanceof Ks||(e=jo(e)),!e)return new Cn;if(e instanceof Cn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),s=Math.max(t,n,o),u=NaN,c=s-a,p=(s+a)/2;return c?(t===s?u=(n-o)/c+(n<o)*6:n===s?u=(o-t)/c+2:u=(t-n)/c+4,c/=p<.5?s+a:2-s-a,u*=60):c=p>0&&p<1?0:u,new Cn(u,c,p,e.opacity)}function Bj(e,t,n,o){return arguments.length===1?Wk(e):new Cn(e,t,n,o??1)}function Cn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}P0(Cn,Bj,$k(Ks,{brighter(e){return e=e==null?Ol:Math.pow(Ol,e),new Cn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ts:Math.pow(Ts,e),new Cn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new Pr(wp(e>=240?e-240:e+120,a,o),wp(e,a,o),wp(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Cn(Vx(this.h),fl(this.s),fl(this.l),Dl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dl(this.opacity);return`${e===1?"hsl(":"hsla("}${Vx(this.h)}, ${fl(this.s)*100}%, ${fl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vx(e){return e=(e||0)%360,e<0?e+360:e}function fl(e){return Math.max(0,Math.min(1,e||0))}function wp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const R0=e=>()=>e;function Hj(e,t){return function(n){return e+n*t}}function $j(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Wj(e){return(e=+e)==1?Uk:function(t,n){return n-t?$j(t,n,e):R0(isNaN(t)?n:t)}}function Uk(e,t){var n=t-e;return n?Hj(e,n):R0(isNaN(e)?t:e)}const Vl=(function e(t){var n=Wj(t);function o(a,s){var u=n((a=r0(a)).r,(s=r0(s)).r),c=n(a.g,s.g),p=n(a.b,s.b),_=Uk(a.opacity,s.opacity);return function(h){return a.r=u(h),a.g=c(h),a.b=p(h),a.opacity=_(h),a+""}}return o.gamma=e,o})(1);function Uj(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),a;return function(s){for(a=0;a<n;++a)o[a]=e[a]*(1-s)+t[a]*s;return o}}function Gj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Kj(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,a=new Array(o),s=new Array(n),u;for(u=0;u<o;++u)a[u]=Ss(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(c){for(u=0;u<o;++u)s[u]=a[u](c);return s}}function Yj(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function $n(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Qj(e,t){var n={},o={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Ss(e[a],t[a]):o[a]=t[a];return function(s){for(a in n)o[a]=n[a](s);return o}}var n0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bp=new RegExp(n0.source,"g");function Xj(e){return function(){return e}}function Zj(e){return function(t){return e(t)+""}}function Gk(e,t){var n=n0.lastIndex=bp.lastIndex=0,o,a,s,u=-1,c=[],p=[];for(e=e+"",t=t+"";(o=n0.exec(e))&&(a=bp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),c[u]?c[u]+=s:c[++u]=s),(o=o[0])===(a=a[0])?c[u]?c[u]+=a:c[++u]=a:(c[++u]=null,p.push({i:u,x:$n(o,a)})),n=bp.lastIndex;return n<t.length&&(s=t.slice(n),c[u]?c[u]+=s:c[++u]=s),c.length<2?p[0]?Zj(p[0].x):Xj(t):(t=p.length,function(_){for(var h=0,f;h<t;++h)c[(f=p[h]).i]=f.x(_);return c.join("")})}function Ss(e,t){var n=typeof t,o;return t==null||n==="boolean"?R0(t):(n==="number"?$n:n==="string"?(o=jo(t))?(t=o,Vl):Gk:t instanceof jo?Vl:t instanceof Date?Yj:Gj(t)?Uj:Array.isArray(t)?Kj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Qj:$n)(e,t)}var zx=180/Math.PI,i0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kk(e,t,n,o,a,s){var u,c,p;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(p=e*n+t*o)&&(n-=e*p,o-=t*p),(c=Math.sqrt(n*n+o*o))&&(n/=c,o/=c,p/=c),e*o<t*n&&(e=-e,t=-t,p=-p,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*zx,skewX:Math.atan(p)*zx,scaleX:u,scaleY:c}}var ml;function Jj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?i0:Kk(t.a,t.b,t.c,t.d,t.e,t.f)}function eT(e){return e==null||(ml||(ml=document.createElementNS("http://www.w3.org/2000/svg","g")),ml.setAttribute("transform",e),!(e=ml.transform.baseVal.consolidate()))?i0:(e=e.matrix,Kk(e.a,e.b,e.c,e.d,e.e,e.f))}function Yk(e,t,n,o){function a(_){return _.length?_.pop()+" ":""}function s(_,h,f,y,v,x){if(_!==f||h!==y){var k=v.push("translate(",null,t,null,n);x.push({i:k-4,x:$n(_,f)},{i:k-2,x:$n(h,y)})}else(f||y)&&v.push("translate("+f+t+y+n)}function u(_,h,f,y){_!==h?(_-h>180?h+=360:h-_>180&&(_+=360),y.push({i:f.push(a(f)+"rotate(",null,o)-2,x:$n(_,h)})):h&&f.push(a(f)+"rotate("+h+o)}function c(_,h,f,y){_!==h?y.push({i:f.push(a(f)+"skewX(",null,o)-2,x:$n(_,h)}):h&&f.push(a(f)+"skewX("+h+o)}function p(_,h,f,y,v,x){if(_!==f||h!==y){var k=v.push(a(v)+"scale(",null,",",null,")");x.push({i:k-4,x:$n(_,f)},{i:k-2,x:$n(h,y)})}else(f!==1||y!==1)&&v.push(a(v)+"scale("+f+","+y+")")}return function(_,h){var f=[],y=[];return _=e(_),h=e(h),s(_.translateX,_.translateY,h.translateX,h.translateY,f,y),u(_.rotate,h.rotate,f,y),c(_.skewX,h.skewX,f,y),p(_.scaleX,_.scaleY,h.scaleX,h.scaleY,f,y),_=h=null,function(v){for(var x=-1,k=y.length,w;++x<k;)f[(w=y[x]).i]=w.x(v);return f.join("")}}}var tT=Yk(Jj,"px, ","px)","deg)"),rT=Yk(eT,", ",")",")"),nT=1e-12;function Bx(e){return((e=Math.exp(e))+1/e)/2}function iT(e){return((e=Math.exp(e))-1/e)/2}function oT(e){return((e=Math.exp(2*e))-1)/(e+1)}const jl=(function e(t,n,o){function a(s,u){var c=s[0],p=s[1],_=s[2],h=u[0],f=u[1],y=u[2],v=h-c,x=f-p,k=v*v+x*x,w,b;if(k<nT)b=Math.log(y/_)/t,w=function(T){return[c+T*v,p+T*x,_*Math.exp(t*T*b)]};else{var E=Math.sqrt(k),q=(y*y-_*_+o*k)/(2*_*n*E),M=(y*y-_*_-o*k)/(2*y*n*E),I=Math.log(Math.sqrt(q*q+1)-q),C=Math.log(Math.sqrt(M*M+1)-M);b=(C-I)/t,w=function(T){var R=T*b,P=Bx(I),z=_/(n*E)*(P*oT(t*R+I)-iT(I));return[c+z*v,p+z*x,_*P/Bx(t*R+I)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return a.rho=function(s){var u=Math.max(.001,+s),c=u*u,p=c*c;return e(u,c,p)},a})(Math.SQRT2,2,4);var qa=0,vs=0,ms=0,Qk=1e3,zl,xs,Bl=0,To=0,lc=0,Ps=typeof performance=="object"&&performance.now?performance:Date,Xk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function A0(){return To||(Xk(aT),To=Ps.now()+lc)}function aT(){To=0}function Hl(){this._call=this._time=this._next=null}Hl.prototype=Zk.prototype={constructor:Hl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?A0():+n)+(t==null?0:+t),!this._next&&xs!==this&&(xs?xs._next=this:zl=this,xs=this),this._call=e,this._time=n,o0()},stop:function(){this._call&&(this._call=null,this._time=1/0,o0())}};function Zk(e,t,n){var o=new Hl;return o.restart(e,t,n),o}function sT(){A0(),++qa;for(var e=zl,t;e;)(t=To-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qa}function Hx(){To=(Bl=Ps.now())+lc,qa=vs=0;try{sT()}finally{qa=0,lT(),To=0}}function uT(){var e=Ps.now(),t=e-Bl;t>Qk&&(lc-=t,Bl=e)}function lT(){for(var e,t=zl,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zl=n);xs=e,o0(o)}function o0(e){if(!qa){vs&&(vs=clearTimeout(vs));var t=e-To;t>24?(e<1/0&&(vs=setTimeout(Hx,e-Ps.now()-lc)),ms&&(ms=clearInterval(ms))):(ms||(Bl=Ps.now(),ms=setInterval(uT,Qk)),qa=1,Xk(Hx))}}function $x(e,t,n){var o=new Hl;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var cT=sc("start","end","cancel","interrupt"),dT=[],Jk=0,Wx=1,a0=2,Tl=3,Ux=4,s0=5,Nl=6;function cc(e,t,n,o,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;pT(e,n,{name:t,index:o,group:a,on:cT,tween:dT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Jk})}function F0(e,t){var n=Tn(e,t);if(n.state>Jk)throw new Error("too late; already scheduled");return n}function Kn(e,t){var n=Tn(e,t);if(n.state>Tl)throw new Error("too late; already running");return n}function Tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pT(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=Zk(s,0,n.time);function s(_){n.state=Wx,n.timer.restart(u,n.delay,n.time),n.delay<=_&&u(_-n.delay)}function u(_){var h,f,y,v;if(n.state!==Wx)return p();for(h in o)if(v=o[h],v.name===n.name){if(v.state===Tl)return $x(u);v.state===Ux?(v.state=Nl,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete o[h]):+h<t&&(v.state=Nl,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete o[h])}if($x(function(){n.state===Tl&&(n.state=Ux,n.timer.restart(c,n.delay,n.time),c(_))}),n.state=a0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===a0){for(n.state=Tl,a=new Array(y=n.tween.length),h=0,f=-1;h<y;++h)(v=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=v);a.length=f+1}}function c(_){for(var h=_<n.duration?n.ease.call(null,_/n.duration):(n.timer.restart(p),n.state=s0,1),f=-1,y=a.length;++f<y;)a[f].call(e,h);n.state===s0&&(n.on.call("end",e,e.__data__,n.index,n.group),p())}function p(){n.state=Nl,n.timer.stop(),delete o[t];for(var _ in o)return;delete e.__transition}}function Pl(e,t){var n=e.__transition,o,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((o=n[u]).name!==t){s=!1;continue}a=o.state>a0&&o.state<s0,o.state=Nl,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[u]}s&&delete e.__transition}}function _T(e){return this.each(function(){Pl(this,e)})}function fT(e,t){var n,o;return function(){var a=Kn(this,e),s=a.tween;if(s!==n){o=n=s;for(var u=0,c=o.length;u<c;++u)if(o[u].name===t){o=o.slice(),o.splice(u,1);break}}a.tween=o}}function mT(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var s=Kn(this,e),u=s.tween;if(u!==o){a=(o=u).slice();for(var c={name:t,value:n},p=0,_=a.length;p<_;++p)if(a[p].name===t){a[p]=c;break}p===_&&a.push(c)}s.tween=a}}function hT(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Tn(this.node(),n).tween,a=0,s=o.length,u;a<s;++a)if((u=o[a]).name===e)return u.value;return null}return this.each((t==null?fT:mT)(n,e,t))}function L0(e,t,n){var o=e._id;return e.each(function(){var a=Kn(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Tn(a,o).value[t]}}function eC(e,t){var n;return(typeof t=="number"?$n:t instanceof jo?Vl:(n=jo(t))?(t=n,Vl):Gk)(e,t)}function yT(e){return function(){this.removeAttribute(e)}}function gT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vT(e,t,n){var o,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===o?s:s=t(o=u,n)}}function xT(e,t,n){var o,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===o?s:s=t(o=u,n)}}function wT(e,t,n){var o,a,s;return function(){var u,c=n(this),p;return c==null?void this.removeAttribute(e):(u=this.getAttribute(e),p=c+"",u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c)))}}function bT(e,t,n){var o,a,s;return function(){var u,c=n(this),p;return c==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),p=c+"",u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c)))}}function qT(e,t){var n=uc(e),o=n==="transform"?rT:eC;return this.attrTween(e,typeof t=="function"?(n.local?bT:wT)(n,o,L0(this,"attr."+e,t)):t==null?(n.local?gT:yT)(n):(n.local?xT:vT)(n,o,t))}function ST(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function kT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function CT(e,t){var n,o;function a(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&kT(e,s)),n}return a._value=t,a}function MT(e,t){var n,o;function a(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&ST(e,s)),n}return a._value=t,a}function ET(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=uc(e);return this.tween(n,(o.local?CT:MT)(o,t))}function IT(e,t){return function(){F0(this,e).delay=+t.apply(this,arguments)}}function jT(e,t){return t=+t,function(){F0(this,e).delay=t}}function TT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IT:jT)(t,e)):Tn(this.node(),t).delay}function NT(e,t){return function(){Kn(this,e).duration=+t.apply(this,arguments)}}function PT(e,t){return t=+t,function(){Kn(this,e).duration=t}}function RT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NT:PT)(t,e)):Tn(this.node(),t).duration}function AT(e,t){if(typeof t!="function")throw new Error;return function(){Kn(this,e).ease=t}}function FT(e){var t=this._id;return arguments.length?this.each(AT(t,e)):Tn(this.node(),t).ease}function LT(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kn(this,e).ease=n}}function OT(e){if(typeof e!="function")throw new Error;return this.each(LT(this._id,e))}function DT(e){typeof e!="function"&&(e=Tk(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=[],p,_=0;_<u;++_)(p=s[_])&&e.call(p,p.__data__,_,s)&&c.push(p);return new mi(o,this._parents,this._name,this._id)}function VT(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,s=Math.min(o,a),u=new Array(o),c=0;c<s;++c)for(var p=t[c],_=n[c],h=p.length,f=u[c]=new Array(h),y,v=0;v<h;++v)(y=p[v]||_[v])&&(f[v]=y);for(;c<o;++c)u[c]=t[c];return new mi(u,this._parents,this._name,this._id)}function zT(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function BT(e,t,n){var o,a,s=zT(t)?F0:Kn;return function(){var u=s(this,e),c=u.on;c!==o&&(a=(o=c).copy()).on(t,n),u.on=a}}function HT(e,t){var n=this._id;return arguments.length<2?Tn(this.node(),n).on.on(e):this.each(BT(n,e,t))}function $T(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function WT(){return this.on("end.remove",$T(this._id))}function UT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=T0(e));for(var o=this._groups,a=o.length,s=new Array(a),u=0;u<a;++u)for(var c=o[u],p=c.length,_=s[u]=new Array(p),h,f,y=0;y<p;++y)(h=c[y])&&(f=e.call(h,h.__data__,y,c))&&("__data__"in h&&(f.__data__=h.__data__),_[y]=f,cc(_[y],t,n,y,_,Tn(h,n)));return new mi(s,this._parents,t,n)}function GT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jk(e));for(var o=this._groups,a=o.length,s=[],u=[],c=0;c<a;++c)for(var p=o[c],_=p.length,h,f=0;f<_;++f)if(h=p[f]){for(var y=e.call(h,h.__data__,f,p),v,x=Tn(h,n),k=0,w=y.length;k<w;++k)(v=y[k])&&cc(v,t,n,k,y,x);s.push(y),u.push(h)}return new mi(s,u,t,n)}var KT=Gs.prototype.constructor;function YT(){return new KT(this._groups,this._parents)}function QT(e,t){var n,o,a;return function(){var s=ba(this,e),u=(this.style.removeProperty(e),ba(this,e));return s===u?null:s===n&&u===o?a:a=t(n=s,o=u)}}function tC(e){return function(){this.style.removeProperty(e)}}function XT(e,t,n){var o,a=n+"",s;return function(){var u=ba(this,e);return u===a?null:u===o?s:s=t(o=u,n)}}function ZT(e,t,n){var o,a,s;return function(){var u=ba(this,e),c=n(this),p=c+"";return c==null&&(p=c=(this.style.removeProperty(e),ba(this,e))),u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c))}}function JT(e,t){var n,o,a,s="style."+t,u="end."+s,c;return function(){var p=Kn(this,e),_=p.on,h=p.value[s]==null?c||(c=tC(t)):void 0;(_!==n||a!==h)&&(o=(n=_).copy()).on(u,a=h),p.on=o}}function eN(e,t,n){var o=(e+="")=="transform"?tT:eC;return t==null?this.styleTween(e,QT(e,o)).on("end.style."+e,tC(e)):typeof t=="function"?this.styleTween(e,ZT(e,o,L0(this,"style."+e,t))).each(JT(this._id,e)):this.styleTween(e,XT(e,o,t),n).on("end.style."+e,null)}function tN(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function rN(e,t,n){var o,a;function s(){var u=t.apply(this,arguments);return u!==a&&(o=(a=u)&&tN(e,u,n)),o}return s._value=t,s}function nN(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,rN(e,t,n??""))}function iN(e){return function(){this.textContent=e}}function oN(e){return function(){var t=e(this);this.textContent=t??""}}function aN(e){return this.tween("text",typeof e=="function"?oN(L0(this,"text",e)):iN(e==null?"":e+""))}function sN(e){return function(t){this.textContent=e.call(this,t)}}function uN(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&sN(a)),t}return o._value=e,o}function lN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,uN(e))}function cN(){for(var e=this._name,t=this._id,n=rC(),o=this._groups,a=o.length,s=0;s<a;++s)for(var u=o[s],c=u.length,p,_=0;_<c;++_)if(p=u[_]){var h=Tn(p,t);cc(p,e,n,_,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new mi(o,this._parents,e,n)}function dN(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(s,u){var c={value:u},p={value:function(){--a===0&&s()}};n.each(function(){var _=Kn(this,o),h=_.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(p)),_.on=t}),a===0&&s()})}var pN=0;function mi(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function rC(){return++pN}var di=Gs.prototype;mi.prototype={constructor:mi,select:UT,selectAll:GT,selectChild:di.selectChild,selectChildren:di.selectChildren,filter:DT,merge:VT,selection:YT,transition:cN,call:di.call,nodes:di.nodes,node:di.node,size:di.size,empty:di.empty,each:di.each,on:HT,attr:qT,attrTween:ET,style:eN,styleTween:nN,text:aN,textTween:lN,remove:WT,tween:hT,delay:TT,duration:RT,ease:FT,easeVarying:OT,end:dN,[Symbol.iterator]:di[Symbol.iterator]};function _N(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fN={time:null,delay:0,duration:250,ease:_N};function mN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hN(e){var t,n;e instanceof mi?(t=e._id,e=e._name):(t=rC(),(n=fN).time=A0(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,s=0;s<a;++s)for(var u=o[s],c=u.length,p,_=0;_<c;++_)(p=u[_])&&cc(p,e,t,_,u,n||mN(p,t));return new mi(o,this._parents,e,t)}Gs.prototype.interrupt=_T;Gs.prototype.transition=hN;const hl=e=>()=>e;function yN(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function _i(e,t,n){this.k=e,this.x=t,this.y=n}_i.prototype={constructor:_i,scale:function(e){return e===1?this:new _i(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _i(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dc=new _i(1,0,0);nC.prototype=_i.prototype;function nC(e){for(;!e.__zoom;)if(!(e=e.parentNode))return dc;return e.__zoom}function qp(e){e.stopImmediatePropagation()}function hs(e){e.preventDefault(),e.stopImmediatePropagation()}function gN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gx(){return this.__zoom||dc}function xN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wN(){return navigator.maxTouchPoints||"ontouchstart"in this}function bN(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function iC(){var e=gN,t=vN,n=bN,o=xN,a=wN,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,p=jl,_=sc("start","zoom","end"),h,f,y,v=500,x=150,k=0,w=10;function b(N){N.property("__zoom",Gx).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(N,G,$,re){var Y=N.selection?N.selection():N;Y.property("__zoom",Gx),N!==Y?I(N,G,$,re):Y.interrupt().each(function(){C(this,arguments).event(re).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},b.scaleBy=function(N,G,$,re){b.scaleTo(N,function(){var Y=this.__zoom.k,Q=typeof G=="function"?G.apply(this,arguments):G;return Y*Q},$,re)},b.scaleTo=function(N,G,$,re){b.transform(N,function(){var Y=t.apply(this,arguments),Q=this.__zoom,ie=$==null?M(Y):typeof $=="function"?$.apply(this,arguments):$,H=Q.invert(ie),J=typeof G=="function"?G.apply(this,arguments):G;return n(q(E(Q,J),ie,H),Y,u)},$,re)},b.translateBy=function(N,G,$,re){b.transform(N,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),u)},null,re)},b.translateTo=function(N,G,$,re,Y){b.transform(N,function(){var Q=t.apply(this,arguments),ie=this.__zoom,H=re==null?M(Q):typeof re=="function"?re.apply(this,arguments):re;return n(dc.translate(H[0],H[1]).scale(ie.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof $=="function"?-$.apply(this,arguments):-$),Q,u)},re,Y)};function E(N,G){return G=Math.max(s[0],Math.min(s[1],G)),G===N.k?N:new _i(G,N.x,N.y)}function q(N,G,$){var re=G[0]-$[0]*N.k,Y=G[1]-$[1]*N.k;return re===N.x&&Y===N.y?N:new _i(N.k,re,Y)}function M(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function I(N,G,$,re){N.on("start.zoom",function(){C(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(re).end()}).tween("zoom",function(){var Y=this,Q=arguments,ie=C(Y,Q).event(re),H=t.apply(Y,Q),J=$==null?M(H):typeof $=="function"?$.apply(Y,Q):$,me=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),W=Y.__zoom,te=typeof G=="function"?G.apply(Y,Q):G,oe=p(W.invert(J).concat(me/W.k),te.invert(J).concat(me/te.k));return function(pe){if(pe===1)pe=te;else{var ue=oe(pe),ve=me/ue[2];pe=new _i(ve,J[0]-ue[0]*ve,J[1]-ue[1]*ve)}ie.zoom(null,pe)}})}function C(N,G,$){return!$&&N.__zooming||new T(N,G)}function T(N,G){this.that=N,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,G),this.taps=0}T.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,G){return this.mouse&&N!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var G=Gr(this.that).datum();_.call(N,this.that,new yN(N,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:_}),G)}};function R(N,...G){if(!e.apply(this,arguments))return;var $=C(this,G).event(N),re=this.__zoom,Y=Math.max(s[0],Math.min(s[1],re.k*Math.pow(2,o.apply(this,arguments)))),Q=Sn(N);if($.wheel)($.mouse[0][0]!==Q[0]||$.mouse[0][1]!==Q[1])&&($.mouse[1]=re.invert($.mouse[0]=Q)),clearTimeout($.wheel);else{if(re.k===Y)return;$.mouse=[Q,re.invert(Q)],Pl(this),$.start()}hs(N),$.wheel=setTimeout(ie,x),$.zoom("mouse",n(q(E(re,Y),$.mouse[0],$.mouse[1]),$.extent,u));function ie(){$.wheel=null,$.end()}}function P(N,...G){if(y||!e.apply(this,arguments))return;var $=N.currentTarget,re=C(this,G,!0).event(N),Y=Gr(N.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",me,!0),Q=Sn(N,$),ie=N.clientX,H=N.clientY;zk(N.view),qp(N),re.mouse=[Q,this.__zoom.invert(Q)],Pl(this),re.start();function J(W){if(hs(W),!re.moved){var te=W.clientX-ie,oe=W.clientY-H;re.moved=te*te+oe*oe>k}re.event(W).zoom("mouse",n(q(re.that.__zoom,re.mouse[0]=Sn(W,$),re.mouse[1]),re.extent,u))}function me(W){Y.on("mousemove.zoom mouseup.zoom",null),Bk(W.view,re.moved),hs(W),re.event(W).end()}}function z(N,...G){if(e.apply(this,arguments)){var $=this.__zoom,re=Sn(N.changedTouches?N.changedTouches[0]:N,this),Y=$.invert(re),Q=$.k*(N.shiftKey?.5:2),ie=n(q(E($,Q),re,Y),t.apply(this,G),u);hs(N),c>0?Gr(this).transition().duration(c).call(I,ie,re,N):Gr(this).call(b.transform,ie,re,N)}}function F(N,...G){if(e.apply(this,arguments)){var $=N.touches,re=$.length,Y=C(this,G,N.changedTouches.length===re).event(N),Q,ie,H,J;for(qp(N),ie=0;ie<re;++ie)H=$[ie],J=Sn(H,this),J=[J,this.__zoom.invert(J),H.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==J[2]&&(Y.touch1=J,Y.taps=0):(Y.touch0=J,Q=!0,Y.taps=1+!!h);h&&(h=clearTimeout(h)),Q&&(Y.taps<2&&(f=J[0],h=setTimeout(function(){h=null},v)),Pl(this),Y.start())}}function D(N,...G){if(this.__zooming){var $=C(this,G).event(N),re=N.changedTouches,Y=re.length,Q,ie,H,J;for(hs(N),Q=0;Q<Y;++Q)ie=re[Q],H=Sn(ie,this),$.touch0&&$.touch0[2]===ie.identifier?$.touch0[0]=H:$.touch1&&$.touch1[2]===ie.identifier&&($.touch1[0]=H);if(ie=$.that.__zoom,$.touch1){var me=$.touch0[0],W=$.touch0[1],te=$.touch1[0],oe=$.touch1[1],pe=(pe=te[0]-me[0])*pe+(pe=te[1]-me[1])*pe,ue=(ue=oe[0]-W[0])*ue+(ue=oe[1]-W[1])*ue;ie=E(ie,Math.sqrt(pe/ue)),H=[(me[0]+te[0])/2,(me[1]+te[1])/2],J=[(W[0]+oe[0])/2,(W[1]+oe[1])/2]}else if($.touch0)H=$.touch0[0],J=$.touch0[1];else return;$.zoom("touch",n(q(ie,H,J),$.extent,u))}}function X(N,...G){if(this.__zooming){var $=C(this,G).event(N),re=N.changedTouches,Y=re.length,Q,ie;for(qp(N),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),Q=0;Q<Y;++Q)ie=re[Q],$.touch0&&$.touch0[2]===ie.identifier?delete $.touch0:$.touch1&&$.touch1[2]===ie.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(ie=Sn(ie,this),Math.hypot(f[0]-ie[0],f[1]-ie[1])<w)){var H=Gr(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return b.wheelDelta=function(N){return arguments.length?(o=typeof N=="function"?N:hl(+N),b):o},b.filter=function(N){return arguments.length?(e=typeof N=="function"?N:hl(!!N),b):e},b.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:hl(!!N),b):a},b.extent=function(N){return arguments.length?(t=typeof N=="function"?N:hl([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),b):t},b.scaleExtent=function(N){return arguments.length?(s[0]=+N[0],s[1]=+N[1],b):[s[0],s[1]]},b.translateExtent=function(N){return arguments.length?(u[0][0]=+N[0][0],u[1][0]=+N[1][0],u[0][1]=+N[0][1],u[1][1]=+N[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(N){return arguments.length?(n=N,b):n},b.duration=function(N){return arguments.length?(c=+N,b):c},b.interpolate=function(N){return arguments.length?(p=N,b):p},b.on=function(){var N=_.on.apply(_,arguments);return N===_?b:N},b.clickDistance=function(N){return arguments.length?(k=(N=+N)*N,b):Math.sqrt(k)},b.tapDistance=function(N){return arguments.length?(w=+N,b):w},b}const Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Rs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],oC=["Enter"," ","Escape"],aC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Sa;(function(e){e.Strict="strict",e.Loose="loose"})(Sa||(Sa={}));var Io;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Io||(Io={}));var As;(function(e){e.Partial="partial",e.Full="full"})(As||(As={}));const sC={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ui;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ui||(Ui={}));var $l;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($l||($l={}));var $e;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($e||($e={}));const Kx={[$e.Left]:$e.Right,[$e.Right]:$e.Left,[$e.Top]:$e.Bottom,[$e.Bottom]:$e.Top};function uC(e){return e===null?null:e?"valid":"invalid"}const lC=e=>"id"in e&&"source"in e&&"target"in e,qN=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),O0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ys=(e,t=[0,0])=>{const{width:n,height:o}=hi(e),a=e.origin??t,s=n*a[0],u=o*a[1];return{x:e.position.x-s,y:e.position.y-u}},SN=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):O0(a)?a:t.nodeLookup.get(a.id));const c=u?Wl(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return pc(o,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _c(n)},Qs=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=pc(n,Wl(a)),o=!0)}),o?_c(n):{x:0,y:0,width:0,height:0}},D0=(e,t,[n,o,a]=[0,0,1],s=!1,u=!1)=>{const c={...Zs(t,[n,o,a]),width:t.width/a,height:t.height/a},p=[];for(const _ of e.values()){const{measured:h,selectable:f=!0,hidden:y=!1}=_;if(u&&!f||y)continue;const v=h.width??_.width??_.initialWidth??null,x=h.height??_.height??_.initialHeight??null,k=Fs(c,Ca(_)),w=(v??0)*(x??0),b=s&&k>0;(!_.internals.handleBounds||b||k>=w||_.dragging)&&p.push(_)}return p},kN=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function CN(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!o||o.has(a.id))&&n.set(a.id,a)}),n}async function MN({nodes:e,width:t,height:n,panZoom:o,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const c=CN(e,u),p=Qs(c),_=V0(p,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await o.setViewport(_,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function cC({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),c=u.parentId?n.get(u.parentId):void 0,{x:p,y:_}=c?c.internals.positionAbsolute:{x:0,y:0},h=u.origin??o;let f=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!c)s==null||s("005",Gn.error005());else{const v=c.measured.width,x=c.measured.height;v&&x&&(f=[[p,_],[p+v,_+x]])}else c&&Ma(u.extent)&&(f=[[u.extent[0][0]+p,u.extent[0][1]+_],[u.extent[1][0]+p,u.extent[1][1]+_]]);const y=Ma(f)?No(t,f,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Gn.error015())),{position:{x:y.x-p+(u.measured.width??0)*h[0],y:y.y-_+(u.measured.height??0)*h[1]},positionAbsolute:y}}async function EN({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:a}){const s=new Set(e.map(y=>y.id)),u=[];for(const y of n){if(y.deletable===!1)continue;const v=s.has(y.id),x=!v&&y.parentId&&u.find(k=>k.id===y.parentId);(v||x)&&u.push(y)}const c=new Set(t.map(y=>y.id)),p=o.filter(y=>y.deletable!==!1),h=kN(u,p);for(const y of p)c.has(y.id)&&!h.find(x=>x.id===y.id)&&h.push(y);if(!a)return{edges:h,nodes:u};const f=await a({nodes:u,edges:h});return typeof f=="boolean"?f?{edges:h,nodes:u}:{edges:[],nodes:[]}:f}const ka=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),No=(e={x:0,y:0},t,n)=>({x:ka(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:ka(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function dC(e,t,n){const{width:o,height:a}=hi(n),{x:s,y:u}=n.internals.positionAbsolute;return No(e,[[s,u],[s+o,u+a]],t)}const Yx=(e,t,n)=>e<t?ka(Math.abs(e-t),1,t)/t:e>n?-ka(Math.abs(e-n),1,t)/t:0,pC=(e,t,n=15,o=40)=>{const a=Yx(e.x,o,t.width-o)*n,s=Yx(e.y,o,t.height-o)*n;return[a,s]},pc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),u0=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),_c=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ca=(e,t=[0,0])=>{var a,s;const{x:n,y:o}=O0(e)?e.internals.positionAbsolute:Ys(e,t);return{x:n,y:o,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Wl=(e,t=[0,0])=>{var a,s;const{x:n,y:o}=O0(e)?e.internals.positionAbsolute:Ys(e,t);return{x:n,y:o,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:o+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},_C=(e,t)=>_c(pc(u0(e),u0(t))),Fs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Qx=e=>En(e.width)&&En(e.height)&&En(e.x)&&En(e.y),En=e=>!isNaN(e)&&isFinite(e),IN=(e,t)=>{},Xs=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Zs=({x:e,y:t},[n,o,a],s=!1,u=[1,1])=>{const c={x:(e-n)/a,y:(t-o)/a};return s?Xs(c,u):c},Ul=({x:e,y:t},[n,o,a])=>({x:e*a+n,y:t*a+o});function ha(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function jN(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=ha(e,n),a=ha(e,t);return{top:o,right:a,bottom:o,left:a,x:a*2,y:o*2}}if(typeof e=="object"){const o=ha(e.top??e.y??0,n),a=ha(e.bottom??e.y??0,n),s=ha(e.left??e.x??0,t),u=ha(e.right??e.x??0,t);return{top:o,right:u,bottom:a,left:s,x:s+u,y:o+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function TN(e,t,n,o,a,s){const{x:u,y:c}=Ul(e,[t,n,o]),{x:p,y:_}=Ul({x:e.x+e.width,y:e.y+e.height},[t,n,o]),h=a-p,f=s-_;return{left:Math.floor(u),top:Math.floor(c),right:Math.floor(h),bottom:Math.floor(f)}}const V0=(e,t,n,o,a,s)=>{const u=jN(s,t,n),c=(t-u.x)/e.width,p=(n-u.y)/e.height,_=Math.min(c,p),h=ka(_,o,a),f=e.x+e.width/2,y=e.y+e.height/2,v=t/2-f*h,x=n/2-y*h,k=TN(e,v,x,h,t,n),w={left:Math.min(k.left-u.left,0),top:Math.min(k.top-u.top,0),right:Math.min(k.right-u.right,0),bottom:Math.min(k.bottom-u.bottom,0)};return{x:v-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},Ls=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ma(e){return e!=null&&e!=="parent"}function hi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function fC(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function mC(e,t={width:0,height:0},n,o,a){const s={...e},u=o.get(n);if(u){const c=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*c[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*c[1]}return s}function Xx(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NN(){let e,t;return{promise:new Promise((o,a)=>{e=o,t=a}),resolve:e,reject:t}}function PN(e){return{...aC,...e||{}}}function ks(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:a}){const{x:s,y:u}=In(e),c=Zs({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},o),{x:p,y:_}=n?Xs(c,t):c;return{xSnapped:p,ySnapped:_,...c}}const z0=e=>({width:e.offsetWidth,height:e.offsetHeight}),hC=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},RN=["INPUT","SELECT","TEXTAREA"];function yC(e){var o,a;const t=((a=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:RN.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const gC=e=>"clientX"in e,In=(e,t)=>{var s,u;const n=gC(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Zx=(e,t,n,o,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(c.left-n.left)/o,y:(c.top-n.top)/o,...z0(u)}})};function vC({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:c}){const p=e*.125+a*.375+u*.375+n*.125,_=t*.125+s*.375+c*.375+o*.125,h=Math.abs(p-e),f=Math.abs(_-t);return[p,_,h,f]}function yl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Jx({pos:e,x1:t,y1:n,x2:o,y2:a,c:s}){switch(e){case $e.Left:return[t-yl(t-o,s),n];case $e.Right:return[t+yl(o-t,s),n];case $e.Top:return[t,n-yl(n-a,s)];case $e.Bottom:return[t,n+yl(a-n,s)]}}function B0({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:o,targetY:a,targetPosition:s=$e.Top,curvature:u=.25}){const[c,p]=Jx({pos:n,x1:e,y1:t,x2:o,y2:a,c:u}),[_,h]=Jx({pos:s,x1:o,y1:a,x2:e,y2:t,c:u}),[f,y,v,x]=vC({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:c,sourceControlY:p,targetControlX:_,targetControlY:h});return[`M${e},${t} C${c},${p} ${_},${h} ${o},${a}`,f,y,v,x]}function xC({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(o-t)/2,c=o<t?o+u:o-u;return[s,c,a,u]}function AN({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return o;const u=a&&n?o+1e3:o,c=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+c}function FN({sourceNode:e,targetNode:t,width:n,height:o,transform:a}){const s=pc(Wl(e),Wl(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:o/a[2]};return Fs(u,_c(s))>0}const LN=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,ON=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),l0=(e,t,n={})=>{if(!e.source||!e.target)return t;const o=n.getEdgeId||LN;let a;return lC(e)?a={...e}:a={...e,id:o(e)},ON(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function H0({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[a,s,u,c]=xC({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,a,s,u,c]}const e1={[$e.Left]:{x:-1,y:0},[$e.Right]:{x:1,y:0},[$e.Top]:{x:0,y:-1},[$e.Bottom]:{x:0,y:1}},DN=({source:e,sourcePosition:t=$e.Bottom,target:n})=>t===$e.Left||t===$e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},t1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function VN({source:e,sourcePosition:t=$e.Bottom,target:n,targetPosition:o=$e.Top,center:a,offset:s,stepPosition:u}){const c=e1[t],p=e1[o],_={x:e.x+c.x*s,y:e.y+c.y*s},h={x:n.x+p.x*s,y:n.y+p.y*s},f=DN({source:_,sourcePosition:t,target:h}),y=f.x!==0?"x":"y",v=f[y];let x=[],k,w;const b={x:0,y:0},E={x:0,y:0},[,,q,M]=xC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[y]*p[y]===-1){y==="x"?(k=a.x??_.x+(h.x-_.x)*u,w=a.y??(_.y+h.y)/2):(k=a.x??(_.x+h.x)/2,w=a.y??_.y+(h.y-_.y)*u);const C=[{x:k,y:_.y},{x:k,y:h.y}],T=[{x:_.x,y:w},{x:h.x,y:w}];c[y]===v?x=y==="x"?C:T:x=y==="x"?T:C}else{const C=[{x:_.x,y:h.y}],T=[{x:h.x,y:_.y}];if(y==="x"?x=c.x===v?T:C:x=c.y===v?C:T,t===o){const D=Math.abs(e[y]-n[y]);if(D<=s){const X=Math.min(s-1,s-D);c[y]===v?b[y]=(_[y]>e[y]?-1:1)*X:E[y]=(h[y]>n[y]?-1:1)*X}}if(t!==o){const D=y==="x"?"y":"x",X=c[y]===p[D],N=_[D]>h[D],G=_[D]<h[D];(c[y]===1&&(!X&&N||X&&G)||c[y]!==1&&(!X&&G||X&&N))&&(x=y==="x"?C:T)}const R={x:_.x+b.x,y:_.y+b.y},P={x:h.x+E.x,y:h.y+E.y},z=Math.max(Math.abs(R.x-x[0].x),Math.abs(P.x-x[0].x)),F=Math.max(Math.abs(R.y-x[0].y),Math.abs(P.y-x[0].y));z>=F?(k=(R.x+P.x)/2,w=x[0].y):(k=x[0].x,w=(R.y+P.y)/2)}return[[e,{x:_.x+b.x,y:_.y+b.y},...x,{x:h.x+E.x,y:h.y+E.y},n],k,w,q,M]}function zN(e,t,n,o){const a=Math.min(t1(e,t)/2,t1(t,n)/2,o),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const _=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+a*_},${u}Q ${s},${u} ${s},${u+a*h}`}const c=e.x<n.x?1:-1,p=e.y<n.y?-1:1;return`L ${s},${u+a*p}Q ${s},${u} ${s+a*c},${u}`}function Gl({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:o,targetY:a,targetPosition:s=$e.Top,borderRadius:u=5,centerX:c,centerY:p,offset:_=20,stepPosition:h=.5}){const[f,y,v,x,k]=VN({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:a},targetPosition:s,center:{x:c,y:p},offset:_,stepPosition:h});return[f.reduce((b,E,q)=>{let M="";return q>0&&q<f.length-1?M=zN(f[q-1],E,f[q+1],u):M=`${q===0?"M":"L"}${E.x} ${E.y}`,b+=M,b},""),y,v,x,k]}function r1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function BN(e){var f;const{sourceNode:t,targetNode:n}=e;if(!r1(t)||!r1(n))return null;const o=t.internals.handleBounds||n1(t.handles),a=n.internals.handleBounds||n1(n.handles),s=i1((o==null?void 0:o.source)??[],e.sourceHandle),u=i1(e.connectionMode===Sa.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(f=e.onError)==null||f.call(e,"008",Gn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(s==null?void 0:s.position)||$e.Bottom,p=(u==null?void 0:u.position)||$e.Top,_=Po(t,s,c),h=Po(n,u,p);return{sourceX:_.x,sourceY:_.y,targetX:h.x,targetY:h.y,sourcePosition:c,targetPosition:p}}function n1(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Po(e,t,n=$e.Left,o=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:c}=t??hi(e);if(o)return{x:a+u/2,y:s+c/2};switch((t==null?void 0:t.position)??n){case $e.Top:return{x:a+u/2,y:s};case $e.Right:return{x:a+u,y:s+c/2};case $e.Bottom:return{x:a+u/2,y:s+c};case $e.Left:return{x:a,y:s+c/2}}}function i1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function c0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function HN(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,c)=>([c.markerStart||o,c.markerEnd||a].forEach(p=>{if(p&&typeof p=="object"){const _=c0(p,t);s.has(_)||(u.push({id:_,color:p.color||n,...p}),s.add(_))}}),u),[]).sort((u,c)=>u.id.localeCompare(c.id))}const wC=1e3,$N=10,$0={nodeOrigin:[0,0],nodeExtent:Rs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},WN={...$0,checkEquality:!0};function W0(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function UN(e,t,n){const o=W0($0,n);for(const a of e.values())if(a.parentId)G0(a,e,t,o);else{const s=Ys(a,o.nodeOrigin),u=Ma(a.extent)?a.extent:o.nodeExtent,c=No(s,u,hi(a));a.internals.positionAbsolute=c}}function GN(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],o=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&o.push(s)}return{source:n,target:o}}function U0(e){return e==="manual"}function d0(e,t,n,o={}){var _,h;const a=W0(WN,o),s={i:0},u=new Map(t),c=a!=null&&a.elevateNodesOnSelect&&!U0(a.zIndexMode)?wC:0;let p=e.length>0;t.clear(),n.clear();for(const f of e){let y=u.get(f.id);if(a.checkEquality&&f===(y==null?void 0:y.internals.userNode))t.set(f.id,y);else{const v=Ys(f,a.nodeOrigin),x=Ma(f.extent)?f.extent:a.nodeExtent,k=No(v,x,hi(f));y={...a.defaults,...f,measured:{width:(_=f.measured)==null?void 0:_.width,height:(h=f.measured)==null?void 0:h.height},internals:{positionAbsolute:k,handleBounds:GN(f,y),z:bC(f,c,a.zIndexMode),userNode:f}},t.set(f.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),f.parentId&&G0(y,t,n,o,s)}return p}function KN(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function G0(e,t,n,o,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:c,zIndexMode:p}=W0($0,o),_=e.parentId,h=t.get(_);if(!h){console.warn(`Parent node ${_} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}KN(e,n),a&&!h.parentId&&h.internals.rootParentIndex===void 0&&p==="auto"&&(h.internals.rootParentIndex=++a.i,h.internals.z=h.internals.z+a.i*$N),a&&h.internals.rootParentIndex!==void 0&&(a.i=h.internals.rootParentIndex);const f=s&&!U0(p)?wC:0,{x:y,y:v,z:x}=YN(e,h,u,c,f,p),{positionAbsolute:k}=e.internals,w=y!==k.x||v!==k.y;(w||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:y,y:v}:k,z:x}})}function bC(e,t,n){const o=En(e.zIndex)?e.zIndex:0;return U0(n)?o:o+(e.selected?t:0)}function YN(e,t,n,o,a,s){const{x:u,y:c}=t.internals.positionAbsolute,p=hi(e),_=Ys(e,n),h=Ma(e.extent)?No(_,e.extent,p):_;let f=No({x:u+h.x,y:c+h.y},o,p);e.extent==="parent"&&(f=dC(f,p,t));const y=bC(e,a,s),v=t.internals.z??0;return{x:f.x,y:f.y,z:v>=y?v+1:y}}function K0(e,t,n,o=[0,0]){var u;const a=[],s=new Map;for(const c of e){const p=t.get(c.parentId);if(!p)continue;const _=((u=s.get(c.parentId))==null?void 0:u.expandedRect)??Ca(p),h=_C(_,c.rect);s.set(c.parentId,{expandedRect:h,parent:p})}return s.size>0&&s.forEach(({expandedRect:c,parent:p},_)=>{var q;const h=p.internals.positionAbsolute,f=hi(p),y=p.origin??o,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,x=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,k=Math.max(f.width,Math.round(c.width)),w=Math.max(f.height,Math.round(c.height)),b=(k-f.width)*y[0],E=(w-f.height)*y[1];(v>0||x>0||b||E)&&(a.push({id:_,type:"position",position:{x:p.position.x-v+b,y:p.position.y-x+E}}),(q=n.get(_))==null||q.forEach(M=>{e.some(I=>I.id===M.id)||a.push({id:M.id,type:"position",position:{x:M.position.x+v,y:M.position.y+x}})})),(f.width<c.width||f.height<c.height||v||x)&&a.push({id:_,type:"dimensions",setAttributes:!0,dimensions:{width:k+(v?y[0]*v-b:0),height:w+(x?y[1]*x-E:0)}})}),a}function QN(e,t,n,o,a,s,u){const c=o==null?void 0:o.querySelector(".xyflow__viewport");let p=!1;if(!c)return{changes:[],updatedInternals:p};const _=[],h=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(h.transform),y=[];for(const v of e.values()){const x=t.get(v.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),p=!0;continue}const k=z0(v.nodeElement),w=x.measured.width!==k.width||x.measured.height!==k.height;if(!!(k.width&&k.height&&(w||!x.internals.handleBounds||v.force))){const E=v.nodeElement.getBoundingClientRect(),q=Ma(x.extent)?x.extent:s;let{positionAbsolute:M}=x.internals;x.parentId&&x.extent==="parent"?M=dC(M,k,t.get(x.parentId)):q&&(M=No(M,q,k));const I={...x,measured:k,internals:{...x.internals,positionAbsolute:M,handleBounds:{source:Zx("source",v.nodeElement,E,f,x.id),target:Zx("target",v.nodeElement,E,f,x.id)}}};t.set(x.id,I),x.parentId&&G0(I,t,n,{nodeOrigin:a,zIndexMode:u}),p=!0,w&&(_.push({id:x.id,type:"dimensions",dimensions:k}),x.expandParent&&x.parentId&&y.push({id:x.id,parentId:x.parentId,rect:Ca(I,a)}))}}if(y.length>0){const v=K0(y,t,n,a);_.push(...v)}return{changes:_,updatedInternals:p}}async function XN({delta:e,panZoom:t,transform:n,translateExtent:o,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],o),c=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(c)}function o1(e,t,n,o,a,s){let u=a;const c=o.get(u)||new Map;o.set(u,c.set(n,t)),u=`${a}-${e}`;const p=o.get(u)||new Map;if(o.set(u,p.set(n,t)),s){u=`${a}-${e}-${s}`;const _=o.get(u)||new Map;o.set(u,_.set(n,t))}}function qC(e,t,n){e.clear(),t.clear();for(const o of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:c=null}=o,p={edgeId:o.id,source:a,target:s,sourceHandle:u,targetHandle:c},_=`${a}-${u}--${s}-${c}`,h=`${s}-${c}--${a}-${u}`;o1("source",p,h,e,a,u),o1("target",p,_,e,s,c),t.set(o.id,o)}}function SC(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:SC(n,t):!1}function a1(e,t,n){var a;let o=e;do{if((a=o==null?void 0:o.matches)!=null&&a.call(o,t))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function ZN(e,t,n,o){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===o)&&(!u.parentId||!SC(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const c=e.get(s);c&&a.set(s,{id:s,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return a}function Sp({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var u,c,p;const a=[];for(const[_,h]of t){const f=(u=n.get(_))==null?void 0:u.internals.userNode;f&&a.push({...f,position:h.position,dragging:o})}if(!e)return[a[0],a];const s=(c=n.get(e))==null?void 0:c.internals.userNode;return[s?{...s,position:((p=t.get(e))==null?void 0:p.position)||s.position,dragging:o}:a[0],a]}function JN({dragItems:e,snapGrid:t,x:n,y:o}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:o-a.distance.y},u=Xs(s,t);return{x:u.x-s.x,y:u.y-s.y}}function eP({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:a}){let s={x:null,y:null},u=0,c=new Map,p=!1,_={x:0,y:0},h=null,f=!1,y=null,v=!1,x=!1,k=null;function w({noDragClassName:E,handleSelector:q,domNode:M,isSelectable:I,nodeId:C,nodeClickDistance:T=0}){y=Gr(M);function R({x:D,y:X}){const{nodeLookup:N,nodeExtent:G,snapGrid:$,snapToGrid:re,nodeOrigin:Y,onNodeDrag:Q,onSelectionDrag:ie,onError:H,updateNodePositions:J}=t();s={x:D,y:X};let me=!1;const W=c.size>1,te=W&&G?u0(Qs(c)):null,oe=W&&re?JN({dragItems:c,snapGrid:$,x:D,y:X}):null;for(const[pe,ue]of c){if(!N.has(pe))continue;let ve={x:D-ue.distance.x,y:X-ue.distance.y};re&&(ve=oe?{x:Math.round(ve.x+oe.x),y:Math.round(ve.y+oe.y)}:Xs(ve,$));let Ie=null;if(W&&G&&!ue.extent&&te){const{positionAbsolute:Te}=ue.internals,Pe=Te.x-te.x+G[0][0],Ae=Te.x+ue.measured.width-te.x2+G[1][0],Ue=Te.y-te.y+G[0][1],Be=Te.y+ue.measured.height-te.y2+G[1][1];Ie=[[Pe,Ue],[Ae,Be]]}const{position:Re,positionAbsolute:je}=cC({nodeId:pe,nextPosition:ve,nodeLookup:N,nodeExtent:Ie||G,nodeOrigin:Y,onError:H});me=me||ue.position.x!==Re.x||ue.position.y!==Re.y,ue.position=Re,ue.internals.positionAbsolute=je}if(x=x||me,!!me&&(J(c,!0),k&&(o||Q||!C&&ie))){const[pe,ue]=Sp({nodeId:C,dragItems:c,nodeLookup:N});o==null||o(k,c,pe,ue),Q==null||Q(k,pe,ue),C||ie==null||ie(k,ue)}}async function P(){if(!h)return;const{transform:D,panBy:X,autoPanSpeed:N,autoPanOnNodeDrag:G}=t();if(!G){p=!1,cancelAnimationFrame(u);return}const[$,re]=pC(_,h,N);($!==0||re!==0)&&(s.x=(s.x??0)-$/D[2],s.y=(s.y??0)-re/D[2],await X({x:$,y:re})&&R(s)),u=requestAnimationFrame(P)}function z(D){var W;const{nodeLookup:X,multiSelectionActive:N,nodesDraggable:G,transform:$,snapGrid:re,snapToGrid:Y,selectNodesOnDrag:Q,onNodeDragStart:ie,onSelectionDragStart:H,unselectNodesAndEdges:J}=t();f=!0,(!Q||!I)&&!N&&C&&((W=X.get(C))!=null&&W.selected||J()),I&&Q&&C&&(e==null||e(C));const me=ks(D.sourceEvent,{transform:$,snapGrid:re,snapToGrid:Y,containerBounds:h});if(s=me,c=ZN(X,G,me,C),c.size>0&&(n||ie||!C&&H)){const[te,oe]=Sp({nodeId:C,dragItems:c,nodeLookup:X});n==null||n(D.sourceEvent,c,te,oe),ie==null||ie(D.sourceEvent,te,oe),C||H==null||H(D.sourceEvent,oe)}}const F=Hk().clickDistance(T).on("start",D=>{const{domNode:X,nodeDragThreshold:N,transform:G,snapGrid:$,snapToGrid:re}=t();h=(X==null?void 0:X.getBoundingClientRect())||null,v=!1,x=!1,k=D.sourceEvent,N===0&&z(D),s=ks(D.sourceEvent,{transform:G,snapGrid:$,snapToGrid:re,containerBounds:h}),_=In(D.sourceEvent,h)}).on("drag",D=>{const{autoPanOnNodeDrag:X,transform:N,snapGrid:G,snapToGrid:$,nodeDragThreshold:re,nodeLookup:Y}=t(),Q=ks(D.sourceEvent,{transform:N,snapGrid:G,snapToGrid:$,containerBounds:h});if(k=D.sourceEvent,(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||C&&!Y.has(C))&&(v=!0),!v){if(!p&&X&&f&&(p=!0,P()),!f){const ie=In(D.sourceEvent,h),H=ie.x-_.x,J=ie.y-_.y;Math.sqrt(H*H+J*J)>re&&z(D)}(s.x!==Q.xSnapped||s.y!==Q.ySnapped)&&c&&f&&(_=In(D.sourceEvent,h),R(Q))}}).on("end",D=>{if(!(!f||v)&&(p=!1,f=!1,cancelAnimationFrame(u),c.size>0)){const{nodeLookup:X,updateNodePositions:N,onNodeDragStop:G,onSelectionDragStop:$}=t();if(x&&(N(c,!1),x=!1),a||G||!C&&$){const[re,Y]=Sp({nodeId:C,dragItems:c,nodeLookup:X,dragging:!1});a==null||a(D.sourceEvent,c,re,Y),G==null||G(D.sourceEvent,re,Y),C||$==null||$(D.sourceEvent,Y)}}}).filter(D=>{const X=D.target;return!D.button&&(!E||!a1(X,`.${E}`,M))&&(!q||a1(X,q,M))});y.call(F)}function b(){y==null||y.on(".drag",null)}return{update:w,destroy:b}}function tP(e,t,n){const o=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Fs(a,Ca(s))>0&&o.push(s);return o}const rP=250;function nP(e,t,n,o){var c,p;let a=[],s=1/0;const u=tP(e,n,t+rP);for(const _ of u){const h=[...((c=_.internals.handleBounds)==null?void 0:c.source)??[],...((p=_.internals.handleBounds)==null?void 0:p.target)??[]];for(const f of h){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:y,y:v}=Po(_,f,f.position,!0),x=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(v-e.y,2));x>t||(x<s?(a=[{...f,x:y,y:v}],s=x):x===s&&a.push({...f,x:y,y:v}))}}if(!a.length)return null;if(a.length>1){const _=o.type==="source"?"target":"source";return a.find(h=>h.type===_)??a[0]}return a[0]}function kC(e,t,n,o,a,s=!1){var _,h,f;const u=o.get(e);if(!u)return null;const c=a==="strict"?(_=u.internals.handleBounds)==null?void 0:_[t]:[...((h=u.internals.handleBounds)==null?void 0:h.source)??[],...((f=u.internals.handleBounds)==null?void 0:f.target)??[]],p=(n?c==null?void 0:c.find(y=>y.id===n):c==null?void 0:c[0])??null;return p&&s?{...p,...Po(u,p,p.position,!0)}:p}function CC(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function iP(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const MC=()=>!0;function oP(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:c,nodeLookup:p,lib:_,autoPanOnConnect:h,flowId:f,panBy:y,cancelConnection:v,onConnectStart:x,onConnect:k,onConnectEnd:w,isValidConnection:b=MC,onReconnectEnd:E,updateConnection:q,getTransform:M,getFromHandle:I,autoPanSpeed:C,dragThreshold:T=1,handleDomNode:R}){const P=hC(e.target);let z=0,F;const{x:D,y:X}=In(e),N=CC(s,R),G=c==null?void 0:c.getBoundingClientRect();let $=!1;if(!G||!N)return;const re=kC(a,N,o,p,t);if(!re)return;let Y=In(e,G),Q=!1,ie=null,H=!1,J=null;function me(){if(!h||!G)return;const[Re,je]=pC(Y,G,C);y({x:Re,y:je}),z=requestAnimationFrame(me)}const W={...re,nodeId:a,type:N,position:re.position},te=p.get(a);let pe={inProgress:!0,isValid:null,from:Po(te,W,$e.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:te,to:Y,toHandle:null,toPosition:Kx[W.position],toNode:null,pointer:Y};function ue(){$=!0,q(pe),x==null||x(e,{nodeId:a,handleId:o,handleType:N})}T===0&&ue();function ve(Re){if(!$){const{x:Be,y:st}=In(Re),at=Be-D,It=st-X;if(!(at*at+It*It>T*T))return;ue()}if(!I()||!W){Ie(Re);return}const je=M();Y=In(Re,G),F=nP(Zs(Y,je,!1,[1,1]),n,p,W),Q||(me(),Q=!0);const Te=EC(Re,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:o,fromType:u?"target":"source",isValidConnection:b,doc:P,lib:_,flowId:f,nodeLookup:p});J=Te.handleDomNode,ie=Te.connection,H=iP(!!F,Te.isValid);const Pe=p.get(a),Ae=Pe?Po(Pe,W,$e.Left,!0):pe.from,Ue={...pe,from:Ae,isValid:H,to:Te.toHandle&&H?Ul({x:Te.toHandle.x,y:Te.toHandle.y},je):Y,toHandle:Te.toHandle,toPosition:H&&Te.toHandle?Te.toHandle.position:Kx[W.position],toNode:Te.toHandle?p.get(Te.toHandle.nodeId):null,pointer:Y};q(Ue),pe=Ue}function Ie(Re){if(!("touches"in Re&&Re.touches.length>0)){if($){(F||J)&&ie&&H&&(k==null||k(ie));const{inProgress:je,...Te}=pe,Pe={...Te,toPosition:pe.toHandle?pe.toPosition:null};w==null||w(Re,Pe),s&&(E==null||E(Re,Pe))}v(),cancelAnimationFrame(z),Q=!1,H=!1,ie=null,J=null,P.removeEventListener("mousemove",ve),P.removeEventListener("mouseup",Ie),P.removeEventListener("touchmove",ve),P.removeEventListener("touchend",Ie)}}P.addEventListener("mousemove",ve),P.addEventListener("mouseup",Ie),P.addEventListener("touchmove",ve),P.addEventListener("touchend",Ie)}function EC(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:s,doc:u,lib:c,flowId:p,isValidConnection:_=MC,nodeLookup:h}){const f=s==="target",y=t?u.querySelector(`.${c}-flow__handle[data-id="${p}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:v,y:x}=In(e),k=u.elementFromPoint(v,x),w=k!=null&&k.classList.contains(`${c}-flow__handle`)?k:y,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const E=CC(void 0,w),q=w.getAttribute("data-nodeid"),M=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),C=w.classList.contains("connectableend");if(!q||!E)return b;const T={source:f?q:o,sourceHandle:f?M:a,target:f?o:q,targetHandle:f?a:M};b.connection=T;const P=I&&C&&(n===Sa.Strict?f&&E==="source"||!f&&E==="target":q!==o||M!==a);b.isValid=P&&_(T),b.toHandle=kC(q,E,M,h,n,!0)}return b}const p0={onPointerDown:oP,isValid:EC};function aP({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const a=Gr(e);function s({translateExtent:c,width:p,height:_,zoomStep:h=1,pannable:f=!0,zoomable:y=!0,inversePan:v=!1}){const x=q=>{if(q.sourceEvent.type!=="wheel"||!t)return;const M=n(),I=q.sourceEvent.ctrlKey&&Ls()?10:1,C=-q.sourceEvent.deltaY*(q.sourceEvent.deltaMode===1?.05:q.sourceEvent.deltaMode?1:.002)*h,T=M[2]*Math.pow(2,C*I);t.scaleTo(T)};let k=[0,0];const w=q=>{(q.sourceEvent.type==="mousedown"||q.sourceEvent.type==="touchstart")&&(k=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY])},b=q=>{const M=n();if(q.sourceEvent.type!=="mousemove"&&q.sourceEvent.type!=="touchmove"||!t)return;const I=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY],C=[I[0]-k[0],I[1]-k[1]];k=I;const T=o()*Math.max(M[2],Math.log(M[2]))*(v?-1:1),R={x:M[0]-C[0]*T,y:M[1]-C[1]*T},P=[[0,0],[p,_]];t.setViewportConstrained({x:R.x,y:R.y,zoom:M[2]},P,c)},E=iC().on("start",w).on("zoom",f?b:null).on("zoom.wheel",y?x:null);a.call(E,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:Sn}}const fc=e=>({x:e.x,y:e.y,zoom:e.k}),kp=({x:e,y:t,zoom:n})=>dc.translate(e,t).scale(n),ya=(e,t)=>e.target.closest(`.${t}`),IC=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),sP=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Cp=(e,t=0,n=sP,o=()=>{})=>{const a=typeof t=="number"&&t>0;return a||o(),a?e.transition().duration(t).ease(n).on("end",o):e},jC=e=>{const t=e.ctrlKey&&Ls()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function uP({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:c,onPanZoom:p,onPanZoomEnd:_}){return h=>{if(ya(h,t))return h.ctrlKey&&h.preventDefault(),!1;h.preventDefault(),h.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(h.ctrlKey&&u){const w=Sn(h),b=jC(h),E=f*Math.pow(2,b);o.scaleTo(n,E,w,h);return}const y=h.deltaMode===1?20:1;let v=a===Io.Vertical?0:h.deltaX*y,x=a===Io.Horizontal?0:h.deltaY*y;!Ls()&&h.shiftKey&&a!==Io.Vertical&&(v=h.deltaY*y,x=0),o.translateBy(n,-(v/f)*s,-(x/f)*s,{internal:!0});const k=fc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(p==null||p(h,k),e.panScrollTimeout=setTimeout(()=>{_==null||_(h,k),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c==null||c(h,k))}}function lP({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,a){const s=o.type==="wheel",u=!t&&s&&!o.ctrlKey,c=ya(o,e);if(o.ctrlKey&&s&&c&&o.preventDefault(),u||c)return null;o.preventDefault(),n.call(this,o,a)}}function cP({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var s,u,c;if((s=o.sourceEvent)!=null&&s.internal)return;const a=fc(o.transform);e.mouseButton=((u=o.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((c=o.sourceEvent)==null?void 0:c.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,a))}}function dP({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:a}){return s=>{var u,c;e.usedRightMouseButton=!!(n&&IC(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||o([s.transform.x,s.transform.y,s.transform.k]),a&&!((c=s.sourceEvent)!=null&&c.internal)&&(a==null||a(s.sourceEvent,fc(s.transform)))}}function pP({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var c;if(!((c=u.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,s&&IC(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,o(!1),a)){const p=fc(u.transform);e.prevViewport=p,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,p)},n?150:0)}}}function _P({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:c,noPanClassName:p,lib:_,connectionInProgress:h}){return f=>{var w;const y=e||t,v=n&&f.ctrlKey,x=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(ya(f,`${_}-flow__node`)||ya(f,`${_}-flow__edge`)))return!0;if(!o&&!y&&!a&&!s&&!n||u||h&&!x||ya(f,c)&&x||ya(f,p)&&(!x||a&&x&&!e)||!n&&f.ctrlKey&&x)return!1;if(!n&&f.type==="touchstart"&&((w=f.touches)==null?void 0:w.length)>1)return f.preventDefault(),!1;if(!y&&!a&&!v&&x||!o&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(o)&&!o.includes(f.button)&&f.type==="mousedown")return!1;const k=Array.isArray(o)&&o.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||x)&&k}}function fP({domNode:e,minZoom:t,maxZoom:n,translateExtent:o,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:c,onDraggingChange:p}){const _={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=iC().scaleExtent([t,n]).translateExtent(o),y=Gr(e).call(f);E({x:a.x,y:a.y,zoom:ka(a.zoom,t,n)},[[0,0],[h.width,h.height]],o);const v=y.on("wheel.zoom"),x=y.on("dblclick.zoom");f.wheelDelta(jC);function k(F,D){return y?new Promise(X=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Ss:jl).transform(Cp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>X(!0)),F)}):Promise.resolve(!1)}function w({noWheelClassName:F,noPanClassName:D,onPaneContextMenu:X,userSelectionActive:N,panOnScroll:G,panOnDrag:$,panOnScrollMode:re,panOnScrollSpeed:Y,preventScrolling:Q,zoomOnPinch:ie,zoomOnScroll:H,zoomOnDoubleClick:J,zoomActivationKeyPressed:me,lib:W,onTransformChange:te,connectionInProgress:oe,paneClickDistance:pe,selectionOnDrag:ue}){N&&!_.isZoomingOrPanning&&b();const ve=G&&!me&&!N;f.clickDistance(ue?1/0:!En(pe)||pe<0?0:pe);const Ie=ve?uP({zoomPanValues:_,noWheelClassName:F,d3Selection:y,d3Zoom:f,panOnScrollMode:re,panOnScrollSpeed:Y,zoomOnPinch:ie,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:c}):lP({noWheelClassName:F,preventScrolling:Q,d3ZoomHandler:v});if(y.on("wheel.zoom",Ie,{passive:!1}),!N){const je=cP({zoomPanValues:_,onDraggingChange:p,onPanZoomStart:u});f.on("start",je);const Te=dP({zoomPanValues:_,panOnDrag:$,onPaneContextMenu:!!X,onPanZoom:s,onTransformChange:te});f.on("zoom",Te);const Pe=pP({zoomPanValues:_,panOnDrag:$,panOnScroll:G,onPaneContextMenu:X,onPanZoomEnd:c,onDraggingChange:p});f.on("end",Pe)}const Re=_P({zoomActivationKeyPressed:me,panOnDrag:$,zoomOnScroll:H,panOnScroll:G,zoomOnDoubleClick:J,zoomOnPinch:ie,userSelectionActive:N,noPanClassName:D,noWheelClassName:F,lib:W,connectionInProgress:oe});f.filter(Re),J?y.on("dblclick.zoom",x):y.on("dblclick.zoom",null)}function b(){f.on("zoom",null)}async function E(F,D,X){const N=kp(F),G=f==null?void 0:f.constrain()(N,D,X);return G&&await k(G),new Promise($=>$(G))}async function q(F,D){const X=kp(F);return await k(X,D),new Promise(N=>N(X))}function M(F){if(y){const D=kp(F),X=y.property("__zoom");(X.k!==F.zoom||X.x!==F.x||X.y!==F.y)&&(f==null||f.transform(y,D,null,{sync:!0}))}}function I(){const F=y?nC(y.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function C(F,D){return y?new Promise(X=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Ss:jl).scaleTo(Cp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>X(!0)),F)}):Promise.resolve(!1)}function T(F,D){return y?new Promise(X=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Ss:jl).scaleBy(Cp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>X(!0)),F)}):Promise.resolve(!1)}function R(F){f==null||f.scaleExtent(F)}function P(F){f==null||f.translateExtent(F)}function z(F){const D=!En(F)||F<0?0:F;f==null||f.clickDistance(D)}return{update:w,destroy:b,setViewport:q,setViewportConstrained:E,getViewport:I,scaleTo:C,scaleBy:T,setScaleExtent:R,setTranslateExtent:P,syncViewport:M,setClickDistance:z}}var Ea;(function(e){e.Line="line",e.Handle="handle"})(Ea||(Ea={}));function mP({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:a,affectsY:s}){const u=e-t,c=n-o,p=[u>0?1:u<0?-1:0,c>0?1:c<0?-1:0];return u&&a&&(p[0]=p[0]*-1),c&&s&&(p[1]=p[1]*-1),p}function s1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:a}}function Bi(e,t){return Math.max(0,t-e)}function Hi(e,t){return Math.max(0,e-t)}function gl(e,t,n){return Math.max(0,t-e,e-n)}function u1(e,t){return e?!t:t}function hP(e,t,n,o,a,s,u,c){let{affectsX:p,affectsY:_}=t;const{isHorizontal:h,isVertical:f}=t,y=h&&f,{xSnapped:v,ySnapped:x}=n,{minWidth:k,maxWidth:w,minHeight:b,maxHeight:E}=o,{x:q,y:M,width:I,height:C,aspectRatio:T}=e;let R=Math.floor(h?v-e.pointerX:0),P=Math.floor(f?x-e.pointerY:0);const z=I+(p?-R:R),F=C+(_?-P:P),D=-s[0]*I,X=-s[1]*C;let N=gl(z,k,w),G=gl(F,b,E);if(u){let Y=0,Q=0;p&&R<0?Y=Bi(q+R+D,u[0][0]):!p&&R>0&&(Y=Hi(q+z+D,u[1][0])),_&&P<0?Q=Bi(M+P+X,u[0][1]):!_&&P>0&&(Q=Hi(M+F+X,u[1][1])),N=Math.max(N,Y),G=Math.max(G,Q)}if(c){let Y=0,Q=0;p&&R>0?Y=Hi(q+R,c[0][0]):!p&&R<0&&(Y=Bi(q+z,c[1][0])),_&&P>0?Q=Hi(M+P,c[0][1]):!_&&P<0&&(Q=Bi(M+F,c[1][1])),N=Math.max(N,Y),G=Math.max(G,Q)}if(a){if(h){const Y=gl(z/T,b,E)*T;if(N=Math.max(N,Y),u){let Q=0;!p&&!_||p&&!_&&y?Q=Hi(M+X+z/T,u[1][1])*T:Q=Bi(M+X+(p?R:-R)/T,u[0][1])*T,N=Math.max(N,Q)}if(c){let Q=0;!p&&!_||p&&!_&&y?Q=Bi(M+z/T,c[1][1])*T:Q=Hi(M+(p?R:-R)/T,c[0][1])*T,N=Math.max(N,Q)}}if(f){const Y=gl(F*T,k,w)/T;if(G=Math.max(G,Y),u){let Q=0;!p&&!_||_&&!p&&y?Q=Hi(q+F*T+D,u[1][0])/T:Q=Bi(q+(_?P:-P)*T+D,u[0][0])/T,G=Math.max(G,Q)}if(c){let Q=0;!p&&!_||_&&!p&&y?Q=Bi(q+F*T,c[1][0])/T:Q=Hi(q+(_?P:-P)*T,c[0][0])/T,G=Math.max(G,Q)}}}P=P+(P<0?G:-G),R=R+(R<0?N:-N),a&&(y?z>F*T?P=(u1(p,_)?-R:R)/T:R=(u1(p,_)?-P:P)*T:h?(P=R/T,_=p):(R=P*T,p=_));const $=p?q+R:q,re=_?M+P:M;return{width:I+(p?-R:R),height:C+(_?-P:P),x:s[0]*R*(p?-1:1)+$,y:s[1]*P*(_?-1:1)+re}}const TC={width:0,height:0,x:0,y:0},yP={...TC,pointerX:0,pointerY:0,aspectRatio:1};function gP(e){return[[0,0],[e.measured.width,e.measured.height]]}function vP(e,t,n){const o=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,c=n[0]*s,p=n[1]*u;return[[o-c,a-p],[o+s-c,a+u-p]]}function xP({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:a}){const s=Gr(e);let u={controlDirection:s1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:_,boundaries:h,keepAspectRatio:f,resizeDirection:y,onResizeStart:v,onResize:x,onResizeEnd:k,shouldResize:w}){let b={...TC},E={...yP};u={boundaries:h,resizeDirection:y,keepAspectRatio:f,controlDirection:s1(_)};let q,M=null,I=[],C,T,R,P=!1;const z=Hk().on("start",F=>{const{nodeLookup:D,transform:X,snapGrid:N,snapToGrid:G,nodeOrigin:$,paneDomNode:re}=n();if(q=D.get(t),!q)return;M=(re==null?void 0:re.getBoundingClientRect())??null;const{xSnapped:Y,ySnapped:Q}=ks(F.sourceEvent,{transform:X,snapGrid:N,snapToGrid:G,containerBounds:M});b={width:q.measured.width??0,height:q.measured.height??0,x:q.position.x??0,y:q.position.y??0},E={...b,pointerX:Y,pointerY:Q,aspectRatio:b.width/b.height},C=void 0,q.parentId&&(q.extent==="parent"||q.expandParent)&&(C=D.get(q.parentId),T=C&&q.extent==="parent"?gP(C):void 0),I=[],R=void 0;for(const[ie,H]of D)if(H.parentId===t&&(I.push({id:ie,position:{...H.position},extent:H.extent}),H.extent==="parent"||H.expandParent)){const J=vP(H,q,H.origin??$);R?R=[[Math.min(J[0][0],R[0][0]),Math.min(J[0][1],R[0][1])],[Math.max(J[1][0],R[1][0]),Math.max(J[1][1],R[1][1])]]:R=J}v==null||v(F,{...b})}).on("drag",F=>{const{transform:D,snapGrid:X,snapToGrid:N,nodeOrigin:G}=n(),$=ks(F.sourceEvent,{transform:D,snapGrid:X,snapToGrid:N,containerBounds:M}),re=[];if(!q)return;const{x:Y,y:Q,width:ie,height:H}=b,J={},me=q.origin??G,{width:W,height:te,x:oe,y:pe}=hP(E,u.controlDirection,$,u.boundaries,u.keepAspectRatio,me,T,R),ue=W!==ie,ve=te!==H,Ie=oe!==Y&&ue,Re=pe!==Q&&ve;if(!Ie&&!Re&&!ue&&!ve)return;if((Ie||Re||me[0]===1||me[1]===1)&&(J.x=Ie?oe:b.x,J.y=Re?pe:b.y,b.x=J.x,b.y=J.y,I.length>0)){const Ae=oe-Y,Ue=pe-Q;for(const Be of I)Be.position={x:Be.position.x-Ae+me[0]*(W-ie),y:Be.position.y-Ue+me[1]*(te-H)},re.push(Be)}if((ue||ve)&&(J.width=ue&&(!u.resizeDirection||u.resizeDirection==="horizontal")?W:b.width,J.height=ve&&(!u.resizeDirection||u.resizeDirection==="vertical")?te:b.height,b.width=J.width,b.height=J.height),C&&q.expandParent){const Ae=me[0]*(J.width??0);J.x&&J.x<Ae&&(b.x=Ae,E.x=E.x-(J.x-Ae));const Ue=me[1]*(J.height??0);J.y&&J.y<Ue&&(b.y=Ue,E.y=E.y-(J.y-Ue))}const je=mP({width:b.width,prevWidth:ie,height:b.height,prevHeight:H,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Te={...b,direction:je};(w==null?void 0:w(F,Te))!==!1&&(P=!0,x==null||x(F,Te),o(J,re))}).on("end",F=>{P&&(k==null||k(F,{...b}),a==null||a({...b}),P=!1)});s.call(z)}function p(){s.on(".drag",null)}return{update:c,destroy:p}}var Mp={exports:{}},Ep={},Ip={exports:{}},jp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function wP(){if(l1)return jp;l1=1;var e=Us();function t(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function c(f,y){var v=y(),x=o({inst:{value:v,getSnapshot:y}}),k=x[0].inst,w=x[1];return s(function(){k.value=v,k.getSnapshot=y,p(k)&&w({inst:k})},[f,v,y]),a(function(){return p(k)&&w({inst:k}),f(function(){p(k)&&w({inst:k})})},[f]),u(v),v}function p(f){var y=f.getSnapshot;f=f.value;try{var v=y();return!n(f,v)}catch{return!0}}function _(f,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:c;return jp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,jp}var c1;function bP(){return c1||(c1=1,Ip.exports=wP()),Ip.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function qP(){if(d1)return Ep;d1=1;var e=Us(),t=bP();function n(_,h){return _===h&&(_!==0||1/_===1/h)||_!==_&&h!==h}var o=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,c=e.useMemo,p=e.useDebugValue;return Ep.useSyncExternalStoreWithSelector=function(_,h,f,y,v){var x=s(null);if(x.current===null){var k={hasValue:!1,value:null};x.current=k}else k=x.current;x=c(function(){function b(C){if(!E){if(E=!0,q=C,C=y(C),v!==void 0&&k.hasValue){var T=k.value;if(v(T,C))return M=T}return M=C}if(T=M,o(q,C))return T;var R=y(C);return v!==void 0&&v(T,R)?(q=C,T):(q=C,M=R)}var E=!1,q,M,I=f===void 0?null:f;return[function(){return b(h())},I===null?void 0:function(){return b(I())}]},[h,f,y,v]);var w=a(_,x[0],x[1]);return u(function(){k.hasValue=!0,k.value=w},[w]),p(w),w},Ep}var p1;function SP(){return p1||(p1=1,Mp.exports=qP()),Mp.exports}var kP=SP();const CP=Ws(kP),MP={},_1=e=>{let t;const n=new Set,o=(h,f)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const v=t;t=f??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(x=>x(t,v))}},a=()=>t,p={setState:o,getState:a,getInitialState:()=>_,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(MP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},_=t=e(o,a,p);return p},EP=e=>e?_1(e):_1,{useDebugValue:IP}=Mk,{useSyncExternalStoreWithSelector:jP}=CP,TP=e=>e;function NC(e,t=TP,n){const o=jP(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return IP(o),o}const f1=(e,t)=>{const n=EP(e),o=(a,s=t)=>NC(n,a,s);return Object.assign(o,n),o},NP=(e,t)=>e?f1(e,t):f1;function gt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,a]of e)if(!Object.is(a,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var PP=Ek();const RP=Ws(PP),mc=L.createContext(null),AP=mc.Provider,PC=Gn.error001();function et(e,t){const n=L.useContext(mc);if(n===null)throw new Error(PC);return NC(n,e,t)}function vt(){const e=L.useContext(mc);if(e===null)throw new Error(PC);return L.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const m1={display:"none"},FP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},RC="react-flow__node-desc",AC="react-flow__edge-desc",LP="react-flow__aria-live",OP=e=>e.ariaLiveMessage,DP=e=>e.ariaLabelConfig;function VP({rfId:e}){const t=et(OP);return d.jsx("div",{id:`${LP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:FP,children:t})}function zP({rfId:e,disableKeyboardA11y:t}){const n=et(DP);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${RC}-${e}`,style:m1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${AC}-${e}`,style:m1,children:n["edge.a11yDescription.default"]}),!t&&d.jsx(VP,{rfId:e})]})}const Ia=L.forwardRef(({position:e="top-left",children:t,className:n,style:o,...a},s)=>{const u=`${e}`.split("-");return d.jsx("div",{className:Dt(["react-flow__panel",n,...u]),style:o,ref:s,...a,children:t})});Ia.displayName="Panel";function BP({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:d.jsx(Ia,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const HP=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},vl=e=>e.id;function $P(e,t){return gt(e.selectedNodes.map(vl),t.selectedNodes.map(vl))&&gt(e.selectedEdges.map(vl),t.selectedEdges.map(vl))}function WP({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:o}=et(HP,$P);return L.useEffect(()=>{const a={nodes:n,edges:o};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,o,e]),null}const UP=e=>!!e.onSelectionChangeHandlers;function GP({onSelectionChange:e}){const t=et(UP);return e||t?d.jsx(WP,{onSelectionChange:e}):null}const FC=[0,0],KP={x:0,y:0,zoom:1},YP=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],h1=[...YP,"rfId"],QP=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),y1={translateExtent:Rs,nodeOrigin:FC,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function XP(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:c,setDefaultNodesAndEdges:p}=et(QP,gt),_=vt();L.useEffect(()=>(p(e.defaultNodes,e.defaultEdges),()=>{h.current=y1,c()}),[]);const h=L.useRef(y1);return L.useEffect(()=>{for(const f of h1){const y=e[f],v=h.current[f];y!==v&&(typeof e[f]>"u"||(f==="nodes"?t(y):f==="edges"?n(y):f==="minZoom"?o(y):f==="maxZoom"?a(y):f==="translateExtent"?s(y):f==="nodeExtent"?u(y):f==="ariaLabelConfig"?_.setState({ariaLabelConfig:PN(y)}):f==="fitView"?_.setState({fitViewQueued:y}):f==="fitViewOptions"?_.setState({fitViewOptions:y}):_.setState({[f]:y})))}h.current=e},h1.map(f=>e[f])),null}function g1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ZP(e){var o;const[t,n]=L.useState(e==="system"?null:e);return L.useEffect(()=>{if(e!=="system"){n(e);return}const a=g1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(o=g1())!=null&&o.matches?"dark":"light"}const v1=typeof document<"u"?document:null;function Os(e=null,t={target:v1,actInsideInputWithModifier:!0}){const[n,o]=L.useState(!1),a=L.useRef(!1),s=L.useRef(new Set([])),[u,c]=L.useMemo(()=>{if(e!==null){const _=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=_.reduce((f,y)=>f.concat(...y),[]);return[_,h]}return[[],[]]},[e]);return L.useEffect(()=>{const p=(t==null?void 0:t.target)??v1,_=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const h=v=>{var w,b;if(a.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!a.current||a.current&&!_)&&yC(v))return!1;const k=w1(v.code,c);if(s.current.add(v[k]),x1(u,s.current,!1)){const E=((b=(w=v.composedPath)==null?void 0:w.call(v))==null?void 0:b[0])||v.target,q=(E==null?void 0:E.nodeName)==="BUTTON"||(E==null?void 0:E.nodeName)==="A";t.preventDefault!==!1&&(a.current||!q)&&v.preventDefault(),o(!0)}},f=v=>{const x=w1(v.code,c);x1(u,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(v[x]),v.key==="Meta"&&s.current.clear(),a.current=!1},y=()=>{s.current.clear(),o(!1)};return p==null||p.addEventListener("keydown",h),p==null||p.addEventListener("keyup",f),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{p==null||p.removeEventListener("keydown",h),p==null||p.removeEventListener("keyup",f),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,o]),n}function x1(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(a=>t.has(a)))}function w1(e,t){return t.includes(e)?"code":"key"}const JP=()=>{const e=vt();return L.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??o,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{const{width:o,height:a,minZoom:s,maxZoom:u,panZoom:c}=e.getState(),p=V0(t,o,a,s,u,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(p,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:c,y:p}=u.getBoundingClientRect(),_={x:t.x-c,y:t.y-p},h=n.snapGrid??a,f=n.snapToGrid??s;return Zs(_,o,f,h)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:a,y:s}=o.getBoundingClientRect(),u=Ul(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function LC(e,t){const n=[],o=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")o.set(s.id,[s]);else{const u=o.get(s.id);u?u.push(s):o.set(s.id,[s])}for(const s of t){const u=o.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const c={...s};for(const p of u)eR(p,c);n.push(c)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function eR(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function OC(e,t){return LC(e,t)}function DC(e,t){return LC(e,t)}function Co(e,t){return{id:e,type:"select",selected:t}}function ga(e,t=new Set,n=!1){const o=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),o.push(Co(s.id,u)))}return o}function b1({items:e=[],lookup:t}){var a;const n=[],o=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const c=t.get(u.id),p=((a=c==null?void 0:c.internals)==null?void 0:a.userNode)??c;p!==void 0&&p!==u&&n.push({id:u.id,item:u,type:"replace"}),p===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)o.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function q1(e){return{id:e.id,type:"remove"}}const S1=e=>qN(e),tR=e=>lC(e);function VC(e){return L.forwardRef(e)}const rR=typeof window<"u"?L.useLayoutEffect:L.useEffect;function k1(e){const[t,n]=L.useState(BigInt(0)),[o]=L.useState(()=>nR(()=>n(a=>a+BigInt(1))));return rR(()=>{const a=o.get();a.length&&(e(a),o.reset())},[t]),o}function nR(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const zC=L.createContext(null);function iR({children:e}){const t=vt(),n=L.useCallback(c=>{const{nodes:p=[],setNodes:_,hasDefaultNodes:h,onNodesChange:f,nodeLookup:y,fitViewQueued:v,onNodesChangeMiddlewareMap:x}=t.getState();let k=p;for(const b of c)k=typeof b=="function"?b(k):b;let w=b1({items:k,lookup:y});for(const b of x.values())w=b(w);h&&_(k),w.length>0?f==null||f(w):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:E,setNodes:q}=t.getState();b&&q(E)})},[]),o=k1(n),a=L.useCallback(c=>{const{edges:p=[],setEdges:_,hasDefaultEdges:h,onEdgesChange:f,edgeLookup:y}=t.getState();let v=p;for(const x of c)v=typeof x=="function"?x(v):x;h?_(v):f&&f(b1({items:v,lookup:y}))},[]),s=k1(a),u=L.useMemo(()=>({nodeQueue:o,edgeQueue:s}),[]);return d.jsx(zC.Provider,{value:u,children:e})}function oR(){const e=L.useContext(zC);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const aR=e=>!!e.panZoom;function Y0(){const e=JP(),t=vt(),n=oR(),o=et(aR),a=L.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),u=f=>{n.nodeQueue.push(f)},c=f=>{n.edgeQueue.push(f)},p=f=>{var b,E;const{nodeLookup:y,nodeOrigin:v}=t.getState(),x=S1(f)?f:y.get(f.id),k=x.parentId?mC(x.position,x.measured,x.parentId,y,v):x.position,w={...x,position:k,width:((b=x.measured)==null?void 0:b.width)??x.width,height:((E=x.measured)==null?void 0:E.height)??x.height};return Ca(w)},_=(f,y,v={replace:!1})=>{u(x=>x.map(k=>{if(k.id===f){const w=typeof y=="function"?y(k):y;return v.replace&&S1(w)?w:{...k,...w}}return k}))},h=(f,y,v={replace:!1})=>{c(x=>x.map(k=>{if(k.id===f){const w=typeof y=="function"?y(k):y;return v.replace&&tR(w)?w:{...k,...w}}return k}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var y;return(y=s(f))==null?void 0:y.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(y=>({...y}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:u,setEdges:c,addNodes:f=>{const y=Array.isArray(f)?f:[f];n.nodeQueue.push(v=>[...v,...y])},addEdges:f=>{const y=Array.isArray(f)?f:[f];n.edgeQueue.push(v=>[...v,...y])},toObject:()=>{const{nodes:f=[],edges:y=[],transform:v}=t.getState(),[x,k,w]=v;return{nodes:f.map(b=>({...b})),edges:y.map(b=>({...b})),viewport:{x,y:k,zoom:w}}},deleteElements:async({nodes:f=[],edges:y=[]})=>{const{nodes:v,edges:x,onNodesDelete:k,onEdgesDelete:w,triggerNodeChanges:b,triggerEdgeChanges:E,onDelete:q,onBeforeDelete:M}=t.getState(),{nodes:I,edges:C}=await EN({nodesToRemove:f,edgesToRemove:y,nodes:v,edges:x,onBeforeDelete:M}),T=C.length>0,R=I.length>0;if(T){const P=C.map(q1);w==null||w(C),E(P)}if(R){const P=I.map(q1);k==null||k(I),b(P)}return(R||T)&&(q==null||q({nodes:I,edges:C})),{deletedNodes:I,deletedEdges:C}},getIntersectingNodes:(f,y=!0,v)=>{const x=Qx(f),k=x?f:p(f),w=v!==void 0;return k?(v||t.getState().nodes).filter(b=>{const E=t.getState().nodeLookup.get(b.id);if(E&&!x&&(b.id===f.id||!E.internals.positionAbsolute))return!1;const q=Ca(w?b:E),M=Fs(q,k);return y&&M>0||M>=q.width*q.height||M>=k.width*k.height}):[]},isNodeIntersecting:(f,y,v=!0)=>{const k=Qx(f)?f:p(f);if(!k)return!1;const w=Fs(k,y);return v&&w>0||w>=y.width*y.height||w>=k.width*k.height},updateNode:_,updateNodeData:(f,y,v={replace:!1})=>{_(f,x=>{const k=typeof y=="function"?y(x):y;return v.replace?{...x,data:k}:{...x,data:{...x.data,...k}}},v)},updateEdge:h,updateEdgeData:(f,y,v={replace:!1})=>{h(f,x=>{const k=typeof y=="function"?y(x):y;return v.replace?{...x,data:k}:{...x,data:{...x.data,...k}}},v)},getNodesBounds:f=>{const{nodeLookup:y,nodeOrigin:v}=t.getState();return SN(f,{nodeLookup:y,nodeOrigin:v})},getHandleConnections:({type:f,id:y,nodeId:v})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${v}-${f}${y?`-${y}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:f,handleId:y,nodeId:v})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${v}${f?y?`-${f}-${y}`:`-${f}`:""}`))==null?void 0:x.values())??[])},fitView:async f=>{const y=t.getState().fitViewResolver??NN();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:y}),n.nodeQueue.push(v=>[...v]),y.promise}}},[]);return L.useMemo(()=>({...a,...e,viewportInitialized:o}),[o])}const C1=e=>e.selected,sR=typeof window<"u"?window:void 0;function uR({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:o}=Y0(),a=Os(e,{actInsideInputWithModifier:!1}),s=Os(t,{target:sR});L.useEffect(()=>{if(a){const{edges:u,nodes:c}=n.getState();o({nodes:c.filter(C1),edges:u.filter(C1)}),n.setState({nodesSelectionActive:!1})}},[a]),L.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function lR(e){const t=vt();L.useEffect(()=>{const n=()=>{var a,s,u,c;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const o=z0(e.current);(o.height===0||o.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",Gn.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const hc={position:"absolute",width:"100%",height:"100%",top:0,left:0},cR=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function dR({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=Io.Free,zoomOnDoubleClick:u=!0,panOnDrag:c=!0,defaultViewport:p,translateExtent:_,minZoom:h,maxZoom:f,zoomActivationKeyCode:y,preventScrolling:v=!0,children:x,noWheelClassName:k,noPanClassName:w,onViewportChange:b,isControlledViewport:E,paneClickDistance:q,selectionOnDrag:M}){const I=vt(),C=L.useRef(null),{userSelectionActive:T,lib:R,connectionInProgress:P}=et(cR,gt),z=Os(y),F=L.useRef();lR(C);const D=L.useCallback(X=>{b==null||b({x:X[0],y:X[1],zoom:X[2]}),E||I.setState({transform:X})},[b,E]);return L.useEffect(()=>{if(C.current){F.current=fP({domNode:C.current,minZoom:h,maxZoom:f,translateExtent:_,viewport:p,onDraggingChange:$=>I.setState({paneDragging:$}),onPanZoomStart:($,re)=>{const{onViewportChangeStart:Y,onMoveStart:Q}=I.getState();Q==null||Q($,re),Y==null||Y(re)},onPanZoom:($,re)=>{const{onViewportChange:Y,onMove:Q}=I.getState();Q==null||Q($,re),Y==null||Y(re)},onPanZoomEnd:($,re)=>{const{onViewportChangeEnd:Y,onMoveEnd:Q}=I.getState();Q==null||Q($,re),Y==null||Y(re)}});const{x:X,y:N,zoom:G}=F.current.getViewport();return I.setState({panZoom:F.current,transform:[X,N,G],domNode:C.current.closest(".react-flow")}),()=>{var $;($=F.current)==null||$.destroy()}}},[]),L.useEffect(()=>{var X;(X=F.current)==null||X.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:c,zoomActivationKeyPressed:z,preventScrolling:v,noPanClassName:w,userSelectionActive:T,noWheelClassName:k,lib:R,onTransformChange:D,connectionInProgress:P,selectionOnDrag:M,paneClickDistance:q})},[e,t,n,o,a,s,u,c,z,v,w,T,k,R,D,P,M,q]),d.jsx("div",{className:"react-flow__renderer",ref:C,style:hc,children:x})}const pR=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function _R(){const{userSelectionActive:e,userSelectionRect:t}=et(pR,gt);return e&&t?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Tp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},fR=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function mR({isSelecting:e,selectionKeyPressed:t,selectionMode:n=As.Full,panOnDrag:o,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:c,onPaneClick:p,onPaneContextMenu:_,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:y,onPaneMouseLeave:v,children:x}){const k=vt(),{userSelectionActive:w,elementsSelectable:b,dragging:E,connectionInProgress:q}=et(fR,gt),M=b&&(e||w),I=L.useRef(null),C=L.useRef(),T=L.useRef(new Set),R=L.useRef(new Set),P=L.useRef(!1),z=Y=>{if(P.current||q){P.current=!1;return}p==null||p(Y),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},F=Y=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){Y.preventDefault();return}_==null||_(Y)},D=h?Y=>h(Y):void 0,X=Y=>{P.current&&(Y.stopPropagation(),P.current=!1)},N=Y=>{var te,oe;const{domNode:Q}=k.getState();if(C.current=Q==null?void 0:Q.getBoundingClientRect(),!C.current)return;const ie=Y.target===I.current;if(!ie&&!!Y.target.closest(".nokey")||!e||!(s&&ie||t)||Y.button!==0||!Y.isPrimary)return;(oe=(te=Y.target)==null?void 0:te.setPointerCapture)==null||oe.call(te,Y.pointerId),P.current=!1;const{x:me,y:W}=In(Y.nativeEvent,C.current);k.setState({userSelectionRect:{width:0,height:0,startX:me,startY:W,x:me,y:W}}),ie||(Y.stopPropagation(),Y.preventDefault())},G=Y=>{const{userSelectionRect:Q,transform:ie,nodeLookup:H,edgeLookup:J,connectionLookup:me,triggerNodeChanges:W,triggerEdgeChanges:te,defaultEdgeOptions:oe,resetSelectedElements:pe}=k.getState();if(!C.current||!Q)return;const{x:ue,y:ve}=In(Y.nativeEvent,C.current),{startX:Ie,startY:Re}=Q;if(!P.current){const Ue=t?0:a;if(Math.hypot(ue-Ie,ve-Re)<=Ue)return;pe(),u==null||u(Y)}P.current=!0;const je={startX:Ie,startY:Re,x:ue<Ie?ue:Ie,y:ve<Re?ve:Re,width:Math.abs(ue-Ie),height:Math.abs(ve-Re)},Te=T.current,Pe=R.current;T.current=new Set(D0(H,je,ie,n===As.Partial,!0).map(Ue=>Ue.id)),R.current=new Set;const Ae=(oe==null?void 0:oe.selectable)??!0;for(const Ue of T.current){const Be=me.get(Ue);if(Be)for(const{edgeId:st}of Be.values()){const at=J.get(st);at&&(at.selectable??Ae)&&R.current.add(st)}}if(!Xx(Te,T.current)){const Ue=ga(H,T.current,!0);W(Ue)}if(!Xx(Pe,R.current)){const Ue=ga(J,R.current);te(Ue)}k.setState({userSelectionRect:je,userSelectionActive:!0,nodesSelectionActive:!1})},$=Y=>{var Q,ie;Y.button===0&&((ie=(Q=Y.target)==null?void 0:Q.releasePointerCapture)==null||ie.call(Q,Y.pointerId),!w&&Y.target===I.current&&k.getState().userSelectionRect&&(z==null||z(Y)),k.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(c==null||c(Y),k.setState({nodesSelectionActive:T.current.size>0})))},re=o===!0||Array.isArray(o)&&o.includes(0);return d.jsxs("div",{className:Dt(["react-flow__pane",{draggable:re,dragging:E,selection:e}]),onClick:M?void 0:Tp(z,I),onContextMenu:Tp(F,I),onWheel:Tp(D,I),onPointerEnter:M?void 0:f,onPointerMove:M?G:y,onPointerUp:M?$:void 0,onPointerDownCapture:M?N:void 0,onClickCapture:M?X:void 0,onPointerLeave:v,ref:I,style:hc,children:[x,d.jsx(_R,{})]})}function _0({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:c,onError:p}=t.getState(),_=c.get(e);if(!_){p==null||p("012",Gn.error012(e));return}t.setState({nodesSelectionActive:!1}),_.selected?(n||_.selected&&u)&&(s({nodes:[_],edges:[]}),requestAnimationFrame(()=>{var h;return(h=o==null?void 0:o.current)==null?void 0:h.blur()})):a([e])}function BC({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:a,isSelectable:s,nodeClickDistance:u}){const c=vt(),[p,_]=L.useState(!1),h=L.useRef();return L.useEffect(()=>{h.current=eP({getStoreItems:()=>c.getState(),onNodeMouseDown:f=>{_0({id:f,store:c,nodeRef:e})},onDragStart:()=>{_(!0)},onDragStop:()=>{_(!1)}})},[]),L.useEffect(()=>{var f,y;if(t)(f=h.current)==null||f.destroy();else if(e.current)return(y=h.current)==null||y.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var v;(v=h.current)==null||v.destroy()}},[n,o,t,s,e,a]),p}const hR=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function HC(){const e=vt();return L.useCallback(n=>{const{nodeExtent:o,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:c,updateNodePositions:p,nodeLookup:_,nodeOrigin:h}=e.getState(),f=new Map,y=hR(u),v=a?s[0]:5,x=a?s[1]:5,k=n.direction.x*v*n.factor,w=n.direction.y*x*n.factor;for(const[,b]of _){if(!y(b))continue;let E={x:b.internals.positionAbsolute.x+k,y:b.internals.positionAbsolute.y+w};a&&(E=Xs(E,s));const{position:q,positionAbsolute:M}=cC({nodeId:b.id,nextPosition:E,nodeLookup:_,nodeExtent:o,nodeOrigin:h,onError:c});b.position=q,b.internals.positionAbsolute=M,f.set(b.id,b)}p(f)},[])}const Q0=L.createContext(null),yR=Q0.Provider;Q0.Consumer;const $C=()=>L.useContext(Q0),gR=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),vR=(e,t,n)=>o=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=o,{fromHandle:c,toHandle:p,isValid:_}=u,h=(p==null?void 0:p.nodeId)===e&&(p==null?void 0:p.id)===t&&(p==null?void 0:p.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,connectingTo:h,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Sa.Strict?(c==null?void 0:c.type)!==n:e!==(c==null?void 0:c.nodeId)||t!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!a,valid:h&&_}};function xR({type:e="source",position:t=$e.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:c,children:p,className:_,onMouseDown:h,onTouchStart:f,...y},v){var G,$;const x=u||null,k=e==="target",w=vt(),b=$C(),{connectOnClick:E,noPanClassName:q,rfId:M}=et(gR,gt),{connectingFrom:I,connectingTo:C,clickConnecting:T,isPossibleEndHandle:R,connectionInProcess:P,clickConnectionInProcess:z,valid:F}=et(vR(b,x,e),gt);b||($=(G=w.getState()).onError)==null||$.call(G,"010",Gn.error010());const D=re=>{const{defaultEdgeOptions:Y,onConnect:Q,hasDefaultEdges:ie}=w.getState(),H={...Y,...re};if(ie){const{edges:J,setEdges:me}=w.getState();me(l0(H,J))}Q==null||Q(H),c==null||c(H)},X=re=>{if(!b)return;const Y=gC(re.nativeEvent);if(a&&(Y&&re.button===0||!Y)){const Q=w.getState();p0.onPointerDown(re.nativeEvent,{handleDomNode:re.currentTarget,autoPanOnConnect:Q.autoPanOnConnect,connectionMode:Q.connectionMode,connectionRadius:Q.connectionRadius,domNode:Q.domNode,nodeLookup:Q.nodeLookup,lib:Q.lib,isTarget:k,handleId:x,nodeId:b,flowId:Q.rfId,panBy:Q.panBy,cancelConnection:Q.cancelConnection,onConnectStart:Q.onConnectStart,onConnectEnd:Q.onConnectEnd,updateConnection:Q.updateConnection,onConnect:D,isValidConnection:n||Q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:Q.autoPanSpeed,dragThreshold:Q.connectionDragThreshold})}Y?h==null||h(re):f==null||f(re)},N=re=>{const{onClickConnectStart:Y,onClickConnectEnd:Q,connectionClickStartHandle:ie,connectionMode:H,isValidConnection:J,lib:me,rfId:W,nodeLookup:te,connection:oe}=w.getState();if(!b||!ie&&!a)return;if(!ie){Y==null||Y(re.nativeEvent,{nodeId:b,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:b,type:e,id:x}});return}const pe=hC(re.target),ue=n||J,{connection:ve,isValid:Ie}=p0.isValid(re.nativeEvent,{handle:{nodeId:b,id:x,type:e},connectionMode:H,fromNodeId:ie.nodeId,fromHandleId:ie.id||null,fromType:ie.type,isValidConnection:ue,flowId:W,doc:pe,lib:me,nodeLookup:te});Ie&&ve&&D(ve);const Re=structuredClone(oe);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,Q==null||Q(re,Re),w.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${M}-${b}-${x}-${e}`,className:Dt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",q,_,{source:!k,target:k,connectable:o,connectablestart:a,connectableend:s,clickconnecting:T,connectingfrom:I,connectingto:C,valid:F,connectionindicator:o&&(!P||R)&&(P||z?s:a)}]),onMouseDown:X,onTouchStart:X,onClick:E?N:void 0,ref:v,...y,children:p})}const Ds=L.memo(VC(xR));function wR({data:e,isConnectable:t,sourcePosition:n=$e.Bottom}){return d.jsxs(d.Fragment,{children:[e==null?void 0:e.label,d.jsx(Ds,{type:"source",position:n,isConnectable:t})]})}function bR({data:e,isConnectable:t,targetPosition:n=$e.Top,sourcePosition:o=$e.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Ds,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,d.jsx(Ds,{type:"source",position:o,isConnectable:t})]})}function qR(){return null}function SR({data:e,isConnectable:t,targetPosition:n=$e.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Ds,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Kl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},M1={input:wR,default:bR,output:SR,group:qR};function kR(e){var t,n,o,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const CR=e=>{const{width:t,height:n,x:o,y:a}=Qs(e.nodeLookup,{filter:s=>!!s.selected});return{width:En(t)?t:null,height:En(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${a}px)`}};function MR({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=vt(),{width:a,height:s,transformString:u,userSelectionActive:c}=et(CR,gt),p=HC(),_=L.useRef(null);if(L.useEffect(()=>{var y;n||(y=_.current)==null||y.focus({preventScroll:!0})},[n]),BC({nodeRef:_}),c||!a||!s)return null;const h=e?y=>{const v=o.getState().nodes.filter(x=>x.selected);e(y,v)}:void 0,f=y=>{Object.prototype.hasOwnProperty.call(Kl,y.key)&&(y.preventDefault(),p({direction:Kl[y.key],factor:y.shiftKey?4:1}))};return d.jsx("div",{className:Dt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:d.jsx("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:a,height:s}})})}const E1=typeof window<"u"?window:void 0,ER=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function WC({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:c,deleteKeyCode:p,selectionKeyCode:_,selectionOnDrag:h,selectionMode:f,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:x,panActivationKeyCode:k,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:q,panOnScroll:M,panOnScrollSpeed:I,panOnScrollMode:C,zoomOnDoubleClick:T,panOnDrag:R,defaultViewport:P,translateExtent:z,minZoom:F,maxZoom:D,preventScrolling:X,onSelectionContextMenu:N,noWheelClassName:G,noPanClassName:$,disableKeyboardA11y:re,onViewportChange:Y,isControlledViewport:Q}){const{nodesSelectionActive:ie,userSelectionActive:H}=et(ER,gt),J=Os(_,{target:E1}),me=Os(k,{target:E1}),W=me||R,te=me||M,oe=h&&W!==!0,pe=J||H||oe;return uR({deleteKeyCode:p,multiSelectionKeyCode:x}),d.jsx(dR,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:q,panOnScroll:te,panOnScrollSpeed:I,panOnScrollMode:C,zoomOnDoubleClick:T,panOnDrag:!J&&W,defaultViewport:P,translateExtent:z,minZoom:F,maxZoom:D,zoomActivationKeyCode:w,preventScrolling:X,noWheelClassName:G,noPanClassName:$,onViewportChange:Y,isControlledViewport:Q,paneClickDistance:c,selectionOnDrag:oe,children:d.jsxs(mR,{onSelectionStart:y,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:W,isSelecting:!!pe,selectionMode:f,selectionKeyPressed:J,paneClickDistance:c,selectionOnDrag:oe,children:[e,ie&&d.jsx(MR,{onSelectionContextMenu:N,noPanClassName:$,disableKeyboardA11y:re})]})})}WC.displayName="FlowRenderer";const IR=L.memo(WC),jR=e=>t=>e?D0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function TR(e){return et(L.useCallback(jR(e),[e]),gt)}const NR=e=>e.updateNodeInternals;function PR(){const e=et(NR),[t]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");o.set(s,{id:s,nodeElement:a.target,force:!0})}),e(o)}));return L.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function RR({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const a=vt(),s=L.useRef(null),u=L.useRef(null),c=L.useRef(e.sourcePosition),p=L.useRef(e.targetPosition),_=L.useRef(t),h=n&&!!e.internals.handleBounds;return L.useEffect(()=>{s.current&&!e.hidden&&(!h||u.current!==s.current)&&(u.current&&(o==null||o.unobserve(u.current)),o==null||o.observe(s.current),u.current=s.current)},[h,e.hidden]),L.useEffect(()=>()=>{u.current&&(o==null||o.unobserve(u.current),u.current=null)},[]),L.useEffect(()=>{if(s.current){const f=_.current!==t,y=c.current!==e.sourcePosition,v=p.current!==e.targetPosition;(f||y||v)&&(_.current=t,c.current=e.sourcePosition,p.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function AR({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:c,elementsSelectable:p,nodesConnectable:_,nodesFocusable:h,resizeObserver:f,noDragClassName:y,noPanClassName:v,disableKeyboardA11y:x,rfId:k,nodeTypes:w,nodeClickDistance:b,onError:E}){const{node:q,internals:M,isParent:I}=et(ue=>{const ve=ue.nodeLookup.get(e),Ie=ue.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:Ie}},gt);let C=q.type||"default",T=(w==null?void 0:w[C])||M1[C];T===void 0&&(E==null||E("003",Gn.error003(C)),C="default",T=(w==null?void 0:w.default)||M1.default);const R=!!(q.draggable||c&&typeof q.draggable>"u"),P=!!(q.selectable||p&&typeof q.selectable>"u"),z=!!(q.connectable||_&&typeof q.connectable>"u"),F=!!(q.focusable||h&&typeof q.focusable>"u"),D=vt(),X=fC(q),N=RR({node:q,nodeType:C,hasDimensions:X,resizeObserver:f}),G=BC({nodeRef:N,disabled:q.hidden||!R,noDragClassName:y,handleSelector:q.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:b}),$=HC();if(q.hidden)return null;const re=hi(q),Y=kR(q),Q=P||R||t||n||o||a,ie=n?ue=>n(ue,{...M.userNode}):void 0,H=o?ue=>o(ue,{...M.userNode}):void 0,J=a?ue=>a(ue,{...M.userNode}):void 0,me=s?ue=>s(ue,{...M.userNode}):void 0,W=u?ue=>u(ue,{...M.userNode}):void 0,te=ue=>{const{selectNodesOnDrag:ve,nodeDragThreshold:Ie}=D.getState();P&&(!ve||!R||Ie>0)&&_0({id:e,store:D,nodeRef:N}),t&&t(ue,{...M.userNode})},oe=ue=>{if(!(yC(ue.nativeEvent)||x)){if(oC.includes(ue.key)&&P){const ve=ue.key==="Escape";_0({id:e,store:D,unselect:ve,nodeRef:N})}else if(R&&q.selected&&Object.prototype.hasOwnProperty.call(Kl,ue.key)){ue.preventDefault();const{ariaLabelConfig:ve}=D.getState();D.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),$({direction:Kl[ue.key],factor:ue.shiftKey?4:1})}}},pe=()=>{var Pe;if(x||!((Pe=N.current)!=null&&Pe.matches(":focus-visible")))return;const{transform:ue,width:ve,height:Ie,autoPanOnNodeFocus:Re,setCenter:je}=D.getState();if(!Re)return;D0(new Map([[e,q]]),{x:0,y:0,width:ve,height:Ie},ue,!0).length>0||je(q.position.x+re.width/2,q.position.y+re.height/2,{zoom:ue[2]})};return d.jsx("div",{className:Dt(["react-flow__node",`react-flow__node-${C}`,{[v]:R},q.className,{selected:q.selected,selectable:P,parent:I,draggable:R,dragging:G}]),ref:N,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:X?"visible":"hidden",...q.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:ie,onMouseMove:H,onMouseLeave:J,onContextMenu:me,onClick:te,onDoubleClick:W,onKeyDown:F?oe:void 0,tabIndex:F?0:void 0,onFocus:F?pe:void 0,role:q.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${RC}-${k}`,"aria-label":q.ariaLabel,...q.domAttributes,children:d.jsx(yR,{value:e,children:d.jsx(T,{id:e,data:q.data,type:C,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:q.selected??!1,selectable:P,draggable:R,deletable:q.deletable??!0,isConnectable:z,sourcePosition:q.sourcePosition,targetPosition:q.targetPosition,dragging:G,dragHandle:q.dragHandle,zIndex:M.z,parentId:q.parentId,...re})})})}var FR=L.memo(AR);const LR=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function UC(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,onError:s}=et(LR,gt),u=TR(e.onlyRenderVisibleElements),c=PR();return d.jsx("div",{className:"react-flow__nodes",style:hc,children:u.map(p=>d.jsx(FR,{id:p,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},p))})}UC.displayName="NodeRenderer";const OR=L.memo(UC);function DR(e){return et(L.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const o=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&FN({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&o.push(a.id)}return o},[e]),gt)}const VR=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return d.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},zR=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return d.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},I1={[$l.Arrow]:VR,[$l.ArrowClosed]:zR};function BR(e){const t=vt();return L.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(I1,e)?I1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Gn.error009(e)),null)},[e])}const HR=({id:e,type:t,color:n,width:o=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const p=BR(t);return p?d.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:d.jsx(p,{color:n,strokeWidth:u})}):null},GC=({defaultColor:e,rfId:t})=>{const n=et(s=>s.edges),o=et(s=>s.defaultEdgeOptions),a=L.useMemo(()=>HN(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return a.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:a.map(s=>d.jsx(HR,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};GC.displayName="MarkerDefinitions";var $R=L.memo(GC);function KC({x:e,y:t,label:n,labelStyle:o,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:p,className:_,...h}){const[f,y]=L.useState({x:1,y:0,width:0,height:0}),v=Dt(["react-flow__edge-textwrapper",_]),x=L.useRef(null);return L.useEffect(()=>{if(x.current){const k=x.current.getBBox();y({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),n?d.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:v,visibility:f.width?"visible":"hidden",...h,children:[a&&d.jsx("rect",{width:f.width+2*u[0],x:-u[0],y:-u[1],height:f.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),d.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:o,children:n}),p]}):null}KC.displayName="EdgeText";const WR=L.memo(KC);function yc({path:e,labelX:t,labelY:n,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:p,interactionWidth:_=20,...h}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...h,d:e,fill:"none",className:Dt(["react-flow__edge-path",h.className])}),_?d.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}):null,o&&En(t)&&En(n)?d.jsx(WR,{x:t,y:n,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:p}):null]})}function j1({pos:e,x1:t,y1:n,x2:o,y2:a}){return e===$e.Left||e===$e.Right?[.5*(t+o),n]:[t,.5*(n+a)]}function YC({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:o,targetY:a,targetPosition:s=$e.Top}){const[u,c]=j1({pos:n,x1:e,y1:t,x2:o,y2:a}),[p,_]=j1({pos:s,x1:o,y1:a,x2:e,y2:t}),[h,f,y,v]=vC({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:u,sourceControlY:c,targetControlX:p,targetControlY:_});return[`M${e},${t} C${u},${c} ${p},${_} ${o},${a}`,h,f,y,v]}function QC(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,sourcePosition:u,targetPosition:c,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:k,markerStart:w,interactionWidth:b})=>{const[E,q,M]=YC({sourceX:n,sourceY:o,sourcePosition:u,targetX:a,targetY:s,targetPosition:c}),I=e.isInternal?void 0:t;return d.jsx(yc,{id:I,path:E,labelX:q,labelY:M,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:k,markerStart:w,interactionWidth:b})})}const UR=QC({isInternal:!1}),XC=QC({isInternal:!0});UR.displayName="SimpleBezierEdge";XC.displayName="SimpleBezierEdgeInternal";function ZC(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,sourcePosition:v=$e.Bottom,targetPosition:x=$e.Top,markerEnd:k,markerStart:w,pathOptions:b,interactionWidth:E})=>{const[q,M,I]=Gl({sourceX:n,sourceY:o,sourcePosition:v,targetX:a,targetY:s,targetPosition:x,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),C=e.isInternal?void 0:t;return d.jsx(yc,{id:C,path:q,labelX:M,labelY:I,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:k,markerStart:w,interactionWidth:E})})}const JC=ZC({isInternal:!1}),eM=ZC({isInternal:!0});JC.displayName="SmoothStepEdge";eM.displayName="SmoothStepEdgeInternal";function tM(e){return L.memo(({id:t,...n})=>{var a;const o=e.isInternal?void 0:t;return d.jsx(JC,{...n,id:o,pathOptions:L.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const GR=tM({isInternal:!1}),rM=tM({isInternal:!0});GR.displayName="StepEdge";rM.displayName="StepEdgeInternal";function nM(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:v,markerStart:x,interactionWidth:k})=>{const[w,b,E]=H0({sourceX:n,sourceY:o,targetX:a,targetY:s}),q=e.isInternal?void 0:t;return d.jsx(yc,{id:q,path:w,labelX:b,labelY:E,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:v,markerStart:x,interactionWidth:k})})}const KR=nM({isInternal:!1}),iM=nM({isInternal:!0});KR.displayName="StraightEdge";iM.displayName="StraightEdgeInternal";function oM(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,sourcePosition:u=$e.Bottom,targetPosition:c=$e.Top,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:k,markerStart:w,pathOptions:b,interactionWidth:E})=>{const[q,M,I]=B0({sourceX:n,sourceY:o,sourcePosition:u,targetX:a,targetY:s,targetPosition:c,curvature:b==null?void 0:b.curvature}),C=e.isInternal?void 0:t;return d.jsx(yc,{id:C,path:q,labelX:M,labelY:I,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:x,markerEnd:k,markerStart:w,interactionWidth:E})})}const YR=oM({isInternal:!1}),aM=oM({isInternal:!0});YR.displayName="BezierEdge";aM.displayName="BezierEdgeInternal";const T1={default:aM,straight:iM,step:rM,smoothstep:eM,simplebezier:XC},N1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},QR=(e,t,n)=>n===$e.Left?e-t:n===$e.Right?e+t:e,XR=(e,t,n)=>n===$e.Top?e-t:n===$e.Bottom?e+t:e,P1="react-flow__edgeupdater";function R1({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:c}){return d.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Dt([P1,`${P1}-${c}`]),cx:QR(t,o,e),cy:XR(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function ZR({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:a,targetX:s,targetY:u,sourcePosition:c,targetPosition:p,onReconnect:_,onReconnectStart:h,onReconnectEnd:f,setReconnecting:y,setUpdateHover:v}){const x=vt(),k=(M,I)=>{if(M.button!==0)return;const{autoPanOnConnect:C,domNode:T,isValidConnection:R,connectionMode:P,connectionRadius:z,lib:F,onConnectStart:D,onConnectEnd:X,cancelConnection:N,nodeLookup:G,rfId:$,panBy:re,updateConnection:Y}=x.getState(),Q=I.type==="target",ie=(me,W)=>{y(!1),f==null||f(me,n,I.type,W)},H=me=>_==null?void 0:_(n,me),J=(me,W)=>{y(!0),h==null||h(M,n,I.type),D==null||D(me,W)};p0.onPointerDown(M.nativeEvent,{autoPanOnConnect:C,connectionMode:P,connectionRadius:z,domNode:T,handleId:I.id,nodeId:I.nodeId,nodeLookup:G,isTarget:Q,edgeUpdaterType:I.type,lib:F,flowId:$,cancelConnection:N,panBy:re,isValidConnection:R,onConnect:H,onConnectStart:J,onConnectEnd:X,onReconnectEnd:ie,updateConnection:Y,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},w=M=>k(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=M=>k(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>v(!0),q=()=>v(!1);return d.jsxs(d.Fragment,{children:[(e===!0||e==="source")&&d.jsx(R1,{position:c,centerX:o,centerY:a,radius:t,onMouseDown:w,onMouseEnter:E,onMouseOut:q,type:"source"}),(e===!0||e==="target")&&d.jsx(R1,{position:p,centerX:s,centerY:u,radius:t,onMouseDown:b,onMouseEnter:E,onMouseOut:q,type:"target"})]})}function JR({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:c,onMouseMove:p,onMouseLeave:_,reconnectRadius:h,onReconnect:f,onReconnectStart:y,onReconnectEnd:v,rfId:x,edgeTypes:k,noPanClassName:w,onError:b,disableKeyboardA11y:E}){let q=et(je=>je.edgeLookup.get(e));const M=et(je=>je.defaultEdgeOptions);q=M?{...M,...q}:q;let I=q.type||"default",C=(k==null?void 0:k[I])||T1[I];C===void 0&&(b==null||b("011",Gn.error011(I)),I="default",C=(k==null?void 0:k.default)||T1.default);const T=!!(q.focusable||t&&typeof q.focusable>"u"),R=typeof f<"u"&&(q.reconnectable||n&&typeof q.reconnectable>"u"),P=!!(q.selectable||o&&typeof q.selectable>"u"),z=L.useRef(null),[F,D]=L.useState(!1),[X,N]=L.useState(!1),G=vt(),{zIndex:$,sourceX:re,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:H,targetPosition:J}=et(L.useCallback(je=>{const Te=je.nodeLookup.get(q.source),Pe=je.nodeLookup.get(q.target);if(!Te||!Pe)return{zIndex:q.zIndex,...N1};const Ae=BN({id:e,sourceNode:Te,targetNode:Pe,sourceHandle:q.sourceHandle||null,targetHandle:q.targetHandle||null,connectionMode:je.connectionMode,onError:b});return{zIndex:AN({selected:q.selected,zIndex:q.zIndex,sourceNode:Te,targetNode:Pe,elevateOnSelect:je.elevateEdgesOnSelect,zIndexMode:je.zIndexMode}),...Ae||N1}},[q.source,q.target,q.sourceHandle,q.targetHandle,q.selected,q.zIndex]),gt),me=L.useMemo(()=>q.markerStart?`url('#${c0(q.markerStart,x)}')`:void 0,[q.markerStart,x]),W=L.useMemo(()=>q.markerEnd?`url('#${c0(q.markerEnd,x)}')`:void 0,[q.markerEnd,x]);if(q.hidden||re===null||Y===null||Q===null||ie===null)return null;const te=je=>{var Ue;const{addSelectedEdges:Te,unselectNodesAndEdges:Pe,multiSelectionActive:Ae}=G.getState();P&&(G.setState({nodesSelectionActive:!1}),q.selected&&Ae?(Pe({nodes:[],edges:[q]}),(Ue=z.current)==null||Ue.blur()):Te([e])),a&&a(je,q)},oe=s?je=>{s(je,{...q})}:void 0,pe=u?je=>{u(je,{...q})}:void 0,ue=c?je=>{c(je,{...q})}:void 0,ve=p?je=>{p(je,{...q})}:void 0,Ie=_?je=>{_(je,{...q})}:void 0,Re=je=>{var Te;if(!E&&oC.includes(je.key)&&P){const{unselectNodesAndEdges:Pe,addSelectedEdges:Ae}=G.getState();je.key==="Escape"?((Te=z.current)==null||Te.blur(),Pe({edges:[q]})):Ae([e])}};return d.jsx("svg",{style:{zIndex:$},children:d.jsxs("g",{className:Dt(["react-flow__edge",`react-flow__edge-${I}`,q.className,w,{selected:q.selected,animated:q.animated,inactive:!P&&!a,updating:F,selectable:P}]),onClick:te,onDoubleClick:oe,onContextMenu:pe,onMouseEnter:ue,onMouseMove:ve,onMouseLeave:Ie,onKeyDown:T?Re:void 0,tabIndex:T?0:void 0,role:q.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":q.ariaLabel===null?void 0:q.ariaLabel||`Edge from ${q.source} to ${q.target}`,"aria-describedby":T?`${AC}-${x}`:void 0,ref:z,...q.domAttributes,children:[!X&&d.jsx(C,{id:e,source:q.source,target:q.target,type:q.type,selected:q.selected,animated:q.animated,selectable:P,deletable:q.deletable??!0,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,sourceX:re,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:H,targetPosition:J,data:q.data,style:q.style,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerStart:me,markerEnd:W,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth}),R&&d.jsx(ZR,{edge:q,isReconnectable:R,reconnectRadius:h,onReconnect:f,onReconnectStart:y,onReconnectEnd:v,sourceX:re,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:H,targetPosition:J,setUpdateHover:D,setReconnecting:N})]})})}var e6=L.memo(JR);const t6=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function sM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:p,onEdgeMouseLeave:_,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,disableKeyboardA11y:k}){const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:E,onError:q}=et(t6,gt),M=DR(t);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx($R,{defaultColor:e,rfId:n}),M.map(I=>d.jsx(e6,{id:I,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:E,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:c,onMouseMove:p,onMouseLeave:_,onClick:h,reconnectRadius:f,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,rfId:n,onError:q,edgeTypes:o,disableKeyboardA11y:k},I))]})}sM.displayName="EdgeRenderer";const r6=L.memo(sM),n6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function i6({children:e}){const t=et(n6);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function o6(e){const t=Y0(),n=L.useRef(!1);L.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const a6=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function s6(e){const t=et(a6),n=vt();return L.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function u6(e){return e.connection.inProgress?{...e.connection,to:Zs(e.connection.to,e.transform)}:{...e.connection}}function l6(e){return u6}function c6(e){const t=l6();return et(t,gt)}const d6=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function p6({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:a,width:s,height:u,isValid:c,inProgress:p}=et(d6,gt);return!(s&&a&&p)?null:d.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Dt(["react-flow__connection",uC(c)]),children:d.jsx(uM,{style:t,type:n,CustomComponent:o,isValid:c})})})}const uM=({style:e,type:t=Ui.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:c,fromPosition:p,to:_,toNode:h,toHandle:f,toPosition:y,pointer:v}=c6();if(!a)return;if(n)return d.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:c,fromX:s.x,fromY:s.y,toX:_.x,toY:_.y,fromPosition:p,toPosition:y,connectionStatus:uC(o),toNode:h,toHandle:f,pointer:v});let x="";const k={sourceX:s.x,sourceY:s.y,sourcePosition:p,targetX:_.x,targetY:_.y,targetPosition:y};switch(t){case Ui.Bezier:[x]=B0(k);break;case Ui.SimpleBezier:[x]=YC(k);break;case Ui.Step:[x]=Gl({...k,borderRadius:0});break;case Ui.SmoothStep:[x]=Gl(k);break;default:[x]=H0(k)}return d.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};uM.displayName="ConnectionLine";const _6={};function A1(e=_6){L.useRef(e),vt(),L.useEffect(()=>{},[e])}function f6(){vt(),L.useRef(!1),L.useEffect(()=>{},[])}function lM({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:y,onSelectionEnd:v,connectionLineType:x,connectionLineStyle:k,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:E,selectionOnDrag:q,selectionMode:M,multiSelectionKeyCode:I,panActivationKeyCode:C,zoomActivationKeyCode:T,deleteKeyCode:R,onlyRenderVisibleElements:P,elementsSelectable:z,defaultViewport:F,translateExtent:D,minZoom:X,maxZoom:N,preventScrolling:G,defaultMarkerColor:$,zoomOnScroll:re,zoomOnPinch:Y,panOnScroll:Q,panOnScrollSpeed:ie,panOnScrollMode:H,zoomOnDoubleClick:J,panOnDrag:me,onPaneClick:W,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:pe,onPaneScroll:ue,onPaneContextMenu:ve,paneClickDistance:Ie,nodeClickDistance:Re,onEdgeContextMenu:je,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ae,reconnectRadius:Ue,onReconnect:Be,onReconnectStart:st,onReconnectEnd:at,noDragClassName:It,noWheelClassName:wt,noPanClassName:bt,disableKeyboardA11y:lt,nodeExtent:Cr,rfId:tr,viewport:At,onViewportChange:Ut}){return A1(e),A1(t),f6(),o6(n),s6(At),d.jsx(IR,{onPaneClick:W,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:pe,onPaneContextMenu:ve,onPaneScroll:ue,paneClickDistance:Ie,deleteKeyCode:R,selectionKeyCode:E,selectionOnDrag:q,selectionMode:M,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:I,panActivationKeyCode:C,zoomActivationKeyCode:T,elementsSelectable:z,zoomOnScroll:re,zoomOnPinch:Y,zoomOnDoubleClick:J,panOnScroll:Q,panOnScrollSpeed:ie,panOnScrollMode:H,panOnDrag:me,defaultViewport:F,translateExtent:D,minZoom:X,maxZoom:N,onSelectionContextMenu:f,preventScrolling:G,noDragClassName:It,noWheelClassName:wt,noPanClassName:bt,disableKeyboardA11y:lt,onViewportChange:Ut,isControlledViewport:!!At,children:d.jsxs(i6,{children:[d.jsx(r6,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:Be,onReconnectStart:st,onReconnectEnd:at,onlyRenderVisibleElements:P,onEdgeContextMenu:je,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ae,reconnectRadius:Ue,defaultMarkerColor:$,noPanClassName:bt,disableKeyboardA11y:lt,rfId:tr}),d.jsx(p6,{style:k,type:x,component:w,containerStyle:b}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(OR,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:h,nodeClickDistance:Re,onlyRenderVisibleElements:P,noPanClassName:bt,noDragClassName:It,disableKeyboardA11y:lt,nodeExtent:Cr,rfId:tr}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}lM.displayName="GraphView";const m6=L.memo(lM),F1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p=.5,maxZoom:_=2,nodeOrigin:h,nodeExtent:f,zIndexMode:y="basic"}={})=>{const v=new Map,x=new Map,k=new Map,w=new Map,b=o??t??[],E=n??e??[],q=h??[0,0],M=f??Rs;qC(k,w,b);const I=d0(E,v,x,{nodeOrigin:q,nodeExtent:M,zIndexMode:y});let C=[0,0,1];if(u&&a&&s){const T=Qs(v,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:R,y:P,zoom:z}=V0(T,a,s,p,_,(c==null?void 0:c.padding)??.1);C=[R,P,z]}return{rfId:"1",width:a??0,height:s??0,transform:C,nodes:E,nodesInitialized:I,nodeLookup:v,parentLookup:x,edges:b,edgeLookup:w,connectionLookup:k,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:_,translateExtent:Rs,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Sa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:q,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:c,fitViewResolver:null,connection:{...sC},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:IN,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:aC,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},h6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p,maxZoom:_,nodeOrigin:h,nodeExtent:f,zIndexMode:y})=>NP((v,x)=>{async function k(){const{nodeLookup:w,panZoom:b,fitViewOptions:E,fitViewResolver:q,width:M,height:I,minZoom:C,maxZoom:T}=x();b&&(await MN({nodes:w,width:M,height:I,panZoom:b,minZoom:C,maxZoom:T},E),q==null||q.resolve(!0),v({fitViewResolver:null}))}return{...F1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p,maxZoom:_,nodeOrigin:h,nodeExtent:f,defaultNodes:n,defaultEdges:o,zIndexMode:y}),setNodes:w=>{const{nodeLookup:b,parentLookup:E,nodeOrigin:q,elevateNodesOnSelect:M,fitViewQueued:I,zIndexMode:C}=x(),T=d0(w,b,E,{nodeOrigin:q,nodeExtent:f,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:C});I&&T?(k(),v({nodes:w,nodesInitialized:T,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:w,nodesInitialized:T})},setEdges:w=>{const{connectionLookup:b,edgeLookup:E}=x();qC(b,E,w),v({edges:w})},setDefaultNodesAndEdges:(w,b)=>{if(w){const{setNodes:E}=x();E(w),v({hasDefaultNodes:!0})}if(b){const{setEdges:E}=x();E(b),v({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:b,nodeLookup:E,parentLookup:q,domNode:M,nodeOrigin:I,nodeExtent:C,debug:T,fitViewQueued:R,zIndexMode:P}=x(),{changes:z,updatedInternals:F}=QN(w,E,q,M,I,C,P);F&&(UN(E,q,{nodeOrigin:I,nodeExtent:C,zIndexMode:P}),R?(k(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),(z==null?void 0:z.length)>0&&(T&&console.log("React Flow: trigger node changes",z),b==null||b(z)))},updateNodePositions:(w,b=!1)=>{const E=[];let q=[];const{nodeLookup:M,triggerNodeChanges:I,connection:C,updateConnection:T,onNodesChangeMiddlewareMap:R}=x();for(const[P,z]of w){const F=M.get(P),D=!!(F!=null&&F.expandParent&&(F!=null&&F.parentId)&&(z!=null&&z.position)),X={id:P,type:"position",position:D?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:b};if(F&&C.inProgress&&C.fromNode.id===F.id){const N=Po(F,C.fromHandle,$e.Left,!0);T({...C,from:N})}D&&F.parentId&&E.push({id:P,parentId:F.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),q.push(X)}if(E.length>0){const{parentLookup:P,nodeOrigin:z}=x(),F=K0(E,M,P,z);q.push(...F)}for(const P of R.values())q=P(q);I(q)},triggerNodeChanges:w=>{const{onNodesChange:b,setNodes:E,nodes:q,hasDefaultNodes:M,debug:I}=x();if(w!=null&&w.length){if(M){const C=OC(w,q);E(C)}I&&console.log("React Flow: trigger node changes",w),b==null||b(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:b,setEdges:E,edges:q,hasDefaultEdges:M,debug:I}=x();if(w!=null&&w.length){if(M){const C=DC(w,q);E(C)}I&&console.log("React Flow: trigger edge changes",w),b==null||b(w)}},addSelectedNodes:w=>{const{multiSelectionActive:b,edgeLookup:E,nodeLookup:q,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const C=w.map(T=>Co(T,!0));M(C);return}M(ga(q,new Set([...w]),!0)),I(ga(E))},addSelectedEdges:w=>{const{multiSelectionActive:b,edgeLookup:E,nodeLookup:q,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const C=w.map(T=>Co(T,!0));I(C);return}I(ga(E,new Set([...w]))),M(ga(q,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:b}={})=>{const{edges:E,nodes:q,nodeLookup:M,triggerNodeChanges:I,triggerEdgeChanges:C}=x(),T=w||q,R=b||E,P=T.map(F=>{const D=M.get(F.id);return D&&(D.selected=!1),Co(F.id,!1)}),z=R.map(F=>Co(F.id,!1));I(P),C(z)},setMinZoom:w=>{const{panZoom:b,maxZoom:E}=x();b==null||b.setScaleExtent([w,E]),v({minZoom:w})},setMaxZoom:w=>{const{panZoom:b,minZoom:E}=x();b==null||b.setScaleExtent([E,w]),v({maxZoom:w})},setTranslateExtent:w=>{var b;(b=x().panZoom)==null||b.setTranslateExtent(w),v({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:b,triggerNodeChanges:E,triggerEdgeChanges:q,elementsSelectable:M}=x();if(!M)return;const I=b.reduce((T,R)=>R.selected?[...T,Co(R.id,!1)]:T,[]),C=w.reduce((T,R)=>R.selected?[...T,Co(R.id,!1)]:T,[]);E(I),q(C)},setNodeExtent:w=>{const{nodes:b,nodeLookup:E,parentLookup:q,nodeOrigin:M,elevateNodesOnSelect:I,nodeExtent:C,zIndexMode:T}=x();w[0][0]===C[0][0]&&w[0][1]===C[0][1]&&w[1][0]===C[1][0]&&w[1][1]===C[1][1]||(d0(b,E,q,{nodeOrigin:M,nodeExtent:w,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:T}),v({nodeExtent:w}))},panBy:w=>{const{transform:b,width:E,height:q,panZoom:M,translateExtent:I}=x();return XN({delta:w,panZoom:M,transform:b,translateExtent:I,width:E,height:q})},setCenter:async(w,b,E)=>{const{width:q,height:M,maxZoom:I,panZoom:C}=x();if(!C)return Promise.resolve(!1);const T=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:I;return await C.setViewport({x:q/2-w*T,y:M/2-b*T,zoom:T},{duration:E==null?void 0:E.duration,ease:E==null?void 0:E.ease,interpolate:E==null?void 0:E.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...sC}})},updateConnection:w=>{v({connection:w})},reset:()=>v({...F1()})}},Object.is);function y6({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:c,initialFitViewOptions:p,fitView:_,nodeOrigin:h,nodeExtent:f,zIndexMode:y,children:v}){const[x]=L.useState(()=>h6({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:_,minZoom:u,maxZoom:c,fitViewOptions:p,nodeOrigin:h,nodeExtent:f,zIndexMode:y}));return d.jsx(AP,{value:x,children:d.jsx(iR,{children:v})})}function g6({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:a,width:s,height:u,fitView:c,fitViewOptions:p,minZoom:_,maxZoom:h,nodeOrigin:f,nodeExtent:y,zIndexMode:v}){return L.useContext(mc)?d.jsx(d.Fragment,{children:e}):d.jsx(y6,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:c,initialFitViewOptions:p,initialMinZoom:_,initialMaxZoom:h,nodeOrigin:f,nodeExtent:y,zIndexMode:v,children:e})}const v6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function x6({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:c,onEdgeClick:p,onInit:_,onMove:h,onMoveStart:f,onMoveEnd:y,onConnect:v,onConnectStart:x,onConnectEnd:k,onClickConnectStart:w,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:q,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:C,onNodeDragStart:T,onNodeDrag:R,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:F,onDelete:D,onSelectionChange:X,onSelectionDragStart:N,onSelectionDrag:G,onSelectionDragStop:$,onSelectionContextMenu:re,onSelectionStart:Y,onSelectionEnd:Q,onBeforeDelete:ie,connectionMode:H,connectionLineType:J=Ui.Bezier,connectionLineStyle:me,connectionLineComponent:W,connectionLineContainerStyle:te,deleteKeyCode:oe="Backspace",selectionKeyCode:pe="Shift",selectionOnDrag:ue=!1,selectionMode:ve=As.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:Re=Ls()?"Meta":"Control",zoomActivationKeyCode:je=Ls()?"Meta":"Control",snapToGrid:Te,snapGrid:Pe,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ue,nodesDraggable:Be,autoPanOnNodeFocus:st,nodesConnectable:at,nodesFocusable:It,nodeOrigin:wt=FC,edgesFocusable:bt,edgesReconnectable:lt,elementsSelectable:Cr=!0,defaultViewport:tr=KP,minZoom:At=.5,maxZoom:Ut=2,translateExtent:nt=Rs,preventScrolling:Ar=!0,nodeExtent:Nt,defaultMarkerColor:Qr="#b1b1b7",zoomOnScroll:rr=!0,zoomOnPinch:Gt=!0,panOnScroll:Xe=!1,panOnScrollSpeed:vi=.5,panOnScrollMode:Pt=Io.Free,zoomOnDoubleClick:pn=!0,panOnDrag:fe=!0,onPaneClick:it,onPaneMouseEnter:Fr,onPaneMouseMove:Lr,onPaneMouseLeave:mr,onPaneScroll:Qn,onPaneContextMenu:Pn,paneClickDistance:Ft=1,nodeClickDistance:nr=0,children:Kt,onReconnect:dt,onReconnectStart:Do,onReconnectEnd:mt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Yt,onEdgeMouseEnter:Xr,onEdgeMouseMove:zt,onEdgeMouseLeave:Bt,reconnectRadius:Qt=10,onNodesChange:Xt,onEdgesChange:hr,noDragClassName:ar="nodrag",noWheelClassName:yr="nowheel",noPanClassName:jt="nopan",fitView:Zr,fitViewOptions:sr,connectOnClick:Ji,attributionPosition:eo,proOptions:ur,defaultEdgeOptions:xi,elevateNodesOnSelect:wi=!0,elevateEdgesOnSelect:to=!1,disableKeyboardA11y:Xn=!1,autoPanOnConnect:pt,autoPanOnNodeDrag:Rn,autoPanSpeed:_n,connectionRadius:bi,isValidConnection:An,onError:Vo,style:zo,id:gr,nodeDragThreshold:Lt,connectionDragThreshold:Zn,viewport:qt,onViewportChange:La,width:Fn,height:au,colorMode:qi="light",debug:Ln,onScroll:vr,ariaLabelConfig:Si,zIndexMode:Bo="basic",...xr},Or){const ki=gr||"1",Dr=ZP(qi),Jr=L.useCallback(ro=>{ro.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),vr==null||vr(ro)},[vr]);return d.jsx("div",{"data-testid":"rf__wrapper",...xr,onScroll:Jr,style:{...zo,...v6},ref:Or,className:Dt(["react-flow",a,Dr]),id:gr,role:"application",children:d.jsxs(g6,{nodes:e,edges:t,width:Fn,height:au,fitView:Zr,fitViewOptions:sr,minZoom:At,maxZoom:Ut,nodeOrigin:wt,nodeExtent:Nt,zIndexMode:Bo,children:[d.jsx(m6,{onInit:_,onNodeClick:c,onEdgeClick:p,onNodeMouseEnter:E,onNodeMouseMove:q,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:C,nodeTypes:s,edgeTypes:u,connectionLineType:J,connectionLineStyle:me,connectionLineComponent:W,connectionLineContainerStyle:te,selectionKeyCode:pe,selectionOnDrag:ue,selectionMode:ve,deleteKeyCode:oe,multiSelectionKeyCode:Re,panActivationKeyCode:Ie,zoomActivationKeyCode:je,onlyRenderVisibleElements:Ae,defaultViewport:tr,translateExtent:nt,minZoom:At,maxZoom:Ut,preventScrolling:Ar,zoomOnScroll:rr,zoomOnPinch:Gt,zoomOnDoubleClick:pn,panOnScroll:Xe,panOnScrollSpeed:vi,panOnScrollMode:Pt,panOnDrag:fe,onPaneClick:it,onPaneMouseEnter:Fr,onPaneMouseMove:Lr,onPaneMouseLeave:mr,onPaneScroll:Qn,onPaneContextMenu:Pn,paneClickDistance:Ft,nodeClickDistance:nr,onSelectionContextMenu:re,onSelectionStart:Y,onSelectionEnd:Q,onReconnect:dt,onReconnectStart:Do,onReconnectEnd:mt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Yt,onEdgeMouseEnter:Xr,onEdgeMouseMove:zt,onEdgeMouseLeave:Bt,reconnectRadius:Qt,defaultMarkerColor:Qr,noDragClassName:ar,noWheelClassName:yr,noPanClassName:jt,rfId:ki,disableKeyboardA11y:Xn,nodeExtent:Nt,viewport:qt,onViewportChange:La}),d.jsx(XP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:v,onConnectStart:x,onConnectEnd:k,onClickConnectStart:w,onClickConnectEnd:b,nodesDraggable:Be,autoPanOnNodeFocus:st,nodesConnectable:at,nodesFocusable:It,edgesFocusable:bt,edgesReconnectable:lt,elementsSelectable:Cr,elevateNodesOnSelect:wi,elevateEdgesOnSelect:to,minZoom:At,maxZoom:Ut,nodeExtent:Nt,onNodesChange:Xt,onEdgesChange:hr,snapToGrid:Te,snapGrid:Pe,connectionMode:H,translateExtent:nt,connectOnClick:Ji,defaultEdgeOptions:xi,fitView:Zr,fitViewOptions:sr,onNodesDelete:z,onEdgesDelete:F,onDelete:D,onNodeDragStart:T,onNodeDrag:R,onNodeDragStop:P,onSelectionDrag:G,onSelectionDragStart:N,onSelectionDragStop:$,onMove:h,onMoveStart:f,onMoveEnd:y,noPanClassName:jt,nodeOrigin:wt,rfId:ki,autoPanOnConnect:pt,autoPanOnNodeDrag:Rn,autoPanSpeed:_n,onError:Vo,connectionRadius:bi,isValidConnection:An,selectNodesOnDrag:Ue,nodeDragThreshold:Lt,connectionDragThreshold:Zn,onBeforeDelete:ie,debug:Ln,ariaLabelConfig:Si,zIndexMode:Bo}),d.jsx(GP,{onSelectionChange:X}),Kt,d.jsx(BP,{proOptions:ur,position:eo}),d.jsx(zP,{rfId:ki,disableKeyboardA11y:Xn})]})})}var w6=VC(x6);function b6(e){const[t,n]=L.useState(e),o=L.useCallback(a=>n(s=>OC(a,s)),[]);return[t,n,o]}function q6(e){const[t,n]=L.useState(e),o=L.useCallback(a=>n(s=>DC(a,s)),[]);return[t,n,o]}function S6({dimensions:e,lineWidth:t,variant:n,className:o}){return d.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Dt(["react-flow__background-pattern",n,o])})}function k6({radius:e,className:t}){return d.jsx("circle",{cx:e,cy:e,r:e,className:Dt(["react-flow__background-pattern","dots",t])})}var Ki;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ki||(Ki={}));const C6={[Ki.Dots]:1,[Ki.Lines]:1,[Ki.Cross]:6},M6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function cM({id:e,variant:t=Ki.Dots,gap:n=20,size:o,lineWidth:a=1,offset:s=0,color:u,bgColor:c,style:p,className:_,patternClassName:h}){const f=L.useRef(null),{transform:y,patternId:v}=et(M6,gt),x=o||C6[t],k=t===Ki.Dots,w=t===Ki.Cross,b=Array.isArray(n)?n:[n,n],E=[b[0]*y[2]||1,b[1]*y[2]||1],q=x*y[2],M=Array.isArray(s)?s:[s,s],I=w?[q,q]:E,C=[M[0]*y[2]||1+I[0]/2,M[1]*y[2]||1+I[1]/2],T=`${v}${e||""}`;return d.jsxs("svg",{className:Dt(["react-flow__background",_]),style:{...p,...hc,"--xy-background-color-props":c,"--xy-background-pattern-color-props":u},ref:f,"data-testid":"rf__background",children:[d.jsx("pattern",{id:T,x:y[0]%E[0],y:y[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:k?d.jsx(k6,{radius:q/2,className:h}):d.jsx(S6,{dimensions:I,lineWidth:a,variant:t,className:h})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}cM.displayName="Background";const E6=L.memo(cM);function I6(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function j6(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function T6(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function N6(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function P6(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function xl({children:e,className:t,...n}){return d.jsx("button",{type:"button",className:Dt(["react-flow__controls-button",t]),...n,children:e})}const R6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function dM({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:c,onInteractiveChange:p,className:_,children:h,position:f="bottom-left",orientation:y="vertical","aria-label":v}){const x=vt(),{isInteractive:k,minZoomReached:w,maxZoomReached:b,ariaLabelConfig:E}=et(R6,gt),{zoomIn:q,zoomOut:M,fitView:I}=Y0(),C=()=>{q(),s==null||s()},T=()=>{M(),u==null||u()},R=()=>{I(a),c==null||c()},P=()=>{x.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),p==null||p(!k)},z=y==="horizontal"?"horizontal":"vertical";return d.jsxs(Ia,{className:Dt(["react-flow__controls",z,_]),position:f,style:e,"data-testid":"rf__controls","aria-label":v??E["controls.ariaLabel"],children:[t&&d.jsxs(d.Fragment,{children:[d.jsx(xl,{onClick:C,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:b,children:d.jsx(I6,{})}),d.jsx(xl,{onClick:T,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:w,children:d.jsx(j6,{})})]}),n&&d.jsx(xl,{className:"react-flow__controls-fitview",onClick:R,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:d.jsx(T6,{})}),o&&d.jsx(xl,{className:"react-flow__controls-interactive",onClick:P,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:k?d.jsx(P6,{}):d.jsx(N6,{})}),h]})}dM.displayName="Controls";const A6=L.memo(dM);function F6({id:e,x:t,y:n,width:o,height:a,style:s,color:u,strokeColor:c,strokeWidth:p,className:_,borderRadius:h,shapeRendering:f,selected:y,onClick:v}){const{background:x,backgroundColor:k}=s||{},w=u||x||k;return d.jsx("rect",{className:Dt(["react-flow__minimap-node",{selected:y},_]),x:t,y:n,rx:h,ry:h,width:o,height:a,style:{fill:w,stroke:c,strokeWidth:p},shapeRendering:f,onClick:v?b=>v(b,e):void 0})}const L6=L.memo(F6),O6=e=>e.nodes.map(t=>t.id),Np=e=>e instanceof Function?e:()=>e;function D6({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:s=L6,onClick:u}){const c=et(O6,gt),p=Np(t),_=Np(e),h=Np(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:c.map(y=>d.jsx(z6,{id:y,nodeColorFunc:p,nodeStrokeColorFunc:_,nodeClassNameFunc:h,nodeBorderRadius:o,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:f},y))})}function V6({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:c,onClick:p}){const{node:_,x:h,y:f,width:y,height:v}=et(x=>{const{internals:k}=x.nodeLookup.get(e),w=k.userNode,{x:b,y:E}=k.positionAbsolute,{width:q,height:M}=hi(w);return{node:w,x:b,y:E,width:q,height:M}},gt);return!_||_.hidden||!fC(_)?null:d.jsx(c,{x:h,y:f,width:y,height:v,style:_.style,selected:!!_.selected,className:o(_),color:t(_),borderRadius:a,strokeColor:n(_),strokeWidth:s,shapeRendering:u,onClick:p,id:_.id})}const z6=L.memo(V6);var B6=L.memo(D6);const H6=200,$6=150,W6=e=>!e.hidden,U6=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?_C(Qs(e.nodeLookup,{filter:W6}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},G6="react-flow__minimap-desc";function pM({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:c,bgColor:p,maskColor:_,maskStrokeColor:h,maskStrokeWidth:f,position:y="bottom-right",onClick:v,onNodeClick:x,pannable:k=!1,zoomable:w=!1,ariaLabel:b,inversePan:E,zoomStep:q=1,offsetScale:M=5}){const I=vt(),C=L.useRef(null),{boundingRect:T,viewBB:R,rfId:P,panZoom:z,translateExtent:F,flowWidth:D,flowHeight:X,ariaLabelConfig:N}=et(U6,gt),G=(e==null?void 0:e.width)??H6,$=(e==null?void 0:e.height)??$6,re=T.width/G,Y=T.height/$,Q=Math.max(re,Y),ie=Q*G,H=Q*$,J=M*Q,me=T.x-(ie-T.width)/2-J,W=T.y-(H-T.height)/2-J,te=ie+J*2,oe=H+J*2,pe=`${G6}-${P}`,ue=L.useRef(0),ve=L.useRef();ue.current=Q,L.useEffect(()=>{if(C.current&&z)return ve.current=aP({domNode:C.current,panZoom:z,getTransform:()=>I.getState().transform,getViewScale:()=>ue.current}),()=>{var Te;(Te=ve.current)==null||Te.destroy()}},[z]),L.useEffect(()=>{var Te;(Te=ve.current)==null||Te.update({translateExtent:F,width:D,height:X,inversePan:E,pannable:k,zoomStep:q,zoomable:w})},[k,w,E,q,F,D,X]);const Ie=v?Te=>{var Ue;const[Pe,Ae]=((Ue=ve.current)==null?void 0:Ue.pointer(Te))||[0,0];v(Te,{x:Pe,y:Ae})}:void 0,Re=x?L.useCallback((Te,Pe)=>{const Ae=I.getState().nodeLookup.get(Pe).internals.userNode;x(Te,Ae)},[]):void 0,je=b??N["minimap.ariaLabel"];return d.jsx(Ia,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof _=="string"?_:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*Q:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Dt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:G,height:$,viewBox:`${me} ${W} ${te} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":pe,ref:C,onClick:Ie,children:[je&&d.jsx("title",{id:pe,children:je}),d.jsx(B6,{onClick:Re,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:c}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${me-J},${W-J}h${te+J*2}v${oe+J*2}h${-te-J*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}pM.displayName="MiniMap";const K6=L.memo(pM),Y6=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Q6={[Ea.Line]:"right",[Ea.Handle]:"bottom-right"};function X6({nodeId:e,position:t,variant:n=Ea.Handle,className:o,style:a=void 0,children:s,color:u,minWidth:c=10,minHeight:p=10,maxWidth:_=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:y,autoScale:v=!0,shouldResize:x,onResizeStart:k,onResize:w,onResizeEnd:b}){const E=$C(),q=typeof e=="string"?e:E,M=vt(),I=L.useRef(null),C=n===Ea.Handle,T=et(L.useCallback(Y6(C&&v),[C,v]),gt),R=L.useRef(null),P=t??Q6[n];L.useEffect(()=>{if(!(!I.current||!q))return R.current||(R.current=xP({domNode:I.current,nodeId:q,getStoreItems:()=>{const{nodeLookup:F,transform:D,snapGrid:X,snapToGrid:N,nodeOrigin:G,domNode:$}=M.getState();return{nodeLookup:F,transform:D,snapGrid:X,snapToGrid:N,nodeOrigin:G,paneDomNode:$}},onChange:(F,D)=>{const{triggerNodeChanges:X,nodeLookup:N,parentLookup:G,nodeOrigin:$}=M.getState(),re=[],Y={x:F.x,y:F.y},Q=N.get(q);if(Q&&Q.expandParent&&Q.parentId){const ie=Q.origin??$,H=F.width??Q.measured.width??0,J=F.height??Q.measured.height??0,me={id:Q.id,parentId:Q.parentId,rect:{width:H,height:J,...mC({x:F.x??Q.position.x,y:F.y??Q.position.y},{width:H,height:J},Q.parentId,N,ie)}},W=K0([me],N,G,$);re.push(...W),Y.x=F.x?Math.max(ie[0]*H,F.x):void 0,Y.y=F.y?Math.max(ie[1]*J,F.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const ie={id:q,type:"position",position:{...Y}};re.push(ie)}if(F.width!==void 0&&F.height!==void 0){const H={id:q,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};re.push(H)}for(const ie of D){const H={...ie,type:"position"};re.push(H)}X(re)},onEnd:({width:F,height:D})=>{const X={id:q,type:"dimensions",resizing:!1,dimensions:{width:F,height:D}};M.getState().triggerNodeChanges([X])}})),R.current.update({controlPosition:P,boundaries:{minWidth:c,minHeight:p,maxWidth:_,maxHeight:h},keepAspectRatio:f,resizeDirection:y,onResizeStart:k,onResize:w,onResizeEnd:b,shouldResize:x}),()=>{var F;(F=R.current)==null||F.destroy()}},[P,c,p,_,h,f,k,w,b,x]);const z=P.split("-");return d.jsx("div",{className:Dt(["react-flow__resize-control","nodrag",...z,n,o]),ref:I,style:{...a,scale:T,...u&&{[C?"backgroundColor":"borderColor"]:u}},children:s})}L.memo(X6);const Yl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Ql=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Xl=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Yi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},gc=(e,t)=>{try{if(typeof localStorage>"u")return t;const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},Z6=(e,t)=>{try{if(typeof localStorage>"u")return;localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let Wr=gc(Yi.PRODUCTS,Yl),un=gc(Yi.MACHINES,Ql),kn=gc(Yi.RECIPES,Xl);const yt=e=>Wr.find(t=>t.id===e),Et=e=>un.find(t=>t.id===e),X0=(e,t,n)=>{e.length=0,e.push(...t),Z6(n,e)},f0=e=>X0(Wr,e,Yi.PRODUCTS),m0=e=>X0(un,e,Yi.MACHINES),h0=e=>X0(kn,e,Yi.RECIPES),J6=()=>gc(Yi.CANVAS_STATE,null),e4=()=>{typeof localStorage<"u"&&localStorage.removeItem(Yi.CANVAS_STATE)},t4=()=>{f0(Yl),m0(Ql),h0(Xl),e4()},Z0=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),r4=e=>e==="p_variableproduct",pi=(e,t,n)=>{if(r4(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const o=t(e);return o?o.name:"Unknown Product"},n4=e=>Z0(e)?"Variable":typeof e=="number"?e.toString():e,ys=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,i4=e=>{if(Z0(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:ys(e.drilling),idle:ys(e.idle)};if("max"in e&&"average"in e)return{max:ys(e.max),average:ys(e.average)}}return ys(e)},o4=e=>Z0(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,L1=(e,t)=>{const n=n4(e.quantity),o=pi(e.product_id,t);return`${n}x ${o}`},a4=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],_M=e=>a4.includes(e),Ur=18,Gi=18,Mn=100,_r={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},J0=(e,t={},n=Ur,o=null,a=null)=>{const s=_r[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[o]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Gi,c=t.heatLoss??s.defaultHeatLoss;return u-c;default:return n}},O1=(e,t)=>{const n=_r[e];if(!n||n.type!=="configurable")return null;const o=n.tempOptions.find(a=>a.temp===t);return o?o.power:null},Zl=e=>e==null?"":`${Math.round(e)}C`,s4=e=>{const t=_r[e];return t&&t.type==="configurable"},u4=e=>{const t=_r[e];return t&&t.type==="boiler"},l4=e=>{const t=_r[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},c4=e=>e<=0?1/0:e>=400?2:800/e,d4=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,p4=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,_4=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},f4=e=>e<=0?1/0:64/(.176*Math.abs(e)),ln={m_industrial_drill:{type:"steam_input",formula:c4},m_alloyer:{type:"steam_input",formula:d4},m_coal_liquefaction_plant:{type:"steam_input",formula:p4},m_steam_cracking_plant:{type:"steam_input",formula:_4},m_water_treatment_plant:{type:"steam_input",formula:f4}},Kr=e=>e in ln,Wn=(e,t,n)=>{const o=ln[e];if(!o)return n;const a=o.formula(t);return isFinite(a)?a:n},fi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),D1=(e,t)=>{const n=new Map,o=new Map;Object.keys(e.nodes).forEach(c=>{const p=e.nodes[c];p&&(p.inputs.forEach((_,h)=>{o.set(`${c}:${h}`,Ur)}),p.outputs.forEach((_,h)=>{n.set(`${c}:${h}`,Ur)}))});const{sorted:a,cycleNodes:s}=h4(e),u=(c,p=!1)=>{const _=e.nodes[c];if(!_)return!1;const h={id:_.recipe.machine_id},f=_r[h.id];let y=!1;return _.inputs.forEach((v,x)=>{const k=m4(e,t,c,x,n,!p),w=o.get(`${c}:${x}`),b=k!==null?k:w;Math.abs(b-w)>.01&&(o.set(`${c}:${x}`,b),y=!0)}),_.outputs.forEach((v,x)=>{var w,b;let k=Ur;if(f){if(f.type==="fixed")k=f.outputTemp;else if(f.type==="additive"){if(_.inputs.length>0){const E=o.get(`${c}:0`)||Ur;E>f.maxTemp?k=E:k=Math.min(E+f.tempIncrease,f.maxTemp)}}else if(f.type==="configurable")k=((w=_.recipe.temperatureSettings)==null?void 0:w.temperature)||f.tempOptions[0].temp;else if(f.type==="product_dependent"){if(_.inputs.length>0){const E=_.inputs[0].productId;k=f.temps[E]||f.temps.p_water||400}}else if(f.type==="boiler"){if(_.inputs.length>=2){const E=o.get(`${c}:1`)||Ur,q=((b=_.recipe.temperatureSettings)==null?void 0:b.heatLoss)||f.defaultHeatLoss,M=E-q;x===0?k=M*.85:x===1&&(M<f.minSteamTemp?k=Math.max(M,Ur):k=M)}}else if(f.type==="passthrough"){const E=_.inputs.findIndex(q=>q.productId===f.inputProduct);E>=0&&(k=o.get(`${c}:${E}`)||Ur)}}n.set(`${c}:${x}`,k)}),y};if(a.forEach(c=>{s.has(c)||u(c)}),s.size>0){let p=0,_=!0;const h=a.filter(y=>s.has(y));for(;_&&p<100;)_=!1,h.forEach(y=>{u(y,!0)&&(_=!0)}),p++;const f=new Set;a.forEach(y=>{if(s.has(y))return;const v=e.nodes[y];v&&v.inputs.forEach((x,k)=>{const w=e.products[x.productId];if(!w)return;w.connections.filter(E=>E.targetNodeId===y&&E.targetInputIndex===k).forEach(E=>{s.has(E.sourceNodeId)&&f.add(y)})})}),f.forEach(y=>{u(y,!1)})}return{outputTemperatures:n,inputTemperatures:o}},m4=(e,t,n,o,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[o].productId];if(!u)return s?Ur:null;const c=u.connections.filter(f=>f.targetNodeId===n&&f.targetInputIndex===o);if(c.length===0)return s?Ur:null;const p=[];if(c.forEach(f=>{var v;const y=a.get(`${f.sourceNodeId}:${f.sourceOutputIndex}`);if(y!=null){const x=((v=t.byConnection[f.id])==null?void 0:v.flowRate)||0;p.push({temp:y,flow:x})}}),p.length===0)return s?Ur:null;const _=p.reduce((f,y)=>f+y.flow,0);if(_>0){const f=p.reduce((y,v)=>y+v.temp*v.flow,0);return Math.round(f/_*1e10)/1e10}const h=p.reduce((f,y)=>f+y.temp,0);return Math.round(h/p.length*1e10)/1e10},h4=e=>{const t=[],n=new Set,o=new Set,a=new Set,s=(u,c=[])=>{if(n.has(u))return;if(o.has(u)){const h=c.indexOf(u);for(let f=h;f<c.length;f++)a.add(c[f]);a.add(u);return}o.add(u);const p=[...c,u],_=e.nodes[u];_&&_.inputs.forEach((h,f)=>{const y=e.products[h.productId];y&&y.connections.filter(x=>x.targetNodeId===u&&x.targetInputIndex===f).forEach(x=>{n.has(x.sourceNodeId)||s(x.sourceNodeId,p)})}),o.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},y0=(e,t,n)=>e.map(o=>{if(!n.nodes[o.id])return o;const s={id:o.data.recipe.machine_id},u=_r[s.id],c=Kr(s.id),p=o.data.recipe.outputs.map((h,f)=>{const y=t.outputTemperatures.get(`${o.id}:${f}`);if(y!=null){if((u==null?void 0:u.type)==="boiler"&&h.product_id==="p_steam"){const v=u.minSteamTemp||100;return y<v?{...h,temperature:y,quantity:0,originalQuantity:h.originalQuantity||h.quantity}:{...h,temperature:y,quantity:h.originalQuantity||h.quantity,originalQuantity:h.originalQuantity||h.quantity}}return{...h,temperature:y}}return h});let _={...o.data.recipe,outputs:p};if(c){const h=ln[s.id];if((h==null?void 0:h.type)==="steam_input"){const f=o.data.recipe.inputs.findIndex(y=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(y.product_id));if(f>=0){const y=t.inputTemperatures.get(`${o.id}:${f}`);if(y!=null&&(_={..._,tempDependentInputTemp:y},s.id==="m_water_treatment_plant")){const x=90*Wn(s.id,y,1);_={..._,inputs:_.inputs.map((k,w)=>w===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(k.product_id)?{...k,quantity:x,originalQuantity:90}:k)}}}}}return{...o,data:{...o.data,recipe:_}}}),g0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],v0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],y4={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},g4=12,v4=3.1,x4=.1,w4=.02,b4=2,Vs={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},q4=()=>Object.keys(Vs).map(e=>parseInt(e)).sort((e,t)=>e-t),S4=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},k4=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Ro=(e,t,n,o)=>{if(!e||!o)return null;const a=S4(e,o),s=k4(t||"none",o),u=n?1.1:1,c=.5*a*s*u,p=Math.ceil(100/c),_=g4,h=n?100:50,f=2*o/h,y=p+_+f,v=p/y;return{deteriorationRate:c,lifeTime:p,replacementTime:_,travelTime:f,totalCycleTime:y,dutyCycle:v,drillingPower:v4,idlePower:x4,pollution:w4}},fM=(e,t,n,o)=>{const a=[],s=Ro(e,t,n,o);if(!s){if(e){const u=g0.find(c=>c.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=v0.find(c=>c.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=g0.find(c=>c.id===e);if(u){const c=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(c.toFixed(6))})}}if(t&&t!=="none"){const u=v0.find(c=>c.id===t);if(u!=null&&u.product_id){const p=(y4[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(p.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:b4}),a},mM=(e,t,n,o)=>{if(!o)return[];const a=Vs[o];if(!a)return[];const s=Ro(e,t,n,o);if(!s)return a.map(c=>({...c,quantity:"Variable"}));const u=n?1.1:1;return a.map(c=>{const p=c.quantity*u*s.dutyCycle;return{product_id:c.product_id,quantity:parseFloat(p.toFixed(4))}})},V1={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},z1=4,C4=20,M4=4,B1=5e5,E4=.3,I4=10,wl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},j4=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),o=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:o,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},hM=j4(),T4=e=>hM.find(t=>t.productId===e),Js=(e,t,n=0)=>{const o=T4(e);if(!o)return null;const s=Math.log2(o.innerStage)+(o.outerStage-1)*6,u=z1*s,c=t?M4:C4,p=n/6,_=s*z1*(c+p)+I4,h=wl.logic_plates*s,f=wl.copper_wires*s,y=wl.semiconductors*s,v=wl.gold_wires*s,x=[{product_id:"p_logic_plate",quantity:h},{product_id:"p_copper_wire",quantity:f},{product_id:"p_semiconductor",quantity:y},{product_id:"p_gold_wire",quantity:v}];t&&x.push({product_id:"p_machine_oil",quantity:parseFloat((E4*_).toFixed(6))});const k=[{product_id:e,quantity:1}],w=B1/c,b=B1/(t?.8:4);return{outerStage:o.outerStage,innerStage:o.innerStage,totalStages:s,totalSteps:u,avgStepTime:c,cycleTime:_,inputs:x,outputs:k,avgPowerConsumption:w,maxPowerConsumption:b,logicPlates:h,copperWires:f,semiconductors:y,goldWires:v}},yM=(e,t)=>{const n=Js(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},gM=(e,t)=>{const n=Js(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},H1={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},x0=11,vM=2,N4=2e5,xM=1,P4=3,wM=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,bM=e=>Math.ceil(e/P4),Jl=(e,t,n,o,a,s)=>{if(!e||!t||!n||!o||a!==1)return null;const u=bM(n),c=wM(s),p=n*xM,_=e/c,h=t/x0,f=Math.min(_,h),y=f*vM,v=t*N4/x0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:o,controller:a,growthTime:c,waterConsumption:p,sustainableHarvestRate:_,maxHarvestRate:h,actualHarvestRate:f,logOutput:y,avgPowerConsumption:v,isTreeLimited:_<h}},qM=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*xM}],eg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const o=wM(n),a=e/o,s=t/x0,c=Math.min(a,s)*vM;return[{product_id:"p_oak_log",quantity:parseFloat(c.toFixed(6))}]},$1={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},tg=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],SM={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},R4={r_industrial_firebox_07:1},kM=e=>tg.find(t=>t.id===e),ec=(e,t)=>{const n=SM[e],o=kM(t);if(!n||!o)return null;const a=n/o.energy,s=R4[e]||0,u=a+s,c=1,p=a;return{energyNeeded:n,fuelEnergy:o.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:c,fuelPerCycle:p}},w0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const o=ec(n,t);if(!o)return e;const a=kM(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(o.fuelPerCycle.toFixed(6))},u=tg.map(p=>p.product_id),c=e.filter(p=>p.product_id!=="p_variableproduct"&&!u.includes(p.product_id));return[s,...c]},CM=e=>e in SM,MM=(e,t)=>{const o=(e-100)/5;let a=1,s=1;e<100?(a=1+o*.05,s=1+o*.06666666666666667):e>100&&(a=1+o*.05,s=1+o*.1);const c=(t-100)/5;let p=1,_=1;t<100?(p=1+c*-.0625,_=1+c*.05):t>100&&(p=1+c*-.0425,_=1+c*.25);const h=a*p,f=a,y=s+_-1;return{inputMultiplier:h,outputMultiplier:f,powerMultiplier:y}},A4=(e,t,n)=>{const o=MM(t,n),a=e.inputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.inputMultiplier).toFixed(6)):c.quantity})),s=e.outputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.outputMultiplier).toFixed(6)):c.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*o.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Wi=7e3,rg=140,ng=70,EM=1e6,W1=240,Pp=29.166666666666668,Cs=240,IM=480,Rl=(e,t)=>{const n=e+t;let o;return n<=Cs?o=Pp:n>=IM?o=Pp/2:o=Pp*Cs/n,{cycleTime:o,concreteBlocksPerCycle:rg,leadIngotsPerCycle:ng,totalFlow:n,powerConsumption:EM}},tc=(e,t,n,o)=>{const a=Math.min(e,W1),s=Math.min(t,W1),u=a+s;let c,p;return u<=Cs?(c=Wi,p=Wi):u>=IM?(c=Wi/2,p=Wi/2):(c=Wi*Cs/u,p=Wi*Cs/u),[{product_id:n||"p_variableproduct",quantity:c,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:o||"p_variableproduct",quantity:p,isAnyProduct:o==="p_any_fluid"||!o,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:rg},{product_id:"p_lead_ingot",quantity:ng}]},b0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:EM,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:rg},{product_id:"p_lead_ingot",quantity:ng}],outputs:[],isWasteFacility:!0},q0=15,F4=2,L4=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ms=(e,t=null)=>{let n=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:o.quantity||0;L4.includes(o.product_id)?n+=0:o.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},S0=e=>{const t=[];for(let n=0;n<F4;n++){const o=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:q0})}return t},k0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:q0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:q0}],outputs:[],isLiquidDump:!0},jM=15,TM=8,O4=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Es=(e,t=null)=>{let n=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:o.quantity||0;O4.includes(o.product_id)?n+=0:o.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},C0=e=>{const t=[];for(let n=0;n<TM;n++){const o=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:jM})}return t},M0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(TM).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:jM})),outputs:[],isLiquidBurner:!0},U1=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",D4=(e,t,n)=>{switch(e){case"drill":return V4();case"assembler":return z4();case"treeFarm":return B4(n);case"firebox":return H4(t);case"temperature":return $4(t);case"boiler":return W4();case"chemicalPlant":return U4();case"wasteFacility":return G4();case"liquidDump":return K4();case"liquidBurner":return Y4();default:return null}},V4=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...g0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:v0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...q4().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Ro(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),d.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=fM(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=mM(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),o=e.drillHead&&e.depth?Ro(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:o}}}),z4=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,o=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return o?d.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:o}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?Js(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Total Stages: ",e.totalStages]}),d.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),d.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),d.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[d.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),d.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[d.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[d.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),d.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),d.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),d.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,c;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((c=e.microchip)==null?void 0:c.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},o=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=yM(o,t.machineOil),s=gM(o,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),B4=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=bM(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Jl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),d.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),d.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&d.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const o=qM(t.sprinklers),a=eg(t.trees,t.harvesters,e);return{settings:t,inputs:o,outputs:a,metrics:null}}}),H4=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:tg.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>ec(e.id,t.fuel),renderMetrics:(t,n)=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),d.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),d.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&d.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),d.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),d.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[d.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),d.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:w0(e.inputs,n.fuel,e.id).map((o,a)=>{const s=typeof o.quantity=="number"?o.quantity.toFixed(4):o.quantity,u=pi(o.product_id,yt);return d.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const o=ec(n.id,t.fuel),a=w0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:o}}}),$4=e=>{var o,a;const t=e.machine_id,n=_r[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(o=n.tempOptions)==null?void 0:o[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Zl(s.temp)} - ${U1(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const c=u.temperature,p=O1(t,c);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:["Output Temperature: ",Zl(c)]}),d.jsxs("div",{children:["Power Consumption: ",U1(p)]})]})}}],onApply:(s,u)=>{const c=O1(t,s.temperature),p=u.outputs.map(_=>({..._,temperature:J0(t,s)}));return{settings:s,inputs:[],outputs:p,metrics:c}}}},W4=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[" Boiler uses the ",d.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),d.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),d.jsx("div",{children:" If output temp < 100C, no steam is produced"}),d.jsx("div",{children:" Water output is cooled (no temperature)"}),d.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),U4=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>MM(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[d.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),d.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),d.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),d.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[d.jsx("div",{children:" Speed affects input/output quantities and power"}),d.jsx("div",{children:" Efficiency affects input quantities and power"}),d.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),G4=()=>{const e=Wr.filter(n=>n.type==="item").sort((n,o)=>n.name.localeCompare(o.name)),t=Wr.filter(n=>n.type==="fluid").sort((n,o)=>n.name.localeCompare(o.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 240/s"}),d.jsx("div",{children:" Fixed requirements per cycle:"}),d.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),d.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const o=tc(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:o,outputs:[],metrics:null}}}},K4=()=>{const e=Wr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const o=[n.fluidProductId0,n.fluidProductId1],a=S0(o),s=Ms(a);return d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Water variants: 0%/hr"}),d.jsx("div",{children:" Residue: 8.64%/hr per /s"}),d.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),d.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:d.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),d.jsx("div",{children:" Connect fluids to dispose of them"}),d.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],o=S0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:o,outputs:[],metrics:null}}}},Y4=()=>{const e=Wr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const o=Array(8).fill(0).map((u,c)=>n[`fluidProductId${c}`]),a=C0(o),s=Es(a);return d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Water variants: 0%/hr"}),d.jsx("div",{children:" Residue: 8.64%/hr per /s"}),d.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),d.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:d.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),d.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),d.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),o=C0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:o,outputs:[],metrics:null}}}},Q4=({recipeType:e,nodeId:t,currentSettings:n,recipe:o,globalPollution:a,onSettingsChange:s,onClose:u})=>{var w;const c=D4(e,o,a),[p,_]=L.useState(n||c.defaultSettings),h=L.useRef(null),f=b=>{const E=h.current;if(!E)return;const q=E.scrollHeight>E.clientHeight,M=E.scrollTop===0&&b.deltaY<0,I=E.scrollTop+E.clientHeight>=E.scrollHeight&&b.deltaY>0;q&&!M&&!I||b.preventDefault(),b.stopPropagation()},y=(b,E)=>{_(typeof b=="object"?q=>({...q,...b}):q=>({...q,[b]:E}))},v=()=>{const b=c.onApply(p,o);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,b.settings,b.inputs,b.outputs);break;case"firebox":s(t,b.settings,b.inputs,b.metrics);break;case"temperature":s(t,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":s(t,b.settings);break;default:s(t,b.settings,b.inputs,b.outputs,b.metrics)}u()},x=()=>{_(c.defaultSettings)},k=c.calculateMetrics?c.calculateMetrics(p,o):null;return RP.createPortal(d.jsx("div",{className:"drill-settings-overlay",onClick:u,children:d.jsxs("div",{ref:h,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:f,children:[d.jsx("h3",{className:"drill-settings-title",children:c.title}),d.jsxs("div",{className:"drill-settings-content",children:[c.fields.map((b,E)=>d.jsx(X4,{field:b,value:p[b.key],settings:p,onChange:(q,M)=>{b.type==="dual-select"?y(q,M):y(b.key,q)}},E)),k&&c.renderMetrics&&d.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:c.renderMetrics(k,p)})]}),d.jsxs("div",{className:"drill-settings-buttons",children:[d.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Reset"}),d.jsx("button",{onClick:v,className:"btn btn-primary",disabled:(w=c.hasErrors)==null?void 0:w.call(c,p),children:"Apply"})]})]})}),document.body)},X4=({field:e,value:t,settings:n,onChange:o})=>{var a,s;switch(e.type){case"select":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("select",{value:t,onChange:u=>o(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>d.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&d.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return d.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:d.jsxs("label",{className:"drill-setting-label",children:[d.jsx("input",{type:"checkbox",checked:t,onChange:u=>o(u.target.checked),className:"drill-checkbox"}),d.jsx("span",{children:e.label})]})});case"number":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>o(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&d.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("button",{onClick:()=>o(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),d.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),d.jsx("button",{onClick:()=>o(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[d.jsxs("span",{children:["Min: ",e.min]}),d.jsxs("span",{children:["Default: ",e.defaultValue]}),d.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("input",{type:"text",value:t,onChange:u=>o(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[d.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const c=u.target.value;o(e.outerKey,c),c&&parseInt(c)>1&&o(e.innerKey,"64")},className:"select",style:{flex:1},children:[d.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>d.jsxs("option",{value:u,children:[u,"x"]},u))]}),d.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>o(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[d.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?d.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>d.jsxs("option",{value:u,children:[u,"x"]},u))]}),d.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return d.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[d.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),d.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},Is=44,E0=8,G1=10,K1=20,Y1=380,Z4=120,bl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,J4=L.memo(({data:e,id:t})=>{var rr,Gt,Xe,vi,Pt,pn;const{recipe:n,machine:o,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:c,onOutputClick:p,isTarget:_,onDrillSettingsChange:h,onLogicAssemblerSettingsChange:f,onTreeFarmSettingsChange:y,onIndustrialFireboxSettingsChange:v,onTemperatureSettingsChange:x,onBoilerSettingsChange:k,onChemicalPlantSettingsChange:w,globalPollution:b,flows:E,isMobile:q,mobileActionMode:M,onMachineCountModeChange:I,zoomLevel:C}=e,T=!C||C>=.25,[R,P]=L.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!o)return null;const z=n.isMineshaftDrill||n.id==="r_mineshaft_drill",F=n.isLogicAssembler||n.id==="r_logic_assembler",D=n.isTreeFarm||n.id==="r_tree_farm",X=n.isWasteFacility||n.id==="r_underground_waste_facility",N=n.isLiquidDump||n.id==="r_liquid_dump",G=n.isLiquidBurner||n.id==="r_liquid_burner",$=z||F||D||X||N||G,re=s4(o.id),Y=u4(o.id),Q=_r[o.id],ie=o.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",H=o.id==="m_chemical_plant",J=Kr(o.id),me=J?ln[o.id]:null;let W=n.cycle_time;const te=W==="Variable"||typeof W!="number"||W<=0;if(te&&!$?W="Variable":te&&$&&(W=1),J&&(me==null?void 0:me.type)==="steam_input"&&typeof W=="number"&&!(o.id==="m_steam_cracking_plant"&&!fi(n))){const fe=n.tempDependentInputTemp??Mn;W=Wn(o.id,fe,W)}const oe={outputs:[]};if(Q){const fe=Q.type==="boiler",it=(rr=n.outputs)==null?void 0:rr.some(Ft=>["p_water","p_filtered_water","p_distilled_water"].includes(Ft.product_id)),Fr=(Gt=n.outputs)==null?void 0:Gt.some(Ft=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Ft.product_id)),Lr=(Xe=n.inputs)==null?void 0:Xe.some(Ft=>["p_water","p_filtered_water","p_distilled_water"].includes(Ft.product_id)),mr=n.id==="r_industrial_firebox_07",Qn=o.id==="m_industrial_firebox";(!Qn||Qn&&!mr&&(Lr||it))&&((vi=n.outputs)==null||vi.forEach((Ft,nr)=>{if(_M(Ft.product_id)&&Ft.temperature!=null){const Kt=["p_water","p_filtered_water","p_distilled_water"].includes(Ft.product_id),dt=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Ft.product_id);fe?dt&&Fr&&oe.outputs.push({temp:Ft.temperature,index:nr}):(Kt&&it||dt&&Fr)&&oe.outputs.push({temp:Ft.temperature,index:nr})}}))}const pe=L.useCallback(fe=>{if(fe==="Variable")return"Variable";if(typeof fe!="number")return String(fe);if(W==="Variable")return s==="perSecond"?"Variable":String(bl(fe));let it=s==="perSecond"?fe/W:fe;return u==="total"&&(it*=a||0),String(bl(it))},[W,s,u,a]),ue=L.useCallback(fe=>{if(fe==="Variable"||typeof fe!="number")return fe;if(s==="perSecond")return"1s";if(fe>=60){const it=Math.floor(fe/60),Fr=fe%60;return`${it}m ${bl(Fr)}s`}return`${bl(fe)}s`},[s]),ve=L.useMemo(()=>ue(W),[W,ue]);let Ie=n.power_consumption,Re=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Ie=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Ie={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Ie={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(Re=n.pollution*a));const je=i4(Ie),Te=typeof je=="object"&&je!==null&&("drilling"in je&&"idle"in je||"max"in je&&"average"in je),Pe=n.power_type==="HV"?" HV":"",Ae=n.inputs.length,Ue=n.outputs.length,Be=Math.max(Ae,Ue,1),st=Ae>0,at=Ue>0,It=Y1-G1*2,wt=st&&at?Math.floor((It-K1)/2):st?It:0,bt=st&&at?Math.floor((It-K1)/2):at?It:0,lt=Y1,tr=Be*Is+(Be-1)*E0+24,Ut=Z4+tr+12,nt=a??0,Ar=Number.isInteger(nt)?nt.toString():nt.toFixed(2),Nt=e.machineCountMode||"free",Qr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`custom-node ${_?"target":""}`,style:{width:lt,height:Ut},onMouseDownCapture:fe=>{fe.button===1&&(fe.preventDefault(),fe.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[d.jsxs("div",{className:"node-info-area",children:[oe.outputs.length>0&&d.jsx("div",{onDoubleClick:fe=>fe.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:oe.outputs.map((fe,it)=>d.jsx("div",{children:Zl(fe.temp)},`output-${it}`))}),J&&(me==null?void 0:me.type)==="steam_input"&&fi(n)&&d.jsx("div",{onDoubleClick:fe=>fe.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Zl(n.tempDependentInputTemp??Mn)}),z&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("drill")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),F&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("assembler")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),D&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("treeFarm")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),ie&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("firebox")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),H&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("chemicalPlant")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),X&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("wasteFacility")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),N&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("liquidDump")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),G&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("liquidBurner")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),re&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("temperature")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),Y&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("boiler")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),d.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),d.jsxs("div",{className:"node-stats-row",children:[d.jsxs("div",{className:"node-stats",style:{gap:Te?"1px":"3px",minHeight:"65px",visibility:T?"visible":"hidden"},children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",ve]}),Te?"drilling"in je?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",je.drilling,Pe]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",je.idle,Pe]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",je.max,Pe]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",je.average,Pe]})]}):d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power:"})," ",je,Pe]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",o4(Re)]})]}),d.jsxs("div",{className:"node-machine-info",style:{visibility:T?"visible":"hidden"},children:[d.jsx("div",{className:"node-machine-name",title:o.name,style:{color:o.tier===1?"var(--tier-1-color)":o.tier===2?"var(--tier-2-color)":o.tier===3?"var(--tier-3-color)":o.tier===4?"var(--tier-4-color)":(o.tier===5,"var(--tier-5-color)")},children:o.name}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{className:"node-machine-count",style:Qr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Ar}),Nt!=="free"&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),I&&I(t,Nt,a)},onDoubleClick:fe=>fe.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:fe=>fe.currentTarget.style.opacity="1",onMouseLeave:fe=>fe.currentTarget.style.opacity="0.8",title:Nt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Pt=e.cappedMachineCount)==null?void 0:Pt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((pn=e.cappedMachineCount)==null?void 0:pn.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Nt==="locked"?"":""})]})]})]})]}),d.jsxs("div",{className:"node-io-area",children:[d.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:st&&at?`${wt}px 1fr ${bt}px`:"1fr",padding:`0 ${G1}px`},children:[st&&d.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((fe,it)=>d.jsx("div",{className:"node-rect-wrapper",children:d.jsx(Q1,{side:"left",index:it,width:wt,input:fe,onClick:c,nodeId:t,formatQuantity:pe,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${it}-${fe.product_id}`))}),st&&at&&d.jsx("div",{className:"node-io-gap"}),at&&d.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((fe,it)=>d.jsx("div",{className:"node-rect-wrapper",children:d.jsx(Q1,{side:"right",index:it,width:bt,input:fe,onClick:p,nodeId:t,formatQuantity:pe,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${it}-${fe.product_id}`))})]}),d.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((fe,it)=>d.jsx(X1,{side:"left",index:it,onClick:c,nodeId:t,productId:fe.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:fe,data:e,leftCount:Ae,rightCount:Ue},`handle-left-${t}-${it}`)),n.outputs.map((fe,it)=>d.jsx(X1,{side:"right",index:it,onClick:p,nodeId:t,productId:fe.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:fe,data:e,leftCount:Ae,rightCount:Ue},`handle-right-${t}-${it}`))]})]})]}),R&&d.jsx(Q4,{recipeType:R,nodeId:t,currentSettings:R==="drill"?n.drillSettings:R==="assembler"?n.assemblerSettings:R==="treeFarm"?n.treeFarmSettings:R==="firebox"?n.fireboxSettings:R==="temperature"||R==="boiler"?n.temperatureSettings:R==="chemicalPlant"?n.chemicalPlantSettings:R==="wasteFacility"?n.wasteFacilitySettings:R==="liquidDump"?n.liquidDumpSettings:R==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:b||0,onSettingsChange:R==="drill"?h:R==="assembler"?f:R==="treeFarm"?y:R==="firebox"?v:R==="temperature"?x:R==="boiler"?k:R==="chemicalPlant"?w:R==="wasteFacility"?e.onWasteFacilitySettingsChange:R==="liquidDump"?e.onLiquidDumpSettingsChange:R==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>P(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,o=t.data;return!(n.recipe!==o.recipe||n.machineCount!==o.machineCount||n.flows!==o.flows||n.suggestions!==o.suggestions||n.displayMode!==o.displayMode||n.machineDisplayMode!==o.machineDisplayMode||n.isTarget!==o.isTarget||n.zoomLevel!==o.zoomLevel||n.machineCountMode!==o.machineCountMode)}),Q1=({side:e,index:t,width:n,input:o,onClick:a,nodeId:s,formatQuantity:u,isMobile:c,mobileActionMode:p})=>{const _=e==="left",h=pi(o.product_id,yt,o.acceptedType),f=u(o.quantity),y=!c||p==="pan";return d.jsx("div",{onClick:v=>{a&&y&&(v.stopPropagation(),a(o.product_id,s,t,v))},title:`${f}x ${h}`,className:`node-rect ${_?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${Is}px`,minWidth:`${n}px`},children:d.jsxs("span",{className:"node-rect-text",children:[f,"x ",h]})})},X1=({side:e,index:t,onClick:n,nodeId:o,productId:a,flows:s,onHandleDoubleClick:u,suggestions:c,input:p,data:_,leftCount:h,rightCount:f})=>{var D,X;const x=(N,G)=>{const $=Math.max(Math.abs(N),Math.abs(G))*1e-4,re=Math.max($,1e-6);return Math.abs(N)>re},k=getComputedStyle(document.documentElement),w=k.getPropertyValue("--handle-input-supplied").trim(),b=k.getPropertyValue("--handle-input-deficient").trim(),E=k.getPropertyValue("--handle-output-connected").trim(),q=k.getPropertyValue("--handle-output-excess").trim();let M=e==="left"?w:E;if(s){const N=e==="left"?(D=s.inputFlows)==null?void 0:D[t]:(X=s.outputFlows)==null?void 0:X[t];if(N){const G=e==="left"?N.needed-N.connected:N.produced-N.connected,$=e==="left"?N.needed:N.produced;x(G,$)&&G>0&&(M=e==="left"?b:q)}}const I=yt(a),T=(I==null?void 0:I.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",F=12+(Math.max(h,f)-(e==="left"?h:f))*(Is+E0)/2+t*(Is+E0)+Is/2+11;return d.jsx(Ds,{type:e==="left"?"target":"source",position:e==="left"?$e.Left:$e.Right,id:`${e}-${t}`,style:{background:M,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:T,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${F}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:N=>{n&&N.ctrlKey&&(N.stopPropagation(),n(a,o,t,N))},onDoubleClick:N=>{u&&(N.stopPropagation(),u(o,e,t,a,c))}})},e3=({id:e,sourceX:t,sourceY:n,targetX:o,targetY:a,sourcePosition:s,targetPosition:u,data:c})=>{const p=(c==null?void 0:c.edgePath)||"orthogonal",_=(c==null?void 0:c.edgeStyle)||"animated",[h]=L.useMemo(()=>p==="straight"?H0({sourceX:t,sourceY:n,targetX:o,targetY:a}):p==="orthogonal"?Gl({sourceX:t,sourceY:n,sourcePosition:s,targetX:o,targetY:a,targetPosition:u,borderRadius:8}):B0({sourceX:t,sourceY:n,sourcePosition:s,targetX:o,targetY:a,targetPosition:u}),[t,n,o,a,s,u,p]),f=_==="animated"?"custom-edge custom-edge-animated":_==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return d.jsx("path",{id:e,className:f,d:h,fill:"none"})},t3=L.memo(e3,(e,t)=>{var n,o,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((o=t.data)==null?void 0:o.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),wa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},r3=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:wa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],rc=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,o])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,o)})},Al=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):wa}catch{return wa}},I0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),n3=()=>(rc(wa),I0(wa),wa),i3=({onClose:e})=>{const[t,n]=L.useState(Al()),[o,a]=L.useState(!1),s=f=>{const y={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},v={...f.theme,...y};n(v),rc(v),I0(v)},u=(f,y)=>{const v={...t,[f]:y};n(v),rc(v),I0(v)},c=()=>{const f=n3();n(f)},p=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],_=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],h=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:f=>f.stopPropagation(),style:{width:o?"700px":"600px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Theme Editor"}),o?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[d.jsxs("div",{className:"theme-group",children:[d.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[d.jsxs("div",{children:[d.jsx("label",{className:"theme-color-label",children:"Path Type:"}),d.jsx("select",{value:t.edgePath||"bezier",onChange:f=>u("edgePath",f.target.value),className:"select",style:{marginTop:"6px"},children:_.map(f=>d.jsx("option",{value:f.value,children:f.label},f.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"theme-color-label",children:"Line Style:"}),d.jsx("select",{value:t.edgeStyle||"animated",onChange:f=>u("edgeStyle",f.target.value),className:"select",style:{marginTop:"6px"},children:h.map(f=>d.jsx("option",{value:f.value,children:f.label},f.value))})]})]})]}),p.map(f=>d.jsxs("div",{className:"theme-group",children:[d.jsx("h3",{className:"theme-group-title",children:f.title}),d.jsx("div",{className:"theme-color-grid",children:f.colors.map(y=>{const v=t[y.key]||"#000000",x=v.length>7?v.substring(0,7):v;return d.jsxs("div",{className:"theme-color-item",children:[d.jsx("label",{className:"theme-color-label",children:y.label}),d.jsxs("div",{className:"theme-color-inputs",children:[d.jsx("input",{type:"color",value:x,onChange:k=>{const w=t[y.key];if(w&&w.length>7){const b=w.substring(7);u(y.key,k.target.value+b)}else u(y.key,k.target.value)},className:"theme-color-picker"}),d.jsx("input",{type:"text",value:t[y.key],onChange:k=>u(y.key,k.target.value),className:"input theme-color-text"})]})]},y.key)})})]},f.title))]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{onClick:c,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),d.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[d.jsx("div",{style:{marginBottom:"20px"},children:d.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r3.map(f=>d.jsx("div",{onClick:()=>s(f),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.02)",y.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow="none"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:f.name}),d.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:f.description})]}),d.jsx("div",{style:{display:"flex",gap:"6px"},children:[f.theme.colorPrimary,f.theme.bgMain,f.theme.inputBorder,f.theme.outputBorder].map((y,v)=>d.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:y,border:"1px solid rgba(255,255,255,0.2)"}},v))})]})},f.id))})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),d.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},o3=({onClose:e})=>d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Help & Controls"}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",d.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),d.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[d.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)"},children:[d.jsx("div",{children:"Cycle: 4s"}),d.jsx("div",{children:"Power: 150kW"}),d.jsx("div",{children:"Pollution: 0%/hr"})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),d.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),d.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),d.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),d.jsx("div",{style:{minWidth:"250px"},children:d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),d.jsxs("div",{style:{marginTop:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),d.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),d.jsxs("div",{style:{marginTop:"25px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",d.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:["Use ",d.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",d.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:["Use ",d.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),d.jsxs("div",{style:{paddingLeft:"15px"},children:[d.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),d.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),d.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),d.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),d.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),a3="industrialist_db",s3=1,fr="canvas_saves",zs="industrialist_current_save_id";let ql=null;const Qi=()=>new Promise((e,t)=>{if(ql){e(ql);return}const n=indexedDB.open(a3,s3);n.onerror=()=>{console.error("IndexedDB failed to open:",n.error),t(n.error)},n.onsuccess=()=>{ql=n.result,e(ql)},n.onupgradeneeded=o=>{const a=o.target.result;if(!a.objectStoreNames.contains(fr)){const s=a.createObjectStore(fr,{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("name","name",{unique:!1})}}}),NM=async()=>{try{const e=await Qi();return new Promise((t,n)=>{const s=e.transaction([fr],"readonly").objectStore(fr).getAll();s.onsuccess=()=>{const u=s.result,c={};u.forEach(p=>{c[p.id]=p}),t(c)},s.onerror=()=>{console.error("Error getting saves:",s.error),n(s.error)}})}catch(e){return console.error("Error accessing IndexedDB:",e),{}}},u3=async(e,t)=>{var n;try{const o=await Qi(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return new Promise((u,c)=>{const h=o.transaction([fr],"readwrite").objectStore(fr).add(s);h.onsuccess=()=>{localStorage.setItem(zs,a),u(s)},h.onerror=()=>{console.error("Error saving canvas:",h.error),c(h.error)}})}catch(o){return console.error("Error saving to IndexedDB:",o),null}},l3=async e=>{try{const t=await Qi();return new Promise((n,o)=>{const u=t.transaction([fr],"readonly").objectStore(fr).get(e);u.onsuccess=()=>{const c=u.result;c?(localStorage.setItem(zs,e),n(c.data)):n(null)},u.onerror=()=>{console.error("Error loading save:",u.error),o(u.error)}})}catch(t){return console.error("Error loading from IndexedDB:",t),null}},c3=async e=>{try{const t=await Qi();return new Promise((n,o)=>{const u=t.transaction([fr],"readwrite").objectStore(fr).delete(e);u.onsuccess=()=>{localStorage.getItem(zs)===e&&localStorage.removeItem(zs),n(!0)},u.onerror=()=>{console.error("Error deleting save:",u.error),o(u.error)}})}catch(t){return console.error("Error deleting from IndexedDB:",t),!1}},d3=async(e,t)=>{try{const n=await Qi();return new Promise((o,a)=>{const u=n.transaction([fr],"readwrite").objectStore(fr),c=u.get(e);c.onsuccess=()=>{const p=c.result;if(p){p.name=t;const _=u.put(p);_.onsuccess=()=>o(!0),_.onerror=()=>{console.error("Error updating save:",_.error),a(_.error)}}else o(!1)},c.onerror=()=>{console.error("Error getting save for rename:",c.error),a(c.error)}})}catch(n){return console.error("Error renaming in IndexedDB:",n),!1}},p3=async()=>{try{const e=localStorage.getItem(zs);if(!e)return"Untitled";const t=await Qi();return new Promise(n=>{const s=t.transaction([fr],"readonly").objectStore(fr).get(e);s.onsuccess=()=>{const u=s.result;n((u==null?void 0:u.name)||"Untitled")},s.onerror=()=>{console.error("Error getting current save name:",s.error),n("Untitled")}})}catch{return"Untitled"}},_3=async()=>{const e="industrialist_saves";try{const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t),o=Object.keys(n);if(o.length===0){localStorage.removeItem(e);return}const a=await Qi(),s=await NM();if(Object.keys(s).length>0){localStorage.removeItem(e);return}for(const u of o){const c=n[u];await new Promise((p,_)=>{const y=a.transaction([fr],"readwrite").objectStore(fr).add(c);y.onsuccess=()=>p(),y.onerror=()=>{console.error(`Error migrating save ${u}:`,y.error),p()}})}localStorage.removeItem(e),console.log(`Migrated ${o.length} saves from localStorage to IndexedDB`)}catch(t){console.error("Error during migration:",t)}},f3=async()=>{try{await Qi(),await _3()}catch(e){console.error("Failed to initialize save system:",e)}},m3=({onClose:e,onLoad:t,currentCanvas:n,onImport:o,onExportCanvas:a})=>{const[s,u]=L.useState({}),[c,p]=L.useState(""),[_,h]=L.useState(null),[f,y]=L.useState(""),[v,x]=L.useState(null),[k,w]=L.useState("Untitled"),[b,E]=L.useState(!0),[q,M]=L.useState(!1);L.useEffect(()=>{I()},[]);const I=async()=>{E(!0);try{const N=await NM();u(N);const G=localStorage.getItem("industrialist_current_save_id");x(G);const $=await p3();w($)}catch(N){console.error("Error loading saves:",N)}finally{E(!1)}},C=async()=>{if(!c.trim()){alert("Please enter a name for your save");return}M(!0);try{const N=await u3(c.trim(),n);N?(p(""),await I(),alert(`Canvas saved as "${N.name}"`)):alert("Failed to save canvas")}catch(N){console.error("Error saving:",N),alert("Failed to save canvas")}finally{M(!1)}},T=async N=>{if(window.confirm("Load this save? Your current canvas will be replaced.")){E(!0);try{const G=await l3(N);G?(x(N),t(G),e()):alert("Failed to load save")}catch(G){console.error("Error loading:",G),alert("Failed to load save")}finally{E(!1)}}},R=async N=>{const G=s[N];if(window.confirm(`Delete save "${G.name}"? This cannot be undone.`))try{await c3(N)?await I():alert("Failed to delete save")}catch($){console.error("Error deleting:",$),alert("Failed to delete save")}},P=N=>{h(N),y(s[N].name)},z=async N=>{if(!f.trim()){alert("Name cannot be empty");return}try{await d3(N,f.trim())?(await I(),h(null),y("")):alert("Failed to rename save")}catch(G){console.error("Error renaming:",G),alert("Failed to rename save")}},F=()=>{h(null),y("")},D=N=>new Date(N).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),X=Object.values(s).sort((N,G)=>G.timestamp-N.timestamp);return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Save Manager"}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:k})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[d.jsx("input",{type:"text",value:c,onChange:N=>p(N.target.value),onKeyPress:N=>N.key==="Enter"&&C(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),d.jsx("button",{onClick:C,className:"btn btn-primary",style:{minWidth:"120px"},disabled:q,children:q?"Saving...":"Save Current"})]}),d.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:()=>{o&&o()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),d.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[d.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",X.length,")"]}),b?d.jsx("div",{className:"empty-state",children:"Loading saves..."}):X.length===0?d.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:X.map(N=>d.jsxs("div",{style:{padding:"15px",background:v===N.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:v===N.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[_===N.id?d.jsx("div",{style:{marginBottom:"10px"},children:d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("input",{type:"text",value:f,onChange:G=>y(G.target.value),onKeyPress:G=>{G.key==="Enter"&&z(N.id),G.key==="Escape"&&F()},className:"input",style:{flex:1},autoFocus:!0}),d.jsx("button",{onClick:()=>z(N.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),d.jsx("button",{onClick:F,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[N.name,v===N.id&&d.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[D(N.timestamp),"  ",N.nodeCount," nodes"]})]})}),_!==N.id&&d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:()=>T(N.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),d.jsx("button",{onClick:()=>P(N.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),d.jsx("button",{onClick:()=>R(N.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},N.id))})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},h3=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],y3=({recipe:e,onClose:t,onSave:n,availableProducts:o,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var C,T,R;const c=!u&&h3.includes(e.id),p=!u&&(((C=e.inputs)==null?void 0:C.some(P=>P.product_id==="p_variableproduct"))||((T=e.outputs)==null?void 0:T.some(P=>P.product_id==="p_variableproduct"))),[_,h]=L.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),f=(P,z)=>{h(F=>({...F,[P]:z}))},y=(P,z,F)=>{const D=[..._.inputs];D[P]={...D[P],[z]:F},h(X=>({...X,inputs:D}))},v=(P,z,F)=>{const D=[..._.outputs];D[P]={...D[P],[z]:F},h(X=>({...X,outputs:D}))},x=()=>{const P=[..._.inputs,{product_id:"",quantity:1}];h(z=>({...z,inputs:P}))},k=P=>{const z=_.inputs.filter((F,D)=>D!==P);h(F=>({...F,inputs:z}))},w=()=>{const P=[..._.outputs,{product_id:"",quantity:1}];h(z=>({...z,outputs:P}))},b=P=>{const z=_.outputs.filter((F,D)=>D!==P);h(F=>({...F,outputs:z}))},E=P=>{const F=`r_${P.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,D=s.filter(N=>N.id.startsWith(F)).map(N=>{const G=N.id.match(/_(\d+)$/);return G?parseInt(G[1]):0});let X=1;for(;D.includes(X);)X++;return`${F}${String(X).padStart(2,"0")}`},q=()=>{if(u){if(!_.name||!_.name.trim())return alert("Recipe name is required"),!1;if(!_.machine_id)return alert("Machine is required"),!1;if(!a.find(G=>G.id===_.machine_id))return alert("Selected machine does not exist"),!1}const z=[..._.inputs.map(N=>N.product_id),..._.outputs.map(N=>N.product_id)].filter(N=>N&&N!=="p_variableproduct"&&N!=="p_any_fluid"&&N!=="p_any_item"&&!o.find(G=>G.id===N));if(z.length>0)return alert(`Invalid product IDs: ${z.join(", ")}`),!1;const F=_.inputs.some(N=>!N.product_id),D=_.outputs.some(N=>!N.product_id);return F||D?(alert("All inputs and outputs must have a product selected"),!1):typeof _.cycle_time=="number"&&_.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((_.inputs.some(N=>N.quantity==="Variable")||_.outputs.some(N=>N.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},M=()=>{if(!q())return;let P={..._};if(u){const z=a.find(F=>F.id===_.machine_id);P.id=E(z.name)}n(P),t()},I=a.find(P=>P.id===e.machine_id);return c||p?d.jsx("div",{className:"modal-overlay",onClick:t,children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"600px"},children:[d.jsx("h2",{className:"modal-title",children:c?"Special Recipe":"Variable Product Recipe"}),d.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:c?d.jsxs(d.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",d.jsx("br",{}),d.jsx("br",{}),"Special recipes include:",d.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[d.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),d.jsx("li",{children:"Logic Assembler (microchip stages)"}),d.jsx("li",{children:"Tree Farm (layout configuration)"}),d.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),d.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):d.jsx(d.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),d.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):d.jsx("div",{className:"modal-overlay",onClick:t,children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[d.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),d.jsx("input",{type:"text",value:_.name,onChange:P=>f("name",P.target.value),placeholder:"Enter recipe name",className:"input"})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?d.jsxs("select",{value:_.machine_id,onChange:P=>f("machine_id",P.target.value),className:"select",children:[d.jsx("option",{value:"",children:"Select a machine"}),a.sort((P,z)=>P.name.localeCompare(z.name)).map(P=>d.jsxs("option",{value:P.id,children:[P.name," (Tier ",P.tier||1,")"]},P.id))]}):d.jsx("div",{style:{color:(I==null?void 0:I.tier)===1?"var(--tier-1-color)":(I==null?void 0:I.tier)===2?"var(--tier-2-color)":(I==null?void 0:I.tier)===3?"var(--tier-3-color)":(I==null?void 0:I.tier)===4?"var(--tier-4-color)":(I==null?void 0:I.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(I==null?void 0:I.name)||e.machine_id}),u&&_.machine_id&&d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",E(((R=a.find(P=>P.id===_.machine_id))==null?void 0:R.name)||"")]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:_.cycle_time==="Variable"?"":_.cycle_time,onChange:P=>f("cycle_time",parseFloat(P.target.value)),placeholder:_.cycle_time==="Variable"?"Variable":"",className:"input",disabled:_.cycle_time==="Variable",title:_.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),d.jsx("input",{type:"number",step:"1000",value:typeof _.power_consumption=="number"?_.power_consumption:"",onChange:P=>f("power_consumption",parseFloat(P.target.value)),placeholder:"Variable",className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),d.jsxs("select",{value:_.power_type||"MV",onChange:P=>f("power_type",P.target.value),className:"select",children:[d.jsx("option",{value:"LV",children:"LV"}),d.jsx("option",{value:"MV",children:"MV"}),d.jsx("option",{value:"HV",children:"HV"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),d.jsx("input",{type:"number",step:"0.1",value:_.pollution,onChange:P=>f("pollution",parseFloat(P.target.value)),className:"input"})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[d.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),d.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),_.inputs.map((P,z)=>d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[d.jsxs("select",{value:P.product_id,onChange:F=>y(z,"product_id",F.target.value),className:"select",style:{flex:2},children:[d.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>d.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>y(z,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),d.jsx("button",{onClick:()=>k(z),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},z)),_.inputs.length===0&&d.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[d.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),d.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),_.outputs.map((P,z)=>d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[d.jsxs("select",{value:P.product_id,onChange:F=>v(z,"product_id",F.target.value),className:"select",style:{flex:2},children:[d.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>d.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>v(z,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),d.jsx("button",{onClick:()=>b(z),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},z)),_.outputs.length===0&&d.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},nc="industrialist_custom_products",ic="industrialist_custom_machines",oc="industrialist_custom_recipes",g3=(e,t,n)=>{localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(e)),localStorage.getItem(ic)||localStorage.setItem(ic,JSON.stringify(t)),localStorage.getItem(oc)||localStorage.setItem(oc,JSON.stringify(n))},ja=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Ta=()=>{try{const e=localStorage.getItem(ic);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},eu=()=>{try{const e=localStorage.getItem(oc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Bs=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Hs=e=>{try{return localStorage.setItem(ic,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},$s=e=>{try{return localStorage.setItem(oc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},Z1=(e,t)=>{const n=ja(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},Bs(n)):!1},J1=(e,t)=>{const n=Ta(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},Hs(n)):!1},v3=(e,t)=>{const n=eu(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},$s(n)):!1},x3=e=>Bs(e),w3=e=>Hs(e),b3=e=>$s(e),q3=(e,t,n)=>{const o={};return e&&(o.products=ja()),t&&(o.machines=Ta()),n&&(o.recipes=eu()),o},S3=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=ja(),o=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());Bs(a)&&(t.products=e.products.length)}if(e.machines){const n=Ta(),o=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());Hs(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=eu(),o=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());$s(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,kr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),Rp=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,k3=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return kn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const c=a.inputs.some(_=>_.product_id===e&&_.product_id!=="p_variableproduct"),p=t.includes(e)&&n.includes(a.id)&&a.inputs.some(_=>_.product_id==="p_variableproduct");return c||p||u})},C3=e=>kn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),kl=e=>{const t=kn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[b0]:e==="m_liquid_dump"?[k0]:e==="m_liquid_burner"?[M0]:t},PM=(e,t,n,o,a=Ur)=>{const s=(o==null?void 0:o.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const c=Math.max(t,a),p=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return c<s?{...u,temperature:c,quantity:0,originalQuantity:p}:{...u,temperature:c,quantity:p,originalQuantity:p}}return u}if(_M(u.product_id)){const c=Math.max(t,a);return{...u,temperature:c}}return u})},gs=(e,t)=>{let n={...e};const o=_r[t];if(o){const s=l4(t),u=o.type==="boiler",c=u?Gi:Ur,p=u?{...s,coolantTemp:Gi}:s;let _=null;if(o.type==="product_dependent"&&e.inputs){const y=e.inputs.find(v=>["p_water","p_filtered_water","p_distilled_water"].includes(v.product_id));_=(y==null?void 0:y.product_id)||null}const h=J0(t,p,c,_,u?Gi:null),f=PM(e.outputs,h,u,o,c);n={...n,outputs:f,temperatureSettings:p}}if(Kr(t)){const s=ln[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:Mn})}return n},M3=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:o,onDataChange:a})=>{const[s,u]=L.useState("products"),[c,p]=L.useState(""),[_,h]=L.useState(!0),[f,y]=L.useState(!0),[v,x]=L.useState(!0),k=L.useRef(null),w=()=>{const q=q3(_,f,v),M=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),I=URL.createObjectURL(M),C=document.createElement("a");C.href=I,C.download=`industrialist-data-${Date.now()}.json`,C.click(),URL.revokeObjectURL(I)},b=()=>{var q;(q=k.current)==null||q.click()},E=q=>{var C;const M=(C=q.target.files)==null?void 0:C[0];if(!M)return;const I=new FileReader;I.onload=T=>{try{const R=JSON.parse(T.target.result),P=R.products||R.machines||R.recipes,z=R.canvas;if(!P&&z){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),q.target.value="";return}if(!P){alert("This file does not contain any game data (products, machines, or recipes)."),q.target.value="";return}if(z&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){q.target.value="";return}const F=S3(R);let D=`Import complete:
`;F.products>0&&(D+=`- ${F.products} products imported/updated
`),F.machines>0&&(D+=`- ${F.machines} machines imported/updated
`),F.recipes>0&&(D+=`- ${F.recipes} recipes imported/updated
`),F.errors.length>0&&(D+=`
Errors: ${F.errors.join(", ")}`),alert(D),a()}catch(R){alert(`Import failed: ${R.message}`)}},I.readAsText(M),q.target.value=""};return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[d.jsx("h2",{className:"modal-title",children:"Data Manager"}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[d.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),d.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:_,onChange:q=>h(q.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:f,onChange:q=>y(q.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:v,onChange:q=>x(q.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),d.jsx("button",{onClick:w,className:"btn btn-primary",children:"Export Data"})]})]}),d.jsx("input",{ref:k,type:"file",accept:".json",style:{display:"none"},onChange:E})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[d.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),d.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),d.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:c,onChange:q=>p(q.target.value),className:"input"})}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&d.jsx(E3,{searchTerm:c,defaultProducts:t,onDataChange:a}),s==="machines"&&d.jsx(I3,{searchTerm:c,defaultMachines:n,onDataChange:a}),s==="recipes"&&d.jsx(j3,{searchTerm:c,defaultRecipes:o,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},E3=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[o,a]=L.useState([]),[s,u]=L.useState(null),[c,p]=L.useState({}),[_,h]=L.useState(!1),[f,y]=L.useState({name:"",type:"item",price:0,rp_multiplier:1});L.useEffect(()=>{v()},[]);const v=()=>{a(ja())},x=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,T)=>C.name.localeCompare(T.name)),k=C=>{u(C.id),p({price:C.price==="Variable"?"":C.price,rp_multiplier:C.rp_multiplier==="Variable"?"":C.rp_multiplier,type:C.type})},w=C=>{const T={price:c.price===""?"Variable":parseFloat(c.price),rp_multiplier:c.rp_multiplier===""?"Variable":parseFloat(c.rp_multiplier),type:c.type};Z1(C,T)?(v(),n(),u(null)):alert("Failed to update product")},b=()=>{u(null),p({})},E=C=>{const T=t.find(P=>P.id===C);if(!T){alert("Default product not found");return}const R={price:T.price,rp_multiplier:T.rp_multiplier,type:T.type};Z1(C,R)?(v(),n()):alert("Failed to reset product to default")},q=C=>"p_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!f.name.trim()){alert("Product name is required");return}const C=q(f.name);if(o.find(P=>P.id===C)){alert(`Product ID "${C}" already exists. Please use a different name.`);return}const T={id:C,name:f.name.trim(),type:f.type,price:parseFloat(f.price)||0,rp_multiplier:parseFloat(f.rp_multiplier)||1},R=[...o,T];Bs(R)?(v(),n(),h(!1),y({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},I=C=>{var R;if(!window.confirm(`Delete product "${(R=o.find(P=>P.id===C))==null?void 0:R.name}"? This cannot be undone.`))return;const T=o.filter(P=>P.id!==C);Bs(T)?(v(),n()):alert("Failed to delete product")};return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:()=>h(!_),className:"btn btn-primary",style:{width:"100%"},children:_?"Cancel":"+ Add New Product"})}),_&&d.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),d.jsx("input",{type:"text",value:f.name,onChange:C=>y({...f,name:C.target.value}),className:"input",placeholder:"Product name"}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?q(f.name):"p_..."]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),d.jsxs("select",{value:f.type,onChange:C=>y({...f,type:C.target.value}),className:"select",children:[d.jsx("option",{value:"item",children:"Item"}),d.jsx("option",{value:"fluid",children:"Fluid"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),d.jsx("input",{type:"number",value:f.price,onChange:C=>y({...f,price:C.target.value}),className:"input",placeholder:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),d.jsx("input",{type:"number",step:"0.1",value:f.rp_multiplier,onChange:C=>y({...f,rp_multiplier:C.target.value}),className:"input",placeholder:"1"})]})]}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Product Name"}),d.jsx("div",{children:"Type"}),d.jsx("div",{children:"Price"}),d.jsx("div",{children:"RP Mult"}),d.jsx("div",{children:"Actions"})]}),x.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),s===C.id?d.jsxs(d.Fragment,{children:[d.jsxs("select",{value:c.type,onChange:T=>p({...c,type:T.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[d.jsx("option",{value:"item",children:"Item"}),d.jsx("option",{value:"fluid",children:"Fluid"})]}),d.jsx("input",{type:"number",value:c.price,onChange:T=>p({...c,price:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.price==="Variable",title:C.price==="Variable"?"Cannot edit Variable values":""}),d.jsx("input",{type:"number",value:c.rp_multiplier,onChange:T=>p({...c,rp_multiplier:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.rp_multiplier==="Variable",title:C.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>w(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),d.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.type}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.price==="Variable"?"Variable":`$${kr(C.price)}`}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.rp_multiplier==="Variable"?"Variable":`${C.rp_multiplier>=1e3?kr(C.rp_multiplier):C.rp_multiplier}x`}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),d.jsx("button",{onClick:()=>I(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},I3=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[o,a]=L.useState([]),[s,u]=L.useState(null),[c,p]=L.useState({}),[_,h]=L.useState(!1),[f,y]=L.useState({name:"",cost:0,tier:1});L.useEffect(()=>{v()},[]);const v=()=>{a(Ta())},x=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,T)=>C.name.localeCompare(T.name)),k=C=>{u(C.id),p({cost:C.cost,tier:C.tier||1})},w=C=>{const T={cost:parseFloat(c.cost),tier:parseInt(c.tier)};J1(C,T)?(v(),n(),u(null)):alert("Failed to update machine")},b=()=>{u(null),p({})},E=C=>{const T=t.find(P=>P.id===C);if(!T){alert("Default machine not found");return}const R={cost:T.cost,tier:T.tier};J1(C,R)?(v(),n()):alert("Failed to reset machine to default")},q=C=>"m_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!f.name.trim()){alert("Machine name is required");return}const C=q(f.name);if(o.find(P=>P.id===C)){alert(`Machine ID "${C}" already exists. Please use a different name.`);return}const T={id:C,name:f.name.trim(),cost:parseFloat(f.cost)||0,tier:parseInt(f.tier)||1},R=[...o,T];Hs(R)?(v(),n(),h(!1),y({name:"",cost:0,tier:1})):alert("Failed to add machine")},I=C=>{var R;if(!window.confirm(`Delete machine "${(R=o.find(P=>P.id===C))==null?void 0:R.name}"? This cannot be undone.`))return;const T=o.filter(P=>P.id!==C);Hs(T)?(v(),n()):alert("Failed to delete machine")};return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:()=>h(!_),className:"btn btn-primary",style:{width:"100%"},children:_?"Cancel":"+ Add New Machine"})}),_&&d.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[d.jsxs("div",{style:{gridColumn:"1 / -1"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),d.jsx("input",{type:"text",value:f.name,onChange:C=>y({...f,name:C.target.value}),className:"input",placeholder:"Machine name"}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?q(f.name):"m_..."]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),d.jsx("input",{type:"number",value:f.cost,onChange:C=>y({...f,cost:C.target.value}),className:"input",placeholder:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),d.jsxs("select",{value:f.tier,onChange:C=>y({...f,tier:C.target.value}),className:"select",children:[d.jsx("option",{value:"1",children:"Tier 1"}),d.jsx("option",{value:"2",children:"Tier 2"}),d.jsx("option",{value:"3",children:"Tier 3"}),d.jsx("option",{value:"4",children:"Tier 4"}),d.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Machine Name"}),d.jsx("div",{children:"Cost"}),d.jsx("div",{children:"Tier"}),d.jsx("div",{children:"Actions"})]}),x.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),s===C.id?d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",value:c.cost,onChange:T=>p({...c,cost:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),d.jsx("input",{type:"number",min:"1",max:"5",value:c.tier,onChange:T=>p({...c,tier:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>w(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),d.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",kr(C.cost)]}),d.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",C.tier||1]}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),d.jsx("button",{onClick:()=>I(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},j3=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:o,onDataChange:a})=>{const[s,u]=L.useState([]),[c,p]=L.useState([]),[_,h]=L.useState([]),[f,y]=L.useState(null),[v,x]=L.useState(!1);L.useEffect(()=>{k(),w(),b()},[]);const k=()=>{u(eu())},w=()=>{p(ja())},b=()=>{h(Ta())},E=(C,T=!1)=>{if(T){const R=[...s,C];$s(R)?(k(),w(),b(),a()):alert("Failed to create recipe")}else v3(C.id,C)?(k(),w(),b(),a()):alert("Failed to save recipe")},q=C=>{var R;if(!window.confirm(`Delete recipe "${((R=s.find(P=>P.id===C))==null?void 0:R.name)||C}"? This cannot be undone.`))return;const T=s.filter(P=>P.id!==C);$s(T)?(k(),w(),b(),a()):alert("Failed to delete recipe")},M=()=>{y({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),x(!0)},I=s.filter(C=>{var T;return((T=C.name)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))||C.id.toLowerCase().includes(e.toLowerCase())}).sort((C,T)=>{const R=C.name||C.id,P=T.name||T.id;return R.localeCompare(P)});return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Recipe Name"}),d.jsx("div",{children:"Machine"}),d.jsx("div",{children:"Cycle Time"}),d.jsx("div",{children:"Power"}),d.jsx("div",{children:"Actions"})]}),I.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name||C.id}),d.jsx("div",{style:{color:(()=>{const T=_.find(R=>R.id===C.machine_id);if(!T)return"var(--text-secondary)";switch(T.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const T=_.find(R=>R.id===C.machine_id);return T?T.name:C.machine_id})()}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.cycle_time=="number"?`${C.cycle_time}s`:String(C.cycle_time)}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.power_consumption=="number"?`${kr(C.power_consumption)}W`:typeof C.power_consumption=="object"&&C.power_consumption!==null?`${kr(C.power_consumption.max||C.power_consumption.average||0)}W`:String(C.power_consumption)}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>{y(C),x(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>q(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},C.id)),f&&d.jsx(y3,{recipe:f,onClose:()=>{y(null),x(!1)},onSave:C=>E(C,v),availableProducts:c,defaultMachines:_,allRecipes:s,isCreatingNew:v})]})},Fl=(e,t)=>{var s,u,c,p,_,h;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},o=e.length;for(let f=0;f<o;f++){const y=e[f],v=y.id,x=(s=y.data)==null?void 0:s.recipe,k=((u=y.data)==null?void 0:u.machineCount)||0,w=(c=y.data)==null?void 0:c.machine;if(!x)return;const b=x.isMineshaftDrill||x.id==="r_mineshaft_drill",E=x.isLogicAssembler||x.id==="r_logic_assembler",q=x.isTreeFarm||x.id==="r_tree_farm",M=w&&w.id==="m_industrial_firebox",I=w&&Kr(w.id),C=b||E||q||M||I;let T=x.cycle_time;if(T==="Variable"||typeof T!="number"||T<=0){if(!C)return;T=1}const R=w&&Kr(w.id),P=R?ln[w.id]:null;if(R&&(P==null?void 0:P.type)==="steam_input"&&!(w.id==="m_steam_cracking_plant"&&!fi(x))){const D=x.tempDependentInputTemp??Mn;T=Wn(w.id,D,T)}const z={id:v,recipe:x,machineCount:k,cycleTime:T,isSpecialRecipe:C,isMineshaftDrill:b,isLogicAssembler:E,isTempDependent:R,machineCountMode:((p=y.data)==null?void 0:p.machineCountMode)||"free",cappedMachineCount:(_=y.data)==null?void 0:_.cappedMachineCount,inputs:[],outputs:[]};(h=x.inputs)==null||h.forEach((D,X)=>{const N=D.product_id;if(N==="p_variableproduct")return;const G=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const $=b?G*k:G/T*k,re=z.inputs.length;z.inputs.push({productId:N,quantity:G,rate:$,index:re,recipeIndex:X,connectedRate:0,temperature:null}),n.products[N]||(n.products[N]={producers:[],consumers:[],connections:[]}),n.products[N].consumers.push({nodeId:v,inputIndex:re,rate:$})});const F=x.outputs;F==null||F.forEach((D,X)=>{const N=D.product_id;if(N==="p_variableproduct")return;const G=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const $=b?G*k:G/T*k,re=z.outputs.length;z.outputs.push({productId:N,quantity:G,rate:$,index:re,recipeIndex:X,connectedRate:0,temperature:D.temperature||null}),n.products[N]||(n.products[N]={producers:[],consumers:[],connections:[]}),n.products[N].producers.push({nodeId:v,outputIndex:re,rate:$})}),n.nodes[v]=z}const a=t.length;for(let f=0;f<a;f++){const y=t[f],v=n.nodes[y.source],x=n.nodes[y.target];if(!v||!x)continue;const k=parseInt(y.sourceHandle.split("-")[1]),w=parseInt(y.targetHandle.split("-")[1]),b=v.outputs.find(I=>I.recipeIndex===k),E=x.inputs.find(I=>I.recipeIndex===w);if(!b||!E||b.productId!==E.productId)return;const q=b.productId;b.temperature!==void 0&&b.temperature!==null&&(E.temperature=b.temperature);const M={id:y.id,sourceNodeId:y.source,targetNodeId:y.target,sourceOutputIndex:b.index,targetInputIndex:E.index,productId:q,sourceRate:b.rate,targetRate:E.rate,flowRate:0,temperature:b.temperature||null};n.connections.push(M),n.products[q]&&n.products[q].connections.push(M)}return n};class T3{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,n)}clear(){this.cache.clear()}}let j0=new T3(100);class N3{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const o=this.find(t),a=this.find(n);o!==a&&(this.rank[o]<this.rank[a]?this.parent[o]=a:this.rank[o]>this.rank[a]?this.parent[a]=o:(this.parent[a]=o,this.rank[o]++))}}const P3=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const o=[],a=new Map;n.producers.forEach(h=>{const f=`out:${h.nodeId}:${h.outputIndex}`;a.has(f)||(a.set(f,o.length),o.push({type:"output",nodeId:h.nodeId,index:h.outputIndex,rate:h.rate}))}),n.consumers.forEach(h=>{const f=`in:${h.nodeId}:${h.inputIndex}`;a.has(f)||(a.set(f,o.length),o.push({type:"input",nodeId:h.nodeId,index:h.inputIndex,rate:h.rate}))});const s=new N3(o.length);n.connections.forEach(h=>{const f=`out:${h.sourceNodeId}:${h.sourceOutputIndex}`,y=`in:${h.targetNodeId}:${h.targetInputIndex}`,v=a.get(f),x=a.get(y);v!==void 0&&x!==void 0&&s.union(v,x)});const u=new Map;for(let h=0;h<o.length;h++){const f=s.find(h);u.has(f)||u.set(f,[]),u.get(f).push(h)}const c=[],p=new Map;let _=0;return u.forEach((h,f)=>{const y={id:_,ports:h.map(v=>o[v]),connections:[]};n.connections.forEach(v=>{const x=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,k=a.get(x);k!==void 0&&s.find(k)===f&&y.connections.push(v)}),h.forEach(v=>{const x=o[v],k=x.type==="output"?`out:${x.nodeId}:${x.index}`:`in:${x.nodeId}:${x.index}`;p.set(k,_)}),c.push(y),_++}),{components:c,portToComponent:p,ports:o,portToIndex:a}},R3=e=>{const t=e.ports.map(o=>`${o.type}:${o.nodeId}:${o.index}:${o.rate}`).sort().join("|"),n=e.connections.map(o=>`${o.sourceNodeId}:${o.sourceOutputIndex}->${o.targetNodeId}:${o.targetInputIndex}`).sort().join("|");return`${t}##${n}`},A3=(e,t,n)=>{const o=RM(e,t),a=AM(e,t),s={totalProduction:o,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:c}=P3(e,t);return u.forEach(p=>{if(p.connections.length===0)return;const _=R3(p),h=`${t}:comp${p.id}`,f=j0.get(h);let y;if(f&&f.hash===_)y=JSON.parse(JSON.stringify(f.result));else{const v=L3(p.connections,o),x=D3(v);y={connectedFlow:0,connections:{}},p.connections.forEach((w,b)=>{const E=x.connectionFlows[b]||0;y.connections[w.id]={flowRate:E,supplyRatio:w.sourceRate>0?E/w.sourceRate:0,demandRatio:w.targetRate>0?E/w.targetRate:0},y.connectedFlow+=E});const k=Object.freeze({connectedFlow:y.connectedFlow,connections:Object.freeze({...y.connections})});j0.set(h,{hash:_,result:k})}Object.assign(s.connections,y.connections),s.connectedFlow+=y.connectedFlow}),s},F3=e=>Math.abs(e)<1e-9?0:Math.round(e*1e8)/1e8,L3=(e,t)=>{const n=new Map;let o=0;const a=v=>{let x=n.get(v);return x===void 0&&(x=o++,n.set(v,x)),x},s=a("virtual-source"),u=a("virtual-sink"),c=new Map,p=new Map;e.forEach(v=>{const x=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,k=`in:${v.targetNodeId}:${v.targetInputIndex}`;a(x),a(k),c.has(x)||c.set(x,v.sourceRate),p.has(k)||p.set(k,v.targetRate)});const _=Array.from({length:o},()=>[]),h=[],f=t||1e6,y=(v,x,k,w=-1)=>{const b=h.length,E=h.length+1;h.push({to:x,cap:k,flow:0,rev:E,connIndex:w}),h.push({to:v,cap:0,flow:0,rev:b,connIndex:-1}),_[v].push(b),_[x].push(E)};return c.forEach((v,x)=>{y(s,a(x),v)}),p.forEach((v,x)=>{y(a(x),u,v)}),e.forEach((v,x)=>{const k=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,w=`in:${v.targetNodeId}:${v.targetInputIndex}`,b=a(k),E=a(w);y(b,E,f,x)}),{adj:_,edges:h,nodeCount:o,SOURCE:s,SINK:u}};class O3{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const D3=e=>{const{adj:t,edges:n,nodeCount:o,SOURCE:a,SINK:s}=e,u=new Int32Array(o),c=new Int32Array(o),p=new O3(o),_=()=>{for(u.fill(-1),u[a]=0,p.clear(),p.push(a);!p.isEmpty();){const w=p.shift(),b=t[w],E=b.length;for(let q=0;q<E;q++){const M=n[b[q]],I=M.cap-M.flow;u[M.to]<0&&I>1e-15&&(u[M.to]=u[w]+1,p.push(M.to))}}return u[s]>=0},h=()=>{const w=[a],b=new Int32Array(o).fill(-1),E=new Uint8Array(o);for(E[a]=1;w.length>0;){const q=w[w.length-1];if(q===s){let C=1e15,T=s;for(;T!==a;){const R=b[T],P=n[R],z=P.cap-P.flow;C=Math.min(C,z);let F=!1;for(let D=0;D<o;D++){const X=t[D];for(let N=0;N<X.length;N++)if(X[N]===R){T=D,F=!0;break}if(F)break}}for(T=s;T!==a;){const R=b[T];n[R].flow+=C,n[n[R].rev].flow-=C;let P=!1;for(let z=0;z<o;z++){const F=t[z];for(let D=0;D<F.length;D++)if(F[D]===R){T=z,P=!0;break}if(P)break}}return C}let M=!1;const I=t[q];for(let C=c[q];C<I.length;C++){const T=I[C],R=n[T],P=R.cap-R.flow;if(u[q]+1===u[R.to]&&P>1e-15&&!E[R.to]){E[R.to]=1,b[R.to]=T,w.push(R.to),c[q]=C,M=!0;break}}M||(w.pop(),c[q]=I.length)}return 0};let f=0,y=0;const v=1e5;for(;_()&&y++<v;)for(c.fill(0);;){const w=h();if(w===0)break;f+=w}const x=[],k=n.length;for(let w=0;w<k;w++){const b=n[w];b.connIndex>=0&&(x[b.connIndex]=F3(b.flow))}return{totalFlow:f,connectionFlows:x}},Ap=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const o=e.nodes[n];t.byNode[n]={inputFlows:o.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:o.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:RM(e,n),totalConsumption:AM(e,n),connectedFlow:0};return}const s=A3(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const c=s.connections[u.id];if(c){t.byConnection[u.id]=c;const p=t.byNode[u.sourceNodeId];p&&(p.outputFlows[u.sourceOutputIndex].connected+=c.flowRate,p.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const _=t.byNode[u.targetNodeId];_&&(_.inputFlows[u.targetInputIndex].connected+=c.flowRate,_.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},RM=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((o,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return o+u.rate},0):0},AM=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((o,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return o+u.rate},0):0},qn=()=>{j0.clear()},V3=.001,z3=1e-6,ew=(e,t)=>{const n=Math.max(Math.abs(e),Math.abs(t))*V3,o=Math.max(n,z3);return Math.abs(e)>o},$i=1e-6,B3=(e,t,n,o)=>{var h,f;const a=new Map,s=new Set,u=(h=e.nodes[n])==null?void 0:h.inputs[o];if(!u)return a;const c=u.productId;if(!e.products[c])return a;const _=[{nodeId:n,inputIndex:o,productId:c}];for(s.add(`${n}:${o}`);_.length>0;){const{nodeId:y,inputIndex:v,productId:x}=_.shift();(((f=e.products[x])==null?void 0:f.connections.filter(w=>w.targetNodeId===y&&w.targetInputIndex===v))||[]).forEach(w=>{var M,I;const b=e.nodes[w.sourceNodeId];if(!b)return;const E=`${w.sourceNodeId}:${w.sourceOutputIndex}`,q=(M=t.byNode[w.sourceNodeId])==null?void 0:M.outputFlows[w.sourceOutputIndex];if(q){a.set(E,{nodeId:w.sourceNodeId,outputIndex:w.sourceOutputIndex,maxFlow:q.produced});const C=b.outputs[w.sourceOutputIndex];if(!C)return;(((I=e.products[C.productId])==null?void 0:I.connections.filter(R=>R.sourceNodeId===w.sourceNodeId&&R.sourceOutputIndex===w.sourceOutputIndex))||[]).forEach(R=>{var F;if(R.targetNodeId===y&&R.targetInputIndex===v)return;const P=`${R.targetNodeId}:${R.targetInputIndex}`;if(s.has(P))return;s.add(P);const z=(F=e.nodes[R.targetNodeId])==null?void 0:F.inputs[R.targetInputIndex];z&&_.push({nodeId:R.targetNodeId,inputIndex:R.targetInputIndex,productId:z.productId})})}})}return a},H3=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],s=t.byNode[o];s&&a.inputs.forEach((u,c)=>{const p=s.inputFlows[c];if(!p)return;const _=p.needed-p.connected;if(!ew(_,p.needed)||_<=0)return;if(u.productId,B3(e,t,o,c).forEach((y,v)=>{var P;const x=e.nodes[y.nodeId];if(!x)return;const k=x.machineCount||0;if(k<=0)return;const w=x.machineCountMode||"free";if(w==="locked")return;let b=x.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const E=x.outputs[y.outputIndex];if(!E)return;const q=E.originalQuantity!==void 0?E.originalQuantity:E.quantity;if(typeof q!="number")return;const M=x.isMineshaftDrill?q:q/b;if(typeof M!="number"||M<=$i)return;const I=(P=t.byNode[y.nodeId])==null?void 0:P.outputFlows[y.outputIndex];if(!I)return;const C=_/M;let T=k+C;if(w==="capped"&&x.cappedMachineCount&&(T=Math.min(T,x.cappedMachineCount),T<=k+$i))return;const R=x.outputs.length>1&&x.outputs.some((z,F)=>{if(F===y.outputIndex)return!1;const D=e.products[z.productId];return!D||!D.connections.some(N=>N.sourceNodeId===y.nodeId&&N.sourceOutputIndex===F)?!1:D.connections.some(N=>N.sourceNodeId!==y.nodeId||N.sourceOutputIndex!==F?!1:D.connections.filter($=>$.targetNodeId===N.targetNodeId&&$.targetInputIndex===N.targetInputIndex&&$.sourceNodeId!==y.nodeId).length===0)});n.push({nodeId:y.nodeId,handleType:"output",handleIndex:y.outputIndex,productId:E.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:I.produced,targetFlow:I.produced+_,deltaFlow:_,currentMachineCount:k,suggestedMachineCount:T,machineDelta:C,hasConstrainedOutputs:R,isMultiOutput:x.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const y=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof y=="number"&&y>$i){const v=_/y,x=(a.machineCount||0)-v;x>$i&&n.push({nodeId:o,handleType:"input",handleIndex:c,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:p.connected,targetFlow:p.connected,deltaFlow:-_,currentMachineCount:a.machineCount||0,suggestedMachineCount:x,machineDelta:-v})}}})}),Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],s=t.byNode[o];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let c=a.cycleTime;(typeof c!="number"||c<=0)&&(c=1),a.outputs.forEach((p,_)=>{var q;const h=s.outputFlows[_];if(!h)return;const f=h.produced-h.connected;if(!ew(f,h.produced)||f<=0||(a.machineCountMode||"free")==="locked")return;const v=p.originalQuantity!==void 0?p.originalQuantity:p.quantity,x=a.isMineshaftDrill?v:v/c;if(typeof x!="number"||x<=$i)return;const k=f/x,w=u-k;w>$i&&n.push({nodeId:o,handleType:"output",handleIndex:_,productId:p.productId,adjustmentType:"decrease",reason:"excess",currentFlow:h.produced,targetFlow:h.produced-f,deltaFlow:-f,currentMachineCount:u,suggestedMachineCount:w,machineDelta:-k});const b=p.productId;(((q=e.products[b])==null?void 0:q.connections.filter(M=>M.sourceNodeId===o&&M.sourceOutputIndex===_))||[]).forEach(M=>{var X,N,G,$;const I=e.nodes[M.targetNodeId];if(!I)return;const C=I.machineCount||0;if(C<=0)return;const T=I.machineCountMode||"free";if(T==="locked")return;let R=I.cycleTime;(typeof R!="number"||R<=0)&&(R=1);const P=I.inputs[M.targetInputIndex];if(!P)return;const z=I.isMineshaftDrill?P.quantity:P.quantity/R;if(typeof z!="number"||z<=$i)return;const F=f/z;let D=C+F;T==="capped"&&I.cappedMachineCount&&(D=Math.min(D,I.cappedMachineCount),D<=C+$i)||n.push({nodeId:M.targetNodeId,handleType:"input",handleIndex:M.targetInputIndex,productId:P.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((N=(X=t.byNode[M.targetNodeId])==null?void 0:X.inputFlows[M.targetInputIndex])==null?void 0:N.connected)||0,targetFlow:((($=(G=t.byNode[M.targetNodeId])==null?void 0:G.inputFlows[M.targetInputIndex])==null?void 0:$.connected)||0)+f,deltaFlow:f,currentMachineCount:C,suggestedMachineCount:D,machineDelta:F})})})}),n.forEach(o=>{const a=Math.round(o.suggestedMachineCount*1e10)/1e10,s=Math.round(o.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;o.suggestedMachineCount=u?Math.round(o.suggestedMachineCount*1e20)/1e20:Math.round(o.suggestedMachineCount*1e10)/1e10;const c=Math.round(o.machineDelta*1e10)/1e10,p=Math.round(o.machineDelta*1e20)/1e20,_=Math.abs(p-c)>1e-12;o.machineDelta=_?Math.round(o.machineDelta*1e20)/1e20:Math.round(o.machineDelta*1e10)/1e10}),n},Cl=(e,t)=>{const n=[],o=[],u=(p,_)=>{const h=Math.max(Math.abs(p),Math.abs(_))*1e-4,f=Math.max(h,1e-6);return Math.abs(p)>f};Object.keys(e.products).forEach(p=>{const _=e.products[p],h=t.byProduct[p];if(!h)return;const f=h.totalProduction,y=h.connectedFlow,v=f-y;if(u(v,f)&&v>0){const x=yt(p);x&&n.push({productId:p,product:x,excessRate:v,totalProduction:f,connectedConsumption:y,percentageExcess:f>0?v/f*100:0})}_.consumers.forEach(x=>{var w;const k=(w=t.byNode[x.nodeId])==null?void 0:w.inputFlows[x.inputIndex];if(k){const b=k.needed-k.connected;if(u(b,k.needed)&&b>0){const E=yt(p);if(E){let q=o.find(M=>M.productId===p);q?(q.deficiencyRate+=b,q.affectedNodes.push({nodeId:x.nodeId,inputIndex:x.inputIndex,shortage:b})):o.push({productId:p,product:E,deficiencyRate:b,totalConsumption:h.totalConsumption,connectedProduction:y,percentageDeficient:h.totalConsumption>0?b/h.totalConsumption*100:0,affectedNodes:[{nodeId:x.nodeId,inputIndex:x.inputIndex,shortage:b}]})}}}})}),n.sort((p,_)=>_.excessRate-p.excessRate),o.sort((p,_)=>_.deficiencyRate-p.deficiencyRate);const c=n.length>0||o.length>0?H3(e,t):[];return{excess:n,deficiency:o,suggestions:c}},tw=(e,t,n={})=>{const{skipTemperature:o=!1,previousTemperatureData:a=null}=n,s=Fl(e,t),u=Ap(s);if(o){const E=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(s,u),graph:s,flows:u,temperatureData:E}}if(!Object.values(s.nodes).some(E=>{const q=E.recipe.machine_id;return _r[q]||Kr(q)})){const E={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(s,u),graph:s,flows:u,temperatureData:E}}const p=D1(s,u),_=y0(e,p,s);if(!_.some((E,q)=>{var F,D,X,N,G,$,re,Y;const M=e[q],I=(D=(F=M.data)==null?void 0:F.recipe)==null?void 0:D.tempDependentInputTemp,C=(N=(X=E.data)==null?void 0:X.recipe)==null?void 0:N.tempDependentInputTemp,T=($=(G=M.data)==null?void 0:G.recipe)==null?void 0:$.outputs.map(Q=>Q.temperature).filter(Q=>Q!==void 0),R=(Y=(re=E.data)==null?void 0:re.recipe)==null?void 0:Y.outputs.map(Q=>Q.temperature).filter(Q=>Q!==void 0),P=Math.abs((I||0)-(C||0))>.1,z=T.length!==R.length||T.some((Q,ie)=>Math.abs((Q||0)-(R[ie]||0))>.1);return P||z}))return{...Cl(s,u),graph:s,flows:u,temperatureData:p};const f=Fl(_,t),y=Ap(f),v=D1(f,y),x=y0(_,v,f),k=Fl(x,t),w=Ap(k);return{...Cl(k,w),graph:k,flows:w,temperatureData:v}},$3=e=>e.excess||[],W3=e=>e.deficiency||[],U3=(e,t,n,o,a,s,u)=>{if(!n||!t)return 1;const c=t.data.recipe,p=t.data.machineCount||0,_=Et(c.machine_id);let h=c.cycle_time;if((typeof h!="number"||h<=0)&&(h=1),_&&Kr(_.id)){const w=ln[_.id];if((w==null?void 0:w.type)==="steam_input"&&(_.id!=="m_steam_cracking_plant"||fi(c))){const b=c.tempDependentInputTemp??Mn;h=Wn(_.id,b,h)}}const f=FM(e,n,null,a,s,o);let y=f.cycle_time;(typeof y!="number"||y<=0)&&(y=1);const v=Et(f.machine_id);if(v&&Kr(v.id)){const w=ln[v.id];if((w==null?void 0:w.type)==="steam_input"&&(v.id!=="m_steam_cracking_plant"||fi(f))){const b=f.tempDependentInputTemp??Mn;y=Wn(v.id,b,y)}}let x=0,k=!1;if(u&&u.byNode&&u.byNode[t.id]){const w=u.byNode[t.id];if(n.isOutput){const b=w.outputFlows[n.outputIndex];if(b){k=!0;const E=b.produced-b.connected;x=Math.max(0,E)}}else{const b=w.inputFlows[n.inputIndex];if(b){k=!0;const E=b.needed-b.connected;x=Math.max(0,E)}}}if(k&&x===0)return 0;if(!k)if(n.isOutput){const w=c.outputs[n.outputIndex];if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;typeof b=="number"&&(x=b/h*p)}}else{const w=c.inputs[n.inputIndex];w&&typeof w.quantity=="number"&&(x=w.quantity/h*p)}if(n.isOutput){const w=f.inputs.find(b=>b.product_id===n.productId);if(w&&typeof w.quantity=="number"&&w.quantity>0){const b=w.quantity/y;return x/b}}else{const w=f.outputs.find(b=>b.product_id===n.productId);if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;if(typeof b=="number"&&b>0){const E=b/y;return x/E}}}return 1},FM=(e,t,n,o,a,s)=>{var p,_,h,f,y,v,x,k,w,b,E,q;let u={...e};const c=Et(e.machine_id);if(!LM(u))return u;if((c==null?void 0:c.id)==="m_industrial_firebox"&&CM(e.id)){const M=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let I=((p=o==null?void 0:o.fireboxConfig)==null?void 0:p.fuel)||"p_coke_fuel";const C=(t==null?void 0:t.productId)||(n==null?void 0:n.id);C&&M.includes(C)&&(I=C);const T=ec(e.id,I);return T&&(u={...u,inputs:w0(e.inputs,I,e.id),fireboxSettings:{fuel:I},cycle_time:T.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const M=((_=o==null?void 0:o.drillConfig)==null?void 0:_.drillHead)||"steel",I=((h=o==null?void 0:o.drillConfig)==null?void 0:h.consumable)||"hydrochloric_acid",C=((f=o==null?void 0:o.drillConfig)==null?void 0:f.machineOil)!==void 0?o.drillConfig.machineOil:!0,T=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],R={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let P=M,z=100;const F=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(F)if(T.includes(F))P=R[F];else if(t!=null&&t.isOutput)z=100;else{const G=s(F,P,I,C);G&&(z=G)}const D=fM(P,I,C,z),X=mM(P,I,C,z),N=Ro(P,I,C,z);return u={...u,inputs:D.length>0?D:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:X.length>0?X:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:P,consumable:I,machineOil:C,depth:z},cycle_time:1,power_consumption:N?{max:N.drillingPower*1e6,average:(N.drillingPower*N.lifeTime+N.idlePower*(N.replacementTime+N.travelTime))/N.totalCycleTime*1e6}:"Variable",pollution:N?N.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const M=((y=o==null?void 0:o.assemblerConfig)==null?void 0:y.outerStage)||1,I=((v=o==null?void 0:o.assemblerConfig)==null?void 0:v.innerStage)||2,C=((x=o==null?void 0:o.assemblerConfig)==null?void 0:x.machineOil)!==void 0?o.assemblerConfig.machineOil:!0,T=((k=o==null?void 0:o.assemblerConfig)==null?void 0:k.tickCircuitDelay)||0;let R=M===1?`p_${I}x_microchip`:`p_${M}x${I}x_microchip`;const P=(t==null?void 0:t.productId)||(n==null?void 0:n.id);P&&P.includes("microchip")&&(R=P);const z=yM(R,C),F=gM(R,C),D=Js(R,C,T),X=R.match(/p_(?:(\d+)x)?(\d+)x_microchip/),N=X&&X[1]?parseInt(X[1]):1,G=X?parseInt(X[2]):I;return u={...u,inputs:z.length>0?z:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:N,innerStage:G,machineOil:C,tickCircuitDelay:T},cycle_time:D?D.cycleTime:"Variable",power_consumption:D?{max:D.maxPowerConsumption,average:D.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const M=((w=o==null?void 0:o.treeFarmConfig)==null?void 0:w.trees)||450,I=((b=o==null?void 0:o.treeFarmConfig)==null?void 0:b.harvesters)||20,C=((E=o==null?void 0:o.treeFarmConfig)==null?void 0:E.sprinklers)||24,T=((q=o==null?void 0:o.treeFarmConfig)==null?void 0:q.outputs)||8,R=1,P=qM(C),z=eg(M,I,a),F=Jl(M,I,C,T,R,a);return u={...u,inputs:P.length>0?P:[{product_id:"p_water",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:M,harvesters:I,sprinklers:C,outputs:T,controller:R},cycle_time:1,power_consumption:F?F.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let M="p_any_item",I="p_any_fluid";const C=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(C)if(C==="p_concrete_block"||C==="p_lead_ingot")M="p_fission_byproducts",I="p_depleted_uf6_waste";else{const P=yt(C);(P==null?void 0:P.type)==="item"?(M=C,I="p_any_fluid"):(P==null?void 0:P.type)==="fluid"&&(M="p_any_item",I=C)}else M="p_fission_byproducts",I="p_depleted_uf6_waste";const T=tc(0,0,M,I),R=Rl(0,0);return u={...u,inputs:T,outputs:[],wasteFacilitySettings:{itemProductId:M,fluidProductId:I,itemFlowRate:0,fluidFlowRate:0},cycle_time:R.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let M=["p_water","p_residue"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const R=yt(I);(R==null?void 0:R.type)==="fluid"&&(M=[I,I])}const C=S0(M),T=Ms(C);return u={...u,inputs:C,outputs:[],liquidDumpSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:T},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let M=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const R=yt(I);(R==null?void 0:R.type)==="fluid"&&(M=Array(8).fill(I))}const C=C0(M),T=Es(C);return u={...u,inputs:C,outputs:[],liquidBurnerSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:T},u}return u},G3=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],K3=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Vs).forEach(n=>{n.forEach(o=>t.add(o.product_id))}),Array.from(t)}return e==="r_logic_assembler"?hM.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},LM=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&CM(e.id),rw=1e-6,Y3=(e,t,n,o,a,s=null)=>{if(t<rw)return new Map([[e,n]]);const u=n/t,c=new Map;c.set(e,n);const p=new Map;p.set(e,u);const _=new Set([e]),h=[e];for(;h.length>0;){const x=h.shift(),k=o.nodes[x];k&&(k.outputs.forEach(w=>{var E;(((E=o.products[w.productId])==null?void 0:E.connections.filter(q=>q.sourceNodeId===x))||[]).forEach(q=>{_.has(q.targetNodeId)||(_.add(q.targetNodeId),h.push(q.targetNodeId))})}),k.inputs.forEach(w=>{var E;(((E=o.products[w.productId])==null?void 0:E.connections.filter(q=>q.targetNodeId===x))||[]).forEach(q=>{_.has(q.sourceNodeId)||(_.add(q.sourceNodeId),h.push(q.sourceNodeId))})}))}const f=10;let y=0,v=!0;for(;v&&y<f;)v=!1,y++,_.forEach(x=>{var T;if(x===e)return;const k=o.nodes[x];if(!k)return;const w=(T=s==null?void 0:s.find(R=>R.id===x))==null?void 0:T.data,b=(w==null?void 0:w.machineCountMode)||k.machineCountMode||"free";if(b==="locked")return;const E=k.machineCount||0;if(E<rw)return;const q=[],M=[];if(k.outputs.forEach((R,P)=>{var F;(((F=o.products[R.productId])==null?void 0:F.connections.filter(D=>D.sourceNodeId===x&&D.sourceOutputIndex===P))||[]).forEach(D=>{const X=p.get(D.targetNodeId);X!==void 0&&(q.push(X),M.push({type:"output",productId:R.productId,targetNodeId:D.targetNodeId,ratio:X}))})}),k.inputs.forEach((R,P)=>{var F;(((F=o.products[R.productId])==null?void 0:F.connections.filter(D=>D.targetNodeId===x&&D.targetInputIndex===P))||[]).forEach(D=>{const X=p.get(D.sourceNodeId);X!==void 0&&(q.push(X),M.push({type:"input",productId:R.productId,sourceNodeId:D.sourceNodeId,ratio:X}))})}),q.length===0)return;const I=Math.max(...q),C=p.get(x)||1;if(Math.abs(I-C)>1e-4){p.set(x,I);let R=E*I;if(b==="capped"){const P=(w==null?void 0:w.cappedMachineCount)||k.cappedMachineCount;typeof P=="number"&&(R=Math.min(R,P))}c.set(x,R),v=!0}});return c};function ig(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fp,nw;function Q3(){if(nw)return Fp;nw=1;function e(){this.__data__=[],this.size=0}return Fp=e,Fp}var Lp,iw;function Na(){if(iw)return Lp;iw=1;function e(t,n){return t===n||t!==t&&n!==n}return Lp=e,Lp}var Op,ow;function vc(){if(ow)return Op;ow=1;var e=Na();function t(n,o){for(var a=n.length;a--;)if(e(n[a][0],o))return a;return-1}return Op=t,Op}var Dp,aw;function X3(){if(aw)return Dp;aw=1;var e=vc(),t=Array.prototype,n=t.splice;function o(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var c=s.length-1;return u==c?s.pop():n.call(s,u,1),--this.size,!0}return Dp=o,Dp}var Vp,sw;function Z3(){if(sw)return Vp;sw=1;var e=vc();function t(n){var o=this.__data__,a=e(o,n);return a<0?void 0:o[a][1]}return Vp=t,Vp}var zp,uw;function J3(){if(uw)return zp;uw=1;var e=vc();function t(n){return e(this.__data__,n)>-1}return zp=t,zp}var Bp,lw;function eA(){if(lw)return Bp;lw=1;var e=vc();function t(n,o){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,o])):a[s][1]=o,this}return Bp=t,Bp}var Hp,cw;function xc(){if(cw)return Hp;cw=1;var e=Q3(),t=X3(),n=Z3(),o=J3(),a=eA();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,Hp=s,Hp}var $p,dw;function tA(){if(dw)return $p;dw=1;var e=xc();function t(){this.__data__=new e,this.size=0}return $p=t,$p}var Wp,pw;function rA(){if(pw)return Wp;pw=1;function e(t){var n=this.__data__,o=n.delete(t);return this.size=n.size,o}return Wp=e,Wp}var Up,_w;function nA(){if(_w)return Up;_w=1;function e(t){return this.__data__.get(t)}return Up=e,Up}var Gp,fw;function iA(){if(fw)return Gp;fw=1;function e(t){return this.__data__.has(t)}return Gp=e,Gp}var Kp,mw;function OM(){if(mw)return Kp;mw=1;var e=typeof cl=="object"&&cl&&cl.Object===Object&&cl;return Kp=e,Kp}var Yp,hw;function Nn(){if(hw)return Yp;hw=1;var e=OM(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Yp=n,Yp}var Qp,yw;function Pa(){if(yw)return Qp;yw=1;var e=Nn(),t=e.Symbol;return Qp=t,Qp}var Xp,gw;function oA(){if(gw)return Xp;gw=1;var e=Pa(),t=Object.prototype,n=t.hasOwnProperty,o=t.toString,a=e?e.toStringTag:void 0;function s(u){var c=n.call(u,a),p=u[a];try{u[a]=void 0;var _=!0}catch{}var h=o.call(u);return _&&(c?u[a]=p:delete u[a]),h}return Xp=s,Xp}var Zp,vw;function aA(){if(vw)return Zp;vw=1;var e=Object.prototype,t=e.toString;function n(o){return t.call(o)}return Zp=n,Zp}var Jp,xw;function Ao(){if(xw)return Jp;xw=1;var e=Pa(),t=oA(),n=aA(),o="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(c){return c==null?c===void 0?a:o:s&&s in Object(c)?t(c):n(c)}return Jp=u,Jp}var e_,ww;function cn(){if(ww)return e_;ww=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return e_=e,e_}var t_,bw;function tu(){if(bw)return t_;bw=1;var e=Ao(),t=cn(),n="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(c){if(!t(c))return!1;var p=e(c);return p==o||p==a||p==n||p==s}return t_=u,t_}var r_,qw;function sA(){if(qw)return r_;qw=1;var e=Nn(),t=e["__core-js_shared__"];return r_=t,r_}var n_,Sw;function uA(){if(Sw)return n_;Sw=1;var e=sA(),t=(function(){var o=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})();function n(o){return!!t&&t in o}return n_=n,n_}var i_,kw;function DM(){if(kw)return i_;kw=1;var e=Function.prototype,t=e.toString;function n(o){if(o!=null){try{return t.call(o)}catch{}try{return o+""}catch{}}return""}return i_=n,i_}var o_,Cw;function lA(){if(Cw)return o_;Cw=1;var e=tu(),t=uA(),n=cn(),o=DM(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,_=c.hasOwnProperty,h=RegExp("^"+p.call(_).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(y){if(!n(y)||t(y))return!1;var v=e(y)?h:s;return v.test(o(y))}return o_=f,o_}var a_,Mw;function cA(){if(Mw)return a_;Mw=1;function e(t,n){return t==null?void 0:t[n]}return a_=e,a_}var s_,Ew;function Fo(){if(Ew)return s_;Ew=1;var e=lA(),t=cA();function n(o,a){var s=t(o,a);return e(s)?s:void 0}return s_=n,s_}var u_,Iw;function og(){if(Iw)return u_;Iw=1;var e=Fo(),t=Nn(),n=e(t,"Map");return u_=n,u_}var l_,jw;function wc(){if(jw)return l_;jw=1;var e=Fo(),t=e(Object,"create");return l_=t,l_}var c_,Tw;function dA(){if(Tw)return c_;Tw=1;var e=wc();function t(){this.__data__=e?e(null):{},this.size=0}return c_=t,c_}var d_,Nw;function pA(){if(Nw)return d_;Nw=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return d_=e,d_}var p_,Pw;function _A(){if(Pw)return p_;Pw=1;var e=wc(),t="__lodash_hash_undefined__",n=Object.prototype,o=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var c=u[s];return c===t?void 0:c}return o.call(u,s)?u[s]:void 0}return p_=a,p_}var __,Rw;function fA(){if(Rw)return __;Rw=1;var e=wc(),t=Object.prototype,n=t.hasOwnProperty;function o(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return __=o,__}var f_,Aw;function mA(){if(Aw)return f_;Aw=1;var e=wc(),t="__lodash_hash_undefined__";function n(o,a){var s=this.__data__;return this.size+=this.has(o)?0:1,s[o]=e&&a===void 0?t:a,this}return f_=n,f_}var m_,Fw;function hA(){if(Fw)return m_;Fw=1;var e=dA(),t=pA(),n=_A(),o=fA(),a=mA();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,m_=s,m_}var h_,Lw;function yA(){if(Lw)return h_;Lw=1;var e=hA(),t=xc(),n=og();function o(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return h_=o,h_}var y_,Ow;function gA(){if(Ow)return y_;Ow=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return y_=e,y_}var g_,Dw;function bc(){if(Dw)return g_;Dw=1;var e=gA();function t(n,o){var a=n.__data__;return e(o)?a[typeof o=="string"?"string":"hash"]:a.map}return g_=t,g_}var v_,Vw;function vA(){if(Vw)return v_;Vw=1;var e=bc();function t(n){var o=e(this,n).delete(n);return this.size-=o?1:0,o}return v_=t,v_}var x_,zw;function xA(){if(zw)return x_;zw=1;var e=bc();function t(n){return e(this,n).get(n)}return x_=t,x_}var w_,Bw;function wA(){if(Bw)return w_;Bw=1;var e=bc();function t(n){return e(this,n).has(n)}return w_=t,w_}var b_,Hw;function bA(){if(Hw)return b_;Hw=1;var e=bc();function t(n,o){var a=e(this,n),s=a.size;return a.set(n,o),this.size+=a.size==s?0:1,this}return b_=t,b_}var q_,$w;function ag(){if($w)return q_;$w=1;var e=yA(),t=vA(),n=xA(),o=wA(),a=bA();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,q_=s,q_}var S_,Ww;function qA(){if(Ww)return S_;Ww=1;var e=xc(),t=og(),n=ag(),o=200;function a(s,u){var c=this.__data__;if(c instanceof e){var p=c.__data__;if(!t||p.length<o-1)return p.push([s,u]),this.size=++c.size,this;c=this.__data__=new n(p)}return c.set(s,u),this.size=c.size,this}return S_=a,S_}var k_,Uw;function qc(){if(Uw)return k_;Uw=1;var e=xc(),t=tA(),n=rA(),o=nA(),a=iA(),s=qA();function u(c){var p=this.__data__=new e(c);this.size=p.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,k_=u,k_}var C_,Gw;function sg(){if(Gw)return C_;Gw=1;function e(t,n){for(var o=-1,a=t==null?0:t.length;++o<a&&n(t[o],o,t)!==!1;);return t}return C_=e,C_}var M_,Kw;function VM(){if(Kw)return M_;Kw=1;var e=Fo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return M_=t,M_}var E_,Yw;function Sc(){if(Yw)return E_;Yw=1;var e=VM();function t(n,o,a){o=="__proto__"&&e?e(n,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[o]=a}return E_=t,E_}var I_,Qw;function kc(){if(Qw)return I_;Qw=1;var e=Sc(),t=Na(),n=Object.prototype,o=n.hasOwnProperty;function a(s,u,c){var p=s[u];(!(o.call(s,u)&&t(p,c))||c===void 0&&!(u in s))&&e(s,u,c)}return I_=a,I_}var j_,Xw;function ru(){if(Xw)return j_;Xw=1;var e=kc(),t=Sc();function n(o,a,s,u){var c=!s;s||(s={});for(var p=-1,_=a.length;++p<_;){var h=a[p],f=u?u(s[h],o[h],h,s,o):void 0;f===void 0&&(f=o[h]),c?t(s,h,f):e(s,h,f)}return s}return j_=n,j_}var T_,Zw;function SA(){if(Zw)return T_;Zw=1;function e(t,n){for(var o=-1,a=Array(t);++o<t;)a[o]=n(o);return a}return T_=e,T_}var N_,Jw;function Yn(){if(Jw)return N_;Jw=1;function e(t){return t!=null&&typeof t=="object"}return N_=e,N_}var P_,eb;function kA(){if(eb)return P_;eb=1;var e=Ao(),t=Yn(),n="[object Arguments]";function o(a){return t(a)&&e(a)==n}return P_=o,P_}var R_,tb;function nu(){if(tb)return R_;tb=1;var e=kA(),t=Yn(),n=Object.prototype,o=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&o.call(u,"callee")&&!a.call(u,"callee")};return R_=s,R_}var A_,rb;function Vt(){if(rb)return A_;rb=1;var e=Array.isArray;return A_=e,A_}var ws={exports:{}},F_,nb;function CA(){if(nb)return F_;nb=1;function e(){return!1}return F_=e,F_}ws.exports;var ib;function Ra(){return ib||(ib=1,(function(e,t){var n=Nn(),o=CA(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,c=u?n.Buffer:void 0,p=c?c.isBuffer:void 0,_=p||o;e.exports=_})(ws,ws.exports)),ws.exports}var L_,ob;function Cc(){if(ob)return L_;ob=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(o,a){var s=typeof o;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(o))&&o>-1&&o%1==0&&o<a}return L_=n,L_}var O_,ab;function ug(){if(ab)return O_;ab=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return O_=t,O_}var D_,sb;function MA(){if(sb)return D_;sb=1;var e=Ao(),t=ug(),n=Yn(),o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",p="[object Function]",_="[object Map]",h="[object Number]",f="[object Object]",y="[object RegExp]",v="[object Set]",x="[object String]",k="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",E="[object Float32Array]",q="[object Float64Array]",M="[object Int8Array]",I="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",R="[object Uint8ClampedArray]",P="[object Uint16Array]",z="[object Uint32Array]",F={};F[E]=F[q]=F[M]=F[I]=F[C]=F[T]=F[R]=F[P]=F[z]=!0,F[o]=F[a]=F[w]=F[s]=F[b]=F[u]=F[c]=F[p]=F[_]=F[h]=F[f]=F[y]=F[v]=F[x]=F[k]=!1;function D(X){return n(X)&&t(X.length)&&!!F[e(X)]}return D_=D,D_}var V_,ub;function Mc(){if(ub)return V_;ub=1;function e(t){return function(n){return t(n)}}return V_=e,V_}var bs={exports:{}};bs.exports;var lb;function lg(){return lb||(lb=1,(function(e,t){var n=OM(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s&&n.process,c=(function(){try{var p=a&&a.require&&a.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=c})(bs,bs.exports)),bs.exports}var z_,cb;function iu(){if(cb)return z_;cb=1;var e=MA(),t=Mc(),n=lg(),o=n&&n.isTypedArray,a=o?t(o):e;return z_=a,z_}var B_,db;function zM(){if(db)return B_;db=1;var e=SA(),t=nu(),n=Vt(),o=Ra(),a=Cc(),s=iu(),u=Object.prototype,c=u.hasOwnProperty;function p(_,h){var f=n(_),y=!f&&t(_),v=!f&&!y&&o(_),x=!f&&!y&&!v&&s(_),k=f||y||v||x,w=k?e(_.length,String):[],b=w.length;for(var E in _)(h||c.call(_,E))&&!(k&&(E=="length"||v&&(E=="offset"||E=="parent")||x&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||a(E,b)))&&w.push(E);return w}return B_=p,B_}var H_,pb;function Ec(){if(pb)return H_;pb=1;var e=Object.prototype;function t(n){var o=n&&n.constructor,a=typeof o=="function"&&o.prototype||e;return n===a}return H_=t,H_}var $_,_b;function BM(){if(_b)return $_;_b=1;function e(t,n){return function(o){return t(n(o))}}return $_=e,$_}var W_,fb;function EA(){if(fb)return W_;fb=1;var e=BM(),t=e(Object.keys,Object);return W_=t,W_}var U_,mb;function cg(){if(mb)return U_;mb=1;var e=Ec(),t=EA(),n=Object.prototype,o=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var c in Object(s))o.call(s,c)&&c!="constructor"&&u.push(c);return u}return U_=a,U_}var G_,hb;function yi(){if(hb)return G_;hb=1;var e=tu(),t=ug();function n(o){return o!=null&&t(o.length)&&!e(o)}return G_=n,G_}var K_,yb;function Xi(){if(yb)return K_;yb=1;var e=zM(),t=cg(),n=yi();function o(a){return n(a)?e(a):t(a)}return K_=o,K_}var Y_,gb;function IA(){if(gb)return Y_;gb=1;var e=ru(),t=Xi();function n(o,a){return o&&e(a,t(a),o)}return Y_=n,Y_}var Q_,vb;function jA(){if(vb)return Q_;vb=1;function e(t){var n=[];if(t!=null)for(var o in Object(t))n.push(o);return n}return Q_=e,Q_}var X_,xb;function TA(){if(xb)return X_;xb=1;var e=cn(),t=Ec(),n=jA(),o=Object.prototype,a=o.hasOwnProperty;function s(u){if(!e(u))return n(u);var c=t(u),p=[];for(var _ in u)_=="constructor"&&(c||!a.call(u,_))||p.push(_);return p}return X_=s,X_}var Z_,wb;function Lo(){if(wb)return Z_;wb=1;var e=zM(),t=TA(),n=yi();function o(a){return n(a)?e(a,!0):t(a)}return Z_=o,Z_}var J_,bb;function NA(){if(bb)return J_;bb=1;var e=ru(),t=Lo();function n(o,a){return o&&e(a,t(a),o)}return J_=n,J_}var qs={exports:{}};qs.exports;var qb;function HM(){return qb||(qb=1,(function(e,t){var n=Nn(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?n.Buffer:void 0,c=u?u.allocUnsafe:void 0;function p(_,h){if(h)return _.slice();var f=_.length,y=c?c(f):new _.constructor(f);return _.copy(y),y}e.exports=p})(qs,qs.exports)),qs.exports}var ef,Sb;function $M(){if(Sb)return ef;Sb=1;function e(t,n){var o=-1,a=t.length;for(n||(n=Array(a));++o<a;)n[o]=t[o];return n}return ef=e,ef}var tf,kb;function WM(){if(kb)return tf;kb=1;function e(t,n){for(var o=-1,a=t==null?0:t.length,s=0,u=[];++o<a;){var c=t[o];n(c,o,t)&&(u[s++]=c)}return u}return tf=e,tf}var rf,Cb;function UM(){if(Cb)return rf;Cb=1;function e(){return[]}return rf=e,rf}var nf,Mb;function dg(){if(Mb)return nf;Mb=1;var e=WM(),t=UM(),n=Object.prototype,o=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(c){return o.call(u,c)}))}:t;return nf=s,nf}var of,Eb;function PA(){if(Eb)return of;Eb=1;var e=ru(),t=dg();function n(o,a){return e(o,t(o),a)}return of=n,of}var af,Ib;function pg(){if(Ib)return af;Ib=1;function e(t,n){for(var o=-1,a=n.length,s=t.length;++o<a;)t[s+o]=n[o];return t}return af=e,af}var sf,jb;function Ic(){if(jb)return sf;jb=1;var e=BM(),t=e(Object.getPrototypeOf,Object);return sf=t,sf}var uf,Tb;function GM(){if(Tb)return uf;Tb=1;var e=pg(),t=Ic(),n=dg(),o=UM(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var c=[];u;)e(c,n(u)),u=t(u);return c}:o;return uf=s,uf}var lf,Nb;function RA(){if(Nb)return lf;Nb=1;var e=ru(),t=GM();function n(o,a){return e(o,t(o),a)}return lf=n,lf}var cf,Pb;function KM(){if(Pb)return cf;Pb=1;var e=pg(),t=Vt();function n(o,a,s){var u=a(o);return t(o)?u:e(u,s(o))}return cf=n,cf}var df,Rb;function YM(){if(Rb)return df;Rb=1;var e=KM(),t=dg(),n=Xi();function o(a){return e(a,n,t)}return df=o,df}var pf,Ab;function AA(){if(Ab)return pf;Ab=1;var e=KM(),t=GM(),n=Lo();function o(a){return e(a,n,t)}return pf=o,pf}var _f,Fb;function FA(){if(Fb)return _f;Fb=1;var e=Fo(),t=Nn(),n=e(t,"DataView");return _f=n,_f}var ff,Lb;function LA(){if(Lb)return ff;Lb=1;var e=Fo(),t=Nn(),n=e(t,"Promise");return ff=n,ff}var mf,Ob;function QM(){if(Ob)return mf;Ob=1;var e=Fo(),t=Nn(),n=e(t,"Set");return mf=n,mf}var hf,Db;function OA(){if(Db)return hf;Db=1;var e=Fo(),t=Nn(),n=e(t,"WeakMap");return hf=n,hf}var yf,Vb;function Aa(){if(Vb)return yf;Vb=1;var e=FA(),t=og(),n=LA(),o=QM(),a=OA(),s=Ao(),u=DM(),c="[object Map]",p="[object Object]",_="[object Promise]",h="[object Set]",f="[object WeakMap]",y="[object DataView]",v=u(e),x=u(t),k=u(n),w=u(o),b=u(a),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=y||t&&E(new t)!=c||n&&E(n.resolve())!=_||o&&E(new o)!=h||a&&E(new a)!=f)&&(E=function(q){var M=s(q),I=M==p?q.constructor:void 0,C=I?u(I):"";if(C)switch(C){case v:return y;case x:return c;case k:return _;case w:return h;case b:return f}return M}),yf=E,yf}var gf,zb;function DA(){if(zb)return gf;zb=1;var e=Object.prototype,t=e.hasOwnProperty;function n(o){var a=o.length,s=new o.constructor(a);return a&&typeof o[0]=="string"&&t.call(o,"index")&&(s.index=o.index,s.input=o.input),s}return gf=n,gf}var vf,Bb;function XM(){if(Bb)return vf;Bb=1;var e=Nn(),t=e.Uint8Array;return vf=t,vf}var xf,Hb;function _g(){if(Hb)return xf;Hb=1;var e=XM();function t(n){var o=new n.constructor(n.byteLength);return new e(o).set(new e(n)),o}return xf=t,xf}var wf,$b;function VA(){if($b)return wf;$b=1;var e=_g();function t(n,o){var a=o?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return wf=t,wf}var bf,Wb;function zA(){if(Wb)return bf;Wb=1;var e=/\w*$/;function t(n){var o=new n.constructor(n.source,e.exec(n));return o.lastIndex=n.lastIndex,o}return bf=t,bf}var qf,Ub;function BA(){if(Ub)return qf;Ub=1;var e=Pa(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function o(a){return n?Object(n.call(a)):{}}return qf=o,qf}var Sf,Gb;function ZM(){if(Gb)return Sf;Gb=1;var e=_g();function t(n,o){var a=o?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return Sf=t,Sf}var kf,Kb;function HA(){if(Kb)return kf;Kb=1;var e=_g(),t=VA(),n=zA(),o=BA(),a=ZM(),s="[object Boolean]",u="[object Date]",c="[object Map]",p="[object Number]",_="[object RegExp]",h="[object Set]",f="[object String]",y="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",k="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",E="[object Int16Array]",q="[object Int32Array]",M="[object Uint8Array]",I="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]";function R(P,z,F){var D=P.constructor;switch(z){case v:return e(P);case s:case u:return new D(+P);case x:return t(P,F);case k:case w:case b:case E:case q:case M:case I:case C:case T:return a(P,F);case c:return new D;case p:case f:return new D(P);case _:return n(P);case h:return new D;case y:return o(P)}}return kf=R,kf}var Cf,Yb;function JM(){if(Yb)return Cf;Yb=1;var e=cn(),t=Object.create,n=(function(){function o(){}return function(a){if(!e(a))return{};if(t)return t(a);o.prototype=a;var s=new o;return o.prototype=void 0,s}})();return Cf=n,Cf}var Mf,Qb;function eE(){if(Qb)return Mf;Qb=1;var e=JM(),t=Ic(),n=Ec();function o(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return Mf=o,Mf}var Ef,Xb;function $A(){if(Xb)return Ef;Xb=1;var e=Aa(),t=Yn(),n="[object Map]";function o(a){return t(a)&&e(a)==n}return Ef=o,Ef}var If,Zb;function WA(){if(Zb)return If;Zb=1;var e=$A(),t=Mc(),n=lg(),o=n&&n.isMap,a=o?t(o):e;return If=a,If}var jf,Jb;function UA(){if(Jb)return jf;Jb=1;var e=Aa(),t=Yn(),n="[object Set]";function o(a){return t(a)&&e(a)==n}return jf=o,jf}var Tf,e2;function GA(){if(e2)return Tf;e2=1;var e=UA(),t=Mc(),n=lg(),o=n&&n.isSet,a=o?t(o):e;return Tf=a,Tf}var Nf,t2;function tE(){if(t2)return Nf;t2=1;var e=qc(),t=sg(),n=kc(),o=IA(),a=NA(),s=HM(),u=$M(),c=PA(),p=RA(),_=YM(),h=AA(),f=Aa(),y=DA(),v=HA(),x=eE(),k=Vt(),w=Ra(),b=WA(),E=cn(),q=GA(),M=Xi(),I=Lo(),C=1,T=2,R=4,P="[object Arguments]",z="[object Array]",F="[object Boolean]",D="[object Date]",X="[object Error]",N="[object Function]",G="[object GeneratorFunction]",$="[object Map]",re="[object Number]",Y="[object Object]",Q="[object RegExp]",ie="[object Set]",H="[object String]",J="[object Symbol]",me="[object WeakMap]",W="[object ArrayBuffer]",te="[object DataView]",oe="[object Float32Array]",pe="[object Float64Array]",ue="[object Int8Array]",ve="[object Int16Array]",Ie="[object Int32Array]",Re="[object Uint8Array]",je="[object Uint8ClampedArray]",Te="[object Uint16Array]",Pe="[object Uint32Array]",Ae={};Ae[P]=Ae[z]=Ae[W]=Ae[te]=Ae[F]=Ae[D]=Ae[oe]=Ae[pe]=Ae[ue]=Ae[ve]=Ae[Ie]=Ae[$]=Ae[re]=Ae[Y]=Ae[Q]=Ae[ie]=Ae[H]=Ae[J]=Ae[Re]=Ae[je]=Ae[Te]=Ae[Pe]=!0,Ae[X]=Ae[N]=Ae[me]=!1;function Ue(Be,st,at,It,wt,bt){var lt,Cr=st&C,tr=st&T,At=st&R;if(at&&(lt=wt?at(Be,It,wt,bt):at(Be)),lt!==void 0)return lt;if(!E(Be))return Be;var Ut=k(Be);if(Ut){if(lt=y(Be),!Cr)return u(Be,lt)}else{var nt=f(Be),Ar=nt==N||nt==G;if(w(Be))return s(Be,Cr);if(nt==Y||nt==P||Ar&&!wt){if(lt=tr||Ar?{}:x(Be),!Cr)return tr?p(Be,a(lt,Be)):c(Be,o(lt,Be))}else{if(!Ae[nt])return wt?Be:{};lt=v(Be,nt,Cr)}}bt||(bt=new e);var Nt=bt.get(Be);if(Nt)return Nt;bt.set(Be,lt),q(Be)?Be.forEach(function(Gt){lt.add(Ue(Gt,st,at,Gt,Be,bt))}):b(Be)&&Be.forEach(function(Gt,Xe){lt.set(Xe,Ue(Gt,st,at,Xe,Be,bt))});var Qr=At?tr?h:_:tr?I:M,rr=Ut?void 0:Qr(Be);return t(rr||Be,function(Gt,Xe){rr&&(Xe=Gt,Gt=Be[Xe]),n(lt,Xe,Ue(Gt,st,at,Xe,Be,bt))}),lt}return Nf=Ue,Nf}var Pf,r2;function KA(){if(r2)return Pf;r2=1;var e=tE(),t=4;function n(o){return e(o,t)}return Pf=n,Pf}var Rf,n2;function fg(){if(n2)return Rf;n2=1;function e(t){return function(){return t}}return Rf=e,Rf}var Af,i2;function YA(){if(i2)return Af;i2=1;function e(t){return function(n,o,a){for(var s=-1,u=Object(n),c=a(n),p=c.length;p--;){var _=c[t?p:++s];if(o(u[_],_,u)===!1)break}return n}}return Af=e,Af}var Ff,o2;function mg(){if(o2)return Ff;o2=1;var e=YA(),t=e();return Ff=t,Ff}var Lf,a2;function hg(){if(a2)return Lf;a2=1;var e=mg(),t=Xi();function n(o,a){return o&&e(o,a,t)}return Lf=n,Lf}var Of,s2;function QA(){if(s2)return Of;s2=1;var e=yi();function t(n,o){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,c=o?u:-1,p=Object(a);(o?c--:++c<u)&&s(p[c],c,p)!==!1;);return a}}return Of=t,Of}var Df,u2;function jc(){if(u2)return Df;u2=1;var e=hg(),t=QA(),n=t(e);return Df=n,Df}var Vf,l2;function Oo(){if(l2)return Vf;l2=1;function e(t){return t}return Vf=e,Vf}var zf,c2;function rE(){if(c2)return zf;c2=1;var e=Oo();function t(n){return typeof n=="function"?n:e}return zf=t,zf}var Bf,d2;function nE(){if(d2)return Bf;d2=1;var e=sg(),t=jc(),n=rE(),o=Vt();function a(s,u){var c=o(s)?e:t;return c(s,n(u))}return Bf=a,Bf}var Hf,p2;function iE(){return p2||(p2=1,Hf=nE()),Hf}var $f,_2;function XA(){if(_2)return $f;_2=1;var e=jc();function t(n,o){var a=[];return e(n,function(s,u,c){o(s,u,c)&&a.push(s)}),a}return $f=t,$f}var Wf,f2;function ZA(){if(f2)return Wf;f2=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Wf=t,Wf}var Uf,m2;function JA(){if(m2)return Uf;m2=1;function e(t){return this.__data__.has(t)}return Uf=e,Uf}var Gf,h2;function oE(){if(h2)return Gf;h2=1;var e=ag(),t=ZA(),n=JA();function o(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return o.prototype.add=o.prototype.push=t,o.prototype.has=n,Gf=o,Gf}var Kf,y2;function eF(){if(y2)return Kf;y2=1;function e(t,n){for(var o=-1,a=t==null?0:t.length;++o<a;)if(n(t[o],o,t))return!0;return!1}return Kf=e,Kf}var Yf,g2;function aE(){if(g2)return Yf;g2=1;function e(t,n){return t.has(n)}return Yf=e,Yf}var Qf,v2;function sE(){if(v2)return Qf;v2=1;var e=oE(),t=eF(),n=aE(),o=1,a=2;function s(u,c,p,_,h,f){var y=p&o,v=u.length,x=c.length;if(v!=x&&!(y&&x>v))return!1;var k=f.get(u),w=f.get(c);if(k&&w)return k==c&&w==u;var b=-1,E=!0,q=p&a?new e:void 0;for(f.set(u,c),f.set(c,u);++b<v;){var M=u[b],I=c[b];if(_)var C=y?_(I,M,b,c,u,f):_(M,I,b,u,c,f);if(C!==void 0){if(C)continue;E=!1;break}if(q){if(!t(c,function(T,R){if(!n(q,R)&&(M===T||h(M,T,p,_,f)))return q.push(R)})){E=!1;break}}else if(!(M===I||h(M,I,p,_,f))){E=!1;break}}return f.delete(u),f.delete(c),E}return Qf=s,Qf}var Xf,x2;function tF(){if(x2)return Xf;x2=1;function e(t){var n=-1,o=Array(t.size);return t.forEach(function(a,s){o[++n]=[s,a]}),o}return Xf=e,Xf}var Zf,w2;function yg(){if(w2)return Zf;w2=1;function e(t){var n=-1,o=Array(t.size);return t.forEach(function(a){o[++n]=a}),o}return Zf=e,Zf}var Jf,b2;function rF(){if(b2)return Jf;b2=1;var e=Pa(),t=XM(),n=Na(),o=sE(),a=tF(),s=yg(),u=1,c=2,p="[object Boolean]",_="[object Date]",h="[object Error]",f="[object Map]",y="[object Number]",v="[object RegExp]",x="[object Set]",k="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",E="[object DataView]",q=e?e.prototype:void 0,M=q?q.valueOf:void 0;function I(C,T,R,P,z,F,D){switch(R){case E:if(C.byteLength!=T.byteLength||C.byteOffset!=T.byteOffset)return!1;C=C.buffer,T=T.buffer;case b:return!(C.byteLength!=T.byteLength||!F(new t(C),new t(T)));case p:case _:case y:return n(+C,+T);case h:return C.name==T.name&&C.message==T.message;case v:case k:return C==T+"";case f:var X=a;case x:var N=P&u;if(X||(X=s),C.size!=T.size&&!N)return!1;var G=D.get(C);if(G)return G==T;P|=c,D.set(C,T);var $=o(X(C),X(T),P,z,F,D);return D.delete(C),$;case w:if(M)return M.call(C)==M.call(T)}return!1}return Jf=I,Jf}var em,q2;function nF(){if(q2)return em;q2=1;var e=YM(),t=1,n=Object.prototype,o=n.hasOwnProperty;function a(s,u,c,p,_,h){var f=c&t,y=e(s),v=y.length,x=e(u),k=x.length;if(v!=k&&!f)return!1;for(var w=v;w--;){var b=y[w];if(!(f?b in u:o.call(u,b)))return!1}var E=h.get(s),q=h.get(u);if(E&&q)return E==u&&q==s;var M=!0;h.set(s,u),h.set(u,s);for(var I=f;++w<v;){b=y[w];var C=s[b],T=u[b];if(p)var R=f?p(T,C,b,u,s,h):p(C,T,b,s,u,h);if(!(R===void 0?C===T||_(C,T,c,p,h):R)){M=!1;break}I||(I=b=="constructor")}if(M&&!I){var P=s.constructor,z=u.constructor;P!=z&&"constructor"in s&&"constructor"in u&&!(typeof P=="function"&&P instanceof P&&typeof z=="function"&&z instanceof z)&&(M=!1)}return h.delete(s),h.delete(u),M}return em=a,em}var tm,S2;function iF(){if(S2)return tm;S2=1;var e=qc(),t=sE(),n=rF(),o=nF(),a=Aa(),s=Vt(),u=Ra(),c=iu(),p=1,_="[object Arguments]",h="[object Array]",f="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function x(k,w,b,E,q,M){var I=s(k),C=s(w),T=I?h:a(k),R=C?h:a(w);T=T==_?f:T,R=R==_?f:R;var P=T==f,z=R==f,F=T==R;if(F&&u(k)){if(!u(w))return!1;I=!0,P=!1}if(F&&!P)return M||(M=new e),I||c(k)?t(k,w,b,E,q,M):n(k,w,T,b,E,q,M);if(!(b&p)){var D=P&&v.call(k,"__wrapped__"),X=z&&v.call(w,"__wrapped__");if(D||X){var N=D?k.value():k,G=X?w.value():w;return M||(M=new e),q(N,G,b,E,M)}}return F?(M||(M=new e),o(k,w,b,E,q,M)):!1}return tm=x,tm}var rm,k2;function uE(){if(k2)return rm;k2=1;var e=iF(),t=Yn();function n(o,a,s,u,c){return o===a?!0:o==null||a==null||!t(o)&&!t(a)?o!==o&&a!==a:e(o,a,s,u,n,c)}return rm=n,rm}var nm,C2;function oF(){if(C2)return nm;C2=1;var e=qc(),t=uE(),n=1,o=2;function a(s,u,c,p){var _=c.length,h=_,f=!p;if(s==null)return!h;for(s=Object(s);_--;){var y=c[_];if(f&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++_<h;){y=c[_];var v=y[0],x=s[v],k=y[1];if(f&&y[2]){if(x===void 0&&!(v in s))return!1}else{var w=new e;if(p)var b=p(x,k,v,s,u,w);if(!(b===void 0?t(k,x,n|o,p,w):b))return!1}}return!0}return nm=a,nm}var im,M2;function lE(){if(M2)return im;M2=1;var e=cn();function t(n){return n===n&&!e(n)}return im=t,im}var om,E2;function aF(){if(E2)return om;E2=1;var e=lE(),t=Xi();function n(o){for(var a=t(o),s=a.length;s--;){var u=a[s],c=o[u];a[s]=[u,c,e(c)]}return a}return om=n,om}var am,I2;function cE(){if(I2)return am;I2=1;function e(t,n){return function(o){return o==null?!1:o[t]===n&&(n!==void 0||t in Object(o))}}return am=e,am}var sm,j2;function sF(){if(j2)return sm;j2=1;var e=oF(),t=aF(),n=cE();function o(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return sm=o,sm}var um,T2;function Fa(){if(T2)return um;T2=1;var e=Ao(),t=Yn(),n="[object Symbol]";function o(a){return typeof a=="symbol"||t(a)&&e(a)==n}return um=o,um}var lm,N2;function gg(){if(N2)return lm;N2=1;var e=Vt(),t=Fa(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function a(s,u){if(e(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||t(s)?!0:o.test(s)||!n.test(s)||u!=null&&s in Object(u)}return lm=a,lm}var cm,P2;function uF(){if(P2)return cm;P2=1;var e=ag(),t="Expected a function";function n(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,c=a?a.apply(this,u):u[0],p=s.cache;if(p.has(c))return p.get(c);var _=o.apply(this,u);return s.cache=p.set(c,_)||p,_};return s.cache=new(n.Cache||e),s}return n.Cache=e,cm=n,cm}var dm,R2;function lF(){if(R2)return dm;R2=1;var e=uF(),t=500;function n(o){var a=e(o,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return dm=n,dm}var pm,A2;function cF(){if(A2)return pm;A2=1;var e=lF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,o=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,c,p,_){s.push(p?_.replace(n,"$1"):c||u)}),s});return pm=o,pm}var _m,F2;function Tc(){if(F2)return _m;F2=1;function e(t,n){for(var o=-1,a=t==null?0:t.length,s=Array(a);++o<a;)s[o]=n(t[o],o,t);return s}return _m=e,_m}var fm,L2;function dF(){if(L2)return fm;L2=1;var e=Pa(),t=Tc(),n=Vt(),o=Fa(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(c){if(typeof c=="string")return c;if(n(c))return t(c,u)+"";if(o(c))return s?s.call(c):"";var p=c+"";return p=="0"&&1/c==-1/0?"-0":p}return fm=u,fm}var mm,O2;function dE(){if(O2)return mm;O2=1;var e=dF();function t(n){return n==null?"":e(n)}return mm=t,mm}var hm,D2;function Nc(){if(D2)return hm;D2=1;var e=Vt(),t=gg(),n=cF(),o=dE();function a(s,u){return e(s)?s:t(s,u)?[s]:n(o(s))}return hm=a,hm}var ym,V2;function ou(){if(V2)return ym;V2=1;var e=Fa();function t(n){if(typeof n=="string"||e(n))return n;var o=n+"";return o=="0"&&1/n==-1/0?"-0":o}return ym=t,ym}var gm,z2;function Pc(){if(z2)return gm;z2=1;var e=Nc(),t=ou();function n(o,a){a=e(a,o);for(var s=0,u=a.length;o!=null&&s<u;)o=o[t(a[s++])];return s&&s==u?o:void 0}return gm=n,gm}var vm,B2;function pF(){if(B2)return vm;B2=1;var e=Pc();function t(n,o,a){var s=n==null?void 0:e(n,o);return s===void 0?a:s}return vm=t,vm}var xm,H2;function _F(){if(H2)return xm;H2=1;function e(t,n){return t!=null&&n in Object(t)}return xm=e,xm}var wm,$2;function pE(){if($2)return wm;$2=1;var e=Nc(),t=nu(),n=Vt(),o=Cc(),a=ug(),s=ou();function u(c,p,_){p=e(p,c);for(var h=-1,f=p.length,y=!1;++h<f;){var v=s(p[h]);if(!(y=c!=null&&_(c,v)))break;c=c[v]}return y||++h!=f?y:(f=c==null?0:c.length,!!f&&a(f)&&o(v,f)&&(n(c)||t(c)))}return wm=u,wm}var bm,W2;function _E(){if(W2)return bm;W2=1;var e=_F(),t=pE();function n(o,a){return o!=null&&t(o,a,e)}return bm=n,bm}var qm,U2;function fF(){if(U2)return qm;U2=1;var e=uE(),t=pF(),n=_E(),o=gg(),a=lE(),s=cE(),u=ou(),c=1,p=2;function _(h,f){return o(h)&&a(f)?s(u(h),f):function(y){var v=t(y,h);return v===void 0&&v===f?n(y,h):e(f,v,c|p)}}return qm=_,qm}var Sm,G2;function fE(){if(G2)return Sm;G2=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Sm=e,Sm}var km,K2;function mF(){if(K2)return km;K2=1;var e=Pc();function t(n){return function(o){return e(o,n)}}return km=t,km}var Cm,Y2;function hF(){if(Y2)return Cm;Y2=1;var e=fE(),t=mF(),n=gg(),o=ou();function a(s){return n(s)?e(o(s)):t(s)}return Cm=a,Cm}var Mm,Q2;function gi(){if(Q2)return Mm;Q2=1;var e=sF(),t=fF(),n=Oo(),o=Vt(),a=hF();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?o(u)?t(u[0],u[1]):e(u):a(u)}return Mm=s,Mm}var Em,X2;function mE(){if(X2)return Em;X2=1;var e=WM(),t=XA(),n=gi(),o=Vt();function a(s,u){var c=o(s)?e:t;return c(s,n(u,3))}return Em=a,Em}var Im,Z2;function yF(){if(Z2)return Im;Z2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(o,a){return o!=null&&t.call(o,a)}return Im=n,Im}var jm,J2;function hE(){if(J2)return jm;J2=1;var e=yF(),t=pE();function n(o,a){return o!=null&&t(o,a,e)}return jm=n,jm}var Tm,eq;function gF(){if(eq)return Tm;eq=1;var e=cg(),t=Aa(),n=nu(),o=Vt(),a=yi(),s=Ra(),u=Ec(),c=iu(),p="[object Map]",_="[object Set]",h=Object.prototype,f=h.hasOwnProperty;function y(v){if(v==null)return!0;if(a(v)&&(o(v)||typeof v=="string"||typeof v.splice=="function"||s(v)||c(v)||n(v)))return!v.length;var x=t(v);if(x==p||x==_)return!v.size;if(u(v))return!e(v).length;for(var k in v)if(f.call(v,k))return!1;return!0}return Tm=y,Tm}var Nm,tq;function yE(){if(tq)return Nm;tq=1;function e(t){return t===void 0}return Nm=e,Nm}var Pm,rq;function gE(){if(rq)return Pm;rq=1;var e=jc(),t=yi();function n(o,a){var s=-1,u=t(o)?Array(o.length):[];return e(o,function(c,p,_){u[++s]=a(c,p,_)}),u}return Pm=n,Pm}var Rm,nq;function vE(){if(nq)return Rm;nq=1;var e=Tc(),t=gi(),n=gE(),o=Vt();function a(s,u){var c=o(s)?e:n;return c(s,t(u,3))}return Rm=a,Rm}var Am,iq;function vF(){if(iq)return Am;iq=1;function e(t,n,o,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(o=t[++s]);++s<u;)o=n(o,t[s],s,t);return o}return Am=e,Am}var Fm,oq;function xF(){if(oq)return Fm;oq=1;function e(t,n,o,a,s){return s(t,function(u,c,p){o=a?(a=!1,u):n(o,u,c,p)}),o}return Fm=e,Fm}var Lm,aq;function xE(){if(aq)return Lm;aq=1;var e=vF(),t=jc(),n=gi(),o=xF(),a=Vt();function s(u,c,p){var _=a(u)?e:o,h=arguments.length<3;return _(u,n(c,4),p,h,t)}return Lm=s,Lm}var Om,sq;function wF(){if(sq)return Om;sq=1;var e=Ao(),t=Vt(),n=Yn(),o="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==o}return Om=a,Om}var Dm,uq;function bF(){if(uq)return Dm;uq=1;var e=fE(),t=e("length");return Dm=t,Dm}var Vm,lq;function qF(){if(lq)return Vm;lq=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=t+n+o,s="\\ufe0e\\ufe0f",u="\\u200d",c=RegExp("["+u+e+a+s+"]");function p(_){return c.test(_)}return Vm=p,Vm}var zm,cq;function SF(){if(cq)return zm;cq=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=t+n+o,s="\\ufe0e\\ufe0f",u="["+e+"]",c="["+a+"]",p="\\ud83c[\\udffb-\\udfff]",_="(?:"+c+"|"+p+")",h="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",x=_+"?",k="["+s+"]?",w="(?:"+v+"(?:"+[h,f,y].join("|")+")"+k+x+")*",b=k+x+w,E="(?:"+[h+c+"?",c,f,y,u].join("|")+")",q=RegExp(p+"(?="+p+")|"+E+b,"g");function M(I){for(var C=q.lastIndex=0;q.test(I);)++C;return C}return zm=M,zm}var Bm,dq;function kF(){if(dq)return Bm;dq=1;var e=bF(),t=qF(),n=SF();function o(a){return t(a)?n(a):e(a)}return Bm=o,Bm}var Hm,pq;function CF(){if(pq)return Hm;pq=1;var e=cg(),t=Aa(),n=yi(),o=wF(),a=kF(),s="[object Map]",u="[object Set]";function c(p){if(p==null)return 0;if(n(p))return o(p)?a(p):p.length;var _=t(p);return _==s||_==u?p.size:e(p).length}return Hm=c,Hm}var $m,_q;function MF(){if(_q)return $m;_q=1;var e=sg(),t=JM(),n=hg(),o=gi(),a=Ic(),s=Vt(),u=Ra(),c=tu(),p=cn(),_=iu();function h(f,y,v){var x=s(f),k=x||u(f)||_(f);if(y=o(y,4),v==null){var w=f&&f.constructor;k?v=x?new w:[]:p(f)?v=c(w)?t(a(f)):{}:v={}}return(k?e:n)(f,function(b,E,q){return y(v,b,E,q)}),v}return $m=h,$m}var Wm,fq;function EF(){if(fq)return Wm;fq=1;var e=Pa(),t=nu(),n=Vt(),o=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(o&&s&&s[o])}return Wm=a,Wm}var Um,mq;function vg(){if(mq)return Um;mq=1;var e=pg(),t=EF();function n(o,a,s,u,c){var p=-1,_=o.length;for(s||(s=t),c||(c=[]);++p<_;){var h=o[p];a>0&&s(h)?a>1?n(h,a-1,s,u,c):e(c,h):u||(c[c.length]=h)}return c}return Um=n,Um}var Gm,hq;function IF(){if(hq)return Gm;hq=1;function e(t,n,o){switch(o.length){case 0:return t.call(n);case 1:return t.call(n,o[0]);case 2:return t.call(n,o[0],o[1]);case 3:return t.call(n,o[0],o[1],o[2])}return t.apply(n,o)}return Gm=e,Gm}var Km,yq;function wE(){if(yq)return Km;yq=1;var e=IF(),t=Math.max;function n(o,a,s){return a=t(a===void 0?o.length-1:a,0),function(){for(var u=arguments,c=-1,p=t(u.length-a,0),_=Array(p);++c<p;)_[c]=u[a+c];c=-1;for(var h=Array(a+1);++c<a;)h[c]=u[c];return h[a]=s(_),e(o,this,h)}}return Km=n,Km}var Ym,gq;function jF(){if(gq)return Ym;gq=1;var e=fg(),t=VM(),n=Oo(),o=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return Ym=o,Ym}var Qm,vq;function TF(){if(vq)return Qm;vq=1;var e=800,t=16,n=Date.now;function o(a){var s=0,u=0;return function(){var c=n(),p=t-(c-u);if(u=c,p>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return Qm=o,Qm}var Xm,xq;function bE(){if(xq)return Xm;xq=1;var e=jF(),t=TF(),n=t(e);return Xm=n,Xm}var Zm,wq;function Rc(){if(wq)return Zm;wq=1;var e=Oo(),t=wE(),n=bE();function o(a,s){return n(t(a,s,e),a+"")}return Zm=o,Zm}var Jm,bq;function qE(){if(bq)return Jm;bq=1;function e(t,n,o,a){for(var s=t.length,u=o+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return Jm=e,Jm}var eh,qq;function NF(){if(qq)return eh;qq=1;function e(t){return t!==t}return eh=e,eh}var th,Sq;function PF(){if(Sq)return th;Sq=1;function e(t,n,o){for(var a=o-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return th=e,th}var rh,kq;function RF(){if(kq)return rh;kq=1;var e=qE(),t=NF(),n=PF();function o(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return rh=o,rh}var nh,Cq;function AF(){if(Cq)return nh;Cq=1;var e=RF();function t(n,o){var a=n==null?0:n.length;return!!a&&e(n,o,0)>-1}return nh=t,nh}var ih,Mq;function FF(){if(Mq)return ih;Mq=1;function e(t,n,o){for(var a=-1,s=t==null?0:t.length;++a<s;)if(o(n,t[a]))return!0;return!1}return ih=e,ih}var oh,Eq;function LF(){if(Eq)return oh;Eq=1;function e(){}return oh=e,oh}var ah,Iq;function OF(){if(Iq)return ah;Iq=1;var e=QM(),t=LF(),n=yg(),o=1/0,a=e&&1/n(new e([,-0]))[1]==o?function(s){return new e(s)}:t;return ah=a,ah}var sh,jq;function DF(){if(jq)return sh;jq=1;var e=oE(),t=AF(),n=FF(),o=aE(),a=OF(),s=yg(),u=200;function c(p,_,h){var f=-1,y=t,v=p.length,x=!0,k=[],w=k;if(h)x=!1,y=n;else if(v>=u){var b=_?null:a(p);if(b)return s(b);x=!1,y=o,w=new e}else w=_?[]:k;e:for(;++f<v;){var E=p[f],q=_?_(E):E;if(E=h||E!==0?E:0,x&&q===q){for(var M=w.length;M--;)if(w[M]===q)continue e;_&&w.push(q),k.push(E)}else y(w,q,h)||(w!==k&&w.push(q),k.push(E))}return k}return sh=c,sh}var uh,Tq;function SE(){if(Tq)return uh;Tq=1;var e=yi(),t=Yn();function n(o){return t(o)&&e(o)}return uh=n,uh}var lh,Nq;function VF(){if(Nq)return lh;Nq=1;var e=vg(),t=Rc(),n=DF(),o=SE(),a=t(function(s){return n(e(s,1,o,!0))});return lh=a,lh}var ch,Pq;function zF(){if(Pq)return ch;Pq=1;var e=Tc();function t(n,o){return e(o,function(a){return n[a]})}return ch=t,ch}var dh,Rq;function kE(){if(Rq)return dh;Rq=1;var e=zF(),t=Xi();function n(o){return o==null?[]:e(o,t(o))}return dh=n,dh}var ph,Aq;function dn(){if(Aq)return ph;Aq=1;var e;if(typeof ig=="function")try{e={clone:KA(),constant:fg(),each:iE(),filter:mE(),has:hE(),isArray:Vt(),isEmpty:gF(),isFunction:tu(),isUndefined:yE(),keys:Xi(),map:vE(),reduce:xE(),size:CF(),transform:MF(),union:VF(),values:kE()}}catch{}return e||(e=window._),ph=e,ph}var _h,Fq;function xg(){if(Fq)return _h;Fq=1;var e=dn();_h=a;var t="\0",n="\0",o="";function a(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(h){return this._label=h,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(f){return e.isEmpty(h._in[f])})},a.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(f){return e.isEmpty(h._out[f])})},a.prototype.setNodes=function(h,f){var y=arguments,v=this;return e.each(h,function(x){y.length>1?v.setNode(x,f):v.setNode(x)}),this},a.prototype.setNode=function(h,f){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=f),this):(this._nodes[h]=arguments.length>1?f:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},a.prototype.node=function(h){return this._nodes[h]},a.prototype.hasNode=function(h){return e.has(this._nodes,h)},a.prototype.removeNode=function(h){var f=this;if(e.has(this._nodes,h)){var y=function(v){f.removeEdge(f._edgeObjs[v])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(v){f.setParent(v)}),delete this._children[h]),e.each(e.keys(this._in[h]),y),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),y),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},a.prototype.setParent=function(h,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var y=f;!e.isUndefined(y);y=this.parent(y))if(y===h)throw new Error("Setting "+f+" as parent of "+h+" would create a cycle");this.setNode(f)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=f,this._children[f][h]=!0,this},a.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},a.prototype.parent=function(h){if(this._isCompound){var f=this._parent[h];if(f!==n)return f}},a.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var f=this._children[h];if(f)return e.keys(f)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},a.prototype.predecessors=function(h){var f=this._preds[h];if(f)return e.keys(f)},a.prototype.successors=function(h){var f=this._sucs[h];if(f)return e.keys(f)},a.prototype.neighbors=function(h){var f=this.predecessors(h);if(f)return e.union(f,this.successors(h))},a.prototype.isLeaf=function(h){var f;return this.isDirected()?f=this.successors(h):f=this.neighbors(h),f.length===0},a.prototype.filterNodes=function(h){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var y=this;e.each(this._nodes,function(k,w){h(w)&&f.setNode(w,k)}),e.each(this._edgeObjs,function(k){f.hasNode(k.v)&&f.hasNode(k.w)&&f.setEdge(k,y.edge(k))});var v={};function x(k){var w=y.parent(k);return w===void 0||f.hasNode(w)?(v[k]=w,w):w in v?v[w]:x(w)}return this._isCompound&&e.each(f.nodes(),function(k){f.setParent(k,x(k))}),f},a.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(h,f){var y=this,v=arguments;return e.reduce(h,function(x,k){return v.length>1?y.setEdge(x,k,f):y.setEdge(x,k),k}),this},a.prototype.setEdge=function(){var h,f,y,v,x=!1,k=arguments[0];typeof k=="object"&&k!==null&&"v"in k?(h=k.v,f=k.w,y=k.name,arguments.length===2&&(v=arguments[1],x=!0)):(h=k,f=arguments[1],y=arguments[3],arguments.length>2&&(v=arguments[2],x=!0)),h=""+h,f=""+f,e.isUndefined(y)||(y=""+y);var w=c(this._isDirected,h,f,y);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=v),this;if(!e.isUndefined(y)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(f),this._edgeLabels[w]=x?v:this._defaultEdgeLabelFn(h,f,y);var b=p(this._isDirected,h,f,y);return h=b.v,f=b.w,Object.freeze(b),this._edgeObjs[w]=b,s(this._preds[f],h),s(this._sucs[h],f),this._in[f][w]=b,this._out[h][w]=b,this._edgeCount++,this},a.prototype.edge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y);return this._edgeLabels[v]},a.prototype.hasEdge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y);return e.has(this._edgeLabels,v)},a.prototype.removeEdge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y),x=this._edgeObjs[v];return x&&(h=x.v,f=x.w,delete this._edgeLabels[v],delete this._edgeObjs[v],u(this._preds[f],h),u(this._sucs[h],f),delete this._in[f][v],delete this._out[h][v],this._edgeCount--),this},a.prototype.inEdges=function(h,f){var y=this._in[h];if(y){var v=e.values(y);return f?e.filter(v,function(x){return x.v===f}):v}},a.prototype.outEdges=function(h,f){var y=this._out[h];if(y){var v=e.values(y);return f?e.filter(v,function(x){return x.w===f}):v}},a.prototype.nodeEdges=function(h,f){var y=this.inEdges(h,f);if(y)return y.concat(this.outEdges(h,f))};function s(h,f){h[f]?h[f]++:h[f]=1}function u(h,f){--h[f]||delete h[f]}function c(h,f,y,v){var x=""+f,k=""+y;if(!h&&x>k){var w=x;x=k,k=w}return x+o+k+o+(e.isUndefined(v)?t:v)}function p(h,f,y,v){var x=""+f,k=""+y;if(!h&&x>k){var w=x;x=k,k=w}var b={v:x,w:k};return v&&(b.name=v),b}function _(h,f){return c(h,f.v,f.w,f.name)}return _h}var fh,Lq;function BF(){return Lq||(Lq=1,fh="2.1.8"),fh}var mh,Oq;function HF(){return Oq||(Oq=1,mh={Graph:xg(),version:BF()}),mh}var hh,Dq;function $F(){if(Dq)return hh;Dq=1;var e=dn(),t=xg();hh={write:n,read:s};function n(u){var c={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:o(u),edges:a(u)};return e.isUndefined(u.graph())||(c.value=e.clone(u.graph())),c}function o(u){return e.map(u.nodes(),function(c){var p=u.node(c),_=u.parent(c),h={v:c};return e.isUndefined(p)||(h.value=p),e.isUndefined(_)||(h.parent=_),h})}function a(u){return e.map(u.edges(),function(c){var p=u.edge(c),_={v:c.v,w:c.w};return e.isUndefined(c.name)||(_.name=c.name),e.isUndefined(p)||(_.value=p),_})}function s(u){var c=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(p){c.setNode(p.v,p.value),p.parent&&c.setParent(p.v,p.parent)}),e.each(u.edges,function(p){c.setEdge({v:p.v,w:p.w,name:p.name},p.value)}),c}return hh}var yh,Vq;function WF(){if(Vq)return yh;Vq=1;var e=dn();yh=t;function t(n){var o={},a=[],s;function u(c){e.has(o,c)||(o[c]=!0,s.push(c),e.each(n.successors(c),u),e.each(n.predecessors(c),u))}return e.each(n.nodes(),function(c){s=[],u(c),s.length&&a.push(s)}),a}return yh}var gh,zq;function CE(){if(zq)return gh;zq=1;var e=dn();gh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var o=this._keyIndices[n];if(o!==void 0)return this._arr[o].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,o){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:o}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,o){var a=this._keyIndices[n];if(o>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+o);this._arr[a].priority=o,this._decrease(a)},t.prototype._heapify=function(n){var o=this._arr,a=2*n,s=a+1,u=n;a<o.length&&(u=o[a].priority<o[u].priority?a:u,s<o.length&&(u=o[s].priority<o[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var o=this._arr,a=o[n].priority,s;n!==0&&(s=n>>1,!(o[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,o){var a=this._arr,s=this._keyIndices,u=a[n],c=a[o];a[n]=c,a[o]=u,s[c.key]=n,s[u.key]=o},gh}var vh,Bq;function ME(){if(Bq)return vh;Bq=1;var e=dn(),t=CE();vh=o;var n=e.constant(1);function o(s,u,c,p){return a(s,String(u),c||n,p||function(_){return s.outEdges(_)})}function a(s,u,c,p){var _={},h=new t,f,y,v=function(x){var k=x.v!==f?x.v:x.w,w=_[k],b=c(x),E=y.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+b);E<w.distance&&(w.distance=E,w.predecessor=f,h.decrease(k,E))};for(s.nodes().forEach(function(x){var k=x===u?0:Number.POSITIVE_INFINITY;_[x]={distance:k},h.add(x,k)});h.size()>0&&(f=h.removeMin(),y=_[f],y.distance!==Number.POSITIVE_INFINITY);)p(f).forEach(v);return _}return vh}var xh,Hq;function UF(){if(Hq)return xh;Hq=1;var e=ME(),t=dn();xh=n;function n(o,a,s){return t.transform(o.nodes(),function(u,c){u[c]=e(o,c,a,s)},{})}return xh}var wh,$q;function EE(){if($q)return wh;$q=1;var e=dn();wh=t;function t(n){var o=0,a=[],s={},u=[];function c(p){var _=s[p]={onStack:!0,lowlink:o,index:o++};if(a.push(p),n.successors(p).forEach(function(y){e.has(s,y)?s[y].onStack&&(_.lowlink=Math.min(_.lowlink,s[y].index)):(c(y),_.lowlink=Math.min(_.lowlink,s[y].lowlink))}),_.lowlink===_.index){var h=[],f;do f=a.pop(),s[f].onStack=!1,h.push(f);while(p!==f);u.push(h)}}return n.nodes().forEach(function(p){e.has(s,p)||c(p)}),u}return wh}var bh,Wq;function GF(){if(Wq)return bh;Wq=1;var e=dn(),t=EE();bh=n;function n(o){return e.filter(t(o),function(a){return a.length>1||a.length===1&&o.hasEdge(a[0],a[0])})}return bh}var qh,Uq;function KF(){if(Uq)return qh;Uq=1;var e=dn();qh=n;var t=e.constant(1);function n(a,s,u){return o(a,s||t,u||function(c){return a.outEdges(c)})}function o(a,s,u){var c={},p=a.nodes();return p.forEach(function(_){c[_]={},c[_][_]={distance:0},p.forEach(function(h){_!==h&&(c[_][h]={distance:Number.POSITIVE_INFINITY})}),u(_).forEach(function(h){var f=h.v===_?h.w:h.v,y=s(h);c[_][f]={distance:y,predecessor:_}})}),p.forEach(function(_){var h=c[_];p.forEach(function(f){var y=c[f];p.forEach(function(v){var x=y[_],k=h[v],w=y[v],b=x.distance+k.distance;b<w.distance&&(w.distance=b,w.predecessor=k.predecessor)})})}),c}return qh}var Sh,Gq;function IE(){if(Gq)return Sh;Gq=1;var e=dn();Sh=t,t.CycleException=n;function t(o){var a={},s={},u=[];function c(p){if(e.has(s,p))throw new n;e.has(a,p)||(s[p]=!0,a[p]=!0,e.each(o.predecessors(p),c),delete s[p],u.push(p))}if(e.each(o.sinks(),c),e.size(a)!==o.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,Sh}var kh,Kq;function YF(){if(Kq)return kh;Kq=1;var e=IE();kh=t;function t(n){try{e(n)}catch(o){if(o instanceof e.CycleException)return!1;throw o}return!0}return kh}var Ch,Yq;function jE(){if(Yq)return Ch;Yq=1;var e=dn();Ch=t;function t(o,a,s){e.isArray(a)||(a=[a]);var u=(o.isDirected()?o.successors:o.neighbors).bind(o),c=[],p={};return e.each(a,function(_){if(!o.hasNode(_))throw new Error("Graph does not have node: "+_);n(o,_,s==="post",p,u,c)}),c}function n(o,a,s,u,c,p){e.has(u,a)||(u[a]=!0,s||p.push(a),e.each(c(a),function(_){n(o,_,s,u,c,p)}),s&&p.push(a))}return Ch}var Mh,Qq;function QF(){if(Qq)return Mh;Qq=1;var e=jE();Mh=t;function t(n,o){return e(n,o,"post")}return Mh}var Eh,Xq;function XF(){if(Xq)return Eh;Xq=1;var e=jE();Eh=t;function t(n,o){return e(n,o,"pre")}return Eh}var Ih,Zq;function ZF(){if(Zq)return Ih;Zq=1;var e=dn(),t=xg(),n=CE();Ih=o;function o(a,s){var u=new t,c={},p=new n,_;function h(y){var v=y.v===_?y.w:y.v,x=p.priority(v);if(x!==void 0){var k=s(y);k<x&&(c[v]=_,p.decrease(v,k))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(y){p.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),p.decrease(a.nodes()[0],0);for(var f=!1;p.size()>0;){if(_=p.removeMin(),e.has(c,_))u.setEdge(_,c[_]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(_).forEach(h)}return u}return Ih}var jh,Jq;function JF(){return Jq||(Jq=1,jh={components:WF(),dijkstra:ME(),dijkstraAll:UF(),findCycles:GF(),floydWarshall:KF(),isAcyclic:YF(),postorder:QF(),preorder:XF(),prim:ZF(),tarjan:EE(),topsort:IE()}),jh}var Th,eS;function eL(){if(eS)return Th;eS=1;var e=HF();return Th={Graph:e.Graph,json:$F(),alg:JF(),version:e.version},Th}var Nh,tS;function jn(){if(tS)return Nh;tS=1;var e;if(typeof ig=="function")try{e=eL()}catch{}return e||(e=window.graphlib),Nh=e,Nh}var Ph,rS;function tL(){if(rS)return Ph;rS=1;var e=tE(),t=1,n=4;function o(a){return e(a,t|n)}return Ph=o,Ph}var Rh,nS;function Ac(){if(nS)return Rh;nS=1;var e=Na(),t=yi(),n=Cc(),o=cn();function a(s,u,c){if(!o(c))return!1;var p=typeof u;return(p=="number"?t(c)&&n(u,c.length):p=="string"&&u in c)?e(c[u],s):!1}return Rh=a,Rh}var Ah,iS;function rL(){if(iS)return Ah;iS=1;var e=Rc(),t=Na(),n=Ac(),o=Lo(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(c,p){c=Object(c);var _=-1,h=p.length,f=h>2?p[2]:void 0;for(f&&n(p[0],p[1],f)&&(h=1);++_<h;)for(var y=p[_],v=o(y),x=-1,k=v.length;++x<k;){var w=v[x],b=c[w];(b===void 0||t(b,a[w])&&!s.call(c,w))&&(c[w]=y[w])}return c});return Ah=u,Ah}var Fh,oS;function nL(){if(oS)return Fh;oS=1;var e=gi(),t=yi(),n=Xi();function o(a){return function(s,u,c){var p=Object(s);if(!t(s)){var _=e(u,3);s=n(s),u=function(f){return _(p[f],f,p)}}var h=a(s,u,c);return h>-1?p[_?s[h]:h]:void 0}}return Fh=o,Fh}var Lh,aS;function iL(){if(aS)return Lh;aS=1;var e=/\s/;function t(n){for(var o=n.length;o--&&e.test(n.charAt(o)););return o}return Lh=t,Lh}var Oh,sS;function oL(){if(sS)return Oh;sS=1;var e=iL(),t=/^\s+/;function n(o){return o&&o.slice(0,e(o)+1).replace(t,"")}return Oh=n,Oh}var Dh,uS;function aL(){if(uS)return Dh;uS=1;var e=oL(),t=cn(),n=Fa(),o=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function p(_){if(typeof _=="number")return _;if(n(_))return o;if(t(_)){var h=typeof _.valueOf=="function"?_.valueOf():_;_=t(h)?h+"":h}if(typeof _!="string")return _===0?_:+_;_=e(_);var f=s.test(_);return f||u.test(_)?c(_.slice(2),f?2:8):a.test(_)?o:+_}return Dh=p,Dh}var Vh,lS;function TE(){if(lS)return Vh;lS=1;var e=aL(),t=1/0,n=17976931348623157e292;function o(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return Vh=o,Vh}var zh,cS;function sL(){if(cS)return zh;cS=1;var e=TE();function t(n){var o=e(n),a=o%1;return o===o?a?o-a:o:0}return zh=t,zh}var Bh,dS;function uL(){if(dS)return Bh;dS=1;var e=qE(),t=gi(),n=sL(),o=Math.max;function a(s,u,c){var p=s==null?0:s.length;if(!p)return-1;var _=c==null?0:n(c);return _<0&&(_=o(p+_,0)),e(s,t(u,3),_)}return Bh=a,Bh}var Hh,pS;function lL(){if(pS)return Hh;pS=1;var e=nL(),t=uL(),n=e(t);return Hh=n,Hh}var $h,_S;function NE(){if(_S)return $h;_S=1;var e=vg();function t(n){var o=n==null?0:n.length;return o?e(n,1):[]}return $h=t,$h}var Wh,fS;function cL(){if(fS)return Wh;fS=1;var e=mg(),t=rE(),n=Lo();function o(a,s){return a==null?a:e(a,t(s),n)}return Wh=o,Wh}var Uh,mS;function dL(){if(mS)return Uh;mS=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Uh=e,Uh}var Gh,hS;function pL(){if(hS)return Gh;hS=1;var e=Sc(),t=hg(),n=gi();function o(a,s){var u={};return s=n(s,3),t(a,function(c,p,_){e(u,p,s(c,p,_))}),u}return Gh=o,Gh}var Kh,yS;function wg(){if(yS)return Kh;yS=1;var e=Fa();function t(n,o,a){for(var s=-1,u=n.length;++s<u;){var c=n[s],p=o(c);if(p!=null&&(_===void 0?p===p&&!e(p):a(p,_)))var _=p,h=c}return h}return Kh=t,Kh}var Yh,gS;function _L(){if(gS)return Yh;gS=1;function e(t,n){return t>n}return Yh=e,Yh}var Qh,vS;function fL(){if(vS)return Qh;vS=1;var e=wg(),t=_L(),n=Oo();function o(a){return a&&a.length?e(a,n,t):void 0}return Qh=o,Qh}var Xh,xS;function PE(){if(xS)return Xh;xS=1;var e=Sc(),t=Na();function n(o,a,s){(s!==void 0&&!t(o[a],s)||s===void 0&&!(a in o))&&e(o,a,s)}return Xh=n,Xh}var Zh,wS;function mL(){if(wS)return Zh;wS=1;var e=Ao(),t=Ic(),n=Yn(),o="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,p=u.call(Object);function _(h){if(!n(h)||e(h)!=o)return!1;var f=t(h);if(f===null)return!0;var y=c.call(f,"constructor")&&f.constructor;return typeof y=="function"&&y instanceof y&&u.call(y)==p}return Zh=_,Zh}var Jh,bS;function RE(){if(bS)return Jh;bS=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Jh=e,Jh}var ey,qS;function hL(){if(qS)return ey;qS=1;var e=ru(),t=Lo();function n(o){return e(o,t(o))}return ey=n,ey}var ty,SS;function yL(){if(SS)return ty;SS=1;var e=PE(),t=HM(),n=ZM(),o=$M(),a=eE(),s=nu(),u=Vt(),c=SE(),p=Ra(),_=tu(),h=cn(),f=mL(),y=iu(),v=RE(),x=hL();function k(w,b,E,q,M,I,C){var T=v(w,E),R=v(b,E),P=C.get(R);if(P){e(w,E,P);return}var z=I?I(T,R,E+"",w,b,C):void 0,F=z===void 0;if(F){var D=u(R),X=!D&&p(R),N=!D&&!X&&y(R);z=R,D||X||N?u(T)?z=T:c(T)?z=o(T):X?(F=!1,z=t(R,!0)):N?(F=!1,z=n(R,!0)):z=[]:f(R)||s(R)?(z=T,s(T)?z=x(T):(!h(T)||_(T))&&(z=a(R))):F=!1}F&&(C.set(R,z),M(z,R,q,I,C),C.delete(R)),e(w,E,z)}return ty=k,ty}var ry,kS;function gL(){if(kS)return ry;kS=1;var e=qc(),t=PE(),n=mg(),o=yL(),a=cn(),s=Lo(),u=RE();function c(p,_,h,f,y){p!==_&&n(_,function(v,x){if(y||(y=new e),a(v))o(p,_,x,h,c,f,y);else{var k=f?f(u(p,x),v,x+"",p,_,y):void 0;k===void 0&&(k=v),t(p,x,k)}},s)}return ry=c,ry}var ny,CS;function vL(){if(CS)return ny;CS=1;var e=Rc(),t=Ac();function n(o){return e(function(a,s){var u=-1,c=s.length,p=c>1?s[c-1]:void 0,_=c>2?s[2]:void 0;for(p=o.length>3&&typeof p=="function"?(c--,p):void 0,_&&t(s[0],s[1],_)&&(p=c<3?void 0:p,c=1),a=Object(a);++u<c;){var h=s[u];h&&o(a,h,u,p)}return a})}return ny=n,ny}var iy,MS;function xL(){if(MS)return iy;MS=1;var e=gL(),t=vL(),n=t(function(o,a,s){e(o,a,s)});return iy=n,iy}var oy,ES;function AE(){if(ES)return oy;ES=1;function e(t,n){return t<n}return oy=e,oy}var ay,IS;function wL(){if(IS)return ay;IS=1;var e=wg(),t=AE(),n=Oo();function o(a){return a&&a.length?e(a,n,t):void 0}return ay=o,ay}var sy,jS;function bL(){if(jS)return sy;jS=1;var e=wg(),t=gi(),n=AE();function o(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return sy=o,sy}var uy,TS;function qL(){if(TS)return uy;TS=1;var e=Nn(),t=function(){return e.Date.now()};return uy=t,uy}var ly,NS;function SL(){if(NS)return ly;NS=1;var e=kc(),t=Nc(),n=Cc(),o=cn(),a=ou();function s(u,c,p,_){if(!o(u))return u;c=t(c,u);for(var h=-1,f=c.length,y=f-1,v=u;v!=null&&++h<f;){var x=a(c[h]),k=p;if(x==="__proto__"||x==="constructor"||x==="prototype")return u;if(h!=y){var w=v[x];k=_?_(w,x,v):void 0,k===void 0&&(k=o(w)?w:n(c[h+1])?[]:{})}e(v,x,k),v=v[x]}return u}return ly=s,ly}var cy,PS;function kL(){if(PS)return cy;PS=1;var e=Pc(),t=SL(),n=Nc();function o(a,s,u){for(var c=-1,p=s.length,_={};++c<p;){var h=s[c],f=e(a,h);u(f,h)&&t(_,n(h,a),f)}return _}return cy=o,cy}var dy,RS;function CL(){if(RS)return dy;RS=1;var e=kL(),t=_E();function n(o,a){return e(o,a,function(s,u){return t(o,u)})}return dy=n,dy}var py,AS;function ML(){if(AS)return py;AS=1;var e=NE(),t=wE(),n=bE();function o(a){return n(t(a,void 0,e),a+"")}return py=o,py}var _y,FS;function EL(){if(FS)return _y;FS=1;var e=CL(),t=ML(),n=t(function(o,a){return o==null?{}:e(o,a)});return _y=n,_y}var fy,LS;function IL(){if(LS)return fy;LS=1;var e=Math.ceil,t=Math.max;function n(o,a,s,u){for(var c=-1,p=t(e((a-o)/(s||1)),0),_=Array(p);p--;)_[u?p:++c]=o,o+=s;return _}return fy=n,fy}var my,OS;function jL(){if(OS)return my;OS=1;var e=IL(),t=Ac(),n=TE();function o(a){return function(s,u,c){return c&&typeof c!="number"&&t(s,u,c)&&(u=c=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),c=c===void 0?s<u?1:-1:n(c),e(s,u,c,a)}}return my=o,my}var hy,DS;function TL(){if(DS)return hy;DS=1;var e=jL(),t=e();return hy=t,hy}var yy,VS;function NL(){if(VS)return yy;VS=1;function e(t,n){var o=t.length;for(t.sort(n);o--;)t[o]=t[o].value;return t}return yy=e,yy}var gy,zS;function PL(){if(zS)return gy;zS=1;var e=Fa();function t(n,o){if(n!==o){var a=n!==void 0,s=n===null,u=n===n,c=e(n),p=o!==void 0,_=o===null,h=o===o,f=e(o);if(!_&&!f&&!c&&n>o||c&&p&&h&&!_&&!f||s&&p&&h||!a&&h||!u)return 1;if(!s&&!c&&!f&&n<o||f&&a&&u&&!s&&!c||_&&a&&u||!p&&u||!h)return-1}return 0}return gy=t,gy}var vy,BS;function RL(){if(BS)return vy;BS=1;var e=PL();function t(n,o,a){for(var s=-1,u=n.criteria,c=o.criteria,p=u.length,_=a.length;++s<p;){var h=e(u[s],c[s]);if(h){if(s>=_)return h;var f=a[s];return h*(f=="desc"?-1:1)}}return n.index-o.index}return vy=t,vy}var xy,HS;function AL(){if(HS)return xy;HS=1;var e=Tc(),t=Pc(),n=gi(),o=gE(),a=NL(),s=Mc(),u=RL(),c=Oo(),p=Vt();function _(h,f,y){f.length?f=e(f,function(k){return p(k)?function(w){return t(w,k.length===1?k[0]:k)}:k}):f=[c];var v=-1;f=e(f,s(n));var x=o(h,function(k,w,b){var E=e(f,function(q){return q(k)});return{criteria:E,index:++v,value:k}});return a(x,function(k,w){return u(k,w,y)})}return xy=_,xy}var wy,$S;function FL(){if($S)return wy;$S=1;var e=vg(),t=AL(),n=Rc(),o=Ac(),a=n(function(s,u){if(s==null)return[];var c=u.length;return c>1&&o(s,u[0],u[1])?u=[]:c>2&&o(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return wy=a,wy}var by,WS;function LL(){if(WS)return by;WS=1;var e=dE(),t=0;function n(o){var a=++t;return e(o)+a}return by=n,by}var qy,US;function OL(){if(US)return qy;US=1;function e(t,n,o){for(var a=-1,s=t.length,u=n.length,c={};++a<s;){var p=a<u?n[a]:void 0;o(c,t[a],p)}return c}return qy=e,qy}var Sy,GS;function DL(){if(GS)return Sy;GS=1;var e=kc(),t=OL();function n(o,a){return t(o||[],a||[],e)}return Sy=n,Sy}var ky,KS;function xt(){if(KS)return ky;KS=1;var e;if(typeof ig=="function")try{e={cloneDeep:tL(),constant:fg(),defaults:rL(),each:iE(),filter:mE(),find:lL(),flatten:NE(),forEach:nE(),forIn:cL(),has:hE(),isUndefined:yE(),last:dL(),map:vE(),mapValues:pL(),max:fL(),merge:xL(),min:wL(),minBy:bL(),now:qL(),pick:EL(),range:TL(),reduce:xE(),sortBy:FL(),uniqueId:LL(),values:kE(),zipObject:DL()}}catch{}return e||(e=window._),ky=e,ky}var Cy,YS;function VL(){if(YS)return Cy;YS=1,Cy=e;function e(){var o={};o._next=o._prev=o,this._sentinel=o}e.prototype.dequeue=function(){var o=this._sentinel,a=o._prev;if(a!==o)return t(a),a},e.prototype.enqueue=function(o){var a=this._sentinel;o._prev&&o._next&&t(o),o._next=a._next,a._next._prev=o,a._next=o,o._prev=a},e.prototype.toString=function(){for(var o=[],a=this._sentinel,s=a._prev;s!==a;)o.push(JSON.stringify(s,n)),s=s._prev;return"["+o.join(", ")+"]"};function t(o){o._prev._next=o._next,o._next._prev=o._prev,delete o._next,delete o._prev}function n(o,a){if(o!=="_next"&&o!=="_prev")return a}return Cy}var My,QS;function zL(){if(QS)return My;QS=1;var e=xt(),t=jn().Graph,n=VL();My=a;var o=e.constant(1);function a(_,h){if(_.nodeCount()<=1)return[];var f=c(_,h||o),y=s(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(y,function(v){return _.outEdges(v.v,v.w)}),!0)}function s(_,h,f){for(var y=[],v=h[h.length-1],x=h[0],k;_.nodeCount();){for(;k=x.dequeue();)u(_,h,f,k);for(;k=v.dequeue();)u(_,h,f,k);if(_.nodeCount()){for(var w=h.length-2;w>0;--w)if(k=h[w].dequeue(),k){y=y.concat(u(_,h,f,k,!0));break}}}return y}function u(_,h,f,y,v){var x=v?[]:void 0;return e.forEach(_.inEdges(y.v),function(k){var w=_.edge(k),b=_.node(k.v);v&&x.push({v:k.v,w:k.w}),b.out-=w,p(h,f,b)}),e.forEach(_.outEdges(y.v),function(k){var w=_.edge(k),b=k.w,E=_.node(b);E.in-=w,p(h,f,E)}),_.removeNode(y.v),x}function c(_,h){var f=new t,y=0,v=0;e.forEach(_.nodes(),function(w){f.setNode(w,{v:w,in:0,out:0})}),e.forEach(_.edges(),function(w){var b=f.edge(w.v,w.w)||0,E=h(w),q=b+E;f.setEdge(w.v,w.w,q),v=Math.max(v,f.node(w.v).out+=E),y=Math.max(y,f.node(w.w).in+=E)});var x=e.range(v+y+3).map(function(){return new n}),k=y+1;return e.forEach(f.nodes(),function(w){p(x,k,f.node(w))}),{graph:f,buckets:x,zeroIdx:k}}function p(_,h,f){f.out?f.in?_[f.out-f.in+h].enqueue(f):_[_.length-1].enqueue(f):_[0].enqueue(f)}return My}var Ey,XS;function BL(){if(XS)return Ey;XS=1;var e=xt(),t=zL();Ey={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,c(s)):o(s);e.forEach(u,function(p){var _=s.edge(p);s.removeEdge(p),_.forwardName=p.name,_.reversed=!0,s.setEdge(p.w,p.v,_,e.uniqueId("rev"))});function c(p){return function(_){return p.edge(_).weight}}}function o(s){var u=[],c={},p={};function _(h){e.has(p,h)||(p[h]=!0,c[h]=!0,e.forEach(s.outEdges(h),function(f){e.has(c,f.w)?u.push(f):_(f.w)}),delete c[h])}return e.forEach(s.nodes(),_),u}function a(s){e.forEach(s.edges(),function(u){var c=s.edge(u);if(c.reversed){s.removeEdge(u);var p=c.forwardName;delete c.reversed,delete c.forwardName,s.setEdge(u.w,u.v,c,p)}})}return Ey}var Iy,ZS;function Rr(){if(ZS)return Iy;ZS=1;var e=xt(),t=jn().Graph;Iy={addDummyNode:n,simplify:o,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:c,buildLayerMatrix:p,normalizeRanks:_,removeEmptyRanks:h,addBorderNode:f,maxRank:y,partition:v,time:x,notime:k};function n(w,b,E,q){var M;do M=e.uniqueId(q);while(w.hasNode(M));return E.dummy=b,w.setNode(M,E),M}function o(w){var b=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(E){b.setNode(E,w.node(E))}),e.forEach(w.edges(),function(E){var q=b.edge(E.v,E.w)||{weight:0,minlen:1},M=w.edge(E);b.setEdge(E.v,E.w,{weight:q.weight+M.weight,minlen:Math.max(q.minlen,M.minlen)})}),b}function a(w){var b=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(E){w.children(E).length||b.setNode(E,w.node(E))}),e.forEach(w.edges(),function(E){b.setEdge(E,w.edge(E))}),b}function s(w){var b=e.map(w.nodes(),function(E){var q={};return e.forEach(w.outEdges(E),function(M){q[M.w]=(q[M.w]||0)+w.edge(M).weight}),q});return e.zipObject(w.nodes(),b)}function u(w){var b=e.map(w.nodes(),function(E){var q={};return e.forEach(w.inEdges(E),function(M){q[M.v]=(q[M.v]||0)+w.edge(M).weight}),q});return e.zipObject(w.nodes(),b)}function c(w,b){var E=w.x,q=w.y,M=b.x-E,I=b.y-q,C=w.width/2,T=w.height/2;if(!M&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var R,P;return Math.abs(I)*C>Math.abs(M)*T?(I<0&&(T=-T),R=T*M/I,P=T):(M<0&&(C=-C),R=C,P=C*I/M),{x:E+R,y:q+P}}function p(w){var b=e.map(e.range(y(w)+1),function(){return[]});return e.forEach(w.nodes(),function(E){var q=w.node(E),M=q.rank;e.isUndefined(M)||(b[M][q.order]=E)}),b}function _(w){var b=e.min(e.map(w.nodes(),function(E){return w.node(E).rank}));e.forEach(w.nodes(),function(E){var q=w.node(E);e.has(q,"rank")&&(q.rank-=b)})}function h(w){var b=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),E=[];e.forEach(w.nodes(),function(I){var C=w.node(I).rank-b;E[C]||(E[C]=[]),E[C].push(I)});var q=0,M=w.graph().nodeRankFactor;e.forEach(E,function(I,C){e.isUndefined(I)&&C%M!==0?--q:q&&e.forEach(I,function(T){w.node(T).rank+=q})})}function f(w,b,E,q){var M={width:0,height:0};return arguments.length>=4&&(M.rank=E,M.order=q),n(w,"border",M,b)}function y(w){return e.max(e.map(w.nodes(),function(b){var E=w.node(b).rank;if(!e.isUndefined(E))return E}))}function v(w,b){var E={lhs:[],rhs:[]};return e.forEach(w,function(q){b(q)?E.lhs.push(q):E.rhs.push(q)}),E}function x(w,b){var E=e.now();try{return b()}finally{console.log(w+" time: "+(e.now()-E)+"ms")}}function k(w,b){return b()}return Iy}var jy,JS;function HL(){if(JS)return jy;JS=1;var e=xt(),t=Rr();jy={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){o(s,u)})}function o(s,u){var c=u.v,p=s.node(c).rank,_=u.w,h=s.node(_).rank,f=u.name,y=s.edge(u),v=y.labelRank;if(h!==p+1){s.removeEdge(u);var x,k,w;for(w=0,++p;p<h;++w,++p)y.points=[],k={width:0,height:0,edgeLabel:y,edgeObj:u,rank:p},x=t.addDummyNode(s,"edge",k,"_d"),p===v&&(k.width=y.width,k.height=y.height,k.dummy="edge-label",k.labelpos=y.labelpos),s.setEdge(c,x,{weight:y.weight},f),w===0&&s.graph().dummyChains.push(x),c=x;s.setEdge(c,_,{weight:y.weight},f)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var c=s.node(u),p=c.edgeLabel,_;for(s.setEdge(c.edgeObj,p);c.dummy;)_=s.successors(u)[0],s.removeNode(u),p.points.push({x:c.x,y:c.y}),c.dummy==="edge-label"&&(p.x=c.x,p.y=c.y,p.width=c.width,p.height=c.height),u=_,c=s.node(u)})}return jy}var Ty,ek;function ac(){if(ek)return Ty;ek=1;var e=xt();Ty={longestPath:t,slack:n};function t(o){var a={};function s(u){var c=o.node(u);if(e.has(a,u))return c.rank;a[u]=!0;var p=e.min(e.map(o.outEdges(u),function(_){return s(_.w)-o.edge(_).minlen}));return(p===Number.POSITIVE_INFINITY||p===void 0||p===null)&&(p=0),c.rank=p}e.forEach(o.sources(),s)}function n(o,a){return o.node(a.w).rank-o.node(a.v).rank-o.edge(a).minlen}return Ty}var Ny,tk;function FE(){if(tk)return Ny;tk=1;var e=xt(),t=jn().Graph,n=ac().slack;Ny=o;function o(c){var p=new t({directed:!1}),_=c.nodes()[0],h=c.nodeCount();p.setNode(_,{});for(var f,y;a(p,c)<h;)f=s(p,c),y=p.hasNode(f.v)?n(c,f):-n(c,f),u(p,c,y);return p}function a(c,p){function _(h){e.forEach(p.nodeEdges(h),function(f){var y=f.v,v=h===y?f.w:y;!c.hasNode(v)&&!n(p,f)&&(c.setNode(v,{}),c.setEdge(h,v,{}),_(v))})}return e.forEach(c.nodes(),_),c.nodeCount()}function s(c,p){return e.minBy(p.edges(),function(_){if(c.hasNode(_.v)!==c.hasNode(_.w))return n(p,_)})}function u(c,p,_){e.forEach(c.nodes(),function(h){p.node(h).rank+=_})}return Ny}var Py,rk;function $L(){if(rk)return Py;rk=1;var e=xt(),t=FE(),n=ac().slack,o=ac().longestPath,a=jn().alg.preorder,s=jn().alg.postorder,u=Rr().simplify;Py=c,c.initLowLimValues=f,c.initCutValues=p,c.calcCutValue=h,c.leaveEdge=v,c.enterEdge=x,c.exchangeEdges=k;function c(q){q=u(q),o(q);var M=t(q);f(M),p(M,q);for(var I,C;I=v(M);)C=x(M,q,I),k(M,q,I,C)}function p(q,M){var I=s(q,q.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(C){_(q,M,C)})}function _(q,M,I){var C=q.node(I),T=C.parent;q.edge(I,T).cutvalue=h(q,M,I)}function h(q,M,I){var C=q.node(I),T=C.parent,R=!0,P=M.edge(I,T),z=0;return P||(R=!1,P=M.edge(T,I)),z=P.weight,e.forEach(M.nodeEdges(I),function(F){var D=F.v===I,X=D?F.w:F.v;if(X!==T){var N=D===R,G=M.edge(F).weight;if(z+=N?G:-G,b(q,I,X)){var $=q.edge(I,X).cutvalue;z+=N?-$:$}}}),z}function f(q,M){arguments.length<2&&(M=q.nodes()[0]),y(q,{},1,M)}function y(q,M,I,C,T){var R=I,P=q.node(C);return M[C]=!0,e.forEach(q.neighbors(C),function(z){e.has(M,z)||(I=y(q,M,I,z,C))}),P.low=R,P.lim=I++,T?P.parent=T:delete P.parent,I}function v(q){return e.find(q.edges(),function(M){return q.edge(M).cutvalue<0})}function x(q,M,I){var C=I.v,T=I.w;M.hasEdge(C,T)||(C=I.w,T=I.v);var R=q.node(C),P=q.node(T),z=R,F=!1;R.lim>P.lim&&(z=P,F=!0);var D=e.filter(M.edges(),function(X){return F===E(q,q.node(X.v),z)&&F!==E(q,q.node(X.w),z)});return e.minBy(D,function(X){return n(M,X)})}function k(q,M,I,C){var T=I.v,R=I.w;q.removeEdge(T,R),q.setEdge(C.v,C.w,{}),f(q),p(q,M),w(q,M)}function w(q,M){var I=e.find(q.nodes(),function(T){return!M.node(T).parent}),C=a(q,I);C=C.slice(1),e.forEach(C,function(T){var R=q.node(T).parent,P=M.edge(T,R),z=!1;P||(P=M.edge(R,T),z=!0),M.node(T).rank=M.node(R).rank+(z?P.minlen:-P.minlen)})}function b(q,M,I){return q.hasEdge(M,I)}function E(q,M,I){return I.low<=M.lim&&M.lim<=I.lim}return Py}var Ry,nk;function WL(){if(nk)return Ry;nk=1;var e=ac(),t=e.longestPath,n=FE(),o=$L();Ry=a;function a(p){switch(p.graph().ranker){case"network-simplex":c(p);break;case"tight-tree":u(p);break;case"longest-path":s(p);break;default:c(p)}}var s=t;function u(p){t(p),n(p)}function c(p){o(p)}return Ry}var Ay,ik;function UL(){if(ik)return Ay;ik=1;var e=xt();Ay=t;function t(a){var s=o(a);e.forEach(a.graph().dummyChains,function(u){for(var c=a.node(u),p=c.edgeObj,_=n(a,s,p.v,p.w),h=_.path,f=_.lca,y=0,v=h[y],x=!0;u!==p.w;){if(c=a.node(u),x){for(;(v=h[y])!==f&&a.node(v).maxRank<c.rank;)y++;v===f&&(x=!1)}if(!x){for(;y<h.length-1&&a.node(v=h[y+1]).minRank<=c.rank;)y++;v=h[y]}a.setParent(u,v),u=a.successors(u)[0]}})}function n(a,s,u,c){var p=[],_=[],h=Math.min(s[u].low,s[c].low),f=Math.max(s[u].lim,s[c].lim),y,v;y=u;do y=a.parent(y),p.push(y);while(y&&(s[y].low>h||f>s[y].lim));for(v=y,y=c;(y=a.parent(y))!==v;)_.push(y);return{path:p.concat(_.reverse()),lca:v}}function o(a){var s={},u=0;function c(p){var _=u;e.forEach(a.children(p),c),s[p]={low:_,lim:u++}}return e.forEach(a.children(),c),s}return Ay}var Fy,ok;function GL(){if(ok)return Fy;ok=1;var e=xt(),t=Rr();Fy={run:n,cleanup:u};function n(c){var p=t.addDummyNode(c,"root",{},"_root"),_=a(c),h=e.max(e.values(_))-1,f=2*h+1;c.graph().nestingRoot=p,e.forEach(c.edges(),function(v){c.edge(v).minlen*=f});var y=s(c)+1;e.forEach(c.children(),function(v){o(c,p,f,y,h,_,v)}),c.graph().nodeRankFactor=f}function o(c,p,_,h,f,y,v){var x=c.children(v);if(!x.length){v!==p&&c.setEdge(p,v,{weight:0,minlen:_});return}var k=t.addBorderNode(c,"_bt"),w=t.addBorderNode(c,"_bb"),b=c.node(v);c.setParent(k,v),b.borderTop=k,c.setParent(w,v),b.borderBottom=w,e.forEach(x,function(E){o(c,p,_,h,f,y,E);var q=c.node(E),M=q.borderTop?q.borderTop:E,I=q.borderBottom?q.borderBottom:E,C=q.borderTop?h:2*h,T=M!==I?1:f-y[v]+1;c.setEdge(k,M,{weight:C,minlen:T,nestingEdge:!0}),c.setEdge(I,w,{weight:C,minlen:T,nestingEdge:!0})}),c.parent(v)||c.setEdge(p,k,{weight:0,minlen:f+y[v]})}function a(c){var p={};function _(h,f){var y=c.children(h);y&&y.length&&e.forEach(y,function(v){_(v,f+1)}),p[h]=f}return e.forEach(c.children(),function(h){_(h,1)}),p}function s(c){return e.reduce(c.edges(),function(p,_){return p+c.edge(_).weight},0)}function u(c){var p=c.graph();c.removeNode(p.nestingRoot),delete p.nestingRoot,e.forEach(c.edges(),function(_){var h=c.edge(_);h.nestingEdge&&c.removeEdge(_)})}return Fy}var Ly,ak;function KL(){if(ak)return Ly;ak=1;var e=xt(),t=Rr();Ly=n;function n(a){function s(u){var c=a.children(u),p=a.node(u);if(c.length&&e.forEach(c,s),e.has(p,"minRank")){p.borderLeft=[],p.borderRight=[];for(var _=p.minRank,h=p.maxRank+1;_<h;++_)o(a,"borderLeft","_bl",u,p,_),o(a,"borderRight","_br",u,p,_)}}e.forEach(a.children(),s)}function o(a,s,u,c,p,_){var h={width:0,height:0,rank:_,borderType:s},f=p[s][_-1],y=t.addDummyNode(a,"border",h,u);p[s][_]=y,a.setParent(y,c),f&&a.setEdge(f,y,{weight:1})}return Ly}var Oy,sk;function YL(){if(sk)return Oy;sk=1;var e=xt();Oy={adjust:t,undo:n};function t(_){var h=_.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&o(_)}function n(_){var h=_.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(_),(h==="lr"||h==="rl")&&(c(_),o(_))}function o(_){e.forEach(_.nodes(),function(h){a(_.node(h))}),e.forEach(_.edges(),function(h){a(_.edge(h))})}function a(_){var h=_.width;_.width=_.height,_.height=h}function s(_){e.forEach(_.nodes(),function(h){u(_.node(h))}),e.forEach(_.edges(),function(h){var f=_.edge(h);e.forEach(f.points,u),e.has(f,"y")&&u(f)})}function u(_){_.y=-_.y}function c(_){e.forEach(_.nodes(),function(h){p(_.node(h))}),e.forEach(_.edges(),function(h){var f=_.edge(h);e.forEach(f.points,p),e.has(f,"x")&&p(f)})}function p(_){var h=_.x;_.x=_.y,_.y=h}return Oy}var Dy,uk;function QL(){if(uk)return Dy;uk=1;var e=xt();Dy=t;function t(n){var o={},a=e.filter(n.nodes(),function(_){return!n.children(_).length}),s=e.max(e.map(a,function(_){return n.node(_).rank})),u=e.map(e.range(s+1),function(){return[]});function c(_){if(!e.has(o,_)){o[_]=!0;var h=n.node(_);u[h.rank].push(_),e.forEach(n.successors(_),c)}}var p=e.sortBy(a,function(_){return n.node(_).rank});return e.forEach(p,c),u}return Dy}var Vy,lk;function XL(){if(lk)return Vy;lk=1;var e=xt();Vy=t;function t(o,a){for(var s=0,u=1;u<a.length;++u)s+=n(o,a[u-1],a[u]);return s}function n(o,a,s){for(var u=e.zipObject(s,e.map(s,function(y,v){return v})),c=e.flatten(e.map(a,function(y){return e.sortBy(e.map(o.outEdges(y),function(v){return{pos:u[v.w],weight:o.edge(v).weight}}),"pos")}),!0),p=1;p<s.length;)p<<=1;var _=2*p-1;p-=1;var h=e.map(new Array(_),function(){return 0}),f=0;return e.forEach(c.forEach(function(y){var v=y.pos+p;h[v]+=y.weight;for(var x=0;v>0;)v%2&&(x+=h[v+1]),v=v-1>>1,h[v]+=y.weight;f+=y.weight*x})),f}return Vy}var zy,ck;function ZL(){if(ck)return zy;ck=1;var e=xt();zy=t;function t(n,o){return e.map(o,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(c,p){var _=n.edge(p),h=n.node(p.v);return{sum:c.sum+_.weight*h.order,weight:c.weight+_.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return zy}var By,dk;function JL(){if(dk)return By;dk=1;var e=xt();By=t;function t(a,s){var u={};e.forEach(a,function(p,_){var h=u[p.v]={indegree:0,in:[],out:[],vs:[p.v],i:_};e.isUndefined(p.barycenter)||(h.barycenter=p.barycenter,h.weight=p.weight)}),e.forEach(s.edges(),function(p){var _=u[p.v],h=u[p.w];!e.isUndefined(_)&&!e.isUndefined(h)&&(h.indegree++,_.out.push(u[p.w]))});var c=e.filter(u,function(p){return!p.indegree});return n(c)}function n(a){var s=[];function u(_){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(_.barycenter)||h.barycenter>=_.barycenter)&&o(_,h)}}function c(_){return function(h){h.in.push(_),--h.indegree===0&&a.push(h)}}for(;a.length;){var p=a.pop();s.push(p),e.forEach(p.in.reverse(),u(p)),e.forEach(p.out,c(p))}return e.map(e.filter(s,function(_){return!_.merged}),function(_){return e.pick(_,["vs","i","barycenter","weight"])})}function o(a,s){var u=0,c=0;a.weight&&(u+=a.barycenter*a.weight,c+=a.weight),s.weight&&(u+=s.barycenter*s.weight,c+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/c,a.weight=c,a.i=Math.min(s.i,a.i),s.merged=!0}return By}var Hy,pk;function e8(){if(pk)return Hy;pk=1;var e=xt(),t=Rr();Hy=n;function n(s,u){var c=t.partition(s,function(k){return e.has(k,"barycenter")}),p=c.lhs,_=e.sortBy(c.rhs,function(k){return-k.i}),h=[],f=0,y=0,v=0;p.sort(a(!!u)),v=o(h,_,v),e.forEach(p,function(k){v+=k.vs.length,h.push(k.vs),f+=k.barycenter*k.weight,y+=k.weight,v=o(h,_,v)});var x={vs:e.flatten(h,!0)};return y&&(x.barycenter=f/y,x.weight=y),x}function o(s,u,c){for(var p;u.length&&(p=e.last(u)).i<=c;)u.pop(),s.push(p.vs),c++;return c}function a(s){return function(u,c){return u.barycenter<c.barycenter?-1:u.barycenter>c.barycenter?1:s?c.i-u.i:u.i-c.i}}return Hy}var $y,_k;function t8(){if(_k)return $y;_k=1;var e=xt(),t=ZL(),n=JL(),o=e8();$y=a;function a(c,p,_,h){var f=c.children(p),y=c.node(p),v=y?y.borderLeft:void 0,x=y?y.borderRight:void 0,k={};v&&(f=e.filter(f,function(I){return I!==v&&I!==x}));var w=t(c,f);e.forEach(w,function(I){if(c.children(I.v).length){var C=a(c,I.v,_,h);k[I.v]=C,e.has(C,"barycenter")&&u(I,C)}});var b=n(w,_);s(b,k);var E=o(b,h);if(v&&(E.vs=e.flatten([v,E.vs,x],!0),c.predecessors(v).length)){var q=c.node(c.predecessors(v)[0]),M=c.node(c.predecessors(x)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+q.order+M.order)/(E.weight+2),E.weight+=2}return E}function s(c,p){e.forEach(c,function(_){_.vs=e.flatten(_.vs.map(function(h){return p[h]?p[h].vs:h}),!0)})}function u(c,p){e.isUndefined(c.barycenter)?(c.barycenter=p.barycenter,c.weight=p.weight):(c.barycenter=(c.barycenter*c.weight+p.barycenter*p.weight)/(c.weight+p.weight),c.weight+=p.weight)}return $y}var Wy,fk;function r8(){if(fk)return Wy;fk=1;var e=xt(),t=jn().Graph;Wy=n;function n(a,s,u){var c=o(a),p=new t({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(_){return a.node(_)});return e.forEach(a.nodes(),function(_){var h=a.node(_),f=a.parent(_);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(p.setNode(_),p.setParent(_,f||c),e.forEach(a[u](_),function(y){var v=y.v===_?y.w:y.v,x=p.edge(v,_),k=e.isUndefined(x)?0:x.weight;p.setEdge(v,_,{weight:a.edge(y).weight+k})}),e.has(h,"minRank")&&p.setNode(_,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),p}function o(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return Wy}var Uy,mk;function n8(){if(mk)return Uy;mk=1;var e=xt();Uy=t;function t(n,o,a){var s={},u;e.forEach(a,function(c){for(var p=n.parent(c),_,h;p;){if(_=n.parent(p),_?(h=s[_],s[_]=p):(h=u,u=p),h&&h!==p){o.setEdge(h,p);return}p=_}})}return Uy}var Gy,hk;function i8(){if(hk)return Gy;hk=1;var e=xt(),t=QL(),n=XL(),o=t8(),a=r8(),s=n8(),u=jn().Graph,c=Rr();Gy=p;function p(y){var v=c.maxRank(y),x=_(y,e.range(1,v+1),"inEdges"),k=_(y,e.range(v-1,-1,-1),"outEdges"),w=t(y);f(y,w);for(var b=Number.POSITIVE_INFINITY,E,q=0,M=0;M<4;++q,++M){h(q%2?x:k,q%4>=2),w=c.buildLayerMatrix(y);var I=n(y,w);I<b&&(M=0,E=e.cloneDeep(w),b=I)}f(y,E)}function _(y,v,x){return e.map(v,function(k){return a(y,k,x)})}function h(y,v){var x=new u;e.forEach(y,function(k){var w=k.graph().root,b=o(k,w,x,v);e.forEach(b.vs,function(E,q){k.node(E).order=q}),s(k,x,b.vs)})}function f(y,v){e.forEach(v,function(x){e.forEach(x,function(k,w){y.node(k).order=w})})}return Gy}var Ky,yk;function o8(){if(yk)return Ky;yk=1;var e=xt(),t=jn().Graph,n=Rr();Ky={positionX:x,findType1Conflicts:o,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:p,horizontalCompaction:_,alignCoordinates:y,findSmallestWidthAlignment:f,balance:v};function o(b,E){var q={};function M(I,C){var T=0,R=0,P=I.length,z=e.last(C);return e.forEach(C,function(F,D){var X=s(b,F),N=X?b.node(X).order:P;(X||F===z)&&(e.forEach(C.slice(R,D+1),function(G){e.forEach(b.predecessors(G),function($){var re=b.node($),Y=re.order;(Y<T||N<Y)&&!(re.dummy&&b.node(G).dummy)&&u(q,$,G)})}),R=D+1,T=N)}),C}return e.reduce(E,M),q}function a(b,E){var q={};function M(C,T,R,P,z){var F;e.forEach(e.range(T,R),function(D){F=C[D],b.node(F).dummy&&e.forEach(b.predecessors(F),function(X){var N=b.node(X);N.dummy&&(N.order<P||N.order>z)&&u(q,X,F)})})}function I(C,T){var R=-1,P,z=0;return e.forEach(T,function(F,D){if(b.node(F).dummy==="border"){var X=b.predecessors(F);X.length&&(P=b.node(X[0]).order,M(T,z,D,R,P),z=D,R=P)}M(T,z,T.length,P,C.length)}),T}return e.reduce(E,I),q}function s(b,E){if(b.node(E).dummy)return e.find(b.predecessors(E),function(q){return b.node(q).dummy})}function u(b,E,q){if(E>q){var M=E;E=q,q=M}var I=b[E];I||(b[E]=I={}),I[q]=!0}function c(b,E,q){if(E>q){var M=E;E=q,q=M}return e.has(b[E],q)}function p(b,E,q,M){var I={},C={},T={};return e.forEach(E,function(R){e.forEach(R,function(P,z){I[P]=P,C[P]=P,T[P]=z})}),e.forEach(E,function(R){var P=-1;e.forEach(R,function(z){var F=M(z);if(F.length){F=e.sortBy(F,function($){return T[$]});for(var D=(F.length-1)/2,X=Math.floor(D),N=Math.ceil(D);X<=N;++X){var G=F[X];C[z]===z&&P<T[G]&&!c(q,z,G)&&(C[G]=z,C[z]=I[z]=I[G],P=T[G])}}})}),{root:I,align:C}}function _(b,E,q,M,I){var C={},T=h(b,E,q,I),R=I?"borderLeft":"borderRight";function P(D,X){for(var N=T.nodes(),G=N.pop(),$={};G;)$[G]?D(G):($[G]=!0,N.push(G),N=N.concat(X(G))),G=N.pop()}function z(D){C[D]=T.inEdges(D).reduce(function(X,N){return Math.max(X,C[N.v]+T.edge(N))},0)}function F(D){var X=T.outEdges(D).reduce(function(G,$){return Math.min(G,C[$.w]-T.edge($))},Number.POSITIVE_INFINITY),N=b.node(D);X!==Number.POSITIVE_INFINITY&&N.borderType!==R&&(C[D]=Math.max(C[D],X))}return P(z,T.predecessors.bind(T)),P(F,T.successors.bind(T)),e.forEach(M,function(D){C[D]=C[q[D]]}),C}function h(b,E,q,M){var I=new t,C=b.graph(),T=k(C.nodesep,C.edgesep,M);return e.forEach(E,function(R){var P;e.forEach(R,function(z){var F=q[z];if(I.setNode(F),P){var D=q[P],X=I.edge(D,F);I.setEdge(D,F,Math.max(T(b,z,P),X||0))}P=z})}),I}function f(b,E){return e.minBy(e.values(E),function(q){var M=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(q,function(C,T){var R=w(b,T)/2;M=Math.max(C+R,M),I=Math.min(C-R,I)}),M-I})}function y(b,E){var q=e.values(E),M=e.min(q),I=e.max(q);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(T){var R=C+T,P=b[R],z;if(P!==E){var F=e.values(P);z=T==="l"?M-e.min(F):I-e.max(F),z&&(b[R]=e.mapValues(P,function(D){return D+z}))}})})}function v(b,E){return e.mapValues(b.ul,function(q,M){if(E)return b[E.toLowerCase()][M];var I=e.sortBy(e.map(b,M));return(I[1]+I[2])/2})}function x(b){var E=n.buildLayerMatrix(b),q=e.merge(o(b,E),a(b,E)),M={},I;e.forEach(["u","d"],function(T){I=T==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(I=e.map(I,function(D){return e.values(D).reverse()}));var P=(T==="u"?b.predecessors:b.successors).bind(b),z=p(b,I,q,P),F=_(b,I,z.root,z.align,R==="r");R==="r"&&(F=e.mapValues(F,function(D){return-D})),M[T+R]=F})});var C=f(b,M);return y(M,C),v(M,b.graph().align)}function k(b,E,q){return function(M,I,C){var T=M.node(I),R=M.node(C),P=0,z;if(P+=T.width/2,e.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":z=-T.width/2;break;case"r":z=T.width/2;break}if(z&&(P+=q?z:-z),z=0,P+=(T.dummy?E:b)/2,P+=(R.dummy?E:b)/2,P+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":z=R.width/2;break;case"r":z=-R.width/2;break}return z&&(P+=q?z:-z),z=0,P}}function w(b,E){return b.node(E).width}return Ky}var Yy,gk;function a8(){if(gk)return Yy;gk=1;var e=xt(),t=Rr(),n=o8().positionX;Yy=o;function o(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,c){s.node(c).x=u})}function a(s){var u=t.buildLayerMatrix(s),c=s.graph().ranksep,p=0;e.forEach(u,function(_){var h=e.max(e.map(_,function(f){return s.node(f).height}));e.forEach(_,function(f){s.node(f).y=p+h/2}),p+=h+c})}return Yy}var Qy,vk;function s8(){if(vk)return Qy;vk=1;var e=xt(),t=BL(),n=HL(),o=WL(),a=Rr().normalizeRanks,s=UL(),u=Rr().removeEmptyRanks,c=GL(),p=KL(),_=YL(),h=i8(),f=a8(),y=Rr(),v=jn().Graph;Qy=x;function x(W,te){var oe=te&&te.debugTiming?y.time:y.notime;oe("layout",function(){var pe=oe("  buildLayoutGraph",function(){return P(W)});oe("  runLayout",function(){k(pe,oe)}),oe("  updateInputGraph",function(){w(W,pe)})})}function k(W,te){te("    makeSpaceForEdgeLabels",function(){z(W)}),te("    removeSelfEdges",function(){Q(W)}),te("    acyclic",function(){t.run(W)}),te("    nestingGraph.run",function(){c.run(W)}),te("    rank",function(){o(y.asNonCompoundGraph(W))}),te("    injectEdgeLabelProxies",function(){F(W)}),te("    removeEmptyRanks",function(){u(W)}),te("    nestingGraph.cleanup",function(){c.cleanup(W)}),te("    normalizeRanks",function(){a(W)}),te("    assignRankMinMax",function(){D(W)}),te("    removeEdgeLabelProxies",function(){X(W)}),te("    normalize.run",function(){n.run(W)}),te("    parentDummyChains",function(){s(W)}),te("    addBorderSegments",function(){p(W)}),te("    order",function(){h(W)}),te("    insertSelfEdges",function(){ie(W)}),te("    adjustCoordinateSystem",function(){_.adjust(W)}),te("    position",function(){f(W)}),te("    positionSelfEdges",function(){H(W)}),te("    removeBorderNodes",function(){Y(W)}),te("    normalize.undo",function(){n.undo(W)}),te("    fixupEdgeLabelCoords",function(){$(W)}),te("    undoCoordinateSystem",function(){_.undo(W)}),te("    translateGraph",function(){N(W)}),te("    assignNodeIntersects",function(){G(W)}),te("    reversePoints",function(){re(W)}),te("    acyclic.undo",function(){t.undo(W)})}function w(W,te){e.forEach(W.nodes(),function(oe){var pe=W.node(oe),ue=te.node(oe);pe&&(pe.x=ue.x,pe.y=ue.y,te.children(oe).length&&(pe.width=ue.width,pe.height=ue.height))}),e.forEach(W.edges(),function(oe){var pe=W.edge(oe),ue=te.edge(oe);pe.points=ue.points,e.has(ue,"x")&&(pe.x=ue.x,pe.y=ue.y)}),W.graph().width=te.graph().width,W.graph().height=te.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},q=["acyclicer","ranker","rankdir","align"],M=["width","height"],I={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function P(W){var te=new v({multigraph:!0,compound:!0}),oe=me(W.graph());return te.setGraph(e.merge({},E,J(oe,b),e.pick(oe,q))),e.forEach(W.nodes(),function(pe){var ue=me(W.node(pe));te.setNode(pe,e.defaults(J(ue,M),I)),te.setParent(pe,W.parent(pe))}),e.forEach(W.edges(),function(pe){var ue=me(W.edge(pe));te.setEdge(pe,e.merge({},T,J(ue,C),e.pick(ue,R)))}),te}function z(W){var te=W.graph();te.ranksep/=2,e.forEach(W.edges(),function(oe){var pe=W.edge(oe);pe.minlen*=2,pe.labelpos.toLowerCase()!=="c"&&(te.rankdir==="TB"||te.rankdir==="BT"?pe.width+=pe.labeloffset:pe.height+=pe.labeloffset)})}function F(W){e.forEach(W.edges(),function(te){var oe=W.edge(te);if(oe.width&&oe.height){var pe=W.node(te.v),ue=W.node(te.w),ve={rank:(ue.rank-pe.rank)/2+pe.rank,e:te};y.addDummyNode(W,"edge-proxy",ve,"_ep")}})}function D(W){var te=0;e.forEach(W.nodes(),function(oe){var pe=W.node(oe);pe.borderTop&&(pe.minRank=W.node(pe.borderTop).rank,pe.maxRank=W.node(pe.borderBottom).rank,te=e.max(te,pe.maxRank))}),W.graph().maxRank=te}function X(W){e.forEach(W.nodes(),function(te){var oe=W.node(te);oe.dummy==="edge-proxy"&&(W.edge(oe.e).labelRank=oe.rank,W.removeNode(te))})}function N(W){var te=Number.POSITIVE_INFINITY,oe=0,pe=Number.POSITIVE_INFINITY,ue=0,ve=W.graph(),Ie=ve.marginx||0,Re=ve.marginy||0;function je(Te){var Pe=Te.x,Ae=Te.y,Ue=Te.width,Be=Te.height;te=Math.min(te,Pe-Ue/2),oe=Math.max(oe,Pe+Ue/2),pe=Math.min(pe,Ae-Be/2),ue=Math.max(ue,Ae+Be/2)}e.forEach(W.nodes(),function(Te){je(W.node(Te))}),e.forEach(W.edges(),function(Te){var Pe=W.edge(Te);e.has(Pe,"x")&&je(Pe)}),te-=Ie,pe-=Re,e.forEach(W.nodes(),function(Te){var Pe=W.node(Te);Pe.x-=te,Pe.y-=pe}),e.forEach(W.edges(),function(Te){var Pe=W.edge(Te);e.forEach(Pe.points,function(Ae){Ae.x-=te,Ae.y-=pe}),e.has(Pe,"x")&&(Pe.x-=te),e.has(Pe,"y")&&(Pe.y-=pe)}),ve.width=oe-te+Ie,ve.height=ue-pe+Re}function G(W){e.forEach(W.edges(),function(te){var oe=W.edge(te),pe=W.node(te.v),ue=W.node(te.w),ve,Ie;oe.points?(ve=oe.points[0],Ie=oe.points[oe.points.length-1]):(oe.points=[],ve=ue,Ie=pe),oe.points.unshift(y.intersectRect(pe,ve)),oe.points.push(y.intersectRect(ue,Ie))})}function $(W){e.forEach(W.edges(),function(te){var oe=W.edge(te);if(e.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function re(W){e.forEach(W.edges(),function(te){var oe=W.edge(te);oe.reversed&&oe.points.reverse()})}function Y(W){e.forEach(W.nodes(),function(te){if(W.children(te).length){var oe=W.node(te),pe=W.node(oe.borderTop),ue=W.node(oe.borderBottom),ve=W.node(e.last(oe.borderLeft)),Ie=W.node(e.last(oe.borderRight));oe.width=Math.abs(Ie.x-ve.x),oe.height=Math.abs(ue.y-pe.y),oe.x=ve.x+oe.width/2,oe.y=pe.y+oe.height/2}}),e.forEach(W.nodes(),function(te){W.node(te).dummy==="border"&&W.removeNode(te)})}function Q(W){e.forEach(W.edges(),function(te){if(te.v===te.w){var oe=W.node(te.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:te,label:W.edge(te)}),W.removeEdge(te)}})}function ie(W){var te=y.buildLayerMatrix(W);e.forEach(te,function(oe){var pe=0;e.forEach(oe,function(ue,ve){var Ie=W.node(ue);Ie.order=ve+pe,e.forEach(Ie.selfEdges,function(Re){y.addDummyNode(W,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ie.rank,order:ve+ ++pe,e:Re.e,label:Re.label},"_se")}),delete Ie.selfEdges})})}function H(W){e.forEach(W.nodes(),function(te){var oe=W.node(te);if(oe.dummy==="selfedge"){var pe=W.node(oe.e.v),ue=pe.x+pe.width/2,ve=pe.y,Ie=oe.x-ue,Re=pe.height/2;W.setEdge(oe.e,oe.label),W.removeNode(te),oe.label.points=[{x:ue+2*Ie/3,y:ve-Re},{x:ue+5*Ie/6,y:ve-Re},{x:ue+Ie,y:ve},{x:ue+5*Ie/6,y:ve+Re},{x:ue+2*Ie/3,y:ve+Re}],oe.label.x=oe.x,oe.label.y=oe.y}})}function J(W,te){return e.mapValues(e.pick(W,te),Number)}function me(W){var te={};return e.forEach(W,function(oe,pe){te[pe.toLowerCase()]=oe}),te}return Qy}var Xy,xk;function u8(){if(xk)return Xy;xk=1;var e=xt(),t=Rr(),n=jn().Graph;Xy={debugOrdering:o};function o(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(c){u.setNode(c,{label:c}),u.setParent(c,"layer"+a.node(c).rank)}),e.forEach(a.edges(),function(c){u.setEdge(c.v,c.w,{},c.name)}),e.forEach(s,function(c,p){var _="layer"+p;u.setNode(_,{rank:"same"}),e.reduce(c,function(h,f){return u.setEdge(h,f,{style:"invis"}),f})}),u}return Xy}var Zy,wk;function l8(){return wk||(wk=1,Zy="0.8.5"),Zy}var Jy,bk;function c8(){return bk||(bk=1,Jy={graphlib:jn(),layout:s8(),debug:u8(),util:{time:Rr().time,notime:Rr().notime},version:l8()}),Jy}var d8=c8();const qk=Ws(d8),p8=44,_8=8,Sk=120,f8=380,m8=e=>{var p,_,h;const t=(p=e.data)==null?void 0:p.recipe;if(!t)return Sk+100;const n=((_=t.inputs)==null?void 0:_.length)||0,o=((h=t.outputs)==null?void 0:h.length)||0,a=Math.max(n,o,1),u=a*p8+(a-1)*_8+24;return Sk+u+12},h8=(e,t)=>{if(!e||e.length===0)return e;const n=new qk.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=f8,u=m8(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),qk.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},kk=["Tip: Lock nodes to prevent the solver from changing their machine counts.","Tip: Use Shift+Click on a node to mark it as a target recipe.","Tip: Capped nodes will not exceed their set machine count during solving.","Tip: Connect excess outputs to inputs of other machines to reduce waste.","Tip: The LP solver prioritizes eliminating deficiencies above all else, other variables are compared using weighted sums.","Tip: Adjust objective weights in the view recipes panel to change what the solver optimizes for  reorder or disable Model Count, Excesses, Pollution, Power, and Cost.","Tip: Remove unused weights entirely to simplify the model  fewer active objectives means faster solving.","Tip: Line types and paths can be changed in the Theme Editor to make complex networks easier to read.","Tip: Excess and deficiency highlight colors are customizable in the Theme Editor  make them stand out more against your chosen theme.","Tip: Add different ways of producing an item to see which is better, solver will pick the flow with the least cost according to weights used","Tip: Double-click a handle to auto-balance a single connection without running the full solver.","Tip: Middle-click a node to duplicate it  useful for quickly scaling up a production line.","Tip: Use the per-second display mode to directly compare production rates across different recipe cycle times."],y8=()=>{L.useEffect(()=>{const o="lp-spinner-keyframes";if(!document.getElementById(o)){const a=document.createElement("style");a.id=o,a.textContent=`
        @keyframes lp-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes lp-dot-fade { 0%, 100% { opacity: 0.15; } 50% { opacity: 1; } }
      `,document.head.appendChild(a)}},[]);const e=10,t=20,n=26;return d.jsx("svg",{width:"52",height:"52",style:{flexShrink:0,animation:"lp-spin 1.1s linear infinite",willChange:"transform"},children:Array.from({length:e}).map((o,a)=>{const s=a/e*2*Math.PI-Math.PI/2,u=n+t*Math.cos(s),c=n+t*Math.sin(s),p=2+a/(e-1)*3.5,_=-(a/e)*1.1;return d.jsx("circle",{cx:u,cy:c,r:p/2,fill:"var(--color-primary)",style:{animation:`lp-dot-fade 1.1s ease-in-out ${_}s infinite`,transformOrigin:`${u}px ${c}px`}},a)})})},g8=({phase:e,nodeSnapshot:t,result:n,onCancel:o,onApply:a,onLocateNode:s})=>{const[u,c]=L.useState(0),[p,_]=L.useState(0),h=L.useRef(Date.now());L.useEffect(()=>{if(e!=="loading")return;h.current=Date.now(),c(0);const M=setInterval(()=>c(Date.now()-h.current),100),I=setInterval(()=>_(C=>(C+1)%kk.length),4e3);return()=>{clearInterval(M),clearInterval(I)}},[e]);const f=M=>{var R,P,z;const I=t==null?void 0:t.find(F=>F.id===M),C=((R=I==null?void 0:I.data)==null?void 0:R.machineName)||"",T=((z=(P=I==null?void 0:I.data)==null?void 0:P.recipe)==null?void 0:z.name)||M;return C?`${C}  ${T}`:T},y=M=>{var C,T,R;const I=t==null?void 0:t.find(P=>P.id===M);return((C=I==null?void 0:I.data)==null?void 0:C.machineName)||((R=(T=I==null?void 0:I.data)==null?void 0:T.recipe)==null?void 0:R.name)||M},v=M=>{var I,C;return((C=(I=t==null?void 0:t.find(T=>T.id===M))==null?void 0:I.data)==null?void 0:C.machineCount)||0},x=M=>typeof M=="number"?Number.isInteger(M)?M.toString():M.toFixed(3):"0",k=M=>d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"14px",marginBottom:"8px"},children:M}),w=(M,I)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",padding:"6px 12px",fontSize:"12px"},children:[d.jsx("span",{style:{color:"var(--text-secondary)"},children:M}),d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:String(I)})]},M),b=()=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",padding:"32px 24px"},children:[d.jsx(y8,{}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"18px",fontWeight:700,marginBottom:"6px"},children:"Solving Production Network..."}),d.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"26px",fontWeight:700,fontVariantNumeric:"tabular-nums"},children:[(u/1e3).toFixed(1),"s"]})]}),d.jsx("div",{style:{background:"var(--bg-main)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"12px 16px",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"340px"},children:kk[p]}),d.jsx("button",{onClick:o,className:"btn btn-secondary",style:{minWidth:"100px"},children:"Cancel"})]}),E=()=>{const M=(n==null?void 0:n.deficientNodes)||[];return d.jsxs("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsx("span",{style:{fontSize:"28px"},children:""}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:700},children:"Insufficient Input Supply"}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginTop:"2px"},children:"These recipes need more input than is currently being produced."})]})]}),M.length>0&&d.jsx("div",{style:{maxHeight:"280px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:M.map((I,C)=>d.jsxs("div",{style:{background:"rgba(239,68,68,0.08)",border:"1px solid rgba(239,68,68,0.35)",borderRadius:"var(--radius-sm)",padding:"10px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[d.jsx("div",{style:{flex:1,minWidth:0},children:d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px"},children:y(I.nodeId)})}),d.jsx("button",{onClick:()=>{o(),s(I.nodeId)},className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"12px",whiteSpace:"nowrap",flexShrink:0},children:"Locate"})]},C))}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",background:"var(--bg-main)",padding:"10px 12px",borderRadius:"var(--radius-sm)"},children:"Add more production for the needed products or connect existing producers to resolve these deficiencies."}),d.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:d.jsx("button",{onClick:o,className:"btn btn-primary",children:"Close"})})]})},q=()=>{const M=n==null?void 0:n.updates,I=M&&M.size>0,C=I?Array.from(M.entries()).sort((T,R)=>f(T[0]).localeCompare(f(R[0]))):[];return d.jsxs("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"20px",maxHeight:"70vh",overflowY:"auto"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"26px"},children:n!=null&&n.success?"":n!=null&&n.solverError||n!=null&&n.error?"":""}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:700},children:n!=null&&n.success?"Computation Complete":n!=null&&n.solverError||n!=null&&n.error?"Solver Error":"No Solution Found"}),d.jsx("div",{style:{color:n!=null&&n.success?"var(--text-secondary)":"#fca5a5",fontSize:"12px",marginTop:"2px"},children:(n==null?void 0:n.message)||(n==null?void 0:n.error)||"An unknown error occurred."})]})]}),!(n!=null&&n.solverError)&&!(n!=null&&n.error)&&d.jsxs("div",{children:[k(`Machine Count Changes (${C.length})`),I?d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",maxHeight:"240px",overflowY:"auto"},children:C.map(([T,R])=>{const P=v(T),z=R-P;return d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",padding:"7px 12px",fontSize:"13px"},children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:500,marginRight:"12px"},children:f(T)}),d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",fontVariantNumeric:"tabular-nums",flexShrink:0},children:[d.jsx("span",{style:{color:"var(--text-secondary)"},children:x(P)}),d.jsx("span",{style:{color:"var(--text-muted)"},children:""}),d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:700},children:x(R)}),d.jsx("span",{style:{color:z>0?"#86efac":"#fca5a5",fontSize:"11px",fontWeight:600,minWidth:"40px",textAlign:"right"},children:z>0?`+${x(z)}`:x(z)})]})]},T)})}):d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No changes  network is already balanced."})]}),d.jsxs("div",{children:[k("Solver Info"),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[!(n!=null&&n.solverError)&&!(n!=null&&n.error)&&w("Nodes Updated",C.length),!(n!=null&&n.solverError)&&!(n!=null&&n.error)&&w("Converged",n!=null&&n.converged?"Yes":"No"),!(n!=null&&n.solverError)&&!(n!=null&&n.error)&&w("Iterations",(n==null?void 0:n.iterations)??""),(n==null?void 0:n.elapsedMs)!=null&&w("Solve Time",`${(n.elapsedMs/1e3).toFixed(2)}s`)]})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[d.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Dismiss"}),I&&d.jsx("button",{onClick:()=>a(n),className:"btn btn-primary",children:"Apply Changes"})]})]})};return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{width:"460px",padding:0,overflow:"hidden"},children:[d.jsx("div",{style:{background:"var(--bg-secondary)",borderBottom:"2px solid var(--border-divider)",padding:"14px 20px"},children:d.jsxs("h2",{className:"modal-title",style:{margin:0},children:[e==="loading"&&" LP Solver",e==="deficiency_confirm"&&" Insufficient Input Supply",e==="results"&&" Results"]})}),e==="loading"&&b(),e==="deficiency_confirm"&&E(),e==="results"&&q()]})})},v8={custom:J4},x8={custom:t3},Ml=e=>typeof e=="number"?e.toFixed(4):"0",El=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:o,styleType:a})=>{const[s,u]=L.useState(""),[c,p]=L.useState(!1),_=c?s:Ml(n),h=()=>{if(!c)return;const k=parseFloat(s);isNaN(k)||o(k),p(!1),u("")},f=a==="input",y=f?"var(--input-bg)":"var(--output-bg)",v=f?"var(--input-border)":"var(--output-border)",x=f?"var(--input-text)":"var(--output-text)";return d.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:y,border:`1px solid ${v}`,borderRadius:"var(--radius-sm)"},children:[d.jsx("div",{style:{color:x,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",Ml(t),"/s"]}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[f?"Current Deficiency:":"Current Excess:"," ",Ml(Math.abs(n)),"/s"]}),d.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:f?"Target Additional Demand:":"Target Excess:"}),d.jsx("input",{type:"text",value:_,onFocus:()=>{p(!0),u(Ml(n))},onChange:k=>u(k.target.value),onBlur:h,onKeyPress:k=>k.key==="Enter"&&h(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),d.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},Ck=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function w8(){const[e,t,n]=b6([]),[o,a,s]=q6([]),[u,c]=L.useState(0),[p,_]=L.useState(!1),[h,f]=L.useState(!1),[y,v]=L.useState(null),[x,k]=L.useState(null),[w,b]=L.useState("product"),[E,q]=L.useState("button"),[M,I]=L.useState(""),[C,T]=L.useState("name_asc"),[R,P]=L.useState("all"),[z,F]=L.useState("all"),[D,X]=L.useState("all"),[N,G]=L.useState(null),[$,re]=L.useState([]),[Y,Q]=L.useState(!1),[ie,H]=L.useState(!1),[J,me]=L.useState("targets"),[W,te]=L.useState(0),[oe,pe]=L.useState(!1),[ue,ve]=L.useState(null),[Ie,Re]=L.useState(""),[je,Te]=L.useState(null),[Pe,Ae]=L.useState("free"),[Ue,Be]=L.useState(!1),[st,at]=L.useState(!1),[It,wt]=L.useState(!1),[bt,lt]=L.useState(!1),[Cr,tr]=L.useState(!1),[At,Ut]=L.useState(!1),[nt,Ar]=L.useState(()=>{const j=Al();return{edgePath:j.edgePath||"orthogonal",edgeStyle:j.edgeStyle||"animated"}}),[Nt,Qr]=L.useState(!1),[rr,Gt]=L.useState(!1),[Xe,vi]=L.useState(!1),[Pt,pn]=L.useState("pan"),[fe,it]=L.useState(0),[Fr,Lr]=L.useState(!1);L.useEffect(()=>{Xe&&rr&&At&&Ut(!1)},[Xe,rr,At]);const[mr,Qn]=L.useState(!0),[Pn,Ft]=L.useState(1),[nr,Kt]=L.useState({}),[dt,Do]=L.useState("perSecond"),[mt,Zi]=L.useState("total"),[Yt,Xr]=L.useState([]),[zt,Bt]=L.useState(null),[Qt,Xt]=L.useState(null),[hr,ar]=L.useState(null),[yr,jt]=L.useState(null),[Zr,sr]=L.useState(null),[Ji,eo]=L.useState({}),[ur,xi]=L.useState(null),[wi,to]=L.useState({}),[Xn,pt]=L.useState("all"),[Rn,_n]=L.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[bi,An]=L.useState([]),[Vo,zo]=L.useState({x:0,y:0}),[gr,Lt]=L.useState(null),Zn=L.useRef(null),qt=L.useRef(null),La=L.useRef(null),Fn=L.useRef(null),qi=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",Ln=L.useRef(null),vr=L.useRef([]),Si=L.useCallback(j=>{const V=j.filter(K=>K.type!=="remove"),B=V.filter(K=>K.type==="position"),O=V.filter(K=>K.type!=="position");B.length>0&&n(B),O.length>0&&(vr.current.push(...O),Ln.current&&clearTimeout(Ln.current),Ln.current=setTimeout(()=>{vr.current.length>0&&(n(vr.current),vr.current=[])},50))},[n]),Bo=L.useCallback(j=>{s(j)},[s]);L.useEffect(()=>{const j=Al();rc(j),Ar({edgePath:j.edgePath||"orthogonal",edgeStyle:j.edgeStyle||"animated"}),g3(Wr,un,kn);const V=()=>{const K="ontouchstart"in window||navigator.maxTouchPoints>0,Z=window.matchMedia("(pointer: coarse)").matches,ae=window.matchMedia("(hover: none)").matches,le=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);vi(K&&Z||K&&ae||le)};V(),window.addEventListener("resize",V);const B=window.matchMedia("(pointer: coarse)"),O=window.matchMedia("(hover: none)");return B.addEventListener("change",V),O.addEventListener("change",V),()=>{window.removeEventListener("resize",V),B.removeEventListener("change",V),O.removeEventListener("change",V)}},[]);const xr=L.useCallback(()=>({onInputClick:Go,onOutputClick:lu,isMobile:Xe,mobileActionMode:Pt,onDrillSettingsChange:so,onLogicAssemblerSettingsChange:uo,onTreeFarmSettingsChange:Mi,onIndustrialFireboxSettingsChange:Ko,onTemperatureSettingsChange:Fc,onBoilerSettingsChange:Lc,onChemicalPlantSettingsChange:Yo,onWasteFacilitySettingsChange:za,onLiquidDumpSettingsChange:cu,onLiquidBurnerSettingsChange:On,onMiddleClick:co,onHandleDoubleClick:Va,onMachineCountModeChange:pu}),[Xe,Pt]);L.useEffect(()=>{f3().catch(O=>{console.error("Failed to initialize save system:",O)});const j=J6();if(!(j!=null&&j.nodes))return;const V=xr(),B=j.nodes.map(O=>{var ae,le,ye,qe;const K=Et((le=(ae=O.data)==null?void 0:ae.recipe)==null?void 0:le.machine_id);let Z=(ye=O.data)==null?void 0:ye.recipe;return K&&Z&&!((qe=Z.outputs)!=null&&qe.some(Ee=>Ee.temperature!==void 0))&&(Z=gs(Z,K.id)),{...O,data:{...O.data,recipe:Z,machine:K,machineCount:O.data.machineCount??1,displayMode:dt,machineDisplayMode:mt,...V,globalPollution:fe,flows:null,suggestions:[]}}});t(B),a(j.edges||[]),re(j.targetProducts||[]),Kt(j.soldProducts||{}),Xr(j.favoriteRecipes||[]),Bt(j.lastDrillConfig||null),Xt(j.lastAssemblerConfig||null),ar(j.lastTreeFarmConfig||null),jt(j.lastFireboxConfig||null),sr(j.lastWasteFacilityConfig||null),c(j.nodeId||0),te(j.targetIdCounter||0)},[]),L.useEffect(()=>{t(j=>{let V=!1;const B=j.map(O=>O.data.displayMode===dt&&O.data.machineDisplayMode===mt&&O.data.zoomLevel===Pn?O:(V=!0,{...O,data:{...O.data,displayMode:dt,machineDisplayMode:mt,zoomLevel:Pn}}));return V?B:j})},[dt,mt,Pn,t]),L.useEffect(()=>{a(j=>{let V=!1;const B=j.map(O=>{var K,Z;return((K=O.data)==null?void 0:K.edgePath)===nt.edgePath&&((Z=O.data)==null?void 0:Z.edgeStyle)===nt.edgeStyle?O:(V=!0,{...O,data:nt})});return V?B:j})},[nt,a]);const Or=L.useCallback(j=>({id:j.id,type:j.type,position:j.position,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,data:{recipe:j.data.recipe,machineCount:j.data.machineCount,machineCountMode:j.data.machineCountMode,cappedMachineCount:j.data.cappedMachineCount,isTarget:j.data.isTarget,leftHandles:j.data.leftHandles,rightHandles:j.data.rightHandles}}),[]);L.useEffect(()=>{const j={nodes:e.map(Or),edges:o,targetProducts:$,nodeId:u,targetIdCounter:W,soldProducts:nr,favoriteRecipes:Yt,lastDrillConfig:zt,lastAssemblerConfig:Qt,lastTreeFarmConfig:hr,lastFireboxConfig:yr,lastWasteFacilityConfig:Zr};localStorage.setItem("industrialist_canvas_state",JSON.stringify(j))},[e,o,$,u,W,nr,Yt,zt,Qt,hr,yr,Zr,Or]);const ki=L.useCallback(()=>{var K,Z;let j=0,V=0,B=0;const O=e.length;for(let ae=0;ae<O;ae++){const le=e[ae],{recipe:ye,machine:qe,machineCount:Ee=0}=le.data||{};if(!ye)continue;const de=typeof ye.pollution=="number"?ye.pollution:parseFloat(ye.pollution);!isNaN(de)&&isFinite(de)&&(V+=de*Ee);const ge=(((K=ye.inputs)==null?void 0:K.length)||0)+(((Z=ye.outputs)==null?void 0:Z.length)||0),xe=Math.ceil(Ee);if((qe==null?void 0:qe.id)==="m_industrial_firebox"){B+=xe*(1+ge*2);continue}if((qe==null?void 0:qe.id)==="m_tree_farm"&&ye.treeFarmSettings){const{trees:Ce,harvesters:De,sprinklers:Ye,controller:ut,outputs:Je}=ye.treeFarmSettings,St=typeof ye.power_consumption=="number"?ye.power_consumption:0;j+=St*Ee;const br=Math.ceil(Ye/3),kt=ye.power_type==="HV"?2:Math.ceil(St/15e5)*2,_o=Ce+De+Ye+br*3+ut+Je*3+kt;B+=xe*_o;continue}const he=ye.power_consumption;let Se=0;typeof he=="number"?(Se=he,j+=he*Ee):typeof he=="object"&&he!==null&&"max"in he&&(Se=he.max,j+=Se*Ee);const Ne=ye.power_type==="HV"?2:Math.ceil(Se/15e5)*2;B+=xe*(1+Ne+ge*2)}return{totalPower:j,totalPollution:V,totalModelCount:B}},[e]),Dr=L.useMemo(()=>ki(),[e]);L.useEffect(()=>{if(mr||Dr.totalPollution===0)return;const j=setInterval(()=>{if(Fr)return;const V=Dr.totalPollution/3600;it(B=>{if(typeof B!="number"||isNaN(B)||!isFinite(B))return B;const O=parseFloat((B+V).toFixed(4));return O!==B?O:B})},1e3);return()=>clearInterval(j)},[Dr.totalPollution,Fr,mr]),L.useEffect(()=>{const j=setInterval(qn,2e4);return()=>clearInterval(j)},[]);const Jr=L.useRef(null),ro=L.useRef(fe);L.useEffect(()=>{if(!(Math.abs(fe-ro.current)<.01))return ro.current=fe,Jr.current&&clearTimeout(Jr.current),Jr.current=setTimeout(()=>{t(j=>{let V=!1;const B=j.map(O=>{const{recipe:K,machine:Z,globalPollution:ae}=O.data||{};if(K!=null&&K.isTreeFarm&&K.treeFarmSettings){const{trees:le,harvesters:ye,sprinklers:qe,outputs:Ee,controller:de}=K.treeFarmSettings,ge=eg(le,ye,fe),xe=Jl(le,ye,qe,Ee,de,fe);return V=!0,{...O,data:{...O.data,recipe:{...K,outputs:ge,power_consumption:xe?xe.avgPowerConsumption:"Variable"},globalPollution:fe}}}if((Z==null?void 0:Z.id)==="m_air_separation_unit"){const le=Ck(fe),ye=K.outputs.map(qe=>qe.product_id==="p_residue"?{...qe,quantity:parseFloat(le.toFixed(6))}:qe);return V=!0,{...O,data:{...O.data,recipe:{...K,outputs:ye},globalPollution:fe}}}return ae!==fe?(V=!0,{...O,data:{...O.data,globalPollution:fe}}):O});return V?B:j})},250),()=>clearTimeout(Jr.current)},[fe,t]);const[We,ot]=L.useState(()=>tw([],[],{skipTemperature:!0})),no=L.useRef(null),Oa=L.useRef(""),io=L.useRef(!1),Ho=L.useRef(null),He=L.useCallback((j="general")=>{Ho.current=j,io.current=!0},[]);L.useEffect(()=>{if(io.current)return no.current&&clearTimeout(no.current),no.current=setTimeout(()=>{const j=`${e.length}-${o.length}-${e.map(V=>{var B,O,K,Z,ae,le,ye,qe,Ee,de,ge,xe,he;return`${V.id}:${(B=V.data)==null?void 0:B.machineCount}:${JSON.stringify(((K=(O=V.data)==null?void 0:O.recipe)==null?void 0:K.temperatureSettings)||{})}:${JSON.stringify(((ae=(Z=V.data)==null?void 0:Z.recipe)==null?void 0:ae.drillSettings)||{})}:${JSON.stringify(((ye=(le=V.data)==null?void 0:le.recipe)==null?void 0:ye.assemblerSettings)||{})}:${JSON.stringify(((Ee=(qe=V.data)==null?void 0:qe.recipe)==null?void 0:Ee.treeFarmSettings)||{})}:${JSON.stringify(((ge=(de=V.data)==null?void 0:de.recipe)==null?void 0:ge.fireboxSettings)||{})}:${JSON.stringify(((he=(xe=V.data)==null?void 0:xe.recipe)==null?void 0:he.chemicalPlantSettings)||{})}`}).join(",")}`;if(j!==Oa.current){const V=Ho.current||"general",B=["connection","node","temperatureSettings","boilerSettings"].includes(V);console.log(`[Recalculation] Reason: ${V}, Temperature propagation: ${B}`);const O=tw(e,o,{skipTemperature:!B,previousTemperatureData:B?null:We==null?void 0:We.temperatureData});ot(O),Oa.current=j}io.current=!1,Ho.current=null},100),()=>clearTimeout(no.current)},[e,o,We]);const Da=L.useMemo(()=>$3(We),[We]),$o=L.useMemo(()=>W3(We),[We]),Jn=L.useRef(null),fn=L.useRef(null),mn=L.useCallback((j,V,B)=>{var le,ye,qe,Ee,de,ge;const O=(le=j.data)==null?void 0:le.recipe,K=V.byNode[j.id];if(j.data.flows===K&&j.data.suggestions===B)return j;const Z=j.data.flows!==K,ae=j.data.suggestions!==B&&(((ye=j.data.suggestions)==null?void 0:ye.length)!==(B==null?void 0:B.length)||JSON.stringify(j.data.suggestions)!==JSON.stringify(B||[]));if(O!=null&&O.isWasteFacility){const xe=Math.min(((qe=K==null?void 0:K.inputFlows[0])==null?void 0:qe.connected)||0,240),he=Math.min(((Ee=K==null?void 0:K.inputFlows[1])==null?void 0:Ee.connected)||0,240),Se=O.wasteFacilitySettings||{};if(!Z&&!ae&&Se.itemFlowRate===xe&&Se.fluidFlowRate===he)return j;const Ne=Rl(xe,he),Ce=tc(xe,he,O.inputs[0].product_id,O.inputs[1].product_id);return{...j,data:{...j.data,recipe:{...O,inputs:Ce,cycle_time:Ne.cycleTime,wasteFacilitySettings:{...Se,itemFlowRate:xe,fluidFlowRate:he}},flows:K||null,suggestions:B||[],zoomLevel:j.data.zoomLevel}}}if(O!=null&&O.isLiquidDump){const xe=((de=j.data)==null?void 0:de.machineCount)||1,he=O.inputs.map((Ne,Ce)=>{var Ye;return Math.min(((Ye=K==null?void 0:K.inputFlows[Ce])==null?void 0:Ye.connected)||0,15*xe)/xe}),Se=Ms(O.inputs,he);return!Z&&!ae&&O.pollution===Se?j:{...j,data:{...j.data,recipe:{...O,pollution:Se},flows:K||null,suggestions:B||[],zoomLevel:j.data.zoomLevel}}}if(O!=null&&O.isLiquidBurner){const xe=((ge=j.data)==null?void 0:ge.machineCount)||1,he=O.inputs.map((Ne,Ce)=>{var Ye;return Math.min(((Ye=K==null?void 0:K.inputFlows[Ce])==null?void 0:Ye.connected)||0,15*xe)/xe}),Se=Es(O.inputs,he);return!Z&&!ae&&O.pollution===Se?j:{...j,data:{...j.data,recipe:{...O,pollution:Se},flows:K||null,suggestions:B||[],zoomLevel:j.data.zoomLevel}}}return!Z&&!ae?j:{...j,data:{...j.data,flows:K||null,suggestions:B||[],zoomLevel:j.data.zoomLevel}}},[]);L.useEffect(()=>{var j;if((j=We==null?void 0:We.flows)!=null&&j.byNode&&fn.current!==We.flows)return fn.current=We.flows,Jn.current&&clearTimeout(Jn.current),Jn.current=setTimeout(()=>{t(V=>{let B=V;We.temperatureData&&(B=y0(V,We.temperatureData,We.graph));let O=!1;const K=B.map(Z=>{const ae=mn(Z,We.flows,We.suggestions);return ae!==Z&&(O=!0),ae});return O?K:V})},250),()=>clearTimeout(Jn.current)},[We,t,mn]);const Vr=L.useMemo(()=>Da.map(j=>{const V=$.some(B=>{var K,Z,ae;const O=e.find(le=>le.id===B.recipeBoxId);return(ae=(Z=(K=O==null?void 0:O.data)==null?void 0:K.recipe)==null?void 0:Z.outputs)==null?void 0:ae.some(le=>le.product_id===j.productId)});return{...j,isSold:nr[j.productId]??(V&&typeof j.product.price=="number"&&j.product.price>1)}}),[Da,nr,$,e]),Ci=L.useMemo(()=>Vr.reduce((j,V)=>V.isSold&&typeof V.product.price=="number"?j+V.product.price*V.excessRate:j,0),[Vr]),oo=L.useMemo(()=>{const j=new Map,V=new Map,B=(K,Z,ae)=>{j.set(K,(j.get(K)||0)+Z),V.has(K)||V.set(K,ae)};e.forEach(K=>{var ye,qe,Ee,de,ge,xe;const{machine:Z,machineCount:ae=0,recipe:le}=K.data||{};if(Z){if(Z.id==="m_tree_farm"&&(le!=null&&le.treeFarmSettings)){const{trees:he,harvesters:Se,sprinklers:Ne,outputs:Ce,controller:De}=le.treeFarmSettings,Ye=Math.ceil(Ne/3);B("m_tree",Math.ceil(he*ae),((ye=Et("m_tree"))==null?void 0:ye.cost)||0),B("m_tree_harvester",Math.ceil(Se*ae),((qe=Et("m_tree_harvester"))==null?void 0:qe.cost)||0),B("m_tree_farm_sprinkler",Math.ceil(Ne*ae),((Ee=Et("m_tree_farm_sprinkler"))==null?void 0:Ee.cost)||0),B("m_tree_farm_water_tank",Math.ceil(Ye*ae),((de=Et("m_tree_farm_water_tank"))==null?void 0:de.cost)||0),B("m_tree_farm_output",Math.ceil(Ce*ae),((ge=Et("m_tree_farm_output"))==null?void 0:ge.cost)||0),B("m_tree_farm_controller",Math.ceil(De*ae),((xe=Et("m_tree_farm_controller"))==null?void 0:xe.cost)||0);return}B(Z.id,Math.ceil(ae),typeof Z.cost=="number"?Z.cost:0)}});const O=Array.from(j.entries()).map(([K,Z])=>{const ae=un.find(ye=>ye.id===K),le=V.get(K);return{machineId:K,machine:ae,count:Z,cost:le,totalCost:Z*le}}).sort((K,Z)=>K.machine.name.localeCompare(Z.machine.name));return{stats:O,totalCost:O.reduce((K,Z)=>K+Z.totalCost,0)}},[e,un]),Ht=(j,V)=>t(B=>B.map(O=>O.id===j?{...O,data:V(O.data)}:O)),Wo=L.useCallback((j,V,B,O)=>{const K=Object.keys(Vs).map(le=>parseInt(le));let Z=null,ae=0;return K.forEach(le=>{const qe=Vs[le].find(Ee=>Ee.product_id===j);if(qe){const Ee=Ro(V,B,O,le);if(Ee){const de=O?1.1:1,ge=qe.quantity*de*Ee.dutyCycle;ge>ae&&(ae=ge,Z=le)}}}),Z},[]),su=L.useCallback((j,V,B)=>{const O={drillConfig:zt,assemblerConfig:Qt,treeFarmConfig:hr,fireboxConfig:yr},K=(We==null?void 0:We.flows)||null;return U3(j,V,B,Wo,O,fe,K)},[zt,Qt,hr,yr,Wo,fe,We]),ao=L.useCallback(j=>{const V=e.find(Z=>Z.id===j.source),B=e.find(Z=>Z.id===j.target);if(!V||!B)return;const O=V.data.recipe.outputs[parseInt(j.sourceHandle.split("-")[1])],K=B.data.recipe.inputs[parseInt(j.targetHandle.split("-")[1])];if(!(!O||!K)){if(K.isAnyProduct){const Z=yt(O.product_id);if(K.acceptedType&&(Z==null?void 0:Z.type)!==K.acceptedType)return;t(ae=>ae.map(le=>{var Ee;if(le.id!==B.id)return le;const ye=parseInt(j.targetHandle.split("-")[1]),qe=[...le.data.recipe.inputs];if(qe[ye]={...qe[ye],product_id:O.product_id,isAnyProduct:!1},le.data.recipe.isWasteFacility){const de=le.data.recipe.wasteFacilitySettings||{},ge=(Ee=We==null?void 0:We.flows)==null?void 0:Ee.byNode[j.source],xe=parseInt(j.sourceHandle.split("-")[1]),he=ge!=null&&ge.outputFlows[xe]?ge.outputFlows[xe].produced-ge.outputFlows[xe].connected:0,Se=Math.min(he,240);ye===0?de.itemFlowRate=Se:ye===1&&(de.fluidFlowRate=Se);const Ne=Rl(de.itemFlowRate||0,de.fluidFlowRate||0),Ce=tc(de.itemFlowRate||0,de.fluidFlowRate||0,ye===0?O.product_id:qe[0].product_id,ye===1?O.product_id:qe[1].product_id);return{...le,data:{...le.data,recipe:{...le.data.recipe,inputs:Ce,cycle_time:Ne.cycleTime,wasteFacilitySettings:de}}}}if(le.data.recipe.isLiquidDump||le.data.recipe.isLiquidBurner){const de=le.data.recipe.isLiquidDump?Ms(qe):Es(qe);return{...le,data:{...le.data,recipe:{...le.data.recipe,inputs:qe,pollution:de}}}}return{...le,data:{...le.data,recipe:{...le.data.recipe,inputs:qe}}}}))}else if(O.product_id!==K.product_id)return;a(Z=>l0({...j,type:"custom",animated:!1,data:nt},Z)),qn(),He("connection")}},[a,e,nt,He,t,We]),Uo=()=>{_(!1),v(null),k(null),b("product"),I(""),T("name_asc"),P("all"),F("all"),G(null),q("button"),eo({}),X("all")},uu=L.useCallback(()=>{_(!0),G(null),q("button")},[]),Go=L.useCallback((j,V,B,O)=>{if(O!=null&&O.ctrlKey){a(Z=>Z.filter(ae=>!(ae.target===V&&ae.targetHandle===`left-${B}`))),qn(),He("connection");return}const K=yt(j);K&&(_(!0),v(K),G({nodeId:V,inputIndex:B,productId:j}),q("rectangle"),F("producers"))},[a,Xe,Pt,He]),lu=L.useCallback((j,V,B,O)=>{var ye,qe;if(O!=null&&O.ctrlKey){a(Ee=>Ee.filter(de=>!(de.source===V&&de.sourceHandle===`right-${B}`))),qn(),He("connection");return}const K=Dn.current.find(Ee=>Ee.id===V),Z=(qe=(ye=K==null?void 0:K.data)==null?void 0:ye.recipe)==null?void 0:qe.machine_id,ae=Z&&_r[Z],le=yt(j);le&&(_(!0),v(le),G({nodeId:V,outputIndex:B,productId:j,isOutput:!0,isFromHeatSource:!!ae}),q("rectangle"),F("consumers"))},[a,Xe,Pt,He]),en=L.useCallback((j,V,B)=>{a(O=>{const K=O.filter(Z=>{var ae,le,ye,qe;if(Z.source===j){const Ee=parseInt(Z.sourceHandle.split("-")[1]);if(Ee>=B.length)return!1;const de=B[Ee],ge=e.find(Se=>Se.id===Z.target);if(!ge)return!1;const xe=parseInt(Z.targetHandle.split("-")[1]),he=(le=(ae=ge.data)==null?void 0:ae.recipe)==null?void 0:le.inputs[xe];if(!he||he.product_id!==de.product_id)return!1}if(Z.target===j){const Ee=parseInt(Z.targetHandle.split("-")[1]);if(Ee>=V.length)return!1;const de=V[Ee],ge=e.find(Se=>Se.id===Z.source);if(!ge)return!1;const xe=parseInt(Z.sourceHandle.split("-")[1]),he=(qe=(ye=ge.data)==null?void 0:ye.recipe)==null?void 0:qe.outputs[xe];if(!he||he.product_id!==de.product_id)return!1}return!0});return K.length!==O.length&&(qn(),He("connection")),K})},[a,e,He]),so=L.useCallback((j,V,B,O)=>{Bt({drillHead:V.drillHead,consumable:V.consumable,machineOil:V.machineOil});const K=V.drillHead&&V.depth?Ro(V.drillHead,V.consumable,V.machineOil,V.depth):null;Ht(j,Z=>({...Z,recipe:{...Z.recipe,inputs:B.length>0?B:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:V,cycle_time:1,power_consumption:K?{max:K.drillingPower*1e6,average:(K.drillingPower*K.lifeTime+K.idlePower*(K.replacementTime+K.travelTime))/K.totalCycleTime*1e6}:"Variable",pollution:K?K.pollution:"Variable"},leftHandles:Math.max(B.length,1),rightHandles:Math.max(O.length,1)})),en(j,B,O),He("settings")},[en,He]),uo=L.useCallback((j,V,B,O)=>{Xt({outerStage:V.outerStage,innerStage:V.innerStage,machineOil:V.machineOil,tickCircuitDelay:V.tickCircuitDelay});const Z=!V.outerStage||!V.innerStage?"":V.outerStage===1?`p_${V.innerStage}x_microchip`:`p_${V.outerStage}x${V.innerStage}x_microchip`,ae=Z?Js(Z,V.machineOil,V.tickCircuitDelay):null;Ht(j,le=>({...le,recipe:{...le.recipe,inputs:B.length>0?B:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:V,cycle_time:ae?ae.cycleTime:"Variable",power_consumption:ae?{max:ae.maxPowerConsumption,average:ae.avgPowerConsumption}:"Variable"},leftHandles:Math.max(B.length,1),rightHandles:Math.max(O.length,1)})),en(j,B,O),He("settings")},[en,He]),Mi=L.useCallback((j,V,B,O)=>{ar({trees:V.trees,harvesters:V.harvesters,sprinklers:V.sprinklers,outputs:V.outputs});const K=Jl(V.trees,V.harvesters,V.sprinklers,V.outputs,V.controller,fe);Ht(j,Z=>({...Z,recipe:{...Z.recipe,inputs:B.length>0?B:[{product_id:"p_water",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:V,cycle_time:1,power_consumption:K?K.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max(B.length,1),rightHandles:Math.max(O.length,1)})),a(Z=>Z.filter(ae=>{if(ae.source===j||ae.target===j){const le=parseInt((ae.source===j?ae.sourceHandle:ae.targetHandle).split("-")[1]);return ae.source===j?le<O.length:le<B.length}return!0})),He("settings")},[a,fe,He]),Ko=L.useCallback((j,V,B,O)=>{jt({fuel:V.fuel}),Ht(j,K=>({...K,recipe:{...K.recipe,inputs:B,fireboxSettings:V,cycle_time:O?O.cycleTime:K.recipe.cycle_time,power_consumption:0}})),He("settings")},[He]),Fc=L.useCallback((j,V,B,O)=>{t(K=>K.map(Z=>{if(Z.id!==j)return Z;const ae=Et(Z.data.recipe.machine_id),le=Kr(ae==null?void 0:ae.id);let ye=Z.data.recipe.power_type;(ae==null?void 0:ae.id)==="m_electric_water_heater"&&(ye=V.temperature>=320?"HV":"MV");let qe={...Z.data.recipe,outputs:B,temperatureSettings:V,power_consumption:O??Z.data.recipe.power_consumption,power_type:ye};if((ae==null?void 0:ae.id)==="m_water_treatment_plant"&&le){const Ee=V.temperature||Mn,de=Wn(ae.id,Ee,1),ge=90*de,xe=17.6,he=17.6;qe={...qe,inputs:qe.inputs.map(Se=>Se.product_id==="p_water"?{...Se,quantity:xe*de,originalQuantity:xe}:Se.product_id==="p_distilled_water"?{...Se,quantity:he*de,originalQuantity:he}:Se),outputs:qe.outputs.map(Se=>Se.product_id==="p_steam"?{...Se,quantity:ge,originalQuantity:90}:Se)}}return{...Z,data:{...Z.data,recipe:qe}}})),He("temperatureSettings")},[t,He]),Lc=L.useCallback((j,V)=>{t(B=>B.map(O=>{if(O.id!==j)return O;const K=Et(O.data.recipe.machine_id),Z=_r[K==null?void 0:K.id];return!Z||Z.type!=="boiler"?O:{...O,data:{...O.data,recipe:{...O.data.recipe,temperatureSettings:V}}}})),He("boilerSettings")},[t,He]),Va=L.useCallback((j,V,B,O,K)=>{const Z=V==="right"?"output":"input",ae=K==null?void 0:K.find(le=>le.nodeId===j&&le.handleType===Z&&le.handleIndex===B);ae&&(t(le=>le.map(ye=>{var ge,xe;if(ye.id!==j)return ye;const qe=((ge=ye.data)==null?void 0:ge.machineCountMode)||"free",Ee=(xe=ye.data)==null?void 0:xe.cappedMachineCount;if(qe==="locked")return console.log(`Node ${j} is locked - suggestion ignored`),ye;let de=ae.suggestedMachineCount;return qe==="capped"&&typeof Ee=="number"&&de>Ee&&(console.log(`Node ${j} is capped at ${Ee} - clamping suggestion from ${de} to ${Ee}`),de=Ee),{...ye,data:{...ye.data,machineCount:de}}})),He("machineCount"))},[t,He]),Yo=L.useCallback((j,V)=>{t(B=>B.map(O=>{if(O.id!==j)return O;const K=Et(O.data.recipe.machine_id);if((K==null?void 0:K.id)!=="m_chemical_plant")return O;const Z=kn.find(le=>le.id===O.data.recipe.id);if(!Z)return O;const ae=A4(Z,V.speedFactor,V.efficiencyFactor);return{...O,data:{...O.data,recipe:ae}}})),He("settings")},[t,He]),za=L.useCallback((j,V,B,O)=>{sr({itemProductId:V.itemProductId,fluidProductId:V.fluidProductId}),t(K=>K.map(Z=>{if(Z.id!==j)return Z;const ae=Z.data.recipe.wasteFacilitySettings||{},le=ae.itemFlowRate||0,ye=ae.fluidFlowRate||0,qe=Rl(le,ye);return{...Z,data:{...Z.data,recipe:{...Z.data.recipe,inputs:B.length>0?B:Z.data.recipe.inputs,wasteFacilitySettings:{...V,itemFlowRate:le,fluidFlowRate:ye},cycle_time:qe.cycleTime},leftHandles:Math.max(B.length,1)}}})),en(j,B,O),He("settings")},[en,He,t]),cu=L.useCallback((j,V,B,O)=>{t(K=>K.map(Z=>Z.id!==j?Z:{...Z,data:{...Z.data,recipe:{...Z.data.recipe,inputs:B.length>0?B:Z.data.recipe.inputs,liquidDumpSettings:V,pollution:Ms(B)},leftHandles:Math.max(B.length,1)}})),en(j,B,O),He("settings")},[en,He,t]),On=L.useCallback((j,V,B,O)=>{t(K=>K.map(Z=>Z.id!==j?Z:{...Z,data:{...Z.data,recipe:{...Z.data.recipe,inputs:B.length>0?B:Z.data.recipe.inputs,liquidBurnerSettings:V,pollution:Es(B)},leftHandles:Math.max(B.length,1)}})),en(j,B,O),He("settings")},[en,He,t]),zr=L.useCallback((j,V=null)=>{var ge,xe;const B=Et(j.machine_id);if(!B||!j.inputs||!j.outputs){alert("Error: Invalid machine or recipe data");return}let O=gs(j,B.id);const K=`node-${u}`,Z=N?e.find(he=>he.id===N.nodeId):null;let ae;if(Z)ae={x:Z.position.x+(N.isOutput?400:-400),y:Z.position.y};else if(qt.current&&Zn.current){const he=Zn.current.getBoundingClientRect(),Se=qt.current.screenToFlowPosition({x:he.left+he.width/2,y:he.top+he.height/2}),Ne=320,Ce=300,De=50;let Ye={x:Se.x-Ne/2,y:Se.y-Ce/2},ut=0;for(;ut<20&&e.some(kt=>{const _o=Math.abs(kt.position.x-Ye.x),gu=Math.abs(kt.position.y-Ye.y);return _o<Ne+De&&gu<Ce+De});){const St=ut/20*Math.PI*2,br=100+ut*50;Ye={x:Se.x-Ne/2+Math.cos(St)*br,y:Se.y-Ce/2+Math.sin(St)*br},ut++}ae=Ye}else ae={x:Math.random()*400+100,y:Math.random()*300+100};if(((ge=_r[B.id])==null?void 0:ge.type)==="boiler"){const he={heatLoss:((xe=O.temperatureSettings)==null?void 0:xe.heatLoss)??0,coolantTemp:Gi},Se=J0(B.id,he,Gi,null,Gi),Ne=_r[B.id],Ce=PM(O.outputs,Se,!0,Ne,Gi);O={...O,outputs:Ce,temperatureSettings:he}}const ye={drillConfig:zt,assemblerConfig:Qt,treeFarmConfig:hr,fireboxConfig:yr};if(LM(O)&&(O=FM(O,N,y,ye,fe,Wo),O.drillSettings&&Bt({drillHead:O.drillSettings.drillHead,consumable:O.drillSettings.consumable,machineOil:O.drillSettings.machineOil}),O.assemblerSettings&&Xt({outerStage:O.assemblerSettings.outerStage,innerStage:O.assemblerSettings.innerStage,machineOil:O.assemblerSettings.machineOil,tickCircuitDelay:O.assemblerSettings.tickCircuitDelay}),O.treeFarmSettings&&ar({trees:O.treeFarmSettings.trees,harvesters:O.treeFarmSettings.harvesters,sprinklers:O.treeFarmSettings.sprinklers,outputs:O.treeFarmSettings.outputs}),O.fireboxSettings&&jt({fuel:O.fireboxSettings.fuel})),B.id==="m_air_separation_unit"){const he=Ck(fe),Se=O.outputs.map(Ne=>Ne.product_id==="p_residue"?{...Ne,quantity:parseFloat(he.toFixed(6))}:Ne);O={...O,outputs:Se}}const qe=V!==null?V:Ji[j.id]??1,Ee=xr(),de={id:K,type:"custom",position:ae,data:{recipe:O,machine:B,machineCount:qe,machineCountMode:"free",cappedMachineCount:void 0,displayMode:dt,machineDisplayMode:mt,leftHandles:Math.max(O.inputs.length,1),rightHandles:Math.max(O.outputs.length,1),...Ee,globalPollution:fe,isTarget:!1,flows:null,suggestions:[],zoomLevel:Pn},sourcePosition:"right",targetPosition:"left"};return t(he=>{const Se=[...he,de];return He("node"),N&&qe>0&&setTimeout(()=>{var De,Ye,ut;const Ne=N.isOutput?"inputs":"outputs";let Ce=-1;if((O.isWasteFacility||O.id==="r_underground_waste_facility")&&!N.isOutput)N.productId==="p_concrete_block"?Ce=2:N.productId==="p_lead_ingot"?Ce=3:Ce=O[Ne].findIndex(Je=>Je.product_id===N.productId);else if(N.isOutput&&N.isFromHeatSource){const Je=Et(O.machine_id);if(Je&&((De=_r[Je.id])==null?void 0:De.type)==="boiler"&&O.inputs.length>=2){const br=(Ye=O.inputs[0])==null?void 0:Ye.product_id,kt=(ut=O.inputs[1])==null?void 0:ut.product_id;br===kt&&kt===N.productId||kt===N.productId?Ce=1:Ce=O[Ne].findIndex(_o=>_o.product_id===N.productId)}else Ce=O[Ne].findIndex(br=>br.product_id===N.productId)}else Ce=O[Ne].findIndex(Je=>Je.product_id===N.productId);if(Ce!==-1){const Je=N.isOutput?N.outputIndex:Ce,St=N.isOutput?Ce:N.inputIndex,br={source:N.isOutput?N.nodeId:K,sourceHandle:`right-${Je}`,target:N.isOutput?K:N.nodeId,targetHandle:`left-${St}`,type:"custom",animated:!1,data:nt};a(kt=>l0(br,kt)),qn(),He("connection")}},50),Se}),c(he=>he+1),He(),K},[u,e,t,a,dt,mt,zt,Qt,hr,yr,Wo,Ji,fe,y,He,N,nt,xr]),hn=L.useCallback(j=>{t(V=>V.filter(B=>B.id!==j)),a(V=>V.filter(B=>B.source!==j&&B.target!==j)),re(V=>V.filter(B=>B.recipeBoxId!==j)),qn(),He("node")},[t,a,He]),Qo=L.useCallback(j=>{var B;$.find(O=>O.recipeBoxId===j.id)?(re(O=>O.filter(K=>K.recipeBoxId!==j.id)),t(O=>O.map(K=>K.id===j.id?{...K,data:{...K.data,isTarget:!1}}:K))):(B=j.data)!=null&&B.recipe&&(re(O=>[...O,{id:`target_${W}`,recipeBoxId:j.id}]),te(O=>O+1),t(O=>O.map(K=>K.id===j.id?{...K,data:{...K.data,isTarget:!0}}:K)))},[$,W,t]),ei=L.useCallback((j,V,B,O)=>{var Ne;const K=$.find(Ce=>Ce.id===j);if(!K)return;const Z=e.find(Ce=>Ce.id===K.recipeBoxId);if(!Z)return;const{recipe:ae,machine:le,machineCount:ye=0}=Z.data||{};if(!ae)return;const qe=ae.isMineshaftDrill||ae.id==="r_mineshaft_drill";let Ee=ae.cycle_time;if((typeof Ee!="number"||Ee<=0)&&(Ee=1),Kr(le==null?void 0:le.id)){const Ce=ln[le.id];if((Ce==null?void 0:Ce.type)==="steam_input"&&fi(ae)){const De=ae.tempDependentInputTemp??Mn;Ee=Wn(le.id,De,Ee)}}(typeof Ee!="number"||Ee<=0)&&(Ee=1);const ge=(Ne=We==null?void 0:We.flows)==null?void 0:Ne.byNode[K.recipeBoxId];if(!ge)return;let xe=0,he=0;if(V==="output"){const Ce=ge.outputFlows[B];if(!Ce)return;xe=Ce.connected;const De=ae.outputs[B],Ye=De.originalQuantity!==void 0?De.originalQuantity:De.quantity;he=qe?Ye:Ye/Ee}else{const Ce=ge.inputFlows[B];if(!Ce)return;xe=Ce.connected;const De=ae.inputs[B];he=qe?De.quantity:De.quantity/Ee}if(he<=0)return;const Se=(xe+O)/he;Ht(K.recipeBoxId,Ce=>({...Ce,machineCount:Se})),He("machineCount")},[$,e,We,He]),lo=L.useCallback(j=>{const V=$.find(B=>B.id===j);V&&(re(B=>B.filter(O=>O.id!==j)),Ht(V.recipeBoxId,B=>({...B,isTarget:!1})))},[$]),du=L.useCallback((j,V)=>{if(Xe){if(Pt==="target"){Qo(V);return}else if(Pt==="delete"){hn(V.id);return}}j.shiftKey&&!j.ctrlKey&&!j.altKey?Qo(V):j.ctrlKey&&j.altKey&&hn(V.id)},[Xe,Pt,Qo,hn]),wr=L.useCallback((j,V)=>{var B,O;j.stopPropagation(),ve(V.id),Re(String(((B=V.data)==null?void 0:B.machineCount)??0)),Ae(((O=V.data)==null?void 0:O.machineCountMode)||"free"),pe(!0)},[]),Dn=L.useRef(e),Ba=L.useRef(o);L.useEffect(()=>{Dn.current=e},[e]),L.useEffect(()=>{Ba.current=o},[o]);const co=L.useCallback(j=>{const V=Dn.current.find(B=>B.id===j);V&&xi({recipe:{...V.data.recipe},machine:V.data.machine,machineCount:V.data.machineCount})},[]),Oc=L.useCallback(j=>{if(!Zn.current)return;const V=Zn.current.getBoundingClientRect();zo({x:j.clientX-V.left,y:j.clientY-V.top})},[]),Ha=L.useCallback(j=>{if(!ur||j.button!==0||(j.stopPropagation(),!qt.current))return;const V=qt.current.screenToFlowPosition({x:j.clientX,y:j.clientY});V.x-=160,V.y-=150;const B=`node-${u}`,O=xr(),K={id:B,type:"custom",position:V,data:{recipe:ur.recipe,machine:ur.machine,machineCount:ur.machineCount,displayMode:dt,machineDisplayMode:mt,leftHandles:ur.recipe.inputs.length,rightHandles:ur.recipe.outputs.length,...O,globalPollution:fe,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(Z=>[...Z,K]),c(Z=>Z+1),xi(null),He("node")},[ur,u,dt,mt,fe,t,xr,He]),$a=L.useCallback(j=>{j.button===2&&xi(null)},[]),ti=L.useCallback((j=!1)=>{var B,O;let V=parseFloat(Ie);if(isNaN(V)||V<0){if(je){alert("Machine count must be 0 or greater. Please enter a valid number.");return}V=0}if(ue&&!je){const K=e.find(le=>le.id===ue),Z=((B=K==null?void 0:K.data)==null?void 0:B.machineCount)||0;let ae=(O=K==null?void 0:K.data)==null?void 0:O.cappedMachineCount;if(Pe==="capped"?ae=V:Pe==="free"&&(ae=void 0),j&&Z>0&&V!==Z){const le=Fl(e,o),ye=We==null?void 0:We.flows;if(ye){const qe=Y3(ue,Z,V,le,ye,e);t(Ee=>Ee.map(de=>{const ge=qe.get(de.id);return de.id===ue?{...de,data:{...de.data,machineCount:V,machineCountMode:Pe,cappedMachineCount:ae}}:ge!==void 0?{...de,data:{...de.data,machineCount:ge}}:de}))}else Ht(ue,qe=>({...qe,machineCount:V,machineCountMode:Pe,cappedMachineCount:ae}))}else Ht(ue,le=>({...le,machineCount:V,machineCountMode:Pe,cappedMachineCount:ae}))}else je&&Ht(je,K=>({...K,machineCount:V}));pe(!1),ve(null),Re(""),Ae("free"),Te(null),He("machineCount")},[ue,Ie,Pe,je,e,o,We,t,hn,He]),po=L.useCallback(()=>{je&&(hn(je),_(!0),v(null),k(null),b("product")),pe(!1),ve(null),Re(""),Ae("free"),Te(null)},[je,hn]),pu=L.useCallback((j,V,B)=>{let O,K;V==="free"?(O="capped",K=B):V==="capped"?(O="locked",K=B):(O="free",K=void 0),t(Z=>Z.map(ae=>ae.id!==j?ae:{...ae,data:{...ae.data,machineCountMode:O,cappedMachineCount:K}}))},[t]),Dc=L.useCallback(()=>{const j=h8(e,o);t(j)},[e,o,t]),Vc=L.useCallback(()=>{if($.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}const j=e.map(Z=>{var ae;return{id:Z.id,data:{recipe:Z.data.recipe,machineCount:Z.data.machineCount,machineName:((ae=Z.data.machine)==null?void 0:ae.name)||""}}}),V=Date.now();Lt({phase:"loading",nodeSnapshot:j});const B=e.map(Z=>({id:Z.id,data:{recipe:Z.data.recipe,machine:Z.data.machine,machineCount:Z.data.machineCount,machineCountMode:Z.data.machineCountMode,cappedMachineCount:Z.data.cappedMachineCount}})),O=o.map(Z=>({id:Z.id,source:Z.source,target:Z.target,sourceHandle:Z.sourceHandle,targetHandle:Z.targetHandle})),K=new Worker(new URL("/Industrialist-Production-Calculator/assets/lpWorker-DXpFlKww.js",import.meta.url),{type:"module"});Fn.current=K,K.onmessage=Z=>{Fn.current=null,K.terminate();const ae=Date.now()-V,{result:le,deficiencyResult:ye}=Z.data,qe={...le,elapsedMs:ae},Ee=ye?{...ye,elapsedMs:ae}:null;if(!le.success&&le.hasDeficiency){Lt(de=>({...de,phase:"deficiency_confirm",result:qe,deficiencyResult:Ee}));return}Lt(de=>({...de,phase:"results",result:qe}))},K.onerror=Z=>{Fn.current=null,K.terminate(),Lt(null),console.error("[LP Worker] Error:",Z),alert("An error occurred while computing. Check the console for details.")},K.postMessage({nodes:B,edges:O,targetProducts:$,activeWeights:Rn,unusedWeights:bi,machines:un})},[$,e,o,Rn,bi,t,He]),zc=L.useCallback(()=>{Fn.current&&(Fn.current.terminate(),Fn.current=null),Lt(null)},[]),Wa=L.useCallback(()=>{Lt(j=>j?{...j,phase:"results",result:j.deficiencyResult}:null)},[]),Bc=L.useCallback(j=>{j!=null&&j.success&&(t(V=>V.map(B=>{const O=j.updates.get(B.id);return O!==void 0?{...B,data:{...B.data,machineCount:O}}:B})),He("machineCount")),Lt(null)},[t,He]),Hc=L.useCallback(j=>{qt.current&&qt.current.fitView({nodes:[{id:j}],padding:.6,duration:600,maxZoom:1.5})},[]),_u=()=>{if(!y)return[];const j=yt(y.id),V=C3(y.id),B=k3(y.id),O=[V1,H1,$1,b0,k0,M0],K=O.filter(le=>K3(le.id).includes(y.id)),Z=O.filter(le=>{if(G3(le.id).includes(y.id))return!0;if(j){if(le.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(y.id);if(le.id==="r_liquid_dump"||le.id==="r_liquid_burner")return!1}return!1}),ae=O.filter(le=>le.id==="r_liquid_dump"||le.id==="r_liquid_burner"?(j==null?void 0:j.type)==="fluid":le.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(y.id):!1);return z==="producers"?[...V,...K]:z==="consumers"?[...B,...Z]:z==="disposal"?ae:Array.from(new Map([...V,...B,...K,...Z,...ae].map(le=>[le.id,le])).values())};L.useEffect(()=>{if(p){const j=w==="product"?_u():kl(x==null?void 0:x.id),V=N?e.find(O=>O.id===N.nodeId):null,B={};j.forEach(O=>{B[O.id]=su(O,V,N)}),eo(B)}},[p,w,y,x,N,e,z]);const ri=L.useCallback(()=>{t([]),a([]),c(0),re([]),te(0),Kt({}),Bt(null),Xt(null),ar(null),jt(null),sr(null),qn()},[t,a,c,re,te,Kt,Bt,Xt,ar,jt,sr]),$c=L.useCallback(()=>{const j=document.createElement("input");j.type="file",j.accept=".json",j.onchange=V=>{var K;const B=(K=V.target.files)==null?void 0:K[0];if(!B)return;const O=new FileReader;O.onload=Z=>{try{const ae=JSON.parse(Z.target.result);if(!ae.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const le=ae.canvas.nodes||[],ye=[];if(le.forEach(de=>{var xe,he,Se,Ne,Ce,De,Ye,ut;const ge=(he=(xe=de.data)==null?void 0:xe.recipe)==null?void 0:he.machine_id;ge&&!Et(ge)&&ye.push(`Machine: ${ge}`),(Ce=(Ne=(Se=de.data)==null?void 0:Se.recipe)==null?void 0:Ne.inputs)==null||Ce.forEach(Je=>{Je.product_id!=="p_variableproduct"&&!yt(Je.product_id)&&ye.push(`Product: ${Je.product_id}`)}),(ut=(Ye=(De=de.data)==null?void 0:De.recipe)==null?void 0:Ye.outputs)==null||ut.forEach(Je=>{Je.product_id!=="p_variableproduct"&&!yt(Je.product_id)&&ye.push(`Product: ${Je.product_id}`)})}),ye.length>0){const de=[...new Set(ye)];alert(`Cannot import canvas - missing items:
${de.slice(0,10).join(`
`)}${de.length>10?`
...and ${de.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const qe=xr(),Ee=le.map(de=>{var he,Se,Ne,Ce;const ge=Et((Se=(he=de.data)==null?void 0:he.recipe)==null?void 0:Se.machine_id);let xe=(Ne=de.data)==null?void 0:Ne.recipe;return ge&&xe&&!((Ce=xe.outputs)!=null&&Ce.some(De=>De.temperature!==void 0))&&(xe=gs(xe,ge.id)),{...de,data:{...de.data,recipe:xe,machine:ge,machineCount:de.data.machineCount??1,displayMode:dt,machineDisplayMode:mt,...qe,globalPollution:fe,flows:null,suggestions:[]}}});ri(),setTimeout(()=>{t(Ee),a(ae.canvas.edges||[]),re(ae.canvas.targetProducts||[]),Kt(ae.canvas.soldProducts||{}),Xr(ae.canvas.favoriteRecipes||[]),Bt(ae.canvas.lastDrillConfig||null),Xt(ae.canvas.lastAssemblerConfig||null),ar(ae.canvas.lastTreeFarmConfig||null),jt(ae.canvas.lastFireboxConfig||null),sr(ae.canvas.lastWasteFacilityConfig||null),c(ae.canvas.nodeId||0),te(ae.canvas.targetIdCounter||0),qn(),He("node")},50),alert("Canvas imported successfully!")}catch(ae){alert(`Import failed: ${ae.message}`)}},O.readAsText(B)},j.click()},[dt,mt,fe,xr,ri,t,a,re,Kt,Xr,Bt,Xt,ar,jt,sr,c,te,He]),fu=L.useCallback(j=>{var O;const V=(O=j.target.files)==null?void 0:O[0];if(!V)return;const B=new FileReader;B.onload=K=>{var Z,ae;try{const le=JSON.parse(K.target.result),ye=le.products||le.machines||le.recipes,qe=le.canvas;if(ye){const Ee=new Map((le.products||[]).map(Se=>[Se.id,Se])),de=Array.from(Ee.values()),ge=new Set(((Z=le.machines)==null?void 0:Z.map(Se=>Se.id))||[]),xe=(le.recipes||[]).filter(Se=>ge.has(Se.machine_id)),he=[...Wr];if(de.forEach(Se=>{const Ne=he.findIndex(Ce=>Ce.id===Se.id);Ne>=0?he[Ne]=Se:he.push(Se)}),f0(he),((ae=le.machines)==null?void 0:ae.length)>0){const Se=[...un],Ne=new Set(le.machines.map(De=>De.id)),Ce=kn.filter(De=>!Ne.has(De.machine_id));le.machines.forEach(De=>{const Ye=Se.findIndex(ut=>ut.id===De.id);Ye>=0?Se[Ye]=De:Se.push(De)}),m0(Se),h0([...Ce,...xe])}if(!qe){alert("Data import successful!"),window.location.reload();return}}if(qe){const Ee=le.canvas.nodes||[],de=[];if(Ee.forEach(he=>{var Ne,Ce,De,Ye,ut,Je,St,br;const Se=(Ce=(Ne=he.data)==null?void 0:Ne.recipe)==null?void 0:Ce.machine_id;Se&&!Et(Se)&&de.push(`Machine: ${Se}`),(ut=(Ye=(De=he.data)==null?void 0:De.recipe)==null?void 0:Ye.inputs)==null||ut.forEach(kt=>{kt.product_id!=="p_variableproduct"&&!yt(kt.product_id)&&de.push(`Product: ${kt.product_id}`)}),(br=(St=(Je=he.data)==null?void 0:Je.recipe)==null?void 0:St.outputs)==null||br.forEach(kt=>{kt.product_id!=="p_variableproduct"&&!yt(kt.product_id)&&de.push(`Product: ${kt.product_id}`)})}),de.length>0){const he=[...new Set(de)];alert(`Cannot import canvas - missing items:
${he.slice(0,10).join(`
`)}${he.length>10?`
...and ${he.length-10} more`:""}`),j.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){j.target.value="";return}const ge=xr(),xe=Ee.map(he=>{var Ce,De,Ye,ut;const Se=Et((De=(Ce=he.data)==null?void 0:Ce.recipe)==null?void 0:De.machine_id);let Ne=(Ye=he.data)==null?void 0:Ye.recipe;return Se&&Ne&&!((ut=Ne.outputs)!=null&&ut.some(Je=>Je.temperature!==void 0))&&(Ne=gs(Ne,Se.id)),{...he,data:{...he.data,recipe:Ne,machine:Se,machineCount:he.data.machineCount??1,displayMode:dt,machineDisplayMode:mt,...ge,globalPollution:fe,flows:null,suggestions:[]}}});ri(),setTimeout(()=>{t(xe),a(le.canvas.edges||[]),re(le.canvas.targetProducts||[]),Kt(le.canvas.soldProducts||{}),Xr(le.canvas.favoriteRecipes||[]),Bt(le.canvas.lastDrillConfig||null),Xt(le.canvas.lastAssemblerConfig||null),ar(le.canvas.lastTreeFarmConfig||null),jt(le.canvas.lastFireboxConfig||null),sr(le.canvas.lastWasteFacilityConfig||null),c(le.canvas.nodeId||0),te(le.canvas.targetIdCounter||0),qn(),He("node")},50),alert("Canvas import successful!")}}catch(le){alert(`Import failed: ${le.message}`)}},B.readAsText(V),j.target.value=""},[dt,mt,fe,xr,ri,t,a,re,Kt,Xr,Bt,Xt,ar,c,te]);L.useCallback(()=>{const j=new Blob([JSON.stringify({products:Wr,machines:un,recipes:kn},null,2)],{type:"application/json"}),V=URL.createObjectURL(j),B=document.createElement("a");B.href=V,B.download=`industrialist-data-${Date.now()}.json`,B.click(),URL.revokeObjectURL(V)},[Wr,un,kn]);const Wc=L.useCallback(()=>{const j={nodes:e.map(Or),edges:o,targetProducts:$,nodeId:u,targetIdCounter:W,soldProducts:nr,favoriteRecipes:Yt,lastDrillConfig:zt,lastAssemblerConfig:Qt,lastTreeFarmConfig:hr,lastFireboxConfig:yr,lastWasteFacilityConfig:Zr},V=new Blob([JSON.stringify({canvas:j},null,2)],{type:"application/json"}),B=URL.createObjectURL(V),O=document.createElement("a");O.href=B,O.download=`industrialist-canvas-${Date.now()}.json`,O.click(),URL.revokeObjectURL(B)},[e,o,$,u,W,nr,Yt,zt,Qt,hr,yr,Zr,Or]);L.useCallback(()=>{const j=new Blob([JSON.stringify({products:Wr,machines:un,recipes:kn,canvas:{nodes:e.map(Or),edges:o,targetProducts:$,nodeId:u,targetIdCounter:W,soldProducts:nr,favoriteRecipes:Yt,lastDrillConfig:zt,lastAssemblerConfig:Qt,lastTreeFarmConfig:hr,lastFireboxConfig:yr,lastWasteFacilityConfig:Zr}},null,2)],{type:"application/json"}),V=URL.createObjectURL(j),B=document.createElement("a");B.href=V,B.download=`industrialist-export-${Date.now()}.json`,B.click(),URL.revokeObjectURL(V)},[e,o,$,u,W,nr,Yt,zt,Qt,hr,yr,Or]);const Uc=L.useCallback(()=>{const j=ja(),V=Ta(),B=eu();f0(j),m0(V),h0(B),He("node")},[He]),Gc=L.useCallback(j=>{const V=xr(),B=j.nodes.map(O=>{var ae,le,ye,qe;const K=Et((le=(ae=O.data)==null?void 0:ae.recipe)==null?void 0:le.machine_id);let Z=(ye=O.data)==null?void 0:ye.recipe;return K&&Z&&!((qe=Z.outputs)!=null&&qe.some(Ee=>Ee.temperature!==void 0))&&(Z=gs(Z,K.id)),{...O,data:{...O.data,recipe:Z,machine:K,machineCount:O.data.machineCount??1,displayMode:dt,machineDisplayMode:mt,...V,globalPollution:fe,flows:null,suggestions:[]}}});ri(),setTimeout(()=>{t(B),a(j.edges||[]),re(j.targetProducts||[]),Kt(j.soldProducts||{}),Xr(j.favoriteRecipes||[]),Bt(j.lastDrillConfig||null),Xt(j.lastAssemblerConfig||null),ar(j.lastTreeFarmConfig||null),jt(j.lastFireboxConfig||null),sr(j.lastWasteFacilityConfig||null),c(j.nodeId||0),te(j.targetIdCounter||0),qn(),He("node")},50)},[dt,mt,fe,xr,ri,t,a,re,Kt,Xr,Bt,Xt,ar,jt,sr,c,te,He]),Kc=L.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(t4(),x3(Yl),w3(Ql),b3(Xl),t([]),a([]),c(0),re([]),te(0),Kt({}),Bt(null),Xt(null),ar(null),jt(null),sr(null),window.location.reload())},[t,a,Wr,un,kn]);L.useEffect(()=>{const j=V=>{if(V.key==="industrialist_theme")try{const B=JSON.parse(V.newValue);Ar({edgePath:B.edgePath||"orthogonal",edgeStyle:B.edgeStyle||"animated"})}catch(B){console.error("Error parsing theme from storage:",B)}};return window.addEventListener("storage",j),()=>window.removeEventListener("storage",j)},[]),L.useEffect(()=>{if(!st){const j=Al();Ar({edgePath:j.edgePath||"orthogonal",edgeStyle:j.edgeStyle||"animated"})}},[st]);const Ua=Wr.filter(j=>j.name.toLowerCase().includes(M.toLowerCase())&&(R==="all"||j.type===R)).sort((j,V)=>C==="name_asc"?j.name.localeCompare(V.name):C==="name_desc"?V.name.localeCompare(j.name):C==="price_asc"?(j.price==="Variable"?1/0:j.price)-(V.price==="Variable"?1/0:V.price):C==="price_desc"?(V.price==="Variable"?-1/0:V.price)-(j.price==="Variable"?-1/0:j.price):C==="rp_asc"?(j.rp_multiplier==="Variable"?1/0:j.rp_multiplier)-(V.rp_multiplier==="Variable"?1/0:V.rp_multiplier):(V.rp_multiplier==="Variable"?-1/0:V.rp_multiplier)-(j.rp_multiplier==="Variable"?-1/0:j.rp_multiplier)),mu=un.filter(j=>{const V=j.name.toLowerCase().includes(M.toLowerCase()),B=j.id==="m_mineshaft_drill"||j.id==="m_logic_assembler"||j.id==="m_tree_farm"||j.id==="m_underground_waste_facility"||j.id==="m_liquid_dump"||j.id==="m_liquid_burner"||kl(j.id).length>0,O=D==="all"||j.tier!==void 0&&j.tier.toString()===D;return V&&B&&O}).sort((j,V)=>j.name.localeCompare(V.name)),Yc=j=>{if(j.id==="m_mineshaft_drill")zr(V1,1);else if(j.id==="m_logic_assembler")zr(H1,1);else if(j.id==="m_tree_farm")zr($1,1);else if(j.id==="m_underground_waste_facility")zr(b0,1);else if(j.id==="m_liquid_dump")zr(k0,1);else if(j.id==="m_liquid_burner")zr(M0,1);else{k(j);return}Uo()},hu=(w==="product"?_u():kl(x==null?void 0:x.id)).sort((j,V)=>{const B=Yt.includes(j.id),O=Yt.includes(V.id);if(B&&!O)return-1;if(!B&&O)return 1;const K=Et(j.machine_id),Z=Et(V.machine_id);return((K==null?void 0:K.name)||"").localeCompare((Z==null?void 0:Z.name)||"")}),yu=j=>{Xr(V=>V.includes(j)?V.filter(B=>B!==j):[...V,j])};return d.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[d.jsxs(w6,{ref:Zn,nodes:e,edges:o,onNodesChange:Si,onEdgesChange:Bo,onConnect:ao,onNodeClick:du,onNodeDoubleClick:wr,onMouseMove:Oc,onClick:Ha,onContextMenu:$a,onInit:j=>{qt.current=j,Ft(j.getZoom())},onMoveEnd:(j,V)=>{Ft(V.zoom)},nodeTypes:v8,edgeTypes:x8,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:nt.edgePath==="straight"?"straight":nt.edgePath==="orthogonal"?"smoothstep":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:nt.edgeStyle==="animated"||nt.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[d.jsx(E6,{color:"#333",gap:16,size:1}),!Xe&&d.jsx(A6,{className:(At||Nt)&&!rr?"controls-shifted":"",position:"bottom-left"}),!Xe&&d.jsx(K6,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),d.jsx(Ia,{position:"top-left",style:{margin:Xe?"5px":"10px",maxWidth:Xe?"calc(100vw - 10px)":"none"},children:d.jsx("div",{className:`left-panel-container ${rr?"collapsed":""}`,style:Xe?{maxWidth:"100%"}:{},children:d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[d.jsxs("div",{className:"stats-panel",children:[d.jsx("h3",{className:"stats-title",children:qi}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Power:"}),d.jsx("div",{className:"stat-value",children:Rp(Dr.totalPower)})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Pollution:"}),d.jsxs("div",{className:"stat-value",style:{color:Dr.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Dr.totalPollution.toFixed(2),"%/hr"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Min Models:"}),d.jsx("div",{className:"stat-value",children:Dr.totalModelCount.toFixed(0)})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Profit:"}),d.jsxs("div",{className:"stat-value",style:{color:Ci>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",kr(Ci),"/s"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Cost:"}),d.jsxs("div",{className:"stat-value",children:["$",kr(oo.totalCost)]})]})]})]}),d.jsxs("div",{className:"flex-col action-buttons-container",children:[d.jsx("button",{onClick:uu,className:"btn btn-primary",children:"+ Select Recipe"}),d.jsx("button",{onClick:()=>{H(!0),me("targets")},className:"btn btn-secondary",children:"View Recipes"}),d.jsx("button",{onClick:Vc,className:"btn btn-secondary",disabled:gr!==null,children:gr!==null?"Computing...":"Compute Machines"}),d.jsx("button",{onClick:Dc,className:"btn btn-secondary",children:"Auto Layout"}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:()=>Ut(!At),className:"btn btn-secondary btn-square",title:At?"Close more statistics":"Open more statistics",children:At?"":""}),d.jsx("button",{onClick:()=>Gt(!rr),className:"btn btn-secondary btn-square btn-panel-toggle",title:rr?"Show left panel":"Hide left panel",children:rr?"":""})]})]})]}),(At||Nt)&&d.jsxs("div",{className:`extended-panel ${Nt?"closing":""}`,children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Xe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Xe?"wrap":"nowrap",gap:Xe?"10px":"0"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Xe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Xe&&d.jsx("button",{onClick:()=>Ut(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),d.jsxs("div",{style:{display:"flex",gap:Xe?"5px":"10px",flexWrap:"wrap"},children:[d.jsx("button",{onClick:()=>Do(j=>j==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Xe?"6px 10px":"8px 16px",fontSize:Xe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:dt==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:dt==="perSecond"?"Per Second":"Per Cycle"}),d.jsx("button",{onClick:()=>Zi(j=>j==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Xe?"6px 10px":"8px 16px",fontSize:Xe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:mt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:mt==="perMachine"?"Per Machine":"Total"})]})]}),d.jsxs("div",{className:"extended-panel-content",children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("button",{onClick:()=>Qn(j=>!j),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:mr?"Resume pollution change":"Pause pollution change",children:mr?"":""}),d.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:fe,onFocus:()=>Lr(!0),onBlur:j=>{Lr(!1);const V=j.target.value,B=parseFloat(V);it(!isNaN(B)&&isFinite(B)?parseFloat(B.toFixed(4)):0)},onChange:j=>it(j.target.value===""?"":parseFloat(j.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Vr.length===0?d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Vr.map(j=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:j.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:j.product.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[kr(j.excessRate),"/s"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof j.product.price=="number"&&d.jsxs("div",{style:{color:j.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",kr(j.product.price*j.excessRate),"/s"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[d.jsx("input",{type:"checkbox",checked:j.isSold,onChange:V=>Kt(B=>({...B,[j.productId]:V.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},j.productId))})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),$o.length===0?d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:$o.map(j=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:j.product.name}),d.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",kr(j.deficiencyRate),"/s"]})]}),d.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[j.affectedNodes.length," node",j.affectedNodes.length!==1?"s":""," affected"]})]},j.productId))})]})]})]})]})})}),d.jsxs(Ia,{position:"top-right",style:{margin:Xe?"5px":"10px",maxWidth:Xe?"calc(100vw - 10px)":"none"},children:[Xe&&d.jsxs("div",{className:"mobile-controls-container",children:[d.jsx("button",{onClick:()=>pn(j=>j==="target"?"pan":"target"),className:`btn ${Pt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),d.jsx("button",{onClick:()=>pn(j=>j==="delete"?"pan":"delete"),className:`btn ${Pt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),d.jsxs("div",{className:`menu-container ${Ue?"":"closed"}`,style:Xe?{maxWidth:"calc(100vw - 10px)"}:{},children:[d.jsx("button",{onClick:()=>Be(!Ue),className:"btn btn-secondary btn-menu-toggle",style:Xe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:Ue?">":"<"}),d.jsxs("div",{className:"menu-buttons",style:Xe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[d.jsx("button",{onClick:()=>{ri(),He("node")},className:"btn btn-secondary",children:"Clear All"}),d.jsx("button",{onClick:()=>lt(!0),className:"btn btn-secondary",children:"Saves"}),d.jsx("button",{onClick:()=>tr(!0),className:"btn btn-secondary",children:"Data"}),d.jsx("button",{onClick:Kc,className:"btn btn-secondary",children:"Restore Defaults"}),d.jsx("button",{onClick:()=>at(!0),className:"btn btn-secondary",children:"Theme Editor"}),d.jsx("button",{onClick:()=>wt(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),d.jsx("input",{ref:La,type:"file",accept:".json",style:{display:"none"},onChange:fu}),(oe||h)&&d.jsx("div",{className:"modal-overlay",onClick:po,children:oe&&d.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"450px"},children:[d.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[d.jsx("button",{onClick:()=>{const j=["free","capped","locked"],B=(j.indexOf(Pe)+1)%j.length,O=j[B];Ae(O)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:Pe==="locked"?"#ef4444":Pe==="capped"?"#f59e0b":"var(--bg-secondary)",color:Pe==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${Pe==="free"?"Free (LP/suggestions can change)":Pe==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:Pe==="free"?" Free":Pe==="capped"?" Cap":" Lock"}),d.jsx("input",{type:"number",min:"0",step:"0.1",value:Ie,onChange:j=>Re(j.target.value),onKeyPress:j=>{j.key==="Enter"&&ti(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),d.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[Pe==="free"&&"Free: LP solver and suggestions can modify this count",Pe==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Ie)||0} (the value when Apply is pressed)`,Pe==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ue&&!je&&d.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:d.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),d.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:po,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),d.jsx("button",{onClick:()=>ti(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ue&&!je&&d.jsx("button",{onClick:()=>ti(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),p&&d.jsx("div",{className:"modal-overlay",onClick:Uo,children:d.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),children:[d.jsx("h2",{className:"modal-title",children:y?`Recipes for ${y.name}`:x?`Recipes for ${x.name}`:"Select Product or Machine"}),!y&&!x?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mb-lg",children:d.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[d.jsx("button",{onClick:()=>b("product"),className:`btn ${w==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),d.jsx("button",{onClick:()=>b("machine"),className:`btn ${w==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),w==="product"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-lg flex-col",children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:M,onChange:j=>I(j.target.value),className:"input"}),d.jsxs("div",{className:"flex-row",children:[d.jsxs("select",{value:R,onChange:j=>P(j.target.value),className:"select",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"item",children:"Items Only"}),d.jsx("option",{value:"fluid",children:"Fluids Only"})]}),d.jsxs("select",{value:C,onChange:j=>T(j.target.value),className:"select",children:[d.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),d.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),d.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),d.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),d.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),d.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[d.jsxs("div",{className:"product-table-header",children:[d.jsx("div",{children:"Product"}),d.jsx("div",{className:"text-right",children:"Price"}),d.jsx("div",{className:"text-right",children:"RP Mult"})]}),Ua.map(j=>d.jsxs("div",{onClick:()=>v(j),className:"product-row",children:[d.jsxs("div",{children:[d.jsx("div",{className:"product-name",children:j.name}),d.jsx("div",{className:"product-type",children:j.type==="item"?" Item":" Fluid"})]}),d.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:j.price==="Variable"?"Variable":`${kr(j.price)}`}),d.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:j.rp_multiplier==="Variable"?"Variable":j.rp_multiplier>=1e3?`${kr(j.rp_multiplier)}x`:`${j.rp_multiplier.toFixed(1)}x`})]},j.id))]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[d.jsx("input",{type:"text",placeholder:"Search machines...",value:M,onChange:j=>I(j.target.value),className:"input",style:{flex:3}}),d.jsxs("select",{value:D,onChange:j=>X(j.target.value),className:"select",style:{flex:1},children:[d.jsx("option",{value:"all",children:"All Tiers"}),d.jsx("option",{value:"1",children:"Tier 1"}),d.jsx("option",{value:"2",children:"Tier 2"}),d.jsx("option",{value:"3",children:"Tier 3"}),d.jsx("option",{value:"4",children:"Tier 4"}),d.jsx("option",{value:"5",children:"Tier 5"})]})]}),d.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:mu.length===0?d.jsx("div",{className:"empty-state",children:"No machines found"}):mu.map(j=>d.jsxs("div",{onClick:()=>Yc(j),className:"recipe-card",style:{cursor:"pointer"},children:[d.jsx("div",{className:"recipe-machine",style:{color:j.tier===1?"var(--tier-1-color)":j.tier===2?"var(--tier-2-color)":j.tier===3?"var(--tier-3-color)":j.tier===4?"var(--tier-4-color)":(j.tier===5,"var(--tier-5-color)")},children:j.name}),d.jsx("div",{className:"recipe-details",style:{color:"#999"},children:j.id==="m_mineshaft_drill"||j.id==="m_logic_assembler"||j.id==="m_tree_farm"?"Click to create box":`${kl(j.id).length} recipe(s)`})]},j.id))})]})]}):d.jsxs(d.Fragment,{children:[E==="button"&&d.jsx("button",{onClick:()=>{v(null),k(null)},className:"btn btn-secondary btn-back",children:" Back"}),y&&d.jsx("div",{className:"mb-lg",children:d.jsxs("select",{value:z,onChange:j=>F(j.target.value),className:"select",children:[d.jsx("option",{value:"all",children:"All Recipes"}),d.jsxs("option",{value:"producers",children:["Producers (Outputs ",y.name,")"]}),d.jsxs("option",{value:"consumers",children:["Consumers (Uses ",y.name,")"]}),d.jsx("option",{value:"disposal",children:"Disposal"})]})}),d.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:hu.length===0?d.jsx("div",{className:"empty-state",children:"No recipes found"}):hu.map(j=>{const V=Et(j.machine_id),B=Yt.includes(j.id),O=Ji[j.id]??1;return V&&j.inputs&&j.outputs?d.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsx("button",{onClick:K=>{K.stopPropagation(),yu(j.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:B?"none":"grayscale(100%)",opacity:B?1:.4,transition:"all 0.2s"},onMouseEnter:K=>{K.currentTarget.style.transform="scale(1.2)",K.currentTarget.style.opacity="1"},onMouseLeave:K=>{K.currentTarget.style.transform="scale(1)",K.currentTarget.style.opacity=B?"1":"0.4"},title:B?"Remove from favorites":"Add to favorites",children:""}),d.jsx("div",{onClick:K=>{K.stopPropagation();const Z=O<=0?1:O,ae=zr(j,Z);f(!0),_(!1),setTimeout(()=>{Te(ae),ve(ae),Re(String(Z)),pe(!0),f(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:N&&O<=0?"var(--delete-bg)":"var(--color-primary)",color:N&&O<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:N&&O<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:K=>{N&&O<=0?(K.currentTarget.style.background="var(--delete-hover-bg)",K.currentTarget.style.color="var(--delete-hover-color)"):(K.currentTarget.style.background="var(--color-primary-hover)",K.currentTarget.style.transform="scale(1.05)",K.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:K=>{N&&O<=0?(K.currentTarget.style.background="var(--delete-bg)",K.currentTarget.style.color="var(--delete-color)"):(K.currentTarget.style.background="var(--color-primary)",K.currentTarget.style.transform="scale(1)",K.currentTarget.style.borderColor="transparent")},title:N?O<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(O)?O:O.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(O)?O:O.toFixed(2)}),d.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:K=>{if(K.stopPropagation(),O<=0){const ae=zr(j,1);f(!0),_(!1),setTimeout(()=>{Te(ae),ve(ae),Re("1"),pe(!0),f(!1)},50)}else zr(j),Uo()},children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[d.jsx("div",{className:"recipe-machine",style:{color:V.tier===1?"var(--tier-1-color)":V.tier===2?"var(--tier-2-color)":V.tier===3?"var(--tier-3-color)":V.tier===4?"var(--tier-4-color)":(V.tier===5,"var(--tier-5-color)")},children:V.name}),j.power_type==="HV"&&d.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),d.jsxs("div",{className:"recipe-details",children:[d.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),d.jsx("span",{children:j.inputs.map(K=>L1(K,yt)).join(", ")})]}),d.jsxs("div",{className:"recipe-details",children:[d.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),d.jsx("span",{children:j.outputs.map(K=>L1(K,yt)).join(", ")})]})]})]},j.id):null})})]}),d.jsx("button",{onClick:Uo,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),Y&&d.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:d.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[d.jsx("h2",{className:"modal-title",children:"Target Products"}),d.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:$.length===0?d.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):$.map(j=>{var Ee;const V=e.find(de=>de.id===j.recipeBoxId);if(!V)return null;const{recipe:B,machine:O,machineCount:K=0}=V.data||{};if(!B)return null;let Z=B.cycle_time;if((typeof Z!="number"||Z<=0)&&(Z=1),Kr(O==null?void 0:O.id)){const de=ln[O.id];if((de==null?void 0:de.type)==="steam_input"&&fi(B)){const ge=B.tempDependentInputTemp??Mn;Z=Wn(O.id,ge,Z)}}(typeof Z!="number"||Z<=0)&&(Z=1);const le=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=(Ee=We==null?void 0:We.flows)==null?void 0:Ee.byNode[j.recipeBoxId],qe={inputs:{},outputs:{}};return B.inputs.forEach((de,ge)=>{var xe;if(typeof de.quantity=="number"){const Se=(le?de.quantity:de.quantity/Z)*K,Ne=((xe=ye==null?void 0:ye.inputFlows[ge])==null?void 0:xe.connected)||0;qe.inputs[ge]={totalRate:Se,connectedFlow:Ne,deficiency:Math.max(0,Se-Ne)}}}),B.outputs.forEach((de,ge)=>{var he;const xe=de.quantity;if(typeof xe=="number"){const Ne=(le?xe:xe/Z)*K,Ce=((he=ye==null?void 0:ye.outputFlows[ge])==null?void 0:he.connected)||0;qe.outputs[ge]={totalRate:Ne,connectedFlow:Ce,excess:Math.max(0,Ne-Ce)}}}),d.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:B.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",K.toFixed(4)]})]}),d.jsx("button",{onClick:()=>lo(j.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),B.inputs.map((de,ge)=>{const xe=qe.inputs[ge];return xe?d.jsx(El,{productName:pi(de.product_id,yt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:he=>ei(j.id,"input",ge,he),styleType:"input"},ge):null})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),B.outputs.map((de,ge)=>{const xe=qe.outputs[ge];return xe?d.jsx(El,{productName:pi(de.product_id,yt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:he=>ei(j.id,"output",ge,he),styleType:"output"},ge):null})]})]})]},j.id)})}),d.jsx("button",{onClick:()=>Q(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),ie&&d.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:d.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[d.jsx("h2",{className:"modal-title",children:"Recipes"}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[d.jsx("button",{onClick:()=>me("targets"),className:J==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:J==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),d.jsx("button",{onClick:()=>me("canvas"),className:J==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:J==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),J==="canvas"&&d.jsx("div",{style:{marginBottom:"15px"},children:d.jsxs("select",{value:Xn,onChange:j=>pt(j.target.value),className:"select",style:{width:"100%"},children:[d.jsx("option",{value:"all",children:"All Recipes"}),d.jsx("option",{value:"excess",children:"Has Excess"}),d.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),d.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:J==="targets"?d.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[d.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),d.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsx("button",{onClick:()=>{_n(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),An([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Objective Priority (Top = Highest)"}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[...Rn,...bi].map(V=>{const B=Rn.includes(V),O=V==="Deficiencies",K=Rn.indexOf(V),Z=Rn.length,ae=Z>1?K/(Z-1):0,le=Math.round(239-205*ae),ye=Math.round(68+129*ae),qe=Math.round(68+26*ae),Ee=B?`rgb(${le}, ${ye}, ${qe})`:"var(--border-light)",de=B&&!O&&K>1,ge=B&&!O&&K<Z-1,xe=()=>{_n(Ce=>{const De=[...Ce],Ye=De.indexOf(V);return[De[Ye-1],De[Ye]]=[De[Ye],De[Ye-1]],De})},he=()=>{_n(Ce=>{const De=[...Ce],Ye=De.indexOf(V);return[De[Ye+1],De[Ye]]=[De[Ye],De[Ye+1]],De})},Se=()=>{B?(_n(Ce=>Ce.filter(De=>De!==V)),An(Ce=>[...Ce,V])):(An(Ce=>Ce.filter(De=>De!==V)),_n(Ce=>[...Ce,V]))},Ne={width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-primary)",background:"var(--bg-main)",color:"var(--text-primary)",cursor:"pointer",fontSize:"14px",lineHeight:1,flexShrink:0,transition:"opacity 0.15s",padding:0};return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"7px 10px",background:"var(--bg-secondary)",border:`2px solid ${Ee}`,borderRadius:"var(--radius-sm)",opacity:B?1:.5,transition:"opacity 0.2s, border-color 0.2s"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[d.jsx("button",{onClick:xe,disabled:!de,style:{...Ne,opacity:de?1:.25,cursor:de?"pointer":"default"},title:"Move up",children:""}),d.jsx("button",{onClick:he,disabled:!ge,style:{...Ne,opacity:ge?1:.25,cursor:ge?"pointer":"default"},title:"Move down",children:""})]}),d.jsx("span",{style:{flex:1,fontWeight:600,fontSize:"var(--font-size-sm)",color:B?"var(--text-primary)":"var(--text-secondary)",userSelect:"none"},children:V}),d.jsx("button",{onClick:O?void 0:Se,disabled:O,title:O?"Deficiencies must always be active":B?"Disable":"Enable",style:{...Ne,width:"52px",fontSize:"11px",fontWeight:600,opacity:O?.25:1,cursor:O?"default":"pointer",color:B?"#fca5a5":"#86efac",borderColor:B?"rgba(239,68,68,0.4)":"rgba(34,197,94,0.4)"},children:O?"":B?"Disable":"Enable"})]},V)})})]})]})]}),d.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),d.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),d.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:$.length===0?d.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):$.map(j=>{var Ee;const V=e.find(de=>de.id===j.recipeBoxId);if(!V)return null;const{recipe:B,machine:O,machineCount:K=0}=V.data||{};if(!B)return null;let Z=B.cycle_time;if((typeof Z!="number"||Z<=0)&&(Z=1),Kr(O==null?void 0:O.id)){const de=ln[O.id];if((de==null?void 0:de.type)==="steam_input"&&fi(B)){const ge=B.tempDependentInputTemp??Mn;Z=Wn(O.id,ge,Z)}}(typeof Z!="number"||Z<=0)&&(Z=1);const le=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=(Ee=We==null?void 0:We.flows)==null?void 0:Ee.byNode[j.recipeBoxId],qe={inputs:{},outputs:{}};return B.inputs.forEach((de,ge)=>{var xe;if(typeof de.quantity=="number"){const Se=(le?de.quantity:de.quantity/Z)*K,Ne=((xe=ye==null?void 0:ye.inputFlows[ge])==null?void 0:xe.connected)||0;qe.inputs[ge]={totalRate:Se,connectedFlow:Ne,deficiency:Math.max(0,Se-Ne)}}}),B.outputs.forEach((de,ge)=>{var he;const xe=de.quantity;if(typeof xe=="number"){const Ne=(le?xe:xe/Z)*K,Ce=((he=ye==null?void 0:ye.outputFlows[ge])==null?void 0:he.connected)||0;qe.outputs[ge]={totalRate:Ne,connectedFlow:Ce,excess:Math.max(0,Ne-Ce)}}}),d.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:B.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",K.toFixed(4)]})]}),d.jsx("button",{onClick:()=>lo(j.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),B.inputs.map((de,ge)=>{const xe=qe.inputs[ge];return xe?d.jsx(El,{productName:pi(de.product_id,yt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:he=>ei(j.id,"input",ge,he),styleType:"input"},ge):null})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),B.outputs.map((de,ge)=>{const xe=qe.outputs[ge];return xe?d.jsx(El,{productName:pi(de.product_id,yt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:he=>ei(j.id,"output",ge,he),styleType:"output"},ge):null})]})]})]},j.id)})})]})]}):d.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?d.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(j=>{var ye;if(Xn==="all")return!0;const{recipe:V,machineCount:B=0}=j.data||{};if(!V)return!1;let O=V.cycle_time;(typeof O!="number"||O<=0)&&(O=1);const K=(ye=We==null?void 0:We.flows)==null?void 0:ye.byNode[j.id];if(!K)return!1;const Z=V.isMineshaftDrill||V.id==="r_mineshaft_drill";let ae=!1,le=!1;return V.inputs.forEach((qe,Ee)=>{var de;if(typeof qe.quantity=="number"){const xe=(Z?qe.quantity:qe.quantity/O)*B,he=((de=K.inputFlows[Ee])==null?void 0:de.connected)||0;Math.max(0,xe-he)>.001&&(le=!0)}}),V.outputs.forEach((qe,Ee)=>{var ge;const de=qe.originalQuantity!==void 0?qe.originalQuantity:qe.quantity;if(typeof de=="number"){const he=(Z?de:de/O)*B,Se=((ge=K.outputFlows[Ee])==null?void 0:ge.connected)||0;Math.max(0,he-Se)>.001&&(ae=!0)}}),Xn==="excess"?ae:Xn==="deficiency"?le:!0}).map(j=>{const{recipe:V,machine:B,machineCount:O=0,machineCountMode:K="free",cappedMachineCount:Z}=j.data||{};if(!V||!B)return null;let ae=V.cycle_time;if((typeof ae!="number"||ae<=0)&&(ae=1),Kr(B==null?void 0:B.id)){const de=ln[B.id];if((de==null?void 0:de.type)==="steam_input"&&fi(V)){const ge=V.tempDependentInputTemp??Mn;ae=Wn(B.id,ge,ae)}}const ye=V.power_consumption;let qe="Variable";typeof ye=="number"?qe=Rp(ye*O):typeof ye=="object"&&ye!==null&&"max"in ye&&(qe=`${Rp(ye.max*O)} (max)`);const Ee=typeof V.pollution=="number"?V.pollution*O:0;return d.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:V.name}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("div",{style:{color:B.tier===1?"var(--tier-1-color)":B.tier===2?"var(--tier-2-color)":B.tier===3?"var(--tier-3-color)":B.tier===4?"var(--tier-4-color)":(B.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:B.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",kr(Math.ceil(O)*(typeof B.cost=="number"?B.cost:0))]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof ae=="number"?`${ae.toFixed(2)}s`:"Variable"]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",qe]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",Ee.toFixed(2),"%/hr"]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),V.inputs.map((de,ge)=>{var Je,St;const xe=V.isMineshaftDrill||V.id==="r_mineshaft_drill",he=de.quantity,Ne=(typeof he=="number"?xe?he:he/ae:0)*O,Ce=(Je=We==null?void 0:We.flows)==null?void 0:Je.byNode[j.id],De=((St=Ce==null?void 0:Ce.inputFlows[ge])==null?void 0:St.connected)||0,ut=Math.max(0,Ne-De)>.001;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:ut?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:ut?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),d.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:pi(de.product_id,yt)}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof he=="number"?kr(Ne):"Var","/s"]})]},ge)})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),V.outputs.map((de,ge)=>{var Je,St;const xe=V.isMineshaftDrill||V.id==="r_mineshaft_drill",he=de.originalQuantity!==void 0?de.originalQuantity:de.quantity,Ne=(typeof he=="number"?xe?he:he/ae:0)*O,Ce=(Je=We==null?void 0:We.flows)==null?void 0:Je.byNode[j.id],De=((St=Ce==null?void 0:Ce.outputFlows[ge])==null?void 0:St.connected)||0,ut=Math.max(0,Ne-De)>.001;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:ut?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:ut?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),d.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:pi(de.product_id,yt)}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof he=="number"?kr(Ne):"Var","/s"]})]},ge)})]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[d.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),d.jsx("input",{type:"number",min:"0",step:"0.1",value:wi[j.id]!==void 0?wi[j.id]:O.toFixed(2),onFocus:()=>{to(de=>({...de,[j.id]:O.toFixed(2)}))},onChange:de=>{to(ge=>({...ge,[j.id]:de.target.value}))},onBlur:()=>{const de=parseFloat(wi[j.id]);!isNaN(de)&&de>=0&&(Ht(j.id,ge=>({...ge,machineCount:de})),He("machineCount")),to(ge=>{const xe={...ge};return delete xe[j.id],xe})},onKeyPress:de=>{de.key==="Enter"&&de.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),d.jsx("button",{onClick:()=>{const de=["free","capped","locked"],xe=(de.indexOf(K)+1)%de.length,he=de[xe];t(Se=>Se.map(Ne=>Ne.id!==j.id?Ne:{...Ne,data:{...Ne.data,machineCountMode:he,cappedMachineCount:he==="free"?void 0:O}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:K==="locked"?"#ef4444":K==="capped"?"#f59e0b":"var(--bg-secondary)",color:K==="free"?"var(--text-primary)":"#fff",border:K==="free"?"2px solid var(--border-primary)":"none"},title:K==="free"?"Free: LP/suggestions can change":K==="capped"?`Capped: Max ${(Z==null?void 0:Z.toFixed(2))||O.toFixed(2)}`:"Locked: Cannot be changed",children:K==="free"?" Free":K==="capped"?" Cap":" Lock"}),d.jsx("button",{onClick:()=>{qt.current&&(qt.current.fitView({nodes:[{id:j.id}],padding:.5,duration:500}),H(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},j.id)})})})}),d.jsx("button",{onClick:()=>H(!1),className:"btn btn-secondary",children:"Close"})]})}),gr&&d.jsx(g8,{phase:gr.phase,nodeSnapshot:gr.nodeSnapshot,result:gr.result,deficiencyResult:gr.deficiencyResult,onCancel:zc,onConfirmDeficiency:Wa,onApply:Bc,onLocateNode:Hc}),st&&d.jsx(i3,{onClose:()=>at(!1)}),It&&d.jsx(o3,{onClose:()=>wt(!1)}),bt&&d.jsx(m3,{onClose:()=>lt(!1),onLoad:Gc,currentCanvas:{nodes:e.map(Or),edges:o,targetProducts:$,nodeId:u,targetIdCounter:W,soldProducts:nr,favoriteRecipes:Yt,lastDrillConfig:zt,lastAssemblerConfig:Qt,lastTreeFarmConfig:hr,lastFireboxConfig:yr,lastWasteFacilityConfig:Zr},onImport:$c,onExportCanvas:Wc}),Cr&&d.jsx(M3,{onClose:()=>tr(!1),defaultProducts:Yl,defaultMachines:Ql,defaultRecipes:Xl,onDataChange:Uc}),Xe&&Pt!=="pan"&&d.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Pt==="target"&&" Target Mode: Tap nodes to mark as targets",Pt==="delete"&&" Delete Mode: Tap nodes to delete"]}),ur&&d.jsxs("div",{className:"pending-node-preview",style:{left:`${Vo.x+20}px`,top:`${Vo.y+20}px`},children:[d.jsx("div",{className:"pending-node-recipe-name",children:ur.recipe.name}),d.jsx("div",{className:"pending-node-machine-name",children:ur.machine.name}),d.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",ur.machineCount]}),d.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}H5.createRoot(document.getElementById("root")).render(d.jsx(Mk.StrictMode,{children:d.jsx(w8,{})}));

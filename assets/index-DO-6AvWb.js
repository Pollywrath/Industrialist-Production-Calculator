(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function hs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dx(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var ad={exports:{}},$a={},sd={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef;function Ox(){if(ef)return Xe;ef=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function h(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function S(L,G,ce){this.props=L,this.context=G,this.refs=k,this.updater=ce||x}S.prototype.isReactComponent={},S.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},S.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function b(){}b.prototype=S.prototype;function E(L,G,ce){this.props=L,this.context=G,this.refs=k,this.updater=ce||x}var M=E.prototype=new b;M.constructor=E,w(M,S.prototype),M.isPureReactComponent=!0;var q=Array.isArray,R=Object.prototype.hasOwnProperty,C={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function P(L,G,ce){var ue,pe={},ye=null,ge=null;if(G!=null)for(ue in G.ref!==void 0&&(ge=G.ref),G.key!==void 0&&(ye=""+G.key),G)R.call(G,ue)&&!j.hasOwnProperty(ue)&&(pe[ue]=G[ue]);var le=arguments.length-2;if(le===1)pe.children=ce;else if(1<le){for(var ve=Array(le),we=0;we<le;we++)ve[we]=arguments[we+2];pe.children=ve}if(L&&L.defaultProps)for(ue in le=L.defaultProps,le)pe[ue]===void 0&&(pe[ue]=le[ue]);return{$$typeof:e,type:L,key:ye,ref:ge,props:pe,_owner:C.current}}function V(L,G){return{$$typeof:e,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function X(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function F(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return G[ce]})}var D=/\/+/g;function te(L,G){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):G.toString(36)}function T(L,G,ce,ue,pe){var ye=typeof L;(ye==="undefined"||ye==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(ye){case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case e:case n:ge=!0}}if(ge)return ge=L,pe=pe(ge),L=ue===""?"."+te(ge,0):ue,q(pe)?(ce="",L!=null&&(ce=L.replace(D,"$&/")+"/"),T(pe,G,ce,"",function(we){return we})):pe!=null&&(X(pe)&&(pe=V(pe,ce+(!pe.key||ge&&ge.key===pe.key?"":(""+pe.key).replace(D,"$&/")+"/")+L)),G.push(pe)),1;if(ge=0,ue=ue===""?".":ue+":",q(L))for(var le=0;le<L.length;le++){ye=L[le];var ve=ue+te(ye,le);ge+=T(ye,G,ce,ve,pe)}else if(ve=h(L),typeof ve=="function")for(L=ve.call(L),le=0;!(ye=L.next()).done;)ye=ye.value,ve=ue+te(ye,le++),ge+=T(ye,G,ce,ve,pe);else if(ye==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ge}function Y(L,G,ce){if(L==null)return L;var ue=[],pe=0;return T(L,ue,"","",function(ye){return G.call(ce,ye,pe++)}),ue}function W(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var Z={current:null},$={transition:null},H={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:$,ReactCurrentOwner:C};function J(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:Y,forEach:function(L,G,ce){Y(L,function(){G.apply(this,arguments)},ce)},count:function(L){var G=0;return Y(L,function(){G++}),G},toArray:function(L){return Y(L,function(G){return G})||[]},only:function(L){if(!X(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Xe.Component=S,Xe.Fragment=r,Xe.Profiler=s,Xe.PureComponent=E,Xe.StrictMode=o,Xe.Suspense=_,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Xe.act=J,Xe.cloneElement=function(L,G,ce){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ue=w({},L.props),pe=L.key,ye=L.ref,ge=L._owner;if(G!=null){if(G.ref!==void 0&&(ye=G.ref,ge=C.current),G.key!==void 0&&(pe=""+G.key),L.type&&L.type.defaultProps)var le=L.type.defaultProps;for(ve in G)R.call(G,ve)&&!j.hasOwnProperty(ve)&&(ue[ve]=G[ve]===void 0&&le!==void 0?le[ve]:G[ve])}var ve=arguments.length-2;if(ve===1)ue.children=ce;else if(1<ve){le=Array(ve);for(var we=0;we<ve;we++)le[we]=arguments[we+2];ue.children=le}return{$$typeof:e,type:L.type,key:pe,ref:ye,props:ue,_owner:ge}},Xe.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:c,_context:L},L.Consumer=L},Xe.createElement=P,Xe.createFactory=function(L){var G=P.bind(null,L);return G.type=L,G},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(L){return{$$typeof:d,render:L}},Xe.isValidElement=X,Xe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:W}},Xe.memo=function(L,G){return{$$typeof:f,type:L,compare:G===void 0?null:G}},Xe.startTransition=function(L){var G=$.transition;$.transition={};try{L()}finally{$.transition=G}},Xe.unstable_act=J,Xe.useCallback=function(L,G){return Z.current.useCallback(L,G)},Xe.useContext=function(L){return Z.current.useContext(L)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(L){return Z.current.useDeferredValue(L)},Xe.useEffect=function(L,G){return Z.current.useEffect(L,G)},Xe.useId=function(){return Z.current.useId()},Xe.useImperativeHandle=function(L,G,ce){return Z.current.useImperativeHandle(L,G,ce)},Xe.useInsertionEffect=function(L,G){return Z.current.useInsertionEffect(L,G)},Xe.useLayoutEffect=function(L,G){return Z.current.useLayoutEffect(L,G)},Xe.useMemo=function(L,G){return Z.current.useMemo(L,G)},Xe.useReducer=function(L,G,ce){return Z.current.useReducer(L,G,ce)},Xe.useRef=function(L){return Z.current.useRef(L)},Xe.useState=function(L){return Z.current.useState(L)},Xe.useSyncExternalStore=function(L,G,ce){return Z.current.useSyncExternalStore(L,G,ce)},Xe.useTransition=function(){return Z.current.useTransition()},Xe.version="18.3.1",Xe}var tf;function ys(){return tf||(tf=1,sd.exports=Ox()),sd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Bx(){if(nf)return $a;nf=1;var e=ys(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(d,_,f){var g,m={},h=null,x=null;f!==void 0&&(h=""+f),_.key!==void 0&&(h=""+_.key),_.ref!==void 0&&(x=_.ref);for(g in _)o.call(_,g)&&!c.hasOwnProperty(g)&&(m[g]=_[g]);if(d&&d.defaultProps)for(g in _=d.defaultProps,_)m[g]===void 0&&(m[g]=_[g]);return{$$typeof:n,type:d,key:h,ref:x,props:m,_owner:s.current}}return $a.Fragment=r,$a.jsx=l,$a.jsxs=l,$a}var rf;function Ax(){return rf||(rf=1,ad.exports=Bx()),ad.exports}var u=Ax(),z=ys();const Xl=hs(z);var Cl={},ld={exports:{}},ki={},ud={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of;function $x(){return of||(of=1,(function(e){function n($,H){var J=$.length;$.push(H);e:for(;0<J;){var L=J-1>>>1,G=$[L];if(0<s(G,H))$[L]=H,$[J]=G,J=L;else break e}}function r($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var H=$[0],J=$.pop();if(J!==H){$[0]=J;e:for(var L=0,G=$.length,ce=G>>>1;L<ce;){var ue=2*(L+1)-1,pe=$[ue],ye=ue+1,ge=$[ye];if(0>s(pe,J))ye<G&&0>s(ge,pe)?($[L]=ge,$[ye]=J,L=ye):($[L]=pe,$[ue]=J,L=ue);else if(ye<G&&0>s(ge,J))$[L]=ge,$[ye]=J,L=ye;else break e}}return H}function s($,H){var J=$.sortIndex-H.sortIndex;return J!==0?J:$.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var _=[],f=[],g=1,m=null,h=3,x=!1,w=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M($){for(var H=r(f);H!==null;){if(H.callback===null)o(f);else if(H.startTime<=$)o(f),H.sortIndex=H.expirationTime,n(_,H);else break;H=r(f)}}function q($){if(k=!1,M($),!w)if(r(_)!==null)w=!0,W(R);else{var H=r(f);H!==null&&Z(q,H.startTime-$)}}function R($,H){w=!1,k&&(k=!1,b(P),P=-1),x=!0;var J=h;try{for(M(H),m=r(_);m!==null&&(!(m.expirationTime>H)||$&&!F());){var L=m.callback;if(typeof L=="function"){m.callback=null,h=m.priorityLevel;var G=L(m.expirationTime<=H);H=e.unstable_now(),typeof G=="function"?m.callback=G:m===r(_)&&o(_),M(H)}else o(_);m=r(_)}if(m!==null)var ce=!0;else{var ue=r(f);ue!==null&&Z(q,ue.startTime-H),ce=!1}return ce}finally{m=null,h=J,x=!1}}var C=!1,j=null,P=-1,V=5,X=-1;function F(){return!(e.unstable_now()-X<V)}function D(){if(j!==null){var $=e.unstable_now();X=$;var H=!0;try{H=j(!0,$)}finally{H?te():(C=!1,j=null)}}else C=!1}var te;if(typeof E=="function")te=function(){E(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,Y=T.port2;T.port1.onmessage=D,te=function(){Y.postMessage(null)}}else te=function(){S(D,0)};function W($){j=$,C||(C=!0,te())}function Z($,H){P=S(function(){$(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,W(R))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var J=h;h=H;try{return $()}finally{h=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=h;h=$;try{return H()}finally{h=J}},e.unstable_scheduleCallback=function($,H,J){var L=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?L+J:L):J=L,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,$={id:g++,callback:H,priorityLevel:$,startTime:J,expirationTime:G,sortIndex:-1},J>L?($.sortIndex=J,n(f,$),r(_)===null&&$===r(f)&&(k?(b(P),P=-1):k=!0,Z(q,J-L))):($.sortIndex=G,n(_,$),w||x||(w=!0,W(R))),$},e.unstable_shouldYield=F,e.unstable_wrapCallback=function($){var H=h;return function(){var J=h;h=H;try{return $.apply(this,arguments)}finally{h=J}}}})(cd)),cd}var af;function Hx(){return af||(af=1,ud.exports=$x()),ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf;function Wx(){if(sf)return ki;sf=1;var e=ys(),n=Hx();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(t,i){l(t,i),l(t+"Capture",i)}function l(t,i){for(s[t]=i,t=0;t<i.length;t++)o.add(i[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function h(t){return _.call(m,t)?!0:_.call(g,t)?!1:f.test(t)?m[t]=!0:(g[t]=!0,!1)}function x(t,i,a,p){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w(t,i,a,p){if(i===null||typeof i>"u"||x(t,i,a,p))return!0;if(p)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(t,i,a,p,y,v,N){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=t,this.type=i,this.sanitizeURL=v,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new k(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];S[i]=new k(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new k(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new k(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new k(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new k(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new k(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new k(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new k(t,5,!1,t.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function E(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(b,E);S[i]=new k(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(b,E);S[i]=new k(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(b,E);S[i]=new k(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new k(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new k(t,1,!1,t.toLowerCase(),null,!0,!0)});function M(t,i,a,p){var y=S.hasOwnProperty(i)?S[i]:null;(y!==null?y.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,a,y,p)&&(a=null),p||y===null?h(i)&&(a===null?t.removeAttribute(i):t.setAttribute(i,""+a)):y.mustUseProperty?t[y.propertyName]=a===null?y.type===3?!1:"":a:(i=y.attributeName,p=y.attributeNamespace,a===null?t.removeAttribute(i):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,p?t.setAttributeNS(p,i,a):t.setAttribute(i,a))))}var q=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),C=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),F=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),$=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=$&&t[$]||t["@@iterator"],typeof t=="function"?t:null)}var J=Object.assign,L;function G(t){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+t}var ce=!1;function ue(t,i){if(!t||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(oe){var p=oe}Reflect.construct(t,[],i)}else{try{i.call()}catch(oe){p=oe}t.call(i.prototype)}else{try{throw Error()}catch(oe){p=oe}t()}}catch(oe){if(oe&&p&&typeof oe.stack=="string"){for(var y=oe.stack.split(`
`),v=p.stack.split(`
`),N=y.length-1,B=v.length-1;1<=N&&0<=B&&y[N]!==v[B];)B--;for(;1<=N&&0<=B;N--,B--)if(y[N]!==v[B]){if(N!==1||B!==1)do if(N--,B--,0>B||y[N]!==v[B]){var Q=`
`+y[N].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=N&&0<=B);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?G(t):""}function pe(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=ue(t.type,!1),t;case 11:return t=ue(t.type.render,!1),t;case 1:return t=ue(t.type,!0),t;default:return""}}function ye(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case C:return"Portal";case V:return"Profiler";case P:return"StrictMode";case te:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F:return(t.displayName||"Context")+".Consumer";case X:return(t._context.displayName||"Context")+".Provider";case D:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return i=t.displayName||null,i!==null?i:ye(t.type)||"Memo";case W:i=t._payload,t=t._init;try{return ye(t(i))}catch{}}return null}function ge(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(i);case 8:return i===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function le(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ve(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function we(t){var i=ve(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),p=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,v=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return y.call(this)},set:function(N){p=""+N,v.call(this,N)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return p},setValue:function(N){p=""+N},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Oe(t){t._valueTracker||(t._valueTracker=we(t))}function Re(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),p="";return t&&(p=ve(t)?t.checked?"true":"false":t.value),t=p,t!==a?(i.setValue(t),!0):!1}function Pe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function We(t,i){var a=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Je(t,i){var a=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;a=le(i.value!=null?i.value:a),t._wrapperState={initialChecked:p,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ke(t,i){i=i.checked,i!=null&&M(t,"checked",i,!1)}function st(t,i){Ke(t,i);var a=le(i.value),p=i.type;if(a!=null)p==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?It(t,i.type,a):i.hasOwnProperty("defaultValue")&&It(t,i.type,le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Wt(t,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,a||i===t.value||(t.value=i),t.defaultValue=i}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function It(t,i,a){(i!=="number"||Pe(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var Rt=Array.isArray;function Lt(t,i,a,p){if(t=t.options,i){i={};for(var y=0;y<a.length;y++)i["$"+a[y]]=!0;for(a=0;a<t.length;a++)y=i.hasOwnProperty("$"+t[a].value),t[a].selected!==y&&(t[a].selected=y),y&&p&&(t[a].defaultSelected=!0)}else{for(a=""+le(a),i=null,y=0;y<t.length;y++){if(t[y].value===a){t[y].selected=!0,p&&(t[y].defaultSelected=!0);return}i!==null||t[y].disabled||(i=t[y])}i!==null&&(i.selected=!0)}}function Ut(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mi(t,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(Rt(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}t._wrapperState={initialValue:le(a)}}function Dt(t,i){var a=le(i.value),p=le(i.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),i.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),p!=null&&(t.defaultValue=""+p)}function Vi(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function oi(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gi(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?oi(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xt,er=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,p,y){MSApp.execUnsafeLocalFunction(function(){return t(i,a,p,y)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Xt=Xt||document.createElement("div"),Xt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Xt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function Ue(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vt=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(t){Vt.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ci[i]=Ci[t]})});function dn(t,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ci.hasOwnProperty(t)&&Ci[t]?(""+i).trim():i+"px"}function Ze(t,i){t=t.style;for(var a in i)if(i.hasOwnProperty(a)){var p=a.indexOf("--")===0,y=dn(a,i[a],p);a==="float"&&(a="cssFloat"),p?t.setProperty(a,y):t[a]=y}}var pn=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fi(t,i){if(i){if(pn[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function _n(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function jn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ot=null,wt=null,at=null;function Pn(t){if(t=Ea(t)){if(typeof Ot!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Bs(i),Ot(t.stateNode,t.type,i))}}function yt(t){wt?at?at.push(t):at=[t]:wt=t}function Tn(){if(wt){var t=wt,i=at;if(at=wt=null,Pn(t),i)for(t=0;t<i.length;t++)Pn(i[t])}}function de(t,i){return t(i)}function Ge(){}var Ye=!1;function Ct(t,i,a){if(Ye)return t(i,a);Ye=!0;try{return de(t,i,a)}finally{Ye=!1,(wt!==null||at!==null)&&(Ge(),Tn())}}function bt(t,i){var a=t.stateNode;if(a===null)return null;var p=Bs(a);if(p===null)return null;a=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var kt=!1;if(d)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){kt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{kt=!1}function ot(t,i,a,p,y,v,N,B,Q){var oe=Array.prototype.slice.call(arguments,3);try{i.apply(a,oe)}catch(me){this.onError(me)}}var St=!1,jt=null,si=!1,li=null,jr={onError:function(t){St=!0,jt=t}};function po(t,i,a,p,y,v,N,B,Q){St=!1,jt=null,ot.apply(jr,arguments)}function ui(t,i,a,p,y,v,N,B,Q){if(po.apply(this,arguments),St){if(St){var oe=jt;St=!1,jt=null}else throw Error(r(198));si||(si=!0,li=oe)}}function fi(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function tr(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Pr(t){if(fi(t)!==t)throw Error(r(188))}function Rn(t){var i=t.alternate;if(!i){if(i=fi(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,p=i;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(p=y.return,p!==null){a=p;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return Pr(y),t;if(v===p)return Pr(y),i;v=v.sibling}throw Error(r(188))}if(a.return!==p.return)a=y,p=v;else{for(var N=!1,B=y.child;B;){if(B===a){N=!0,a=y,p=v;break}if(B===p){N=!0,p=y,a=v;break}B=B.sibling}if(!N){for(B=v.child;B;){if(B===a){N=!0,a=v,p=y;break}if(B===p){N=!0,p=v,a=y;break}B=B.sibling}if(!N)throw Error(r(189))}}if(a.alternate!==p)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function mn(t){return t=Rn(t),t!==null?_o(t):null}function _o(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=_o(t);if(i!==null)return i;t=t.sibling}return null}var la=n.unstable_scheduleCallback,mo=n.unstable_cancelCallback,Tr=n.unstable_shouldYield,Vn=n.unstable_requestPaint,ct=n.unstable_now,ua=n.unstable_getCurrentPriorityLevel,Gt=n.unstable_ImmediatePriority,fo=n.unstable_UserBlockingPriority,hi=n.unstable_NormalPriority,ir=n.unstable_LowPriority,Rr=n.unstable_IdlePriority,He=null,yi=null;function nr(t){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(He,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Le,Vr=Math.log,Fr=Math.LN2;function Le(t){return t>>>=0,t===0?32:31-(Vr(t)/Fr|0)|0}var Fn=64,zn=4194304;function ci(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ln(t,i){var a=t.pendingLanes;if(a===0)return 0;var p=0,y=t.suspendedLanes,v=t.pingedLanes,N=a&268435455;if(N!==0){var B=N&~y;B!==0?p=ci(B):(v&=N,v!==0&&(p=ci(v)))}else N=a&~y,N!==0?p=ci(N):v!==0&&(p=ci(v));if(p===0)return 0;if(i!==0&&i!==p&&(i&y)===0&&(y=p&-p,v=i&-i,y>=v||y===16&&(v&4194240)!==0))return i;if((p&4)!==0&&(p|=a&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=p;0<i;)a=31-Zt(i),y=1<<a,p|=t[a],i&=~y;return p}function zr(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(t,i){for(var a=t.suspendedLanes,p=t.pingedLanes,y=t.expirationTimes,v=t.pendingLanes;0<v;){var N=31-Zt(v),B=1<<N,Q=y[N];Q===-1?((B&a)===0||(B&p)!==0)&&(y[N]=zr(B,i)):Q<=i&&(t.expiredLanes|=B),v&=~B}}function or(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fn(){var t=Fn;return Fn<<=1,(Fn&4194240)===0&&(Fn=64),t}function Kt(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function zi(t,i,a){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-Zt(i),t[i]=a}function ho(t,i){var a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<a;){var y=31-Zt(a),v=1<<y;i[y]=0,p[y]=-1,t[y]=-1,a&=~v}}function ca(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var p=31-Zt(a),y=1<<p;y&i|t[p]&i&&(t[p]|=i),a&=~y}}var et=0;function Cs(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var qs,da,qi,Es,Is,pa=!1,yo=[],hn=null,yn=null,gn=null,Lr=new Map,Dr=new Map,xn=[],Ru="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Li(t,i){switch(t){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":Lr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(i.pointerId)}}function Di(t,i,a,p,y,v){return t===null||t.nativeEvent!==v?(t={blockedOn:i,domEventName:a,eventSystemFlags:p,nativeEvent:v,targetContainers:[y]},i!==null&&(i=Ea(i),i!==null&&da(i)),t):(t.eventSystemFlags|=p,i=t.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),t)}function _a(t,i,a,p,y){switch(i){case"focusin":return hn=Di(hn,t,i,a,p,y),!0;case"dragenter":return yn=Di(yn,t,i,a,p,y),!0;case"mouseover":return gn=Di(gn,t,i,a,p,y),!0;case"pointerover":var v=y.pointerId;return Lr.set(v,Di(Lr.get(v)||null,t,i,a,p,y)),!0;case"gotpointercapture":return v=y.pointerId,Dr.set(v,Di(Dr.get(v)||null,t,i,a,p,y)),!0}return!1}function ma(t){var i=$r(t.target);if(i!==null){var a=fi(i);if(a!==null){if(i=a.tag,i===13){if(i=tr(a),i!==null){t.blockedOn=i,Is(t.priority,function(){qi(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function go(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=fa(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var p=new a.constructor(a.type,a);ai=p,a.target.dispatchEvent(p),ai=null}else return i=Ea(a),i!==null&&da(i),t.blockedOn=a,!1;i.shift()}return!0}function Ns(t,i,a){go(t)&&a.delete(i)}function Vu(){pa=!1,hn!==null&&go(hn)&&(hn=null),yn!==null&&go(yn)&&(yn=null),gn!==null&&go(gn)&&(gn=null),Lr.forEach(Ns),Dr.forEach(Ns)}function Dn(t,i){t.blockedOn===i&&(t.blockedOn=null,pa||(pa=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Vu)))}function Or(t){function i(y){return Dn(y,t)}if(0<yo.length){Dn(yo[0],t);for(var a=1;a<yo.length;a++){var p=yo[a];p.blockedOn===t&&(p.blockedOn=null)}}for(hn!==null&&Dn(hn,t),yn!==null&&Dn(yn,t),gn!==null&&Dn(gn,t),Lr.forEach(i),Dr.forEach(i),a=0;a<xn.length;a++)p=xn[a],p.blockedOn===t&&(p.blockedOn=null);for(;0<xn.length&&(a=xn[0],a.blockedOn===null);)ma(a),a.blockedOn===null&&xn.shift()}var ar=q.ReactCurrentBatchConfig,xo=!0;function Fu(t,i,a,p){var y=et,v=ar.transition;ar.transition=null;try{et=1,Br(t,i,a,p)}finally{et=y,ar.transition=v}}function zu(t,i,a,p){var y=et,v=ar.transition;ar.transition=null;try{et=4,Br(t,i,a,p)}finally{et=y,ar.transition=v}}function Br(t,i,a,p){if(xo){var y=fa(t,i,a,p);if(y===null)Yu(t,i,p,Ar,a),Li(t,p);else if(_a(y,t,i,a,p))p.stopPropagation();else if(Li(t,p),i&4&&-1<Ru.indexOf(t)){for(;y!==null;){var v=Ea(y);if(v!==null&&qs(v),v=fa(t,i,a,p),v===null&&Yu(t,i,p,Ar,a),v===y)break;y=v}y!==null&&p.stopPropagation()}else Yu(t,i,p,null,a)}}var Ar=null;function fa(t,i,a,p){if(Ar=null,t=jn(p),t=$r(t),t!==null)if(i=fi(t),i===null)t=null;else if(a=i.tag,a===13){if(t=tr(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Ar=t,null}function js(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ua()){case Gt:return 1;case fo:return 4;case hi:case ir:return 16;case Rr:return 536870912;default:return 16}default:return 16}}var Ki=null,ha=null,vo=null;function Ps(){if(vo)return vo;var t,i=ha,a=i.length,p,y="value"in Ki?Ki.value:Ki.textContent,v=y.length;for(t=0;t<a&&i[t]===y[t];t++);var N=a-t;for(p=1;p<=N&&i[a-p]===y[v-p];p++);return vo=y.slice(t,1<p?1-p:void 0)}function wo(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function Ts(){return!1}function di(t){function i(a,p,y,v,N){this._reactName=a,this._targetInst=y,this.type=p,this.nativeEvent=v,this.target=N,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(a=t[B],this[B]=a?a(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?bo:Ts,this.isPropagationStopped=Ts,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),i}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=di(On),sr=J({},On,{view:0,detail:0}),Lu=di(sr),I,A,U,O=J({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rt,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==U&&(U&&t.type==="mousemove"?(I=t.screenX-U.screenX,A=t.screenY-U.screenY):A=I=0,U=t),I)},movementY:function(t){return"movementY"in t?t.movementY:A}}),K=di(O),ie=J({},O,{dataTransfer:0}),se=di(ie),ae=J({},sr,{relatedTarget:0}),Se=di(ae),Me=J({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),be=di(Me),fe=J({},On,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ce=di(fe),Ie=J({},On,{data:0}),ke=di(Ie),qe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ze={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qe(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ve[t])?!!i[t]:!1}function rt(){return Qe}var gt=J({},sr,{key:function(t){if(t.key){var i=qe[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ze[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rt,charCode:function(t){return t.type==="keypress"?wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lt=di(gt),Oi=J({},O,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jt=di(Oi),Bt=J({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rt}),ga=di(Bt),Du=J({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),jg=di(Du),Pg=J({},O,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tg=di(Pg),Rg=[9,13,27,32],Ou=d&&"CompositionEvent"in window,xa=null;d&&"documentMode"in document&&(xa=document.documentMode);var Vg=d&&"TextEvent"in window&&!xa,Up=d&&(!Ou||xa&&8<xa&&11>=xa),Gp=" ",Kp=!1;function Qp(t,i){switch(t){case"keyup":return Rg.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function Fg(t,i){switch(t){case"compositionend":return Yp(i);case"keypress":return i.which!==32?null:(Kp=!0,Gp);case"textInput":return t=i.data,t===Gp&&Kp?null:t;default:return null}}function zg(t,i){if(ko)return t==="compositionend"||!Ou&&Qp(t,i)?(t=Ps(),vo=ha=Ki=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Up&&i.locale!=="ko"?null:i.data;default:return null}}var Lg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Lg[t.type]:i==="textarea"}function Zp(t,i,a,p){yt(p),i=Ls(i,"onChange"),0<i.length&&(a=new ya("onChange","change",null,a,p),t.push({event:a,listeners:i}))}var va=null,wa=null;function Dg(t){h_(t,0)}function Rs(t){var i=Eo(t);if(Re(i))return t}function Og(t,i){if(t==="change")return i}var Jp=!1;if(d){var Bu;if(d){var Au="oninput"in document;if(!Au){var e_=document.createElement("div");e_.setAttribute("oninput","return;"),Au=typeof e_.oninput=="function"}Bu=Au}else Bu=!1;Jp=Bu&&(!document.documentMode||9<document.documentMode)}function t_(){va&&(va.detachEvent("onpropertychange",i_),wa=va=null)}function i_(t){if(t.propertyName==="value"&&Rs(wa)){var i=[];Zp(i,wa,t,jn(t)),Ct(Dg,i)}}function Bg(t,i,a){t==="focusin"?(t_(),va=i,wa=a,va.attachEvent("onpropertychange",i_)):t==="focusout"&&t_()}function Ag(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rs(wa)}function $g(t,i){if(t==="click")return Rs(i)}function Hg(t,i){if(t==="input"||t==="change")return Rs(i)}function Wg(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Qi=typeof Object.is=="function"?Object.is:Wg;function ba(t,i){if(Qi(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),p=Object.keys(i);if(a.length!==p.length)return!1;for(p=0;p<a.length;p++){var y=a[p];if(!_.call(i,y)||!Qi(t[y],i[y]))return!1}return!0}function n_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r_(t,i){var a=n_(t);t=0;for(var p;a;){if(a.nodeType===3){if(p=t+a.textContent.length,t<=i&&p>=i)return{node:a,offset:i-t};t=p}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=n_(a)}}function o_(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?o_(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function a_(){for(var t=window,i=Pe();i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Pe(t.document)}return i}function $u(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Ug(t){var i=a_(),a=t.focusedElem,p=t.selectionRange;if(i!==a&&a&&a.ownerDocument&&o_(a.ownerDocument.documentElement,a)){if(p!==null&&$u(a)){if(i=p.start,t=p.end,t===void 0&&(t=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(t,a.value.length);else if(t=(i=a.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var y=a.textContent.length,v=Math.min(p.start,y);p=p.end===void 0?v:Math.min(p.end,y),!t.extend&&v>p&&(y=p,p=v,v=y),y=r_(a,v);var N=r_(a,p);y&&N&&(t.rangeCount!==1||t.anchorNode!==y.node||t.anchorOffset!==y.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(i=i.createRange(),i.setStart(y.node,y.offset),t.removeAllRanges(),v>p?(t.addRange(i),t.extend(N.node,N.offset)):(i.setEnd(N.node,N.offset),t.addRange(i)))}}for(i=[],t=a;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)t=i[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gg=d&&"documentMode"in document&&11>=document.documentMode,So=null,Hu=null,ka=null,Wu=!1;function s_(t,i,a){var p=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wu||So==null||So!==Pe(p)||(p=So,"selectionStart"in p&&$u(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ka&&ba(ka,p)||(ka=p,p=Ls(Hu,"onSelect"),0<p.length&&(i=new ya("onSelect","select",null,i,a),t.push({event:i,listeners:p}),i.target=So)))}function Vs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Mo={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},Uu={},l_={};d&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Fs(t){if(Uu[t])return Uu[t];if(!Mo[t])return t;var i=Mo[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in l_)return Uu[t]=i[a];return t}var u_=Fs("animationend"),c_=Fs("animationiteration"),d_=Fs("animationstart"),p_=Fs("transitionend"),__=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,i){__.set(t,i),c(i,[t])}for(var Gu=0;Gu<m_.length;Gu++){var Ku=m_[Gu],Kg=Ku.toLowerCase(),Qg=Ku[0].toUpperCase()+Ku.slice(1);lr(Kg,"on"+Qg)}lr(u_,"onAnimationEnd"),lr(c_,"onAnimationIteration"),lr(d_,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(p_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function f_(t,i,a){var p=t.type||"unknown-event";t.currentTarget=a,ui(p,i,void 0,t),t.currentTarget=null}function h_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var p=t[a],y=p.event;p=p.listeners;e:{var v=void 0;if(i)for(var N=p.length-1;0<=N;N--){var B=p[N],Q=B.instance,oe=B.currentTarget;if(B=B.listener,Q!==v&&y.isPropagationStopped())break e;f_(y,B,oe),v=Q}else for(N=0;N<p.length;N++){if(B=p[N],Q=B.instance,oe=B.currentTarget,B=B.listener,Q!==v&&y.isPropagationStopped())break e;f_(y,B,oe),v=Q}}}if(si)throw t=li,si=!1,li=null,t}function dt(t,i){var a=i[ic];a===void 0&&(a=i[ic]=new Set);var p=t+"__bubble";a.has(p)||(y_(i,t,2,!1),a.add(p))}function Qu(t,i,a){var p=0;i&&(p|=4),y_(a,t,p,i)}var zs="_reactListening"+Math.random().toString(36).slice(2);function Ma(t){if(!t[zs]){t[zs]=!0,o.forEach(function(a){a!=="selectionchange"&&(Yg.has(a)||Qu(a,!1,t),Qu(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[zs]||(i[zs]=!0,Qu("selectionchange",!1,i))}}function y_(t,i,a,p){switch(js(i)){case 1:var y=Fu;break;case 4:y=zu;break;default:y=Br}a=y.bind(null,i,a,t),y=void 0,!kt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),p?y!==void 0?t.addEventListener(i,a,{capture:!0,passive:y}):t.addEventListener(i,a,!0):y!==void 0?t.addEventListener(i,a,{passive:y}):t.addEventListener(i,a,!1)}function Yu(t,i,a,p,y){var v=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var B=p.stateNode.containerInfo;if(B===y||B.nodeType===8&&B.parentNode===y)break;if(N===4)for(N=p.return;N!==null;){var Q=N.tag;if((Q===3||Q===4)&&(Q=N.stateNode.containerInfo,Q===y||Q.nodeType===8&&Q.parentNode===y))return;N=N.return}for(;B!==null;){if(N=$r(B),N===null)return;if(Q=N.tag,Q===5||Q===6){p=v=N;continue e}B=B.parentNode}}p=p.return}Ct(function(){var oe=v,me=jn(a),he=[];e:{var _e=__.get(t);if(_e!==void 0){var Ee=ya,je=t;switch(t){case"keypress":if(wo(a)===0)break e;case"keydown":case"keyup":Ee=lt;break;case"focusin":je="focus",Ee=Se;break;case"focusout":je="blur",Ee=Se;break;case"beforeblur":case"afterblur":Ee=Se;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=K;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=se;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=ga;break;case u_:case c_:case d_:Ee=be;break;case p_:Ee=jg;break;case"scroll":Ee=Lu;break;case"wheel":Ee=Tg;break;case"copy":case"cut":case"paste":Ee=Ce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=Jt}var Te=(i&4)!==0,qt=!Te&&t==="scroll",ne=Te?_e!==null?_e+"Capture":null:_e;Te=[];for(var ee=oe,re;ee!==null;){re=ee;var xe=re.stateNode;if(re.tag===5&&xe!==null&&(re=xe,ne!==null&&(xe=bt(ee,ne),xe!=null&&Te.push(Ca(ee,xe,re)))),qt)break;ee=ee.return}0<Te.length&&(_e=new Ee(_e,je,null,a,me),he.push({event:_e,listeners:Te}))}}if((i&7)===0){e:{if(_e=t==="mouseover"||t==="pointerover",Ee=t==="mouseout"||t==="pointerout",_e&&a!==ai&&(je=a.relatedTarget||a.fromElement)&&($r(je)||je[Bn]))break e;if((Ee||_e)&&(_e=me.window===me?me:(_e=me.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ee?(je=a.relatedTarget||a.toElement,Ee=oe,je=je?$r(je):null,je!==null&&(qt=fi(je),je!==qt||je.tag!==5&&je.tag!==6)&&(je=null)):(Ee=null,je=oe),Ee!==je)){if(Te=K,xe="onMouseLeave",ne="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Jt,xe="onPointerLeave",ne="onPointerEnter",ee="pointer"),qt=Ee==null?_e:Eo(Ee),re=je==null?_e:Eo(je),_e=new Te(xe,ee+"leave",Ee,a,me),_e.target=qt,_e.relatedTarget=re,xe=null,$r(me)===oe&&(Te=new Te(ne,ee+"enter",je,a,me),Te.target=re,Te.relatedTarget=qt,xe=Te),qt=xe,Ee&&je)t:{for(Te=Ee,ne=je,ee=0,re=Te;re;re=Co(re))ee++;for(re=0,xe=ne;xe;xe=Co(xe))re++;for(;0<ee-re;)Te=Co(Te),ee--;for(;0<re-ee;)ne=Co(ne),re--;for(;ee--;){if(Te===ne||ne!==null&&Te===ne.alternate)break t;Te=Co(Te),ne=Co(ne)}Te=null}else Te=null;Ee!==null&&g_(he,_e,Ee,Te,!1),je!==null&&qt!==null&&g_(he,qt,je,Te,!0)}}e:{if(_e=oe?Eo(oe):window,Ee=_e.nodeName&&_e.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&_e.type==="file")var Fe=Og;else if(Xp(_e))if(Jp)Fe=Hg;else{Fe=Ag;var Be=Bg}else(Ee=_e.nodeName)&&Ee.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Fe=$g);if(Fe&&(Fe=Fe(t,oe))){Zp(he,Fe,a,me);break e}Be&&Be(t,_e,oe),t==="focusout"&&(Be=_e._wrapperState)&&Be.controlled&&_e.type==="number"&&It(_e,"number",_e.value)}switch(Be=oe?Eo(oe):window,t){case"focusin":(Xp(Be)||Be.contentEditable==="true")&&(So=Be,Hu=oe,ka=null);break;case"focusout":ka=Hu=So=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,s_(he,a,me);break;case"selectionchange":if(Gg)break;case"keydown":case"keyup":s_(he,a,me)}var Ae;if(Ou)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ko?Qp(t,a)&&($e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(Up&&a.locale!=="ko"&&(ko||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ko&&(Ae=Ps()):(Ki=me,ha="value"in Ki?Ki.value:Ki.textContent,ko=!0)),Be=Ls(oe,$e),0<Be.length&&($e=new ke($e,t,null,a,me),he.push({event:$e,listeners:Be}),Ae?$e.data=Ae:(Ae=Yp(a),Ae!==null&&($e.data=Ae)))),(Ae=Vg?Fg(t,a):zg(t,a))&&(oe=Ls(oe,"onBeforeInput"),0<oe.length&&(me=new ke("onBeforeInput","beforeinput",null,a,me),he.push({event:me,listeners:oe}),me.data=Ae))}h_(he,i)})}function Ca(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ls(t,i){for(var a=i+"Capture",p=[];t!==null;){var y=t,v=y.stateNode;y.tag===5&&v!==null&&(y=v,v=bt(t,a),v!=null&&p.unshift(Ca(t,v,y)),v=bt(t,i),v!=null&&p.push(Ca(t,v,y))),t=t.return}return p}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g_(t,i,a,p,y){for(var v=i._reactName,N=[];a!==null&&a!==p;){var B=a,Q=B.alternate,oe=B.stateNode;if(Q!==null&&Q===p)break;B.tag===5&&oe!==null&&(B=oe,y?(Q=bt(a,v),Q!=null&&N.unshift(Ca(a,Q,B))):y||(Q=bt(a,v),Q!=null&&N.push(Ca(a,Q,B)))),a=a.return}N.length!==0&&t.push({event:i,listeners:N})}var Xg=/\r\n?/g,Zg=/\u0000|\uFFFD/g;function x_(t){return(typeof t=="string"?t:""+t).replace(Xg,`
`).replace(Zg,"")}function Ds(t,i,a){if(i=x_(i),x_(t)!==i&&a)throw Error(r(425))}function Os(){}var Xu=null,Zu=null;function Ju(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,Jg=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof v_<"u"?function(t){return v_.resolve(null).then(t).catch(tx)}:ec;function tx(t){setTimeout(function(){throw t})}function tc(t,i){var a=i,p=0;do{var y=a.nextSibling;if(t.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(p===0){t.removeChild(y),Or(i);return}p--}else a!=="$"&&a!=="$?"&&a!=="$!"||p++;a=y}while(a);Or(i)}function ur(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function w_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}var qo=Math.random().toString(36).slice(2),vn="__reactFiber$"+qo,qa="__reactProps$"+qo,Bn="__reactContainer$"+qo,ic="__reactEvents$"+qo,ix="__reactListeners$"+qo,nx="__reactHandles$"+qo;function $r(t){var i=t[vn];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Bn]||a[vn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=w_(t);t!==null;){if(a=t[vn])return a;t=w_(t)}return i}t=a,a=t.parentNode}return null}function Ea(t){return t=t[vn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Bs(t){return t[qa]||null}var nc=[],Io=-1;function cr(t){return{current:t}}function pt(t){0>Io||(t.current=nc[Io],nc[Io]=null,Io--)}function ut(t,i){Io++,nc[Io]=t.current,t.current=i}var dr={},ei=cr(dr),gi=cr(!1),Hr=dr;function No(t,i){var a=t.type.contextTypes;if(!a)return dr;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var y={},v;for(v in a)y[v]=i[v];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=y),y}function xi(t){return t=t.childContextTypes,t!=null}function As(){pt(gi),pt(ei)}function b_(t,i,a){if(ei.current!==dr)throw Error(r(168));ut(ei,i),ut(gi,a)}function k_(t,i,a){var p=t.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return a;p=p.getChildContext();for(var y in p)if(!(y in i))throw Error(r(108,ge(t)||"Unknown",y));return J({},a,p)}function $s(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Hr=ei.current,ut(ei,t),ut(gi,gi.current),!0}function S_(t,i,a){var p=t.stateNode;if(!p)throw Error(r(169));a?(t=k_(t,i,Hr),p.__reactInternalMemoizedMergedChildContext=t,pt(gi),pt(ei),ut(ei,t)):pt(gi),ut(gi,a)}var An=null,Hs=!1,rc=!1;function M_(t){An===null?An=[t]:An.push(t)}function rx(t){Hs=!0,M_(t)}function pr(){if(!rc&&An!==null){rc=!0;var t=0,i=et;try{var a=An;for(et=1;t<a.length;t++){var p=a[t];do p=p(!0);while(p!==null)}An=null,Hs=!1}catch(y){throw An!==null&&(An=An.slice(t+1)),la(Gt,pr),y}finally{et=i,rc=!1}}return null}var jo=[],Po=0,Ws=null,Us=0,Bi=[],Ai=0,Wr=null,$n=1,Hn="";function Ur(t,i){jo[Po++]=Us,jo[Po++]=Ws,Ws=t,Us=i}function C_(t,i,a){Bi[Ai++]=$n,Bi[Ai++]=Hn,Bi[Ai++]=Wr,Wr=t;var p=$n;t=Hn;var y=32-Zt(p)-1;p&=~(1<<y),a+=1;var v=32-Zt(i)+y;if(30<v){var N=y-y%5;v=(p&(1<<N)-1).toString(32),p>>=N,y-=N,$n=1<<32-Zt(i)+y|a<<y|p,Hn=v+t}else $n=1<<v|a<<y|p,Hn=t}function oc(t){t.return!==null&&(Ur(t,1),C_(t,1,0))}function ac(t){for(;t===Ws;)Ws=jo[--Po],jo[Po]=null,Us=jo[--Po],jo[Po]=null;for(;t===Wr;)Wr=Bi[--Ai],Bi[Ai]=null,Hn=Bi[--Ai],Bi[Ai]=null,$n=Bi[--Ai],Bi[Ai]=null}var Ei=null,Ii=null,mt=!1,Yi=null;function q_(t,i){var a=Ui(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=t,i=t.deletions,i===null?(t.deletions=[a],t.flags|=16):i.push(a)}function E_(t,i){switch(t.tag){case 5:var a=t.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Ei=t,Ii=ur(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Ei=t,Ii=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Wr!==null?{id:$n,overflow:Hn}:null,t.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Ui(18,null,null,0),a.stateNode=i,a.return=t,t.child=a,Ei=t,Ii=null,!0):!1;default:return!1}}function sc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(mt){var i=Ii;if(i){var a=i;if(!E_(t,i)){if(sc(t))throw Error(r(418));i=ur(a.nextSibling);var p=Ei;i&&E_(t,i)?q_(p,a):(t.flags=t.flags&-4097|2,mt=!1,Ei=t)}}else{if(sc(t))throw Error(r(418));t.flags=t.flags&-4097|2,mt=!1,Ei=t}}}function I_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ei=t}function Gs(t){if(t!==Ei)return!1;if(!mt)return I_(t),mt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Ju(t.type,t.memoizedProps)),i&&(i=Ii)){if(sc(t))throw N_(),Error(r(418));for(;i;)q_(t,i),i=ur(i.nextSibling)}if(I_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(i===0){Ii=ur(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}t=t.nextSibling}Ii=null}}else Ii=Ei?ur(t.stateNode.nextSibling):null;return!0}function N_(){for(var t=Ii;t;)t=ur(t.nextSibling)}function To(){Ii=Ei=null,mt=!1}function uc(t){Yi===null?Yi=[t]:Yi.push(t)}var ox=q.ReactCurrentBatchConfig;function Ia(t,i,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var p=a.stateNode}if(!p)throw Error(r(147,t));var y=p,v=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(N){var B=y.refs;N===null?delete B[v]:B[v]=N},i._stringRef=v,i)}if(typeof t!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,t))}return t}function Ks(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function j_(t){var i=t._init;return i(t._payload)}function P_(t){function i(ne,ee){if(t){var re=ne.deletions;re===null?(ne.deletions=[ee],ne.flags|=16):re.push(ee)}}function a(ne,ee){if(!t)return null;for(;ee!==null;)i(ne,ee),ee=ee.sibling;return null}function p(ne,ee){for(ne=new Map;ee!==null;)ee.key!==null?ne.set(ee.key,ee):ne.set(ee.index,ee),ee=ee.sibling;return ne}function y(ne,ee){return ne=vr(ne,ee),ne.index=0,ne.sibling=null,ne}function v(ne,ee,re){return ne.index=re,t?(re=ne.alternate,re!==null?(re=re.index,re<ee?(ne.flags|=2,ee):re):(ne.flags|=2,ee)):(ne.flags|=1048576,ee)}function N(ne){return t&&ne.alternate===null&&(ne.flags|=2),ne}function B(ne,ee,re,xe){return ee===null||ee.tag!==6?(ee=ed(re,ne.mode,xe),ee.return=ne,ee):(ee=y(ee,re),ee.return=ne,ee)}function Q(ne,ee,re,xe){var Fe=re.type;return Fe===j?me(ne,ee,re.props.children,xe,re.key):ee!==null&&(ee.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===W&&j_(Fe)===ee.type)?(xe=y(ee,re.props),xe.ref=Ia(ne,ee,re),xe.return=ne,xe):(xe=gl(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=Ia(ne,ee,re),xe.return=ne,xe)}function oe(ne,ee,re,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==re.containerInfo||ee.stateNode.implementation!==re.implementation?(ee=td(re,ne.mode,xe),ee.return=ne,ee):(ee=y(ee,re.children||[]),ee.return=ne,ee)}function me(ne,ee,re,xe,Fe){return ee===null||ee.tag!==7?(ee=eo(re,ne.mode,xe,Fe),ee.return=ne,ee):(ee=y(ee,re),ee.return=ne,ee)}function he(ne,ee,re){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=ed(""+ee,ne.mode,re),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return re=gl(ee.type,ee.key,ee.props,null,ne.mode,re),re.ref=Ia(ne,null,ee),re.return=ne,re;case C:return ee=td(ee,ne.mode,re),ee.return=ne,ee;case W:var xe=ee._init;return he(ne,xe(ee._payload),re)}if(Rt(ee)||H(ee))return ee=eo(ee,ne.mode,re,null),ee.return=ne,ee;Ks(ne,ee)}return null}function _e(ne,ee,re,xe){var Fe=ee!==null?ee.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Fe!==null?null:B(ne,ee,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case R:return re.key===Fe?Q(ne,ee,re,xe):null;case C:return re.key===Fe?oe(ne,ee,re,xe):null;case W:return Fe=re._init,_e(ne,ee,Fe(re._payload),xe)}if(Rt(re)||H(re))return Fe!==null?null:me(ne,ee,re,xe,null);Ks(ne,re)}return null}function Ee(ne,ee,re,xe,Fe){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ne=ne.get(re)||null,B(ee,ne,""+xe,Fe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case R:return ne=ne.get(xe.key===null?re:xe.key)||null,Q(ee,ne,xe,Fe);case C:return ne=ne.get(xe.key===null?re:xe.key)||null,oe(ee,ne,xe,Fe);case W:var Be=xe._init;return Ee(ne,ee,re,Be(xe._payload),Fe)}if(Rt(xe)||H(xe))return ne=ne.get(re)||null,me(ee,ne,xe,Fe,null);Ks(ee,xe)}return null}function je(ne,ee,re,xe){for(var Fe=null,Be=null,Ae=ee,$e=ee=0,Ht=null;Ae!==null&&$e<re.length;$e++){Ae.index>$e?(Ht=Ae,Ae=null):Ht=Ae.sibling;var nt=_e(ne,Ae,re[$e],xe);if(nt===null){Ae===null&&(Ae=Ht);break}t&&Ae&&nt.alternate===null&&i(ne,Ae),ee=v(nt,ee,$e),Be===null?Fe=nt:Be.sibling=nt,Be=nt,Ae=Ht}if($e===re.length)return a(ne,Ae),mt&&Ur(ne,$e),Fe;if(Ae===null){for(;$e<re.length;$e++)Ae=he(ne,re[$e],xe),Ae!==null&&(ee=v(Ae,ee,$e),Be===null?Fe=Ae:Be.sibling=Ae,Be=Ae);return mt&&Ur(ne,$e),Fe}for(Ae=p(ne,Ae);$e<re.length;$e++)Ht=Ee(Ae,ne,$e,re[$e],xe),Ht!==null&&(t&&Ht.alternate!==null&&Ae.delete(Ht.key===null?$e:Ht.key),ee=v(Ht,ee,$e),Be===null?Fe=Ht:Be.sibling=Ht,Be=Ht);return t&&Ae.forEach(function(wr){return i(ne,wr)}),mt&&Ur(ne,$e),Fe}function Te(ne,ee,re,xe){var Fe=H(re);if(typeof Fe!="function")throw Error(r(150));if(re=Fe.call(re),re==null)throw Error(r(151));for(var Be=Fe=null,Ae=ee,$e=ee=0,Ht=null,nt=re.next();Ae!==null&&!nt.done;$e++,nt=re.next()){Ae.index>$e?(Ht=Ae,Ae=null):Ht=Ae.sibling;var wr=_e(ne,Ae,nt.value,xe);if(wr===null){Ae===null&&(Ae=Ht);break}t&&Ae&&wr.alternate===null&&i(ne,Ae),ee=v(wr,ee,$e),Be===null?Fe=wr:Be.sibling=wr,Be=wr,Ae=Ht}if(nt.done)return a(ne,Ae),mt&&Ur(ne,$e),Fe;if(Ae===null){for(;!nt.done;$e++,nt=re.next())nt=he(ne,nt.value,xe),nt!==null&&(ee=v(nt,ee,$e),Be===null?Fe=nt:Be.sibling=nt,Be=nt);return mt&&Ur(ne,$e),Fe}for(Ae=p(ne,Ae);!nt.done;$e++,nt=re.next())nt=Ee(Ae,ne,$e,nt.value,xe),nt!==null&&(t&&nt.alternate!==null&&Ae.delete(nt.key===null?$e:nt.key),ee=v(nt,ee,$e),Be===null?Fe=nt:Be.sibling=nt,Be=nt);return t&&Ae.forEach(function(Lx){return i(ne,Lx)}),mt&&Ur(ne,$e),Fe}function qt(ne,ee,re,xe){if(typeof re=="object"&&re!==null&&re.type===j&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case R:e:{for(var Fe=re.key,Be=ee;Be!==null;){if(Be.key===Fe){if(Fe=re.type,Fe===j){if(Be.tag===7){a(ne,Be.sibling),ee=y(Be,re.props.children),ee.return=ne,ne=ee;break e}}else if(Be.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===W&&j_(Fe)===Be.type){a(ne,Be.sibling),ee=y(Be,re.props),ee.ref=Ia(ne,Be,re),ee.return=ne,ne=ee;break e}a(ne,Be);break}else i(ne,Be);Be=Be.sibling}re.type===j?(ee=eo(re.props.children,ne.mode,xe,re.key),ee.return=ne,ne=ee):(xe=gl(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=Ia(ne,ee,re),xe.return=ne,ne=xe)}return N(ne);case C:e:{for(Be=re.key;ee!==null;){if(ee.key===Be)if(ee.tag===4&&ee.stateNode.containerInfo===re.containerInfo&&ee.stateNode.implementation===re.implementation){a(ne,ee.sibling),ee=y(ee,re.children||[]),ee.return=ne,ne=ee;break e}else{a(ne,ee);break}else i(ne,ee);ee=ee.sibling}ee=td(re,ne.mode,xe),ee.return=ne,ne=ee}return N(ne);case W:return Be=re._init,qt(ne,ee,Be(re._payload),xe)}if(Rt(re))return je(ne,ee,re,xe);if(H(re))return Te(ne,ee,re,xe);Ks(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,ee!==null&&ee.tag===6?(a(ne,ee.sibling),ee=y(ee,re),ee.return=ne,ne=ee):(a(ne,ee),ee=ed(re,ne.mode,xe),ee.return=ne,ne=ee),N(ne)):a(ne,ee)}return qt}var Ro=P_(!0),T_=P_(!1),Qs=cr(null),Ys=null,Vo=null,cc=null;function dc(){cc=Vo=Ys=null}function pc(t){var i=Qs.current;pt(Qs),t._currentValue=i}function _c(t,i,a){for(;t!==null;){var p=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),t===a)break;t=t.return}}function Fo(t,i){Ys=t,cc=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(vi=!0),t.firstContext=null)}function $i(t){var i=t._currentValue;if(cc!==t)if(t={context:t,memoizedValue:i,next:null},Vo===null){if(Ys===null)throw Error(r(308));Vo=t,Ys.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return i}var Gr=null;function mc(t){Gr===null?Gr=[t]:Gr.push(t)}function R_(t,i,a,p){var y=i.interleaved;return y===null?(a.next=a,mc(i)):(a.next=y.next,y.next=a),i.interleaved=a,Wn(t,p)}function Wn(t,i){t.lanes|=i;var a=t.alternate;for(a!==null&&(a.lanes|=i),a=t,t=t.return;t!==null;)t.childLanes|=i,a=t.alternate,a!==null&&(a.childLanes|=i),a=t,t=t.return;return a.tag===3?a.stateNode:null}var _r=!1;function fc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V_(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function mr(t,i,a){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(it&2)!==0){var y=p.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),p.pending=i,Wn(t,a)}return y=p.interleaved,y===null?(i.next=i,mc(p)):(i.next=y.next,y.next=i),p.interleaved=i,Wn(t,a)}function Xs(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var p=i.lanes;p&=t.pendingLanes,a|=p,i.lanes=a,ca(t,a)}}function F_(t,i){var a=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,a===p)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var N={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?y=v=N:v=v.next=N,a=a.next}while(a!==null);v===null?y=v=i:v=v.next=i}else y=v=i;a={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:p.shared,effects:p.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}function Zs(t,i,a,p){var y=t.updateQueue;_r=!1;var v=y.firstBaseUpdate,N=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var Q=B,oe=Q.next;Q.next=null,N===null?v=oe:N.next=oe,N=Q;var me=t.alternate;me!==null&&(me=me.updateQueue,B=me.lastBaseUpdate,B!==N&&(B===null?me.firstBaseUpdate=oe:B.next=oe,me.lastBaseUpdate=Q))}if(v!==null){var he=y.baseState;N=0,me=oe=Q=null,B=v;do{var _e=B.lane,Ee=B.eventTime;if((p&_e)===_e){me!==null&&(me=me.next={eventTime:Ee,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var je=t,Te=B;switch(_e=i,Ee=a,Te.tag){case 1:if(je=Te.payload,typeof je=="function"){he=je.call(Ee,he,_e);break e}he=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Te.payload,_e=typeof je=="function"?je.call(Ee,he,_e):je,_e==null)break e;he=J({},he,_e);break e;case 2:_r=!0}}B.callback!==null&&B.lane!==0&&(t.flags|=64,_e=y.effects,_e===null?y.effects=[B]:_e.push(B))}else Ee={eventTime:Ee,lane:_e,tag:B.tag,payload:B.payload,callback:B.callback,next:null},me===null?(oe=me=Ee,Q=he):me=me.next=Ee,N|=_e;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;_e=B,B=_e.next,_e.next=null,y.lastBaseUpdate=_e,y.shared.pending=null}}while(!0);if(me===null&&(Q=he),y.baseState=Q,y.firstBaseUpdate=oe,y.lastBaseUpdate=me,i=y.shared.interleaved,i!==null){y=i;do N|=y.lane,y=y.next;while(y!==i)}else v===null&&(y.shared.lanes=0);Yr|=N,t.lanes=N,t.memoizedState=he}}function z_(t,i,a){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var p=t[i],y=p.callback;if(y!==null){if(p.callback=null,p=a,typeof y!="function")throw Error(r(191,y));y.call(p)}}}var Na={},wn=cr(Na),ja=cr(Na),Pa=cr(Na);function Kr(t){if(t===Na)throw Error(r(174));return t}function hc(t,i){switch(ut(Pa,i),ut(ja,t),ut(wn,Na),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Gi(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Gi(i,t)}pt(wn),ut(wn,i)}function zo(){pt(wn),pt(ja),pt(Pa)}function L_(t){Kr(Pa.current);var i=Kr(wn.current),a=Gi(i,t.type);i!==a&&(ut(ja,t),ut(wn,a))}function yc(t){ja.current===t&&(pt(wn),pt(ja))}var xt=cr(0);function Js(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var gc=[];function xc(){for(var t=0;t<gc.length;t++)gc[t]._workInProgressVersionPrimary=null;gc.length=0}var el=q.ReactCurrentDispatcher,vc=q.ReactCurrentBatchConfig,Qr=0,vt=null,Ft=null,At=null,tl=!1,Ta=!1,Ra=0,ax=0;function ti(){throw Error(r(321))}function wc(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Qi(t[a],i[a]))return!1;return!0}function bc(t,i,a,p,y,v){if(Qr=v,vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,el.current=t===null||t.memoizedState===null?cx:dx,t=a(p,y),Ta){v=0;do{if(Ta=!1,Ra=0,25<=v)throw Error(r(301));v+=1,At=Ft=null,i.updateQueue=null,el.current=px,t=a(p,y)}while(Ta)}if(el.current=rl,i=Ft!==null&&Ft.next!==null,Qr=0,At=Ft=vt=null,tl=!1,i)throw Error(r(300));return t}function kc(){var t=Ra!==0;return Ra=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?vt.memoizedState=At=t:At=At.next=t,At}function Hi(){if(Ft===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var i=At===null?vt.memoizedState:At.next;if(i!==null)At=i,Ft=t;else{if(t===null)throw Error(r(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},At===null?vt.memoizedState=At=t:At=At.next=t}return At}function Va(t,i){return typeof i=="function"?i(t):i}function Sc(t){var i=Hi(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var p=Ft,y=p.baseQueue,v=a.pending;if(v!==null){if(y!==null){var N=y.next;y.next=v.next,v.next=N}p.baseQueue=y=v,a.pending=null}if(y!==null){v=y.next,p=p.baseState;var B=N=null,Q=null,oe=v;do{var me=oe.lane;if((Qr&me)===me)Q!==null&&(Q=Q.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),p=oe.hasEagerState?oe.eagerState:t(p,oe.action);else{var he={lane:me,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};Q===null?(B=Q=he,N=p):Q=Q.next=he,vt.lanes|=me,Yr|=me}oe=oe.next}while(oe!==null&&oe!==v);Q===null?N=p:Q.next=B,Qi(p,i.memoizedState)||(vi=!0),i.memoizedState=p,i.baseState=N,i.baseQueue=Q,a.lastRenderedState=p}if(t=a.interleaved,t!==null){y=t;do v=y.lane,vt.lanes|=v,Yr|=v,y=y.next;while(y!==t)}else y===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Mc(t){var i=Hi(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var p=a.dispatch,y=a.pending,v=i.memoizedState;if(y!==null){a.pending=null;var N=y=y.next;do v=t(v,N.action),N=N.next;while(N!==y);Qi(v,i.memoizedState)||(vi=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),a.lastRenderedState=v}return[v,p]}function D_(){}function O_(t,i){var a=vt,p=Hi(),y=i(),v=!Qi(p.memoizedState,y);if(v&&(p.memoizedState=y,vi=!0),p=p.queue,Cc($_.bind(null,a,p,t),[t]),p.getSnapshot!==i||v||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Fa(9,A_.bind(null,a,p,y,i),void 0,null),$t===null)throw Error(r(349));(Qr&30)!==0||B_(a,i,y)}return y}function B_(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=vt.updateQueue,i===null?(i={lastEffect:null,stores:null},vt.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function A_(t,i,a,p){i.value=a,i.getSnapshot=p,H_(i)&&W_(t)}function $_(t,i,a){return a(function(){H_(i)&&W_(t)})}function H_(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Qi(t,a)}catch{return!0}}function W_(t){var i=Wn(t,1);i!==null&&en(i,t,1,-1)}function U_(t){var i=bn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},i.queue=t,t=t.dispatch=ux.bind(null,vt,t),[i.memoizedState,t]}function Fa(t,i,a,p){return t={tag:t,create:i,destroy:a,deps:p,next:null},i=vt.updateQueue,i===null?(i={lastEffect:null,stores:null},vt.updateQueue=i,i.lastEffect=t.next=t):(a=i.lastEffect,a===null?i.lastEffect=t.next=t:(p=a.next,a.next=t,t.next=p,i.lastEffect=t)),t}function G_(){return Hi().memoizedState}function il(t,i,a,p){var y=bn();vt.flags|=t,y.memoizedState=Fa(1|i,a,void 0,p===void 0?null:p)}function nl(t,i,a,p){var y=Hi();p=p===void 0?null:p;var v=void 0;if(Ft!==null){var N=Ft.memoizedState;if(v=N.destroy,p!==null&&wc(p,N.deps)){y.memoizedState=Fa(i,a,v,p);return}}vt.flags|=t,y.memoizedState=Fa(1|i,a,v,p)}function K_(t,i){return il(8390656,8,t,i)}function Cc(t,i){return nl(2048,8,t,i)}function Q_(t,i){return nl(4,2,t,i)}function Y_(t,i){return nl(4,4,t,i)}function X_(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Z_(t,i,a){return a=a!=null?a.concat([t]):null,nl(4,4,X_.bind(null,i,t),a)}function qc(){}function J_(t,i){var a=Hi();i=i===void 0?null:i;var p=a.memoizedState;return p!==null&&i!==null&&wc(i,p[1])?p[0]:(a.memoizedState=[t,i],t)}function em(t,i){var a=Hi();i=i===void 0?null:i;var p=a.memoizedState;return p!==null&&i!==null&&wc(i,p[1])?p[0]:(t=t(),a.memoizedState=[t,i],t)}function tm(t,i,a){return(Qr&21)===0?(t.baseState&&(t.baseState=!1,vi=!0),t.memoizedState=a):(Qi(a,i)||(a=fn(),vt.lanes|=a,Yr|=a,t.baseState=!0),i)}function sx(t,i){var a=et;et=a!==0&&4>a?a:4,t(!0);var p=vc.transition;vc.transition={};try{t(!1),i()}finally{et=a,vc.transition=p}}function im(){return Hi().memoizedState}function lx(t,i,a){var p=gr(t);if(a={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null},nm(t))rm(i,a);else if(a=R_(t,i,a,p),a!==null){var y=_i();en(a,t,p,y),om(a,i,p)}}function ux(t,i,a){var p=gr(t),y={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null};if(nm(t))rm(i,y);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var N=i.lastRenderedState,B=v(N,a);if(y.hasEagerState=!0,y.eagerState=B,Qi(B,N)){var Q=i.interleaved;Q===null?(y.next=y,mc(i)):(y.next=Q.next,Q.next=y),i.interleaved=y;return}}catch{}finally{}a=R_(t,i,y,p),a!==null&&(y=_i(),en(a,t,p,y),om(a,i,p))}}function nm(t){var i=t.alternate;return t===vt||i!==null&&i===vt}function rm(t,i){Ta=tl=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function om(t,i,a){if((a&4194240)!==0){var p=i.lanes;p&=t.pendingLanes,a|=p,i.lanes=a,ca(t,a)}}var rl={readContext:$i,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},cx={readContext:$i,useCallback:function(t,i){return bn().memoizedState=[t,i===void 0?null:i],t},useContext:$i,useEffect:K_,useImperativeHandle:function(t,i,a){return a=a!=null?a.concat([t]):null,il(4194308,4,X_.bind(null,i,t),a)},useLayoutEffect:function(t,i){return il(4194308,4,t,i)},useInsertionEffect:function(t,i){return il(4,2,t,i)},useMemo:function(t,i){var a=bn();return i=i===void 0?null:i,t=t(),a.memoizedState=[t,i],t},useReducer:function(t,i,a){var p=bn();return i=a!==void 0?a(i):i,p.memoizedState=p.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},p.queue=t,t=t.dispatch=lx.bind(null,vt,t),[p.memoizedState,t]},useRef:function(t){var i=bn();return t={current:t},i.memoizedState=t},useState:U_,useDebugValue:qc,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=U_(!1),i=t[0];return t=sx.bind(null,t[1]),bn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,a){var p=vt,y=bn();if(mt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),$t===null)throw Error(r(349));(Qr&30)!==0||B_(p,i,a)}y.memoizedState=a;var v={value:a,getSnapshot:i};return y.queue=v,K_($_.bind(null,p,v,t),[t]),p.flags|=2048,Fa(9,A_.bind(null,p,v,a,i),void 0,null),a},useId:function(){var t=bn(),i=$t.identifierPrefix;if(mt){var a=Hn,p=$n;a=(p&~(1<<32-Zt(p)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ra++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=ax++,i=":"+i+"r"+a.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},dx={readContext:$i,useCallback:J_,useContext:$i,useEffect:Cc,useImperativeHandle:Z_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:em,useReducer:Sc,useRef:G_,useState:function(){return Sc(Va)},useDebugValue:qc,useDeferredValue:function(t){var i=Hi();return tm(i,Ft.memoizedState,t)},useTransition:function(){var t=Sc(Va)[0],i=Hi().memoizedState;return[t,i]},useMutableSource:D_,useSyncExternalStore:O_,useId:im,unstable_isNewReconciler:!1},px={readContext:$i,useCallback:J_,useContext:$i,useEffect:Cc,useImperativeHandle:Z_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:em,useReducer:Mc,useRef:G_,useState:function(){return Mc(Va)},useDebugValue:qc,useDeferredValue:function(t){var i=Hi();return Ft===null?i.memoizedState=t:tm(i,Ft.memoizedState,t)},useTransition:function(){var t=Mc(Va)[0],i=Hi().memoizedState;return[t,i]},useMutableSource:D_,useSyncExternalStore:O_,useId:im,unstable_isNewReconciler:!1};function Xi(t,i){if(t&&t.defaultProps){i=J({},i),t=t.defaultProps;for(var a in t)i[a]===void 0&&(i[a]=t[a]);return i}return i}function Ec(t,i,a,p){i=t.memoizedState,a=a(p,i),a=a==null?i:J({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ol={isMounted:function(t){return(t=t._reactInternals)?fi(t)===t:!1},enqueueSetState:function(t,i,a){t=t._reactInternals;var p=_i(),y=gr(t),v=Un(p,y);v.payload=i,a!=null&&(v.callback=a),i=mr(t,v,y),i!==null&&(en(i,t,y,p),Xs(i,t,y))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var p=_i(),y=gr(t),v=Un(p,y);v.tag=1,v.payload=i,a!=null&&(v.callback=a),i=mr(t,v,y),i!==null&&(en(i,t,y,p),Xs(i,t,y))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=_i(),p=gr(t),y=Un(a,p);y.tag=2,i!=null&&(y.callback=i),i=mr(t,y,p),i!==null&&(en(i,t,p,a),Xs(i,t,p))}};function am(t,i,a,p,y,v,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,v,N):i.prototype&&i.prototype.isPureReactComponent?!ba(a,p)||!ba(y,v):!0}function sm(t,i,a){var p=!1,y=dr,v=i.contextType;return typeof v=="object"&&v!==null?v=$i(v):(y=xi(i)?Hr:ei.current,p=i.contextTypes,v=(p=p!=null)?No(t,y):dr),i=new i(a,v),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ol,t.stateNode=i,i._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=y,t.__reactInternalMemoizedMaskedChildContext=v),i}function lm(t,i,a,p){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,p),i.state!==t&&ol.enqueueReplaceState(i,i.state,null)}function Ic(t,i,a,p){var y=t.stateNode;y.props=a,y.state=t.memoizedState,y.refs={},fc(t);var v=i.contextType;typeof v=="object"&&v!==null?y.context=$i(v):(v=xi(i)?Hr:ei.current,y.context=No(t,v)),y.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Ec(t,i,v,a),y.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(i=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),i!==y.state&&ol.enqueueReplaceState(y,y.state,null),Zs(t,a,y,p),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308)}function Lo(t,i){try{var a="",p=i;do a+=pe(p),p=p.return;while(p);var y=a}catch(v){y=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:i,stack:y,digest:null}}function Nc(t,i,a){return{value:t,source:null,stack:a??null,digest:i??null}}function jc(t,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function um(t,i,a){a=Un(-1,a),a.tag=3,a.payload={element:null};var p=i.value;return a.callback=function(){pl||(pl=!0,Uc=p),jc(t,i)},a}function cm(t,i,a){a=Un(-1,a),a.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var y=i.value;a.payload=function(){return p(y)},a.callback=function(){jc(t,i)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){jc(t,i),typeof p!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var N=i.stack;this.componentDidCatch(i.value,{componentStack:N!==null?N:""})}),a}function dm(t,i,a){var p=t.pingCache;if(p===null){p=t.pingCache=new _x;var y=new Set;p.set(i,y)}else y=p.get(i),y===void 0&&(y=new Set,p.set(i,y));y.has(a)||(y.add(a),t=qx.bind(null,t,i,a),i.then(t,t))}function pm(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function _m(t,i,a,p,y){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Un(-1,1),i.tag=2,mr(a,i,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=y,t)}var mx=q.ReactCurrentOwner,vi=!1;function pi(t,i,a,p){i.child=t===null?T_(i,null,a,p):Ro(i,t.child,a,p)}function mm(t,i,a,p,y){a=a.render;var v=i.ref;return Fo(i,y),p=bc(t,i,a,p,v,y),a=kc(),t!==null&&!vi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~y,Gn(t,i,y)):(mt&&a&&oc(i),i.flags|=1,pi(t,i,p,y),i.child)}function fm(t,i,a,p,y){if(t===null){var v=a.type;return typeof v=="function"&&!Jc(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=v,hm(t,i,v,p,y)):(t=gl(a.type,null,p,i,i.mode,y),t.ref=i.ref,t.return=i,i.child=t)}if(v=t.child,(t.lanes&y)===0){var N=v.memoizedProps;if(a=a.compare,a=a!==null?a:ba,a(N,p)&&t.ref===i.ref)return Gn(t,i,y)}return i.flags|=1,t=vr(v,p),t.ref=i.ref,t.return=i,i.child=t}function hm(t,i,a,p,y){if(t!==null){var v=t.memoizedProps;if(ba(v,p)&&t.ref===i.ref)if(vi=!1,i.pendingProps=p=v,(t.lanes&y)!==0)(t.flags&131072)!==0&&(vi=!0);else return i.lanes=t.lanes,Gn(t,i,y)}return Pc(t,i,a,p,y)}function ym(t,i,a){var p=i.pendingProps,y=p.children,v=t!==null?t.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Oo,Ni),Ni|=a;else{if((a&1073741824)===0)return t=v!==null?v.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,ut(Oo,Ni),Ni|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:a,ut(Oo,Ni),Ni|=p}else v!==null?(p=v.baseLanes|a,i.memoizedState=null):p=a,ut(Oo,Ni),Ni|=p;return pi(t,i,y,a),i.child}function gm(t,i){var a=i.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Pc(t,i,a,p,y){var v=xi(a)?Hr:ei.current;return v=No(i,v),Fo(i,y),a=bc(t,i,a,p,v,y),p=kc(),t!==null&&!vi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~y,Gn(t,i,y)):(mt&&p&&oc(i),i.flags|=1,pi(t,i,a,y),i.child)}function xm(t,i,a,p,y){if(xi(a)){var v=!0;$s(i)}else v=!1;if(Fo(i,y),i.stateNode===null)sl(t,i),sm(i,a,p),Ic(i,a,p,y),p=!0;else if(t===null){var N=i.stateNode,B=i.memoizedProps;N.props=B;var Q=N.context,oe=a.contextType;typeof oe=="object"&&oe!==null?oe=$i(oe):(oe=xi(a)?Hr:ei.current,oe=No(i,oe));var me=a.getDerivedStateFromProps,he=typeof me=="function"||typeof N.getSnapshotBeforeUpdate=="function";he||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==p||Q!==oe)&&lm(i,N,p,oe),_r=!1;var _e=i.memoizedState;N.state=_e,Zs(i,p,N,y),Q=i.memoizedState,B!==p||_e!==Q||gi.current||_r?(typeof me=="function"&&(Ec(i,a,me,p),Q=i.memoizedState),(B=_r||am(i,a,B,p,_e,Q,oe))?(he||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(i.flags|=4194308)):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=Q),N.props=p,N.state=Q,N.context=oe,p=B):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{N=i.stateNode,V_(t,i),B=i.memoizedProps,oe=i.type===i.elementType?B:Xi(i.type,B),N.props=oe,he=i.pendingProps,_e=N.context,Q=a.contextType,typeof Q=="object"&&Q!==null?Q=$i(Q):(Q=xi(a)?Hr:ei.current,Q=No(i,Q));var Ee=a.getDerivedStateFromProps;(me=typeof Ee=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==he||_e!==Q)&&lm(i,N,p,Q),_r=!1,_e=i.memoizedState,N.state=_e,Zs(i,p,N,y);var je=i.memoizedState;B!==he||_e!==je||gi.current||_r?(typeof Ee=="function"&&(Ec(i,a,Ee,p),je=i.memoizedState),(oe=_r||am(i,a,oe,p,_e,je,Q)||!1)?(me||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(p,je,Q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(p,je,Q)),typeof N.componentDidUpdate=="function"&&(i.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===t.memoizedProps&&_e===t.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&_e===t.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=je),N.props=p,N.state=je,N.context=Q,p=oe):(typeof N.componentDidUpdate!="function"||B===t.memoizedProps&&_e===t.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&_e===t.memoizedState||(i.flags|=1024),p=!1)}return Tc(t,i,a,p,v,y)}function Tc(t,i,a,p,y,v){gm(t,i);var N=(i.flags&128)!==0;if(!p&&!N)return y&&S_(i,a,!1),Gn(t,i,v);p=i.stateNode,mx.current=i;var B=N&&typeof a.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,t!==null&&N?(i.child=Ro(i,t.child,null,v),i.child=Ro(i,null,B,v)):pi(t,i,B,v),i.memoizedState=p.state,y&&S_(i,a,!0),i.child}function vm(t){var i=t.stateNode;i.pendingContext?b_(t,i.pendingContext,i.pendingContext!==i.context):i.context&&b_(t,i.context,!1),hc(t,i.containerInfo)}function wm(t,i,a,p,y){return To(),uc(y),i.flags|=256,pi(t,i,a,p),i.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function bm(t,i,a){var p=i.pendingProps,y=xt.current,v=!1,N=(i.flags&128)!==0,B;if((B=N)||(B=t!==null&&t.memoizedState===null?!1:(y&2)!==0),B?(v=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(y|=1),ut(xt,y&1),t===null)return lc(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(N=p.children,t=p.fallback,v?(p=i.mode,v=i.child,N={mode:"hidden",children:N},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=N):v=xl(N,p,0,null),t=eo(t,p,a,null),v.return=i,t.return=i,v.sibling=t,i.child=v,i.child.memoizedState=Vc(a),i.memoizedState=Rc,t):Fc(i,N));if(y=t.memoizedState,y!==null&&(B=y.dehydrated,B!==null))return fx(t,i,N,p,B,y,a);if(v){v=p.fallback,N=i.mode,y=t.child,B=y.sibling;var Q={mode:"hidden",children:p.children};return(N&1)===0&&i.child!==y?(p=i.child,p.childLanes=0,p.pendingProps=Q,i.deletions=null):(p=vr(y,Q),p.subtreeFlags=y.subtreeFlags&14680064),B!==null?v=vr(B,v):(v=eo(v,N,a,null),v.flags|=2),v.return=i,p.return=i,p.sibling=v,i.child=p,p=v,v=i.child,N=t.child.memoizedState,N=N===null?Vc(a):{baseLanes:N.baseLanes|a,cachePool:null,transitions:N.transitions},v.memoizedState=N,v.childLanes=t.childLanes&~a,i.memoizedState=Rc,p}return v=t.child,t=v.sibling,p=vr(v,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=a),p.return=i,p.sibling=null,t!==null&&(a=i.deletions,a===null?(i.deletions=[t],i.flags|=16):a.push(t)),i.child=p,i.memoizedState=null,p}function Fc(t,i){return i=xl({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function al(t,i,a,p){return p!==null&&uc(p),Ro(i,t.child,null,a),t=Fc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fx(t,i,a,p,y,v,N){if(a)return i.flags&256?(i.flags&=-257,p=Nc(Error(r(422))),al(t,i,N,p)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(v=p.fallback,y=i.mode,p=xl({mode:"visible",children:p.children},y,0,null),v=eo(v,y,N,null),v.flags|=2,p.return=i,v.return=i,p.sibling=v,i.child=p,(i.mode&1)!==0&&Ro(i,t.child,null,N),i.child.memoizedState=Vc(N),i.memoizedState=Rc,v);if((i.mode&1)===0)return al(t,i,N,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var B=p.dgst;return p=B,v=Error(r(419)),p=Nc(v,p,void 0),al(t,i,N,p)}if(B=(N&t.childLanes)!==0,vi||B){if(p=$t,p!==null){switch(N&-N){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|N))!==0?0:y,y!==0&&y!==v.retryLane&&(v.retryLane=y,Wn(t,y),en(p,t,y,-1))}return Zc(),p=Nc(Error(r(421))),al(t,i,N,p)}return y.data==="$?"?(i.flags|=128,i.child=t.child,i=Ex.bind(null,t),y._reactRetry=i,null):(t=v.treeContext,Ii=ur(y.nextSibling),Ei=i,mt=!0,Yi=null,t!==null&&(Bi[Ai++]=$n,Bi[Ai++]=Hn,Bi[Ai++]=Wr,$n=t.id,Hn=t.overflow,Wr=i),i=Fc(i,p.children),i.flags|=4096,i)}function km(t,i,a){t.lanes|=i;var p=t.alternate;p!==null&&(p.lanes|=i),_c(t.return,i,a)}function zc(t,i,a,p,y){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:a,tailMode:y}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=a,v.tailMode=y)}function Sm(t,i,a){var p=i.pendingProps,y=p.revealOrder,v=p.tail;if(pi(t,i,p.children,a),p=xt.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&km(t,a,i);else if(t.tag===19)km(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(ut(xt,p),(i.mode&1)===0)i.memoizedState=null;else switch(y){case"forwards":for(a=i.child,y=null;a!==null;)t=a.alternate,t!==null&&Js(t)===null&&(y=a),a=a.sibling;a=y,a===null?(y=i.child,i.child=null):(y=a.sibling,a.sibling=null),zc(i,!1,y,a,v);break;case"backwards":for(a=null,y=i.child,i.child=null;y!==null;){if(t=y.alternate,t!==null&&Js(t)===null){i.child=y;break}t=y.sibling,y.sibling=a,a=y,y=t}zc(i,!0,a,null,v);break;case"together":zc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function sl(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Gn(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Yr|=i.lanes,(a&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=vr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=vr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function hx(t,i,a){switch(i.tag){case 3:vm(i),To();break;case 5:L_(i);break;case 1:xi(i.type)&&$s(i);break;case 4:hc(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,y=i.memoizedProps.value;ut(Qs,p._currentValue),p._currentValue=y;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(ut(xt,xt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?bm(t,i,a):(ut(xt,xt.current&1),t=Gn(t,i,a),t!==null?t.sibling:null);ut(xt,xt.current&1);break;case 19:if(p=(a&i.childLanes)!==0,(t.flags&128)!==0){if(p)return Sm(t,i,a);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ut(xt,xt.current),p)break;return null;case 22:case 23:return i.lanes=0,ym(t,i,a)}return Gn(t,i,a)}var Mm,Lc,Cm,qm;Mm=function(t,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Lc=function(){},Cm=function(t,i,a,p){var y=t.memoizedProps;if(y!==p){t=i.stateNode,Kr(wn.current);var v=null;switch(a){case"input":y=We(t,y),p=We(t,p),v=[];break;case"select":y=J({},y,{value:void 0}),p=J({},p,{value:void 0}),v=[];break;case"textarea":y=Ut(t,y),p=Ut(t,p),v=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=Os)}Fi(a,p);var N;a=null;for(oe in y)if(!p.hasOwnProperty(oe)&&y.hasOwnProperty(oe)&&y[oe]!=null)if(oe==="style"){var B=y[oe];for(N in B)B.hasOwnProperty(N)&&(a||(a={}),a[N]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(s.hasOwnProperty(oe)?v||(v=[]):(v=v||[]).push(oe,null));for(oe in p){var Q=p[oe];if(B=y!=null?y[oe]:void 0,p.hasOwnProperty(oe)&&Q!==B&&(Q!=null||B!=null))if(oe==="style")if(B){for(N in B)!B.hasOwnProperty(N)||Q&&Q.hasOwnProperty(N)||(a||(a={}),a[N]="");for(N in Q)Q.hasOwnProperty(N)&&B[N]!==Q[N]&&(a||(a={}),a[N]=Q[N])}else a||(v||(v=[]),v.push(oe,a)),a=Q;else oe==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,B=B?B.__html:void 0,Q!=null&&B!==Q&&(v=v||[]).push(oe,Q)):oe==="children"?typeof Q!="string"&&typeof Q!="number"||(v=v||[]).push(oe,""+Q):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(s.hasOwnProperty(oe)?(Q!=null&&oe==="onScroll"&&dt("scroll",t),v||B===Q||(v=[])):(v=v||[]).push(oe,Q))}a&&(v=v||[]).push("style",a);var oe=v;(i.updateQueue=oe)&&(i.flags|=4)}},qm=function(t,i,a,p){a!==p&&(i.flags|=4)};function za(t,i){if(!mt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ii(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,p=0;if(i)for(var y=t.child;y!==null;)a|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)a|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=p,t.childLanes=a,i}function yx(t,i,a){var p=i.pendingProps;switch(ac(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(i),null;case 1:return xi(i.type)&&As(),ii(i),null;case 3:return p=i.stateNode,zo(),pt(gi),pt(ei),xc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(Gs(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yi!==null&&(Qc(Yi),Yi=null))),Lc(t,i),ii(i),null;case 5:yc(i);var y=Kr(Pa.current);if(a=i.type,t!==null&&i.stateNode!=null)Cm(t,i,a,p,y),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(r(166));return ii(i),null}if(t=Kr(wn.current),Gs(i)){p=i.stateNode,a=i.type;var v=i.memoizedProps;switch(p[vn]=i,p[qa]=v,t=(i.mode&1)!==0,a){case"dialog":dt("cancel",p),dt("close",p);break;case"iframe":case"object":case"embed":dt("load",p);break;case"video":case"audio":for(y=0;y<Sa.length;y++)dt(Sa[y],p);break;case"source":dt("error",p);break;case"img":case"image":case"link":dt("error",p),dt("load",p);break;case"details":dt("toggle",p);break;case"input":Je(p,v),dt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},dt("invalid",p);break;case"textarea":mi(p,v),dt("invalid",p)}Fi(a,v),y=null;for(var N in v)if(v.hasOwnProperty(N)){var B=v[N];N==="children"?typeof B=="string"?p.textContent!==B&&(v.suppressHydrationWarning!==!0&&Ds(p.textContent,B,t),y=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(v.suppressHydrationWarning!==!0&&Ds(p.textContent,B,t),y=["children",""+B]):s.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&dt("scroll",p)}switch(a){case"input":Oe(p),Wt(p,v,!0);break;case"textarea":Oe(p),Vi(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=Os)}p=y,i.updateQueue=p,p!==null&&(i.flags|=4)}else{N=y.nodeType===9?y:y.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oi(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=N.createElement(a,{is:p.is}):(t=N.createElement(a),a==="select"&&(N=t,p.multiple?N.multiple=!0:p.size&&(N.size=p.size))):t=N.createElementNS(t,a),t[vn]=i,t[qa]=p,Mm(t,i,!1,!1),i.stateNode=t;e:{switch(N=_n(a,p),a){case"dialog":dt("cancel",t),dt("close",t),y=p;break;case"iframe":case"object":case"embed":dt("load",t),y=p;break;case"video":case"audio":for(y=0;y<Sa.length;y++)dt(Sa[y],t);y=p;break;case"source":dt("error",t),y=p;break;case"img":case"image":case"link":dt("error",t),dt("load",t),y=p;break;case"details":dt("toggle",t),y=p;break;case"input":Je(t,p),y=We(t,p),dt("invalid",t);break;case"option":y=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},y=J({},p,{value:void 0}),dt("invalid",t);break;case"textarea":mi(t,p),y=Ut(t,p),dt("invalid",t);break;default:y=p}Fi(a,y),B=y;for(v in B)if(B.hasOwnProperty(v)){var Q=B[v];v==="style"?Ze(t,Q):v==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&er(t,Q)):v==="children"?typeof Q=="string"?(a!=="textarea"||Q!=="")&&Ue(t,Q):typeof Q=="number"&&Ue(t,""+Q):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?Q!=null&&v==="onScroll"&&dt("scroll",t):Q!=null&&M(t,v,Q,N))}switch(a){case"input":Oe(t),Wt(t,p,!1);break;case"textarea":Oe(t),Vi(t);break;case"option":p.value!=null&&t.setAttribute("value",""+le(p.value));break;case"select":t.multiple=!!p.multiple,v=p.value,v!=null?Lt(t,!!p.multiple,v,!1):p.defaultValue!=null&&Lt(t,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(t.onclick=Os)}switch(a){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ii(i),null;case 6:if(t&&i.stateNode!=null)qm(t,i,t.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(r(166));if(a=Kr(Pa.current),Kr(wn.current),Gs(i)){if(p=i.stateNode,a=i.memoizedProps,p[vn]=i,(v=p.nodeValue!==a)&&(t=Ei,t!==null))switch(t.tag){case 3:Ds(p.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ds(p.nodeValue,a,(t.mode&1)!==0)}v&&(i.flags|=4)}else p=(a.nodeType===9?a:a.ownerDocument).createTextNode(p),p[vn]=i,i.stateNode=p}return ii(i),null;case 13:if(pt(xt),p=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Ii!==null&&(i.mode&1)!==0&&(i.flags&128)===0)N_(),To(),i.flags|=98560,v=!1;else if(v=Gs(i),p!==null&&p.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[vn]=i}else To(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ii(i),v=!1}else Yi!==null&&(Qc(Yi),Yi=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(xt.current&1)!==0?zt===0&&(zt=3):Zc())),i.updateQueue!==null&&(i.flags|=4),ii(i),null);case 4:return zo(),Lc(t,i),t===null&&Ma(i.stateNode.containerInfo),ii(i),null;case 10:return pc(i.type._context),ii(i),null;case 17:return xi(i.type)&&As(),ii(i),null;case 19:if(pt(xt),v=i.memoizedState,v===null)return ii(i),null;if(p=(i.flags&128)!==0,N=v.rendering,N===null)if(p)za(v,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(N=Js(t),N!==null){for(i.flags|=128,za(v,!1),p=N.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=a,a=i.child;a!==null;)v=a,t=p,v.flags&=14680066,N=v.alternate,N===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=N.childLanes,v.lanes=N.lanes,v.child=N.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=N.memoizedProps,v.memoizedState=N.memoizedState,v.updateQueue=N.updateQueue,v.type=N.type,t=N.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return ut(xt,xt.current&1|2),i.child}t=t.sibling}v.tail!==null&&ct()>Bo&&(i.flags|=128,p=!0,za(v,!1),i.lanes=4194304)}else{if(!p)if(t=Js(N),t!==null){if(i.flags|=128,p=!0,a=t.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),za(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!mt)return ii(i),null}else 2*ct()-v.renderingStartTime>Bo&&a!==1073741824&&(i.flags|=128,p=!0,za(v,!1),i.lanes=4194304);v.isBackwards?(N.sibling=i.child,i.child=N):(a=v.last,a!==null?a.sibling=N:i.child=N,v.last=N)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=ct(),i.sibling=null,a=xt.current,ut(xt,p?a&1|2:a&1),i):(ii(i),null);case 22:case 23:return Xc(),p=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(Ni&1073741824)!==0&&(ii(i),i.subtreeFlags&6&&(i.flags|=8192)):ii(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function gx(t,i){switch(ac(i),i.tag){case 1:return xi(i.type)&&As(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return zo(),pt(gi),pt(ei),xc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return yc(i),null;case 13:if(pt(xt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));To()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return pt(xt),null;case 4:return zo(),null;case 10:return pc(i.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var ll=!1,ni=!1,xx=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Do(t,i){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){Mt(t,i,p)}else a.current=null}function Dc(t,i,a){try{a()}catch(p){Mt(t,i,p)}}var Em=!1;function vx(t,i){if(Xu=xo,t=a_(),$u(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var p=a.getSelection&&a.getSelection();if(p&&p.rangeCount!==0){a=p.anchorNode;var y=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var N=0,B=-1,Q=-1,oe=0,me=0,he=t,_e=null;t:for(;;){for(var Ee;he!==a||y!==0&&he.nodeType!==3||(B=N+y),he!==v||p!==0&&he.nodeType!==3||(Q=N+p),he.nodeType===3&&(N+=he.nodeValue.length),(Ee=he.firstChild)!==null;)_e=he,he=Ee;for(;;){if(he===t)break t;if(_e===a&&++oe===y&&(B=N),_e===v&&++me===p&&(Q=N),(Ee=he.nextSibling)!==null)break;he=_e,_e=he.parentNode}he=Ee}a=B===-1||Q===-1?null:{start:B,end:Q}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zu={focusedElem:t,selectionRange:a},xo=!1,Ne=i;Ne!==null;)if(i=Ne,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ne=t;else for(;Ne!==null;){i=Ne;try{var je=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Te=je.memoizedProps,qt=je.memoizedState,ne=i.stateNode,ee=ne.getSnapshotBeforeUpdate(i.elementType===i.type?Te:Xi(i.type,Te),qt);ne.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var re=i.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(xe){Mt(i,i.return,xe)}if(t=i.sibling,t!==null){t.return=i.return,Ne=t;break}Ne=i.return}return je=Em,Em=!1,je}function La(t,i,a){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&t)===t){var v=y.destroy;y.destroy=void 0,v!==void 0&&Dc(i,a,v)}y=y.next}while(y!==p)}}function ul(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var p=a.create;a.destroy=p()}a=a.next}while(a!==i)}}function Oc(t){var i=t.ref;if(i!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof i=="function"?i(t):i.current=t}}function Im(t){var i=t.alternate;i!==null&&(t.alternate=null,Im(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[vn],delete i[qa],delete i[ic],delete i[ix],delete i[nx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nm(t){return t.tag===5||t.tag===3||t.tag===4}function jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bc(t,i,a){var p=t.tag;if(p===5||p===6)t=t.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(t,i):a.insertBefore(t,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(t,a)):(i=a,i.appendChild(t)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Os));else if(p!==4&&(t=t.child,t!==null))for(Bc(t,i,a),t=t.sibling;t!==null;)Bc(t,i,a),t=t.sibling}function Ac(t,i,a){var p=t.tag;if(p===5||p===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(Ac(t,i,a),t=t.sibling;t!==null;)Ac(t,i,a),t=t.sibling}var Qt=null,Zi=!1;function fr(t,i,a){for(a=a.child;a!==null;)Pm(t,i,a),a=a.sibling}function Pm(t,i,a){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(He,a)}catch{}switch(a.tag){case 5:ni||Do(a,i);case 6:var p=Qt,y=Zi;Qt=null,fr(t,i,a),Qt=p,Zi=y,Qt!==null&&(Zi?(t=Qt,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Qt.removeChild(a.stateNode));break;case 18:Qt!==null&&(Zi?(t=Qt,a=a.stateNode,t.nodeType===8?tc(t.parentNode,a):t.nodeType===1&&tc(t,a),Or(t)):tc(Qt,a.stateNode));break;case 4:p=Qt,y=Zi,Qt=a.stateNode.containerInfo,Zi=!0,fr(t,i,a),Qt=p,Zi=y;break;case 0:case 11:case 14:case 15:if(!ni&&(p=a.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var v=y,N=v.destroy;v=v.tag,N!==void 0&&((v&2)!==0||(v&4)!==0)&&Dc(a,i,N),y=y.next}while(y!==p)}fr(t,i,a);break;case 1:if(!ni&&(Do(a,i),p=a.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=a.memoizedProps,p.state=a.memoizedState,p.componentWillUnmount()}catch(B){Mt(a,i,B)}fr(t,i,a);break;case 21:fr(t,i,a);break;case 22:a.mode&1?(ni=(p=ni)||a.memoizedState!==null,fr(t,i,a),ni=p):fr(t,i,a);break;default:fr(t,i,a)}}function Tm(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new xx),i.forEach(function(p){var y=Ix.bind(null,t,p);a.has(p)||(a.add(p),p.then(y,y))})}}function Ji(t,i){var a=i.deletions;if(a!==null)for(var p=0;p<a.length;p++){var y=a[p];try{var v=t,N=i,B=N;e:for(;B!==null;){switch(B.tag){case 5:Qt=B.stateNode,Zi=!1;break e;case 3:Qt=B.stateNode.containerInfo,Zi=!0;break e;case 4:Qt=B.stateNode.containerInfo,Zi=!0;break e}B=B.return}if(Qt===null)throw Error(r(160));Pm(v,N,y),Qt=null,Zi=!1;var Q=y.alternate;Q!==null&&(Q.return=null),y.return=null}catch(oe){Mt(y,i,oe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Rm(i,t),i=i.sibling}function Rm(t,i){var a=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ji(i,t),kn(t),p&4){try{La(3,t,t.return),ul(3,t)}catch(Te){Mt(t,t.return,Te)}try{La(5,t,t.return)}catch(Te){Mt(t,t.return,Te)}}break;case 1:Ji(i,t),kn(t),p&512&&a!==null&&Do(a,a.return);break;case 5:if(Ji(i,t),kn(t),p&512&&a!==null&&Do(a,a.return),t.flags&32){var y=t.stateNode;try{Ue(y,"")}catch(Te){Mt(t,t.return,Te)}}if(p&4&&(y=t.stateNode,y!=null)){var v=t.memoizedProps,N=a!==null?a.memoizedProps:v,B=t.type,Q=t.updateQueue;if(t.updateQueue=null,Q!==null)try{B==="input"&&v.type==="radio"&&v.name!=null&&Ke(y,v),_n(B,N);var oe=_n(B,v);for(N=0;N<Q.length;N+=2){var me=Q[N],he=Q[N+1];me==="style"?Ze(y,he):me==="dangerouslySetInnerHTML"?er(y,he):me==="children"?Ue(y,he):M(y,me,he,oe)}switch(B){case"input":st(y,v);break;case"textarea":Dt(y,v);break;case"select":var _e=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!v.multiple;var Ee=v.value;Ee!=null?Lt(y,!!v.multiple,Ee,!1):_e!==!!v.multiple&&(v.defaultValue!=null?Lt(y,!!v.multiple,v.defaultValue,!0):Lt(y,!!v.multiple,v.multiple?[]:"",!1))}y[qa]=v}catch(Te){Mt(t,t.return,Te)}}break;case 6:if(Ji(i,t),kn(t),p&4){if(t.stateNode===null)throw Error(r(162));y=t.stateNode,v=t.memoizedProps;try{y.nodeValue=v}catch(Te){Mt(t,t.return,Te)}}break;case 3:if(Ji(i,t),kn(t),p&4&&a!==null&&a.memoizedState.isDehydrated)try{Or(i.containerInfo)}catch(Te){Mt(t,t.return,Te)}break;case 4:Ji(i,t),kn(t);break;case 13:Ji(i,t),kn(t),y=t.child,y.flags&8192&&(v=y.memoizedState!==null,y.stateNode.isHidden=v,!v||y.alternate!==null&&y.alternate.memoizedState!==null||(Wc=ct())),p&4&&Tm(t);break;case 22:if(me=a!==null&&a.memoizedState!==null,t.mode&1?(ni=(oe=ni)||me,Ji(i,t),ni=oe):Ji(i,t),kn(t),p&8192){if(oe=t.memoizedState!==null,(t.stateNode.isHidden=oe)&&!me&&(t.mode&1)!==0)for(Ne=t,me=t.child;me!==null;){for(he=Ne=me;Ne!==null;){switch(_e=Ne,Ee=_e.child,_e.tag){case 0:case 11:case 14:case 15:La(4,_e,_e.return);break;case 1:Do(_e,_e.return);var je=_e.stateNode;if(typeof je.componentWillUnmount=="function"){p=_e,a=_e.return;try{i=p,je.props=i.memoizedProps,je.state=i.memoizedState,je.componentWillUnmount()}catch(Te){Mt(p,a,Te)}}break;case 5:Do(_e,_e.return);break;case 22:if(_e.memoizedState!==null){zm(he);continue}}Ee!==null?(Ee.return=_e,Ne=Ee):zm(he)}me=me.sibling}e:for(me=null,he=t;;){if(he.tag===5){if(me===null){me=he;try{y=he.stateNode,oe?(v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(B=he.stateNode,Q=he.memoizedProps.style,N=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,B.style.display=dn("display",N))}catch(Te){Mt(t,t.return,Te)}}}else if(he.tag===6){if(me===null)try{he.stateNode.nodeValue=oe?"":he.memoizedProps}catch(Te){Mt(t,t.return,Te)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===t)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===t)break e;for(;he.sibling===null;){if(he.return===null||he.return===t)break e;me===he&&(me=null),he=he.return}me===he&&(me=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Ji(i,t),kn(t),p&4&&Tm(t);break;case 21:break;default:Ji(i,t),kn(t)}}function kn(t){var i=t.flags;if(i&2){try{e:{for(var a=t.return;a!==null;){if(Nm(a)){var p=a;break e}a=a.return}throw Error(r(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Ue(y,""),p.flags&=-33);var v=jm(t);Ac(t,v,y);break;case 3:case 4:var N=p.stateNode.containerInfo,B=jm(t);Bc(t,B,N);break;default:throw Error(r(161))}}catch(Q){Mt(t,t.return,Q)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function wx(t,i,a){Ne=t,Vm(t)}function Vm(t,i,a){for(var p=(t.mode&1)!==0;Ne!==null;){var y=Ne,v=y.child;if(y.tag===22&&p){var N=y.memoizedState!==null||ll;if(!N){var B=y.alternate,Q=B!==null&&B.memoizedState!==null||ni;B=ll;var oe=ni;if(ll=N,(ni=Q)&&!oe)for(Ne=y;Ne!==null;)N=Ne,Q=N.child,N.tag===22&&N.memoizedState!==null?Lm(y):Q!==null?(Q.return=N,Ne=Q):Lm(y);for(;v!==null;)Ne=v,Vm(v),v=v.sibling;Ne=y,ll=B,ni=oe}Fm(t)}else(y.subtreeFlags&8772)!==0&&v!==null?(v.return=y,Ne=v):Fm(t)}}function Fm(t){for(;Ne!==null;){var i=Ne;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ni||ul(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!ni)if(a===null)p.componentDidMount();else{var y=i.elementType===i.type?a.memoizedProps:Xi(i.type,a.memoizedProps);p.componentDidUpdate(y,a.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&z_(i,v,p);break;case 3:var N=i.updateQueue;if(N!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}z_(i,N,a)}break;case 5:var B=i.stateNode;if(a===null&&i.flags&4){a=B;var Q=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&a.focus();break;case"img":Q.src&&(a.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var oe=i.alternate;if(oe!==null){var me=oe.memoizedState;if(me!==null){var he=me.dehydrated;he!==null&&Or(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ni||i.flags&512&&Oc(i)}catch(_e){Mt(i,i.return,_e)}}if(i===t){Ne=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ne=a;break}Ne=i.return}}function zm(t){for(;Ne!==null;){var i=Ne;if(i===t){Ne=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ne=a;break}Ne=i.return}}function Lm(t){for(;Ne!==null;){var i=Ne;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ul(4,i)}catch(Q){Mt(i,a,Q)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var y=i.return;try{p.componentDidMount()}catch(Q){Mt(i,y,Q)}}var v=i.return;try{Oc(i)}catch(Q){Mt(i,v,Q)}break;case 5:var N=i.return;try{Oc(i)}catch(Q){Mt(i,N,Q)}}}catch(Q){Mt(i,i.return,Q)}if(i===t){Ne=null;break}var B=i.sibling;if(B!==null){B.return=i.return,Ne=B;break}Ne=i.return}}var bx=Math.ceil,cl=q.ReactCurrentDispatcher,$c=q.ReactCurrentOwner,Wi=q.ReactCurrentBatchConfig,it=0,$t=null,Pt=null,Yt=0,Ni=0,Oo=cr(0),zt=0,Da=null,Yr=0,dl=0,Hc=0,Oa=null,wi=null,Wc=0,Bo=1/0,Kn=null,pl=!1,Uc=null,hr=null,_l=!1,yr=null,ml=0,Ba=0,Gc=null,fl=-1,hl=0;function _i(){return(it&6)!==0?ct():fl!==-1?fl:fl=ct()}function gr(t){return(t.mode&1)===0?1:(it&2)!==0&&Yt!==0?Yt&-Yt:ox.transition!==null?(hl===0&&(hl=fn()),hl):(t=et,t!==0||(t=window.event,t=t===void 0?16:js(t.type)),t)}function en(t,i,a,p){if(50<Ba)throw Ba=0,Gc=null,Error(r(185));zi(t,a,p),((it&2)===0||t!==$t)&&(t===$t&&((it&2)===0&&(dl|=a),zt===4&&xr(t,Yt)),bi(t,p),a===1&&it===0&&(i.mode&1)===0&&(Bo=ct()+500,Hs&&pr()))}function bi(t,i){var a=t.callbackNode;rr(t,i);var p=Ln(t,t===$t?Yt:0);if(p===0)a!==null&&mo(a),t.callbackNode=null,t.callbackPriority=0;else if(i=p&-p,t.callbackPriority!==i){if(a!=null&&mo(a),i===1)t.tag===0?rx(Om.bind(null,t)):M_(Om.bind(null,t)),ex(function(){(it&6)===0&&pr()}),a=null;else{switch(Cs(p)){case 1:a=Gt;break;case 4:a=fo;break;case 16:a=hi;break;case 536870912:a=Rr;break;default:a=hi}a=Km(a,Dm.bind(null,t))}t.callbackPriority=i,t.callbackNode=a}}function Dm(t,i){if(fl=-1,hl=0,(it&6)!==0)throw Error(r(327));var a=t.callbackNode;if(Ao()&&t.callbackNode!==a)return null;var p=Ln(t,t===$t?Yt:0);if(p===0)return null;if((p&30)!==0||(p&t.expiredLanes)!==0||i)i=yl(t,p);else{i=p;var y=it;it|=2;var v=Am();($t!==t||Yt!==i)&&(Kn=null,Bo=ct()+500,Zr(t,i));do try{Mx();break}catch(B){Bm(t,B)}while(!0);dc(),cl.current=v,it=y,Pt!==null?i=0:($t=null,Yt=0,i=zt)}if(i!==0){if(i===2&&(y=or(t),y!==0&&(p=y,i=Kc(t,y))),i===1)throw a=Da,Zr(t,0),xr(t,p),bi(t,ct()),a;if(i===6)xr(t,p);else{if(y=t.current.alternate,(p&30)===0&&!kx(y)&&(i=yl(t,p),i===2&&(v=or(t),v!==0&&(p=v,i=Kc(t,v))),i===1))throw a=Da,Zr(t,0),xr(t,p),bi(t,ct()),a;switch(t.finishedWork=y,t.finishedLanes=p,i){case 0:case 1:throw Error(r(345));case 2:Jr(t,wi,Kn);break;case 3:if(xr(t,p),(p&130023424)===p&&(i=Wc+500-ct(),10<i)){if(Ln(t,0)!==0)break;if(y=t.suspendedLanes,(y&p)!==p){_i(),t.pingedLanes|=t.suspendedLanes&y;break}t.timeoutHandle=ec(Jr.bind(null,t,wi,Kn),i);break}Jr(t,wi,Kn);break;case 4:if(xr(t,p),(p&4194240)===p)break;for(i=t.eventTimes,y=-1;0<p;){var N=31-Zt(p);v=1<<N,N=i[N],N>y&&(y=N),p&=~v}if(p=y,p=ct()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*bx(p/1960))-p,10<p){t.timeoutHandle=ec(Jr.bind(null,t,wi,Kn),p);break}Jr(t,wi,Kn);break;case 5:Jr(t,wi,Kn);break;default:throw Error(r(329))}}}return bi(t,ct()),t.callbackNode===a?Dm.bind(null,t):null}function Kc(t,i){var a=Oa;return t.current.memoizedState.isDehydrated&&(Zr(t,i).flags|=256),t=yl(t,i),t!==2&&(i=wi,wi=a,i!==null&&Qc(i)),t}function Qc(t){wi===null?wi=t:wi.push.apply(wi,t)}function kx(t){for(var i=t;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var p=0;p<a.length;p++){var y=a[p],v=y.getSnapshot;y=y.value;try{if(!Qi(v(),y))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xr(t,i){for(i&=~Hc,i&=~dl,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var a=31-Zt(i),p=1<<a;t[a]=-1,i&=~p}}function Om(t){if((it&6)!==0)throw Error(r(327));Ao();var i=Ln(t,0);if((i&1)===0)return bi(t,ct()),null;var a=yl(t,i);if(t.tag!==0&&a===2){var p=or(t);p!==0&&(i=p,a=Kc(t,p))}if(a===1)throw a=Da,Zr(t,0),xr(t,i),bi(t,ct()),a;if(a===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Jr(t,wi,Kn),bi(t,ct()),null}function Yc(t,i){var a=it;it|=1;try{return t(i)}finally{it=a,it===0&&(Bo=ct()+500,Hs&&pr())}}function Xr(t){yr!==null&&yr.tag===0&&(it&6)===0&&Ao();var i=it;it|=1;var a=Wi.transition,p=et;try{if(Wi.transition=null,et=1,t)return t()}finally{et=p,Wi.transition=a,it=i,(it&6)===0&&pr()}}function Xc(){Ni=Oo.current,pt(Oo)}function Zr(t,i){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,Jg(a)),Pt!==null)for(a=Pt.return;a!==null;){var p=a;switch(ac(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&As();break;case 3:zo(),pt(gi),pt(ei),xc();break;case 5:yc(p);break;case 4:zo();break;case 13:pt(xt);break;case 19:pt(xt);break;case 10:pc(p.type._context);break;case 22:case 23:Xc()}a=a.return}if($t=t,Pt=t=vr(t.current,null),Yt=Ni=i,zt=0,Da=null,Hc=dl=Yr=0,wi=Oa=null,Gr!==null){for(i=0;i<Gr.length;i++)if(a=Gr[i],p=a.interleaved,p!==null){a.interleaved=null;var y=p.next,v=a.pending;if(v!==null){var N=v.next;v.next=y,p.next=N}a.pending=p}Gr=null}return t}function Bm(t,i){do{var a=Pt;try{if(dc(),el.current=rl,tl){for(var p=vt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}tl=!1}if(Qr=0,At=Ft=vt=null,Ta=!1,Ra=0,$c.current=null,a===null||a.return===null){zt=1,Da=i,Pt=null;break}e:{var v=t,N=a.return,B=a,Q=i;if(i=Yt,B.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var oe=Q,me=B,he=me.tag;if((me.mode&1)===0&&(he===0||he===11||he===15)){var _e=me.alternate;_e?(me.updateQueue=_e.updateQueue,me.memoizedState=_e.memoizedState,me.lanes=_e.lanes):(me.updateQueue=null,me.memoizedState=null)}var Ee=pm(N);if(Ee!==null){Ee.flags&=-257,_m(Ee,N,B,v,i),Ee.mode&1&&dm(v,oe,i),i=Ee,Q=oe;var je=i.updateQueue;if(je===null){var Te=new Set;Te.add(Q),i.updateQueue=Te}else je.add(Q);break e}else{if((i&1)===0){dm(v,oe,i),Zc();break e}Q=Error(r(426))}}else if(mt&&B.mode&1){var qt=pm(N);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),_m(qt,N,B,v,i),uc(Lo(Q,B));break e}}v=Q=Lo(Q,B),zt!==4&&(zt=2),Oa===null?Oa=[v]:Oa.push(v),v=N;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var ne=um(v,Q,i);F_(v,ne);break e;case 1:B=Q;var ee=v.type,re=v.stateNode;if((v.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(hr===null||!hr.has(re)))){v.flags|=65536,i&=-i,v.lanes|=i;var xe=cm(v,B,i);F_(v,xe);break e}}v=v.return}while(v!==null)}Hm(a)}catch(Fe){i=Fe,Pt===a&&a!==null&&(Pt=a=a.return);continue}break}while(!0)}function Am(){var t=cl.current;return cl.current=rl,t===null?rl:t}function Zc(){(zt===0||zt===3||zt===2)&&(zt=4),$t===null||(Yr&268435455)===0&&(dl&268435455)===0||xr($t,Yt)}function yl(t,i){var a=it;it|=2;var p=Am();($t!==t||Yt!==i)&&(Kn=null,Zr(t,i));do try{Sx();break}catch(y){Bm(t,y)}while(!0);if(dc(),it=a,cl.current=p,Pt!==null)throw Error(r(261));return $t=null,Yt=0,zt}function Sx(){for(;Pt!==null;)$m(Pt)}function Mx(){for(;Pt!==null&&!Tr();)$m(Pt)}function $m(t){var i=Gm(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,i===null?Hm(t):Pt=i,$c.current=null}function Hm(t){var i=t;do{var a=i.alternate;if(t=i.return,(i.flags&32768)===0){if(a=yx(a,i,Ni),a!==null){Pt=a;return}}else{if(a=gx(a,i),a!==null){a.flags&=32767,Pt=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Pt=null;return}}if(i=i.sibling,i!==null){Pt=i;return}Pt=i=t}while(i!==null);zt===0&&(zt=5)}function Jr(t,i,a){var p=et,y=Wi.transition;try{Wi.transition=null,et=1,Cx(t,i,a,p)}finally{Wi.transition=y,et=p}return null}function Cx(t,i,a,p){do Ao();while(yr!==null);if((it&6)!==0)throw Error(r(327));a=t.finishedWork;var y=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var v=a.lanes|a.childLanes;if(ho(t,v),t===$t&&(Pt=$t=null,Yt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||_l||(_l=!0,Km(hi,function(){return Ao(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=Wi.transition,Wi.transition=null;var N=et;et=1;var B=it;it|=4,$c.current=null,vx(t,a),Rm(a,t),Ug(Zu),xo=!!Xu,Zu=Xu=null,t.current=a,wx(a),Vn(),it=B,et=N,Wi.transition=v}else t.current=a;if(_l&&(_l=!1,yr=t,ml=y),v=t.pendingLanes,v===0&&(hr=null),nr(a.stateNode),bi(t,ct()),i!==null)for(p=t.onRecoverableError,a=0;a<i.length;a++)y=i[a],p(y.value,{componentStack:y.stack,digest:y.digest});if(pl)throw pl=!1,t=Uc,Uc=null,t;return(ml&1)!==0&&t.tag!==0&&Ao(),v=t.pendingLanes,(v&1)!==0?t===Gc?Ba++:(Ba=0,Gc=t):Ba=0,pr(),null}function Ao(){if(yr!==null){var t=Cs(ml),i=Wi.transition,a=et;try{if(Wi.transition=null,et=16>t?16:t,yr===null)var p=!1;else{if(t=yr,yr=null,ml=0,(it&6)!==0)throw Error(r(331));var y=it;for(it|=4,Ne=t.current;Ne!==null;){var v=Ne,N=v.child;if((Ne.flags&16)!==0){var B=v.deletions;if(B!==null){for(var Q=0;Q<B.length;Q++){var oe=B[Q];for(Ne=oe;Ne!==null;){var me=Ne;switch(me.tag){case 0:case 11:case 15:La(8,me,v)}var he=me.child;if(he!==null)he.return=me,Ne=he;else for(;Ne!==null;){me=Ne;var _e=me.sibling,Ee=me.return;if(Im(me),me===oe){Ne=null;break}if(_e!==null){_e.return=Ee,Ne=_e;break}Ne=Ee}}}var je=v.alternate;if(je!==null){var Te=je.child;if(Te!==null){je.child=null;do{var qt=Te.sibling;Te.sibling=null,Te=qt}while(Te!==null)}}Ne=v}}if((v.subtreeFlags&2064)!==0&&N!==null)N.return=v,Ne=N;else e:for(;Ne!==null;){if(v=Ne,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:La(9,v,v.return)}var ne=v.sibling;if(ne!==null){ne.return=v.return,Ne=ne;break e}Ne=v.return}}var ee=t.current;for(Ne=ee;Ne!==null;){N=Ne;var re=N.child;if((N.subtreeFlags&2064)!==0&&re!==null)re.return=N,Ne=re;else e:for(N=ee;Ne!==null;){if(B=Ne,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:ul(9,B)}}catch(Fe){Mt(B,B.return,Fe)}if(B===N){Ne=null;break e}var xe=B.sibling;if(xe!==null){xe.return=B.return,Ne=xe;break e}Ne=B.return}}if(it=y,pr(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(He,t)}catch{}p=!0}return p}finally{et=a,Wi.transition=i}}return!1}function Wm(t,i,a){i=Lo(a,i),i=um(t,i,1),t=mr(t,i,1),i=_i(),t!==null&&(zi(t,1,i),bi(t,i))}function Mt(t,i,a){if(t.tag===3)Wm(t,t,a);else for(;i!==null;){if(i.tag===3){Wm(i,t,a);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(hr===null||!hr.has(p))){t=Lo(a,t),t=cm(i,t,1),i=mr(i,t,1),t=_i(),i!==null&&(zi(i,1,t),bi(i,t));break}}i=i.return}}function qx(t,i,a){var p=t.pingCache;p!==null&&p.delete(i),i=_i(),t.pingedLanes|=t.suspendedLanes&a,$t===t&&(Yt&a)===a&&(zt===4||zt===3&&(Yt&130023424)===Yt&&500>ct()-Wc?Zr(t,0):Hc|=a),bi(t,i)}function Um(t,i){i===0&&((t.mode&1)===0?i=1:(i=zn,zn<<=1,(zn&130023424)===0&&(zn=4194304)));var a=_i();t=Wn(t,i),t!==null&&(zi(t,i,a),bi(t,a))}function Ex(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Um(t,a)}function Ix(t,i){var a=0;switch(t.tag){case 13:var p=t.stateNode,y=t.memoizedState;y!==null&&(a=y.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(r(314))}p!==null&&p.delete(i),Um(t,a)}var Gm;Gm=function(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps||gi.current)vi=!0;else{if((t.lanes&a)===0&&(i.flags&128)===0)return vi=!1,hx(t,i,a);vi=(t.flags&131072)!==0}else vi=!1,mt&&(i.flags&1048576)!==0&&C_(i,Us,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;sl(t,i),t=i.pendingProps;var y=No(i,ei.current);Fo(i,a),y=bc(null,i,p,t,y,a);var v=kc();return i.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,xi(p)?(v=!0,$s(i)):v=!1,i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,fc(i),y.updater=ol,i.stateNode=y,y._reactInternals=i,Ic(i,p,t,a),i=Tc(null,i,p,!0,v,a)):(i.tag=0,mt&&v&&oc(i),pi(null,i,y,a),i=i.child),i;case 16:p=i.elementType;e:{switch(sl(t,i),t=i.pendingProps,y=p._init,p=y(p._payload),i.type=p,y=i.tag=jx(p),t=Xi(p,t),y){case 0:i=Pc(null,i,p,t,a);break e;case 1:i=xm(null,i,p,t,a);break e;case 11:i=mm(null,i,p,t,a);break e;case 14:i=fm(null,i,p,Xi(p.type,t),a);break e}throw Error(r(306,p,""))}return i;case 0:return p=i.type,y=i.pendingProps,y=i.elementType===p?y:Xi(p,y),Pc(t,i,p,y,a);case 1:return p=i.type,y=i.pendingProps,y=i.elementType===p?y:Xi(p,y),xm(t,i,p,y,a);case 3:e:{if(vm(i),t===null)throw Error(r(387));p=i.pendingProps,v=i.memoizedState,y=v.element,V_(t,i),Zs(i,p,null,a);var N=i.memoizedState;if(p=N.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){y=Lo(Error(r(423)),i),i=wm(t,i,p,a,y);break e}else if(p!==y){y=Lo(Error(r(424)),i),i=wm(t,i,p,a,y);break e}else for(Ii=ur(i.stateNode.containerInfo.firstChild),Ei=i,mt=!0,Yi=null,a=T_(i,null,p,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(To(),p===y){i=Gn(t,i,a);break e}pi(t,i,p,a)}i=i.child}return i;case 5:return L_(i),t===null&&lc(i),p=i.type,y=i.pendingProps,v=t!==null?t.memoizedProps:null,N=y.children,Ju(p,y)?N=null:v!==null&&Ju(p,v)&&(i.flags|=32),gm(t,i),pi(t,i,N,a),i.child;case 6:return t===null&&lc(i),null;case 13:return bm(t,i,a);case 4:return hc(i,i.stateNode.containerInfo),p=i.pendingProps,t===null?i.child=Ro(i,null,p,a):pi(t,i,p,a),i.child;case 11:return p=i.type,y=i.pendingProps,y=i.elementType===p?y:Xi(p,y),mm(t,i,p,y,a);case 7:return pi(t,i,i.pendingProps,a),i.child;case 8:return pi(t,i,i.pendingProps.children,a),i.child;case 12:return pi(t,i,i.pendingProps.children,a),i.child;case 10:e:{if(p=i.type._context,y=i.pendingProps,v=i.memoizedProps,N=y.value,ut(Qs,p._currentValue),p._currentValue=N,v!==null)if(Qi(v.value,N)){if(v.children===y.children&&!gi.current){i=Gn(t,i,a);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var B=v.dependencies;if(B!==null){N=v.child;for(var Q=B.firstContext;Q!==null;){if(Q.context===p){if(v.tag===1){Q=Un(-1,a&-a),Q.tag=2;var oe=v.updateQueue;if(oe!==null){oe=oe.shared;var me=oe.pending;me===null?Q.next=Q:(Q.next=me.next,me.next=Q),oe.pending=Q}}v.lanes|=a,Q=v.alternate,Q!==null&&(Q.lanes|=a),_c(v.return,a,i),B.lanes|=a;break}Q=Q.next}}else if(v.tag===10)N=v.type===i.type?null:v.child;else if(v.tag===18){if(N=v.return,N===null)throw Error(r(341));N.lanes|=a,B=N.alternate,B!==null&&(B.lanes|=a),_c(N,a,i),N=v.sibling}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===i){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}pi(t,i,y.children,a),i=i.child}return i;case 9:return y=i.type,p=i.pendingProps.children,Fo(i,a),y=$i(y),p=p(y),i.flags|=1,pi(t,i,p,a),i.child;case 14:return p=i.type,y=Xi(p,i.pendingProps),y=Xi(p.type,y),fm(t,i,p,y,a);case 15:return hm(t,i,i.type,i.pendingProps,a);case 17:return p=i.type,y=i.pendingProps,y=i.elementType===p?y:Xi(p,y),sl(t,i),i.tag=1,xi(p)?(t=!0,$s(i)):t=!1,Fo(i,a),sm(i,p,y),Ic(i,p,y,a),Tc(null,i,p,!0,t,a);case 19:return Sm(t,i,a);case 22:return ym(t,i,a)}throw Error(r(156,i.tag))};function Km(t,i){return la(t,i)}function Nx(t,i,a,p){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(t,i,a,p){return new Nx(t,i,a,p)}function Jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jx(t){if(typeof t=="function")return Jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Y)return 14}return 2}function vr(t,i){var a=t.alternate;return a===null?(a=Ui(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function gl(t,i,a,p,y,v){var N=2;if(p=t,typeof t=="function")Jc(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case j:return eo(a.children,y,v,i);case P:N=8,y|=8;break;case V:return t=Ui(12,a,i,y|2),t.elementType=V,t.lanes=v,t;case te:return t=Ui(13,a,i,y),t.elementType=te,t.lanes=v,t;case T:return t=Ui(19,a,i,y),t.elementType=T,t.lanes=v,t;case Z:return xl(a,y,v,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X:N=10;break e;case F:N=9;break e;case D:N=11;break e;case Y:N=14;break e;case W:N=16,p=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=Ui(N,a,i,y),i.elementType=t,i.type=p,i.lanes=v,i}function eo(t,i,a,p){return t=Ui(7,t,p,i),t.lanes=a,t}function xl(t,i,a,p){return t=Ui(22,t,p,i),t.elementType=Z,t.lanes=a,t.stateNode={isHidden:!1},t}function ed(t,i,a){return t=Ui(6,t,null,i),t.lanes=a,t}function td(t,i,a){return i=Ui(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function Px(t,i,a,p,y){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kt(0),this.expirationTimes=Kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function id(t,i,a,p,y,v,N,B,Q){return t=new Px(t,i,a,B,Q),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Ui(3,null,null,i),t.current=v,v.stateNode=t,v.memoizedState={element:p,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},fc(v),t}function Tx(t,i,a){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:p==null?null:""+p,children:t,containerInfo:i,implementation:a}}function Qm(t){if(!t)return dr;t=t._reactInternals;e:{if(fi(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(xi(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var a=t.type;if(xi(a))return k_(t,a,i)}return i}function Ym(t,i,a,p,y,v,N,B,Q){return t=id(a,p,!0,t,y,v,N,B,Q),t.context=Qm(null),a=t.current,p=_i(),y=gr(a),v=Un(p,y),v.callback=i??null,mr(a,v,y),t.current.lanes=y,zi(t,y,p),bi(t,p),t}function vl(t,i,a,p){var y=i.current,v=_i(),N=gr(y);return a=Qm(a),i.context===null?i.context=a:i.pendingContext=a,i=Un(v,N),i.payload={element:t},p=p===void 0?null:p,p!==null&&(i.callback=p),t=mr(y,i,N),t!==null&&(en(t,y,N,v),Xs(t,y,N)),N}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xm(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function nd(t,i){Xm(t,i),(t=t.alternate)&&Xm(t,i)}function Rx(){return null}var Zm=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}bl.prototype.render=rd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));vl(t,i,null,null)},bl.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Xr(function(){vl(null,t,null,null)}),i[Bn]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var i=Es();t={blockedOn:null,target:t,priority:i};for(var a=0;a<xn.length&&i!==0&&i<xn[a].priority;a++);xn.splice(a,0,t),a===0&&ma(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function Vx(t,i,a,p,y){if(y){if(typeof p=="function"){var v=p;p=function(){var oe=wl(N);v.call(oe)}}var N=Ym(i,p,t,0,null,!1,!1,"",Jm);return t._reactRootContainer=N,t[Bn]=N.current,Ma(t.nodeType===8?t.parentNode:t),Xr(),N}for(;y=t.lastChild;)t.removeChild(y);if(typeof p=="function"){var B=p;p=function(){var oe=wl(Q);B.call(oe)}}var Q=id(t,0,!1,null,null,!1,!1,"",Jm);return t._reactRootContainer=Q,t[Bn]=Q.current,Ma(t.nodeType===8?t.parentNode:t),Xr(function(){vl(i,Q,a,p)}),Q}function Sl(t,i,a,p,y){var v=a._reactRootContainer;if(v){var N=v;if(typeof y=="function"){var B=y;y=function(){var Q=wl(N);B.call(Q)}}vl(i,N,t,y)}else N=Vx(a,i,t,y,p);return wl(N)}qs=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var a=ci(i.pendingLanes);a!==0&&(ca(i,a|1),bi(i,ct()),(it&6)===0&&(Bo=ct()+500,pr()))}break;case 13:Xr(function(){var p=Wn(t,1);if(p!==null){var y=_i();en(p,t,1,y)}}),nd(t,1)}},da=function(t){if(t.tag===13){var i=Wn(t,134217728);if(i!==null){var a=_i();en(i,t,134217728,a)}nd(t,134217728)}},qi=function(t){if(t.tag===13){var i=gr(t),a=Wn(t,i);if(a!==null){var p=_i();en(a,t,i,p)}nd(t,i)}},Es=function(){return et},Is=function(t,i){var a=et;try{return et=t,i()}finally{et=a}},Ot=function(t,i,a){switch(i){case"input":if(st(t,a),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var p=a[i];if(p!==t&&p.form===t.form){var y=Bs(p);if(!y)throw Error(r(90));Re(p),st(p,y)}}}break;case"textarea":Dt(t,a);break;case"select":i=a.value,i!=null&&Lt(t,!!a.multiple,i,!1)}},de=Yc,Ge=Xr;var Fx={usingClientEntryPoint:!1,Events:[Ea,Eo,Bs,yt,Tn,Yc]},Aa={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zx={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mn(t),t===null?null:t.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||Rx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{He=Ml.inject(zx),yi=Ml}catch{}}return ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx,ki.createPortal=function(t,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(i))throw Error(r(200));return Tx(t,i,null,a)},ki.createRoot=function(t,i){if(!od(t))throw Error(r(299));var a=!1,p="",y=Zm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=id(t,1,!1,null,null,a,!1,p,y),t[Bn]=i.current,Ma(t.nodeType===8?t.parentNode:t),new rd(i)},ki.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=mn(i),t=t===null?null:t.stateNode,t},ki.flushSync=function(t){return Xr(t)},ki.hydrate=function(t,i,a){if(!kl(i))throw Error(r(200));return Sl(null,t,i,!0,a)},ki.hydrateRoot=function(t,i,a){if(!od(t))throw Error(r(405));var p=a!=null&&a.hydratedSources||null,y=!1,v="",N=Zm;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(N=a.onRecoverableError)),i=Ym(i,null,t,1,a??null,y,!1,v,N),t[Bn]=i.current,Ma(t),p)for(t=0;t<p.length;t++)a=p[t],y=a._getVersion,y=y(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,y]:i.mutableSourceEagerHydrationData.push(a,y);return new bl(i)},ki.render=function(t,i,a){if(!kl(i))throw Error(r(200));return Sl(null,t,i,!1,a)},ki.unmountComponentAtNode=function(t){if(!kl(t))throw Error(r(40));return t._reactRootContainer?(Xr(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1},ki.unstable_batchedUpdates=Yc,ki.unstable_renderSubtreeIntoContainer=function(t,i,a,p){if(!kl(a))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Sl(t,i,a,!1,p)},ki.version="18.3.1-next-f1338f8080-20240426",ki}var lf;function p0(){if(lf)return ld.exports;lf=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ld.exports=Wx(),ld.exports}var uf;function Ux(){if(uf)return Cl;uf=1;var e=p0();return Cl.createRoot=e.createRoot,Cl.hydrateRoot=e.hydrateRoot,Cl}var Gx=Ux();const Kx=hs(Gx);function Tt(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=Tt(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var Qx={value:()=>{}};function wu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new Hl(r)}function Hl(e){this._=e}function Yx(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}Hl.prototype=wu.prototype={constructor:Hl,on:function(e,n){var r=this._,o=Yx(e+"",r),s,c=-1,l=o.length;if(arguments.length<2){for(;++c<l;)if((s=(e=o[c]).type)&&(s=Xx(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<l;)if(s=(e=o[c]).type)r[s]=cf(r[s],e.name,n);else if(n==null)for(s in r)r[s]=cf(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Hl(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,c;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],o=0,s=c.length;o<s;++o)c[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,c=o.length;s<c;++s)o[s].value.apply(n,r)}};function Xx(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function cf(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=Qx,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Ld="http://www.w3.org/1999/xhtml";const df={svg:"http://www.w3.org/2000/svg",xhtml:Ld,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bu(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),df.hasOwnProperty(n)?{space:df[n],local:e}:e}function Zx(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Ld&&n.documentElement.namespaceURI===Ld?n.createElement(e):n.createElementNS(r,e)}}function Jx(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _0(e){var n=bu(e);return(n.local?Jx:Zx)(n)}function ev(){}function gp(e){return e==null?ev:function(){return this.querySelector(e)}}function tv(e){typeof e!="function"&&(e=gp(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],l=c.length,d=o[s]=new Array(l),_,f,g=0;g<l;++g)(_=c[g])&&(f=e.call(_,_.__data__,g,c))&&("__data__"in _&&(f.__data__=_.__data__),d[g]=f);return new Ri(o,this._parents)}function iv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nv(){return[]}function m0(e){return e==null?nv:function(){return this.querySelectorAll(e)}}function rv(e){return function(){return iv(e.apply(this,arguments))}}function ov(e){typeof e=="function"?e=rv(e):e=m0(e);for(var n=this._groups,r=n.length,o=[],s=[],c=0;c<r;++c)for(var l=n[c],d=l.length,_,f=0;f<d;++f)(_=l[f])&&(o.push(e.call(_,_.__data__,f,l)),s.push(_));return new Ri(o,s)}function f0(e){return function(){return this.matches(e)}}function h0(e){return function(n){return n.matches(e)}}var av=Array.prototype.find;function sv(e){return function(){return av.call(this.children,e)}}function lv(){return this.firstElementChild}function uv(e){return this.select(e==null?lv:sv(typeof e=="function"?e:h0(e)))}var cv=Array.prototype.filter;function dv(){return Array.from(this.children)}function pv(e){return function(){return cv.call(this.children,e)}}function _v(e){return this.selectAll(e==null?dv:pv(typeof e=="function"?e:h0(e)))}function mv(e){typeof e!="function"&&(e=f0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],l=c.length,d=o[s]=[],_,f=0;f<l;++f)(_=c[f])&&e.call(_,_.__data__,f,c)&&d.push(_);return new Ri(o,this._parents)}function y0(e){return new Array(e.length)}function fv(){return new Ri(this._enter||this._groups.map(y0),this._parents)}function Zl(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Zl.prototype={constructor:Zl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hv(e){return function(){return e}}function yv(e,n,r,o,s,c){for(var l=0,d,_=n.length,f=c.length;l<f;++l)(d=n[l])?(d.__data__=c[l],o[l]=d):r[l]=new Zl(e,c[l]);for(;l<_;++l)(d=n[l])&&(s[l]=d)}function gv(e,n,r,o,s,c,l){var d,_,f=new Map,g=n.length,m=c.length,h=new Array(g),x;for(d=0;d<g;++d)(_=n[d])&&(h[d]=x=l.call(_,_.__data__,d,n)+"",f.has(x)?s[d]=_:f.set(x,_));for(d=0;d<m;++d)x=l.call(e,c[d],d,c)+"",(_=f.get(x))?(o[d]=_,_.__data__=c[d],f.delete(x)):r[d]=new Zl(e,c[d]);for(d=0;d<g;++d)(_=n[d])&&f.get(h[d])===_&&(s[d]=_)}function xv(e){return e.__data__}function vv(e,n){if(!arguments.length)return Array.from(this,xv);var r=n?gv:yv,o=this._parents,s=this._groups;typeof e!="function"&&(e=hv(e));for(var c=s.length,l=new Array(c),d=new Array(c),_=new Array(c),f=0;f<c;++f){var g=o[f],m=s[f],h=m.length,x=wv(e.call(g,g&&g.__data__,f,o)),w=x.length,k=d[f]=new Array(w),S=l[f]=new Array(w),b=_[f]=new Array(h);r(g,m,k,S,b,x,n);for(var E=0,M=0,q,R;E<w;++E)if(q=k[E]){for(E>=M&&(M=E+1);!(R=S[M])&&++M<w;);q._next=R||null}}return l=new Ri(l,o),l._enter=d,l._exit=_,l}function wv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bv(){return new Ri(this._exit||this._groups.map(y0),this._parents)}function kv(e,n,r){var o=this.enter(),s=this,c=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?c.remove():r(c),o&&s?o.merge(s).order():s}function Sv(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,c=o.length,l=Math.min(s,c),d=new Array(s),_=0;_<l;++_)for(var f=r[_],g=o[_],m=f.length,h=d[_]=new Array(m),x,w=0;w<m;++w)(x=f[w]||g[w])&&(h[w]=x);for(;_<s;++_)d[_]=r[_];return new Ri(d,this._parents)}function Mv(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,c=o[s],l;--s>=0;)(l=o[s])&&(c&&l.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(l,c),c=l);return this}function Cv(e){e||(e=qv);function n(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var r=this._groups,o=r.length,s=new Array(o),c=0;c<o;++c){for(var l=r[c],d=l.length,_=s[c]=new Array(d),f,g=0;g<d;++g)(f=l[g])&&(_[g]=f);_.sort(n)}return new Ri(s,this._parents).order()}function qv(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Ev(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Iv(){return Array.from(this)}function Nv(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length;s<c;++s){var l=o[s];if(l)return l}return null}function jv(){let e=0;for(const n of this)++e;return e}function Pv(){return!this.node()}function Tv(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],c=0,l=s.length,d;c<l;++c)(d=s[c])&&e.call(d,d.__data__,c,s);return this}function Rv(e){return function(){this.removeAttribute(e)}}function Vv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fv(e,n){return function(){this.setAttribute(e,n)}}function zv(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Lv(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Dv(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ov(e,n){var r=bu(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?Vv:Rv:typeof n=="function"?r.local?Dv:Lv:r.local?zv:Fv)(r,n))}function g0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bv(e){return function(){this.style.removeProperty(e)}}function Av(e,n,r){return function(){this.style.setProperty(e,n,r)}}function $v(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function Hv(e,n,r){return arguments.length>1?this.each((n==null?Bv:typeof n=="function"?$v:Av)(e,n,r??"")):Qo(this.node(),e)}function Qo(e,n){return e.style.getPropertyValue(n)||g0(e).getComputedStyle(e,null).getPropertyValue(n)}function Wv(e){return function(){delete this[e]}}function Uv(e,n){return function(){this[e]=n}}function Gv(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Kv(e,n){return arguments.length>1?this.each((n==null?Wv:typeof n=="function"?Gv:Uv)(e,n)):this.node()[e]}function x0(e){return e.trim().split(/^|\s+/)}function xp(e){return e.classList||new v0(e)}function v0(e){this._node=e,this._names=x0(e.getAttribute("class")||"")}v0.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function w0(e,n){for(var r=xp(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function b0(e,n){for(var r=xp(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function Qv(e){return function(){w0(this,e)}}function Yv(e){return function(){b0(this,e)}}function Xv(e,n){return function(){(n.apply(this,arguments)?w0:b0)(this,e)}}function Zv(e,n){var r=x0(e+"");if(arguments.length<2){for(var o=xp(this.node()),s=-1,c=r.length;++s<c;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?Xv:n?Qv:Yv)(r,n))}function Jv(){this.textContent=""}function e1(e){return function(){this.textContent=e}}function t1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function i1(e){return arguments.length?this.each(e==null?Jv:(typeof e=="function"?t1:e1)(e)):this.node().textContent}function n1(){this.innerHTML=""}function r1(e){return function(){this.innerHTML=e}}function o1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function a1(e){return arguments.length?this.each(e==null?n1:(typeof e=="function"?o1:r1)(e)):this.node().innerHTML}function s1(){this.nextSibling&&this.parentNode.appendChild(this)}function l1(){return this.each(s1)}function u1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function c1(){return this.each(u1)}function d1(e){var n=typeof e=="function"?e:_0(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function p1(){return null}function _1(e,n){var r=typeof e=="function"?e:_0(e),o=n==null?p1:typeof n=="function"?n:gp(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function m1(){var e=this.parentNode;e&&e.removeChild(this)}function f1(){return this.each(m1)}function h1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function y1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function g1(e){return this.select(e?y1:h1)}function x1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function v1(e){return function(n){e.call(this,n,this.__data__)}}function w1(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function b1(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,c;r<s;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++o]=c;++o?n.length=o:delete this.__on}}}function k1(e,n,r){return function(){var o=this.__on,s,c=v1(n);if(o){for(var l=0,d=o.length;l<d;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),s.value=n;return}}this.addEventListener(e.type,c,r),s={type:e.type,name:e.name,value:n,listener:c,options:r},o?o.push(s):this.__on=[s]}}function S1(e,n,r){var o=w1(e+""),s,c=o.length,l;if(arguments.length<2){var d=this.node().__on;if(d){for(var _=0,f=d.length,g;_<f;++_)for(s=0,g=d[_];s<c;++s)if((l=o[s]).type===g.type&&l.name===g.name)return g.value}return}for(d=n?k1:b1,s=0;s<c;++s)this.each(d(o[s],n,r));return this}function k0(e,n,r){var o=g0(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function M1(e,n){return function(){return k0(this,e,n)}}function C1(e,n){return function(){return k0(this,e,n.apply(this,arguments))}}function q1(e,n){return this.each((typeof n=="function"?C1:M1)(e,n))}function*E1(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length,l;s<c;++s)(l=o[s])&&(yield l)}var S0=[null];function Ri(e,n){this._groups=e,this._parents=n}function gs(){return new Ri([[document.documentElement]],S0)}function I1(){return this}Ri.prototype=gs.prototype={constructor:Ri,select:tv,selectAll:ov,selectChild:uv,selectChildren:_v,filter:mv,data:vv,enter:fv,exit:bv,join:kv,merge:Sv,selection:I1,order:Mv,sort:Cv,call:Ev,nodes:Iv,node:Nv,size:jv,empty:Pv,each:Tv,attr:Ov,style:Hv,property:Kv,classed:Zv,text:i1,html:a1,raise:l1,lower:c1,append:d1,insert:_1,remove:f1,clone:g1,datum:x1,on:S1,dispatch:q1,[Symbol.iterator]:E1};function Ti(e){return typeof e=="string"?new Ri([[document.querySelector(e)]],[document.documentElement]):new Ri([[e]],S0)}function N1(e){let n;for(;n=e.sourceEvent;)e=n;return e}function rn(e,n){if(e=N1(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const j1={passive:!1},is={capture:!0,passive:!1};function dd(e){e.stopImmediatePropagation()}function Uo(e){e.preventDefault(),e.stopImmediatePropagation()}function M0(e){var n=e.document.documentElement,r=Ti(e).on("dragstart.drag",Uo,is);"onselectstart"in n?r.on("selectstart.drag",Uo,is):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function C0(e,n){var r=e.document.documentElement,o=Ti(e).on("dragstart.drag",null);n&&(o.on("click.drag",Uo,is),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ql=e=>()=>e;function Dd(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:c,x:l,y:d,dx:_,dy:f,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}Dd.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function P1(e){return!e.ctrlKey&&!e.button}function T1(){return this.parentNode}function R1(e,n){return n??{x:e.x,y:e.y}}function V1(){return navigator.maxTouchPoints||"ontouchstart"in this}function q0(){var e=P1,n=T1,r=R1,o=V1,s={},c=wu("start","drag","end"),l=0,d,_,f,g,m=0;function h(q){q.on("mousedown.drag",x).filter(o).on("touchstart.drag",S).on("touchmove.drag",b,j1).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(q,R){if(!(g||!e.call(this,q,R))){var C=M(this,n.call(this,q,R),q,R,"mouse");C&&(Ti(q.view).on("mousemove.drag",w,is).on("mouseup.drag",k,is),M0(q.view),dd(q),f=!1,d=q.clientX,_=q.clientY,C("start",q))}}function w(q){if(Uo(q),!f){var R=q.clientX-d,C=q.clientY-_;f=R*R+C*C>m}s.mouse("drag",q)}function k(q){Ti(q.view).on("mousemove.drag mouseup.drag",null),C0(q.view,f),Uo(q),s.mouse("end",q)}function S(q,R){if(e.call(this,q,R)){var C=q.changedTouches,j=n.call(this,q,R),P=C.length,V,X;for(V=0;V<P;++V)(X=M(this,j,q,R,C[V].identifier,C[V]))&&(dd(q),X("start",q,C[V]))}}function b(q){var R=q.changedTouches,C=R.length,j,P;for(j=0;j<C;++j)(P=s[R[j].identifier])&&(Uo(q),P("drag",q,R[j]))}function E(q){var R=q.changedTouches,C=R.length,j,P;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),j=0;j<C;++j)(P=s[R[j].identifier])&&(dd(q),P("end",q,R[j]))}function M(q,R,C,j,P,V){var X=c.copy(),F=rn(V||C,R),D,te,T;if((T=r.call(q,new Dd("beforestart",{sourceEvent:C,target:h,identifier:P,active:l,x:F[0],y:F[1],dx:0,dy:0,dispatch:X}),j))!=null)return D=T.x-F[0]||0,te=T.y-F[1]||0,function Y(W,Z,$){var H=F,J;switch(W){case"start":s[P]=Y,J=l++;break;case"end":delete s[P],--l;case"drag":F=rn($||Z,R),J=l;break}X.call(W,q,new Dd(W,{sourceEvent:Z,subject:T,target:h,identifier:P,active:J,x:F[0]+D,y:F[1]+te,dx:F[0]-H[0],dy:F[1]-H[1],dispatch:X}),j)}}return h.filter=function(q){return arguments.length?(e=typeof q=="function"?q:ql(!!q),h):e},h.container=function(q){return arguments.length?(n=typeof q=="function"?q:ql(q),h):n},h.subject=function(q){return arguments.length?(r=typeof q=="function"?q:ql(q),h):r},h.touchable=function(q){return arguments.length?(o=typeof q=="function"?q:ql(!!q),h):o},h.on=function(){var q=c.on.apply(c,arguments);return q===c?h:q},h.clickDistance=function(q){return arguments.length?(m=(q=+q)*q,h):Math.sqrt(m)},h}function vp(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function E0(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function xs(){}var ns=.7,Jl=1/ns,Go="\\s*([+-]?\\d+)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F1=/^#([0-9a-f]{3,8})$/,z1=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),L1=new RegExp(`^rgb\\(${Cn},${Cn},${Cn}\\)$`),D1=new RegExp(`^rgba\\(${Go},${Go},${Go},${rs}\\)$`),O1=new RegExp(`^rgba\\(${Cn},${Cn},${Cn},${rs}\\)$`),B1=new RegExp(`^hsl\\(${rs},${Cn},${Cn}\\)$`),A1=new RegExp(`^hsla\\(${rs},${Cn},${Cn},${rs}\\)$`),pf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vp(xs,oo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_f,formatHex:_f,formatHex8:$1,formatHsl:H1,formatRgb:mf,toString:mf});function _f(){return this.rgb().formatHex()}function $1(){return this.rgb().formatHex8()}function H1(){return I0(this).formatHsl()}function mf(){return this.rgb().formatRgb()}function oo(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=F1.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?ff(n):r===3?new Mi(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?El(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?El(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=z1.exec(e))?new Mi(n[1],n[2],n[3],1):(n=L1.exec(e))?new Mi(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=D1.exec(e))?El(n[1],n[2],n[3],n[4]):(n=O1.exec(e))?El(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=B1.exec(e))?gf(n[1],n[2]/100,n[3]/100,1):(n=A1.exec(e))?gf(n[1],n[2]/100,n[3]/100,n[4]):pf.hasOwnProperty(e)?ff(pf[e]):e==="transparent"?new Mi(NaN,NaN,NaN,0):null}function ff(e){return new Mi(e>>16&255,e>>8&255,e&255,1)}function El(e,n,r,o){return o<=0&&(e=n=r=NaN),new Mi(e,n,r,o)}function W1(e){return e instanceof xs||(e=oo(e)),e?(e=e.rgb(),new Mi(e.r,e.g,e.b,e.opacity)):new Mi}function Od(e,n,r,o){return arguments.length===1?W1(e):new Mi(e,n,r,o??1)}function Mi(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}vp(Mi,Od,E0(xs,{brighter(e){return e=e==null?Jl:Math.pow(Jl,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ns:Math.pow(ns,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mi(no(this.r),no(this.g),no(this.b),eu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hf,formatHex:hf,formatHex8:U1,formatRgb:yf,toString:yf}));function hf(){return`#${io(this.r)}${io(this.g)}${io(this.b)}`}function U1(){return`#${io(this.r)}${io(this.g)}${io(this.b)}${io((isNaN(this.opacity)?1:this.opacity)*255)}`}function yf(){const e=eu(this.opacity);return`${e===1?"rgb(":"rgba("}${no(this.r)}, ${no(this.g)}, ${no(this.b)}${e===1?")":`, ${e})`}`}function eu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function no(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function io(e){return e=no(e),(e<16?"0":"")+e.toString(16)}function gf(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new an(e,n,r,o)}function I0(e){if(e instanceof an)return new an(e.h,e.s,e.l,e.opacity);if(e instanceof xs||(e=oo(e)),!e)return new an;if(e instanceof an)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),c=Math.max(n,r,o),l=NaN,d=c-s,_=(c+s)/2;return d?(n===c?l=(r-o)/d+(r<o)*6:r===c?l=(o-n)/d+2:l=(n-r)/d+4,d/=_<.5?c+s:2-c-s,l*=60):d=_>0&&_<1?0:l,new an(l,d,_,e.opacity)}function G1(e,n,r,o){return arguments.length===1?I0(e):new an(e,n,r,o??1)}function an(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}vp(an,G1,E0(xs,{brighter(e){return e=e==null?Jl:Math.pow(Jl,e),new an(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ns:Math.pow(ns,e),new an(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Mi(pd(e>=240?e-240:e+120,s,o),pd(e,s,o),pd(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new an(xf(this.h),Il(this.s),Il(this.l),eu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=eu(this.opacity);return`${e===1?"hsl(":"hsla("}${xf(this.h)}, ${Il(this.s)*100}%, ${Il(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xf(e){return e=(e||0)%360,e<0?e+360:e}function Il(e){return Math.max(0,Math.min(1,e||0))}function pd(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const wp=e=>()=>e;function K1(e,n){return function(r){return e+r*n}}function Q1(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function Y1(e){return(e=+e)==1?N0:function(n,r){return r-n?Q1(n,r,e):wp(isNaN(n)?r:n)}}function N0(e,n){var r=n-e;return r?K1(e,r):wp(isNaN(e)?n:e)}const tu=(function e(n){var r=Y1(n);function o(s,c){var l=r((s=Od(s)).r,(c=Od(c)).r),d=r(s.g,c.g),_=r(s.b,c.b),f=N0(s.opacity,c.opacity);return function(g){return s.r=l(g),s.g=d(g),s.b=_(g),s.opacity=f(g),s+""}}return o.gamma=e,o})(1);function X1(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,o=n.slice(),s;return function(c){for(s=0;s<r;++s)o[s]=e[s]*(1-c)+n[s]*c;return o}}function Z1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function J1(e,n){var r=n?n.length:0,o=e?Math.min(r,e.length):0,s=new Array(o),c=new Array(r),l;for(l=0;l<o;++l)s[l]=Ya(e[l],n[l]);for(;l<r;++l)c[l]=n[l];return function(d){for(l=0;l<o;++l)c[l]=s[l](d);return c}}function ew(e,n){var r=new Date;return e=+e,n=+n,function(o){return r.setTime(e*(1-o)+n*o),r}}function Mn(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function tw(e,n){var r={},o={},s;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(s in n)s in e?r[s]=Ya(e[s],n[s]):o[s]=n[s];return function(c){for(s in r)o[s]=r[s](c);return o}}var Bd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_d=new RegExp(Bd.source,"g");function iw(e){return function(){return e}}function nw(e){return function(n){return e(n)+""}}function j0(e,n){var r=Bd.lastIndex=_d.lastIndex=0,o,s,c,l=-1,d=[],_=[];for(e=e+"",n=n+"";(o=Bd.exec(e))&&(s=_d.exec(n));)(c=s.index)>r&&(c=n.slice(r,c),d[l]?d[l]+=c:d[++l]=c),(o=o[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,_.push({i:l,x:Mn(o,s)})),r=_d.lastIndex;return r<n.length&&(c=n.slice(r),d[l]?d[l]+=c:d[++l]=c),d.length<2?_[0]?nw(_[0].x):iw(n):(n=_.length,function(f){for(var g=0,m;g<n;++g)d[(m=_[g]).i]=m.x(f);return d.join("")})}function Ya(e,n){var r=typeof n,o;return n==null||r==="boolean"?wp(n):(r==="number"?Mn:r==="string"?(o=oo(n))?(n=o,tu):j0:n instanceof oo?tu:n instanceof Date?ew:Z1(n)?X1:Array.isArray(n)?J1:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?tw:Mn)(e,n)}var vf=180/Math.PI,Ad={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function P0(e,n,r,o,s,c){var l,d,_;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(_=e*r+n*o)&&(r-=e*_,o-=n*_),(d=Math.sqrt(r*r+o*o))&&(r/=d,o/=d,_/=d),e*o<n*r&&(e=-e,n=-n,_=-_,l=-l),{translateX:s,translateY:c,rotate:Math.atan2(n,e)*vf,skewX:Math.atan(_)*vf,scaleX:l,scaleY:d}}var Nl;function rw(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Ad:P0(n.a,n.b,n.c,n.d,n.e,n.f)}function ow(e){return e==null||(Nl||(Nl=document.createElementNS("http://www.w3.org/2000/svg","g")),Nl.setAttribute("transform",e),!(e=Nl.transform.baseVal.consolidate()))?Ad:(e=e.matrix,P0(e.a,e.b,e.c,e.d,e.e,e.f))}function T0(e,n,r,o){function s(f){return f.length?f.pop()+" ":""}function c(f,g,m,h,x,w){if(f!==m||g!==h){var k=x.push("translate(",null,n,null,r);w.push({i:k-4,x:Mn(f,m)},{i:k-2,x:Mn(g,h)})}else(m||h)&&x.push("translate("+m+n+h+r)}function l(f,g,m,h){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),h.push({i:m.push(s(m)+"rotate(",null,o)-2,x:Mn(f,g)})):g&&m.push(s(m)+"rotate("+g+o)}function d(f,g,m,h){f!==g?h.push({i:m.push(s(m)+"skewX(",null,o)-2,x:Mn(f,g)}):g&&m.push(s(m)+"skewX("+g+o)}function _(f,g,m,h,x,w){if(f!==m||g!==h){var k=x.push(s(x)+"scale(",null,",",null,")");w.push({i:k-4,x:Mn(f,m)},{i:k-2,x:Mn(g,h)})}else(m!==1||h!==1)&&x.push(s(x)+"scale("+m+","+h+")")}return function(f,g){var m=[],h=[];return f=e(f),g=e(g),c(f.translateX,f.translateY,g.translateX,g.translateY,m,h),l(f.rotate,g.rotate,m,h),d(f.skewX,g.skewX,m,h),_(f.scaleX,f.scaleY,g.scaleX,g.scaleY,m,h),f=g=null,function(x){for(var w=-1,k=h.length,S;++w<k;)m[(S=h[w]).i]=S.x(x);return m.join("")}}}var aw=T0(rw,"px, ","px)","deg)"),sw=T0(ow,", ",")",")"),lw=1e-12;function wf(e){return((e=Math.exp(e))+1/e)/2}function uw(e){return((e=Math.exp(e))-1/e)/2}function cw(e){return((e=Math.exp(2*e))-1)/(e+1)}const Wl=(function e(n,r,o){function s(c,l){var d=c[0],_=c[1],f=c[2],g=l[0],m=l[1],h=l[2],x=g-d,w=m-_,k=x*x+w*w,S,b;if(k<lw)b=Math.log(h/f)/n,S=function(j){return[d+j*x,_+j*w,f*Math.exp(n*j*b)]};else{var E=Math.sqrt(k),M=(h*h-f*f+o*k)/(2*f*r*E),q=(h*h-f*f-o*k)/(2*h*r*E),R=Math.log(Math.sqrt(M*M+1)-M),C=Math.log(Math.sqrt(q*q+1)-q);b=(C-R)/n,S=function(j){var P=j*b,V=wf(R),X=f/(r*E)*(V*cw(n*P+R)-uw(R));return[d+X*x,_+X*w,f*V/wf(n*P+R)]}}return S.duration=b*1e3*n/Math.SQRT2,S}return s.rho=function(c){var l=Math.max(.001,+c),d=l*l,_=d*d;return e(l,d,_)},s})(Math.SQRT2,2,4);var Yo=0,Ka=0,Ha=0,R0=1e3,iu,Qa,nu=0,ao=0,ku=0,os=typeof performance=="object"&&performance.now?performance:Date,V0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bp(){return ao||(V0(dw),ao=os.now()+ku)}function dw(){ao=0}function ru(){this._call=this._time=this._next=null}ru.prototype=F0.prototype={constructor:ru,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?bp():+r)+(n==null?0:+n),!this._next&&Qa!==this&&(Qa?Qa._next=this:iu=this,Qa=this),this._call=e,this._time=r,$d()},stop:function(){this._call&&(this._call=null,this._time=1/0,$d())}};function F0(e,n,r){var o=new ru;return o.restart(e,n,r),o}function pw(){bp(),++Yo;for(var e=iu,n;e;)(n=ao-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Yo}function bf(){ao=(nu=os.now())+ku,Yo=Ka=0;try{pw()}finally{Yo=0,mw(),ao=0}}function _w(){var e=os.now(),n=e-nu;n>R0&&(ku-=n,nu=e)}function mw(){for(var e,n=iu,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:iu=r);Qa=e,$d(o)}function $d(e){if(!Yo){Ka&&(Ka=clearTimeout(Ka));var n=e-ao;n>24?(e<1/0&&(Ka=setTimeout(bf,e-os.now()-ku)),Ha&&(Ha=clearInterval(Ha))):(Ha||(nu=os.now(),Ha=setInterval(_w,R0)),Yo=1,V0(bf))}}function kf(e,n,r){var o=new ru;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var fw=wu("start","end","cancel","interrupt"),hw=[],z0=0,Sf=1,Hd=2,Ul=3,Mf=4,Wd=5,Gl=6;function Su(e,n,r,o,s,c){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;yw(e,r,{name:n,index:o,group:s,on:fw,tween:hw,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:z0})}function kp(e,n){var r=cn(e,n);if(r.state>z0)throw new Error("too late; already scheduled");return r}function In(e,n){var r=cn(e,n);if(r.state>Ul)throw new Error("too late; already running");return r}function cn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function yw(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=F0(c,0,r.time);function c(f){r.state=Sf,r.timer.restart(l,r.delay,r.time),r.delay<=f&&l(f-r.delay)}function l(f){var g,m,h,x;if(r.state!==Sf)return _();for(g in o)if(x=o[g],x.name===r.name){if(x.state===Ul)return kf(l);x.state===Mf?(x.state=Gl,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[g]):+g<n&&(x.state=Gl,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[g])}if(kf(function(){r.state===Ul&&(r.state=Mf,r.timer.restart(d,r.delay,r.time),d(f))}),r.state=Hd,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Hd){for(r.state=Ul,s=new Array(h=r.tween.length),g=0,m=-1;g<h;++g)(x=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(s[++m]=x);s.length=m+1}}function d(f){for(var g=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(_),r.state=Wd,1),m=-1,h=s.length;++m<h;)s[m].call(e,g);r.state===Wd&&(r.on.call("end",e,e.__data__,r.index,r.group),_())}function _(){r.state=Gl,r.timer.stop(),delete o[n];for(var f in o)return;delete e.__transition}}function Kl(e,n){var r=e.__transition,o,s,c=!0,l;if(r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){c=!1;continue}s=o.state>Hd&&o.state<Wd,o.state=Gl,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}c&&delete e.__transition}}function gw(e){return this.each(function(){Kl(this,e)})}function xw(e,n){var r,o;return function(){var s=In(this,e),c=s.tween;if(c!==r){o=r=c;for(var l=0,d=o.length;l<d;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function vw(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var c=In(this,e),l=c.tween;if(l!==o){s=(o=l).slice();for(var d={name:n,value:r},_=0,f=s.length;_<f;++_)if(s[_].name===n){s[_]=d;break}_===f&&s.push(d)}c.tween=s}}function ww(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=cn(this.node(),r).tween,s=0,c=o.length,l;s<c;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?xw:vw)(r,e,n))}function Sp(e,n,r){var o=e._id;return e.each(function(){var s=In(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return cn(s,o).value[n]}}function L0(e,n){var r;return(typeof n=="number"?Mn:n instanceof oo?tu:(r=oo(n))?(n=r,tu):j0)(e,n)}function bw(e){return function(){this.removeAttribute(e)}}function kw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sw(e,n,r){var o,s=r+"",c;return function(){var l=this.getAttribute(e);return l===s?null:l===o?c:c=n(o=l,r)}}function Mw(e,n,r){var o,s=r+"",c;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?c:c=n(o=l,r)}}function Cw(e,n,r){var o,s,c;return function(){var l,d=r(this),_;return d==null?void this.removeAttribute(e):(l=this.getAttribute(e),_=d+"",l===_?null:l===o&&_===s?c:(s=_,c=n(o=l,d)))}}function qw(e,n,r){var o,s,c;return function(){var l,d=r(this),_;return d==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),_=d+"",l===_?null:l===o&&_===s?c:(s=_,c=n(o=l,d)))}}function Ew(e,n){var r=bu(e),o=r==="transform"?sw:L0;return this.attrTween(e,typeof n=="function"?(r.local?qw:Cw)(r,o,Sp(this,"attr."+e,n)):n==null?(r.local?kw:bw)(r):(r.local?Mw:Sw)(r,o,n))}function Iw(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function Nw(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function jw(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&Nw(e,c)),r}return s._value=n,s}function Pw(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&Iw(e,c)),r}return s._value=n,s}function Tw(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=bu(e);return this.tween(r,(o.local?jw:Pw)(o,n))}function Rw(e,n){return function(){kp(this,e).delay=+n.apply(this,arguments)}}function Vw(e,n){return n=+n,function(){kp(this,e).delay=n}}function Fw(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Rw:Vw)(n,e)):cn(this.node(),n).delay}function zw(e,n){return function(){In(this,e).duration=+n.apply(this,arguments)}}function Lw(e,n){return n=+n,function(){In(this,e).duration=n}}function Dw(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?zw:Lw)(n,e)):cn(this.node(),n).duration}function Ow(e,n){if(typeof n!="function")throw new Error;return function(){In(this,e).ease=n}}function Bw(e){var n=this._id;return arguments.length?this.each(Ow(n,e)):cn(this.node(),n).ease}function Aw(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;In(this,e).ease=r}}function $w(e){if(typeof e!="function")throw new Error;return this.each(Aw(this._id,e))}function Hw(e){typeof e!="function"&&(e=f0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],l=c.length,d=o[s]=[],_,f=0;f<l;++f)(_=c[f])&&e.call(_,_.__data__,f,c)&&d.push(_);return new Zn(o,this._parents,this._name,this._id)}function Ww(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,c=Math.min(o,s),l=new Array(o),d=0;d<c;++d)for(var _=n[d],f=r[d],g=_.length,m=l[d]=new Array(g),h,x=0;x<g;++x)(h=_[x]||f[x])&&(m[x]=h);for(;d<o;++d)l[d]=n[d];return new Zn(l,this._parents,this._name,this._id)}function Uw(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function Gw(e,n,r){var o,s,c=Uw(n)?kp:In;return function(){var l=c(this,e),d=l.on;d!==o&&(s=(o=d).copy()).on(n,r),l.on=s}}function Kw(e,n){var r=this._id;return arguments.length<2?cn(this.node(),r).on.on(e):this.each(Gw(r,e,n))}function Qw(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function Yw(){return this.on("end.remove",Qw(this._id))}function Xw(e){var n=this._name,r=this._id;typeof e!="function"&&(e=gp(e));for(var o=this._groups,s=o.length,c=new Array(s),l=0;l<s;++l)for(var d=o[l],_=d.length,f=c[l]=new Array(_),g,m,h=0;h<_;++h)(g=d[h])&&(m=e.call(g,g.__data__,h,d))&&("__data__"in g&&(m.__data__=g.__data__),f[h]=m,Su(f[h],n,r,h,f,cn(g,r)));return new Zn(c,this._parents,n,r)}function Zw(e){var n=this._name,r=this._id;typeof e!="function"&&(e=m0(e));for(var o=this._groups,s=o.length,c=[],l=[],d=0;d<s;++d)for(var _=o[d],f=_.length,g,m=0;m<f;++m)if(g=_[m]){for(var h=e.call(g,g.__data__,m,_),x,w=cn(g,r),k=0,S=h.length;k<S;++k)(x=h[k])&&Su(x,n,r,k,h,w);c.push(h),l.push(g)}return new Zn(c,l,n,r)}var Jw=gs.prototype.constructor;function eb(){return new Jw(this._groups,this._parents)}function tb(e,n){var r,o,s;return function(){var c=Qo(this,e),l=(this.style.removeProperty(e),Qo(this,e));return c===l?null:c===r&&l===o?s:s=n(r=c,o=l)}}function D0(e){return function(){this.style.removeProperty(e)}}function ib(e,n,r){var o,s=r+"",c;return function(){var l=Qo(this,e);return l===s?null:l===o?c:c=n(o=l,r)}}function nb(e,n,r){var o,s,c;return function(){var l=Qo(this,e),d=r(this),_=d+"";return d==null&&(_=d=(this.style.removeProperty(e),Qo(this,e))),l===_?null:l===o&&_===s?c:(s=_,c=n(o=l,d))}}function rb(e,n){var r,o,s,c="style."+n,l="end."+c,d;return function(){var _=In(this,e),f=_.on,g=_.value[c]==null?d||(d=D0(n)):void 0;(f!==r||s!==g)&&(o=(r=f).copy()).on(l,s=g),_.on=o}}function ob(e,n,r){var o=(e+="")=="transform"?aw:L0;return n==null?this.styleTween(e,tb(e,o)).on("end.style."+e,D0(e)):typeof n=="function"?this.styleTween(e,nb(e,o,Sp(this,"style."+e,n))).each(rb(this._id,e)):this.styleTween(e,ib(e,o,n),r).on("end.style."+e,null)}function ab(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function sb(e,n,r){var o,s;function c(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&ab(e,l,r)),o}return c._value=n,c}function lb(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,sb(e,n,r??""))}function ub(e){return function(){this.textContent=e}}function cb(e){return function(){var n=e(this);this.textContent=n??""}}function db(e){return this.tween("text",typeof e=="function"?cb(Sp(this,"text",e)):ub(e==null?"":e+""))}function pb(e){return function(n){this.textContent=e.call(this,n)}}function _b(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&pb(s)),n}return o._value=e,o}function mb(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,_b(e))}function fb(){for(var e=this._name,n=this._id,r=O0(),o=this._groups,s=o.length,c=0;c<s;++c)for(var l=o[c],d=l.length,_,f=0;f<d;++f)if(_=l[f]){var g=cn(_,n);Su(_,e,r,f,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Zn(o,this._parents,e,r)}function hb(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(c,l){var d={value:l},_={value:function(){--s===0&&c()}};r.each(function(){var f=In(this,o),g=f.on;g!==e&&(n=(e=g).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(_)),f.on=n}),s===0&&c()})}var yb=0;function Zn(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function O0(){return++yb}var Qn=gs.prototype;Zn.prototype={constructor:Zn,select:Xw,selectAll:Zw,selectChild:Qn.selectChild,selectChildren:Qn.selectChildren,filter:Hw,merge:Ww,selection:eb,transition:fb,call:Qn.call,nodes:Qn.nodes,node:Qn.node,size:Qn.size,empty:Qn.empty,each:Qn.each,on:Kw,attr:Ew,attrTween:Tw,style:ob,styleTween:lb,text:db,textTween:mb,remove:Yw,tween:ww,delay:Fw,duration:Dw,ease:Bw,easeVarying:$w,end:hb,[Symbol.iterator]:Qn[Symbol.iterator]};function gb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xb={time:null,delay:0,duration:250,ease:gb};function vb(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function wb(e){var n,r;e instanceof Zn?(n=e._id,e=e._name):(n=O0(),(r=xb).time=bp(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,c=0;c<s;++c)for(var l=o[c],d=l.length,_,f=0;f<d;++f)(_=l[f])&&Su(_,e,n,f,l,r||vb(_,n));return new Zn(o,this._parents,e,n)}gs.prototype.interrupt=gw;gs.prototype.transition=wb;const jl=e=>()=>e;function bb(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function Yn(e,n,r){this.k=e,this.x=n,this.y=r}Yn.prototype={constructor:Yn,scale:function(e){return e===1?this:new Yn(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Yn(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mu=new Yn(1,0,0);B0.prototype=Yn.prototype;function B0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Mu;return e.__zoom}function md(e){e.stopImmediatePropagation()}function Wa(e){e.preventDefault(),e.stopImmediatePropagation()}function kb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Sb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Cf(){return this.__zoom||Mu}function Mb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cb(){return navigator.maxTouchPoints||"ontouchstart"in this}function qb(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],l=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),l>c?(c+l)/2:Math.min(0,c)||Math.max(0,l))}function A0(){var e=kb,n=Sb,r=qb,o=Mb,s=Cb,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],d=250,_=Wl,f=wu("start","zoom","end"),g,m,h,x=500,w=150,k=0,S=10;function b(T){T.property("__zoom",Cf).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",X).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(T,Y,W,Z){var $=T.selection?T.selection():T;$.property("__zoom",Cf),T!==$?R(T,Y,W,Z):$.interrupt().each(function(){C(this,arguments).event(Z).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},b.scaleBy=function(T,Y,W,Z){b.scaleTo(T,function(){var $=this.__zoom.k,H=typeof Y=="function"?Y.apply(this,arguments):Y;return $*H},W,Z)},b.scaleTo=function(T,Y,W,Z){b.transform(T,function(){var $=n.apply(this,arguments),H=this.__zoom,J=W==null?q($):typeof W=="function"?W.apply(this,arguments):W,L=H.invert(J),G=typeof Y=="function"?Y.apply(this,arguments):Y;return r(M(E(H,G),J,L),$,l)},W,Z)},b.translateBy=function(T,Y,W,Z){b.transform(T,function(){return r(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof W=="function"?W.apply(this,arguments):W),n.apply(this,arguments),l)},null,Z)},b.translateTo=function(T,Y,W,Z,$){b.transform(T,function(){var H=n.apply(this,arguments),J=this.__zoom,L=Z==null?q(H):typeof Z=="function"?Z.apply(this,arguments):Z;return r(Mu.translate(L[0],L[1]).scale(J.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof W=="function"?-W.apply(this,arguments):-W),H,l)},Z,$)};function E(T,Y){return Y=Math.max(c[0],Math.min(c[1],Y)),Y===T.k?T:new Yn(Y,T.x,T.y)}function M(T,Y,W){var Z=Y[0]-W[0]*T.k,$=Y[1]-W[1]*T.k;return Z===T.x&&$===T.y?T:new Yn(T.k,Z,$)}function q(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function R(T,Y,W,Z){T.on("start.zoom",function(){C(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(Z).end()}).tween("zoom",function(){var $=this,H=arguments,J=C($,H).event(Z),L=n.apply($,H),G=W==null?q(L):typeof W=="function"?W.apply($,H):W,ce=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),ue=$.__zoom,pe=typeof Y=="function"?Y.apply($,H):Y,ye=_(ue.invert(G).concat(ce/ue.k),pe.invert(G).concat(ce/pe.k));return function(ge){if(ge===1)ge=pe;else{var le=ye(ge),ve=ce/le[2];ge=new Yn(ve,G[0]-le[0]*ve,G[1]-le[1]*ve)}J.zoom(null,ge)}})}function C(T,Y,W){return!W&&T.__zooming||new j(T,Y)}function j(T,Y){this.that=T,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=n.apply(T,Y),this.taps=0}j.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,Y){return this.mouse&&T!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var Y=Ti(this.that).datum();f.call(T,this.that,new bb(T,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:f}),Y)}};function P(T,...Y){if(!e.apply(this,arguments))return;var W=C(this,Y).event(T),Z=this.__zoom,$=Math.max(c[0],Math.min(c[1],Z.k*Math.pow(2,o.apply(this,arguments)))),H=rn(T);if(W.wheel)(W.mouse[0][0]!==H[0]||W.mouse[0][1]!==H[1])&&(W.mouse[1]=Z.invert(W.mouse[0]=H)),clearTimeout(W.wheel);else{if(Z.k===$)return;W.mouse=[H,Z.invert(H)],Kl(this),W.start()}Wa(T),W.wheel=setTimeout(J,w),W.zoom("mouse",r(M(E(Z,$),W.mouse[0],W.mouse[1]),W.extent,l));function J(){W.wheel=null,W.end()}}function V(T,...Y){if(h||!e.apply(this,arguments))return;var W=T.currentTarget,Z=C(this,Y,!0).event(T),$=Ti(T.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",ce,!0),H=rn(T,W),J=T.clientX,L=T.clientY;M0(T.view),md(T),Z.mouse=[H,this.__zoom.invert(H)],Kl(this),Z.start();function G(ue){if(Wa(ue),!Z.moved){var pe=ue.clientX-J,ye=ue.clientY-L;Z.moved=pe*pe+ye*ye>k}Z.event(ue).zoom("mouse",r(M(Z.that.__zoom,Z.mouse[0]=rn(ue,W),Z.mouse[1]),Z.extent,l))}function ce(ue){$.on("mousemove.zoom mouseup.zoom",null),C0(ue.view,Z.moved),Wa(ue),Z.event(ue).end()}}function X(T,...Y){if(e.apply(this,arguments)){var W=this.__zoom,Z=rn(T.changedTouches?T.changedTouches[0]:T,this),$=W.invert(Z),H=W.k*(T.shiftKey?.5:2),J=r(M(E(W,H),Z,$),n.apply(this,Y),l);Wa(T),d>0?Ti(this).transition().duration(d).call(R,J,Z,T):Ti(this).call(b.transform,J,Z,T)}}function F(T,...Y){if(e.apply(this,arguments)){var W=T.touches,Z=W.length,$=C(this,Y,T.changedTouches.length===Z).event(T),H,J,L,G;for(md(T),J=0;J<Z;++J)L=W[J],G=rn(L,this),G=[G,this.__zoom.invert(G),L.identifier],$.touch0?!$.touch1&&$.touch0[2]!==G[2]&&($.touch1=G,$.taps=0):($.touch0=G,H=!0,$.taps=1+!!g);g&&(g=clearTimeout(g)),H&&($.taps<2&&(m=G[0],g=setTimeout(function(){g=null},x)),Kl(this),$.start())}}function D(T,...Y){if(this.__zooming){var W=C(this,Y).event(T),Z=T.changedTouches,$=Z.length,H,J,L,G;for(Wa(T),H=0;H<$;++H)J=Z[H],L=rn(J,this),W.touch0&&W.touch0[2]===J.identifier?W.touch0[0]=L:W.touch1&&W.touch1[2]===J.identifier&&(W.touch1[0]=L);if(J=W.that.__zoom,W.touch1){var ce=W.touch0[0],ue=W.touch0[1],pe=W.touch1[0],ye=W.touch1[1],ge=(ge=pe[0]-ce[0])*ge+(ge=pe[1]-ce[1])*ge,le=(le=ye[0]-ue[0])*le+(le=ye[1]-ue[1])*le;J=E(J,Math.sqrt(ge/le)),L=[(ce[0]+pe[0])/2,(ce[1]+pe[1])/2],G=[(ue[0]+ye[0])/2,(ue[1]+ye[1])/2]}else if(W.touch0)L=W.touch0[0],G=W.touch0[1];else return;W.zoom("touch",r(M(J,L,G),W.extent,l))}}function te(T,...Y){if(this.__zooming){var W=C(this,Y).event(T),Z=T.changedTouches,$=Z.length,H,J;for(md(T),h&&clearTimeout(h),h=setTimeout(function(){h=null},x),H=0;H<$;++H)J=Z[H],W.touch0&&W.touch0[2]===J.identifier?delete W.touch0:W.touch1&&W.touch1[2]===J.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(J=rn(J,this),Math.hypot(m[0]-J[0],m[1]-J[1])<S)){var L=Ti(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return b.wheelDelta=function(T){return arguments.length?(o=typeof T=="function"?T:jl(+T),b):o},b.filter=function(T){return arguments.length?(e=typeof T=="function"?T:jl(!!T),b):e},b.touchable=function(T){return arguments.length?(s=typeof T=="function"?T:jl(!!T),b):s},b.extent=function(T){return arguments.length?(n=typeof T=="function"?T:jl([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),b):n},b.scaleExtent=function(T){return arguments.length?(c[0]=+T[0],c[1]=+T[1],b):[c[0],c[1]]},b.translateExtent=function(T){return arguments.length?(l[0][0]=+T[0][0],l[1][0]=+T[1][0],l[0][1]=+T[0][1],l[1][1]=+T[1][1],b):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},b.constrain=function(T){return arguments.length?(r=T,b):r},b.duration=function(T){return arguments.length?(d=+T,b):d},b.interpolate=function(T){return arguments.length?(_=T,b):_},b.on=function(){var T=f.on.apply(f,arguments);return T===f?b:T},b.clickDistance=function(T){return arguments.length?(k=(T=+T)*T,b):Math.sqrt(k)},b.tapDistance=function(T){return arguments.length?(S=+T,b):S},b}const qn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:o}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},as=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$0=["Enter"," ","Escape"],H0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Xo;(function(e){e.Strict="strict",e.Loose="loose"})(Xo||(Xo={}));var ro;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ro||(ro={}));var ss;(function(e){e.Partial="partial",e.Full="full"})(ss||(ss={}));const W0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Mr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Mr||(Mr={}));var ou;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ou||(ou={}));var De;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(De||(De={}));const qf={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top};function U0(e){return e===null?null:e?"valid":"invalid"}const G0=e=>"id"in e&&"source"in e&&"target"in e,Eb=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Mp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),vs=(e,n=[0,0])=>{const{width:r,height:o}=Jn(e),s=e.origin??n,c=r*s[0],l=o*s[1];return{x:e.position.x-c,y:e.position.y-l}},Ib=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const c=typeof s=="string";let l=!n.nodeLookup&&!c?s:void 0;n.nodeLookup&&(l=c?n.nodeLookup.get(s):Mp(s)?s:n.nodeLookup.get(s.id));const d=l?au(l,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Cu(o,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qu(r)},ws=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(s=>{(n.filter===void 0||n.filter(s))&&(r=Cu(r,au(s)),o=!0)}),o?qu(r):{x:0,y:0,width:0,height:0}},Cp=(e,n,[r,o,s]=[0,0,1],c=!1,l=!1)=>{const d={...ks(n,[r,o,s]),width:n.width/s,height:n.height/s},_=[];for(const f of e.values()){const{measured:g,selectable:m=!0,hidden:h=!1}=f;if(l&&!m||h)continue;const x=g.width??f.width??f.initialWidth??null,w=g.height??f.height??f.initialHeight??null,k=ls(d,Jo(f)),S=(x??0)*(w??0),b=c&&k>0;(!f.internals.handleBounds||b||k>=S||f.dragging)&&_.push(f)}return _},Nb=(e,n)=>{const r=new Set;return e.forEach(o=>{r.add(o.id)}),n.filter(o=>r.has(o.source)||r.has(o.target))};function jb(e,n){const r=new Map,o=n!=null&&n.nodes?new Set(n.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((n==null?void 0:n.includeHiddenNodes)||!s.hidden)&&(!o||o.has(s.id))&&r.set(s.id,s)}),r}async function Pb({nodes:e,width:n,height:r,panZoom:o,minZoom:s,maxZoom:c},l){if(e.size===0)return Promise.resolve(!0);const d=jb(e,l),_=ws(d),f=qp(_,n,r,(l==null?void 0:l.minZoom)??s,(l==null?void 0:l.maxZoom)??c,(l==null?void 0:l.padding)??.1);return await o.setViewport(f,{duration:l==null?void 0:l.duration,ease:l==null?void 0:l.ease,interpolate:l==null?void 0:l.interpolate}),Promise.resolve(!0)}function K0({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:o=[0,0],nodeExtent:s,onError:c}){const l=r.get(e),d=l.parentId?r.get(l.parentId):void 0,{x:_,y:f}=d?d.internals.positionAbsolute:{x:0,y:0},g=l.origin??o;let m=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!d)c==null||c("005",qn.error005());else{const x=d.measured.width,w=d.measured.height;x&&w&&(m=[[_,f],[_+x,f+w]])}else d&&ea(l.extent)&&(m=[[l.extent[0][0]+_,l.extent[0][1]+f],[l.extent[1][0]+_,l.extent[1][1]+f]]);const h=ea(m)?so(n,m,l.measured):n;return(l.measured.width===void 0||l.measured.height===void 0)&&(c==null||c("015",qn.error015())),{position:{x:h.x-_+(l.measured.width??0)*g[0],y:h.y-f+(l.measured.height??0)*g[1]},positionAbsolute:h}}async function Tb({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:o,onBeforeDelete:s}){const c=new Set(e.map(h=>h.id)),l=[];for(const h of r){if(h.deletable===!1)continue;const x=c.has(h.id),w=!x&&h.parentId&&l.find(k=>k.id===h.parentId);(x||w)&&l.push(h)}const d=new Set(n.map(h=>h.id)),_=o.filter(h=>h.deletable!==!1),g=Nb(l,_);for(const h of _)d.has(h.id)&&!g.find(w=>w.id===h.id)&&g.push(h);if(!s)return{edges:g,nodes:l};const m=await s({nodes:l,edges:g});return typeof m=="boolean"?m?{edges:g,nodes:l}:{edges:[],nodes:[]}:m}const Zo=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),so=(e={x:0,y:0},n,r)=>({x:Zo(e.x,n[0][0],n[1][0]-((r==null?void 0:r.width)??0)),y:Zo(e.y,n[0][1],n[1][1]-((r==null?void 0:r.height)??0))});function Q0(e,n,r){const{width:o,height:s}=Jn(r),{x:c,y:l}=r.internals.positionAbsolute;return so(e,[[c,l],[c+o,l+s]],n)}const Ef=(e,n,r)=>e<n?Zo(Math.abs(e-n),1,n)/n:e>r?-Zo(Math.abs(e-r),1,n)/n:0,Y0=(e,n,r=15,o=40)=>{const s=Ef(e.x,o,n.width-o)*r,c=Ef(e.y,o,n.height-o)*r;return[s,c]},Cu=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Ud=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),qu=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),Jo=(e,n=[0,0])=>{var s,c;const{x:r,y:o}=Mp(e)?e.internals.positionAbsolute:vs(e,n);return{x:r,y:o,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((c=e.measured)==null?void 0:c.height)??e.height??e.initialHeight??0}},au=(e,n=[0,0])=>{var s,c;const{x:r,y:o}=Mp(e)?e.internals.positionAbsolute:vs(e,n);return{x:r,y:o,x2:r+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:o+(((c=e.measured)==null?void 0:c.height)??e.height??e.initialHeight??0)}},X0=(e,n)=>qu(Cu(Ud(e),Ud(n))),ls=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},If=e=>sn(e.width)&&sn(e.height)&&sn(e.x)&&sn(e.y),sn=e=>!isNaN(e)&&isFinite(e),Rb=(e,n)=>{},bs=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),ks=({x:e,y:n},[r,o,s],c=!1,l=[1,1])=>{const d={x:(e-r)/s,y:(n-o)/s};return c?bs(d,l):d},su=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o});function $o(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Vb(e,n,r){if(typeof e=="string"||typeof e=="number"){const o=$o(e,r),s=$o(e,n);return{top:o,right:s,bottom:o,left:s,x:s*2,y:o*2}}if(typeof e=="object"){const o=$o(e.top??e.y??0,r),s=$o(e.bottom??e.y??0,r),c=$o(e.left??e.x??0,n),l=$o(e.right??e.x??0,n);return{top:o,right:l,bottom:s,left:c,x:c+l,y:o+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Fb(e,n,r,o,s,c){const{x:l,y:d}=su(e,[n,r,o]),{x:_,y:f}=su({x:e.x+e.width,y:e.y+e.height},[n,r,o]),g=s-_,m=c-f;return{left:Math.floor(l),top:Math.floor(d),right:Math.floor(g),bottom:Math.floor(m)}}const qp=(e,n,r,o,s,c)=>{const l=Vb(c,n,r),d=(n-l.x)/e.width,_=(r-l.y)/e.height,f=Math.min(d,_),g=Zo(f,o,s),m=e.x+e.width/2,h=e.y+e.height/2,x=n/2-m*g,w=r/2-h*g,k=Fb(e,x,w,g,n,r),S={left:Math.min(k.left-l.left,0),top:Math.min(k.top-l.top,0),right:Math.min(k.right-l.right,0),bottom:Math.min(k.bottom-l.bottom,0)};return{x:x-S.left+S.right,y:w-S.top+S.bottom,zoom:g}},us=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ea(e){return e!=null&&e!=="parent"}function Jn(e){var n,r;return{width:((n=e.measured)==null?void 0:n.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}}function Z0(e){var n,r;return(((n=e.measured)==null?void 0:n.width)??e.width??e.initialWidth)!==void 0&&(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight)!==void 0}function J0(e,n={width:0,height:0},r,o,s){const c={...e},l=o.get(r);if(l){const d=l.origin||s;c.x+=l.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=l.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function Nf(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function zb(){let e,n;return{promise:new Promise((o,s)=>{e=o,n=s}),resolve:e,reject:n}}function Lb(e){return{...H0,...e||{}}}function Xa(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:o,containerBounds:s}){const{x:c,y:l}=ln(e),d=ks({x:c-((s==null?void 0:s.left)??0),y:l-((s==null?void 0:s.top)??0)},o),{x:_,y:f}=r?bs(d,n):d;return{xSnapped:_,ySnapped:f,...d}}const Ep=e=>({width:e.offsetWidth,height:e.offsetHeight}),ey=e=>{var n;return((n=e==null?void 0:e.getRootNode)==null?void 0:n.call(e))||(window==null?void 0:window.document)},Db=["INPUT","SELECT","TEXTAREA"];function ty(e){var o,s;const n=((s=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:s[0])||e.target;return(n==null?void 0:n.nodeType)!==1?!1:Db.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const iy=e=>"clientX"in e,ln=(e,n)=>{var c,l;const r=iy(e),o=r?e.clientX:(c=e.touches)==null?void 0:c[0].clientX,s=r?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((n==null?void 0:n.left)??0),y:s-((n==null?void 0:n.top)??0)}},jf=(e,n,r,o,s)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(l=>{const d=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:s,position:l.getAttribute("data-handlepos"),x:(d.left-r.left)/o,y:(d.top-r.top)/o,...Ep(l)}})};function ny({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:d}){const _=e*.125+s*.375+l*.375+r*.125,f=n*.125+c*.375+d*.375+o*.125,g=Math.abs(_-e),m=Math.abs(f-n);return[_,f,g,m]}function Pl(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function Pf({pos:e,x1:n,y1:r,x2:o,y2:s,c}){switch(e){case De.Left:return[n-Pl(n-o,c),r];case De.Right:return[n+Pl(o-n,c),r];case De.Top:return[n,r-Pl(r-s,c)];case De.Bottom:return[n,r+Pl(s-r,c)]}}function Ip({sourceX:e,sourceY:n,sourcePosition:r=De.Bottom,targetX:o,targetY:s,targetPosition:c=De.Top,curvature:l=.25}){const[d,_]=Pf({pos:r,x1:e,y1:n,x2:o,y2:s,c:l}),[f,g]=Pf({pos:c,x1:o,y1:s,x2:e,y2:n,c:l}),[m,h,x,w]=ny({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:d,sourceControlY:_,targetControlX:f,targetControlY:g});return[`M${e},${n} C${d},${_} ${f},${g} ${o},${s}`,m,h,x,w]}function ry({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,c=r<e?r+s:r-s,l=Math.abs(o-n)/2,d=o<n?o+l:o-l;return[c,d,s,l]}function Ob({sourceNode:e,targetNode:n,selected:r=!1,zIndex:o=0,elevateOnSelect:s=!1,zIndexMode:c="basic"}){if(c==="manual")return o;const l=s&&r?o+1e3:o,d=Math.max(e.parentId||s&&e.selected?e.internals.z:0,n.parentId||s&&n.selected?n.internals.z:0);return l+d}function Bb({sourceNode:e,targetNode:n,width:r,height:o,transform:s}){const c=Cu(au(e),au(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:r/s[2],height:o/s[2]};return ls(l,qu(c))>0}const Ab=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`xy-edge__${e}${n||""}-${r}${o||""}`,$b=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Gd=(e,n,r={})=>{if(!e.source||!e.target)return n;const o=r.getEdgeId||Ab;let s;return G0(e)?s={...e}:s={...e,id:o(e)},$b(s,n)?n:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,n.concat(s))};function Np({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,c,l,d]=ry({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,c,l,d]}const Tf={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},Hb=({source:e,sourcePosition:n=De.Bottom,target:r})=>n===De.Left||n===De.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Rf=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function Wb({source:e,sourcePosition:n=De.Bottom,target:r,targetPosition:o=De.Top,center:s,offset:c,stepPosition:l}){const d=Tf[n],_=Tf[o],f={x:e.x+d.x*c,y:e.y+d.y*c},g={x:r.x+_.x*c,y:r.y+_.y*c},m=Hb({source:f,sourcePosition:n,target:g}),h=m.x!==0?"x":"y",x=m[h];let w=[],k,S;const b={x:0,y:0},E={x:0,y:0},[,,M,q]=ry({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(d[h]*_[h]===-1){h==="x"?(k=s.x??f.x+(g.x-f.x)*l,S=s.y??(f.y+g.y)/2):(k=s.x??(f.x+g.x)/2,S=s.y??f.y+(g.y-f.y)*l);const C=[{x:k,y:f.y},{x:k,y:g.y}],j=[{x:f.x,y:S},{x:g.x,y:S}];d[h]===x?w=h==="x"?C:j:w=h==="x"?j:C}else{const C=[{x:f.x,y:g.y}],j=[{x:g.x,y:f.y}];if(h==="x"?w=d.x===x?j:C:w=d.y===x?C:j,n===o){const D=Math.abs(e[h]-r[h]);if(D<=c){const te=Math.min(c-1,c-D);d[h]===x?b[h]=(f[h]>e[h]?-1:1)*te:E[h]=(g[h]>r[h]?-1:1)*te}}if(n!==o){const D=h==="x"?"y":"x",te=d[h]===_[D],T=f[D]>g[D],Y=f[D]<g[D];(d[h]===1&&(!te&&T||te&&Y)||d[h]!==1&&(!te&&Y||te&&T))&&(w=h==="x"?C:j)}const P={x:f.x+b.x,y:f.y+b.y},V={x:g.x+E.x,y:g.y+E.y},X=Math.max(Math.abs(P.x-w[0].x),Math.abs(V.x-w[0].x)),F=Math.max(Math.abs(P.y-w[0].y),Math.abs(V.y-w[0].y));X>=F?(k=(P.x+V.x)/2,S=w[0].y):(k=w[0].x,S=(P.y+V.y)/2)}return[[e,{x:f.x+b.x,y:f.y+b.y},...w,{x:g.x+E.x,y:g.y+E.y},r],k,S,M,q]}function Ub(e,n,r,o){const s=Math.min(Rf(e,n)/2,Rf(n,r)/2,o),{x:c,y:l}=n;if(e.x===c&&c===r.x||e.y===l&&l===r.y)return`L${c} ${l}`;if(e.y===l){const f=e.x<r.x?-1:1,g=e.y<r.y?1:-1;return`L ${c+s*f},${l}Q ${c},${l} ${c},${l+s*g}`}const d=e.x<r.x?1:-1,_=e.y<r.y?-1:1;return`L ${c},${l+s*_}Q ${c},${l} ${c+s*d},${l}`}function Kd({sourceX:e,sourceY:n,sourcePosition:r=De.Bottom,targetX:o,targetY:s,targetPosition:c=De.Top,borderRadius:l=5,centerX:d,centerY:_,offset:f=20,stepPosition:g=.5}){const[m,h,x,w,k]=Wb({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:c,center:{x:d,y:_},offset:f,stepPosition:g});return[m.reduce((b,E,M)=>{let q="";return M>0&&M<m.length-1?q=Ub(m[M-1],E,m[M+1],l):q=`${M===0?"M":"L"}${E.x} ${E.y}`,b+=q,b},""),h,x,w,k]}function Vf(e){var n;return e&&!!(e.internals.handleBounds||(n=e.handles)!=null&&n.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Gb(e){var m;const{sourceNode:n,targetNode:r}=e;if(!Vf(n)||!Vf(r))return null;const o=n.internals.handleBounds||Ff(n.handles),s=r.internals.handleBounds||Ff(r.handles),c=zf((o==null?void 0:o.source)??[],e.sourceHandle),l=zf(e.connectionMode===Xo.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!c||!l)return(m=e.onError)==null||m.call(e,"008",qn.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=(c==null?void 0:c.position)||De.Bottom,_=(l==null?void 0:l.position)||De.Top,f=lo(n,c,d),g=lo(r,l,_);return{sourceX:f.x,sourceY:f.y,targetX:g.x,targetY:g.y,sourcePosition:d,targetPosition:_}}function Ff(e){if(!e)return null;const n=[],r=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?n.push(o):o.type==="target"&&r.push(o);return{source:n,target:r}}function lo(e,n,r=De.Left,o=!1){const s=((n==null?void 0:n.x)??0)+e.internals.positionAbsolute.x,c=((n==null?void 0:n.y)??0)+e.internals.positionAbsolute.y,{width:l,height:d}=n??Jn(e);if(o)return{x:s+l/2,y:c+d/2};switch((n==null?void 0:n.position)??r){case De.Top:return{x:s+l/2,y:c};case De.Right:return{x:s+l,y:c+d/2};case De.Bottom:return{x:s+l/2,y:c+d};case De.Left:return{x:s,y:c+d/2}}}function zf(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function Qd(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Kb(e,{id:n,defaultColor:r,defaultMarkerStart:o,defaultMarkerEnd:s}){const c=new Set;return e.reduce((l,d)=>([d.markerStart||o,d.markerEnd||s].forEach(_=>{if(_&&typeof _=="object"){const f=Qd(_,n);c.has(f)||(l.push({id:f,color:_.color||r,..._}),c.add(f))}}),l),[]).sort((l,d)=>l.id.localeCompare(d.id))}const oy=1e3,Qb=10,jp={nodeOrigin:[0,0],nodeExtent:as,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Yb={...jp,checkEquality:!0};function Pp(e,n){const r={...e};for(const o in n)n[o]!==void 0&&(r[o]=n[o]);return r}function Xb(e,n,r){const o=Pp(jp,r);for(const s of e.values())if(s.parentId)Rp(s,e,n,o);else{const c=vs(s,o.nodeOrigin),l=ea(s.extent)?s.extent:o.nodeExtent,d=so(c,l,Jn(s));s.internals.positionAbsolute=d}}function Zb(e,n){if(!e.handles)return e.measured?n==null?void 0:n.internals.handleBounds:void 0;const r=[],o=[];for(const s of e.handles){const c={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?r.push(c):s.type==="target"&&o.push(c)}return{source:r,target:o}}function Tp(e){return e==="manual"}function Yd(e,n,r,o={}){var f,g;const s=Pp(Yb,o),c={i:0},l=new Map(n),d=s!=null&&s.elevateNodesOnSelect&&!Tp(s.zIndexMode)?oy:0;let _=e.length>0;n.clear(),r.clear();for(const m of e){let h=l.get(m.id);if(s.checkEquality&&m===(h==null?void 0:h.internals.userNode))n.set(m.id,h);else{const x=vs(m,s.nodeOrigin),w=ea(m.extent)?m.extent:s.nodeExtent,k=so(x,w,Jn(m));h={...s.defaults,...m,measured:{width:(f=m.measured)==null?void 0:f.width,height:(g=m.measured)==null?void 0:g.height},internals:{positionAbsolute:k,handleBounds:Zb(m,h),z:ay(m,d,s.zIndexMode),userNode:m}},n.set(m.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(_=!1),m.parentId&&Rp(h,n,r,o,c)}return _}function Jb(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function Rp(e,n,r,o,s){const{elevateNodesOnSelect:c,nodeOrigin:l,nodeExtent:d,zIndexMode:_}=Pp(jp,o),f=e.parentId,g=n.get(f);if(!g){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Jb(e,r),s&&!g.parentId&&g.internals.rootParentIndex===void 0&&_==="auto"&&(g.internals.rootParentIndex=++s.i,g.internals.z=g.internals.z+s.i*Qb),s&&g.internals.rootParentIndex!==void 0&&(s.i=g.internals.rootParentIndex);const m=c&&!Tp(_)?oy:0,{x:h,y:x,z:w}=e2(e,g,l,d,m,_),{positionAbsolute:k}=e.internals,S=h!==k.x||x!==k.y;(S||w!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:S?{x:h,y:x}:k,z:w}})}function ay(e,n,r){const o=sn(e.zIndex)?e.zIndex:0;return Tp(r)?o:o+(e.selected?n:0)}function e2(e,n,r,o,s,c){const{x:l,y:d}=n.internals.positionAbsolute,_=Jn(e),f=vs(e,r),g=ea(e.extent)?so(f,e.extent,_):f;let m=so({x:l+g.x,y:d+g.y},o,_);e.extent==="parent"&&(m=Q0(m,_,n));const h=ay(e,s,c),x=n.internals.z??0;return{x:m.x,y:m.y,z:x>=h?x+1:h}}function Vp(e,n,r,o=[0,0]){var l;const s=[],c=new Map;for(const d of e){const _=n.get(d.parentId);if(!_)continue;const f=((l=c.get(d.parentId))==null?void 0:l.expandedRect)??Jo(_),g=X0(f,d.rect);c.set(d.parentId,{expandedRect:g,parent:_})}return c.size>0&&c.forEach(({expandedRect:d,parent:_},f)=>{var M;const g=_.internals.positionAbsolute,m=Jn(_),h=_.origin??o,x=d.x<g.x?Math.round(Math.abs(g.x-d.x)):0,w=d.y<g.y?Math.round(Math.abs(g.y-d.y)):0,k=Math.max(m.width,Math.round(d.width)),S=Math.max(m.height,Math.round(d.height)),b=(k-m.width)*h[0],E=(S-m.height)*h[1];(x>0||w>0||b||E)&&(s.push({id:f,type:"position",position:{x:_.position.x-x+b,y:_.position.y-w+E}}),(M=r.get(f))==null||M.forEach(q=>{e.some(R=>R.id===q.id)||s.push({id:q.id,type:"position",position:{x:q.position.x+x,y:q.position.y+w}})})),(m.width<d.width||m.height<d.height||x||w)&&s.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:k+(x?h[0]*x-b:0),height:S+(w?h[1]*w-E:0)}})}),s}function t2(e,n,r,o,s,c,l){const d=o==null?void 0:o.querySelector(".xyflow__viewport");let _=!1;if(!d)return{changes:[],updatedInternals:_};const f=[],g=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(g.transform),h=[];for(const x of e.values()){const w=n.get(x.id);if(!w)continue;if(w.hidden){n.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),_=!0;continue}const k=Ep(x.nodeElement),S=w.measured.width!==k.width||w.measured.height!==k.height;if(!!(k.width&&k.height&&(S||!w.internals.handleBounds||x.force))){const E=x.nodeElement.getBoundingClientRect(),M=ea(w.extent)?w.extent:c;let{positionAbsolute:q}=w.internals;w.parentId&&w.extent==="parent"?q=Q0(q,k,n.get(w.parentId)):M&&(q=so(q,M,k));const R={...w,measured:k,internals:{...w.internals,positionAbsolute:q,handleBounds:{source:jf("source",x.nodeElement,E,m,w.id),target:jf("target",x.nodeElement,E,m,w.id)}}};n.set(w.id,R),w.parentId&&Rp(R,n,r,{nodeOrigin:s,zIndexMode:l}),_=!0,S&&(f.push({id:w.id,type:"dimensions",dimensions:k}),w.expandParent&&w.parentId&&h.push({id:w.id,parentId:w.parentId,rect:Jo(R,s)}))}}if(h.length>0){const x=Vp(h,n,r,s);f.push(...x)}return{changes:f,updatedInternals:_}}async function i2({delta:e,panZoom:n,transform:r,translateExtent:o,width:s,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const l=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[s,c]],o),d=!!l&&(l.x!==r[0]||l.y!==r[1]||l.k!==r[2]);return Promise.resolve(d)}function Lf(e,n,r,o,s,c){let l=s;const d=o.get(l)||new Map;o.set(l,d.set(r,n)),l=`${s}-${e}`;const _=o.get(l)||new Map;if(o.set(l,_.set(r,n)),c){l=`${s}-${e}-${c}`;const f=o.get(l)||new Map;o.set(l,f.set(r,n))}}function sy(e,n,r){e.clear(),n.clear();for(const o of r){const{source:s,target:c,sourceHandle:l=null,targetHandle:d=null}=o,_={edgeId:o.id,source:s,target:c,sourceHandle:l,targetHandle:d},f=`${s}-${l}--${c}-${d}`,g=`${c}-${d}--${s}-${l}`;Lf("source",_,g,e,s,l),Lf("target",_,f,e,c,d),n.set(o.id,o)}}function ly(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:ly(r,n):!1}function Df(e,n,r){var s;let o=e;do{if((s=o==null?void 0:o.matches)!=null&&s.call(o,n))return!0;if(o===r)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function n2(e,n,r,o){const s=new Map;for(const[c,l]of e)if((l.selected||l.id===o)&&(!l.parentId||!ly(l,e))&&(l.draggable||n&&typeof l.draggable>"u")){const d=e.get(c);d&&s.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:r.x-d.internals.positionAbsolute.x,y:r.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return s}function fd({nodeId:e,dragItems:n,nodeLookup:r,dragging:o=!0}){var l,d,_;const s=[];for(const[f,g]of n){const m=(l=r.get(f))==null?void 0:l.internals.userNode;m&&s.push({...m,position:g.position,dragging:o})}if(!e)return[s[0],s];const c=(d=r.get(e))==null?void 0:d.internals.userNode;return[c?{...c,position:((_=n.get(e))==null?void 0:_.position)||c.position,dragging:o}:s[0],s]}function r2({dragItems:e,snapGrid:n,x:r,y:o}){const s=e.values().next().value;if(!s)return null;const c={x:r-s.distance.x,y:o-s.distance.y},l=bs(c,n);return{x:l.x-c.x,y:l.y-c.y}}function o2({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:o,onDragStop:s}){let c={x:null,y:null},l=0,d=new Map,_=!1,f={x:0,y:0},g=null,m=!1,h=null,x=!1,w=!1,k=null;function S({noDragClassName:E,handleSelector:M,domNode:q,isSelectable:R,nodeId:C,nodeClickDistance:j=0}){h=Ti(q);function P({x:D,y:te}){const{nodeLookup:T,nodeExtent:Y,snapGrid:W,snapToGrid:Z,nodeOrigin:$,onNodeDrag:H,onSelectionDrag:J,onError:L,updateNodePositions:G}=n();c={x:D,y:te};let ce=!1;const ue=d.size>1,pe=ue&&Y?Ud(ws(d)):null,ye=ue&&Z?r2({dragItems:d,snapGrid:W,x:D,y:te}):null;for(const[ge,le]of d){if(!T.has(ge))continue;let ve={x:D-le.distance.x,y:te-le.distance.y};Z&&(ve=ye?{x:Math.round(ve.x+ye.x),y:Math.round(ve.y+ye.y)}:bs(ve,W));let we=null;if(ue&&Y&&!le.extent&&pe){const{positionAbsolute:Pe}=le.internals,We=Pe.x-pe.x+Y[0][0],Je=Pe.x+le.measured.width-pe.x2+Y[1][0],Ke=Pe.y-pe.y+Y[0][1],st=Pe.y+le.measured.height-pe.y2+Y[1][1];we=[[We,Ke],[Je,st]]}const{position:Oe,positionAbsolute:Re}=K0({nodeId:ge,nextPosition:ve,nodeLookup:T,nodeExtent:we||Y,nodeOrigin:$,onError:L});ce=ce||le.position.x!==Oe.x||le.position.y!==Oe.y,le.position=Oe,le.internals.positionAbsolute=Re}if(w=w||ce,!!ce&&(G(d,!0),k&&(o||H||!C&&J))){const[ge,le]=fd({nodeId:C,dragItems:d,nodeLookup:T});o==null||o(k,d,ge,le),H==null||H(k,ge,le),C||J==null||J(k,le)}}async function V(){if(!g)return;const{transform:D,panBy:te,autoPanSpeed:T,autoPanOnNodeDrag:Y}=n();if(!Y){_=!1,cancelAnimationFrame(l);return}const[W,Z]=Y0(f,g,T);(W!==0||Z!==0)&&(c.x=(c.x??0)-W/D[2],c.y=(c.y??0)-Z/D[2],await te({x:W,y:Z})&&P(c)),l=requestAnimationFrame(V)}function X(D){var ue;const{nodeLookup:te,multiSelectionActive:T,nodesDraggable:Y,transform:W,snapGrid:Z,snapToGrid:$,selectNodesOnDrag:H,onNodeDragStart:J,onSelectionDragStart:L,unselectNodesAndEdges:G}=n();m=!0,(!H||!R)&&!T&&C&&((ue=te.get(C))!=null&&ue.selected||G()),R&&H&&C&&(e==null||e(C));const ce=Xa(D.sourceEvent,{transform:W,snapGrid:Z,snapToGrid:$,containerBounds:g});if(c=ce,d=n2(te,Y,ce,C),d.size>0&&(r||J||!C&&L)){const[pe,ye]=fd({nodeId:C,dragItems:d,nodeLookup:te});r==null||r(D.sourceEvent,d,pe,ye),J==null||J(D.sourceEvent,pe,ye),C||L==null||L(D.sourceEvent,ye)}}const F=q0().clickDistance(j).on("start",D=>{const{domNode:te,nodeDragThreshold:T,transform:Y,snapGrid:W,snapToGrid:Z}=n();g=(te==null?void 0:te.getBoundingClientRect())||null,x=!1,w=!1,k=D.sourceEvent,T===0&&X(D),c=Xa(D.sourceEvent,{transform:Y,snapGrid:W,snapToGrid:Z,containerBounds:g}),f=ln(D.sourceEvent,g)}).on("drag",D=>{const{autoPanOnNodeDrag:te,transform:T,snapGrid:Y,snapToGrid:W,nodeDragThreshold:Z,nodeLookup:$}=n(),H=Xa(D.sourceEvent,{transform:T,snapGrid:Y,snapToGrid:W,containerBounds:g});if(k=D.sourceEvent,(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||C&&!$.has(C))&&(x=!0),!x){if(!_&&te&&m&&(_=!0,V()),!m){const J=ln(D.sourceEvent,g),L=J.x-f.x,G=J.y-f.y;Math.sqrt(L*L+G*G)>Z&&X(D)}(c.x!==H.xSnapped||c.y!==H.ySnapped)&&d&&m&&(f=ln(D.sourceEvent,g),P(H))}}).on("end",D=>{if(!(!m||x)&&(_=!1,m=!1,cancelAnimationFrame(l),d.size>0)){const{nodeLookup:te,updateNodePositions:T,onNodeDragStop:Y,onSelectionDragStop:W}=n();if(w&&(T(d,!1),w=!1),s||Y||!C&&W){const[Z,$]=fd({nodeId:C,dragItems:d,nodeLookup:te,dragging:!1});s==null||s(D.sourceEvent,d,Z,$),Y==null||Y(D.sourceEvent,Z,$),C||W==null||W(D.sourceEvent,$)}}}).filter(D=>{const te=D.target;return!D.button&&(!E||!Df(te,`.${E}`,q))&&(!M||Df(te,M,q))});h.call(F)}function b(){h==null||h.on(".drag",null)}return{update:S,destroy:b}}function a2(e,n,r){const o=[],s={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const c of n.values())ls(s,Jo(c))>0&&o.push(c);return o}const s2=250;function l2(e,n,r,o){var d,_;let s=[],c=1/0;const l=a2(e,r,n+s2);for(const f of l){const g=[...((d=f.internals.handleBounds)==null?void 0:d.source)??[],...((_=f.internals.handleBounds)==null?void 0:_.target)??[]];for(const m of g){if(o.nodeId===m.nodeId&&o.type===m.type&&o.id===m.id)continue;const{x:h,y:x}=lo(f,m,m.position,!0),w=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(x-e.y,2));w>n||(w<c?(s=[{...m,x:h,y:x}],c=w):w===c&&s.push({...m,x:h,y:x}))}}if(!s.length)return null;if(s.length>1){const f=o.type==="source"?"target":"source";return s.find(g=>g.type===f)??s[0]}return s[0]}function uy(e,n,r,o,s,c=!1){var f,g,m;const l=o.get(e);if(!l)return null;const d=s==="strict"?(f=l.internals.handleBounds)==null?void 0:f[n]:[...((g=l.internals.handleBounds)==null?void 0:g.source)??[],...((m=l.internals.handleBounds)==null?void 0:m.target)??[]],_=(r?d==null?void 0:d.find(h=>h.id===r):d==null?void 0:d[0])??null;return _&&c?{..._,...lo(l,_,_.position,!0)}:_}function cy(e,n){return e||(n!=null&&n.classList.contains("target")?"target":n!=null&&n.classList.contains("source")?"source":null)}function u2(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const dy=()=>!0;function c2(e,{connectionMode:n,connectionRadius:r,handleId:o,nodeId:s,edgeUpdaterType:c,isTarget:l,domNode:d,nodeLookup:_,lib:f,autoPanOnConnect:g,flowId:m,panBy:h,cancelConnection:x,onConnectStart:w,onConnect:k,onConnectEnd:S,isValidConnection:b=dy,onReconnectEnd:E,updateConnection:M,getTransform:q,getFromHandle:R,autoPanSpeed:C,dragThreshold:j=1,handleDomNode:P}){const V=ey(e.target);let X=0,F;const{x:D,y:te}=ln(e),T=cy(c,P),Y=d==null?void 0:d.getBoundingClientRect();let W=!1;if(!Y||!T)return;const Z=uy(s,T,o,_,n);if(!Z)return;let $=ln(e,Y),H=!1,J=null,L=!1,G=null;function ce(){if(!g||!Y)return;const[Oe,Re]=Y0($,Y,C);h({x:Oe,y:Re}),X=requestAnimationFrame(ce)}const ue={...Z,nodeId:s,type:T,position:Z.position},pe=_.get(s);let ge={inProgress:!0,isValid:null,from:lo(pe,ue,De.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:pe,to:$,toHandle:null,toPosition:qf[ue.position],toNode:null,pointer:$};function le(){W=!0,M(ge),w==null||w(e,{nodeId:s,handleId:o,handleType:T})}j===0&&le();function ve(Oe){if(!W){const{x:st,y:Wt}=ln(Oe),It=st-D,Rt=Wt-te;if(!(It*It+Rt*Rt>j*j))return;le()}if(!R()||!ue){we(Oe);return}const Re=q();$=ln(Oe,Y),F=l2(ks($,Re,!1,[1,1]),r,_,ue),H||(ce(),H=!0);const Pe=py(Oe,{handle:F,connectionMode:n,fromNodeId:s,fromHandleId:o,fromType:l?"target":"source",isValidConnection:b,doc:V,lib:f,flowId:m,nodeLookup:_});G=Pe.handleDomNode,J=Pe.connection,L=u2(!!F,Pe.isValid);const We=_.get(s),Je=We?lo(We,ue,De.Left,!0):ge.from,Ke={...ge,from:Je,isValid:L,to:Pe.toHandle&&L?su({x:Pe.toHandle.x,y:Pe.toHandle.y},Re):$,toHandle:Pe.toHandle,toPosition:L&&Pe.toHandle?Pe.toHandle.position:qf[ue.position],toNode:Pe.toHandle?_.get(Pe.toHandle.nodeId):null,pointer:$};M(Ke),ge=Ke}function we(Oe){if(!("touches"in Oe&&Oe.touches.length>0)){if(W){(F||G)&&J&&L&&(k==null||k(J));const{inProgress:Re,...Pe}=ge,We={...Pe,toPosition:ge.toHandle?ge.toPosition:null};S==null||S(Oe,We),c&&(E==null||E(Oe,We))}x(),cancelAnimationFrame(X),H=!1,L=!1,J=null,G=null,V.removeEventListener("mousemove",ve),V.removeEventListener("mouseup",we),V.removeEventListener("touchmove",ve),V.removeEventListener("touchend",we)}}V.addEventListener("mousemove",ve),V.addEventListener("mouseup",we),V.addEventListener("touchmove",ve),V.addEventListener("touchend",we)}function py(e,{handle:n,connectionMode:r,fromNodeId:o,fromHandleId:s,fromType:c,doc:l,lib:d,flowId:_,isValidConnection:f=dy,nodeLookup:g}){const m=c==="target",h=n?l.querySelector(`.${d}-flow__handle[data-id="${_}-${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`):null,{x,y:w}=ln(e),k=l.elementFromPoint(x,w),S=k!=null&&k.classList.contains(`${d}-flow__handle`)?k:h,b={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const E=cy(void 0,S),M=S.getAttribute("data-nodeid"),q=S.getAttribute("data-handleid"),R=S.classList.contains("connectable"),C=S.classList.contains("connectableend");if(!M||!E)return b;const j={source:m?M:o,sourceHandle:m?q:s,target:m?o:M,targetHandle:m?s:q};b.connection=j;const V=R&&C&&(r===Xo.Strict?m&&E==="source"||!m&&E==="target":M!==o||q!==s);b.isValid=V&&f(j),b.toHandle=uy(M,E,q,g,r,!0)}return b}const Xd={onPointerDown:c2,isValid:py};function d2({domNode:e,panZoom:n,getTransform:r,getViewScale:o}){const s=Ti(e);function c({translateExtent:d,width:_,height:f,zoomStep:g=1,pannable:m=!0,zoomable:h=!0,inversePan:x=!1}){const w=M=>{if(M.sourceEvent.type!=="wheel"||!n)return;const q=r(),R=M.sourceEvent.ctrlKey&&us()?10:1,C=-M.sourceEvent.deltaY*(M.sourceEvent.deltaMode===1?.05:M.sourceEvent.deltaMode?1:.002)*g,j=q[2]*Math.pow(2,C*R);n.scaleTo(j)};let k=[0,0];const S=M=>{(M.sourceEvent.type==="mousedown"||M.sourceEvent.type==="touchstart")&&(k=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY])},b=M=>{const q=r();if(M.sourceEvent.type!=="mousemove"&&M.sourceEvent.type!=="touchmove"||!n)return;const R=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY],C=[R[0]-k[0],R[1]-k[1]];k=R;const j=o()*Math.max(q[2],Math.log(q[2]))*(x?-1:1),P={x:q[0]-C[0]*j,y:q[1]-C[1]*j},V=[[0,0],[_,f]];n.setViewportConstrained({x:P.x,y:P.y,zoom:q[2]},V,d)},E=A0().on("start",S).on("zoom",m?b:null).on("zoom.wheel",h?w:null);s.call(E,{})}function l(){s.on("zoom",null)}return{update:c,destroy:l,pointer:rn}}const Eu=e=>({x:e.x,y:e.y,zoom:e.k}),hd=({x:e,y:n,zoom:r})=>Mu.translate(e,n).scale(r),Ho=(e,n)=>e.target.closest(`.${n}`),_y=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),p2=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,yd=(e,n=0,r=p2,o=()=>{})=>{const s=typeof n=="number"&&n>0;return s||o(),s?e.transition().duration(n).ease(r).on("end",o):e},my=e=>{const n=e.ctrlKey&&us()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function _2({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:o,panOnScrollMode:s,panOnScrollSpeed:c,zoomOnPinch:l,onPanZoomStart:d,onPanZoom:_,onPanZoomEnd:f}){return g=>{if(Ho(g,n))return g.ctrlKey&&g.preventDefault(),!1;g.preventDefault(),g.stopImmediatePropagation();const m=r.property("__zoom").k||1;if(g.ctrlKey&&l){const S=rn(g),b=my(g),E=m*Math.pow(2,b);o.scaleTo(r,E,S,g);return}const h=g.deltaMode===1?20:1;let x=s===ro.Vertical?0:g.deltaX*h,w=s===ro.Horizontal?0:g.deltaY*h;!us()&&g.shiftKey&&s!==ro.Vertical&&(x=g.deltaY*h,w=0),o.translateBy(r,-(x/m)*c,-(w/m)*c,{internal:!0});const k=Eu(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(_==null||_(g,k),e.panScrollTimeout=setTimeout(()=>{f==null||f(g,k),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d==null||d(g,k))}}function m2({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(o,s){const c=o.type==="wheel",l=!n&&c&&!o.ctrlKey,d=Ho(o,e);if(o.ctrlKey&&c&&d&&o.preventDefault(),l||d)return null;o.preventDefault(),r.call(this,o,s)}}function f2({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return o=>{var c,l,d;if((c=o.sourceEvent)!=null&&c.internal)return;const s=Eu(o.transform);e.mouseButton=((l=o.sourceEvent)==null?void 0:l.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((d=o.sourceEvent)==null?void 0:d.type)==="mousedown"&&n(!0),r&&(r==null||r(o.sourceEvent,s))}}function h2({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:o,onPanZoom:s}){return c=>{var l,d;e.usedRightMouseButton=!!(r&&_y(n,e.mouseButton??0)),(l=c.sourceEvent)!=null&&l.sync||o([c.transform.x,c.transform.y,c.transform.k]),s&&!((d=c.sourceEvent)!=null&&d.internal)&&(s==null||s(c.sourceEvent,Eu(c.transform)))}}function y2({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:o,onPanZoomEnd:s,onPaneContextMenu:c}){return l=>{var d;if(!((d=l.sourceEvent)!=null&&d.internal)&&(e.isZoomingOrPanning=!1,c&&_y(n,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&c(l.sourceEvent),e.usedRightMouseButton=!1,o(!1),s)){const _=Eu(l.transform);e.prevViewport=_,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(l.sourceEvent,_)},r?150:0)}}}function g2({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:o,panOnScroll:s,zoomOnDoubleClick:c,userSelectionActive:l,noWheelClassName:d,noPanClassName:_,lib:f,connectionInProgress:g}){return m=>{var S;const h=e||n,x=r&&m.ctrlKey,w=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(Ho(m,`${f}-flow__node`)||Ho(m,`${f}-flow__edge`)))return!0;if(!o&&!h&&!s&&!c&&!r||l||g&&!w||Ho(m,d)&&w||Ho(m,_)&&(!w||s&&w&&!e)||!r&&m.ctrlKey&&w)return!1;if(!r&&m.type==="touchstart"&&((S=m.touches)==null?void 0:S.length)>1)return m.preventDefault(),!1;if(!h&&!s&&!x&&w||!o&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(o)&&!o.includes(m.button)&&m.type==="mousedown")return!1;const k=Array.isArray(o)&&o.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||w)&&k}}function x2({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:s,onPanZoom:c,onPanZoomStart:l,onPanZoomEnd:d,onDraggingChange:_}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=e.getBoundingClientRect(),m=A0().scaleExtent([n,r]).translateExtent(o),h=Ti(e).call(m);E({x:s.x,y:s.y,zoom:Zo(s.zoom,n,r)},[[0,0],[g.width,g.height]],o);const x=h.on("wheel.zoom"),w=h.on("dblclick.zoom");m.wheelDelta(my);function k(F,D){return h?new Promise(te=>{m==null||m.interpolate((D==null?void 0:D.interpolate)==="linear"?Ya:Wl).transform(yd(h,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>te(!0)),F)}):Promise.resolve(!1)}function S({noWheelClassName:F,noPanClassName:D,onPaneContextMenu:te,userSelectionActive:T,panOnScroll:Y,panOnDrag:W,panOnScrollMode:Z,panOnScrollSpeed:$,preventScrolling:H,zoomOnPinch:J,zoomOnScroll:L,zoomOnDoubleClick:G,zoomActivationKeyPressed:ce,lib:ue,onTransformChange:pe,connectionInProgress:ye,paneClickDistance:ge,selectionOnDrag:le}){T&&!f.isZoomingOrPanning&&b();const ve=Y&&!ce&&!T;m.clickDistance(le?1/0:!sn(ge)||ge<0?0:ge);const we=ve?_2({zoomPanValues:f,noWheelClassName:F,d3Selection:h,d3Zoom:m,panOnScrollMode:Z,panOnScrollSpeed:$,zoomOnPinch:J,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}):m2({noWheelClassName:F,preventScrolling:H,d3ZoomHandler:x});if(h.on("wheel.zoom",we,{passive:!1}),!T){const Re=f2({zoomPanValues:f,onDraggingChange:_,onPanZoomStart:l});m.on("start",Re);const Pe=h2({zoomPanValues:f,panOnDrag:W,onPaneContextMenu:!!te,onPanZoom:c,onTransformChange:pe});m.on("zoom",Pe);const We=y2({zoomPanValues:f,panOnDrag:W,panOnScroll:Y,onPaneContextMenu:te,onPanZoomEnd:d,onDraggingChange:_});m.on("end",We)}const Oe=g2({zoomActivationKeyPressed:ce,panOnDrag:W,zoomOnScroll:L,panOnScroll:Y,zoomOnDoubleClick:G,zoomOnPinch:J,userSelectionActive:T,noPanClassName:D,noWheelClassName:F,lib:ue,connectionInProgress:ye});m.filter(Oe),G?h.on("dblclick.zoom",w):h.on("dblclick.zoom",null)}function b(){m.on("zoom",null)}async function E(F,D,te){const T=hd(F),Y=m==null?void 0:m.constrain()(T,D,te);return Y&&await k(Y),new Promise(W=>W(Y))}async function M(F,D){const te=hd(F);return await k(te,D),new Promise(T=>T(te))}function q(F){if(h){const D=hd(F),te=h.property("__zoom");(te.k!==F.zoom||te.x!==F.x||te.y!==F.y)&&(m==null||m.transform(h,D,null,{sync:!0}))}}function R(){const F=h?B0(h.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function C(F,D){return h?new Promise(te=>{m==null||m.interpolate((D==null?void 0:D.interpolate)==="linear"?Ya:Wl).scaleTo(yd(h,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>te(!0)),F)}):Promise.resolve(!1)}function j(F,D){return h?new Promise(te=>{m==null||m.interpolate((D==null?void 0:D.interpolate)==="linear"?Ya:Wl).scaleBy(yd(h,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>te(!0)),F)}):Promise.resolve(!1)}function P(F){m==null||m.scaleExtent(F)}function V(F){m==null||m.translateExtent(F)}function X(F){const D=!sn(F)||F<0?0:F;m==null||m.clickDistance(D)}return{update:S,destroy:b,setViewport:M,setViewportConstrained:E,getViewport:R,scaleTo:C,scaleBy:j,setScaleExtent:P,setTranslateExtent:V,syncViewport:q,setClickDistance:X}}var ta;(function(e){e.Line="line",e.Handle="handle"})(ta||(ta={}));function v2({width:e,prevWidth:n,height:r,prevHeight:o,affectsX:s,affectsY:c}){const l=e-n,d=r-o,_=[l>0?1:l<0?-1:0,d>0?1:d<0?-1:0];return l&&s&&(_[0]=_[0]*-1),d&&c&&(_[1]=_[1]*-1),_}function Of(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),o=e.includes("left"),s=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:o,affectsY:s}}function br(e,n){return Math.max(0,n-e)}function kr(e,n){return Math.max(0,e-n)}function Tl(e,n,r){return Math.max(0,n-e,e-r)}function Bf(e,n){return e?!n:n}function w2(e,n,r,o,s,c,l,d){let{affectsX:_,affectsY:f}=n;const{isHorizontal:g,isVertical:m}=n,h=g&&m,{xSnapped:x,ySnapped:w}=r,{minWidth:k,maxWidth:S,minHeight:b,maxHeight:E}=o,{x:M,y:q,width:R,height:C,aspectRatio:j}=e;let P=Math.floor(g?x-e.pointerX:0),V=Math.floor(m?w-e.pointerY:0);const X=R+(_?-P:P),F=C+(f?-V:V),D=-c[0]*R,te=-c[1]*C;let T=Tl(X,k,S),Y=Tl(F,b,E);if(l){let $=0,H=0;_&&P<0?$=br(M+P+D,l[0][0]):!_&&P>0&&($=kr(M+X+D,l[1][0])),f&&V<0?H=br(q+V+te,l[0][1]):!f&&V>0&&(H=kr(q+F+te,l[1][1])),T=Math.max(T,$),Y=Math.max(Y,H)}if(d){let $=0,H=0;_&&P>0?$=kr(M+P,d[0][0]):!_&&P<0&&($=br(M+X,d[1][0])),f&&V>0?H=kr(q+V,d[0][1]):!f&&V<0&&(H=br(q+F,d[1][1])),T=Math.max(T,$),Y=Math.max(Y,H)}if(s){if(g){const $=Tl(X/j,b,E)*j;if(T=Math.max(T,$),l){let H=0;!_&&!f||_&&!f&&h?H=kr(q+te+X/j,l[1][1])*j:H=br(q+te+(_?P:-P)/j,l[0][1])*j,T=Math.max(T,H)}if(d){let H=0;!_&&!f||_&&!f&&h?H=br(q+X/j,d[1][1])*j:H=kr(q+(_?P:-P)/j,d[0][1])*j,T=Math.max(T,H)}}if(m){const $=Tl(F*j,k,S)/j;if(Y=Math.max(Y,$),l){let H=0;!_&&!f||f&&!_&&h?H=kr(M+F*j+D,l[1][0])/j:H=br(M+(f?V:-V)*j+D,l[0][0])/j,Y=Math.max(Y,H)}if(d){let H=0;!_&&!f||f&&!_&&h?H=br(M+F*j,d[1][0])/j:H=kr(M+(f?V:-V)*j,d[0][0])/j,Y=Math.max(Y,H)}}}V=V+(V<0?Y:-Y),P=P+(P<0?T:-T),s&&(h?X>F*j?V=(Bf(_,f)?-P:P)/j:P=(Bf(_,f)?-V:V)*j:g?(V=P/j,f=_):(P=V*j,_=f));const W=_?M+P:M,Z=f?q+V:q;return{width:R+(_?-P:P),height:C+(f?-V:V),x:c[0]*P*(_?-1:1)+W,y:c[1]*V*(f?-1:1)+Z}}const fy={width:0,height:0,x:0,y:0},b2={...fy,pointerX:0,pointerY:0,aspectRatio:1};function k2(e){return[[0,0],[e.measured.width,e.measured.height]]}function S2(e,n,r){const o=n.position.x+e.position.x,s=n.position.y+e.position.y,c=e.measured.width??0,l=e.measured.height??0,d=r[0]*c,_=r[1]*l;return[[o-d,s-_],[o+c-d,s+l-_]]}function M2({domNode:e,nodeId:n,getStoreItems:r,onChange:o,onEnd:s}){const c=Ti(e);let l={controlDirection:Of("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:f,boundaries:g,keepAspectRatio:m,resizeDirection:h,onResizeStart:x,onResize:w,onResizeEnd:k,shouldResize:S}){let b={...fy},E={...b2};l={boundaries:g,resizeDirection:h,keepAspectRatio:m,controlDirection:Of(f)};let M,q=null,R=[],C,j,P,V=!1;const X=q0().on("start",F=>{const{nodeLookup:D,transform:te,snapGrid:T,snapToGrid:Y,nodeOrigin:W,paneDomNode:Z}=r();if(M=D.get(n),!M)return;q=(Z==null?void 0:Z.getBoundingClientRect())??null;const{xSnapped:$,ySnapped:H}=Xa(F.sourceEvent,{transform:te,snapGrid:T,snapToGrid:Y,containerBounds:q});b={width:M.measured.width??0,height:M.measured.height??0,x:M.position.x??0,y:M.position.y??0},E={...b,pointerX:$,pointerY:H,aspectRatio:b.width/b.height},C=void 0,M.parentId&&(M.extent==="parent"||M.expandParent)&&(C=D.get(M.parentId),j=C&&M.extent==="parent"?k2(C):void 0),R=[],P=void 0;for(const[J,L]of D)if(L.parentId===n&&(R.push({id:J,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const G=S2(L,M,L.origin??W);P?P=[[Math.min(G[0][0],P[0][0]),Math.min(G[0][1],P[0][1])],[Math.max(G[1][0],P[1][0]),Math.max(G[1][1],P[1][1])]]:P=G}x==null||x(F,{...b})}).on("drag",F=>{const{transform:D,snapGrid:te,snapToGrid:T,nodeOrigin:Y}=r(),W=Xa(F.sourceEvent,{transform:D,snapGrid:te,snapToGrid:T,containerBounds:q}),Z=[];if(!M)return;const{x:$,y:H,width:J,height:L}=b,G={},ce=M.origin??Y,{width:ue,height:pe,x:ye,y:ge}=w2(E,l.controlDirection,W,l.boundaries,l.keepAspectRatio,ce,j,P),le=ue!==J,ve=pe!==L,we=ye!==$&&le,Oe=ge!==H&&ve;if(!we&&!Oe&&!le&&!ve)return;if((we||Oe||ce[0]===1||ce[1]===1)&&(G.x=we?ye:b.x,G.y=Oe?ge:b.y,b.x=G.x,b.y=G.y,R.length>0)){const Je=ye-$,Ke=ge-H;for(const st of R)st.position={x:st.position.x-Je+ce[0]*(ue-J),y:st.position.y-Ke+ce[1]*(pe-L)},Z.push(st)}if((le||ve)&&(G.width=le&&(!l.resizeDirection||l.resizeDirection==="horizontal")?ue:b.width,G.height=ve&&(!l.resizeDirection||l.resizeDirection==="vertical")?pe:b.height,b.width=G.width,b.height=G.height),C&&M.expandParent){const Je=ce[0]*(G.width??0);G.x&&G.x<Je&&(b.x=Je,E.x=E.x-(G.x-Je));const Ke=ce[1]*(G.height??0);G.y&&G.y<Ke&&(b.y=Ke,E.y=E.y-(G.y-Ke))}const Re=v2({width:b.width,prevWidth:J,height:b.height,prevHeight:L,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),Pe={...b,direction:Re};(S==null?void 0:S(F,Pe))!==!1&&(V=!0,w==null||w(F,Pe),o(G,Z))}).on("end",F=>{V&&(k==null||k(F,{...b}),s==null||s({...b}),V=!1)});c.call(X)}function _(){c.on(".drag",null)}return{update:d,destroy:_}}var gd={exports:{}},xd={},vd={exports:{}},wd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function C2(){if(Af)return wd;Af=1;var e=ys();function n(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:n,o=e.useState,s=e.useEffect,c=e.useLayoutEffect,l=e.useDebugValue;function d(m,h){var x=h(),w=o({inst:{value:x,getSnapshot:h}}),k=w[0].inst,S=w[1];return c(function(){k.value=x,k.getSnapshot=h,_(k)&&S({inst:k})},[m,x,h]),s(function(){return _(k)&&S({inst:k}),m(function(){_(k)&&S({inst:k})})},[m]),l(x),x}function _(m){var h=m.getSnapshot;m=m.value;try{var x=h();return!r(m,x)}catch{return!0}}function f(m,h){return h()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return wd.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,wd}var $f;function q2(){return $f||($f=1,vd.exports=C2()),vd.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf;function E2(){if(Hf)return xd;Hf=1;var e=ys(),n=q2();function r(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var o=typeof Object.is=="function"?Object.is:r,s=n.useSyncExternalStore,c=e.useRef,l=e.useEffect,d=e.useMemo,_=e.useDebugValue;return xd.useSyncExternalStoreWithSelector=function(f,g,m,h,x){var w=c(null);if(w.current===null){var k={hasValue:!1,value:null};w.current=k}else k=w.current;w=d(function(){function b(C){if(!E){if(E=!0,M=C,C=h(C),x!==void 0&&k.hasValue){var j=k.value;if(x(j,C))return q=j}return q=C}if(j=q,o(M,C))return j;var P=h(C);return x!==void 0&&x(j,P)?(M=C,j):(M=C,q=P)}var E=!1,M,q,R=m===void 0?null:m;return[function(){return b(g())},R===null?void 0:function(){return b(R())}]},[g,m,h,x]);var S=s(f,w[0],w[1]);return l(function(){k.hasValue=!0,k.value=S},[S]),_(S),S},xd}var Wf;function I2(){return Wf||(Wf=1,gd.exports=E2()),gd.exports}var N2=I2();const j2=hs(N2),P2={},Uf=e=>{let n;const r=new Set,o=(g,m)=>{const h=typeof g=="function"?g(n):g;if(!Object.is(h,n)){const x=n;n=m??(typeof h!="object"||h===null)?h:Object.assign({},n,h),r.forEach(w=>w(n,x))}},s=()=>n,_={setState:o,getState:s,getInitialState:()=>f,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(P2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},f=n=e(o,s,_);return _},T2=e=>e?Uf(e):Uf,{useDebugValue:R2}=Xl,{useSyncExternalStoreWithSelector:V2}=j2,F2=e=>e;function hy(e,n=F2,r){const o=V2(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return R2(o),o}const Gf=(e,n)=>{const r=T2(e),o=(s,c=n)=>hy(r,s,c);return Object.assign(o,r),o},z2=(e,n)=>e?Gf(e,n):Gf;function ft(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var L2=p0();const D2=hs(L2),Iu=z.createContext(null),O2=Iu.Provider,yy=qn.error001();function tt(e,n){const r=z.useContext(Iu);if(r===null)throw new Error(yy);return hy(r,e,n)}function ht(){const e=z.useContext(Iu);if(e===null)throw new Error(yy);return z.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Kf={display:"none"},B2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},gy="react-flow__node-desc",xy="react-flow__edge-desc",A2="react-flow__aria-live",$2=e=>e.ariaLiveMessage,H2=e=>e.ariaLabelConfig;function W2({rfId:e}){const n=tt($2);return u.jsx("div",{id:`${A2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:B2,children:n})}function U2({rfId:e,disableKeyboardA11y:n}){const r=tt(H2);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${gy}-${e}`,style:Kf,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${xy}-${e}`,style:Kf,children:r["edge.a11yDescription.default"]}),!n&&u.jsx(W2,{rfId:e})]})}const ia=z.forwardRef(({position:e="top-left",children:n,className:r,style:o,...s},c)=>{const l=`${e}`.split("-");return u.jsx("div",{className:Tt(["react-flow__panel",r,...l]),style:o,ref:c,...s,children:n})});ia.displayName="Panel";function G2({proOptions:e,position:n="bottom-right"}){return e!=null&&e.hideAttribution?null:u.jsx(ia,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const K2=e=>{const n=[],r=[];for(const[,o]of e.nodeLookup)o.selected&&n.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&r.push(o);return{selectedNodes:n,selectedEdges:r}},Rl=e=>e.id;function Q2(e,n){return ft(e.selectedNodes.map(Rl),n.selectedNodes.map(Rl))&&ft(e.selectedEdges.map(Rl),n.selectedEdges.map(Rl))}function Y2({onSelectionChange:e}){const n=ht(),{selectedNodes:r,selectedEdges:o}=tt(K2,Q2);return z.useEffect(()=>{const s={nodes:r,edges:o};e==null||e(s),n.getState().onSelectionChangeHandlers.forEach(c=>c(s))},[r,o,e]),null}const X2=e=>!!e.onSelectionChangeHandlers;function Z2({onSelectionChange:e}){const n=tt(X2);return e||n?u.jsx(Y2,{onSelectionChange:e}):null}const vy=[0,0],J2={x:0,y:0,zoom:1},ek=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Qf=[...ek,"rfId"],tk=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Yf={translateExtent:as,nodeOrigin:vy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function ik(e){const{setNodes:n,setEdges:r,setMinZoom:o,setMaxZoom:s,setTranslateExtent:c,setNodeExtent:l,reset:d,setDefaultNodesAndEdges:_}=tt(tk,ft),f=ht();z.useEffect(()=>(_(e.defaultNodes,e.defaultEdges),()=>{g.current=Yf,d()}),[]);const g=z.useRef(Yf);return z.useEffect(()=>{for(const m of Qf){const h=e[m],x=g.current[m];h!==x&&(typeof e[m]>"u"||(m==="nodes"?n(h):m==="edges"?r(h):m==="minZoom"?o(h):m==="maxZoom"?s(h):m==="translateExtent"?c(h):m==="nodeExtent"?l(h):m==="ariaLabelConfig"?f.setState({ariaLabelConfig:Lb(h)}):m==="fitView"?f.setState({fitViewQueued:h}):m==="fitViewOptions"?f.setState({fitViewOptions:h}):f.setState({[m]:h})))}g.current=e},Qf.map(m=>e[m])),null}function Xf(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nk(e){var o;const[n,r]=z.useState(e==="system"?null:e);return z.useEffect(()=>{if(e!=="system"){r(e);return}const s=Xf(),c=()=>r(s!=null&&s.matches?"dark":"light");return c(),s==null||s.addEventListener("change",c),()=>{s==null||s.removeEventListener("change",c)}},[e]),n!==null?n:(o=Xf())!=null&&o.matches?"dark":"light"}const Zf=typeof document<"u"?document:null;function cs(e=null,n={target:Zf,actInsideInputWithModifier:!0}){const[r,o]=z.useState(!1),s=z.useRef(!1),c=z.useRef(new Set([])),[l,d]=z.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),g=f.reduce((m,h)=>m.concat(...h),[]);return[f,g]}return[[],[]]},[e]);return z.useEffect(()=>{const _=(n==null?void 0:n.target)??Zf,f=(n==null?void 0:n.actInsideInputWithModifier)??!0;if(e!==null){const g=x=>{var S,b;if(s.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!s.current||s.current&&!f)&&ty(x))return!1;const k=eh(x.code,d);if(c.current.add(x[k]),Jf(l,c.current,!1)){const E=((b=(S=x.composedPath)==null?void 0:S.call(x))==null?void 0:b[0])||x.target,M=(E==null?void 0:E.nodeName)==="BUTTON"||(E==null?void 0:E.nodeName)==="A";n.preventDefault!==!1&&(s.current||!M)&&x.preventDefault(),o(!0)}},m=x=>{const w=eh(x.code,d);Jf(l,c.current,!0)?(o(!1),c.current.clear()):c.current.delete(x[w]),x.key==="Meta"&&c.current.clear(),s.current=!1},h=()=>{c.current.clear(),o(!1)};return _==null||_.addEventListener("keydown",g),_==null||_.addEventListener("keyup",m),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{_==null||_.removeEventListener("keydown",g),_==null||_.removeEventListener("keyup",m),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,o]),r}function Jf(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function eh(e,n){return n.includes(e)?"code":"key"}const rk=()=>{const e=ht();return z.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(n,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[o,s,c],panZoom:l}=e.getState();return l?(await l.setViewport({x:n.x??o,y:n.y??s,zoom:n.zoom??c},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,o]=e.getState().transform;return{x:n,y:r,zoom:o}},setCenter:async(n,r,o)=>e.getState().setCenter(n,r,o),fitBounds:async(n,r)=>{const{width:o,height:s,minZoom:c,maxZoom:l,panZoom:d}=e.getState(),_=qp(n,o,s,c,l,(r==null?void 0:r.padding)??.1);return d?(await d.setViewport(_,{duration:r==null?void 0:r.duration,ease:r==null?void 0:r.ease,interpolate:r==null?void 0:r.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:o,snapGrid:s,snapToGrid:c,domNode:l}=e.getState();if(!l)return n;const{x:d,y:_}=l.getBoundingClientRect(),f={x:n.x-d,y:n.y-_},g=r.snapGrid??s,m=r.snapToGrid??c;return ks(f,o,m,g)},flowToScreenPosition:n=>{const{transform:r,domNode:o}=e.getState();if(!o)return n;const{x:s,y:c}=o.getBoundingClientRect(),l=su(n,r);return{x:l.x+s,y:l.y+c}}}),[])};function wy(e,n){const r=[],o=new Map,s=[];for(const c of e)if(c.type==="add"){s.push(c);continue}else if(c.type==="remove"||c.type==="replace")o.set(c.id,[c]);else{const l=o.get(c.id);l?l.push(c):o.set(c.id,[c])}for(const c of n){const l=o.get(c.id);if(!l){r.push(c);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){r.push({...l[0].item});continue}const d={...c};for(const _ of l)ok(_,d);r.push(d)}return s.length&&s.forEach(c=>{c.index!==void 0?r.splice(c.index,0,{...c.item}):r.push({...c.item})}),r}function ok(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function by(e,n){return wy(e,n)}function ky(e,n){return wy(e,n)}function to(e,n){return{id:e,type:"select",selected:n}}function Wo(e,n=new Set,r=!1){const o=[];for(const[s,c]of e){const l=n.has(s);!(c.selected===void 0&&!l)&&c.selected!==l&&(r&&(c.selected=l),o.push(to(c.id,l)))}return o}function th({items:e=[],lookup:n}){var s;const r=[],o=new Map(e.map(c=>[c.id,c]));for(const[c,l]of e.entries()){const d=n.get(l.id),_=((s=d==null?void 0:d.internals)==null?void 0:s.userNode)??d;_!==void 0&&_!==l&&r.push({id:l.id,item:l,type:"replace"}),_===void 0&&r.push({item:l,type:"add",index:c})}for(const[c]of n)o.get(c)===void 0&&r.push({id:c,type:"remove"});return r}function ih(e){return{id:e.id,type:"remove"}}const nh=e=>Eb(e),ak=e=>G0(e);function Sy(e){return z.forwardRef(e)}const sk=typeof window<"u"?z.useLayoutEffect:z.useEffect;function rh(e){const[n,r]=z.useState(BigInt(0)),[o]=z.useState(()=>lk(()=>r(s=>s+BigInt(1))));return sk(()=>{const s=o.get();s.length&&(e(s),o.reset())},[n]),o}function lk(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const My=z.createContext(null);function uk({children:e}){const n=ht(),r=z.useCallback(d=>{const{nodes:_=[],setNodes:f,hasDefaultNodes:g,onNodesChange:m,nodeLookup:h,fitViewQueued:x,onNodesChangeMiddlewareMap:w}=n.getState();let k=_;for(const b of d)k=typeof b=="function"?b(k):b;let S=th({items:k,lookup:h});for(const b of w.values())S=b(S);g&&f(k),S.length>0?m==null||m(S):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:E,setNodes:M}=n.getState();b&&M(E)})},[]),o=rh(r),s=z.useCallback(d=>{const{edges:_=[],setEdges:f,hasDefaultEdges:g,onEdgesChange:m,edgeLookup:h}=n.getState();let x=_;for(const w of d)x=typeof w=="function"?w(x):w;g?f(x):m&&m(th({items:x,lookup:h}))},[]),c=rh(s),l=z.useMemo(()=>({nodeQueue:o,edgeQueue:c}),[]);return u.jsx(My.Provider,{value:l,children:e})}function ck(){const e=z.useContext(My);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const dk=e=>!!e.panZoom;function Fp(){const e=rk(),n=ht(),r=ck(),o=tt(dk),s=z.useMemo(()=>{const c=m=>n.getState().nodeLookup.get(m),l=m=>{r.nodeQueue.push(m)},d=m=>{r.edgeQueue.push(m)},_=m=>{var b,E;const{nodeLookup:h,nodeOrigin:x}=n.getState(),w=nh(m)?m:h.get(m.id),k=w.parentId?J0(w.position,w.measured,w.parentId,h,x):w.position,S={...w,position:k,width:((b=w.measured)==null?void 0:b.width)??w.width,height:((E=w.measured)==null?void 0:E.height)??w.height};return Jo(S)},f=(m,h,x={replace:!1})=>{l(w=>w.map(k=>{if(k.id===m){const S=typeof h=="function"?h(k):h;return x.replace&&nh(S)?S:{...k,...S}}return k}))},g=(m,h,x={replace:!1})=>{d(w=>w.map(k=>{if(k.id===m){const S=typeof h=="function"?h(k):h;return x.replace&&ak(S)?S:{...k,...S}}return k}))};return{getNodes:()=>n.getState().nodes.map(m=>({...m})),getNode:m=>{var h;return(h=c(m))==null?void 0:h.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=n.getState();return m.map(h=>({...h}))},getEdge:m=>n.getState().edgeLookup.get(m),setNodes:l,setEdges:d,addNodes:m=>{const h=Array.isArray(m)?m:[m];r.nodeQueue.push(x=>[...x,...h])},addEdges:m=>{const h=Array.isArray(m)?m:[m];r.edgeQueue.push(x=>[...x,...h])},toObject:()=>{const{nodes:m=[],edges:h=[],transform:x}=n.getState(),[w,k,S]=x;return{nodes:m.map(b=>({...b})),edges:h.map(b=>({...b})),viewport:{x:w,y:k,zoom:S}}},deleteElements:async({nodes:m=[],edges:h=[]})=>{const{nodes:x,edges:w,onNodesDelete:k,onEdgesDelete:S,triggerNodeChanges:b,triggerEdgeChanges:E,onDelete:M,onBeforeDelete:q}=n.getState(),{nodes:R,edges:C}=await Tb({nodesToRemove:m,edgesToRemove:h,nodes:x,edges:w,onBeforeDelete:q}),j=C.length>0,P=R.length>0;if(j){const V=C.map(ih);S==null||S(C),E(V)}if(P){const V=R.map(ih);k==null||k(R),b(V)}return(P||j)&&(M==null||M({nodes:R,edges:C})),{deletedNodes:R,deletedEdges:C}},getIntersectingNodes:(m,h=!0,x)=>{const w=If(m),k=w?m:_(m),S=x!==void 0;return k?(x||n.getState().nodes).filter(b=>{const E=n.getState().nodeLookup.get(b.id);if(E&&!w&&(b.id===m.id||!E.internals.positionAbsolute))return!1;const M=Jo(S?b:E),q=ls(M,k);return h&&q>0||q>=M.width*M.height||q>=k.width*k.height}):[]},isNodeIntersecting:(m,h,x=!0)=>{const k=If(m)?m:_(m);if(!k)return!1;const S=ls(k,h);return x&&S>0||S>=h.width*h.height||S>=k.width*k.height},updateNode:f,updateNodeData:(m,h,x={replace:!1})=>{f(m,w=>{const k=typeof h=="function"?h(w):h;return x.replace?{...w,data:k}:{...w,data:{...w.data,...k}}},x)},updateEdge:g,updateEdgeData:(m,h,x={replace:!1})=>{g(m,w=>{const k=typeof h=="function"?h(w):h;return x.replace?{...w,data:k}:{...w,data:{...w.data,...k}}},x)},getNodesBounds:m=>{const{nodeLookup:h,nodeOrigin:x}=n.getState();return Ib(m,{nodeLookup:h,nodeOrigin:x})},getHandleConnections:({type:m,id:h,nodeId:x})=>{var w;return Array.from(((w=n.getState().connectionLookup.get(`${x}-${m}${h?`-${h}`:""}`))==null?void 0:w.values())??[])},getNodeConnections:({type:m,handleId:h,nodeId:x})=>{var w;return Array.from(((w=n.getState().connectionLookup.get(`${x}${m?h?`-${m}-${h}`:`-${m}`:""}`))==null?void 0:w.values())??[])},fitView:async m=>{const h=n.getState().fitViewResolver??zb();return n.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:h}),r.nodeQueue.push(x=>[...x]),h.promise}}},[]);return z.useMemo(()=>({...s,...e,viewportInitialized:o}),[o])}const oh=e=>e.selected,pk=typeof window<"u"?window:void 0;function _k({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=ht(),{deleteElements:o}=Fp(),s=cs(e,{actInsideInputWithModifier:!1}),c=cs(n,{target:pk});z.useEffect(()=>{if(s){const{edges:l,nodes:d}=r.getState();o({nodes:d.filter(oh),edges:l.filter(oh)}),r.setState({nodesSelectionActive:!1})}},[s]),z.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])}function mk(e){const n=ht();z.useEffect(()=>{const r=()=>{var s,c,l,d;if(!e.current||!(((c=(s=e.current).checkVisibility)==null?void 0:c.call(s))??!0))return!1;const o=Ep(e.current);(o.height===0||o.width===0)&&((d=(l=n.getState()).onError)==null||d.call(l,"004",qn.error004())),n.setState({width:o.width||500,height:o.height||500})};if(e.current){r(),window.addEventListener("resize",r);const o=new ResizeObserver(()=>r());return o.observe(e.current),()=>{window.removeEventListener("resize",r),o&&e.current&&o.unobserve(e.current)}}},[])}const Nu={position:"absolute",width:"100%",height:"100%",top:0,left:0},fk=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function hk({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=ro.Free,zoomOnDoubleClick:l=!0,panOnDrag:d=!0,defaultViewport:_,translateExtent:f,minZoom:g,maxZoom:m,zoomActivationKeyCode:h,preventScrolling:x=!0,children:w,noWheelClassName:k,noPanClassName:S,onViewportChange:b,isControlledViewport:E,paneClickDistance:M,selectionOnDrag:q}){const R=ht(),C=z.useRef(null),{userSelectionActive:j,lib:P,connectionInProgress:V}=tt(fk,ft),X=cs(h),F=z.useRef();mk(C);const D=z.useCallback(te=>{b==null||b({x:te[0],y:te[1],zoom:te[2]}),E||R.setState({transform:te})},[b,E]);return z.useEffect(()=>{if(C.current){F.current=x2({domNode:C.current,minZoom:g,maxZoom:m,translateExtent:f,viewport:_,onDraggingChange:W=>R.setState({paneDragging:W}),onPanZoomStart:(W,Z)=>{const{onViewportChangeStart:$,onMoveStart:H}=R.getState();H==null||H(W,Z),$==null||$(Z)},onPanZoom:(W,Z)=>{const{onViewportChange:$,onMove:H}=R.getState();H==null||H(W,Z),$==null||$(Z)},onPanZoomEnd:(W,Z)=>{const{onViewportChangeEnd:$,onMoveEnd:H}=R.getState();H==null||H(W,Z),$==null||$(Z)}});const{x:te,y:T,zoom:Y}=F.current.getViewport();return R.setState({panZoom:F.current,transform:[te,T,Y],domNode:C.current.closest(".react-flow")}),()=>{var W;(W=F.current)==null||W.destroy()}}},[]),z.useEffect(()=>{var te;(te=F.current)==null||te.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:o,panOnScrollSpeed:s,panOnScrollMode:c,zoomOnDoubleClick:l,panOnDrag:d,zoomActivationKeyPressed:X,preventScrolling:x,noPanClassName:S,userSelectionActive:j,noWheelClassName:k,lib:P,onTransformChange:D,connectionInProgress:V,selectionOnDrag:q,paneClickDistance:M})},[e,n,r,o,s,c,l,d,X,x,S,j,k,P,D,V,q,M]),u.jsx("div",{className:"react-flow__renderer",ref:C,style:Nu,children:w})}const yk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function gk(){const{userSelectionActive:e,userSelectionRect:n}=tt(yk,ft);return e&&n?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const bd=(e,n)=>r=>{r.target===n.current&&(e==null||e(r))},xk=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function vk({isSelecting:e,selectionKeyPressed:n,selectionMode:r=ss.Full,panOnDrag:o,paneClickDistance:s,selectionOnDrag:c,onSelectionStart:l,onSelectionEnd:d,onPaneClick:_,onPaneContextMenu:f,onPaneScroll:g,onPaneMouseEnter:m,onPaneMouseMove:h,onPaneMouseLeave:x,children:w}){const k=ht(),{userSelectionActive:S,elementsSelectable:b,dragging:E,connectionInProgress:M}=tt(xk,ft),q=b&&(e||S),R=z.useRef(null),C=z.useRef(),j=z.useRef(new Set),P=z.useRef(new Set),V=z.useRef(!1),X=$=>{if(V.current||M){V.current=!1;return}_==null||_($),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},F=$=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){$.preventDefault();return}f==null||f($)},D=g?$=>g($):void 0,te=$=>{V.current&&($.stopPropagation(),V.current=!1)},T=$=>{var pe,ye;const{domNode:H}=k.getState();if(C.current=H==null?void 0:H.getBoundingClientRect(),!C.current)return;const J=$.target===R.current;if(!J&&!!$.target.closest(".nokey")||!e||!(c&&J||n)||$.button!==0||!$.isPrimary)return;(ye=(pe=$.target)==null?void 0:pe.setPointerCapture)==null||ye.call(pe,$.pointerId),V.current=!1;const{x:ce,y:ue}=ln($.nativeEvent,C.current);k.setState({userSelectionRect:{width:0,height:0,startX:ce,startY:ue,x:ce,y:ue}}),J||($.stopPropagation(),$.preventDefault())},Y=$=>{const{userSelectionRect:H,transform:J,nodeLookup:L,edgeLookup:G,connectionLookup:ce,triggerNodeChanges:ue,triggerEdgeChanges:pe,defaultEdgeOptions:ye,resetSelectedElements:ge}=k.getState();if(!C.current||!H)return;const{x:le,y:ve}=ln($.nativeEvent,C.current),{startX:we,startY:Oe}=H;if(!V.current){const Ke=n?0:s;if(Math.hypot(le-we,ve-Oe)<=Ke)return;ge(),l==null||l($)}V.current=!0;const Re={startX:we,startY:Oe,x:le<we?le:we,y:ve<Oe?ve:Oe,width:Math.abs(le-we),height:Math.abs(ve-Oe)},Pe=j.current,We=P.current;j.current=new Set(Cp(L,Re,J,r===ss.Partial,!0).map(Ke=>Ke.id)),P.current=new Set;const Je=(ye==null?void 0:ye.selectable)??!0;for(const Ke of j.current){const st=ce.get(Ke);if(st)for(const{edgeId:Wt}of st.values()){const It=G.get(Wt);It&&(It.selectable??Je)&&P.current.add(Wt)}}if(!Nf(Pe,j.current)){const Ke=Wo(L,j.current,!0);ue(Ke)}if(!Nf(We,P.current)){const Ke=Wo(G,P.current);pe(Ke)}k.setState({userSelectionRect:Re,userSelectionActive:!0,nodesSelectionActive:!1})},W=$=>{var H,J;$.button===0&&((J=(H=$.target)==null?void 0:H.releasePointerCapture)==null||J.call(H,$.pointerId),!S&&$.target===R.current&&k.getState().userSelectionRect&&(X==null||X($)),k.setState({userSelectionActive:!1,userSelectionRect:null}),V.current&&(d==null||d($),k.setState({nodesSelectionActive:j.current.size>0})))},Z=o===!0||Array.isArray(o)&&o.includes(0);return u.jsxs("div",{className:Tt(["react-flow__pane",{draggable:Z,dragging:E,selection:e}]),onClick:q?void 0:bd(X,R),onContextMenu:bd(F,R),onWheel:bd(D,R),onPointerEnter:q?void 0:m,onPointerMove:q?Y:h,onPointerUp:q?W:void 0,onPointerDownCapture:q?T:void 0,onClickCapture:q?te:void 0,onPointerLeave:x,ref:R,style:Nu,children:[w,u.jsx(gk,{})]})}function Zd({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:l,nodeLookup:d,onError:_}=n.getState(),f=d.get(e);if(!f){_==null||_("012",qn.error012(e));return}n.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&l)&&(c({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var g;return(g=o==null?void 0:o.current)==null?void 0:g.blur()})):s([e])}function Cy({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:c,nodeClickDistance:l}){const d=ht(),[_,f]=z.useState(!1),g=z.useRef();return z.useEffect(()=>{g.current=o2({getStoreItems:()=>d.getState(),onNodeMouseDown:m=>{Zd({id:m,store:d,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),z.useEffect(()=>{var m,h;if(n)(m=g.current)==null||m.destroy();else if(e.current)return(h=g.current)==null||h.update({noDragClassName:r,handleSelector:o,domNode:e.current,isSelectable:c,nodeId:s,nodeClickDistance:l}),()=>{var x;(x=g.current)==null||x.destroy()}},[r,o,n,c,e,s]),_}const wk=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function qy(){const e=ht();return z.useCallback(r=>{const{nodeExtent:o,snapToGrid:s,snapGrid:c,nodesDraggable:l,onError:d,updateNodePositions:_,nodeLookup:f,nodeOrigin:g}=e.getState(),m=new Map,h=wk(l),x=s?c[0]:5,w=s?c[1]:5,k=r.direction.x*x*r.factor,S=r.direction.y*w*r.factor;for(const[,b]of f){if(!h(b))continue;let E={x:b.internals.positionAbsolute.x+k,y:b.internals.positionAbsolute.y+S};s&&(E=bs(E,c));const{position:M,positionAbsolute:q}=K0({nodeId:b.id,nextPosition:E,nodeLookup:f,nodeExtent:o,nodeOrigin:g,onError:d});b.position=M,b.internals.positionAbsolute=q,m.set(b.id,b)}_(m)},[])}const zp=z.createContext(null),bk=zp.Provider;zp.Consumer;const Ey=()=>z.useContext(zp),kk=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Sk=(e,n,r)=>o=>{const{connectionClickStartHandle:s,connectionMode:c,connection:l}=o,{fromHandle:d,toHandle:_,isValid:f}=l,g=(_==null?void 0:_.nodeId)===e&&(_==null?void 0:_.id)===n&&(_==null?void 0:_.type)===r;return{connectingFrom:(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===n&&(d==null?void 0:d.type)===r,connectingTo:g,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===n&&(s==null?void 0:s.type)===r,isPossibleEndHandle:c===Xo.Strict?(d==null?void 0:d.type)!==r:e!==(d==null?void 0:d.nodeId)||n!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!s,valid:g&&f}};function Mk({type:e="source",position:n=De.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:l,onConnect:d,children:_,className:f,onMouseDown:g,onTouchStart:m,...h},x){var Y,W;const w=l||null,k=e==="target",S=ht(),b=Ey(),{connectOnClick:E,noPanClassName:M,rfId:q}=tt(kk,ft),{connectingFrom:R,connectingTo:C,clickConnecting:j,isPossibleEndHandle:P,connectionInProcess:V,clickConnectionInProcess:X,valid:F}=tt(Sk(b,w,e),ft);b||(W=(Y=S.getState()).onError)==null||W.call(Y,"010",qn.error010());const D=Z=>{const{defaultEdgeOptions:$,onConnect:H,hasDefaultEdges:J}=S.getState(),L={...$,...Z};if(J){const{edges:G,setEdges:ce}=S.getState();ce(Gd(L,G))}H==null||H(L),d==null||d(L)},te=Z=>{if(!b)return;const $=iy(Z.nativeEvent);if(s&&($&&Z.button===0||!$)){const H=S.getState();Xd.onPointerDown(Z.nativeEvent,{handleDomNode:Z.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:k,handleId:w,nodeId:b,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:D,isValidConnection:r||H.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}$?g==null||g(Z):m==null||m(Z)},T=Z=>{const{onClickConnectStart:$,onClickConnectEnd:H,connectionClickStartHandle:J,connectionMode:L,isValidConnection:G,lib:ce,rfId:ue,nodeLookup:pe,connection:ye}=S.getState();if(!b||!J&&!s)return;if(!J){$==null||$(Z.nativeEvent,{nodeId:b,handleId:w,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:b,type:e,id:w}});return}const ge=ey(Z.target),le=r||G,{connection:ve,isValid:we}=Xd.isValid(Z.nativeEvent,{handle:{nodeId:b,id:w,type:e},connectionMode:L,fromNodeId:J.nodeId,fromHandleId:J.id||null,fromType:J.type,isValidConnection:le,flowId:ue,doc:ge,lib:ce,nodeLookup:pe});we&&ve&&D(ve);const Oe=structuredClone(ye);delete Oe.inProgress,Oe.toPosition=Oe.toHandle?Oe.toHandle.position:null,H==null||H(Z,Oe),S.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":w,"data-nodeid":b,"data-handlepos":n,"data-id":`${q}-${b}-${w}-${e}`,className:Tt(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",M,f,{source:!k,target:k,connectable:o,connectablestart:s,connectableend:c,clickconnecting:j,connectingfrom:R,connectingto:C,valid:F,connectionindicator:o&&(!V||P)&&(V||X?c:s)}]),onMouseDown:te,onTouchStart:te,onClick:E?T:void 0,ref:x,...h,children:_})}const ds=z.memo(Sy(Mk));function Ck({data:e,isConnectable:n,sourcePosition:r=De.Bottom}){return u.jsxs(u.Fragment,{children:[e==null?void 0:e.label,u.jsx(ds,{type:"source",position:r,isConnectable:n})]})}function qk({data:e,isConnectable:n,targetPosition:r=De.Top,sourcePosition:o=De.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(ds,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label,u.jsx(ds,{type:"source",position:o,isConnectable:n})]})}function Ek(){return null}function Ik({data:e,isConnectable:n,targetPosition:r=De.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(ds,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label]})}const lu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ah={input:Ck,default:qk,output:Ik,group:Ek};function Nk(e){var n,r,o,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((n=e.style)==null?void 0:n.width),height:e.height??e.initialHeight??((r=e.style)==null?void 0:r.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const jk=e=>{const{width:n,height:r,x:o,y:s}=ws(e.nodeLookup,{filter:c=>!!c.selected});return{width:sn(n)?n:null,height:sn(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${s}px)`}};function Pk({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=ht(),{width:s,height:c,transformString:l,userSelectionActive:d}=tt(jk,ft),_=qy(),f=z.useRef(null);if(z.useEffect(()=>{var h;r||(h=f.current)==null||h.focus({preventScroll:!0})},[r]),Cy({nodeRef:f}),d||!s||!c)return null;const g=e?h=>{const x=o.getState().nodes.filter(w=>w.selected);e(h,x)}:void 0,m=h=>{Object.prototype.hasOwnProperty.call(lu,h.key)&&(h.preventDefault(),_({direction:lu[h.key],factor:h.shiftKey?4:1}))};return u.jsx("div",{className:Tt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:l},children:u.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:s,height:c}})})}const sh=typeof window<"u"?window:void 0,Tk=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Iy({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:l,paneClickDistance:d,deleteKeyCode:_,selectionKeyCode:f,selectionOnDrag:g,selectionMode:m,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:w,panActivationKeyCode:k,zoomActivationKeyCode:S,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:M,panOnScroll:q,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:j,panOnDrag:P,defaultViewport:V,translateExtent:X,minZoom:F,maxZoom:D,preventScrolling:te,onSelectionContextMenu:T,noWheelClassName:Y,noPanClassName:W,disableKeyboardA11y:Z,onViewportChange:$,isControlledViewport:H}){const{nodesSelectionActive:J,userSelectionActive:L}=tt(Tk,ft),G=cs(f,{target:sh}),ce=cs(k,{target:sh}),ue=ce||P,pe=ce||q,ye=g&&ue!==!0,ge=G||L||ye;return _k({deleteKeyCode:_,multiSelectionKeyCode:w}),u.jsx(hk,{onPaneContextMenu:c,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:M,panOnScroll:pe,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:j,panOnDrag:!G&&ue,defaultViewport:V,translateExtent:X,minZoom:F,maxZoom:D,zoomActivationKeyCode:S,preventScrolling:te,noWheelClassName:Y,noPanClassName:W,onViewportChange:$,isControlledViewport:H,paneClickDistance:d,selectionOnDrag:ye,children:u.jsxs(vk,{onSelectionStart:h,onSelectionEnd:x,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:l,panOnDrag:ue,isSelecting:!!ge,selectionMode:m,selectionKeyPressed:G,paneClickDistance:d,selectionOnDrag:ye,children:[e,J&&u.jsx(Pk,{onSelectionContextMenu:T,noPanClassName:W,disableKeyboardA11y:Z})]})})}Iy.displayName="FlowRenderer";const Rk=z.memo(Iy),Vk=e=>n=>e?Cp(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function Fk(e){return tt(z.useCallback(Vk(e),[e]),ft)}const zk=e=>e.updateNodeInternals;function Lk(){const e=tt(zk),[n]=z.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const o=new Map;r.forEach(s=>{const c=s.target.getAttribute("data-id");o.set(c,{id:c,nodeElement:s.target,force:!0})}),e(o)}));return z.useEffect(()=>()=>{n==null||n.disconnect()},[n]),n}function Dk({node:e,nodeType:n,hasDimensions:r,resizeObserver:o}){const s=ht(),c=z.useRef(null),l=z.useRef(null),d=z.useRef(e.sourcePosition),_=z.useRef(e.targetPosition),f=z.useRef(n),g=r&&!!e.internals.handleBounds;return z.useEffect(()=>{c.current&&!e.hidden&&(!g||l.current!==c.current)&&(l.current&&(o==null||o.unobserve(l.current)),o==null||o.observe(c.current),l.current=c.current)},[g,e.hidden]),z.useEffect(()=>()=>{l.current&&(o==null||o.unobserve(l.current),l.current=null)},[]),z.useEffect(()=>{if(c.current){const m=f.current!==n,h=d.current!==e.sourcePosition,x=_.current!==e.targetPosition;(m||h||x)&&(f.current=n,d.current=e.sourcePosition,_.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function Ok({id:e,onClick:n,onMouseEnter:r,onMouseMove:o,onMouseLeave:s,onContextMenu:c,onDoubleClick:l,nodesDraggable:d,elementsSelectable:_,nodesConnectable:f,nodesFocusable:g,resizeObserver:m,noDragClassName:h,noPanClassName:x,disableKeyboardA11y:w,rfId:k,nodeTypes:S,nodeClickDistance:b,onError:E}){const{node:M,internals:q,isParent:R}=tt(le=>{const ve=le.nodeLookup.get(e),we=le.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:we}},ft);let C=M.type||"default",j=(S==null?void 0:S[C])||ah[C];j===void 0&&(E==null||E("003",qn.error003(C)),C="default",j=(S==null?void 0:S.default)||ah.default);const P=!!(M.draggable||d&&typeof M.draggable>"u"),V=!!(M.selectable||_&&typeof M.selectable>"u"),X=!!(M.connectable||f&&typeof M.connectable>"u"),F=!!(M.focusable||g&&typeof M.focusable>"u"),D=ht(),te=Z0(M),T=Dk({node:M,nodeType:C,hasDimensions:te,resizeObserver:m}),Y=Cy({nodeRef:T,disabled:M.hidden||!P,noDragClassName:h,handleSelector:M.dragHandle,nodeId:e,isSelectable:V,nodeClickDistance:b}),W=qy();if(M.hidden)return null;const Z=Jn(M),$=Nk(M),H=V||P||n||r||o||s,J=r?le=>r(le,{...q.userNode}):void 0,L=o?le=>o(le,{...q.userNode}):void 0,G=s?le=>s(le,{...q.userNode}):void 0,ce=c?le=>c(le,{...q.userNode}):void 0,ue=l?le=>l(le,{...q.userNode}):void 0,pe=le=>{const{selectNodesOnDrag:ve,nodeDragThreshold:we}=D.getState();V&&(!ve||!P||we>0)&&Zd({id:e,store:D,nodeRef:T}),n&&n(le,{...q.userNode})},ye=le=>{if(!(ty(le.nativeEvent)||w)){if($0.includes(le.key)&&V){const ve=le.key==="Escape";Zd({id:e,store:D,unselect:ve,nodeRef:T})}else if(P&&M.selected&&Object.prototype.hasOwnProperty.call(lu,le.key)){le.preventDefault();const{ariaLabelConfig:ve}=D.getState();D.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~q.positionAbsolute.x,y:~~q.positionAbsolute.y})}),W({direction:lu[le.key],factor:le.shiftKey?4:1})}}},ge=()=>{var We;if(w||!((We=T.current)!=null&&We.matches(":focus-visible")))return;const{transform:le,width:ve,height:we,autoPanOnNodeFocus:Oe,setCenter:Re}=D.getState();if(!Oe)return;Cp(new Map([[e,M]]),{x:0,y:0,width:ve,height:we},le,!0).length>0||Re(M.position.x+Z.width/2,M.position.y+Z.height/2,{zoom:le[2]})};return u.jsx("div",{className:Tt(["react-flow__node",`react-flow__node-${C}`,{[x]:P},M.className,{selected:M.selected,selectable:V,parent:R,draggable:P,dragging:Y}]),ref:T,style:{zIndex:q.z,transform:`translate(${q.positionAbsolute.x}px,${q.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:te?"visible":"hidden",...M.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:J,onMouseMove:L,onMouseLeave:G,onContextMenu:ce,onClick:pe,onDoubleClick:ue,onKeyDown:F?ye:void 0,tabIndex:F?0:void 0,onFocus:F?ge:void 0,role:M.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${gy}-${k}`,"aria-label":M.ariaLabel,...M.domAttributes,children:u.jsx(bk,{value:e,children:u.jsx(j,{id:e,data:M.data,type:C,positionAbsoluteX:q.positionAbsolute.x,positionAbsoluteY:q.positionAbsolute.y,selected:M.selected??!1,selectable:V,draggable:P,deletable:M.deletable??!0,isConnectable:X,sourcePosition:M.sourcePosition,targetPosition:M.targetPosition,dragging:Y,dragHandle:M.dragHandle,zIndex:q.z,parentId:M.parentId,...Z})})})}var Bk=z.memo(Ok);const Ak=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ny(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,onError:c}=tt(Ak,ft),l=Fk(e.onlyRenderVisibleElements),d=Lk();return u.jsx("div",{className:"react-flow__nodes",style:Nu,children:l.map(_=>u.jsx(Bk,{id:_,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:c},_))})}Ny.displayName="NodeRenderer";const $k=z.memo(Ny);function Hk(e){return tt(z.useCallback(r=>{if(!e)return r.edges.map(s=>s.id);const o=[];if(r.width&&r.height)for(const s of r.edges){const c=r.nodeLookup.get(s.source),l=r.nodeLookup.get(s.target);c&&l&&Bb({sourceNode:c,targetNode:l,width:r.width,height:r.height,transform:r.transform})&&o.push(s.id)}return o},[e]),ft)}const Wk=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return u.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Uk=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return u.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lh={[ou.Arrow]:Wk,[ou.ArrowClosed]:Uk};function Gk(e){const n=ht();return z.useMemo(()=>{var s,c;return Object.prototype.hasOwnProperty.call(lh,e)?lh[e]:((c=(s=n.getState()).onError)==null||c.call(s,"009",qn.error009(e)),null)},[e])}const Kk=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:l,orient:d="auto-start-reverse"})=>{const _=Gk(n);return _?u.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:u.jsx(_,{color:r,strokeWidth:l})}):null},jy=({defaultColor:e,rfId:n})=>{const r=tt(c=>c.edges),o=tt(c=>c.defaultEdgeOptions),s=z.useMemo(()=>Kb(r,{id:n,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[r,o,n,e]);return s.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:s.map(c=>u.jsx(Kk,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};jy.displayName="MarkerDefinitions";var Qk=z.memo(jy);function Py({x:e,y:n,label:r,labelStyle:o,labelShowBg:s=!0,labelBgStyle:c,labelBgPadding:l=[2,4],labelBgBorderRadius:d=2,children:_,className:f,...g}){const[m,h]=z.useState({x:1,y:0,width:0,height:0}),x=Tt(["react-flow__edge-textwrapper",f]),w=z.useRef(null);return z.useEffect(()=>{if(w.current){const k=w.current.getBBox();h({x:k.x,y:k.y,width:k.width,height:k.height})}},[r]),r?u.jsxs("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...g,children:[s&&u.jsx("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),u.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:w,style:o,children:r}),_]}):null}Py.displayName="EdgeText";const Yk=z.memo(Py);function ju({path:e,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:_,interactionWidth:f=20,...g}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...g,d:e,fill:"none",className:Tt(["react-flow__edge-path",g.className])}),f?u.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,o&&sn(n)&&sn(r)?u.jsx(Yk,{x:n,y:r,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:_}):null]})}function uh({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===De.Left||e===De.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function Ty({sourceX:e,sourceY:n,sourcePosition:r=De.Bottom,targetX:o,targetY:s,targetPosition:c=De.Top}){const[l,d]=uh({pos:r,x1:e,y1:n,x2:o,y2:s}),[_,f]=uh({pos:c,x1:o,y1:s,x2:e,y2:n}),[g,m,h,x]=ny({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:d,targetControlX:_,targetControlY:f});return[`M${e},${n} C${l},${d} ${_},${f} ${o},${s}`,g,m,h,x]}function Ry(e){return z.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:c,sourcePosition:l,targetPosition:d,label:_,labelStyle:f,labelShowBg:g,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:k,markerStart:S,interactionWidth:b})=>{const[E,M,q]=Ty({sourceX:r,sourceY:o,sourcePosition:l,targetX:s,targetY:c,targetPosition:d}),R=e.isInternal?void 0:n;return u.jsx(ju,{id:R,path:E,labelX:M,labelY:q,label:_,labelStyle:f,labelShowBg:g,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:k,markerStart:S,interactionWidth:b})})}const Xk=Ry({isInternal:!1}),Vy=Ry({isInternal:!0});Xk.displayName="SimpleBezierEdge";Vy.displayName="SimpleBezierEdgeInternal";function Fy(e){return z.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:c,label:l,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:h,sourcePosition:x=De.Bottom,targetPosition:w=De.Top,markerEnd:k,markerStart:S,pathOptions:b,interactionWidth:E})=>{const[M,q,R]=Kd({sourceX:r,sourceY:o,sourcePosition:x,targetX:s,targetY:c,targetPosition:w,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),C=e.isInternal?void 0:n;return u.jsx(ju,{id:C,path:M,labelX:q,labelY:R,label:l,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:h,markerEnd:k,markerStart:S,interactionWidth:E})})}const zy=Fy({isInternal:!1}),Ly=Fy({isInternal:!0});zy.displayName="SmoothStepEdge";Ly.displayName="SmoothStepEdgeInternal";function Dy(e){return z.memo(({id:n,...r})=>{var s;const o=e.isInternal?void 0:n;return u.jsx(zy,{...r,id:o,pathOptions:z.useMemo(()=>{var c;return{borderRadius:0,offset:(c=r.pathOptions)==null?void 0:c.offset}},[(s=r.pathOptions)==null?void 0:s.offset])})})}const Zk=Dy({isInternal:!1}),Oy=Dy({isInternal:!0});Zk.displayName="StepEdge";Oy.displayName="StepEdgeInternal";function By(e){return z.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:c,label:l,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:h,markerEnd:x,markerStart:w,interactionWidth:k})=>{const[S,b,E]=Np({sourceX:r,sourceY:o,targetX:s,targetY:c}),M=e.isInternal?void 0:n;return u.jsx(ju,{id:M,path:S,labelX:b,labelY:E,label:l,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:h,markerEnd:x,markerStart:w,interactionWidth:k})})}const Jk=By({isInternal:!1}),Ay=By({isInternal:!0});Jk.displayName="StraightEdge";Ay.displayName="StraightEdgeInternal";function $y(e){return z.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:c,sourcePosition:l=De.Bottom,targetPosition:d=De.Top,label:_,labelStyle:f,labelShowBg:g,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:k,markerStart:S,pathOptions:b,interactionWidth:E})=>{const[M,q,R]=Ip({sourceX:r,sourceY:o,sourcePosition:l,targetX:s,targetY:c,targetPosition:d,curvature:b==null?void 0:b.curvature}),C=e.isInternal?void 0:n;return u.jsx(ju,{id:C,path:M,labelX:q,labelY:R,label:_,labelStyle:f,labelShowBg:g,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:k,markerStart:S,interactionWidth:E})})}const eS=$y({isInternal:!1}),Hy=$y({isInternal:!0});eS.displayName="BezierEdge";Hy.displayName="BezierEdgeInternal";const ch={default:Hy,straight:Ay,step:Oy,smoothstep:Ly,simplebezier:Vy},dh={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},tS=(e,n,r)=>r===De.Left?e-n:r===De.Right?e+n:e,iS=(e,n,r)=>r===De.Top?e-n:r===De.Bottom?e+n:e,ph="react-flow__edgeupdater";function _h({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:c,onMouseOut:l,type:d}){return u.jsx("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:l,className:Tt([ph,`${ph}-${d}`]),cx:tS(n,o,e),cy:iS(r,o,e),r:o,stroke:"transparent",fill:"transparent"})}function nS({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:o,sourceY:s,targetX:c,targetY:l,sourcePosition:d,targetPosition:_,onReconnect:f,onReconnectStart:g,onReconnectEnd:m,setReconnecting:h,setUpdateHover:x}){const w=ht(),k=(q,R)=>{if(q.button!==0)return;const{autoPanOnConnect:C,domNode:j,isValidConnection:P,connectionMode:V,connectionRadius:X,lib:F,onConnectStart:D,onConnectEnd:te,cancelConnection:T,nodeLookup:Y,rfId:W,panBy:Z,updateConnection:$}=w.getState(),H=R.type==="target",J=(ce,ue)=>{h(!1),m==null||m(ce,r,R.type,ue)},L=ce=>f==null?void 0:f(r,ce),G=(ce,ue)=>{h(!0),g==null||g(q,r,R.type),D==null||D(ce,ue)};Xd.onPointerDown(q.nativeEvent,{autoPanOnConnect:C,connectionMode:V,connectionRadius:X,domNode:j,handleId:R.id,nodeId:R.nodeId,nodeLookup:Y,isTarget:H,edgeUpdaterType:R.type,lib:F,flowId:W,cancelConnection:T,panBy:Z,isValidConnection:P,onConnect:L,onConnectStart:G,onConnectEnd:te,onReconnectEnd:J,updateConnection:$,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:q.currentTarget})},S=q=>k(q,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),b=q=>k(q,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),E=()=>x(!0),M=()=>x(!1);return u.jsxs(u.Fragment,{children:[(e===!0||e==="source")&&u.jsx(_h,{position:d,centerX:o,centerY:s,radius:n,onMouseDown:S,onMouseEnter:E,onMouseOut:M,type:"source"}),(e===!0||e==="target")&&u.jsx(_h,{position:_,centerX:c,centerY:l,radius:n,onMouseDown:b,onMouseEnter:E,onMouseOut:M,type:"target"})]})}function rS({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:o,onClick:s,onDoubleClick:c,onContextMenu:l,onMouseEnter:d,onMouseMove:_,onMouseLeave:f,reconnectRadius:g,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,rfId:w,edgeTypes:k,noPanClassName:S,onError:b,disableKeyboardA11y:E}){let M=tt(Re=>Re.edgeLookup.get(e));const q=tt(Re=>Re.defaultEdgeOptions);M=q?{...q,...M}:M;let R=M.type||"default",C=(k==null?void 0:k[R])||ch[R];C===void 0&&(b==null||b("011",qn.error011(R)),R="default",C=(k==null?void 0:k.default)||ch.default);const j=!!(M.focusable||n&&typeof M.focusable>"u"),P=typeof m<"u"&&(M.reconnectable||r&&typeof M.reconnectable>"u"),V=!!(M.selectable||o&&typeof M.selectable>"u"),X=z.useRef(null),[F,D]=z.useState(!1),[te,T]=z.useState(!1),Y=ht(),{zIndex:W,sourceX:Z,sourceY:$,targetX:H,targetY:J,sourcePosition:L,targetPosition:G}=tt(z.useCallback(Re=>{const Pe=Re.nodeLookup.get(M.source),We=Re.nodeLookup.get(M.target);if(!Pe||!We)return{zIndex:M.zIndex,...dh};const Je=Gb({id:e,sourceNode:Pe,targetNode:We,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:Re.connectionMode,onError:b});return{zIndex:Ob({selected:M.selected,zIndex:M.zIndex,sourceNode:Pe,targetNode:We,elevateOnSelect:Re.elevateEdgesOnSelect,zIndexMode:Re.zIndexMode}),...Je||dh}},[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),ft),ce=z.useMemo(()=>M.markerStart?`url('#${Qd(M.markerStart,w)}')`:void 0,[M.markerStart,w]),ue=z.useMemo(()=>M.markerEnd?`url('#${Qd(M.markerEnd,w)}')`:void 0,[M.markerEnd,w]);if(M.hidden||Z===null||$===null||H===null||J===null)return null;const pe=Re=>{var Ke;const{addSelectedEdges:Pe,unselectNodesAndEdges:We,multiSelectionActive:Je}=Y.getState();V&&(Y.setState({nodesSelectionActive:!1}),M.selected&&Je?(We({nodes:[],edges:[M]}),(Ke=X.current)==null||Ke.blur()):Pe([e])),s&&s(Re,M)},ye=c?Re=>{c(Re,{...M})}:void 0,ge=l?Re=>{l(Re,{...M})}:void 0,le=d?Re=>{d(Re,{...M})}:void 0,ve=_?Re=>{_(Re,{...M})}:void 0,we=f?Re=>{f(Re,{...M})}:void 0,Oe=Re=>{var Pe;if(!E&&$0.includes(Re.key)&&V){const{unselectNodesAndEdges:We,addSelectedEdges:Je}=Y.getState();Re.key==="Escape"?((Pe=X.current)==null||Pe.blur(),We({edges:[M]})):Je([e])}};return u.jsx("svg",{style:{zIndex:W},children:u.jsxs("g",{className:Tt(["react-flow__edge",`react-flow__edge-${R}`,M.className,S,{selected:M.selected,animated:M.animated,inactive:!V&&!s,updating:F,selectable:V}]),onClick:pe,onDoubleClick:ye,onContextMenu:ge,onMouseEnter:le,onMouseMove:ve,onMouseLeave:we,onKeyDown:j?Oe:void 0,tabIndex:j?0:void 0,role:M.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":M.ariaLabel===null?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":j?`${xy}-${w}`:void 0,ref:X,...M.domAttributes,children:[!te&&u.jsx(C,{id:e,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:V,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:Z,sourceY:$,targetX:H,targetY:J,sourcePosition:L,targetPosition:G,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:ce,markerEnd:ue,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),P&&u.jsx(nS,{edge:M,isReconnectable:P,reconnectRadius:g,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,sourceX:Z,sourceY:$,targetX:H,targetY:J,sourcePosition:L,targetPosition:G,setUpdateHover:D,setReconnecting:T})]})})}var oS=z.memo(rS);const aS=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Wy({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:o,noPanClassName:s,onReconnect:c,onEdgeContextMenu:l,onEdgeMouseEnter:d,onEdgeMouseMove:_,onEdgeMouseLeave:f,onEdgeClick:g,reconnectRadius:m,onEdgeDoubleClick:h,onReconnectStart:x,onReconnectEnd:w,disableKeyboardA11y:k}){const{edgesFocusable:S,edgesReconnectable:b,elementsSelectable:E,onError:M}=tt(aS,ft),q=Hk(n);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(Qk,{defaultColor:e,rfId:r}),q.map(R=>u.jsx(oS,{id:R,edgesFocusable:S,edgesReconnectable:b,elementsSelectable:E,noPanClassName:s,onReconnect:c,onContextMenu:l,onMouseEnter:d,onMouseMove:_,onMouseLeave:f,onClick:g,reconnectRadius:m,onDoubleClick:h,onReconnectStart:x,onReconnectEnd:w,rfId:r,onError:M,edgeTypes:o,disableKeyboardA11y:k},R))]})}Wy.displayName="EdgeRenderer";const sS=z.memo(Wy),lS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function uS({children:e}){const n=tt(lS);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function cS(e){const n=Fp(),r=z.useRef(!1);z.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const dS=e=>{var n;return(n=e.panZoom)==null?void 0:n.syncViewport};function pS(e){const n=tt(dS),r=ht();return z.useEffect(()=>{e&&(n==null||n(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function _S(e){return e.connection.inProgress?{...e.connection,to:ks(e.connection.to,e.transform)}:{...e.connection}}function mS(e){return _S}function fS(e){const n=mS();return tt(n,ft)}const hS=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function yS({containerStyle:e,style:n,type:r,component:o}){const{nodesConnectable:s,width:c,height:l,isValid:d,inProgress:_}=tt(hS,ft);return!(c&&s&&_)?null:u.jsx("svg",{style:e,width:c,height:l,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:Tt(["react-flow__connection",U0(d)]),children:u.jsx(Uy,{style:n,type:r,CustomComponent:o,isValid:d})})})}const Uy=({style:e,type:n=Mr.Bezier,CustomComponent:r,isValid:o})=>{const{inProgress:s,from:c,fromNode:l,fromHandle:d,fromPosition:_,to:f,toNode:g,toHandle:m,toPosition:h,pointer:x}=fS();if(!s)return;if(r)return u.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:l,fromHandle:d,fromX:c.x,fromY:c.y,toX:f.x,toY:f.y,fromPosition:_,toPosition:h,connectionStatus:U0(o),toNode:g,toHandle:m,pointer:x});let w="";const k={sourceX:c.x,sourceY:c.y,sourcePosition:_,targetX:f.x,targetY:f.y,targetPosition:h};switch(n){case Mr.Bezier:[w]=Ip(k);break;case Mr.SimpleBezier:[w]=Ty(k);break;case Mr.Step:[w]=Kd({...k,borderRadius:0});break;case Mr.SmoothStep:[w]=Kd(k);break;default:[w]=Np(k)}return u.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};Uy.displayName="ConnectionLine";const gS={};function mh(e=gS){z.useRef(e),ht(),z.useEffect(()=>{},[e])}function xS(){ht(),z.useRef(!1),z.useEffect(()=>{},[])}function Gy({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:_,onNodeMouseLeave:f,onNodeContextMenu:g,onSelectionContextMenu:m,onSelectionStart:h,onSelectionEnd:x,connectionLineType:w,connectionLineStyle:k,connectionLineComponent:S,connectionLineContainerStyle:b,selectionKeyCode:E,selectionOnDrag:M,selectionMode:q,multiSelectionKeyCode:R,panActivationKeyCode:C,zoomActivationKeyCode:j,deleteKeyCode:P,onlyRenderVisibleElements:V,elementsSelectable:X,defaultViewport:F,translateExtent:D,minZoom:te,maxZoom:T,preventScrolling:Y,defaultMarkerColor:W,zoomOnScroll:Z,zoomOnPinch:$,panOnScroll:H,panOnScrollSpeed:J,panOnScrollMode:L,zoomOnDoubleClick:G,panOnDrag:ce,onPaneClick:ue,onPaneMouseEnter:pe,onPaneMouseMove:ye,onPaneMouseLeave:ge,onPaneScroll:le,onPaneContextMenu:ve,paneClickDistance:we,nodeClickDistance:Oe,onEdgeContextMenu:Re,onEdgeMouseEnter:Pe,onEdgeMouseMove:We,onEdgeMouseLeave:Je,reconnectRadius:Ke,onReconnect:st,onReconnectStart:Wt,onReconnectEnd:It,noDragClassName:Rt,noWheelClassName:Lt,noPanClassName:Ut,disableKeyboardA11y:mi,nodeExtent:Dt,rfId:Vi,viewport:oi,onViewportChange:Gi}){return mh(e),mh(n),xS(),cS(r),pS(oi),u.jsx(Rk,{onPaneClick:ue,onPaneMouseEnter:pe,onPaneMouseMove:ye,onPaneMouseLeave:ge,onPaneContextMenu:ve,onPaneScroll:le,paneClickDistance:we,deleteKeyCode:P,selectionKeyCode:E,selectionOnDrag:M,selectionMode:q,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:R,panActivationKeyCode:C,zoomActivationKeyCode:j,elementsSelectable:X,zoomOnScroll:Z,zoomOnPinch:$,zoomOnDoubleClick:G,panOnScroll:H,panOnScrollSpeed:J,panOnScrollMode:L,panOnDrag:ce,defaultViewport:F,translateExtent:D,minZoom:te,maxZoom:T,onSelectionContextMenu:m,preventScrolling:Y,noDragClassName:Rt,noWheelClassName:Lt,noPanClassName:Ut,disableKeyboardA11y:mi,onViewportChange:Gi,isControlledViewport:!!oi,children:u.jsxs(uS,{children:[u.jsx(sS,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:st,onReconnectStart:Wt,onReconnectEnd:It,onlyRenderVisibleElements:V,onEdgeContextMenu:Re,onEdgeMouseEnter:Pe,onEdgeMouseMove:We,onEdgeMouseLeave:Je,reconnectRadius:Ke,defaultMarkerColor:W,noPanClassName:Ut,disableKeyboardA11y:mi,rfId:Vi}),u.jsx(yS,{style:k,type:w,component:S,containerStyle:b}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx($k,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:_,onNodeMouseLeave:f,onNodeContextMenu:g,nodeClickDistance:Oe,onlyRenderVisibleElements:V,noPanClassName:Ut,noDragClassName:Rt,disableKeyboardA11y:mi,nodeExtent:Dt,rfId:Vi}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}Gy.displayName="GraphView";const vS=z.memo(Gy),fh=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:c,fitView:l,fitViewOptions:d,minZoom:_=.5,maxZoom:f=2,nodeOrigin:g,nodeExtent:m,zIndexMode:h="basic"}={})=>{const x=new Map,w=new Map,k=new Map,S=new Map,b=o??n??[],E=r??e??[],M=g??[0,0],q=m??as;sy(k,S,b);const R=Yd(E,x,w,{nodeOrigin:M,nodeExtent:q,zIndexMode:h});let C=[0,0,1];if(l&&s&&c){const j=ws(x,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:P,y:V,zoom:X}=qp(j,s,c,_,f,(d==null?void 0:d.padding)??.1);C=[P,V,X]}return{rfId:"1",width:s??0,height:c??0,transform:C,nodes:E,nodesInitialized:R,nodeLookup:x,parentLookup:w,edges:b,edgeLookup:S,connectionLookup:k,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:_,maxZoom:f,translateExtent:as,nodeExtent:q,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Xo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:M,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:d,fitViewResolver:null,connection:{...W0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Rb,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:H0,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},wS=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:c,fitView:l,fitViewOptions:d,minZoom:_,maxZoom:f,nodeOrigin:g,nodeExtent:m,zIndexMode:h})=>z2((x,w)=>{async function k(){const{nodeLookup:S,panZoom:b,fitViewOptions:E,fitViewResolver:M,width:q,height:R,minZoom:C,maxZoom:j}=w();b&&(await Pb({nodes:S,width:q,height:R,panZoom:b,minZoom:C,maxZoom:j},E),M==null||M.resolve(!0),x({fitViewResolver:null}))}return{...fh({nodes:e,edges:n,width:s,height:c,fitView:l,fitViewOptions:d,minZoom:_,maxZoom:f,nodeOrigin:g,nodeExtent:m,defaultNodes:r,defaultEdges:o,zIndexMode:h}),setNodes:S=>{const{nodeLookup:b,parentLookup:E,nodeOrigin:M,elevateNodesOnSelect:q,fitViewQueued:R,zIndexMode:C}=w(),j=Yd(S,b,E,{nodeOrigin:M,nodeExtent:m,elevateNodesOnSelect:q,checkEquality:!0,zIndexMode:C});R&&j?(k(),x({nodes:S,nodesInitialized:j,fitViewQueued:!1,fitViewOptions:void 0})):x({nodes:S,nodesInitialized:j})},setEdges:S=>{const{connectionLookup:b,edgeLookup:E}=w();sy(b,E,S),x({edges:S})},setDefaultNodesAndEdges:(S,b)=>{if(S){const{setNodes:E}=w();E(S),x({hasDefaultNodes:!0})}if(b){const{setEdges:E}=w();E(b),x({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:b,nodeLookup:E,parentLookup:M,domNode:q,nodeOrigin:R,nodeExtent:C,debug:j,fitViewQueued:P,zIndexMode:V}=w(),{changes:X,updatedInternals:F}=t2(S,E,M,q,R,C,V);F&&(Xb(E,M,{nodeOrigin:R,nodeExtent:C,zIndexMode:V}),P?(k(),x({fitViewQueued:!1,fitViewOptions:void 0})):x({}),(X==null?void 0:X.length)>0&&(j&&console.log("React Flow: trigger node changes",X),b==null||b(X)))},updateNodePositions:(S,b=!1)=>{const E=[];let M=[];const{nodeLookup:q,triggerNodeChanges:R,connection:C,updateConnection:j,onNodesChangeMiddlewareMap:P}=w();for(const[V,X]of S){const F=q.get(V),D=!!(F!=null&&F.expandParent&&(F!=null&&F.parentId)&&(X!=null&&X.position)),te={id:V,type:"position",position:D?{x:Math.max(0,X.position.x),y:Math.max(0,X.position.y)}:X.position,dragging:b};if(F&&C.inProgress&&C.fromNode.id===F.id){const T=lo(F,C.fromHandle,De.Left,!0);j({...C,from:T})}D&&F.parentId&&E.push({id:V,parentId:F.parentId,rect:{...X.internals.positionAbsolute,width:X.measured.width??0,height:X.measured.height??0}}),M.push(te)}if(E.length>0){const{parentLookup:V,nodeOrigin:X}=w(),F=Vp(E,q,V,X);M.push(...F)}for(const V of P.values())M=V(M);R(M)},triggerNodeChanges:S=>{const{onNodesChange:b,setNodes:E,nodes:M,hasDefaultNodes:q,debug:R}=w();if(S!=null&&S.length){if(q){const C=by(S,M);E(C)}R&&console.log("React Flow: trigger node changes",S),b==null||b(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:b,setEdges:E,edges:M,hasDefaultEdges:q,debug:R}=w();if(S!=null&&S.length){if(q){const C=ky(S,M);E(C)}R&&console.log("React Flow: trigger edge changes",S),b==null||b(S)}},addSelectedNodes:S=>{const{multiSelectionActive:b,edgeLookup:E,nodeLookup:M,triggerNodeChanges:q,triggerEdgeChanges:R}=w();if(b){const C=S.map(j=>to(j,!0));q(C);return}q(Wo(M,new Set([...S]),!0)),R(Wo(E))},addSelectedEdges:S=>{const{multiSelectionActive:b,edgeLookup:E,nodeLookup:M,triggerNodeChanges:q,triggerEdgeChanges:R}=w();if(b){const C=S.map(j=>to(j,!0));R(C);return}R(Wo(E,new Set([...S]))),q(Wo(M,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:b}={})=>{const{edges:E,nodes:M,nodeLookup:q,triggerNodeChanges:R,triggerEdgeChanges:C}=w(),j=S||M,P=b||E,V=j.map(F=>{const D=q.get(F.id);return D&&(D.selected=!1),to(F.id,!1)}),X=P.map(F=>to(F.id,!1));R(V),C(X)},setMinZoom:S=>{const{panZoom:b,maxZoom:E}=w();b==null||b.setScaleExtent([S,E]),x({minZoom:S})},setMaxZoom:S=>{const{panZoom:b,minZoom:E}=w();b==null||b.setScaleExtent([E,S]),x({maxZoom:S})},setTranslateExtent:S=>{var b;(b=w().panZoom)==null||b.setTranslateExtent(S),x({translateExtent:S})},resetSelectedElements:()=>{const{edges:S,nodes:b,triggerNodeChanges:E,triggerEdgeChanges:M,elementsSelectable:q}=w();if(!q)return;const R=b.reduce((j,P)=>P.selected?[...j,to(P.id,!1)]:j,[]),C=S.reduce((j,P)=>P.selected?[...j,to(P.id,!1)]:j,[]);E(R),M(C)},setNodeExtent:S=>{const{nodes:b,nodeLookup:E,parentLookup:M,nodeOrigin:q,elevateNodesOnSelect:R,nodeExtent:C,zIndexMode:j}=w();S[0][0]===C[0][0]&&S[0][1]===C[0][1]&&S[1][0]===C[1][0]&&S[1][1]===C[1][1]||(Yd(b,E,M,{nodeOrigin:q,nodeExtent:S,elevateNodesOnSelect:R,checkEquality:!1,zIndexMode:j}),x({nodeExtent:S}))},panBy:S=>{const{transform:b,width:E,height:M,panZoom:q,translateExtent:R}=w();return i2({delta:S,panZoom:q,transform:b,translateExtent:R,width:E,height:M})},setCenter:async(S,b,E)=>{const{width:M,height:q,maxZoom:R,panZoom:C}=w();if(!C)return Promise.resolve(!1);const j=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:R;return await C.setViewport({x:M/2-S*j,y:q/2-b*j,zoom:j},{duration:E==null?void 0:E.duration,ease:E==null?void 0:E.ease,interpolate:E==null?void 0:E.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{x({connection:{...W0}})},updateConnection:S=>{x({connection:S})},reset:()=>x({...fh()})}},Object.is);function bS({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:s,initialHeight:c,initialMinZoom:l,initialMaxZoom:d,initialFitViewOptions:_,fitView:f,nodeOrigin:g,nodeExtent:m,zIndexMode:h,children:x}){const[w]=z.useState(()=>wS({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:c,fitView:f,minZoom:l,maxZoom:d,fitViewOptions:_,nodeOrigin:g,nodeExtent:m,zIndexMode:h}));return u.jsx(O2,{value:w,children:u.jsx(uk,{children:x})})}function kS({children:e,nodes:n,edges:r,defaultNodes:o,defaultEdges:s,width:c,height:l,fitView:d,fitViewOptions:_,minZoom:f,maxZoom:g,nodeOrigin:m,nodeExtent:h,zIndexMode:x}){return z.useContext(Iu)?u.jsx(u.Fragment,{children:e}):u.jsx(bS,{initialNodes:n,initialEdges:r,defaultNodes:o,defaultEdges:s,initialWidth:c,initialHeight:l,fitView:d,initialFitViewOptions:_,initialMinZoom:f,initialMaxZoom:g,nodeOrigin:m,nodeExtent:h,zIndexMode:x,children:e})}const SS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function MS({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:c,edgeTypes:l,onNodeClick:d,onEdgeClick:_,onInit:f,onMove:g,onMoveStart:m,onMoveEnd:h,onConnect:x,onConnectStart:w,onConnectEnd:k,onClickConnectStart:S,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:q,onNodeContextMenu:R,onNodeDoubleClick:C,onNodeDragStart:j,onNodeDrag:P,onNodeDragStop:V,onNodesDelete:X,onEdgesDelete:F,onDelete:D,onSelectionChange:te,onSelectionDragStart:T,onSelectionDrag:Y,onSelectionDragStop:W,onSelectionContextMenu:Z,onSelectionStart:$,onSelectionEnd:H,onBeforeDelete:J,connectionMode:L,connectionLineType:G=Mr.Bezier,connectionLineStyle:ce,connectionLineComponent:ue,connectionLineContainerStyle:pe,deleteKeyCode:ye="Backspace",selectionKeyCode:ge="Shift",selectionOnDrag:le=!1,selectionMode:ve=ss.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:Oe=us()?"Meta":"Control",zoomActivationKeyCode:Re=us()?"Meta":"Control",snapToGrid:Pe,snapGrid:We,onlyRenderVisibleElements:Je=!1,selectNodesOnDrag:Ke,nodesDraggable:st,autoPanOnNodeFocus:Wt,nodesConnectable:It,nodesFocusable:Rt,nodeOrigin:Lt=vy,edgesFocusable:Ut,edgesReconnectable:mi,elementsSelectable:Dt=!0,defaultViewport:Vi=J2,minZoom:oi=.5,maxZoom:Gi=2,translateExtent:Xt=as,preventScrolling:er=!0,nodeExtent:Ue,defaultMarkerColor:Ci="#b1b1b7",zoomOnScroll:Vt=!0,zoomOnPinch:dn=!0,panOnScroll:Ze=!1,panOnScrollSpeed:pn=.5,panOnScrollMode:Fi=ro.Free,zoomOnDoubleClick:_n=!0,panOnDrag:ai=!0,onPaneClick:jn,onPaneMouseEnter:Ot,onPaneMouseMove:wt,onPaneMouseLeave:at,onPaneScroll:Pn,onPaneContextMenu:yt,paneClickDistance:Tn=1,nodeClickDistance:de=0,children:Ge,onReconnect:Ye,onReconnectStart:Ct,onReconnectEnd:bt,onEdgeContextMenu:kt,onEdgeDoubleClick:Nt,onEdgeMouseEnter:ot,onEdgeMouseMove:St,onEdgeMouseLeave:jt,reconnectRadius:si=10,onNodesChange:li,onEdgesChange:jr,noDragClassName:po="nodrag",noWheelClassName:ui="nowheel",noPanClassName:fi="nopan",fitView:tr,fitViewOptions:Pr,connectOnClick:Rn,attributionPosition:mn,proOptions:_o,defaultEdgeOptions:la,elevateNodesOnSelect:mo=!0,elevateEdgesOnSelect:Tr=!1,disableKeyboardA11y:Vn=!1,autoPanOnConnect:ct,autoPanOnNodeDrag:ua,autoPanSpeed:Gt,connectionRadius:fo,isValidConnection:hi,onError:ir,style:Rr,id:He,nodeDragThreshold:yi,connectionDragThreshold:nr,viewport:Zt,onViewportChange:Vr,width:Fr,height:Le,colorMode:Fn="light",debug:zn,onScroll:ci,ariaLabelConfig:Ln,zIndexMode:zr="basic",...rr},or){const fn=He||"1",Kt=nk(Fn),zi=z.useCallback(ho=>{ho.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ci==null||ci(ho)},[ci]);return u.jsx("div",{"data-testid":"rf__wrapper",...rr,onScroll:zi,style:{...Rr,...SS},ref:or,className:Tt(["react-flow",s,Kt]),id:He,role:"application",children:u.jsxs(kS,{nodes:e,edges:n,width:Fr,height:Le,fitView:tr,fitViewOptions:Pr,minZoom:oi,maxZoom:Gi,nodeOrigin:Lt,nodeExtent:Ue,zIndexMode:zr,children:[u.jsx(vS,{onInit:f,onNodeClick:d,onEdgeClick:_,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:q,onNodeContextMenu:R,onNodeDoubleClick:C,nodeTypes:c,edgeTypes:l,connectionLineType:G,connectionLineStyle:ce,connectionLineComponent:ue,connectionLineContainerStyle:pe,selectionKeyCode:ge,selectionOnDrag:le,selectionMode:ve,deleteKeyCode:ye,multiSelectionKeyCode:Oe,panActivationKeyCode:we,zoomActivationKeyCode:Re,onlyRenderVisibleElements:Je,defaultViewport:Vi,translateExtent:Xt,minZoom:oi,maxZoom:Gi,preventScrolling:er,zoomOnScroll:Vt,zoomOnPinch:dn,zoomOnDoubleClick:_n,panOnScroll:Ze,panOnScrollSpeed:pn,panOnScrollMode:Fi,panOnDrag:ai,onPaneClick:jn,onPaneMouseEnter:Ot,onPaneMouseMove:wt,onPaneMouseLeave:at,onPaneScroll:Pn,onPaneContextMenu:yt,paneClickDistance:Tn,nodeClickDistance:de,onSelectionContextMenu:Z,onSelectionStart:$,onSelectionEnd:H,onReconnect:Ye,onReconnectStart:Ct,onReconnectEnd:bt,onEdgeContextMenu:kt,onEdgeDoubleClick:Nt,onEdgeMouseEnter:ot,onEdgeMouseMove:St,onEdgeMouseLeave:jt,reconnectRadius:si,defaultMarkerColor:Ci,noDragClassName:po,noWheelClassName:ui,noPanClassName:fi,rfId:fn,disableKeyboardA11y:Vn,nodeExtent:Ue,viewport:Zt,onViewportChange:Vr}),u.jsx(ik,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:w,onConnectEnd:k,onClickConnectStart:S,onClickConnectEnd:b,nodesDraggable:st,autoPanOnNodeFocus:Wt,nodesConnectable:It,nodesFocusable:Rt,edgesFocusable:Ut,edgesReconnectable:mi,elementsSelectable:Dt,elevateNodesOnSelect:mo,elevateEdgesOnSelect:Tr,minZoom:oi,maxZoom:Gi,nodeExtent:Ue,onNodesChange:li,onEdgesChange:jr,snapToGrid:Pe,snapGrid:We,connectionMode:L,translateExtent:Xt,connectOnClick:Rn,defaultEdgeOptions:la,fitView:tr,fitViewOptions:Pr,onNodesDelete:X,onEdgesDelete:F,onDelete:D,onNodeDragStart:j,onNodeDrag:P,onNodeDragStop:V,onSelectionDrag:Y,onSelectionDragStart:T,onSelectionDragStop:W,onMove:g,onMoveStart:m,onMoveEnd:h,noPanClassName:fi,nodeOrigin:Lt,rfId:fn,autoPanOnConnect:ct,autoPanOnNodeDrag:ua,autoPanSpeed:Gt,onError:ir,connectionRadius:fo,isValidConnection:hi,selectNodesOnDrag:Ke,nodeDragThreshold:yi,connectionDragThreshold:nr,onBeforeDelete:J,debug:zn,ariaLabelConfig:Ln,zIndexMode:zr}),u.jsx(Z2,{onSelectionChange:te}),Ge,u.jsx(G2,{proOptions:_o,position:mn}),u.jsx(U2,{rfId:fn,disableKeyboardA11y:Vn})]})})}var CS=Sy(MS);function qS(e){const[n,r]=z.useState(e),o=z.useCallback(s=>r(c=>by(s,c)),[]);return[n,r,o]}function ES(e){const[n,r]=z.useState(e),o=z.useCallback(s=>r(c=>ky(s,c)),[]);return[n,r,o]}function IS({dimensions:e,lineWidth:n,variant:r,className:o}){return u.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Tt(["react-flow__background-pattern",r,o])})}function NS({radius:e,className:n}){return u.jsx("circle",{cx:e,cy:e,r:e,className:Tt(["react-flow__background-pattern","dots",n])})}var Er;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Er||(Er={}));const jS={[Er.Dots]:1,[Er.Lines]:1,[Er.Cross]:6},PS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ky({id:e,variant:n=Er.Dots,gap:r=20,size:o,lineWidth:s=1,offset:c=0,color:l,bgColor:d,style:_,className:f,patternClassName:g}){const m=z.useRef(null),{transform:h,patternId:x}=tt(PS,ft),w=o||jS[n],k=n===Er.Dots,S=n===Er.Cross,b=Array.isArray(r)?r:[r,r],E=[b[0]*h[2]||1,b[1]*h[2]||1],M=w*h[2],q=Array.isArray(c)?c:[c,c],R=S?[M,M]:E,C=[q[0]*h[2]||1+R[0]/2,q[1]*h[2]||1+R[1]/2],j=`${x}${e||""}`;return u.jsxs("svg",{className:Tt(["react-flow__background",f]),style:{..._,...Nu,"--xy-background-color-props":d,"--xy-background-pattern-color-props":l},ref:m,"data-testid":"rf__background",children:[u.jsx("pattern",{id:j,x:h[0]%E[0],y:h[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:k?u.jsx(NS,{radius:M/2,className:g}):u.jsx(IS,{dimensions:R,lineWidth:s,variant:n,className:g})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${j})`})]})}Ky.displayName="Background";const TS=z.memo(Ky);function RS(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function VS(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function FS(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function zS(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function LS(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Vl({children:e,className:n,...r}){return u.jsx("button",{type:"button",className:Tt(["react-flow__controls-button",n]),...r,children:e})}const DS=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Qy({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:l,onFitView:d,onInteractiveChange:_,className:f,children:g,position:m="bottom-left",orientation:h="vertical","aria-label":x}){const w=ht(),{isInteractive:k,minZoomReached:S,maxZoomReached:b,ariaLabelConfig:E}=tt(DS,ft),{zoomIn:M,zoomOut:q,fitView:R}=Fp(),C=()=>{M(),c==null||c()},j=()=>{q(),l==null||l()},P=()=>{R(s),d==null||d()},V=()=>{w.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),_==null||_(!k)},X=h==="horizontal"?"horizontal":"vertical";return u.jsxs(ia,{className:Tt(["react-flow__controls",X,f]),position:m,style:e,"data-testid":"rf__controls","aria-label":x??E["controls.ariaLabel"],children:[n&&u.jsxs(u.Fragment,{children:[u.jsx(Vl,{onClick:C,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:b,children:u.jsx(RS,{})}),u.jsx(Vl,{onClick:j,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:S,children:u.jsx(VS,{})})]}),r&&u.jsx(Vl,{className:"react-flow__controls-fitview",onClick:P,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:u.jsx(FS,{})}),o&&u.jsx(Vl,{className:"react-flow__controls-interactive",onClick:V,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:k?u.jsx(LS,{}):u.jsx(zS,{})}),g]})}Qy.displayName="Controls";const OS=z.memo(Qy);function BS({id:e,x:n,y:r,width:o,height:s,style:c,color:l,strokeColor:d,strokeWidth:_,className:f,borderRadius:g,shapeRendering:m,selected:h,onClick:x}){const{background:w,backgroundColor:k}=c||{},S=l||w||k;return u.jsx("rect",{className:Tt(["react-flow__minimap-node",{selected:h},f]),x:n,y:r,rx:g,ry:g,width:o,height:s,style:{fill:S,stroke:d,strokeWidth:_},shapeRendering:m,onClick:x?b=>x(b,e):void 0})}const AS=z.memo(BS),$S=e=>e.nodes.map(n=>n.id),kd=e=>e instanceof Function?e:()=>e;function HS({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:c=AS,onClick:l}){const d=tt($S,ft),_=kd(n),f=kd(e),g=kd(r),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:d.map(h=>u.jsx(US,{id:h,nodeColorFunc:_,nodeStrokeColorFunc:f,nodeClassNameFunc:g,nodeBorderRadius:o,nodeStrokeWidth:s,NodeComponent:c,onClick:l,shapeRendering:m},h))})}function WS({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:s,nodeStrokeWidth:c,shapeRendering:l,NodeComponent:d,onClick:_}){const{node:f,x:g,y:m,width:h,height:x}=tt(w=>{const{internals:k}=w.nodeLookup.get(e),S=k.userNode,{x:b,y:E}=k.positionAbsolute,{width:M,height:q}=Jn(S);return{node:S,x:b,y:E,width:M,height:q}},ft);return!f||f.hidden||!Z0(f)?null:u.jsx(d,{x:g,y:m,width:h,height:x,style:f.style,selected:!!f.selected,className:o(f),color:n(f),borderRadius:s,strokeColor:r(f),strokeWidth:c,shapeRendering:l,onClick:_,id:f.id})}const US=z.memo(WS);var GS=z.memo(HS);const KS=200,QS=150,YS=e=>!e.hidden,XS=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?X0(ws(e.nodeLookup,{filter:YS}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},ZS="react-flow__minimap-desc";function Yy({style:e,className:n,nodeStrokeColor:r,nodeColor:o,nodeClassName:s="",nodeBorderRadius:c=5,nodeStrokeWidth:l,nodeComponent:d,bgColor:_,maskColor:f,maskStrokeColor:g,maskStrokeWidth:m,position:h="bottom-right",onClick:x,onNodeClick:w,pannable:k=!1,zoomable:S=!1,ariaLabel:b,inversePan:E,zoomStep:M=1,offsetScale:q=5}){const R=ht(),C=z.useRef(null),{boundingRect:j,viewBB:P,rfId:V,panZoom:X,translateExtent:F,flowWidth:D,flowHeight:te,ariaLabelConfig:T}=tt(XS,ft),Y=(e==null?void 0:e.width)??KS,W=(e==null?void 0:e.height)??QS,Z=j.width/Y,$=j.height/W,H=Math.max(Z,$),J=H*Y,L=H*W,G=q*H,ce=j.x-(J-j.width)/2-G,ue=j.y-(L-j.height)/2-G,pe=J+G*2,ye=L+G*2,ge=`${ZS}-${V}`,le=z.useRef(0),ve=z.useRef();le.current=H,z.useEffect(()=>{if(C.current&&X)return ve.current=d2({domNode:C.current,panZoom:X,getTransform:()=>R.getState().transform,getViewScale:()=>le.current}),()=>{var Pe;(Pe=ve.current)==null||Pe.destroy()}},[X]),z.useEffect(()=>{var Pe;(Pe=ve.current)==null||Pe.update({translateExtent:F,width:D,height:te,inversePan:E,pannable:k,zoomStep:M,zoomable:S})},[k,S,E,M,F,D,te]);const we=x?Pe=>{var Ke;const[We,Je]=((Ke=ve.current)==null?void 0:Ke.pointer(Pe))||[0,0];x(Pe,{x:We,y:Je})}:void 0,Oe=w?z.useCallback((Pe,We)=>{const Je=R.getState().nodeLookup.get(We).internals.userNode;w(Pe,Je)},[]):void 0,Re=b??T["minimap.ariaLabel"];return u.jsx(ia,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof _=="string"?_:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*H:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Tt(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:Y,height:W,viewBox:`${ce} ${ue} ${pe} ${ye}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ge,ref:C,onClick:we,children:[Re&&u.jsx("title",{id:ge,children:Re}),u.jsx(GS,{onClick:Oe,nodeColor:o,nodeStrokeColor:r,nodeBorderRadius:c,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:d}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-G},${ue-G}h${pe+G*2}v${ye+G*2}h${-pe-G*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Yy.displayName="MiniMap";const JS=z.memo(Yy),eM=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,tM={[ta.Line]:"right",[ta.Handle]:"bottom-right"};function iM({nodeId:e,position:n,variant:r=ta.Handle,className:o,style:s=void 0,children:c,color:l,minWidth:d=10,minHeight:_=10,maxWidth:f=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:h,autoScale:x=!0,shouldResize:w,onResizeStart:k,onResize:S,onResizeEnd:b}){const E=Ey(),M=typeof e=="string"?e:E,q=ht(),R=z.useRef(null),C=r===ta.Handle,j=tt(z.useCallback(eM(C&&x),[C,x]),ft),P=z.useRef(null),V=n??tM[r];z.useEffect(()=>{if(!(!R.current||!M))return P.current||(P.current=M2({domNode:R.current,nodeId:M,getStoreItems:()=>{const{nodeLookup:F,transform:D,snapGrid:te,snapToGrid:T,nodeOrigin:Y,domNode:W}=q.getState();return{nodeLookup:F,transform:D,snapGrid:te,snapToGrid:T,nodeOrigin:Y,paneDomNode:W}},onChange:(F,D)=>{const{triggerNodeChanges:te,nodeLookup:T,parentLookup:Y,nodeOrigin:W}=q.getState(),Z=[],$={x:F.x,y:F.y},H=T.get(M);if(H&&H.expandParent&&H.parentId){const J=H.origin??W,L=F.width??H.measured.width??0,G=F.height??H.measured.height??0,ce={id:H.id,parentId:H.parentId,rect:{width:L,height:G,...J0({x:F.x??H.position.x,y:F.y??H.position.y},{width:L,height:G},H.parentId,T,J)}},ue=Vp([ce],T,Y,W);Z.push(...ue),$.x=F.x?Math.max(J[0]*L,F.x):void 0,$.y=F.y?Math.max(J[1]*G,F.y):void 0}if($.x!==void 0&&$.y!==void 0){const J={id:M,type:"position",position:{...$}};Z.push(J)}if(F.width!==void 0&&F.height!==void 0){const L={id:M,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};Z.push(L)}for(const J of D){const L={...J,type:"position"};Z.push(L)}te(Z)},onEnd:({width:F,height:D})=>{const te={id:M,type:"dimensions",resizing:!1,dimensions:{width:F,height:D}};q.getState().triggerNodeChanges([te])}})),P.current.update({controlPosition:V,boundaries:{minWidth:d,minHeight:_,maxWidth:f,maxHeight:g},keepAspectRatio:m,resizeDirection:h,onResizeStart:k,onResize:S,onResizeEnd:b,shouldResize:w}),()=>{var F;(F=P.current)==null||F.destroy()}},[V,d,_,f,g,m,k,S,b,w]);const X=V.split("-");return u.jsx("div",{className:Tt(["react-flow__resize-control","nodrag",...X,r,o]),ref:R,style:{...s,scale:j,...l&&{[C?"backgroundColor":"borderColor"]:l}},children:c})}z.memo(iM);const uu=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),cu=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),du=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Nr={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},Pu=(e,n)=>{try{const r=localStorage.getItem(e);return r?JSON.parse(r):n}catch(r){return console.error(`Error loading ${e}:`,r),n}},nM=(e,n)=>{try{localStorage.setItem(e,JSON.stringify(n))}catch(r){console.error(`Error saving ${e}:`,r)}};let ji=Pu(Nr.PRODUCTS,uu),nn=Pu(Nr.MACHINES,cu),on=Pu(Nr.RECIPES,du);const Et=e=>ji.find(n=>n.id===e),_t=e=>nn.find(n=>n.id===e),Lp=(e,n,r)=>{e.length=0,e.push(...n),nM(r,e)},Jd=e=>Lp(ji,e,Nr.PRODUCTS),ep=e=>Lp(nn,e,Nr.MACHINES),tp=e=>Lp(on,e,Nr.RECIPES),rM=()=>Pu(Nr.CANVAS_STATE,null),oM=()=>localStorage.removeItem(Nr.CANVAS_STATE),aM=()=>{Jd(uu),ep(cu),tp(du),oM()},Dp=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),sM=e=>e==="p_variableproduct",na=(e,n,r)=>{if(sM(e))return r==="item"?"Variable Item":r==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const o=n(e);return o?o.name:"Unknown Product"},lM=e=>Dp(e)?"Variable":typeof e=="number"?e.toString():e,Ua=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,uM=e=>{if(Dp(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:Ua(e.drilling),idle:Ua(e.idle)};if("max"in e&&"average"in e)return{max:Ua(e.max),average:Ua(e.average)}}return Ua(e)},cM=e=>Dp(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,hh=(e,n)=>{const r=lM(e.quantity),o=na(e.product_id,n);return`${r}x ${o}`},dM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Xy=e=>dM.includes(e),Pi=18,qr=18,Xn=100,ri={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},Op=(e,n={},r=Pi,o=null,s=null)=>{const c=ri[e];if(!c)return r;switch(c.type){case"fixed":return c.outputTemp;case"additive":return Math.min(r+c.tempIncrease,c.maxTemp);case"configurable":return n.temperature||c.tempOptions[0].temp;case"product_dependent":return c.temps[o]||c.temps.p_water||400;case"passthrough":return r;case"boiler":const l=s??qr,d=n.heatLoss??c.defaultHeatLoss;return l-d;default:return r}},yh=(e,n)=>{const r=ri[e];if(!r||r.type!=="configurable")return null;const o=r.tempOptions.find(s=>s.temp===n);return o?o.power:null},pu=e=>e==null?"":`${Math.round(e)}C`,pM=e=>{const n=ri[e];return n&&n.type==="configurable"},_M=e=>{const n=ri[e];return n&&n.type==="boiler"},mM=e=>{const n=ri[e];return n?n.type==="configurable"?{temperature:n.tempOptions[0].temp}:n.type==="boiler"?{heatLoss:n.defaultHeatLoss}:{}:{}},fM=e=>e<=0?1/0:e>=400?2:800/e,hM=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,yM=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,gM=e=>{if(e<=0)return 30;const n=2973/11,r=4e3/11;return e<=n?30+-165/1982*e:e<r?-99/2054*e+21081/1027:3},xM=e=>e<=0?1/0:64/(.176*Math.abs(e)),En={m_industrial_drill:{type:"steam_input",formula:fM},m_alloyer:{type:"steam_input",formula:hM},m_coal_liquefaction_plant:{type:"steam_input",formula:yM},m_steam_cracking_plant:{type:"steam_input",formula:gM},m_water_treatment_plant:{type:"steam_input",formula:xM}},un=e=>e in En,Ir=(e,n,r)=>{const o=En[e];if(!o)return r;const s=o.formula(n);return isFinite(s)?s:r},uo=e=>!e||!e.inputs?!1:e.inputs.some(n=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(n.product_id)),gh=(e,n)=>{const r=new Map,o=new Map;Object.keys(e.nodes).forEach(d=>{const _=e.nodes[d];_&&(_.inputs.forEach((f,g)=>{o.set(`${d}:${g}`,Pi)}),_.outputs.forEach((f,g)=>{r.set(`${d}:${g}`,Pi)}))});const{sorted:s,cycleNodes:c}=wM(e),l=(d,_=!1)=>{const f=e.nodes[d];if(!f)return!1;const g={id:f.recipe.machine_id},m=ri[g.id];let h=!1;return f.inputs.forEach((x,w)=>{const k=vM(e,n,d,w,r,!_),S=o.get(`${d}:${w}`),b=k!==null?k:S;Math.abs(b-S)>.01&&(o.set(`${d}:${w}`,b),h=!0)}),f.outputs.forEach((x,w)=>{var S,b;let k=Pi;if(m){if(m.type==="fixed")k=m.outputTemp;else if(m.type==="additive"){if(f.inputs.length>0){const E=o.get(`${d}:0`)||Pi;E>m.maxTemp?k=E:k=Math.min(E+m.tempIncrease,m.maxTemp)}}else if(m.type==="configurable")k=((S=f.recipe.temperatureSettings)==null?void 0:S.temperature)||m.tempOptions[0].temp;else if(m.type==="product_dependent"){if(f.inputs.length>0){const E=f.inputs[0].productId;k=m.temps[E]||m.temps.p_water||400}}else if(m.type==="boiler"){if(f.inputs.length>=2){const E=o.get(`${d}:1`)||Pi,M=((b=f.recipe.temperatureSettings)==null?void 0:b.heatLoss)||m.defaultHeatLoss,q=E-M;w===0?k=q*.85:w===1&&(q<m.minSteamTemp?k=Math.max(q,Pi):k=q)}}else if(m.type==="passthrough"){const E=f.inputs.findIndex(M=>M.productId===m.inputProduct);E>=0&&(k=o.get(`${d}:${E}`)||Pi)}}r.set(`${d}:${w}`,k)}),h};if(s.forEach(d=>{c.has(d)||l(d)}),c.size>0){let _=0,f=!0;const g=s.filter(h=>c.has(h));for(;f&&_<100;)f=!1,g.forEach(h=>{l(h,!0)&&(f=!0)}),_++;const m=new Set;s.forEach(h=>{if(c.has(h))return;const x=e.nodes[h];x&&x.inputs.forEach((w,k)=>{const S=e.products[w.productId];if(!S)return;S.connections.filter(E=>E.targetNodeId===h&&E.targetInputIndex===k).forEach(E=>{c.has(E.sourceNodeId)&&m.add(h)})})}),m.forEach(h=>{l(h,!1)})}return{outputTemperatures:r,inputTemperatures:o}},vM=(e,n,r,o,s,c=!0)=>{const l=e.products[e.nodes[r].inputs[o].productId];if(!l)return c?Pi:null;const d=l.connections.filter(m=>m.targetNodeId===r&&m.targetInputIndex===o);if(d.length===0)return c?Pi:null;const _=[];if(d.forEach(m=>{var x;const h=s.get(`${m.sourceNodeId}:${m.sourceOutputIndex}`);if(h!=null){const w=((x=n.byConnection[m.id])==null?void 0:x.flowRate)||0;_.push({temp:h,flow:w})}}),_.length===0)return c?Pi:null;const f=_.reduce((m,h)=>m+h.flow,0);if(f>0){const m=_.reduce((h,x)=>h+x.temp*x.flow,0);return Math.round(m/f*1e10)/1e10}const g=_.reduce((m,h)=>m+h.temp,0);return Math.round(g/_.length*1e10)/1e10},wM=e=>{const n=[],r=new Set,o=new Set,s=new Set,c=(l,d=[])=>{if(r.has(l))return;if(o.has(l)){const g=d.indexOf(l);for(let m=g;m<d.length;m++)s.add(d[m]);s.add(l);return}o.add(l);const _=[...d,l],f=e.nodes[l];f&&f.inputs.forEach((g,m)=>{const h=e.products[g.productId];h&&h.connections.filter(w=>w.targetNodeId===l&&w.targetInputIndex===m).forEach(w=>{r.has(w.sourceNodeId)||c(w.sourceNodeId,_)})}),o.delete(l),r.add(l),n.push(l)};return Object.keys(e.nodes).forEach(l=>{r.has(l)||c(l)}),{sorted:n,cycleNodes:s}},ip=(e,n,r)=>e.map(o=>{if(!r.nodes[o.id])return o;const c={id:o.data.recipe.machine_id},l=ri[c.id],d=un(c.id),_=o.data.recipe.outputs.map((g,m)=>{const h=n.outputTemperatures.get(`${o.id}:${m}`);if(h!=null){if((l==null?void 0:l.type)==="boiler"&&g.product_id==="p_steam"){const x=l.minSteamTemp||100;return h<x?{...g,temperature:h,quantity:0,originalQuantity:g.originalQuantity||g.quantity}:{...g,temperature:h,quantity:g.originalQuantity||g.quantity,originalQuantity:g.originalQuantity||g.quantity}}return{...g,temperature:h}}return g});let f={...o.data.recipe,outputs:_};if(d){const g=En[c.id];if((g==null?void 0:g.type)==="steam_input"){const m=o.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(m>=0){const h=n.inputTemperatures.get(`${o.id}:${m}`);if(h!=null&&(f={...f,tempDependentInputTemp:h},c.id==="m_water_treatment_plant")){const w=90*Ir(c.id,h,1);f={...f,inputs:f.inputs.map((k,S)=>S===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(k.product_id)?{...k,quantity:w,originalQuantity:90}:k)}}}}}return{...o,data:{...o.data,recipe:f}}}),np=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],rp=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],bM={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},kM=12,SM=3.1,MM=.1,CM=.02,qM=2,ps={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},EM=()=>Object.keys(ps).map(e=>parseInt(e)).sort((e,n)=>e-n),IM=(e,n)=>{switch(e){case"copper":return n/150;case"iron":return .04*Math.pow(n,.25);case"steel":return .02*Math.pow(n,.25);case"tungsten_carbide":return .005*Math.pow(n,.25);default:return 1}},NM=(e,n)=>{switch(e){case"none":return Math.pow(n,2)/9e5;case"water":return Math.pow(n,2)/1875e3;case"acetic_acid":return Math.pow(n,.8)/450;case"sulfuric_acid":return .09*Math.pow(n,.25);case"hydrochloric_acid":return n<6e3?13e-6*Math.pow(n,1.5-5e-5*n)+4.3875*Math.pow(10,-13.3)*Math.pow(n,3):.09*Math.pow(n,.25);default:return 1}},co=(e,n,r,o)=>{if(!e||!o)return null;const s=IM(e,o),c=NM(n||"none",o),l=r?1.1:1,d=.5*s*c*l,_=Math.ceil(100/d),f=kM,g=r?100:50,m=2*o/g,h=_+f+m,x=_/h;return{deteriorationRate:d,lifeTime:_,replacementTime:f,travelTime:m,totalCycleTime:h,dutyCycle:x,drillingPower:SM,idlePower:MM,pollution:CM}},Zy=(e,n,r,o)=>{const s=[],c=co(e,n,r,o);if(!c){if(e){const l=np.find(d=>d.id===e);l&&s.push({product_id:l.product_id,quantity:"Variable"})}if(n&&n!=="none"){const l=rp.find(d=>d.id===n);l!=null&&l.product_id&&s.push({product_id:l.product_id,quantity:"Variable"})}return r&&s.push({product_id:"p_machine_oil",quantity:"Variable"}),s}if(e){const l=np.find(d=>d.id===e);if(l){const d=1/c.totalCycleTime;s.push({product_id:l.product_id,quantity:parseFloat(d.toFixed(6))})}}if(n&&n!=="none"){const l=rp.find(d=>d.id===n);if(l!=null&&l.product_id){const _=(bM[n]||0)*c.dutyCycle;s.push({product_id:l.product_id,quantity:parseFloat(_.toFixed(6))})}}return r&&s.push({product_id:"p_machine_oil",quantity:qM}),s},Jy=(e,n,r,o)=>{if(!o)return[];const s=ps[o];if(!s)return[];const c=co(e,n,r,o);if(!c)return s.map(d=>({...d,quantity:"Variable"}));const l=r?1.1:1;return s.map(d=>{const _=d.quantity*l*c.dutyCycle;return{product_id:d.product_id,quantity:parseFloat(_.toFixed(4))}})},xh={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},vh=4,jM=20,PM=4,wh=5e5,TM=.3,RM=10,Fl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},VM=()=>{const e=[];for(let n=1;n<=6;n++){const r=Math.pow(2,n),o=`${r}x Microchip`,s=`p_${r}x_microchip`;e.push({outerStage:1,innerStage:r,innerPower:n,name:o,productId:s})}for(let n=2;n<=8;n++){const s=`${n}x64x Microchip`,c=`p_${n}x64x_microchip`;e.push({outerStage:n,innerStage:64,innerPower:6,name:s,productId:c})}return e},eg=VM(),FM=e=>eg.find(n=>n.productId===e),Ss=(e,n,r=0)=>{const o=FM(e);if(!o)return null;const c=Math.log2(o.innerStage)+(o.outerStage-1)*6,l=vh*c,d=n?PM:jM,_=r/6,f=c*vh*(d+_)+RM,g=Fl.logic_plates*c,m=Fl.copper_wires*c,h=Fl.semiconductors*c,x=Fl.gold_wires*c,w=[{product_id:"p_logic_plate",quantity:g},{product_id:"p_copper_wire",quantity:m},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:x}];n&&w.push({product_id:"p_machine_oil",quantity:parseFloat((TM*f).toFixed(6))});const k=[{product_id:e,quantity:1}],S=wh/d,b=wh/(n?.8:4);return{outerStage:o.outerStage,innerStage:o.innerStage,totalStages:c,totalSteps:l,avgStepTime:d,cycleTime:f,inputs:w,outputs:k,avgPowerConsumption:S,maxPowerConsumption:b,logicPlates:g,copperWires:m,semiconductors:h,goldWires:x}},tg=(e,n)=>{const r=Ss(e,n,0);return r?r.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},ig=(e,n)=>{const r=Ss(e,n,0);return r?r.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},bh={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},op=11,ng=2,zM=2e5,rg=1,LM=3,og=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,ag=e=>Math.ceil(e/LM),_u=(e,n,r,o,s,c)=>{if(!e||!n||!r||!o||s!==1)return null;const l=ag(r),d=og(c),_=r*rg,f=e/d,g=n/op,m=Math.min(f,g),h=m*ng,x=n*zM/op;return{trees:e,harvesters:n,sprinklers:r,waterTanks:l,outputs:o,controller:s,growthTime:d,waterConsumption:_,sustainableHarvestRate:f,maxHarvestRate:g,actualHarvestRate:m,logOutput:h,avgPowerConsumption:x,isTreeLimited:f<g}},sg=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*rg}],Bp=(e,n,r)=>{if(!e||!n)return[{product_id:"p_oak_log",quantity:"Variable"}];const o=og(r),s=e/o,c=n/op,d=Math.min(s,c)*ng;return[{product_id:"p_oak_log",quantity:parseFloat(d.toFixed(6))}]},kh={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},Ap=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],lg={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},DM={r_industrial_firebox_07:1},ug=e=>Ap.find(n=>n.id===e),mu=(e,n)=>{const r=lg[e],o=ug(n);if(!r||!o)return null;const s=r/o.energy,c=DM[e]||0,l=s+c,d=1,_=s;return{energyNeeded:r,fuelEnergy:o.energy,waitTime:s,additionalWait:c,cycleTime:l,fuelConsumptionRate:d,fuelPerCycle:_}},ap=(e,n,r)=>{if(r==="r_industrial_firebox_07")return e;const o=mu(r,n);if(!o)return e;const s=ug(n);if(!s)return e;const c={product_id:s.product_id,quantity:parseFloat(o.fuelPerCycle.toFixed(6))},l=Ap.map(_=>_.product_id),d=e.filter(_=>_.product_id!=="p_variableproduct"&&!l.includes(_.product_id));return[c,...d]},cg=e=>e in lg,dg=(e,n)=>{const o=(e-100)/5;let s=1,c=1;e<100?(s=1+o*.05,c=1+o*.06666666666666667):e>100&&(s=1+o*.05,c=1+o*.1);const d=(n-100)/5;let _=1,f=1;n<100?(_=1+d*-.0625,f=1+d*.05):n>100&&(_=1+d*-.0425,f=1+d*.25);const g=s*_,m=s,h=c+f-1;return{inputMultiplier:g,outputMultiplier:m,powerMultiplier:h}},OM=(e,n,r)=>{const o=dg(n,r),s=e.inputs.map(d=>({...d,quantity:typeof d.quantity=="number"?parseFloat((d.quantity*o.inputMultiplier).toFixed(6)):d.quantity})),c=e.outputs.map(d=>({...d,quantity:typeof d.quantity=="number"?parseFloat((d.quantity*o.outputMultiplier).toFixed(6)):d.quantity})),l=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*o.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:s,outputs:c,power_consumption:l,chemicalPlantSettings:{speedFactor:n,efficiencyFactor:r}}},Sr=7e3,$p=140,Hp=70,pg=1e6,Sh=240,Sd=29.166666666666668,Za=240,_g=480,Ql=(e,n)=>{const r=e+n;let o;return r<=Za?o=Sd:r>=_g?o=Sd/2:o=Sd*Za/r,{cycleTime:o,concreteBlocksPerCycle:$p,leadIngotsPerCycle:Hp,totalFlow:r,powerConsumption:pg}},fu=(e,n,r,o)=>{const s=Math.min(e,Sh),c=Math.min(n,Sh),l=s+c;let d,_;return l<=Za?(d=Sr,_=Sr):l>=_g?(d=Sr/2,_=Sr/2):(d=Sr*Za/l,_=Sr*Za/l),[{product_id:r||"p_variableproduct",quantity:d,isAnyProduct:r==="p_any_item"||!r,acceptedType:"item"},{product_id:o||"p_variableproduct",quantity:_,isAnyProduct:o==="p_any_fluid"||!o,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:$p},{product_id:"p_lead_ingot",quantity:Hp}]},sp={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:pg,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Sr,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Sr,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:$p},{product_id:"p_lead_ingot",quantity:Hp}],outputs:[],isWasteFacility:!0},lp=15,BM=2,AM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ja=(e,n=null)=>{let r=0;return e.forEach((o,s)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const c=n&&n[s]!==void 0?n[s]:o.quantity||0;AM.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*c:r+=.0216*c}),r},up=e=>{const n=[];for(let r=0;r<BM;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";n.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:lp})}return n},cp={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:lp},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:lp}],outputs:[],isLiquidDump:!0},mg=15,fg=8,$M=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],es=(e,n=null)=>{let r=0;return e.forEach((o,s)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const c=n&&n[s]!==void 0?n[s]:o.quantity||0;$M.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*c:r+=.0216*c}),r},dp=e=>{const n=[];for(let r=0;r<fg;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";n.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:mg})}return n},pp={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(fg).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:mg})),outputs:[],isLiquidBurner:!0},Mh=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",HM=(e,n,r)=>{switch(e){case"drill":return WM();case"assembler":return UM();case"treeFarm":return GM(r);case"firebox":return KM(n);case"temperature":return QM(n);case"boiler":return YM();case"chemicalPlant":return XM();case"wasteFacility":return ZM();case"liquidDump":return JM();case"liquidBurner":return eC();default:return null}},WM=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...np.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:rp.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...EM().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?co(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[u.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),u.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),u.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),u.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),u.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),u.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const n=Zy(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),r=Jy(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),o=e.drillHead&&e.depth?co(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:n,outputs:r,metrics:o}}}),UM=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const n=e.outerStage,r=e.innerStage,o=n&&r?parseInt(n)===1?`${r}x Microchip`:`${n}x${r}x Microchip`:"";return o?u.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:o}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const r=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return r?Ss(r,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[u.jsxs("div",{children:["Total Stages: ",e.totalStages]}),u.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),u.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),u.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),u.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[u.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),u.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),u.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[u.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[u.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),u.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),u.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),u.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var l,d;const n={outerStage:e.outerStage||((l=e.microchip)==null?void 0:l.outer)||"",innerStage:e.innerStage||((d=e.microchip)==null?void 0:d.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},o=!n.outerStage||!n.innerStage?"":parseInt(n.outerStage)===1?`p_${n.innerStage}x_microchip`:`p_${n.outerStage}x${n.innerStage}x_microchip`,s=tg(o,n.machineOil),c=ig(o,n.machineOil);return{settings:n,inputs:s,outputs:c,metrics:null}}}),GM=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:n=>n>500||n<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:n=>n<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:n=>n<1,hint:function(n){const r=ag(n);return`Requires ${r} water tank${r!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:n=>n<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:n=>_u(n.trees,n.harvesters,n.sprinklers,n.outputs,n.controller,e),renderMetrics:(n,r)=>u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[u.jsxs("div",{children:["Growth Time: ",n.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),u.jsxs("div",{children:["Water Tanks: ",n.waterTanks]}),u.jsxs("div",{children:["Sustainable Rate: ",n.sustainableHarvestRate.toFixed(4)," trees/s"]}),u.jsxs("div",{children:["Max Harvest Rate: ",n.maxHarvestRate.toFixed(4)," trees/s"]}),u.jsxs("div",{children:["Actual Rate: ",n.actualHarvestRate.toFixed(4)," trees/s"]}),u.jsxs("div",{children:["Power: ",(n.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),n.isTreeLimited&&u.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:n=>n.trees>500||n.trees<1||n.harvesters<1||n.sprinklers<1||n.outputs<1,onApply:(n,r)=>{const o=sg(n.sprinklers),s=Bp(n.trees,n.harvesters,e);return{settings:n,inputs:o,outputs:s,metrics:null}}}),KM=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:Ap.map(n=>({value:n.id,label:`${n.name} (${(n.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:n=>mu(e.id,n.fuel),renderMetrics:(n,r)=>u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[u.jsxs("div",{children:["Energy Needed: ",(n.energyNeeded/1e3).toFixed(0),"k"]}),u.jsxs("div",{children:["Fuel Energy: ",(n.fuelEnergy/1e3).toFixed(0),"k per unit"]}),u.jsxs("div",{children:["Wait Time: ",n.waitTime.toFixed(2),"s"]}),n.additionalWait>0&&u.jsxs("div",{children:["Additional Wait: +",n.additionalWait,"s"]}),u.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",n.cycleTime.toFixed(2),"s"]}),u.jsxs("div",{children:["Fuel Per Cycle: ",n.fuelPerCycle.toFixed(2)," units"]}),u.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/n.cycleTime).toFixed(4)," cycles/s"]})]}),u.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[u.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),u.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:ap(e.inputs,r.fuel,e.id).map((o,s)=>{const c=typeof o.quantity=="number"?o.quantity.toFixed(4):o.quantity,l=na(o.product_id,Et);return u.jsxs("div",{children:[c,"x ",l]},s)})})]})]}),onApply:(n,r)=>{const o=mu(r.id,n.fuel),s=ap(r.inputs,n.fuel,r.id);return{settings:n,inputs:s,outputs:[],metrics:o}}}),QM=e=>{var o,s;const n=e.machine_id,r=ri[n];return{title:`${r.name} Settings`,defaultSettings:{temperature:((s=(o=r.tempOptions)==null?void 0:o[0])==null?void 0:s.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:c=>parseInt(c),options:r.tempOptions.map(c=>({value:c.temp,label:`${pu(c.temp)} - ${Mh(c.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(c,l)=>{const d=l.temperature,_=yh(n,d);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:["Output Temperature: ",pu(d)]}),u.jsxs("div",{children:["Power Consumption: ",Mh(_)]})]})}}],onApply:(c,l)=>{const d=yh(n,c.temperature),_=l.outputs.map(f=>({...f,temperature:Op(n,c)}));return{settings:c,inputs:[],outputs:_,metrics:d}}}},YM=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[" Boiler uses the ",u.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),u.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),u.jsx("div",{children:" If output temp < 100C, no steam is produced"}),u.jsx("div",{children:" Water output is cooled (no temperature)"}),u.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),XM=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>dg(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),u.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[u.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),u.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),u.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),u.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[u.jsx("div",{children:" Speed affects input/output quantities and power"}),u.jsx("div",{children:" Efficiency affects input quantities and power"}),u.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),ZM=()=>{const e=ji.filter(r=>r.type==="item").sort((r,o)=>r.name.localeCompare(o.name)),n=ji.filter(r=>r.type==="fluid").sort((r,o)=>r.name.localeCompare(o.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(r=>({value:r.id,label:r.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...n.map(r=>({value:r.id,label:r.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{children:" Each input accepts up to 240/s"}),u.jsx("div",{children:" Fixed requirements per cycle:"}),u.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),u.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:r=>{const o=fu(0,0,r.itemProductId,r.fluidProductId);return{settings:r,inputs:o,outputs:[],metrics:null}}}},JM=()=>{const e=ji.filter(n=>n.type==="fluid").sort((n,r)=>n.name.localeCompare(r.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((n,r)=>({type:"select",key:`fluidProductId${r}`,label:`Input ${r+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(n,r)=>{const o=[r.fluidProductId0,r.fluidProductId1],s=up(o),c=Ja(s);return u.jsxs(u.Fragment,{children:[u.jsx("div",{children:" Water variants: 0%/hr"}),u.jsx("div",{children:" Residue: 8.64%/hr per /s"}),u.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),u.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:u.jsxs("strong",{children:["Current Pollution: ",c.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),u.jsx("div",{children:" Connect fluids to dispose of them"}),u.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:n=>{const r=[n.fluidProductId0,n.fluidProductId1],o=up(r);return{settings:{fluidProductIds:r,searchTerm:n.searchTerm},inputs:o,outputs:[],metrics:null}}}},eC=()=>{const e=ji.filter(n=>n.type==="fluid").sort((n,r)=>n.name.localeCompare(r.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((n,r)=>({type:"select",key:`fluidProductId${r}`,label:`Input ${r+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(n,r)=>{const o=Array(8).fill(0).map((l,d)=>r[`fluidProductId${d}`]),s=dp(o),c=es(s);return u.jsxs(u.Fragment,{children:[u.jsx("div",{children:" Water variants: 0%/hr"}),u.jsx("div",{children:" Residue: 8.64%/hr per /s"}),u.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),u.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:u.jsxs("strong",{children:["Current Pollution: ",c.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),u.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),u.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:n=>{const r=Array(8).fill(0).map((s,c)=>n[`fluidProductId${c}`]),o=dp(r);return{settings:{fluidProductIds:r,searchTerm:n.searchTerm},inputs:o,outputs:[],metrics:null}}}},tC=({recipeType:e,nodeId:n,currentSettings:r,recipe:o,globalPollution:s,onSettingsChange:c,onClose:l})=>{var S;const d=HM(e,o,s),[_,f]=z.useState(r||d.defaultSettings),g=z.useRef(null),m=b=>{const E=g.current;if(!E)return;const M=E.scrollHeight>E.clientHeight,q=E.scrollTop===0&&b.deltaY<0,R=E.scrollTop+E.clientHeight>=E.scrollHeight&&b.deltaY>0;M&&!q&&!R||b.preventDefault(),b.stopPropagation()},h=(b,E)=>{f(typeof b=="object"?M=>({...M,...b}):M=>({...M,[b]:E}))},x=()=>{const b=d.onApply(_,o);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":c(n,b.settings,b.inputs,b.outputs);break;case"firebox":c(n,b.settings,b.inputs,b.metrics);break;case"temperature":c(n,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":c(n,b.settings);break;default:c(n,b.settings,b.inputs,b.outputs,b.metrics)}l()},w=()=>{f(d.defaultSettings)},k=d.calculateMetrics?d.calculateMetrics(_,o):null;return D2.createPortal(u.jsx("div",{className:"drill-settings-overlay",onClick:l,children:u.jsxs("div",{ref:g,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:m,children:[u.jsx("h3",{className:"drill-settings-title",children:d.title}),u.jsxs("div",{className:"drill-settings-content",children:[d.fields.map((b,E)=>u.jsx(iC,{field:b,value:_[b.key],settings:_,onChange:(M,q)=>{b.type==="dual-select"?h(M,q):h(b.key,M)}},E)),k&&d.renderMetrics&&u.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:d.renderMetrics(k,_)})]}),u.jsxs("div",{className:"drill-settings-buttons",children:[u.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Reset"}),u.jsx("button",{onClick:x,className:"btn btn-primary",disabled:(S=d.hasErrors)==null?void 0:S.call(d,_),children:"Apply"})]})]})}),document.body)},iC=({field:e,value:n,settings:r,onChange:o})=>{var s,c;switch(e.type){case"select":return u.jsxs("div",{className:"drill-setting-group",children:[u.jsx("label",{className:"drill-setting-label",children:e.label}),u.jsx("select",{value:n,onChange:l=>o(e.parse?e.parse(l.target.value):l.target.value),className:"select",disabled:(s=e.disabled)==null?void 0:s.call(e,r),children:e.options.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))}),e.hint&&u.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(n,r):e.hint})]});case"checkbox":return u.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:u.jsxs("label",{className:"drill-setting-label",children:[u.jsx("input",{type:"checkbox",checked:n,onChange:l=>o(l.target.checked),className:"drill-checkbox"}),u.jsx("span",{children:e.label})]})});case"number":return u.jsxs("div",{className:"drill-setting-group",children:[u.jsx("label",{className:"drill-setting-label",children:e.label}),u.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:n,onChange:l=>o(e.parse?e.parse(l.target.value):parseFloat(l.target.value)),className:"input",placeholder:e.placeholder,style:(c=e.hasError)!=null&&c.call(e,n)?{borderColor:"#ef4444"}:{}}),e.hint&&u.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(n,r):e.hint})]});case"number-buttons":return u.jsxs("div",{className:"drill-setting-group",children:[u.jsx("label",{className:"drill-setting-label",children:e.label}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("button",{onClick:()=>o(Math.max(e.min,n-e.step)),disabled:n<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:n<=e.min?.5:1,cursor:n<=e.min?"not-allowed":"pointer"},children:""}),u.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:n}),u.jsx("button",{onClick:()=>o(Math.min(e.max,n+e.step)),disabled:n>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:n>=e.max?.5:1,cursor:n>=e.max?"not-allowed":"pointer"},children:""})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[u.jsxs("span",{children:["Min: ",e.min]}),u.jsxs("span",{children:["Default: ",e.defaultValue]}),u.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return u.jsxs("div",{className:"drill-setting-group",children:[u.jsx("label",{className:"drill-setting-label",children:e.label}),u.jsx("input",{type:"text",value:n,onChange:l=>o(l.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return u.jsxs("div",{className:"drill-setting-group",children:[u.jsx("label",{className:"drill-setting-label",children:e.label}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsxs("select",{value:r[e.outerKey]||"",onChange:l=>{const d=l.target.value;o(e.outerKey,d),d&&parseInt(d)>1&&o(e.innerKey,"64")},className:"select",style:{flex:1},children:[u.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(l=>u.jsxs("option",{value:l,children:[l,"x"]},l))]}),u.jsxs("select",{value:r[e.innerKey]||"",onChange:l=>o(e.innerKey,l.target.value),className:"select",style:{flex:1},disabled:r[e.outerKey]&&parseInt(r[e.outerKey])>1,children:[u.jsx("option",{value:"",children:"Inner"}),r[e.outerKey]&&parseInt(r[e.outerKey])>1?u.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(l=>u.jsxs("option",{value:l,children:[l,"x"]},l))]}),u.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(r)]});case"info-box":return u.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[u.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),u.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(n,r)})]});default:return null}},zl=44,Md=8,Ch=20,hu=10,nC=20,rC=320,Ll=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,oC=(e,n,r=16)=>{const o=r*.61,s=e.length*o;return Math.ceil(s/n)},aC=z.memo(({data:e,id:n})=>{var Ot,wt,at,Pn,yt,Tn;const{recipe:r,machine:o,machineCount:s,displayMode:c,machineDisplayMode:l,onInputClick:d,onOutputClick:_,isTarget:f,onDrillSettingsChange:g,onLogicAssemblerSettingsChange:m,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:x,onTemperatureSettingsChange:w,onBoilerSettingsChange:k,onChemicalPlantSettingsChange:S,globalPollution:b,flows:E,isMobile:M,mobileActionMode:q,onMachineCountModeChange:R}=e,[C,j]=z.useState(null);if(!(r!=null&&r.inputs)||!(r!=null&&r.outputs)||!o)return null;const P=r.isMineshaftDrill||r.id==="r_mineshaft_drill",V=r.isLogicAssembler||r.id==="r_logic_assembler",X=r.isTreeFarm||r.id==="r_tree_farm",F=r.isWasteFacility||r.id==="r_underground_waste_facility",D=r.isLiquidDump||r.id==="r_liquid_dump",te=r.isLiquidBurner||r.id==="r_liquid_burner",T=P||V||X||F||D||te,Y=pM(o.id),W=_M(o.id),Z=ri[o.id],$=o.id==="m_industrial_firebox"&&r.id!=="r_industrial_firebox_07",H=o.id==="m_chemical_plant",J=un(o.id),L=J?En[o.id]:null;let G=r.cycle_time;const ce=G==="Variable"||typeof G!="number"||G<=0;if(ce&&!T?G="Variable":ce&&T&&(G=1),J&&(L==null?void 0:L.type)==="steam_input"&&typeof G=="number"&&!(o.id==="m_steam_cracking_plant"&&!uo(r))){const de=r.tempDependentInputTemp??Xn;G=Ir(o.id,de,G)}const ue={outputs:[]};if(Z){const de=Z.type==="boiler",Ge=(Ot=r.outputs)==null?void 0:Ot.some(ot=>["p_water","p_filtered_water","p_distilled_water"].includes(ot.product_id)),Ye=(wt=r.outputs)==null?void 0:wt.some(ot=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(ot.product_id)),Ct=(at=r.inputs)==null?void 0:at.some(ot=>["p_water","p_filtered_water","p_distilled_water"].includes(ot.product_id)),bt=r.id==="r_industrial_firebox_07",kt=o.id==="m_industrial_firebox";(!kt||kt&&!bt&&(Ct||Ge))&&((Pn=r.outputs)==null||Pn.forEach((ot,St)=>{if(Xy(ot.product_id)&&ot.temperature!=null){const jt=["p_water","p_filtered_water","p_distilled_water"].includes(ot.product_id),si=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(ot.product_id);de?si&&Ye&&ue.outputs.push({temp:ot.temperature,index:St}):(jt&&Ge||si&&Ye)&&ue.outputs.push({temp:ot.temperature,index:St})}}))}const pe=de=>{if(de==="Variable")return"Variable";if(typeof de!="number")return String(de);if(G==="Variable")return c==="perSecond"?"Variable":String(Ll(de));let Ge=c==="perSecond"?de/G:de;return l==="total"&&(Ge*=s||0),String(Ll(Ge))},ge=(de=>{if(de==="Variable"||typeof de!="number")return de;if(c==="perSecond")return"1s";if(de>=60){const Ge=Math.floor(de/60),Ye=de%60;return`${Ge}m ${Ll(Ye)}s`}return`${Ll(de)}s`})(G);let le=r.power_consumption,ve=r.pollution;l==="total"&&typeof s=="number"&&s>0&&(typeof r.power_consumption=="number"?le=r.power_consumption*s:typeof r.power_consumption=="object"&&r.power_consumption!==null&&r.power_consumption!=="Variable"&&("drilling"in r.power_consumption&&"idle"in r.power_consumption?le={drilling:typeof r.power_consumption.drilling=="number"?r.power_consumption.drilling*s:r.power_consumption.drilling,idle:typeof r.power_consumption.idle=="number"?r.power_consumption.idle*s:r.power_consumption.idle}:"max"in r.power_consumption&&"average"in r.power_consumption&&(le={max:typeof r.power_consumption.max=="number"?r.power_consumption.max*s:r.power_consumption.max,average:typeof r.power_consumption.average=="number"?r.power_consumption.average*s:r.power_consumption.average})),typeof r.pollution=="number"&&(ve=r.pollution*s));const we=uM(le),Oe=typeof we=="object"&&we!==null&&("drilling"in we&&"idle"in we||"max"in we&&"average"in we),Re=r.power_type==="HV"?" HV":"",Pe=r.inputs.length,We=r.outputs.length,Je=Math.max(Pe,We,1),Ke=Je>=5?8:24,st=de=>de!=null&&de.length?Math.max(80,...de.map(Ge=>{const Ye=na(Ge.product_id,Et);return pe(Ge.quantity).length*10+Ye.length*10+20})):80,Wt=Pe>0?st(r.inputs):0,It=We>0?st(r.outputs):0,Rt=Pe>0,Lt=We>0,Ut=Rt&&Lt?Wt+It+nC+hu*2:(Rt?Wt:It)+hu*2,mi=Math.max(Ut,rC),oi=mi-30-30,Xt=oC(r.name,oi,14),er=Xt>1?(Xt-1)*22:0,Ue=109+Ke*Math.ceil(Je/2)+er,Ci=Ue+Je*zl+(Je-1)*Md+Ch,Vt=de=>{if(de===0)return[];const Ge=de*zl+(de-1)*Md,Ye=Ci-Ue-Ch,Ct=Math.max((Ye-Ge)/2,0);return Array.from({length:de},(bt,kt)=>Ue+Ct+kt*(zl+Md))},dn=Vt(Pe),Ze=Vt(We),pn=de=>de.map(Ge=>(Ge+zl/2)/Ci*100),Fi=s??0,_n=Number.isInteger(Fi)?Fi.toString():Fi.toFixed(2),ai=e.machineCountMode||"free",jn=l==="total"?{color:"var(--text-muted)",opacity:.5}:{};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`custom-node ${f?"target":""}`,style:{width:mi,height:Ci},onMouseDownCapture:de=>{de.button===1&&(de.preventDefault(),de.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(n))},children:[ue.outputs.length>0&&u.jsx("div",{onDoubleClick:de=>de.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:ue.outputs.map((de,Ge)=>u.jsx("div",{children:pu(de.temp)},`output-${Ge}`))}),J&&(L==null?void 0:L.type)==="steam_input"&&uo(r)&&u.jsx("div",{onDoubleClick:de=>de.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:pu(r.tempDependentInputTemp??Xn)}),P&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("drill")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),V&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("assembler")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),X&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("treeFarm")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),$&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("firebox")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),H&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("chemicalPlant")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),F&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("wasteFacility")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),D&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("liquidDump")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),te&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("liquidBurner")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),Y&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("temperature")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),W&&u.jsx("button",{onClick:de=>{de.stopPropagation(),j("boiler")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),u.jsx("div",{className:"node-recipe-name",title:r.name,style:{paddingLeft:"30px",paddingRight:"30px"},children:r.name}),u.jsxs("div",{className:"node-stats-row",children:[u.jsxs("div",{className:"node-stats",children:[u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",ge]}),Oe?"drilling"in we?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",we.drilling,Re]}),u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",we.idle,Re]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",we.max,Re]}),u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",we.average,Re]})]}):u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Power:"})," ",we,Re]}),u.jsxs("div",{className:"node-stat-row",children:[u.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",cM(ve)]})]}),u.jsxs("div",{className:"node-machine-info",children:[u.jsx("div",{className:"node-machine-name",title:o.name,style:{color:o.tier===1?"var(--tier-1-color)":o.tier===2?"var(--tier-2-color)":o.tier===3?"var(--tier-3-color)":o.tier===4?"var(--tier-4-color)":(o.tier===5,"var(--tier-5-color)")},children:o.name}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx("div",{className:"node-machine-count",style:jn,title:l==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:_n}),ai!=="free"&&u.jsx("button",{onClick:de=>{de.stopPropagation(),R&&R(n,ai,s)},onDoubleClick:de=>de.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:de=>de.currentTarget.style.opacity="1",onMouseLeave:de=>de.currentTarget.style.opacity="0.8",title:ai==="locked"?`Locked: LP/suggestions cannot change (cap: ${((yt=e.cappedMachineCount)==null?void 0:yt.toFixed(2))||s.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((Tn=e.cappedMachineCount)==null?void 0:Tn.toFixed(2))||s.toFixed(2)}
Click to lock`,children:ai==="locked"?"":""})]})]})]}),dn.map((de,Ge)=>{const Ye=r.inputs[Ge];return Ye?u.jsxs(Xl.Fragment,{children:[u.jsx(qh,{side:"left",index:Ge,position:de,width:Wt,isOnly:!Lt,input:Ye,onClick:d,nodeId:n,formatQuantity:pe,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode}),u.jsx(Eh,{side:"left",index:Ge,position:pn(dn)[Ge],onClick:d,nodeId:n,productId:Ye.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:Ye,data:e})]},`left-${n}-${Ge}-${Ye.product_id}`):null}),Ze.map((de,Ge)=>{const Ye=r.outputs[Ge];return Ye?u.jsxs(Xl.Fragment,{children:[u.jsx(qh,{side:"right",index:Ge,position:de,width:It,isOnly:!Rt,input:Ye,onClick:_,nodeId:n,formatQuantity:pe,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode}),u.jsx(Eh,{side:"right",index:Ge,position:pn(Ze)[Ge],onClick:_,nodeId:n,productId:Ye.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:Ye,data:e})]},`right-${n}-${Ge}-${Ye.product_id}`):null})]}),C&&u.jsx(tC,{recipeType:C,nodeId:n,currentSettings:C==="drill"?r.drillSettings:C==="assembler"?r.assemblerSettings:C==="treeFarm"?r.treeFarmSettings:C==="firebox"?r.fireboxSettings:C==="temperature"||C==="boiler"?r.temperatureSettings:C==="chemicalPlant"?r.chemicalPlantSettings:C==="wasteFacility"?r.wasteFacilitySettings:C==="liquidDump"?r.liquidDumpSettings:C==="liquidBurner"?r.liquidBurnerSettings:{},recipe:r,globalPollution:b||0,onSettingsChange:C==="drill"?g:C==="assembler"?m:C==="treeFarm"?h:C==="firebox"?x:C==="temperature"?w:C==="boiler"?k:C==="chemicalPlant"?S:C==="wasteFacility"?e.onWasteFacilitySettingsChange:C==="liquidDump"?e.onLiquidDumpSettingsChange:C==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>j(null)})]})},(e,n)=>{if(e.id!==n.id)return!1;const r=e.data,o=n.data;return!(r.machineCount!==o.machineCount||r.displayMode!==o.displayMode||r.machineDisplayMode!==o.machineDisplayMode||r.isTarget!==o.isTarget||r.globalPollution!==o.globalPollution||r.machineCountMode!==o.machineCountMode||r.cappedMachineCount!==o.cappedMachineCount||r.recipe!==o.recipe||r.flows!==o.flows||r.suggestions!==o.suggestions)}),qh=({side:e,index:n,position:r,width:o,isOnly:s,input:c,onClick:l,nodeId:d,formatQuantity:_,isMobile:f,mobileActionMode:g})=>{const m=e==="left",h=na(c.product_id,Et,c.acceptedType),x=_(c.quantity),w=!f||g==="pan";return u.jsxs("div",{onClick:k=>{l&&w&&(k.stopPropagation(),l(c.product_id,d,n,k))},title:`${x}x ${h}`,className:`node-rect ${m?"input":"output"} ${l?"clickable":""}`,style:{left:s?"50%":m?`${hu}px`:void 0,right:!s&&!m?`${hu}px`:void 0,transform:s?"translateX(-50%)":void 0,top:`${r}px`,width:`${o}px`},children:[x,"x ",h]})},Eh=({side:e,index:n,position:r,onClick:o,nodeId:s,productId:c,flows:l,onHandleDoubleClick:d,suggestions:_,input:f,data:g})=>{var R,C;const h=getComputedStyle(document.documentElement),x=h.getPropertyValue("--handle-input-supplied").trim(),w=h.getPropertyValue("--handle-input-deficient").trim(),k=h.getPropertyValue("--handle-output-connected").trim(),S=h.getPropertyValue("--handle-output-excess").trim();let b=e==="left"?x:k;if(l){const j=e==="left"?(R=l.inputFlows)==null?void 0:R[n]:(C=l.outputFlows)==null?void 0:C[n];if(j){const P=e==="left"?j.needed-j.connected:j.produced-j.connected;Math.abs(P)>1e-6&&P>0&&(b=e==="left"?w:S)}}const E=Et(c),q=(E==null?void 0:E.type)==="fluid"||c==="p_any_fluid"?"50%":"2px";return g==null||g.isMobile,u.jsx(ds,{type:e==="left"?"target":"source",position:e==="left"?De.Left:De.Right,id:`${e}-${n}`,style:{background:b,width:"12px",height:"12px",border:"2px solid #1a1a1a",top:`${r}%`,borderRadius:q,cursor:"pointer"},onClick:j=>{o&&j.ctrlKey&&(j.stopPropagation(),o(c,s,n,j))},onDoubleClick:j=>{d&&(j.stopPropagation(),d(s,e,n,c,_))}})},sC=(e,n,r,o,s,c)=>{if(r>e){const f=(e+r)/2;return[`M ${e},${n} L ${f},${n} L ${f},${o} L ${r},${o}`,f,(n+o)/2]}else{const f=e+40,g=r-40,m=(n+o)/2+((n+o)/2<300?20:-20);return[`M ${e},${n} L ${f},${n} L ${f},${m} L ${g},${m} L ${g},${o} L ${r},${o}`,(f+g)/2,m]}},lC=({id:e,sourceX:n,sourceY:r,targetX:o,targetY:s,sourcePosition:c,targetPosition:l,data:d})=>{const _=(d==null?void 0:d.edgePath)||"orthogonal",f=(d==null?void 0:d.edgeStyle)||"animated",[g]=z.useMemo(()=>_==="straight"?Np({sourceX:n,sourceY:r,targetX:o,targetY:s}):_==="orthogonal"?sC(n,r,o,s):Ip({sourceX:n,sourceY:r,sourcePosition:c,targetX:o,targetY:s,targetPosition:l}),[n,r,o,s,c,l,_]),m=f==="animated"?"custom-edge custom-edge-animated":f==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return u.jsx("path",{id:e,className:m,d:g,fill:"none"})},Ko={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},uC=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:Ko},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],yu=e=>{const n=document.documentElement;Object.entries(e).forEach(([r,o])=>{const s="--"+r.replace(/([A-Z])/g,"-$1").toLowerCase();n.style.setProperty(s,o)})},Yl=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):Ko}catch{return Ko}},_p=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),cC=()=>(yu(Ko),_p(Ko),Ko),dC=({onClose:e})=>{const[n,r]=z.useState(Yl()),[o,s]=z.useState(!1),c=m=>{const h={edgePath:n.edgePath||"orthogonal",edgeStyle:n.edgeStyle||"animated"},x={...m.theme,...h};r(x),yu(x),_p(x)},l=(m,h)=>{const x={...n,[m]:h};r(x),yu(x),_p(x)},d=()=>{const m=cC();r(m)},_=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],f=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],g=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),style:{width:o?"700px":"600px",maxHeight:"85vh"},children:[u.jsx("h2",{className:"modal-title",children:"Theme Editor"}),o?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>s(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),u.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[u.jsxs("div",{className:"theme-group",children:[u.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsxs("div",{children:[u.jsx("label",{className:"theme-color-label",children:"Path Type:"}),u.jsx("select",{value:n.edgePath||"bezier",onChange:m=>l("edgePath",m.target.value),className:"select",style:{marginTop:"6px"},children:f.map(m=>u.jsx("option",{value:m.value,children:m.label},m.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"theme-color-label",children:"Line Style:"}),u.jsx("select",{value:n.edgeStyle||"animated",onChange:m=>l("edgeStyle",m.target.value),className:"select",style:{marginTop:"6px"},children:g.map(m=>u.jsx("option",{value:m.value,children:m.label},m.value))})]})]})]}),_.map(m=>u.jsxs("div",{className:"theme-group",children:[u.jsx("h3",{className:"theme-group-title",children:m.title}),u.jsx("div",{className:"theme-color-grid",children:m.colors.map(h=>{const x=n[h.key]||"#000000",w=x.length>7?x.substring(0,7):x;return u.jsxs("div",{className:"theme-color-item",children:[u.jsx("label",{className:"theme-color-label",children:h.label}),u.jsxs("div",{className:"theme-color-inputs",children:[u.jsx("input",{type:"color",value:w,onChange:k=>{const S=n[h.key];if(S&&S.length>7){const b=S.substring(7);l(h.key,k.target.value+b)}else l(h.key,k.target.value)},className:"theme-color-picker"}),u.jsx("input",{type:"text",value:n[h.key],onChange:k=>l(h.key,k.target.value),className:"input theme-color-text"})]})]},h.key)})})]},m.title))]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[u.jsx("button",{onClick:d,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),u.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[u.jsx("div",{style:{marginBottom:"20px"},children:u.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:uC.map(m=>u.jsx("div",{onClick:()=>c(m),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:m.name}),u.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:m.description})]}),u.jsx("div",{style:{display:"flex",gap:"6px"},children:[m.theme.colorPrimary,m.theme.bgMain,m.theme.inputBorder,m.theme.outputBorder].map((h,x)=>u.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},x))})]})},m.id))})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[u.jsx("button",{onClick:()=>s(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),u.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},pC=({onClose:e})=>u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal",onClick:n=>n.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[u.jsx("h2",{className:"modal-title",children:"Help & Controls"}),u.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[u.jsxs("div",{style:{marginBottom:"30px"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),u.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),u.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),u.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),u.jsxs("div",{style:{marginBottom:"30px"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",u.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),u.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[u.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)"},children:[u.jsx("div",{children:"Cycle: 4s"}),u.jsx("div",{children:"Power: 150kW"}),u.jsx("div",{children:"Pollution: 0%/hr"})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),u.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),u.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),u.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),u.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[u.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),u.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),u.jsx("div",{style:{minWidth:"250px"},children:u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),u.jsxs("div",{style:{marginTop:"20px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[u.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),u.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[u.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),u.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[u.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),u.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[u.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),u.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),u.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[u.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),u.jsxs("div",{style:{marginTop:"25px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[u.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[u.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",u.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[u.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),u.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),u.jsxs("div",{style:{marginBottom:"30px"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:["Use ",u.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",u.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:[u.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsxs("span",{children:["Use ",u.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),u.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),u.jsxs("div",{style:{paddingLeft:"15px"},children:[u.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),u.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.textDecoration="underline"},onMouseLeave:n=>{n.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),u.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.textDecoration="underline"},onMouseLeave:n=>{n.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),u.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.textDecoration="underline"},onMouseLeave:n=>{n.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),u.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.textDecoration="underline"},onMouseLeave:n=>{n.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),u.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),Tu="industrialist_saves",ra="industrialist_current_save_id",oa=()=>{try{const e=localStorage.getItem(Tu);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading saves:",e),{}}},_C=(e,n)=>{var r;try{const o=oa(),s=`save_${Date.now()}`,c={id:s,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((r=n.nodes)==null?void 0:r.length)||0,data:n};return o[s]=c,localStorage.setItem(Tu,JSON.stringify(o)),localStorage.setItem(ra,s),c}catch(o){return console.error("Error saving canvas:",o),null}},mC=e=>{try{const r=oa()[e];return r?(localStorage.setItem(ra,e),r.data):null}catch(n){return console.error("Error loading save:",n),null}},fC=e=>{try{const n=oa();return delete n[e],localStorage.setItem(Tu,JSON.stringify(n)),localStorage.getItem(ra)===e&&localStorage.removeItem(ra),!0}catch(n){return console.error("Error deleting save:",n),!1}},hC=(e,n)=>{try{const r=oa();return r[e]?(r[e].name=n,localStorage.setItem(Tu,JSON.stringify(r)),!0):!1}catch(r){return console.error("Error renaming save:",r),!1}},yC=()=>{var e;try{const n=localStorage.getItem(ra);return n&&((e=oa()[n])==null?void 0:e.name)||"Untitled"}catch{return"Untitled"}},gC=({onClose:e,onLoad:n,currentCanvas:r,onImport:o,onExportCanvas:s})=>{const[c,l]=z.useState({}),[d,_]=z.useState(""),[f,g]=z.useState(null),[m,h]=z.useState(""),[x,w]=z.useState(null);z.useEffect(()=>{k()},[]);const k=()=>{const P=oa();l(P);const V=localStorage.getItem(ra);w(V)},S=()=>{if(!d.trim()){alert("Please enter a name for your save");return}const P=_C(d.trim(),r);P?(_(""),k(),alert(`Canvas saved as "${P.name}"`)):alert("Failed to save canvas")},b=P=>{if(!window.confirm("Load this save? Your current canvas will be replaced."))return;const V=mC(P);V?(w(P),n(V),e()):alert("Failed to load save")},E=P=>{const V=c[P];window.confirm(`Delete save "${V.name}"? This cannot be undone.`)&&(fC(P)?k():alert("Failed to delete save"))},M=P=>{g(P),h(c[P].name)},q=P=>{if(!m.trim()){alert("Name cannot be empty");return}hC(P,m.trim())?(k(),g(null),h("")):alert("Failed to rename save")},R=()=>{g(null),h("")},C=P=>new Date(P).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),j=Object.values(c).sort((P,V)=>V.timestamp-P.timestamp);return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[u.jsx("h2",{className:"modal-title",children:"Save Manager"}),u.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",u.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:yC()})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[u.jsx("input",{type:"text",value:d,onChange:P=>_(P.target.value),onKeyPress:P=>P.key==="Enter"&&S(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),u.jsx("button",{onClick:S,className:"btn btn-primary",style:{minWidth:"120px"},children:"Save Current"})]}),u.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>{o&&o()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),u.jsx("button",{onClick:()=>{s&&s()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),u.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[u.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",j.length,")"]}),j.length===0?u.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:j.map(P=>u.jsxs("div",{style:{padding:"15px",background:x===P.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:x===P.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[f===P.id?u.jsx("div",{style:{marginBottom:"10px"},children:u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("input",{type:"text",value:m,onChange:V=>h(V.target.value),onKeyPress:V=>{V.key==="Enter"&&q(P.id),V.key==="Escape"&&R()},className:"input",style:{flex:1},autoFocus:!0}),u.jsx("button",{onClick:()=>q(P.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),u.jsx("button",{onClick:R,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[P.name,x===P.id&&u.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[C(P.timestamp),"  ",P.nodeCount," nodes"]})]})}),f!==P.id&&u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>b(P.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),u.jsx("button",{onClick:()=>M(P.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),u.jsx("button",{onClick:()=>E(P.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},P.id))})]}),u.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},xC=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],vC=({recipe:e,onClose:n,onSave:r,availableProducts:o,defaultMachines:s,allRecipes:c=[],isCreatingNew:l=!1})=>{var C,j,P;const d=!l&&xC.includes(e.id),_=!l&&(((C=e.inputs)==null?void 0:C.some(V=>V.product_id==="p_variableproduct"))||((j=e.outputs)==null?void 0:j.some(V=>V.product_id==="p_variableproduct"))),[f,g]=z.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),m=(V,X)=>{g(F=>({...F,[V]:X}))},h=(V,X,F)=>{const D=[...f.inputs];D[V]={...D[V],[X]:F},g(te=>({...te,inputs:D}))},x=(V,X,F)=>{const D=[...f.outputs];D[V]={...D[V],[X]:F},g(te=>({...te,outputs:D}))},w=()=>{const V=[...f.inputs,{product_id:"",quantity:1}];g(X=>({...X,inputs:V}))},k=V=>{const X=f.inputs.filter((F,D)=>D!==V);g(F=>({...F,inputs:X}))},S=()=>{const V=[...f.outputs,{product_id:"",quantity:1}];g(X=>({...X,outputs:V}))},b=V=>{const X=f.outputs.filter((F,D)=>D!==V);g(F=>({...F,outputs:X}))},E=V=>{const F=`r_${V.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,D=c.filter(T=>T.id.startsWith(F)).map(T=>{const Y=T.id.match(/_(\d+)$/);return Y?parseInt(Y[1]):0});let te=1;for(;D.includes(te);)te++;return`${F}${String(te).padStart(2,"0")}`},M=()=>{if(l){if(!f.name||!f.name.trim())return alert("Recipe name is required"),!1;if(!f.machine_id)return alert("Machine is required"),!1;if(!s.find(Y=>Y.id===f.machine_id))return alert("Selected machine does not exist"),!1}const X=[...f.inputs.map(T=>T.product_id),...f.outputs.map(T=>T.product_id)].filter(T=>T&&T!=="p_variableproduct"&&T!=="p_any_fluid"&&T!=="p_any_item"&&!o.find(Y=>Y.id===T));if(X.length>0)return alert(`Invalid product IDs: ${X.join(", ")}`),!1;const F=f.inputs.some(T=>!T.product_id),D=f.outputs.some(T=>!T.product_id);return F||D?(alert("All inputs and outputs must have a product selected"),!1):typeof f.cycle_time=="number"&&f.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((f.inputs.some(T=>T.quantity==="Variable")||f.outputs.some(T=>T.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},q=()=>{if(!M())return;let V={...f};if(l){const X=s.find(F=>F.id===f.machine_id);V.id=E(X.name)}r(V),n()},R=s.find(V=>V.id===e.machine_id);return d||_?u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),style:{width:"600px"},children:[u.jsx("h2",{className:"modal-title",children:d?"Special Recipe":"Variable Product Recipe"}),u.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:d?u.jsxs(u.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",u.jsx("br",{}),u.jsx("br",{}),"Special recipes include:",u.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[u.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),u.jsx("li",{children:"Logic Assembler (microchip stages)"}),u.jsx("li",{children:"Tree Farm (layout configuration)"}),u.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),u.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):u.jsx(u.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),u.jsx("button",{onClick:n,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[u.jsx("h2",{className:"modal-title",children:l?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),l&&u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),u.jsx("input",{type:"text",value:f.name,onChange:V=>m("name",V.target.value),placeholder:"Enter recipe name",className:"input"})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",l?"*":""]}),l?u.jsxs("select",{value:f.machine_id,onChange:V=>m("machine_id",V.target.value),className:"select",children:[u.jsx("option",{value:"",children:"Select a machine"}),s.sort((V,X)=>V.name.localeCompare(X.name)).map(V=>u.jsxs("option",{value:V.id,children:[V.name," (Tier ",V.tier||1,")"]},V.id))]}):u.jsx("div",{style:{color:(R==null?void 0:R.tier)===1?"var(--tier-1-color)":(R==null?void 0:R.tier)===2?"var(--tier-2-color)":(R==null?void 0:R.tier)===3?"var(--tier-3-color)":(R==null?void 0:R.tier)===4?"var(--tier-4-color)":(R==null?void 0:R.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(R==null?void 0:R.name)||e.machine_id}),l&&f.machine_id&&u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",E(((P=s.find(V=>V.id===f.machine_id))==null?void 0:P.name)||"")]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),u.jsx("input",{type:"number",step:"0.1",min:"0",value:f.cycle_time==="Variable"?"":f.cycle_time,onChange:V=>m("cycle_time",parseFloat(V.target.value)),placeholder:f.cycle_time==="Variable"?"Variable":"",className:"input",disabled:f.cycle_time==="Variable",title:f.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),u.jsx("input",{type:"number",step:"1000",value:typeof f.power_consumption=="number"?f.power_consumption:"",onChange:V=>m("power_consumption",parseFloat(V.target.value)),placeholder:"Variable",className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),u.jsxs("select",{value:f.power_type||"MV",onChange:V=>m("power_type",V.target.value),className:"select",children:[u.jsx("option",{value:"LV",children:"LV"}),u.jsx("option",{value:"MV",children:"MV"}),u.jsx("option",{value:"HV",children:"HV"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),u.jsx("input",{type:"number",step:"0.1",value:f.pollution,onChange:V=>m("pollution",parseFloat(V.target.value)),className:"input"})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[u.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),u.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),f.inputs.map((V,X)=>u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[u.jsxs("select",{value:V.product_id,onChange:F=>h(X,"product_id",F.target.value),className:"select",style:{flex:2},children:[u.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>u.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),u.jsx("input",{type:"number",step:"0.1",min:"0",value:V.quantity==="Variable"?"":V.quantity,onChange:F=>h(X,"quantity",parseFloat(F.target.value)),placeholder:V.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:V.quantity==="Variable",title:V.quantity==="Variable"?"Cannot edit Variable quantities":""}),u.jsx("button",{onClick:()=>k(X),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},X)),f.inputs.length===0&&u.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[u.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),u.jsx("button",{onClick:S,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),f.outputs.map((V,X)=>u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[u.jsxs("select",{value:V.product_id,onChange:F=>x(X,"product_id",F.target.value),className:"select",style:{flex:2},children:[u.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>u.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),u.jsx("input",{type:"number",step:"0.1",min:"0",value:V.quantity==="Variable"?"":V.quantity,onChange:F=>x(X,"quantity",parseFloat(F.target.value)),placeholder:V.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:V.quantity==="Variable",title:V.quantity==="Variable"?"Cannot edit Variable quantities":""}),u.jsx("button",{onClick:()=>b(X),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},X)),f.outputs.length===0&&u.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:n,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),u.jsx("button",{onClick:q,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},gu="industrialist_custom_products",xu="industrialist_custom_machines",vu="industrialist_custom_recipes",wC=(e,n,r)=>{localStorage.getItem(gu)||localStorage.setItem(gu,JSON.stringify(e)),localStorage.getItem(xu)||localStorage.setItem(xu,JSON.stringify(n)),localStorage.getItem(vu)||localStorage.setItem(vu,JSON.stringify(r))},aa=()=>{try{const e=localStorage.getItem(gu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},sa=()=>{try{const e=localStorage.getItem(xu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},Ms=()=>{try{const e=localStorage.getItem(vu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},_s=e=>{try{return localStorage.setItem(gu,JSON.stringify(e)),!0}catch(n){return console.error("Error saving custom products:",n),!1}},ms=e=>{try{return localStorage.setItem(xu,JSON.stringify(e)),!0}catch(n){return console.error("Error saving custom machines:",n),!1}},fs=e=>{try{return localStorage.setItem(vu,JSON.stringify(e)),!0}catch(n){return console.error("Error saving custom recipes:",n),!1}},Ih=(e,n)=>{const r=aa(),o=r.findIndex(s=>s.id===e);return o>=0?(r[o]={...r[o],...n},_s(r)):!1},Nh=(e,n)=>{const r=sa(),o=r.findIndex(s=>s.id===e);return o>=0?(r[o]={...r[o],...n},ms(r)):!1},bC=(e,n)=>{const r=Ms(),o=r.findIndex(s=>s.id===e);return o>=0?(r[o]={...r[o],...n},fs(r)):!1},kC=e=>_s(e),SC=e=>ms(e),MC=e=>fs(e),CC=(e,n,r)=>{const o={};return e&&(o.products=aa()),n&&(o.machines=sa()),r&&(o.recipes=Ms()),o},qC=e=>{const n={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const r=aa(),o=new Map(r.map(c=>[c.id,c]));e.products.forEach(c=>{o.set(c.id,c)});const s=Array.from(o.values());_s(s)&&(n.products=e.products.length)}if(e.machines){const r=sa(),o=new Map(r.map(c=>[c.id,c]));e.machines.forEach(c=>{o.set(c.id,c)});const s=Array.from(o.values());ms(s)&&(n.machines=e.machines.length)}if(e.recipes){const r=Ms(),o=new Map(r.map(c=>[c.id,c]));e.recipes.forEach(c=>{o.set(c.id,c)});const s=Array.from(o.values());fs(s)&&(n.recipes=e.recipes.length)}}catch(r){n.errors.push(r.message)}return n},Dl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,Si=e=>typeof e!="number"?e:e>=1e9?Dl(e/1e9)+"B":e>=1e6?Dl(e/1e6)+"M":e>=1e3?Dl(e/1e3)+"k":Dl(e),EC=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,IC=e=>{const n=["p_coal","p_coke_fuel","p_planks","p_oak_log"],r=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return on.filter(s=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(s.id))return!1;const c=["r_liquid_dump","r_liquid_burner"].includes(s.id),l=s.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(c||s.id==="r_underground_waste_facility"&&!l)return!1;const d=s.inputs.some(f=>f.product_id===e&&f.product_id!=="p_variableproduct"),_=n.includes(e)&&r.includes(s.id)&&s.inputs.some(f=>f.product_id==="p_variableproduct");return d||_||l})},NC=e=>on.filter(n=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(n.id)&&n.outputs.some(r=>r.product_id===e&&r.product_id!=="p_variableproduct")),Ol=e=>{const n=on.filter(r=>r.machine_id===e);return e==="m_underground_waste_facility"?[sp]:e==="m_liquid_dump"?[cp]:e==="m_liquid_burner"?[pp]:n},hg=(e,n,r,o,s=Pi)=>{const c=(o==null?void 0:o.minSteamTemp)||100;return e.map(l=>{if(r){if(l.product_id==="p_steam"){const d=Math.max(n,s),_=l.originalQuantity!==void 0?l.originalQuantity:l.quantity;return d<c?{...l,temperature:d,quantity:0,originalQuantity:_}:{...l,temperature:d,quantity:_,originalQuantity:_}}return l}if(Xy(l.product_id)){const d=Math.max(n,s);return{...l,temperature:d}}return l})},Ga=(e,n)=>{let r={...e};const o=ri[n];if(o){const c=mM(n),l=o.type==="boiler",d=l?qr:Pi,_=l?{...c,coolantTemp:qr}:c;let f=null;if(o.type==="product_dependent"&&e.inputs){const h=e.inputs.find(x=>["p_water","p_filtered_water","p_distilled_water"].includes(x.product_id));f=(h==null?void 0:h.product_id)||null}const g=Op(n,_,d,f,l?qr:null),m=hg(e.outputs,g,l,o,d);r={...r,outputs:m,temperatureSettings:_}}if(un(n)){const c=En[n];(c==null?void 0:c.type)==="steam_input"&&(r={...r,tempDependentInputTemp:Xn})}return r},jC=({onClose:e,defaultProducts:n,defaultMachines:r,defaultRecipes:o,onDataChange:s})=>{const[c,l]=z.useState("products"),[d,_]=z.useState(""),[f,g]=z.useState(!0),[m,h]=z.useState(!0),[x,w]=z.useState(!0),k=z.useRef(null),S=()=>{const M=CC(f,m,x),q=new Blob([JSON.stringify(M,null,2)],{type:"application/json"}),R=URL.createObjectURL(q),C=document.createElement("a");C.href=R,C.download=`industrialist-data-${Date.now()}.json`,C.click(),URL.revokeObjectURL(R)},b=()=>{var M;(M=k.current)==null||M.click()},E=M=>{var C;const q=(C=M.target.files)==null?void 0:C[0];if(!q)return;const R=new FileReader;R.onload=j=>{try{const P=JSON.parse(j.target.result),V=P.products||P.machines||P.recipes,X=P.canvas;if(!V&&X){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),M.target.value="";return}if(!V){alert("This file does not contain any game data (products, machines, or recipes)."),M.target.value="";return}if(X&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){M.target.value="";return}const F=qC(P);let D=`Import complete:
`;F.products>0&&(D+=`- ${F.products} products imported/updated
`),F.machines>0&&(D+=`- ${F.machines} machines imported/updated
`),F.recipes>0&&(D+=`- ${F.recipes} recipes imported/updated
`),F.errors.length>0&&(D+=`
Errors: ${F.errors.join(", ")}`),alert(D),s()}catch(P){alert(`Import failed: ${P.message}`)}},R.readAsText(q),M.target.value=""};return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[u.jsx("h2",{className:"modal-title",children:"Data Manager"}),u.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[u.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),u.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[u.jsx("input",{type:"checkbox",checked:f,onChange:M=>g(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[u.jsx("input",{type:"checkbox",checked:m,onChange:M=>h(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[u.jsx("input",{type:"checkbox",checked:x,onChange:M=>w(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),u.jsx("button",{onClick:S,className:"btn btn-primary",children:"Export Data"})]})]}),u.jsx("input",{ref:k,type:"file",accept:".json",style:{display:"none"},onChange:E})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[u.jsx("button",{onClick:()=>l("products"),className:`btn ${c==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),u.jsx("button",{onClick:()=>l("machines"),className:`btn ${c==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),u.jsx("button",{onClick:()=>l("recipes"),className:`btn ${c==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),u.jsx("div",{style:{marginBottom:"15px"},children:u.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:d,onChange:M=>_(M.target.value),className:"input"})}),u.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[c==="products"&&u.jsx(PC,{searchTerm:d,defaultProducts:n,onDataChange:s}),c==="machines"&&u.jsx(TC,{searchTerm:d,defaultMachines:r,onDataChange:s}),c==="recipes"&&u.jsx(RC,{searchTerm:d,defaultRecipes:o,defaultMachines:r,defaultProducts:n,onDataChange:s})]}),u.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},PC=({searchTerm:e,defaultProducts:n,onDataChange:r})=>{const[o,s]=z.useState([]),[c,l]=z.useState(null),[d,_]=z.useState({}),[f,g]=z.useState(!1),[m,h]=z.useState({name:"",type:"item",price:0,rp_multiplier:1});z.useEffect(()=>{x()},[]);const x=()=>{s(aa())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,j)=>C.name.localeCompare(j.name)),k=C=>{l(C.id),_({price:C.price==="Variable"?"":C.price,rp_multiplier:C.rp_multiplier==="Variable"?"":C.rp_multiplier,type:C.type})},S=C=>{const j={price:d.price===""?"Variable":parseFloat(d.price),rp_multiplier:d.rp_multiplier===""?"Variable":parseFloat(d.rp_multiplier),type:d.type};Ih(C,j)?(x(),r(),l(null)):alert("Failed to update product")},b=()=>{l(null),_({})},E=C=>{const j=n.find(V=>V.id===C);if(!j){alert("Default product not found");return}const P={price:j.price,rp_multiplier:j.rp_multiplier,type:j.type};Ih(C,P)?(x(),r()):alert("Failed to reset product to default")},M=C=>"p_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),q=()=>{if(!m.name.trim()){alert("Product name is required");return}const C=M(m.name);if(o.find(V=>V.id===C)){alert(`Product ID "${C}" already exists. Please use a different name.`);return}const j={id:C,name:m.name.trim(),type:m.type,price:parseFloat(m.price)||0,rp_multiplier:parseFloat(m.rp_multiplier)||1},P=[...o,j];_s(P)?(x(),r(),g(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},R=C=>{var P;if(!window.confirm(`Delete product "${(P=o.find(V=>V.id===C))==null?void 0:P.name}"? This cannot be undone.`))return;const j=o.filter(V=>V.id!==C);_s(j)?(x(),r()):alert("Failed to delete product")};return u.jsxs("div",{children:[u.jsx("div",{style:{marginBottom:"15px"},children:u.jsx("button",{onClick:()=>g(!f),className:"btn btn-primary",style:{width:"100%"},children:f?"Cancel":"+ Add New Product"})}),f&&u.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),u.jsx("input",{type:"text",value:m.name,onChange:C=>h({...m,name:C.target.value}),className:"input",placeholder:"Product name"}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",m.name?M(m.name):"p_..."]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),u.jsxs("select",{value:m.type,onChange:C=>h({...m,type:C.target.value}),className:"select",children:[u.jsx("option",{value:"item",children:"Item"}),u.jsx("option",{value:"fluid",children:"Fluid"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),u.jsx("input",{type:"number",value:m.price,onChange:C=>h({...m,price:C.target.value}),className:"input",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),u.jsx("input",{type:"number",step:"0.1",value:m.rp_multiplier,onChange:C=>h({...m,rp_multiplier:C.target.value}),className:"input",placeholder:"1"})]})]}),u.jsx("button",{onClick:q,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[u.jsx("div",{children:"Product Name"}),u.jsx("div",{children:"Type"}),u.jsx("div",{children:"Price"}),u.jsx("div",{children:"RP Mult"}),u.jsx("div",{children:"Actions"})]}),w.map(C=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),c===C.id?u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:d.type,onChange:j=>_({...d,type:j.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[u.jsx("option",{value:"item",children:"Item"}),u.jsx("option",{value:"fluid",children:"Fluid"})]}),u.jsx("input",{type:"number",value:d.price,onChange:j=>_({...d,price:j.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.price==="Variable",title:C.price==="Variable"?"Cannot edit Variable values":""}),u.jsx("input",{type:"number",value:d.rp_multiplier,onChange:j=>_({...d,rp_multiplier:j.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.rp_multiplier==="Variable",title:C.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:()=>S(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),u.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"var(--text-secondary)"},children:C.type}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:C.price==="Variable"?"Variable":`$${Si(C.price)}`}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:C.rp_multiplier==="Variable"?"Variable":`${C.rp_multiplier>=1e3?Si(C.rp_multiplier):C.rp_multiplier}x`}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),u.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),u.jsx("button",{onClick:()=>R(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},TC=({searchTerm:e,defaultMachines:n,onDataChange:r})=>{const[o,s]=z.useState([]),[c,l]=z.useState(null),[d,_]=z.useState({}),[f,g]=z.useState(!1),[m,h]=z.useState({name:"",cost:0,tier:1});z.useEffect(()=>{x()},[]);const x=()=>{s(sa())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,j)=>C.name.localeCompare(j.name)),k=C=>{l(C.id),_({cost:C.cost,tier:C.tier||1})},S=C=>{const j={cost:parseFloat(d.cost),tier:parseInt(d.tier)};Nh(C,j)?(x(),r(),l(null)):alert("Failed to update machine")},b=()=>{l(null),_({})},E=C=>{const j=n.find(V=>V.id===C);if(!j){alert("Default machine not found");return}const P={cost:j.cost,tier:j.tier};Nh(C,P)?(x(),r()):alert("Failed to reset machine to default")},M=C=>"m_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),q=()=>{if(!m.name.trim()){alert("Machine name is required");return}const C=M(m.name);if(o.find(V=>V.id===C)){alert(`Machine ID "${C}" already exists. Please use a different name.`);return}const j={id:C,name:m.name.trim(),cost:parseFloat(m.cost)||0,tier:parseInt(m.tier)||1},P=[...o,j];ms(P)?(x(),r(),g(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},R=C=>{var P;if(!window.confirm(`Delete machine "${(P=o.find(V=>V.id===C))==null?void 0:P.name}"? This cannot be undone.`))return;const j=o.filter(V=>V.id!==C);ms(j)?(x(),r()):alert("Failed to delete machine")};return u.jsxs("div",{children:[u.jsx("div",{style:{marginBottom:"15px"},children:u.jsx("button",{onClick:()=>g(!f),className:"btn btn-primary",style:{width:"100%"},children:f?"Cancel":"+ Add New Machine"})}),f&&u.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[u.jsxs("div",{style:{gridColumn:"1 / -1"},children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),u.jsx("input",{type:"text",value:m.name,onChange:C=>h({...m,name:C.target.value}),className:"input",placeholder:"Machine name"}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",m.name?M(m.name):"m_..."]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),u.jsx("input",{type:"number",value:m.cost,onChange:C=>h({...m,cost:C.target.value}),className:"input",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),u.jsxs("select",{value:m.tier,onChange:C=>h({...m,tier:C.target.value}),className:"select",children:[u.jsx("option",{value:"1",children:"Tier 1"}),u.jsx("option",{value:"2",children:"Tier 2"}),u.jsx("option",{value:"3",children:"Tier 3"}),u.jsx("option",{value:"4",children:"Tier 4"}),u.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),u.jsx("button",{onClick:q,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[u.jsx("div",{children:"Machine Name"}),u.jsx("div",{children:"Cost"}),u.jsx("div",{children:"Tier"}),u.jsx("div",{children:"Actions"})]}),w.map(C=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),c===C.id?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"number",value:d.cost,onChange:j=>_({...d,cost:j.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),u.jsx("input",{type:"number",min:"1",max:"5",value:d.tier,onChange:j=>_({...d,tier:j.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:()=>S(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),u.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",Si(C.cost)]}),u.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",C.tier||1]}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),u.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),u.jsx("button",{onClick:()=>R(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},RC=({searchTerm:e,defaultRecipes:n,defaultMachines:r,defaultProducts:o,onDataChange:s})=>{const[c,l]=z.useState([]),[d,_]=z.useState([]),[f,g]=z.useState([]),[m,h]=z.useState(null),[x,w]=z.useState(!1);z.useEffect(()=>{k(),S(),b()},[]);const k=()=>{l(Ms())},S=()=>{_(aa())},b=()=>{g(sa())},E=(C,j=!1)=>{if(j){const P=[...c,C];fs(P)?(k(),S(),b(),s()):alert("Failed to create recipe")}else bC(C.id,C)?(k(),S(),b(),s()):alert("Failed to save recipe")},M=C=>{var P;if(!window.confirm(`Delete recipe "${((P=c.find(V=>V.id===C))==null?void 0:P.name)||C}"? This cannot be undone.`))return;const j=c.filter(V=>V.id!==C);fs(j)?(k(),S(),b(),s()):alert("Failed to delete recipe")},q=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),w(!0)},R=c.filter(C=>{var j;return((j=C.name)==null?void 0:j.toLowerCase().includes(e.toLowerCase()))||C.id.toLowerCase().includes(e.toLowerCase())}).sort((C,j)=>{const P=C.name||C.id,V=j.name||j.id;return P.localeCompare(V)});return u.jsxs("div",{children:[u.jsx("div",{style:{marginBottom:"15px"},children:u.jsx("button",{onClick:q,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[u.jsx("div",{children:"Recipe Name"}),u.jsx("div",{children:"Machine"}),u.jsx("div",{children:"Cycle Time"}),u.jsx("div",{children:"Power"}),u.jsx("div",{children:"Actions"})]}),R.map(C=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name||C.id}),u.jsx("div",{style:{color:(()=>{const j=f.find(P=>P.id===C.machine_id);if(!j)return"var(--text-secondary)";switch(j.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const j=f.find(P=>P.id===C.machine_id);return j?j.name:C.machine_id})()}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.cycle_time=="number"?`${C.cycle_time}s`:String(C.cycle_time)}),u.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.power_consumption=="number"?`${Si(C.power_consumption)}W`:typeof C.power_consumption=="object"&&C.power_consumption!==null?`${Si(C.power_consumption.max||C.power_consumption.average||0)}W`:String(C.power_consumption)}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:()=>{h(C),w(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),u.jsx("button",{onClick:()=>M(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},C.id)),m&&u.jsx(vC,{recipe:m,onClose:()=>{h(null),w(!1)},onSave:C=>E(C,x),availableProducts:d,defaultMachines:f,allRecipes:c,isCreatingNew:x})]})},ts=(e,n)=>{var c,l,d,_,f,g;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const r={nodes:{},products:{},connections:[]},o=e.length;for(let m=0;m<o;m++){const h=e[m],x=h.id,w=(c=h.data)==null?void 0:c.recipe,k=((l=h.data)==null?void 0:l.machineCount)||0,S=(d=h.data)==null?void 0:d.machine;if(!w)return;const b=w.isMineshaftDrill||w.id==="r_mineshaft_drill",E=w.isLogicAssembler||w.id==="r_logic_assembler",M=w.isTreeFarm||w.id==="r_tree_farm",q=S&&S.id==="m_industrial_firebox",R=S&&un(S.id),C=b||E||M||q||R;let j=w.cycle_time;if(j==="Variable"||typeof j!="number"||j<=0){if(!C)return;j=1}const P=S&&un(S.id),V=P?En[S.id]:null;if(P&&(V==null?void 0:V.type)==="steam_input"&&!(S.id==="m_steam_cracking_plant"&&!uo(w))){const D=w.tempDependentInputTemp??Xn;j=Ir(S.id,D,j)}const X={id:x,recipe:w,machineCount:k,cycleTime:j,isSpecialRecipe:C,isMineshaftDrill:b,isLogicAssembler:E,isTempDependent:P,machineCountMode:((_=h.data)==null?void 0:_.machineCountMode)||"free",cappedMachineCount:(f=h.data)==null?void 0:f.cappedMachineCount,inputs:[],outputs:[]};(g=w.inputs)==null||g.forEach((D,te)=>{const T=D.product_id;if(T==="p_variableproduct")return;const Y=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const W=b?Y*k:Y/j*k,Z=X.inputs.length;X.inputs.push({productId:T,quantity:Y,rate:W,index:Z,recipeIndex:te,connectedRate:0,temperature:null}),r.products[T]||(r.products[T]={producers:[],consumers:[],connections:[]}),r.products[T].consumers.push({nodeId:x,inputIndex:Z,rate:W})});const F=w.outputs;F==null||F.forEach((D,te)=>{const T=D.product_id;if(T==="p_variableproduct")return;const Y=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const W=b?Y*k:Y/j*k,Z=X.outputs.length;X.outputs.push({productId:T,quantity:Y,rate:W,index:Z,recipeIndex:te,connectedRate:0,temperature:D.temperature||null}),r.products[T]||(r.products[T]={producers:[],consumers:[],connections:[]}),r.products[T].producers.push({nodeId:x,outputIndex:Z,rate:W})}),r.nodes[x]=X}const s=n.length;for(let m=0;m<s;m++){const h=n[m],x=r.nodes[h.source],w=r.nodes[h.target];if(!x||!w)continue;const k=parseInt(h.sourceHandle.split("-")[1]),S=parseInt(h.targetHandle.split("-")[1]),b=x.outputs.find(R=>R.recipeIndex===k),E=w.inputs.find(R=>R.recipeIndex===S);if(!b||!E||b.productId!==E.productId)return;const M=b.productId;b.temperature!==void 0&&b.temperature!==null&&(E.temperature=b.temperature);const q={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:b.index,targetInputIndex:E.index,productId:M,sourceRate:b.rate,targetRate:E.rate,flowRate:0,temperature:b.temperature||null};r.connections.push(q),r.products[M]&&r.products[M].connections.push(q)}return r};class VC{constructor(n=100){this.cache=new Map,this.maxSize=n}get(n){if(!this.cache.has(n))return null;const r=this.cache.get(n);return this.cache.delete(n),this.cache.set(n,r),r}set(n,r){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(n,r)}clear(){this.cache.clear()}}let mp=new VC(100);class FC{constructor(n){this.parent=new Int32Array(n),this.rank=new Int32Array(n);for(let r=0;r<n;r++)this.parent[r]=r}find(n){return this.parent[n]!==n&&(this.parent[n]=this.find(this.parent[n])),this.parent[n]}union(n,r){const o=this.find(n),s=this.find(r);o!==s&&(this.rank[o]<this.rank[s]?this.parent[o]=s:this.rank[o]>this.rank[s]?this.parent[s]=o:(this.parent[s]=o,this.rank[o]++))}}const zC=(e,n)=>{const r=e.products[n];if(!r)return{components:[],portToComponent:new Map};const o=[],s=new Map;r.producers.forEach(g=>{const m=`out:${g.nodeId}:${g.outputIndex}`;s.has(m)||(s.set(m,o.length),o.push({type:"output",nodeId:g.nodeId,index:g.outputIndex,rate:g.rate}))}),r.consumers.forEach(g=>{const m=`in:${g.nodeId}:${g.inputIndex}`;s.has(m)||(s.set(m,o.length),o.push({type:"input",nodeId:g.nodeId,index:g.inputIndex,rate:g.rate}))});const c=new FC(o.length);r.connections.forEach(g=>{const m=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,h=`in:${g.targetNodeId}:${g.targetInputIndex}`,x=s.get(m),w=s.get(h);x!==void 0&&w!==void 0&&c.union(x,w)});const l=new Map;for(let g=0;g<o.length;g++){const m=c.find(g);l.has(m)||l.set(m,[]),l.get(m).push(g)}const d=[],_=new Map;let f=0;return l.forEach((g,m)=>{const h={id:f,ports:g.map(x=>o[x]),connections:[]};r.connections.forEach(x=>{const w=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,k=s.get(w);k!==void 0&&c.find(k)===m&&h.connections.push(x)}),g.forEach(x=>{const w=o[x],k=w.type==="output"?`out:${w.nodeId}:${w.index}`:`in:${w.nodeId}:${w.index}`;_.set(k,f)}),d.push(h),f++}),{components:d,portToComponent:_,ports:o,portToIndex:s}},LC=e=>{const n=e.ports.map(o=>`${o.type}:${o.nodeId}:${o.index}:${o.rate}`).sort().join("|"),r=e.connections.map(o=>`${o.sourceNodeId}:${o.sourceOutputIndex}->${o.targetNodeId}:${o.targetInputIndex}`).sort().join("|");return`${n}##${r}`},DC=(e,n,r)=>{const o=yg(e,n),s=gg(e,n),c={totalProduction:o,totalConsumption:s,connectedFlow:0,connections:{}};if(r.length===0)return c;const{components:l,portToComponent:d}=zC(e,n);return l.forEach(_=>{if(_.connections.length===0)return;const f=LC(_),g=`${n}:comp${_.id}`,m=mp.get(g);let h;if(m&&m.hash===f)h=JSON.parse(JSON.stringify(m.result));else{const x=BC(_.connections,o),w=$C(x);h={connectedFlow:0,connections:{}},_.connections.forEach((S,b)=>{const E=w.connectionFlows[b]||0;h.connections[S.id]={flowRate:E,supplyRatio:S.sourceRate>0?E/S.sourceRate:0,demandRatio:S.targetRate>0?E/S.targetRate:0},h.connectedFlow+=E});const k=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});mp.set(g,{hash:f,result:k})}Object.assign(c.connections,h.connections),c.connectedFlow+=h.connectedFlow}),c},OC=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,BC=(e,n)=>{const r=new Map;let o=0;const s=x=>{let w=r.get(x);return w===void 0&&(w=o++,r.set(x,w)),w},c=s("virtual-source"),l=s("virtual-sink"),d=new Map,_=new Map;e.forEach(x=>{const w=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,k=`in:${x.targetNodeId}:${x.targetInputIndex}`;s(w),s(k),d.has(w)||d.set(w,x.sourceRate),_.has(k)||_.set(k,x.targetRate)});const f=Array.from({length:o},()=>[]),g=[],m=n||1e6,h=(x,w,k,S=-1)=>{const b=g.length,E=g.length+1;g.push({to:w,cap:k,flow:0,rev:E,connIndex:S}),g.push({to:x,cap:0,flow:0,rev:b,connIndex:-1}),f[x].push(b),f[w].push(E)};return d.forEach((x,w)=>{h(c,s(w),x)}),_.forEach((x,w)=>{h(s(w),l,x)}),e.forEach((x,w)=>{const k=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,S=`in:${x.targetNodeId}:${x.targetInputIndex}`,b=s(k),E=s(S);h(b,E,m,w)}),{adj:f,edges:g,nodeCount:o,SOURCE:c,SINK:l}};class AC{constructor(n){this.buffer=new Array(n),this.head=0,this.tail=0,this.size=0,this.capacity=n}push(n){this.buffer[this.tail]=n,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const n=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,n}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const $C=e=>{const{adj:n,edges:r,nodeCount:o,SOURCE:s,SINK:c}=e,l=new Int32Array(o),d=new Int32Array(o),_=new AC(o),f=()=>{for(l.fill(-1),l[s]=0,_.clear(),_.push(s);!_.isEmpty();){const S=_.shift(),b=n[S],E=b.length;for(let M=0;M<E;M++){const q=r[b[M]],R=q.cap-q.flow;l[q.to]<0&&R>1e-15&&(l[q.to]=l[S]+1,_.push(q.to))}}return l[c]>=0},g=()=>{const S=[s],b=new Int32Array(o).fill(-1),E=new Uint8Array(o);for(E[s]=1;S.length>0;){const M=S[S.length-1];if(M===c){let C=1e15,j=c;for(;j!==s;){const P=b[j],V=r[P],X=V.cap-V.flow;C=Math.min(C,X);let F=!1;for(let D=0;D<o;D++){const te=n[D];for(let T=0;T<te.length;T++)if(te[T]===P){j=D,F=!0;break}if(F)break}}for(j=c;j!==s;){const P=b[j];r[P].flow+=C,r[r[P].rev].flow-=C;let V=!1;for(let X=0;X<o;X++){const F=n[X];for(let D=0;D<F.length;D++)if(F[D]===P){j=X,V=!0;break}if(V)break}}return C}let q=!1;const R=n[M];for(let C=d[M];C<R.length;C++){const j=R[C],P=r[j],V=P.cap-P.flow;if(l[M]+1===l[P.to]&&V>1e-15&&!E[P.to]){E[P.to]=1,b[P.to]=j,S.push(P.to),d[M]=C,q=!0;break}}q||(S.pop(),d[M]=R.length)}return 0};let m=0,h=0;const x=1e5;for(;f()&&h++<x;)for(d.fill(0);;){const S=g();if(S===0)break;m+=S}const w=[],k=r.length;for(let S=0;S<k;S++){const b=r[S];b.connIndex>=0&&(w[b.connIndex]=OC(b.flow))}return{totalFlow:m,connectionFlows:w}},Cd=e=>{const n={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(r=>{const o=e.nodes[r];n.byNode[r]={inputFlows:o.inputs.map(s=>({connected:0,needed:s.rate})),outputFlows:o.outputs.map(s=>({connected:0,produced:s.rate}))}}),Object.keys(e.products).forEach(r=>{const s=e.products[r].connections;if(s.length===0){n.byProduct[r]={totalProduction:yg(e,r),totalConsumption:gg(e,r),connectedFlow:0};return}const c=DC(e,r,s);n.byProduct[r]=c,s.forEach(l=>{const d=c.connections[l.id];if(d){n.byConnection[l.id]=d;const _=n.byNode[l.sourceNodeId];_&&(_.outputFlows[l.sourceOutputIndex].connected+=d.flowRate,_.outputFlows[l.sourceOutputIndex].produced=l.sourceRate);const f=n.byNode[l.targetNodeId];f&&(f.inputFlows[l.targetInputIndex].connected+=d.flowRate,f.inputFlows[l.targetInputIndex].needed=l.targetRate)}})}),n},yg=(e,n)=>{const r=e.products[n];return r?r.producers.reduce((o,s)=>{const l=e.nodes[s.nodeId].outputs[s.outputIndex];return o+l.rate},0):0},gg=(e,n)=>{const r=e.products[n];return r?r.consumers.reduce((o,s)=>{const l=e.nodes[s.nodeId].inputs[s.inputIndex];return o+l.rate},0):0},tn=()=>{mp.clear()},Sn=1e-10,HC=(e,n,r,o)=>{var g,m;const s=new Map,c=new Set,l=(g=e.nodes[r])==null?void 0:g.inputs[o];if(!l)return s;const d=l.productId;if(!e.products[d])return s;const f=[{nodeId:r,inputIndex:o,productId:d}];for(c.add(`${r}:${o}`);f.length>0;){const{nodeId:h,inputIndex:x,productId:w}=f.shift();(((m=e.products[w])==null?void 0:m.connections.filter(S=>S.targetNodeId===h&&S.targetInputIndex===x))||[]).forEach(S=>{var q,R;const b=e.nodes[S.sourceNodeId];if(!b)return;const E=`${S.sourceNodeId}:${S.sourceOutputIndex}`,M=(q=n.byNode[S.sourceNodeId])==null?void 0:q.outputFlows[S.sourceOutputIndex];if(M){s.set(E,{nodeId:S.sourceNodeId,outputIndex:S.sourceOutputIndex,maxFlow:M.produced});const C=b.outputs[S.sourceOutputIndex];if(!C)return;(((R=e.products[C.productId])==null?void 0:R.connections.filter(P=>P.sourceNodeId===S.sourceNodeId&&P.sourceOutputIndex===S.sourceOutputIndex))||[]).forEach(P=>{var F;if(P.targetNodeId===h&&P.targetInputIndex===x)return;const V=`${P.targetNodeId}:${P.targetInputIndex}`;if(c.has(V))return;c.add(V);const X=(F=e.nodes[P.targetNodeId])==null?void 0:F.inputs[P.targetInputIndex];X&&f.push({nodeId:P.targetNodeId,inputIndex:P.targetInputIndex,productId:X.productId})})}})}return s},WC=(e,n)=>{const r=[];return Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o],c=n.byNode[o];c&&s.inputs.forEach((l,d)=>{const _=c.inputFlows[d];if(!_)return;const f=_.needed-_.connected;if(f<=Sn)return;if(l.productId,HC(e,n,o,d).forEach((h,x)=>{var V;const w=e.nodes[h.nodeId];if(!w)return;const k=w.machineCount||0;if(k<=0)return;const S=w.machineCountMode||"free";if(S==="locked")return;let b=w.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const E=w.outputs[h.outputIndex];if(!E)return;const M=E.originalQuantity!==void 0?E.originalQuantity:E.quantity;if(typeof M!="number")return;const q=w.isMineshaftDrill?M:M/b;if(typeof q!="number"||q<=Sn)return;const R=(V=n.byNode[h.nodeId])==null?void 0:V.outputFlows[h.outputIndex];if(!R)return;const C=f/q;let j=k+C;if(S==="capped"&&w.cappedMachineCount&&(j=Math.min(j,w.cappedMachineCount),j<=k+Sn))return;const P=w.outputs.length>1&&w.outputs.some((X,F)=>{if(F===h.outputIndex)return!1;const D=e.products[X.productId];return!D||!D.connections.some(T=>T.sourceNodeId===h.nodeId&&T.sourceOutputIndex===F)?!1:D.connections.some(T=>T.sourceNodeId!==h.nodeId||T.sourceOutputIndex!==F?!1:D.connections.filter(W=>W.targetNodeId===T.targetNodeId&&W.targetInputIndex===T.targetInputIndex&&W.sourceNodeId!==h.nodeId).length===0)});r.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:E.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:R.produced,targetFlow:R.produced+f,deltaFlow:f,currentMachineCount:k,suggestedMachineCount:j,machineDelta:C,hasConstrainedOutputs:P,isMultiOutput:w.outputs.length>1})}),(s.machineCountMode||"free")!=="locked"){const h=s.isMineshaftDrill?l.quantity:l.quantity/(s.cycleTime||1);if(typeof h=="number"&&h>Sn){const x=f/h,w=(s.machineCount||0)-x;w>Sn&&r.push({nodeId:o,handleType:"input",handleIndex:d,productId:l.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:_.connected,targetFlow:_.connected,deltaFlow:-f,currentMachineCount:s.machineCount||0,suggestedMachineCount:w,machineDelta:-x})}}})}),Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o],c=n.byNode[o];if(!c)return;const l=s.machineCount||0;if(l<=0)return;let d=s.cycleTime;(typeof d!="number"||d<=0)&&(d=1),s.outputs.forEach((_,f)=>{var M;const g=c.outputFlows[f];if(!g)return;const m=g.produced-g.connected;if(m<=Sn||(s.machineCountMode||"free")==="locked")return;const x=_.originalQuantity!==void 0?_.originalQuantity:_.quantity,w=s.isMineshaftDrill?x:x/d;if(typeof w!="number"||w<=Sn)return;const k=m/w,S=l-k;S>Sn&&r.push({nodeId:o,handleType:"output",handleIndex:f,productId:_.productId,adjustmentType:"decrease",reason:"excess",currentFlow:g.produced,targetFlow:g.produced-m,deltaFlow:-m,currentMachineCount:l,suggestedMachineCount:S,machineDelta:-k});const b=_.productId;(((M=e.products[b])==null?void 0:M.connections.filter(q=>q.sourceNodeId===o&&q.sourceOutputIndex===f))||[]).forEach(q=>{var te,T,Y,W;const R=e.nodes[q.targetNodeId];if(!R)return;const C=R.machineCount||0;if(C<=0)return;const j=R.machineCountMode||"free";if(j==="locked")return;let P=R.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const V=R.inputs[q.targetInputIndex];if(!V)return;const X=R.isMineshaftDrill?V.quantity:V.quantity/P;if(typeof X!="number"||X<=Sn)return;const F=m/X;let D=C+F;j==="capped"&&R.cappedMachineCount&&(D=Math.min(D,R.cappedMachineCount),D<=C+Sn)||r.push({nodeId:q.targetNodeId,handleType:"input",handleIndex:q.targetInputIndex,productId:V.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((T=(te=n.byNode[q.targetNodeId])==null?void 0:te.inputFlows[q.targetInputIndex])==null?void 0:T.connected)||0,targetFlow:(((W=(Y=n.byNode[q.targetNodeId])==null?void 0:Y.inputFlows[q.targetInputIndex])==null?void 0:W.connected)||0)+m,deltaFlow:m,currentMachineCount:C,suggestedMachineCount:D,machineDelta:F})})})}),r.forEach(o=>{const s=Math.round(o.suggestedMachineCount*1e10)/1e10,c=Math.round(o.suggestedMachineCount*1e20)/1e20,l=Math.abs(c-s)>1e-12;o.suggestedMachineCount=l?Math.round(o.suggestedMachineCount*1e20)/1e20:Math.round(o.suggestedMachineCount*1e10)/1e10;const d=Math.round(o.machineDelta*1e10)/1e10,_=Math.round(o.machineDelta*1e20)/1e20,f=Math.abs(_-d)>1e-12;o.machineDelta=f?Math.round(o.machineDelta*1e20)/1e20:Math.round(o.machineDelta*1e10)/1e10}),r},Bl=(e,n)=>{const r=[],o=[];Object.keys(e.products).forEach(l=>{const d=e.products[l],_=n.byProduct[l];if(!_)return;const f=_.totalProduction,g=_.connectedFlow,m=f-g;if(Math.abs(m)>1e-6&&m>0){const h=Et(l);h&&r.push({productId:l,product:h,excessRate:m,totalProduction:f,connectedConsumption:g,percentageExcess:f>0?m/f*100:0})}d.consumers.forEach(h=>{var w;const x=(w=n.byNode[h.nodeId])==null?void 0:w.inputFlows[h.inputIndex];if(x){const k=x.needed-x.connected;if(Math.abs(k)>1e-6&&k>0){const S=Et(l);if(S){let b=o.find(E=>E.productId===l);b?(b.deficiencyRate+=k,b.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:k})):o.push({productId:l,product:S,deficiencyRate:k,totalConsumption:_.totalConsumption,connectedProduction:g,percentageDeficient:_.totalConsumption>0?k/_.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:k}]})}}}})}),r.sort((l,d)=>d.excessRate-l.excessRate),o.sort((l,d)=>d.deficiencyRate-l.deficiencyRate);const c=r.length>0||o.length>0?WC(e,n):[];return{excess:r,deficiency:o,suggestions:c}},jh=(e,n,r={})=>{const{skipTemperature:o=!1,previousTemperatureData:s=null}=r,c=ts(e,n),l=Cd(c);if(o){const E=s||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Bl(c,l),graph:c,flows:l,temperatureData:E}}if(!Object.values(c.nodes).some(E=>{const M=E.recipe.machine_id;return ri[M]||un(M)})){const E={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Bl(c,l),graph:c,flows:l,temperatureData:E}}const _=gh(c,l),f=ip(e,_,c);if(!f.some((E,M)=>{var F,D,te,T,Y,W,Z,$;const q=e[M],R=(D=(F=q.data)==null?void 0:F.recipe)==null?void 0:D.tempDependentInputTemp,C=(T=(te=E.data)==null?void 0:te.recipe)==null?void 0:T.tempDependentInputTemp,j=(W=(Y=q.data)==null?void 0:Y.recipe)==null?void 0:W.outputs.map(H=>H.temperature).filter(H=>H!==void 0),P=($=(Z=E.data)==null?void 0:Z.recipe)==null?void 0:$.outputs.map(H=>H.temperature).filter(H=>H!==void 0),V=Math.abs((R||0)-(C||0))>.1,X=j.length!==P.length||j.some((H,J)=>Math.abs((H||0)-(P[J]||0))>.1);return V||X}))return{...Bl(c,l),graph:c,flows:l,temperatureData:_};const m=ts(f,n),h=Cd(m),x=gh(m,h),w=ip(f,x,m),k=ts(w,n),S=Cd(k);return{...Bl(k,S),graph:k,flows:S,temperatureData:x}},UC=e=>e.excess||[],GC=e=>e.deficiency||[],KC=(e,n,r,o,s,c,l)=>{if(!r||!n)return 1;const d=n.data.recipe,_=n.data.machineCount||0,f=_t(d.machine_id);let g=d.cycle_time;if((typeof g!="number"||g<=0)&&(g=1),f&&un(f.id)){const S=En[f.id];if((S==null?void 0:S.type)==="steam_input"&&(f.id!=="m_steam_cracking_plant"||uo(d))){const b=d.tempDependentInputTemp??Xn;g=Ir(f.id,b,g)}}const m=xg(e,r,null,s,c,o);let h=m.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const x=_t(m.machine_id);if(x&&un(x.id)){const S=En[x.id];if((S==null?void 0:S.type)==="steam_input"&&(x.id!=="m_steam_cracking_plant"||uo(m))){const b=m.tempDependentInputTemp??Xn;h=Ir(x.id,b,h)}}let w=0,k=!1;if(l&&l.byNode&&l.byNode[n.id]){const S=l.byNode[n.id];if(r.isOutput){const b=S.outputFlows[r.outputIndex];if(b){k=!0;const E=b.produced-b.connected;w=Math.max(0,E)}}else{const b=S.inputFlows[r.inputIndex];if(b){k=!0;const E=b.needed-b.connected;w=Math.max(0,E)}}}if(k&&w===0)return 0;if(!k)if(r.isOutput){const S=d.outputs[r.outputIndex];if(S){const b=S.originalQuantity!==void 0?S.originalQuantity:S.quantity;typeof b=="number"&&(w=b/g*_)}}else{const S=d.inputs[r.inputIndex];S&&typeof S.quantity=="number"&&(w=S.quantity/g*_)}if(r.isOutput){const S=m.inputs.find(b=>b.product_id===r.productId);if(S&&typeof S.quantity=="number"&&S.quantity>0){const b=S.quantity/h;return w/b}}else{const S=m.outputs.find(b=>b.product_id===r.productId);if(S){const b=S.originalQuantity!==void 0?S.originalQuantity:S.quantity;if(typeof b=="number"&&b>0){const E=b/h;return w/E}}}return 1},xg=(e,n,r,o,s,c)=>{var _,f,g,m,h,x,w,k,S,b,E,M;let l={...e};const d=_t(e.machine_id);if(!vg(l))return l;if((d==null?void 0:d.id)==="m_industrial_firebox"&&cg(e.id)){const q=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let R=((_=o==null?void 0:o.fireboxConfig)==null?void 0:_.fuel)||"p_coke_fuel";const C=(n==null?void 0:n.productId)||(r==null?void 0:r.id);C&&q.includes(C)&&(R=C);const j=mu(e.id,R);return j&&(l={...l,inputs:ap(e.inputs,R,e.id),fireboxSettings:{fuel:R},cycle_time:j.cycleTime,power_consumption:0}),l}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const q=((f=o==null?void 0:o.drillConfig)==null?void 0:f.drillHead)||"steel",R=((g=o==null?void 0:o.drillConfig)==null?void 0:g.consumable)||"hydrochloric_acid",C=((m=o==null?void 0:o.drillConfig)==null?void 0:m.machineOil)!==void 0?o.drillConfig.machineOil:!0,j=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],P={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let V=q,X=100;const F=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(F)if(j.includes(F))V=P[F];else if(n!=null&&n.isOutput)X=100;else{const Y=c(F,V,R,C);Y&&(X=Y)}const D=Zy(V,R,C,X),te=Jy(V,R,C,X),T=co(V,R,C,X);return l={...l,inputs:D.length>0?D:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:te.length>0?te:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:V,consumable:R,machineOil:C,depth:X},cycle_time:1,power_consumption:T?{max:T.drillingPower*1e6,average:(T.drillingPower*T.lifeTime+T.idlePower*(T.replacementTime+T.travelTime))/T.totalCycleTime*1e6}:"Variable",pollution:T?T.pollution:"Variable"},l}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const q=((h=o==null?void 0:o.assemblerConfig)==null?void 0:h.outerStage)||1,R=((x=o==null?void 0:o.assemblerConfig)==null?void 0:x.innerStage)||2,C=((w=o==null?void 0:o.assemblerConfig)==null?void 0:w.machineOil)!==void 0?o.assemblerConfig.machineOil:!0,j=((k=o==null?void 0:o.assemblerConfig)==null?void 0:k.tickCircuitDelay)||0;let P=q===1?`p_${R}x_microchip`:`p_${q}x${R}x_microchip`;const V=(n==null?void 0:n.productId)||(r==null?void 0:r.id);V&&V.includes("microchip")&&(P=V);const X=tg(P,C),F=ig(P,C),D=Ss(P,C,j),te=P.match(/p_(?:(\d+)x)?(\d+)x_microchip/),T=te&&te[1]?parseInt(te[1]):1,Y=te?parseInt(te[2]):R;return l={...l,inputs:X.length>0?X:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:T,innerStage:Y,machineOil:C,tickCircuitDelay:j},cycle_time:D?D.cycleTime:"Variable",power_consumption:D?{max:D.maxPowerConsumption,average:D.avgPowerConsumption}:"Variable"},l}if(e.isTreeFarm||e.id==="r_tree_farm"){const q=((S=o==null?void 0:o.treeFarmConfig)==null?void 0:S.trees)||450,R=((b=o==null?void 0:o.treeFarmConfig)==null?void 0:b.harvesters)||20,C=((E=o==null?void 0:o.treeFarmConfig)==null?void 0:E.sprinklers)||24,j=((M=o==null?void 0:o.treeFarmConfig)==null?void 0:M.outputs)||8,P=1,V=sg(C),X=Bp(q,R,s),F=_u(q,R,C,j,P,s);return l={...l,inputs:V.length>0?V:[{product_id:"p_water",quantity:"Variable"}],outputs:X.length>0?X:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:q,harvesters:R,sprinklers:C,outputs:j,controller:P},cycle_time:1,power_consumption:F?F.avgPowerConsumption:"Variable",pollution:0},l}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let q="p_any_item",R="p_any_fluid";const C=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(C)if(C==="p_concrete_block"||C==="p_lead_ingot")q="p_fission_byproducts",R="p_depleted_uf6_waste";else{const V=Et(C);(V==null?void 0:V.type)==="item"?(q=C,R="p_any_fluid"):(V==null?void 0:V.type)==="fluid"&&(q="p_any_item",R=C)}else q="p_fission_byproducts",R="p_depleted_uf6_waste";const j=fu(0,0,q,R),P=Ql(0,0);return l={...l,inputs:j,outputs:[],wasteFacilitySettings:{itemProductId:q,fluidProductId:R,itemFlowRate:0,fluidFlowRate:0},cycle_time:P.cycleTime,power_consumption:1e6,pollution:0},l}if(e.isLiquidDump||e.id==="r_liquid_dump"){let q=["p_water","p_residue"];const R=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(R){const P=Et(R);(P==null?void 0:P.type)==="fluid"&&(q=[R,R])}const C=up(q),j=Ja(C);return l={...l,inputs:C,outputs:[],liquidDumpSettings:{fluidProductIds:q},cycle_time:1,power_consumption:0,pollution:j},l}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let q=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const R=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(R){const P=Et(R);(P==null?void 0:P.type)==="fluid"&&(q=Array(8).fill(R))}const C=dp(q),j=es(C);return l={...l,inputs:C,outputs:[],liquidBurnerSettings:{fluidProductIds:q},cycle_time:1,power_consumption:0,pollution:j},l}return l},QC=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],YC=e=>{if(e==="r_mineshaft_drill"){const n=new Set;return Object.values(ps).forEach(r=>{r.forEach(o=>n.add(o.product_id))}),Array.from(n)}return e==="r_logic_assembler"?eg.map(n=>n.productId):e==="r_tree_farm"?["p_oak_log"]:[]},vg=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&cg(e.id),Ph=1e-10,XC=(e,n,r,o,s,c=null)=>{if(n<Ph)return new Map([[e,r]]);const l=r/n,d=new Map;d.set(e,r);const _=new Map;_.set(e,l);const f=new Set([e]),g=[e];for(;g.length>0;){const w=g.shift(),k=o.nodes[w];k&&(k.outputs.forEach(S=>{var E;(((E=o.products[S.productId])==null?void 0:E.connections.filter(M=>M.sourceNodeId===w))||[]).forEach(M=>{f.has(M.targetNodeId)||(f.add(M.targetNodeId),g.push(M.targetNodeId))})}),k.inputs.forEach(S=>{var E;(((E=o.products[S.productId])==null?void 0:E.connections.filter(M=>M.targetNodeId===w))||[]).forEach(M=>{f.has(M.sourceNodeId)||(f.add(M.sourceNodeId),g.push(M.sourceNodeId))})}))}const m=10;let h=0,x=!0;for(;x&&h<m;)x=!1,h++,f.forEach(w=>{var j;if(w===e)return;const k=o.nodes[w];if(!k)return;const S=(j=c==null?void 0:c.find(P=>P.id===w))==null?void 0:j.data,b=(S==null?void 0:S.machineCountMode)||k.machineCountMode||"free";if(b==="locked")return;const E=k.machineCount||0;if(E<Ph)return;const M=[],q=[];if(k.outputs.forEach((P,V)=>{var F;(((F=o.products[P.productId])==null?void 0:F.connections.filter(D=>D.sourceNodeId===w&&D.sourceOutputIndex===V))||[]).forEach(D=>{const te=_.get(D.targetNodeId);te!==void 0&&(M.push(te),q.push({type:"output",productId:P.productId,targetNodeId:D.targetNodeId,ratio:te}))})}),k.inputs.forEach((P,V)=>{var F;(((F=o.products[P.productId])==null?void 0:F.connections.filter(D=>D.targetNodeId===w&&D.targetInputIndex===V))||[]).forEach(D=>{const te=_.get(D.sourceNodeId);te!==void 0&&(M.push(te),q.push({type:"input",productId:P.productId,sourceNodeId:D.sourceNodeId,ratio:te}))})}),M.length===0)return;const R=Math.max(...M),C=_.get(w)||1;if(Math.abs(R-C)>1e-4){_.set(w,R);let P=E*R;if(b==="capped"){const V=(S==null?void 0:S.cappedMachineCount)||k.cappedMachineCount;typeof V=="number"&&(P=Math.min(P,V))}d.set(w,P),x=!0}});return d};var Th={},qd,Rh;function wg(){if(Rh)return qd;Rh=1;function e(n,r,o,s){this.feasible=o,this.evaluation=r,this.bounded=s,this._tableau=n}return qd=e,e.prototype.generateSolutionSet=function(){for(var n={},r=this._tableau,o=r.varIndexByRow,s=r.variablesPerIndex,c=r.matrix,l=r.rhsColumn,d=r.height-1,_=Math.round(1/r.precision),f=1;f<=d;f+=1){var g=o[f],m=s[g];if(!(m===void 0||m.isSlack===!0)){var h=c[f][l];n[m.id]=Math.round((Number.EPSILON+h)*_)/_}}return n},qd}var Ed,Vh;function ZC(){if(Vh)return Ed;Vh=1;var e=wg();function n(r,o,s,c,l){e.call(this,r,o,s,c),this.iter=l}return Ed=n,n.prototype=Object.create(e.prototype),n.constructor=n,Ed}var Id,Fh;function Nn(){if(Fh)return Id;Fh=1;var e=wg(),n=ZC();function r(s){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=s||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Id=r,r.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function o(s,c){this.priority=s,this.reducedCosts=new Array(c);for(var l=0;l<c;l+=1)this.reducedCosts[l]=0}return o.prototype.copy=function(){var s=new o(this.priority,this.reducedCosts.length);return s.reducedCosts=this.reducedCosts.slice(),s},r.prototype.setOptionalObjective=function(s,c,l){var d=this.objectivesByPriority[s];if(d===void 0){var _=Math.max(this.width,c+1);d=new o(s,_),this.objectivesByPriority[s]=d,this.optionalObjectives.push(d),this.optionalObjectives.sort(function(f,g){return f.priority-g.priority})}d.reducedCosts[c]=l},r.prototype.initialize=function(s,c,l,d){this.variables=l,this.unrestrictedVars=d,this.width=s,this.height=c;for(var _=new Array(s),f=0;f<s;f++)_[f]=0;this.matrix=new Array(c);for(var g=0;g<c;g++)this.matrix[g]=_.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=s+c-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},r.prototype._resetMatrix=function(){var s=this.model.variables,c=this.model.constraints,l=s.length,d=c.length,_,f,g=this.matrix[0],m=this.model.isMinimization===!0?-1:1;for(_=0;_<l;_+=1){var h=s[_],x=h.priority,w=m*h.cost;x===0?g[_+1]=w:this.setOptionalObjective(x,_+1,w),f=s[_].index,this.rowByVarIndex[f]=-1,this.colByVarIndex[f]=_+1,this.varIndexByCol[_+1]=f}for(var k=1,S=0;S<d;S+=1){var b=c[S],E=b.index;this.rowByVarIndex[E]=k,this.colByVarIndex[E]=-1,this.varIndexByRow[k]=E;var M,q,R,C=b.terms,j=C.length,P=this.matrix[k++];if(b.isUpperBound){for(M=0;M<j;M+=1)q=C[M],R=this.colByVarIndex[q.variable.index],P[R]=q.coefficient;P[0]=b.rhs}else{for(M=0;M<j;M+=1)q=C[M],R=this.colByVarIndex[q.variable.index],P[R]=-q.coefficient;P[0]=-b.rhs}}},r.prototype.setModel=function(s){this.model=s;var c=s.nVariables+1,l=s.nConstraints+1;return this.initialize(c,l,s.variables,s.unrestrictedVariables),this._resetMatrix(),this},r.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var s=this.lastElementIndex;return this.lastElementIndex+=1,s},r.prototype.density=function(){for(var s=0,c=this.matrix,l=0;l<this.height;l++)for(var d=c[l],_=0;_<this.width;_++)d[_]!==0&&(s+=1);return s/(this.height*this.width)},r.prototype.setEvaluation=function(){var s=Math.round(1/this.precision),c=this.matrix[this.costRowIndex][this.rhsColumn],l=Math.round((Number.EPSILON+c)*s)/s;this.evaluation=l,this.simplexIters===0&&(this.bestPossibleEval=l)},r.prototype.getSolution=function(){var s=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,s,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,s,this.feasible,this.bounded)},Id}var zh;function JC(){if(zh)return Th;zh=1;var e=Nn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var r=this.model.checkForCycles,o=[],s=this.matrix,c=this.rhsColumn,l=this.width-1,d=this.height-1,_,f=0;;){for(var g=0,m=-this.precision,h=1;h<=d;h++){_=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var x=s[h][c];x<m&&(m=x,g=h)}if(g===0)return this.feasible=!0,f;for(var w=0,k=-1/0,S=s[0],b=s[g],E=1;E<=l;E++){var M=b[E];if(_=this.unrestrictedVars[this.varIndexByCol[E]]===!0,_||M<-this.precision){var q=-S[E]/M;k<q&&(k=q,w=E)}}if(w===0)return this.feasible=!1,f;if(r){o.push([this.varIndexByRow[g],this.varIndexByCol[w]]);var R=this.checkForCycles(o);if(R.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+R[0]),this.model.messages.push("Length :"+R[1]),this.feasible=!1,f}this.pivot(g,w),f+=1}},e.prototype.phase2=function(){for(var r=this.model.checkForCycles,o=[],s=this.matrix,c=this.rhsColumn,l=this.width-1,d=this.height-1,_=this.precision,f=this.optionalObjectives.length,g=null,m=0,h,x;;){var w=s[this.costRowIndex];f>0&&(g=[]);for(var k=0,S=_,b=!1,E=1;E<=l;E++){if(h=w[E],x=this.unrestrictedVars[this.varIndexByCol[E]]===!0,f>0&&-_<h&&h<_){g.push(E);continue}if(x&&h<0){-h>S&&(S=-h,k=E,b=!0);continue}h>S&&(S=h,k=E,b=!1)}if(f>0)for(var M=0;k===0&&g.length>0&&M<f;){var q=[],R=this.optionalObjectives[M].reducedCosts;S=_;for(var C=0;C<g.length;C++){if(E=g[C],h=R[E],x=this.unrestrictedVars[this.varIndexByCol[E]]===!0,-_<h&&h<_){q.push(E);continue}if(x&&h<0){-h>S&&(S=-h,k=E,b=!0);continue}h>S&&(S=h,k=E,b=!1)}g=q,M+=1}if(k===0)return this.setEvaluation(),this.simplexIters+=1,m;var j=0,P=1/0;this.varIndexByRow;for(var V=1;V<=d;V++){var X=s[V],F=X[c],D=X[k];if(!(-_<D&&D<_)){if(D>0&&_>F&&F>-_){P=0,j=V;break}var te=b?-F/D:F/D;te>_&&P>te&&(P=te,j=V)}}if(P===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[k],m;if(r){o.push([this.varIndexByRow[j],this.varIndexByCol[k]]);var T=this.checkForCycles(o);if(T.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+T[0]),this.model.messages.push("Length :"+T[1]),this.feasible=!1,m}this.pivot(j,k,!0),m+=1}};var n=[];return e.prototype.pivot=function(r,o){var s=this.matrix,c=s[r][o],l=this.height-1,d=this.width-1,_=this.varIndexByRow[r],f=this.varIndexByCol[o];this.varIndexByRow[r]=f,this.varIndexByCol[o]=_,this.rowByVarIndex[f]=r,this.rowByVarIndex[_]=-1,this.colByVarIndex[f]=-1,this.colByVarIndex[_]=o;for(var g=s[r],m=0,h=0;h<=d;h++)g[h]>=-1e-16&&g[h]<=1e-16?g[h]=0:(g[h]/=c,n[m]=h,m+=1);g[o]=1/c;var x,w,k;this.precision;for(var S=0;S<=l;S++)if(S!==r&&!(s[S][o]>=-1e-16&&s[S][o]<=1e-16)){var b=s[S];if(x=b[o],x>=-1e-16&&x<=1e-16)x!==0&&(b[o]=0);else{for(w=0;w<m;w++)h=n[w],k=g[h],k>=-1e-16&&k<=1e-16?k!==0&&(g[h]=0):b[h]=b[h]-x*k;b[o]=-x/c}}var E=this.optionalObjectives.length;if(E>0)for(var M=0;M<E;M+=1){var q=this.optionalObjectives[M].reducedCosts;if(x=q[o],x!==0){for(w=0;w<m;w++)h=n[w],k=g[h],k!==0&&(q[h]=q[h]-x*k);q[o]=-x/c}}},e.prototype.checkForCycles=function(r){for(var o=0;o<r.length-1;o++)for(var s=o+1;s<r.length;s++){var c=r[o],l=r[s];if(c[0]===l[0]&&c[1]===l[1]){if(s-o>r.length-s)break;for(var d=!0,_=1;_<s-o;_++){var f=r[o+_],g=r[s+_];if(f[0]!==g[0]||f[1]!==g[1]){d=!1;break}}if(d)return[o,s-o]}}return[]},Th}var Lh={},Nd,Dh;function Wp(){if(Dh)return Nd;Dh=1;function e(d,_,f,g){this.id=d,this.cost=_,this.index=f,this.value=0,this.priority=g}function n(d,_,f,g){e.call(this,d,_,f,g)}n.prototype.isInteger=!0;function r(d,_){e.call(this,d,0,_,0)}r.prototype.isSlack=!0;function o(d,_){this.variable=d,this.coefficient=_}function s(d,_,f){return f===0||f==="required"?null:(_=_||1,f=f||1,d.isMinimization===!1&&(_=-_),d.addVariable(_,"r"+d.relaxationIndex++,!1,!1,f))}function c(d,_,f,g){this.slack=new r("s"+f,f),this.index=f,this.model=g,this.rhs=d,this.isUpperBound=_,this.terms=[],this.termsByVarIndex={},this.relaxation=null}c.prototype.addTerm=function(d,_){var f=_.index,g=this.termsByVarIndex[f];if(g===void 0)g=new o(_,d),this.termsByVarIndex[f]=g,this.terms.push(g),this.isUpperBound===!0&&(d=-d),this.model.updateConstraintCoefficient(this,_,d);else{var m=g.coefficient+d;this.setVariableCoefficient(m,_)}return this},c.prototype.removeTerm=function(d){return this},c.prototype.setRightHandSide=function(d){if(d!==this.rhs){var _=d-this.rhs;this.isUpperBound===!0&&(_=-_),this.rhs=d,this.model.updateRightHandSide(this,_)}return this},c.prototype.setVariableCoefficient=function(d,_){var f=_.index;if(f===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var g=this.termsByVarIndex[f];if(g===void 0)this.addTerm(d,_);else if(d!==g.coefficient){var m=d-g.coefficient;this.isUpperBound===!0&&(m=-m),g.coefficient=d,this.model.updateConstraintCoefficient(this,_,m)}return this},c.prototype.relax=function(d,_){this.relaxation=s(this.model,d,_),this._relax(this.relaxation)},c.prototype._relax=function(d){d!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,d):this.setVariableCoefficient(1,d))};function l(d,_){this.upperBound=d,this.lowerBound=_,this.model=d.model,this.rhs=d.rhs,this.relaxation=null}return l.prototype.isEquality=!0,l.prototype.addTerm=function(d,_){return this.upperBound.addTerm(d,_),this.lowerBound.addTerm(d,_),this},l.prototype.removeTerm=function(d){return this.upperBound.removeTerm(d),this.lowerBound.removeTerm(d),this},l.prototype.setRightHandSide=function(d){this.upperBound.setRightHandSide(d),this.lowerBound.setRightHandSide(d),this.rhs=d},l.prototype.relax=function(d,_){this.relaxation=s(this.model,d,_),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Nd={Constraint:c,Variable:e,IntegerVariable:n,SlackVariable:r,Equality:l,Term:o},Nd}var Oh;function eq(){if(Oh)return Lh;Oh=1;var e=Nn(),n=Wp().SlackVariable;return e.prototype.addCutConstraints=function(r){for(var o=r.length,s=this.height,c=s+o,l=s;l<c;l+=1)this.matrix[l]===void 0&&(this.matrix[l]=this.matrix[l-1].slice());this.height=c,this.nVars=this.width+this.height-2;for(var d,_=this.width-1,f=0;f<o;f+=1){var g=r[f],m=s+f,h=g.type==="min"?-1:1,x=g.varIndex,w=this.rowByVarIndex[x],k=this.matrix[m];if(w===-1){for(k[this.rhsColumn]=h*g.value,d=1;d<=_;d+=1)k[d]=0;k[this.colByVarIndex[x]]=h}else{var S=this.matrix[w],b=S[this.rhsColumn];for(k[this.rhsColumn]=h*(g.value-b),d=1;d<=_;d+=1)k[d]=-h*S[d]}var E=this.getNewElementIndex();this.varIndexByRow[m]=E,this.rowByVarIndex[E]=m,this.colByVarIndex[E]=-1,this.variablesPerIndex[E]=new n("s"+E,E),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,s=this.variablesPerIndex[this.varIndexByRow[r]];if(!s.isInteger)return!1;var c=o[r][this.rhsColumn],l=c-Math.floor(c);if(l<this.precision||1-this.precision<l)return!1;var d=this.height;o[d]=o[d-1].slice(),this.height+=1,this.nVars+=1;var _=this.getNewElementIndex();this.varIndexByRow[d]=_,this.rowByVarIndex[_]=d,this.colByVarIndex[_]=-1,this.variablesPerIndex[_]=new n("s"+_,_),o[d][this.rhsColumn]=Math.floor(c);for(var f=1;f<this.varIndexByCol.length;f+=1){var g=this.variablesPerIndex[this.varIndexByCol[f]];if(!g.isInteger)o[d][f]=Math.min(0,o[r][f]/(1-l));else{var m=o[r][f],h=Math.floor(m)+Math.max(0,m-Math.floor(m)-l)/(1-l);o[d][f]=h}}for(var x=0;x<this.width;x+=1)o[d][x]-=o[r][x];return!0},e.prototype._addUpperBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,s=this.variablesPerIndex[this.varIndexByRow[r]];if(!s.isInteger)return!1;var c=o[r][this.rhsColumn],l=c-Math.floor(c);if(l<this.precision||1-this.precision<l)return!1;var d=this.height;o[d]=o[d-1].slice(),this.height+=1,this.nVars+=1;var _=this.getNewElementIndex();this.varIndexByRow[d]=_,this.rowByVarIndex[_]=d,this.colByVarIndex[_]=-1,this.variablesPerIndex[_]=new n("s"+_,_),o[d][this.rhsColumn]=-l;for(var f=1;f<this.varIndexByCol.length;f+=1){var g=this.variablesPerIndex[this.varIndexByCol[f]],m=o[r][f],h=m-Math.floor(m);g.isInteger?h<=l?o[d][f]=-h:o[d][f]=-(1-h)*l/h:m>=0?o[d][f]=-m:o[d][f]=m*l/(1-l)}return!0},e.prototype.applyMIRCuts=function(){},Lh}var Bh={},Ah;function tq(){if(Ah)return Bh;Ah=1;var e=Nn();return e.prototype._putInBase=function(n){var r=this.rowByVarIndex[n];if(r===-1){for(var o=this.colByVarIndex[n],s=1;s<this.height;s+=1){var c=this.matrix[s][o];if(c<-this.precision||this.precision<c){r=s;break}}this.pivot(r,o)}return r},e.prototype._takeOutOfBase=function(n){var r=this.colByVarIndex[n];if(r===-1){for(var o=this.rowByVarIndex[n],s=this.matrix[o],c=1;c<this.height;c+=1){var l=s[c];if(l<-this.precision||this.precision<l){r=c;break}}this.pivot(o,r)}return r},e.prototype.updateVariableValues=function(){for(var n=this.variables.length,r=Math.round(1/this.precision),o=0;o<n;o+=1){var s=this.variables[o],c=s.index,l=this.rowByVarIndex[c];if(l===-1)s.value=0;else{var d=this.matrix[l][this.rhsColumn];s.value=Math.round((d+Number.EPSILON)*r)/r}}},e.prototype.updateRightHandSide=function(n,r){var o=this.height-1,s=this.rowByVarIndex[n.index];if(s===-1){for(var c=this.colByVarIndex[n.index],l=0;l<=o;l+=1){var d=this.matrix[l];d[this.rhsColumn]-=r*d[c]}var _=this.optionalObjectives.length;if(_>0)for(var f=0;f<_;f+=1){var g=this.optionalObjectives[f].reducedCosts;g[this.rhsColumn]-=r*g[c]}}else this.matrix[s][this.rhsColumn]-=r},e.prototype.updateConstraintCoefficient=function(n,r,o){if(n.index===r.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var s=this._putInBase(n.index),c=this.colByVarIndex[r.index];if(c===-1)for(var l=this.rowByVarIndex[r.index],d=0;d<this.width;d+=1)this.matrix[s][d]+=o*this.matrix[l][d];else this.matrix[s][c]-=o},e.prototype.updateCost=function(n,r){var o=n.index,s=this.width-1,c=this.colByVarIndex[o];if(c===-1){var l=this.matrix[this.rowByVarIndex[o]],d;if(n.priority===0){var _=this.matrix[0];for(d=0;d<=s;d+=1)_[d]+=r*l[d]}else{var f=this.objectivesByPriority[n.priority].reducedCosts;for(d=0;d<=s;d+=1)f[d]+=r*l[d]}}else this.matrix[0][c]-=r},e.prototype.addConstraint=function(n){var r=n.isUpperBound?1:-1,o=this.height,s=this.matrix[o];s===void 0&&(s=this.matrix[0].slice(),this.matrix[o]=s);for(var c=this.width-1,l=0;l<=c;l+=1)s[l]=0;s[this.rhsColumn]=r*n.rhs;for(var d=n.terms,_=d.length,f=0;f<_;f+=1){var g=d[f],m=g.coefficient,h=g.variable.index,x=this.rowByVarIndex[h];if(x===-1)s[this.colByVarIndex[h]]+=r*m;else{var w=this.matrix[x];for(w[this.rhsColumn],l=0;l<=c;l+=1)s[l]-=r*m*w[l]}}var k=n.index;this.varIndexByRow[o]=k,this.rowByVarIndex[k]=o,this.colByVarIndex[k]=-1,this.height+=1},e.prototype.removeConstraint=function(n){var r=n.index,o=this.height-1,s=this._putInBase(r),c=this.matrix[o];this.matrix[o]=this.matrix[s],this.matrix[s]=c,this.varIndexByRow[s]=this.varIndexByRow[o],this.varIndexByRow[o]=-1,this.rowByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,n.slack.index=-1,this.height-=1},e.prototype.addVariable=function(n){var r=this.height-1,o=this.width,s=this.model.isMinimization===!0?-n.cost:n.cost,c=n.priority,l=this.optionalObjectives.length;if(l>0)for(var d=0;d<l;d+=1)this.optionalObjectives[d].reducedCosts[o]=0;c===0?this.matrix[0][o]=s:(this.setOptionalObjective(c,o,s),this.matrix[0][o]=0);for(var _=1;_<=r;_+=1)this.matrix[_][o]=0;var f=n.index;this.varIndexByCol[o]=f,this.rowByVarIndex[f]=-1,this.colByVarIndex[f]=o,this.width+=1},e.prototype.removeVariable=function(n){var r=n.index,o=this._takeOutOfBase(r),s=this.width-1;if(o!==s){for(var c=this.height-1,l=0;l<=c;l+=1){var d=this.matrix[l];d[o]=d[s]}var _=this.optionalObjectives.length;if(_>0)for(var f=0;f<_;f+=1){var g=this.optionalObjectives[f].reducedCosts;g[o]=g[s]}var m=this.varIndexByCol[s];this.varIndexByCol[o]=m,this.colByVarIndex[m]=o}this.varIndexByCol[s]=-1,this.colByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,n.index=-1,this.width-=1},Bh}var $h={},Hh;function iq(){if(Hh)return $h;Hh=1;var e=Nn();return e.prototype.log=function(n,r){console.log("****",n,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var o=5,s="",c=[" "],l,d,_,f,g,m,h,x,w,k,S;for(d=1;d<this.width;d+=1)g=this.varIndexByCol[d],f=this.variablesPerIndex[g],f===void 0?m="c"+g:m=f.id,h=m.length,x=" ",w="	",h>5?x+=" ":w+="	",c[d]=x,s+=w+m;console.log(s);var b,E=this.matrix[this.costRowIndex],M="	";for(l=1;l<this.width;l+=1)b="	",M+=b,M+=c[l],M+=E[l].toFixed(o);for(b="	",M+=b+c[0]+E[0].toFixed(o),console.log(M+"	Z"),_=1;_<this.height;_+=1){for(k=this.matrix[_],S="	",d=1;d<this.width;d+=1)b="	",S+=b+c[d]+k[d].toFixed(o);b="	",S+=b+c[0]+k[0].toFixed(o),g=this.varIndexByRow[_],f=this.variablesPerIndex[g],f===void 0?m="c"+g:m=f.id,console.log(S+"	"+m)}console.log("");var q=this.optionalObjectives.length;if(q>0){console.log("    Optional objectives:");for(var R=0;R<q;R+=1){var C=this.optionalObjectives[R].reducedCosts,j="";for(l=1;l<this.width;l+=1)b=C[l]<0?"":" ",j+=b,j+=c[l],j+=C[l].toFixed(o);b=C[0]<0?"":" ",j+=b+c[0]+C[0].toFixed(o),console.log(j+" z"+R)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},$h}var Wh={},Uh;function nq(){if(Uh)return Wh;Uh=1;var e=Nn();return e.prototype.copy=function(){var n=new e(this.precision);n.width=this.width,n.height=this.height,n.nVars=this.nVars,n.model=this.model,n.variables=this.variables,n.variablesPerIndex=this.variablesPerIndex,n.unrestrictedVars=this.unrestrictedVars,n.lastElementIndex=this.lastElementIndex,n.varIndexByRow=this.varIndexByRow.slice(),n.varIndexByCol=this.varIndexByCol.slice(),n.rowByVarIndex=this.rowByVarIndex.slice(),n.colByVarIndex=this.colByVarIndex.slice(),n.availableIndexes=this.availableIndexes.slice();for(var r=[],o=0;o<this.optionalObjectives.length;o++)r[o]=this.optionalObjectives[o].copy();n.optionalObjectives=r;for(var s=this.matrix,c=new Array(this.height),l=0;l<this.height;l++)c[l]=s[l].slice();return n.matrix=c,n},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var n=this.savedState,r=n.matrix;this.nVars=n.nVars,this.model=n.model,this.variables=n.variables,this.variablesPerIndex=n.variablesPerIndex,this.unrestrictedVars=n.unrestrictedVars,this.lastElementIndex=n.lastElementIndex,this.width=n.width,this.height=n.height;var o,s;for(o=0;o<this.height;o+=1){var c=r[o],l=this.matrix[o];for(s=0;s<this.width;s+=1)l[s]=c[s]}var d=n.varIndexByRow;for(s=0;s<this.height;s+=1)this.varIndexByRow[s]=d[s];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var _=n.varIndexByCol;for(o=0;o<this.width;o+=1)this.varIndexByCol[o]=_[o];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var f=n.rowByVarIndex,g=n.colByVarIndex,m=0;m<this.nVars;m+=1)this.rowByVarIndex[m]=f[m],this.colByVarIndex[m]=g[m];if(n.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<n.optionalObjectives.length;h++){var x=n.optionalObjectives[h].copy();this.optionalObjectives[h]=x,this.optionalObjectivePerPriority[x.priority]=x}}}},Wh}var Gh={},Kh;function rq(){if(Kh)return Gh;Kh=1;var e=Nn();function n(r,o){this.index=r,this.value=o}return e.prototype.getMostFractionalVar=function(){for(var r=0,o=null,s=null,c=this.model.integerVariables,l=c.length,d=0;d<l;d++){var _=c[d].index,f=this.rowByVarIndex[_];if(f!==-1){var g=this.matrix[f][this.rhsColumn],m=Math.abs(g-Math.round(g));r<m&&(r=m,o=_,s=g)}}return new n(o,s)},e.prototype.getFractionalVarWithLowestCost=function(){for(var r=1/0,o=null,s=null,c=this.model.integerVariables,l=c.length,d=0;d<l;d++){var _=c[d],f=_.index,g=this.rowByVarIndex[f];if(g!==-1){var m=this.matrix[g][this.rhsColumn];if(Math.abs(m-Math.round(m))>this.precision){var h=_.cost;r>h&&(r=h,o=f,s=m)}}}return new n(o,s)},Gh}var Qh={},Yh;function oq(){if(Yh)return Qh;Yh=1;var e=Nn();return e.prototype.countIntegerValues=function(){for(var n=0,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var o=this.matrix[r][this.rhsColumn];o=o-Math.floor(o),o<this.precision&&-o<this.precision&&(n+=1)}return n},e.prototype.isIntegral=function(){for(var n=this.model.integerVariables,r=n.length,o=0;o<r;o++){var s=this.rowByVarIndex[n[o].index];if(s!==-1){var c=this.matrix[s][this.rhsColumn];if(Math.abs(c-Math.round(c))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(n){for(var r=-1,o=1;o<this.height;o+=1)if(this.variablesPerIndex[this.varIndexByRow[o]].isInteger){var s=this.matrix[o][this.rhsColumn];s=Math.abs(s);var c=Math.min(s-Math.floor(s),Math.floor(s+1));if(c<this.precision){if(!n)return 0}else r===-1?r=s:r*=s}return r===-1?0:r},Qh}var jd,Xh;function aq(){return Xh||(Xh=1,JC(),eq(),tq(),iq(),nq(),rq(),oq(),jd=Nn()),jd}var Zh={},Jh;function bg(){if(Jh)return Zh;Jh=1;var e=Nn();function n(s,c,l){this.type=s,this.varIndex=c,this.value=l}function r(s,c){this.relaxedEvaluation=s,this.cuts=c}function o(s,c){return c.relaxedEvaluation-s.relaxedEvaluation}return e.prototype.applyCuts=function(s){if(this.restore(),this.addCutConstraints(s),this.simplex(),this.model.useMIRCuts)for(var c=!0;c;){var l=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var d=this.computeFractionalVolume(!0);d>=.9*l&&(c=!1)}},e.prototype.branchAndCut=function(){var s=[],c=0,l=this.model.tolerance,d=!0,_=1e99;this.model.timeout&&(_=Date.now()+this.model.timeout);for(var f=1/0,g=null,m=[],h=0;h<this.optionalObjectives.length;h+=1)m.push(1/0);var x=new r(-1/0,[]),w;for(s.push(x);s.length>0&&d===!0&&Date.now()<_;)if(this.model.isMinimization?w=this.bestPossibleEval*(1+l):w=this.bestPossibleEval*(1-l),l>0&&f<w&&(d=!1),x=s.pop(),!(x.relaxedEvaluation>f)){var k=x.cuts;if(this.applyCuts(k),c++,this.feasible!==!1){var S=this.evaluation;if(!(S>f)){if(S===f){for(var b=!0,E=0;E<this.optionalObjectives.length&&!(this.optionalObjectives[E].reducedCosts[0]>m[E]);E+=1)if(this.optionalObjectives[E].reducedCosts[0]<m[E]){b=!1;break}if(b)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,c===1){this.branchAndCutIterations=c;return}g=x,f=S;for(var M=0;M<this.optionalObjectives.length;M+=1)m[M]=this.optionalObjectives[M].reducedCosts[0]}else{c===1&&this.save();for(var q=this.getMostFractionalVar(),R=q.index,C=[],j=[],P=k.length,V=0;V<P;V+=1){var X=k[V];X.varIndex===R?X.type==="min"?j.push(X):C.push(X):(C.push(X),j.push(X))}var F=Math.ceil(q.value),D=Math.floor(q.value),te=new n("min",R,F);C.push(te);var T=new n("max",R,D);j.push(T),s.push(new r(S,C)),s.push(new r(S,j)),s.sort(o)}}}}g!==null&&this.applyCuts(g.cuts),this.branchAndCutIterations=c},Zh}var Pd,e0;function sq(){if(e0)return Pd;e0=1;var e=Nn();bg();var n=Wp(),r=n.Constraint,o=n.Equality,s=n.Variable,c=n.IntegerVariable;n.Term;function l(d,_){this.tableau=new e(d),this.name=_,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return Pd=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var d=this.lastElementIndex;return this.lastElementIndex+=1,d},l.prototype._addConstraint=function(d){var _=d.slack;this.tableau.variablesPerIndex[_.index]=_,this.constraints.push(d),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(d)},l.prototype.smallerThan=function(d){var _=new r(d,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(_),_},l.prototype.greaterThan=function(d){var _=new r(d,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(_),_},l.prototype.equal=function(d){var _=new r(d,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(_);var f=new r(d,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(f),new o(_,f)},l.prototype.addVariable=function(d,_,f,g,m){if(typeof m=="string")switch(m){case"required":m=0;break;case"strong":m=1;break;case"medium":m=2;break;case"weak":m=3;break;default:m=0;break}var h=this.tableau.getNewElementIndex();_==null&&(_="v"+h),d==null&&(d=0),m==null&&(m=0);var x;return f?(x=new c(_,d,h,m),this.integerVariables.push(x)):x=new s(_,d,h,m),this.variables.push(x),this.tableau.variablesPerIndex[h]=x,g&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(x),x},l.prototype._removeConstraint=function(d){var _=this.constraints.indexOf(d);if(_===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(_,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(d),d.relaxation&&this.removeVariable(d.relaxation)},l.prototype.removeConstraint=function(d){return d.isEquality?(this._removeConstraint(d.upperBound),this._removeConstraint(d.lowerBound)):this._removeConstraint(d),this},l.prototype.removeVariable=function(d){var _=this.variables.indexOf(d);if(_===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(_,1),this.tableauInitialized===!0&&this.tableau.removeVariable(d),this},l.prototype.updateRightHandSide=function(d,_){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(d,_),this},l.prototype.updateConstraintCoefficient=function(d,_,f){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(d,_,f),this},l.prototype.setCost=function(d,_){var f=d-_.cost;return this.isMinimization===!1&&(f=-f),_.cost=d,this.tableau.updateCost(_,f),this},l.prototype.loadJson=function(d){this.isMinimization=d.opType!=="max";for(var _=d.variables,f=d.constraints,g={},m={},h=Object.keys(f),x=h.length,w=0;w<x;w+=1){var k=h[w],S=f[k],b=S.equal,E=S.weight,M=S.priority,q=E!==void 0||M!==void 0,R,C;if(b===void 0){var j=S.min;j!==void 0&&(R=this.greaterThan(j),g[k]=R,q&&R.relax(E,M));var P=S.max;P!==void 0&&(C=this.smallerThan(P),m[k]=C,q&&C.relax(E,M))}else{R=this.greaterThan(b),g[k]=R,C=this.smallerThan(b),m[k]=C;var V=new o(R,C);q&&V.relax(E,M)}}var X=Object.keys(_),F=X.length;this.tolerance=d.tolerance||0,d.timeout&&(this.timeout=d.timeout),d.options&&(d.options.timeout&&(this.timeout=d.options.timeout),this.tolerance===0&&(this.tolerance=d.options.tolerance||0),d.options.useMIRCuts&&(this.useMIRCuts=d.options.useMIRCuts),typeof d.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=d.options.exitOnCycles);for(var D=d.ints||{},te=d.binaries||{},T=d.unrestricted||{},Y=d.optimize,W=0;W<F;W+=1){var Z=X[W],$=_[Z],H=$[Y]||0,J=!!te[Z],L=!!D[Z]||J,G=!!T[Z],ce=this.addVariable(H,Z,L,G);J&&this.smallerThan(1).addTerm(1,ce);var ue=Object.keys($);for(w=0;w<ue.length;w+=1){var pe=ue[w];if(pe!==Y){var ye=$[pe],ge=g[pe];ge!==void 0&&ge.addTerm(ye,ce);var le=m[pe];le!==void 0&&le.addTerm(ye,ce)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(d){this.useMIRCuts=d},l.prototype.debug=function(d){this.checkForCycles=d},l.prototype.log=function(d){return this.tableau.log(d)},Pd}var Td={},t0;function lq(){return t0||(t0=1,Td.CleanObjectiveAttributes=function(e){var n,r,o;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){n=Math.random();for(r in e.variables)e.variables[r][e.optimize]&&(e.variables[r][n]=e.variables[r][e.optimize]);return e.constraints[n]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(o in e.optimize)if(e.constraints[o])if(e.constraints[o]==="equal")delete e.optimize[o];else{n=Math.random();for(r in e.variables)e.variables[r][o]&&(e.variables[r][n]=e.variables[r][o]);e.constraints[n]=e.constraints[o],delete e.constraints[o]}return e}}),Td}var Al={},Rd,i0;function fp(){if(i0)return Rd;i0=1;function e(r){var o={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},s={opType:"",optimize:"_obj",constraints:{},variables:{}},c={">=":"min","<=":"max","=":"equal"},l="",d=null,_="",f="",g="",m=0;typeof r=="string"&&(r=r.split(`
`));for(var h=0;h<r.length;h++)if(g="__"+h,l=r[h],d=null,o.is_objective.test(l))s.opType=l.match(/(max|min)/gi)[0],d=l.match(o.parse_lhs).map(function(k){return k.replace(/\s+/,"")}).slice(1),d.forEach(function(k){_=k.match(o.get_num),_===null?k.substr(0,1)==="-"?_=-1:_=1:_=_[0],_=parseFloat(_),f=k.match(o.get_word)[0].replace(/\;$/,""),s.variables[f]=s.variables[f]||{},s.variables[f]._obj=_});else if(o.is_int.test(l))d=l.match(o.parse_int).slice(1),s.ints=s.ints||{},d.forEach(function(k){k=k.replace(";",""),s.ints[k]=1});else if(o.is_bin.test(l))d=l.match(o.parse_bin).slice(1),s.binaries=s.binaries||{},d.forEach(function(k){k=k.replace(";",""),s.binaries[k]=1});else if(o.is_constraint.test(l)){var x=l.indexOf(":"),w=x===-1?l:l.slice(x+1);d=w.match(o.parse_lhs).map(function(k){return k.replace(/\s+/,"")}),d.forEach(function(k){_=k.match(o.get_num),_===null?k.substr(0,1)==="-"?_=-1:_=1:_=_[0],_=parseFloat(_),f=k.match(o.get_word)[0],s.variables[f]=s.variables[f]||{},s.variables[f][g]=_}),m=parseFloat(l.match(o.parse_rhs)[0]),l=c[l.match(o.parse_dir)[0]],s.constraints[g]=s.constraints[g]||{},s.constraints[g][l]=m}else o.is_unrestricted.test(l)&&(d=l.match(o.parse_int).slice(1),s.unrestricted=s.unrestricted||{},d.forEach(function(k){k=k.replace(";",""),s.unrestricted[k]=1}));return s}function n(r){if(!r)throw new Error("Solver requires a model to operate on");var o="",s={max:"<=",min:">=",equal:"="},c=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(r.opType){o+=r.opType+":";for(var l in r.variables)r.variables[l][l]=r.variables[l][l]?r.variables[l][l]:1,r.variables[l][r.optimize]&&(o+=" "+r.variables[l][r.optimize]+" "+l.replace(c,"_"))}else o+="max:";o+=`;

`;for(var d in r.constraints)for(var _ in r.constraints[d])if(typeof s[_]<"u"){for(var f in r.variables)typeof r.variables[f][d]<"u"&&(o+=" "+r.variables[f][d]+" "+f.replace(c,"_"));o+=" "+s[_]+" "+r.constraints[d][_],o+=`;
`}if(r.ints){o+=`

`;for(var g in r.ints)o+="int "+g.replace(c,"_")+`;
`}if(r.unrestricted){o+=`

`;for(var m in r.unrestricted)o+="unrestricted "+m.replace(c,"_")+`;
`}return o}return Rd=function(r){return r.length?e(r):n(r)},Rd}const uq={},cq=Object.freeze(Object.defineProperty({__proto__:null,default:uq},Symbol.toStringTag,{value:"Module"})),n0=Dx(cq);var r0;function dq(){if(r0)return Al;r0=1,Al.reformat=fp();function e(n){return n=n.replace("\\r\\n",`\r
`),n=n.split(`\r
`),n=n.filter(function(r){var o;return o=new RegExp(" 0$","gi"),!(o.test(r)===!0||(o=new RegExp("\\d$","gi"),o.test(r)===!1))}).map(function(r){return r.split(/\:{0,1} +(?=\d)/)}).reduce(function(r,o,s){return r[o[0]]=o[1],r},{}),n}return Al.solve=function(n){return new Promise(function(r,o){typeof window<"u"&&o("Function Not Available in Browser");var s=fp()(n);n.external||o("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),n.external.binPath||o("No Executable | Binary path provided in arguments as 'binPath'"),n.external.args||o("No arguments array for cli | bash provided on 'args' attribute"),n.external.tempName||o("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var c=n0;c.writeFile(n.external.tempName,s,function(l,d){if(l)o(l);else{var _=n0.execFile;n.external.args.push(n.external.tempName),_(n.external.binPath,n.external.args,function(f,g){if(f)if(f.code===1)r(e(g));else{var m={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:f.code,meaning:m[f.code],data:g};o(h)}else r(e(g))})}})})},Al}var Vd,o0;function pq(){return o0||(o0=1,Vd={lpsolve:dq()}),Vd}var Fd,a0;function s0(){return a0||(a0=1,Fd=function(e,n){var r=n.optimize,o=JSON.parse(JSON.stringify(n.optimize)),s=Object.keys(n.optimize),c,l=0,d={},_="",f={},g=[],m,h,x,w;for(delete n.optimize,m=0;m<s.length;m++)o[s[m]]=0;for(m=0;m<s.length;m++){n.optimize=s[m],n.opType=r[s[m]],c=e.Solve(n,void 0,void 0,!0);for(w in s)if(!n.variables[s[w]]){c[s[w]]=c[s[w]]?c[s[w]]:0;for(x in n.variables)n.variables[x][s[w]]&&c[x]&&(c[s[w]]+=c[x]*n.variables[x][s[w]])}for(_="base",h=0;h<s.length;h++)c[s[h]]?_+="-"+(c[s[h]]*1e3|0)/1e3:_+="-0";if(!d[_]){for(d[_]=1,l++,h=0;h<s.length;h++)c[s[h]]&&(o[s[h]]+=c[s[h]]);delete c.feasible,delete c.result,g.push(c)}}for(m=0;m<s.length;m++)n.constraints[s[m]]={equal:o[s[m]]/l};n.optimize="cheater-"+Math.random(),n.opType="max";for(m in n.variables)n.variables[m].cheater=1;for(m in g)for(x in g[m])f[x]=f[x]||{min:1e99,max:-1e99};for(m in f)for(x in g)g[x][m]?(g[x][m]>f[m].max&&(f[m].max=g[x][m]),g[x][m]<f[m].min&&(f[m].min=g[x][m])):(g[x][m]=0,f[m].min=0);return c=e.Solve(n,void 0,void 0,!0),{midpoint:c,vertices:g,ranges:f}}),Fd}var zd,l0;function _q(){if(l0)return zd;l0=1;var e=aq(),n=sq(),r=bg(),o=Wp(),s=lq(),c=o.Constraint,l=o.Variable,d=o.Numeral,_=o.Term,f=pq(),g=function(){this.Model=n,this.branchAndCut=r,this.Constraint=c,this.Variable=l,this.Numeral=d,this.Term=_,this.Tableau=e,this.lastSolvedModel=null,this.External=f,this.Solve=function(m,h,x,w){if(w)for(var k in s)m=s[k](m);if(!m)throw new Error("Solver requires a model to operate on");if(typeof m.optimize=="object"&&Object.keys(m.optimize>1))return s0()(this,m);if(m.external){var S=Object.keys(f);if(S=JSON.stringify(S),!m.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+S);if(!f[m.external.solver])throw new Error("No support (yet) for "+m.external.solver+". Please use one of these instead:"+S);return f[m.external.solver].solve(m)}else{m instanceof n||(m=new n(h).loadJson(m));var b=m.solve();if(this.lastSolvedModel=m,b.solutionSet=b.generateSolutionSet(),x)return b;var E={};return E.feasible=b.feasible,E.result=b.evaluation,E.bounded=b.bounded,b._tableau.__isIntegral&&(E.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(M){b.solutionSet[M]!==0&&(E[M]=b.solutionSet[M])}),E}},this.ReformatLP=fp(),this.MultiObjective=function(m){return s0()(this,m)}};return typeof window=="object"?window.solver=new g:typeof self=="object"&&(self.solver=new g),zd=new g,zd}var mq=_q();const fq=hs(mq),Cr=1e-8,kg=1e15,Sg=1e12,Mg=1e9,Cg=1e6,hp=1e3,qg=1e5,yp=100,Eg=10,Ig=1e-5,Ng=1e-6,hq=(e,n=new Set)=>{const r={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(o=>{var q,R;const s=e.nodes[o],c=`m_${o}`,l=s.machineCount||0,d=s.machineCountMode||"free",_=s.cappedMachineCount;s.cycleTime;const f=s.recipe.power_consumption;let g=0;typeof f=="number"?g=f:typeof f=="object"&&f!==null&&"max"in f&&(g=f.max);const m=s.recipe.pollution,h=typeof m=="number"?m:0,x=_t(s.recipe.machine_id),w=x&&typeof x.cost=="number"?x.cost:0,k=(((q=s.recipe.inputs)==null?void 0:q.length)||0)+(((R=s.recipe.outputs)==null?void 0:R.length)||0),S=Math.ceil(g/15e5)*2,b=k*2,E=1+S+b;r.variables[c]={total_cost:Mg*E+Ig*g+Eg*h+Ng*w};const M=`nonneg_${o}`;if(r.constraints[M]={min:0},r.variables[c][M]=1,d==="locked"){const C=`lock_${o}`;r.constraints[C]={equal:l},r.variables[c][C]=1}else if(d==="capped"&&typeof _=="number"){const C=`cap_${o}`;r.constraints[C]={max:_},r.variables[c][C]=1}}),e.connections.forEach(o=>{const s=`f_${o.id}`;r.variables[s]={total_cost:0};const c=`flow_nonneg_${o.id}`;r.constraints[c]={min:0},r.variables[s][c]=1}),Object.keys(e.nodes).forEach(o=>{e.nodes[o].outputs.forEach((c,l)=>{const d=`excess_indicator_${o}_${l}`,g=e.connections.filter(h=>h.sourceNodeId===o&&h.sourceOutputIndex===l).length>0?Cg:qg;r.variables[d]={total_cost:g},r.ints[d]=1;const m=`binary_${o}_${l}`;r.constraints[m]={min:0,max:1},r.variables[d][m]=1})}),Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o],c=n.has(o);s.outputs.forEach((l,d)=>{const _=`flow_out_${o}_${d}`,f=`excess_${o}_${d}`,g=`excess_indicator_${o}_${d}`,m=e.connections.filter(R=>R.sourceNodeId===o&&R.sourceOutputIndex===d),x=m.length>0?hp:yp,w=c?1:x;r.variables[f]={total_cost:w,[_]:-1};const k=`link_excess_${o}_${d}`;r.constraints[k]={max:0};const S=`m_${o}`;let b=s.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const E=l.originalQuantity!==void 0?l.originalQuantity:l.quantity;if(typeof E!="number")return;const M=s.isMineshaftDrill?E:E/b,q=M*1e4;r.variables[f][k]=1,r.variables[g][k]=-q,r.constraints[_]={equal:0},r.variables[S][_]||(r.variables[S][_]=0),r.variables[S][_]+=M,m.forEach(R=>{const C=`f_${R.id}`;r.variables[C][_]||(r.variables[C][_]=0),r.variables[C][_]-=1})}),s.inputs.forEach((l,d)=>{const _=e.connections.filter(q=>q.targetNodeId===o&&q.targetInputIndex===d);if(_.length===0)return;const f=`flow_in_${o}_${d}`,g=`deficit_${o}_${d}`,m=`m_${o}`;let h=s.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const x=l.quantity;if(typeof x!="number")return;const w=s.isMineshaftDrill?x:x/h;r.variables[g]={total_cost:Sg,[f]:1};const k=`deficit_indicator_${o}_${d}`;r.variables[k]={total_cost:kg},r.ints[k]=1;const S=`deficit_binary_${o}_${d}`;r.constraints[S]={min:0,max:1},r.variables[k][S]=1;const b=`deficit_link_${o}_${d}`;r.constraints[b]={max:0};const E=w*1e4;r.variables[g][b]=1,r.variables[k][b]=-E,r.constraints[f]={min:0},_.forEach(q=>{const R=`f_${q.id}`;r.variables[R][f]||(r.variables[R][f]=0),r.variables[R][f]+=1}),r.variables[m][f]||(r.variables[m][f]=0),r.variables[m][f]-=w;const M=`max_flow_in_${o}_${d}`;r.constraints[M]={max:0},_.forEach(q=>{const R=`f_${q.id}`;r.variables[R][M]||(r.variables[R][M]=0),r.variables[R][M]+=1}),r.variables[m][M]=-w})}),n.forEach(o=>{const s=e.nodes[o];s&&s.outputs.forEach((c,l)=>{const d=`excess_${o}_${l}`,_=e.connections.filter(S=>S.sourceNodeId===o&&S.sourceOutputIndex===l);let f=s.cycleTime;(typeof f!="number"||f<=0)&&(f=1);const g=c.originalQuantity!==void 0?c.originalQuantity:c.quantity;if(typeof g!="number")return;const h=(s.isMineshaftDrill?g:g/f)*(s.machineCount||0);let x=0;_.forEach(S=>{const b=e.nodes[S.targetNodeId];if(!b)return;const E=b.inputs[S.targetInputIndex];if(!E)return;let M=b.cycleTime;(typeof M!="number"||M<=0)&&(M=1);const q=E.quantity;if(typeof q!="number")return;const C=(b.isMineshaftDrill?q:q/M)*(b.machineCount||0);x+=Math.min(h-x,C)});const w=Math.max(0,h-x),k=`min_excess_${o}_${l}`;r.constraints[k]={min:w},r.variables[d][k]=1})}),r},yq=e=>{const n=Object.keys(e.nodes),r=new Map;n.forEach((x,w)=>r.set(x,w));const o=n.length,s=new Int32Array(o).fill(-1),c=new Int32Array(o),l=new Uint8Array(o),d=[];let _=0;const f=[],g=x=>{s[x]=_,c[x]=_,_++,d.push(x),l[x]=1;const w=n[x];if(e.nodes[w].outputs.forEach(S=>{const b=e.products[S.productId];b&&b.connections.forEach(E=>{if(E.sourceNodeId!==w)return;const M=r.get(E.targetNodeId);M!==void 0&&(s[M]===-1?(g(M),c[x]=Math.min(c[x],c[M])):l[M]&&(c[x]=Math.min(c[x],s[M])))})}),c[x]===s[x]){const S=[];let b;do b=d.pop(),l[b]=0,S.push(n[b]);while(b!==x);S.length>1&&f.push(S)}};for(let x=0;x<o;x++)s[x]===-1&&g(x);const m=[];f.forEach(x=>{var M;const w=new Set(x),k=new Set;if(e.connections.forEach(q=>{const R=w.has(q.sourceNodeId),C=w.has(q.targetNodeId);if(R&&C){const j=q.productId;k.add(j)}}),k.size===0)return;let S=!1;for(const q of k)if(e.connections.some(C=>{if(C.productId!==q)return!1;const j=!w.has(C.sourceNodeId),P=w.has(C.targetNodeId);return j&&P})){S=!0;break}if(S)return;let b=!0;const E=[];for(const q of k){let R=!1;for(const C of x){const j=e.nodes[C];let P=j.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const V=j.isMineshaftDrill||((M=j.recipe)==null?void 0:M.isMineshaftDrill);let X=0;j.outputs.forEach(D=>{if(D.productId===q){const te=D.originalQuantity!==void 0?D.originalQuantity:D.quantity;typeof te=="number"&&(X+=V?te:te/P)}});let F=0;if(j.inputs.forEach(D=>{D.productId===q&&typeof D.quantity=="number"&&(F+=V?D.quantity:D.quantity/P)}),X>=F-1e-10){R=!0;break}}R||(b=!1,E.push(q))}b||m.push({nodes:x,nodeNames:x.map(q=>{var R,C;return((C=(R=e.nodes[q])==null?void 0:R.recipe)==null?void 0:C.name)||q}),problematicProducts:E})});const h=new Set;return f.forEach(x=>x.forEach(w=>h.add(w))),n.forEach(x=>{var S;if(h.has(x))return;const w=e.nodes[x];if(!w)return;const k=new Map;if(e.connections.forEach(b=>{if(b.sourceNodeId===x&&b.targetNodeId===x){const E=b.productId,M=w.outputs[b.sourceOutputIndex],q=w.inputs[b.targetInputIndex];M&&q&&M.productId===E&&q.productId===E&&k.set(E,{inputRate:q.rate,outputRate:M.rate})}}),k.size>0){let b=!1;for(const[E,M]of k){const q=e.products[E],R=1e-10;if(!(M.outputRate>M.inputRate+R)){if(M.outputRate<M.inputRate-R){if(!q.producers.some(j=>j.nodeId!==x)){b=!0;break}continue}if(Math.abs(M.outputRate-M.inputRate)<R){const C=q.consumers.some(P=>P.nodeId!==x),j=q.producers.some(P=>P.nodeId!==x);if(!C&&!j)continue;if(C&&!j){b=!0;break}if(j)continue}}}b&&m.push({nodes:[x],nodeNames:[((S=w.recipe)==null?void 0:S.name)||x],isSelfFeeding:!0})}}),m},gq=(e,n=new Set)=>{const r=yq(e);if(r.length>0)return{feasible:!1,unsustainableLoops:r,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const o=hq(e,n),s=fq.Solve(o);if(s.feasible){console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let c=0,l=0,d=0,_=0,f=0,g=0,m=0,h=0,x=0,w=0,k=0,S=0,b=0,E=0,M=0,q=0,R=0,C=0;Object.keys(s).forEach(P=>{var V,X;if(P.startsWith("deficit_indicator_")){const F=s[P]||0;F>Cr&&(w+=F,l+=F*kg)}if(P.startsWith("deficit_")&&!P.includes("indicator")){const F=s[P]||0;F>Cr&&(k+=F,d+=F*Sg)}if(P.startsWith("excess_indicator_")){const F=s[P]||0;if(F>Cr){const D=P.split("_"),te=D.slice(2,-1).join("_"),T=parseInt(D[D.length-1]),W=e.connections.some(Z=>Z.sourceNodeId===te&&Z.sourceOutputIndex===T)?Cg:qg;S+=F,_+=F*W}}if(P.startsWith("excess_")&&!P.includes("indicator")){const F=s[P]||0;if(F>Cr){const D=P.split("_"),te=D.slice(1,-1).join("_"),T=parseInt(D[D.length-1]),Y=e.connections.some(Z=>Z.sourceNodeId===te&&Z.sourceOutputIndex===T),W=Y?hp:yp;Y?b+=F:E+=F,f+=F*W}}if(P.startsWith("m_")){const F=P.substring(2),D=e.nodes[F],te=s[P]||0;D.cycleTime;const T=D.recipe.power_consumption;let Y=0;typeof T=="number"?Y=T:typeof T=="object"&&T!==null&&"max"in T&&(Y=T.max);const W=D.recipe.pollution,Z=typeof W=="number"?W:0,$=_t(D.recipe.machine_id),H=$&&typeof $.cost=="number"?$.cost:0,J=(((V=D.recipe.inputs)==null?void 0:V.length)||0)+(((X=D.recipe.outputs)==null?void 0:X.length)||0),L=Math.ceil(Y/15e5)*2,G=J*2,ce=1+L+G,ue=Math.ceil(te),pe=ue*ce,ye=te*Y,ge=te*Z,le=ue*H;M+=pe,q+=ye,R+=ge,C+=le,g+=pe*Mg,m+=ye*Ig,h+=ge*Eg,x+=le*Ng}}),c=l+d+_+f+g+m+h+x,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${w} inputs (cost: ${l.toExponential(2)})`),console.log(`    Deficiency amount: ${k.toFixed(4)} (cost: ${d.toExponential(2)})`),console.log(`    Excess count: ${S} outputs (cost: ${_.toExponential(2)})`),console.log(`    Connected excess: ${b.toFixed(4)} (cost: ${(b*hp).toExponential(2)})`),console.log(`    Unconnected excess: ${E.toFixed(4)} (cost: ${(E*yp).toExponential(2)})`),console.log(`    Model count: ${M.toFixed(0)} (cost: ${g.toExponential(2)})`),console.log(`    Power: ${q.toFixed(0)} W (cost: ${m.toFixed(2)})`),console.log(`    Pollution: ${R.toFixed(2)} %/hr (cost: ${h.toFixed(2)})`),console.log(`    Machine cost: $${C.toFixed(0)} (cost: ${x.toFixed(2)})`),console.log(`    Total: ${c.toExponential(2)}`),console.log("  Machine Count Changes:");let j=!1;Object.keys(e.nodes).forEach(P=>{var T;const V=e.nodes[P],X=`m_${P}`,F=s[X]||0,D=V.machineCount||0;Math.abs(F-D)>Cr&&(j=!0,console.log(`    ${((T=V==null?void 0:V.recipe)==null?void 0:T.name)||P}: ${D.toFixed(4)}  ${F.toFixed(4)}`))}),j||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return s},xq=(e,n)=>{const r=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(n.nodes).forEach(o=>{const s=n.nodes[o],c=`m_${o}`,l=e[c]!==void 0?e[c]:0,d=s.machineCount||0;if(l>=-Cr){const _=Math.max(0,l);Math.abs(_-d)>Cr&&r.set(o,_)}}),r},u0=(e,n,r,o={})=>{const{allowDeficiency:s=!1}=o;if(r.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const c=ts(e,n),l=new Set(r.map(m=>m.recipeBoxId)),d=gq(c,l);if(!d.feasible){if(d.unsustainableLoops){const m=d.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${m}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let _=!1;const f=[];if(Object.keys(d).forEach(m=>{var h;if(m.startsWith("deficit_")&&!m.includes("indicator")){const x=d[m]||0;if(x>Cr){_=!0;const w=m.split("_"),k=parseInt(w[w.length-1]),S=w.slice(1,-1).join("_"),b=c.nodes[S];if(b){const E=b.inputs[k];f.push({nodeId:S,nodeName:((h=b.recipe)==null?void 0:h.name)||S,inputIndex:k,productId:E==null?void 0:E.productId,deficitAmount:x})}}}}),_&&!s){const m=f.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${m}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:f}}const g=xq(d,c);return{success:g.size>0,updates:g,converged:!0,iterations:1,message:g.size>0?`Updated ${g.size} nodes`:"Network already balanced"}},vq={custom:aC},wq={custom:lC},$l=e=>typeof e=="number"?e.toFixed(4):"0",c0=({productName:e,connectedFlow:n,currentExcess:r,onTargetExcessCommit:o,styleType:s})=>{const[c,l]=z.useState(""),[d,_]=z.useState(!1),f=d?c:$l(r),g=()=>{if(!d)return;const k=parseFloat(c);isNaN(k)||o(k),_(!1),l("")},m=s==="input",h=m?"var(--input-bg)":"var(--output-bg)",x=m?"var(--input-border)":"var(--output-border)",w=m?"var(--input-text)":"var(--output-text)";return u.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${x}`,borderRadius:"var(--radius-sm)"},children:[u.jsx("div",{style:{color:w,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",$l(n),"/s"]}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[m?"Current Deficiency:":"Current Excess:"," ",$l(Math.abs(r)),"/s"]}),u.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:m?"Target Additional Demand:":"Target Excess:"}),u.jsx("input",{type:"text",value:f,onFocus:()=>{_(!0),l($l(r))},onChange:k=>l(k.target.value),onBlur:g,onKeyPress:k=>k.key==="Enter"&&g(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),u.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},d0=e=>{if(e<0)return 0;const n=1+5429*e/7322;return Math.pow(Math.log(n),1.1)};function bq(){const[e,n,r]=qS([]),[o,s,c]=ES([]),[l,d]=z.useState(0),[_,f]=z.useState(!1),[g,m]=z.useState(!1),[h,x]=z.useState(null),[w,k]=z.useState(null),[S,b]=z.useState("product"),[E,M]=z.useState("button"),[q,R]=z.useState(""),[C,j]=z.useState("name_asc"),[P,V]=z.useState("all"),[X,F]=z.useState("all"),[D,te]=z.useState("all"),[T,Y]=z.useState(null),[W,Z]=z.useState([]),[$,H]=z.useState(!1),[J,L]=z.useState(0),[G,ce]=z.useState(!1),[ue,pe]=z.useState(null),[ye,ge]=z.useState(""),[le,ve]=z.useState(null),[we,Oe]=z.useState("free"),[Re,Pe]=z.useState(!1),[We,Je]=z.useState(!1),[Ke,st]=z.useState(!1),[Wt,It]=z.useState(!1),[Rt,Lt]=z.useState(!1),[Ut,mi]=z.useState(!1),[Dt,Vi]=z.useState(()=>{const I=Yl();return{edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"}}),[oi,Gi]=z.useState(!1),[Xt,er]=z.useState(!1),[Ue,Ci]=z.useState(!1),[Vt,dn]=z.useState("pan"),[Ze,pn]=z.useState(0),[Fi,_n]=z.useState(!1),[ai,jn]=z.useState(!0),[Ot,wt]=z.useState({}),[at,Pn]=z.useState("perSecond"),[yt,Tn]=z.useState("total"),[de,Ge]=z.useState([]),[Ye,Ct]=z.useState(null),[bt,kt]=z.useState(null),[Nt,ot]=z.useState(null),[St,jt]=z.useState(null),[si,li]=z.useState(null),[jr,po]=z.useState({}),[ui,fi]=z.useState(null),[tr,Pr]=z.useState({x:0,y:0}),Rn=z.useRef(null),mn=z.useRef(null),_o=z.useRef(null),mo=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",Tr=z.useRef(null),Vn=z.useRef([]),ct=z.useCallback(I=>{const A=I.filter(K=>K.type!=="remove"),U=A.filter(K=>K.type==="position"&&K.dragging),O=A.filter(K=>!(K.type==="position"&&K.dragging));U.length>0&&r(U),O.length>0&&(Vn.current.push(...O),Tr.current&&clearTimeout(Tr.current),Tr.current=setTimeout(()=>{Vn.current.length>0&&(r(Vn.current),Vn.current=[])},50))},[r]),ua=z.useCallback(I=>{c(I)},[c]);z.useEffect(()=>{const I=Yl();yu(I),Vi({edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"}),wC(ji,nn,on);const A=()=>{const U="ontouchstart"in window||navigator.maxTouchPoints>0,O=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);Ci(U&&O)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const Gt=z.useCallback(()=>({onInputClick:qs,onOutputClick:da,isMobile:Ue,mobileActionMode:Vt,onDrillSettingsChange:Es,onLogicAssemblerSettingsChange:Is,onTreeFarmSettingsChange:pa,onIndustrialFireboxSettingsChange:yo,onTemperatureSettingsChange:hn,onBoilerSettingsChange:yn,onChemicalPlantSettingsChange:Lr,onWasteFacilitySettingsChange:Dr,onLiquidDumpSettingsChange:xn,onLiquidBurnerSettingsChange:Ru,onMiddleClick:ar,onHandleDoubleClick:gn,onMachineCountModeChange:fa}),[Ue,Vt]);z.useEffect(()=>{const I=rM();if(!(I!=null&&I.nodes))return;const A=Gt(),U=I.nodes.map(O=>{var se,ae,Se,Me;const K=_t((ae=(se=O.data)==null?void 0:se.recipe)==null?void 0:ae.machine_id);let ie=(Se=O.data)==null?void 0:Se.recipe;return K&&ie&&!((Me=ie.outputs)!=null&&Me.some(be=>be.temperature!==void 0))&&(ie=Ga(ie,K.id)),{...O,data:{...O.data,recipe:ie,machineCount:O.data.machineCount??1,displayMode:at,machineDisplayMode:yt,...A,globalPollution:Ze,flows:null,suggestions:[]}}});n(U),s(I.edges||[]),Z(I.targetProducts||[]),wt(I.soldProducts||{}),Ge(I.favoriteRecipes||[]),Ct(I.lastDrillConfig||null),kt(I.lastAssemblerConfig||null),ot(I.lastTreeFarmConfig||null),jt(I.lastFireboxConfig||null),li(I.lastWasteFacilityConfig||null),d(I.nodeId||0),L(I.targetIdCounter||0)},[]),z.useEffect(()=>{n(I=>I.map(A=>({...A,data:{...A.data,displayMode:at,machineDisplayMode:yt}})))},[at,yt,n]),z.useEffect(()=>{s(I=>I.map(A=>({...A,data:Dt})))},[Dt,s]),z.useEffect(()=>{const I={nodes:e,edges:o,targetProducts:W,nodeId:l,targetIdCounter:J,soldProducts:Ot,favoriteRecipes:de,lastDrillConfig:Ye,lastAssemblerConfig:bt,lastTreeFarmConfig:Nt,lastFireboxConfig:St,lastWasteFacilityConfig:si};localStorage.setItem("industrialist_canvas_state",JSON.stringify(I))},[e,o,W,l,J,Ot,de,Ye,bt,Nt,St,si]);const fo=z.useCallback(()=>{let I=0,A=0,U=0;return e.forEach(O=>{var Ie,ke;const{recipe:K,machine:ie,machineCount:se=0}=O.data||{};if(!K)return;const ae=typeof K.pollution=="number"?K.pollution:parseFloat(K.pollution);!isNaN(ae)&&isFinite(ae)&&(A+=ae*se);const Se=(((Ie=K.inputs)==null?void 0:Ie.length)||0)+(((ke=K.outputs)==null?void 0:ke.length)||0),Me=Math.ceil(se);if((ie==null?void 0:ie.id)==="m_industrial_firebox"){U+=Me*(1+Se*2);return}if((ie==null?void 0:ie.id)==="m_tree_farm"&&K.treeFarmSettings){const{trees:qe,harvesters:ze,sprinklers:Ve,controller:Qe,outputs:rt}=K.treeFarmSettings,gt=typeof K.power_consumption=="number"?K.power_consumption:0;I+=gt*se;const lt=Math.ceil(Ve/3),Oi=K.power_type==="HV"?2:Math.ceil(gt/15e5)*2,Jt=qe+ze+Ve+lt*3+Qe+rt*3+Oi;U+=Me*Jt;return}const be=K.power_consumption;let fe=0;typeof be=="number"?(fe=be,I+=be*se):typeof be=="object"&&be!==null&&"max"in be&&(fe=be.max,I+=fe*se);const Ce=K.power_type==="HV"?2:Math.ceil(fe/15e5)*2;U+=Me*(1+Ce+Se*2)}),{totalPower:I,totalPollution:A,totalModelCount:U}},[e]),hi=z.useMemo(()=>fo(),[e]);z.useEffect(()=>{if(ai||hi.totalPollution===0)return;const I=setInterval(()=>{if(Fi)return;const A=hi.totalPollution/3600;pn(U=>{if(typeof U!="number"||isNaN(U)||!isFinite(U))return U;const O=parseFloat((U+A).toFixed(4));return O!==U?O:U})},1e3);return()=>clearInterval(I)},[hi.totalPollution,Fi,ai]),z.useEffect(()=>{const I=setInterval(tn,2e4);return()=>clearInterval(I)},[]);const ir=z.useRef(null),Rr=z.useRef(Ze);z.useEffect(()=>{if(!(Math.abs(Ze-Rr.current)<.01))return Rr.current=Ze,ir.current&&clearTimeout(ir.current),ir.current=setTimeout(()=>{n(I=>{let A=!1;const U=I.map(O=>{const{recipe:K,machine:ie,globalPollution:se}=O.data||{};if(K!=null&&K.isTreeFarm&&K.treeFarmSettings){const{trees:ae,harvesters:Se,sprinklers:Me,outputs:be,controller:fe}=K.treeFarmSettings,Ce=Bp(ae,Se,Ze),Ie=_u(ae,Se,Me,be,fe,Ze);return A=!0,{...O,data:{...O.data,recipe:{...K,outputs:Ce,power_consumption:Ie?Ie.avgPowerConsumption:"Variable"},globalPollution:Ze}}}if((ie==null?void 0:ie.id)==="m_air_separation_unit"){const ae=d0(Ze),Se=K.outputs.map(Me=>Me.product_id==="p_residue"?{...Me,quantity:parseFloat(ae.toFixed(6))}:Me);return A=!0,{...O,data:{...O.data,recipe:{...K,outputs:Se},globalPollution:Ze}}}return se!==Ze?(A=!0,{...O,data:{...O.data,globalPollution:Ze}}):O});return A?U:I})},250),()=>clearTimeout(ir.current)},[Ze,n]);const[He,yi]=z.useState(()=>jh([],[],{skipTemperature:!0})),nr=z.useRef(null),Zt=z.useRef(""),Vr=z.useRef(!1),Fr=z.useRef(null),Le=z.useCallback((I="general")=>{Fr.current=I,Vr.current=!0},[]);z.useEffect(()=>{if(Vr.current)return nr.current&&clearTimeout(nr.current),nr.current=setTimeout(()=>{const I=`${e.length}-${o.length}-${e.map(A=>{var U,O,K,ie,se,ae,Se,Me,be,fe,Ce,Ie,ke;return`${A.id}:${(U=A.data)==null?void 0:U.machineCount}:${JSON.stringify(((K=(O=A.data)==null?void 0:O.recipe)==null?void 0:K.temperatureSettings)||{})}:${JSON.stringify(((se=(ie=A.data)==null?void 0:ie.recipe)==null?void 0:se.drillSettings)||{})}:${JSON.stringify(((Se=(ae=A.data)==null?void 0:ae.recipe)==null?void 0:Se.assemblerSettings)||{})}:${JSON.stringify(((be=(Me=A.data)==null?void 0:Me.recipe)==null?void 0:be.treeFarmSettings)||{})}:${JSON.stringify(((Ce=(fe=A.data)==null?void 0:fe.recipe)==null?void 0:Ce.fireboxSettings)||{})}:${JSON.stringify(((ke=(Ie=A.data)==null?void 0:Ie.recipe)==null?void 0:ke.chemicalPlantSettings)||{})}`}).join(",")}`;if(I!==Zt.current){const A=Fr.current||"general",U=["connection","node","temperatureSettings","boilerSettings"].includes(A);console.log(`[Recalculation] Reason: ${A}, Temperature propagation: ${U}`);const O=jh(e,o,{skipTemperature:!U,previousTemperatureData:U?null:He==null?void 0:He.temperatureData});yi(O),Zt.current=I}Vr.current=!1,Fr.current=null},100),()=>clearTimeout(nr.current)},[e,o,He]);const Fn=z.useMemo(()=>UC(He),[He]),zn=z.useMemo(()=>GC(He),[He]),ci=z.useRef(null),Ln=z.useRef(null),zr=z.useCallback((I,A,U)=>{var ie,se,ae,Se,Me;const O=(ie=I.data)==null?void 0:ie.recipe,K=A.byNode[I.id];if(O!=null&&O.isWasteFacility){const be=Math.min(((se=K==null?void 0:K.inputFlows[0])==null?void 0:se.connected)||0,240),fe=Math.min(((ae=K==null?void 0:K.inputFlows[1])==null?void 0:ae.connected)||0,240),Ce=O.wasteFacilitySettings||{},Ie=Ql(be,fe),ke=fu(be,fe,O.inputs[0].product_id,O.inputs[1].product_id);return{...I,data:{...I.data,recipe:{...O,inputs:ke,cycle_time:Ie.cycleTime,wasteFacilitySettings:{...Ce,itemFlowRate:be,fluidFlowRate:fe}},flows:K||null,suggestions:U||[]}}}if(O!=null&&O.isLiquidDump){const be=((Se=I.data)==null?void 0:Se.machineCount)||1,fe=O.inputs.map((Ie,ke)=>{var ze;return Math.min(((ze=K==null?void 0:K.inputFlows[ke])==null?void 0:ze.connected)||0,15*be)/be}),Ce=Ja(O.inputs,fe);return{...I,data:{...I.data,recipe:{...O,pollution:Ce},flows:K||null,suggestions:U||[]}}}if(O!=null&&O.isLiquidBurner){const be=((Me=I.data)==null?void 0:Me.machineCount)||1,fe=O.inputs.map((Ie,ke)=>{var ze;return Math.min(((ze=K==null?void 0:K.inputFlows[ke])==null?void 0:ze.connected)||0,15*be)/be}),Ce=es(O.inputs,fe);return{...I,data:{...I.data,recipe:{...O,pollution:Ce},flows:K||null,suggestions:U||[]}}}return{...I,data:{...I.data,flows:K||null,suggestions:U||[]}}},[]);z.useEffect(()=>{var I;if((I=He==null?void 0:He.flows)!=null&&I.byNode&&Ln.current!==He.flows)return Ln.current=He.flows,ci.current&&clearTimeout(ci.current),ci.current=setTimeout(()=>{n(A=>(He.temperatureData?ip(A,He.temperatureData,He.graph):A).map(O=>zr(O,He.flows,He.suggestions)))},250),()=>clearTimeout(ci.current)},[He,n,zr]);const rr=z.useMemo(()=>Fn.map(I=>({...I,isSold:Ot[I.productId]??(typeof I.product.price=="number"&&I.product.price>0)})),[Fn,Ot]),or=z.useMemo(()=>rr.reduce((I,A)=>A.isSold&&typeof A.product.price=="number"?I+A.product.price*A.excessRate:I,0),[rr]),fn=z.useMemo(()=>{const I=new Map,A=new Map,U=(K,ie,se)=>{I.set(K,(I.get(K)||0)+ie),A.has(K)||A.set(K,se)};e.forEach(K=>{var Se,Me,be,fe,Ce,Ie;const{machine:ie,machineCount:se=0,recipe:ae}=K.data||{};if(ie){if(ie.id==="m_tree_farm"&&(ae!=null&&ae.treeFarmSettings)){const{trees:ke,harvesters:qe,sprinklers:ze,outputs:Ve,controller:Qe}=ae.treeFarmSettings,rt=Math.ceil(ze/3);U("m_tree",Math.ceil(ke*se),((Se=_t("m_tree"))==null?void 0:Se.cost)||0),U("m_tree_harvester",Math.ceil(qe*se),((Me=_t("m_tree_harvester"))==null?void 0:Me.cost)||0),U("m_tree_farm_sprinkler",Math.ceil(ze*se),((be=_t("m_tree_farm_sprinkler"))==null?void 0:be.cost)||0),U("m_tree_farm_water_tank",Math.ceil(rt*se),((fe=_t("m_tree_farm_water_tank"))==null?void 0:fe.cost)||0),U("m_tree_farm_output",Math.ceil(Ve*se),((Ce=_t("m_tree_farm_output"))==null?void 0:Ce.cost)||0),U("m_tree_farm_controller",Math.ceil(Qe*se),((Ie=_t("m_tree_farm_controller"))==null?void 0:Ie.cost)||0);return}U(ie.id,Math.ceil(se),typeof ie.cost=="number"?ie.cost:0)}});const O=Array.from(I.entries()).map(([K,ie])=>{const se=nn.find(Se=>Se.id===K),ae=A.get(K);return{machineId:K,machine:se,count:ie,cost:ae,totalCost:ie*ae}}).sort((K,ie)=>K.machine.name.localeCompare(ie.machine.name));return{stats:O,totalCost:O.reduce((K,ie)=>K+ie.totalCost,0)}},[e,nn]),Kt=(I,A)=>n(U=>U.map(O=>O.id===I?{...O,data:A(O.data)}:O)),zi=z.useCallback((I,A,U,O)=>{const K=Object.keys(ps).map(ae=>parseInt(ae));let ie=null,se=0;return K.forEach(ae=>{const Me=ps[ae].find(be=>be.product_id===I);if(Me){const be=co(A,U,O,ae);if(be){const fe=O?1.1:1,Ce=Me.quantity*fe*be.dutyCycle;Ce>se&&(se=Ce,ie=ae)}}}),ie},[]),ho=z.useCallback((I,A,U)=>{const O={drillConfig:Ye,assemblerConfig:bt,treeFarmConfig:Nt,fireboxConfig:St},K=(He==null?void 0:He.flows)||null;return KC(I,A,U,zi,O,Ze,K)},[Ye,bt,Nt,St,zi,Ze,He]),ca=z.useCallback(I=>{const A=e.find(ie=>ie.id===I.source),U=e.find(ie=>ie.id===I.target);if(!A||!U)return;const O=A.data.recipe.outputs[parseInt(I.sourceHandle.split("-")[1])],K=U.data.recipe.inputs[parseInt(I.targetHandle.split("-")[1])];if(!(!O||!K)){if(K.isAnyProduct){const ie=Et(O.product_id);if(K.acceptedType&&(ie==null?void 0:ie.type)!==K.acceptedType)return;n(se=>se.map(ae=>{var be;if(ae.id!==U.id)return ae;const Se=parseInt(I.targetHandle.split("-")[1]),Me=[...ae.data.recipe.inputs];if(Me[Se]={...Me[Se],product_id:O.product_id,isAnyProduct:!1},ae.data.recipe.isWasteFacility){const fe=ae.data.recipe.wasteFacilitySettings||{},Ce=(be=He==null?void 0:He.flows)==null?void 0:be.byNode[I.source],Ie=parseInt(I.sourceHandle.split("-")[1]),ke=Ce!=null&&Ce.outputFlows[Ie]?Ce.outputFlows[Ie].produced-Ce.outputFlows[Ie].connected:0,qe=Math.min(ke,240);Se===0?fe.itemFlowRate=qe:Se===1&&(fe.fluidFlowRate=qe);const ze=Ql(fe.itemFlowRate||0,fe.fluidFlowRate||0),Ve=fu(fe.itemFlowRate||0,fe.fluidFlowRate||0,Se===0?O.product_id:Me[0].product_id,Se===1?O.product_id:Me[1].product_id);return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:Ve,cycle_time:ze.cycleTime,wasteFacilitySettings:fe}}}}if(ae.data.recipe.isLiquidDump||ae.data.recipe.isLiquidBurner){const fe=ae.data.recipe.isLiquidDump?Ja(Me):es(Me);return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:Me,pollution:fe}}}}return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:Me}}}}))}else if(O.product_id!==K.product_id)return;s(ie=>Gd({...I,type:"custom",animated:!1,data:Dt},ie)),tn(),Le("connection")}},[s,e,Dt,Le,n,He]),et=()=>{f(!1),x(null),k(null),b("product"),R(""),j("name_asc"),V("all"),F("all"),Y(null),M("button"),po({}),te("all")},Cs=z.useCallback(()=>{f(!0),Y(null),M("button")},[]),qs=z.useCallback((I,A,U,O)=>{if(O!=null&&O.ctrlKey){s(ie=>ie.filter(se=>!(se.target===A&&se.targetHandle===`left-${U}`))),tn(),Le("connection");return}const K=Et(I);K&&(f(!0),x(K),Y({nodeId:A,inputIndex:U,productId:I}),M("rectangle"),F("producers"))},[s,Ue,Vt,Le]),da=z.useCallback((I,A,U,O)=>{var Se,Me;if(O!=null&&O.ctrlKey){s(be=>be.filter(fe=>!(fe.source===A&&fe.sourceHandle===`right-${U}`))),tn(),Le("connection");return}const K=Dn.current.find(be=>be.id===A),ie=(Me=(Se=K==null?void 0:K.data)==null?void 0:Se.recipe)==null?void 0:Me.machine_id,se=ie&&ri[ie],ae=Et(I);ae&&(f(!0),x(ae),Y({nodeId:A,outputIndex:U,productId:I,isOutput:!0,isFromHeatSource:!!se}),M("rectangle"),F("consumers"))},[s,Ue,Vt,Le]),qi=z.useCallback((I,A,U)=>{s(O=>{const K=O.filter(ie=>{var se,ae,Se,Me;if(ie.source===I){const be=parseInt(ie.sourceHandle.split("-")[1]);if(be>=U.length)return!1;const fe=U[be],Ce=e.find(qe=>qe.id===ie.target);if(!Ce)return!1;const Ie=parseInt(ie.targetHandle.split("-")[1]),ke=(ae=(se=Ce.data)==null?void 0:se.recipe)==null?void 0:ae.inputs[Ie];if(!ke||ke.product_id!==fe.product_id)return!1}if(ie.target===I){const be=parseInt(ie.targetHandle.split("-")[1]);if(be>=A.length)return!1;const fe=A[be],Ce=e.find(qe=>qe.id===ie.source);if(!Ce)return!1;const Ie=parseInt(ie.sourceHandle.split("-")[1]),ke=(Me=(Se=Ce.data)==null?void 0:Se.recipe)==null?void 0:Me.outputs[Ie];if(!ke||ke.product_id!==fe.product_id)return!1}return!0});return K.length!==O.length&&(tn(),Le("connection")),K})},[s,e,Le]),Es=z.useCallback((I,A,U,O)=>{Ct({drillHead:A.drillHead,consumable:A.consumable,machineOil:A.machineOil});const K=A.drillHead&&A.depth?co(A.drillHead,A.consumable,A.machineOil,A.depth):null;Kt(I,ie=>({...ie,recipe:{...ie.recipe,inputs:U.length>0?U:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:A,cycle_time:1,power_consumption:K?{max:K.drillingPower*1e6,average:(K.drillingPower*K.lifeTime+K.idlePower*(K.replacementTime+K.travelTime))/K.totalCycleTime*1e6}:"Variable",pollution:K?K.pollution:"Variable"},leftHandles:Math.max(U.length,1),rightHandles:Math.max(O.length,1)})),qi(I,U,O),Le("settings")},[qi,Le]),Is=z.useCallback((I,A,U,O)=>{kt({outerStage:A.outerStage,innerStage:A.innerStage,machineOil:A.machineOil,tickCircuitDelay:A.tickCircuitDelay});const ie=!A.outerStage||!A.innerStage?"":A.outerStage===1?`p_${A.innerStage}x_microchip`:`p_${A.outerStage}x${A.innerStage}x_microchip`,se=ie?Ss(ie,A.machineOil,A.tickCircuitDelay):null;Kt(I,ae=>({...ae,recipe:{...ae.recipe,inputs:U.length>0?U:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:A,cycle_time:se?se.cycleTime:"Variable",power_consumption:se?{max:se.maxPowerConsumption,average:se.avgPowerConsumption}:"Variable"},leftHandles:Math.max(U.length,1),rightHandles:Math.max(O.length,1)})),qi(I,U,O),Le("settings")},[qi,Le]),pa=z.useCallback((I,A,U,O)=>{ot({trees:A.trees,harvesters:A.harvesters,sprinklers:A.sprinklers,outputs:A.outputs});const K=_u(A.trees,A.harvesters,A.sprinklers,A.outputs,A.controller,Ze);Kt(I,ie=>({...ie,recipe:{...ie.recipe,inputs:U.length>0?U:[{product_id:"p_water",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:A,cycle_time:1,power_consumption:K?K.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max(U.length,1),rightHandles:Math.max(O.length,1)})),s(ie=>ie.filter(se=>{if(se.source===I||se.target===I){const ae=parseInt((se.source===I?se.sourceHandle:se.targetHandle).split("-")[1]);return se.source===I?ae<O.length:ae<U.length}return!0})),Le("settings")},[s,Ze,Le]),yo=z.useCallback((I,A,U,O)=>{jt({fuel:A.fuel}),Kt(I,K=>({...K,recipe:{...K.recipe,inputs:U,fireboxSettings:A,cycle_time:O?O.cycleTime:K.recipe.cycle_time,power_consumption:0}})),Le("settings")},[Le]),hn=z.useCallback((I,A,U,O)=>{n(K=>K.map(ie=>{if(ie.id!==I)return ie;const se=_t(ie.data.recipe.machine_id),ae=un(se==null?void 0:se.id);let Se=ie.data.recipe.power_type;(se==null?void 0:se.id)==="m_electric_water_heater"&&(Se=A.temperature>=320?"HV":"MV");let Me={...ie.data.recipe,outputs:U,temperatureSettings:A,power_consumption:O??ie.data.recipe.power_consumption,power_type:Se};if((se==null?void 0:se.id)==="m_water_treatment_plant"&&ae){const be=A.temperature||Xn,fe=Ir(se.id,be,1),Ce=90*fe,Ie=17.6,ke=17.6;Me={...Me,inputs:Me.inputs.map(qe=>qe.product_id==="p_water"?{...qe,quantity:Ie*fe,originalQuantity:Ie}:qe.product_id==="p_distilled_water"?{...qe,quantity:ke*fe,originalQuantity:ke}:qe),outputs:Me.outputs.map(qe=>qe.product_id==="p_steam"?{...qe,quantity:Ce,originalQuantity:90}:qe)}}return{...ie,data:{...ie.data,recipe:Me}}})),Le("temperatureSettings")},[n,Le]),yn=z.useCallback((I,A)=>{n(U=>U.map(O=>{if(O.id!==I)return O;const K=_t(O.data.recipe.machine_id),ie=ri[K==null?void 0:K.id];return!ie||ie.type!=="boiler"?O:{...O,data:{...O.data,recipe:{...O.data.recipe,temperatureSettings:A}}}})),Le("boilerSettings")},[n,Le]),gn=z.useCallback((I,A,U,O,K)=>{const ie=A==="right"?"output":"input",se=K==null?void 0:K.find(ae=>ae.nodeId===I&&ae.handleType===ie&&ae.handleIndex===U);se&&(n(ae=>ae.map(Se=>{var Ce,Ie;if(Se.id!==I)return Se;const Me=((Ce=Se.data)==null?void 0:Ce.machineCountMode)||"free",be=(Ie=Se.data)==null?void 0:Ie.cappedMachineCount;if(Me==="locked")return console.log(`Node ${I} is locked - suggestion ignored`),Se;let fe=se.suggestedMachineCount;return Me==="capped"&&typeof be=="number"&&fe>be&&(console.log(`Node ${I} is capped at ${be} - clamping suggestion from ${fe} to ${be}`),fe=be),{...Se,data:{...Se.data,machineCount:fe}}})),Le("machineCount"))},[n,Le]),Lr=z.useCallback((I,A)=>{n(U=>U.map(O=>{if(O.id!==I)return O;const K=_t(O.data.recipe.machine_id);if((K==null?void 0:K.id)!=="m_chemical_plant")return O;const ie=on.find(ae=>ae.id===O.data.recipe.id);if(!ie)return O;const se=OM(ie,A.speedFactor,A.efficiencyFactor);return{...O,data:{...O.data,recipe:se}}})),Le("settings")},[n,Le]),Dr=z.useCallback((I,A,U,O)=>{li({itemProductId:A.itemProductId,fluidProductId:A.fluidProductId}),n(K=>K.map(ie=>{if(ie.id!==I)return ie;const se=ie.data.recipe.wasteFacilitySettings||{},ae=se.itemFlowRate||0,Se=se.fluidFlowRate||0,Me=Ql(ae,Se);return{...ie,data:{...ie.data,recipe:{...ie.data.recipe,inputs:U.length>0?U:ie.data.recipe.inputs,wasteFacilitySettings:{...A,itemFlowRate:ae,fluidFlowRate:Se},cycle_time:Me.cycleTime},leftHandles:Math.max(U.length,1)}}})),qi(I,U,O),Le("settings")},[qi,Le,n]),xn=z.useCallback((I,A,U,O)=>{n(K=>K.map(ie=>ie.id!==I?ie:{...ie,data:{...ie.data,recipe:{...ie.data.recipe,inputs:U.length>0?U:ie.data.recipe.inputs,liquidDumpSettings:A,pollution:Ja(U)},leftHandles:Math.max(U.length,1)}})),qi(I,U,O),Le("settings")},[qi,Le,n]),Ru=z.useCallback((I,A,U,O)=>{n(K=>K.map(ie=>ie.id!==I?ie:{...ie,data:{...ie.data,recipe:{...ie.data.recipe,inputs:U.length>0?U:ie.data.recipe.inputs,liquidBurnerSettings:A,pollution:es(U)},leftHandles:Math.max(U.length,1)}})),qi(I,U,O),Le("settings")},[qi,Le,n]),Li=z.useCallback((I,A=null)=>{var Ce,Ie;const U=_t(I.machine_id);if(!U||!I.inputs||!I.outputs){alert("Error: Invalid machine or recipe data");return}let O=Ga(I,U.id);const K=`node-${l}`,ie=T?e.find(ke=>ke.id===T.nodeId):null;let se;if(ie)se={x:ie.position.x+(T.isOutput?400:-400),y:ie.position.y};else if(mn.current&&Rn.current){const ke=Rn.current.getBoundingClientRect(),qe=mn.current.screenToFlowPosition({x:ke.left+ke.width/2,y:ke.top+ke.height/2}),ze=320,Ve=300,Qe=50;let rt={x:qe.x-ze/2,y:qe.y-Ve/2},gt=0;for(;gt<20&&e.some(Bt=>{const ga=Math.abs(Bt.position.x-rt.x),Du=Math.abs(Bt.position.y-rt.y);return ga<ze+Qe&&Du<Ve+Qe});){const Oi=gt/20*Math.PI*2,Jt=100+gt*50;rt={x:qe.x-ze/2+Math.cos(Oi)*Jt,y:qe.y-Ve/2+Math.sin(Oi)*Jt},gt++}se=rt}else se={x:Math.random()*400+100,y:Math.random()*300+100};if(((Ce=ri[U.id])==null?void 0:Ce.type)==="boiler"){const ke={heatLoss:((Ie=O.temperatureSettings)==null?void 0:Ie.heatLoss)??0,coolantTemp:qr},qe=Op(U.id,ke,qr,null,qr),ze=ri[U.id],Ve=hg(O.outputs,qe,!0,ze,qr);O={...O,outputs:Ve,temperatureSettings:ke}}const Se={drillConfig:Ye,assemblerConfig:bt,treeFarmConfig:Nt,fireboxConfig:St};if(vg(O)&&(O=xg(O,T,h,Se,Ze,zi),O.drillSettings&&Ct({drillHead:O.drillSettings.drillHead,consumable:O.drillSettings.consumable,machineOil:O.drillSettings.machineOil}),O.assemblerSettings&&kt({outerStage:O.assemblerSettings.outerStage,innerStage:O.assemblerSettings.innerStage,machineOil:O.assemblerSettings.machineOil,tickCircuitDelay:O.assemblerSettings.tickCircuitDelay}),O.treeFarmSettings&&ot({trees:O.treeFarmSettings.trees,harvesters:O.treeFarmSettings.harvesters,sprinklers:O.treeFarmSettings.sprinklers,outputs:O.treeFarmSettings.outputs}),O.fireboxSettings&&jt({fuel:O.fireboxSettings.fuel})),U.id==="m_air_separation_unit"){const ke=d0(Ze),qe=O.outputs.map(ze=>ze.product_id==="p_residue"?{...ze,quantity:parseFloat(ke.toFixed(6))}:ze);O={...O,outputs:qe}}const Me=A!==null?A:jr[I.id]??1,be=Gt(),fe={id:K,type:"custom",position:se,data:{recipe:O,machine:U,machineCount:Me,machineCountMode:"free",cappedMachineCount:void 0,displayMode:at,machineDisplayMode:yt,leftHandles:Math.max(O.inputs.length,1),rightHandles:Math.max(O.outputs.length,1),...be,globalPollution:Ze,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};return n(ke=>{const qe=[...ke,fe];return Le("node"),T&&Me>0&&setTimeout(()=>{var Qe,rt,gt;const ze=T.isOutput?"inputs":"outputs";let Ve=-1;if((O.isWasteFacility||O.id==="r_underground_waste_facility")&&!T.isOutput)T.productId==="p_concrete_block"?Ve=2:T.productId==="p_lead_ingot"?Ve=3:Ve=O[ze].findIndex(lt=>lt.product_id===T.productId);else if(T.isOutput&&T.isFromHeatSource){const lt=_t(O.machine_id);if(lt&&((Qe=ri[lt.id])==null?void 0:Qe.type)==="boiler"&&O.inputs.length>=2){const Jt=(rt=O.inputs[0])==null?void 0:rt.product_id,Bt=(gt=O.inputs[1])==null?void 0:gt.product_id;Jt===Bt&&Bt===T.productId||Bt===T.productId?Ve=1:Ve=O[ze].findIndex(ga=>ga.product_id===T.productId)}else Ve=O[ze].findIndex(Jt=>Jt.product_id===T.productId)}else Ve=O[ze].findIndex(lt=>lt.product_id===T.productId);if(Ve!==-1){const lt=T.isOutput?T.outputIndex:Ve,Oi=T.isOutput?Ve:T.inputIndex,Jt={source:T.isOutput?T.nodeId:K,sourceHandle:`right-${lt}`,target:T.isOutput?K:T.nodeId,targetHandle:`left-${Oi}`,type:"custom",animated:!1,data:Dt};s(Bt=>Gd(Jt,Bt)),tn(),Le("connection")}},50),qe}),d(ke=>ke+1),Le(),K},[l,e,n,s,at,yt,Ye,bt,Nt,St,zi,jr,Ze,h,Le,T,Dt,Gt]),Di=z.useCallback(I=>{n(A=>A.filter(U=>U.id!==I)),s(A=>A.filter(U=>U.source!==I&&U.target!==I)),Z(A=>A.filter(U=>U.recipeBoxId!==I)),tn(),Le("node")},[n,s,Le]),_a=z.useCallback(I=>{var U;W.find(O=>O.recipeBoxId===I.id)?(Z(O=>O.filter(K=>K.recipeBoxId!==I.id)),Kt(I.id,O=>({...O,isTarget:!1}))):(U=I.data)!=null&&U.recipe&&(Z(O=>[...O,{id:`target_${J}`,recipeBoxId:I.id}]),L(O=>O+1),Kt(I.id,O=>({...O,isTarget:!0})))},[W,J]),ma=z.useCallback((I,A,U,O)=>{var ze;const K=W.find(Ve=>Ve.id===I);if(!K)return;const ie=e.find(Ve=>Ve.id===K.recipeBoxId);if(!ie)return;const{recipe:se,machine:ae,machineCount:Se=0}=ie.data||{};if(!se)return;const Me=se.isMineshaftDrill||se.id==="r_mineshaft_drill";let be=se.cycle_time;if((typeof be!="number"||be<=0)&&(be=1),un(ae==null?void 0:ae.id)){const Ve=En[ae.id];if((Ve==null?void 0:Ve.type)==="steam_input"&&uo(se)){const Qe=se.tempDependentInputTemp??Xn;be=Ir(ae.id,Qe,be)}}(typeof be!="number"||be<=0)&&(be=1);const Ce=(ze=He==null?void 0:He.flows)==null?void 0:ze.byNode[K.recipeBoxId];if(!Ce)return;let Ie=0,ke=0;if(A==="output"){const Ve=Ce.outputFlows[U];if(!Ve)return;Ie=Ve.connected;const Qe=se.outputs[U],rt=Qe.originalQuantity!==void 0?Qe.originalQuantity:Qe.quantity;ke=Me?rt:rt/be}else{const Ve=Ce.inputFlows[U];if(!Ve)return;Ie=Ve.connected;const Qe=se.inputs[U];ke=Me?Qe.quantity:Qe.quantity/be}if(ke<=0)return;const qe=(Ie+O)/ke;Kt(K.recipeBoxId,Ve=>({...Ve,machineCount:qe})),Le("machineCount")},[W,e,He,Le]),go=z.useCallback(I=>{const A=W.find(U=>U.id===I);A&&(Z(U=>U.filter(O=>O.id!==I)),Kt(A.recipeBoxId,U=>({...U,isTarget:!1})))},[W]),Ns=z.useCallback((I,A)=>{if(Ue){if(Vt==="target"){_a(A);return}else if(Vt==="delete"){Di(A.id);return}}I.shiftKey&&!I.ctrlKey&&!I.altKey?_a(A):I.ctrlKey&&I.altKey&&Di(A.id)},[Ue,Vt,_a,Di]),Vu=z.useCallback((I,A)=>{var U,O;I.stopPropagation(),pe(A.id),ge(String(((U=A.data)==null?void 0:U.machineCount)??0)),Oe(((O=A.data)==null?void 0:O.machineCountMode)||"free"),ce(!0)},[]),Dn=z.useRef(e),Or=z.useRef(o);z.useEffect(()=>{Dn.current=e},[e]),z.useEffect(()=>{Or.current=o},[o]);const ar=z.useCallback(I=>{const A=Dn.current.find(U=>U.id===I);A&&fi({recipe:{...A.data.recipe},machine:A.data.machine,machineCount:A.data.machineCount})},[]),xo=z.useCallback(I=>{if(!Rn.current)return;const A=Rn.current.getBoundingClientRect();Pr({x:I.clientX-A.left,y:I.clientY-A.top})},[]),Fu=z.useCallback(I=>{if(!ui||I.button!==0||(I.stopPropagation(),!mn.current))return;const A=mn.current.screenToFlowPosition({x:I.clientX,y:I.clientY});A.x-=160,A.y-=150;const U=`node-${l}`,O=Gt(),K={id:U,type:"custom",position:A,data:{recipe:ui.recipe,machine:ui.machine,machineCount:ui.machineCount,displayMode:at,machineDisplayMode:yt,leftHandles:ui.recipe.inputs.length,rightHandles:ui.recipe.outputs.length,...O,globalPollution:Ze,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};n(ie=>[...ie,K]),d(ie=>ie+1),fi(null),Le("node")},[ui,l,at,yt,Ze,n,Gt,Le]),zu=z.useCallback(I=>{I.button===2&&fi(null)},[]),Br=z.useCallback((I=!1)=>{var U,O;let A=parseFloat(ye);if(isNaN(A)||A<0){if(le){alert("Machine count must be 0 or greater. Please enter a valid number.");return}A=0}if(ue&&!le){const K=e.find(ae=>ae.id===ue),ie=((U=K==null?void 0:K.data)==null?void 0:U.machineCount)||0;let se=(O=K==null?void 0:K.data)==null?void 0:O.cappedMachineCount;if(we==="capped"?se=A:we==="free"&&(se=void 0),I&&ie>0&&A!==ie){const ae=ts(e,o),Se=He==null?void 0:He.flows;if(Se){const Me=XC(ue,ie,A,ae,Se,e);n(be=>be.map(fe=>{const Ce=Me.get(fe.id);return fe.id===ue?{...fe,data:{...fe.data,machineCount:A,machineCountMode:we,cappedMachineCount:se}}:Ce!==void 0?{...fe,data:{...fe.data,machineCount:Ce}}:fe}))}else Kt(ue,Me=>({...Me,machineCount:A,machineCountMode:we,cappedMachineCount:se}))}else Kt(ue,ae=>({...ae,machineCount:A,machineCountMode:we,cappedMachineCount:se}))}else le&&Kt(le,K=>({...K,machineCount:A}));ce(!1),pe(null),ge(""),Oe("free"),ve(null),Le("machineCount")},[ue,ye,we,le,e,o,He,n,Di,Le]),Ar=z.useCallback(()=>{le&&(Di(le),f(!0),x(null),k(null),b("product")),ce(!1),pe(null),ge(""),Oe("free"),ve(null)},[le,Di]),fa=z.useCallback((I,A,U)=>{let O,K;A==="free"?(O="capped",K=U):A==="capped"?(O="locked",K=U):(O="free",K=void 0),n(ie=>ie.map(se=>se.id!==I?se:{...se,data:{...se.data,machineCountMode:O,cappedMachineCount:K}}))},[n]),js=z.useCallback(()=>{if(W.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let I=u0(e,o,W,{allowDeficiency:!1});if(!I.success&&I.hasDeficiency)if(window.confirm(`${I.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))I=u0(e,o,W,{allowDeficiency:!0});else return;I.success?(n(A=>A.map(U=>{const O=I.updates.get(U.id);return O!==void 0?{...U,data:{...U.data,machineCount:O}}:U})),Le("machineCount"),alert(`Success! Updated ${I.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(I.message||"No changes needed - production line is already balanced.")},[W,e,o,n,Le]),Ki=()=>{if(!h)return[];const I=Et(h.id),A=NC(h.id),U=IC(h.id),O=[xh,bh,kh,sp,cp,pp],K=O.filter(ae=>YC(ae.id).includes(h.id)),ie=O.filter(ae=>{if(QC(ae.id).includes(h.id))return!0;if(I){if(ae.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner")return!1}return!1}),se=O.filter(ae=>ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner"?(I==null?void 0:I.type)==="fluid":ae.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return X==="producers"?[...A,...K]:X==="consumers"?[...U,...ie]:X==="disposal"?se:Array.from(new Map([...A,...U,...K,...ie,...se].map(ae=>[ae.id,ae])).values())};z.useEffect(()=>{if(_){const I=S==="product"?Ki():Ol(w==null?void 0:w.id),A=T?e.find(O=>O.id===T.nodeId):null,U={};I.forEach(O=>{U[O.id]=ho(O,A,T)}),po(U)}},[_,S,h,w,T,e,X]);const ha=z.useCallback(()=>{const I=document.createElement("input");I.type="file",I.accept=".json",I.onchange=A=>{var K;const U=(K=A.target.files)==null?void 0:K[0];if(!U)return;const O=new FileReader;O.onload=ie=>{try{const se=JSON.parse(ie.target.result);if(!se.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const ae=se.canvas.nodes||[],Se=[];if(ae.forEach(fe=>{var Ie,ke,qe,ze,Ve,Qe,rt,gt;const Ce=(ke=(Ie=fe.data)==null?void 0:Ie.recipe)==null?void 0:ke.machine_id;Ce&&!_t(Ce)&&Se.push(`Machine: ${Ce}`),(Ve=(ze=(qe=fe.data)==null?void 0:qe.recipe)==null?void 0:ze.inputs)==null||Ve.forEach(lt=>{lt.product_id!=="p_variableproduct"&&!Et(lt.product_id)&&Se.push(`Product: ${lt.product_id}`)}),(gt=(rt=(Qe=fe.data)==null?void 0:Qe.recipe)==null?void 0:rt.outputs)==null||gt.forEach(lt=>{lt.product_id!=="p_variableproduct"&&!Et(lt.product_id)&&Se.push(`Product: ${lt.product_id}`)})}),Se.length>0){const fe=[...new Set(Se)];alert(`Cannot import canvas - missing items:
${fe.slice(0,10).join(`
`)}${fe.length>10?`
...and ${fe.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const Me=Gt(),be=ae.map(fe=>{var ke,qe,ze,Ve;const Ce=_t((qe=(ke=fe.data)==null?void 0:ke.recipe)==null?void 0:qe.machine_id);let Ie=(ze=fe.data)==null?void 0:ze.recipe;return Ce&&Ie&&!((Ve=Ie.outputs)!=null&&Ve.some(Qe=>Qe.temperature!==void 0))&&(Ie=Ga(Ie,Ce.id)),{...fe,data:{...fe.data,recipe:Ie,machineCount:fe.data.machineCount??1,displayMode:at,machineDisplayMode:yt,...Me,globalPollution:Ze,flows:null,suggestions:[]}}});n(be),s(se.canvas.edges||[]),Z(se.canvas.targetProducts||[]),wt(se.canvas.soldProducts||{}),Ge(se.canvas.favoriteRecipes||[]),Ct(se.canvas.lastDrillConfig||null),kt(se.canvas.lastAssemblerConfig||null),ot(se.canvas.lastTreeFarmConfig||null),jt(se.canvas.lastFireboxConfig||null),li(se.canvas.lastWasteFacilityConfig||null),d(se.canvas.nodeId||0),L(se.canvas.targetIdCounter||0),tn(),Le("node"),alert("Canvas imported successfully!")}catch(se){alert(`Import failed: ${se.message}`)}},O.readAsText(U)},I.click()},[at,yt,Ze,Gt,n,s,Z,wt,Ge,Ct,kt,ot,jt,li,d,L,Le]),vo=z.useCallback(I=>{var O;const A=(O=I.target.files)==null?void 0:O[0];if(!A)return;const U=new FileReader;U.onload=K=>{var ie,se;try{const ae=JSON.parse(K.target.result),Se=ae.products||ae.machines||ae.recipes,Me=ae.canvas;if(Se){const be=new Map((ae.products||[]).map(qe=>[qe.id,qe])),fe=Array.from(be.values()),Ce=new Set(((ie=ae.machines)==null?void 0:ie.map(qe=>qe.id))||[]),Ie=(ae.recipes||[]).filter(qe=>Ce.has(qe.machine_id)),ke=[...ji];if(fe.forEach(qe=>{const ze=ke.findIndex(Ve=>Ve.id===qe.id);ze>=0?ke[ze]=qe:ke.push(qe)}),Jd(ke),((se=ae.machines)==null?void 0:se.length)>0){const qe=[...nn],ze=new Set(ae.machines.map(Qe=>Qe.id)),Ve=on.filter(Qe=>!ze.has(Qe.machine_id));ae.machines.forEach(Qe=>{const rt=qe.findIndex(gt=>gt.id===Qe.id);rt>=0?qe[rt]=Qe:qe.push(Qe)}),ep(qe),tp([...Ve,...Ie])}if(!Me){alert("Data import successful!"),window.location.reload();return}}if(Me){const be=ae.canvas.nodes||[],fe=[];if(be.forEach(ke=>{var ze,Ve,Qe,rt,gt,lt,Oi,Jt;const qe=(Ve=(ze=ke.data)==null?void 0:ze.recipe)==null?void 0:Ve.machine_id;qe&&!_t(qe)&&fe.push(`Machine: ${qe}`),(gt=(rt=(Qe=ke.data)==null?void 0:Qe.recipe)==null?void 0:rt.inputs)==null||gt.forEach(Bt=>{Bt.product_id!=="p_variableproduct"&&!Et(Bt.product_id)&&fe.push(`Product: ${Bt.product_id}`)}),(Jt=(Oi=(lt=ke.data)==null?void 0:lt.recipe)==null?void 0:Oi.outputs)==null||Jt.forEach(Bt=>{Bt.product_id!=="p_variableproduct"&&!Et(Bt.product_id)&&fe.push(`Product: ${Bt.product_id}`)})}),fe.length>0){const ke=[...new Set(fe)];alert(`Cannot import canvas - missing items:
${ke.slice(0,10).join(`
`)}${ke.length>10?`
...and ${ke.length-10} more`:""}`),I.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){I.target.value="";return}const Ce=Gt(),Ie=be.map(ke=>{var Ve,Qe,rt,gt;const qe=_t((Qe=(Ve=ke.data)==null?void 0:Ve.recipe)==null?void 0:Qe.machine_id);let ze=(rt=ke.data)==null?void 0:rt.recipe;return qe&&ze&&!((gt=ze.outputs)!=null&&gt.some(lt=>lt.temperature!==void 0))&&(ze=Ga(ze,qe.id)),{...ke,data:{...ke.data,recipe:ze,machineCount:ke.data.machineCount??1,displayMode:at,machineDisplayMode:yt,...Ce,globalPollution:Ze,flows:null,suggestions:[]}}});n(Ie),s(ae.canvas.edges||[]),Z(ae.canvas.targetProducts||[]),wt(ae.canvas.soldProducts||{}),Ge(ae.canvas.favoriteRecipes||[]),Ct(ae.canvas.lastDrillConfig||null),kt(ae.canvas.lastAssemblerConfig||null),ot(ae.canvas.lastTreeFarmConfig||null),jt(ae.canvas.lastFireboxConfig||null),li(ae.canvas.lastWasteFacilityConfig||null),d(ae.canvas.nodeId||0),L(ae.canvas.targetIdCounter||0),tn(),Le("node"),alert("Canvas import successful!")}}catch(ae){alert(`Import failed: ${ae.message}`)}},U.readAsText(A),I.target.value=""},[at,yt,Ze,Gt,n,s,Z,wt,Ge,Ct,kt,ot,jt,d,L]);z.useCallback(()=>{const I=new Blob([JSON.stringify({products:ji,machines:nn,recipes:on},null,2)],{type:"application/json"}),A=URL.createObjectURL(I),U=document.createElement("a");U.href=A,U.download=`industrialist-data-${Date.now()}.json`,U.click(),URL.revokeObjectURL(A)},[ji,nn,on]);const Ps=z.useCallback(()=>{const A={nodes:e.map(ie=>({...ie,data:{...ie.data,flows:void 0,suggestions:void 0}})),edges:o,targetProducts:W,nodeId:l,targetIdCounter:J,soldProducts:Ot,favoriteRecipes:de,lastDrillConfig:Ye,lastAssemblerConfig:bt,lastTreeFarmConfig:Nt,lastFireboxConfig:St,lastWasteFacilityConfig:si},U=new Blob([JSON.stringify({canvas:A},null,2)],{type:"application/json"}),O=URL.createObjectURL(U),K=document.createElement("a");K.href=O,K.download=`industrialist-canvas-${Date.now()}.json`,K.click(),URL.revokeObjectURL(O)},[e,o,W,l,J,Ot,de,Ye,bt,Nt,St]);z.useCallback(()=>{const I=e.map(K=>({...K,data:{...K.data,flows:void 0,suggestions:void 0}})),A=new Blob([JSON.stringify({products:ji,machines:nn,recipes:on,canvas:{nodes:I,edges:o,targetProducts:W,nodeId:l,targetIdCounter:J,soldProducts:Ot,favoriteRecipes:de,lastDrillConfig:Ye,lastAssemblerConfig:bt,lastTreeFarmConfig:Nt,lastFireboxConfig:St,lastWasteFacilityConfig:si}},null,2)],{type:"application/json"}),U=URL.createObjectURL(A),O=document.createElement("a");O.href=U,O.download=`industrialist-export-${Date.now()}.json`,O.click(),URL.revokeObjectURL(U)},[e,o,W,l,J,Ot,de,Ye,bt,Nt,St]);const wo=z.useCallback(()=>{const I=aa(),A=sa(),U=Ms();Jd(I),ep(A),tp(U),Le("node")},[Le]),bo=z.useCallback(I=>{const A=Gt(),U=I.nodes.map(O=>{var se,ae,Se,Me;const K=_t((ae=(se=O.data)==null?void 0:se.recipe)==null?void 0:ae.machine_id);let ie=(Se=O.data)==null?void 0:Se.recipe;return K&&ie&&!((Me=ie.outputs)!=null&&Me.some(be=>be.temperature!==void 0))&&(ie=Ga(ie,K.id)),{...O,data:{...O.data,recipe:ie,machineCount:O.data.machineCount??1,displayMode:at,machineDisplayMode:yt,...A,globalPollution:Ze,flows:null,suggestions:[]}}});n(U),s(I.edges||[]),Z(I.targetProducts||[]),wt(I.soldProducts||{}),Ge(I.favoriteRecipes||[]),Ct(I.lastDrillConfig||null),kt(I.lastAssemblerConfig||null),ot(I.lastTreeFarmConfig||null),jt(I.lastFireboxConfig||null),li(I.lastWasteFacilityConfig||null),d(I.nodeId||0),L(I.targetIdCounter||0),tn(),Le("node")},[at,yt,Ze,Gt,n,s,Z,wt,Ge,Ct,kt,ot,jt,li,d,L,Le]),Ts=z.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(aM(),kC(uu),SC(cu),MC(du),n([]),s([]),d(0),Z([]),L(0),wt({}),Ct(null),kt(null),ot(null),jt(null),li(null),window.location.reload())},[n,s,ji,nn,on]);z.useEffect(()=>{const I=A=>{if(A.key==="industrialist_theme")try{const U=JSON.parse(A.newValue);Vi({edgePath:U.edgePath||"orthogonal",edgeStyle:U.edgeStyle||"animated"})}catch(U){console.error("Error parsing theme from storage:",U)}};return window.addEventListener("storage",I),()=>window.removeEventListener("storage",I)},[]),z.useEffect(()=>{if(!We){const I=Yl();Vi({edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"})}},[We]);const di=ji.filter(I=>I.name.toLowerCase().includes(q.toLowerCase())&&(P==="all"||I.type===P)).sort((I,A)=>C==="name_asc"?I.name.localeCompare(A.name):C==="name_desc"?A.name.localeCompare(I.name):C==="price_asc"?(I.price==="Variable"?1/0:I.price)-(A.price==="Variable"?1/0:A.price):C==="price_desc"?(A.price==="Variable"?-1/0:A.price)-(I.price==="Variable"?-1/0:I.price):C==="rp_asc"?(I.rp_multiplier==="Variable"?1/0:I.rp_multiplier)-(A.rp_multiplier==="Variable"?1/0:A.rp_multiplier):(A.rp_multiplier==="Variable"?-1/0:A.rp_multiplier)-(I.rp_multiplier==="Variable"?-1/0:I.rp_multiplier)),On=nn.filter(I=>{const A=I.name.toLowerCase().includes(q.toLowerCase()),U=I.id==="m_mineshaft_drill"||I.id==="m_logic_assembler"||I.id==="m_tree_farm"||I.id==="m_underground_waste_facility"||I.id==="m_liquid_dump"||I.id==="m_liquid_burner"||Ol(I.id).length>0,O=D==="all"||I.tier!==void 0&&I.tier.toString()===D;return A&&U&&O}).sort((I,A)=>I.name.localeCompare(A.name)),ya=I=>{if(I.id==="m_mineshaft_drill")Li(xh,1);else if(I.id==="m_logic_assembler")Li(bh,1);else if(I.id==="m_tree_farm")Li(kh,1);else if(I.id==="m_underground_waste_facility")Li(sp,1);else if(I.id==="m_liquid_dump")Li(cp,1);else if(I.id==="m_liquid_burner")Li(pp,1);else{k(I);return}et()},sr=(S==="product"?Ki():Ol(w==null?void 0:w.id)).sort((I,A)=>{const U=de.includes(I.id),O=de.includes(A.id);if(U&&!O)return-1;if(!U&&O)return 1;const K=_t(I.machine_id),ie=_t(A.machine_id);return((K==null?void 0:K.name)||"").localeCompare((ie==null?void 0:ie.name)||"")}),Lu=I=>{Ge(A=>A.includes(I)?A.filter(U=>U!==I):[...A,I])};return u.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[u.jsxs(CS,{ref:Rn,nodes:e,edges:o,onNodesChange:ct,onEdgesChange:ua,onConnect:ca,onNodeClick:Ns,onNodeDoubleClick:Vu,onMouseMove:xo,onClick:Fu,onContextMenu:zu,onInit:I=>{mn.current=I},nodeTypes:vq,edgeTypes:wq,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,connectionLineType:Dt.edgePath==="straight"?"straight":Dt.edgePath==="orthogonal"?"step":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:Dt.edgeStyle==="animated"||Dt.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[u.jsx(TS,{color:"#333",gap:16,size:1}),!Ue&&u.jsx(OS,{className:(Ut||oi)&&!Xt?"controls-shifted":"",position:"bottom-left"}),!Ue&&u.jsx(JS,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),u.jsx(ia,{position:"top-left",style:{margin:Ue?"5px":"10px",maxWidth:Ue?"calc(100vw - 10px)":"none"},children:u.jsx("div",{className:`left-panel-container ${Xt?"collapsed":""}`,style:Ue?{maxWidth:"100%"}:{},children:u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[u.jsxs("div",{className:"stats-panel",children:[u.jsx("h3",{className:"stats-title",children:mo}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("div",{className:"stat-label",children:"Total Power:"}),u.jsx("div",{className:"stat-value",children:EC(hi.totalPower)})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("div",{className:"stat-label",children:"Total Pollution:"}),u.jsxs("div",{className:"stat-value",style:{color:hi.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[hi.totalPollution.toFixed(2),"%/hr"]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),u.jsx("div",{className:"stat-value",children:hi.totalModelCount.toFixed(0)})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("div",{className:"stat-label",children:"Total Profit:"}),u.jsxs("div",{className:"stat-value",style:{color:or>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",Si(or),"/s"]})]})]})]}),u.jsxs("div",{className:"flex-col action-buttons-container",children:[u.jsx("button",{onClick:Cs,className:"btn btn-primary",children:"+ Select Recipe"}),u.jsxs("button",{onClick:()=>H(!0),className:"btn btn-secondary",children:["View Targets (",W.length,")"]}),u.jsx("button",{onClick:js,className:"btn btn-secondary",children:"Compute Machines"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>mi(!Ut),className:"btn btn-secondary btn-square",title:Ut?"Close more statistics":"Open more statistics",children:Ut?"":""}),u.jsx("button",{onClick:()=>er(!Xt),className:"btn btn-secondary btn-square btn-panel-toggle",title:Xt?"Show left panel":"Hide left panel",children:Xt?"":""})]})]})]}),(Ut||oi)&&u.jsxs("div",{className:`extended-panel ${oi?"closing":""}`,children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Ue?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Ue?"wrap":"nowrap",gap:Ue?"10px":"0"},children:[u.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Ue?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Ue&&u.jsx("button",{onClick:()=>mi(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),u.jsxs("div",{style:{display:"flex",gap:Ue?"5px":"10px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>Pn(I=>I==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Ue?"6px 10px":"8px 16px",fontSize:Ue?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:at==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:at==="perSecond"?"Per Second":"Per Cycle"}),u.jsx("button",{onClick:()=>Tn(I=>I==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Ue?"6px 10px":"8px 16px",fontSize:Ue?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:yt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:yt==="perMachine"?"Per Machine":"Total"})]})]}),u.jsxs("div",{className:"extended-panel-content",children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("button",{onClick:()=>jn(I=>!I),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:ai?"Resume pollution change":"Pause pollution change",children:ai?"":""}),u.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:Ze,onFocus:()=>_n(!0),onBlur:I=>{_n(!1);const A=I.target.value,U=parseFloat(A);pn(!isNaN(U)&&isFinite(U)?parseFloat(U.toFixed(4)):0)},onChange:I=>pn(I.target.value===""?"":parseFloat(I.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),u.jsxs("div",{style:{marginTop:"30px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),rr.length===0?u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:rr.map(I=>u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:I.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:I.product.name}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[Si(I.excessRate),"/s"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof I.product.price=="number"&&u.jsxs("div",{style:{color:I.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",Si(I.product.price*I.excessRate),"/s"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[u.jsx("input",{type:"checkbox",checked:I.isSold,onChange:A=>wt(U=>({...U,[I.productId]:A.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},I.productId))})]}),u.jsxs("div",{style:{marginTop:"30px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),zn.length===0?u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:zn.map(I=>u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:I.product.name}),u.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",Si(I.deficiencyRate),"/s"]})]}),u.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[I.affectedNodes.length," node",I.affectedNodes.length!==1?"s":""," affected"]})]},I.productId))})]}),u.jsxs("div",{style:{marginTop:"30px"},children:[u.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Machine Costs:"}),fn.stats.length===0?u.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No machines on canvas."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"15px"},children:fn.stats.map(I=>u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid var(--border-light)"},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:I.machine.tier===1?"var(--tier-1-color)":I.machine.tier===2?"var(--tier-2-color)":I.machine.tier===3?"var(--tier-3-color)":I.machine.tier===4?"var(--tier-4-color)":(I.machine.tier===5,"var(--tier-5-color)"),fontSize:"var(--font-size-sm)",fontWeight:600},children:I.machine.name}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Count: ",I.count,"  $",Si(I.cost)]})]}),u.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",Si(I.totalCost)]})]},I.machineId))}),u.jsxs("div",{style:{padding:"12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid var(--color-primary)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:700},children:"Total Cost:"}),u.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-md)",fontWeight:700},children:["$",Si(fn.totalCost)]})]}),u.jsx("div",{style:{color:"var(--text-muted)",fontSize:"var(--font-size-xs)",fontStyle:"italic",textAlign:"center"},children:"For machines only. Poles and pipes not accounted for."})]})]})]})]})]})]})})}),u.jsxs(ia,{position:"top-right",style:{margin:Ue?"5px":"10px",maxWidth:Ue?"calc(100vw - 10px)":"none"},children:[Ue&&u.jsxs("div",{className:"mobile-controls-container",children:[u.jsx("button",{onClick:()=>dn(I=>I==="target"?"pan":"target"),className:`btn ${Vt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),u.jsx("button",{onClick:()=>dn(I=>I==="delete"?"pan":"delete"),className:`btn ${Vt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),u.jsxs("div",{className:`menu-container ${Re?"":"closed"}`,style:Ue?{maxWidth:"calc(100vw - 10px)"}:{},children:[u.jsx("button",{onClick:()=>Pe(!Re),className:"btn btn-secondary btn-menu-toggle",style:Ue?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:Re?">":"<"}),u.jsxs("div",{className:"menu-buttons",style:Ue?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[u.jsx("button",{onClick:()=>{n([]),s([]),d(0),Z([]),L(0),wt({}),Ct(null),kt(null),ot(null),jt(null),li(null),tn(),Le("node")},className:"btn btn-secondary",children:"Clear All"}),u.jsx("button",{onClick:()=>It(!0),className:"btn btn-secondary",children:"Saves"}),u.jsx("button",{onClick:()=>Lt(!0),className:"btn btn-secondary",children:"Data"}),u.jsx("button",{onClick:Ts,className:"btn btn-secondary",children:"Restore Defaults"}),u.jsx("button",{onClick:()=>Je(!0),className:"btn btn-secondary",children:"Theme Editor"}),u.jsx("button",{onClick:()=>st(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),u.jsx("input",{ref:_o,type:"file",accept:".json",style:{display:"none"},onChange:vo}),(G||g)&&u.jsx("div",{className:"modal-overlay",onClick:Ar,children:G&&u.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),style:{width:"450px"},children:[u.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("button",{onClick:()=>{const I=["free","capped","locked"],U=(I.indexOf(we)+1)%I.length,O=I[U];Oe(O)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:we==="locked"?"#ef4444":we==="capped"?"#f59e0b":"var(--bg-secondary)",color:we==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${we==="free"?"Free (LP/suggestions can change)":we==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:we==="free"?" Free":we==="capped"?" Cap":" Lock"}),u.jsx("input",{type:"number",min:"0",step:"0.1",value:ye,onChange:I=>ge(I.target.value),onKeyPress:I=>{I.key==="Enter"&&Br(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),u.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[we==="free"&&"Free: LP solver and suggestions can modify this count",we==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(ye)||0} (the value when Apply is pressed)`,we==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ue&&!le&&u.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:u.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),u.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:Ar,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),u.jsx("button",{onClick:()=>Br(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ue&&!le&&u.jsx("button",{onClick:()=>Br(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),_&&u.jsx("div",{className:"modal-overlay",onClick:et,children:u.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:w?`Recipes for ${w.name}`:"Select Product or Machine"}),!h&&!w?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-lg",children:u.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[u.jsx("button",{onClick:()=>b("product"),className:`btn ${S==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),u.jsx("button",{onClick:()=>b("machine"),className:`btn ${S==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),S==="product"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-lg flex-col",children:[u.jsx("input",{type:"text",placeholder:"Search products...",value:q,onChange:I=>R(I.target.value),className:"input"}),u.jsxs("div",{className:"flex-row",children:[u.jsxs("select",{value:P,onChange:I=>V(I.target.value),className:"select",children:[u.jsx("option",{value:"all",children:"All Types"}),u.jsx("option",{value:"item",children:"Items Only"}),u.jsx("option",{value:"fluid",children:"Fluids Only"})]}),u.jsxs("select",{value:C,onChange:I=>j(I.target.value),className:"select",children:[u.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),u.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),u.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),u.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),u.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),u.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),u.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[u.jsxs("div",{className:"product-table-header",children:[u.jsx("div",{children:"Product"}),u.jsx("div",{className:"text-right",children:"Price"}),u.jsx("div",{className:"text-right",children:"RP Mult"})]}),di.map(I=>u.jsxs("div",{onClick:()=>x(I),className:"product-row",children:[u.jsxs("div",{children:[u.jsx("div",{className:"product-name",children:I.name}),u.jsx("div",{className:"product-type",children:I.type==="item"?" Item":" Fluid"})]}),u.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:I.price==="Variable"?"Variable":`${Si(I.price)}`}),u.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:I.rp_multiplier==="Variable"?"Variable":I.rp_multiplier>=1e3?`${Si(I.rp_multiplier)}x`:`${I.rp_multiplier.toFixed(1)}x`})]},I.id))]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[u.jsx("input",{type:"text",placeholder:"Search machines...",value:q,onChange:I=>R(I.target.value),className:"input",style:{flex:3}}),u.jsxs("select",{value:D,onChange:I=>te(I.target.value),className:"select",style:{flex:1},children:[u.jsx("option",{value:"all",children:"All Tiers"}),u.jsx("option",{value:"1",children:"Tier 1"}),u.jsx("option",{value:"2",children:"Tier 2"}),u.jsx("option",{value:"3",children:"Tier 3"}),u.jsx("option",{value:"4",children:"Tier 4"}),u.jsx("option",{value:"5",children:"Tier 5"})]})]}),u.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:On.length===0?u.jsx("div",{className:"empty-state",children:"No machines found"}):On.map(I=>u.jsxs("div",{onClick:()=>ya(I),className:"recipe-card",style:{cursor:"pointer"},children:[u.jsx("div",{className:"recipe-machine",style:{color:I.tier===1?"var(--tier-1-color)":I.tier===2?"var(--tier-2-color)":I.tier===3?"var(--tier-3-color)":I.tier===4?"var(--tier-4-color)":(I.tier===5,"var(--tier-5-color)")},children:I.name}),u.jsx("div",{className:"recipe-details",style:{color:"#999"},children:I.id==="m_mineshaft_drill"||I.id==="m_logic_assembler"||I.id==="m_tree_farm"?"Click to create box":`${Ol(I.id).length} recipe(s)`})]},I.id))})]})]}):u.jsxs(u.Fragment,{children:[E==="button"&&u.jsx("button",{onClick:()=>{x(null),k(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&u.jsx("div",{className:"mb-lg",children:u.jsxs("select",{value:X,onChange:I=>F(I.target.value),className:"select",children:[u.jsx("option",{value:"all",children:"All Recipes"}),u.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),u.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),u.jsx("option",{value:"disposal",children:"Disposal"})]})}),u.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:sr.length===0?u.jsx("div",{className:"empty-state",children:"No recipes found"}):sr.map(I=>{const A=_t(I.machine_id),U=de.includes(I.id),O=jr[I.id]??1;return A&&I.inputs&&I.outputs?u.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("button",{onClick:K=>{K.stopPropagation(),Lu(I.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:U?"none":"grayscale(100%)",opacity:U?1:.4,transition:"all 0.2s"},onMouseEnter:K=>{K.currentTarget.style.transform="scale(1.2)",K.currentTarget.style.opacity="1"},onMouseLeave:K=>{K.currentTarget.style.transform="scale(1)",K.currentTarget.style.opacity=U?"1":"0.4"},title:U?"Remove from favorites":"Add to favorites",children:""}),u.jsx("div",{onClick:K=>{K.stopPropagation();const ie=O<=0?1:O,se=Li(I,ie);m(!0),f(!1),setTimeout(()=>{ve(se),pe(se),ge(String(ie)),ce(!0),m(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:T&&O<=0?"var(--delete-bg)":"var(--color-primary)",color:T&&O<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:T&&O<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:K=>{T&&O<=0?(K.currentTarget.style.background="var(--delete-hover-bg)",K.currentTarget.style.color="var(--delete-hover-color)"):(K.currentTarget.style.background="var(--color-primary-hover)",K.currentTarget.style.transform="scale(1.05)",K.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:K=>{T&&O<=0?(K.currentTarget.style.background="var(--delete-bg)",K.currentTarget.style.color="var(--delete-color)"):(K.currentTarget.style.background="var(--color-primary)",K.currentTarget.style.transform="scale(1)",K.currentTarget.style.borderColor="transparent")},title:T?O<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(O)?O:O.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(O)?O:O.toFixed(2)}),u.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:K=>{if(K.stopPropagation(),O<=0){const se=Li(I,1);m(!0),f(!1),setTimeout(()=>{ve(se),pe(se),ge("1"),ce(!0),m(!1)},50)}else Li(I),et()},children:[u.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[u.jsx("div",{className:"recipe-machine",style:{color:A.tier===1?"var(--tier-1-color)":A.tier===2?"var(--tier-2-color)":A.tier===3?"var(--tier-3-color)":A.tier===4?"var(--tier-4-color)":(A.tier===5,"var(--tier-5-color)")},children:A.name}),I.power_type==="HV"&&u.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),u.jsxs("div",{className:"recipe-details",children:[u.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),u.jsx("span",{children:I.inputs.map(K=>hh(K,Et)).join(", ")})]}),u.jsxs("div",{className:"recipe-details",children:[u.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),u.jsx("span",{children:I.outputs.map(K=>hh(K,Et)).join(", ")})]})]})]},I.id):null})})]}),u.jsx("button",{onClick:et,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),$&&u.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:u.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[u.jsx("h2",{className:"modal-title",children:"Target Products"}),u.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"70vh",marginBottom:"20px"},children:W.length===0?u.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):W.map(I=>{var be;const A=e.find(fe=>fe.id===I.recipeBoxId);if(!A)return null;const{recipe:U,machine:O,machineCount:K=0}=A.data||{};if(!U)return null;let ie=U.cycle_time;if((typeof ie!="number"||ie<=0)&&(ie=1),un(O==null?void 0:O.id)){const fe=En[O.id];if((fe==null?void 0:fe.type)==="steam_input"&&uo(U)){const Ce=U.tempDependentInputTemp??Xn;ie=Ir(O.id,Ce,ie)}}(typeof ie!="number"||ie<=0)&&(ie=1);const ae=U.isMineshaftDrill||U.id==="r_mineshaft_drill",Se=(be=He==null?void 0:He.flows)==null?void 0:be.byNode[I.recipeBoxId],Me={inputs:{},outputs:{}};return U.inputs.forEach((fe,Ce)=>{var Ie;if(typeof fe.quantity=="number"){const qe=(ae?fe.quantity:fe.quantity/ie)*K,ze=((Ie=Se==null?void 0:Se.inputFlows[Ce])==null?void 0:Ie.connected)||0;Me.inputs[Ce]={totalRate:qe,connectedFlow:ze,deficiency:Math.max(0,qe-ze)}}}),U.outputs.forEach((fe,Ce)=>{var ke;const Ie=fe.quantity;if(typeof Ie=="number"){const ze=(ae?Ie:Ie/ie)*K,Ve=((ke=Se==null?void 0:Se.outputFlows[Ce])==null?void 0:ke.connected)||0;Me.outputs[Ce]={totalRate:ze,connectedFlow:Ve,excess:Math.max(0,ze-Ve)}}}),u.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:U.name}),u.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",K.toFixed(4)]})]}),u.jsx("button",{onClick:()=>go(I.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),U.inputs.map((fe,Ce)=>{const Ie=Me.inputs[Ce];return Ie?u.jsx(c0,{productName:na(fe.product_id,Et),connectedFlow:Ie.connectedFlow,currentExcess:Ie.deficiency,onTargetExcessCommit:ke=>ma(I.id,"input",Ce,ke),styleType:"input"},Ce):null})]}),u.jsxs("div",{children:[u.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),U.outputs.map((fe,Ce)=>{const Ie=Me.outputs[Ce];return Ie?u.jsx(c0,{productName:na(fe.product_id,Et),connectedFlow:Ie.connectedFlow,currentExcess:Ie.excess,onTargetExcessCommit:ke=>ma(I.id,"output",Ce,ke),styleType:"output"},Ce):null})]})]})]},I.id)})}),u.jsx("button",{onClick:()=>H(!1),className:"btn btn-secondary",children:"Close"})]})}),We&&u.jsx(dC,{onClose:()=>Je(!1)}),Ke&&u.jsx(pC,{onClose:()=>st(!1)}),Wt&&u.jsx(gC,{onClose:()=>It(!1),onLoad:bo,currentCanvas:{nodes:e,edges:o,targetProducts:W,nodeId:l,targetIdCounter:J,soldProducts:Ot,favoriteRecipes:de,lastDrillConfig:Ye,lastAssemblerConfig:bt,lastTreeFarmConfig:Nt,lastFireboxConfig:St,lastWasteFacilityConfig:si},onImport:ha,onExportCanvas:Ps}),Rt&&u.jsx(jC,{onClose:()=>Lt(!1),defaultProducts:uu,defaultMachines:cu,defaultRecipes:du,onDataChange:wo}),Ue&&Vt!=="pan"&&u.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Vt==="target"&&" Target Mode: Tap nodes to mark as targets",Vt==="delete"&&" Delete Mode: Tap nodes to delete"]}),ui&&u.jsxs("div",{className:"pending-node-preview",style:{left:`${tr.x+20}px`,top:`${tr.y+20}px`},children:[u.jsx("div",{className:"pending-node-recipe-name",children:ui.recipe.name}),u.jsx("div",{className:"pending-node-machine-name",children:ui.machine.name}),u.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",ui.machineCount]}),u.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}Kx.createRoot(document.getElementById("root")).render(u.jsx(Xl.StrictMode,{children:u.jsx(bq,{})}));

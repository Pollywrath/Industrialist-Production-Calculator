(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Na(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OT(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var _p={exports:{}},gs={},mp={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function FT(){if(Fx)return Ze;Fx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=f&&z[f]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,q={};function w(z,Z,_e){this.props=z,this.context=Z,this.refs=q,this.updater=_e||g}w.prototype.isReactComponent={},w.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function b(){}b.prototype=w.prototype;function C(z,Z,_e){this.props=z,this.context=Z,this.refs=q,this.updater=_e||g}var S=C.prototype=new b;S.constructor=C,x(S,w.prototype),S.isPureReactComponent=!0;var E=Array.isArray,I=Object.prototype.hasOwnProperty,M={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function j(z,Z,_e){var $,J={},oe=null,se=null;if(Z!=null)for($ in Z.ref!==void 0&&(se=Z.ref),Z.key!==void 0&&(oe=""+Z.key),Z)I.call(Z,$)&&!T.hasOwnProperty($)&&(J[$]=Z[$]);var ae=arguments.length-2;if(ae===1)J.children=_e;else if(1<ae){for(var he=Array(ae),Se=0;Se<ae;Se++)he[Se]=arguments[Se+2];J.children=he}if(z&&z.defaultProps)for($ in ae=z.defaultProps,ae)J[$]===void 0&&(J[$]=ae[$]);return{$$typeof:e,type:z,key:oe,ref:se,props:J,_owner:M.current}}function P(z,Z){return{$$typeof:e,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function O(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(_e){return Z[_e]})}var F=/\/+/g;function Q(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):Z.toString(36)}function V(z,Z,_e,$,J){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var se=!1;if(z===null)se=!0;else switch(oe){case"string":case"number":se=!0;break;case"object":switch(z.$$typeof){case e:case t:se=!0}}if(se)return se=z,J=J(se),z=$===""?"."+Q(se,0):$,E(J)?(_e="",z!=null&&(_e=z.replace(F,"$&/")+"/"),V(J,Z,_e,"",function(Se){return Se})):J!=null&&(D(J)&&(J=P(J,_e+(!J.key||se&&se.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+z)),Z.push(J)),1;if(se=0,$=$===""?".":$+":",E(z))for(var ae=0;ae<z.length;ae++){oe=z[ae];var he=$+Q(oe,ae);se+=V(oe,Z,_e,he,J)}else if(he=h(z),typeof he=="function")for(z=he.call(z),ae=0;!(oe=z.next()).done;)oe=oe.value,he=$+Q(oe,ae++),se+=V(oe,Z,_e,he,J);else if(oe==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return se}function X(z,Z,_e){if(z==null)return z;var $=[],J=0;return V(z,$,"","",function(oe){return Z.call(_e,oe,J++)}),$}function W(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(_e){(z._status===0||z._status===-1)&&(z._status=1,z._result=_e)},function(_e){(z._status===0||z._status===-1)&&(z._status=2,z._result=_e)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},U={transition:null},K={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:U,ReactCurrentOwner:M};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:X,forEach:function(z,Z,_e){X(z,function(){Z.apply(this,arguments)},_e)},count:function(z){var Z=0;return X(z,function(){Z++}),Z},toArray:function(z){return X(z,function(Z){return Z})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ze.Component=w,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=C,Ze.StrictMode=i,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ze.act=ie,Ze.cloneElement=function(z,Z,_e){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var $=x({},z.props),J=z.key,oe=z.ref,se=z._owner;if(Z!=null){if(Z.ref!==void 0&&(oe=Z.ref,se=M.current),Z.key!==void 0&&(J=""+Z.key),z.type&&z.type.defaultProps)var ae=z.type.defaultProps;for(he in Z)I.call(Z,he)&&!T.hasOwnProperty(he)&&($[he]=Z[he]===void 0&&ae!==void 0?ae[he]:Z[he])}var he=arguments.length-2;if(he===1)$.children=_e;else if(1<he){ae=Array(he);for(var Se=0;Se<he;Se++)ae[Se]=arguments[Se+2];$.children=ae}return{$$typeof:e,type:z.type,key:J,ref:oe,props:$,_owner:se}},Ze.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},Ze.createElement=j,Ze.createFactory=function(z){var Z=j.bind(null,z);return Z.type=z,Z},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(z){return{$$typeof:l,render:z}},Ze.isValidElement=D,Ze.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:W}},Ze.memo=function(z,Z){return{$$typeof:p,type:z,compare:Z===void 0?null:Z}},Ze.startTransition=function(z){var Z=U.transition;U.transition={};try{z()}finally{U.transition=Z}},Ze.unstable_act=ie,Ze.useCallback=function(z,Z){return te.current.useCallback(z,Z)},Ze.useContext=function(z){return te.current.useContext(z)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(z){return te.current.useDeferredValue(z)},Ze.useEffect=function(z,Z){return te.current.useEffect(z,Z)},Ze.useId=function(){return te.current.useId()},Ze.useImperativeHandle=function(z,Z,_e){return te.current.useImperativeHandle(z,Z,_e)},Ze.useInsertionEffect=function(z,Z){return te.current.useInsertionEffect(z,Z)},Ze.useLayoutEffect=function(z,Z){return te.current.useLayoutEffect(z,Z)},Ze.useMemo=function(z,Z){return te.current.useMemo(z,Z)},Ze.useReducer=function(z,Z,_e){return te.current.useReducer(z,Z,_e)},Ze.useRef=function(z){return te.current.useRef(z)},Ze.useState=function(z){return te.current.useState(z)},Ze.useSyncExternalStore=function(z,Z,_e){return te.current.useSyncExternalStore(z,Z,_e)},Ze.useTransition=function(){return te.current.useTransition()},Ze.version="18.3.1",Ze}var Ax;function Ys(){return Ax||(Ax=1,mp.exports=FT()),mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function AT(){if(Lx)return gs;Lx=1;var e=Ys(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,p){var m,f={},h=null,g=null;p!==void 0&&(h=""+p),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(g=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(f[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)f[m]===void 0&&(f[m]=d[m]);return{$$typeof:t,type:l,key:h,ref:g,props:f,_owner:a.current}}return gs.Fragment=n,gs.jsx=u,gs.jsxs=u,gs}var Dx;function LT(){return Dx||(Dx=1,_p.exports=AT()),_p.exports}var _=LT(),A=Ys();const yk=Na(A);var pl={},hp={exports:{}},Nr={},yp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function DT(){return Bx||(Bx=1,(function(e){function t(U,K){var ie=U.length;U.push(K);e:for(;0<ie;){var z=ie-1>>>1,Z=U[z];if(0<a(Z,K))U[z]=K,U[ie]=Z,ie=z;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],ie=U.pop();if(ie!==K){U[0]=ie;e:for(var z=0,Z=U.length,_e=Z>>>1;z<_e;){var $=2*(z+1)-1,J=U[$],oe=$+1,se=U[oe];if(0>a(J,ie))oe<Z&&0>a(se,J)?(U[z]=se,U[oe]=ie,z=oe):(U[z]=J,U[$]=ie,z=$);else if(oe<Z&&0>a(se,ie))U[z]=se,U[oe]=ie,z=oe;else break e}}return K}function a(U,K){var ie=U.sortIndex-K.sortIndex;return ie!==0?ie:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var d=[],p=[],m=1,f=null,h=3,g=!1,x=!1,q=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=U)i(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=n(p)}}function E(U){if(q=!1,S(U),!x)if(n(d)!==null)x=!0,W(I);else{var K=n(p);K!==null&&te(E,K.startTime-U)}}function I(U,K){x=!1,q&&(q=!1,b(j),j=-1),g=!0;var ie=h;try{for(S(K),f=n(d);f!==null&&(!(f.expirationTime>K)||U&&!O());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var Z=z(f.expirationTime<=K);K=e.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(d)&&i(d),S(K)}else i(d);f=n(d)}if(f!==null)var _e=!0;else{var $=n(p);$!==null&&te(E,$.startTime-K),_e=!1}return _e}finally{f=null,h=ie,g=!1}}var M=!1,T=null,j=-1,P=5,D=-1;function O(){return!(e.unstable_now()-D<P)}function F(){if(T!==null){var U=e.unstable_now();D=U;var K=!0;try{K=T(!0,U)}finally{K?Q():(M=!1,T=null)}}else M=!1}var Q;if(typeof C=="function")Q=function(){C(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=F,Q=function(){X.postMessage(null)}}else Q=function(){w(F,0)};function W(U){T=U,M||(M=!0,Q())}function te(U,K){j=w(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,W(I))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var ie=h;h=K;try{return U()}finally{h=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=h;h=U;try{return K()}finally{h=ie}},e.unstable_scheduleCallback=function(U,K,ie){var z=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,U={id:m++,callback:K,priorityLevel:U,startTime:ie,expirationTime:Z,sortIndex:-1},ie>z?(U.sortIndex=ie,t(p,U),n(d)===null&&U===n(p)&&(q?(b(j),j=-1):q=!0,te(E,ie-z))):(U.sortIndex=Z,t(d,U),x||g||(x=!0,W(I))),U},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(U){var K=h;return function(){var ie=h;h=K;try{return U.apply(this,arguments)}finally{h=ie}}}})(gp)),gp}var zx;function BT(){return zx||(zx=1,yp.exports=DT()),yp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function zT(){if($x)return Nr;$x=1;var e=Ys(),t=BT();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function s(r,o){u(r,o),u(r+"Capture",o)}function u(r,o){for(a[r]=o,r=0;r<o.length;r++)i.add(o[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function h(r){return d.call(f,r)?!0:d.call(m,r)?!1:p.test(r)?f[r]=!0:(m[r]=!0,!1)}function g(r,o,c,y){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,o,c,y){if(o===null||typeof o>"u"||g(r,o,c,y))return!0;if(y)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function q(r,o,c,y,v,k,R){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=r,this.type=o,this.sanitizeURL=k,this.removeEmptyString=R}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];w[o]=new q(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function S(r,o,c,y){var v=w.hasOwnProperty(o)?w[o]:null;(v!==null?v.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,v,y)&&(c=null),y||v===null?h(o)&&(c===null?r.removeAttribute(o):r.setAttribute(o,""+c)):v.mustUseProperty?r[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,y=v.attributeNamespace,c===null?r.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,y?r.setAttributeNS(y,o,c):r.setAttribute(o,c))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),M=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),U=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,z;function Z(r){if(z===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+r}var _e=!1;function $(r,o){if(!r||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var y=pe}Reflect.construct(r,[],o)}else{try{o.call()}catch(pe){y=pe}r.call(o.prototype)}else{try{throw Error()}catch(pe){y=pe}r()}}catch(pe){if(pe&&y&&typeof pe.stack=="string"){for(var v=pe.stack.split(`
`),k=y.stack.split(`
`),R=v.length-1,G=k.length-1;1<=R&&0<=G&&v[R]!==k[G];)G--;for(;1<=R&&0<=G;R--,G--)if(v[R]!==k[G]){if(R!==1||G!==1)do if(R--,G--,0>G||v[R]!==k[G]){var ee=`
`+v[R].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=R&&0<=G);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?Z(r):""}function J(r){switch(r.tag){case 5:return Z(r.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return r=$(r.type,!1),r;case 11:return r=$(r.type.render,!1),r;case 1:return r=$(r.type,!0),r;default:return""}}function oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case M:return"Portal";case P:return"Profiler";case j:return"StrictMode";case Q:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case F:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case X:return o=r.displayName||null,o!==null?o:oe(r.type)||"Memo";case W:o=r._payload,r=r._init;try{return oe(r(o))}catch{}}return null}function se(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(o);case 8:return o===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ae(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function he(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(r){var o=he(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,k=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(R){y=""+R,k.call(this,R)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return y},setValue:function(R){y=""+R},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ne(r){r._valueTracker||(r._valueTracker=Se(r))}function Ie(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),y="";return r&&(y=he(r)?r.checked?"true":"false":r.value),r=y,r!==c?(o.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function je(r,o){var c=o.checked;return ie({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Ve(r,o){var c=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;c=ae(o.value!=null?o.value:c),r._wrapperState={initialChecked:y,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function He(r,o){o=o.checked,o!=null&&S(r,"checked",o,!1)}function De(r,o){He(r,o);var c=ae(o.value),y=o.type;if(c!=null)y==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?rt(r,o.type,c):o.hasOwnProperty("defaultValue")&&rt(r,o.type,ae(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function ot(r,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,c||o===r.value||(r.value=o),r.defaultValue=o}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function rt(r,o,c){(o!=="number"||Te(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var ft=Array.isArray;function ct(r,o,c,y){if(r=r.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=o.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&y&&(r[c].defaultSelected=!0)}else{for(c=""+ae(c),o=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,y&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function dt(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function at(r,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(ft(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}r._wrapperState={initialValue:ae(c)}}function Zt(r,o){var c=ae(o.value),y=ae(o.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),o.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),y!=null&&(r.defaultValue=""+y)}function Jt(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function $t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?$t(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var st,Rr=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,y,v){MSApp.execUnsafeLocalFunction(function(){return r(o,c,y,v)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=st.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Tt(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fr=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(r){fr.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Kr[o]=Kr[r]})});function Ht(r,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Kr.hasOwnProperty(r)&&Kr[r]?(""+o).trim():o+"px"}function Qe(r,o){r=r.style;for(var c in o)if(o.hasOwnProperty(c)){var y=c.indexOf("--")===0,v=Ht(c,o[c],y);c==="float"&&(c="cssFloat"),y?r.setProperty(c,v):r[c]=v}}var wi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nt(r,o){if(o){if(wi[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function ln(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function ut(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vr=null,Or=null,_r=null;function Xn(r){if(r=ns(r)){if(typeof Vr!="function")throw Error(n(280));var o=r.stateNode;o&&(o=ku(o),Vr(r.stateNode,r.type,o))}}function Vn(r){Or?_r?_r.push(r):_r=[r]:Or=r}function Rt(){if(Or){var r=Or,o=_r;if(_r=Or=null,Xn(r),o)for(r=0;r<o.length;r++)Xn(o[r])}}function tr(r,o){return r(o)}function rr(){}var _t=!1;function Do(r,o,c){if(_t)return r(o,c);_t=!0;try{return tr(r,o,c)}finally{_t=!1,(Or!==null||_r!==null)&&(rr(),Rt())}}function xt(r,o){var c=r.stateNode;if(c===null)return null;var y=ku(c);if(y===null)return null;c=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Zi=!1;if(l)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Zi=!1}function Yr(r,o,c,y,v,k,R,G,ee){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(c,pe)}catch(qe){this.onError(qe)}}var At=!1,Ut=null,Gt=!1,nr=null,mr={onError:function(r){At=!0,Ut=r}};function hr(r,o,c,y,v,k,R,G,ee){At=!1,Ut=null,Yr.apply(mr,arguments)}function yr(r,o,c,y,v,k,R,G,ee){if(hr.apply(this,arguments),At){if(At){var pe=Ut;At=!1,Ut=null}else throw Error(n(198));Gt||(Gt=!0,nr=pe)}}function Et(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function cn(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function gr(r){if(Et(r)!==r)throw Error(n(188))}function Ji(r){var o=r.alternate;if(!o){if(o=Et(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,y=o;;){var v=c.return;if(v===null)break;var k=v.alternate;if(k===null){if(y=v.return,y!==null){c=y;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===c)return gr(v),r;if(k===y)return gr(v),o;k=k.sibling}throw Error(n(188))}if(c.return!==y.return)c=v,y=k;else{for(var R=!1,G=v.child;G;){if(G===c){R=!0,c=v,y=k;break}if(G===y){R=!0,y=v,c=k;break}G=G.sibling}if(!R){for(G=k.child;G;){if(G===c){R=!0,c=k,y=v;break}if(G===y){R=!0,y=k,c=v;break}G=G.sibling}if(!R)throw Error(n(189))}}if(c.alternate!==y)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function eo(r){return r=Ji(r),r!==null?sr(r):null}function sr(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=sr(r);if(o!==null)return o;r=r.sibling}return null}var bi=t.unstable_scheduleCallback,qi=t.unstable_cancelCallback,to=t.unstable_shouldYield,Zn=t.unstable_requestPaint,mt=t.unstable_now,Jn=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,ei=t.unstable_UserBlockingPriority,pn=t.unstable_NormalPriority,ht=t.unstable_LowPriority,Qr=t.unstable_IdlePriority,On=null,Kt=null;function Bo(r){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(On,r,void 0,(r.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Da,ti=Math.log,fn=Math.LN2;function Da(r){return r>>>=0,r===0?32:31-(ti(r)/fn|0)|0}var ro=64,Si=4194304;function Cr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _n(r,o){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,k=r.pingedLanes,R=c&268435455;if(R!==0){var G=R&~v;G!==0?y=Cr(G):(k&=R,k!==0&&(y=Cr(k)))}else R=c&~v,R!==0?y=Cr(R):k!==0&&(y=Cr(k));if(y===0)return 0;if(o!==0&&o!==y&&(o&v)===0&&(v=y&-y,k=o&-o,v>=k||v===16&&(k&4194240)!==0))return o;if((y&4)!==0&&(y|=c&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)c=31-vr(o),v=1<<c,y|=r[c],o&=~v;return y}function zo(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(r,o){for(var c=r.suspendedLanes,y=r.pingedLanes,v=r.expirationTimes,k=r.pendingLanes;0<k;){var R=31-vr(k),G=1<<R,ee=v[R];ee===-1?((G&c)===0||(G&y)!==0)&&(v[R]=zo(G,o)):ee<=o&&(r.expiredLanes|=G),k&=~G}}function ir(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ci(){var r=ro;return ro<<=1,(ro&4194240)===0&&(ro=64),r}function Fr(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Xr(r,o,c){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-vr(o),r[o]=c}function no(r,o){var c=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<c;){var v=31-vr(c),k=1<<v;o[v]=0,y[v]=-1,r[v]=-1,c&=~k}}function We(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var y=31-vr(c),v=1<<y;v&o|r[y]&o&&(r[y]|=o),c&=~v}}var lt=0;function io(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var za,oo,$o,ze,$a,Ho=!1,ri=[],mn=null,hn=null,Ar=null,ki=new Map,ao=new Map,Lt=[],Wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(r,o){switch(r){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(o.pointerId)}}function so(r,o,c,y,v,k){return r===null||r.nativeEvent!==k?(r={blockedOn:o,domEventName:c,eventSystemFlags:y,nativeEvent:k,targetContainers:[v]},o!==null&&(o=ns(o),o!==null&&oo(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function Uo(r,o,c,y,v){switch(o){case"focusin":return mn=so(mn,r,o,c,y,v),!0;case"dragenter":return hn=so(hn,r,o,c,y,v),!0;case"mouseover":return Ar=so(Ar,r,o,c,y,v),!0;case"pointerover":var k=v.pointerId;return ki.set(k,so(ki.get(k)||null,r,o,c,y,v)),!0;case"gotpointercapture":return k=v.pointerId,ao.set(k,so(ao.get(k)||null,r,o,c,y,v)),!0}return!1}function cu(r){var o=mo(r.target);if(o!==null){var c=Et(o);if(c!==null){if(o=c.tag,o===13){if(o=cn(c),o!==null){r.blockedOn=o,$a(r.priority,function(){$o(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Go(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Wa(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var y=new c.constructor(c.type,c);me=y,c.target.dispatchEvent(y),me=null}else return o=ns(c),o!==null&&oo(o),r.blockedOn=c,!1;o.shift()}return!0}function du(r,o,c){Go(r)&&c.delete(o)}function Zr(){Ho=!1,mn!==null&&Go(mn)&&(mn=null),hn!==null&&Go(hn)&&(hn=null),Ar!==null&&Go(Ar)&&(Ar=null),ki.forEach(du),ao.forEach(du)}function uo(r,o){r.blockedOn===o&&(r.blockedOn=null,Ho||(Ho=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zr)))}function lo(r){function o(v){return uo(v,r)}if(0<ri.length){uo(ri[0],r);for(var c=1;c<ri.length;c++){var y=ri[c];y.blockedOn===r&&(y.blockedOn=null)}}for(mn!==null&&uo(mn,r),hn!==null&&uo(hn,r),Ar!==null&&uo(Ar,r),ki.forEach(o),ao.forEach(o),c=0;c<Lt.length;c++)y=Lt[c],y.blockedOn===r&&(y.blockedOn=null);for(;0<Lt.length&&(c=Lt[0],c.blockedOn===null);)cu(c),c.blockedOn===null&&Lt.shift()}var Mi=E.ReactCurrentBatchConfig,Ko=!0;function Fc(r,o,c,y){var v=lt,k=Mi.transition;Mi.transition=null;try{lt=1,Ha(r,o,c,y)}finally{lt=v,Mi.transition=k}}function Ac(r,o,c,y){var v=lt,k=Mi.transition;Mi.transition=null;try{lt=4,Ha(r,o,c,y)}finally{lt=v,Mi.transition=k}}function Ha(r,o,c,y){if(Ko){var v=Wa(r,o,c,y);if(v===null)id(r,o,y,Yo,c),lu(r,y);else if(Uo(v,r,o,c,y))y.stopPropagation();else if(lu(r,y),o&4&&-1<Wo.indexOf(r)){for(;v!==null;){var k=ns(v);if(k!==null&&za(k),k=Wa(r,o,c,y),k===null&&id(r,o,y,Yo,c),k===v)break;v=k}v!==null&&y.stopPropagation()}else id(r,o,y,null,c)}}var Yo=null;function Wa(r,o,c,y){if(Yo=null,r=ut(y),r=mo(r),r!==null)if(o=Et(r),o===null)r=null;else if(c=o.tag,c===13){if(r=cn(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Yo=r,null}function pu(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jn()){case dn:return 1;case ei:return 4;case pn:case ht:return 16;case Qr:return 536870912;default:return 16}default:return 16}}var Fn=null,Lr=null,yn=null;function Qo(){if(yn)return yn;var r,o=Lr,c=o.length,y,v="value"in Fn?Fn.value:Fn.textContent,k=v.length;for(r=0;r<c&&o[r]===v[r];r++);var R=c-r;for(y=1;y<=R&&o[c-y]===v[k-y];y++);return yn=v.slice(r,1<y?1-y:void 0)}function ni(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function co(){return!0}function fu(){return!1}function xr(r){function o(c,y,v,k,R){this._reactName=c,this._targetInst=v,this.type=y,this.nativeEvent=k,this.target=R,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(c=r[G],this[G]=c?c(k):k[G]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?co:fu,this.isPropagationStopped=fu,this}return ie(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),o}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=xr(An),po=ie({},An,{view:0,detail:0}),Lc=xr(po),Ga,Ka,ii,fo=ie({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(Ga=r.screenX-ii.screenX,Ka=r.screenY-ii.screenY):Ka=Ga=0,ii=r),Ga)},movementY:function(r){return"movementY"in r?r.movementY:Ka}}),_u=xr(fo),Dc=ie({},fo,{dataTransfer:0}),Bc=xr(Dc),mu=ie({},po,{relatedTarget:0}),Ya=xr(mu),zc=ie({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=xr(zc),Hc=ie({},An,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wc=xr(Hc),Uc=ie({},An,{data:0}),hu=xr(Uc),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=gu[r])?!!o[r]:!1}function N(){return Kc}var B=ie({},po,{key:function(r){if(r.key){var o=yu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N,charCode:function(r){return r.type==="keypress"?ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),H=xr(B),L=ie({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y=xr(L),re=ie({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N}),ce=xr(re),de=ie({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),ve=xr(de),be=ie({},fo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=xr(be),fe=[9,13,27,32],ge=l&&"CompositionEvent"in window,xe=null;l&&"documentMode"in document&&(xe=document.documentMode);var ye=l&&"TextEvent"in window&&!xe,ke=l&&(!ge||xe&&8<xe&&11>=xe),Re=" ",Pe=!1;function Ye(r,o){switch(r){case"keyup":return fe.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var et=!1;function nt(r,o){switch(r){case"compositionend":return Xe(o);case"keypress":return o.which!==32?null:(Pe=!0,Re);case"textInput":return r=o.data,r===Re&&Pe?null:r;default:return null}}function Dt(r,o){if(et)return r==="compositionend"||!ge&&Ye(r,o)?(r=Qo(),yn=Lr=Fn=null,et=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ke&&o.locale!=="ko"?null:o.data;default:return null}}var wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!wr[r.type]:o==="textarea"}function Ei(r,o,c,y){Vn(y),o=qu(o,"onChange"),0<o.length&&(c=new Ua("onChange","change",null,c,y),r.push({event:c,listeners:o}))}var _o=null,Qa=null;function OI(r){Jg(r,0)}function vu(r){var o=ta(r);if(Ie(o))return r}function FI(r,o){if(r==="change")return o}var Og=!1;if(l){var Yc;if(l){var Qc="oninput"in document;if(!Qc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Qc=typeof Fg.oninput=="function"}Yc=Qc}else Yc=!1;Og=Yc&&(!document.documentMode||9<document.documentMode)}function Ag(){_o&&(_o.detachEvent("onpropertychange",Lg),Qa=_o=null)}function Lg(r){if(r.propertyName==="value"&&vu(Qa)){var o=[];Ei(o,Qa,r,ut(r)),Do(OI,o)}}function AI(r,o,c){r==="focusin"?(Ag(),_o=o,Qa=c,_o.attachEvent("onpropertychange",Lg)):r==="focusout"&&Ag()}function LI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Qa)}function DI(r,o){if(r==="click")return vu(o)}function BI(r,o){if(r==="input"||r==="change")return vu(o)}function zI(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gn=typeof Object.is=="function"?Object.is:zI;function Xa(r,o){if(gn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),y=Object.keys(o);if(c.length!==y.length)return!1;for(y=0;y<c.length;y++){var v=c[y];if(!d.call(o,v)||!gn(r[v],o[v]))return!1}return!0}function Dg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bg(r,o){var c=Dg(r);r=0;for(var y;c;){if(c.nodeType===3){if(y=r+c.textContent.length,r<=o&&y>=o)return{node:c,offset:o-r};r=y}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Dg(c)}}function zg(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?zg(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function $g(){for(var r=window,o=Te();o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Te(r.document)}return o}function Xc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function $I(r){var o=$g(),c=r.focusedElem,y=r.selectionRange;if(o!==c&&c&&c.ownerDocument&&zg(c.ownerDocument.documentElement,c)){if(y!==null&&Xc(c)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(r,c.value.length);else if(r=(o=c.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var v=c.textContent.length,k=Math.min(y.start,v);y=y.end===void 0?k:Math.min(y.end,v),!r.extend&&k>y&&(v=y,y=k,k=v),v=Bg(c,k);var R=Bg(c,y);v&&R&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==R.node||r.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),r.removeAllRanges(),k>y?(r.addRange(o),r.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),r.addRange(o)))}}for(o=[],r=c;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)r=o[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var HI=l&&"documentMode"in document&&11>=document.documentMode,Xo=null,Zc=null,Za=null,Jc=!1;function Hg(r,o,c){var y=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Jc||Xo==null||Xo!==Te(y)||(y=Xo,"selectionStart"in y&&Xc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Za&&Xa(Za,y)||(Za=y,y=qu(Zc,"onSelect"),0<y.length&&(o=new Ua("onSelect","select",null,o,c),r.push({event:o,listeners:y}),o.target=Xo)))}function xu(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Zo={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},ed={},Wg={};l&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function wu(r){if(ed[r])return ed[r];if(!Zo[r])return r;var o=Zo[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Wg)return ed[r]=o[c];return r}var Ug=wu("animationend"),Gg=wu("animationiteration"),Kg=wu("animationstart"),Yg=wu("transitionend"),Qg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(r,o){Qg.set(r,o),s(o,[r])}for(var td=0;td<Xg.length;td++){var rd=Xg[td],WI=rd.toLowerCase(),UI=rd[0].toUpperCase()+rd.slice(1);Ii(WI,"on"+UI)}Ii(Ug,"onAnimationEnd"),Ii(Gg,"onAnimationIteration"),Ii(Kg,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Yg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Zg(r,o,c){var y=r.type||"unknown-event";r.currentTarget=c,yr(y,o,void 0,r),r.currentTarget=null}function Jg(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var y=r[c],v=y.event;y=y.listeners;e:{var k=void 0;if(o)for(var R=y.length-1;0<=R;R--){var G=y[R],ee=G.instance,pe=G.currentTarget;if(G=G.listener,ee!==k&&v.isPropagationStopped())break e;Zg(v,G,pe),k=ee}else for(R=0;R<y.length;R++){if(G=y[R],ee=G.instance,pe=G.currentTarget,G=G.listener,ee!==k&&v.isPropagationStopped())break e;Zg(v,G,pe),k=ee}}}if(Gt)throw r=nr,Gt=!1,nr=null,r}function yt(r,o){var c=o[cd];c===void 0&&(c=o[cd]=new Set);var y=r+"__bubble";c.has(y)||(ev(o,r,2,!1),c.add(y))}function nd(r,o,c){var y=0;o&&(y|=4),ev(c,r,y,o)}var bu="_reactListening"+Math.random().toString(36).slice(2);function es(r){if(!r[bu]){r[bu]=!0,i.forEach(function(c){c!=="selectionchange"&&(GI.has(c)||nd(c,!1,r),nd(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[bu]||(o[bu]=!0,nd("selectionchange",!1,o))}}function ev(r,o,c,y){switch(pu(o)){case 1:var v=Fc;break;case 4:v=Ac;break;default:v=Ha}c=v.bind(null,o,c,r),v=void 0,!Zi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),y?v!==void 0?r.addEventListener(o,c,{capture:!0,passive:v}):r.addEventListener(o,c,!0):v!==void 0?r.addEventListener(o,c,{passive:v}):r.addEventListener(o,c,!1)}function id(r,o,c,y,v){var k=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var R=y.tag;if(R===3||R===4){var G=y.stateNode.containerInfo;if(G===v||G.nodeType===8&&G.parentNode===v)break;if(R===4)for(R=y.return;R!==null;){var ee=R.tag;if((ee===3||ee===4)&&(ee=R.stateNode.containerInfo,ee===v||ee.nodeType===8&&ee.parentNode===v))return;R=R.return}for(;G!==null;){if(R=mo(G),R===null)return;if(ee=R.tag,ee===5||ee===6){y=k=R;continue e}G=G.parentNode}}y=y.return}Do(function(){var pe=k,qe=ut(c),Ce=[];e:{var we=Qg.get(r);if(we!==void 0){var Oe=Ua,Ae=r;switch(r){case"keypress":if(ni(c)===0)break e;case"keydown":case"keyup":Oe=H;break;case"focusin":Ae="focus",Oe=Ya;break;case"focusout":Ae="blur",Oe=Ya;break;case"beforeblur":case"afterblur":Oe=Ya;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=ce;break;case Ug:case Gg:case Kg:Oe=$c;break;case Yg:Oe=ve;break;case"scroll":Oe=Lc;break;case"wheel":Oe=Me;break;case"copy":case"cut":case"paste":Oe=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Y}var Le=(o&4)!==0,Pt=!Le&&r==="scroll",ue=Le?we!==null?we+"Capture":null:we;Le=[];for(var ne=pe,le;ne!==null;){le=ne;var Ee=le.stateNode;if(le.tag===5&&Ee!==null&&(le=Ee,ue!==null&&(Ee=xt(ne,ue),Ee!=null&&Le.push(ts(ne,Ee,le)))),Pt)break;ne=ne.return}0<Le.length&&(we=new Oe(we,Ae,null,c,qe),Ce.push({event:we,listeners:Le}))}}if((o&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Oe=r==="mouseout"||r==="pointerout",we&&c!==me&&(Ae=c.relatedTarget||c.fromElement)&&(mo(Ae)||Ae[oi]))break e;if((Oe||we)&&(we=qe.window===qe?qe:(we=qe.ownerDocument)?we.defaultView||we.parentWindow:window,Oe?(Ae=c.relatedTarget||c.toElement,Oe=pe,Ae=Ae?mo(Ae):null,Ae!==null&&(Pt=Et(Ae),Ae!==Pt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Oe=null,Ae=pe),Oe!==Ae)){if(Le=_u,Ee="onMouseLeave",ue="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Y,Ee="onPointerLeave",ue="onPointerEnter",ne="pointer"),Pt=Oe==null?we:ta(Oe),le=Ae==null?we:ta(Ae),we=new Le(Ee,ne+"leave",Oe,c,qe),we.target=Pt,we.relatedTarget=le,Ee=null,mo(qe)===pe&&(Le=new Le(ue,ne+"enter",Ae,c,qe),Le.target=le,Le.relatedTarget=Pt,Ee=Le),Pt=Ee,Oe&&Ae)t:{for(Le=Oe,ue=Ae,ne=0,le=Le;le;le=Jo(le))ne++;for(le=0,Ee=ue;Ee;Ee=Jo(Ee))le++;for(;0<ne-le;)Le=Jo(Le),ne--;for(;0<le-ne;)ue=Jo(ue),le--;for(;ne--;){if(Le===ue||ue!==null&&Le===ue.alternate)break t;Le=Jo(Le),ue=Jo(ue)}Le=null}else Le=null;Oe!==null&&tv(Ce,we,Oe,Le,!1),Ae!==null&&Pt!==null&&tv(Ce,Pt,Ae,Le,!0)}}e:{if(we=pe?ta(pe):window,Oe=we.nodeName&&we.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&we.type==="file")var Be=FI;else if(jt(we))if(Og)Be=BI;else{Be=LI;var Ue=AI}else(Oe=we.nodeName)&&Oe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Be=DI);if(Be&&(Be=Be(r,pe))){Ei(Ce,Be,c,qe);break e}Ue&&Ue(r,we,pe),r==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&rt(we,"number",we.value)}switch(Ue=pe?ta(pe):window,r){case"focusin":(jt(Ue)||Ue.contentEditable==="true")&&(Xo=Ue,Zc=pe,Za=null);break;case"focusout":Za=Zc=Xo=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Hg(Ce,c,qe);break;case"selectionchange":if(HI)break;case"keydown":case"keyup":Hg(Ce,c,qe)}var Ge;if(ge)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else et?Ye(r,c)&&(Ke="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ke="onCompositionStart");Ke&&(ke&&c.locale!=="ko"&&(et||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&et&&(Ge=Qo()):(Fn=qe,Lr="value"in Fn?Fn.value:Fn.textContent,et=!0)),Ue=qu(pe,Ke),0<Ue.length&&(Ke=new hu(Ke,r,null,c,qe),Ce.push({event:Ke,listeners:Ue}),Ge?Ke.data=Ge:(Ge=Xe(c),Ge!==null&&(Ke.data=Ge)))),(Ge=ye?nt(r,c):Dt(r,c))&&(pe=qu(pe,"onBeforeInput"),0<pe.length&&(qe=new hu("onBeforeInput","beforeinput",null,c,qe),Ce.push({event:qe,listeners:pe}),qe.data=Ge))}Jg(Ce,o)})}function ts(r,o,c){return{instance:r,listener:o,currentTarget:c}}function qu(r,o){for(var c=o+"Capture",y=[];r!==null;){var v=r,k=v.stateNode;v.tag===5&&k!==null&&(v=k,k=xt(r,c),k!=null&&y.unshift(ts(r,k,v)),k=xt(r,o),k!=null&&y.push(ts(r,k,v))),r=r.return}return y}function Jo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function tv(r,o,c,y,v){for(var k=o._reactName,R=[];c!==null&&c!==y;){var G=c,ee=G.alternate,pe=G.stateNode;if(ee!==null&&ee===y)break;G.tag===5&&pe!==null&&(G=pe,v?(ee=xt(c,k),ee!=null&&R.unshift(ts(c,ee,G))):v||(ee=xt(c,k),ee!=null&&R.push(ts(c,ee,G)))),c=c.return}R.length!==0&&r.push({event:o,listeners:R})}var KI=/\r\n?/g,YI=/\u0000|\uFFFD/g;function rv(r){return(typeof r=="string"?r:""+r).replace(KI,`
`).replace(YI,"")}function Su(r,o,c){if(o=rv(o),rv(r)!==o&&c)throw Error(n(425))}function Cu(){}var od=null,ad=null;function sd(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,QI=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(r){return nv.resolve(null).then(r).catch(ZI)}:ud;function ZI(r){setTimeout(function(){throw r})}function ld(r,o){var c=o,y=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(y===0){r.removeChild(v),lo(o);return}y--}else c!=="$"&&c!=="$?"&&c!=="$!"||y++;c=v}while(c);lo(o)}function Ti(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function iv(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ea,rs="__reactProps$"+ea,oi="__reactContainer$"+ea,cd="__reactEvents$"+ea,JI="__reactListeners$"+ea,eT="__reactHandles$"+ea;function mo(r){var o=r[Ln];if(o)return o;for(var c=r.parentNode;c;){if(o=c[oi]||c[Ln]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=iv(r);r!==null;){if(c=r[Ln])return c;r=iv(r)}return o}r=c,c=r.parentNode}return null}function ns(r){return r=r[Ln]||r[oi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ta(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ku(r){return r[rs]||null}var dd=[],ra=-1;function Ni(r){return{current:r}}function gt(r){0>ra||(r.current=dd[ra],dd[ra]=null,ra--)}function pt(r,o){ra++,dd[ra]=r.current,r.current=o}var ji={},ur=Ni(ji),kr=Ni(!1),ho=ji;function na(r,o){var c=r.type.contextTypes;if(!c)return ji;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var v={},k;for(k in c)v[k]=o[k];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=v),v}function Mr(r){return r=r.childContextTypes,r!=null}function Mu(){gt(kr),gt(ur)}function ov(r,o,c){if(ur.current!==ji)throw Error(n(168));pt(ur,o),pt(kr,c)}function av(r,o,c){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return c;y=y.getChildContext();for(var v in y)if(!(v in o))throw Error(n(108,se(r)||"Unknown",v));return ie({},c,y)}function Eu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ji,ho=ur.current,pt(ur,r),pt(kr,kr.current),!0}function sv(r,o,c){var y=r.stateNode;if(!y)throw Error(n(169));c?(r=av(r,o,ho),y.__reactInternalMemoizedMergedChildContext=r,gt(kr),gt(ur),pt(ur,r)):gt(kr),pt(kr,c)}var ai=null,Iu=!1,pd=!1;function uv(r){ai===null?ai=[r]:ai.push(r)}function tT(r){Iu=!0,uv(r)}function Pi(){if(!pd&&ai!==null){pd=!0;var r=0,o=lt;try{var c=ai;for(lt=1;r<c.length;r++){var y=c[r];do y=y(!0);while(y!==null)}ai=null,Iu=!1}catch(v){throw ai!==null&&(ai=ai.slice(r+1)),bi(dn,Pi),v}finally{lt=o,pd=!1}}return null}var ia=[],oa=0,Tu=null,Nu=0,Jr=[],en=0,yo=null,si=1,ui="";function go(r,o){ia[oa++]=Nu,ia[oa++]=Tu,Tu=r,Nu=o}function lv(r,o,c){Jr[en++]=si,Jr[en++]=ui,Jr[en++]=yo,yo=r;var y=si;r=ui;var v=32-vr(y)-1;y&=~(1<<v),c+=1;var k=32-vr(o)+v;if(30<k){var R=v-v%5;k=(y&(1<<R)-1).toString(32),y>>=R,v-=R,si=1<<32-vr(o)+v|c<<v|y,ui=k+r}else si=1<<k|c<<v|y,ui=r}function fd(r){r.return!==null&&(go(r,1),lv(r,1,0))}function _d(r){for(;r===Tu;)Tu=ia[--oa],ia[oa]=null,Nu=ia[--oa],ia[oa]=null;for(;r===yo;)yo=Jr[--en],Jr[en]=null,ui=Jr[--en],Jr[en]=null,si=Jr[--en],Jr[en]=null}var Dr=null,Br=null,wt=!1,vn=null;function cv(r,o){var c=on(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=r,o=r.deletions,o===null?(r.deletions=[c],r.flags|=16):o.push(c)}function dv(r,o){switch(r.tag){case 5:var c=r.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Dr=r,Br=Ti(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Dr=r,Br=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=yo!==null?{id:si,overflow:ui}:null,r.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=on(18,null,null,0),c.stateNode=o,c.return=r,r.child=c,Dr=r,Br=null,!0):!1;default:return!1}}function md(r){return(r.mode&1)!==0&&(r.flags&128)===0}function hd(r){if(wt){var o=Br;if(o){var c=o;if(!dv(r,o)){if(md(r))throw Error(n(418));o=Ti(c.nextSibling);var y=Dr;o&&dv(r,o)?cv(y,c):(r.flags=r.flags&-4097|2,wt=!1,Dr=r)}}else{if(md(r))throw Error(n(418));r.flags=r.flags&-4097|2,wt=!1,Dr=r}}}function pv(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Dr=r}function ju(r){if(r!==Dr)return!1;if(!wt)return pv(r),wt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!sd(r.type,r.memoizedProps)),o&&(o=Br)){if(md(r))throw fv(),Error(n(418));for(;o;)cv(r,o),o=Ti(o.nextSibling)}if(pv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(o===0){Br=Ti(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}r=r.nextSibling}Br=null}}else Br=Dr?Ti(r.stateNode.nextSibling):null;return!0}function fv(){for(var r=Br;r;)r=Ti(r.nextSibling)}function aa(){Br=Dr=null,wt=!1}function yd(r){vn===null?vn=[r]:vn.push(r)}var rT=E.ReactCurrentBatchConfig;function is(r,o,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var y=c.stateNode}if(!y)throw Error(n(147,r));var v=y,k=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===k?o.ref:(o=function(R){var G=v.refs;R===null?delete G[k]:G[k]=R},o._stringRef=k,o)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Pu(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function _v(r){var o=r._init;return o(r._payload)}function mv(r){function o(ue,ne){if(r){var le=ue.deletions;le===null?(ue.deletions=[ne],ue.flags|=16):le.push(ne)}}function c(ue,ne){if(!r)return null;for(;ne!==null;)o(ue,ne),ne=ne.sibling;return null}function y(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function v(ue,ne){return ue=Bi(ue,ne),ue.index=0,ue.sibling=null,ue}function k(ue,ne,le){return ue.index=le,r?(le=ue.alternate,le!==null?(le=le.index,le<ne?(ue.flags|=2,ne):le):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function R(ue){return r&&ue.alternate===null&&(ue.flags|=2),ue}function G(ue,ne,le,Ee){return ne===null||ne.tag!==6?(ne=up(le,ue.mode,Ee),ne.return=ue,ne):(ne=v(ne,le),ne.return=ue,ne)}function ee(ue,ne,le,Ee){var Be=le.type;return Be===T?qe(ue,ne,le.props.children,Ee,le.key):ne!==null&&(ne.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===W&&_v(Be)===ne.type)?(Ee=v(ne,le.props),Ee.ref=is(ue,ne,le),Ee.return=ue,Ee):(Ee=nl(le.type,le.key,le.props,null,ue.mode,Ee),Ee.ref=is(ue,ne,le),Ee.return=ue,Ee)}function pe(ue,ne,le,Ee){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==le.containerInfo||ne.stateNode.implementation!==le.implementation?(ne=lp(le,ue.mode,Ee),ne.return=ue,ne):(ne=v(ne,le.children||[]),ne.return=ue,ne)}function qe(ue,ne,le,Ee,Be){return ne===null||ne.tag!==7?(ne=ko(le,ue.mode,Ee,Be),ne.return=ue,ne):(ne=v(ne,le),ne.return=ue,ne)}function Ce(ue,ne,le){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=up(""+ne,ue.mode,le),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return le=nl(ne.type,ne.key,ne.props,null,ue.mode,le),le.ref=is(ue,null,ne),le.return=ue,le;case M:return ne=lp(ne,ue.mode,le),ne.return=ue,ne;case W:var Ee=ne._init;return Ce(ue,Ee(ne._payload),le)}if(ft(ne)||K(ne))return ne=ko(ne,ue.mode,le,null),ne.return=ue,ne;Pu(ue,ne)}return null}function we(ue,ne,le,Ee){var Be=ne!==null?ne.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Be!==null?null:G(ue,ne,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return le.key===Be?ee(ue,ne,le,Ee):null;case M:return le.key===Be?pe(ue,ne,le,Ee):null;case W:return Be=le._init,we(ue,ne,Be(le._payload),Ee)}if(ft(le)||K(le))return Be!==null?null:qe(ue,ne,le,Ee,null);Pu(ue,le)}return null}function Oe(ue,ne,le,Ee,Be){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ue=ue.get(le)||null,G(ne,ue,""+Ee,Be);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case I:return ue=ue.get(Ee.key===null?le:Ee.key)||null,ee(ne,ue,Ee,Be);case M:return ue=ue.get(Ee.key===null?le:Ee.key)||null,pe(ne,ue,Ee,Be);case W:var Ue=Ee._init;return Oe(ue,ne,le,Ue(Ee._payload),Be)}if(ft(Ee)||K(Ee))return ue=ue.get(le)||null,qe(ne,ue,Ee,Be,null);Pu(ne,Ee)}return null}function Ae(ue,ne,le,Ee){for(var Be=null,Ue=null,Ge=ne,Ke=ne=0,Xt=null;Ge!==null&&Ke<le.length;Ke++){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var it=we(ue,Ge,le[Ke],Ee);if(it===null){Ge===null&&(Ge=Xt);break}r&&Ge&&it.alternate===null&&o(ue,Ge),ne=k(it,ne,Ke),Ue===null?Be=it:Ue.sibling=it,Ue=it,Ge=Xt}if(Ke===le.length)return c(ue,Ge),wt&&go(ue,Ke),Be;if(Ge===null){for(;Ke<le.length;Ke++)Ge=Ce(ue,le[Ke],Ee),Ge!==null&&(ne=k(Ge,ne,Ke),Ue===null?Be=Ge:Ue.sibling=Ge,Ue=Ge);return wt&&go(ue,Ke),Be}for(Ge=y(ue,Ge);Ke<le.length;Ke++)Xt=Oe(Ge,ue,Ke,le[Ke],Ee),Xt!==null&&(r&&Xt.alternate!==null&&Ge.delete(Xt.key===null?Ke:Xt.key),ne=k(Xt,ne,Ke),Ue===null?Be=Xt:Ue.sibling=Xt,Ue=Xt);return r&&Ge.forEach(function(zi){return o(ue,zi)}),wt&&go(ue,Ke),Be}function Le(ue,ne,le,Ee){var Be=K(le);if(typeof Be!="function")throw Error(n(150));if(le=Be.call(le),le==null)throw Error(n(151));for(var Ue=Be=null,Ge=ne,Ke=ne=0,Xt=null,it=le.next();Ge!==null&&!it.done;Ke++,it=le.next()){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var zi=we(ue,Ge,it.value,Ee);if(zi===null){Ge===null&&(Ge=Xt);break}r&&Ge&&zi.alternate===null&&o(ue,Ge),ne=k(zi,ne,Ke),Ue===null?Be=zi:Ue.sibling=zi,Ue=zi,Ge=Xt}if(it.done)return c(ue,Ge),wt&&go(ue,Ke),Be;if(Ge===null){for(;!it.done;Ke++,it=le.next())it=Ce(ue,it.value,Ee),it!==null&&(ne=k(it,ne,Ke),Ue===null?Be=it:Ue.sibling=it,Ue=it);return wt&&go(ue,Ke),Be}for(Ge=y(ue,Ge);!it.done;Ke++,it=le.next())it=Oe(Ge,ue,Ke,it.value,Ee),it!==null&&(r&&it.alternate!==null&&Ge.delete(it.key===null?Ke:it.key),ne=k(it,ne,Ke),Ue===null?Be=it:Ue.sibling=it,Ue=it);return r&&Ge.forEach(function(VT){return o(ue,VT)}),wt&&go(ue,Ke),Be}function Pt(ue,ne,le,Ee){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case I:e:{for(var Be=le.key,Ue=ne;Ue!==null;){if(Ue.key===Be){if(Be=le.type,Be===T){if(Ue.tag===7){c(ue,Ue.sibling),ne=v(Ue,le.props.children),ne.return=ue,ue=ne;break e}}else if(Ue.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===W&&_v(Be)===Ue.type){c(ue,Ue.sibling),ne=v(Ue,le.props),ne.ref=is(ue,Ue,le),ne.return=ue,ue=ne;break e}c(ue,Ue);break}else o(ue,Ue);Ue=Ue.sibling}le.type===T?(ne=ko(le.props.children,ue.mode,Ee,le.key),ne.return=ue,ue=ne):(Ee=nl(le.type,le.key,le.props,null,ue.mode,Ee),Ee.ref=is(ue,ne,le),Ee.return=ue,ue=Ee)}return R(ue);case M:e:{for(Ue=le.key;ne!==null;){if(ne.key===Ue)if(ne.tag===4&&ne.stateNode.containerInfo===le.containerInfo&&ne.stateNode.implementation===le.implementation){c(ue,ne.sibling),ne=v(ne,le.children||[]),ne.return=ue,ue=ne;break e}else{c(ue,ne);break}else o(ue,ne);ne=ne.sibling}ne=lp(le,ue.mode,Ee),ne.return=ue,ue=ne}return R(ue);case W:return Ue=le._init,Pt(ue,ne,Ue(le._payload),Ee)}if(ft(le))return Ae(ue,ne,le,Ee);if(K(le))return Le(ue,ne,le,Ee);Pu(ue,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ne!==null&&ne.tag===6?(c(ue,ne.sibling),ne=v(ne,le),ne.return=ue,ue=ne):(c(ue,ne),ne=up(le,ue.mode,Ee),ne.return=ue,ue=ne),R(ue)):c(ue,ne)}return Pt}var sa=mv(!0),hv=mv(!1),Ru=Ni(null),Vu=null,ua=null,gd=null;function vd(){gd=ua=Vu=null}function xd(r){var o=Ru.current;gt(Ru),r._currentValue=o}function wd(r,o,c){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===c)break;r=r.return}}function la(r,o){Vu=r,gd=ua=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Er=!0),r.firstContext=null)}function tn(r){var o=r._currentValue;if(gd!==r)if(r={context:r,memoizedValue:o,next:null},ua===null){if(Vu===null)throw Error(n(308));ua=r,Vu.dependencies={lanes:0,firstContext:r}}else ua=ua.next=r;return o}var vo=null;function bd(r){vo===null?vo=[r]:vo.push(r)}function yv(r,o,c,y){var v=o.interleaved;return v===null?(c.next=c,bd(o)):(c.next=v.next,v.next=c),o.interleaved=c,li(r,y)}function li(r,o){r.lanes|=o;var c=r.alternate;for(c!==null&&(c.lanes|=o),c=r,r=r.return;r!==null;)r.childLanes|=o,c=r.alternate,c!==null&&(c.childLanes|=o),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Ri=!1;function qd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ci(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Vi(r,o,c){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(tt&2)!==0){var v=y.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),y.pending=o,li(r,c)}return v=y.interleaved,v===null?(o.next=o,bd(y)):(o.next=v.next,v.next=o),y.interleaved=o,li(r,c)}function Ou(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,We(r,c)}}function vv(r,o){var c=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,c===y)){var v=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var R={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};k===null?v=k=R:k=k.next=R,c=c.next}while(c!==null);k===null?v=k=o:k=k.next=o}else v=k=o;c={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:y.shared,effects:y.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}function Fu(r,o,c,y){var v=r.updateQueue;Ri=!1;var k=v.firstBaseUpdate,R=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var ee=G,pe=ee.next;ee.next=null,R===null?k=pe:R.next=pe,R=ee;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,G=qe.lastBaseUpdate,G!==R&&(G===null?qe.firstBaseUpdate=pe:G.next=pe,qe.lastBaseUpdate=ee))}if(k!==null){var Ce=v.baseState;R=0,qe=pe=ee=null,G=k;do{var we=G.lane,Oe=G.eventTime;if((y&we)===we){qe!==null&&(qe=qe.next={eventTime:Oe,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ae=r,Le=G;switch(we=o,Oe=c,Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){Ce=Ae.call(Oe,Ce,we);break e}Ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,we=typeof Ae=="function"?Ae.call(Oe,Ce,we):Ae,we==null)break e;Ce=ie({},Ce,we);break e;case 2:Ri=!0}}G.callback!==null&&G.lane!==0&&(r.flags|=64,we=v.effects,we===null?v.effects=[G]:we.push(G))}else Oe={eventTime:Oe,lane:we,tag:G.tag,payload:G.payload,callback:G.callback,next:null},qe===null?(pe=qe=Oe,ee=Ce):qe=qe.next=Oe,R|=we;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;we=G,G=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);if(qe===null&&(ee=Ce),v.baseState=ee,v.firstBaseUpdate=pe,v.lastBaseUpdate=qe,o=v.shared.interleaved,o!==null){v=o;do R|=v.lane,v=v.next;while(v!==o)}else k===null&&(v.shared.lanes=0);bo|=R,r.lanes=R,r.memoizedState=Ce}}function xv(r,o,c){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],v=y.callback;if(v!==null){if(y.callback=null,y=c,typeof v!="function")throw Error(n(191,v));v.call(y)}}}var os={},Dn=Ni(os),as=Ni(os),ss=Ni(os);function xo(r){if(r===os)throw Error(n(174));return r}function Sd(r,o){switch(pt(ss,o),pt(as,r),pt(Dn,os),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:er(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=er(o,r)}gt(Dn),pt(Dn,o)}function ca(){gt(Dn),gt(as),gt(ss)}function wv(r){xo(ss.current);var o=xo(Dn.current),c=er(o,r.type);o!==c&&(pt(as,r),pt(Dn,c))}function Cd(r){as.current===r&&(gt(Dn),gt(as))}var kt=Ni(0);function Au(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var kd=[];function Md(){for(var r=0;r<kd.length;r++)kd[r]._workInProgressVersionPrimary=null;kd.length=0}var Lu=E.ReactCurrentDispatcher,Ed=E.ReactCurrentBatchConfig,wo=0,Mt=null,Bt=null,Yt=null,Du=!1,us=!1,ls=0,nT=0;function lr(){throw Error(n(321))}function Id(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!gn(r[c],o[c]))return!1;return!0}function Td(r,o,c,y,v,k){if(wo=k,Mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Lu.current=r===null||r.memoizedState===null?sT:uT,r=c(y,v),us){k=0;do{if(us=!1,ls=0,25<=k)throw Error(n(301));k+=1,Yt=Bt=null,o.updateQueue=null,Lu.current=lT,r=c(y,v)}while(us)}if(Lu.current=$u,o=Bt!==null&&Bt.next!==null,wo=0,Yt=Bt=Mt=null,Du=!1,o)throw Error(n(300));return r}function Nd(){var r=ls!==0;return ls=0,r}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r,Yt}function rn(){if(Bt===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var o=Yt===null?Mt.memoizedState:Yt.next;if(o!==null)Yt=o,Bt=r;else{if(r===null)throw Error(n(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r}return Yt}function cs(r,o){return typeof o=="function"?o(r):o}function jd(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=Bt,v=y.baseQueue,k=c.pending;if(k!==null){if(v!==null){var R=v.next;v.next=k.next,k.next=R}y.baseQueue=v=k,c.pending=null}if(v!==null){k=v.next,y=y.baseState;var G=R=null,ee=null,pe=k;do{var qe=pe.lane;if((wo&qe)===qe)ee!==null&&(ee=ee.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),y=pe.hasEagerState?pe.eagerState:r(y,pe.action);else{var Ce={lane:qe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};ee===null?(G=ee=Ce,R=y):ee=ee.next=Ce,Mt.lanes|=qe,bo|=qe}pe=pe.next}while(pe!==null&&pe!==k);ee===null?R=y:ee.next=G,gn(y,o.memoizedState)||(Er=!0),o.memoizedState=y,o.baseState=R,o.baseQueue=ee,c.lastRenderedState=y}if(r=c.interleaved,r!==null){v=r;do k=v.lane,Mt.lanes|=k,bo|=k,v=v.next;while(v!==r)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Pd(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=c.dispatch,v=c.pending,k=o.memoizedState;if(v!==null){c.pending=null;var R=v=v.next;do k=r(k,R.action),R=R.next;while(R!==v);gn(k,o.memoizedState)||(Er=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),c.lastRenderedState=k}return[k,y]}function bv(){}function qv(r,o){var c=Mt,y=rn(),v=o(),k=!gn(y.memoizedState,v);if(k&&(y.memoizedState=v,Er=!0),y=y.queue,Rd(kv.bind(null,c,y,r),[r]),y.getSnapshot!==o||k||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,ds(9,Cv.bind(null,c,y,v,o),void 0,null),Qt===null)throw Error(n(349));(wo&30)!==0||Sv(c,o,v)}return v}function Sv(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Cv(r,o,c,y){o.value=c,o.getSnapshot=y,Mv(o)&&Ev(r)}function kv(r,o,c){return c(function(){Mv(o)&&Ev(r)})}function Mv(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!gn(r,c)}catch{return!0}}function Ev(r){var o=li(r,1);o!==null&&qn(o,r,1,-1)}function Iv(r){var o=Bn();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},o.queue=r,r=r.dispatch=aT.bind(null,Mt,r),[o.memoizedState,r]}function ds(r,o,c,y){return r={tag:r,create:o,destroy:c,deps:y,next:null},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.lastEffect=r.next=r):(c=o.lastEffect,c===null?o.lastEffect=r.next=r:(y=c.next,c.next=r,r.next=y,o.lastEffect=r)),r}function Tv(){return rn().memoizedState}function Bu(r,o,c,y){var v=Bn();Mt.flags|=r,v.memoizedState=ds(1|o,c,void 0,y===void 0?null:y)}function zu(r,o,c,y){var v=rn();y=y===void 0?null:y;var k=void 0;if(Bt!==null){var R=Bt.memoizedState;if(k=R.destroy,y!==null&&Id(y,R.deps)){v.memoizedState=ds(o,c,k,y);return}}Mt.flags|=r,v.memoizedState=ds(1|o,c,k,y)}function Nv(r,o){return Bu(8390656,8,r,o)}function Rd(r,o){return zu(2048,8,r,o)}function jv(r,o){return zu(4,2,r,o)}function Pv(r,o){return zu(4,4,r,o)}function Rv(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Vv(r,o,c){return c=c!=null?c.concat([r]):null,zu(4,4,Rv.bind(null,o,r),c)}function Vd(){}function Ov(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Id(o,y[1])?y[0]:(c.memoizedState=[r,o],r)}function Fv(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Id(o,y[1])?y[0]:(r=r(),c.memoizedState=[r,o],r)}function Av(r,o,c){return(wo&21)===0?(r.baseState&&(r.baseState=!1,Er=!0),r.memoizedState=c):(gn(c,o)||(c=Ci(),Mt.lanes|=c,bo|=c,r.baseState=!0),o)}function iT(r,o){var c=lt;lt=c!==0&&4>c?c:4,r(!0);var y=Ed.transition;Ed.transition={};try{r(!1),o()}finally{lt=c,Ed.transition=y}}function Lv(){return rn().memoizedState}function oT(r,o,c){var y=Li(r);if(c={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null},Dv(r))Bv(o,c);else if(c=yv(r,o,c,y),c!==null){var v=qr();qn(c,r,y,v),zv(c,o,y)}}function aT(r,o,c){var y=Li(r),v={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dv(r))Bv(o,v);else{var k=r.alternate;if(r.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var R=o.lastRenderedState,G=k(R,c);if(v.hasEagerState=!0,v.eagerState=G,gn(G,R)){var ee=o.interleaved;ee===null?(v.next=v,bd(o)):(v.next=ee.next,ee.next=v),o.interleaved=v;return}}catch{}finally{}c=yv(r,o,v,y),c!==null&&(v=qr(),qn(c,r,y,v),zv(c,o,y))}}function Dv(r){var o=r.alternate;return r===Mt||o!==null&&o===Mt}function Bv(r,o){us=Du=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function zv(r,o,c){if((c&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,We(r,c)}}var $u={readContext:tn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},sT={readContext:tn,useCallback:function(r,o){return Bn().memoizedState=[r,o===void 0?null:o],r},useContext:tn,useEffect:Nv,useImperativeHandle:function(r,o,c){return c=c!=null?c.concat([r]):null,Bu(4194308,4,Rv.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Bu(4194308,4,r,o)},useInsertionEffect:function(r,o){return Bu(4,2,r,o)},useMemo:function(r,o){var c=Bn();return o=o===void 0?null:o,r=r(),c.memoizedState=[r,o],r},useReducer:function(r,o,c){var y=Bn();return o=c!==void 0?c(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=oT.bind(null,Mt,r),[y.memoizedState,r]},useRef:function(r){var o=Bn();return r={current:r},o.memoizedState=r},useState:Iv,useDebugValue:Vd,useDeferredValue:function(r){return Bn().memoizedState=r},useTransition:function(){var r=Iv(!1),o=r[0];return r=iT.bind(null,r[1]),Bn().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,c){var y=Mt,v=Bn();if(wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Qt===null)throw Error(n(349));(wo&30)!==0||Sv(y,o,c)}v.memoizedState=c;var k={value:c,getSnapshot:o};return v.queue=k,Nv(kv.bind(null,y,k,r),[r]),y.flags|=2048,ds(9,Cv.bind(null,y,k,c,o),void 0,null),c},useId:function(){var r=Bn(),o=Qt.identifierPrefix;if(wt){var c=ui,y=si;c=(y&~(1<<32-vr(y)-1)).toString(32)+c,o=":"+o+"R"+c,c=ls++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=nT++,o=":"+o+"r"+c.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},uT={readContext:tn,useCallback:Ov,useContext:tn,useEffect:Rd,useImperativeHandle:Vv,useInsertionEffect:jv,useLayoutEffect:Pv,useMemo:Fv,useReducer:jd,useRef:Tv,useState:function(){return jd(cs)},useDebugValue:Vd,useDeferredValue:function(r){var o=rn();return Av(o,Bt.memoizedState,r)},useTransition:function(){var r=jd(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1},lT={readContext:tn,useCallback:Ov,useContext:tn,useEffect:Rd,useImperativeHandle:Vv,useInsertionEffect:jv,useLayoutEffect:Pv,useMemo:Fv,useReducer:Pd,useRef:Tv,useState:function(){return Pd(cs)},useDebugValue:Vd,useDeferredValue:function(r){var o=rn();return Bt===null?o.memoizedState=r:Av(o,Bt.memoizedState,r)},useTransition:function(){var r=Pd(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1};function xn(r,o){if(r&&r.defaultProps){o=ie({},o),r=r.defaultProps;for(var c in r)o[c]===void 0&&(o[c]=r[c]);return o}return o}function Od(r,o,c,y){o=r.memoizedState,c=c(y,o),c=c==null?o:ie({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Hu={isMounted:function(r){return(r=r._reactInternals)?Et(r)===r:!1},enqueueSetState:function(r,o,c){r=r._reactInternals;var y=qr(),v=Li(r),k=ci(y,v);k.payload=o,c!=null&&(k.callback=c),o=Vi(r,k,v),o!==null&&(qn(o,r,v,y),Ou(o,r,v))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var y=qr(),v=Li(r),k=ci(y,v);k.tag=1,k.payload=o,c!=null&&(k.callback=c),o=Vi(r,k,v),o!==null&&(qn(o,r,v,y),Ou(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=qr(),y=Li(r),v=ci(c,y);v.tag=2,o!=null&&(v.callback=o),o=Vi(r,v,y),o!==null&&(qn(o,r,y,c),Ou(o,r,y))}};function $v(r,o,c,y,v,k,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,k,R):o.prototype&&o.prototype.isPureReactComponent?!Xa(c,y)||!Xa(v,k):!0}function Hv(r,o,c){var y=!1,v=ji,k=o.contextType;return typeof k=="object"&&k!==null?k=tn(k):(v=Mr(o)?ho:ur.current,y=o.contextTypes,k=(y=y!=null)?na(r,v):ji),o=new o(c,k),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Hu,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=k),o}function Wv(r,o,c,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,y),o.state!==r&&Hu.enqueueReplaceState(o,o.state,null)}function Fd(r,o,c,y){var v=r.stateNode;v.props=c,v.state=r.memoizedState,v.refs={},qd(r);var k=o.contextType;typeof k=="object"&&k!==null?v.context=tn(k):(k=Mr(o)?ho:ur.current,v.context=na(r,k)),v.state=r.memoizedState,k=o.getDerivedStateFromProps,typeof k=="function"&&(Od(r,o,k,c),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Hu.enqueueReplaceState(v,v.state,null),Fu(r,c,v,y),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function da(r,o){try{var c="",y=o;do c+=J(y),y=y.return;while(y);var v=c}catch(k){v=`
Error generating stack: `+k.message+`
`+k.stack}return{value:r,source:o,stack:v,digest:null}}function Ad(r,o,c){return{value:r,source:null,stack:c??null,digest:o??null}}function Ld(r,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function Uv(r,o,c){c=ci(-1,c),c.tag=3,c.payload={element:null};var y=o.value;return c.callback=function(){Xu||(Xu=!0,ep=y),Ld(r,o)},c}function Gv(r,o,c){c=ci(-1,c),c.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var v=o.value;c.payload=function(){return y(v)},c.callback=function(){Ld(r,o)}}var k=r.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(c.callback=function(){Ld(r,o),typeof y!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})}),c}function Kv(r,o,c){var y=r.pingCache;if(y===null){y=r.pingCache=new cT;var v=new Set;y.set(o,v)}else v=y.get(o),v===void 0&&(v=new Set,y.set(o,v));v.has(c)||(v.add(c),r=ST.bind(null,r,o,c),o.then(r,r))}function Yv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Qv(r,o,c,y,v){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=ci(-1,1),o.tag=2,Vi(c,o,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var dT=E.ReactCurrentOwner,Er=!1;function br(r,o,c,y){o.child=r===null?hv(o,null,c,y):sa(o,r.child,c,y)}function Xv(r,o,c,y,v){c=c.render;var k=o.ref;return la(o,v),y=Td(r,o,c,y,k,v),c=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(wt&&c&&fd(o),o.flags|=1,br(r,o,y,v),o.child)}function Zv(r,o,c,y,v){if(r===null){var k=c.type;return typeof k=="function"&&!sp(k)&&k.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=k,Jv(r,o,k,y,v)):(r=nl(c.type,null,y,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(k=r.child,(r.lanes&v)===0){var R=k.memoizedProps;if(c=c.compare,c=c!==null?c:Xa,c(R,y)&&r.ref===o.ref)return di(r,o,v)}return o.flags|=1,r=Bi(k,y),r.ref=o.ref,r.return=o,o.child=r}function Jv(r,o,c,y,v){if(r!==null){var k=r.memoizedProps;if(Xa(k,y)&&r.ref===o.ref)if(Er=!1,o.pendingProps=y=k,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Er=!0);else return o.lanes=r.lanes,di(r,o,v)}return Dd(r,o,c,y,v)}function ex(r,o,c){var y=o.pendingProps,v=y.children,k=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(fa,zr),zr|=c;else{if((c&1073741824)===0)return r=k!==null?k.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,pt(fa,zr),zr|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=k!==null?k.baseLanes:c,pt(fa,zr),zr|=y}else k!==null?(y=k.baseLanes|c,o.memoizedState=null):y=c,pt(fa,zr),zr|=y;return br(r,o,v,c),o.child}function tx(r,o){var c=o.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Dd(r,o,c,y,v){var k=Mr(c)?ho:ur.current;return k=na(o,k),la(o,v),c=Td(r,o,c,y,k,v),y=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(wt&&y&&fd(o),o.flags|=1,br(r,o,c,v),o.child)}function rx(r,o,c,y,v){if(Mr(c)){var k=!0;Eu(o)}else k=!1;if(la(o,v),o.stateNode===null)Uu(r,o),Hv(o,c,y),Fd(o,c,y,v),y=!0;else if(r===null){var R=o.stateNode,G=o.memoizedProps;R.props=G;var ee=R.context,pe=c.contextType;typeof pe=="object"&&pe!==null?pe=tn(pe):(pe=Mr(c)?ho:ur.current,pe=na(o,pe));var qe=c.getDerivedStateFromProps,Ce=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function";Ce||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G!==y||ee!==pe)&&Wv(o,R,y,pe),Ri=!1;var we=o.memoizedState;R.state=we,Fu(o,y,R,v),ee=o.memoizedState,G!==y||we!==ee||kr.current||Ri?(typeof qe=="function"&&(Od(o,c,qe,y),ee=o.memoizedState),(G=Ri||$v(o,c,G,y,we,ee,pe))?(Ce||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=ee),R.props=y,R.state=ee,R.context=pe,y=G):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{R=o.stateNode,gv(r,o),G=o.memoizedProps,pe=o.type===o.elementType?G:xn(o.type,G),R.props=pe,Ce=o.pendingProps,we=R.context,ee=c.contextType,typeof ee=="object"&&ee!==null?ee=tn(ee):(ee=Mr(c)?ho:ur.current,ee=na(o,ee));var Oe=c.getDerivedStateFromProps;(qe=typeof Oe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G!==Ce||we!==ee)&&Wv(o,R,y,ee),Ri=!1,we=o.memoizedState,R.state=we,Fu(o,y,R,v);var Ae=o.memoizedState;G!==Ce||we!==Ae||kr.current||Ri?(typeof Oe=="function"&&(Od(o,c,Oe,y),Ae=o.memoizedState),(pe=Ri||$v(o,c,pe,y,we,Ae,ee)||!1)?(qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Ae,ee),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Ae,ee)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ae),R.props=y,R.state=Ae,R.context=ee,y=pe):(typeof R.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),y=!1)}return Bd(r,o,c,y,k,v)}function Bd(r,o,c,y,v,k){tx(r,o);var R=(o.flags&128)!==0;if(!y&&!R)return v&&sv(o,c,!1),di(r,o,k);y=o.stateNode,dT.current=o;var G=R&&typeof c.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&R?(o.child=sa(o,r.child,null,k),o.child=sa(o,null,G,k)):br(r,o,G,k),o.memoizedState=y.state,v&&sv(o,c,!0),o.child}function nx(r){var o=r.stateNode;o.pendingContext?ov(r,o.pendingContext,o.pendingContext!==o.context):o.context&&ov(r,o.context,!1),Sd(r,o.containerInfo)}function ix(r,o,c,y,v){return aa(),yd(v),o.flags|=256,br(r,o,c,y),o.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function $d(r){return{baseLanes:r,cachePool:null,transitions:null}}function ox(r,o,c){var y=o.pendingProps,v=kt.current,k=!1,R=(o.flags&128)!==0,G;if((G=R)||(G=r!==null&&r.memoizedState===null?!1:(v&2)!==0),G?(k=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),pt(kt,v&1),r===null)return hd(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(R=y.children,r=y.fallback,k?(y=o.mode,k=o.child,R={mode:"hidden",children:R},(y&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=R):k=il(R,y,0,null),r=ko(r,y,c,null),k.return=o,r.return=o,k.sibling=r,o.child=k,o.child.memoizedState=$d(c),o.memoizedState=zd,r):Hd(o,R));if(v=r.memoizedState,v!==null&&(G=v.dehydrated,G!==null))return pT(r,o,R,y,G,v,c);if(k){k=y.fallback,R=o.mode,v=r.child,G=v.sibling;var ee={mode:"hidden",children:y.children};return(R&1)===0&&o.child!==v?(y=o.child,y.childLanes=0,y.pendingProps=ee,o.deletions=null):(y=Bi(v,ee),y.subtreeFlags=v.subtreeFlags&14680064),G!==null?k=Bi(G,k):(k=ko(k,R,c,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,R=r.child.memoizedState,R=R===null?$d(c):{baseLanes:R.baseLanes|c,cachePool:null,transitions:R.transitions},k.memoizedState=R,k.childLanes=r.childLanes&~c,o.memoizedState=zd,y}return k=r.child,r=k.sibling,y=Bi(k,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=c),y.return=o,y.sibling=null,r!==null&&(c=o.deletions,c===null?(o.deletions=[r],o.flags|=16):c.push(r)),o.child=y,o.memoizedState=null,y}function Hd(r,o){return o=il({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Wu(r,o,c,y){return y!==null&&yd(y),sa(o,r.child,null,c),r=Hd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function pT(r,o,c,y,v,k,R){if(c)return o.flags&256?(o.flags&=-257,y=Ad(Error(n(422))),Wu(r,o,R,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(k=y.fallback,v=o.mode,y=il({mode:"visible",children:y.children},v,0,null),k=ko(k,v,R,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,(o.mode&1)!==0&&sa(o,r.child,null,R),o.child.memoizedState=$d(R),o.memoizedState=zd,k);if((o.mode&1)===0)return Wu(r,o,R,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var G=y.dgst;return y=G,k=Error(n(419)),y=Ad(k,y,void 0),Wu(r,o,R,y)}if(G=(R&r.childLanes)!==0,Er||G){if(y=Qt,y!==null){switch(R&-R){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|R))!==0?0:v,v!==0&&v!==k.retryLane&&(k.retryLane=v,li(r,v),qn(y,r,v,-1))}return ap(),y=Ad(Error(n(421))),Wu(r,o,R,y)}return v.data==="$?"?(o.flags|=128,o.child=r.child,o=CT.bind(null,r),v._reactRetry=o,null):(r=k.treeContext,Br=Ti(v.nextSibling),Dr=o,wt=!0,vn=null,r!==null&&(Jr[en++]=si,Jr[en++]=ui,Jr[en++]=yo,si=r.id,ui=r.overflow,yo=o),o=Hd(o,y.children),o.flags|=4096,o)}function ax(r,o,c){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),wd(r.return,o,c)}function Wd(r,o,c,y,v){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:c,tailMode:v}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=c,k.tailMode=v)}function sx(r,o,c){var y=o.pendingProps,v=y.revealOrder,k=y.tail;if(br(r,o,y.children,c),y=kt.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ax(r,c,o);else if(r.tag===19)ax(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(pt(kt,y),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)r=c.alternate,r!==null&&Au(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Wd(o,!1,v,c,k);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Au(r)===null){o.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Wd(o,!0,c,null,k);break;case"together":Wd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Uu(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function di(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),bo|=o.lanes,(c&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Bi(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Bi(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function fT(r,o,c){switch(o.tag){case 3:nx(o),aa();break;case 5:wv(o);break;case 1:Mr(o.type)&&Eu(o);break;case 4:Sd(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,v=o.memoizedProps.value;pt(Ru,y._currentValue),y._currentValue=v;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(pt(kt,kt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?ox(r,o,c):(pt(kt,kt.current&1),r=di(r,o,c),r!==null?r.sibling:null);pt(kt,kt.current&1);break;case 19:if(y=(c&o.childLanes)!==0,(r.flags&128)!==0){if(y)return sx(r,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pt(kt,kt.current),y)break;return null;case 22:case 23:return o.lanes=0,ex(r,o,c)}return di(r,o,c)}var ux,Ud,lx,cx;ux=function(r,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ud=function(){},lx=function(r,o,c,y){var v=r.memoizedProps;if(v!==y){r=o.stateNode,xo(Dn.current);var k=null;switch(c){case"input":v=je(r,v),y=je(r,y),k=[];break;case"select":v=ie({},v,{value:void 0}),y=ie({},y,{value:void 0}),k=[];break;case"textarea":v=dt(r,v),y=dt(r,y),k=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Cu)}Nt(c,y);var R;c=null;for(pe in v)if(!y.hasOwnProperty(pe)&&v.hasOwnProperty(pe)&&v[pe]!=null)if(pe==="style"){var G=v[pe];for(R in G)G.hasOwnProperty(R)&&(c||(c={}),c[R]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(a.hasOwnProperty(pe)?k||(k=[]):(k=k||[]).push(pe,null));for(pe in y){var ee=y[pe];if(G=v!=null?v[pe]:void 0,y.hasOwnProperty(pe)&&ee!==G&&(ee!=null||G!=null))if(pe==="style")if(G){for(R in G)!G.hasOwnProperty(R)||ee&&ee.hasOwnProperty(R)||(c||(c={}),c[R]="");for(R in ee)ee.hasOwnProperty(R)&&G[R]!==ee[R]&&(c||(c={}),c[R]=ee[R])}else c||(k||(k=[]),k.push(pe,c)),c=ee;else pe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,G=G?G.__html:void 0,ee!=null&&G!==ee&&(k=k||[]).push(pe,ee)):pe==="children"?typeof ee!="string"&&typeof ee!="number"||(k=k||[]).push(pe,""+ee):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(a.hasOwnProperty(pe)?(ee!=null&&pe==="onScroll"&&yt("scroll",r),k||G===ee||(k=[])):(k=k||[]).push(pe,ee))}c&&(k=k||[]).push("style",c);var pe=k;(o.updateQueue=pe)&&(o.flags|=4)}},cx=function(r,o,c,y){c!==y&&(o.flags|=4)};function ps(r,o){if(!wt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var y=null;c!==null;)c.alternate!==null&&(y=c),c=c.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function cr(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,y=0;if(o)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=y,r.childLanes=c,o}function _T(r,o,c){var y=o.pendingProps;switch(_d(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(o),null;case 1:return Mr(o.type)&&Mu(),cr(o),null;case 3:return y=o.stateNode,ca(),gt(kr),gt(ur),Md(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(ju(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vn!==null&&(np(vn),vn=null))),Ud(r,o),cr(o),null;case 5:Cd(o);var v=xo(ss.current);if(c=o.type,r!==null&&o.stateNode!=null)lx(r,o,c,y,v),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(n(166));return cr(o),null}if(r=xo(Dn.current),ju(o)){y=o.stateNode,c=o.type;var k=o.memoizedProps;switch(y[Ln]=o,y[rs]=k,r=(o.mode&1)!==0,c){case"dialog":yt("cancel",y),yt("close",y);break;case"iframe":case"object":case"embed":yt("load",y);break;case"video":case"audio":for(v=0;v<Ja.length;v++)yt(Ja[v],y);break;case"source":yt("error",y);break;case"img":case"image":case"link":yt("error",y),yt("load",y);break;case"details":yt("toggle",y);break;case"input":Ve(y,k),yt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!k.multiple},yt("invalid",y);break;case"textarea":at(y,k),yt("invalid",y)}Nt(c,k),v=null;for(var R in k)if(k.hasOwnProperty(R)){var G=k[R];R==="children"?typeof G=="string"?y.textContent!==G&&(k.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",G]):typeof G=="number"&&y.textContent!==""+G&&(k.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",""+G]):a.hasOwnProperty(R)&&G!=null&&R==="onScroll"&&yt("scroll",y)}switch(c){case"input":Ne(y),ot(y,k,!0);break;case"textarea":Ne(y),Jt(y);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(y.onclick=Cu)}y=v,o.updateQueue=y,y!==null&&(o.flags|=4)}else{R=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$t(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=R.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=R.createElement(c,{is:y.is}):(r=R.createElement(c),c==="select"&&(R=r,y.multiple?R.multiple=!0:y.size&&(R.size=y.size))):r=R.createElementNS(r,c),r[Ln]=o,r[rs]=y,ux(r,o,!1,!1),o.stateNode=r;e:{switch(R=ln(c,y),c){case"dialog":yt("cancel",r),yt("close",r),v=y;break;case"iframe":case"object":case"embed":yt("load",r),v=y;break;case"video":case"audio":for(v=0;v<Ja.length;v++)yt(Ja[v],r);v=y;break;case"source":yt("error",r),v=y;break;case"img":case"image":case"link":yt("error",r),yt("load",r),v=y;break;case"details":yt("toggle",r),v=y;break;case"input":Ve(r,y),v=je(r,y),yt("invalid",r);break;case"option":v=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},v=ie({},y,{value:void 0}),yt("invalid",r);break;case"textarea":at(r,y),v=dt(r,y),yt("invalid",r);break;default:v=y}Nt(c,v),G=v;for(k in G)if(G.hasOwnProperty(k)){var ee=G[k];k==="style"?Qe(r,ee):k==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Rr(r,ee)):k==="children"?typeof ee=="string"?(c!=="textarea"||ee!=="")&&Tt(r,ee):typeof ee=="number"&&Tt(r,""+ee):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?ee!=null&&k==="onScroll"&&yt("scroll",r):ee!=null&&S(r,k,ee,R))}switch(c){case"input":Ne(r),ot(r,y,!1);break;case"textarea":Ne(r),Jt(r);break;case"option":y.value!=null&&r.setAttribute("value",""+ae(y.value));break;case"select":r.multiple=!!y.multiple,k=y.value,k!=null?ct(r,!!y.multiple,k,!1):y.defaultValue!=null&&ct(r,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Cu)}switch(c){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return cr(o),null;case 6:if(r&&o.stateNode!=null)cx(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(c=xo(ss.current),xo(Dn.current),ju(o)){if(y=o.stateNode,c=o.memoizedProps,y[Ln]=o,(k=y.nodeValue!==c)&&(r=Dr,r!==null))switch(r.tag){case 3:Su(y.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(y.nodeValue,c,(r.mode&1)!==0)}k&&(o.flags|=4)}else y=(c.nodeType===9?c:c.ownerDocument).createTextNode(y),y[Ln]=o,o.stateNode=y}return cr(o),null;case 13:if(gt(kt),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&Br!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fv(),aa(),o.flags|=98560,k=!1;else if(k=ju(o),y!==null&&y.dehydrated!==null){if(r===null){if(!k)throw Error(n(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[Ln]=o}else aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;cr(o),k=!1}else vn!==null&&(np(vn),vn=null),k=!0;if(!k)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(kt.current&1)!==0?zt===0&&(zt=3):ap())),o.updateQueue!==null&&(o.flags|=4),cr(o),null);case 4:return ca(),Ud(r,o),r===null&&es(o.stateNode.containerInfo),cr(o),null;case 10:return xd(o.type._context),cr(o),null;case 17:return Mr(o.type)&&Mu(),cr(o),null;case 19:if(gt(kt),k=o.memoizedState,k===null)return cr(o),null;if(y=(o.flags&128)!==0,R=k.rendering,R===null)if(y)ps(k,!1);else{if(zt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(R=Au(r),R!==null){for(o.flags|=128,ps(k,!1),y=R.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=c,c=o.child;c!==null;)k=c,r=y,k.flags&=14680066,R=k.alternate,R===null?(k.childLanes=0,k.lanes=r,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=R.childLanes,k.lanes=R.lanes,k.child=R.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=R.memoizedProps,k.memoizedState=R.memoizedState,k.updateQueue=R.updateQueue,k.type=R.type,r=R.dependencies,k.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return pt(kt,kt.current&1|2),o.child}r=r.sibling}k.tail!==null&&mt()>_a&&(o.flags|=128,y=!0,ps(k,!1),o.lanes=4194304)}else{if(!y)if(r=Au(R),r!==null){if(o.flags|=128,y=!0,c=r.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),ps(k,!0),k.tail===null&&k.tailMode==="hidden"&&!R.alternate&&!wt)return cr(o),null}else 2*mt()-k.renderingStartTime>_a&&c!==1073741824&&(o.flags|=128,y=!0,ps(k,!1),o.lanes=4194304);k.isBackwards?(R.sibling=o.child,o.child=R):(c=k.last,c!==null?c.sibling=R:o.child=R,k.last=R)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=mt(),o.sibling=null,c=kt.current,pt(kt,y?c&1|2:c&1),o):(cr(o),null);case 22:case 23:return op(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(zr&1073741824)!==0&&(cr(o),o.subtreeFlags&6&&(o.flags|=8192)):cr(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function mT(r,o){switch(_d(o),o.tag){case 1:return Mr(o.type)&&Mu(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ca(),gt(kr),gt(ur),Md(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Cd(o),null;case 13:if(gt(kt),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));aa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return gt(kt),null;case 4:return ca(),null;case 10:return xd(o.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var Gu=!1,dr=!1,hT=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function pa(r,o){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(y){It(r,o,y)}else c.current=null}function Gd(r,o,c){try{c()}catch(y){It(r,o,y)}}var dx=!1;function yT(r,o){if(od=Ko,r=$g(),Xc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var y=c.getSelection&&c.getSelection();if(y&&y.rangeCount!==0){c=y.anchorNode;var v=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var R=0,G=-1,ee=-1,pe=0,qe=0,Ce=r,we=null;t:for(;;){for(var Oe;Ce!==c||v!==0&&Ce.nodeType!==3||(G=R+v),Ce!==k||y!==0&&Ce.nodeType!==3||(ee=R+y),Ce.nodeType===3&&(R+=Ce.nodeValue.length),(Oe=Ce.firstChild)!==null;)we=Ce,Ce=Oe;for(;;){if(Ce===r)break t;if(we===c&&++pe===v&&(G=R),we===k&&++qe===y&&(ee=R),(Oe=Ce.nextSibling)!==null)break;Ce=we,we=Ce.parentNode}Ce=Oe}c=G===-1||ee===-1?null:{start:G,end:ee}}else c=null}c=c||{start:0,end:0}}else c=null;for(ad={focusedElem:r,selectionRange:c},Ko=!1,Fe=o;Fe!==null;)if(o=Fe,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Fe=r;else for(;Fe!==null;){o=Fe;try{var Ae=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Le=Ae.memoizedProps,Pt=Ae.memoizedState,ue=o.stateNode,ne=ue.getSnapshotBeforeUpdate(o.elementType===o.type?Le:xn(o.type,Le),Pt);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var le=o.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){It(o,o.return,Ee)}if(r=o.sibling,r!==null){r.return=o.return,Fe=r;break}Fe=o.return}return Ae=dx,dx=!1,Ae}function fs(r,o,c){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&r)===r){var k=v.destroy;v.destroy=void 0,k!==void 0&&Gd(o,c,k)}v=v.next}while(v!==y)}}function Ku(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&r)===r){var y=c.create;c.destroy=y()}c=c.next}while(c!==o)}}function Kd(r){var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof o=="function"?o(r):o.current=r}}function px(r){var o=r.alternate;o!==null&&(r.alternate=null,px(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Ln],delete o[rs],delete o[cd],delete o[JI],delete o[eT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function fx(r){return r.tag===5||r.tag===3||r.tag===4}function _x(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||fx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(r,o):c.insertBefore(r,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(r,c)):(o=c,o.appendChild(r)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Cu));else if(y!==4&&(r=r.child,r!==null))for(Yd(r,o,c),r=r.sibling;r!==null;)Yd(r,o,c),r=r.sibling}function Qd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(Qd(r,o,c),r=r.sibling;r!==null;)Qd(r,o,c),r=r.sibling}var or=null,wn=!1;function Oi(r,o,c){for(c=c.child;c!==null;)mx(r,o,c),c=c.sibling}function mx(r,o,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(On,c)}catch{}switch(c.tag){case 5:dr||pa(c,o);case 6:var y=or,v=wn;or=null,Oi(r,o,c),or=y,wn=v,or!==null&&(wn?(r=or,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):or.removeChild(c.stateNode));break;case 18:or!==null&&(wn?(r=or,c=c.stateNode,r.nodeType===8?ld(r.parentNode,c):r.nodeType===1&&ld(r,c),lo(r)):ld(or,c.stateNode));break;case 4:y=or,v=wn,or=c.stateNode.containerInfo,wn=!0,Oi(r,o,c),or=y,wn=v;break;case 0:case 11:case 14:case 15:if(!dr&&(y=c.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var k=v,R=k.destroy;k=k.tag,R!==void 0&&((k&2)!==0||(k&4)!==0)&&Gd(c,o,R),v=v.next}while(v!==y)}Oi(r,o,c);break;case 1:if(!dr&&(pa(c,o),y=c.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=c.memoizedProps,y.state=c.memoizedState,y.componentWillUnmount()}catch(G){It(c,o,G)}Oi(r,o,c);break;case 21:Oi(r,o,c);break;case 22:c.mode&1?(dr=(y=dr)||c.memoizedState!==null,Oi(r,o,c),dr=y):Oi(r,o,c);break;default:Oi(r,o,c)}}function hx(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new hT),o.forEach(function(y){var v=kT.bind(null,r,y);c.has(y)||(c.add(y),y.then(v,v))})}}function bn(r,o){var c=o.deletions;if(c!==null)for(var y=0;y<c.length;y++){var v=c[y];try{var k=r,R=o,G=R;e:for(;G!==null;){switch(G.tag){case 5:or=G.stateNode,wn=!1;break e;case 3:or=G.stateNode.containerInfo,wn=!0;break e;case 4:or=G.stateNode.containerInfo,wn=!0;break e}G=G.return}if(or===null)throw Error(n(160));mx(k,R,v),or=null,wn=!1;var ee=v.alternate;ee!==null&&(ee.return=null),v.return=null}catch(pe){It(v,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)yx(o,r),o=o.sibling}function yx(r,o){var c=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bn(o,r),zn(r),y&4){try{fs(3,r,r.return),Ku(3,r)}catch(Le){It(r,r.return,Le)}try{fs(5,r,r.return)}catch(Le){It(r,r.return,Le)}}break;case 1:bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return);break;case 5:if(bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return),r.flags&32){var v=r.stateNode;try{Tt(v,"")}catch(Le){It(r,r.return,Le)}}if(y&4&&(v=r.stateNode,v!=null)){var k=r.memoizedProps,R=c!==null?c.memoizedProps:k,G=r.type,ee=r.updateQueue;if(r.updateQueue=null,ee!==null)try{G==="input"&&k.type==="radio"&&k.name!=null&&He(v,k),ln(G,R);var pe=ln(G,k);for(R=0;R<ee.length;R+=2){var qe=ee[R],Ce=ee[R+1];qe==="style"?Qe(v,Ce):qe==="dangerouslySetInnerHTML"?Rr(v,Ce):qe==="children"?Tt(v,Ce):S(v,qe,Ce,pe)}switch(G){case"input":De(v,k);break;case"textarea":Zt(v,k);break;case"select":var we=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!k.multiple;var Oe=k.value;Oe!=null?ct(v,!!k.multiple,Oe,!1):we!==!!k.multiple&&(k.defaultValue!=null?ct(v,!!k.multiple,k.defaultValue,!0):ct(v,!!k.multiple,k.multiple?[]:"",!1))}v[rs]=k}catch(Le){It(r,r.return,Le)}}break;case 6:if(bn(o,r),zn(r),y&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,k=r.memoizedProps;try{v.nodeValue=k}catch(Le){It(r,r.return,Le)}}break;case 3:if(bn(o,r),zn(r),y&4&&c!==null&&c.memoizedState.isDehydrated)try{lo(o.containerInfo)}catch(Le){It(r,r.return,Le)}break;case 4:bn(o,r),zn(r);break;case 13:bn(o,r),zn(r),v=r.child,v.flags&8192&&(k=v.memoizedState!==null,v.stateNode.isHidden=k,!k||v.alternate!==null&&v.alternate.memoizedState!==null||(Jd=mt())),y&4&&hx(r);break;case 22:if(qe=c!==null&&c.memoizedState!==null,r.mode&1?(dr=(pe=dr)||qe,bn(o,r),dr=pe):bn(o,r),zn(r),y&8192){if(pe=r.memoizedState!==null,(r.stateNode.isHidden=pe)&&!qe&&(r.mode&1)!==0)for(Fe=r,qe=r.child;qe!==null;){for(Ce=Fe=qe;Fe!==null;){switch(we=Fe,Oe=we.child,we.tag){case 0:case 11:case 14:case 15:fs(4,we,we.return);break;case 1:pa(we,we.return);var Ae=we.stateNode;if(typeof Ae.componentWillUnmount=="function"){y=we,c=we.return;try{o=y,Ae.props=o.memoizedProps,Ae.state=o.memoizedState,Ae.componentWillUnmount()}catch(Le){It(y,c,Le)}}break;case 5:pa(we,we.return);break;case 22:if(we.memoizedState!==null){xx(Ce);continue}}Oe!==null?(Oe.return=we,Fe=Oe):xx(Ce)}qe=qe.sibling}e:for(qe=null,Ce=r;;){if(Ce.tag===5){if(qe===null){qe=Ce;try{v=Ce.stateNode,pe?(k=v.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(G=Ce.stateNode,ee=Ce.memoizedProps.style,R=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,G.style.display=Ht("display",R))}catch(Le){It(r,r.return,Le)}}}else if(Ce.tag===6){if(qe===null)try{Ce.stateNode.nodeValue=pe?"":Ce.memoizedProps}catch(Le){It(r,r.return,Le)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===r)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===r)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===r)break e;qe===Ce&&(qe=null),Ce=Ce.return}qe===Ce&&(qe=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:bn(o,r),zn(r),y&4&&hx(r);break;case 21:break;default:bn(o,r),zn(r)}}function zn(r){var o=r.flags;if(o&2){try{e:{for(var c=r.return;c!==null;){if(fx(c)){var y=c;break e}c=c.return}throw Error(n(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&(Tt(v,""),y.flags&=-33);var k=_x(r);Qd(r,k,v);break;case 3:case 4:var R=y.stateNode.containerInfo,G=_x(r);Yd(r,G,R);break;default:throw Error(n(161))}}catch(ee){It(r,r.return,ee)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function gT(r,o,c){Fe=r,gx(r)}function gx(r,o,c){for(var y=(r.mode&1)!==0;Fe!==null;){var v=Fe,k=v.child;if(v.tag===22&&y){var R=v.memoizedState!==null||Gu;if(!R){var G=v.alternate,ee=G!==null&&G.memoizedState!==null||dr;G=Gu;var pe=dr;if(Gu=R,(dr=ee)&&!pe)for(Fe=v;Fe!==null;)R=Fe,ee=R.child,R.tag===22&&R.memoizedState!==null?wx(v):ee!==null?(ee.return=R,Fe=ee):wx(v);for(;k!==null;)Fe=k,gx(k),k=k.sibling;Fe=v,Gu=G,dr=pe}vx(r)}else(v.subtreeFlags&8772)!==0&&k!==null?(k.return=v,Fe=k):vx(r)}}function vx(r){for(;Fe!==null;){var o=Fe;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:dr||Ku(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!dr)if(c===null)y.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:xn(o.type,c.memoizedProps);y.componentDidUpdate(v,c.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var k=o.updateQueue;k!==null&&xv(o,k,y);break;case 3:var R=o.updateQueue;if(R!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}xv(o,R,c)}break;case 5:var G=o.stateNode;if(c===null&&o.flags&4){c=G;var ee=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&c.focus();break;case"img":ee.src&&(c.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var qe=pe.memoizedState;if(qe!==null){var Ce=qe.dehydrated;Ce!==null&&lo(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}dr||o.flags&512&&Kd(o)}catch(we){It(o,o.return,we)}}if(o===r){Fe=null;break}if(c=o.sibling,c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function xx(r){for(;Fe!==null;){var o=Fe;if(o===r){Fe=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function wx(r){for(;Fe!==null;){var o=Fe;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Ku(4,o)}catch(ee){It(o,c,ee)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var v=o.return;try{y.componentDidMount()}catch(ee){It(o,v,ee)}}var k=o.return;try{Kd(o)}catch(ee){It(o,k,ee)}break;case 5:var R=o.return;try{Kd(o)}catch(ee){It(o,R,ee)}}}catch(ee){It(o,o.return,ee)}if(o===r){Fe=null;break}var G=o.sibling;if(G!==null){G.return=o.return,Fe=G;break}Fe=o.return}}var vT=Math.ceil,Yu=E.ReactCurrentDispatcher,Xd=E.ReactCurrentOwner,nn=E.ReactCurrentBatchConfig,tt=0,Qt=null,Vt=null,ar=0,zr=0,fa=Ni(0),zt=0,_s=null,bo=0,Qu=0,Zd=0,ms=null,Ir=null,Jd=0,_a=1/0,pi=null,Xu=!1,ep=null,Fi=null,Zu=!1,Ai=null,Ju=0,hs=0,tp=null,el=-1,tl=0;function qr(){return(tt&6)!==0?mt():el!==-1?el:el=mt()}function Li(r){return(r.mode&1)===0?1:(tt&2)!==0&&ar!==0?ar&-ar:rT.transition!==null?(tl===0&&(tl=Ci()),tl):(r=lt,r!==0||(r=window.event,r=r===void 0?16:pu(r.type)),r)}function qn(r,o,c,y){if(50<hs)throw hs=0,tp=null,Error(n(185));Xr(r,c,y),((tt&2)===0||r!==Qt)&&(r===Qt&&((tt&2)===0&&(Qu|=c),zt===4&&Di(r,ar)),Tr(r,y),c===1&&tt===0&&(o.mode&1)===0&&(_a=mt()+500,Iu&&Pi()))}function Tr(r,o){var c=r.callbackNode;Ba(r,o);var y=_n(r,r===Qt?ar:0);if(y===0)c!==null&&qi(c),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(c!=null&&qi(c),o===1)r.tag===0?tT(qx.bind(null,r)):uv(qx.bind(null,r)),XI(function(){(tt&6)===0&&Pi()}),c=null;else{switch(io(y)){case 1:c=dn;break;case 4:c=ei;break;case 16:c=pn;break;case 536870912:c=Qr;break;default:c=pn}c=Nx(c,bx.bind(null,r))}r.callbackPriority=o,r.callbackNode=c}}function bx(r,o){if(el=-1,tl=0,(tt&6)!==0)throw Error(n(327));var c=r.callbackNode;if(ma()&&r.callbackNode!==c)return null;var y=_n(r,r===Qt?ar:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=rl(r,y);else{o=y;var v=tt;tt|=2;var k=Cx();(Qt!==r||ar!==o)&&(pi=null,_a=mt()+500,So(r,o));do try{bT();break}catch(G){Sx(r,G)}while(!0);vd(),Yu.current=k,tt=v,Vt!==null?o=0:(Qt=null,ar=0,o=zt)}if(o!==0){if(o===2&&(v=ir(r),v!==0&&(y=v,o=rp(r,v))),o===1)throw c=_s,So(r,0),Di(r,y),Tr(r,mt()),c;if(o===6)Di(r,y);else{if(v=r.current.alternate,(y&30)===0&&!xT(v)&&(o=rl(r,y),o===2&&(k=ir(r),k!==0&&(y=k,o=rp(r,k))),o===1))throw c=_s,So(r,0),Di(r,y),Tr(r,mt()),c;switch(r.finishedWork=v,r.finishedLanes=y,o){case 0:case 1:throw Error(n(345));case 2:Co(r,Ir,pi);break;case 3:if(Di(r,y),(y&130023424)===y&&(o=Jd+500-mt(),10<o)){if(_n(r,0)!==0)break;if(v=r.suspendedLanes,(v&y)!==y){qr(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=ud(Co.bind(null,r,Ir,pi),o);break}Co(r,Ir,pi);break;case 4:if(Di(r,y),(y&4194240)===y)break;for(o=r.eventTimes,v=-1;0<y;){var R=31-vr(y);k=1<<R,R=o[R],R>v&&(v=R),y&=~k}if(y=v,y=mt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*vT(y/1960))-y,10<y){r.timeoutHandle=ud(Co.bind(null,r,Ir,pi),y);break}Co(r,Ir,pi);break;case 5:Co(r,Ir,pi);break;default:throw Error(n(329))}}}return Tr(r,mt()),r.callbackNode===c?bx.bind(null,r):null}function rp(r,o){var c=ms;return r.current.memoizedState.isDehydrated&&(So(r,o).flags|=256),r=rl(r,o),r!==2&&(o=Ir,Ir=c,o!==null&&np(o)),r}function np(r){Ir===null?Ir=r:Ir.push.apply(Ir,r)}function xT(r){for(var o=r;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var y=0;y<c.length;y++){var v=c[y],k=v.getSnapshot;v=v.value;try{if(!gn(k(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Di(r,o){for(o&=~Zd,o&=~Qu,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var c=31-vr(o),y=1<<c;r[c]=-1,o&=~y}}function qx(r){if((tt&6)!==0)throw Error(n(327));ma();var o=_n(r,0);if((o&1)===0)return Tr(r,mt()),null;var c=rl(r,o);if(r.tag!==0&&c===2){var y=ir(r);y!==0&&(o=y,c=rp(r,y))}if(c===1)throw c=_s,So(r,0),Di(r,o),Tr(r,mt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Co(r,Ir,pi),Tr(r,mt()),null}function ip(r,o){var c=tt;tt|=1;try{return r(o)}finally{tt=c,tt===0&&(_a=mt()+500,Iu&&Pi())}}function qo(r){Ai!==null&&Ai.tag===0&&(tt&6)===0&&ma();var o=tt;tt|=1;var c=nn.transition,y=lt;try{if(nn.transition=null,lt=1,r)return r()}finally{lt=y,nn.transition=c,tt=o,(tt&6)===0&&Pi()}}function op(){zr=fa.current,gt(fa)}function So(r,o){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,QI(c)),Vt!==null)for(c=Vt.return;c!==null;){var y=c;switch(_d(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Mu();break;case 3:ca(),gt(kr),gt(ur),Md();break;case 5:Cd(y);break;case 4:ca();break;case 13:gt(kt);break;case 19:gt(kt);break;case 10:xd(y.type._context);break;case 22:case 23:op()}c=c.return}if(Qt=r,Vt=r=Bi(r.current,null),ar=zr=o,zt=0,_s=null,Zd=Qu=bo=0,Ir=ms=null,vo!==null){for(o=0;o<vo.length;o++)if(c=vo[o],y=c.interleaved,y!==null){c.interleaved=null;var v=y.next,k=c.pending;if(k!==null){var R=k.next;k.next=v,y.next=R}c.pending=y}vo=null}return r}function Sx(r,o){do{var c=Vt;try{if(vd(),Lu.current=$u,Du){for(var y=Mt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}Du=!1}if(wo=0,Yt=Bt=Mt=null,us=!1,ls=0,Xd.current=null,c===null||c.return===null){zt=1,_s=o,Vt=null;break}e:{var k=r,R=c.return,G=c,ee=o;if(o=ar,G.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var pe=ee,qe=G,Ce=qe.tag;if((qe.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var we=qe.alternate;we?(qe.updateQueue=we.updateQueue,qe.memoizedState=we.memoizedState,qe.lanes=we.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Oe=Yv(R);if(Oe!==null){Oe.flags&=-257,Qv(Oe,R,G,k,o),Oe.mode&1&&Kv(k,pe,o),o=Oe,ee=pe;var Ae=o.updateQueue;if(Ae===null){var Le=new Set;Le.add(ee),o.updateQueue=Le}else Ae.add(ee);break e}else{if((o&1)===0){Kv(k,pe,o),ap();break e}ee=Error(n(426))}}else if(wt&&G.mode&1){var Pt=Yv(R);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Qv(Pt,R,G,k,o),yd(da(ee,G));break e}}k=ee=da(ee,G),zt!==4&&(zt=2),ms===null?ms=[k]:ms.push(k),k=R;do{switch(k.tag){case 3:k.flags|=65536,o&=-o,k.lanes|=o;var ue=Uv(k,ee,o);vv(k,ue);break e;case 1:G=ee;var ne=k.type,le=k.stateNode;if((k.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Fi===null||!Fi.has(le)))){k.flags|=65536,o&=-o,k.lanes|=o;var Ee=Gv(k,G,o);vv(k,Ee);break e}}k=k.return}while(k!==null)}Mx(c)}catch(Be){o=Be,Vt===c&&c!==null&&(Vt=c=c.return);continue}break}while(!0)}function Cx(){var r=Yu.current;return Yu.current=$u,r===null?$u:r}function ap(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||(bo&268435455)===0&&(Qu&268435455)===0||Di(Qt,ar)}function rl(r,o){var c=tt;tt|=2;var y=Cx();(Qt!==r||ar!==o)&&(pi=null,So(r,o));do try{wT();break}catch(v){Sx(r,v)}while(!0);if(vd(),tt=c,Yu.current=y,Vt!==null)throw Error(n(261));return Qt=null,ar=0,zt}function wT(){for(;Vt!==null;)kx(Vt)}function bT(){for(;Vt!==null&&!to();)kx(Vt)}function kx(r){var o=Tx(r.alternate,r,zr);r.memoizedProps=r.pendingProps,o===null?Mx(r):Vt=o,Xd.current=null}function Mx(r){var o=r;do{var c=o.alternate;if(r=o.return,(o.flags&32768)===0){if(c=_T(c,o,zr),c!==null){Vt=c;return}}else{if(c=mT(c,o),c!==null){c.flags&=32767,Vt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{zt=6,Vt=null;return}}if(o=o.sibling,o!==null){Vt=o;return}Vt=o=r}while(o!==null);zt===0&&(zt=5)}function Co(r,o,c){var y=lt,v=nn.transition;try{nn.transition=null,lt=1,qT(r,o,c,y)}finally{nn.transition=v,lt=y}return null}function qT(r,o,c,y){do ma();while(Ai!==null);if((tt&6)!==0)throw Error(n(327));c=r.finishedWork;var v=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var k=c.lanes|c.childLanes;if(no(r,k),r===Qt&&(Vt=Qt=null,ar=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Zu||(Zu=!0,Nx(pn,function(){return ma(),null})),k=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||k){k=nn.transition,nn.transition=null;var R=lt;lt=1;var G=tt;tt|=4,Xd.current=null,yT(r,c),yx(c,r),$I(ad),Ko=!!od,ad=od=null,r.current=c,gT(c),Zn(),tt=G,lt=R,nn.transition=k}else r.current=c;if(Zu&&(Zu=!1,Ai=r,Ju=v),k=r.pendingLanes,k===0&&(Fi=null),Bo(c.stateNode),Tr(r,mt()),o!==null)for(y=r.onRecoverableError,c=0;c<o.length;c++)v=o[c],y(v.value,{componentStack:v.stack,digest:v.digest});if(Xu)throw Xu=!1,r=ep,ep=null,r;return(Ju&1)!==0&&r.tag!==0&&ma(),k=r.pendingLanes,(k&1)!==0?r===tp?hs++:(hs=0,tp=r):hs=0,Pi(),null}function ma(){if(Ai!==null){var r=io(Ju),o=nn.transition,c=lt;try{if(nn.transition=null,lt=16>r?16:r,Ai===null)var y=!1;else{if(r=Ai,Ai=null,Ju=0,(tt&6)!==0)throw Error(n(331));var v=tt;for(tt|=4,Fe=r.current;Fe!==null;){var k=Fe,R=k.child;if((Fe.flags&16)!==0){var G=k.deletions;if(G!==null){for(var ee=0;ee<G.length;ee++){var pe=G[ee];for(Fe=pe;Fe!==null;){var qe=Fe;switch(qe.tag){case 0:case 11:case 15:fs(8,qe,k)}var Ce=qe.child;if(Ce!==null)Ce.return=qe,Fe=Ce;else for(;Fe!==null;){qe=Fe;var we=qe.sibling,Oe=qe.return;if(px(qe),qe===pe){Fe=null;break}if(we!==null){we.return=Oe,Fe=we;break}Fe=Oe}}}var Ae=k.alternate;if(Ae!==null){var Le=Ae.child;if(Le!==null){Ae.child=null;do{var Pt=Le.sibling;Le.sibling=null,Le=Pt}while(Le!==null)}}Fe=k}}if((k.subtreeFlags&2064)!==0&&R!==null)R.return=k,Fe=R;else e:for(;Fe!==null;){if(k=Fe,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:fs(9,k,k.return)}var ue=k.sibling;if(ue!==null){ue.return=k.return,Fe=ue;break e}Fe=k.return}}var ne=r.current;for(Fe=ne;Fe!==null;){R=Fe;var le=R.child;if((R.subtreeFlags&2064)!==0&&le!==null)le.return=R,Fe=le;else e:for(R=ne;Fe!==null;){if(G=Fe,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Ku(9,G)}}catch(Be){It(G,G.return,Be)}if(G===R){Fe=null;break e}var Ee=G.sibling;if(Ee!==null){Ee.return=G.return,Fe=Ee;break e}Fe=G.return}}if(tt=v,Pi(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(On,r)}catch{}y=!0}return y}finally{lt=c,nn.transition=o}}return!1}function Ex(r,o,c){o=da(c,o),o=Uv(r,o,1),r=Vi(r,o,1),o=qr(),r!==null&&(Xr(r,1,o),Tr(r,o))}function It(r,o,c){if(r.tag===3)Ex(r,r,c);else for(;o!==null;){if(o.tag===3){Ex(o,r,c);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Fi===null||!Fi.has(y))){r=da(c,r),r=Gv(o,r,1),o=Vi(o,r,1),r=qr(),o!==null&&(Xr(o,1,r),Tr(o,r));break}}o=o.return}}function ST(r,o,c){var y=r.pingCache;y!==null&&y.delete(o),o=qr(),r.pingedLanes|=r.suspendedLanes&c,Qt===r&&(ar&c)===c&&(zt===4||zt===3&&(ar&130023424)===ar&&500>mt()-Jd?So(r,0):Zd|=c),Tr(r,o)}function Ix(r,o){o===0&&((r.mode&1)===0?o=1:(o=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var c=qr();r=li(r,o),r!==null&&(Xr(r,o,c),Tr(r,c))}function CT(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),Ix(r,c)}function kT(r,o){var c=0;switch(r.tag){case 13:var y=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(o),Ix(r,c)}var Tx;Tx=function(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps||kr.current)Er=!0;else{if((r.lanes&c)===0&&(o.flags&128)===0)return Er=!1,fT(r,o,c);Er=(r.flags&131072)!==0}else Er=!1,wt&&(o.flags&1048576)!==0&&lv(o,Nu,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;Uu(r,o),r=o.pendingProps;var v=na(o,ur.current);la(o,c),v=Td(null,o,y,r,v,c);var k=Nd();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mr(y)?(k=!0,Eu(o)):k=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,qd(o),v.updater=Hu,o.stateNode=v,v._reactInternals=o,Fd(o,y,r,c),o=Bd(null,o,y,!0,k,c)):(o.tag=0,wt&&k&&fd(o),br(null,o,v,c),o=o.child),o;case 16:y=o.elementType;e:{switch(Uu(r,o),r=o.pendingProps,v=y._init,y=v(y._payload),o.type=y,v=o.tag=ET(y),r=xn(y,r),v){case 0:o=Dd(null,o,y,r,c);break e;case 1:o=rx(null,o,y,r,c);break e;case 11:o=Xv(null,o,y,r,c);break e;case 14:o=Zv(null,o,y,xn(y.type,r),c);break e}throw Error(n(306,y,""))}return o;case 0:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Dd(r,o,y,v,c);case 1:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),rx(r,o,y,v,c);case 3:e:{if(nx(o),r===null)throw Error(n(387));y=o.pendingProps,k=o.memoizedState,v=k.element,gv(r,o),Fu(o,y,null,c);var R=o.memoizedState;if(y=R.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){v=da(Error(n(423)),o),o=ix(r,o,y,c,v);break e}else if(y!==v){v=da(Error(n(424)),o),o=ix(r,o,y,c,v);break e}else for(Br=Ti(o.stateNode.containerInfo.firstChild),Dr=o,wt=!0,vn=null,c=hv(o,null,y,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(aa(),y===v){o=di(r,o,c);break e}br(r,o,y,c)}o=o.child}return o;case 5:return wv(o),r===null&&hd(o),y=o.type,v=o.pendingProps,k=r!==null?r.memoizedProps:null,R=v.children,sd(y,v)?R=null:k!==null&&sd(y,k)&&(o.flags|=32),tx(r,o),br(r,o,R,c),o.child;case 6:return r===null&&hd(o),null;case 13:return ox(r,o,c);case 4:return Sd(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=sa(o,null,y,c):br(r,o,y,c),o.child;case 11:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Xv(r,o,y,v,c);case 7:return br(r,o,o.pendingProps,c),o.child;case 8:return br(r,o,o.pendingProps.children,c),o.child;case 12:return br(r,o,o.pendingProps.children,c),o.child;case 10:e:{if(y=o.type._context,v=o.pendingProps,k=o.memoizedProps,R=v.value,pt(Ru,y._currentValue),y._currentValue=R,k!==null)if(gn(k.value,R)){if(k.children===v.children&&!kr.current){o=di(r,o,c);break e}}else for(k=o.child,k!==null&&(k.return=o);k!==null;){var G=k.dependencies;if(G!==null){R=k.child;for(var ee=G.firstContext;ee!==null;){if(ee.context===y){if(k.tag===1){ee=ci(-1,c&-c),ee.tag=2;var pe=k.updateQueue;if(pe!==null){pe=pe.shared;var qe=pe.pending;qe===null?ee.next=ee:(ee.next=qe.next,qe.next=ee),pe.pending=ee}}k.lanes|=c,ee=k.alternate,ee!==null&&(ee.lanes|=c),wd(k.return,c,o),G.lanes|=c;break}ee=ee.next}}else if(k.tag===10)R=k.type===o.type?null:k.child;else if(k.tag===18){if(R=k.return,R===null)throw Error(n(341));R.lanes|=c,G=R.alternate,G!==null&&(G.lanes|=c),wd(R,c,o),R=k.sibling}else R=k.child;if(R!==null)R.return=k;else for(R=k;R!==null;){if(R===o){R=null;break}if(k=R.sibling,k!==null){k.return=R.return,R=k;break}R=R.return}k=R}br(r,o,v.children,c),o=o.child}return o;case 9:return v=o.type,y=o.pendingProps.children,la(o,c),v=tn(v),y=y(v),o.flags|=1,br(r,o,y,c),o.child;case 14:return y=o.type,v=xn(y,o.pendingProps),v=xn(y.type,v),Zv(r,o,y,v,c);case 15:return Jv(r,o,o.type,o.pendingProps,c);case 17:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Uu(r,o),o.tag=1,Mr(y)?(r=!0,Eu(o)):r=!1,la(o,c),Hv(o,y,v),Fd(o,y,v,c),Bd(null,o,y,!0,r,c);case 19:return sx(r,o,c);case 22:return ex(r,o,c)}throw Error(n(156,o.tag))};function Nx(r,o){return bi(r,o)}function MT(r,o,c,y){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(r,o,c,y){return new MT(r,o,c,y)}function sp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ET(r){if(typeof r=="function")return sp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===X)return 14}return 2}function Bi(r,o){var c=r.alternate;return c===null?(c=on(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function nl(r,o,c,y,v,k){var R=2;if(y=r,typeof r=="function")sp(r)&&(R=1);else if(typeof r=="string")R=5;else e:switch(r){case T:return ko(c.children,v,k,o);case j:R=8,v|=8;break;case P:return r=on(12,c,o,v|2),r.elementType=P,r.lanes=k,r;case Q:return r=on(13,c,o,v),r.elementType=Q,r.lanes=k,r;case V:return r=on(19,c,o,v),r.elementType=V,r.lanes=k,r;case te:return il(c,v,k,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:R=10;break e;case O:R=9;break e;case F:R=11;break e;case X:R=14;break e;case W:R=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=on(R,c,o,v),o.elementType=r,o.type=y,o.lanes=k,o}function ko(r,o,c,y){return r=on(7,r,y,o),r.lanes=c,r}function il(r,o,c,y){return r=on(22,r,y,o),r.elementType=te,r.lanes=c,r.stateNode={isHidden:!1},r}function up(r,o,c){return r=on(6,r,null,o),r.lanes=c,r}function lp(r,o,c){return o=on(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function IT(r,o,c,y,v){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function cp(r,o,c,y,v,k,R,G,ee){return r=new IT(r,o,c,G,ee),o===1?(o=1,k===!0&&(o|=8)):o=0,k=on(3,null,null,o),r.current=k,k.stateNode=r,k.memoizedState={element:y,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(k),r}function TT(r,o,c){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:y==null?null:""+y,children:r,containerInfo:o,implementation:c}}function jx(r){if(!r)return ji;r=r._reactInternals;e:{if(Et(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Mr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Mr(c))return av(r,c,o)}return o}function Px(r,o,c,y,v,k,R,G,ee){return r=cp(c,y,!0,r,v,k,R,G,ee),r.context=jx(null),c=r.current,y=qr(),v=Li(c),k=ci(y,v),k.callback=o??null,Vi(c,k,v),r.current.lanes=v,Xr(r,v,y),Tr(r,y),r}function ol(r,o,c,y){var v=o.current,k=qr(),R=Li(v);return c=jx(c),o.context===null?o.context=c:o.pendingContext=c,o=ci(k,R),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=Vi(v,o,R),r!==null&&(qn(r,v,R,k),Ou(r,v,R)),R}function al(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Rx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function dp(r,o){Rx(r,o),(r=r.alternate)&&Rx(r,o)}function NT(){return null}var Vx=typeof reportError=="function"?reportError:function(r){console.error(r)};function pp(r){this._internalRoot=r}sl.prototype.render=pp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));ol(r,o,null,null)},sl.prototype.unmount=pp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;qo(function(){ol(null,r,null,null)}),o[oi]=null}};function sl(r){this._internalRoot=r}sl.prototype.unstable_scheduleHydration=function(r){if(r){var o=ze();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Lt.length&&o!==0&&o<Lt[c].priority;c++);Lt.splice(c,0,r),c===0&&cu(r)}};function fp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function jT(r,o,c,y,v){if(v){if(typeof y=="function"){var k=y;y=function(){var pe=al(R);k.call(pe)}}var R=Px(o,y,r,0,null,!1,!1,"",Ox);return r._reactRootContainer=R,r[oi]=R.current,es(r.nodeType===8?r.parentNode:r),qo(),R}for(;v=r.lastChild;)r.removeChild(v);if(typeof y=="function"){var G=y;y=function(){var pe=al(ee);G.call(pe)}}var ee=cp(r,0,!1,null,null,!1,!1,"",Ox);return r._reactRootContainer=ee,r[oi]=ee.current,es(r.nodeType===8?r.parentNode:r),qo(function(){ol(o,ee,c,y)}),ee}function ll(r,o,c,y,v){var k=c._reactRootContainer;if(k){var R=k;if(typeof v=="function"){var G=v;v=function(){var ee=al(R);G.call(ee)}}ol(o,R,r,v)}else R=jT(c,o,r,v,y);return al(R)}za=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var c=Cr(o.pendingLanes);c!==0&&(We(o,c|1),Tr(o,mt()),(tt&6)===0&&(_a=mt()+500,Pi()))}break;case 13:qo(function(){var y=li(r,1);if(y!==null){var v=qr();qn(y,r,1,v)}}),dp(r,1)}},oo=function(r){if(r.tag===13){var o=li(r,134217728);if(o!==null){var c=qr();qn(o,r,134217728,c)}dp(r,134217728)}},$o=function(r){if(r.tag===13){var o=Li(r),c=li(r,o);if(c!==null){var y=qr();qn(c,r,o,y)}dp(r,o)}},ze=function(){return lt},$a=function(r,o){var c=lt;try{return lt=r,o()}finally{lt=c}},Vr=function(r,o,c){switch(o){case"input":if(De(r,c),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var y=c[o];if(y!==r&&y.form===r.form){var v=ku(y);if(!v)throw Error(n(90));Ie(y),De(y,v)}}}break;case"textarea":Zt(r,c);break;case"select":o=c.value,o!=null&&ct(r,!!c.multiple,o,!1)}},tr=ip,rr=qo;var PT={usingClientEntryPoint:!1,Events:[ns,ta,ku,Vn,Rt,ip]},ys={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RT={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=eo(r),r===null?null:r.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||NT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{On=cl.inject(RT),Kt=cl}catch{}}return Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PT,Nr.createPortal=function(r,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(o))throw Error(n(200));return TT(r,o,null,c)},Nr.createRoot=function(r,o){if(!fp(r))throw Error(n(299));var c=!1,y="",v=Vx;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=cp(r,1,!1,null,null,c,!1,y,v),r[oi]=o.current,es(r.nodeType===8?r.parentNode:r),new pp(o)},Nr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=eo(o),r=r===null?null:r.stateNode,r},Nr.flushSync=function(r){return qo(r)},Nr.hydrate=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!0,c)},Nr.hydrateRoot=function(r,o,c){if(!fp(r))throw Error(n(405));var y=c!=null&&c.hydratedSources||null,v=!1,k="",R=Vx;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),o=Px(o,null,r,1,c??null,v,!1,k,R),r[oi]=o.current,es(r),y)for(r=0;r<y.length;r++)c=y[r],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new sl(o)},Nr.render=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!1,c)},Nr.unmountComponentAtNode=function(r){if(!ul(r))throw Error(n(40));return r._reactRootContainer?(qo(function(){ll(null,null,r,!1,function(){r._reactRootContainer=null,r[oi]=null})}),!0):!1},Nr.unstable_batchedUpdates=ip,Nr.unstable_renderSubtreeIntoContainer=function(r,o,c,y){if(!ul(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ll(r,o,c,!1,y)},Nr.version="18.3.1-next-f1338f8080-20240426",Nr}var Hx;function gk(){if(Hx)return hp.exports;Hx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hp.exports=zT(),hp.exports}var Wx;function $T(){if(Wx)return pl;Wx=1;var e=gk();return pl.createRoot=e.createRoot,pl.hydrateRoot=e.hydrateRoot,pl}var HT=$T();const WT=Na(HT);function Ot(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Ot(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var UT={value:()=>{}};function sc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Tl(n)}function Tl(e){this._=e}function GT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Tl.prototype=sc.prototype={constructor:Tl,on:function(e,t){var n=this._,i=GT(e+"",n),a,s=-1,u=i.length;if(arguments.length<2){for(;++s<u;)if((a=(e=i[s]).type)&&(a=KT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=i[s]).type)n[a]=Ux(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Ux(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Tl(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,s;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,n)}};function KT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Ux(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=UT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var c0="http://www.w3.org/1999/xhtml";const Gx={svg:"http://www.w3.org/2000/svg",xhtml:c0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gx.hasOwnProperty(t)?{space:Gx[t],local:e}:e}function YT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===c0&&t.documentElement.namespaceURI===c0?t.createElement(e):t.createElementNS(n,e)}}function QT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vk(e){var t=uc(e);return(t.local?QT:YT)(t)}function XT(){}function H0(e){return e==null?XT:function(){return this.querySelector(e)}}function ZT(e){typeof e!="function"&&(e=H0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=new Array(u),d,p,m=0;m<u;++m)(d=s[m])&&(p=e.call(d,d.__data__,m,s))&&("__data__"in d&&(p.__data__=d.__data__),l[m]=p);return new Gr(i,this._parents)}function JT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eN(){return[]}function xk(e){return e==null?eN:function(){return this.querySelectorAll(e)}}function tN(e){return function(){return JT(e.apply(this,arguments))}}function rN(e){typeof e=="function"?e=tN(e):e=xk(e);for(var t=this._groups,n=t.length,i=[],a=[],s=0;s<n;++s)for(var u=t[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&(i.push(e.call(d,d.__data__,p,u)),a.push(d));return new Gr(i,a)}function wk(e){return function(){return this.matches(e)}}function bk(e){return function(t){return t.matches(e)}}var nN=Array.prototype.find;function iN(e){return function(){return nN.call(this.children,e)}}function oN(){return this.firstElementChild}function aN(e){return this.select(e==null?oN:iN(typeof e=="function"?e:bk(e)))}var sN=Array.prototype.filter;function uN(){return Array.from(this.children)}function lN(e){return function(){return sN.call(this.children,e)}}function cN(e){return this.selectAll(e==null?uN:lN(typeof e=="function"?e:bk(e)))}function dN(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new Gr(i,this._parents)}function qk(e){return new Array(e.length)}function pN(){return new Gr(this._enter||this._groups.map(qk),this._parents)}function Fl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fl.prototype={constructor:Fl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fN(e){return function(){return e}}function _N(e,t,n,i,a,s){for(var u=0,l,d=t.length,p=s.length;u<p;++u)(l=t[u])?(l.__data__=s[u],i[u]=l):n[u]=new Fl(e,s[u]);for(;u<d;++u)(l=t[u])&&(a[u]=l)}function mN(e,t,n,i,a,s,u){var l,d,p=new Map,m=t.length,f=s.length,h=new Array(m),g;for(l=0;l<m;++l)(d=t[l])&&(h[l]=g=u.call(d,d.__data__,l,t)+"",p.has(g)?a[l]=d:p.set(g,d));for(l=0;l<f;++l)g=u.call(e,s[l],l,s)+"",(d=p.get(g))?(i[l]=d,d.__data__=s[l],p.delete(g)):n[l]=new Fl(e,s[l]);for(l=0;l<m;++l)(d=t[l])&&p.get(h[l])===d&&(a[l]=d)}function hN(e){return e.__data__}function yN(e,t){if(!arguments.length)return Array.from(this,hN);var n=t?mN:_N,i=this._parents,a=this._groups;typeof e!="function"&&(e=fN(e));for(var s=a.length,u=new Array(s),l=new Array(s),d=new Array(s),p=0;p<s;++p){var m=i[p],f=a[p],h=f.length,g=gN(e.call(m,m&&m.__data__,p,i)),x=g.length,q=l[p]=new Array(x),w=u[p]=new Array(x),b=d[p]=new Array(h);n(m,f,q,w,b,g,t);for(var C=0,S=0,E,I;C<x;++C)if(E=q[C]){for(C>=S&&(S=C+1);!(I=w[S])&&++S<x;);E._next=I||null}}return u=new Gr(u,i),u._enter=l,u._exit=d,u}function gN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vN(){return new Gr(this._exit||this._groups.map(qk),this._parents)}function xN(e,t,n){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),i&&a?i.merge(a).order():a}function wN(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,s=i.length,u=Math.min(a,s),l=new Array(a),d=0;d<u;++d)for(var p=n[d],m=i[d],f=p.length,h=l[d]=new Array(f),g,x=0;x<f;++x)(g=p[x]||m[x])&&(h[x]=g);for(;d<a;++d)l[d]=n[d];return new Gr(l,this._parents)}function bN(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,s=i[a],u;--a>=0;)(u=i[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function qN(e){e||(e=SN);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var u=n[s],l=u.length,d=a[s]=new Array(l),p,m=0;m<l;++m)(p=u[m])&&(d[m]=p);d.sort(t)}return new Gr(a,this._parents).order()}function SN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function CN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kN(){return Array.from(this)}function MN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length;a<s;++a){var u=i[a];if(u)return u}return null}function EN(){let e=0;for(const t of this)++e;return e}function IN(){return!this.node()}function TN(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],s=0,u=a.length,l;s<u;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function NN(e){return function(){this.removeAttribute(e)}}function jN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PN(e,t){return function(){this.setAttribute(e,t)}}function RN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function VN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ON(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function FN(e,t){var n=uc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?jN:NN:typeof t=="function"?n.local?ON:VN:n.local?RN:PN)(n,t))}function Sk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function AN(e){return function(){this.style.removeProperty(e)}}function LN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function DN(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function BN(e,t,n){return arguments.length>1?this.each((t==null?AN:typeof t=="function"?DN:LN)(e,t,n??"")):ba(this.node(),e)}function ba(e,t){return e.style.getPropertyValue(t)||Sk(e).getComputedStyle(e,null).getPropertyValue(t)}function zN(e){return function(){delete this[e]}}function $N(e,t){return function(){this[e]=t}}function HN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function WN(e,t){return arguments.length>1?this.each((t==null?zN:typeof t=="function"?HN:$N)(e,t)):this.node()[e]}function Ck(e){return e.trim().split(/^|\s+/)}function W0(e){return e.classList||new kk(e)}function kk(e){this._node=e,this._names=Ck(e.getAttribute("class")||"")}kk.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mk(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Ek(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function UN(e){return function(){Mk(this,e)}}function GN(e){return function(){Ek(this,e)}}function KN(e,t){return function(){(t.apply(this,arguments)?Mk:Ek)(this,e)}}function YN(e,t){var n=Ck(e+"");if(arguments.length<2){for(var i=W0(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?KN:t?UN:GN)(n,t))}function QN(){this.textContent=""}function XN(e){return function(){this.textContent=e}}function ZN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function JN(e){return arguments.length?this.each(e==null?QN:(typeof e=="function"?ZN:XN)(e)):this.node().textContent}function e5(){this.innerHTML=""}function t5(e){return function(){this.innerHTML=e}}function r5(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function n5(e){return arguments.length?this.each(e==null?e5:(typeof e=="function"?r5:t5)(e)):this.node().innerHTML}function i5(){this.nextSibling&&this.parentNode.appendChild(this)}function o5(){return this.each(i5)}function a5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s5(){return this.each(a5)}function u5(e){var t=typeof e=="function"?e:vk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function l5(){return null}function c5(e,t){var n=typeof e=="function"?e:vk(e),i=t==null?l5:typeof t=="function"?t:H0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function d5(){var e=this.parentNode;e&&e.removeChild(this)}function p5(){return this.each(d5)}function f5(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _5(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function m5(e){return this.select(e?_5:f5)}function h5(e){return arguments.length?this.property("__data__",e):this.node().__data__}function y5(e){return function(t){e.call(this,t,this.__data__)}}function g5(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function v5(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function x5(e,t,n){return function(){var i=this.__on,a,s=y5(t);if(i){for(var u=0,l=i.length;u<l;++u)if((a=i[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(a):this.__on=[a]}}function w5(e,t,n){var i=g5(e+""),a,s=i.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,p=l.length,m;d<p;++d)for(a=0,m=l[d];a<s;++a)if((u=i[a]).type===m.type&&u.name===m.name)return m.value}return}for(l=t?x5:v5,a=0;a<s;++a)this.each(l(i[a],t,n));return this}function Ik(e,t,n){var i=Sk(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function b5(e,t){return function(){return Ik(this,e,t)}}function q5(e,t){return function(){return Ik(this,e,t.apply(this,arguments))}}function S5(e,t){return this.each((typeof t=="function"?q5:b5)(e,t))}function*C5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length,u;a<s;++a)(u=i[a])&&(yield u)}var Tk=[null];function Gr(e,t){this._groups=e,this._parents=t}function Qs(){return new Gr([[document.documentElement]],Tk)}function k5(){return this}Gr.prototype=Qs.prototype={constructor:Gr,select:ZT,selectAll:rN,selectChild:aN,selectChildren:cN,filter:dN,data:yN,enter:pN,exit:vN,join:xN,merge:wN,selection:k5,order:bN,sort:qN,call:CN,nodes:kN,node:MN,size:EN,empty:IN,each:TN,attr:FN,style:BN,property:WN,classed:YN,text:JN,html:n5,raise:o5,lower:s5,append:u5,insert:c5,remove:p5,clone:m5,datum:h5,on:w5,dispatch:S5,[Symbol.iterator]:C5};function Wr(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],Tk)}function M5(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kn(e,t){if(e=M5(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const E5={passive:!1},Vs={capture:!0,passive:!1};function vp(e){e.stopImmediatePropagation()}function va(e){e.preventDefault(),e.stopImmediatePropagation()}function Nk(e){var t=e.document.documentElement,n=Wr(e).on("dragstart.drag",va,Vs);"onselectstart"in t?n.on("selectstart.drag",va,Vs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jk(e,t){var n=e.document.documentElement,i=Wr(e).on("dragstart.drag",null);t&&(i.on("click.drag",va,Vs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fl=e=>()=>e;function d0(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:s,x:u,y:l,dx:d,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}d0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function I5(e){return!e.ctrlKey&&!e.button}function T5(){return this.parentNode}function N5(e,t){return t??{x:e.x,y:e.y}}function j5(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pk(){var e=I5,t=T5,n=N5,i=j5,a={},s=sc("start","drag","end"),u=0,l,d,p,m,f=0;function h(E){E.on("mousedown.drag",g).filter(i).on("touchstart.drag",w).on("touchmove.drag",b,E5).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,I){if(!(m||!e.call(this,E,I))){var M=S(this,t.call(this,E,I),E,I,"mouse");M&&(Wr(E.view).on("mousemove.drag",x,Vs).on("mouseup.drag",q,Vs),Nk(E.view),vp(E),p=!1,l=E.clientX,d=E.clientY,M("start",E))}}function x(E){if(va(E),!p){var I=E.clientX-l,M=E.clientY-d;p=I*I+M*M>f}a.mouse("drag",E)}function q(E){Wr(E.view).on("mousemove.drag mouseup.drag",null),jk(E.view,p),va(E),a.mouse("end",E)}function w(E,I){if(e.call(this,E,I)){var M=E.changedTouches,T=t.call(this,E,I),j=M.length,P,D;for(P=0;P<j;++P)(D=S(this,T,E,I,M[P].identifier,M[P]))&&(vp(E),D("start",E,M[P]))}}function b(E){var I=E.changedTouches,M=I.length,T,j;for(T=0;T<M;++T)(j=a[I[T].identifier])&&(va(E),j("drag",E,I[T]))}function C(E){var I=E.changedTouches,M=I.length,T,j;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<M;++T)(j=a[I[T].identifier])&&(vp(E),j("end",E,I[T]))}function S(E,I,M,T,j,P){var D=s.copy(),O=kn(P||M,I),F,Q,V;if((V=n.call(E,new d0("beforestart",{sourceEvent:M,target:h,identifier:j,active:u,x:O[0],y:O[1],dx:0,dy:0,dispatch:D}),T))!=null)return F=V.x-O[0]||0,Q=V.y-O[1]||0,function X(W,te,U){var K=O,ie;switch(W){case"start":a[j]=X,ie=u++;break;case"end":delete a[j],--u;case"drag":O=kn(U||te,I),ie=u;break}D.call(W,E,new d0(W,{sourceEvent:te,subject:V,target:h,identifier:j,active:ie,x:O[0]+F,y:O[1]+Q,dx:O[0]-K[0],dy:O[1]-K[1],dispatch:D}),T)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:fl(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:fl(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:fl(E),h):n},h.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:fl(!!E),h):i},h.on=function(){var E=s.on.apply(s,arguments);return E===s?h:E},h.clickDistance=function(E){return arguments.length?(f=(E=+E)*E,h):Math.sqrt(f)},h}function U0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rk(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xs(){}var Os=.7,Al=1/Os,xa="\\s*([+-]?\\d+)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P5=/^#([0-9a-f]{3,8})$/,R5=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),V5=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),O5=new RegExp(`^rgba\\(${xa},${xa},${xa},${Fs}\\)$`),F5=new RegExp(`^rgba\\(${Un},${Un},${Un},${Fs}\\)$`),A5=new RegExp(`^hsl\\(${Fs},${Un},${Un}\\)$`),L5=new RegExp(`^hsla\\(${Fs},${Un},${Un},${Fs}\\)$`),Kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U0(Xs,No,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yx,formatHex:Yx,formatHex8:D5,formatHsl:B5,formatRgb:Qx,toString:Qx});function Yx(){return this.rgb().formatHex()}function D5(){return this.rgb().formatHex8()}function B5(){return Vk(this).formatHsl()}function Qx(){return this.rgb().formatRgb()}function No(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=P5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xx(t):n===3?new jr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=R5.exec(e))?new jr(t[1],t[2],t[3],1):(t=V5.exec(e))?new jr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=O5.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=F5.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=A5.exec(e))?e1(t[1],t[2]/100,t[3]/100,1):(t=L5.exec(e))?e1(t[1],t[2]/100,t[3]/100,t[4]):Kx.hasOwnProperty(e)?Xx(Kx[e]):e==="transparent"?new jr(NaN,NaN,NaN,0):null}function Xx(e){return new jr(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,i){return i<=0&&(e=t=n=NaN),new jr(e,t,n,i)}function z5(e){return e instanceof Xs||(e=No(e)),e?(e=e.rgb(),new jr(e.r,e.g,e.b,e.opacity)):new jr}function p0(e,t,n,i){return arguments.length===1?z5(e):new jr(e,t,n,i??1)}function jr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}U0(jr,p0,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new jr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new jr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jr(Io(this.r),Io(this.g),Io(this.b),Ll(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zx,formatHex:Zx,formatHex8:$5,formatRgb:Jx,toString:Jx}));function Zx(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}`}function $5(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}${Eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jx(){const e=Ll(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function Ll(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Eo(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function e1(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,n,i)}function Vk(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Xs||(e=No(e)),!e)return new En;if(e instanceof En)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),u=NaN,l=s-a,d=(s+a)/2;return l?(t===s?u=(n-i)/l+(n<i)*6:n===s?u=(i-t)/l+2:u=(t-n)/l+4,l/=d<.5?s+a:2-s-a,u*=60):l=d>0&&d<1?0:u,new En(u,l,d,e.opacity)}function H5(e,t,n,i){return arguments.length===1?Vk(e):new En(e,t,n,i??1)}function En(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}U0(En,H5,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new jr(xp(e>=240?e-240:e+120,a,i),xp(e,a,i),xp(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new En(t1(this.h),ml(this.s),ml(this.l),Ll(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ll(this.opacity);return`${e===1?"hsl(":"hsla("}${t1(this.h)}, ${ml(this.s)*100}%, ${ml(this.l)*100}%${e===1?")":`, ${e})`}`}}));function t1(e){return e=(e||0)%360,e<0?e+360:e}function ml(e){return Math.max(0,Math.min(1,e||0))}function xp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const G0=e=>()=>e;function W5(e,t){return function(n){return e+n*t}}function U5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function G5(e){return(e=+e)==1?Ok:function(t,n){return n-t?U5(t,n,e):G0(isNaN(t)?n:t)}}function Ok(e,t){var n=t-e;return n?W5(e,n):G0(isNaN(e)?t:e)}const Dl=(function e(t){var n=G5(t);function i(a,s){var u=n((a=p0(a)).r,(s=p0(s)).r),l=n(a.g,s.g),d=n(a.b,s.b),p=Ok(a.opacity,s.opacity);return function(m){return a.r=u(m),a.g=l(m),a.b=d(m),a.opacity=p(m),a+""}}return i.gamma=e,i})(1);function K5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function Y5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Q5(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),u;for(u=0;u<i;++u)a[u]=Es(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(l){for(u=0;u<i;++u)s[u]=a[u](l);return s}}function X5(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Hn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Z5(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Es(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var f0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wp=new RegExp(f0.source,"g");function J5(e){return function(){return e}}function ej(e){return function(t){return e(t)+""}}function Fk(e,t){var n=f0.lastIndex=wp.lastIndex=0,i,a,s,u=-1,l=[],d=[];for(e=e+"",t=t+"";(i=f0.exec(e))&&(a=wp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[u]?l[u]+=s:l[++u]=s),(i=i[0])===(a=a[0])?l[u]?l[u]+=a:l[++u]=a:(l[++u]=null,d.push({i:u,x:Hn(i,a)})),n=wp.lastIndex;return n<t.length&&(s=t.slice(n),l[u]?l[u]+=s:l[++u]=s),l.length<2?d[0]?ej(d[0].x):J5(t):(t=d.length,function(p){for(var m=0,f;m<t;++m)l[(f=d[m]).i]=f.x(p);return l.join("")})}function Es(e,t){var n=typeof t,i;return t==null||n==="boolean"?G0(t):(n==="number"?Hn:n==="string"?(i=No(t))?(t=i,Dl):Fk:t instanceof No?Dl:t instanceof Date?X5:Y5(t)?K5:Array.isArray(t)?Q5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Z5:Hn)(e,t)}var r1=180/Math.PI,_0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ak(e,t,n,i,a,s){var u,l,d;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),e*i<t*n&&(e=-e,t=-t,d=-d,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*r1,skewX:Math.atan(d)*r1,scaleX:u,scaleY:l}}var hl;function tj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_0:Ak(t.a,t.b,t.c,t.d,t.e,t.f)}function rj(e){return e==null||(hl||(hl=document.createElementNS("http://www.w3.org/2000/svg","g")),hl.setAttribute("transform",e),!(e=hl.transform.baseVal.consolidate()))?_0:(e=e.matrix,Ak(e.a,e.b,e.c,e.d,e.e,e.f))}function Lk(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function s(p,m,f,h,g,x){if(p!==f||m!==h){var q=g.push("translate(",null,t,null,n);x.push({i:q-4,x:Hn(p,f)},{i:q-2,x:Hn(m,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function u(p,m,f,h){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),h.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Hn(p,m)})):m&&f.push(a(f)+"rotate("+m+i)}function l(p,m,f,h){p!==m?h.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Hn(p,m)}):m&&f.push(a(f)+"skewX("+m+i)}function d(p,m,f,h,g,x){if(p!==f||m!==h){var q=g.push(a(g)+"scale(",null,",",null,")");x.push({i:q-4,x:Hn(p,f)},{i:q-2,x:Hn(m,h)})}else(f!==1||h!==1)&&g.push(a(g)+"scale("+f+","+h+")")}return function(p,m){var f=[],h=[];return p=e(p),m=e(m),s(p.translateX,p.translateY,m.translateX,m.translateY,f,h),u(p.rotate,m.rotate,f,h),l(p.skewX,m.skewX,f,h),d(p.scaleX,p.scaleY,m.scaleX,m.scaleY,f,h),p=m=null,function(g){for(var x=-1,q=h.length,w;++x<q;)f[(w=h[x]).i]=w.x(g);return f.join("")}}}var nj=Lk(tj,"px, ","px)","deg)"),ij=Lk(rj,", ",")",")"),oj=1e-12;function n1(e){return((e=Math.exp(e))+1/e)/2}function aj(e){return((e=Math.exp(e))-1/e)/2}function sj(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nl=(function e(t,n,i){function a(s,u){var l=s[0],d=s[1],p=s[2],m=u[0],f=u[1],h=u[2],g=m-l,x=f-d,q=g*g+x*x,w,b;if(q<oj)b=Math.log(h/p)/t,w=function(T){return[l+T*g,d+T*x,p*Math.exp(t*T*b)]};else{var C=Math.sqrt(q),S=(h*h-p*p+i*q)/(2*p*n*C),E=(h*h-p*p-i*q)/(2*h*n*C),I=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(E*E+1)-E);b=(M-I)/t,w=function(T){var j=T*b,P=n1(I),D=p/(n*C)*(P*sj(t*j+I)-aj(I));return[l+D*g,d+D*x,p*P/n1(t*j+I)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return a.rho=function(s){var u=Math.max(.001,+s),l=u*u,d=l*l;return e(u,l,d)},a})(Math.SQRT2,2,4);var qa=0,qs=0,vs=0,Dk=1e3,Bl,Ss,zl=0,jo=0,lc=0,As=typeof performance=="object"&&performance.now?performance:Date,Bk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K0(){return jo||(Bk(uj),jo=As.now()+lc)}function uj(){jo=0}function $l(){this._call=this._time=this._next=null}$l.prototype=zk.prototype={constructor:$l,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?K0():+n)+(t==null?0:+t),!this._next&&Ss!==this&&(Ss?Ss._next=this:Bl=this,Ss=this),this._call=e,this._time=n,m0()},stop:function(){this._call&&(this._call=null,this._time=1/0,m0())}};function zk(e,t,n){var i=new $l;return i.restart(e,t,n),i}function lj(){K0(),++qa;for(var e=Bl,t;e;)(t=jo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qa}function i1(){jo=(zl=As.now())+lc,qa=qs=0;try{lj()}finally{qa=0,dj(),jo=0}}function cj(){var e=As.now(),t=e-zl;t>Dk&&(lc-=t,zl=e)}function dj(){for(var e,t=Bl,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bl=n);Ss=e,m0(i)}function m0(e){if(!qa){qs&&(qs=clearTimeout(qs));var t=e-jo;t>24?(e<1/0&&(qs=setTimeout(i1,e-As.now()-lc)),vs&&(vs=clearInterval(vs))):(vs||(zl=As.now(),vs=setInterval(cj,Dk)),qa=1,Bk(i1))}}function o1(e,t,n){var i=new $l;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var pj=sc("start","end","cancel","interrupt"),fj=[],$k=0,a1=1,h0=2,jl=3,s1=4,y0=5,Pl=6;function cc(e,t,n,i,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;_j(e,n,{name:t,index:i,group:a,on:pj,tween:fj,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$k})}function Y0(e,t){var n=Pn(e,t);if(n.state>$k)throw new Error("too late; already scheduled");return n}function Kn(e,t){var n=Pn(e,t);if(n.state>jl)throw new Error("too late; already running");return n}function Pn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _j(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=zk(s,0,n.time);function s(p){n.state=a1,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var m,f,h,g;if(n.state!==a1)return d();for(m in i)if(g=i[m],g.name===n.name){if(g.state===jl)return o1(u);g.state===s1?(g.state=Pl,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[m]):+m<t&&(g.state=Pl,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[m])}if(o1(function(){n.state===jl&&(n.state=s1,n.timer.restart(l,n.delay,n.time),l(p))}),n.state=h0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===h0){for(n.state=jl,a=new Array(h=n.tween.length),m=0,f=-1;m<h;++m)(g=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=g);a.length=f+1}}function l(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=y0,1),f=-1,h=a.length;++f<h;)a[f].call(e,m);n.state===y0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Pl,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Rl(e,t){var n=e.__transition,i,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((i=n[u]).name!==t){s=!1;continue}a=i.state>h0&&i.state<y0,i.state=Pl,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[u]}s&&delete e.__transition}}function mj(e){return this.each(function(){Rl(this,e)})}function hj(e,t){var n,i;return function(){var a=Kn(this,e),s=a.tween;if(s!==n){i=n=s;for(var u=0,l=i.length;u<l;++u)if(i[u].name===t){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function yj(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var s=Kn(this,e),u=s.tween;if(u!==i){a=(i=u).slice();for(var l={name:t,value:n},d=0,p=a.length;d<p;++d)if(a[d].name===t){a[d]=l;break}d===p&&a.push(l)}s.tween=a}}function gj(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Pn(this.node(),n).tween,a=0,s=i.length,u;a<s;++a)if((u=i[a]).name===e)return u.value;return null}return this.each((t==null?hj:yj)(n,e,t))}function Q0(e,t,n){var i=e._id;return e.each(function(){var a=Kn(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Pn(a,i).value[t]}}function Hk(e,t){var n;return(typeof t=="number"?Hn:t instanceof No?Dl:(n=No(t))?(t=n,Dl):Fk)(e,t)}function vj(e){return function(){this.removeAttribute(e)}}function xj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wj(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===i?s:s=t(i=u,n)}}function bj(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===i?s:s=t(i=u,n)}}function qj(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function Sj(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function Cj(e,t){var n=uc(e),i=n==="transform"?ij:Hk;return this.attrTween(e,typeof t=="function"?(n.local?Sj:qj)(n,i,Q0(this,"attr."+e,t)):t==null?(n.local?xj:vj)(n):(n.local?bj:wj)(n,i,t))}function kj(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Mj(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ej(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&Mj(e,s)),n}return a._value=t,a}function Ij(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&kj(e,s)),n}return a._value=t,a}function Tj(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=uc(e);return this.tween(n,(i.local?Ej:Ij)(i,t))}function Nj(e,t){return function(){Y0(this,e).delay=+t.apply(this,arguments)}}function jj(e,t){return t=+t,function(){Y0(this,e).delay=t}}function Pj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nj:jj)(t,e)):Pn(this.node(),t).delay}function Rj(e,t){return function(){Kn(this,e).duration=+t.apply(this,arguments)}}function Vj(e,t){return t=+t,function(){Kn(this,e).duration=t}}function Oj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rj:Vj)(t,e)):Pn(this.node(),t).duration}function Fj(e,t){if(typeof t!="function")throw new Error;return function(){Kn(this,e).ease=t}}function Aj(e){var t=this._id;return arguments.length?this.each(Fj(t,e)):Pn(this.node(),t).ease}function Lj(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kn(this,e).ease=n}}function Dj(e){if(typeof e!="function")throw new Error;return this.each(Lj(this._id,e))}function Bj(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new yi(i,this._parents,this._name,this._id)}function zj(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,s=Math.min(i,a),u=new Array(i),l=0;l<s;++l)for(var d=t[l],p=n[l],m=d.length,f=u[l]=new Array(m),h,g=0;g<m;++g)(h=d[g]||p[g])&&(f[g]=h);for(;l<i;++l)u[l]=t[l];return new yi(u,this._parents,this._name,this._id)}function $j(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Hj(e,t,n){var i,a,s=$j(t)?Y0:Kn;return function(){var u=s(this,e),l=u.on;l!==i&&(a=(i=l).copy()).on(t,n),u.on=a}}function Wj(e,t){var n=this._id;return arguments.length<2?Pn(this.node(),n).on.on(e):this.each(Hj(n,e,t))}function Uj(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Gj(){return this.on("end.remove",Uj(this._id))}function Kj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=H0(e));for(var i=this._groups,a=i.length,s=new Array(a),u=0;u<a;++u)for(var l=i[u],d=l.length,p=s[u]=new Array(d),m,f,h=0;h<d;++h)(m=l[h])&&(f=e.call(m,m.__data__,h,l))&&("__data__"in m&&(f.__data__=m.__data__),p[h]=f,cc(p[h],t,n,h,p,Pn(m,n)));return new yi(s,this._parents,t,n)}function Yj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xk(e));for(var i=this._groups,a=i.length,s=[],u=[],l=0;l<a;++l)for(var d=i[l],p=d.length,m,f=0;f<p;++f)if(m=d[f]){for(var h=e.call(m,m.__data__,f,d),g,x=Pn(m,n),q=0,w=h.length;q<w;++q)(g=h[q])&&cc(g,t,n,q,h,x);s.push(h),u.push(m)}return new yi(s,u,t,n)}var Qj=Qs.prototype.constructor;function Xj(){return new Qj(this._groups,this._parents)}function Zj(e,t){var n,i,a;return function(){var s=ba(this,e),u=(this.style.removeProperty(e),ba(this,e));return s===u?null:s===n&&u===i?a:a=t(n=s,i=u)}}function Wk(e){return function(){this.style.removeProperty(e)}}function Jj(e,t,n){var i,a=n+"",s;return function(){var u=ba(this,e);return u===a?null:u===i?s:s=t(i=u,n)}}function eP(e,t,n){var i,a,s;return function(){var u=ba(this,e),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),ba(this,e))),u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l))}}function tP(e,t){var n,i,a,s="style."+t,u="end."+s,l;return function(){var d=Kn(this,e),p=d.on,m=d.value[s]==null?l||(l=Wk(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(u,a=m),d.on=i}}function rP(e,t,n){var i=(e+="")=="transform"?nj:Hk;return t==null?this.styleTween(e,Zj(e,i)).on("end.style."+e,Wk(e)):typeof t=="function"?this.styleTween(e,eP(e,i,Q0(this,"style."+e,t))).each(tP(this._id,e)):this.styleTween(e,Jj(e,i,t),n).on("end.style."+e,null)}function nP(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function iP(e,t,n){var i,a;function s(){var u=t.apply(this,arguments);return u!==a&&(i=(a=u)&&nP(e,u,n)),i}return s._value=t,s}function oP(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,iP(e,t,n??""))}function aP(e){return function(){this.textContent=e}}function sP(e){return function(){var t=e(this);this.textContent=t??""}}function uP(e){return this.tween("text",typeof e=="function"?sP(Q0(this,"text",e)):aP(e==null?"":e+""))}function lP(e){return function(t){this.textContent=e.call(this,t)}}function cP(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&lP(a)),t}return i._value=e,i}function dP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cP(e))}function pP(){for(var e=this._name,t=this._id,n=Uk(),i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)if(d=u[p]){var m=Pn(d,t);cc(d,e,n,p,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new yi(i,this._parents,e,n)}function fP(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(s,u){var l={value:u},d={value:function(){--a===0&&s()}};n.each(function(){var p=Kn(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),p.on=t}),a===0&&s()})}var _P=0;function yi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Uk(){return++_P}var fi=Qs.prototype;yi.prototype={constructor:yi,select:Kj,selectAll:Yj,selectChild:fi.selectChild,selectChildren:fi.selectChildren,filter:Bj,merge:zj,selection:Xj,transition:pP,call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:Wj,attr:Cj,attrTween:Tj,style:rP,styleTween:oP,text:uP,textTween:dP,remove:Gj,tween:gj,delay:Pj,duration:Oj,ease:Aj,easeVarying:Dj,end:fP,[Symbol.iterator]:fi[Symbol.iterator]};function mP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hP={time:null,delay:0,duration:250,ease:mP};function yP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gP(e){var t,n;e instanceof yi?(t=e._id,e=e._name):(t=Uk(),(n=hP).time=K0(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&cc(d,e,t,p,u,n||yP(d,t));return new yi(i,this._parents,e,t)}Qs.prototype.interrupt=mj;Qs.prototype.transition=gP;const yl=e=>()=>e;function vP(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function mi(e,t,n){this.k=e,this.x=t,this.y=n}mi.prototype={constructor:mi,scale:function(e){return e===1?this:new mi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dc=new mi(1,0,0);Gk.prototype=mi.prototype;function Gk(e){for(;!e.__zoom;)if(!(e=e.parentNode))return dc;return e.__zoom}function bp(e){e.stopImmediatePropagation()}function xs(e){e.preventDefault(),e.stopImmediatePropagation()}function xP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wP(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function u1(){return this.__zoom||dc}function bP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qP(){return navigator.maxTouchPoints||"ontouchstart"in this}function SP(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function Kk(){var e=xP,t=wP,n=SP,i=bP,a=qP,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=Nl,p=sc("start","zoom","end"),m,f,h,g=500,x=150,q=0,w=10;function b(V){V.property("__zoom",u1).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(V,X,W,te){var U=V.selection?V.selection():V;U.property("__zoom",u1),V!==U?I(V,X,W,te):U.interrupt().each(function(){M(this,arguments).event(te).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},b.scaleBy=function(V,X,W,te){b.scaleTo(V,function(){var U=this.__zoom.k,K=typeof X=="function"?X.apply(this,arguments):X;return U*K},W,te)},b.scaleTo=function(V,X,W,te){b.transform(V,function(){var U=t.apply(this,arguments),K=this.__zoom,ie=W==null?E(U):typeof W=="function"?W.apply(this,arguments):W,z=K.invert(ie),Z=typeof X=="function"?X.apply(this,arguments):X;return n(S(C(K,Z),ie,z),U,u)},W,te)},b.translateBy=function(V,X,W,te){b.transform(V,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),u)},null,te)},b.translateTo=function(V,X,W,te,U){b.transform(V,function(){var K=t.apply(this,arguments),ie=this.__zoom,z=te==null?E(K):typeof te=="function"?te.apply(this,arguments):te;return n(dc.translate(z[0],z[1]).scale(ie.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof W=="function"?-W.apply(this,arguments):-W),K,u)},te,U)};function C(V,X){return X=Math.max(s[0],Math.min(s[1],X)),X===V.k?V:new mi(X,V.x,V.y)}function S(V,X,W){var te=X[0]-W[0]*V.k,U=X[1]-W[1]*V.k;return te===V.x&&U===V.y?V:new mi(V.k,te,U)}function E(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function I(V,X,W,te){V.on("start.zoom",function(){M(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(te).end()}).tween("zoom",function(){var U=this,K=arguments,ie=M(U,K).event(te),z=t.apply(U,K),Z=W==null?E(z):typeof W=="function"?W.apply(U,K):W,_e=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),$=U.__zoom,J=typeof X=="function"?X.apply(U,K):X,oe=d($.invert(Z).concat(_e/$.k),J.invert(Z).concat(_e/J.k));return function(se){if(se===1)se=J;else{var ae=oe(se),he=_e/ae[2];se=new mi(he,Z[0]-ae[0]*he,Z[1]-ae[1]*he)}ie.zoom(null,se)}})}function M(V,X,W){return!W&&V.__zooming||new T(V,X)}function T(V,X){this.that=V,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,X),this.taps=0}T.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,X){return this.mouse&&V!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var X=Wr(this.that).datum();p.call(V,this.that,new vP(V,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:p}),X)}};function j(V,...X){if(!e.apply(this,arguments))return;var W=M(this,X).event(V),te=this.__zoom,U=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,i.apply(this,arguments)))),K=kn(V);if(W.wheel)(W.mouse[0][0]!==K[0]||W.mouse[0][1]!==K[1])&&(W.mouse[1]=te.invert(W.mouse[0]=K)),clearTimeout(W.wheel);else{if(te.k===U)return;W.mouse=[K,te.invert(K)],Rl(this),W.start()}xs(V),W.wheel=setTimeout(ie,x),W.zoom("mouse",n(S(C(te,U),W.mouse[0],W.mouse[1]),W.extent,u));function ie(){W.wheel=null,W.end()}}function P(V,...X){if(h||!e.apply(this,arguments))return;var W=V.currentTarget,te=M(this,X,!0).event(V),U=Wr(V.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",_e,!0),K=kn(V,W),ie=V.clientX,z=V.clientY;Nk(V.view),bp(V),te.mouse=[K,this.__zoom.invert(K)],Rl(this),te.start();function Z($){if(xs($),!te.moved){var J=$.clientX-ie,oe=$.clientY-z;te.moved=J*J+oe*oe>q}te.event($).zoom("mouse",n(S(te.that.__zoom,te.mouse[0]=kn($,W),te.mouse[1]),te.extent,u))}function _e($){U.on("mousemove.zoom mouseup.zoom",null),jk($.view,te.moved),xs($),te.event($).end()}}function D(V,...X){if(e.apply(this,arguments)){var W=this.__zoom,te=kn(V.changedTouches?V.changedTouches[0]:V,this),U=W.invert(te),K=W.k*(V.shiftKey?.5:2),ie=n(S(C(W,K),te,U),t.apply(this,X),u);xs(V),l>0?Wr(this).transition().duration(l).call(I,ie,te,V):Wr(this).call(b.transform,ie,te,V)}}function O(V,...X){if(e.apply(this,arguments)){var W=V.touches,te=W.length,U=M(this,X,V.changedTouches.length===te).event(V),K,ie,z,Z;for(bp(V),ie=0;ie<te;++ie)z=W[ie],Z=kn(z,this),Z=[Z,this.__zoom.invert(Z),z.identifier],U.touch0?!U.touch1&&U.touch0[2]!==Z[2]&&(U.touch1=Z,U.taps=0):(U.touch0=Z,K=!0,U.taps=1+!!m);m&&(m=clearTimeout(m)),K&&(U.taps<2&&(f=Z[0],m=setTimeout(function(){m=null},g)),Rl(this),U.start())}}function F(V,...X){if(this.__zooming){var W=M(this,X).event(V),te=V.changedTouches,U=te.length,K,ie,z,Z;for(xs(V),K=0;K<U;++K)ie=te[K],z=kn(ie,this),W.touch0&&W.touch0[2]===ie.identifier?W.touch0[0]=z:W.touch1&&W.touch1[2]===ie.identifier&&(W.touch1[0]=z);if(ie=W.that.__zoom,W.touch1){var _e=W.touch0[0],$=W.touch0[1],J=W.touch1[0],oe=W.touch1[1],se=(se=J[0]-_e[0])*se+(se=J[1]-_e[1])*se,ae=(ae=oe[0]-$[0])*ae+(ae=oe[1]-$[1])*ae;ie=C(ie,Math.sqrt(se/ae)),z=[(_e[0]+J[0])/2,(_e[1]+J[1])/2],Z=[($[0]+oe[0])/2,($[1]+oe[1])/2]}else if(W.touch0)z=W.touch0[0],Z=W.touch0[1];else return;W.zoom("touch",n(S(ie,z,Z),W.extent,u))}}function Q(V,...X){if(this.__zooming){var W=M(this,X).event(V),te=V.changedTouches,U=te.length,K,ie;for(bp(V),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),K=0;K<U;++K)ie=te[K],W.touch0&&W.touch0[2]===ie.identifier?delete W.touch0:W.touch1&&W.touch1[2]===ie.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(ie=kn(ie,this),Math.hypot(f[0]-ie[0],f[1]-ie[1])<w)){var z=Wr(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(V){return arguments.length?(i=typeof V=="function"?V:yl(+V),b):i},b.filter=function(V){return arguments.length?(e=typeof V=="function"?V:yl(!!V),b):e},b.touchable=function(V){return arguments.length?(a=typeof V=="function"?V:yl(!!V),b):a},b.extent=function(V){return arguments.length?(t=typeof V=="function"?V:yl([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),b):t},b.scaleExtent=function(V){return arguments.length?(s[0]=+V[0],s[1]=+V[1],b):[s[0],s[1]]},b.translateExtent=function(V){return arguments.length?(u[0][0]=+V[0][0],u[1][0]=+V[1][0],u[0][1]=+V[0][1],u[1][1]=+V[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(V){return arguments.length?(n=V,b):n},b.duration=function(V){return arguments.length?(l=+V,b):l},b.interpolate=function(V){return arguments.length?(d=V,b):d},b.on=function(){var V=p.on.apply(p,arguments);return V===p?b:V},b.clickDistance=function(V){return arguments.length?(q=(V=+V)*V,b):Math.sqrt(q)},b.tapDistance=function(V){return arguments.length?(w=+V,b):w},b}const Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ls=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yk=["Enter"," ","Escape"],Qk={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Sa;(function(e){e.Strict="strict",e.Loose="loose"})(Sa||(Sa={}));var To;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(To||(To={}));var Ds;(function(e){e.Partial="partial",e.Full="full"})(Ds||(Ds={}));const Xk={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ui;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ui||(Ui={}));var Hl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hl||(Hl={}));var $e;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($e||($e={}));const l1={[$e.Left]:$e.Right,[$e.Right]:$e.Left,[$e.Top]:$e.Bottom,[$e.Bottom]:$e.Top};function Zk(e){return e===null?null:e?"valid":"invalid"}const Jk=e=>"id"in e&&"source"in e&&"target"in e,CP=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),X0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Zs=(e,t=[0,0])=>{const{width:n,height:i}=gi(e),a=e.origin??t,s=n*a[0],u=i*a[1];return{x:e.position.x-s,y:e.position.y-u}},kP=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):X0(a)?a:t.nodeLookup.get(a.id));const l=u?Wl(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return pc(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fc(n)},Js=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=pc(n,Wl(a)),i=!0)}),i?fc(n):{x:0,y:0,width:0,height:0}},Z0=(e,t,[n,i,a]=[0,0,1],s=!1,u=!1)=>{const l={...tu(t,[n,i,a]),width:t.width/a,height:t.height/a},d=[];for(const p of e.values()){const{measured:m,selectable:f=!0,hidden:h=!1}=p;if(u&&!f||h)continue;const g=m.width??p.width??p.initialWidth??null,x=m.height??p.height??p.initialHeight??null,q=Bs(l,ka(p)),w=(g??0)*(x??0),b=s&&q>0;(!p.internals.handleBounds||b||q>=w||p.dragging)&&d.push(p)}return d},MP=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function EP(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&n.set(a.id,a)}),n}async function IP({nodes:e,width:t,height:n,panZoom:i,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const l=EP(e,u),d=Js(l),p=J0(d,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await i.setViewport(p,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function eM({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),l=u.parentId?n.get(u.parentId):void 0,{x:d,y:p}=l?l.internals.positionAbsolute:{x:0,y:0},m=u.origin??i;let f=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!l)s==null||s("005",Gn.error005());else{const g=l.measured.width,x=l.measured.height;g&&x&&(f=[[d,p],[d+g,p+x]])}else l&&Ma(u.extent)&&(f=[[u.extent[0][0]+d,u.extent[0][1]+p],[u.extent[1][0]+d,u.extent[1][1]+p]]);const h=Ma(f)?Po(t,f,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Gn.error015())),{position:{x:h.x-d+(u.measured.width??0)*m[0],y:h.y-p+(u.measured.height??0)*m[1]},positionAbsolute:h}}async function TP({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:a}){const s=new Set(e.map(h=>h.id)),u=[];for(const h of n){if(h.deletable===!1)continue;const g=s.has(h.id),x=!g&&h.parentId&&u.find(q=>q.id===h.parentId);(g||x)&&u.push(h)}const l=new Set(t.map(h=>h.id)),d=i.filter(h=>h.deletable!==!1),m=MP(u,d);for(const h of d)l.has(h.id)&&!m.find(x=>x.id===h.id)&&m.push(h);if(!a)return{edges:m,nodes:u};const f=await a({nodes:u,edges:m});return typeof f=="boolean"?f?{edges:m,nodes:u}:{edges:[],nodes:[]}:f}const Ca=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Po=(e={x:0,y:0},t,n)=>({x:Ca(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ca(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function tM(e,t,n){const{width:i,height:a}=gi(n),{x:s,y:u}=n.internals.positionAbsolute;return Po(e,[[s,u],[s+i,u+a]],t)}const c1=(e,t,n)=>e<t?Ca(Math.abs(e-t),1,t)/t:e>n?-Ca(Math.abs(e-n),1,t)/t:0,rM=(e,t,n=15,i=40)=>{const a=c1(e.x,i,t.width-i)*n,s=c1(e.y,i,t.height-i)*n;return[a,s]},pc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),g0=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),fc=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),ka=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Wl=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},nM=(e,t)=>fc(pc(g0(e),g0(t))),Bs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},d1=e=>Tn(e.width)&&Tn(e.height)&&Tn(e.x)&&Tn(e.y),Tn=e=>!isNaN(e)&&isFinite(e),NP=(e,t)=>{},eu=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),tu=({x:e,y:t},[n,i,a],s=!1,u=[1,1])=>{const l={x:(e-n)/a,y:(t-i)/a};return s?eu(l,u):l},Ul=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i});function ha(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function jP(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=ha(e,n),a=ha(e,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof e=="object"){const i=ha(e.top??e.y??0,n),a=ha(e.bottom??e.y??0,n),s=ha(e.left??e.x??0,t),u=ha(e.right??e.x??0,t);return{top:i,right:u,bottom:a,left:s,x:s+u,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function PP(e,t,n,i,a,s){const{x:u,y:l}=Ul(e,[t,n,i]),{x:d,y:p}=Ul({x:e.x+e.width,y:e.y+e.height},[t,n,i]),m=a-d,f=s-p;return{left:Math.floor(u),top:Math.floor(l),right:Math.floor(m),bottom:Math.floor(f)}}const J0=(e,t,n,i,a,s)=>{const u=jP(s,t,n),l=(t-u.x)/e.width,d=(n-u.y)/e.height,p=Math.min(l,d),m=Ca(p,i,a),f=e.x+e.width/2,h=e.y+e.height/2,g=t/2-f*m,x=n/2-h*m,q=PP(e,g,x,m,t,n),w={left:Math.min(q.left-u.left,0),top:Math.min(q.top-u.top,0),right:Math.min(q.right-u.right,0),bottom:Math.min(q.bottom-u.bottom,0)};return{x:g-w.left+w.right,y:x-w.top+w.bottom,zoom:m}},zs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ma(e){return e!=null&&e!=="parent"}function gi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function iM(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function oM(e,t={width:0,height:0},n,i,a){const s={...e},u=i.get(n);if(u){const l=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function p1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function RP(){let e,t;return{promise:new Promise((i,a)=>{e=i,t=a}),resolve:e,reject:t}}function VP(e){return{...Qk,...e||{}}}function Is(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:a}){const{x:s,y:u}=Nn(e),l=tu({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},i),{x:d,y:p}=n?eu(l,t):l;return{xSnapped:d,ySnapped:p,...l}}const eg=e=>({width:e.offsetWidth,height:e.offsetHeight}),aM=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},OP=["INPUT","SELECT","TEXTAREA"];function sM(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:OP.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const uM=e=>"clientX"in e,Nn=(e,t)=>{var s,u;const n=uM(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},f1=(e,t,n,i,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...eg(u)}})};function lM({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l}){const d=e*.125+a*.375+u*.375+n*.125,p=t*.125+s*.375+l*.375+i*.125,m=Math.abs(d-e),f=Math.abs(p-t);return[d,p,m,f]}function gl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _1({pos:e,x1:t,y1:n,x2:i,y2:a,c:s}){switch(e){case $e.Left:return[t-gl(t-i,s),n];case $e.Right:return[t+gl(i-t,s),n];case $e.Top:return[t,n-gl(n-a,s)];case $e.Bottom:return[t,n+gl(a-n,s)]}}function tg({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,curvature:u=.25}){const[l,d]=_1({pos:n,x1:e,y1:t,x2:i,y2:a,c:u}),[p,m]=_1({pos:s,x1:i,y1:a,x2:e,y2:t,c:u}),[f,h,g,x]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:l,sourceControlY:d,targetControlX:p,targetControlY:m});return[`M${e},${t} C${l},${d} ${p},${m} ${i},${a}`,f,h,g,x]}function cM({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(i-t)/2,l=i<t?i+u:i-u;return[s,l,a,u]}function FP({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const u=a&&n?i+1e3:i,l=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+l}function AP({sourceNode:e,targetNode:t,width:n,height:i,transform:a}){const s=pc(Wl(e),Wl(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:i/a[2]};return Bs(u,fc(s))>0}const LP=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,DP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),v0=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||LP;let a;return Jk(e)?a={...e}:a={...e,id:i(e)},DP(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function rg({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,s,u,l]=cM({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,s,u,l]}const m1={[$e.Left]:{x:-1,y:0},[$e.Right]:{x:1,y:0},[$e.Top]:{x:0,y:-1},[$e.Bottom]:{x:0,y:1}},BP=({source:e,sourcePosition:t=$e.Bottom,target:n})=>t===$e.Left||t===$e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},h1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zP({source:e,sourcePosition:t=$e.Bottom,target:n,targetPosition:i=$e.Top,center:a,offset:s,stepPosition:u}){const l=m1[t],d=m1[i],p={x:e.x+l.x*s,y:e.y+l.y*s},m={x:n.x+d.x*s,y:n.y+d.y*s},f=BP({source:p,sourcePosition:t,target:m}),h=f.x!==0?"x":"y",g=f[h];let x=[],q,w;const b={x:0,y:0},C={x:0,y:0},[,,S,E]=cM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[h]*d[h]===-1){h==="x"?(q=a.x??p.x+(m.x-p.x)*u,w=a.y??(p.y+m.y)/2):(q=a.x??(p.x+m.x)/2,w=a.y??p.y+(m.y-p.y)*u);const M=[{x:q,y:p.y},{x:q,y:m.y}],T=[{x:p.x,y:w},{x:m.x,y:w}];l[h]===g?x=h==="x"?M:T:x=h==="x"?T:M}else{const M=[{x:p.x,y:m.y}],T=[{x:m.x,y:p.y}];if(h==="x"?x=l.x===g?T:M:x=l.y===g?M:T,t===i){const F=Math.abs(e[h]-n[h]);if(F<=s){const Q=Math.min(s-1,s-F);l[h]===g?b[h]=(p[h]>e[h]?-1:1)*Q:C[h]=(m[h]>n[h]?-1:1)*Q}}if(t!==i){const F=h==="x"?"y":"x",Q=l[h]===d[F],V=p[F]>m[F],X=p[F]<m[F];(l[h]===1&&(!Q&&V||Q&&X)||l[h]!==1&&(!Q&&X||Q&&V))&&(x=h==="x"?M:T)}const j={x:p.x+b.x,y:p.y+b.y},P={x:m.x+C.x,y:m.y+C.y},D=Math.max(Math.abs(j.x-x[0].x),Math.abs(P.x-x[0].x)),O=Math.max(Math.abs(j.y-x[0].y),Math.abs(P.y-x[0].y));D>=O?(q=(j.x+P.x)/2,w=x[0].y):(q=x[0].x,w=(j.y+P.y)/2)}return[[e,{x:p.x+b.x,y:p.y+b.y},...x,{x:m.x+C.x,y:m.y+C.y},n],q,w,S,E]}function $P(e,t,n,i){const a=Math.min(h1(e,t)/2,h1(t,n)/2,i),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+a*p},${u}Q ${s},${u} ${s},${u+a*m}`}const l=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${u+a*d}Q ${s},${u} ${s+a*l},${u}`}function Gl({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,borderRadius:u=5,centerX:l,centerY:d,offset:p=20,stepPosition:m=.5}){const[f,h,g,x,q]=zP({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:s,center:{x:l,y:d},offset:p,stepPosition:m});return[f.reduce((b,C,S)=>{let E="";return S>0&&S<f.length-1?E=$P(f[S-1],C,f[S+1],u):E=`${S===0?"M":"L"}${C.x} ${C.y}`,b+=E,b},""),h,g,x,q]}function y1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function HP(e){var f;const{sourceNode:t,targetNode:n}=e;if(!y1(t)||!y1(n))return null;const i=t.internals.handleBounds||g1(t.handles),a=n.internals.handleBounds||g1(n.handles),s=v1((i==null?void 0:i.source)??[],e.sourceHandle),u=v1(e.connectionMode===Sa.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(f=e.onError)==null||f.call(e,"008",Gn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||$e.Bottom,d=(u==null?void 0:u.position)||$e.Top,p=Ro(t,s,l),m=Ro(n,u,d);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:l,targetPosition:d}}function g1(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Ro(e,t,n=$e.Left,i=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??gi(e);if(i)return{x:a+u/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case $e.Top:return{x:a+u/2,y:s};case $e.Right:return{x:a+u,y:s+l/2};case $e.Bottom:return{x:a+u/2,y:s+l};case $e.Left:return{x:a,y:s+l/2}}}function v1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function x0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function WP(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,l)=>([l.markerStart||i,l.markerEnd||a].forEach(d=>{if(d&&typeof d=="object"){const p=x0(d,t);s.has(p)||(u.push({id:p,color:d.color||n,...d}),s.add(p))}}),u),[]).sort((u,l)=>u.id.localeCompare(l.id))}const dM=1e3,UP=10,ng={nodeOrigin:[0,0],nodeExtent:Ls,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},GP={...ng,checkEquality:!0};function ig(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function KP(e,t,n){const i=ig(ng,n);for(const a of e.values())if(a.parentId)ag(a,e,t,i);else{const s=Zs(a,i.nodeOrigin),u=Ma(a.extent)?a.extent:i.nodeExtent,l=Po(s,u,gi(a));a.internals.positionAbsolute=l}}function YP(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],i=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&i.push(s)}return{source:n,target:i}}function og(e){return e==="manual"}function w0(e,t,n,i={}){var p,m;const a=ig(GP,i),s={i:0},u=new Map(t),l=a!=null&&a.elevateNodesOnSelect&&!og(a.zIndexMode)?dM:0;let d=e.length>0;t.clear(),n.clear();for(const f of e){let h=u.get(f.id);if(a.checkEquality&&f===(h==null?void 0:h.internals.userNode))t.set(f.id,h);else{const g=Zs(f,a.nodeOrigin),x=Ma(f.extent)?f.extent:a.nodeExtent,q=Po(g,x,gi(f));h={...a.defaults,...f,measured:{width:(p=f.measured)==null?void 0:p.width,height:(m=f.measured)==null?void 0:m.height},internals:{positionAbsolute:q,handleBounds:YP(f,h),z:pM(f,l,a.zIndexMode),userNode:f}},t.set(f.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(d=!1),f.parentId&&ag(h,t,n,i,s)}return d}function QP(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ag(e,t,n,i,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:l,zIndexMode:d}=ig(ng,i),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}QP(e,n),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*UP),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const f=s&&!og(d)?dM:0,{x:h,y:g,z:x}=XP(e,m,u,l,f,d),{positionAbsolute:q}=e.internals,w=h!==q.x||g!==q.y;(w||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:h,y:g}:q,z:x}})}function pM(e,t,n){const i=Tn(e.zIndex)?e.zIndex:0;return og(n)?i:i+(e.selected?t:0)}function XP(e,t,n,i,a,s){const{x:u,y:l}=t.internals.positionAbsolute,d=gi(e),p=Zs(e,n),m=Ma(e.extent)?Po(p,e.extent,d):p;let f=Po({x:u+m.x,y:l+m.y},i,d);e.extent==="parent"&&(f=tM(f,d,t));const h=pM(e,a,s),g=t.internals.z??0;return{x:f.x,y:f.y,z:g>=h?g+1:h}}function sg(e,t,n,i=[0,0]){var u;const a=[],s=new Map;for(const l of e){const d=t.get(l.parentId);if(!d)continue;const p=((u=s.get(l.parentId))==null?void 0:u.expandedRect)??ka(d),m=nM(p,l.rect);s.set(l.parentId,{expandedRect:m,parent:d})}return s.size>0&&s.forEach(({expandedRect:l,parent:d},p)=>{var S;const m=d.internals.positionAbsolute,f=gi(d),h=d.origin??i,g=l.x<m.x?Math.round(Math.abs(m.x-l.x)):0,x=l.y<m.y?Math.round(Math.abs(m.y-l.y)):0,q=Math.max(f.width,Math.round(l.width)),w=Math.max(f.height,Math.round(l.height)),b=(q-f.width)*h[0],C=(w-f.height)*h[1];(g>0||x>0||b||C)&&(a.push({id:p,type:"position",position:{x:d.position.x-g+b,y:d.position.y-x+C}}),(S=n.get(p))==null||S.forEach(E=>{e.some(I=>I.id===E.id)||a.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+x}})})),(f.width<l.width||f.height<l.height||g||x)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:q+(g?h[0]*g-b:0),height:w+(x?h[1]*x-C:0)}})}),a}function ZP(e,t,n,i,a,s,u){const l=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!l)return{changes:[],updatedInternals:d};const p=[],m=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(m.transform),h=[];for(const g of e.values()){const x=t.get(g.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),d=!0;continue}const q=eg(g.nodeElement),w=x.measured.width!==q.width||x.measured.height!==q.height;if(!!(q.width&&q.height&&(w||!x.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),S=Ma(x.extent)?x.extent:s;let{positionAbsolute:E}=x.internals;x.parentId&&x.extent==="parent"?E=tM(E,q,t.get(x.parentId)):S&&(E=Po(E,S,q));const I={...x,measured:q,internals:{...x.internals,positionAbsolute:E,handleBounds:{source:f1("source",g.nodeElement,C,f,x.id),target:f1("target",g.nodeElement,C,f,x.id)}}};t.set(x.id,I),x.parentId&&ag(I,t,n,{nodeOrigin:a,zIndexMode:u}),d=!0,w&&(p.push({id:x.id,type:"dimensions",dimensions:q}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:ka(I,a)}))}}if(h.length>0){const g=sg(h,t,n,a);p.push(...g)}return{changes:p,updatedInternals:d}}async function JP({delta:e,panZoom:t,transform:n,translateExtent:i,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],i),l=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(l)}function x1(e,t,n,i,a,s){let u=a;const l=i.get(u)||new Map;i.set(u,l.set(n,t)),u=`${a}-${e}`;const d=i.get(u)||new Map;if(i.set(u,d.set(n,t)),s){u=`${a}-${e}-${s}`;const p=i.get(u)||new Map;i.set(u,p.set(n,t))}}function fM(e,t,n){e.clear(),t.clear();for(const i of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:l=null}=i,d={edgeId:i.id,source:a,target:s,sourceHandle:u,targetHandle:l},p=`${a}-${u}--${s}-${l}`,m=`${s}-${l}--${a}-${u}`;x1("source",d,m,e,a,u),x1("target",d,p,e,s,l),t.set(i.id,i)}}function _M(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:_M(n,t):!1}function w1(e,t,n){var a;let i=e;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function eR(e,t,n,i){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===i)&&(!u.parentId||!_M(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const l=e.get(s);l&&a.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function qp({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var u,l,d;const a=[];for(const[p,m]of t){const f=(u=n.get(p))==null?void 0:u.internals.userNode;f&&a.push({...f,position:m.position,dragging:i})}if(!e)return[a[0],a];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((d=t.get(e))==null?void 0:d.position)||s.position,dragging:i}:a[0],a]}function tR({dragItems:e,snapGrid:t,x:n,y:i}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:i-a.distance.y},u=eu(s,t);return{x:u.x-s.x,y:u.y-s.y}}function rR({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:a}){let s={x:null,y:null},u=0,l=new Map,d=!1,p={x:0,y:0},m=null,f=!1,h=null,g=!1,x=!1,q=null;function w({noDragClassName:C,handleSelector:S,domNode:E,isSelectable:I,nodeId:M,nodeClickDistance:T=0}){h=Wr(E);function j({x:F,y:Q}){const{nodeLookup:V,nodeExtent:X,snapGrid:W,snapToGrid:te,nodeOrigin:U,onNodeDrag:K,onSelectionDrag:ie,onError:z,updateNodePositions:Z}=t();s={x:F,y:Q};let _e=!1;const $=l.size>1,J=$&&X?g0(Js(l)):null,oe=$&&te?tR({dragItems:l,snapGrid:W,x:F,y:Q}):null;for(const[se,ae]of l){if(!V.has(se))continue;let he={x:F-ae.distance.x,y:Q-ae.distance.y};te&&(he=oe?{x:Math.round(he.x+oe.x),y:Math.round(he.y+oe.y)}:eu(he,W));let Se=null;if($&&X&&!ae.extent&&J){const{positionAbsolute:Te}=ae.internals,je=Te.x-J.x+X[0][0],Ve=Te.x+ae.measured.width-J.x2+X[1][0],He=Te.y-J.y+X[0][1],De=Te.y+ae.measured.height-J.y2+X[1][1];Se=[[je,He],[Ve,De]]}const{position:Ne,positionAbsolute:Ie}=eM({nodeId:se,nextPosition:he,nodeLookup:V,nodeExtent:Se||X,nodeOrigin:U,onError:z});_e=_e||ae.position.x!==Ne.x||ae.position.y!==Ne.y,ae.position=Ne,ae.internals.positionAbsolute=Ie}if(x=x||_e,!!_e&&(Z(l,!0),q&&(i||K||!M&&ie))){const[se,ae]=qp({nodeId:M,dragItems:l,nodeLookup:V});i==null||i(q,l,se,ae),K==null||K(q,se,ae),M||ie==null||ie(q,ae)}}async function P(){if(!m)return;const{transform:F,panBy:Q,autoPanSpeed:V,autoPanOnNodeDrag:X}=t();if(!X){d=!1,cancelAnimationFrame(u);return}const[W,te]=rM(p,m,V);(W!==0||te!==0)&&(s.x=(s.x??0)-W/F[2],s.y=(s.y??0)-te/F[2],await Q({x:W,y:te})&&j(s)),u=requestAnimationFrame(P)}function D(F){var $;const{nodeLookup:Q,multiSelectionActive:V,nodesDraggable:X,transform:W,snapGrid:te,snapToGrid:U,selectNodesOnDrag:K,onNodeDragStart:ie,onSelectionDragStart:z,unselectNodesAndEdges:Z}=t();f=!0,(!K||!I)&&!V&&M&&(($=Q.get(M))!=null&&$.selected||Z()),I&&K&&M&&(e==null||e(M));const _e=Is(F.sourceEvent,{transform:W,snapGrid:te,snapToGrid:U,containerBounds:m});if(s=_e,l=eR(Q,X,_e,M),l.size>0&&(n||ie||!M&&z)){const[J,oe]=qp({nodeId:M,dragItems:l,nodeLookup:Q});n==null||n(F.sourceEvent,l,J,oe),ie==null||ie(F.sourceEvent,J,oe),M||z==null||z(F.sourceEvent,oe)}}const O=Pk().clickDistance(T).on("start",F=>{const{domNode:Q,nodeDragThreshold:V,transform:X,snapGrid:W,snapToGrid:te}=t();m=(Q==null?void 0:Q.getBoundingClientRect())||null,g=!1,x=!1,q=F.sourceEvent,V===0&&D(F),s=Is(F.sourceEvent,{transform:X,snapGrid:W,snapToGrid:te,containerBounds:m}),p=Nn(F.sourceEvent,m)}).on("drag",F=>{const{autoPanOnNodeDrag:Q,transform:V,snapGrid:X,snapToGrid:W,nodeDragThreshold:te,nodeLookup:U}=t(),K=Is(F.sourceEvent,{transform:V,snapGrid:X,snapToGrid:W,containerBounds:m});if(q=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||M&&!U.has(M))&&(g=!0),!g){if(!d&&Q&&f&&(d=!0,P()),!f){const ie=Nn(F.sourceEvent,m),z=ie.x-p.x,Z=ie.y-p.y;Math.sqrt(z*z+Z*Z)>te&&D(F)}(s.x!==K.xSnapped||s.y!==K.ySnapped)&&l&&f&&(p=Nn(F.sourceEvent,m),j(K))}}).on("end",F=>{if(!(!f||g)&&(d=!1,f=!1,cancelAnimationFrame(u),l.size>0)){const{nodeLookup:Q,updateNodePositions:V,onNodeDragStop:X,onSelectionDragStop:W}=t();if(x&&(V(l,!1),x=!1),a||X||!M&&W){const[te,U]=qp({nodeId:M,dragItems:l,nodeLookup:Q,dragging:!1});a==null||a(F.sourceEvent,l,te,U),X==null||X(F.sourceEvent,te,U),M||W==null||W(F.sourceEvent,U)}}}).filter(F=>{const Q=F.target;return!F.button&&(!C||!w1(Q,`.${C}`,E))&&(!S||w1(Q,S,E))});h.call(O)}function b(){h==null||h.on(".drag",null)}return{update:w,destroy:b}}function nR(e,t,n){const i=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Bs(a,ka(s))>0&&i.push(s);return i}const iR=250;function oR(e,t,n,i){var l,d;let a=[],s=1/0;const u=nR(e,n,t+iR);for(const p of u){const m=[...((l=p.internals.handleBounds)==null?void 0:l.source)??[],...((d=p.internals.handleBounds)==null?void 0:d.target)??[]];for(const f of m){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:h,y:g}=Ro(p,f,f.position,!0),x=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));x>t||(x<s?(a=[{...f,x:h,y:g}],s=x):x===s&&a.push({...f,x:h,y:g}))}}if(!a.length)return null;if(a.length>1){const p=i.type==="source"?"target":"source";return a.find(m=>m.type===p)??a[0]}return a[0]}function mM(e,t,n,i,a,s=!1){var p,m,f;const u=i.get(e);if(!u)return null;const l=a==="strict"?(p=u.internals.handleBounds)==null?void 0:p[t]:[...((m=u.internals.handleBounds)==null?void 0:m.source)??[],...((f=u.internals.handleBounds)==null?void 0:f.target)??[]],d=(n?l==null?void 0:l.find(h=>h.id===n):l==null?void 0:l[0])??null;return d&&s?{...d,...Ro(u,d,d.position,!0)}:d}function hM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function aR(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const yM=()=>!0;function sR(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:l,nodeLookup:d,lib:p,autoPanOnConnect:m,flowId:f,panBy:h,cancelConnection:g,onConnectStart:x,onConnect:q,onConnectEnd:w,isValidConnection:b=yM,onReconnectEnd:C,updateConnection:S,getTransform:E,getFromHandle:I,autoPanSpeed:M,dragThreshold:T=1,handleDomNode:j}){const P=aM(e.target);let D=0,O;const{x:F,y:Q}=Nn(e),V=hM(s,j),X=l==null?void 0:l.getBoundingClientRect();let W=!1;if(!X||!V)return;const te=mM(a,V,i,d,t);if(!te)return;let U=Nn(e,X),K=!1,ie=null,z=!1,Z=null;function _e(){if(!m||!X)return;const[Ne,Ie]=rM(U,X,M);h({x:Ne,y:Ie}),D=requestAnimationFrame(_e)}const $={...te,nodeId:a,type:V,position:te.position},J=d.get(a);let se={inProgress:!0,isValid:null,from:Ro(J,$,$e.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:J,to:U,toHandle:null,toPosition:l1[$.position],toNode:null,pointer:U};function ae(){W=!0,S(se),x==null||x(e,{nodeId:a,handleId:i,handleType:V})}T===0&&ae();function he(Ne){if(!W){const{x:De,y:ot}=Nn(Ne),rt=De-F,ft=ot-Q;if(!(rt*rt+ft*ft>T*T))return;ae()}if(!I()||!$){Se(Ne);return}const Ie=E();U=Nn(Ne,X),O=oR(tu(U,Ie,!1,[1,1]),n,d,$),K||(_e(),K=!0);const Te=gM(Ne,{handle:O,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:u?"target":"source",isValidConnection:b,doc:P,lib:p,flowId:f,nodeLookup:d});Z=Te.handleDomNode,ie=Te.connection,z=aR(!!O,Te.isValid);const je=d.get(a),Ve=je?Ro(je,$,$e.Left,!0):se.from,He={...se,from:Ve,isValid:z,to:Te.toHandle&&z?Ul({x:Te.toHandle.x,y:Te.toHandle.y},Ie):U,toHandle:Te.toHandle,toPosition:z&&Te.toHandle?Te.toHandle.position:l1[$.position],toNode:Te.toHandle?d.get(Te.toHandle.nodeId):null,pointer:U};S(He),se=He}function Se(Ne){if(!("touches"in Ne&&Ne.touches.length>0)){if(W){(O||Z)&&ie&&z&&(q==null||q(ie));const{inProgress:Ie,...Te}=se,je={...Te,toPosition:se.toHandle?se.toPosition:null};w==null||w(Ne,je),s&&(C==null||C(Ne,je))}g(),cancelAnimationFrame(D),K=!1,z=!1,ie=null,Z=null,P.removeEventListener("mousemove",he),P.removeEventListener("mouseup",Se),P.removeEventListener("touchmove",he),P.removeEventListener("touchend",Se)}}P.addEventListener("mousemove",he),P.addEventListener("mouseup",Se),P.addEventListener("touchmove",he),P.addEventListener("touchend",Se)}function gM(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:a,fromType:s,doc:u,lib:l,flowId:d,isValidConnection:p=yM,nodeLookup:m}){const f=s==="target",h=t?u.querySelector(`.${l}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:x}=Nn(e),q=u.elementFromPoint(g,x),w=q!=null&&q.classList.contains(`${l}-flow__handle`)?q:h,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const C=hM(void 0,w),S=w.getAttribute("data-nodeid"),E=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!S||!C)return b;const T={source:f?S:i,sourceHandle:f?E:a,target:f?i:S,targetHandle:f?a:E};b.connection=T;const P=I&&M&&(n===Sa.Strict?f&&C==="source"||!f&&C==="target":S!==i||E!==a);b.isValid=P&&p(T),b.toHandle=mM(S,C,E,m,n,!0)}return b}const b0={onPointerDown:sR,isValid:gM};function uR({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const a=Wr(e);function s({translateExtent:l,width:d,height:p,zoomStep:m=1,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const x=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const E=n(),I=S.sourceEvent.ctrlKey&&zs()?10:1,M=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*m,T=E[2]*Math.pow(2,M*I);t.scaleTo(T)};let q=[0,0];const w=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(q=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},b=S=>{const E=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const I=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],M=[I[0]-q[0],I[1]-q[1]];q=I;const T=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),j={x:E[0]-M[0]*T,y:E[1]-M[1]*T},P=[[0,0],[d,p]];t.setViewportConstrained({x:j.x,y:j.y,zoom:E[2]},P,l)},C=Kk().on("start",w).on("zoom",f?b:null).on("zoom.wheel",h?x:null);a.call(C,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:kn}}const _c=e=>({x:e.x,y:e.y,zoom:e.k}),Sp=({x:e,y:t,zoom:n})=>dc.translate(e,t).scale(n),ya=(e,t)=>e.target.closest(`.${t}`),vM=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),lR=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Cp=(e,t=0,n=lR,i=()=>{})=>{const a=typeof t=="number"&&t>0;return a||i(),a?e.transition().duration(t).ease(n).on("end",i):e},xM=e=>{const t=e.ctrlKey&&zs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function cR({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:d,onPanZoomEnd:p}){return m=>{if(ya(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(m.ctrlKey&&u){const w=kn(m),b=xM(m),C=f*Math.pow(2,b);i.scaleTo(n,C,w,m);return}const h=m.deltaMode===1?20:1;let g=a===To.Vertical?0:m.deltaX*h,x=a===To.Horizontal?0:m.deltaY*h;!zs()&&m.shiftKey&&a!==To.Vertical&&(g=m.deltaY*h,x=0),i.translateBy(n,-(g/f)*s,-(x/f)*s,{internal:!0});const q=_c(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(m,q),e.panScrollTimeout=setTimeout(()=>{p==null||p(m,q),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(m,q))}}function dR({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,a){const s=i.type==="wheel",u=!t&&s&&!i.ctrlKey,l=ya(i,e);if(i.ctrlKey&&s&&l&&i.preventDefault(),u||l)return null;i.preventDefault(),n.call(this,i,a)}}function pR({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,u,l;if((s=i.sourceEvent)!=null&&s.internal)return;const a=_c(i.transform);e.mouseButton=((u=i.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,a))}}function fR({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:a}){return s=>{var u,l;e.usedRightMouseButton=!!(n&&vM(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||i([s.transform.x,s.transform.y,s.transform.k]),a&&!((l=s.sourceEvent)!=null&&l.internal)&&(a==null||a(s.sourceEvent,_c(s.transform)))}}function _R({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var l;if(!((l=u.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&vM(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,i(!1),a)){const d=_c(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,d)},n?150:0)}}}function mR({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:l,noPanClassName:d,lib:p,connectionInProgress:m}){return f=>{var w;const h=e||t,g=n&&f.ctrlKey,x=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(ya(f,`${p}-flow__node`)||ya(f,`${p}-flow__edge`)))return!0;if(!i&&!h&&!a&&!s&&!n||u||m&&!x||ya(f,l)&&x||ya(f,d)&&(!x||a&&x&&!e)||!n&&f.ctrlKey&&x)return!1;if(!n&&f.type==="touchstart"&&((w=f.touches)==null?void 0:w.length)>1)return f.preventDefault(),!1;if(!h&&!a&&!g&&x||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const q=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||x)&&q}}function hR({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),f=Kk().scaleExtent([t,n]).translateExtent(i),h=Wr(e).call(f);C({x:a.x,y:a.y,zoom:Ca(a.zoom,t,n)},[[0,0],[m.width,m.height]],i);const g=h.on("wheel.zoom"),x=h.on("dblclick.zoom");f.wheelDelta(xM);function q(O,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).transform(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),O)}):Promise.resolve(!1)}function w({noWheelClassName:O,noPanClassName:F,onPaneContextMenu:Q,userSelectionActive:V,panOnScroll:X,panOnDrag:W,panOnScrollMode:te,panOnScrollSpeed:U,preventScrolling:K,zoomOnPinch:ie,zoomOnScroll:z,zoomOnDoubleClick:Z,zoomActivationKeyPressed:_e,lib:$,onTransformChange:J,connectionInProgress:oe,paneClickDistance:se,selectionOnDrag:ae}){V&&!p.isZoomingOrPanning&&b();const he=X&&!_e&&!V;f.clickDistance(ae?1/0:!Tn(se)||se<0?0:se);const Se=he?cR({zoomPanValues:p,noWheelClassName:O,d3Selection:h,d3Zoom:f,panOnScrollMode:te,panOnScrollSpeed:U,zoomOnPinch:ie,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):dR({noWheelClassName:O,preventScrolling:K,d3ZoomHandler:g});if(h.on("wheel.zoom",Se,{passive:!1}),!V){const Ie=pR({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:u});f.on("start",Ie);const Te=fR({zoomPanValues:p,panOnDrag:W,onPaneContextMenu:!!Q,onPanZoom:s,onTransformChange:J});f.on("zoom",Te);const je=_R({zoomPanValues:p,panOnDrag:W,panOnScroll:X,onPaneContextMenu:Q,onPanZoomEnd:l,onDraggingChange:d});f.on("end",je)}const Ne=mR({zoomActivationKeyPressed:_e,panOnDrag:W,zoomOnScroll:z,panOnScroll:X,zoomOnDoubleClick:Z,zoomOnPinch:ie,userSelectionActive:V,noPanClassName:F,noWheelClassName:O,lib:$,connectionInProgress:oe});f.filter(Ne),Z?h.on("dblclick.zoom",x):h.on("dblclick.zoom",null)}function b(){f.on("zoom",null)}async function C(O,F,Q){const V=Sp(O),X=f==null?void 0:f.constrain()(V,F,Q);return X&&await q(X),new Promise(W=>W(X))}async function S(O,F){const Q=Sp(O);return await q(Q,F),new Promise(V=>V(Q))}function E(O){if(h){const F=Sp(O),Q=h.property("__zoom");(Q.k!==O.zoom||Q.x!==O.x||Q.y!==O.y)&&(f==null||f.transform(h,F,null,{sync:!0}))}}function I(){const O=h?Gk(h.node()):{x:0,y:0,k:1};return{x:O.x,y:O.y,zoom:O.k}}function M(O,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).scaleTo(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),O)}):Promise.resolve(!1)}function T(O,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).scaleBy(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),O)}):Promise.resolve(!1)}function j(O){f==null||f.scaleExtent(O)}function P(O){f==null||f.translateExtent(O)}function D(O){const F=!Tn(O)||O<0?0:O;f==null||f.clickDistance(F)}return{update:w,destroy:b,setViewport:S,setViewportConstrained:C,getViewport:I,scaleTo:M,scaleBy:T,setScaleExtent:j,setTranslateExtent:P,syncViewport:E,setClickDistance:D}}var Ea;(function(e){e.Line="line",e.Handle="handle"})(Ea||(Ea={}));function yR({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:a,affectsY:s}){const u=e-t,l=n-i,d=[u>0?1:u<0?-1:0,l>0?1:l<0?-1:0];return u&&a&&(d[0]=d[0]*-1),l&&s&&(d[1]=d[1]*-1),d}function b1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:a}}function $i(e,t){return Math.max(0,t-e)}function Hi(e,t){return Math.max(0,e-t)}function vl(e,t,n){return Math.max(0,t-e,e-n)}function q1(e,t){return e?!t:t}function gR(e,t,n,i,a,s,u,l){let{affectsX:d,affectsY:p}=t;const{isHorizontal:m,isVertical:f}=t,h=m&&f,{xSnapped:g,ySnapped:x}=n,{minWidth:q,maxWidth:w,minHeight:b,maxHeight:C}=i,{x:S,y:E,width:I,height:M,aspectRatio:T}=e;let j=Math.floor(m?g-e.pointerX:0),P=Math.floor(f?x-e.pointerY:0);const D=I+(d?-j:j),O=M+(p?-P:P),F=-s[0]*I,Q=-s[1]*M;let V=vl(D,q,w),X=vl(O,b,C);if(u){let U=0,K=0;d&&j<0?U=$i(S+j+F,u[0][0]):!d&&j>0&&(U=Hi(S+D+F,u[1][0])),p&&P<0?K=$i(E+P+Q,u[0][1]):!p&&P>0&&(K=Hi(E+O+Q,u[1][1])),V=Math.max(V,U),X=Math.max(X,K)}if(l){let U=0,K=0;d&&j>0?U=Hi(S+j,l[0][0]):!d&&j<0&&(U=$i(S+D,l[1][0])),p&&P>0?K=Hi(E+P,l[0][1]):!p&&P<0&&(K=$i(E+O,l[1][1])),V=Math.max(V,U),X=Math.max(X,K)}if(a){if(m){const U=vl(D/T,b,C)*T;if(V=Math.max(V,U),u){let K=0;!d&&!p||d&&!p&&h?K=Hi(E+Q+D/T,u[1][1])*T:K=$i(E+Q+(d?j:-j)/T,u[0][1])*T,V=Math.max(V,K)}if(l){let K=0;!d&&!p||d&&!p&&h?K=$i(E+D/T,l[1][1])*T:K=Hi(E+(d?j:-j)/T,l[0][1])*T,V=Math.max(V,K)}}if(f){const U=vl(O*T,q,w)/T;if(X=Math.max(X,U),u){let K=0;!d&&!p||p&&!d&&h?K=Hi(S+O*T+F,u[1][0])/T:K=$i(S+(p?P:-P)*T+F,u[0][0])/T,X=Math.max(X,K)}if(l){let K=0;!d&&!p||p&&!d&&h?K=$i(S+O*T,l[1][0])/T:K=Hi(S+(p?P:-P)*T,l[0][0])/T,X=Math.max(X,K)}}}P=P+(P<0?X:-X),j=j+(j<0?V:-V),a&&(h?D>O*T?P=(q1(d,p)?-j:j)/T:j=(q1(d,p)?-P:P)*T:m?(P=j/T,p=d):(j=P*T,d=p));const W=d?S+j:S,te=p?E+P:E;return{width:I+(d?-j:j),height:M+(p?-P:P),x:s[0]*j*(d?-1:1)+W,y:s[1]*P*(p?-1:1)+te}}const wM={width:0,height:0,x:0,y:0},vR={...wM,pointerX:0,pointerY:0,aspectRatio:1};function xR(e){return[[0,0],[e.measured.width,e.measured.height]]}function wR(e,t,n){const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,l=n[0]*s,d=n[1]*u;return[[i-l,a-d],[i+s-l,a+u-d]]}function bR({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:a}){const s=Wr(e);let u={controlDirection:b1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:p,boundaries:m,keepAspectRatio:f,resizeDirection:h,onResizeStart:g,onResize:x,onResizeEnd:q,shouldResize:w}){let b={...wM},C={...vR};u={boundaries:m,resizeDirection:h,keepAspectRatio:f,controlDirection:b1(p)};let S,E=null,I=[],M,T,j,P=!1;const D=Pk().on("start",O=>{const{nodeLookup:F,transform:Q,snapGrid:V,snapToGrid:X,nodeOrigin:W,paneDomNode:te}=n();if(S=F.get(t),!S)return;E=(te==null?void 0:te.getBoundingClientRect())??null;const{xSnapped:U,ySnapped:K}=Is(O.sourceEvent,{transform:Q,snapGrid:V,snapToGrid:X,containerBounds:E});b={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},C={...b,pointerX:U,pointerY:K,aspectRatio:b.width/b.height},M=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(M=F.get(S.parentId),T=M&&S.extent==="parent"?xR(M):void 0),I=[],j=void 0;for(const[ie,z]of F)if(z.parentId===t&&(I.push({id:ie,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const Z=wR(z,S,z.origin??W);j?j=[[Math.min(Z[0][0],j[0][0]),Math.min(Z[0][1],j[0][1])],[Math.max(Z[1][0],j[1][0]),Math.max(Z[1][1],j[1][1])]]:j=Z}g==null||g(O,{...b})}).on("drag",O=>{const{transform:F,snapGrid:Q,snapToGrid:V,nodeOrigin:X}=n(),W=Is(O.sourceEvent,{transform:F,snapGrid:Q,snapToGrid:V,containerBounds:E}),te=[];if(!S)return;const{x:U,y:K,width:ie,height:z}=b,Z={},_e=S.origin??X,{width:$,height:J,x:oe,y:se}=gR(C,u.controlDirection,W,u.boundaries,u.keepAspectRatio,_e,T,j),ae=$!==ie,he=J!==z,Se=oe!==U&&ae,Ne=se!==K&&he;if(!Se&&!Ne&&!ae&&!he)return;if((Se||Ne||_e[0]===1||_e[1]===1)&&(Z.x=Se?oe:b.x,Z.y=Ne?se:b.y,b.x=Z.x,b.y=Z.y,I.length>0)){const Ve=oe-U,He=se-K;for(const De of I)De.position={x:De.position.x-Ve+_e[0]*($-ie),y:De.position.y-He+_e[1]*(J-z)},te.push(De)}if((ae||he)&&(Z.width=ae&&(!u.resizeDirection||u.resizeDirection==="horizontal")?$:b.width,Z.height=he&&(!u.resizeDirection||u.resizeDirection==="vertical")?J:b.height,b.width=Z.width,b.height=Z.height),M&&S.expandParent){const Ve=_e[0]*(Z.width??0);Z.x&&Z.x<Ve&&(b.x=Ve,C.x=C.x-(Z.x-Ve));const He=_e[1]*(Z.height??0);Z.y&&Z.y<He&&(b.y=He,C.y=C.y-(Z.y-He))}const Ie=yR({width:b.width,prevWidth:ie,height:b.height,prevHeight:z,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Te={...b,direction:Ie};(w==null?void 0:w(O,Te))!==!1&&(P=!0,x==null||x(O,Te),i(Z,te))}).on("end",O=>{P&&(q==null||q(O,{...b}),a==null||a({...b}),P=!1)});s.call(D)}function d(){s.on(".drag",null)}return{update:l,destroy:d}}var kp={exports:{}},Mp={},Ep={exports:{}},Ip={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function qR(){if(S1)return Ip;S1=1;var e=Ys();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function l(f,h){var g=h(),x=i({inst:{value:g,getSnapshot:h}}),q=x[0].inst,w=x[1];return s(function(){q.value=g,q.getSnapshot=h,d(q)&&w({inst:q})},[f,g,h]),a(function(){return d(q)&&w({inst:q}),f(function(){d(q)&&w({inst:q})})},[f]),u(g),g}function d(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!n(f,g)}catch{return!0}}function p(f,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:l;return Ip.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Ip}var C1;function SR(){return C1||(C1=1,Ep.exports=qR()),Ep.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function CR(){if(k1)return Mp;k1=1;var e=Ys(),t=SR();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Mp.useSyncExternalStoreWithSelector=function(p,m,f,h,g){var x=s(null);if(x.current===null){var q={hasValue:!1,value:null};x.current=q}else q=x.current;x=l(function(){function b(M){if(!C){if(C=!0,S=M,M=h(M),g!==void 0&&q.hasValue){var T=q.value;if(g(T,M))return E=T}return E=M}if(T=E,i(S,M))return T;var j=h(M);return g!==void 0&&g(T,j)?(S=M,T):(S=M,E=j)}var C=!1,S,E,I=f===void 0?null:f;return[function(){return b(m())},I===null?void 0:function(){return b(I())}]},[m,f,h,g]);var w=a(p,x[0],x[1]);return u(function(){q.hasValue=!0,q.value=w},[w]),d(w),w},Mp}var M1;function kR(){return M1||(M1=1,kp.exports=CR()),kp.exports}var MR=kR();const ER=Na(MR),IR={},E1=e=>{let t;const n=new Set,i=(m,f)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const g=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,g))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(IR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,d);return d},TR=e=>e?E1(e):E1,{useDebugValue:NR}=yk,{useSyncExternalStoreWithSelector:jR}=ER,PR=e=>e;function bM(e,t=PR,n){const i=jR(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return NR(i),i}const I1=(e,t)=>{const n=TR(e),i=(a,s=t)=>bM(n,a,s);return Object.assign(i,n),i},RR=(e,t)=>e?I1(e,t):I1;function qt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var VR=gk();const OR=Na(VR),mc=A.createContext(null),FR=mc.Provider,qM=Gn.error001();function Je(e,t){const n=A.useContext(mc);if(n===null)throw new Error(qM);return bM(n,e,t)}function St(){const e=A.useContext(mc);if(e===null)throw new Error(qM);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const T1={display:"none"},AR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},SM="react-flow__node-desc",CM="react-flow__edge-desc",LR="react-flow__aria-live",DR=e=>e.ariaLiveMessage,BR=e=>e.ariaLabelConfig;function zR({rfId:e}){const t=Je(DR);return _.jsx("div",{id:`${LR}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:AR,children:t})}function $R({rfId:e,disableKeyboardA11y:t}){const n=Je(BR);return _.jsxs(_.Fragment,{children:[_.jsx("div",{id:`${SM}-${e}`,style:T1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),_.jsx("div",{id:`${CM}-${e}`,style:T1,children:n["edge.a11yDescription.default"]}),!t&&_.jsx(zR,{rfId:e})]})}const Ia=A.forwardRef(({position:e="top-left",children:t,className:n,style:i,...a},s)=>{const u=`${e}`.split("-");return _.jsx("div",{className:Ot(["react-flow__panel",n,...u]),style:i,ref:s,...a,children:t})});Ia.displayName="Panel";function HR({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:_.jsx(Ia,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const WR=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},xl=e=>e.id;function UR(e,t){return qt(e.selectedNodes.map(xl),t.selectedNodes.map(xl))&&qt(e.selectedEdges.map(xl),t.selectedEdges.map(xl))}function GR({onSelectionChange:e}){const t=St(),{selectedNodes:n,selectedEdges:i}=Je(WR,UR);return A.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,i,e]),null}const KR=e=>!!e.onSelectionChangeHandlers;function YR({onSelectionChange:e}){const t=Je(KR);return e||t?_.jsx(GR,{onSelectionChange:e}):null}const kM=[0,0],QR={x:0,y:0,zoom:1},XR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],N1=[...XR,"rfId"],ZR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),j1={translateExtent:Ls,nodeOrigin:kM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function JR(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:l,setDefaultNodesAndEdges:d}=Je(ZR,qt),p=St();A.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=j1,l()}),[]);const m=A.useRef(j1);return A.useEffect(()=>{for(const f of N1){const h=e[f],g=m.current[f];h!==g&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?n(h):f==="minZoom"?i(h):f==="maxZoom"?a(h):f==="translateExtent"?s(h):f==="nodeExtent"?u(h):f==="ariaLabelConfig"?p.setState({ariaLabelConfig:VP(h)}):f==="fitView"?p.setState({fitViewQueued:h}):f==="fitViewOptions"?p.setState({fitViewOptions:h}):p.setState({[f]:h})))}m.current=e},N1.map(f=>e[f])),null}function P1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function e4(e){var i;const[t,n]=A.useState(e==="system"?null:e);return A.useEffect(()=>{if(e!=="system"){n(e);return}const a=P1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(i=P1())!=null&&i.matches?"dark":"light"}const R1=typeof document<"u"?document:null;function $s(e=null,t={target:R1,actInsideInputWithModifier:!0}){const[n,i]=A.useState(!1),a=A.useRef(!1),s=A.useRef(new Set([])),[u,l]=A.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((f,h)=>f.concat(...h),[]);return[p,m]}return[[],[]]},[e]);return A.useEffect(()=>{const d=(t==null?void 0:t.target)??R1,p=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const m=g=>{var w,b;if(a.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!a.current||a.current&&!p)&&sM(g))return!1;const q=O1(g.code,l);if(s.current.add(g[q]),V1(u,s.current,!1)){const C=((b=(w=g.composedPath)==null?void 0:w.call(g))==null?void 0:b[0])||g.target,S=(C==null?void 0:C.nodeName)==="BUTTON"||(C==null?void 0:C.nodeName)==="A";t.preventDefault!==!1&&(a.current||!S)&&g.preventDefault(),i(!0)}},f=g=>{const x=O1(g.code,l);V1(u,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(g[x]),g.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),n}function V1(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function O1(e,t){return t.includes(e)?"code":"key"}const t4=()=>{const e=St();return A.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:a,minZoom:s,maxZoom:u,panZoom:l}=e.getState(),d=J0(t,i,a,s,u,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:d}=u.getBoundingClientRect(),p={x:t.x-l,y:t.y-d},m=n.snapGrid??a,f=n.snapToGrid??s;return tu(p,i,f,m)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),u=Ul(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function MM(e,t){const n=[],i=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const u=i.get(s.id);u?u.push(s):i.set(s.id,[s])}for(const s of t){const u=i.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const l={...s};for(const d of u)r4(d,l);n.push(l)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function r4(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function EM(e,t){return MM(e,t)}function IM(e,t){return MM(e,t)}function Mo(e,t){return{id:e,type:"select",selected:t}}function ga(e,t=new Set,n=!1){const i=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),i.push(Mo(s.id,u)))}return i}function F1({items:e=[],lookup:t}){var a;const n=[],i=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const l=t.get(u.id),d=((a=l==null?void 0:l.internals)==null?void 0:a.userNode)??l;d!==void 0&&d!==u&&n.push({id:u.id,item:u,type:"replace"}),d===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function A1(e){return{id:e.id,type:"remove"}}const L1=e=>CP(e),n4=e=>Jk(e);function TM(e){return A.forwardRef(e)}const i4=typeof window<"u"?A.useLayoutEffect:A.useEffect;function D1(e){const[t,n]=A.useState(BigInt(0)),[i]=A.useState(()=>o4(()=>n(a=>a+BigInt(1))));return i4(()=>{const a=i.get();a.length&&(e(a),i.reset())},[t]),i}function o4(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const NM=A.createContext(null);function a4({children:e}){const t=St(),n=A.useCallback(l=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:m,onNodesChange:f,nodeLookup:h,fitViewQueued:g,onNodesChangeMiddlewareMap:x}=t.getState();let q=d;for(const b of l)q=typeof b=="function"?b(q):b;let w=F1({items:q,lookup:h});for(const b of x.values())w=b(w);m&&p(q),w.length>0?f==null||f(w):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:C,setNodes:S}=t.getState();b&&S(C)})},[]),i=D1(n),a=A.useCallback(l=>{const{edges:d=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:f,edgeLookup:h}=t.getState();let g=d;for(const x of l)g=typeof x=="function"?x(g):x;m?p(g):f&&f(F1({items:g,lookup:h}))},[]),s=D1(a),u=A.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return _.jsx(NM.Provider,{value:u,children:e})}function s4(){const e=A.useContext(NM);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const u4=e=>!!e.panZoom;function ug(){const e=t4(),t=St(),n=s4(),i=Je(u4),a=A.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),u=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},d=f=>{var b,C;const{nodeLookup:h,nodeOrigin:g}=t.getState(),x=L1(f)?f:h.get(f.id),q=x.parentId?oM(x.position,x.measured,x.parentId,h,g):x.position,w={...x,position:q,width:((b=x.measured)==null?void 0:b.width)??x.width,height:((C=x.measured)==null?void 0:C.height)??x.height};return ka(w)},p=(f,h,g={replace:!1})=>{u(x=>x.map(q=>{if(q.id===f){const w=typeof h=="function"?h(q):h;return g.replace&&L1(w)?w:{...q,...w}}return q}))},m=(f,h,g={replace:!1})=>{l(x=>x.map(q=>{if(q.id===f){const w=typeof h=="function"?h(q):h;return g.replace&&n4(w)?w:{...q,...w}}return q}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var h;return(h=s(f))==null?void 0:h.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(h=>({...h}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:u,setEdges:l,addNodes:f=>{const h=Array.isArray(f)?f:[f];n.nodeQueue.push(g=>[...g,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];n.edgeQueue.push(g=>[...g,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:g}=t.getState(),[x,q,w]=g;return{nodes:f.map(b=>({...b})),edges:h.map(b=>({...b})),viewport:{x,y:q,zoom:w}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:g,edges:x,onNodesDelete:q,onEdgesDelete:w,triggerNodeChanges:b,triggerEdgeChanges:C,onDelete:S,onBeforeDelete:E}=t.getState(),{nodes:I,edges:M}=await TP({nodesToRemove:f,edgesToRemove:h,nodes:g,edges:x,onBeforeDelete:E}),T=M.length>0,j=I.length>0;if(T){const P=M.map(A1);w==null||w(M),C(P)}if(j){const P=I.map(A1);q==null||q(I),b(P)}return(j||T)&&(S==null||S({nodes:I,edges:M})),{deletedNodes:I,deletedEdges:M}},getIntersectingNodes:(f,h=!0,g)=>{const x=d1(f),q=x?f:d(f),w=g!==void 0;return q?(g||t.getState().nodes).filter(b=>{const C=t.getState().nodeLookup.get(b.id);if(C&&!x&&(b.id===f.id||!C.internals.positionAbsolute))return!1;const S=ka(w?b:C),E=Bs(S,q);return h&&E>0||E>=S.width*S.height||E>=q.width*q.height}):[]},isNodeIntersecting:(f,h,g=!0)=>{const q=d1(f)?f:d(f);if(!q)return!1;const w=Bs(q,h);return g&&w>0||w>=h.width*h.height||w>=q.width*q.height},updateNode:p,updateNodeData:(f,h,g={replace:!1})=>{p(f,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},updateEdge:m,updateEdgeData:(f,h,g={replace:!1})=>{m(f,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:g}=t.getState();return kP(f,{nodeLookup:h,nodeOrigin:g})},getHandleConnections:({type:f,id:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}-${f}${h?`-${h}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:f,handleId:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}${f?h?`-${f}-${h}`:`-${f}`:""}`))==null?void 0:x.values())??[])},fitView:async f=>{const h=t.getState().fitViewResolver??RP();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),n.nodeQueue.push(g=>[...g]),h.promise}}},[]);return A.useMemo(()=>({...a,...e,viewportInitialized:i}),[i])}const B1=e=>e.selected,l4=typeof window<"u"?window:void 0;function c4({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=St(),{deleteElements:i}=ug(),a=$s(e,{actInsideInputWithModifier:!1}),s=$s(t,{target:l4});A.useEffect(()=>{if(a){const{edges:u,nodes:l}=n.getState();i({nodes:l.filter(B1),edges:u.filter(B1)}),n.setState({nodesSelectionActive:!1})}},[a]),A.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function d4(e){const t=St();A.useEffect(()=>{const n=()=>{var a,s,u,l;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const i=eg(e.current);(i.height===0||i.width===0)&&((l=(u=t.getState()).onError)==null||l.call(u,"004",Gn.error004())),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const hc={position:"absolute",width:"100%",height:"100%",top:0,left:0},p4=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function f4({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=To.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:d,translateExtent:p,minZoom:m,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:g=!0,children:x,noWheelClassName:q,noPanClassName:w,onViewportChange:b,isControlledViewport:C,paneClickDistance:S,selectionOnDrag:E}){const I=St(),M=A.useRef(null),{userSelectionActive:T,lib:j,connectionInProgress:P}=Je(p4,qt),D=$s(h),O=A.useRef();d4(M);const F=A.useCallback(Q=>{b==null||b({x:Q[0],y:Q[1],zoom:Q[2]}),C||I.setState({transform:Q})},[b,C]);return A.useEffect(()=>{if(M.current){O.current=hR({domNode:M.current,minZoom:m,maxZoom:f,translateExtent:p,viewport:d,onDraggingChange:W=>I.setState({paneDragging:W}),onPanZoomStart:(W,te)=>{const{onViewportChangeStart:U,onMoveStart:K}=I.getState();K==null||K(W,te),U==null||U(te)},onPanZoom:(W,te)=>{const{onViewportChange:U,onMove:K}=I.getState();K==null||K(W,te),U==null||U(te)},onPanZoomEnd:(W,te)=>{const{onViewportChangeEnd:U,onMoveEnd:K}=I.getState();K==null||K(W,te),U==null||U(te)}});const{x:Q,y:V,zoom:X}=O.current.getViewport();return I.setState({panZoom:O.current,transform:[Q,V,X],domNode:M.current.closest(".react-flow")}),()=>{var W;(W=O.current)==null||W.destroy()}}},[]),A.useEffect(()=>{var Q;(Q=O.current)==null||Q.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:w,userSelectionActive:T,noWheelClassName:q,lib:j,onTransformChange:F,connectionInProgress:P,selectionOnDrag:E,paneClickDistance:S})},[e,t,n,i,a,s,u,l,D,g,w,T,q,j,F,P,E,S]),_.jsx("div",{className:"react-flow__renderer",ref:M,style:hc,children:x})}const _4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function m4(){const{userSelectionActive:e,userSelectionRect:t}=Je(_4,qt);return e&&t?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Tp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},h4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function y4({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ds.Full,panOnDrag:i,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:l,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:g,children:x}){const q=St(),{userSelectionActive:w,elementsSelectable:b,dragging:C,connectionInProgress:S}=Je(h4,qt),E=b&&(e||w),I=A.useRef(null),M=A.useRef(),T=A.useRef(new Set),j=A.useRef(new Set),P=A.useRef(!1),D=U=>{if(P.current||S){P.current=!1;return}d==null||d(U),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},O=U=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){U.preventDefault();return}p==null||p(U)},F=m?U=>m(U):void 0,Q=U=>{P.current&&(U.stopPropagation(),P.current=!1)},V=U=>{var J,oe;const{domNode:K}=q.getState();if(M.current=K==null?void 0:K.getBoundingClientRect(),!M.current)return;const ie=U.target===I.current;if(!ie&&!!U.target.closest(".nokey")||!e||!(s&&ie||t)||U.button!==0||!U.isPrimary)return;(oe=(J=U.target)==null?void 0:J.setPointerCapture)==null||oe.call(J,U.pointerId),P.current=!1;const{x:_e,y:$}=Nn(U.nativeEvent,M.current);q.setState({userSelectionRect:{width:0,height:0,startX:_e,startY:$,x:_e,y:$}}),ie||(U.stopPropagation(),U.preventDefault())},X=U=>{const{userSelectionRect:K,transform:ie,nodeLookup:z,edgeLookup:Z,connectionLookup:_e,triggerNodeChanges:$,triggerEdgeChanges:J,defaultEdgeOptions:oe,resetSelectedElements:se}=q.getState();if(!M.current||!K)return;const{x:ae,y:he}=Nn(U.nativeEvent,M.current),{startX:Se,startY:Ne}=K;if(!P.current){const He=t?0:a;if(Math.hypot(ae-Se,he-Ne)<=He)return;se(),u==null||u(U)}P.current=!0;const Ie={startX:Se,startY:Ne,x:ae<Se?ae:Se,y:he<Ne?he:Ne,width:Math.abs(ae-Se),height:Math.abs(he-Ne)},Te=T.current,je=j.current;T.current=new Set(Z0(z,Ie,ie,n===Ds.Partial,!0).map(He=>He.id)),j.current=new Set;const Ve=(oe==null?void 0:oe.selectable)??!0;for(const He of T.current){const De=_e.get(He);if(De)for(const{edgeId:ot}of De.values()){const rt=Z.get(ot);rt&&(rt.selectable??Ve)&&j.current.add(ot)}}if(!p1(Te,T.current)){const He=ga(z,T.current,!0);$(He)}if(!p1(je,j.current)){const He=ga(Z,j.current);J(He)}q.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},W=U=>{var K,ie;U.button===0&&((ie=(K=U.target)==null?void 0:K.releasePointerCapture)==null||ie.call(K,U.pointerId),!w&&U.target===I.current&&q.getState().userSelectionRect&&(D==null||D(U)),q.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(l==null||l(U),q.setState({nodesSelectionActive:T.current.size>0})))},te=i===!0||Array.isArray(i)&&i.includes(0);return _.jsxs("div",{className:Ot(["react-flow__pane",{draggable:te,dragging:C,selection:e}]),onClick:E?void 0:Tp(D,I),onContextMenu:Tp(O,I),onWheel:Tp(F,I),onPointerEnter:E?void 0:f,onPointerMove:E?X:h,onPointerUp:E?W:void 0,onPointerDownCapture:E?V:void 0,onClickCapture:E?Q:void 0,onPointerLeave:g,ref:I,style:hc,children:[x,_.jsx(m4,{})]})}function q0({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:l,onError:d}=t.getState(),p=l.get(e);if(!p){d==null||d("012",Gn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&u)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function jM({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}){const l=St(),[d,p]=A.useState(!1),m=A.useRef();return A.useEffect(()=>{m.current=rR({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{q0({id:f,store:l,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),A.useEffect(()=>{var f,h;if(t)(f=m.current)==null||f.destroy();else if(e.current)return(h=m.current)==null||h.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var g;(g=m.current)==null||g.destroy()}},[n,i,t,s,e,a]),d}const g4=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function PM(){const e=St();return A.useCallback(n=>{const{nodeExtent:i,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:l,updateNodePositions:d,nodeLookup:p,nodeOrigin:m}=e.getState(),f=new Map,h=g4(u),g=a?s[0]:5,x=a?s[1]:5,q=n.direction.x*g*n.factor,w=n.direction.y*x*n.factor;for(const[,b]of p){if(!h(b))continue;let C={x:b.internals.positionAbsolute.x+q,y:b.internals.positionAbsolute.y+w};a&&(C=eu(C,s));const{position:S,positionAbsolute:E}=eM({nodeId:b.id,nextPosition:C,nodeLookup:p,nodeExtent:i,nodeOrigin:m,onError:l});b.position=S,b.internals.positionAbsolute=E,f.set(b.id,b)}d(f)},[])}const lg=A.createContext(null),v4=lg.Provider;lg.Consumer;const RM=()=>A.useContext(lg),x4=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),w4=(e,t,n)=>i=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=i,{fromHandle:l,toHandle:d,isValid:p}=u,m=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:m,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Sa.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:m&&p}};function b4({type:e="source",position:t=$e.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:l,children:d,className:p,onMouseDown:m,onTouchStart:f,...h},g){var X,W;const x=u||null,q=e==="target",w=St(),b=RM(),{connectOnClick:C,noPanClassName:S,rfId:E}=Je(x4,qt),{connectingFrom:I,connectingTo:M,clickConnecting:T,isPossibleEndHandle:j,connectionInProcess:P,clickConnectionInProcess:D,valid:O}=Je(w4(b,x,e),qt);b||(W=(X=w.getState()).onError)==null||W.call(X,"010",Gn.error010());const F=te=>{const{defaultEdgeOptions:U,onConnect:K,hasDefaultEdges:ie}=w.getState(),z={...U,...te};if(ie){const{edges:Z,setEdges:_e}=w.getState();_e(v0(z,Z))}K==null||K(z),l==null||l(z)},Q=te=>{if(!b)return;const U=uM(te.nativeEvent);if(a&&(U&&te.button===0||!U)){const K=w.getState();b0.onPointerDown(te.nativeEvent,{handleDomNode:te.currentTarget,autoPanOnConnect:K.autoPanOnConnect,connectionMode:K.connectionMode,connectionRadius:K.connectionRadius,domNode:K.domNode,nodeLookup:K.nodeLookup,lib:K.lib,isTarget:q,handleId:x,nodeId:b,flowId:K.rfId,panBy:K.panBy,cancelConnection:K.cancelConnection,onConnectStart:K.onConnectStart,onConnectEnd:K.onConnectEnd,updateConnection:K.updateConnection,onConnect:F,isValidConnection:n||K.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:K.autoPanSpeed,dragThreshold:K.connectionDragThreshold})}U?m==null||m(te):f==null||f(te)},V=te=>{const{onClickConnectStart:U,onClickConnectEnd:K,connectionClickStartHandle:ie,connectionMode:z,isValidConnection:Z,lib:_e,rfId:$,nodeLookup:J,connection:oe}=w.getState();if(!b||!ie&&!a)return;if(!ie){U==null||U(te.nativeEvent,{nodeId:b,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:b,type:e,id:x}});return}const se=aM(te.target),ae=n||Z,{connection:he,isValid:Se}=b0.isValid(te.nativeEvent,{handle:{nodeId:b,id:x,type:e},connectionMode:z,fromNodeId:ie.nodeId,fromHandleId:ie.id||null,fromType:ie.type,isValidConnection:ae,flowId:$,doc:se,lib:_e,nodeLookup:J});Se&&he&&F(he);const Ne=structuredClone(oe);delete Ne.inProgress,Ne.toPosition=Ne.toHandle?Ne.toHandle.position:null,K==null||K(te,Ne),w.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${E}-${b}-${x}-${e}`,className:Ot(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,p,{source:!q,target:q,connectable:i,connectablestart:a,connectableend:s,clickconnecting:T,connectingfrom:I,connectingto:M,valid:O,connectionindicator:i&&(!P||j)&&(P||D?s:a)}]),onMouseDown:Q,onTouchStart:Q,onClick:C?V:void 0,ref:g,...h,children:d})}const Hs=A.memo(TM(b4));function q4({data:e,isConnectable:t,sourcePosition:n=$e.Bottom}){return _.jsxs(_.Fragment,{children:[e==null?void 0:e.label,_.jsx(Hs,{type:"source",position:n,isConnectable:t})]})}function S4({data:e,isConnectable:t,targetPosition:n=$e.Top,sourcePosition:i=$e.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,_.jsx(Hs,{type:"source",position:i,isConnectable:t})]})}function C4(){return null}function k4({data:e,isConnectable:t,targetPosition:n=$e.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Kl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},z1={input:q4,default:S4,output:k4,group:C4};function M4(e){var t,n,i,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((i=e.style)==null?void 0:i.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const E4=e=>{const{width:t,height:n,x:i,y:a}=Js(e.nodeLookup,{filter:s=>!!s.selected});return{width:Tn(t)?t:null,height:Tn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${a}px)`}};function I4({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=St(),{width:a,height:s,transformString:u,userSelectionActive:l}=Je(E4,qt),d=PM(),p=A.useRef(null);if(A.useEffect(()=>{var h;n||(h=p.current)==null||h.focus({preventScroll:!0})},[n]),jM({nodeRef:p}),l||!a||!s)return null;const m=e?h=>{const g=i.getState().nodes.filter(x=>x.selected);e(h,g)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(Kl,h.key)&&(h.preventDefault(),d({direction:Kl[h.key],factor:h.shiftKey?4:1}))};return _.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:_.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:a,height:s}})})}const $1=typeof window<"u"?window:void 0,T4=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function VM({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:m,selectionMode:f,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:q,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:E,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:j,defaultViewport:P,translateExtent:D,minZoom:O,maxZoom:F,preventScrolling:Q,onSelectionContextMenu:V,noWheelClassName:X,noPanClassName:W,disableKeyboardA11y:te,onViewportChange:U,isControlledViewport:K}){const{nodesSelectionActive:ie,userSelectionActive:z}=Je(T4,qt),Z=$s(p,{target:$1}),_e=$s(q,{target:$1}),$=_e||j,J=_e||E,oe=m&&$!==!0,se=Z||z||oe;return c4({deleteKeyCode:d,multiSelectionKeyCode:x}),_.jsx(f4,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:J,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:!Z&&$,defaultViewport:P,translateExtent:D,minZoom:O,maxZoom:F,zoomActivationKeyCode:w,preventScrolling:Q,noWheelClassName:X,noPanClassName:W,onViewportChange:U,isControlledViewport:K,paneClickDistance:l,selectionOnDrag:oe,children:_.jsxs(y4,{onSelectionStart:h,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:$,isSelecting:!!se,selectionMode:f,selectionKeyPressed:Z,paneClickDistance:l,selectionOnDrag:oe,children:[e,ie&&_.jsx(I4,{onSelectionContextMenu:V,noPanClassName:W,disableKeyboardA11y:te})]})})}VM.displayName="FlowRenderer";const N4=A.memo(VM),j4=e=>t=>e?Z0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function P4(e){return Je(A.useCallback(j4(e),[e]),qt)}const R4=e=>e.updateNodeInternals;function V4(){const e=Je(R4),[t]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:a.target,force:!0})}),e(i)}));return A.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function O4({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const a=St(),s=A.useRef(null),u=A.useRef(null),l=A.useRef(e.sourcePosition),d=A.useRef(e.targetPosition),p=A.useRef(t),m=n&&!!e.internals.handleBounds;return A.useEffect(()=>{s.current&&!e.hidden&&(!m||u.current!==s.current)&&(u.current&&(i==null||i.unobserve(u.current)),i==null||i.observe(s.current),u.current=s.current)},[m,e.hidden]),A.useEffect(()=>()=>{u.current&&(i==null||i.unobserve(u.current),u.current=null)},[]),A.useEffect(()=>{if(s.current){const f=p.current!==t,h=l.current!==e.sourcePosition,g=d.current!==e.targetPosition;(f||h||g)&&(p.current=t,l.current=e.sourcePosition,d.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function F4({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:l,elementsSelectable:d,nodesConnectable:p,nodesFocusable:m,resizeObserver:f,noDragClassName:h,noPanClassName:g,disableKeyboardA11y:x,rfId:q,nodeTypes:w,nodeClickDistance:b,onError:C}){const{node:S,internals:E,isParent:I}=Je(ae=>{const he=ae.nodeLookup.get(e),Se=ae.parentLookup.has(e);return{node:he,internals:he.internals,isParent:Se}},qt);let M=S.type||"default",T=(w==null?void 0:w[M])||z1[M];T===void 0&&(C==null||C("003",Gn.error003(M)),M="default",T=(w==null?void 0:w.default)||z1.default);const j=!!(S.draggable||l&&typeof S.draggable>"u"),P=!!(S.selectable||d&&typeof S.selectable>"u"),D=!!(S.connectable||p&&typeof S.connectable>"u"),O=!!(S.focusable||m&&typeof S.focusable>"u"),F=St(),Q=iM(S),V=O4({node:S,nodeType:M,hasDimensions:Q,resizeObserver:f}),X=jM({nodeRef:V,disabled:S.hidden||!j,noDragClassName:h,handleSelector:S.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:b}),W=PM();if(S.hidden)return null;const te=gi(S),U=M4(S),K=P||j||t||n||i||a,ie=n?ae=>n(ae,{...E.userNode}):void 0,z=i?ae=>i(ae,{...E.userNode}):void 0,Z=a?ae=>a(ae,{...E.userNode}):void 0,_e=s?ae=>s(ae,{...E.userNode}):void 0,$=u?ae=>u(ae,{...E.userNode}):void 0,J=ae=>{const{selectNodesOnDrag:he,nodeDragThreshold:Se}=F.getState();P&&(!he||!j||Se>0)&&q0({id:e,store:F,nodeRef:V}),t&&t(ae,{...E.userNode})},oe=ae=>{if(!(sM(ae.nativeEvent)||x)){if(Yk.includes(ae.key)&&P){const he=ae.key==="Escape";q0({id:e,store:F,unselect:he,nodeRef:V})}else if(j&&S.selected&&Object.prototype.hasOwnProperty.call(Kl,ae.key)){ae.preventDefault();const{ariaLabelConfig:he}=F.getState();F.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~E.positionAbsolute.x,y:~~E.positionAbsolute.y})}),W({direction:Kl[ae.key],factor:ae.shiftKey?4:1})}}},se=()=>{var je;if(x||!((je=V.current)!=null&&je.matches(":focus-visible")))return;const{transform:ae,width:he,height:Se,autoPanOnNodeFocus:Ne,setCenter:Ie}=F.getState();if(!Ne)return;Z0(new Map([[e,S]]),{x:0,y:0,width:he,height:Se},ae,!0).length>0||Ie(S.position.x+te.width/2,S.position.y+te.height/2,{zoom:ae[2]})};return _.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${M}`,{[g]:j},S.className,{selected:S.selected,selectable:P,parent:I,draggable:j,dragging:X}]),ref:V,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:Q?"visible":"hidden",...S.style,...U},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:ie,onMouseMove:z,onMouseLeave:Z,onContextMenu:_e,onClick:J,onDoubleClick:$,onKeyDown:O?oe:void 0,tabIndex:O?0:void 0,onFocus:O?se:void 0,role:S.ariaRole??(O?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${SM}-${q}`,"aria-label":S.ariaLabel,...S.domAttributes,children:_.jsx(v4,{value:e,children:_.jsx(T,{id:e,data:S.data,type:M,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:S.selected??!1,selectable:P,draggable:j,deletable:S.deletable??!0,isConnectable:D,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:X,dragHandle:S.dragHandle,zIndex:E.z,parentId:S.parentId,...te})})})}var A4=A.memo(F4);const L4=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function OM(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=Je(L4,qt),u=P4(e.onlyRenderVisibleElements),l=V4();return _.jsx("div",{className:"react-flow__nodes",style:hc,children:u.map(d=>_.jsx(A4,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},d))})}OM.displayName="NodeRenderer";const D4=A.memo(OM);function B4(e){return Je(A.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const i=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&AP({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&i.push(a.id)}return i},[e]),qt)}const z4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return _.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},$4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return _.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},H1={[Hl.Arrow]:z4,[Hl.ArrowClosed]:$4};function H4(e){const t=St();return A.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(H1,e)?H1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Gn.error009(e)),null)},[e])}const W4=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=H4(t);return d?_.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:_.jsx(d,{color:n,strokeWidth:u})}):null},FM=({defaultColor:e,rfId:t})=>{const n=Je(s=>s.edges),i=Je(s=>s.defaultEdgeOptions),a=A.useMemo(()=>WP(n,{id:t,defaultColor:e,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[n,i,t,e]);return a.length?_.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:_.jsx("defs",{children:a.map(s=>_.jsx(W4,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};FM.displayName="MarkerDefinitions";var U4=A.memo(FM);function AM({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:p,...m}){const[f,h]=A.useState({x:1,y:0,width:0,height:0}),g=Ot(["react-flow__edge-textwrapper",p]),x=A.useRef(null);return A.useEffect(()=>{if(x.current){const q=x.current.getBBox();h({x:q.x,y:q.y,width:q.width,height:q.height})}},[n]),n?_.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...m,children:[a&&_.jsx("rect",{width:f.width+2*u[0],x:-u[0],y:-u[1],height:f.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),_.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:i,children:n}),d]}):null}AM.displayName="EdgeText";const G4=A.memo(AM);function yc({path:e,labelX:t,labelY:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,interactionWidth:p=20,...m}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...m,d:e,fill:"none",className:Ot(["react-flow__edge-path",m.className])}),p?_.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,i&&Tn(t)&&Tn(n)?_.jsx(G4,{x:t,y:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d}):null]})}function W1({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===$e.Left||e===$e.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function LM({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top}){const[u,l]=W1({pos:n,x1:e,y1:t,x2:i,y2:a}),[d,p]=W1({pos:s,x1:i,y1:a,x2:e,y2:t}),[m,f,h,g]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:p});return[`M${e},${t} C${u},${l} ${d},${p} ${i},${a}`,m,f,h,g]}function DM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})=>{const[C,S,E]=LM({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l}),I=e.isInternal?void 0:t;return _.jsx(yc,{id:I,path:C,labelX:S,labelY:E,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})})}const K4=DM({isInternal:!1}),BM=DM({isInternal:!0});K4.displayName="SimpleBezierEdge";BM.displayName="SimpleBezierEdgeInternal";function zM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,sourcePosition:g=$e.Bottom,targetPosition:x=$e.Top,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,E,I]=Gl({sourceX:n,sourceY:i,sourcePosition:g,targetX:a,targetY:s,targetPosition:x,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),M=e.isInternal?void 0:t;return _.jsx(yc,{id:M,path:S,labelX:E,labelY:I,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:q,markerStart:w,interactionWidth:C})})}const $M=zM({isInternal:!1}),HM=zM({isInternal:!0});$M.displayName="SmoothStepEdge";HM.displayName="SmoothStepEdgeInternal";function WM(e){return A.memo(({id:t,...n})=>{var a;const i=e.isInternal?void 0:t;return _.jsx($M,{...n,id:i,pathOptions:A.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const Y4=WM({isInternal:!1}),UM=WM({isInternal:!0});Y4.displayName="StepEdge";UM.displayName="StepEdgeInternal";function GM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:x,interactionWidth:q})=>{const[w,b,C]=rg({sourceX:n,sourceY:i,targetX:a,targetY:s}),S=e.isInternal?void 0:t;return _.jsx(yc,{id:S,path:w,labelX:b,labelY:C,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:x,interactionWidth:q})})}const Q4=GM({isInternal:!1}),KM=GM({isInternal:!0});Q4.displayName="StraightEdge";KM.displayName="StraightEdgeInternal";function YM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u=$e.Bottom,targetPosition:l=$e.Top,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,E,I]=tg({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l,curvature:b==null?void 0:b.curvature}),M=e.isInternal?void 0:t;return _.jsx(yc,{id:M,path:S,labelX:E,labelY:I,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:C})})}const X4=YM({isInternal:!1}),QM=YM({isInternal:!0});X4.displayName="BezierEdge";QM.displayName="BezierEdgeInternal";const U1={default:QM,straight:KM,step:UM,smoothstep:HM,simplebezier:BM},G1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Z4=(e,t,n)=>n===$e.Left?e-t:n===$e.Right?e+t:e,J4=(e,t,n)=>n===$e.Top?e-t:n===$e.Bottom?e+t:e,K1="react-flow__edgeupdater";function Y1({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:l}){return _.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Ot([K1,`${K1}-${l}`]),cx:Z4(t,i,e),cy:J4(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function e6({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:a,targetX:s,targetY:u,sourcePosition:l,targetPosition:d,onReconnect:p,onReconnectStart:m,onReconnectEnd:f,setReconnecting:h,setUpdateHover:g}){const x=St(),q=(E,I)=>{if(E.button!==0)return;const{autoPanOnConnect:M,domNode:T,isValidConnection:j,connectionMode:P,connectionRadius:D,lib:O,onConnectStart:F,onConnectEnd:Q,cancelConnection:V,nodeLookup:X,rfId:W,panBy:te,updateConnection:U}=x.getState(),K=I.type==="target",ie=(_e,$)=>{h(!1),f==null||f(_e,n,I.type,$)},z=_e=>p==null?void 0:p(n,_e),Z=(_e,$)=>{h(!0),m==null||m(E,n,I.type),F==null||F(_e,$)};b0.onPointerDown(E.nativeEvent,{autoPanOnConnect:M,connectionMode:P,connectionRadius:D,domNode:T,handleId:I.id,nodeId:I.nodeId,nodeLookup:X,isTarget:K,edgeUpdaterType:I.type,lib:O,flowId:W,cancelConnection:V,panBy:te,isValidConnection:j,onConnect:z,onConnectStart:Z,onConnectEnd:Q,onReconnectEnd:ie,updateConnection:U,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:E.currentTarget})},w=E=>q(E,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=E=>q(E,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>g(!0),S=()=>g(!1);return _.jsxs(_.Fragment,{children:[(e===!0||e==="source")&&_.jsx(Y1,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:w,onMouseEnter:C,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&_.jsx(Y1,{position:d,centerX:s,centerY:u,radius:t,onMouseDown:b,onMouseEnter:C,onMouseOut:S,type:"target"})]})}function t6({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,reconnectRadius:m,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,rfId:x,edgeTypes:q,noPanClassName:w,onError:b,disableKeyboardA11y:C}){let S=Je(Ie=>Ie.edgeLookup.get(e));const E=Je(Ie=>Ie.defaultEdgeOptions);S=E?{...E,...S}:S;let I=S.type||"default",M=(q==null?void 0:q[I])||U1[I];M===void 0&&(b==null||b("011",Gn.error011(I)),I="default",M=(q==null?void 0:q.default)||U1.default);const T=!!(S.focusable||t&&typeof S.focusable>"u"),j=typeof f<"u"&&(S.reconnectable||n&&typeof S.reconnectable>"u"),P=!!(S.selectable||i&&typeof S.selectable>"u"),D=A.useRef(null),[O,F]=A.useState(!1),[Q,V]=A.useState(!1),X=St(),{zIndex:W,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z}=Je(A.useCallback(Ie=>{const Te=Ie.nodeLookup.get(S.source),je=Ie.nodeLookup.get(S.target);if(!Te||!je)return{zIndex:S.zIndex,...G1};const Ve=HP({id:e,sourceNode:Te,targetNode:je,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:Ie.connectionMode,onError:b});return{zIndex:FP({selected:S.selected,zIndex:S.zIndex,sourceNode:Te,targetNode:je,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Ve||G1}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),qt),_e=A.useMemo(()=>S.markerStart?`url('#${x0(S.markerStart,x)}')`:void 0,[S.markerStart,x]),$=A.useMemo(()=>S.markerEnd?`url('#${x0(S.markerEnd,x)}')`:void 0,[S.markerEnd,x]);if(S.hidden||te===null||U===null||K===null||ie===null)return null;const J=Ie=>{var He;const{addSelectedEdges:Te,unselectNodesAndEdges:je,multiSelectionActive:Ve}=X.getState();P&&(X.setState({nodesSelectionActive:!1}),S.selected&&Ve?(je({nodes:[],edges:[S]}),(He=D.current)==null||He.blur()):Te([e])),a&&a(Ie,S)},oe=s?Ie=>{s(Ie,{...S})}:void 0,se=u?Ie=>{u(Ie,{...S})}:void 0,ae=l?Ie=>{l(Ie,{...S})}:void 0,he=d?Ie=>{d(Ie,{...S})}:void 0,Se=p?Ie=>{p(Ie,{...S})}:void 0,Ne=Ie=>{var Te;if(!C&&Yk.includes(Ie.key)&&P){const{unselectNodesAndEdges:je,addSelectedEdges:Ve}=X.getState();Ie.key==="Escape"?((Te=D.current)==null||Te.blur(),je({edges:[S]})):Ve([e])}};return _.jsx("svg",{style:{zIndex:W},children:_.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${I}`,S.className,w,{selected:S.selected,animated:S.animated,inactive:!P&&!a,updating:O,selectable:P}]),onClick:J,onDoubleClick:oe,onContextMenu:se,onMouseEnter:ae,onMouseMove:he,onMouseLeave:Se,onKeyDown:T?Ne:void 0,tabIndex:T?0:void 0,role:S.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":T?`${CM}-${x}`:void 0,ref:D,...S.domAttributes,children:[!Q&&_.jsx(M,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:P,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:_e,markerEnd:$,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),j&&_.jsx(e6,{edge:S,isReconnectable:j,reconnectRadius:m,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z,setUpdateHover:F,setReconnecting:V})]})})}var r6=A.memo(t6);const n6=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function XM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:q}){const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,onError:S}=Je(n6,qt),E=B4(t);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(U4,{defaultColor:e,rfId:n}),E.map(I=>_.jsx(r6,{id:I,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,onClick:m,reconnectRadius:f,onDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:S,edgeTypes:i,disableKeyboardA11y:q},I))]})}XM.displayName="EdgeRenderer";const i6=A.memo(XM),o6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function a6({children:e}){const t=Je(o6);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function s6(e){const t=ug(),n=A.useRef(!1);A.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const u6=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function l6(e){const t=Je(u6),n=St();return A.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function c6(e){return e.connection.inProgress?{...e.connection,to:tu(e.connection.to,e.transform)}:{...e.connection}}function d6(e){return c6}function p6(e){const t=d6();return Je(t,qt)}const f6=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function _6({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:a,width:s,height:u,isValid:l,inProgress:d}=Je(f6,qt);return!(s&&a&&d)?null:_.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:Ot(["react-flow__connection",Zk(l)]),children:_.jsx(ZM,{style:t,type:n,CustomComponent:i,isValid:l})})})}const ZM=({style:e,type:t=Ui.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:l,fromPosition:d,to:p,toNode:m,toHandle:f,toPosition:h,pointer:g}=p6();if(!a)return;if(n)return _.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:l,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:h,connectionStatus:Zk(i),toNode:m,toHandle:f,pointer:g});let x="";const q={sourceX:s.x,sourceY:s.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:h};switch(t){case Ui.Bezier:[x]=tg(q);break;case Ui.SimpleBezier:[x]=LM(q);break;case Ui.Step:[x]=Gl({...q,borderRadius:0});break;case Ui.SmoothStep:[x]=Gl(q);break;default:[x]=rg(q)}return _.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};ZM.displayName="ConnectionLine";const m6={};function Q1(e=m6){A.useRef(e),St(),A.useEffect(()=>{},[e])}function h6(){St(),A.useRef(!1),A.useEffect(()=>{},[])}function JM({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:q,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,multiSelectionKeyCode:I,panActivationKeyCode:M,zoomActivationKeyCode:T,deleteKeyCode:j,onlyRenderVisibleElements:P,elementsSelectable:D,defaultViewport:O,translateExtent:F,minZoom:Q,maxZoom:V,preventScrolling:X,defaultMarkerColor:W,zoomOnScroll:te,zoomOnPinch:U,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:z,zoomOnDoubleClick:Z,panOnDrag:_e,onPaneClick:$,onPaneMouseEnter:J,onPaneMouseMove:oe,onPaneMouseLeave:se,onPaneScroll:ae,onPaneContextMenu:he,paneClickDistance:Se,nodeClickDistance:Ne,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:je,onEdgeMouseLeave:Ve,reconnectRadius:He,onReconnect:De,onReconnectStart:ot,onReconnectEnd:rt,noDragClassName:ft,noWheelClassName:ct,noPanClassName:dt,disableKeyboardA11y:at,nodeExtent:Zt,rfId:Jt,viewport:$t,onViewportChange:er}){return Q1(e),Q1(t),h6(),s6(n),l6($t),_.jsx(N4,{onPaneClick:$,onPaneMouseEnter:J,onPaneMouseMove:oe,onPaneMouseLeave:se,onPaneContextMenu:he,onPaneScroll:ae,paneClickDistance:Se,deleteKeyCode:j,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:I,panActivationKeyCode:M,zoomActivationKeyCode:T,elementsSelectable:D,zoomOnScroll:te,zoomOnPinch:U,zoomOnDoubleClick:Z,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:z,panOnDrag:_e,defaultViewport:O,translateExtent:F,minZoom:Q,maxZoom:V,onSelectionContextMenu:f,preventScrolling:X,noDragClassName:ft,noWheelClassName:ct,noPanClassName:dt,disableKeyboardA11y:at,onViewportChange:er,isControlledViewport:!!$t,children:_.jsxs(a6,{children:[_.jsx(i6,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:De,onReconnectStart:ot,onReconnectEnd:rt,onlyRenderVisibleElements:P,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:je,onEdgeMouseLeave:Ve,reconnectRadius:He,defaultMarkerColor:W,noPanClassName:dt,disableKeyboardA11y:at,rfId:Jt}),_.jsx(_6,{style:q,type:x,component:w,containerStyle:b}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(D4,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:Ne,onlyRenderVisibleElements:P,noPanClassName:dt,noDragClassName:ft,disableKeyboardA11y:at,nodeExtent:Zt,rfId:Jt}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}JM.displayName="GraphView";const y6=A.memo(JM),X1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:f,zIndexMode:h="basic"}={})=>{const g=new Map,x=new Map,q=new Map,w=new Map,b=i??t??[],C=n??e??[],S=m??[0,0],E=f??Ls;fM(q,w,b);const I=w0(C,g,x,{nodeOrigin:S,nodeExtent:E,zIndexMode:h});let M=[0,0,1];if(u&&a&&s){const T=Js(g,{filter:O=>!!((O.width||O.initialWidth)&&(O.height||O.initialHeight))}),{x:j,y:P,zoom:D}=J0(T,a,s,d,p,(l==null?void 0:l.padding)??.1);M=[j,P,D]}return{rfId:"1",width:a??0,height:s??0,transform:M,nodes:C,nodesInitialized:I,nodeLookup:g,parentLookup:x,edges:b,edgeLookup:w,connectionLookup:q,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:Ls,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Sa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Xk},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:NP,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Qk,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},g6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:f,zIndexMode:h})=>RR((g,x)=>{async function q(){const{nodeLookup:w,panZoom:b,fitViewOptions:C,fitViewResolver:S,width:E,height:I,minZoom:M,maxZoom:T}=x();b&&(await IP({nodes:w,width:E,height:I,panZoom:b,minZoom:M,maxZoom:T},C),S==null||S.resolve(!0),g({fitViewResolver:null}))}return{...X1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:f,defaultNodes:n,defaultEdges:i,zIndexMode:h}),setNodes:w=>{const{nodeLookup:b,parentLookup:C,nodeOrigin:S,elevateNodesOnSelect:E,fitViewQueued:I,zIndexMode:M}=x(),T=w0(w,b,C,{nodeOrigin:S,nodeExtent:f,elevateNodesOnSelect:E,checkEquality:!0,zIndexMode:M});I&&T?(q(),g({nodes:w,nodesInitialized:T,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:w,nodesInitialized:T})},setEdges:w=>{const{connectionLookup:b,edgeLookup:C}=x();fM(b,C,w),g({edges:w})},setDefaultNodesAndEdges:(w,b)=>{if(w){const{setNodes:C}=x();C(w),g({hasDefaultNodes:!0})}if(b){const{setEdges:C}=x();C(b),g({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:b,nodeLookup:C,parentLookup:S,domNode:E,nodeOrigin:I,nodeExtent:M,debug:T,fitViewQueued:j,zIndexMode:P}=x(),{changes:D,updatedInternals:O}=ZP(w,C,S,E,I,M,P);O&&(KP(C,S,{nodeOrigin:I,nodeExtent:M,zIndexMode:P}),j?(q(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(D==null?void 0:D.length)>0&&(T&&console.log("React Flow: trigger node changes",D),b==null||b(D)))},updateNodePositions:(w,b=!1)=>{const C=[];let S=[];const{nodeLookup:E,triggerNodeChanges:I,connection:M,updateConnection:T,onNodesChangeMiddlewareMap:j}=x();for(const[P,D]of w){const O=E.get(P),F=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(D!=null&&D.position)),Q={id:P,type:"position",position:F?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:b};if(O&&M.inProgress&&M.fromNode.id===O.id){const V=Ro(O,M.fromHandle,$e.Left,!0);T({...M,from:V})}F&&O.parentId&&C.push({id:P,parentId:O.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),S.push(Q)}if(C.length>0){const{parentLookup:P,nodeOrigin:D}=x(),O=sg(C,E,P,D);S.push(...O)}for(const P of j.values())S=P(S);I(S)},triggerNodeChanges:w=>{const{onNodesChange:b,setNodes:C,nodes:S,hasDefaultNodes:E,debug:I}=x();if(w!=null&&w.length){if(E){const M=EM(w,S);C(M)}I&&console.log("React Flow: trigger node changes",w),b==null||b(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:b,setEdges:C,edges:S,hasDefaultEdges:E,debug:I}=x();if(w!=null&&w.length){if(E){const M=IM(w,S);C(M)}I&&console.log("React Flow: trigger edge changes",w),b==null||b(w)}},addSelectedNodes:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:E,triggerEdgeChanges:I}=x();if(b){const M=w.map(T=>Mo(T,!0));E(M);return}E(ga(S,new Set([...w]),!0)),I(ga(C))},addSelectedEdges:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:E,triggerEdgeChanges:I}=x();if(b){const M=w.map(T=>Mo(T,!0));I(M);return}I(ga(C,new Set([...w]))),E(ga(S,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:b}={})=>{const{edges:C,nodes:S,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:M}=x(),T=w||S,j=b||C,P=T.map(O=>{const F=E.get(O.id);return F&&(F.selected=!1),Mo(O.id,!1)}),D=j.map(O=>Mo(O.id,!1));I(P),M(D)},setMinZoom:w=>{const{panZoom:b,maxZoom:C}=x();b==null||b.setScaleExtent([w,C]),g({minZoom:w})},setMaxZoom:w=>{const{panZoom:b,minZoom:C}=x();b==null||b.setScaleExtent([C,w]),g({maxZoom:w})},setTranslateExtent:w=>{var b;(b=x().panZoom)==null||b.setTranslateExtent(w),g({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:b,triggerNodeChanges:C,triggerEdgeChanges:S,elementsSelectable:E}=x();if(!E)return;const I=b.reduce((T,j)=>j.selected?[...T,Mo(j.id,!1)]:T,[]),M=w.reduce((T,j)=>j.selected?[...T,Mo(j.id,!1)]:T,[]);C(I),S(M)},setNodeExtent:w=>{const{nodes:b,nodeLookup:C,parentLookup:S,nodeOrigin:E,elevateNodesOnSelect:I,nodeExtent:M,zIndexMode:T}=x();w[0][0]===M[0][0]&&w[0][1]===M[0][1]&&w[1][0]===M[1][0]&&w[1][1]===M[1][1]||(w0(b,C,S,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:T}),g({nodeExtent:w}))},panBy:w=>{const{transform:b,width:C,height:S,panZoom:E,translateExtent:I}=x();return JP({delta:w,panZoom:E,transform:b,translateExtent:I,width:C,height:S})},setCenter:async(w,b,C)=>{const{width:S,height:E,maxZoom:I,panZoom:M}=x();if(!M)return Promise.resolve(!1);const T=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:I;return await M.setViewport({x:S/2-w*T,y:E/2-b*T,zoom:T},{duration:C==null?void 0:C.duration,ease:C==null?void 0:C.ease,interpolate:C==null?void 0:C.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Xk}})},updateConnection:w=>{g({connection:w})},reset:()=>g({...X1()})}},Object.is);function v6({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:d,fitView:p,nodeOrigin:m,nodeExtent:f,zIndexMode:h,children:g}){const[x]=A.useState(()=>g6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:p,minZoom:u,maxZoom:l,fitViewOptions:d,nodeOrigin:m,nodeExtent:f,zIndexMode:h}));return _.jsx(FR,{value:x,children:_.jsx(a4,{children:g})})}function x6({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:d,minZoom:p,maxZoom:m,nodeOrigin:f,nodeExtent:h,zIndexMode:g}){return A.useContext(mc)?_.jsx(_.Fragment,{children:e}):_.jsx(v6,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:f,nodeExtent:h,zIndexMode:g,children:e})}const w6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function b6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:l,onEdgeClick:d,onInit:p,onMove:m,onMoveStart:f,onMoveEnd:h,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:E,onNodeContextMenu:I,onNodeDoubleClick:M,onNodeDragStart:T,onNodeDrag:j,onNodeDragStop:P,onNodesDelete:D,onEdgesDelete:O,onDelete:F,onSelectionChange:Q,onSelectionDragStart:V,onSelectionDrag:X,onSelectionDragStop:W,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onBeforeDelete:ie,connectionMode:z,connectionLineType:Z=Ui.Bezier,connectionLineStyle:_e,connectionLineComponent:$,connectionLineContainerStyle:J,deleteKeyCode:oe="Backspace",selectionKeyCode:se="Shift",selectionOnDrag:ae=!1,selectionMode:he=Ds.Full,panActivationKeyCode:Se="Space",multiSelectionKeyCode:Ne=zs()?"Meta":"Control",zoomActivationKeyCode:Ie=zs()?"Meta":"Control",snapToGrid:Te,snapGrid:je,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:He,nodesDraggable:De,autoPanOnNodeFocus:ot,nodesConnectable:rt,nodesFocusable:ft,nodeOrigin:ct=kM,edgesFocusable:dt,edgesReconnectable:at,elementsSelectable:Zt=!0,defaultViewport:Jt=QR,minZoom:$t=.5,maxZoom:er=2,translateExtent:st=Ls,preventScrolling:Rr=!0,nodeExtent:Tt,defaultMarkerColor:Kr="#b1b1b7",zoomOnScroll:fr=!0,zoomOnPinch:Ht=!0,panOnScroll:Qe=!1,panOnScrollSpeed:wi=.5,panOnScrollMode:Nt=To.Free,zoomOnDoubleClick:ln=!0,panOnDrag:me=!0,onPaneClick:ut,onPaneMouseEnter:Vr,onPaneMouseMove:Or,onPaneMouseLeave:_r,onPaneScroll:Xn,onPaneContextMenu:Vn,paneClickDistance:Rt=1,nodeClickDistance:tr=0,children:rr,onReconnect:_t,onReconnectStart:Do,onReconnectEnd:xt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt=10,onNodesChange:nr,onEdgesChange:mr,noDragClassName:hr="nodrag",noWheelClassName:yr="nowheel",noPanClassName:Et="nopan",fitView:cn,fitViewOptions:gr,connectOnClick:Ji,attributionPosition:eo,proOptions:sr,defaultEdgeOptions:bi,elevateNodesOnSelect:qi=!0,elevateEdgesOnSelect:to=!1,disableKeyboardA11y:Zn=!1,autoPanOnConnect:mt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,connectionRadius:ei,isValidConnection:pn,onError:ht,style:Qr,id:On,nodeDragThreshold:Kt,connectionDragThreshold:Bo,viewport:vr,onViewportChange:ti,width:fn,height:Da,colorMode:ro="light",debug:Si,onScroll:Cr,ariaLabelConfig:_n,zIndexMode:zo="basic",...Ba},ir){const Ci=On||"1",Fr=e4(ro),Xr=A.useCallback(no=>{no.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Cr==null||Cr(no)},[Cr]);return _.jsx("div",{"data-testid":"rf__wrapper",...Ba,onScroll:Xr,style:{...Qr,...w6},ref:ir,className:Ot(["react-flow",a,Fr]),id:On,role:"application",children:_.jsxs(x6,{nodes:e,edges:t,width:fn,height:Da,fitView:cn,fitViewOptions:gr,minZoom:$t,maxZoom:er,nodeOrigin:ct,nodeExtent:Tt,zIndexMode:zo,children:[_.jsx(y6,{onInit:p,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:E,onNodeContextMenu:I,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:u,connectionLineType:Z,connectionLineStyle:_e,connectionLineComponent:$,connectionLineContainerStyle:J,selectionKeyCode:se,selectionOnDrag:ae,selectionMode:he,deleteKeyCode:oe,multiSelectionKeyCode:Ne,panActivationKeyCode:Se,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ve,defaultViewport:Jt,translateExtent:st,minZoom:$t,maxZoom:er,preventScrolling:Rr,zoomOnScroll:fr,zoomOnPinch:Ht,zoomOnDoubleClick:ln,panOnScroll:Qe,panOnScrollSpeed:wi,panOnScrollMode:Nt,panOnDrag:me,onPaneClick:ut,onPaneMouseEnter:Vr,onPaneMouseMove:Or,onPaneMouseLeave:_r,onPaneScroll:Xn,onPaneContextMenu:Vn,paneClickDistance:Rt,nodeClickDistance:tr,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onReconnect:_t,onReconnectStart:Do,onReconnectEnd:xt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt,defaultMarkerColor:Kr,noDragClassName:hr,noWheelClassName:yr,noPanClassName:Et,rfId:Ci,disableKeyboardA11y:Zn,nodeExtent:Tt,viewport:vr,onViewportChange:ti}),_.jsx(JR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,nodesDraggable:De,autoPanOnNodeFocus:ot,nodesConnectable:rt,nodesFocusable:ft,edgesFocusable:dt,edgesReconnectable:at,elementsSelectable:Zt,elevateNodesOnSelect:qi,elevateEdgesOnSelect:to,minZoom:$t,maxZoom:er,nodeExtent:Tt,onNodesChange:nr,onEdgesChange:mr,snapToGrid:Te,snapGrid:je,connectionMode:z,translateExtent:st,connectOnClick:Ji,defaultEdgeOptions:bi,fitView:cn,fitViewOptions:gr,onNodesDelete:D,onEdgesDelete:O,onDelete:F,onNodeDragStart:T,onNodeDrag:j,onNodeDragStop:P,onSelectionDrag:X,onSelectionDragStart:V,onSelectionDragStop:W,onMove:m,onMoveStart:f,onMoveEnd:h,noPanClassName:Et,nodeOrigin:ct,rfId:Ci,autoPanOnConnect:mt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,onError:ht,connectionRadius:ei,isValidConnection:pn,selectNodesOnDrag:He,nodeDragThreshold:Kt,connectionDragThreshold:Bo,onBeforeDelete:ie,debug:Si,ariaLabelConfig:_n,zIndexMode:zo}),_.jsx(YR,{onSelectionChange:Q}),rr,_.jsx(HR,{proOptions:sr,position:eo}),_.jsx($R,{rfId:Ci,disableKeyboardA11y:Zn})]})})}var q6=TM(b6);function S6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>EM(a,s)),[]);return[t,n,i]}function C6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>IM(a,s)),[]);return[t,n,i]}function k6({dimensions:e,lineWidth:t,variant:n,className:i}){return _.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ot(["react-flow__background-pattern",n,i])})}function M6({radius:e,className:t}){return _.jsx("circle",{cx:e,cy:e,r:e,className:Ot(["react-flow__background-pattern","dots",t])})}var Yi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Yi||(Yi={}));const E6={[Yi.Dots]:1,[Yi.Lines]:1,[Yi.Cross]:6},I6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eE({id:e,variant:t=Yi.Dots,gap:n=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:l,style:d,className:p,patternClassName:m}){const f=A.useRef(null),{transform:h,patternId:g}=Je(I6,qt),x=i||E6[t],q=t===Yi.Dots,w=t===Yi.Cross,b=Array.isArray(n)?n:[n,n],C=[b[0]*h[2]||1,b[1]*h[2]||1],S=x*h[2],E=Array.isArray(s)?s:[s,s],I=w?[S,S]:C,M=[E[0]*h[2]||1+I[0]/2,E[1]*h[2]||1+I[1]/2],T=`${g}${e||""}`;return _.jsxs("svg",{className:Ot(["react-flow__background",p]),style:{...d,...hc,"--xy-background-color-props":l,"--xy-background-pattern-color-props":u},ref:f,"data-testid":"rf__background",children:[_.jsx("pattern",{id:T,x:h[0]%C[0],y:h[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:q?_.jsx(M6,{radius:S/2,className:m}):_.jsx(k6,{dimensions:I,lineWidth:a,variant:t,className:m})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}eE.displayName="Background";const T6=A.memo(eE);function N6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function j6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function P6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function R6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function V6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function wl({children:e,className:t,...n}){return _.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",t]),...n,children:e})}const O6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function tE({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:p,children:m,position:f="bottom-left",orientation:h="vertical","aria-label":g}){const x=St(),{isInteractive:q,minZoomReached:w,maxZoomReached:b,ariaLabelConfig:C}=Je(O6,qt),{zoomIn:S,zoomOut:E,fitView:I}=ug(),M=()=>{S(),s==null||s()},T=()=>{E(),u==null||u()},j=()=>{I(a),l==null||l()},P=()=>{x.setState({nodesDraggable:!q,nodesConnectable:!q,elementsSelectable:!q}),d==null||d(!q)},D=h==="horizontal"?"horizontal":"vertical";return _.jsxs(Ia,{className:Ot(["react-flow__controls",D,p]),position:f,style:e,"data-testid":"rf__controls","aria-label":g??C["controls.ariaLabel"],children:[t&&_.jsxs(_.Fragment,{children:[_.jsx(wl,{onClick:M,className:"react-flow__controls-zoomin",title:C["controls.zoomIn.ariaLabel"],"aria-label":C["controls.zoomIn.ariaLabel"],disabled:b,children:_.jsx(N6,{})}),_.jsx(wl,{onClick:T,className:"react-flow__controls-zoomout",title:C["controls.zoomOut.ariaLabel"],"aria-label":C["controls.zoomOut.ariaLabel"],disabled:w,children:_.jsx(j6,{})})]}),n&&_.jsx(wl,{className:"react-flow__controls-fitview",onClick:j,title:C["controls.fitView.ariaLabel"],"aria-label":C["controls.fitView.ariaLabel"],children:_.jsx(P6,{})}),i&&_.jsx(wl,{className:"react-flow__controls-interactive",onClick:P,title:C["controls.interactive.ariaLabel"],"aria-label":C["controls.interactive.ariaLabel"],children:q?_.jsx(V6,{}):_.jsx(R6,{})}),m]})}tE.displayName="Controls";const F6=A.memo(tE);function A6({id:e,x:t,y:n,width:i,height:a,style:s,color:u,strokeColor:l,strokeWidth:d,className:p,borderRadius:m,shapeRendering:f,selected:h,onClick:g}){const{background:x,backgroundColor:q}=s||{},w=u||x||q;return _.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:h},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,style:{fill:w,stroke:l,strokeWidth:d},shapeRendering:f,onClick:g?b=>g(b,e):void 0})}const L6=A.memo(A6),D6=e=>e.nodes.map(t=>t.id),Np=e=>e instanceof Function?e:()=>e;function B6({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s=L6,onClick:u}){const l=Je(D6,qt),d=Np(t),p=Np(e),m=Np(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:l.map(h=>_.jsx($6,{id:h,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:f},h))})}function z6({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:l,onClick:d}){const{node:p,x:m,y:f,width:h,height:g}=Je(x=>{const{internals:q}=x.nodeLookup.get(e),w=q.userNode,{x:b,y:C}=q.positionAbsolute,{width:S,height:E}=gi(w);return{node:w,x:b,y:C,width:S,height:E}},qt);return!p||p.hidden||!iM(p)?null:_.jsx(l,{x:m,y:f,width:h,height:g,style:p.style,selected:!!p.selected,className:i(p),color:t(p),borderRadius:a,strokeColor:n(p),strokeWidth:s,shapeRendering:u,onClick:d,id:p.id})}const $6=A.memo(z6);var H6=A.memo(B6);const W6=200,U6=150,G6=e=>!e.hidden,K6=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nM(Js(e.nodeLookup,{filter:G6}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Y6="react-flow__minimap-desc";function rE({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:l,bgColor:d,maskColor:p,maskStrokeColor:m,maskStrokeWidth:f,position:h="bottom-right",onClick:g,onNodeClick:x,pannable:q=!1,zoomable:w=!1,ariaLabel:b,inversePan:C,zoomStep:S=1,offsetScale:E=5}){const I=St(),M=A.useRef(null),{boundingRect:T,viewBB:j,rfId:P,panZoom:D,translateExtent:O,flowWidth:F,flowHeight:Q,ariaLabelConfig:V}=Je(K6,qt),X=(e==null?void 0:e.width)??W6,W=(e==null?void 0:e.height)??U6,te=T.width/X,U=T.height/W,K=Math.max(te,U),ie=K*X,z=K*W,Z=E*K,_e=T.x-(ie-T.width)/2-Z,$=T.y-(z-T.height)/2-Z,J=ie+Z*2,oe=z+Z*2,se=`${Y6}-${P}`,ae=A.useRef(0),he=A.useRef();ae.current=K,A.useEffect(()=>{if(M.current&&D)return he.current=uR({domNode:M.current,panZoom:D,getTransform:()=>I.getState().transform,getViewScale:()=>ae.current}),()=>{var Te;(Te=he.current)==null||Te.destroy()}},[D]),A.useEffect(()=>{var Te;(Te=he.current)==null||Te.update({translateExtent:O,width:F,height:Q,inversePan:C,pannable:q,zoomStep:S,zoomable:w})},[q,w,C,S,O,F,Q]);const Se=g?Te=>{var He;const[je,Ve]=((He=he.current)==null?void 0:He.pointer(Te))||[0,0];g(Te,{x:je,y:Ve})}:void 0,Ne=x?A.useCallback((Te,je)=>{const Ve=I.getState().nodeLookup.get(je).internals.userNode;x(Te,Ve)},[]):void 0,Ie=b??V["minimap.ariaLabel"];return _.jsx(Ia,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*K:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Ot(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:X,height:W,viewBox:`${_e} ${$} ${J} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":se,ref:M,onClick:Se,children:[Ie&&_.jsx("title",{id:se,children:Ie}),_.jsx(H6,{onClick:Ne,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:l}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${_e-Z},${$-Z}h${J+Z*2}v${oe+Z*2}h${-J-Z*2}z
        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}rE.displayName="MiniMap";const Q6=A.memo(rE),X6=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Z6={[Ea.Line]:"right",[Ea.Handle]:"bottom-right"};function J6({nodeId:e,position:t,variant:n=Ea.Handle,className:i,style:a=void 0,children:s,color:u,minWidth:l=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,autoScale:g=!0,shouldResize:x,onResizeStart:q,onResize:w,onResizeEnd:b}){const C=RM(),S=typeof e=="string"?e:C,E=St(),I=A.useRef(null),M=n===Ea.Handle,T=Je(A.useCallback(X6(M&&g),[M,g]),qt),j=A.useRef(null),P=t??Z6[n];A.useEffect(()=>{if(!(!I.current||!S))return j.current||(j.current=bR({domNode:I.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:O,transform:F,snapGrid:Q,snapToGrid:V,nodeOrigin:X,domNode:W}=E.getState();return{nodeLookup:O,transform:F,snapGrid:Q,snapToGrid:V,nodeOrigin:X,paneDomNode:W}},onChange:(O,F)=>{const{triggerNodeChanges:Q,nodeLookup:V,parentLookup:X,nodeOrigin:W}=E.getState(),te=[],U={x:O.x,y:O.y},K=V.get(S);if(K&&K.expandParent&&K.parentId){const ie=K.origin??W,z=O.width??K.measured.width??0,Z=O.height??K.measured.height??0,_e={id:K.id,parentId:K.parentId,rect:{width:z,height:Z,...oM({x:O.x??K.position.x,y:O.y??K.position.y},{width:z,height:Z},K.parentId,V,ie)}},$=sg([_e],V,X,W);te.push(...$),U.x=O.x?Math.max(ie[0]*z,O.x):void 0,U.y=O.y?Math.max(ie[1]*Z,O.y):void 0}if(U.x!==void 0&&U.y!==void 0){const ie={id:S,type:"position",position:{...U}};te.push(ie)}if(O.width!==void 0&&O.height!==void 0){const z={id:S,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:O.width,height:O.height}};te.push(z)}for(const ie of F){const z={...ie,type:"position"};te.push(z)}Q(te)},onEnd:({width:O,height:F})=>{const Q={id:S,type:"dimensions",resizing:!1,dimensions:{width:O,height:F}};E.getState().triggerNodeChanges([Q])}})),j.current.update({controlPosition:P,boundaries:{minWidth:l,minHeight:d,maxWidth:p,maxHeight:m},keepAspectRatio:f,resizeDirection:h,onResizeStart:q,onResize:w,onResizeEnd:b,shouldResize:x}),()=>{var O;(O=j.current)==null||O.destroy()}},[P,l,d,p,m,f,q,w,b,x]);const D=P.split("-");return _.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...D,n,i]),ref:I,style:{...a,scale:T,...u&&{[M?"backgroundColor":"borderColor"]:u}},children:s})}A.memo(J6);const Yl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Ql=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Xl=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Qi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},gc=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},e3=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let $r=gc(Qi.PRODUCTS,Yl),Cn=gc(Qi.MACHINES,Ql),Mn=gc(Qi.RECIPES,Xl);const bt=e=>$r.find(t=>t.id===e),vt=e=>Cn.find(t=>t.id===e),cg=(e,t,n)=>{e.length=0,e.push(...t),e3(n,e)},S0=e=>cg($r,e,Qi.PRODUCTS),C0=e=>cg(Cn,e,Qi.MACHINES),k0=e=>cg(Mn,e,Qi.RECIPES),t3=()=>gc(Qi.CANVAS_STATE,null),r3=()=>localStorage.removeItem(Qi.CANVAS_STATE),n3=()=>{S0(Yl),C0(Ql),k0(Xl),r3()},dg=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),i3=e=>e==="p_variableproduct",_i=(e,t,n)=>{if(i3(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const i=t(e);return i?i.name:"Unknown Product"},o3=e=>dg(e)?"Variable":typeof e=="number"?e.toString():e,ws=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,a3=e=>{if(dg(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:ws(e.drilling),idle:ws(e.idle)};if("max"in e&&"average"in e)return{max:ws(e.max),average:ws(e.average)}}return ws(e)},s3=e=>dg(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,Z1=(e,t)=>{const n=o3(e.quantity),i=_i(e.product_id,t);return`${n}x ${i}`},u3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],nE=e=>u3.includes(e),Hr=18,Ki=18,In=100,pr={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},pg=(e,t={},n=Hr,i=null,a=null)=>{const s=pr[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[i]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Ki,l=t.heatLoss??s.defaultHeatLoss;return u-l;default:return n}},J1=(e,t)=>{const n=pr[e];if(!n||n.type!=="configurable")return null;const i=n.tempOptions.find(a=>a.temp===t);return i?i.power:null},Zl=e=>e==null?"":`${Math.round(e)}C`,l3=e=>{const t=pr[e];return t&&t.type==="configurable"},c3=e=>{const t=pr[e];return t&&t.type==="boiler"},d3=e=>{const t=pr[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},p3=e=>e<=0?1/0:e>=400?2:800/e,f3=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,_3=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,m3=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},h3=e=>e<=0?1/0:64/(.176*Math.abs(e)),an={m_industrial_drill:{type:"steam_input",formula:p3},m_alloyer:{type:"steam_input",formula:f3},m_coal_liquefaction_plant:{type:"steam_input",formula:_3},m_steam_cracking_plant:{type:"steam_input",formula:m3},m_water_treatment_plant:{type:"steam_input",formula:h3}},Ur=e=>e in an,Wn=(e,t,n)=>{const i=an[e];if(!i)return n;const a=i.formula(t);return isFinite(a)?a:n},hi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),ew=(e,t)=>{const n=new Map,i=new Map;Object.keys(e.nodes).forEach(l=>{const d=e.nodes[l];d&&(d.inputs.forEach((p,m)=>{i.set(`${l}:${m}`,Hr)}),d.outputs.forEach((p,m)=>{n.set(`${l}:${m}`,Hr)}))});const{sorted:a,cycleNodes:s}=g3(e),u=(l,d=!1)=>{const p=e.nodes[l];if(!p)return!1;const m={id:p.recipe.machine_id},f=pr[m.id];let h=!1;return p.inputs.forEach((g,x)=>{const q=y3(e,t,l,x,n,!d),w=i.get(`${l}:${x}`),b=q!==null?q:w;Math.abs(b-w)>.01&&(i.set(`${l}:${x}`,b),h=!0)}),p.outputs.forEach((g,x)=>{var w,b;let q=Hr;if(f){if(f.type==="fixed")q=f.outputTemp;else if(f.type==="additive"){if(p.inputs.length>0){const C=i.get(`${l}:0`)||Hr;C>f.maxTemp?q=C:q=Math.min(C+f.tempIncrease,f.maxTemp)}}else if(f.type==="configurable")q=((w=p.recipe.temperatureSettings)==null?void 0:w.temperature)||f.tempOptions[0].temp;else if(f.type==="product_dependent"){if(p.inputs.length>0){const C=p.inputs[0].productId;q=f.temps[C]||f.temps.p_water||400}}else if(f.type==="boiler"){if(p.inputs.length>=2){const C=i.get(`${l}:1`)||Hr,S=((b=p.recipe.temperatureSettings)==null?void 0:b.heatLoss)||f.defaultHeatLoss,E=C-S;x===0?q=E*.85:x===1&&(E<f.minSteamTemp?q=Math.max(E,Hr):q=E)}}else if(f.type==="passthrough"){const C=p.inputs.findIndex(S=>S.productId===f.inputProduct);C>=0&&(q=i.get(`${l}:${C}`)||Hr)}}n.set(`${l}:${x}`,q)}),h};if(a.forEach(l=>{s.has(l)||u(l)}),s.size>0){let d=0,p=!0;const m=a.filter(h=>s.has(h));for(;p&&d<100;)p=!1,m.forEach(h=>{u(h,!0)&&(p=!0)}),d++;const f=new Set;a.forEach(h=>{if(s.has(h))return;const g=e.nodes[h];g&&g.inputs.forEach((x,q)=>{const w=e.products[x.productId];if(!w)return;w.connections.filter(C=>C.targetNodeId===h&&C.targetInputIndex===q).forEach(C=>{s.has(C.sourceNodeId)&&f.add(h)})})}),f.forEach(h=>{u(h,!1)})}return{outputTemperatures:n,inputTemperatures:i}},y3=(e,t,n,i,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[i].productId];if(!u)return s?Hr:null;const l=u.connections.filter(f=>f.targetNodeId===n&&f.targetInputIndex===i);if(l.length===0)return s?Hr:null;const d=[];if(l.forEach(f=>{var g;const h=a.get(`${f.sourceNodeId}:${f.sourceOutputIndex}`);if(h!=null){const x=((g=t.byConnection[f.id])==null?void 0:g.flowRate)||0;d.push({temp:h,flow:x})}}),d.length===0)return s?Hr:null;const p=d.reduce((f,h)=>f+h.flow,0);if(p>0){const f=d.reduce((h,g)=>h+g.temp*g.flow,0);return Math.round(f/p*1e10)/1e10}const m=d.reduce((f,h)=>f+h.temp,0);return Math.round(m/d.length*1e10)/1e10},g3=e=>{const t=[],n=new Set,i=new Set,a=new Set,s=(u,l=[])=>{if(n.has(u))return;if(i.has(u)){const m=l.indexOf(u);for(let f=m;f<l.length;f++)a.add(l[f]);a.add(u);return}i.add(u);const d=[...l,u],p=e.nodes[u];p&&p.inputs.forEach((m,f)=>{const h=e.products[m.productId];h&&h.connections.filter(x=>x.targetNodeId===u&&x.targetInputIndex===f).forEach(x=>{n.has(x.sourceNodeId)||s(x.sourceNodeId,d)})}),i.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},M0=(e,t,n)=>e.map(i=>{if(!n.nodes[i.id])return i;const s={id:i.data.recipe.machine_id},u=pr[s.id],l=Ur(s.id),d=i.data.recipe.outputs.map((m,f)=>{const h=t.outputTemperatures.get(`${i.id}:${f}`);if(h!=null){if((u==null?void 0:u.type)==="boiler"&&m.product_id==="p_steam"){const g=u.minSteamTemp||100;return h<g?{...m,temperature:h,quantity:0,originalQuantity:m.originalQuantity||m.quantity}:{...m,temperature:h,quantity:m.originalQuantity||m.quantity,originalQuantity:m.originalQuantity||m.quantity}}return{...m,temperature:h}}return m});let p={...i.data.recipe,outputs:d};if(l){const m=an[s.id];if((m==null?void 0:m.type)==="steam_input"){const f=i.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(f>=0){const h=t.inputTemperatures.get(`${i.id}:${f}`);if(h!=null&&(p={...p,tempDependentInputTemp:h},s.id==="m_water_treatment_plant")){const x=90*Wn(s.id,h,1);p={...p,inputs:p.inputs.map((q,w)=>w===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(q.product_id)?{...q,quantity:x,originalQuantity:90}:q)}}}}}return{...i,data:{...i.data,recipe:p}}}),E0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],I0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],v3={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},x3=12,w3=3.1,b3=.1,q3=.02,S3=2,Ws={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},C3=()=>Object.keys(Ws).map(e=>parseInt(e)).sort((e,t)=>e-t),k3=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},M3=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Vo=(e,t,n,i)=>{if(!e||!i)return null;const a=k3(e,i),s=M3(t||"none",i),u=n?1.1:1,l=.5*a*s*u,d=Math.ceil(100/l),p=x3,m=n?100:50,f=2*i/m,h=d+p+f,g=d/h;return{deteriorationRate:l,lifeTime:d,replacementTime:p,travelTime:f,totalCycleTime:h,dutyCycle:g,drillingPower:w3,idlePower:b3,pollution:q3}},iE=(e,t,n,i)=>{const a=[],s=Vo(e,t,n,i);if(!s){if(e){const u=E0.find(l=>l.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=E0.find(l=>l.id===e);if(u){const l=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(l.toFixed(6))})}}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);if(u!=null&&u.product_id){const d=(v3[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(d.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:S3}),a},oE=(e,t,n,i)=>{if(!i)return[];const a=Ws[i];if(!a)return[];const s=Vo(e,t,n,i);if(!s)return a.map(l=>({...l,quantity:"Variable"}));const u=n?1.1:1;return a.map(l=>{const d=l.quantity*u*s.dutyCycle;return{product_id:l.product_id,quantity:parseFloat(d.toFixed(4))}})},tw={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},rw=4,E3=20,I3=4,nw=5e5,T3=.3,N3=10,bl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},j3=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),i=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:i,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},aE=j3(),P3=e=>aE.find(t=>t.productId===e),ru=(e,t,n=0)=>{const i=P3(e);if(!i)return null;const s=Math.log2(i.innerStage)+(i.outerStage-1)*6,u=rw*s,l=t?I3:E3,d=n/6,p=s*rw*(l+d)+N3,m=bl.logic_plates*s,f=bl.copper_wires*s,h=bl.semiconductors*s,g=bl.gold_wires*s,x=[{product_id:"p_logic_plate",quantity:m},{product_id:"p_copper_wire",quantity:f},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:g}];t&&x.push({product_id:"p_machine_oil",quantity:parseFloat((T3*p).toFixed(6))});const q=[{product_id:e,quantity:1}],w=nw/l,b=nw/(t?.8:4);return{outerStage:i.outerStage,innerStage:i.innerStage,totalStages:s,totalSteps:u,avgStepTime:l,cycleTime:p,inputs:x,outputs:q,avgPowerConsumption:w,maxPowerConsumption:b,logicPlates:m,copperWires:f,semiconductors:h,goldWires:g}},sE=(e,t)=>{const n=ru(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},uE=(e,t)=>{const n=ru(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},iw={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},T0=11,lE=2,R3=2e5,cE=1,V3=3,dE=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,pE=e=>Math.ceil(e/V3),Jl=(e,t,n,i,a,s)=>{if(!e||!t||!n||!i||a!==1)return null;const u=pE(n),l=dE(s),d=n*cE,p=e/l,m=t/T0,f=Math.min(p,m),h=f*lE,g=t*R3/T0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:i,controller:a,growthTime:l,waterConsumption:d,sustainableHarvestRate:p,maxHarvestRate:m,actualHarvestRate:f,logOutput:h,avgPowerConsumption:g,isTreeLimited:p<m}},fE=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*cE}],fg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const i=dE(n),a=e/i,s=t/T0,l=Math.min(a,s)*lE;return[{product_id:"p_oak_log",quantity:parseFloat(l.toFixed(6))}]},ow={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},_g=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],_E={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},O3={r_industrial_firebox_07:1},mE=e=>_g.find(t=>t.id===e),ec=(e,t)=>{const n=_E[e],i=mE(t);if(!n||!i)return null;const a=n/i.energy,s=O3[e]||0,u=a+s,l=1,d=a;return{energyNeeded:n,fuelEnergy:i.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:l,fuelPerCycle:d}},N0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const i=ec(n,t);if(!i)return e;const a=mE(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(i.fuelPerCycle.toFixed(6))},u=_g.map(d=>d.product_id),l=e.filter(d=>d.product_id!=="p_variableproduct"&&!u.includes(d.product_id));return[s,...l]},hE=e=>e in _E,yE=(e,t)=>{const i=(e-100)/5;let a=1,s=1;e<100?(a=1+i*.05,s=1+i*.06666666666666667):e>100&&(a=1+i*.05,s=1+i*.1);const l=(t-100)/5;let d=1,p=1;t<100?(d=1+l*-.0625,p=1+l*.05):t>100&&(d=1+l*-.0425,p=1+l*.25);const m=a*d,f=a,h=s+p-1;return{inputMultiplier:m,outputMultiplier:f,powerMultiplier:h}},F3=(e,t,n)=>{const i=yE(t,n),a=e.inputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.inputMultiplier).toFixed(6)):l.quantity})),s=e.outputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.outputMultiplier).toFixed(6)):l.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*i.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Wi=7e3,mg=140,hg=70,gE=1e6,aw=240,jp=29.166666666666668,Ts=240,vE=480,Vl=(e,t)=>{const n=e+t;let i;return n<=Ts?i=jp:n>=vE?i=jp/2:i=jp*Ts/n,{cycleTime:i,concreteBlocksPerCycle:mg,leadIngotsPerCycle:hg,totalFlow:n,powerConsumption:gE}},tc=(e,t,n,i)=>{const a=Math.min(e,aw),s=Math.min(t,aw),u=a+s;let l,d;return u<=Ts?(l=Wi,d=Wi):u>=vE?(l=Wi/2,d=Wi/2):(l=Wi*Ts/u,d=Wi*Ts/u),[{product_id:n||"p_variableproduct",quantity:l,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:i||"p_variableproduct",quantity:d,isAnyProduct:i==="p_any_fluid"||!i,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}]},j0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:gE,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}],outputs:[],isWasteFacility:!0},P0=15,A3=2,L3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ns=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;L3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},R0=e=>{const t=[];for(let n=0;n<A3;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:P0})}return t},V0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:P0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:P0}],outputs:[],isLiquidDump:!0},xE=15,wE=8,D3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],js=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;D3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},O0=e=>{const t=[];for(let n=0;n<wE;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:xE})}return t},F0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(wE).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:xE})),outputs:[],isLiquidBurner:!0},sw=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",B3=(e,t,n)=>{switch(e){case"drill":return z3();case"assembler":return $3();case"treeFarm":return H3(n);case"firebox":return W3(t);case"temperature":return U3(t);case"boiler":return G3();case"chemicalPlant":return K3();case"wasteFacility":return Y3();case"liquidDump":return Q3();case"liquidBurner":return X3();default:return null}},z3=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...E0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:I0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...C3().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Vo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),_.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=iE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=oE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),i=e.drillHead&&e.depth?Vo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:i}}}),$3=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,i=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return i?_.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:i}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?ru(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Total Stages: ",e.totalStages]}),_.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),_.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),_.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[_.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),_.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[_.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[_.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),_.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),_.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),_.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,l;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((l=e.microchip)==null?void 0:l.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},i=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=sE(i,t.machineOil),s=uE(i,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),H3=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=pE(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Jl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),_.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),_.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&_.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const i=fE(t.sprinklers),a=fg(t.trees,t.harvesters,e);return{settings:t,inputs:i,outputs:a,metrics:null}}}),W3=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:_g.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>ec(e.id,t.fuel),renderMetrics:(t,n)=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),_.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),_.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&_.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),_.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),_.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[_.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),_.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:N0(e.inputs,n.fuel,e.id).map((i,a)=>{const s=typeof i.quantity=="number"?i.quantity.toFixed(4):i.quantity,u=_i(i.product_id,bt);return _.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const i=ec(n.id,t.fuel),a=N0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:i}}}),U3=e=>{var i,a;const t=e.machine_id,n=pr[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(i=n.tempOptions)==null?void 0:i[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Zl(s.temp)} - ${sw(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const l=u.temperature,d=J1(t,l);return _.jsxs(_.Fragment,{children:[_.jsxs("div",{children:["Output Temperature: ",Zl(l)]}),_.jsxs("div",{children:["Power Consumption: ",sw(d)]})]})}}],onApply:(s,u)=>{const l=J1(t,s.temperature),d=u.outputs.map(p=>({...p,temperature:pg(t,s)}));return{settings:s,inputs:[],outputs:d,metrics:l}}}},G3=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[" Boiler uses the ",_.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),_.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),_.jsx("div",{children:" If output temp < 100C, no steam is produced"}),_.jsx("div",{children:" Water output is cooled (no temperature)"}),_.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),K3=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>yE(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[_.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),_.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),_.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),_.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[_.jsx("div",{children:" Speed affects input/output quantities and power"}),_.jsx("div",{children:" Efficiency affects input quantities and power"}),_.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),Y3=()=>{const e=$r.filter(n=>n.type==="item").sort((n,i)=>n.name.localeCompare(i.name)),t=$r.filter(n=>n.type==="fluid").sort((n,i)=>n.name.localeCompare(i.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 240/s"}),_.jsx("div",{children:" Fixed requirements per cycle:"}),_.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),_.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const i=tc(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:i,outputs:[],metrics:null}}}},Q3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=[n.fluidProductId0,n.fluidProductId1],a=R0(i),s=Ns(a);return _.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Water variants: 0%/hr"}),_.jsx("div",{children:" Residue: 8.64%/hr per /s"}),_.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),_.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:_.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),_.jsx("div",{children:" Connect fluids to dispose of them"}),_.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],i=R0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},X3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=Array(8).fill(0).map((u,l)=>n[`fluidProductId${l}`]),a=O0(i),s=js(a);return _.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Water variants: 0%/hr"}),_.jsx("div",{children:" Residue: 8.64%/hr per /s"}),_.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),_.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:_.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),_.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),_.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),i=O0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},Z3=({recipeType:e,nodeId:t,currentSettings:n,recipe:i,globalPollution:a,onSettingsChange:s,onClose:u})=>{var w;const l=B3(e,i,a),[d,p]=A.useState(n||l.defaultSettings),m=A.useRef(null),f=b=>{const C=m.current;if(!C)return;const S=C.scrollHeight>C.clientHeight,E=C.scrollTop===0&&b.deltaY<0,I=C.scrollTop+C.clientHeight>=C.scrollHeight&&b.deltaY>0;S&&!E&&!I||b.preventDefault(),b.stopPropagation()},h=(b,C)=>{p(typeof b=="object"?S=>({...S,...b}):S=>({...S,[b]:C}))},g=()=>{const b=l.onApply(d,i);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,b.settings,b.inputs,b.outputs);break;case"firebox":s(t,b.settings,b.inputs,b.metrics);break;case"temperature":s(t,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":s(t,b.settings);break;default:s(t,b.settings,b.inputs,b.outputs,b.metrics)}u()},x=()=>{p(l.defaultSettings)},q=l.calculateMetrics?l.calculateMetrics(d,i):null;return OR.createPortal(_.jsx("div",{className:"drill-settings-overlay",onClick:u,children:_.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:f,children:[_.jsx("h3",{className:"drill-settings-title",children:l.title}),_.jsxs("div",{className:"drill-settings-content",children:[l.fields.map((b,C)=>_.jsx(J3,{field:b,value:d[b.key],settings:d,onChange:(S,E)=>{b.type==="dual-select"?h(S,E):h(b.key,S)}},C)),q&&l.renderMetrics&&_.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:l.renderMetrics(q,d)})]}),_.jsxs("div",{className:"drill-settings-buttons",children:[_.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Reset"}),_.jsx("button",{onClick:g,className:"btn btn-primary",disabled:(w=l.hasErrors)==null?void 0:w.call(l,d),children:"Apply"})]})]})}),document.body)},J3=({field:e,value:t,settings:n,onChange:i})=>{var a,s;switch(e.type){case"select":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("select",{value:t,onChange:u=>i(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>_.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&_.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return _.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:_.jsxs("label",{className:"drill-setting-label",children:[_.jsx("input",{type:"checkbox",checked:t,onChange:u=>i(u.target.checked),className:"drill-checkbox"}),_.jsx("span",{children:e.label})]})});case"number":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>i(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&_.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_.jsx("button",{onClick:()=>i(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),_.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),_.jsx("button",{onClick:()=>i(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[_.jsxs("span",{children:["Min: ",e.min]}),_.jsxs("span",{children:["Default: ",e.defaultValue]}),_.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("input",{type:"text",value:t,onChange:u=>i(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[_.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const l=u.target.value;i(e.outerKey,l),l&&parseInt(l)>1&&i(e.innerKey,"64")},className:"select",style:{flex:1},children:[_.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>_.jsxs("option",{value:u,children:[u,"x"]},u))]}),_.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>i(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[_.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?_.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>_.jsxs("option",{value:u,children:[u,"x"]},u))]}),_.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return _.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[_.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),_.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},Ps=44,A0=8,uw=10,lw=20,cw=380,eV=120,ql=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,tV=A.memo(({data:e,id:t})=>{var fr,Ht,Qe,wi,Nt,ln;const{recipe:n,machine:i,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:l,onOutputClick:d,isTarget:p,onDrillSettingsChange:m,onLogicAssemblerSettingsChange:f,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:g,onTemperatureSettingsChange:x,onBoilerSettingsChange:q,onChemicalPlantSettingsChange:w,globalPollution:b,flows:C,isMobile:S,mobileActionMode:E,onMachineCountModeChange:I,zoomLevel:M}=e,T=!M||M>=.25,[j,P]=A.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!i)return null;const D=n.isMineshaftDrill||n.id==="r_mineshaft_drill",O=n.isLogicAssembler||n.id==="r_logic_assembler",F=n.isTreeFarm||n.id==="r_tree_farm",Q=n.isWasteFacility||n.id==="r_underground_waste_facility",V=n.isLiquidDump||n.id==="r_liquid_dump",X=n.isLiquidBurner||n.id==="r_liquid_burner",W=D||O||F||Q||V||X,te=l3(i.id),U=c3(i.id),K=pr[i.id],ie=i.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",z=i.id==="m_chemical_plant",Z=Ur(i.id),_e=Z?an[i.id]:null;let $=n.cycle_time;const J=$==="Variable"||typeof $!="number"||$<=0;if(J&&!W?$="Variable":J&&W&&($=1),Z&&(_e==null?void 0:_e.type)==="steam_input"&&typeof $=="number"&&!(i.id==="m_steam_cracking_plant"&&!hi(n))){const me=n.tempDependentInputTemp??In;$=Wn(i.id,me,$)}const oe={outputs:[]};if(K){const me=K.type==="boiler",ut=(fr=n.outputs)==null?void 0:fr.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),Vr=(Ht=n.outputs)==null?void 0:Ht.some(Rt=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id)),Or=(Qe=n.inputs)==null?void 0:Qe.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),_r=n.id==="r_industrial_firebox_07",Xn=i.id==="m_industrial_firebox";(!Xn||Xn&&!_r&&(Or||ut))&&((wi=n.outputs)==null||wi.forEach((Rt,tr)=>{if(nE(Rt.product_id)&&Rt.temperature!=null){const rr=["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id),_t=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id);me?_t&&Vr&&oe.outputs.push({temp:Rt.temperature,index:tr}):(rr&&ut||_t&&Vr)&&oe.outputs.push({temp:Rt.temperature,index:tr})}}))}const se=A.useCallback(me=>{if(me==="Variable")return"Variable";if(typeof me!="number")return String(me);if($==="Variable")return s==="perSecond"?"Variable":String(ql(me));let ut=s==="perSecond"?me/$:me;return u==="total"&&(ut*=a||0),String(ql(ut))},[$,s,u,a]),ae=A.useCallback(me=>{if(me==="Variable"||typeof me!="number")return me;if(s==="perSecond")return"1s";if(me>=60){const ut=Math.floor(me/60),Vr=me%60;return`${ut}m ${ql(Vr)}s`}return`${ql(me)}s`},[s]),he=A.useMemo(()=>ae($),[$,ae]);let Se=n.power_consumption,Ne=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Se=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Se={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Se={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(Ne=n.pollution*a));const Ie=a3(Se),Te=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),je=n.power_type==="HV"?" HV":"",Ve=n.inputs.length,He=n.outputs.length,De=Math.max(Ve,He,1),ot=Ve>0,rt=He>0,ft=cw-uw*2,ct=ot&&rt?Math.floor((ft-lw)/2):ot?ft:0,dt=ot&&rt?Math.floor((ft-lw)/2):rt?ft:0,at=cw,Jt=De*Ps+(De-1)*A0+24,er=eV+Jt+12,st=a??0,Rr=Number.isInteger(st)?st.toString():st.toFixed(2),Tt=e.machineCountMode||"free",Kr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:`custom-node ${p?"target":""}`,style:{width:at,height:er},onMouseDownCapture:me=>{me.button===1&&(me.preventDefault(),me.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[_.jsxs("div",{className:"node-info-area",children:[oe.outputs.length>0&&_.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:oe.outputs.map((me,ut)=>_.jsx("div",{children:Zl(me.temp)},`output-${ut}`))}),Z&&(_e==null?void 0:_e.type)==="steam_input"&&hi(n)&&_.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Zl(n.tempDependentInputTemp??In)}),D&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("drill")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),O&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("assembler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),F&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("treeFarm")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),ie&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("firebox")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),z&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("chemicalPlant")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),Q&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("wasteFacility")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),V&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("liquidDump")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),X&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("liquidBurner")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),te&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("temperature")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),U&&_.jsx("button",{onClick:me=>{me.stopPropagation(),P("boiler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),_.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),_.jsxs("div",{className:"node-stats-row",children:[_.jsxs("div",{className:"node-stats",style:{gap:Te?"1px":"3px",minHeight:"65px",visibility:T?"visible":"hidden"},children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",he]}),Te?"drilling"in Ie?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,je]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,je]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,je]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,je]})]}):_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,je]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",s3(Ne)]})]}),_.jsxs("div",{className:"node-machine-info",style:{visibility:T?"visible":"hidden"},children:[_.jsx("div",{className:"node-machine-name",title:i.name,style:{color:i.tier===1?"var(--tier-1-color)":i.tier===2?"var(--tier-2-color)":i.tier===3?"var(--tier-3-color)":i.tier===4?"var(--tier-4-color)":(i.tier===5,"var(--tier-5-color)")},children:i.name}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{className:"node-machine-count",style:Kr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Rr}),Tt!=="free"&&_.jsx("button",{onClick:me=>{me.stopPropagation(),I&&I(t,Tt,a)},onDoubleClick:me=>me.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:me=>me.currentTarget.style.opacity="1",onMouseLeave:me=>me.currentTarget.style.opacity="0.8",title:Tt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Nt=e.cappedMachineCount)==null?void 0:Nt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((ln=e.cappedMachineCount)==null?void 0:ln.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Tt==="locked"?"":""})]})]})]})]}),_.jsxs("div",{className:"node-io-area",children:[_.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:ot&&rt?`${ct}px 1fr ${dt}px`:"1fr",padding:`0 ${uw}px`},children:[ot&&_.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((me,ut)=>_.jsx("div",{className:"node-rect-wrapper",children:_.jsx(dw,{side:"left",index:ut,width:ct,input:me,onClick:l,nodeId:t,formatQuantity:se,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${ut}-${me.product_id}`))}),ot&&rt&&_.jsx("div",{className:"node-io-gap"}),rt&&_.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((me,ut)=>_.jsx("div",{className:"node-rect-wrapper",children:_.jsx(dw,{side:"right",index:ut,width:dt,input:me,onClick:d,nodeId:t,formatQuantity:se,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${ut}-${me.product_id}`))})]}),_.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((me,ut)=>_.jsx(pw,{side:"left",index:ut,onClick:l,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Ve,rightCount:He},`handle-left-${t}-${ut}`)),n.outputs.map((me,ut)=>_.jsx(pw,{side:"right",index:ut,onClick:d,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Ve,rightCount:He},`handle-right-${t}-${ut}`))]})]})]}),j&&_.jsx(Z3,{recipeType:j,nodeId:t,currentSettings:j==="drill"?n.drillSettings:j==="assembler"?n.assemblerSettings:j==="treeFarm"?n.treeFarmSettings:j==="firebox"?n.fireboxSettings:j==="temperature"||j==="boiler"?n.temperatureSettings:j==="chemicalPlant"?n.chemicalPlantSettings:j==="wasteFacility"?n.wasteFacilitySettings:j==="liquidDump"?n.liquidDumpSettings:j==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:b||0,onSettingsChange:j==="drill"?m:j==="assembler"?f:j==="treeFarm"?h:j==="firebox"?g:j==="temperature"?x:j==="boiler"?q:j==="chemicalPlant"?w:j==="wasteFacility"?e.onWasteFacilitySettingsChange:j==="liquidDump"?e.onLiquidDumpSettingsChange:j==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>P(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,i=t.data;return!(n.recipe!==i.recipe||n.machineCount!==i.machineCount||n.flows!==i.flows||n.suggestions!==i.suggestions||n.displayMode!==i.displayMode||n.machineDisplayMode!==i.machineDisplayMode||n.isTarget!==i.isTarget||n.zoomLevel!==i.zoomLevel||n.machineCountMode!==i.machineCountMode)}),dw=({side:e,index:t,width:n,input:i,onClick:a,nodeId:s,formatQuantity:u,isMobile:l,mobileActionMode:d})=>{const p=e==="left",m=_i(i.product_id,bt,i.acceptedType),f=u(i.quantity),h=!l||d==="pan";return _.jsx("div",{onClick:g=>{a&&h&&(g.stopPropagation(),a(i.product_id,s,t,g))},title:`${f}x ${m}`,className:`node-rect ${p?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${Ps}px`,minWidth:`${n}px`},children:_.jsxs("span",{className:"node-rect-text",children:[f,"x ",m]})})},pw=({side:e,index:t,onClick:n,nodeId:i,productId:a,flows:s,onHandleDoubleClick:u,suggestions:l,input:d,data:p,leftCount:m,rightCount:f})=>{var D,O;const g=getComputedStyle(document.documentElement),x=g.getPropertyValue("--handle-input-supplied").trim(),q=g.getPropertyValue("--handle-input-deficient").trim(),w=g.getPropertyValue("--handle-output-connected").trim(),b=g.getPropertyValue("--handle-output-excess").trim();let C=e==="left"?x:w;if(s){const F=e==="left"?(D=s.inputFlows)==null?void 0:D[t]:(O=s.outputFlows)==null?void 0:O[t];if(F){const Q=e==="left"?F.needed-F.connected:F.produced-F.connected;Math.abs(Q)>1e-6&&Q>0&&(C=e==="left"?q:b)}}const S=bt(a),I=(S==null?void 0:S.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",P=12+(Math.max(m,f)-(e==="left"?m:f))*(Ps+A0)/2+t*(Ps+A0)+Ps/2+11;return _.jsx(Hs,{type:e==="left"?"target":"source",position:e==="left"?$e.Left:$e.Right,id:`${e}-${t}`,style:{background:C,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:I,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${P}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:F=>{n&&F.ctrlKey&&(F.stopPropagation(),n(a,i,t,F))},onDoubleClick:F=>{u&&(F.stopPropagation(),u(i,e,t,a,l))}})},rV=({id:e,sourceX:t,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,data:l})=>{const d=(l==null?void 0:l.edgePath)||"orthogonal",p=(l==null?void 0:l.edgeStyle)||"animated",[m]=A.useMemo(()=>d==="straight"?rg({sourceX:t,sourceY:n,targetX:i,targetY:a}):d==="orthogonal"?Gl({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u,borderRadius:8}):tg({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),[t,n,i,a,s,u,d]),f=p==="animated"?"custom-edge custom-edge-animated":p==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return _.jsx("path",{id:e,className:f,d:m,fill:"none"})},nV=A.memo(rV,(e,t)=>{var n,i,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((i=t.data)==null?void 0:i.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),wa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},iV=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:wa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],rc=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,i])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,i)})},Ol=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):wa}catch{return wa}},L0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),oV=()=>(rc(wa),L0(wa),wa),aV=({onClose:e})=>{const[t,n]=A.useState(Ol()),[i,a]=A.useState(!1),s=f=>{const h={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},g={...f.theme,...h};n(g),rc(g),L0(g)},u=(f,h)=>{const g={...t,[f]:h};n(g),rc(g),L0(g)},l=()=>{const f=oV();n(f)},d=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],p=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],m=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:f=>f.stopPropagation(),style:{width:i?"700px":"600px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Theme Editor"}),i?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[_.jsxs("div",{className:"theme-group",children:[_.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[_.jsxs("div",{children:[_.jsx("label",{className:"theme-color-label",children:"Path Type:"}),_.jsx("select",{value:t.edgePath||"bezier",onChange:f=>u("edgePath",f.target.value),className:"select",style:{marginTop:"6px"},children:p.map(f=>_.jsx("option",{value:f.value,children:f.label},f.value))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"theme-color-label",children:"Line Style:"}),_.jsx("select",{value:t.edgeStyle||"animated",onChange:f=>u("edgeStyle",f.target.value),className:"select",style:{marginTop:"6px"},children:m.map(f=>_.jsx("option",{value:f.value,children:f.label},f.value))})]})]})]}),d.map(f=>_.jsxs("div",{className:"theme-group",children:[_.jsx("h3",{className:"theme-group-title",children:f.title}),_.jsx("div",{className:"theme-color-grid",children:f.colors.map(h=>{const g=t[h.key]||"#000000",x=g.length>7?g.substring(0,7):g;return _.jsxs("div",{className:"theme-color-item",children:[_.jsx("label",{className:"theme-color-label",children:h.label}),_.jsxs("div",{className:"theme-color-inputs",children:[_.jsx("input",{type:"color",value:x,onChange:q=>{const w=t[h.key];if(w&&w.length>7){const b=w.substring(7);u(h.key,q.target.value+b)}else u(h.key,q.target.value)},className:"theme-color-picker"}),_.jsx("input",{type:"text",value:t[h.key],onChange:q=>u(h.key,q.target.value),className:"input theme-color-text"})]})]},h.key)})})]},f.title))]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[_.jsx("button",{onClick:l,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),_.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[_.jsx("div",{style:{marginBottom:"20px"},children:_.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:iV.map(f=>_.jsx("div",{onClick:()=>s(f),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:f.name}),_.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:f.description})]}),_.jsx("div",{style:{display:"flex",gap:"6px"},children:[f.theme.colorPrimary,f.theme.bgMain,f.theme.inputBorder,f.theme.outputBorder].map((h,g)=>_.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},g))})]})},f.id))})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[_.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),_.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},sV=({onClose:e})=>_.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Help & Controls"}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",_.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),_.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:_.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[_.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)"},children:[_.jsx("div",{children:"Cycle: 4s"}),_.jsx("div",{children:"Power: 150kW"}),_.jsx("div",{children:"Pollution: 0%/hr"})]}),_.jsxs("div",{style:{textAlign:"right"},children:[_.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),_.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),_.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),_.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),_.jsx("div",{style:{minWidth:"250px"},children:_.jsxs("div",{style:{marginBottom:"15px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),_.jsxs("div",{style:{marginTop:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),_.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),_.jsxs("div",{style:{marginTop:"25px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",_.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:["Use ",_.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",_.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:["Use ",_.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),_.jsxs("div",{style:{paddingLeft:"15px"},children:[_.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),_.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),_.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),_.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),_.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),vc="industrialist_saves",Ta="industrialist_current_save_id",ja=()=>{try{const e=localStorage.getItem(vc);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading saves:",e),{}}},uV=(e,t)=>{var n;try{const i=ja(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return i[a]=s,localStorage.setItem(vc,JSON.stringify(i)),localStorage.setItem(Ta,a),s}catch(i){return console.error("Error saving canvas:",i),null}},lV=e=>{try{const n=ja()[e];return n?(localStorage.setItem(Ta,e),n.data):null}catch(t){return console.error("Error loading save:",t),null}},cV=e=>{try{const t=ja();return delete t[e],localStorage.setItem(vc,JSON.stringify(t)),localStorage.getItem(Ta)===e&&localStorage.removeItem(Ta),!0}catch(t){return console.error("Error deleting save:",t),!1}},dV=(e,t)=>{try{const n=ja();return n[e]?(n[e].name=t,localStorage.setItem(vc,JSON.stringify(n)),!0):!1}catch(n){return console.error("Error renaming save:",n),!1}},pV=()=>{var e;try{const t=localStorage.getItem(Ta);return t&&((e=ja()[t])==null?void 0:e.name)||"Untitled"}catch{return"Untitled"}},fV=({onClose:e,onLoad:t,currentCanvas:n,onImport:i,onExportCanvas:a})=>{const[s,u]=A.useState({}),[l,d]=A.useState(""),[p,m]=A.useState(null),[f,h]=A.useState(""),[g,x]=A.useState(null);A.useEffect(()=>{q()},[]);const q=()=>{const j=ja();u(j);const P=localStorage.getItem(Ta);x(P)},w=()=>{if(!l.trim()){alert("Please enter a name for your save");return}const j=uV(l.trim(),n);j?(d(""),q(),alert(`Canvas saved as "${j.name}"`)):alert("Failed to save canvas")},b=j=>{if(!window.confirm("Load this save? Your current canvas will be replaced."))return;const P=lV(j);P?(x(j),t(P),e()):alert("Failed to load save")},C=j=>{const P=s[j];window.confirm(`Delete save "${P.name}"? This cannot be undone.`)&&(cV(j)?q():alert("Failed to delete save"))},S=j=>{m(j),h(s[j].name)},E=j=>{if(!f.trim()){alert("Name cannot be empty");return}dV(j,f.trim())?(q(),m(null),h("")):alert("Failed to rename save")},I=()=>{m(null),h("")},M=j=>new Date(j).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),T=Object.values(s).sort((j,P)=>P.timestamp-j.timestamp);return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Save Manager"}),_.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:pV()})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[_.jsx("input",{type:"text",value:l,onChange:j=>d(j.target.value),onKeyPress:j=>j.key==="Enter"&&w(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),_.jsx("button",{onClick:w,className:"btn btn-primary",style:{minWidth:"120px"},children:"Save Current"})]}),_.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{onClick:()=>{i&&i()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),_.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[_.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",T.length,")"]}),T.length===0?_.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:T.map(j=>_.jsxs("div",{style:{padding:"15px",background:g===j.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:g===j.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[p===j.id?_.jsx("div",{style:{marginBottom:"10px"},children:_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("input",{type:"text",value:f,onChange:P=>h(P.target.value),onKeyPress:P=>{P.key==="Enter"&&E(j.id),P.key==="Escape"&&I()},className:"input",style:{flex:1},autoFocus:!0}),_.jsx("button",{onClick:()=>E(j.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),_.jsx("button",{onClick:I,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):_.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[j.name,g===j.id&&_.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[M(j.timestamp),"  ",j.nodeCount," nodes"]})]})}),p!==j.id&&_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{onClick:()=>b(j.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),_.jsx("button",{onClick:()=>S(j.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),_.jsx("button",{onClick:()=>C(j.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},j.id))})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},_V=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],mV=({recipe:e,onClose:t,onSave:n,availableProducts:i,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var M,T,j;const l=!u&&_V.includes(e.id),d=!u&&(((M=e.inputs)==null?void 0:M.some(P=>P.product_id==="p_variableproduct"))||((T=e.outputs)==null?void 0:T.some(P=>P.product_id==="p_variableproduct"))),[p,m]=A.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),f=(P,D)=>{m(O=>({...O,[P]:D}))},h=(P,D,O)=>{const F=[...p.inputs];F[P]={...F[P],[D]:O},m(Q=>({...Q,inputs:F}))},g=(P,D,O)=>{const F=[...p.outputs];F[P]={...F[P],[D]:O},m(Q=>({...Q,outputs:F}))},x=()=>{const P=[...p.inputs,{product_id:"",quantity:1}];m(D=>({...D,inputs:P}))},q=P=>{const D=p.inputs.filter((O,F)=>F!==P);m(O=>({...O,inputs:D}))},w=()=>{const P=[...p.outputs,{product_id:"",quantity:1}];m(D=>({...D,outputs:P}))},b=P=>{const D=p.outputs.filter((O,F)=>F!==P);m(O=>({...O,outputs:D}))},C=P=>{const O=`r_${P.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,F=s.filter(V=>V.id.startsWith(O)).map(V=>{const X=V.id.match(/_(\d+)$/);return X?parseInt(X[1]):0});let Q=1;for(;F.includes(Q);)Q++;return`${O}${String(Q).padStart(2,"0")}`},S=()=>{if(u){if(!p.name||!p.name.trim())return alert("Recipe name is required"),!1;if(!p.machine_id)return alert("Machine is required"),!1;if(!a.find(X=>X.id===p.machine_id))return alert("Selected machine does not exist"),!1}const D=[...p.inputs.map(V=>V.product_id),...p.outputs.map(V=>V.product_id)].filter(V=>V&&V!=="p_variableproduct"&&V!=="p_any_fluid"&&V!=="p_any_item"&&!i.find(X=>X.id===V));if(D.length>0)return alert(`Invalid product IDs: ${D.join(", ")}`),!1;const O=p.inputs.some(V=>!V.product_id),F=p.outputs.some(V=>!V.product_id);return O||F?(alert("All inputs and outputs must have a product selected"),!1):typeof p.cycle_time=="number"&&p.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((p.inputs.some(V=>V.quantity==="Variable")||p.outputs.some(V=>V.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},E=()=>{if(!S())return;let P={...p};if(u){const D=a.find(O=>O.id===p.machine_id);P.id=C(D.name)}n(P),t()},I=a.find(P=>P.id===e.machine_id);return l||d?_.jsx("div",{className:"modal-overlay",onClick:t,children:_.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"600px"},children:[_.jsx("h2",{className:"modal-title",children:l?"Special Recipe":"Variable Product Recipe"}),_.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:l?_.jsxs(_.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",_.jsx("br",{}),_.jsx("br",{}),"Special recipes include:",_.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[_.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),_.jsx("li",{children:"Logic Assembler (microchip stages)"}),_.jsx("li",{children:"Tree Farm (layout configuration)"}),_.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),_.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):_.jsx(_.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),_.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):_.jsx("div",{className:"modal-overlay",onClick:t,children:_.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[_.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),_.jsx("input",{type:"text",value:p.name,onChange:P=>f("name",P.target.value),placeholder:"Enter recipe name",className:"input"})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?_.jsxs("select",{value:p.machine_id,onChange:P=>f("machine_id",P.target.value),className:"select",children:[_.jsx("option",{value:"",children:"Select a machine"}),a.sort((P,D)=>P.name.localeCompare(D.name)).map(P=>_.jsxs("option",{value:P.id,children:[P.name," (Tier ",P.tier||1,")"]},P.id))]}):_.jsx("div",{style:{color:(I==null?void 0:I.tier)===1?"var(--tier-1-color)":(I==null?void 0:I.tier)===2?"var(--tier-2-color)":(I==null?void 0:I.tier)===3?"var(--tier-3-color)":(I==null?void 0:I.tier)===4?"var(--tier-4-color)":(I==null?void 0:I.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(I==null?void 0:I.name)||e.machine_id}),u&&p.machine_id&&_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",C(((j=a.find(P=>P.id===p.machine_id))==null?void 0:j.name)||"")]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:p.cycle_time==="Variable"?"":p.cycle_time,onChange:P=>f("cycle_time",parseFloat(P.target.value)),placeholder:p.cycle_time==="Variable"?"Variable":"",className:"input",disabled:p.cycle_time==="Variable",title:p.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),_.jsx("input",{type:"number",step:"1000",value:typeof p.power_consumption=="number"?p.power_consumption:"",onChange:P=>f("power_consumption",parseFloat(P.target.value)),placeholder:"Variable",className:"input"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),_.jsxs("select",{value:p.power_type||"MV",onChange:P=>f("power_type",P.target.value),className:"select",children:[_.jsx("option",{value:"LV",children:"LV"}),_.jsx("option",{value:"MV",children:"MV"}),_.jsx("option",{value:"HV",children:"HV"})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),_.jsx("input",{type:"number",step:"0.1",value:p.pollution,onChange:P=>f("pollution",parseFloat(P.target.value)),className:"input"})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[_.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),_.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),p.inputs.map((P,D)=>_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[_.jsxs("select",{value:P.product_id,onChange:O=>h(D,"product_id",O.target.value),className:"select",style:{flex:2},children:[_.jsx("option",{value:"",children:"Select Product"}),[...i].filter(O=>O.id!=="p_variableproduct"&&O.id!=="p_any_fluid"&&O.id!=="p_any_item").sort((O,F)=>O.name.localeCompare(F.name)).map(O=>_.jsxs("option",{value:O.id,children:[O.name," (",O.type,")"]},O.id))]}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:O=>h(D,"quantity",parseFloat(O.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),_.jsx("button",{onClick:()=>q(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.inputs.length===0&&_.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[_.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),_.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),p.outputs.map((P,D)=>_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[_.jsxs("select",{value:P.product_id,onChange:O=>g(D,"product_id",O.target.value),className:"select",style:{flex:2},children:[_.jsx("option",{value:"",children:"Select Product"}),[...i].filter(O=>O.id!=="p_variableproduct"&&O.id!=="p_any_fluid"&&O.id!=="p_any_item").sort((O,F)=>O.name.localeCompare(F.name)).map(O=>_.jsxs("option",{value:O.id,children:[O.name," (",O.type,")"]},O.id))]}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:O=>g(D,"quantity",parseFloat(O.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),_.jsx("button",{onClick:()=>b(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.outputs.length===0&&_.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},nc="industrialist_custom_products",ic="industrialist_custom_machines",oc="industrialist_custom_recipes",hV=(e,t,n)=>{localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(e)),localStorage.getItem(ic)||localStorage.setItem(ic,JSON.stringify(t)),localStorage.getItem(oc)||localStorage.setItem(oc,JSON.stringify(n))},Pa=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Ra=()=>{try{const e=localStorage.getItem(ic);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},nu=()=>{try{const e=localStorage.getItem(oc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Us=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Gs=e=>{try{return localStorage.setItem(ic,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},Ks=e=>{try{return localStorage.setItem(oc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},fw=(e,t)=>{const n=Pa(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Us(n)):!1},_w=(e,t)=>{const n=Ra(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Gs(n)):!1},yV=(e,t)=>{const n=nu(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Ks(n)):!1},gV=e=>Us(e),vV=e=>Gs(e),xV=e=>Ks(e),wV=(e,t,n)=>{const i={};return e&&(i.products=Pa()),t&&(i.machines=Ra()),n&&(i.recipes=nu()),i},bV=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=Pa(),i=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Us(a)&&(t.products=e.products.length)}if(e.machines){const n=Ra(),i=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Gs(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=nu(),i=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Ks(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,Sr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),Pp=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,qV=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return Mn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const l=a.inputs.some(p=>p.product_id===e&&p.product_id!=="p_variableproduct"),d=t.includes(e)&&n.includes(a.id)&&a.inputs.some(p=>p.product_id==="p_variableproduct");return l||d||u})},SV=e=>Mn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),Cl=e=>{const t=Mn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[j0]:e==="m_liquid_dump"?[V0]:e==="m_liquid_burner"?[F0]:t},bE=(e,t,n,i,a=Hr)=>{const s=(i==null?void 0:i.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const l=Math.max(t,a),d=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return l<s?{...u,temperature:l,quantity:0,originalQuantity:d}:{...u,temperature:l,quantity:d,originalQuantity:d}}return u}if(nE(u.product_id)){const l=Math.max(t,a);return{...u,temperature:l}}return u})},bs=(e,t)=>{let n={...e};const i=pr[t];if(i){const s=d3(t),u=i.type==="boiler",l=u?Ki:Hr,d=u?{...s,coolantTemp:Ki}:s;let p=null;if(i.type==="product_dependent"&&e.inputs){const h=e.inputs.find(g=>["p_water","p_filtered_water","p_distilled_water"].includes(g.product_id));p=(h==null?void 0:h.product_id)||null}const m=pg(t,d,l,p,u?Ki:null),f=bE(e.outputs,m,u,i,l);n={...n,outputs:f,temperatureSettings:d}}if(Ur(t)){const s=an[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:In})}return n},CV=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:i,onDataChange:a})=>{const[s,u]=A.useState("products"),[l,d]=A.useState(""),[p,m]=A.useState(!0),[f,h]=A.useState(!0),[g,x]=A.useState(!0),q=A.useRef(null),w=()=>{const S=wV(p,f,g),E=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),I=URL.createObjectURL(E),M=document.createElement("a");M.href=I,M.download=`industrialist-data-${Date.now()}.json`,M.click(),URL.revokeObjectURL(I)},b=()=>{var S;(S=q.current)==null||S.click()},C=S=>{var M;const E=(M=S.target.files)==null?void 0:M[0];if(!E)return;const I=new FileReader;I.onload=T=>{try{const j=JSON.parse(T.target.result),P=j.products||j.machines||j.recipes,D=j.canvas;if(!P&&D){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),S.target.value="";return}if(!P){alert("This file does not contain any game data (products, machines, or recipes)."),S.target.value="";return}if(D&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){S.target.value="";return}const O=bV(j);let F=`Import complete:
`;O.products>0&&(F+=`- ${O.products} products imported/updated
`),O.machines>0&&(F+=`- ${O.machines} machines imported/updated
`),O.recipes>0&&(F+=`- ${O.recipes} recipes imported/updated
`),O.errors.length>0&&(F+=`
Errors: ${O.errors.join(", ")}`),alert(F),a()}catch(j){alert(`Import failed: ${j.message}`)}},I.readAsText(E),S.target.value=""};return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[_.jsx("h2",{className:"modal-title",children:"Data Manager"}),_.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[_.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),_.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:p,onChange:S=>m(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:f,onChange:S=>h(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:g,onChange:S=>x(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),_.jsx("button",{onClick:w,className:"btn btn-primary",children:"Export Data"})]})]}),_.jsx("input",{ref:q,type:"file",accept:".json",style:{display:"none"},onChange:C})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[_.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),_.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),_.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:l,onChange:S=>d(S.target.value),className:"input"})}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&_.jsx(kV,{searchTerm:l,defaultProducts:t,onDataChange:a}),s==="machines"&&_.jsx(MV,{searchTerm:l,defaultMachines:n,onDataChange:a}),s==="recipes"&&_.jsx(EV,{searchTerm:l,defaultRecipes:i,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},kV=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[f,h]=A.useState({name:"",type:"item",price:0,rp_multiplier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Pa())},x=i.filter(M=>M.name.toLowerCase().includes(e.toLowerCase())||M.id.toLowerCase().includes(e.toLowerCase())).sort((M,T)=>M.name.localeCompare(T.name)),q=M=>{u(M.id),d({price:M.price==="Variable"?"":M.price,rp_multiplier:M.rp_multiplier==="Variable"?"":M.rp_multiplier,type:M.type})},w=M=>{const T={price:l.price===""?"Variable":parseFloat(l.price),rp_multiplier:l.rp_multiplier===""?"Variable":parseFloat(l.rp_multiplier),type:l.type};fw(M,T)?(g(),n(),u(null)):alert("Failed to update product")},b=()=>{u(null),d({})},C=M=>{const T=t.find(P=>P.id===M);if(!T){alert("Default product not found");return}const j={price:T.price,rp_multiplier:T.rp_multiplier,type:T.type};fw(M,j)?(g(),n()):alert("Failed to reset product to default")},S=M=>"p_"+M.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!f.name.trim()){alert("Product name is required");return}const M=S(f.name);if(i.find(P=>P.id===M)){alert(`Product ID "${M}" already exists. Please use a different name.`);return}const T={id:M,name:f.name.trim(),type:f.type,price:parseFloat(f.price)||0,rp_multiplier:parseFloat(f.rp_multiplier)||1},j=[...i,T];Us(j)?(g(),n(),m(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},I=M=>{var j;if(!window.confirm(`Delete product "${(j=i.find(P=>P.id===M))==null?void 0:j.name}"? This cannot be undone.`))return;const T=i.filter(P=>P.id!==M);Us(T)?(g(),n()):alert("Failed to delete product")};return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Product"})}),p&&_.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),_.jsx("input",{type:"text",value:f.name,onChange:M=>h({...f,name:M.target.value}),className:"input",placeholder:"Product name"}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?S(f.name):"p_..."]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),_.jsxs("select",{value:f.type,onChange:M=>h({...f,type:M.target.value}),className:"select",children:[_.jsx("option",{value:"item",children:"Item"}),_.jsx("option",{value:"fluid",children:"Fluid"})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),_.jsx("input",{type:"number",value:f.price,onChange:M=>h({...f,price:M.target.value}),className:"input",placeholder:"0"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),_.jsx("input",{type:"number",step:"0.1",value:f.rp_multiplier,onChange:M=>h({...f,rp_multiplier:M.target.value}),className:"input",placeholder:"1"})]})]}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Product Name"}),_.jsx("div",{children:"Type"}),_.jsx("div",{children:"Price"}),_.jsx("div",{children:"RP Mult"}),_.jsx("div",{children:"Actions"})]}),x.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name}),s===M.id?_.jsxs(_.Fragment,{children:[_.jsxs("select",{value:l.type,onChange:T=>d({...l,type:T.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[_.jsx("option",{value:"item",children:"Item"}),_.jsx("option",{value:"fluid",children:"Fluid"})]}),_.jsx("input",{type:"number",value:l.price,onChange:T=>d({...l,price:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:M.price==="Variable",title:M.price==="Variable"?"Cannot edit Variable values":""}),_.jsx("input",{type:"number",value:l.rp_multiplier,onChange:T=>d({...l,rp_multiplier:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:M.rp_multiplier==="Variable",title:M.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>w(M.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),_.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.type}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.price==="Variable"?"Variable":`$${Sr(M.price)}`}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.rp_multiplier==="Variable"?"Variable":`${M.rp_multiplier>=1e3?Sr(M.rp_multiplier):M.rp_multiplier}x`}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>q(M),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>C(M.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),_.jsx("button",{onClick:()=>I(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},M.id))]})},MV=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[f,h]=A.useState({name:"",cost:0,tier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Ra())},x=i.filter(M=>M.name.toLowerCase().includes(e.toLowerCase())||M.id.toLowerCase().includes(e.toLowerCase())).sort((M,T)=>M.name.localeCompare(T.name)),q=M=>{u(M.id),d({cost:M.cost,tier:M.tier||1})},w=M=>{const T={cost:parseFloat(l.cost),tier:parseInt(l.tier)};_w(M,T)?(g(),n(),u(null)):alert("Failed to update machine")},b=()=>{u(null),d({})},C=M=>{const T=t.find(P=>P.id===M);if(!T){alert("Default machine not found");return}const j={cost:T.cost,tier:T.tier};_w(M,j)?(g(),n()):alert("Failed to reset machine to default")},S=M=>"m_"+M.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!f.name.trim()){alert("Machine name is required");return}const M=S(f.name);if(i.find(P=>P.id===M)){alert(`Machine ID "${M}" already exists. Please use a different name.`);return}const T={id:M,name:f.name.trim(),cost:parseFloat(f.cost)||0,tier:parseInt(f.tier)||1},j=[...i,T];Gs(j)?(g(),n(),m(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},I=M=>{var j;if(!window.confirm(`Delete machine "${(j=i.find(P=>P.id===M))==null?void 0:j.name}"? This cannot be undone.`))return;const T=i.filter(P=>P.id!==M);Gs(T)?(g(),n()):alert("Failed to delete machine")};return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Machine"})}),p&&_.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[_.jsxs("div",{style:{gridColumn:"1 / -1"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),_.jsx("input",{type:"text",value:f.name,onChange:M=>h({...f,name:M.target.value}),className:"input",placeholder:"Machine name"}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?S(f.name):"m_..."]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),_.jsx("input",{type:"number",value:f.cost,onChange:M=>h({...f,cost:M.target.value}),className:"input",placeholder:"0"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),_.jsxs("select",{value:f.tier,onChange:M=>h({...f,tier:M.target.value}),className:"select",children:[_.jsx("option",{value:"1",children:"Tier 1"}),_.jsx("option",{value:"2",children:"Tier 2"}),_.jsx("option",{value:"3",children:"Tier 3"}),_.jsx("option",{value:"4",children:"Tier 4"}),_.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Machine Name"}),_.jsx("div",{children:"Cost"}),_.jsx("div",{children:"Tier"}),_.jsx("div",{children:"Actions"})]}),x.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name}),s===M.id?_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"number",value:l.cost,onChange:T=>d({...l,cost:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),_.jsx("input",{type:"number",min:"1",max:"5",value:l.tier,onChange:T=>d({...l,tier:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>w(M.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),_.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",Sr(M.cost)]}),_.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",M.tier||1]}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>q(M),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>C(M.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),_.jsx("button",{onClick:()=>I(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},M.id))]})},EV=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:i,onDataChange:a})=>{const[s,u]=A.useState([]),[l,d]=A.useState([]),[p,m]=A.useState([]),[f,h]=A.useState(null),[g,x]=A.useState(!1);A.useEffect(()=>{q(),w(),b()},[]);const q=()=>{u(nu())},w=()=>{d(Pa())},b=()=>{m(Ra())},C=(M,T=!1)=>{if(T){const j=[...s,M];Ks(j)?(q(),w(),b(),a()):alert("Failed to create recipe")}else yV(M.id,M)?(q(),w(),b(),a()):alert("Failed to save recipe")},S=M=>{var j;if(!window.confirm(`Delete recipe "${((j=s.find(P=>P.id===M))==null?void 0:j.name)||M}"? This cannot be undone.`))return;const T=s.filter(P=>P.id!==M);Ks(T)?(q(),w(),b(),a()):alert("Failed to delete recipe")},E=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),x(!0)},I=s.filter(M=>{var T;return((T=M.name)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))||M.id.toLowerCase().includes(e.toLowerCase())}).sort((M,T)=>{const j=M.name||M.id,P=T.name||T.id;return j.localeCompare(P)});return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Recipe Name"}),_.jsx("div",{children:"Machine"}),_.jsx("div",{children:"Cycle Time"}),_.jsx("div",{children:"Power"}),_.jsx("div",{children:"Actions"})]}),I.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name||M.id}),_.jsx("div",{style:{color:(()=>{const T=p.find(j=>j.id===M.machine_id);if(!T)return"var(--text-secondary)";switch(T.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const T=p.find(j=>j.id===M.machine_id);return T?T.name:M.machine_id})()}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof M.cycle_time=="number"?`${M.cycle_time}s`:String(M.cycle_time)}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof M.power_consumption=="number"?`${Sr(M.power_consumption)}W`:typeof M.power_consumption=="object"&&M.power_consumption!==null?`${Sr(M.power_consumption.max||M.power_consumption.average||0)}W`:String(M.power_consumption)}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>{h(M),x(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>S(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},M.id)),f&&_.jsx(mV,{recipe:f,onClose:()=>{h(null),x(!1)},onSave:M=>C(M,g),availableProducts:l,defaultMachines:p,allRecipes:s,isCreatingNew:g})]})},Rs=(e,t)=>{var s,u,l,d,p,m;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},i=e.length;for(let f=0;f<i;f++){const h=e[f],g=h.id,x=(s=h.data)==null?void 0:s.recipe,q=((u=h.data)==null?void 0:u.machineCount)||0,w=(l=h.data)==null?void 0:l.machine;if(!x)return;const b=x.isMineshaftDrill||x.id==="r_mineshaft_drill",C=x.isLogicAssembler||x.id==="r_logic_assembler",S=x.isTreeFarm||x.id==="r_tree_farm",E=w&&w.id==="m_industrial_firebox",I=w&&Ur(w.id),M=b||C||S||E||I;let T=x.cycle_time;if(T==="Variable"||typeof T!="number"||T<=0){if(!M)return;T=1}const j=w&&Ur(w.id),P=j?an[w.id]:null;if(j&&(P==null?void 0:P.type)==="steam_input"&&!(w.id==="m_steam_cracking_plant"&&!hi(x))){const F=x.tempDependentInputTemp??In;T=Wn(w.id,F,T)}const D={id:g,recipe:x,machineCount:q,cycleTime:T,isSpecialRecipe:M,isMineshaftDrill:b,isLogicAssembler:C,isTempDependent:j,machineCountMode:((d=h.data)==null?void 0:d.machineCountMode)||"free",cappedMachineCount:(p=h.data)==null?void 0:p.cappedMachineCount,inputs:[],outputs:[]};(m=x.inputs)==null||m.forEach((F,Q)=>{const V=F.product_id;if(V==="p_variableproduct")return;const X=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!M)return;const W=b?X*q:X/T*q,te=D.inputs.length;D.inputs.push({productId:V,quantity:X,rate:W,index:te,recipeIndex:Q,connectedRate:0,temperature:null}),n.products[V]||(n.products[V]={producers:[],consumers:[],connections:[]}),n.products[V].consumers.push({nodeId:g,inputIndex:te,rate:W})});const O=x.outputs;O==null||O.forEach((F,Q)=>{const V=F.product_id;if(V==="p_variableproduct")return;const X=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!M)return;const W=b?X*q:X/T*q,te=D.outputs.length;D.outputs.push({productId:V,quantity:X,rate:W,index:te,recipeIndex:Q,connectedRate:0,temperature:F.temperature||null}),n.products[V]||(n.products[V]={producers:[],consumers:[],connections:[]}),n.products[V].producers.push({nodeId:g,outputIndex:te,rate:W})}),n.nodes[g]=D}const a=t.length;for(let f=0;f<a;f++){const h=t[f],g=n.nodes[h.source],x=n.nodes[h.target];if(!g||!x)continue;const q=parseInt(h.sourceHandle.split("-")[1]),w=parseInt(h.targetHandle.split("-")[1]),b=g.outputs.find(I=>I.recipeIndex===q),C=x.inputs.find(I=>I.recipeIndex===w);if(!b||!C||b.productId!==C.productId)return;const S=b.productId;b.temperature!==void 0&&b.temperature!==null&&(C.temperature=b.temperature);const E={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:b.index,targetInputIndex:C.index,productId:S,sourceRate:b.rate,targetRate:C.rate,flowRate:0,temperature:b.temperature||null};n.connections.push(E),n.products[S]&&n.products[S].connections.push(E)}return n};class IV{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}}let D0=new IV(100);class TV{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const i=this.find(t),a=this.find(n);i!==a&&(this.rank[i]<this.rank[a]?this.parent[i]=a:this.rank[i]>this.rank[a]?this.parent[a]=i:(this.parent[a]=i,this.rank[i]++))}}const NV=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const i=[],a=new Map;n.producers.forEach(m=>{const f=`out:${m.nodeId}:${m.outputIndex}`;a.has(f)||(a.set(f,i.length),i.push({type:"output",nodeId:m.nodeId,index:m.outputIndex,rate:m.rate}))}),n.consumers.forEach(m=>{const f=`in:${m.nodeId}:${m.inputIndex}`;a.has(f)||(a.set(f,i.length),i.push({type:"input",nodeId:m.nodeId,index:m.inputIndex,rate:m.rate}))});const s=new TV(i.length);n.connections.forEach(m=>{const f=`out:${m.sourceNodeId}:${m.sourceOutputIndex}`,h=`in:${m.targetNodeId}:${m.targetInputIndex}`,g=a.get(f),x=a.get(h);g!==void 0&&x!==void 0&&s.union(g,x)});const u=new Map;for(let m=0;m<i.length;m++){const f=s.find(m);u.has(f)||u.set(f,[]),u.get(f).push(m)}const l=[],d=new Map;let p=0;return u.forEach((m,f)=>{const h={id:p,ports:m.map(g=>i[g]),connections:[]};n.connections.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=a.get(x);q!==void 0&&s.find(q)===f&&h.connections.push(g)}),m.forEach(g=>{const x=i[g],q=x.type==="output"?`out:${x.nodeId}:${x.index}`:`in:${x.nodeId}:${x.index}`;d.set(q,p)}),l.push(h),p++}),{components:l,portToComponent:d,ports:i,portToIndex:a}},jV=e=>{const t=e.ports.map(i=>`${i.type}:${i.nodeId}:${i.index}:${i.rate}`).sort().join("|"),n=e.connections.map(i=>`${i.sourceNodeId}:${i.sourceOutputIndex}->${i.targetNodeId}:${i.targetInputIndex}`).sort().join("|");return`${t}##${n}`},PV=(e,t,n)=>{const i=qE(e,t),a=SE(e,t),s={totalProduction:i,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:l}=NV(e,t);return u.forEach(d=>{if(d.connections.length===0)return;const p=jV(d),m=`${t}:comp${d.id}`,f=D0.get(m);let h;if(f&&f.hash===p)h=JSON.parse(JSON.stringify(f.result));else{const g=VV(d.connections,i),x=FV(g);h={connectedFlow:0,connections:{}},d.connections.forEach((w,b)=>{const C=x.connectionFlows[b]||0;h.connections[w.id]={flowRate:C,supplyRatio:w.sourceRate>0?C/w.sourceRate:0,demandRatio:w.targetRate>0?C/w.targetRate:0},h.connectedFlow+=C});const q=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});D0.set(m,{hash:p,result:q})}Object.assign(s.connections,h.connections),s.connectedFlow+=h.connectedFlow}),s},RV=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,VV=(e,t)=>{const n=new Map;let i=0;const a=g=>{let x=n.get(g);return x===void 0&&(x=i++,n.set(g,x)),x},s=a("virtual-source"),u=a("virtual-sink"),l=new Map,d=new Map;e.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=`in:${g.targetNodeId}:${g.targetInputIndex}`;a(x),a(q),l.has(x)||l.set(x,g.sourceRate),d.has(q)||d.set(q,g.targetRate)});const p=Array.from({length:i},()=>[]),m=[],f=t||1e6,h=(g,x,q,w=-1)=>{const b=m.length,C=m.length+1;m.push({to:x,cap:q,flow:0,rev:C,connIndex:w}),m.push({to:g,cap:0,flow:0,rev:b,connIndex:-1}),p[g].push(b),p[x].push(C)};return l.forEach((g,x)=>{h(s,a(x),g)}),d.forEach((g,x)=>{h(a(x),u,g)}),e.forEach((g,x)=>{const q=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,w=`in:${g.targetNodeId}:${g.targetInputIndex}`,b=a(q),C=a(w);h(b,C,f,x)}),{adj:p,edges:m,nodeCount:i,SOURCE:s,SINK:u}};class OV{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const FV=e=>{const{adj:t,edges:n,nodeCount:i,SOURCE:a,SINK:s}=e,u=new Int32Array(i),l=new Int32Array(i),d=new OV(i),p=()=>{for(u.fill(-1),u[a]=0,d.clear(),d.push(a);!d.isEmpty();){const w=d.shift(),b=t[w],C=b.length;for(let S=0;S<C;S++){const E=n[b[S]],I=E.cap-E.flow;u[E.to]<0&&I>1e-15&&(u[E.to]=u[w]+1,d.push(E.to))}}return u[s]>=0},m=()=>{const w=[a],b=new Int32Array(i).fill(-1),C=new Uint8Array(i);for(C[a]=1;w.length>0;){const S=w[w.length-1];if(S===s){let M=1e15,T=s;for(;T!==a;){const j=b[T],P=n[j],D=P.cap-P.flow;M=Math.min(M,D);let O=!1;for(let F=0;F<i;F++){const Q=t[F];for(let V=0;V<Q.length;V++)if(Q[V]===j){T=F,O=!0;break}if(O)break}}for(T=s;T!==a;){const j=b[T];n[j].flow+=M,n[n[j].rev].flow-=M;let P=!1;for(let D=0;D<i;D++){const O=t[D];for(let F=0;F<O.length;F++)if(O[F]===j){T=D,P=!0;break}if(P)break}}return M}let E=!1;const I=t[S];for(let M=l[S];M<I.length;M++){const T=I[M],j=n[T],P=j.cap-j.flow;if(u[S]+1===u[j.to]&&P>1e-15&&!C[j.to]){C[j.to]=1,b[j.to]=T,w.push(j.to),l[S]=M,E=!0;break}}E||(w.pop(),l[S]=I.length)}return 0};let f=0,h=0;const g=1e5;for(;p()&&h++<g;)for(l.fill(0);;){const w=m();if(w===0)break;f+=w}const x=[],q=n.length;for(let w=0;w<q;w++){const b=n[w];b.connIndex>=0&&(x[b.connIndex]=RV(b.flow))}return{totalFlow:f,connectionFlows:x}},Rp=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const i=e.nodes[n];t.byNode[n]={inputFlows:i.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:i.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:qE(e,n),totalConsumption:SE(e,n),connectedFlow:0};return}const s=PV(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const l=s.connections[u.id];if(l){t.byConnection[u.id]=l;const d=t.byNode[u.sourceNodeId];d&&(d.outputFlows[u.sourceOutputIndex].connected+=l.flowRate,d.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const p=t.byNode[u.targetNodeId];p&&(p.inputFlows[u.targetInputIndex].connected+=l.flowRate,p.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},qE=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((i,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return i+u.rate},0):0},SE=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((i,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return i+u.rate},0):0},Sn=()=>{D0.clear()},$n=1e-10,AV=(e,t,n,i)=>{var m,f;const a=new Map,s=new Set,u=(m=e.nodes[n])==null?void 0:m.inputs[i];if(!u)return a;const l=u.productId;if(!e.products[l])return a;const p=[{nodeId:n,inputIndex:i,productId:l}];for(s.add(`${n}:${i}`);p.length>0;){const{nodeId:h,inputIndex:g,productId:x}=p.shift();(((f=e.products[x])==null?void 0:f.connections.filter(w=>w.targetNodeId===h&&w.targetInputIndex===g))||[]).forEach(w=>{var E,I;const b=e.nodes[w.sourceNodeId];if(!b)return;const C=`${w.sourceNodeId}:${w.sourceOutputIndex}`,S=(E=t.byNode[w.sourceNodeId])==null?void 0:E.outputFlows[w.sourceOutputIndex];if(S){a.set(C,{nodeId:w.sourceNodeId,outputIndex:w.sourceOutputIndex,maxFlow:S.produced});const M=b.outputs[w.sourceOutputIndex];if(!M)return;(((I=e.products[M.productId])==null?void 0:I.connections.filter(j=>j.sourceNodeId===w.sourceNodeId&&j.sourceOutputIndex===w.sourceOutputIndex))||[]).forEach(j=>{var O;if(j.targetNodeId===h&&j.targetInputIndex===g)return;const P=`${j.targetNodeId}:${j.targetInputIndex}`;if(s.has(P))return;s.add(P);const D=(O=e.nodes[j.targetNodeId])==null?void 0:O.inputs[j.targetInputIndex];D&&p.push({nodeId:j.targetNodeId,inputIndex:j.targetInputIndex,productId:D.productId})})}})}return a},LV=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];s&&a.inputs.forEach((u,l)=>{const d=s.inputFlows[l];if(!d)return;const p=d.needed-d.connected;if(p<=$n)return;if(u.productId,AV(e,t,i,l).forEach((h,g)=>{var P;const x=e.nodes[h.nodeId];if(!x)return;const q=x.machineCount||0;if(q<=0)return;const w=x.machineCountMode||"free";if(w==="locked")return;let b=x.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const C=x.outputs[h.outputIndex];if(!C)return;const S=C.originalQuantity!==void 0?C.originalQuantity:C.quantity;if(typeof S!="number")return;const E=x.isMineshaftDrill?S:S/b;if(typeof E!="number"||E<=$n)return;const I=(P=t.byNode[h.nodeId])==null?void 0:P.outputFlows[h.outputIndex];if(!I)return;const M=p/E;let T=q+M;if(w==="capped"&&x.cappedMachineCount&&(T=Math.min(T,x.cappedMachineCount),T<=q+$n))return;const j=x.outputs.length>1&&x.outputs.some((D,O)=>{if(O===h.outputIndex)return!1;const F=e.products[D.productId];return!F||!F.connections.some(V=>V.sourceNodeId===h.nodeId&&V.sourceOutputIndex===O)?!1:F.connections.some(V=>V.sourceNodeId!==h.nodeId||V.sourceOutputIndex!==O?!1:F.connections.filter(W=>W.targetNodeId===V.targetNodeId&&W.targetInputIndex===V.targetInputIndex&&W.sourceNodeId!==h.nodeId).length===0)});n.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:C.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:I.produced,targetFlow:I.produced+p,deltaFlow:p,currentMachineCount:q,suggestedMachineCount:T,machineDelta:M,hasConstrainedOutputs:j,isMultiOutput:x.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const h=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof h=="number"&&h>$n){const g=p/h,x=(a.machineCount||0)-g;x>$n&&n.push({nodeId:i,handleType:"input",handleIndex:l,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:d.connected,targetFlow:d.connected,deltaFlow:-p,currentMachineCount:a.machineCount||0,suggestedMachineCount:x,machineDelta:-g})}}})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let l=a.cycleTime;(typeof l!="number"||l<=0)&&(l=1),a.outputs.forEach((d,p)=>{var S;const m=s.outputFlows[p];if(!m)return;const f=m.produced-m.connected;if(f<=$n||(a.machineCountMode||"free")==="locked")return;const g=d.originalQuantity!==void 0?d.originalQuantity:d.quantity,x=a.isMineshaftDrill?g:g/l;if(typeof x!="number"||x<=$n)return;const q=f/x,w=u-q;w>$n&&n.push({nodeId:i,handleType:"output",handleIndex:p,productId:d.productId,adjustmentType:"decrease",reason:"excess",currentFlow:m.produced,targetFlow:m.produced-f,deltaFlow:-f,currentMachineCount:u,suggestedMachineCount:w,machineDelta:-q});const b=d.productId;(((S=e.products[b])==null?void 0:S.connections.filter(E=>E.sourceNodeId===i&&E.sourceOutputIndex===p))||[]).forEach(E=>{var Q,V,X,W;const I=e.nodes[E.targetNodeId];if(!I)return;const M=I.machineCount||0;if(M<=0)return;const T=I.machineCountMode||"free";if(T==="locked")return;let j=I.cycleTime;(typeof j!="number"||j<=0)&&(j=1);const P=I.inputs[E.targetInputIndex];if(!P)return;const D=I.isMineshaftDrill?P.quantity:P.quantity/j;if(typeof D!="number"||D<=$n)return;const O=f/D;let F=M+O;T==="capped"&&I.cappedMachineCount&&(F=Math.min(F,I.cappedMachineCount),F<=M+$n)||n.push({nodeId:E.targetNodeId,handleType:"input",handleIndex:E.targetInputIndex,productId:P.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((V=(Q=t.byNode[E.targetNodeId])==null?void 0:Q.inputFlows[E.targetInputIndex])==null?void 0:V.connected)||0,targetFlow:(((W=(X=t.byNode[E.targetNodeId])==null?void 0:X.inputFlows[E.targetInputIndex])==null?void 0:W.connected)||0)+f,deltaFlow:f,currentMachineCount:M,suggestedMachineCount:F,machineDelta:O})})})}),n.forEach(i=>{const a=Math.round(i.suggestedMachineCount*1e10)/1e10,s=Math.round(i.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;i.suggestedMachineCount=u?Math.round(i.suggestedMachineCount*1e20)/1e20:Math.round(i.suggestedMachineCount*1e10)/1e10;const l=Math.round(i.machineDelta*1e10)/1e10,d=Math.round(i.machineDelta*1e20)/1e20,p=Math.abs(d-l)>1e-12;i.machineDelta=p?Math.round(i.machineDelta*1e20)/1e20:Math.round(i.machineDelta*1e10)/1e10}),n},kl=(e,t)=>{const n=[],i=[];Object.keys(e.products).forEach(u=>{const l=e.products[u],d=t.byProduct[u];if(!d)return;const p=d.totalProduction,m=d.connectedFlow,f=p-m;if(Math.abs(f)>1e-6&&f>0){const h=bt(u);h&&n.push({productId:u,product:h,excessRate:f,totalProduction:p,connectedConsumption:m,percentageExcess:p>0?f/p*100:0})}l.consumers.forEach(h=>{var x;const g=(x=t.byNode[h.nodeId])==null?void 0:x.inputFlows[h.inputIndex];if(g){const q=g.needed-g.connected;if(Math.abs(q)>1e-6&&q>0){const w=bt(u);if(w){let b=i.find(C=>C.productId===u);b?(b.deficiencyRate+=q,b.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q})):i.push({productId:u,product:w,deficiencyRate:q,totalConsumption:d.totalConsumption,connectedProduction:m,percentageDeficient:d.totalConsumption>0?q/d.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q}]})}}}})}),n.sort((u,l)=>l.excessRate-u.excessRate),i.sort((u,l)=>l.deficiencyRate-u.deficiencyRate);const s=n.length>0||i.length>0?LV(e,t):[];return{excess:n,deficiency:i,suggestions:s}},mw=(e,t,n={})=>{const{skipTemperature:i=!1,previousTemperatureData:a=null}=n,s=Rs(e,t),u=Rp(s);if(i){const C=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:C}}if(!Object.values(s.nodes).some(C=>{const S=C.recipe.machine_id;return pr[S]||Ur(S)})){const C={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:C}}const d=ew(s,u),p=M0(e,d,s);if(!p.some((C,S)=>{var O,F,Q,V,X,W,te,U;const E=e[S],I=(F=(O=E.data)==null?void 0:O.recipe)==null?void 0:F.tempDependentInputTemp,M=(V=(Q=C.data)==null?void 0:Q.recipe)==null?void 0:V.tempDependentInputTemp,T=(W=(X=E.data)==null?void 0:X.recipe)==null?void 0:W.outputs.map(K=>K.temperature).filter(K=>K!==void 0),j=(U=(te=C.data)==null?void 0:te.recipe)==null?void 0:U.outputs.map(K=>K.temperature).filter(K=>K!==void 0),P=Math.abs((I||0)-(M||0))>.1,D=T.length!==j.length||T.some((K,ie)=>Math.abs((K||0)-(j[ie]||0))>.1);return P||D}))return{...kl(s,u),graph:s,flows:u,temperatureData:d};const f=Rs(p,t),h=Rp(f),g=ew(f,h),x=M0(p,g,f),q=Rs(x,t),w=Rp(q);return{...kl(q,w),graph:q,flows:w,temperatureData:g}},DV=e=>e.excess||[],BV=e=>e.deficiency||[],zV=(e,t,n,i,a,s,u)=>{if(!n||!t)return 1;const l=t.data.recipe,d=t.data.machineCount||0,p=vt(l.machine_id);let m=l.cycle_time;if((typeof m!="number"||m<=0)&&(m=1),p&&Ur(p.id)){const w=an[p.id];if((w==null?void 0:w.type)==="steam_input"&&(p.id!=="m_steam_cracking_plant"||hi(l))){const b=l.tempDependentInputTemp??In;m=Wn(p.id,b,m)}}const f=CE(e,n,null,a,s,i);let h=f.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const g=vt(f.machine_id);if(g&&Ur(g.id)){const w=an[g.id];if((w==null?void 0:w.type)==="steam_input"&&(g.id!=="m_steam_cracking_plant"||hi(f))){const b=f.tempDependentInputTemp??In;h=Wn(g.id,b,h)}}let x=0,q=!1;if(u&&u.byNode&&u.byNode[t.id]){const w=u.byNode[t.id];if(n.isOutput){const b=w.outputFlows[n.outputIndex];if(b){q=!0;const C=b.produced-b.connected;x=Math.max(0,C)}}else{const b=w.inputFlows[n.inputIndex];if(b){q=!0;const C=b.needed-b.connected;x=Math.max(0,C)}}}if(q&&x===0)return 0;if(!q)if(n.isOutput){const w=l.outputs[n.outputIndex];if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;typeof b=="number"&&(x=b/m*d)}}else{const w=l.inputs[n.inputIndex];w&&typeof w.quantity=="number"&&(x=w.quantity/m*d)}if(n.isOutput){const w=f.inputs.find(b=>b.product_id===n.productId);if(w&&typeof w.quantity=="number"&&w.quantity>0){const b=w.quantity/h;return x/b}}else{const w=f.outputs.find(b=>b.product_id===n.productId);if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;if(typeof b=="number"&&b>0){const C=b/h;return x/C}}}return 1},CE=(e,t,n,i,a,s)=>{var d,p,m,f,h,g,x,q,w,b,C,S;let u={...e};const l=vt(e.machine_id);if(!kE(u))return u;if((l==null?void 0:l.id)==="m_industrial_firebox"&&hE(e.id)){const E=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let I=((d=i==null?void 0:i.fireboxConfig)==null?void 0:d.fuel)||"p_coke_fuel";const M=(t==null?void 0:t.productId)||(n==null?void 0:n.id);M&&E.includes(M)&&(I=M);const T=ec(e.id,I);return T&&(u={...u,inputs:N0(e.inputs,I,e.id),fireboxSettings:{fuel:I},cycle_time:T.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const E=((p=i==null?void 0:i.drillConfig)==null?void 0:p.drillHead)||"steel",I=((m=i==null?void 0:i.drillConfig)==null?void 0:m.consumable)||"hydrochloric_acid",M=((f=i==null?void 0:i.drillConfig)==null?void 0:f.machineOil)!==void 0?i.drillConfig.machineOil:!0,T=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],j={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let P=E,D=100;const O=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(O)if(T.includes(O))P=j[O];else if(t!=null&&t.isOutput)D=100;else{const X=s(O,P,I,M);X&&(D=X)}const F=iE(P,I,M,D),Q=oE(P,I,M,D),V=Vo(P,I,M,D);return u={...u,inputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:Q.length>0?Q:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:P,consumable:I,machineOil:M,depth:D},cycle_time:1,power_consumption:V?{max:V.drillingPower*1e6,average:(V.drillingPower*V.lifeTime+V.idlePower*(V.replacementTime+V.travelTime))/V.totalCycleTime*1e6}:"Variable",pollution:V?V.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const E=((h=i==null?void 0:i.assemblerConfig)==null?void 0:h.outerStage)||1,I=((g=i==null?void 0:i.assemblerConfig)==null?void 0:g.innerStage)||2,M=((x=i==null?void 0:i.assemblerConfig)==null?void 0:x.machineOil)!==void 0?i.assemblerConfig.machineOil:!0,T=((q=i==null?void 0:i.assemblerConfig)==null?void 0:q.tickCircuitDelay)||0;let j=E===1?`p_${I}x_microchip`:`p_${E}x${I}x_microchip`;const P=(t==null?void 0:t.productId)||(n==null?void 0:n.id);P&&P.includes("microchip")&&(j=P);const D=sE(j,M),O=uE(j,M),F=ru(j,M,T),Q=j.match(/p_(?:(\d+)x)?(\d+)x_microchip/),V=Q&&Q[1]?parseInt(Q[1]):1,X=Q?parseInt(Q[2]):I;return u={...u,inputs:D.length>0?D:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:V,innerStage:X,machineOil:M,tickCircuitDelay:T},cycle_time:F?F.cycleTime:"Variable",power_consumption:F?{max:F.maxPowerConsumption,average:F.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const E=((w=i==null?void 0:i.treeFarmConfig)==null?void 0:w.trees)||450,I=((b=i==null?void 0:i.treeFarmConfig)==null?void 0:b.harvesters)||20,M=((C=i==null?void 0:i.treeFarmConfig)==null?void 0:C.sprinklers)||24,T=((S=i==null?void 0:i.treeFarmConfig)==null?void 0:S.outputs)||8,j=1,P=fE(M),D=fg(E,I,a),O=Jl(E,I,M,T,j,a);return u={...u,inputs:P.length>0?P:[{product_id:"p_water",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:E,harvesters:I,sprinklers:M,outputs:T,controller:j},cycle_time:1,power_consumption:O?O.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let E="p_any_item",I="p_any_fluid";const M=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(M)if(M==="p_concrete_block"||M==="p_lead_ingot")E="p_fission_byproducts",I="p_depleted_uf6_waste";else{const P=bt(M);(P==null?void 0:P.type)==="item"?(E=M,I="p_any_fluid"):(P==null?void 0:P.type)==="fluid"&&(E="p_any_item",I=M)}else E="p_fission_byproducts",I="p_depleted_uf6_waste";const T=tc(0,0,E,I),j=Vl(0,0);return u={...u,inputs:T,outputs:[],wasteFacilitySettings:{itemProductId:E,fluidProductId:I,itemFlowRate:0,fluidFlowRate:0},cycle_time:j.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let E=["p_water","p_residue"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const j=bt(I);(j==null?void 0:j.type)==="fluid"&&(E=[I,I])}const M=R0(E),T=Ns(M);return u={...u,inputs:M,outputs:[],liquidDumpSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:T},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let E=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const j=bt(I);(j==null?void 0:j.type)==="fluid"&&(E=Array(8).fill(I))}const M=O0(E),T=js(M);return u={...u,inputs:M,outputs:[],liquidBurnerSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:T},u}return u},$V=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],HV=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Ws).forEach(n=>{n.forEach(i=>t.add(i.product_id))}),Array.from(t)}return e==="r_logic_assembler"?aE.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},kE=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&hE(e.id),hw=1e-10,WV=(e,t,n,i,a,s=null)=>{if(t<hw)return new Map([[e,n]]);const u=n/t,l=new Map;l.set(e,n);const d=new Map;d.set(e,u);const p=new Set([e]),m=[e];for(;m.length>0;){const x=m.shift(),q=i.nodes[x];q&&(q.outputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.sourceNodeId===x))||[]).forEach(S=>{p.has(S.targetNodeId)||(p.add(S.targetNodeId),m.push(S.targetNodeId))})}),q.inputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.targetNodeId===x))||[]).forEach(S=>{p.has(S.sourceNodeId)||(p.add(S.sourceNodeId),m.push(S.sourceNodeId))})}))}const f=10;let h=0,g=!0;for(;g&&h<f;)g=!1,h++,p.forEach(x=>{var T;if(x===e)return;const q=i.nodes[x];if(!q)return;const w=(T=s==null?void 0:s.find(j=>j.id===x))==null?void 0:T.data,b=(w==null?void 0:w.machineCountMode)||q.machineCountMode||"free";if(b==="locked")return;const C=q.machineCount||0;if(C<hw)return;const S=[],E=[];if(q.outputs.forEach((j,P)=>{var O;(((O=i.products[j.productId])==null?void 0:O.connections.filter(F=>F.sourceNodeId===x&&F.sourceOutputIndex===P))||[]).forEach(F=>{const Q=d.get(F.targetNodeId);Q!==void 0&&(S.push(Q),E.push({type:"output",productId:j.productId,targetNodeId:F.targetNodeId,ratio:Q}))})}),q.inputs.forEach((j,P)=>{var O;(((O=i.products[j.productId])==null?void 0:O.connections.filter(F=>F.targetNodeId===x&&F.targetInputIndex===P))||[]).forEach(F=>{const Q=d.get(F.sourceNodeId);Q!==void 0&&(S.push(Q),E.push({type:"input",productId:j.productId,sourceNodeId:F.sourceNodeId,ratio:Q}))})}),S.length===0)return;const I=Math.max(...S),M=d.get(x)||1;if(Math.abs(I-M)>1e-4){d.set(x,I);let j=C*I;if(b==="capped"){const P=(w==null?void 0:w.cappedMachineCount)||q.cappedMachineCount;typeof P=="number"&&(j=Math.min(j,P))}l.set(x,j),g=!0}});return l};var yw={},Vp,gw;function ME(){if(gw)return Vp;gw=1;function e(t,n,i,a){this.feasible=i,this.evaluation=n,this.bounded=a,this._tableau=t}return Vp=e,e.prototype.generateSolutionSet=function(){for(var t={},n=this._tableau,i=n.varIndexByRow,a=n.variablesPerIndex,s=n.matrix,u=n.rhsColumn,l=n.height-1,d=Math.round(1/n.precision),p=1;p<=l;p+=1){var m=i[p],f=a[m];if(!(f===void 0||f.isSlack===!0)){var h=s[p][u];t[f.id]=Math.round((Number.EPSILON+h)*d)/d}}return t},Vp}var Op,vw;function UV(){if(vw)return Op;vw=1;var e=ME();function t(n,i,a,s,u){e.call(this,n,i,a,s),this.iter=u}return Op=t,t.prototype=Object.create(e.prototype),t.constructor=t,Op}var Fp,xw;function Yn(){if(xw)return Fp;xw=1;var e=ME(),t=UV();function n(a){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=a||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Fp=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function i(a,s){this.priority=a,this.reducedCosts=new Array(s);for(var u=0;u<s;u+=1)this.reducedCosts[u]=0}return i.prototype.copy=function(){var a=new i(this.priority,this.reducedCosts.length);return a.reducedCosts=this.reducedCosts.slice(),a},n.prototype.setOptionalObjective=function(a,s,u){var l=this.objectivesByPriority[a];if(l===void 0){var d=Math.max(this.width,s+1);l=new i(a,d),this.objectivesByPriority[a]=l,this.optionalObjectives.push(l),this.optionalObjectives.sort(function(p,m){return p.priority-m.priority})}l.reducedCosts[s]=u},n.prototype.initialize=function(a,s,u,l){this.variables=u,this.unrestrictedVars=l,this.width=a,this.height=s;for(var d=new Array(a),p=0;p<a;p++)d[p]=0;this.matrix=new Array(s);for(var m=0;m<s;m++)this.matrix[m]=d.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=a+s-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var a=this.model.variables,s=this.model.constraints,u=a.length,l=s.length,d,p,m=this.matrix[0],f=this.model.isMinimization===!0?-1:1;for(d=0;d<u;d+=1){var h=a[d],g=h.priority,x=f*h.cost;g===0?m[d+1]=x:this.setOptionalObjective(g,d+1,x),p=a[d].index,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=d+1,this.varIndexByCol[d+1]=p}for(var q=1,w=0;w<l;w+=1){var b=s[w],C=b.index;this.rowByVarIndex[C]=q,this.colByVarIndex[C]=-1,this.varIndexByRow[q]=C;var S,E,I,M=b.terms,T=M.length,j=this.matrix[q++];if(b.isUpperBound){for(S=0;S<T;S+=1)E=M[S],I=this.colByVarIndex[E.variable.index],j[I]=E.coefficient;j[0]=b.rhs}else{for(S=0;S<T;S+=1)E=M[S],I=this.colByVarIndex[E.variable.index],j[I]=-E.coefficient;j[0]=-b.rhs}}},n.prototype.setModel=function(a){this.model=a;var s=a.nVariables+1,u=a.nConstraints+1;return this.initialize(s,u,a.variables,a.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},n.prototype.density=function(){for(var a=0,s=this.matrix,u=0;u<this.height;u++)for(var l=s[u],d=0;d<this.width;d++)l[d]!==0&&(a+=1);return a/(this.height*this.width)},n.prototype.setEvaluation=function(){var a=Math.round(1/this.precision),s=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+s)*a)/a;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},n.prototype.getSolution=function(){var a=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new t(this,a,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,a,this.feasible,this.bounded)},Fp}var ww;function GV(){if(ww)return yw;ww=1;var e=Yn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d,p=0;;){for(var m=0,f=-this.precision,h=1;h<=l;h++){d=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var g=a[h][s];g<f&&(f=g,m=h)}if(m===0)return this.feasible=!0,p;for(var x=0,q=-1/0,w=a[0],b=a[m],C=1;C<=u;C++){var S=b[C];if(d=this.unrestrictedVars[this.varIndexByCol[C]]===!0,d||S<-this.precision){var E=-w[C]/S;q<E&&(q=E,x=C)}}if(x===0)return this.feasible=!1,p;if(n){i.push([this.varIndexByRow[m],this.varIndexByCol[x]]);var I=this.checkForCycles(i);if(I.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+I[0]),this.model.messages.push("Length :"+I[1]),this.feasible=!1,p}this.pivot(m,x),p+=1}},e.prototype.phase2=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d=this.precision,p=this.optionalObjectives.length,m=null,f=0,h,g;;){var x=a[this.costRowIndex];p>0&&(m=[]);for(var q=0,w=d,b=!1,C=1;C<=u;C++){if(h=x[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,p>0&&-d<h&&h<d){m.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}if(p>0)for(var S=0;q===0&&m.length>0&&S<p;){var E=[],I=this.optionalObjectives[S].reducedCosts;w=d;for(var M=0;M<m.length;M++){if(C=m[M],h=I[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,-d<h&&h<d){E.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}m=E,S+=1}if(q===0)return this.setEvaluation(),this.simplexIters+=1,f;var T=0,j=1/0;this.varIndexByRow;for(var P=1;P<=l;P++){var D=a[P],O=D[s],F=D[q];if(!(-d<F&&F<d)){if(F>0&&d>O&&O>-d){j=0,T=P;break}var Q=b?-O/F:O/F;Q>d&&j>Q&&(j=Q,T=P)}}if(j===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[q],f;if(n){i.push([this.varIndexByRow[T],this.varIndexByCol[q]]);var V=this.checkForCycles(i);if(V.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+V[0]),this.model.messages.push("Length :"+V[1]),this.feasible=!1,f}this.pivot(T,q,!0),f+=1}};var t=[];return e.prototype.pivot=function(n,i){var a=this.matrix,s=a[n][i],u=this.height-1,l=this.width-1,d=this.varIndexByRow[n],p=this.varIndexByCol[i];this.varIndexByRow[n]=p,this.varIndexByCol[i]=d,this.rowByVarIndex[p]=n,this.rowByVarIndex[d]=-1,this.colByVarIndex[p]=-1,this.colByVarIndex[d]=i;for(var m=a[n],f=0,h=0;h<=l;h++)m[h]>=-1e-16&&m[h]<=1e-16?m[h]=0:(m[h]/=s,t[f]=h,f+=1);m[i]=1/s;var g,x,q;this.precision;for(var w=0;w<=u;w++)if(w!==n&&!(a[w][i]>=-1e-16&&a[w][i]<=1e-16)){var b=a[w];if(g=b[i],g>=-1e-16&&g<=1e-16)g!==0&&(b[i]=0);else{for(x=0;x<f;x++)h=t[x],q=m[h],q>=-1e-16&&q<=1e-16?q!==0&&(m[h]=0):b[h]=b[h]-g*q;b[i]=-g/s}}var C=this.optionalObjectives.length;if(C>0)for(var S=0;S<C;S+=1){var E=this.optionalObjectives[S].reducedCosts;if(g=E[i],g!==0){for(x=0;x<f;x++)h=t[x],q=m[h],q!==0&&(E[h]=E[h]-g*q);E[i]=-g/s}}},e.prototype.checkForCycles=function(n){for(var i=0;i<n.length-1;i++)for(var a=i+1;a<n.length;a++){var s=n[i],u=n[a];if(s[0]===u[0]&&s[1]===u[1]){if(a-i>n.length-a)break;for(var l=!0,d=1;d<a-i;d++){var p=n[i+d],m=n[a+d];if(p[0]!==m[0]||p[1]!==m[1]){l=!1;break}}if(l)return[i,a-i]}}return[]},yw}var bw={},Ap,qw;function yg(){if(qw)return Ap;qw=1;function e(l,d,p,m){this.id=l,this.cost=d,this.index=p,this.value=0,this.priority=m}function t(l,d,p,m){e.call(this,l,d,p,m)}t.prototype.isInteger=!0;function n(l,d){e.call(this,l,0,d,0)}n.prototype.isSlack=!0;function i(l,d){this.variable=l,this.coefficient=d}function a(l,d,p){return p===0||p==="required"?null:(d=d||1,p=p||1,l.isMinimization===!1&&(d=-d),l.addVariable(d,"r"+l.relaxationIndex++,!1,!1,p))}function s(l,d,p,m){this.slack=new n("s"+p,p),this.index=p,this.model=m,this.rhs=l,this.isUpperBound=d,this.terms=[],this.termsByVarIndex={},this.relaxation=null}s.prototype.addTerm=function(l,d){var p=d.index,m=this.termsByVarIndex[p];if(m===void 0)m=new i(d,l),this.termsByVarIndex[p]=m,this.terms.push(m),this.isUpperBound===!0&&(l=-l),this.model.updateConstraintCoefficient(this,d,l);else{var f=m.coefficient+l;this.setVariableCoefficient(f,d)}return this},s.prototype.removeTerm=function(l){return this},s.prototype.setRightHandSide=function(l){if(l!==this.rhs){var d=l-this.rhs;this.isUpperBound===!0&&(d=-d),this.rhs=l,this.model.updateRightHandSide(this,d)}return this},s.prototype.setVariableCoefficient=function(l,d){var p=d.index;if(p===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var m=this.termsByVarIndex[p];if(m===void 0)this.addTerm(l,d);else if(l!==m.coefficient){var f=l-m.coefficient;this.isUpperBound===!0&&(f=-f),m.coefficient=l,this.model.updateConstraintCoefficient(this,d,f)}return this},s.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this._relax(this.relaxation)},s.prototype._relax=function(l){l!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,l):this.setVariableCoefficient(1,l))};function u(l,d){this.upperBound=l,this.lowerBound=d,this.model=l.model,this.rhs=l.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(l,d){return this.upperBound.addTerm(l,d),this.lowerBound.addTerm(l,d),this},u.prototype.removeTerm=function(l){return this.upperBound.removeTerm(l),this.lowerBound.removeTerm(l),this},u.prototype.setRightHandSide=function(l){this.upperBound.setRightHandSide(l),this.lowerBound.setRightHandSide(l),this.rhs=l},u.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Ap={Constraint:s,Variable:e,IntegerVariable:t,SlackVariable:n,Equality:u,Term:i},Ap}var Sw;function KV(){if(Sw)return bw;Sw=1;var e=Yn(),t=yg().SlackVariable;return e.prototype.addCutConstraints=function(n){for(var i=n.length,a=this.height,s=a+i,u=a;u<s;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var l,d=this.width-1,p=0;p<i;p+=1){var m=n[p],f=a+p,h=m.type==="min"?-1:1,g=m.varIndex,x=this.rowByVarIndex[g],q=this.matrix[f];if(x===-1){for(q[this.rhsColumn]=h*m.value,l=1;l<=d;l+=1)q[l]=0;q[this.colByVarIndex[g]]=h}else{var w=this.matrix[x],b=w[this.rhsColumn];for(q[this.rhsColumn]=h*(m.value-b),l=1;l<=d;l+=1)q[l]=-h*w[l]}var C=this.getNewElementIndex();this.varIndexByRow[f]=C,this.rowByVarIndex[C]=f,this.colByVarIndex[C]=-1,this.variablesPerIndex[C]=new t("s"+C,C),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=Math.floor(s);for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]];if(!m.isInteger)i[l][p]=Math.min(0,i[n][p]/(1-u));else{var f=i[n][p],h=Math.floor(f)+Math.max(0,f-Math.floor(f)-u)/(1-u);i[l][p]=h}}for(var g=0;g<this.width;g+=1)i[l][g]-=i[n][g];return!0},e.prototype._addUpperBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=-u;for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]],f=i[n][p],h=f-Math.floor(f);m.isInteger?h<=u?i[l][p]=-h:i[l][p]=-(1-h)*u/h:f>=0?i[l][p]=-f:i[l][p]=f*u/(1-u)}return!0},e.prototype.applyMIRCuts=function(){},bw}var Cw={},kw;function YV(){if(kw)return Cw;kw=1;var e=Yn();return e.prototype._putInBase=function(t){var n=this.rowByVarIndex[t];if(n===-1){for(var i=this.colByVarIndex[t],a=1;a<this.height;a+=1){var s=this.matrix[a][i];if(s<-this.precision||this.precision<s){n=a;break}}this.pivot(n,i)}return n},e.prototype._takeOutOfBase=function(t){var n=this.colByVarIndex[t];if(n===-1){for(var i=this.rowByVarIndex[t],a=this.matrix[i],s=1;s<this.height;s+=1){var u=a[s];if(u<-this.precision||this.precision<u){n=s;break}}this.pivot(i,n)}return n},e.prototype.updateVariableValues=function(){for(var t=this.variables.length,n=Math.round(1/this.precision),i=0;i<t;i+=1){var a=this.variables[i],s=a.index,u=this.rowByVarIndex[s];if(u===-1)a.value=0;else{var l=this.matrix[u][this.rhsColumn];a.value=Math.round((l+Number.EPSILON)*n)/n}}},e.prototype.updateRightHandSide=function(t,n){var i=this.height-1,a=this.rowByVarIndex[t.index];if(a===-1){for(var s=this.colByVarIndex[t.index],u=0;u<=i;u+=1){var l=this.matrix[u];l[this.rhsColumn]-=n*l[s]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[this.rhsColumn]-=n*m[s]}}else this.matrix[a][this.rhsColumn]-=n},e.prototype.updateConstraintCoefficient=function(t,n,i){if(t.index===n.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var a=this._putInBase(t.index),s=this.colByVarIndex[n.index];if(s===-1)for(var u=this.rowByVarIndex[n.index],l=0;l<this.width;l+=1)this.matrix[a][l]+=i*this.matrix[u][l];else this.matrix[a][s]-=i},e.prototype.updateCost=function(t,n){var i=t.index,a=this.width-1,s=this.colByVarIndex[i];if(s===-1){var u=this.matrix[this.rowByVarIndex[i]],l;if(t.priority===0){var d=this.matrix[0];for(l=0;l<=a;l+=1)d[l]+=n*u[l]}else{var p=this.objectivesByPriority[t.priority].reducedCosts;for(l=0;l<=a;l+=1)p[l]+=n*u[l]}}else this.matrix[0][s]-=n},e.prototype.addConstraint=function(t){var n=t.isUpperBound?1:-1,i=this.height,a=this.matrix[i];a===void 0&&(a=this.matrix[0].slice(),this.matrix[i]=a);for(var s=this.width-1,u=0;u<=s;u+=1)a[u]=0;a[this.rhsColumn]=n*t.rhs;for(var l=t.terms,d=l.length,p=0;p<d;p+=1){var m=l[p],f=m.coefficient,h=m.variable.index,g=this.rowByVarIndex[h];if(g===-1)a[this.colByVarIndex[h]]+=n*f;else{var x=this.matrix[g];for(x[this.rhsColumn],u=0;u<=s;u+=1)a[u]-=n*f*x[u]}}var q=t.index;this.varIndexByRow[i]=q,this.rowByVarIndex[q]=i,this.colByVarIndex[q]=-1,this.height+=1},e.prototype.removeConstraint=function(t){var n=t.index,i=this.height-1,a=this._putInBase(n),s=this.matrix[i];this.matrix[i]=this.matrix[a],this.matrix[a]=s,this.varIndexByRow[a]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.slack.index=-1,this.height-=1},e.prototype.addVariable=function(t){var n=this.height-1,i=this.width,a=this.model.isMinimization===!0?-t.cost:t.cost,s=t.priority,u=this.optionalObjectives.length;if(u>0)for(var l=0;l<u;l+=1)this.optionalObjectives[l].reducedCosts[i]=0;s===0?this.matrix[0][i]=a:(this.setOptionalObjective(s,i,a),this.matrix[0][i]=0);for(var d=1;d<=n;d+=1)this.matrix[d][i]=0;var p=t.index;this.varIndexByCol[i]=p,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=i,this.width+=1},e.prototype.removeVariable=function(t){var n=t.index,i=this._takeOutOfBase(n),a=this.width-1;if(i!==a){for(var s=this.height-1,u=0;u<=s;u+=1){var l=this.matrix[u];l[i]=l[a]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[i]=m[a]}var f=this.varIndexByCol[a];this.varIndexByCol[i]=f,this.colByVarIndex[f]=i}this.varIndexByCol[a]=-1,this.colByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.index=-1,this.width-=1},Cw}var Mw={},Ew;function QV(){if(Ew)return Mw;Ew=1;var e=Yn();return e.prototype.log=function(t,n){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i=5,a="",s=[" "],u,l,d,p,m,f,h,g,x,q,w;for(l=1;l<this.width;l+=1)m=this.varIndexByCol[l],p=this.variablesPerIndex[m],p===void 0?f="c"+m:f=p.id,h=f.length,g=" ",x="	",h>5?g+=" ":x+="	",s[l]=g,a+=x+f;console.log(a);var b,C=this.matrix[this.costRowIndex],S="	";for(u=1;u<this.width;u+=1)b="	",S+=b,S+=s[u],S+=C[u].toFixed(i);for(b="	",S+=b+s[0]+C[0].toFixed(i),console.log(S+"	Z"),d=1;d<this.height;d+=1){for(q=this.matrix[d],w="	",l=1;l<this.width;l+=1)b="	",w+=b+s[l]+q[l].toFixed(i);b="	",w+=b+s[0]+q[0].toFixed(i),m=this.varIndexByRow[d],p=this.variablesPerIndex[m],p===void 0?f="c"+m:f=p.id,console.log(w+"	"+f)}console.log("");var E=this.optionalObjectives.length;if(E>0){console.log("    Optional objectives:");for(var I=0;I<E;I+=1){var M=this.optionalObjectives[I].reducedCosts,T="";for(u=1;u<this.width;u+=1)b=M[u]<0?"":" ",T+=b,T+=s[u],T+=M[u].toFixed(i);b=M[0]<0?"":" ",T+=b+s[0]+M[0].toFixed(i),console.log(T+" z"+I)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},Mw}var Iw={},Tw;function XV(){if(Tw)return Iw;Tw=1;var e=Yn();return e.prototype.copy=function(){var t=new e(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var n=[],i=0;i<this.optionalObjectives.length;i++)n[i]=this.optionalObjectives[i].copy();t.optionalObjectives=n;for(var a=this.matrix,s=new Array(this.height),u=0;u<this.height;u++)s[u]=a[u].slice();return t.matrix=s,t},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var t=this.savedState,n=t.matrix;this.nVars=t.nVars,this.model=t.model,this.variables=t.variables,this.variablesPerIndex=t.variablesPerIndex,this.unrestrictedVars=t.unrestrictedVars,this.lastElementIndex=t.lastElementIndex,this.width=t.width,this.height=t.height;var i,a;for(i=0;i<this.height;i+=1){var s=n[i],u=this.matrix[i];for(a=0;a<this.width;a+=1)u[a]=s[a]}var l=t.varIndexByRow;for(a=0;a<this.height;a+=1)this.varIndexByRow[a]=l[a];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var d=t.varIndexByCol;for(i=0;i<this.width;i+=1)this.varIndexByCol[i]=d[i];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var p=t.rowByVarIndex,m=t.colByVarIndex,f=0;f<this.nVars;f+=1)this.rowByVarIndex[f]=p[f],this.colByVarIndex[f]=m[f];if(t.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<t.optionalObjectives.length;h++){var g=t.optionalObjectives[h].copy();this.optionalObjectives[h]=g,this.optionalObjectivePerPriority[g.priority]=g}}}},Iw}var Nw={},jw;function ZV(){if(jw)return Nw;jw=1;var e=Yn();function t(n,i){this.index=n,this.value=i}return e.prototype.getMostFractionalVar=function(){for(var n=0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l].index,p=this.rowByVarIndex[d];if(p!==-1){var m=this.matrix[p][this.rhsColumn],f=Math.abs(m-Math.round(m));n<f&&(n=f,i=d,a=m)}}return new t(i,a)},e.prototype.getFractionalVarWithLowestCost=function(){for(var n=1/0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l],p=d.index,m=this.rowByVarIndex[p];if(m!==-1){var f=this.matrix[m][this.rhsColumn];if(Math.abs(f-Math.round(f))>this.precision){var h=d.cost;n>h&&(n=h,i=p,a=f)}}}return new t(i,a)},Nw}var Pw={},Rw;function JV(){if(Rw)return Pw;Rw=1;var e=Yn();return e.prototype.countIntegerValues=function(){for(var t=0,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=i-Math.floor(i),i<this.precision&&-i<this.precision&&(t+=1)}return t},e.prototype.isIntegral=function(){for(var t=this.model.integerVariables,n=t.length,i=0;i<n;i++){var a=this.rowByVarIndex[t[i].index];if(a!==-1){var s=this.matrix[a][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(t){for(var n=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var a=this.matrix[i][this.rhsColumn];a=Math.abs(a);var s=Math.min(a-Math.floor(a),Math.floor(a+1));if(s<this.precision){if(!t)return 0}else n===-1?n=a:n*=a}return n===-1?0:n},Pw}var Lp,Vw;function eO(){return Vw||(Vw=1,GV(),KV(),YV(),QV(),XV(),ZV(),JV(),Lp=Yn()),Lp}var Ow={},Fw;function EE(){if(Fw)return Ow;Fw=1;var e=Yn();function t(a,s,u){this.type=a,this.varIndex=s,this.value=u}function n(a,s){this.relaxedEvaluation=a,this.cuts=s}function i(a,s){return s.relaxedEvaluation-a.relaxedEvaluation}return e.prototype.applyCuts=function(a){if(this.restore(),this.addCutConstraints(a),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var l=this.computeFractionalVolume(!0);l>=.9*u&&(s=!1)}},e.prototype.branchAndCut=function(){var a=[],s=0,u=this.model.tolerance,l=!0,d=1e99;this.model.timeout&&(d=Date.now()+this.model.timeout);for(var p=1/0,m=null,f=[],h=0;h<this.optionalObjectives.length;h+=1)f.push(1/0);var g=new n(-1/0,[]),x;for(a.push(g);a.length>0&&l===!0&&Date.now()<d;)if(this.model.isMinimization?x=this.bestPossibleEval*(1+u):x=this.bestPossibleEval*(1-u),u>0&&p<x&&(l=!1),g=a.pop(),!(g.relaxedEvaluation>p)){var q=g.cuts;if(this.applyCuts(q),s++,this.feasible!==!1){var w=this.evaluation;if(!(w>p)){if(w===p){for(var b=!0,C=0;C<this.optionalObjectives.length&&!(this.optionalObjectives[C].reducedCosts[0]>f[C]);C+=1)if(this.optionalObjectives[C].reducedCosts[0]<f[C]){b=!1;break}if(b)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}m=g,p=w;for(var S=0;S<this.optionalObjectives.length;S+=1)f[S]=this.optionalObjectives[S].reducedCosts[0]}else{s===1&&this.save();for(var E=this.getMostFractionalVar(),I=E.index,M=[],T=[],j=q.length,P=0;P<j;P+=1){var D=q[P];D.varIndex===I?D.type==="min"?T.push(D):M.push(D):(M.push(D),T.push(D))}var O=Math.ceil(E.value),F=Math.floor(E.value),Q=new t("min",I,O);M.push(Q);var V=new t("max",I,F);T.push(V),a.push(new n(w,M)),a.push(new n(w,T)),a.sort(i)}}}}m!==null&&this.applyCuts(m.cuts),this.branchAndCutIterations=s},Ow}var Dp,Aw;function tO(){if(Aw)return Dp;Aw=1;var e=Yn();EE();var t=yg(),n=t.Constraint,i=t.Equality,a=t.Variable,s=t.IntegerVariable;t.Term;function u(l,d){this.tableau=new e(l),this.name=d,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return Dp=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var l=this.lastElementIndex;return this.lastElementIndex+=1,l},u.prototype._addConstraint=function(l){var d=l.slack;this.tableau.variablesPerIndex[d.index]=d,this.constraints.push(l),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(l)},u.prototype.smallerThan=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.greaterThan=function(l){var d=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.equal=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(d);var p=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),new i(d,p)},u.prototype.addVariable=function(l,d,p,m,f){if(typeof f=="string")switch(f){case"required":f=0;break;case"strong":f=1;break;case"medium":f=2;break;case"weak":f=3;break;default:f=0;break}var h=this.tableau.getNewElementIndex();d==null&&(d="v"+h),l==null&&(l=0),f==null&&(f=0);var g;return p?(g=new s(d,l,h,f),this.integerVariables.push(g)):g=new a(d,l,h,f),this.variables.push(g),this.tableau.variablesPerIndex[h]=g,m&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(g),g},u.prototype._removeConstraint=function(l){var d=this.constraints.indexOf(l);if(d===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(d,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(l),l.relaxation&&this.removeVariable(l.relaxation)},u.prototype.removeConstraint=function(l){return l.isEquality?(this._removeConstraint(l.upperBound),this._removeConstraint(l.lowerBound)):this._removeConstraint(l),this},u.prototype.removeVariable=function(l){var d=this.variables.indexOf(l);if(d===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(d,1),this.tableauInitialized===!0&&this.tableau.removeVariable(l),this},u.prototype.updateRightHandSide=function(l,d){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(l,d),this},u.prototype.updateConstraintCoefficient=function(l,d,p){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(l,d,p),this},u.prototype.setCost=function(l,d){var p=l-d.cost;return this.isMinimization===!1&&(p=-p),d.cost=l,this.tableau.updateCost(d,p),this},u.prototype.loadJson=function(l){this.isMinimization=l.opType!=="max";for(var d=l.variables,p=l.constraints,m={},f={},h=Object.keys(p),g=h.length,x=0;x<g;x+=1){var q=h[x],w=p[q],b=w.equal,C=w.weight,S=w.priority,E=C!==void 0||S!==void 0,I,M;if(b===void 0){var T=w.min;T!==void 0&&(I=this.greaterThan(T),m[q]=I,E&&I.relax(C,S));var j=w.max;j!==void 0&&(M=this.smallerThan(j),f[q]=M,E&&M.relax(C,S))}else{I=this.greaterThan(b),m[q]=I,M=this.smallerThan(b),f[q]=M;var P=new i(I,M);E&&P.relax(C,S)}}var D=Object.keys(d),O=D.length;this.tolerance=l.tolerance||0,l.timeout&&(this.timeout=l.timeout),l.options&&(l.options.timeout&&(this.timeout=l.options.timeout),this.tolerance===0&&(this.tolerance=l.options.tolerance||0),l.options.useMIRCuts&&(this.useMIRCuts=l.options.useMIRCuts),typeof l.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=l.options.exitOnCycles);for(var F=l.ints||{},Q=l.binaries||{},V=l.unrestricted||{},X=l.optimize,W=0;W<O;W+=1){var te=D[W],U=d[te],K=U[X]||0,ie=!!Q[te],z=!!F[te]||ie,Z=!!V[te],_e=this.addVariable(K,te,z,Z);ie&&this.smallerThan(1).addTerm(1,_e);var $=Object.keys(U);for(x=0;x<$.length;x+=1){var J=$[x];if(J!==X){var oe=U[J],se=m[J];se!==void 0&&se.addTerm(oe,_e);var ae=f[J];ae!==void 0&&ae.addTerm(oe,_e)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(l){this.useMIRCuts=l},u.prototype.debug=function(l){this.checkForCycles=l},u.prototype.log=function(l){return this.tableau.log(l)},Dp}var Bp={},Lw;function rO(){return Lw||(Lw=1,Bp.CleanObjectiveAttributes=function(e){var t,n,i;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){t=Math.random();for(n in e.variables)e.variables[n][e.optimize]&&(e.variables[n][t]=e.variables[n][e.optimize]);return e.constraints[t]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(i in e.optimize)if(e.constraints[i])if(e.constraints[i]==="equal")delete e.optimize[i];else{t=Math.random();for(n in e.variables)e.variables[n][i]&&(e.variables[n][t]=e.variables[n][i]);e.constraints[t]=e.constraints[i],delete e.constraints[i]}return e}}),Bp}var Ml={},zp,Dw;function B0(){if(Dw)return zp;Dw=1;function e(n){var i={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},a={opType:"",optimize:"_obj",constraints:{},variables:{}},s={">=":"min","<=":"max","=":"equal"},u="",l=null,d="",p="",m="",f=0;typeof n=="string"&&(n=n.split(`
`));for(var h=0;h<n.length;h++)if(m="__"+h,u=n[h],l=null,i.is_objective.test(u))a.opType=u.match(/(max|min)/gi)[0],l=u.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}).slice(1),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0].replace(/\;$/,""),a.variables[p]=a.variables[p]||{},a.variables[p]._obj=d});else if(i.is_int.test(u))l=u.match(i.parse_int).slice(1),a.ints=a.ints||{},l.forEach(function(q){q=q.replace(";",""),a.ints[q]=1});else if(i.is_bin.test(u))l=u.match(i.parse_bin).slice(1),a.binaries=a.binaries||{},l.forEach(function(q){q=q.replace(";",""),a.binaries[q]=1});else if(i.is_constraint.test(u)){var g=u.indexOf(":"),x=g===-1?u:u.slice(g+1);l=x.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0],a.variables[p]=a.variables[p]||{},a.variables[p][m]=d}),f=parseFloat(u.match(i.parse_rhs)[0]),u=s[u.match(i.parse_dir)[0]],a.constraints[m]=a.constraints[m]||{},a.constraints[m][u]=f}else i.is_unrestricted.test(u)&&(l=u.match(i.parse_int).slice(1),a.unrestricted=a.unrestricted||{},l.forEach(function(q){q=q.replace(";",""),a.unrestricted[q]=1}));return a}function t(n){if(!n)throw new Error("Solver requires a model to operate on");var i="",a={max:"<=",min:">=",equal:"="},s=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(n.opType){i+=n.opType+":";for(var u in n.variables)n.variables[u][u]=n.variables[u][u]?n.variables[u][u]:1,n.variables[u][n.optimize]&&(i+=" "+n.variables[u][n.optimize]+" "+u.replace(s,"_"))}else i+="max:";i+=`;

`;for(var l in n.constraints)for(var d in n.constraints[l])if(typeof a[d]<"u"){for(var p in n.variables)typeof n.variables[p][l]<"u"&&(i+=" "+n.variables[p][l]+" "+p.replace(s,"_"));i+=" "+a[d]+" "+n.constraints[l][d],i+=`;
`}if(n.ints){i+=`

`;for(var m in n.ints)i+="int "+m.replace(s,"_")+`;
`}if(n.unrestricted){i+=`

`;for(var f in n.unrestricted)i+="unrestricted "+f.replace(s,"_")+`;
`}return i}return zp=function(n){return n.length?e(n):t(n)},zp}const nO={},iO=Object.freeze(Object.defineProperty({__proto__:null,default:nO},Symbol.toStringTag,{value:"Module"})),Bw=OT(iO);var zw;function oO(){if(zw)return Ml;zw=1,Ml.reformat=B0();function e(t){return t=t.replace("\\r\\n",`\r
`),t=t.split(`\r
`),t=t.filter(function(n){var i;return i=new RegExp(" 0$","gi"),!(i.test(n)===!0||(i=new RegExp("\\d$","gi"),i.test(n)===!1))}).map(function(n){return n.split(/\:{0,1} +(?=\d)/)}).reduce(function(n,i,a){return n[i[0]]=i[1],n},{}),t}return Ml.solve=function(t){return new Promise(function(n,i){typeof window<"u"&&i("Function Not Available in Browser");var a=B0()(t);t.external||i("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||i("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||i("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||i("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var s=Bw;s.writeFile(t.external.tempName,a,function(u,l){if(u)i(u);else{var d=Bw.execFile;t.external.args.push(t.external.tempName),d(t.external.binPath,t.external.args,function(p,m){if(p)if(p.code===1)n(e(m));else{var f={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:p.code,meaning:f[p.code],data:m};i(h)}else n(e(m))})}})})},Ml}var $p,$w;function aO(){return $w||($w=1,$p={lpsolve:oO()}),$p}var Hp,Hw;function Ww(){return Hw||(Hw=1,Hp=function(e,t){var n=t.optimize,i=JSON.parse(JSON.stringify(t.optimize)),a=Object.keys(t.optimize),s,u=0,l={},d="",p={},m=[],f,h,g,x;for(delete t.optimize,f=0;f<a.length;f++)i[a[f]]=0;for(f=0;f<a.length;f++){t.optimize=a[f],t.opType=n[a[f]],s=e.Solve(t,void 0,void 0,!0);for(x in a)if(!t.variables[a[x]]){s[a[x]]=s[a[x]]?s[a[x]]:0;for(g in t.variables)t.variables[g][a[x]]&&s[g]&&(s[a[x]]+=s[g]*t.variables[g][a[x]])}for(d="base",h=0;h<a.length;h++)s[a[h]]?d+="-"+(s[a[h]]*1e3|0)/1e3:d+="-0";if(!l[d]){for(l[d]=1,u++,h=0;h<a.length;h++)s[a[h]]&&(i[a[h]]+=s[a[h]]);delete s.feasible,delete s.result,m.push(s)}}for(f=0;f<a.length;f++)t.constraints[a[f]]={equal:i[a[f]]/u};t.optimize="cheater-"+Math.random(),t.opType="max";for(f in t.variables)t.variables[f].cheater=1;for(f in m)for(g in m[f])p[g]=p[g]||{min:1e99,max:-1e99};for(f in p)for(g in m)m[g][f]?(m[g][f]>p[f].max&&(p[f].max=m[g][f]),m[g][f]<p[f].min&&(p[f].min=m[g][f])):(m[g][f]=0,p[f].min=0);return s=e.Solve(t,void 0,void 0,!0),{midpoint:s,vertices:m,ranges:p}}),Hp}var Wp,Uw;function sO(){if(Uw)return Wp;Uw=1;var e=eO(),t=tO(),n=EE(),i=yg(),a=rO(),s=i.Constraint,u=i.Variable,l=i.Numeral,d=i.Term,p=aO(),m=function(){this.Model=t,this.branchAndCut=n,this.Constraint=s,this.Variable=u,this.Numeral=l,this.Term=d,this.Tableau=e,this.lastSolvedModel=null,this.External=p,this.Solve=function(f,h,g,x){if(x)for(var q in a)f=a[q](f);if(!f)throw new Error("Solver requires a model to operate on");if(typeof f.optimize=="object"&&Object.keys(f.optimize>1))return Ww()(this,f);if(f.external){var w=Object.keys(p);if(w=JSON.stringify(w),!f.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+w);if(!p[f.external.solver])throw new Error("No support (yet) for "+f.external.solver+". Please use one of these instead:"+w);return p[f.external.solver].solve(f)}else{f instanceof t||(f=new t(h).loadJson(f));var b=f.solve();if(this.lastSolvedModel=f,b.solutionSet=b.generateSolutionSet(),g)return b;var C={};return C.feasible=b.feasible,C.result=b.evaluation,C.bounded=b.bounded,b._tableau.__isIntegral&&(C.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(S){b.solutionSet[S]!==0&&(C[S]=b.solutionSet[S])}),C}},this.ReformatLP=B0(),this.MultiObjective=function(f){return Ww()(this,f)}};return typeof window=="object"?window.solver=new m:typeof self=="object"&&(self.solver=new m),Wp=new m,Wp}var uO=sO();const lO=Na(uO),Gi=1e-8,IE=1e15,TE=1e12,NE=1e9,jE=1e6,z0=1e3,PE=1e5,$0=100,RE=10,VE=1e-5,OE=1e-6,cO=(e,t=new Set)=>{const n={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(i=>{var M,T;const a=e.nodes[i],s=`m_${i}`,u=`mc_${i}`,l=a.machineCount||0,d=a.machineCountMode||"free",p=a.cappedMachineCount;a.cycleTime;const m=a.recipe.power_consumption;let f=0;typeof m=="number"?f=m:typeof m=="object"&&m!==null&&"max"in m&&(f=m.max);const h=a.recipe.pollution,g=typeof h=="number"?h:0,x=vt(a.recipe.machine_id),q=x&&typeof x.cost=="number"?x.cost:0,w=(((M=a.recipe.inputs)==null?void 0:M.length)||0)+(((T=a.recipe.outputs)==null?void 0:T.length)||0),b=Math.ceil(f/15e5)*2,C=w*2,S=1+b+C;n.variables[s]={total_cost:VE*f+RE*g+OE*q},n.variables[u]={total_cost:NE*S},n.ints[u]=1;const E=`ceiling_${i}`;n.constraints[E]={min:0},n.variables[u][E]=1,n.variables[s][E]=-1;const I=`nonneg_${i}`;if(n.constraints[I]={min:0},n.variables[s][I]=1,d==="locked"){const j=`lock_${i}`;n.constraints[j]={equal:l},n.variables[s][j]=1}else if(d==="capped"&&typeof p=="number"){const j=`cap_${i}`;n.constraints[j]={max:p},n.variables[s][j]=1}}),e.connections.forEach(i=>{const a=`f_${i.id}`;n.variables[a]={total_cost:0};const s=`flow_nonneg_${i.id}`;n.constraints[s]={min:0},n.variables[a][s]=1}),Object.keys(e.nodes).forEach(i=>{e.nodes[i].outputs.forEach((s,u)=>{const l=`excess_indicator_${i}_${u}`,m=e.connections.filter(h=>h.sourceNodeId===i&&h.sourceOutputIndex===u).length>0?jE:PE;n.variables[l]={total_cost:m},n.ints[l]=1;const f=`binary_${i}_${u}`;n.constraints[f]={min:0,max:1},n.variables[l][f]=1})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.has(i);a.outputs.forEach((u,l)=>{const d=`flow_out_${i}_${l}`,p=`excess_${i}_${l}`,m=`excess_indicator_${i}_${l}`,f=e.connections.filter(I=>I.sourceNodeId===i&&I.sourceOutputIndex===l),g=f.length>0?z0:$0,x=s?1:g;n.variables[p]={total_cost:x,[d]:-1};const q=`link_excess_${i}_${l}`;n.constraints[q]={max:0};const w=`m_${i}`;let b=a.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const C=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof C!="number")return;const S=a.isMineshaftDrill?C:C/b,E=S*1e4;n.variables[p][q]=1,n.variables[m][q]=-E,n.constraints[d]={equal:0},n.variables[w][d]||(n.variables[w][d]=0),n.variables[w][d]+=S,f.forEach(I=>{const M=`f_${I.id}`;n.variables[M][d]||(n.variables[M][d]=0),n.variables[M][d]-=1})}),a.inputs.forEach((u,l)=>{const d=e.connections.filter(E=>E.targetNodeId===i&&E.targetInputIndex===l);if(d.length===0)return;const p=`flow_in_${i}_${l}`,m=`deficit_${i}_${l}`,f=`m_${i}`;let h=a.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const g=u.quantity;if(typeof g!="number")return;const x=a.isMineshaftDrill?g:g/h;n.variables[m]={total_cost:TE,[p]:1};const q=`deficit_indicator_${i}_${l}`;n.variables[q]={total_cost:IE},n.ints[q]=1;const w=`deficit_binary_${i}_${l}`;n.constraints[w]={min:0,max:1},n.variables[q][w]=1;const b=`deficit_link_${i}_${l}`;n.constraints[b]={max:0};const C=x*1e4;n.variables[m][b]=1,n.variables[q][b]=-C,n.constraints[p]={min:0},d.forEach(E=>{const I=`f_${E.id}`;n.variables[I][p]||(n.variables[I][p]=0),n.variables[I][p]+=1}),n.variables[f][p]||(n.variables[f][p]=0),n.variables[f][p]-=x;const S=`max_flow_in_${i}_${l}`;n.constraints[S]={max:0},d.forEach(E=>{const I=`f_${E.id}`;n.variables[I][S]||(n.variables[I][S]=0),n.variables[I][S]+=1}),n.variables[f][S]=-x})}),t.forEach(i=>{const a=e.nodes[i];a&&a.outputs.forEach((s,u)=>{const l=`excess_${i}_${u}`,d=e.connections.filter(w=>w.sourceNodeId===i&&w.sourceOutputIndex===u);let p=a.cycleTime;(typeof p!="number"||p<=0)&&(p=1);const m=s.originalQuantity!==void 0?s.originalQuantity:s.quantity;if(typeof m!="number")return;const h=(a.isMineshaftDrill?m:m/p)*(a.machineCount||0);let g=0;d.forEach(w=>{const b=e.nodes[w.targetNodeId];if(!b)return;const C=b.inputs[w.targetInputIndex];if(!C)return;let S=b.cycleTime;(typeof S!="number"||S<=0)&&(S=1);const E=C.quantity;if(typeof E!="number")return;const M=(b.isMineshaftDrill?E:E/S)*(b.machineCount||0);g+=Math.min(h-g,M)});const x=Math.max(0,h-g),q=`min_excess_${i}_${u}`;n.constraints[q]={min:x},n.variables[l][q]=1})}),n},dO=e=>{const t=Object.keys(e.nodes),n=new Map;t.forEach((g,x)=>n.set(g,x));const i=t.length,a=new Int32Array(i).fill(-1),s=new Int32Array(i),u=new Uint8Array(i),l=[];let d=0;const p=[],m=g=>{a[g]=d,s[g]=d,d++,l.push(g),u[g]=1;const x=t[g];if(e.nodes[x].outputs.forEach(w=>{const b=e.products[w.productId];b&&b.connections.forEach(C=>{if(C.sourceNodeId!==x)return;const S=n.get(C.targetNodeId);S!==void 0&&(a[S]===-1?(m(S),s[g]=Math.min(s[g],s[S])):u[S]&&(s[g]=Math.min(s[g],a[S])))})}),s[g]===a[g]){const w=[];let b;do b=l.pop(),u[b]=0,w.push(t[b]);while(b!==g);w.length>1&&p.push(w)}};for(let g=0;g<i;g++)a[g]===-1&&m(g);const f=[];p.forEach(g=>{var S;const x=new Set(g),q=new Set;if(e.connections.forEach(E=>{const I=x.has(E.sourceNodeId),M=x.has(E.targetNodeId);if(I&&M){const T=E.productId;q.add(T)}}),q.size===0)return;let w=!1;for(const E of q)if(e.connections.some(M=>{if(M.productId!==E)return!1;const T=!x.has(M.sourceNodeId),j=x.has(M.targetNodeId);return T&&j})){w=!0;break}if(w)return;let b=!0;const C=[];for(const E of q){let I=!1;for(const M of g){const T=e.nodes[M];let j=T.cycleTime;(typeof j!="number"||j<=0)&&(j=1);const P=T.isMineshaftDrill||((S=T.recipe)==null?void 0:S.isMineshaftDrill);let D=0;T.outputs.forEach(F=>{if(F.productId===E){const Q=F.originalQuantity!==void 0?F.originalQuantity:F.quantity;typeof Q=="number"&&(D+=P?Q:Q/j)}});let O=0;if(T.inputs.forEach(F=>{F.productId===E&&typeof F.quantity=="number"&&(O+=P?F.quantity:F.quantity/j)}),D>=O-1e-10){I=!0;break}}I||(b=!1,C.push(E))}b||f.push({nodes:g,nodeNames:g.map(E=>{var I,M;return((M=(I=e.nodes[E])==null?void 0:I.recipe)==null?void 0:M.name)||E}),problematicProducts:C})});const h=new Set;return p.forEach(g=>g.forEach(x=>h.add(x))),t.forEach(g=>{var w;if(h.has(g))return;const x=e.nodes[g];if(!x)return;const q=new Map;if(e.connections.forEach(b=>{if(b.sourceNodeId===g&&b.targetNodeId===g){const C=b.productId,S=x.outputs[b.sourceOutputIndex],E=x.inputs[b.targetInputIndex];S&&E&&S.productId===C&&E.productId===C&&q.set(C,{inputRate:E.rate,outputRate:S.rate})}}),q.size>0){let b=!1;for(const[C,S]of q){const E=e.products[C],I=1e-10;if(!(S.outputRate>S.inputRate+I)){if(S.outputRate<S.inputRate-I){if(!E.producers.some(T=>T.nodeId!==g)){b=!0;break}continue}if(Math.abs(S.outputRate-S.inputRate)<I){const M=E.consumers.some(j=>j.nodeId!==g),T=E.producers.some(j=>j.nodeId!==g);if(!M&&!T)continue;if(M&&!T){b=!0;break}if(T)continue}}}b&&f.push({nodes:[g],nodeNames:[((w=x.recipe)==null?void 0:w.name)||g],isSelfFeeding:!0})}}),f},pO=(e,t=new Set)=>{const n=dO(e);if(n.length>0)return{feasible:!1,unsustainableLoops:n,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const i=cO(e,t),a=Object.keys(i.variables).length,s=Object.keys(i.constraints).length,u=Object.keys(i.ints).length,l=a-u,d=Object.keys(e.nodes).length,p=e.connections.length;console.log("%c[LP Solver] Model Statistics:","color: #3498db; font-weight: bold"),console.log(`  Graph: ${d} nodes, ${p} connections`),console.log(`  Variables: ${a} total (${l} continuous, ${u} integer)`),console.log(`  Constraints: ${s}`);let m=0,f=0,h=0,g=0,x=0,q=0,w=0;Object.keys(i.variables).forEach(I=>{I.startsWith("m_")&&!I.startsWith("mc_")?m++:I.startsWith("mc_")?f++:I.startsWith("f_")?h++:I.startsWith("excess_")&&!I.includes("indicator")?g++:I.startsWith("excess_indicator_")?x++:I.startsWith("deficit_")&&!I.includes("indicator")?q++:I.startsWith("deficit_indicator_")&&w++}),console.log("  Variable breakdown:"),console.log(`    Machine counts: ${m}`),console.log(`    Ceiling vars (model count): ${f}`),console.log(`    Flow vars: ${h}`),console.log(`    Excess vars: ${g}`),console.log(`    Excess indicators: ${x}`),console.log(`    Deficit vars: ${q}`),console.log(`    Deficit indicators: ${w}`),console.log("%c[LP Solver] Solving...","color: #f39c12; font-weight: bold");const b=performance.now(),C=lO.Solve(i),E=performance.now()-b;if(C.feasible){console.log(`%c[LP Solver] Solution found in ${E.toFixed(2)}ms`,"color: #2ecc71; font-weight: bold"),console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let I=0,M=0,T=0,j=0,P=0,D=0,O=0,F=0,Q=0,V=0,X=0,W=0,te=0,U=0,K=0,ie=0,z=0,Z=0;Object.keys(C).forEach($=>{var J,oe;if($.startsWith("deficit_indicator_")){const se=C[$]||0;se>Gi&&(V+=se,M+=se*IE)}if($.startsWith("deficit_")&&!$.includes("indicator")){const se=C[$]||0;se>Gi&&(X+=se,T+=se*TE)}if($.startsWith("excess_indicator_")){const se=C[$]||0;if(se>Gi){const ae=$.split("_"),he=ae.slice(2,-1).join("_"),Se=parseInt(ae[ae.length-1]),Ie=e.connections.some(Te=>Te.sourceNodeId===he&&Te.sourceOutputIndex===Se)?jE:PE;W+=se,j+=se*Ie}}if($.startsWith("excess_")&&!$.includes("indicator")){const se=C[$]||0;if(se>Gi){const ae=$.split("_"),he=ae.slice(1,-1).join("_"),Se=parseInt(ae[ae.length-1]),Ne=e.connections.some(Te=>Te.sourceNodeId===he&&Te.sourceOutputIndex===Se),Ie=Ne?z0:$0;Ne?te+=se:U+=se,P+=se*Ie}}if($.startsWith("m_")){const se=$.substring(2),ae=e.nodes[se],he=C[$]||0;ae.cycleTime;const Se=ae.recipe.power_consumption;let Ne=0;typeof Se=="number"?Ne=Se:typeof Se=="object"&&Se!==null&&"max"in Se&&(Ne=Se.max);const Ie=ae.recipe.pollution,Te=typeof Ie=="number"?Ie:0,je=vt(ae.recipe.machine_id),Ve=je&&typeof je.cost=="number"?je.cost:0,He=(((J=ae.recipe.inputs)==null?void 0:J.length)||0)+(((oe=ae.recipe.outputs)==null?void 0:oe.length)||0),De=Math.ceil(Ne/15e5)*2,ot=He*2,rt=1+De+ot,ft=Math.ceil(he),ct=ft*rt,dt=he*Ne,at=he*Te,Zt=ft*Ve;K+=ct,ie+=dt,z+=at,Z+=Zt,D+=ct*NE,O+=dt*VE,F+=at*RE,Q+=Zt*OE}}),I=M+T+j+P+D+O+F+Q,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${V} inputs (cost: ${M.toExponential(2)})`),console.log(`    Deficiency amount: ${X.toFixed(4)} (cost: ${T.toExponential(2)})`),console.log(`    Excess count: ${W} outputs (cost: ${j.toExponential(2)})`),console.log(`    Connected excess: ${te.toFixed(4)} (cost: ${(te*z0).toExponential(2)})`),console.log(`    Unconnected excess: ${U.toFixed(4)} (cost: ${(U*$0).toExponential(2)})`),console.log(`    Model count: ${K.toFixed(0)} (cost: ${D.toExponential(2)})`),console.log(`    Power: ${ie.toFixed(0)} W (cost: ${O.toFixed(2)})`),console.log(`    Pollution: ${z.toFixed(2)} %/hr (cost: ${F.toFixed(2)})`),console.log(`    Machine cost: $${Z.toFixed(0)} (cost: ${Q.toFixed(2)})`),console.log(`    Total: ${I.toExponential(2)}`),console.log("  Machine Count Changes:");let _e=!1;Object.keys(e.nodes).forEach($=>{var Se;const J=e.nodes[$],oe=`m_${$}`,se=C[oe]||0,ae=J.machineCount||0;Math.abs(se-ae)>Gi&&(_e=!0,console.log(`    ${((Se=J==null?void 0:J.recipe)==null?void 0:Se.name)||$}: ${ae.toFixed(4)}  ${se.toFixed(4)}`))}),_e||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return C},fO=(e,t)=>{const n=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(t.nodes).forEach(i=>{const a=t.nodes[i],s=`m_${i}`,u=e[s]!==void 0?e[s]:0,l=a.machineCount||0;if(u>=-Gi){const d=Math.max(0,u);Math.abs(d-l)>Gi&&n.set(i,d)}}),n},Gw=(e,t,n,i={})=>{const{allowDeficiency:a=!1}=i;if(n.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const s=Rs(e,t),u=new Set(n.map(f=>f.recipeBoxId)),l=pO(s,u);if(!l.feasible){if(l.unsustainableLoops){const f=l.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${f}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let d=!1;const p=[];if(Object.keys(l).forEach(f=>{var h;if(f.startsWith("deficit_")&&!f.includes("indicator")){const g=l[f]||0;if(g>Gi){d=!0;const x=f.split("_"),q=parseInt(x[x.length-1]),w=x.slice(1,-1).join("_"),b=s.nodes[w];if(b){const C=b.inputs[q];p.push({nodeId:w,nodeName:((h=b.recipe)==null?void 0:h.name)||w,inputIndex:q,productId:C==null?void 0:C.productId,deficitAmount:g})}}}}),d&&!a){const f=p.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${f}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:p}}const m=fO(l,s);return{success:m.size>0,updates:m,converged:!0,iterations:1,message:m.size>0?`Updated ${m.size} nodes`:"Network already balanced"}};function gg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Up,Kw;function _O(){if(Kw)return Up;Kw=1;function e(){this.__data__=[],this.size=0}return Up=e,Up}var Gp,Yw;function Va(){if(Yw)return Gp;Yw=1;function e(t,n){return t===n||t!==t&&n!==n}return Gp=e,Gp}var Kp,Qw;function xc(){if(Qw)return Kp;Qw=1;var e=Va();function t(n,i){for(var a=n.length;a--;)if(e(n[a][0],i))return a;return-1}return Kp=t,Kp}var Yp,Xw;function mO(){if(Xw)return Yp;Xw=1;var e=xc(),t=Array.prototype,n=t.splice;function i(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var l=s.length-1;return u==l?s.pop():n.call(s,u,1),--this.size,!0}return Yp=i,Yp}var Qp,Zw;function hO(){if(Zw)return Qp;Zw=1;var e=xc();function t(n){var i=this.__data__,a=e(i,n);return a<0?void 0:i[a][1]}return Qp=t,Qp}var Xp,Jw;function yO(){if(Jw)return Xp;Jw=1;var e=xc();function t(n){return e(this.__data__,n)>-1}return Xp=t,Xp}var Zp,eb;function gO(){if(eb)return Zp;eb=1;var e=xc();function t(n,i){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return Zp=t,Zp}var Jp,tb;function wc(){if(tb)return Jp;tb=1;var e=_O(),t=mO(),n=hO(),i=yO(),a=gO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Jp=s,Jp}var ef,rb;function vO(){if(rb)return ef;rb=1;var e=wc();function t(){this.__data__=new e,this.size=0}return ef=t,ef}var tf,nb;function xO(){if(nb)return tf;nb=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return tf=e,tf}var rf,ib;function wO(){if(ib)return rf;ib=1;function e(t){return this.__data__.get(t)}return rf=e,rf}var nf,ob;function bO(){if(ob)return nf;ob=1;function e(t){return this.__data__.has(t)}return nf=e,nf}var of,ab;function FE(){if(ab)return of;ab=1;var e=typeof dl=="object"&&dl&&dl.Object===Object&&dl;return of=e,of}var af,sb;function Rn(){if(sb)return af;sb=1;var e=FE(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return af=n,af}var sf,ub;function Oa(){if(ub)return sf;ub=1;var e=Rn(),t=e.Symbol;return sf=t,sf}var uf,lb;function qO(){if(lb)return uf;lb=1;var e=Oa(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;function s(u){var l=n.call(u,a),d=u[a];try{u[a]=void 0;var p=!0}catch{}var m=i.call(u);return p&&(l?u[a]=d:delete u[a]),m}return uf=s,uf}var lf,cb;function SO(){if(cb)return lf;cb=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return lf=n,lf}var cf,db;function Oo(){if(db)return cf;db=1;var e=Oa(),t=qO(),n=SO(),i="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(l){return l==null?l===void 0?a:i:s&&s in Object(l)?t(l):n(l)}return cf=u,cf}var df,pb;function sn(){if(pb)return df;pb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return df=e,df}var pf,fb;function iu(){if(fb)return pf;fb=1;var e=Oo(),t=sn(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(l){if(!t(l))return!1;var d=e(l);return d==i||d==a||d==n||d==s}return pf=u,pf}var ff,_b;function CO(){if(_b)return ff;_b=1;var e=Rn(),t=e["__core-js_shared__"];return ff=t,ff}var _f,mb;function kO(){if(mb)return _f;mb=1;var e=CO(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!t&&t in i}return _f=n,_f}var mf,hb;function AE(){if(hb)return mf;hb=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return mf=n,mf}var hf,yb;function MO(){if(yb)return hf;yb=1;var e=iu(),t=kO(),n=sn(),i=AE(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||t(h))return!1;var g=e(h)?m:s;return g.test(i(h))}return hf=f,hf}var yf,gb;function EO(){if(gb)return yf;gb=1;function e(t,n){return t==null?void 0:t[n]}return yf=e,yf}var gf,vb;function Fo(){if(vb)return gf;vb=1;var e=MO(),t=EO();function n(i,a){var s=t(i,a);return e(s)?s:void 0}return gf=n,gf}var vf,xb;function vg(){if(xb)return vf;xb=1;var e=Fo(),t=Rn(),n=e(t,"Map");return vf=n,vf}var xf,wb;function bc(){if(wb)return xf;wb=1;var e=Fo(),t=e(Object,"create");return xf=t,xf}var wf,bb;function IO(){if(bb)return wf;bb=1;var e=bc();function t(){this.__data__=e?e(null):{},this.size=0}return wf=t,wf}var bf,qb;function TO(){if(qb)return bf;qb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return bf=e,bf}var qf,Sb;function NO(){if(Sb)return qf;Sb=1;var e=bc(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var l=u[s];return l===t?void 0:l}return i.call(u,s)?u[s]:void 0}return qf=a,qf}var Sf,Cb;function jO(){if(Cb)return Sf;Cb=1;var e=bc(),t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return Sf=i,Sf}var Cf,kb;function PO(){if(kb)return Cf;kb=1;var e=bc(),t="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&a===void 0?t:a,this}return Cf=n,Cf}var kf,Mb;function RO(){if(Mb)return kf;Mb=1;var e=IO(),t=TO(),n=NO(),i=jO(),a=PO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,kf=s,kf}var Mf,Eb;function VO(){if(Eb)return Mf;Eb=1;var e=RO(),t=wc(),n=vg();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Mf=i,Mf}var Ef,Ib;function OO(){if(Ib)return Ef;Ib=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ef=e,Ef}var If,Tb;function qc(){if(Tb)return If;Tb=1;var e=OO();function t(n,i){var a=n.__data__;return e(i)?a[typeof i=="string"?"string":"hash"]:a.map}return If=t,If}var Tf,Nb;function FO(){if(Nb)return Tf;Nb=1;var e=qc();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return Tf=t,Tf}var Nf,jb;function AO(){if(jb)return Nf;jb=1;var e=qc();function t(n){return e(this,n).get(n)}return Nf=t,Nf}var jf,Pb;function LO(){if(Pb)return jf;Pb=1;var e=qc();function t(n){return e(this,n).has(n)}return jf=t,jf}var Pf,Rb;function DO(){if(Rb)return Pf;Rb=1;var e=qc();function t(n,i){var a=e(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return Pf=t,Pf}var Rf,Vb;function xg(){if(Vb)return Rf;Vb=1;var e=VO(),t=FO(),n=AO(),i=LO(),a=DO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Rf=s,Rf}var Vf,Ob;function BO(){if(Ob)return Vf;Ob=1;var e=wc(),t=vg(),n=xg(),i=200;function a(s,u){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<i-1)return d.push([s,u]),this.size=++l.size,this;l=this.__data__=new n(d)}return l.set(s,u),this.size=l.size,this}return Vf=a,Vf}var Of,Fb;function Sc(){if(Fb)return Of;Fb=1;var e=wc(),t=vO(),n=xO(),i=wO(),a=bO(),s=BO();function u(l){var d=this.__data__=new e(l);this.size=d.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,Of=u,Of}var Ff,Ab;function wg(){if(Ab)return Ff;Ab=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a&&n(t[i],i,t)!==!1;);return t}return Ff=e,Ff}var Af,Lb;function LE(){if(Lb)return Af;Lb=1;var e=Fo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Af=t,Af}var Lf,Db;function Cc(){if(Db)return Lf;Db=1;var e=LE();function t(n,i,a){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return Lf=t,Lf}var Df,Bb;function kc(){if(Bb)return Df;Bb=1;var e=Cc(),t=Va(),n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l){var d=s[u];(!(i.call(s,u)&&t(d,l))||l===void 0&&!(u in s))&&e(s,u,l)}return Df=a,Df}var Bf,zb;function ou(){if(zb)return Bf;zb=1;var e=kc(),t=Cc();function n(i,a,s,u){var l=!s;s||(s={});for(var d=-1,p=a.length;++d<p;){var m=a[d],f=u?u(s[m],i[m],m,s,i):void 0;f===void 0&&(f=i[m]),l?t(s,m,f):e(s,m,f)}return s}return Bf=n,Bf}var zf,$b;function zO(){if($b)return zf;$b=1;function e(t,n){for(var i=-1,a=Array(t);++i<t;)a[i]=n(i);return a}return zf=e,zf}var $f,Hb;function Qn(){if(Hb)return $f;Hb=1;function e(t){return t!=null&&typeof t=="object"}return $f=e,$f}var Hf,Wb;function $O(){if(Wb)return Hf;Wb=1;var e=Oo(),t=Qn(),n="[object Arguments]";function i(a){return t(a)&&e(a)==n}return Hf=i,Hf}var Wf,Ub;function au(){if(Ub)return Wf;Ub=1;var e=$O(),t=Qn(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&i.call(u,"callee")&&!a.call(u,"callee")};return Wf=s,Wf}var Uf,Gb;function Ft(){if(Gb)return Uf;Gb=1;var e=Array.isArray;return Uf=e,Uf}var Cs={exports:{}},Gf,Kb;function HO(){if(Kb)return Gf;Kb=1;function e(){return!1}return Gf=e,Gf}Cs.exports;var Yb;function Fa(){return Yb||(Yb=1,(function(e,t){var n=Rn(),i=HO(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,l=u?n.Buffer:void 0,d=l?l.isBuffer:void 0,p=d||i;e.exports=p})(Cs,Cs.exports)),Cs.exports}var Kf,Qb;function Mc(){if(Qb)return Kf;Qb=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return Kf=n,Kf}var Yf,Xb;function bg(){if(Xb)return Yf;Xb=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Yf=t,Yf}var Qf,Zb;function WO(){if(Zb)return Qf;Zb=1;var e=Oo(),t=bg(),n=Qn(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",m="[object Number]",f="[object Object]",h="[object RegExp]",g="[object Set]",x="[object String]",q="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",C="[object Float32Array]",S="[object Float64Array]",E="[object Int8Array]",I="[object Int16Array]",M="[object Int32Array]",T="[object Uint8Array]",j="[object Uint8ClampedArray]",P="[object Uint16Array]",D="[object Uint32Array]",O={};O[C]=O[S]=O[E]=O[I]=O[M]=O[T]=O[j]=O[P]=O[D]=!0,O[i]=O[a]=O[w]=O[s]=O[b]=O[u]=O[l]=O[d]=O[p]=O[m]=O[f]=O[h]=O[g]=O[x]=O[q]=!1;function F(Q){return n(Q)&&t(Q.length)&&!!O[e(Q)]}return Qf=F,Qf}var Xf,Jb;function Ec(){if(Jb)return Xf;Jb=1;function e(t){return function(n){return t(n)}}return Xf=e,Xf}var ks={exports:{}};ks.exports;var e2;function qg(){return e2||(e2=1,(function(e,t){var n=FE(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s&&n.process,l=(function(){try{var d=a&&a.require&&a.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}})();e.exports=l})(ks,ks.exports)),ks.exports}var Zf,t2;function su(){if(t2)return Zf;t2=1;var e=WO(),t=Ec(),n=qg(),i=n&&n.isTypedArray,a=i?t(i):e;return Zf=a,Zf}var Jf,r2;function DE(){if(r2)return Jf;r2=1;var e=zO(),t=au(),n=Ft(),i=Fa(),a=Mc(),s=su(),u=Object.prototype,l=u.hasOwnProperty;function d(p,m){var f=n(p),h=!f&&t(p),g=!f&&!h&&i(p),x=!f&&!h&&!g&&s(p),q=f||h||g||x,w=q?e(p.length,String):[],b=w.length;for(var C in p)(m||l.call(p,C))&&!(q&&(C=="length"||g&&(C=="offset"||C=="parent")||x&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,b)))&&w.push(C);return w}return Jf=d,Jf}var e_,n2;function Ic(){if(n2)return e_;n2=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||e;return n===a}return e_=t,e_}var t_,i2;function BE(){if(i2)return t_;i2=1;function e(t,n){return function(i){return t(n(i))}}return t_=e,t_}var r_,o2;function UO(){if(o2)return r_;o2=1;var e=BE(),t=e(Object.keys,Object);return r_=t,r_}var n_,a2;function Sg(){if(a2)return n_;a2=1;var e=Ic(),t=UO(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&u.push(l);return u}return n_=a,n_}var i_,s2;function vi(){if(s2)return i_;s2=1;var e=iu(),t=bg();function n(i){return i!=null&&t(i.length)&&!e(i)}return i_=n,i_}var o_,u2;function Xi(){if(u2)return o_;u2=1;var e=DE(),t=Sg(),n=vi();function i(a){return n(a)?e(a):t(a)}return o_=i,o_}var a_,l2;function GO(){if(l2)return a_;l2=1;var e=ou(),t=Xi();function n(i,a){return i&&e(a,t(a),i)}return a_=n,a_}var s_,c2;function KO(){if(c2)return s_;c2=1;function e(t){var n=[];if(t!=null)for(var i in Object(t))n.push(i);return n}return s_=e,s_}var u_,d2;function YO(){if(d2)return u_;d2=1;var e=sn(),t=Ic(),n=KO(),i=Object.prototype,a=i.hasOwnProperty;function s(u){if(!e(u))return n(u);var l=t(u),d=[];for(var p in u)p=="constructor"&&(l||!a.call(u,p))||d.push(p);return d}return u_=s,u_}var l_,p2;function Ao(){if(p2)return l_;p2=1;var e=DE(),t=YO(),n=vi();function i(a){return n(a)?e(a,!0):t(a)}return l_=i,l_}var c_,f2;function QO(){if(f2)return c_;f2=1;var e=ou(),t=Ao();function n(i,a){return i&&e(a,t(a),i)}return c_=n,c_}var Ms={exports:{}};Ms.exports;var _2;function zE(){return _2||(_2=1,(function(e,t){var n=Rn(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?n.Buffer:void 0,l=u?u.allocUnsafe:void 0;function d(p,m){if(m)return p.slice();var f=p.length,h=l?l(f):new p.constructor(f);return p.copy(h),h}e.exports=d})(Ms,Ms.exports)),Ms.exports}var d_,m2;function $E(){if(m2)return d_;m2=1;function e(t,n){var i=-1,a=t.length;for(n||(n=Array(a));++i<a;)n[i]=t[i];return n}return d_=e,d_}var p_,h2;function HE(){if(h2)return p_;h2=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=0,u=[];++i<a;){var l=t[i];n(l,i,t)&&(u[s++]=l)}return u}return p_=e,p_}var f_,y2;function WE(){if(y2)return f_;y2=1;function e(){return[]}return f_=e,f_}var __,g2;function Cg(){if(g2)return __;g2=1;var e=HE(),t=WE(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(l){return i.call(u,l)}))}:t;return __=s,__}var m_,v2;function XO(){if(v2)return m_;v2=1;var e=ou(),t=Cg();function n(i,a){return e(i,t(i),a)}return m_=n,m_}var h_,x2;function kg(){if(x2)return h_;x2=1;function e(t,n){for(var i=-1,a=n.length,s=t.length;++i<a;)t[s+i]=n[i];return t}return h_=e,h_}var y_,w2;function Tc(){if(w2)return y_;w2=1;var e=BE(),t=e(Object.getPrototypeOf,Object);return y_=t,y_}var g_,b2;function UE(){if(b2)return g_;b2=1;var e=kg(),t=Tc(),n=Cg(),i=WE(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var l=[];u;)e(l,n(u)),u=t(u);return l}:i;return g_=s,g_}var v_,q2;function ZO(){if(q2)return v_;q2=1;var e=ou(),t=UE();function n(i,a){return e(i,t(i),a)}return v_=n,v_}var x_,S2;function GE(){if(S2)return x_;S2=1;var e=kg(),t=Ft();function n(i,a,s){var u=a(i);return t(i)?u:e(u,s(i))}return x_=n,x_}var w_,C2;function KE(){if(C2)return w_;C2=1;var e=GE(),t=Cg(),n=Xi();function i(a){return e(a,n,t)}return w_=i,w_}var b_,k2;function JO(){if(k2)return b_;k2=1;var e=GE(),t=UE(),n=Ao();function i(a){return e(a,n,t)}return b_=i,b_}var q_,M2;function eF(){if(M2)return q_;M2=1;var e=Fo(),t=Rn(),n=e(t,"DataView");return q_=n,q_}var S_,E2;function tF(){if(E2)return S_;E2=1;var e=Fo(),t=Rn(),n=e(t,"Promise");return S_=n,S_}var C_,I2;function YE(){if(I2)return C_;I2=1;var e=Fo(),t=Rn(),n=e(t,"Set");return C_=n,C_}var k_,T2;function rF(){if(T2)return k_;T2=1;var e=Fo(),t=Rn(),n=e(t,"WeakMap");return k_=n,k_}var M_,N2;function Aa(){if(N2)return M_;N2=1;var e=eF(),t=vg(),n=tF(),i=YE(),a=rF(),s=Oo(),u=AE(),l="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",f="[object WeakMap]",h="[object DataView]",g=u(e),x=u(t),q=u(n),w=u(i),b=u(a),C=s;return(e&&C(new e(new ArrayBuffer(1)))!=h||t&&C(new t)!=l||n&&C(n.resolve())!=p||i&&C(new i)!=m||a&&C(new a)!=f)&&(C=function(S){var E=s(S),I=E==d?S.constructor:void 0,M=I?u(I):"";if(M)switch(M){case g:return h;case x:return l;case q:return p;case w:return m;case b:return f}return E}),M_=C,M_}var E_,j2;function nF(){if(j2)return E_;j2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=i.length,s=new i.constructor(a);return a&&typeof i[0]=="string"&&t.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return E_=n,E_}var I_,P2;function QE(){if(P2)return I_;P2=1;var e=Rn(),t=e.Uint8Array;return I_=t,I_}var T_,R2;function Mg(){if(R2)return T_;R2=1;var e=QE();function t(n){var i=new n.constructor(n.byteLength);return new e(i).set(new e(n)),i}return T_=t,T_}var N_,V2;function iF(){if(V2)return N_;V2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return N_=t,N_}var j_,O2;function oF(){if(O2)return j_;O2=1;var e=/\w*$/;function t(n){var i=new n.constructor(n.source,e.exec(n));return i.lastIndex=n.lastIndex,i}return j_=t,j_}var P_,F2;function aF(){if(F2)return P_;F2=1;var e=Oa(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function i(a){return n?Object(n.call(a)):{}}return P_=i,P_}var R_,A2;function XE(){if(A2)return R_;A2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return R_=t,R_}var V_,L2;function sF(){if(L2)return V_;L2=1;var e=Mg(),t=iF(),n=oF(),i=aF(),a=XE(),s="[object Boolean]",u="[object Date]",l="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",f="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",I="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";function j(P,D,O){var F=P.constructor;switch(D){case g:return e(P);case s:case u:return new F(+P);case x:return t(P,O);case q:case w:case b:case C:case S:case E:case I:case M:case T:return a(P,O);case l:return new F;case d:case f:return new F(P);case p:return n(P);case m:return new F;case h:return i(P)}}return V_=j,V_}var O_,D2;function ZE(){if(D2)return O_;D2=1;var e=sn(),t=Object.create,n=(function(){function i(){}return function(a){if(!e(a))return{};if(t)return t(a);i.prototype=a;var s=new i;return i.prototype=void 0,s}})();return O_=n,O_}var F_,B2;function JE(){if(B2)return F_;B2=1;var e=ZE(),t=Tc(),n=Ic();function i(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return F_=i,F_}var A_,z2;function uF(){if(z2)return A_;z2=1;var e=Aa(),t=Qn(),n="[object Map]";function i(a){return t(a)&&e(a)==n}return A_=i,A_}var L_,$2;function lF(){if($2)return L_;$2=1;var e=uF(),t=Ec(),n=qg(),i=n&&n.isMap,a=i?t(i):e;return L_=a,L_}var D_,H2;function cF(){if(H2)return D_;H2=1;var e=Aa(),t=Qn(),n="[object Set]";function i(a){return t(a)&&e(a)==n}return D_=i,D_}var B_,W2;function dF(){if(W2)return B_;W2=1;var e=cF(),t=Ec(),n=qg(),i=n&&n.isSet,a=i?t(i):e;return B_=a,B_}var z_,U2;function eI(){if(U2)return z_;U2=1;var e=Sc(),t=wg(),n=kc(),i=GO(),a=QO(),s=zE(),u=$E(),l=XO(),d=ZO(),p=KE(),m=JO(),f=Aa(),h=nF(),g=sF(),x=JE(),q=Ft(),w=Fa(),b=lF(),C=sn(),S=dF(),E=Xi(),I=Ao(),M=1,T=2,j=4,P="[object Arguments]",D="[object Array]",O="[object Boolean]",F="[object Date]",Q="[object Error]",V="[object Function]",X="[object GeneratorFunction]",W="[object Map]",te="[object Number]",U="[object Object]",K="[object RegExp]",ie="[object Set]",z="[object String]",Z="[object Symbol]",_e="[object WeakMap]",$="[object ArrayBuffer]",J="[object DataView]",oe="[object Float32Array]",se="[object Float64Array]",ae="[object Int8Array]",he="[object Int16Array]",Se="[object Int32Array]",Ne="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Te="[object Uint16Array]",je="[object Uint32Array]",Ve={};Ve[P]=Ve[D]=Ve[$]=Ve[J]=Ve[O]=Ve[F]=Ve[oe]=Ve[se]=Ve[ae]=Ve[he]=Ve[Se]=Ve[W]=Ve[te]=Ve[U]=Ve[K]=Ve[ie]=Ve[z]=Ve[Z]=Ve[Ne]=Ve[Ie]=Ve[Te]=Ve[je]=!0,Ve[Q]=Ve[V]=Ve[_e]=!1;function He(De,ot,rt,ft,ct,dt){var at,Zt=ot&M,Jt=ot&T,$t=ot&j;if(rt&&(at=ct?rt(De,ft,ct,dt):rt(De)),at!==void 0)return at;if(!C(De))return De;var er=q(De);if(er){if(at=h(De),!Zt)return u(De,at)}else{var st=f(De),Rr=st==V||st==X;if(w(De))return s(De,Zt);if(st==U||st==P||Rr&&!ct){if(at=Jt||Rr?{}:x(De),!Zt)return Jt?d(De,a(at,De)):l(De,i(at,De))}else{if(!Ve[st])return ct?De:{};at=g(De,st,Zt)}}dt||(dt=new e);var Tt=dt.get(De);if(Tt)return Tt;dt.set(De,at),S(De)?De.forEach(function(Ht){at.add(He(Ht,ot,rt,Ht,De,dt))}):b(De)&&De.forEach(function(Ht,Qe){at.set(Qe,He(Ht,ot,rt,Qe,De,dt))});var Kr=$t?Jt?m:p:Jt?I:E,fr=er?void 0:Kr(De);return t(fr||De,function(Ht,Qe){fr&&(Qe=Ht,Ht=De[Qe]),n(at,Qe,He(Ht,ot,rt,Qe,De,dt))}),at}return z_=He,z_}var $_,G2;function pF(){if(G2)return $_;G2=1;var e=eI(),t=4;function n(i){return e(i,t)}return $_=n,$_}var H_,K2;function Eg(){if(K2)return H_;K2=1;function e(t){return function(){return t}}return H_=e,H_}var W_,Y2;function fF(){if(Y2)return W_;Y2=1;function e(t){return function(n,i,a){for(var s=-1,u=Object(n),l=a(n),d=l.length;d--;){var p=l[t?d:++s];if(i(u[p],p,u)===!1)break}return n}}return W_=e,W_}var U_,Q2;function Ig(){if(Q2)return U_;Q2=1;var e=fF(),t=e();return U_=t,U_}var G_,X2;function Tg(){if(X2)return G_;X2=1;var e=Ig(),t=Xi();function n(i,a){return i&&e(i,a,t)}return G_=n,G_}var K_,Z2;function _F(){if(Z2)return K_;Z2=1;var e=vi();function t(n,i){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,l=i?u:-1,d=Object(a);(i?l--:++l<u)&&s(d[l],l,d)!==!1;);return a}}return K_=t,K_}var Y_,J2;function Nc(){if(J2)return Y_;J2=1;var e=Tg(),t=_F(),n=t(e);return Y_=n,Y_}var Q_,eq;function Lo(){if(eq)return Q_;eq=1;function e(t){return t}return Q_=e,Q_}var X_,tq;function tI(){if(tq)return X_;tq=1;var e=Lo();function t(n){return typeof n=="function"?n:e}return X_=t,X_}var Z_,rq;function rI(){if(rq)return Z_;rq=1;var e=wg(),t=Nc(),n=tI(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u))}return Z_=a,Z_}var J_,nq;function nI(){return nq||(nq=1,J_=rI()),J_}var em,iq;function mF(){if(iq)return em;iq=1;var e=Nc();function t(n,i){var a=[];return e(n,function(s,u,l){i(s,u,l)&&a.push(s)}),a}return em=t,em}var tm,oq;function hF(){if(oq)return tm;oq=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return tm=t,tm}var rm,aq;function yF(){if(aq)return rm;aq=1;function e(t){return this.__data__.has(t)}return rm=e,rm}var nm,sq;function iI(){if(sq)return nm;sq=1;var e=xg(),t=hF(),n=yF();function i(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,nm=i,nm}var im,uq;function gF(){if(uq)return im;uq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(t[i],i,t))return!0;return!1}return im=e,im}var om,lq;function oI(){if(lq)return om;lq=1;function e(t,n){return t.has(n)}return om=e,om}var am,cq;function aI(){if(cq)return am;cq=1;var e=iI(),t=gF(),n=oI(),i=1,a=2;function s(u,l,d,p,m,f){var h=d&i,g=u.length,x=l.length;if(g!=x&&!(h&&x>g))return!1;var q=f.get(u),w=f.get(l);if(q&&w)return q==l&&w==u;var b=-1,C=!0,S=d&a?new e:void 0;for(f.set(u,l),f.set(l,u);++b<g;){var E=u[b],I=l[b];if(p)var M=h?p(I,E,b,l,u,f):p(E,I,b,u,l,f);if(M!==void 0){if(M)continue;C=!1;break}if(S){if(!t(l,function(T,j){if(!n(S,j)&&(E===T||m(E,T,d,p,f)))return S.push(j)})){C=!1;break}}else if(!(E===I||m(E,I,d,p,f))){C=!1;break}}return f.delete(u),f.delete(l),C}return am=s,am}var sm,dq;function vF(){if(dq)return sm;dq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a,s){i[++n]=[s,a]}),i}return sm=e,sm}var um,pq;function Ng(){if(pq)return um;pq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a){i[++n]=a}),i}return um=e,um}var lm,fq;function xF(){if(fq)return lm;fq=1;var e=Oa(),t=QE(),n=Va(),i=aI(),a=vF(),s=Ng(),u=1,l=2,d="[object Boolean]",p="[object Date]",m="[object Error]",f="[object Map]",h="[object Number]",g="[object RegExp]",x="[object Set]",q="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",C="[object DataView]",S=e?e.prototype:void 0,E=S?S.valueOf:void 0;function I(M,T,j,P,D,O,F){switch(j){case C:if(M.byteLength!=T.byteLength||M.byteOffset!=T.byteOffset)return!1;M=M.buffer,T=T.buffer;case b:return!(M.byteLength!=T.byteLength||!O(new t(M),new t(T)));case d:case p:case h:return n(+M,+T);case m:return M.name==T.name&&M.message==T.message;case g:case q:return M==T+"";case f:var Q=a;case x:var V=P&u;if(Q||(Q=s),M.size!=T.size&&!V)return!1;var X=F.get(M);if(X)return X==T;P|=l,F.set(M,T);var W=i(Q(M),Q(T),P,D,O,F);return F.delete(M),W;case w:if(E)return E.call(M)==E.call(T)}return!1}return lm=I,lm}var cm,_q;function wF(){if(_q)return cm;_q=1;var e=KE(),t=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l,d,p,m){var f=l&t,h=e(s),g=h.length,x=e(u),q=x.length;if(g!=q&&!f)return!1;for(var w=g;w--;){var b=h[w];if(!(f?b in u:i.call(u,b)))return!1}var C=m.get(s),S=m.get(u);if(C&&S)return C==u&&S==s;var E=!0;m.set(s,u),m.set(u,s);for(var I=f;++w<g;){b=h[w];var M=s[b],T=u[b];if(d)var j=f?d(T,M,b,u,s,m):d(M,T,b,s,u,m);if(!(j===void 0?M===T||p(M,T,l,d,m):j)){E=!1;break}I||(I=b=="constructor")}if(E&&!I){var P=s.constructor,D=u.constructor;P!=D&&"constructor"in s&&"constructor"in u&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(E=!1)}return m.delete(s),m.delete(u),E}return cm=a,cm}var dm,mq;function bF(){if(mq)return dm;mq=1;var e=Sc(),t=aI(),n=xF(),i=wF(),a=Aa(),s=Ft(),u=Fa(),l=su(),d=1,p="[object Arguments]",m="[object Array]",f="[object Object]",h=Object.prototype,g=h.hasOwnProperty;function x(q,w,b,C,S,E){var I=s(q),M=s(w),T=I?m:a(q),j=M?m:a(w);T=T==p?f:T,j=j==p?f:j;var P=T==f,D=j==f,O=T==j;if(O&&u(q)){if(!u(w))return!1;I=!0,P=!1}if(O&&!P)return E||(E=new e),I||l(q)?t(q,w,b,C,S,E):n(q,w,T,b,C,S,E);if(!(b&d)){var F=P&&g.call(q,"__wrapped__"),Q=D&&g.call(w,"__wrapped__");if(F||Q){var V=F?q.value():q,X=Q?w.value():w;return E||(E=new e),S(V,X,b,C,E)}}return O?(E||(E=new e),i(q,w,b,C,S,E)):!1}return dm=x,dm}var pm,hq;function sI(){if(hq)return pm;hq=1;var e=bF(),t=Qn();function n(i,a,s,u,l){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:e(i,a,s,u,n,l)}return pm=n,pm}var fm,yq;function qF(){if(yq)return fm;yq=1;var e=Sc(),t=sI(),n=1,i=2;function a(s,u,l,d){var p=l.length,m=p,f=!d;if(s==null)return!m;for(s=Object(s);p--;){var h=l[p];if(f&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++p<m;){h=l[p];var g=h[0],x=s[g],q=h[1];if(f&&h[2]){if(x===void 0&&!(g in s))return!1}else{var w=new e;if(d)var b=d(x,q,g,s,u,w);if(!(b===void 0?t(q,x,n|i,d,w):b))return!1}}return!0}return fm=a,fm}var _m,gq;function uI(){if(gq)return _m;gq=1;var e=sn();function t(n){return n===n&&!e(n)}return _m=t,_m}var mm,vq;function SF(){if(vq)return mm;vq=1;var e=uI(),t=Xi();function n(i){for(var a=t(i),s=a.length;s--;){var u=a[s],l=i[u];a[s]=[u,l,e(l)]}return a}return mm=n,mm}var hm,xq;function lI(){if(xq)return hm;xq=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return hm=e,hm}var ym,wq;function CF(){if(wq)return ym;wq=1;var e=qF(),t=SF(),n=lI();function i(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return ym=i,ym}var gm,bq;function La(){if(bq)return gm;bq=1;var e=Oo(),t=Qn(),n="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&e(a)==n}return gm=i,gm}var vm,qq;function jg(){if(qq)return vm;qq=1;var e=Ft(),t=La(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,u){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:i.test(s)||!n.test(s)||u!=null&&s in Object(u)}return vm=a,vm}var xm,Sq;function kF(){if(Sq)return xm;Sq=1;var e=xg(),t="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,l=a?a.apply(this,u):u[0],d=s.cache;if(d.has(l))return d.get(l);var p=i.apply(this,u);return s.cache=d.set(l,p)||d,p};return s.cache=new(n.Cache||e),s}return n.Cache=e,xm=n,xm}var wm,Cq;function MF(){if(Cq)return wm;Cq=1;var e=kF(),t=500;function n(i){var a=e(i,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return wm=n,wm}var bm,kq;function EF(){if(kq)return bm;kq=1;var e=MF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,l,d,p){s.push(d?p.replace(n,"$1"):l||u)}),s});return bm=i,bm}var qm,Mq;function jc(){if(Mq)return qm;Mq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=n(t[i],i,t);return s}return qm=e,qm}var Sm,Eq;function IF(){if(Eq)return Sm;Eq=1;var e=Oa(),t=jc(),n=Ft(),i=La(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(l){if(typeof l=="string")return l;if(n(l))return t(l,u)+"";if(i(l))return s?s.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Sm=u,Sm}var Cm,Iq;function cI(){if(Iq)return Cm;Iq=1;var e=IF();function t(n){return n==null?"":e(n)}return Cm=t,Cm}var km,Tq;function Pc(){if(Tq)return km;Tq=1;var e=Ft(),t=jg(),n=EF(),i=cI();function a(s,u){return e(s)?s:t(s,u)?[s]:n(i(s))}return km=a,km}var Mm,Nq;function uu(){if(Nq)return Mm;Nq=1;var e=La();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return Mm=t,Mm}var Em,jq;function Rc(){if(jq)return Em;jq=1;var e=Pc(),t=uu();function n(i,a){a=e(a,i);for(var s=0,u=a.length;i!=null&&s<u;)i=i[t(a[s++])];return s&&s==u?i:void 0}return Em=n,Em}var Im,Pq;function TF(){if(Pq)return Im;Pq=1;var e=Rc();function t(n,i,a){var s=n==null?void 0:e(n,i);return s===void 0?a:s}return Im=t,Im}var Tm,Rq;function NF(){if(Rq)return Tm;Rq=1;function e(t,n){return t!=null&&n in Object(t)}return Tm=e,Tm}var Nm,Vq;function dI(){if(Vq)return Nm;Vq=1;var e=Pc(),t=au(),n=Ft(),i=Mc(),a=bg(),s=uu();function u(l,d,p){d=e(d,l);for(var m=-1,f=d.length,h=!1;++m<f;){var g=s(d[m]);if(!(h=l!=null&&p(l,g)))break;l=l[g]}return h||++m!=f?h:(f=l==null?0:l.length,!!f&&a(f)&&i(g,f)&&(n(l)||t(l)))}return Nm=u,Nm}var jm,Oq;function pI(){if(Oq)return jm;Oq=1;var e=NF(),t=dI();function n(i,a){return i!=null&&t(i,a,e)}return jm=n,jm}var Pm,Fq;function jF(){if(Fq)return Pm;Fq=1;var e=sI(),t=TF(),n=pI(),i=jg(),a=uI(),s=lI(),u=uu(),l=1,d=2;function p(m,f){return i(m)&&a(f)?s(u(m),f):function(h){var g=t(h,m);return g===void 0&&g===f?n(h,m):e(f,g,l|d)}}return Pm=p,Pm}var Rm,Aq;function fI(){if(Aq)return Rm;Aq=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Rm=e,Rm}var Vm,Lq;function PF(){if(Lq)return Vm;Lq=1;var e=Rc();function t(n){return function(i){return e(i,n)}}return Vm=t,Vm}var Om,Dq;function RF(){if(Dq)return Om;Dq=1;var e=fI(),t=PF(),n=jg(),i=uu();function a(s){return n(s)?e(i(s)):t(s)}return Om=a,Om}var Fm,Bq;function xi(){if(Bq)return Fm;Bq=1;var e=CF(),t=jF(),n=Lo(),i=Ft(),a=RF();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?i(u)?t(u[0],u[1]):e(u):a(u)}return Fm=s,Fm}var Am,zq;function _I(){if(zq)return Am;zq=1;var e=HE(),t=mF(),n=xi(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u,3))}return Am=a,Am}var Lm,$q;function VF(){if($q)return Lm;$q=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i,a){return i!=null&&t.call(i,a)}return Lm=n,Lm}var Dm,Hq;function mI(){if(Hq)return Dm;Hq=1;var e=VF(),t=dI();function n(i,a){return i!=null&&t(i,a,e)}return Dm=n,Dm}var Bm,Wq;function OF(){if(Wq)return Bm;Wq=1;var e=Sg(),t=Aa(),n=au(),i=Ft(),a=vi(),s=Fa(),u=Ic(),l=su(),d="[object Map]",p="[object Set]",m=Object.prototype,f=m.hasOwnProperty;function h(g){if(g==null)return!0;if(a(g)&&(i(g)||typeof g=="string"||typeof g.splice=="function"||s(g)||l(g)||n(g)))return!g.length;var x=t(g);if(x==d||x==p)return!g.size;if(u(g))return!e(g).length;for(var q in g)if(f.call(g,q))return!1;return!0}return Bm=h,Bm}var zm,Uq;function hI(){if(Uq)return zm;Uq=1;function e(t){return t===void 0}return zm=e,zm}var $m,Gq;function yI(){if(Gq)return $m;Gq=1;var e=Nc(),t=vi();function n(i,a){var s=-1,u=t(i)?Array(i.length):[];return e(i,function(l,d,p){u[++s]=a(l,d,p)}),u}return $m=n,$m}var Hm,Kq;function gI(){if(Kq)return Hm;Kq=1;var e=jc(),t=xi(),n=yI(),i=Ft();function a(s,u){var l=i(s)?e:n;return l(s,t(u,3))}return Hm=a,Hm}var Wm,Yq;function FF(){if(Yq)return Wm;Yq=1;function e(t,n,i,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(i=t[++s]);++s<u;)i=n(i,t[s],s,t);return i}return Wm=e,Wm}var Um,Qq;function AF(){if(Qq)return Um;Qq=1;function e(t,n,i,a,s){return s(t,function(u,l,d){i=a?(a=!1,u):n(i,u,l,d)}),i}return Um=e,Um}var Gm,Xq;function vI(){if(Xq)return Gm;Xq=1;var e=FF(),t=Nc(),n=xi(),i=AF(),a=Ft();function s(u,l,d){var p=a(u)?e:i,m=arguments.length<3;return p(u,n(l,4),d,m,t)}return Gm=s,Gm}var Km,Zq;function LF(){if(Zq)return Km;Zq=1;var e=Oo(),t=Ft(),n=Qn(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==i}return Km=a,Km}var Ym,Jq;function DF(){if(Jq)return Ym;Jq=1;var e=fI(),t=e("length");return Ym=t,Ym}var Qm,eS;function BF(){if(eS)return Qm;eS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+e+a+s+"]");function d(p){return l.test(p)}return Qm=d,Qm}var Xm,tS;function zF(){if(tS)return Xm;tS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="["+e+"]",l="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+d+")",m="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",x=p+"?",q="["+s+"]?",w="(?:"+g+"(?:"+[m,f,h].join("|")+")"+q+x+")*",b=q+x+w,C="(?:"+[m+l+"?",l,f,h,u].join("|")+")",S=RegExp(d+"(?="+d+")|"+C+b,"g");function E(I){for(var M=S.lastIndex=0;S.test(I);)++M;return M}return Xm=E,Xm}var Zm,rS;function $F(){if(rS)return Zm;rS=1;var e=DF(),t=BF(),n=zF();function i(a){return t(a)?n(a):e(a)}return Zm=i,Zm}var Jm,nS;function HF(){if(nS)return Jm;nS=1;var e=Sg(),t=Aa(),n=vi(),i=LF(),a=$F(),s="[object Map]",u="[object Set]";function l(d){if(d==null)return 0;if(n(d))return i(d)?a(d):d.length;var p=t(d);return p==s||p==u?d.size:e(d).length}return Jm=l,Jm}var eh,iS;function WF(){if(iS)return eh;iS=1;var e=wg(),t=ZE(),n=Tg(),i=xi(),a=Tc(),s=Ft(),u=Fa(),l=iu(),d=sn(),p=su();function m(f,h,g){var x=s(f),q=x||u(f)||p(f);if(h=i(h,4),g==null){var w=f&&f.constructor;q?g=x?new w:[]:d(f)?g=l(w)?t(a(f)):{}:g={}}return(q?e:n)(f,function(b,C,S){return h(g,b,C,S)}),g}return eh=m,eh}var th,oS;function UF(){if(oS)return th;oS=1;var e=Oa(),t=au(),n=Ft(),i=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(i&&s&&s[i])}return th=a,th}var rh,aS;function Pg(){if(aS)return rh;aS=1;var e=kg(),t=UF();function n(i,a,s,u,l){var d=-1,p=i.length;for(s||(s=t),l||(l=[]);++d<p;){var m=i[d];a>0&&s(m)?a>1?n(m,a-1,s,u,l):e(l,m):u||(l[l.length]=m)}return l}return rh=n,rh}var nh,sS;function GF(){if(sS)return nh;sS=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return nh=e,nh}var ih,uS;function xI(){if(uS)return ih;uS=1;var e=GF(),t=Math.max;function n(i,a,s){return a=t(a===void 0?i.length-1:a,0),function(){for(var u=arguments,l=-1,d=t(u.length-a,0),p=Array(d);++l<d;)p[l]=u[a+l];l=-1;for(var m=Array(a+1);++l<a;)m[l]=u[l];return m[a]=s(p),e(i,this,m)}}return ih=n,ih}var oh,lS;function KF(){if(lS)return oh;lS=1;var e=Eg(),t=LE(),n=Lo(),i=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return oh=i,oh}var ah,cS;function YF(){if(cS)return ah;cS=1;var e=800,t=16,n=Date.now;function i(a){var s=0,u=0;return function(){var l=n(),d=t-(l-u);if(u=l,d>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return ah=i,ah}var sh,dS;function wI(){if(dS)return sh;dS=1;var e=KF(),t=YF(),n=t(e);return sh=n,sh}var uh,pS;function Vc(){if(pS)return uh;pS=1;var e=Lo(),t=xI(),n=wI();function i(a,s){return n(t(a,s,e),a+"")}return uh=i,uh}var lh,fS;function bI(){if(fS)return lh;fS=1;function e(t,n,i,a){for(var s=t.length,u=i+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return lh=e,lh}var ch,_S;function QF(){if(_S)return ch;_S=1;function e(t){return t!==t}return ch=e,ch}var dh,mS;function XF(){if(mS)return dh;mS=1;function e(t,n,i){for(var a=i-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return dh=e,dh}var ph,hS;function ZF(){if(hS)return ph;hS=1;var e=bI(),t=QF(),n=XF();function i(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return ph=i,ph}var fh,yS;function JF(){if(yS)return fh;yS=1;var e=ZF();function t(n,i){var a=n==null?0:n.length;return!!a&&e(n,i,0)>-1}return fh=t,fh}var _h,gS;function eA(){if(gS)return _h;gS=1;function e(t,n,i){for(var a=-1,s=t==null?0:t.length;++a<s;)if(i(n,t[a]))return!0;return!1}return _h=e,_h}var mh,vS;function tA(){if(vS)return mh;vS=1;function e(){}return mh=e,mh}var hh,xS;function rA(){if(xS)return hh;xS=1;var e=YE(),t=tA(),n=Ng(),i=1/0,a=e&&1/n(new e([,-0]))[1]==i?function(s){return new e(s)}:t;return hh=a,hh}var yh,wS;function nA(){if(wS)return yh;wS=1;var e=iI(),t=JF(),n=eA(),i=oI(),a=rA(),s=Ng(),u=200;function l(d,p,m){var f=-1,h=t,g=d.length,x=!0,q=[],w=q;if(m)x=!1,h=n;else if(g>=u){var b=p?null:a(d);if(b)return s(b);x=!1,h=i,w=new e}else w=p?[]:q;e:for(;++f<g;){var C=d[f],S=p?p(C):C;if(C=m||C!==0?C:0,x&&S===S){for(var E=w.length;E--;)if(w[E]===S)continue e;p&&w.push(S),q.push(C)}else h(w,S,m)||(w!==q&&w.push(S),q.push(C))}return q}return yh=l,yh}var gh,bS;function qI(){if(bS)return gh;bS=1;var e=vi(),t=Qn();function n(i){return t(i)&&e(i)}return gh=n,gh}var vh,qS;function iA(){if(qS)return vh;qS=1;var e=Pg(),t=Vc(),n=nA(),i=qI(),a=t(function(s){return n(e(s,1,i,!0))});return vh=a,vh}var xh,SS;function oA(){if(SS)return xh;SS=1;var e=jc();function t(n,i){return e(i,function(a){return n[a]})}return xh=t,xh}var wh,CS;function SI(){if(CS)return wh;CS=1;var e=oA(),t=Xi();function n(i){return i==null?[]:e(i,t(i))}return wh=n,wh}var bh,kS;function un(){if(kS)return bh;kS=1;var e;if(typeof gg=="function")try{e={clone:pF(),constant:Eg(),each:nI(),filter:_I(),has:mI(),isArray:Ft(),isEmpty:OF(),isFunction:iu(),isUndefined:hI(),keys:Xi(),map:gI(),reduce:vI(),size:HF(),transform:WF(),union:iA(),values:SI()}}catch{}return e||(e=window._),bh=e,bh}var qh,MS;function Rg(){if(MS)return qh;MS=1;var e=un();qh=a;var t="\0",n="\0",i="";function a(m){this._isDirected=e.has(m,"directed")?m.directed:!0,this._isMultigraph=e.has(m,"multigraph")?m.multigraph:!1,this._isCompound=e.has(m,"compound")?m.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(m){return this._label=m,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultNodeLabelFn=m,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var m=this;return e.filter(this.nodes(),function(f){return e.isEmpty(m._in[f])})},a.prototype.sinks=function(){var m=this;return e.filter(this.nodes(),function(f){return e.isEmpty(m._out[f])})},a.prototype.setNodes=function(m,f){var h=arguments,g=this;return e.each(m,function(x){h.length>1?g.setNode(x,f):g.setNode(x)}),this},a.prototype.setNode=function(m,f){return e.has(this._nodes,m)?(arguments.length>1&&(this._nodes[m]=f),this):(this._nodes[m]=arguments.length>1?f:this._defaultNodeLabelFn(m),this._isCompound&&(this._parent[m]=n,this._children[m]={},this._children[n][m]=!0),this._in[m]={},this._preds[m]={},this._out[m]={},this._sucs[m]={},++this._nodeCount,this)},a.prototype.node=function(m){return this._nodes[m]},a.prototype.hasNode=function(m){return e.has(this._nodes,m)},a.prototype.removeNode=function(m){var f=this;if(e.has(this._nodes,m)){var h=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[m],this._isCompound&&(this._removeFromParentsChildList(m),delete this._parent[m],e.each(this.children(m),function(g){f.setParent(g)}),delete this._children[m]),e.each(e.keys(this._in[m]),h),delete this._in[m],delete this._preds[m],e.each(e.keys(this._out[m]),h),delete this._out[m],delete this._sucs[m],--this._nodeCount}return this},a.prototype.setParent=function(m,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===m)throw new Error("Setting "+f+" as parent of "+m+" would create a cycle");this.setNode(f)}return this.setNode(m),this._removeFromParentsChildList(m),this._parent[m]=f,this._children[f][m]=!0,this},a.prototype._removeFromParentsChildList=function(m){delete this._children[this._parent[m]][m]},a.prototype.parent=function(m){if(this._isCompound){var f=this._parent[m];if(f!==n)return f}},a.prototype.children=function(m){if(e.isUndefined(m)&&(m=n),this._isCompound){var f=this._children[m];if(f)return e.keys(f)}else{if(m===n)return this.nodes();if(this.hasNode(m))return[]}},a.prototype.predecessors=function(m){var f=this._preds[m];if(f)return e.keys(f)},a.prototype.successors=function(m){var f=this._sucs[m];if(f)return e.keys(f)},a.prototype.neighbors=function(m){var f=this.predecessors(m);if(f)return e.union(f,this.successors(m))},a.prototype.isLeaf=function(m){var f;return this.isDirected()?f=this.successors(m):f=this.neighbors(m),f.length===0},a.prototype.filterNodes=function(m){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(q,w){m(w)&&f.setNode(w,q)}),e.each(this._edgeObjs,function(q){f.hasNode(q.v)&&f.hasNode(q.w)&&f.setEdge(q,h.edge(q))});var g={};function x(q){var w=h.parent(q);return w===void 0||f.hasNode(w)?(g[q]=w,w):w in g?g[w]:x(w)}return this._isCompound&&e.each(f.nodes(),function(q){f.setParent(q,x(q))}),f},a.prototype.setDefaultEdgeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultEdgeLabelFn=m,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(m,f){var h=this,g=arguments;return e.reduce(m,function(x,q){return g.length>1?h.setEdge(x,q,f):h.setEdge(x,q),q}),this},a.prototype.setEdge=function(){var m,f,h,g,x=!1,q=arguments[0];typeof q=="object"&&q!==null&&"v"in q?(m=q.v,f=q.w,h=q.name,arguments.length===2&&(g=arguments[1],x=!0)):(m=q,f=arguments[1],h=arguments[3],arguments.length>2&&(g=arguments[2],x=!0)),m=""+m,f=""+f,e.isUndefined(h)||(h=""+h);var w=l(this._isDirected,m,f,h);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=g),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(m),this.setNode(f),this._edgeLabels[w]=x?g:this._defaultEdgeLabelFn(m,f,h);var b=d(this._isDirected,m,f,h);return m=b.v,f=b.w,Object.freeze(b),this._edgeObjs[w]=b,s(this._preds[f],m),s(this._sucs[m],f),this._in[f][w]=b,this._out[m][w]=b,this._edgeCount++,this},a.prototype.edge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h);return this._edgeLabels[g]},a.prototype.hasEdge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h);return e.has(this._edgeLabels,g)},a.prototype.removeEdge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h),x=this._edgeObjs[g];return x&&(m=x.v,f=x.w,delete this._edgeLabels[g],delete this._edgeObjs[g],u(this._preds[f],m),u(this._sucs[m],f),delete this._in[f][g],delete this._out[m][g],this._edgeCount--),this},a.prototype.inEdges=function(m,f){var h=this._in[m];if(h){var g=e.values(h);return f?e.filter(g,function(x){return x.v===f}):g}},a.prototype.outEdges=function(m,f){var h=this._out[m];if(h){var g=e.values(h);return f?e.filter(g,function(x){return x.w===f}):g}},a.prototype.nodeEdges=function(m,f){var h=this.inEdges(m,f);if(h)return h.concat(this.outEdges(m,f))};function s(m,f){m[f]?m[f]++:m[f]=1}function u(m,f){--m[f]||delete m[f]}function l(m,f,h,g){var x=""+f,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}return x+i+q+i+(e.isUndefined(g)?t:g)}function d(m,f,h,g){var x=""+f,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}var b={v:x,w:q};return g&&(b.name=g),b}function p(m,f){return l(m,f.v,f.w,f.name)}return qh}var Sh,ES;function aA(){return ES||(ES=1,Sh="2.1.8"),Sh}var Ch,IS;function sA(){return IS||(IS=1,Ch={Graph:Rg(),version:aA()}),Ch}var kh,TS;function uA(){if(TS)return kh;TS=1;var e=un(),t=Rg();kh={write:n,read:s};function n(u){var l={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:i(u),edges:a(u)};return e.isUndefined(u.graph())||(l.value=e.clone(u.graph())),l}function i(u){return e.map(u.nodes(),function(l){var d=u.node(l),p=u.parent(l),m={v:l};return e.isUndefined(d)||(m.value=d),e.isUndefined(p)||(m.parent=p),m})}function a(u){return e.map(u.edges(),function(l){var d=u.edge(l),p={v:l.v,w:l.w};return e.isUndefined(l.name)||(p.name=l.name),e.isUndefined(d)||(p.value=d),p})}function s(u){var l=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(d){l.setNode(d.v,d.value),d.parent&&l.setParent(d.v,d.parent)}),e.each(u.edges,function(d){l.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),l}return kh}var Mh,NS;function lA(){if(NS)return Mh;NS=1;var e=un();Mh=t;function t(n){var i={},a=[],s;function u(l){e.has(i,l)||(i[l]=!0,s.push(l),e.each(n.successors(l),u),e.each(n.predecessors(l),u))}return e.each(n.nodes(),function(l){s=[],u(l),s.length&&a.push(s)}),a}return Mh}var Eh,jS;function CI(){if(jS)return Eh;jS=1;var e=un();Eh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,i){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:i}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,i){var a=this._keyIndices[n];if(i>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+i);this._arr[a].priority=i,this._decrease(a)},t.prototype._heapify=function(n){var i=this._arr,a=2*n,s=a+1,u=n;a<i.length&&(u=i[a].priority<i[u].priority?a:u,s<i.length&&(u=i[s].priority<i[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var i=this._arr,a=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,i){var a=this._arr,s=this._keyIndices,u=a[n],l=a[i];a[n]=l,a[i]=u,s[l.key]=n,s[u.key]=i},Eh}var Ih,PS;function kI(){if(PS)return Ih;PS=1;var e=un(),t=CI();Ih=i;var n=e.constant(1);function i(s,u,l,d){return a(s,String(u),l||n,d||function(p){return s.outEdges(p)})}function a(s,u,l,d){var p={},m=new t,f,h,g=function(x){var q=x.v!==f?x.v:x.w,w=p[q],b=l(x),C=h.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+b);C<w.distance&&(w.distance=C,w.predecessor=f,m.decrease(q,C))};for(s.nodes().forEach(function(x){var q=x===u?0:Number.POSITIVE_INFINITY;p[x]={distance:q},m.add(x,q)});m.size()>0&&(f=m.removeMin(),h=p[f],h.distance!==Number.POSITIVE_INFINITY);)d(f).forEach(g);return p}return Ih}var Th,RS;function cA(){if(RS)return Th;RS=1;var e=kI(),t=un();Th=n;function n(i,a,s){return t.transform(i.nodes(),function(u,l){u[l]=e(i,l,a,s)},{})}return Th}var Nh,VS;function MI(){if(VS)return Nh;VS=1;var e=un();Nh=t;function t(n){var i=0,a=[],s={},u=[];function l(d){var p=s[d]={onStack:!0,lowlink:i,index:i++};if(a.push(d),n.successors(d).forEach(function(h){e.has(s,h)?s[h].onStack&&(p.lowlink=Math.min(p.lowlink,s[h].index)):(l(h),p.lowlink=Math.min(p.lowlink,s[h].lowlink))}),p.lowlink===p.index){var m=[],f;do f=a.pop(),s[f].onStack=!1,m.push(f);while(d!==f);u.push(m)}}return n.nodes().forEach(function(d){e.has(s,d)||l(d)}),u}return Nh}var jh,OS;function dA(){if(OS)return jh;OS=1;var e=un(),t=MI();jh=n;function n(i){return e.filter(t(i),function(a){return a.length>1||a.length===1&&i.hasEdge(a[0],a[0])})}return jh}var Ph,FS;function pA(){if(FS)return Ph;FS=1;var e=un();Ph=n;var t=e.constant(1);function n(a,s,u){return i(a,s||t,u||function(l){return a.outEdges(l)})}function i(a,s,u){var l={},d=a.nodes();return d.forEach(function(p){l[p]={},l[p][p]={distance:0},d.forEach(function(m){p!==m&&(l[p][m]={distance:Number.POSITIVE_INFINITY})}),u(p).forEach(function(m){var f=m.v===p?m.w:m.v,h=s(m);l[p][f]={distance:h,predecessor:p}})}),d.forEach(function(p){var m=l[p];d.forEach(function(f){var h=l[f];d.forEach(function(g){var x=h[p],q=m[g],w=h[g],b=x.distance+q.distance;b<w.distance&&(w.distance=b,w.predecessor=q.predecessor)})})}),l}return Ph}var Rh,AS;function EI(){if(AS)return Rh;AS=1;var e=un();Rh=t,t.CycleException=n;function t(i){var a={},s={},u=[];function l(d){if(e.has(s,d))throw new n;e.has(a,d)||(s[d]=!0,a[d]=!0,e.each(i.predecessors(d),l),delete s[d],u.push(d))}if(e.each(i.sinks(),l),e.size(a)!==i.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,Rh}var Vh,LS;function fA(){if(LS)return Vh;LS=1;var e=EI();Vh=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Vh}var Oh,DS;function II(){if(DS)return Oh;DS=1;var e=un();Oh=t;function t(i,a,s){e.isArray(a)||(a=[a]);var u=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],d={};return e.each(a,function(p){if(!i.hasNode(p))throw new Error("Graph does not have node: "+p);n(i,p,s==="post",d,u,l)}),l}function n(i,a,s,u,l,d){e.has(u,a)||(u[a]=!0,s||d.push(a),e.each(l(a),function(p){n(i,p,s,u,l,d)}),s&&d.push(a))}return Oh}var Fh,BS;function _A(){if(BS)return Fh;BS=1;var e=II();Fh=t;function t(n,i){return e(n,i,"post")}return Fh}var Ah,zS;function mA(){if(zS)return Ah;zS=1;var e=II();Ah=t;function t(n,i){return e(n,i,"pre")}return Ah}var Lh,$S;function hA(){if($S)return Lh;$S=1;var e=un(),t=Rg(),n=CI();Lh=i;function i(a,s){var u=new t,l={},d=new n,p;function m(h){var g=h.v===p?h.w:h.v,x=d.priority(g);if(x!==void 0){var q=s(h);q<x&&(l[g]=p,d.decrease(g,q))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(h){d.add(h,Number.POSITIVE_INFINITY),u.setNode(h)}),d.decrease(a.nodes()[0],0);for(var f=!1;d.size()>0;){if(p=d.removeMin(),e.has(l,p))u.setEdge(p,l[p]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(p).forEach(m)}return u}return Lh}var Dh,HS;function yA(){return HS||(HS=1,Dh={components:lA(),dijkstra:kI(),dijkstraAll:cA(),findCycles:dA(),floydWarshall:pA(),isAcyclic:fA(),postorder:_A(),preorder:mA(),prim:hA(),tarjan:MI(),topsort:EI()}),Dh}var Bh,WS;function gA(){if(WS)return Bh;WS=1;var e=sA();return Bh={Graph:e.Graph,json:uA(),alg:yA(),version:e.version},Bh}var zh,US;function jn(){if(US)return zh;US=1;var e;if(typeof gg=="function")try{e=gA()}catch{}return e||(e=window.graphlib),zh=e,zh}var $h,GS;function vA(){if(GS)return $h;GS=1;var e=eI(),t=1,n=4;function i(a){return e(a,t|n)}return $h=i,$h}var Hh,KS;function Oc(){if(KS)return Hh;KS=1;var e=Va(),t=vi(),n=Mc(),i=sn();function a(s,u,l){if(!i(l))return!1;var d=typeof u;return(d=="number"?t(l)&&n(u,l.length):d=="string"&&u in l)?e(l[u],s):!1}return Hh=a,Hh}var Wh,YS;function xA(){if(YS)return Wh;YS=1;var e=Vc(),t=Va(),n=Oc(),i=Ao(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(l,d){l=Object(l);var p=-1,m=d.length,f=m>2?d[2]:void 0;for(f&&n(d[0],d[1],f)&&(m=1);++p<m;)for(var h=d[p],g=i(h),x=-1,q=g.length;++x<q;){var w=g[x],b=l[w];(b===void 0||t(b,a[w])&&!s.call(l,w))&&(l[w]=h[w])}return l});return Wh=u,Wh}var Uh,QS;function wA(){if(QS)return Uh;QS=1;var e=xi(),t=vi(),n=Xi();function i(a){return function(s,u,l){var d=Object(s);if(!t(s)){var p=e(u,3);s=n(s),u=function(f){return p(d[f],f,d)}}var m=a(s,u,l);return m>-1?d[p?s[m]:m]:void 0}}return Uh=i,Uh}var Gh,XS;function bA(){if(XS)return Gh;XS=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return Gh=t,Gh}var Kh,ZS;function qA(){if(ZS)return Kh;ZS=1;var e=bA(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return Kh=n,Kh}var Yh,JS;function SA(){if(JS)return Yh;JS=1;var e=qA(),t=sn(),n=La(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return i;if(t(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=t(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=e(p);var f=s.test(p);return f||u.test(p)?l(p.slice(2),f?2:8):a.test(p)?i:+p}return Yh=d,Yh}var Qh,eC;function TI(){if(eC)return Qh;eC=1;var e=SA(),t=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return Qh=i,Qh}var Xh,tC;function CA(){if(tC)return Xh;tC=1;var e=TI();function t(n){var i=e(n),a=i%1;return i===i?a?i-a:i:0}return Xh=t,Xh}var Zh,rC;function kA(){if(rC)return Zh;rC=1;var e=bI(),t=xi(),n=CA(),i=Math.max;function a(s,u,l){var d=s==null?0:s.length;if(!d)return-1;var p=l==null?0:n(l);return p<0&&(p=i(d+p,0)),e(s,t(u,3),p)}return Zh=a,Zh}var Jh,nC;function MA(){if(nC)return Jh;nC=1;var e=wA(),t=kA(),n=e(t);return Jh=n,Jh}var ey,iC;function NI(){if(iC)return ey;iC=1;var e=Pg();function t(n){var i=n==null?0:n.length;return i?e(n,1):[]}return ey=t,ey}var ty,oC;function EA(){if(oC)return ty;oC=1;var e=Ig(),t=tI(),n=Ao();function i(a,s){return a==null?a:e(a,t(s),n)}return ty=i,ty}var ry,aC;function IA(){if(aC)return ry;aC=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ry=e,ry}var ny,sC;function TA(){if(sC)return ny;sC=1;var e=Cc(),t=Tg(),n=xi();function i(a,s){var u={};return s=n(s,3),t(a,function(l,d,p){e(u,d,s(l,d,p))}),u}return ny=i,ny}var iy,uC;function Vg(){if(uC)return iy;uC=1;var e=La();function t(n,i,a){for(var s=-1,u=n.length;++s<u;){var l=n[s],d=i(l);if(d!=null&&(p===void 0?d===d&&!e(d):a(d,p)))var p=d,m=l}return m}return iy=t,iy}var oy,lC;function NA(){if(lC)return oy;lC=1;function e(t,n){return t>n}return oy=e,oy}var ay,cC;function jA(){if(cC)return ay;cC=1;var e=Vg(),t=NA(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return ay=i,ay}var sy,dC;function jI(){if(dC)return sy;dC=1;var e=Cc(),t=Va();function n(i,a,s){(s!==void 0&&!t(i[a],s)||s===void 0&&!(a in i))&&e(i,a,s)}return sy=n,sy}var uy,pC;function PA(){if(pC)return uy;pC=1;var e=Oo(),t=Tc(),n=Qn(),i="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,d=u.call(Object);function p(m){if(!n(m)||e(m)!=i)return!1;var f=t(m);if(f===null)return!0;var h=l.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&u.call(h)==d}return uy=p,uy}var ly,fC;function PI(){if(fC)return ly;fC=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return ly=e,ly}var cy,_C;function RA(){if(_C)return cy;_C=1;var e=ou(),t=Ao();function n(i){return e(i,t(i))}return cy=n,cy}var dy,mC;function VA(){if(mC)return dy;mC=1;var e=jI(),t=zE(),n=XE(),i=$E(),a=JE(),s=au(),u=Ft(),l=qI(),d=Fa(),p=iu(),m=sn(),f=PA(),h=su(),g=PI(),x=RA();function q(w,b,C,S,E,I,M){var T=g(w,C),j=g(b,C),P=M.get(j);if(P){e(w,C,P);return}var D=I?I(T,j,C+"",w,b,M):void 0,O=D===void 0;if(O){var F=u(j),Q=!F&&d(j),V=!F&&!Q&&h(j);D=j,F||Q||V?u(T)?D=T:l(T)?D=i(T):Q?(O=!1,D=t(j,!0)):V?(O=!1,D=n(j,!0)):D=[]:f(j)||s(j)?(D=T,s(T)?D=x(T):(!m(T)||p(T))&&(D=a(j))):O=!1}O&&(M.set(j,D),E(D,j,S,I,M),M.delete(j)),e(w,C,D)}return dy=q,dy}var py,hC;function OA(){if(hC)return py;hC=1;var e=Sc(),t=jI(),n=Ig(),i=VA(),a=sn(),s=Ao(),u=PI();function l(d,p,m,f,h){d!==p&&n(p,function(g,x){if(h||(h=new e),a(g))i(d,p,x,m,l,f,h);else{var q=f?f(u(d,x),g,x+"",d,p,h):void 0;q===void 0&&(q=g),t(d,x,q)}},s)}return py=l,py}var fy,yC;function FA(){if(yC)return fy;yC=1;var e=Vc(),t=Oc();function n(i){return e(function(a,s){var u=-1,l=s.length,d=l>1?s[l-1]:void 0,p=l>2?s[2]:void 0;for(d=i.length>3&&typeof d=="function"?(l--,d):void 0,p&&t(s[0],s[1],p)&&(d=l<3?void 0:d,l=1),a=Object(a);++u<l;){var m=s[u];m&&i(a,m,u,d)}return a})}return fy=n,fy}var _y,gC;function AA(){if(gC)return _y;gC=1;var e=OA(),t=FA(),n=t(function(i,a,s){e(i,a,s)});return _y=n,_y}var my,vC;function RI(){if(vC)return my;vC=1;function e(t,n){return t<n}return my=e,my}var hy,xC;function LA(){if(xC)return hy;xC=1;var e=Vg(),t=RI(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return hy=i,hy}var yy,wC;function DA(){if(wC)return yy;wC=1;var e=Vg(),t=xi(),n=RI();function i(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return yy=i,yy}var gy,bC;function BA(){if(bC)return gy;bC=1;var e=Rn(),t=function(){return e.Date.now()};return gy=t,gy}var vy,qC;function zA(){if(qC)return vy;qC=1;var e=kc(),t=Pc(),n=Mc(),i=sn(),a=uu();function s(u,l,d,p){if(!i(u))return u;l=t(l,u);for(var m=-1,f=l.length,h=f-1,g=u;g!=null&&++m<f;){var x=a(l[m]),q=d;if(x==="__proto__"||x==="constructor"||x==="prototype")return u;if(m!=h){var w=g[x];q=p?p(w,x,g):void 0,q===void 0&&(q=i(w)?w:n(l[m+1])?[]:{})}e(g,x,q),g=g[x]}return u}return vy=s,vy}var xy,SC;function $A(){if(SC)return xy;SC=1;var e=Rc(),t=zA(),n=Pc();function i(a,s,u){for(var l=-1,d=s.length,p={};++l<d;){var m=s[l],f=e(a,m);u(f,m)&&t(p,n(m,a),f)}return p}return xy=i,xy}var wy,CC;function HA(){if(CC)return wy;CC=1;var e=$A(),t=pI();function n(i,a){return e(i,a,function(s,u){return t(i,u)})}return wy=n,wy}var by,kC;function WA(){if(kC)return by;kC=1;var e=NI(),t=xI(),n=wI();function i(a){return n(t(a,void 0,e),a+"")}return by=i,by}var qy,MC;function UA(){if(MC)return qy;MC=1;var e=HA(),t=WA(),n=t(function(i,a){return i==null?{}:e(i,a)});return qy=n,qy}var Sy,EC;function GA(){if(EC)return Sy;EC=1;var e=Math.ceil,t=Math.max;function n(i,a,s,u){for(var l=-1,d=t(e((a-i)/(s||1)),0),p=Array(d);d--;)p[u?d:++l]=i,i+=s;return p}return Sy=n,Sy}var Cy,IC;function KA(){if(IC)return Cy;IC=1;var e=GA(),t=Oc(),n=TI();function i(a){return function(s,u,l){return l&&typeof l!="number"&&t(s,u,l)&&(u=l=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),l=l===void 0?s<u?1:-1:n(l),e(s,u,l,a)}}return Cy=i,Cy}var ky,TC;function YA(){if(TC)return ky;TC=1;var e=KA(),t=e();return ky=t,ky}var My,NC;function QA(){if(NC)return My;NC=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return My=e,My}var Ey,jC;function XA(){if(jC)return Ey;jC=1;var e=La();function t(n,i){if(n!==i){var a=n!==void 0,s=n===null,u=n===n,l=e(n),d=i!==void 0,p=i===null,m=i===i,f=e(i);if(!p&&!f&&!l&&n>i||l&&d&&m&&!p&&!f||s&&d&&m||!a&&m||!u)return 1;if(!s&&!l&&!f&&n<i||f&&a&&u&&!s&&!l||p&&a&&u||!d&&u||!m)return-1}return 0}return Ey=t,Ey}var Iy,PC;function ZA(){if(PC)return Iy;PC=1;var e=XA();function t(n,i,a){for(var s=-1,u=n.criteria,l=i.criteria,d=u.length,p=a.length;++s<d;){var m=e(u[s],l[s]);if(m){if(s>=p)return m;var f=a[s];return m*(f=="desc"?-1:1)}}return n.index-i.index}return Iy=t,Iy}var Ty,RC;function JA(){if(RC)return Ty;RC=1;var e=jc(),t=Rc(),n=xi(),i=yI(),a=QA(),s=Ec(),u=ZA(),l=Lo(),d=Ft();function p(m,f,h){f.length?f=e(f,function(q){return d(q)?function(w){return t(w,q.length===1?q[0]:q)}:q}):f=[l];var g=-1;f=e(f,s(n));var x=i(m,function(q,w,b){var C=e(f,function(S){return S(q)});return{criteria:C,index:++g,value:q}});return a(x,function(q,w){return u(q,w,h)})}return Ty=p,Ty}var Ny,VC;function eL(){if(VC)return Ny;VC=1;var e=Pg(),t=JA(),n=Vc(),i=Oc(),a=n(function(s,u){if(s==null)return[];var l=u.length;return l>1&&i(s,u[0],u[1])?u=[]:l>2&&i(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return Ny=a,Ny}var jy,OC;function tL(){if(OC)return jy;OC=1;var e=cI(),t=0;function n(i){var a=++t;return e(i)+a}return jy=n,jy}var Py,FC;function rL(){if(FC)return Py;FC=1;function e(t,n,i){for(var a=-1,s=t.length,u=n.length,l={};++a<s;){var d=a<u?n[a]:void 0;i(l,t[a],d)}return l}return Py=e,Py}var Ry,AC;function nL(){if(AC)return Ry;AC=1;var e=kc(),t=rL();function n(i,a){return t(i||[],a||[],e)}return Ry=n,Ry}var Vy,LC;function Ct(){if(LC)return Vy;LC=1;var e;if(typeof gg=="function")try{e={cloneDeep:vA(),constant:Eg(),defaults:xA(),each:nI(),filter:_I(),find:MA(),flatten:NI(),forEach:rI(),forIn:EA(),has:mI(),isUndefined:hI(),last:IA(),map:gI(),mapValues:TA(),max:jA(),merge:AA(),min:LA(),minBy:DA(),now:BA(),pick:UA(),range:YA(),reduce:vI(),sortBy:eL(),uniqueId:tL(),values:SI(),zipObject:nL()}}catch{}return e||(e=window._),Vy=e,Vy}var Oy,DC;function iL(){if(DC)return Oy;DC=1,Oy=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,a=i._prev;if(a!==i)return t(a),a},e.prototype.enqueue=function(i){var a=this._sentinel;i._prev&&i._next&&t(i),i._next=a._next,a._next._prev=i,a._next=i,i._prev=a},e.prototype.toString=function(){for(var i=[],a=this._sentinel,s=a._prev;s!==a;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"};function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,a){if(i!=="_next"&&i!=="_prev")return a}return Oy}var Fy,BC;function oL(){if(BC)return Fy;BC=1;var e=Ct(),t=jn().Graph,n=iL();Fy=a;var i=e.constant(1);function a(p,m){if(p.nodeCount()<=1)return[];var f=l(p,m||i),h=s(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(h,function(g){return p.outEdges(g.v,g.w)}),!0)}function s(p,m,f){for(var h=[],g=m[m.length-1],x=m[0],q;p.nodeCount();){for(;q=x.dequeue();)u(p,m,f,q);for(;q=g.dequeue();)u(p,m,f,q);if(p.nodeCount()){for(var w=m.length-2;w>0;--w)if(q=m[w].dequeue(),q){h=h.concat(u(p,m,f,q,!0));break}}}return h}function u(p,m,f,h,g){var x=g?[]:void 0;return e.forEach(p.inEdges(h.v),function(q){var w=p.edge(q),b=p.node(q.v);g&&x.push({v:q.v,w:q.w}),b.out-=w,d(m,f,b)}),e.forEach(p.outEdges(h.v),function(q){var w=p.edge(q),b=q.w,C=p.node(b);C.in-=w,d(m,f,C)}),p.removeNode(h.v),x}function l(p,m){var f=new t,h=0,g=0;e.forEach(p.nodes(),function(w){f.setNode(w,{v:w,in:0,out:0})}),e.forEach(p.edges(),function(w){var b=f.edge(w.v,w.w)||0,C=m(w),S=b+C;f.setEdge(w.v,w.w,S),g=Math.max(g,f.node(w.v).out+=C),h=Math.max(h,f.node(w.w).in+=C)});var x=e.range(g+h+3).map(function(){return new n}),q=h+1;return e.forEach(f.nodes(),function(w){d(x,q,f.node(w))}),{graph:f,buckets:x,zeroIdx:q}}function d(p,m,f){f.out?f.in?p[f.out-f.in+m].enqueue(f):p[p.length-1].enqueue(f):p[0].enqueue(f)}return Fy}var Ay,zC;function aL(){if(zC)return Ay;zC=1;var e=Ct(),t=oL();Ay={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,l(s)):i(s);e.forEach(u,function(d){var p=s.edge(d);s.removeEdge(d),p.forwardName=d.name,p.reversed=!0,s.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function l(d){return function(p){return d.edge(p).weight}}}function i(s){var u=[],l={},d={};function p(m){e.has(d,m)||(d[m]=!0,l[m]=!0,e.forEach(s.outEdges(m),function(f){e.has(l,f.w)?u.push(f):p(f.w)}),delete l[m])}return e.forEach(s.nodes(),p),u}function a(s){e.forEach(s.edges(),function(u){var l=s.edge(u);if(l.reversed){s.removeEdge(u);var d=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(u.w,u.v,l,d)}})}return Ay}var Ly,$C;function Pr(){if($C)return Ly;$C=1;var e=Ct(),t=jn().Graph;Ly={addDummyNode:n,simplify:i,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:l,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:m,addBorderNode:f,maxRank:h,partition:g,time:x,notime:q};function n(w,b,C,S){var E;do E=e.uniqueId(S);while(w.hasNode(E));return C.dummy=b,w.setNode(E,C),E}function i(w){var b=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(C){b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){var S=b.edge(C.v,C.w)||{weight:0,minlen:1},E=w.edge(C);b.setEdge(C.v,C.w,{weight:S.weight+E.weight,minlen:Math.max(S.minlen,E.minlen)})}),b}function a(w){var b=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(C){w.children(C).length||b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){b.setEdge(C,w.edge(C))}),b}function s(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.outEdges(C),function(E){S[E.w]=(S[E.w]||0)+w.edge(E).weight}),S});return e.zipObject(w.nodes(),b)}function u(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.inEdges(C),function(E){S[E.v]=(S[E.v]||0)+w.edge(E).weight}),S});return e.zipObject(w.nodes(),b)}function l(w,b){var C=w.x,S=w.y,E=b.x-C,I=b.y-S,M=w.width/2,T=w.height/2;if(!E&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var j,P;return Math.abs(I)*M>Math.abs(E)*T?(I<0&&(T=-T),j=T*E/I,P=T):(E<0&&(M=-M),j=M,P=M*I/E),{x:C+j,y:S+P}}function d(w){var b=e.map(e.range(h(w)+1),function(){return[]});return e.forEach(w.nodes(),function(C){var S=w.node(C),E=S.rank;e.isUndefined(E)||(b[E][S.order]=C)}),b}function p(w){var b=e.min(e.map(w.nodes(),function(C){return w.node(C).rank}));e.forEach(w.nodes(),function(C){var S=w.node(C);e.has(S,"rank")&&(S.rank-=b)})}function m(w){var b=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),C=[];e.forEach(w.nodes(),function(I){var M=w.node(I).rank-b;C[M]||(C[M]=[]),C[M].push(I)});var S=0,E=w.graph().nodeRankFactor;e.forEach(C,function(I,M){e.isUndefined(I)&&M%E!==0?--S:S&&e.forEach(I,function(T){w.node(T).rank+=S})})}function f(w,b,C,S){var E={width:0,height:0};return arguments.length>=4&&(E.rank=C,E.order=S),n(w,"border",E,b)}function h(w){return e.max(e.map(w.nodes(),function(b){var C=w.node(b).rank;if(!e.isUndefined(C))return C}))}function g(w,b){var C={lhs:[],rhs:[]};return e.forEach(w,function(S){b(S)?C.lhs.push(S):C.rhs.push(S)}),C}function x(w,b){var C=e.now();try{return b()}finally{console.log(w+" time: "+(e.now()-C)+"ms")}}function q(w,b){return b()}return Ly}var Dy,HC;function sL(){if(HC)return Dy;HC=1;var e=Ct(),t=Pr();Dy={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){i(s,u)})}function i(s,u){var l=u.v,d=s.node(l).rank,p=u.w,m=s.node(p).rank,f=u.name,h=s.edge(u),g=h.labelRank;if(m!==d+1){s.removeEdge(u);var x,q,w;for(w=0,++d;d<m;++w,++d)h.points=[],q={width:0,height:0,edgeLabel:h,edgeObj:u,rank:d},x=t.addDummyNode(s,"edge",q,"_d"),d===g&&(q.width=h.width,q.height=h.height,q.dummy="edge-label",q.labelpos=h.labelpos),s.setEdge(l,x,{weight:h.weight},f),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,p,{weight:h.weight},f)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var l=s.node(u),d=l.edgeLabel,p;for(s.setEdge(l.edgeObj,d);l.dummy;)p=s.successors(u)[0],s.removeNode(u),d.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(d.x=l.x,d.y=l.y,d.width=l.width,d.height=l.height),u=p,l=s.node(u)})}return Dy}var By,WC;function ac(){if(WC)return By;WC=1;var e=Ct();By={longestPath:t,slack:n};function t(i){var a={};function s(u){var l=i.node(u);if(e.has(a,u))return l.rank;a[u]=!0;var d=e.min(e.map(i.outEdges(u),function(p){return s(p.w)-i.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),l.rank=d}e.forEach(i.sources(),s)}function n(i,a){return i.node(a.w).rank-i.node(a.v).rank-i.edge(a).minlen}return By}var zy,UC;function VI(){if(UC)return zy;UC=1;var e=Ct(),t=jn().Graph,n=ac().slack;zy=i;function i(l){var d=new t({directed:!1}),p=l.nodes()[0],m=l.nodeCount();d.setNode(p,{});for(var f,h;a(d,l)<m;)f=s(d,l),h=d.hasNode(f.v)?n(l,f):-n(l,f),u(d,l,h);return d}function a(l,d){function p(m){e.forEach(d.nodeEdges(m),function(f){var h=f.v,g=m===h?f.w:h;!l.hasNode(g)&&!n(d,f)&&(l.setNode(g,{}),l.setEdge(m,g,{}),p(g))})}return e.forEach(l.nodes(),p),l.nodeCount()}function s(l,d){return e.minBy(d.edges(),function(p){if(l.hasNode(p.v)!==l.hasNode(p.w))return n(d,p)})}function u(l,d,p){e.forEach(l.nodes(),function(m){d.node(m).rank+=p})}return zy}var $y,GC;function uL(){if(GC)return $y;GC=1;var e=Ct(),t=VI(),n=ac().slack,i=ac().longestPath,a=jn().alg.preorder,s=jn().alg.postorder,u=Pr().simplify;$y=l,l.initLowLimValues=f,l.initCutValues=d,l.calcCutValue=m,l.leaveEdge=g,l.enterEdge=x,l.exchangeEdges=q;function l(S){S=u(S),i(S);var E=t(S);f(E),d(E,S);for(var I,M;I=g(E);)M=x(E,S,I),q(E,S,I,M)}function d(S,E){var I=s(S,S.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(M){p(S,E,M)})}function p(S,E,I){var M=S.node(I),T=M.parent;S.edge(I,T).cutvalue=m(S,E,I)}function m(S,E,I){var M=S.node(I),T=M.parent,j=!0,P=E.edge(I,T),D=0;return P||(j=!1,P=E.edge(T,I)),D=P.weight,e.forEach(E.nodeEdges(I),function(O){var F=O.v===I,Q=F?O.w:O.v;if(Q!==T){var V=F===j,X=E.edge(O).weight;if(D+=V?X:-X,b(S,I,Q)){var W=S.edge(I,Q).cutvalue;D+=V?-W:W}}}),D}function f(S,E){arguments.length<2&&(E=S.nodes()[0]),h(S,{},1,E)}function h(S,E,I,M,T){var j=I,P=S.node(M);return E[M]=!0,e.forEach(S.neighbors(M),function(D){e.has(E,D)||(I=h(S,E,I,D,M))}),P.low=j,P.lim=I++,T?P.parent=T:delete P.parent,I}function g(S){return e.find(S.edges(),function(E){return S.edge(E).cutvalue<0})}function x(S,E,I){var M=I.v,T=I.w;E.hasEdge(M,T)||(M=I.w,T=I.v);var j=S.node(M),P=S.node(T),D=j,O=!1;j.lim>P.lim&&(D=P,O=!0);var F=e.filter(E.edges(),function(Q){return O===C(S,S.node(Q.v),D)&&O!==C(S,S.node(Q.w),D)});return e.minBy(F,function(Q){return n(E,Q)})}function q(S,E,I,M){var T=I.v,j=I.w;S.removeEdge(T,j),S.setEdge(M.v,M.w,{}),f(S),d(S,E),w(S,E)}function w(S,E){var I=e.find(S.nodes(),function(T){return!E.node(T).parent}),M=a(S,I);M=M.slice(1),e.forEach(M,function(T){var j=S.node(T).parent,P=E.edge(T,j),D=!1;P||(P=E.edge(j,T),D=!0),E.node(T).rank=E.node(j).rank+(D?P.minlen:-P.minlen)})}function b(S,E,I){return S.hasEdge(E,I)}function C(S,E,I){return I.low<=E.lim&&E.lim<=I.lim}return $y}var Hy,KC;function lL(){if(KC)return Hy;KC=1;var e=ac(),t=e.longestPath,n=VI(),i=uL();Hy=a;function a(d){switch(d.graph().ranker){case"network-simplex":l(d);break;case"tight-tree":u(d);break;case"longest-path":s(d);break;default:l(d)}}var s=t;function u(d){t(d),n(d)}function l(d){i(d)}return Hy}var Wy,YC;function cL(){if(YC)return Wy;YC=1;var e=Ct();Wy=t;function t(a){var s=i(a);e.forEach(a.graph().dummyChains,function(u){for(var l=a.node(u),d=l.edgeObj,p=n(a,s,d.v,d.w),m=p.path,f=p.lca,h=0,g=m[h],x=!0;u!==d.w;){if(l=a.node(u),x){for(;(g=m[h])!==f&&a.node(g).maxRank<l.rank;)h++;g===f&&(x=!1)}if(!x){for(;h<m.length-1&&a.node(g=m[h+1]).minRank<=l.rank;)h++;g=m[h]}a.setParent(u,g),u=a.successors(u)[0]}})}function n(a,s,u,l){var d=[],p=[],m=Math.min(s[u].low,s[l].low),f=Math.max(s[u].lim,s[l].lim),h,g;h=u;do h=a.parent(h),d.push(h);while(h&&(s[h].low>m||f>s[h].lim));for(g=h,h=l;(h=a.parent(h))!==g;)p.push(h);return{path:d.concat(p.reverse()),lca:g}}function i(a){var s={},u=0;function l(d){var p=u;e.forEach(a.children(d),l),s[d]={low:p,lim:u++}}return e.forEach(a.children(),l),s}return Wy}var Uy,QC;function dL(){if(QC)return Uy;QC=1;var e=Ct(),t=Pr();Uy={run:n,cleanup:u};function n(l){var d=t.addDummyNode(l,"root",{},"_root"),p=a(l),m=e.max(e.values(p))-1,f=2*m+1;l.graph().nestingRoot=d,e.forEach(l.edges(),function(g){l.edge(g).minlen*=f});var h=s(l)+1;e.forEach(l.children(),function(g){i(l,d,f,h,m,p,g)}),l.graph().nodeRankFactor=f}function i(l,d,p,m,f,h,g){var x=l.children(g);if(!x.length){g!==d&&l.setEdge(d,g,{weight:0,minlen:p});return}var q=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),b=l.node(g);l.setParent(q,g),b.borderTop=q,l.setParent(w,g),b.borderBottom=w,e.forEach(x,function(C){i(l,d,p,m,f,h,C);var S=l.node(C),E=S.borderTop?S.borderTop:C,I=S.borderBottom?S.borderBottom:C,M=S.borderTop?m:2*m,T=E!==I?1:f-h[g]+1;l.setEdge(q,E,{weight:M,minlen:T,nestingEdge:!0}),l.setEdge(I,w,{weight:M,minlen:T,nestingEdge:!0})}),l.parent(g)||l.setEdge(d,q,{weight:0,minlen:f+h[g]})}function a(l){var d={};function p(m,f){var h=l.children(m);h&&h.length&&e.forEach(h,function(g){p(g,f+1)}),d[m]=f}return e.forEach(l.children(),function(m){p(m,1)}),d}function s(l){return e.reduce(l.edges(),function(d,p){return d+l.edge(p).weight},0)}function u(l){var d=l.graph();l.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(l.edges(),function(p){var m=l.edge(p);m.nestingEdge&&l.removeEdge(p)})}return Uy}var Gy,XC;function pL(){if(XC)return Gy;XC=1;var e=Ct(),t=Pr();Gy=n;function n(a){function s(u){var l=a.children(u),d=a.node(u);if(l.length&&e.forEach(l,s),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,m=d.maxRank+1;p<m;++p)i(a,"borderLeft","_bl",u,d,p),i(a,"borderRight","_br",u,d,p)}}e.forEach(a.children(),s)}function i(a,s,u,l,d,p){var m={width:0,height:0,rank:p,borderType:s},f=d[s][p-1],h=t.addDummyNode(a,"border",m,u);d[s][p]=h,a.setParent(h,l),f&&a.setEdge(f,h,{weight:1})}return Gy}var Ky,ZC;function fL(){if(ZC)return Ky;ZC=1;var e=Ct();Ky={adjust:t,undo:n};function t(p){var m=p.graph().rankdir.toLowerCase();(m==="lr"||m==="rl")&&i(p)}function n(p){var m=p.graph().rankdir.toLowerCase();(m==="bt"||m==="rl")&&s(p),(m==="lr"||m==="rl")&&(l(p),i(p))}function i(p){e.forEach(p.nodes(),function(m){a(p.node(m))}),e.forEach(p.edges(),function(m){a(p.edge(m))})}function a(p){var m=p.width;p.width=p.height,p.height=m}function s(p){e.forEach(p.nodes(),function(m){u(p.node(m))}),e.forEach(p.edges(),function(m){var f=p.edge(m);e.forEach(f.points,u),e.has(f,"y")&&u(f)})}function u(p){p.y=-p.y}function l(p){e.forEach(p.nodes(),function(m){d(p.node(m))}),e.forEach(p.edges(),function(m){var f=p.edge(m);e.forEach(f.points,d),e.has(f,"x")&&d(f)})}function d(p){var m=p.x;p.x=p.y,p.y=m}return Ky}var Yy,JC;function _L(){if(JC)return Yy;JC=1;var e=Ct();Yy=t;function t(n){var i={},a=e.filter(n.nodes(),function(p){return!n.children(p).length}),s=e.max(e.map(a,function(p){return n.node(p).rank})),u=e.map(e.range(s+1),function(){return[]});function l(p){if(!e.has(i,p)){i[p]=!0;var m=n.node(p);u[m.rank].push(p),e.forEach(n.successors(p),l)}}var d=e.sortBy(a,function(p){return n.node(p).rank});return e.forEach(d,l),u}return Yy}var Qy,ek;function mL(){if(ek)return Qy;ek=1;var e=Ct();Qy=t;function t(i,a){for(var s=0,u=1;u<a.length;++u)s+=n(i,a[u-1],a[u]);return s}function n(i,a,s){for(var u=e.zipObject(s,e.map(s,function(h,g){return g})),l=e.flatten(e.map(a,function(h){return e.sortBy(e.map(i.outEdges(h),function(g){return{pos:u[g.w],weight:i.edge(g).weight}}),"pos")}),!0),d=1;d<s.length;)d<<=1;var p=2*d-1;d-=1;var m=e.map(new Array(p),function(){return 0}),f=0;return e.forEach(l.forEach(function(h){var g=h.pos+d;m[g]+=h.weight;for(var x=0;g>0;)g%2&&(x+=m[g+1]),g=g-1>>1,m[g]+=h.weight;f+=h.weight*x})),f}return Qy}var Xy,tk;function hL(){if(tk)return Xy;tk=1;var e=Ct();Xy=t;function t(n,i){return e.map(i,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(l,d){var p=n.edge(d),m=n.node(d.v);return{sum:l.sum+p.weight*m.order,weight:l.weight+p.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return Xy}var Zy,rk;function yL(){if(rk)return Zy;rk=1;var e=Ct();Zy=t;function t(a,s){var u={};e.forEach(a,function(d,p){var m=u[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(m.barycenter=d.barycenter,m.weight=d.weight)}),e.forEach(s.edges(),function(d){var p=u[d.v],m=u[d.w];!e.isUndefined(p)&&!e.isUndefined(m)&&(m.indegree++,p.out.push(u[d.w]))});var l=e.filter(u,function(d){return!d.indegree});return n(l)}function n(a){var s=[];function u(p){return function(m){m.merged||(e.isUndefined(m.barycenter)||e.isUndefined(p.barycenter)||m.barycenter>=p.barycenter)&&i(p,m)}}function l(p){return function(m){m.in.push(p),--m.indegree===0&&a.push(m)}}for(;a.length;){var d=a.pop();s.push(d),e.forEach(d.in.reverse(),u(d)),e.forEach(d.out,l(d))}return e.map(e.filter(s,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function i(a,s){var u=0,l=0;a.weight&&(u+=a.barycenter*a.weight,l+=a.weight),s.weight&&(u+=s.barycenter*s.weight,l+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/l,a.weight=l,a.i=Math.min(s.i,a.i),s.merged=!0}return Zy}var Jy,nk;function gL(){if(nk)return Jy;nk=1;var e=Ct(),t=Pr();Jy=n;function n(s,u){var l=t.partition(s,function(q){return e.has(q,"barycenter")}),d=l.lhs,p=e.sortBy(l.rhs,function(q){return-q.i}),m=[],f=0,h=0,g=0;d.sort(a(!!u)),g=i(m,p,g),e.forEach(d,function(q){g+=q.vs.length,m.push(q.vs),f+=q.barycenter*q.weight,h+=q.weight,g=i(m,p,g)});var x={vs:e.flatten(m,!0)};return h&&(x.barycenter=f/h,x.weight=h),x}function i(s,u,l){for(var d;u.length&&(d=e.last(u)).i<=l;)u.pop(),s.push(d.vs),l++;return l}function a(s){return function(u,l){return u.barycenter<l.barycenter?-1:u.barycenter>l.barycenter?1:s?l.i-u.i:u.i-l.i}}return Jy}var e0,ik;function vL(){if(ik)return e0;ik=1;var e=Ct(),t=hL(),n=yL(),i=gL();e0=a;function a(l,d,p,m){var f=l.children(d),h=l.node(d),g=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,q={};g&&(f=e.filter(f,function(I){return I!==g&&I!==x}));var w=t(l,f);e.forEach(w,function(I){if(l.children(I.v).length){var M=a(l,I.v,p,m);q[I.v]=M,e.has(M,"barycenter")&&u(I,M)}});var b=n(w,p);s(b,q);var C=i(b,m);if(g&&(C.vs=e.flatten([g,C.vs,x],!0),l.predecessors(g).length)){var S=l.node(l.predecessors(g)[0]),E=l.node(l.predecessors(x)[0]);e.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+S.order+E.order)/(C.weight+2),C.weight+=2}return C}function s(l,d){e.forEach(l,function(p){p.vs=e.flatten(p.vs.map(function(m){return d[m]?d[m].vs:m}),!0)})}function u(l,d){e.isUndefined(l.barycenter)?(l.barycenter=d.barycenter,l.weight=d.weight):(l.barycenter=(l.barycenter*l.weight+d.barycenter*d.weight)/(l.weight+d.weight),l.weight+=d.weight)}return e0}var t0,ok;function xL(){if(ok)return t0;ok=1;var e=Ct(),t=jn().Graph;t0=n;function n(a,s,u){var l=i(a),d=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(p){return a.node(p)});return e.forEach(a.nodes(),function(p){var m=a.node(p),f=a.parent(p);(m.rank===s||m.minRank<=s&&s<=m.maxRank)&&(d.setNode(p),d.setParent(p,f||l),e.forEach(a[u](p),function(h){var g=h.v===p?h.w:h.v,x=d.edge(g,p),q=e.isUndefined(x)?0:x.weight;d.setEdge(g,p,{weight:a.edge(h).weight+q})}),e.has(m,"minRank")&&d.setNode(p,{borderLeft:m.borderLeft[s],borderRight:m.borderRight[s]}))}),d}function i(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return t0}var r0,ak;function wL(){if(ak)return r0;ak=1;var e=Ct();r0=t;function t(n,i,a){var s={},u;e.forEach(a,function(l){for(var d=n.parent(l),p,m;d;){if(p=n.parent(d),p?(m=s[p],s[p]=d):(m=u,u=d),m&&m!==d){i.setEdge(m,d);return}d=p}})}return r0}var n0,sk;function bL(){if(sk)return n0;sk=1;var e=Ct(),t=_L(),n=mL(),i=vL(),a=xL(),s=wL(),u=jn().Graph,l=Pr();n0=d;function d(h){var g=l.maxRank(h),x=p(h,e.range(1,g+1),"inEdges"),q=p(h,e.range(g-1,-1,-1),"outEdges"),w=t(h);f(h,w);for(var b=Number.POSITIVE_INFINITY,C,S=0,E=0;E<4;++S,++E){m(S%2?x:q,S%4>=2),w=l.buildLayerMatrix(h);var I=n(h,w);I<b&&(E=0,C=e.cloneDeep(w),b=I)}f(h,C)}function p(h,g,x){return e.map(g,function(q){return a(h,q,x)})}function m(h,g){var x=new u;e.forEach(h,function(q){var w=q.graph().root,b=i(q,w,x,g);e.forEach(b.vs,function(C,S){q.node(C).order=S}),s(q,x,b.vs)})}function f(h,g){e.forEach(g,function(x){e.forEach(x,function(q,w){h.node(q).order=w})})}return n0}var i0,uk;function qL(){if(uk)return i0;uk=1;var e=Ct(),t=jn().Graph,n=Pr();i0={positionX:x,findType1Conflicts:i,findType2Conflicts:a,addConflict:u,hasConflict:l,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:h,findSmallestWidthAlignment:f,balance:g};function i(b,C){var S={};function E(I,M){var T=0,j=0,P=I.length,D=e.last(M);return e.forEach(M,function(O,F){var Q=s(b,O),V=Q?b.node(Q).order:P;(Q||O===D)&&(e.forEach(M.slice(j,F+1),function(X){e.forEach(b.predecessors(X),function(W){var te=b.node(W),U=te.order;(U<T||V<U)&&!(te.dummy&&b.node(X).dummy)&&u(S,W,X)})}),j=F+1,T=V)}),M}return e.reduce(C,E),S}function a(b,C){var S={};function E(M,T,j,P,D){var O;e.forEach(e.range(T,j),function(F){O=M[F],b.node(O).dummy&&e.forEach(b.predecessors(O),function(Q){var V=b.node(Q);V.dummy&&(V.order<P||V.order>D)&&u(S,Q,O)})})}function I(M,T){var j=-1,P,D=0;return e.forEach(T,function(O,F){if(b.node(O).dummy==="border"){var Q=b.predecessors(O);Q.length&&(P=b.node(Q[0]).order,E(T,D,F,j,P),D=F,j=P)}E(T,D,T.length,P,M.length)}),T}return e.reduce(C,I),S}function s(b,C){if(b.node(C).dummy)return e.find(b.predecessors(C),function(S){return b.node(S).dummy})}function u(b,C,S){if(C>S){var E=C;C=S,S=E}var I=b[C];I||(b[C]=I={}),I[S]=!0}function l(b,C,S){if(C>S){var E=C;C=S,S=E}return e.has(b[C],S)}function d(b,C,S,E){var I={},M={},T={};return e.forEach(C,function(j){e.forEach(j,function(P,D){I[P]=P,M[P]=P,T[P]=D})}),e.forEach(C,function(j){var P=-1;e.forEach(j,function(D){var O=E(D);if(O.length){O=e.sortBy(O,function(W){return T[W]});for(var F=(O.length-1)/2,Q=Math.floor(F),V=Math.ceil(F);Q<=V;++Q){var X=O[Q];M[D]===D&&P<T[X]&&!l(S,D,X)&&(M[X]=D,M[D]=I[D]=I[X],P=T[X])}}})}),{root:I,align:M}}function p(b,C,S,E,I){var M={},T=m(b,C,S,I),j=I?"borderLeft":"borderRight";function P(F,Q){for(var V=T.nodes(),X=V.pop(),W={};X;)W[X]?F(X):(W[X]=!0,V.push(X),V=V.concat(Q(X))),X=V.pop()}function D(F){M[F]=T.inEdges(F).reduce(function(Q,V){return Math.max(Q,M[V.v]+T.edge(V))},0)}function O(F){var Q=T.outEdges(F).reduce(function(X,W){return Math.min(X,M[W.w]-T.edge(W))},Number.POSITIVE_INFINITY),V=b.node(F);Q!==Number.POSITIVE_INFINITY&&V.borderType!==j&&(M[F]=Math.max(M[F],Q))}return P(D,T.predecessors.bind(T)),P(O,T.successors.bind(T)),e.forEach(E,function(F){M[F]=M[S[F]]}),M}function m(b,C,S,E){var I=new t,M=b.graph(),T=q(M.nodesep,M.edgesep,E);return e.forEach(C,function(j){var P;e.forEach(j,function(D){var O=S[D];if(I.setNode(O),P){var F=S[P],Q=I.edge(F,O);I.setEdge(F,O,Math.max(T(b,D,P),Q||0))}P=D})}),I}function f(b,C){return e.minBy(e.values(C),function(S){var E=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(S,function(M,T){var j=w(b,T)/2;E=Math.max(M+j,E),I=Math.min(M-j,I)}),E-I})}function h(b,C){var S=e.values(C),E=e.min(S),I=e.max(S);e.forEach(["u","d"],function(M){e.forEach(["l","r"],function(T){var j=M+T,P=b[j],D;if(P!==C){var O=e.values(P);D=T==="l"?E-e.min(O):I-e.max(O),D&&(b[j]=e.mapValues(P,function(F){return F+D}))}})})}function g(b,C){return e.mapValues(b.ul,function(S,E){if(C)return b[C.toLowerCase()][E];var I=e.sortBy(e.map(b,E));return(I[1]+I[2])/2})}function x(b){var C=n.buildLayerMatrix(b),S=e.merge(i(b,C),a(b,C)),E={},I;e.forEach(["u","d"],function(T){I=T==="u"?C:e.values(C).reverse(),e.forEach(["l","r"],function(j){j==="r"&&(I=e.map(I,function(F){return e.values(F).reverse()}));var P=(T==="u"?b.predecessors:b.successors).bind(b),D=d(b,I,S,P),O=p(b,I,D.root,D.align,j==="r");j==="r"&&(O=e.mapValues(O,function(F){return-F})),E[T+j]=O})});var M=f(b,E);return h(E,M),g(E,b.graph().align)}function q(b,C,S){return function(E,I,M){var T=E.node(I),j=E.node(M),P=0,D;if(P+=T.width/2,e.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":D=-T.width/2;break;case"r":D=T.width/2;break}if(D&&(P+=S?D:-D),D=0,P+=(T.dummy?C:b)/2,P+=(j.dummy?C:b)/2,P+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":D=j.width/2;break;case"r":D=-j.width/2;break}return D&&(P+=S?D:-D),D=0,P}}function w(b,C){return b.node(C).width}return i0}var o0,lk;function SL(){if(lk)return o0;lk=1;var e=Ct(),t=Pr(),n=qL().positionX;o0=i;function i(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,l){s.node(l).x=u})}function a(s){var u=t.buildLayerMatrix(s),l=s.graph().ranksep,d=0;e.forEach(u,function(p){var m=e.max(e.map(p,function(f){return s.node(f).height}));e.forEach(p,function(f){s.node(f).y=d+m/2}),d+=m+l})}return o0}var a0,ck;function CL(){if(ck)return a0;ck=1;var e=Ct(),t=aL(),n=sL(),i=lL(),a=Pr().normalizeRanks,s=cL(),u=Pr().removeEmptyRanks,l=dL(),d=pL(),p=fL(),m=bL(),f=SL(),h=Pr(),g=jn().Graph;a0=x;function x($,J){var oe=J&&J.debugTiming?h.time:h.notime;oe("layout",function(){var se=oe("  buildLayoutGraph",function(){return P($)});oe("  runLayout",function(){q(se,oe)}),oe("  updateInputGraph",function(){w($,se)})})}function q($,J){J("    makeSpaceForEdgeLabels",function(){D($)}),J("    removeSelfEdges",function(){K($)}),J("    acyclic",function(){t.run($)}),J("    nestingGraph.run",function(){l.run($)}),J("    rank",function(){i(h.asNonCompoundGraph($))}),J("    injectEdgeLabelProxies",function(){O($)}),J("    removeEmptyRanks",function(){u($)}),J("    nestingGraph.cleanup",function(){l.cleanup($)}),J("    normalizeRanks",function(){a($)}),J("    assignRankMinMax",function(){F($)}),J("    removeEdgeLabelProxies",function(){Q($)}),J("    normalize.run",function(){n.run($)}),J("    parentDummyChains",function(){s($)}),J("    addBorderSegments",function(){d($)}),J("    order",function(){m($)}),J("    insertSelfEdges",function(){ie($)}),J("    adjustCoordinateSystem",function(){p.adjust($)}),J("    position",function(){f($)}),J("    positionSelfEdges",function(){z($)}),J("    removeBorderNodes",function(){U($)}),J("    normalize.undo",function(){n.undo($)}),J("    fixupEdgeLabelCoords",function(){W($)}),J("    undoCoordinateSystem",function(){p.undo($)}),J("    translateGraph",function(){V($)}),J("    assignNodeIntersects",function(){X($)}),J("    reversePoints",function(){te($)}),J("    acyclic.undo",function(){t.undo($)})}function w($,J){e.forEach($.nodes(),function(oe){var se=$.node(oe),ae=J.node(oe);se&&(se.x=ae.x,se.y=ae.y,J.children(oe).length&&(se.width=ae.width,se.height=ae.height))}),e.forEach($.edges(),function(oe){var se=$.edge(oe),ae=J.edge(oe);se.points=ae.points,e.has(ae,"x")&&(se.x=ae.x,se.y=ae.y)}),$.graph().width=J.graph().width,$.graph().height=J.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],E=["width","height"],I={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},j=["labelpos"];function P($){var J=new g({multigraph:!0,compound:!0}),oe=_e($.graph());return J.setGraph(e.merge({},C,Z(oe,b),e.pick(oe,S))),e.forEach($.nodes(),function(se){var ae=_e($.node(se));J.setNode(se,e.defaults(Z(ae,E),I)),J.setParent(se,$.parent(se))}),e.forEach($.edges(),function(se){var ae=_e($.edge(se));J.setEdge(se,e.merge({},T,Z(ae,M),e.pick(ae,j)))}),J}function D($){var J=$.graph();J.ranksep/=2,e.forEach($.edges(),function(oe){var se=$.edge(oe);se.minlen*=2,se.labelpos.toLowerCase()!=="c"&&(J.rankdir==="TB"||J.rankdir==="BT"?se.width+=se.labeloffset:se.height+=se.labeloffset)})}function O($){e.forEach($.edges(),function(J){var oe=$.edge(J);if(oe.width&&oe.height){var se=$.node(J.v),ae=$.node(J.w),he={rank:(ae.rank-se.rank)/2+se.rank,e:J};h.addDummyNode($,"edge-proxy",he,"_ep")}})}function F($){var J=0;e.forEach($.nodes(),function(oe){var se=$.node(oe);se.borderTop&&(se.minRank=$.node(se.borderTop).rank,se.maxRank=$.node(se.borderBottom).rank,J=e.max(J,se.maxRank))}),$.graph().maxRank=J}function Q($){e.forEach($.nodes(),function(J){var oe=$.node(J);oe.dummy==="edge-proxy"&&($.edge(oe.e).labelRank=oe.rank,$.removeNode(J))})}function V($){var J=Number.POSITIVE_INFINITY,oe=0,se=Number.POSITIVE_INFINITY,ae=0,he=$.graph(),Se=he.marginx||0,Ne=he.marginy||0;function Ie(Te){var je=Te.x,Ve=Te.y,He=Te.width,De=Te.height;J=Math.min(J,je-He/2),oe=Math.max(oe,je+He/2),se=Math.min(se,Ve-De/2),ae=Math.max(ae,Ve+De/2)}e.forEach($.nodes(),function(Te){Ie($.node(Te))}),e.forEach($.edges(),function(Te){var je=$.edge(Te);e.has(je,"x")&&Ie(je)}),J-=Se,se-=Ne,e.forEach($.nodes(),function(Te){var je=$.node(Te);je.x-=J,je.y-=se}),e.forEach($.edges(),function(Te){var je=$.edge(Te);e.forEach(je.points,function(Ve){Ve.x-=J,Ve.y-=se}),e.has(je,"x")&&(je.x-=J),e.has(je,"y")&&(je.y-=se)}),he.width=oe-J+Se,he.height=ae-se+Ne}function X($){e.forEach($.edges(),function(J){var oe=$.edge(J),se=$.node(J.v),ae=$.node(J.w),he,Se;oe.points?(he=oe.points[0],Se=oe.points[oe.points.length-1]):(oe.points=[],he=ae,Se=se),oe.points.unshift(h.intersectRect(se,he)),oe.points.push(h.intersectRect(ae,Se))})}function W($){e.forEach($.edges(),function(J){var oe=$.edge(J);if(e.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function te($){e.forEach($.edges(),function(J){var oe=$.edge(J);oe.reversed&&oe.points.reverse()})}function U($){e.forEach($.nodes(),function(J){if($.children(J).length){var oe=$.node(J),se=$.node(oe.borderTop),ae=$.node(oe.borderBottom),he=$.node(e.last(oe.borderLeft)),Se=$.node(e.last(oe.borderRight));oe.width=Math.abs(Se.x-he.x),oe.height=Math.abs(ae.y-se.y),oe.x=he.x+oe.width/2,oe.y=se.y+oe.height/2}}),e.forEach($.nodes(),function(J){$.node(J).dummy==="border"&&$.removeNode(J)})}function K($){e.forEach($.edges(),function(J){if(J.v===J.w){var oe=$.node(J.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:J,label:$.edge(J)}),$.removeEdge(J)}})}function ie($){var J=h.buildLayerMatrix($);e.forEach(J,function(oe){var se=0;e.forEach(oe,function(ae,he){var Se=$.node(ae);Se.order=he+se,e.forEach(Se.selfEdges,function(Ne){h.addDummyNode($,"selfedge",{width:Ne.label.width,height:Ne.label.height,rank:Se.rank,order:he+ ++se,e:Ne.e,label:Ne.label},"_se")}),delete Se.selfEdges})})}function z($){e.forEach($.nodes(),function(J){var oe=$.node(J);if(oe.dummy==="selfedge"){var se=$.node(oe.e.v),ae=se.x+se.width/2,he=se.y,Se=oe.x-ae,Ne=se.height/2;$.setEdge(oe.e,oe.label),$.removeNode(J),oe.label.points=[{x:ae+2*Se/3,y:he-Ne},{x:ae+5*Se/6,y:he-Ne},{x:ae+Se,y:he},{x:ae+5*Se/6,y:he+Ne},{x:ae+2*Se/3,y:he+Ne}],oe.label.x=oe.x,oe.label.y=oe.y}})}function Z($,J){return e.mapValues(e.pick($,J),Number)}function _e($){var J={};return e.forEach($,function(oe,se){J[se.toLowerCase()]=oe}),J}return a0}var s0,dk;function kL(){if(dk)return s0;dk=1;var e=Ct(),t=Pr(),n=jn().Graph;s0={debugOrdering:i};function i(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(l){u.setNode(l,{label:l}),u.setParent(l,"layer"+a.node(l).rank)}),e.forEach(a.edges(),function(l){u.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,d){var p="layer"+d;u.setNode(p,{rank:"same"}),e.reduce(l,function(m,f){return u.setEdge(m,f,{style:"invis"}),f})}),u}return s0}var u0,pk;function ML(){return pk||(pk=1,u0="0.8.5"),u0}var l0,fk;function EL(){return fk||(fk=1,l0={graphlib:jn(),layout:CL(),debug:kL(),util:{time:Pr().time,notime:Pr().notime},version:ML()}),l0}var IL=EL();const _k=Na(IL),TL=44,NL=8,mk=120,jL=380,PL=e=>{var d,p,m;const t=(d=e.data)==null?void 0:d.recipe;if(!t)return mk+100;const n=((p=t.inputs)==null?void 0:p.length)||0,i=((m=t.outputs)==null?void 0:m.length)||0,a=Math.max(n,i,1),u=a*TL+(a-1)*NL+24;return mk+u+12},RL=(e,t)=>{if(!e||e.length===0)return e;const n=new _k.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=jL,u=PL(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),_k.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},VL={custom:tV},OL={custom:nV},El=e=>typeof e=="number"?e.toFixed(4):"0",Il=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:i,styleType:a})=>{const[s,u]=A.useState(""),[l,d]=A.useState(!1),p=l?s:El(n),m=()=>{if(!l)return;const q=parseFloat(s);isNaN(q)||i(q),d(!1),u("")},f=a==="input",h=f?"var(--input-bg)":"var(--output-bg)",g=f?"var(--input-border)":"var(--output-border)",x=f?"var(--input-text)":"var(--output-text)";return _.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${g}`,borderRadius:"var(--radius-sm)"},children:[_.jsx("div",{style:{color:x,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",El(t),"/s"]}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[f?"Current Deficiency:":"Current Excess:"," ",El(Math.abs(n)),"/s"]}),_.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:f?"Target Additional Demand:":"Target Excess:"}),_.jsx("input",{type:"text",value:p,onFocus:()=>{d(!0),u(El(n))},onChange:q=>u(q.target.value),onBlur:m,onKeyPress:q=>q.key==="Enter"&&m(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),_.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},hk=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function FL(){const[e,t,n]=S6([]),[i,a,s]=C6([]),[u,l]=A.useState(0),[d,p]=A.useState(!1),[m,f]=A.useState(!1),[h,g]=A.useState(null),[x,q]=A.useState(null),[w,b]=A.useState("product"),[C,S]=A.useState("button"),[E,I]=A.useState(""),[M,T]=A.useState("name_asc"),[j,P]=A.useState("all"),[D,O]=A.useState("all"),[F,Q]=A.useState("all"),[V,X]=A.useState(null),[W,te]=A.useState([]),[U,K]=A.useState(!1),[ie,z]=A.useState(!1),[Z,_e]=A.useState("targets"),[$,J]=A.useState(0),[oe,se]=A.useState(!1),[ae,he]=A.useState(null),[Se,Ne]=A.useState(""),[Ie,Te]=A.useState(null),[je,Ve]=A.useState("free"),[He,De]=A.useState(!1),[ot,rt]=A.useState(!1),[ft,ct]=A.useState(!1),[dt,at]=A.useState(!1),[Zt,Jt]=A.useState(!1),[$t,er]=A.useState(!1),[st,Rr]=A.useState(()=>{const N=Ol();return{edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}}),[Tt,Kr]=A.useState(!1),[fr,Ht]=A.useState(!1),[Qe,wi]=A.useState(!1),[Nt,ln]=A.useState("pan"),[me,ut]=A.useState(0),[Vr,Or]=A.useState(!1),[_r,Xn]=A.useState(!0),[Vn,Rt]=A.useState(1),[tr,rr]=A.useState({}),[_t,Do]=A.useState("perSecond"),[xt,Zi]=A.useState("total"),[Wt,Yr]=A.useState([]),[At,Ut]=A.useState(null),[Gt,nr]=A.useState(null),[mr,hr]=A.useState(null),[yr,Et]=A.useState(null),[cn,gr]=A.useState(null),[Ji,eo]=A.useState({}),[sr,bi]=A.useState(null),[qi,to]=A.useState({}),[Zn,mt]=A.useState("all"),[Jn,dn]=A.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[ei,pn]=A.useState([]),[ht,Qr]=A.useState(null),[On,Kt]=A.useState(null),[Bo,vr]=A.useState({x:0,y:0}),ti=A.useRef(null),fn=A.useRef(null),Da=A.useRef(null),Si=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",Cr=A.useRef(null),_n=A.useRef([]),zo=A.useCallback(N=>{const B=N.filter(Y=>Y.type!=="remove"),H=B.filter(Y=>Y.type==="position"),L=B.filter(Y=>Y.type!=="position");H.length>0&&n(H),L.length>0&&(_n.current.push(...L),Cr.current&&clearTimeout(Cr.current),Cr.current=setTimeout(()=>{_n.current.length>0&&(n(_n.current),_n.current=[])},50))},[n]),Ba=A.useCallback(N=>{s(N)},[s]);A.useEffect(()=>{const N=Ol();rc(N),Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}),hV($r,Cn,Mn);const B=()=>{const H="ontouchstart"in window||navigator.maxTouchPoints>0,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);wi(H&&L)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const ir=A.useCallback(()=>({onInputClick:Go,onOutputClick:du,isMobile:Qe,mobileActionMode:Nt,onDrillSettingsChange:uo,onLogicAssemblerSettingsChange:lo,onTreeFarmSettingsChange:Mi,onIndustrialFireboxSettingsChange:Ko,onTemperatureSettingsChange:Fc,onBoilerSettingsChange:Ac,onChemicalPlantSettingsChange:Yo,onWasteFacilitySettingsChange:Wa,onLiquidDumpSettingsChange:pu,onLiquidBurnerSettingsChange:Fn,onMiddleClick:po,onHandleDoubleClick:Ha,onMachineCountModeChange:_u}),[Qe,Nt]);A.useEffect(()=>{const N=t3();if(!(N!=null&&N.nodes))return;const B=ir(),H=N.nodes.map(L=>{var ce,de,ve,be;const Y=vt((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(Me=>Me.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...B,globalPollution:me,flows:null,suggestions:[]}}});t(H),a(N.edges||[]),te(N.targetProducts||[]),rr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),nr(N.lastAssemblerConfig||null),hr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),gr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),J(N.targetIdCounter||0)},[]),A.useEffect(()=>{t(N=>{let B=!1;const H=N.map(L=>L.data.displayMode===_t&&L.data.machineDisplayMode===xt&&L.data.zoomLevel===Vn?L:(B=!0,{...L,data:{...L.data,displayMode:_t,machineDisplayMode:xt,zoomLevel:Vn}}));return B?H:N})},[_t,xt,Vn,t]),A.useEffect(()=>{a(N=>{let B=!1;const H=N.map(L=>{var Y,re;return((Y=L.data)==null?void 0:Y.edgePath)===st.edgePath&&((re=L.data)==null?void 0:re.edgeStyle)===st.edgeStyle?L:(B=!0,{...L,data:st})});return B?H:N})},[st,a]),A.useEffect(()=>{const N={nodes:e,edges:i,targetProducts:W,nodeId:u,targetIdCounter:$,soldProducts:tr,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:mr,lastFireboxConfig:yr,lastWasteFacilityConfig:cn};localStorage.setItem("industrialist_canvas_state",JSON.stringify(N))},[e,i,W,u,$,tr,Wt,At,Gt,mr,yr,cn]);const Ci=A.useCallback(()=>{var Y,re;let N=0,B=0,H=0;const L=e.length;for(let ce=0;ce<L;ce++){const de=e[ce],{recipe:ve,machine:be,machineCount:Me=0}=de.data||{};if(!ve)continue;const fe=typeof ve.pollution=="number"?ve.pollution:parseFloat(ve.pollution);!isNaN(fe)&&isFinite(fe)&&(B+=fe*Me);const ge=(((Y=ve.inputs)==null?void 0:Y.length)||0)+(((re=ve.outputs)==null?void 0:re.length)||0),xe=Math.ceil(Me);if((be==null?void 0:be.id)==="m_industrial_firebox"){H+=xe*(1+ge*2);continue}if((be==null?void 0:be.id)==="m_tree_farm"&&ve.treeFarmSettings){const{trees:Pe,harvesters:Ye,sprinklers:Xe,controller:et,outputs:nt}=ve.treeFarmSettings,Dt=typeof ve.power_consumption=="number"?ve.power_consumption:0;N+=Dt*Me;const wr=Math.ceil(Xe/3),jt=ve.power_type==="HV"?2:Math.ceil(Dt/15e5)*2,Ei=Pe+Ye+Xe+wr*3+et+nt*3+jt;H+=xe*Ei;continue}const ye=ve.power_consumption;let ke=0;typeof ye=="number"?(ke=ye,N+=ye*Me):typeof ye=="object"&&ye!==null&&"max"in ye&&(ke=ye.max,N+=ke*Me);const Re=ve.power_type==="HV"?2:Math.ceil(ke/15e5)*2;H+=xe*(1+Re+ge*2)}return{totalPower:N,totalPollution:B,totalModelCount:H}},[e]),Fr=A.useMemo(()=>Ci(),[e]);A.useEffect(()=>{if(_r||Fr.totalPollution===0)return;const N=setInterval(()=>{if(Vr)return;const B=Fr.totalPollution/3600;ut(H=>{if(typeof H!="number"||isNaN(H)||!isFinite(H))return H;const L=parseFloat((H+B).toFixed(4));return L!==H?L:H})},1e3);return()=>clearInterval(N)},[Fr.totalPollution,Vr,_r]),A.useEffect(()=>{const N=setInterval(Sn,2e4);return()=>clearInterval(N)},[]);const Xr=A.useRef(null),no=A.useRef(me);A.useEffect(()=>{if(!(Math.abs(me-no.current)<.01))return no.current=me,Xr.current&&clearTimeout(Xr.current),Xr.current=setTimeout(()=>{t(N=>{let B=!1;const H=N.map(L=>{const{recipe:Y,machine:re,globalPollution:ce}=L.data||{};if(Y!=null&&Y.isTreeFarm&&Y.treeFarmSettings){const{trees:de,harvesters:ve,sprinklers:be,outputs:Me,controller:fe}=Y.treeFarmSettings,ge=fg(de,ve,me),xe=Jl(de,ve,be,Me,fe,me);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ge,power_consumption:xe?xe.avgPowerConsumption:"Variable"},globalPollution:me}}}if((re==null?void 0:re.id)==="m_air_separation_unit"){const de=hk(me),ve=Y.outputs.map(be=>be.product_id==="p_residue"?{...be,quantity:parseFloat(de.toFixed(6))}:be);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ve},globalPollution:me}}}return ce!==me?(B=!0,{...L,data:{...L.data,globalPollution:me}}):L});return B?H:N})},250),()=>clearTimeout(Xr.current)},[me,t]);const[We,lt]=A.useState(()=>mw([],[],{skipTemperature:!0})),io=A.useRef(null),za=A.useRef(""),oo=A.useRef(!1),$o=A.useRef(null),ze=A.useCallback((N="general")=>{$o.current=N,oo.current=!0},[]);A.useEffect(()=>{if(oo.current)return io.current&&clearTimeout(io.current),io.current=setTimeout(()=>{const N=`${e.length}-${i.length}-${e.map(B=>{var H,L,Y,re,ce,de,ve,be,Me,fe,ge,xe,ye;return`${B.id}:${(H=B.data)==null?void 0:H.machineCount}:${JSON.stringify(((Y=(L=B.data)==null?void 0:L.recipe)==null?void 0:Y.temperatureSettings)||{})}:${JSON.stringify(((ce=(re=B.data)==null?void 0:re.recipe)==null?void 0:ce.drillSettings)||{})}:${JSON.stringify(((ve=(de=B.data)==null?void 0:de.recipe)==null?void 0:ve.assemblerSettings)||{})}:${JSON.stringify(((Me=(be=B.data)==null?void 0:be.recipe)==null?void 0:Me.treeFarmSettings)||{})}:${JSON.stringify(((ge=(fe=B.data)==null?void 0:fe.recipe)==null?void 0:ge.fireboxSettings)||{})}:${JSON.stringify(((ye=(xe=B.data)==null?void 0:xe.recipe)==null?void 0:ye.chemicalPlantSettings)||{})}`}).join(",")}`;if(N!==za.current){const B=$o.current||"general",H=["connection","node","temperatureSettings","boilerSettings"].includes(B);console.log(`[Recalculation] Reason: ${B}, Temperature propagation: ${H}`);const L=mw(e,i,{skipTemperature:!H,previousTemperatureData:H?null:We==null?void 0:We.temperatureData});lt(L),za.current=N}oo.current=!1,$o.current=null},100),()=>clearTimeout(io.current)},[e,i,We]);const $a=A.useMemo(()=>DV(We),[We]),Ho=A.useMemo(()=>BV(We),[We]),ri=A.useRef(null),mn=A.useRef(null),hn=A.useCallback((N,B,H)=>{var de,ve,be,Me,fe,ge;const L=(de=N.data)==null?void 0:de.recipe,Y=B.byNode[N.id];if(N.data.flows===Y&&N.data.suggestions===H)return N;const re=N.data.flows!==Y,ce=N.data.suggestions!==H&&(((ve=N.data.suggestions)==null?void 0:ve.length)!==(H==null?void 0:H.length)||JSON.stringify(N.data.suggestions)!==JSON.stringify(H||[]));if(L!=null&&L.isWasteFacility){const xe=Math.min(((be=Y==null?void 0:Y.inputFlows[0])==null?void 0:be.connected)||0,240),ye=Math.min(((Me=Y==null?void 0:Y.inputFlows[1])==null?void 0:Me.connected)||0,240),ke=L.wasteFacilitySettings||{};if(!re&&!ce&&ke.itemFlowRate===xe&&ke.fluidFlowRate===ye)return N;const Re=Vl(xe,ye),Pe=tc(xe,ye,L.inputs[0].product_id,L.inputs[1].product_id);return{...N,data:{...N.data,recipe:{...L,inputs:Pe,cycle_time:Re.cycleTime,wasteFacilitySettings:{...ke,itemFlowRate:xe,fluidFlowRate:ye}},flows:Y||null,suggestions:H||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidDump){const xe=((fe=N.data)==null?void 0:fe.machineCount)||1,ye=L.inputs.map((Re,Pe)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[Pe])==null?void 0:Xe.connected)||0,15*xe)/xe}),ke=Ns(L.inputs,ye);return!re&&!ce&&L.pollution===ke?N:{...N,data:{...N.data,recipe:{...L,pollution:ke},flows:Y||null,suggestions:H||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidBurner){const xe=((ge=N.data)==null?void 0:ge.machineCount)||1,ye=L.inputs.map((Re,Pe)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[Pe])==null?void 0:Xe.connected)||0,15*xe)/xe}),ke=js(L.inputs,ye);return!re&&!ce&&L.pollution===ke?N:{...N,data:{...N.data,recipe:{...L,pollution:ke},flows:Y||null,suggestions:H||[],zoomLevel:N.data.zoomLevel}}}return!re&&!ce?N:{...N,data:{...N.data,flows:Y||null,suggestions:H||[],zoomLevel:N.data.zoomLevel}}},[]);A.useEffect(()=>{var N;if((N=We==null?void 0:We.flows)!=null&&N.byNode&&mn.current!==We.flows)return mn.current=We.flows,ri.current&&clearTimeout(ri.current),ri.current=setTimeout(()=>{t(B=>{let H=B;We.temperatureData&&(H=M0(B,We.temperatureData,We.graph));let L=!1;const Y=H.map(re=>{const ce=hn(re,We.flows,We.suggestions);return ce!==re&&(L=!0),ce});return L?Y:B})},250),()=>clearTimeout(ri.current)},[We,t,hn]);const Ar=A.useMemo(()=>$a.map(N=>{const B=W.some(H=>{var Y,re,ce;const L=e.find(de=>de.id===H.recipeBoxId);return(ce=(re=(Y=L==null?void 0:L.data)==null?void 0:Y.recipe)==null?void 0:re.outputs)==null?void 0:ce.some(de=>de.product_id===N.productId)});return{...N,isSold:tr[N.productId]??(B&&typeof N.product.price=="number"&&N.product.price>1)}}),[$a,tr,W,e]),ki=A.useMemo(()=>Ar.reduce((N,B)=>B.isSold&&typeof B.product.price=="number"?N+B.product.price*B.excessRate:N,0),[Ar]),ao=A.useMemo(()=>{const N=new Map,B=new Map,H=(Y,re,ce)=>{N.set(Y,(N.get(Y)||0)+re),B.has(Y)||B.set(Y,ce)};e.forEach(Y=>{var ve,be,Me,fe,ge,xe;const{machine:re,machineCount:ce=0,recipe:de}=Y.data||{};if(re){if(re.id==="m_tree_farm"&&(de!=null&&de.treeFarmSettings)){const{trees:ye,harvesters:ke,sprinklers:Re,outputs:Pe,controller:Ye}=de.treeFarmSettings,Xe=Math.ceil(Re/3);H("m_tree",Math.ceil(ye*ce),((ve=vt("m_tree"))==null?void 0:ve.cost)||0),H("m_tree_harvester",Math.ceil(ke*ce),((be=vt("m_tree_harvester"))==null?void 0:be.cost)||0),H("m_tree_farm_sprinkler",Math.ceil(Re*ce),((Me=vt("m_tree_farm_sprinkler"))==null?void 0:Me.cost)||0),H("m_tree_farm_water_tank",Math.ceil(Xe*ce),((fe=vt("m_tree_farm_water_tank"))==null?void 0:fe.cost)||0),H("m_tree_farm_output",Math.ceil(Pe*ce),((ge=vt("m_tree_farm_output"))==null?void 0:ge.cost)||0),H("m_tree_farm_controller",Math.ceil(Ye*ce),((xe=vt("m_tree_farm_controller"))==null?void 0:xe.cost)||0);return}H(re.id,Math.ceil(ce),typeof re.cost=="number"?re.cost:0)}});const L=Array.from(N.entries()).map(([Y,re])=>{const ce=Cn.find(ve=>ve.id===Y),de=B.get(Y);return{machineId:Y,machine:ce,count:re,cost:de,totalCost:re*de}}).sort((Y,re)=>Y.machine.name.localeCompare(re.machine.name));return{stats:L,totalCost:L.reduce((Y,re)=>Y+re.totalCost,0)}},[e,Cn]),Lt=(N,B)=>t(H=>H.map(L=>L.id===N?{...L,data:B(L.data)}:L)),Wo=A.useCallback((N,B,H,L)=>{const Y=Object.keys(Ws).map(de=>parseInt(de));let re=null,ce=0;return Y.forEach(de=>{const be=Ws[de].find(Me=>Me.product_id===N);if(be){const Me=Vo(B,H,L,de);if(Me){const fe=L?1.1:1,ge=be.quantity*fe*Me.dutyCycle;ge>ce&&(ce=ge,re=de)}}}),re},[]),lu=A.useCallback((N,B,H)=>{const L={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:mr,fireboxConfig:yr},Y=(We==null?void 0:We.flows)||null;return zV(N,B,H,Wo,L,me,Y)},[At,Gt,mr,yr,Wo,me,We]),so=A.useCallback(N=>{const B=e.find(re=>re.id===N.source),H=e.find(re=>re.id===N.target);if(!B||!H)return;const L=B.data.recipe.outputs[parseInt(N.sourceHandle.split("-")[1])],Y=H.data.recipe.inputs[parseInt(N.targetHandle.split("-")[1])];if(!(!L||!Y)){if(Y.isAnyProduct){const re=bt(L.product_id);if(Y.acceptedType&&(re==null?void 0:re.type)!==Y.acceptedType)return;t(ce=>ce.map(de=>{var Me;if(de.id!==H.id)return de;const ve=parseInt(N.targetHandle.split("-")[1]),be=[...de.data.recipe.inputs];if(be[ve]={...be[ve],product_id:L.product_id,isAnyProduct:!1},de.data.recipe.isWasteFacility){const fe=de.data.recipe.wasteFacilitySettings||{},ge=(Me=We==null?void 0:We.flows)==null?void 0:Me.byNode[N.source],xe=parseInt(N.sourceHandle.split("-")[1]),ye=ge!=null&&ge.outputFlows[xe]?ge.outputFlows[xe].produced-ge.outputFlows[xe].connected:0,ke=Math.min(ye,240);ve===0?fe.itemFlowRate=ke:ve===1&&(fe.fluidFlowRate=ke);const Re=Vl(fe.itemFlowRate||0,fe.fluidFlowRate||0),Pe=tc(fe.itemFlowRate||0,fe.fluidFlowRate||0,ve===0?L.product_id:be[0].product_id,ve===1?L.product_id:be[1].product_id);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:Pe,cycle_time:Re.cycleTime,wasteFacilitySettings:fe}}}}if(de.data.recipe.isLiquidDump||de.data.recipe.isLiquidBurner){const fe=de.data.recipe.isLiquidDump?Ns(be):js(be);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be,pollution:fe}}}}return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be}}}}))}else if(L.product_id!==Y.product_id)return;a(re=>v0({...N,type:"custom",animated:!1,data:st},re)),Sn(),ze("connection")}},[a,e,st,ze,t,We]),Uo=()=>{p(!1),g(null),q(null),b("product"),I(""),T("name_asc"),P("all"),O("all"),X(null),S("button"),eo({}),Q("all")},cu=A.useCallback(()=>{p(!0),X(null),S("button")},[]),Go=A.useCallback((N,B,H,L)=>{if(L!=null&&L.ctrlKey){a(re=>re.filter(ce=>!(ce.target===B&&ce.targetHandle===`left-${H}`))),Sn(),ze("connection");return}const Y=bt(N);Y&&(p(!0),g(Y),X({nodeId:B,inputIndex:H,productId:N}),S("rectangle"),O("producers"))},[a,Qe,Nt,ze]),du=A.useCallback((N,B,H,L)=>{var ve,be;if(L!=null&&L.ctrlKey){a(Me=>Me.filter(fe=>!(fe.source===B&&fe.sourceHandle===`right-${H}`))),Sn(),ze("connection");return}const Y=An.current.find(Me=>Me.id===B),re=(be=(ve=Y==null?void 0:Y.data)==null?void 0:ve.recipe)==null?void 0:be.machine_id,ce=re&&pr[re],de=bt(N);de&&(p(!0),g(de),X({nodeId:B,outputIndex:H,productId:N,isOutput:!0,isFromHeatSource:!!ce}),S("rectangle"),O("consumers"))},[a,Qe,Nt,ze]),Zr=A.useCallback((N,B,H)=>{a(L=>{const Y=L.filter(re=>{var ce,de,ve,be;if(re.source===N){const Me=parseInt(re.sourceHandle.split("-")[1]);if(Me>=H.length)return!1;const fe=H[Me],ge=e.find(ke=>ke.id===re.target);if(!ge)return!1;const xe=parseInt(re.targetHandle.split("-")[1]),ye=(de=(ce=ge.data)==null?void 0:ce.recipe)==null?void 0:de.inputs[xe];if(!ye||ye.product_id!==fe.product_id)return!1}if(re.target===N){const Me=parseInt(re.targetHandle.split("-")[1]);if(Me>=B.length)return!1;const fe=B[Me],ge=e.find(ke=>ke.id===re.source);if(!ge)return!1;const xe=parseInt(re.sourceHandle.split("-")[1]),ye=(be=(ve=ge.data)==null?void 0:ve.recipe)==null?void 0:be.outputs[xe];if(!ye||ye.product_id!==fe.product_id)return!1}return!0});return Y.length!==L.length&&(Sn(),ze("connection")),Y})},[a,e,ze]),uo=A.useCallback((N,B,H,L)=>{Ut({drillHead:B.drillHead,consumable:B.consumable,machineOil:B.machineOil});const Y=B.drillHead&&B.depth?Vo(B.drillHead,B.consumable,B.machineOil,B.depth):null;Lt(N,re=>({...re,recipe:{...re.recipe,inputs:H.length>0?H:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:B,cycle_time:1,power_consumption:Y?{max:Y.drillingPower*1e6,average:(Y.drillingPower*Y.lifeTime+Y.idlePower*(Y.replacementTime+Y.travelTime))/Y.totalCycleTime*1e6}:"Variable",pollution:Y?Y.pollution:"Variable"},leftHandles:Math.max(H.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,H,L),ze("settings")},[Zr,ze]),lo=A.useCallback((N,B,H,L)=>{nr({outerStage:B.outerStage,innerStage:B.innerStage,machineOil:B.machineOil,tickCircuitDelay:B.tickCircuitDelay});const re=!B.outerStage||!B.innerStage?"":B.outerStage===1?`p_${B.innerStage}x_microchip`:`p_${B.outerStage}x${B.innerStage}x_microchip`,ce=re?ru(re,B.machineOil,B.tickCircuitDelay):null;Lt(N,de=>({...de,recipe:{...de.recipe,inputs:H.length>0?H:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:B,cycle_time:ce?ce.cycleTime:"Variable",power_consumption:ce?{max:ce.maxPowerConsumption,average:ce.avgPowerConsumption}:"Variable"},leftHandles:Math.max(H.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,H,L),ze("settings")},[Zr,ze]),Mi=A.useCallback((N,B,H,L)=>{hr({trees:B.trees,harvesters:B.harvesters,sprinklers:B.sprinklers,outputs:B.outputs});const Y=Jl(B.trees,B.harvesters,B.sprinklers,B.outputs,B.controller,me);Lt(N,re=>({...re,recipe:{...re.recipe,inputs:H.length>0?H:[{product_id:"p_water",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:B,cycle_time:1,power_consumption:Y?Y.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max(H.length,1),rightHandles:Math.max(L.length,1)})),a(re=>re.filter(ce=>{if(ce.source===N||ce.target===N){const de=parseInt((ce.source===N?ce.sourceHandle:ce.targetHandle).split("-")[1]);return ce.source===N?de<L.length:de<H.length}return!0})),ze("settings")},[a,me,ze]),Ko=A.useCallback((N,B,H,L)=>{Et({fuel:B.fuel}),Lt(N,Y=>({...Y,recipe:{...Y.recipe,inputs:H,fireboxSettings:B,cycle_time:L?L.cycleTime:Y.recipe.cycle_time,power_consumption:0}})),ze("settings")},[ze]),Fc=A.useCallback((N,B,H,L)=>{t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=vt(re.data.recipe.machine_id),de=Ur(ce==null?void 0:ce.id);let ve=re.data.recipe.power_type;(ce==null?void 0:ce.id)==="m_electric_water_heater"&&(ve=B.temperature>=320?"HV":"MV");let be={...re.data.recipe,outputs:H,temperatureSettings:B,power_consumption:L??re.data.recipe.power_consumption,power_type:ve};if((ce==null?void 0:ce.id)==="m_water_treatment_plant"&&de){const Me=B.temperature||In,fe=Wn(ce.id,Me,1),ge=90*fe,xe=17.6,ye=17.6;be={...be,inputs:be.inputs.map(ke=>ke.product_id==="p_water"?{...ke,quantity:xe*fe,originalQuantity:xe}:ke.product_id==="p_distilled_water"?{...ke,quantity:ye*fe,originalQuantity:ye}:ke),outputs:be.outputs.map(ke=>ke.product_id==="p_steam"?{...ke,quantity:ge,originalQuantity:90}:ke)}}return{...re,data:{...re.data,recipe:be}}})),ze("temperatureSettings")},[t,ze]),Ac=A.useCallback((N,B)=>{t(H=>H.map(L=>{if(L.id!==N)return L;const Y=vt(L.data.recipe.machine_id),re=pr[Y==null?void 0:Y.id];return!re||re.type!=="boiler"?L:{...L,data:{...L.data,recipe:{...L.data.recipe,temperatureSettings:B}}}})),ze("boilerSettings")},[t,ze]),Ha=A.useCallback((N,B,H,L,Y)=>{const re=B==="right"?"output":"input",ce=Y==null?void 0:Y.find(de=>de.nodeId===N&&de.handleType===re&&de.handleIndex===H);ce&&(t(de=>de.map(ve=>{var ge,xe;if(ve.id!==N)return ve;const be=((ge=ve.data)==null?void 0:ge.machineCountMode)||"free",Me=(xe=ve.data)==null?void 0:xe.cappedMachineCount;if(be==="locked")return console.log(`Node ${N} is locked - suggestion ignored`),ve;let fe=ce.suggestedMachineCount;return be==="capped"&&typeof Me=="number"&&fe>Me&&(console.log(`Node ${N} is capped at ${Me} - clamping suggestion from ${fe} to ${Me}`),fe=Me),{...ve,data:{...ve.data,machineCount:fe}}})),ze("machineCount"))},[t,ze]),Yo=A.useCallback((N,B)=>{t(H=>H.map(L=>{if(L.id!==N)return L;const Y=vt(L.data.recipe.machine_id);if((Y==null?void 0:Y.id)!=="m_chemical_plant")return L;const re=Mn.find(de=>de.id===L.data.recipe.id);if(!re)return L;const ce=F3(re,B.speedFactor,B.efficiencyFactor);return{...L,data:{...L.data,recipe:ce}}})),ze("settings")},[t,ze]),Wa=A.useCallback((N,B,H,L)=>{gr({itemProductId:B.itemProductId,fluidProductId:B.fluidProductId}),t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=re.data.recipe.wasteFacilitySettings||{},de=ce.itemFlowRate||0,ve=ce.fluidFlowRate||0,be=Vl(de,ve);return{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:H.length>0?H:re.data.recipe.inputs,wasteFacilitySettings:{...B,itemFlowRate:de,fluidFlowRate:ve},cycle_time:be.cycleTime},leftHandles:Math.max(H.length,1)}}})),Zr(N,H,L),ze("settings")},[Zr,ze,t]),pu=A.useCallback((N,B,H,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:H.length>0?H:re.data.recipe.inputs,liquidDumpSettings:B,pollution:Ns(H)},leftHandles:Math.max(H.length,1)}})),Zr(N,H,L),ze("settings")},[Zr,ze,t]),Fn=A.useCallback((N,B,H,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:H.length>0?H:re.data.recipe.inputs,liquidBurnerSettings:B,pollution:js(H)},leftHandles:Math.max(H.length,1)}})),Zr(N,H,L),ze("settings")},[Zr,ze,t]),Lr=A.useCallback((N,B=null)=>{var ge,xe;const H=vt(N.machine_id);if(!H||!N.inputs||!N.outputs){alert("Error: Invalid machine or recipe data");return}let L=bs(N,H.id);const Y=`node-${u}`,re=V?e.find(ye=>ye.id===V.nodeId):null;let ce;if(re)ce={x:re.position.x+(V.isOutput?400:-400),y:re.position.y};else if(fn.current&&ti.current){const ye=ti.current.getBoundingClientRect(),ke=fn.current.screenToFlowPosition({x:ye.left+ye.width/2,y:ye.top+ye.height/2}),Re=320,Pe=300,Ye=50;let Xe={x:ke.x-Re/2,y:ke.y-Pe/2},et=0;for(;et<20&&e.some(jt=>{const Ei=Math.abs(jt.position.x-Xe.x),_o=Math.abs(jt.position.y-Xe.y);return Ei<Re+Ye&&_o<Pe+Ye});){const Dt=et/20*Math.PI*2,wr=100+et*50;Xe={x:ke.x-Re/2+Math.cos(Dt)*wr,y:ke.y-Pe/2+Math.sin(Dt)*wr},et++}ce=Xe}else ce={x:Math.random()*400+100,y:Math.random()*300+100};if(((ge=pr[H.id])==null?void 0:ge.type)==="boiler"){const ye={heatLoss:((xe=L.temperatureSettings)==null?void 0:xe.heatLoss)??0,coolantTemp:Ki},ke=pg(H.id,ye,Ki,null,Ki),Re=pr[H.id],Pe=bE(L.outputs,ke,!0,Re,Ki);L={...L,outputs:Pe,temperatureSettings:ye}}const ve={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:mr,fireboxConfig:yr};if(kE(L)&&(L=CE(L,V,h,ve,me,Wo),L.drillSettings&&Ut({drillHead:L.drillSettings.drillHead,consumable:L.drillSettings.consumable,machineOil:L.drillSettings.machineOil}),L.assemblerSettings&&nr({outerStage:L.assemblerSettings.outerStage,innerStage:L.assemblerSettings.innerStage,machineOil:L.assemblerSettings.machineOil,tickCircuitDelay:L.assemblerSettings.tickCircuitDelay}),L.treeFarmSettings&&hr({trees:L.treeFarmSettings.trees,harvesters:L.treeFarmSettings.harvesters,sprinklers:L.treeFarmSettings.sprinklers,outputs:L.treeFarmSettings.outputs}),L.fireboxSettings&&Et({fuel:L.fireboxSettings.fuel})),H.id==="m_air_separation_unit"){const ye=hk(me),ke=L.outputs.map(Re=>Re.product_id==="p_residue"?{...Re,quantity:parseFloat(ye.toFixed(6))}:Re);L={...L,outputs:ke}}const be=B!==null?B:Ji[N.id]??1,Me=ir(),fe={id:Y,type:"custom",position:ce,data:{recipe:L,machine:H,machineCount:be,machineCountMode:"free",cappedMachineCount:void 0,displayMode:_t,machineDisplayMode:xt,leftHandles:Math.max(L.inputs.length,1),rightHandles:Math.max(L.outputs.length,1),...Me,globalPollution:me,isTarget:!1,flows:null,suggestions:[],zoomLevel:Vn},sourcePosition:"right",targetPosition:"left"};return t(ye=>{const ke=[...ye,fe];return ze("node"),V&&be>0&&setTimeout(()=>{var Ye,Xe,et;const Re=V.isOutput?"inputs":"outputs";let Pe=-1;if((L.isWasteFacility||L.id==="r_underground_waste_facility")&&!V.isOutput)V.productId==="p_concrete_block"?Pe=2:V.productId==="p_lead_ingot"?Pe=3:Pe=L[Re].findIndex(nt=>nt.product_id===V.productId);else if(V.isOutput&&V.isFromHeatSource){const nt=vt(L.machine_id);if(nt&&((Ye=pr[nt.id])==null?void 0:Ye.type)==="boiler"&&L.inputs.length>=2){const wr=(Xe=L.inputs[0])==null?void 0:Xe.product_id,jt=(et=L.inputs[1])==null?void 0:et.product_id;wr===jt&&jt===V.productId||jt===V.productId?Pe=1:Pe=L[Re].findIndex(Ei=>Ei.product_id===V.productId)}else Pe=L[Re].findIndex(wr=>wr.product_id===V.productId)}else Pe=L[Re].findIndex(nt=>nt.product_id===V.productId);if(Pe!==-1){const nt=V.isOutput?V.outputIndex:Pe,Dt=V.isOutput?Pe:V.inputIndex,wr={source:V.isOutput?V.nodeId:Y,sourceHandle:`right-${nt}`,target:V.isOutput?Y:V.nodeId,targetHandle:`left-${Dt}`,type:"custom",animated:!1,data:st};a(jt=>v0(wr,jt)),Sn(),ze("connection")}},50),ke}),l(ye=>ye+1),ze(),Y},[u,e,t,a,_t,xt,At,Gt,mr,yr,Wo,Ji,me,h,ze,V,st,ir]),yn=A.useCallback(N=>{t(B=>B.filter(H=>H.id!==N)),a(B=>B.filter(H=>H.source!==N&&H.target!==N)),te(B=>B.filter(H=>H.recipeBoxId!==N)),Sn(),ze("node")},[t,a,ze]),Qo=A.useCallback(N=>{var H;W.find(L=>L.recipeBoxId===N.id)?(te(L=>L.filter(Y=>Y.recipeBoxId!==N.id)),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!1}}:Y))):(H=N.data)!=null&&H.recipe&&(te(L=>[...L,{id:`target_${$}`,recipeBoxId:N.id}]),J(L=>L+1),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!0}}:Y)))},[W,$,t]),ni=A.useCallback((N,B,H,L)=>{var Re;const Y=W.find(Pe=>Pe.id===N);if(!Y)return;const re=e.find(Pe=>Pe.id===Y.recipeBoxId);if(!re)return;const{recipe:ce,machine:de,machineCount:ve=0}=re.data||{};if(!ce)return;const be=ce.isMineshaftDrill||ce.id==="r_mineshaft_drill";let Me=ce.cycle_time;if((typeof Me!="number"||Me<=0)&&(Me=1),Ur(de==null?void 0:de.id)){const Pe=an[de.id];if((Pe==null?void 0:Pe.type)==="steam_input"&&hi(ce)){const Ye=ce.tempDependentInputTemp??In;Me=Wn(de.id,Ye,Me)}}(typeof Me!="number"||Me<=0)&&(Me=1);const ge=(Re=We==null?void 0:We.flows)==null?void 0:Re.byNode[Y.recipeBoxId];if(!ge)return;let xe=0,ye=0;if(B==="output"){const Pe=ge.outputFlows[H];if(!Pe)return;xe=Pe.connected;const Ye=ce.outputs[H],Xe=Ye.originalQuantity!==void 0?Ye.originalQuantity:Ye.quantity;ye=be?Xe:Xe/Me}else{const Pe=ge.inputFlows[H];if(!Pe)return;xe=Pe.connected;const Ye=ce.inputs[H];ye=be?Ye.quantity:Ye.quantity/Me}if(ye<=0)return;const ke=(xe+L)/ye;Lt(Y.recipeBoxId,Pe=>({...Pe,machineCount:ke})),ze("machineCount")},[W,e,We,ze]),co=A.useCallback(N=>{const B=W.find(H=>H.id===N);B&&(te(H=>H.filter(L=>L.id!==N)),Lt(B.recipeBoxId,H=>({...H,isTarget:!1})))},[W]),fu=A.useCallback((N,B)=>{if(Qe){if(Nt==="target"){Qo(B);return}else if(Nt==="delete"){yn(B.id);return}}N.shiftKey&&!N.ctrlKey&&!N.altKey?Qo(B):N.ctrlKey&&N.altKey&&yn(B.id)},[Qe,Nt,Qo,yn]),xr=A.useCallback((N,B)=>{var H,L;N.stopPropagation(),he(B.id),Ne(String(((H=B.data)==null?void 0:H.machineCount)??0)),Ve(((L=B.data)==null?void 0:L.machineCountMode)||"free"),se(!0)},[]),An=A.useRef(e),Ua=A.useRef(i);A.useEffect(()=>{An.current=e},[e]),A.useEffect(()=>{Ua.current=i},[i]);const po=A.useCallback(N=>{const B=An.current.find(H=>H.id===N);B&&bi({recipe:{...B.data.recipe},machine:B.data.machine,machineCount:B.data.machineCount})},[]),Lc=A.useCallback(N=>{if(!ti.current)return;const B=ti.current.getBoundingClientRect();vr({x:N.clientX-B.left,y:N.clientY-B.top})},[]),Ga=A.useCallback(N=>{if(!sr||N.button!==0||(N.stopPropagation(),!fn.current))return;const B=fn.current.screenToFlowPosition({x:N.clientX,y:N.clientY});B.x-=160,B.y-=150;const H=`node-${u}`,L=ir(),Y={id:H,type:"custom",position:B,data:{recipe:sr.recipe,machine:sr.machine,machineCount:sr.machineCount,displayMode:_t,machineDisplayMode:xt,leftHandles:sr.recipe.inputs.length,rightHandles:sr.recipe.outputs.length,...L,globalPollution:me,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(re=>[...re,Y]),l(re=>re+1),bi(null),ze("node")},[sr,u,_t,xt,me,t,ir,ze]),Ka=A.useCallback(N=>{N.button===2&&bi(null)},[]),ii=A.useCallback((N=!1)=>{var H,L;let B=parseFloat(Se);if(isNaN(B)||B<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}B=0}if(ae&&!Ie){const Y=e.find(de=>de.id===ae),re=((H=Y==null?void 0:Y.data)==null?void 0:H.machineCount)||0;let ce=(L=Y==null?void 0:Y.data)==null?void 0:L.cappedMachineCount;if(je==="capped"?ce=B:je==="free"&&(ce=void 0),N&&re>0&&B!==re){const de=Rs(e,i),ve=We==null?void 0:We.flows;if(ve){const be=WV(ae,re,B,de,ve,e);t(Me=>Me.map(fe=>{const ge=be.get(fe.id);return fe.id===ae?{...fe,data:{...fe.data,machineCount:B,machineCountMode:je,cappedMachineCount:ce}}:ge!==void 0?{...fe,data:{...fe.data,machineCount:ge}}:fe}))}else Lt(ae,be=>({...be,machineCount:B,machineCountMode:je,cappedMachineCount:ce}))}else Lt(ae,de=>({...de,machineCount:B,machineCountMode:je,cappedMachineCount:ce}))}else Ie&&Lt(Ie,Y=>({...Y,machineCount:B}));se(!1),he(null),Ne(""),Ve("free"),Te(null),ze("machineCount")},[ae,Se,je,Ie,e,i,We,t,yn,ze]),fo=A.useCallback(()=>{Ie&&(yn(Ie),p(!0),g(null),q(null),b("product")),se(!1),he(null),Ne(""),Ve("free"),Te(null)},[Ie,yn]),_u=A.useCallback((N,B,H)=>{let L,Y;B==="free"?(L="capped",Y=H):B==="capped"?(L="locked",Y=H):(L="free",Y=void 0),t(re=>re.map(ce=>ce.id!==N?ce:{...ce,data:{...ce.data,machineCountMode:L,cappedMachineCount:Y}}))},[t]),Dc=A.useCallback(()=>{const N=RL(e,i);t(N)},[e,i,t]),Bc=A.useCallback(()=>{if(W.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let N=Gw(e,i,W,{allowDeficiency:!1});if(!N.success&&N.hasDeficiency)if(window.confirm(`${N.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))N=Gw(e,i,W,{allowDeficiency:!0});else return;N.success?(t(B=>B.map(H=>{const L=N.updates.get(H.id);return L!==void 0?{...H,data:{...H.data,machineCount:L}}:H})),ze("machineCount"),alert(`Success! Updated ${N.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(N.message||"No changes needed - production line is already balanced.")},[W,e,i,t,ze]),mu=()=>{if(!h)return[];const N=bt(h.id),B=SV(h.id),H=qV(h.id),L=[tw,iw,ow,j0,V0,F0],Y=L.filter(de=>HV(de.id).includes(h.id)),re=L.filter(de=>{if($V(de.id).includes(h.id))return!0;if(N){if(de.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(de.id==="r_liquid_dump"||de.id==="r_liquid_burner")return!1}return!1}),ce=L.filter(de=>de.id==="r_liquid_dump"||de.id==="r_liquid_burner"?(N==null?void 0:N.type)==="fluid":de.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return D==="producers"?[...B,...Y]:D==="consumers"?[...H,...re]:D==="disposal"?ce:Array.from(new Map([...B,...H,...Y,...re,...ce].map(de=>[de.id,de])).values())};A.useEffect(()=>{if(d){const N=w==="product"?mu():Cl(x==null?void 0:x.id),B=V?e.find(L=>L.id===V.nodeId):null,H={};N.forEach(L=>{H[L.id]=lu(L,B,V)}),eo(H)}},[d,w,h,x,V,e,D]);const Ya=A.useCallback(()=>{const N=document.createElement("input");N.type="file",N.accept=".json",N.onchange=B=>{var Y;const H=(Y=B.target.files)==null?void 0:Y[0];if(!H)return;const L=new FileReader;L.onload=re=>{try{const ce=JSON.parse(re.target.result);if(!ce.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const de=ce.canvas.nodes||[],ve=[];if(de.forEach(fe=>{var xe,ye,ke,Re,Pe,Ye,Xe,et;const ge=(ye=(xe=fe.data)==null?void 0:xe.recipe)==null?void 0:ye.machine_id;ge&&!vt(ge)&&ve.push(`Machine: ${ge}`),(Pe=(Re=(ke=fe.data)==null?void 0:ke.recipe)==null?void 0:Re.inputs)==null||Pe.forEach(nt=>{nt.product_id!=="p_variableproduct"&&!bt(nt.product_id)&&ve.push(`Product: ${nt.product_id}`)}),(et=(Xe=(Ye=fe.data)==null?void 0:Ye.recipe)==null?void 0:Xe.outputs)==null||et.forEach(nt=>{nt.product_id!=="p_variableproduct"&&!bt(nt.product_id)&&ve.push(`Product: ${nt.product_id}`)})}),ve.length>0){const fe=[...new Set(ve)];alert(`Cannot import canvas - missing items:
${fe.slice(0,10).join(`
`)}${fe.length>10?`
...and ${fe.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const be=ir(),Me=de.map(fe=>{var ye,ke,Re,Pe;const ge=vt((ke=(ye=fe.data)==null?void 0:ye.recipe)==null?void 0:ke.machine_id);let xe=(Re=fe.data)==null?void 0:Re.recipe;return ge&&xe&&!((Pe=xe.outputs)!=null&&Pe.some(Ye=>Ye.temperature!==void 0))&&(xe=bs(xe,ge.id)),{...fe,data:{...fe.data,recipe:xe,machineCount:fe.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...be,globalPollution:me,flows:null,suggestions:[]}}});t(Me),a(ce.canvas.edges||[]),te(ce.canvas.targetProducts||[]),rr(ce.canvas.soldProducts||{}),Yr(ce.canvas.favoriteRecipes||[]),Ut(ce.canvas.lastDrillConfig||null),nr(ce.canvas.lastAssemblerConfig||null),hr(ce.canvas.lastTreeFarmConfig||null),Et(ce.canvas.lastFireboxConfig||null),gr(ce.canvas.lastWasteFacilityConfig||null),l(ce.canvas.nodeId||0),J(ce.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas imported successfully!")}catch(ce){alert(`Import failed: ${ce.message}`)}},L.readAsText(H)},N.click()},[_t,xt,me,ir,t,a,te,rr,Yr,Ut,nr,hr,Et,gr,l,J,ze]),zc=A.useCallback(N=>{var L;const B=(L=N.target.files)==null?void 0:L[0];if(!B)return;const H=new FileReader;H.onload=Y=>{var re,ce;try{const de=JSON.parse(Y.target.result),ve=de.products||de.machines||de.recipes,be=de.canvas;if(ve){const Me=new Map((de.products||[]).map(ke=>[ke.id,ke])),fe=Array.from(Me.values()),ge=new Set(((re=de.machines)==null?void 0:re.map(ke=>ke.id))||[]),xe=(de.recipes||[]).filter(ke=>ge.has(ke.machine_id)),ye=[...$r];if(fe.forEach(ke=>{const Re=ye.findIndex(Pe=>Pe.id===ke.id);Re>=0?ye[Re]=ke:ye.push(ke)}),S0(ye),((ce=de.machines)==null?void 0:ce.length)>0){const ke=[...Cn],Re=new Set(de.machines.map(Ye=>Ye.id)),Pe=Mn.filter(Ye=>!Re.has(Ye.machine_id));de.machines.forEach(Ye=>{const Xe=ke.findIndex(et=>et.id===Ye.id);Xe>=0?ke[Xe]=Ye:ke.push(Ye)}),C0(ke),k0([...Pe,...xe])}if(!be){alert("Data import successful!"),window.location.reload();return}}if(be){const Me=de.canvas.nodes||[],fe=[];if(Me.forEach(ye=>{var Re,Pe,Ye,Xe,et,nt,Dt,wr;const ke=(Pe=(Re=ye.data)==null?void 0:Re.recipe)==null?void 0:Pe.machine_id;ke&&!vt(ke)&&fe.push(`Machine: ${ke}`),(et=(Xe=(Ye=ye.data)==null?void 0:Ye.recipe)==null?void 0:Xe.inputs)==null||et.forEach(jt=>{jt.product_id!=="p_variableproduct"&&!bt(jt.product_id)&&fe.push(`Product: ${jt.product_id}`)}),(wr=(Dt=(nt=ye.data)==null?void 0:nt.recipe)==null?void 0:Dt.outputs)==null||wr.forEach(jt=>{jt.product_id!=="p_variableproduct"&&!bt(jt.product_id)&&fe.push(`Product: ${jt.product_id}`)})}),fe.length>0){const ye=[...new Set(fe)];alert(`Cannot import canvas - missing items:
${ye.slice(0,10).join(`
`)}${ye.length>10?`
...and ${ye.length-10} more`:""}`),N.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){N.target.value="";return}const ge=ir(),xe=Me.map(ye=>{var Pe,Ye,Xe,et;const ke=vt((Ye=(Pe=ye.data)==null?void 0:Pe.recipe)==null?void 0:Ye.machine_id);let Re=(Xe=ye.data)==null?void 0:Xe.recipe;return ke&&Re&&!((et=Re.outputs)!=null&&et.some(nt=>nt.temperature!==void 0))&&(Re=bs(Re,ke.id)),{...ye,data:{...ye.data,recipe:Re,machineCount:ye.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...ge,globalPollution:me,flows:null,suggestions:[]}}});t(xe),a(de.canvas.edges||[]),te(de.canvas.targetProducts||[]),rr(de.canvas.soldProducts||{}),Yr(de.canvas.favoriteRecipes||[]),Ut(de.canvas.lastDrillConfig||null),nr(de.canvas.lastAssemblerConfig||null),hr(de.canvas.lastTreeFarmConfig||null),Et(de.canvas.lastFireboxConfig||null),gr(de.canvas.lastWasteFacilityConfig||null),l(de.canvas.nodeId||0),J(de.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas import successful!")}}catch(de){alert(`Import failed: ${de.message}`)}},H.readAsText(B),N.target.value=""},[_t,xt,me,ir,t,a,te,rr,Yr,Ut,nr,hr,Et,l,J]);A.useCallback(()=>{const N=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn},null,2)],{type:"application/json"}),B=URL.createObjectURL(N),H=document.createElement("a");H.href=B,H.download=`industrialist-data-${Date.now()}.json`,H.click(),URL.revokeObjectURL(B)},[$r,Cn,Mn]);const $c=A.useCallback(()=>{const B={nodes:e.map(re=>({...re,data:{...re.data,flows:void 0,suggestions:void 0}})),edges:i,targetProducts:W,nodeId:u,targetIdCounter:$,soldProducts:tr,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:mr,lastFireboxConfig:yr,lastWasteFacilityConfig:cn},H=new Blob([JSON.stringify({canvas:B},null,2)],{type:"application/json"}),L=URL.createObjectURL(H),Y=document.createElement("a");Y.href=L,Y.download=`industrialist-canvas-${Date.now()}.json`,Y.click(),URL.revokeObjectURL(L)},[e,i,W,u,$,tr,Wt,At,Gt,mr,yr]);A.useCallback(()=>{const N=e.map(Y=>({...Y,data:{...Y.data,flows:void 0,suggestions:void 0}})),B=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn,canvas:{nodes:N,edges:i,targetProducts:W,nodeId:u,targetIdCounter:$,soldProducts:tr,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:mr,lastFireboxConfig:yr,lastWasteFacilityConfig:cn}},null,2)],{type:"application/json"}),H=URL.createObjectURL(B),L=document.createElement("a");L.href=H,L.download=`industrialist-export-${Date.now()}.json`,L.click(),URL.revokeObjectURL(H)},[e,i,W,u,$,tr,Wt,At,Gt,mr,yr]);const Hc=A.useCallback(()=>{const N=Pa(),B=Ra(),H=nu();S0(N),C0(B),k0(H),ze("node")},[ze]),Wc=A.useCallback(N=>{const B=ir(),H=N.nodes.map(L=>{var ce,de,ve,be;const Y=vt((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(Me=>Me.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...B,globalPollution:me,flows:null,suggestions:[]}}});t(H),a(N.edges||[]),te(N.targetProducts||[]),rr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),nr(N.lastAssemblerConfig||null),hr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),gr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),J(N.targetIdCounter||0),Sn(),ze("node")},[_t,xt,me,ir,t,a,te,rr,Yr,Ut,nr,hr,Et,gr,l,J,ze]),Uc=A.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(n3(),gV(Yl),vV(Ql),xV(Xl),t([]),a([]),l(0),te([]),J(0),rr({}),Ut(null),nr(null),hr(null),Et(null),gr(null),window.location.reload())},[t,a,$r,Cn,Mn]);A.useEffect(()=>{const N=B=>{if(B.key==="industrialist_theme")try{const H=JSON.parse(B.newValue);Rr({edgePath:H.edgePath||"orthogonal",edgeStyle:H.edgeStyle||"animated"})}catch(H){console.error("Error parsing theme from storage:",H)}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),A.useEffect(()=>{if(!ot){const N=Ol();Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"})}},[ot]);const hu=$r.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())&&(j==="all"||N.type===j)).sort((N,B)=>M==="name_asc"?N.name.localeCompare(B.name):M==="name_desc"?B.name.localeCompare(N.name):M==="price_asc"?(N.price==="Variable"?1/0:N.price)-(B.price==="Variable"?1/0:B.price):M==="price_desc"?(B.price==="Variable"?-1/0:B.price)-(N.price==="Variable"?-1/0:N.price):M==="rp_asc"?(N.rp_multiplier==="Variable"?1/0:N.rp_multiplier)-(B.rp_multiplier==="Variable"?1/0:B.rp_multiplier):(B.rp_multiplier==="Variable"?-1/0:B.rp_multiplier)-(N.rp_multiplier==="Variable"?-1/0:N.rp_multiplier)),yu=Cn.filter(N=>{const B=N.name.toLowerCase().includes(E.toLowerCase()),H=N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"||N.id==="m_underground_waste_facility"||N.id==="m_liquid_dump"||N.id==="m_liquid_burner"||Cl(N.id).length>0,L=F==="all"||N.tier!==void 0&&N.tier.toString()===F;return B&&H&&L}).sort((N,B)=>N.name.localeCompare(B.name)),Gc=N=>{if(N.id==="m_mineshaft_drill")Lr(tw,1);else if(N.id==="m_logic_assembler")Lr(iw,1);else if(N.id==="m_tree_farm")Lr(ow,1);else if(N.id==="m_underground_waste_facility")Lr(j0,1);else if(N.id==="m_liquid_dump")Lr(V0,1);else if(N.id==="m_liquid_burner")Lr(F0,1);else{q(N);return}Uo()},gu=(w==="product"?mu():Cl(x==null?void 0:x.id)).sort((N,B)=>{const H=Wt.includes(N.id),L=Wt.includes(B.id);if(H&&!L)return-1;if(!H&&L)return 1;const Y=vt(N.machine_id),re=vt(B.machine_id);return((Y==null?void 0:Y.name)||"").localeCompare((re==null?void 0:re.name)||"")}),Kc=N=>{Yr(B=>B.includes(N)?B.filter(H=>H!==N):[...B,N])};return _.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[_.jsxs(q6,{ref:ti,nodes:e,edges:i,onNodesChange:zo,onEdgesChange:Ba,onConnect:so,onNodeClick:fu,onNodeDoubleClick:xr,onMouseMove:Lc,onClick:Ga,onContextMenu:Ka,onInit:N=>{fn.current=N,Rt(N.getZoom())},onMoveEnd:(N,B)=>{Rt(B.zoom)},nodeTypes:VL,edgeTypes:OL,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:st.edgePath==="straight"?"straight":st.edgePath==="orthogonal"?"smoothstep":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:st.edgeStyle==="animated"||st.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[_.jsx(T6,{color:"#333",gap:16,size:1}),!Qe&&_.jsx(F6,{className:($t||Tt)&&!fr?"controls-shifted":"",position:"bottom-left"}),!Qe&&_.jsx(Q6,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),_.jsx(Ia,{position:"top-left",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:_.jsx("div",{className:`left-panel-container ${fr?"collapsed":""}`,style:Qe?{maxWidth:"100%"}:{},children:_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[_.jsxs("div",{className:"stats-panel",children:[_.jsx("h3",{className:"stats-title",children:Si}),_.jsxs("div",{className:"stats-grid",children:[_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Power:"}),_.jsx("div",{className:"stat-value",children:Pp(Fr.totalPower)})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Pollution:"}),_.jsxs("div",{className:"stat-value",style:{color:Fr.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Fr.totalPollution.toFixed(2),"%/hr"]})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),_.jsx("div",{className:"stat-value",children:Fr.totalModelCount.toFixed(0)})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Profit:"}),_.jsxs("div",{className:"stat-value",style:{color:ki>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",Sr(ki),"/s"]})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Cost:"}),_.jsxs("div",{className:"stat-value",children:["$",Sr(ao.totalCost)]})]})]})]}),_.jsxs("div",{className:"flex-col action-buttons-container",children:[_.jsx("button",{onClick:cu,className:"btn btn-primary",children:"+ Select Recipe"}),_.jsx("button",{onClick:()=>{z(!0),_e("targets")},className:"btn btn-secondary",children:"View Recipes"}),_.jsx("button",{onClick:Bc,className:"btn btn-secondary",children:"Compute Machines"}),_.jsx("button",{onClick:Dc,className:"btn btn-secondary",children:"Auto Layout"}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:()=>er(!$t),className:"btn btn-secondary btn-square",title:$t?"Close more statistics":"Open more statistics",children:$t?"":""}),_.jsx("button",{onClick:()=>Ht(!fr),className:"btn btn-secondary btn-square btn-panel-toggle",title:fr?"Show left panel":"Hide left panel",children:fr?"":""})]})]})]}),($t||Tt)&&_.jsxs("div",{className:`extended-panel ${Tt?"closing":""}`,children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Qe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Qe?"wrap":"nowrap",gap:Qe?"10px":"0"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Qe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Qe&&_.jsx("button",{onClick:()=>er(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),_.jsxs("div",{style:{display:"flex",gap:Qe?"5px":"10px",flexWrap:"wrap"},children:[_.jsx("button",{onClick:()=>Do(N=>N==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:_t==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:_t==="perSecond"?"Per Second":"Per Cycle"}),_.jsx("button",{onClick:()=>Zi(N=>N==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:xt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:xt==="perMachine"?"Per Machine":"Total"})]})]}),_.jsxs("div",{className:"extended-panel-content",children:[_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("button",{onClick:()=>Xn(N=>!N),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:_r?"Resume pollution change":"Pause pollution change",children:_r?"":""}),_.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:me,onFocus:()=>Or(!0),onBlur:N=>{Or(!1);const B=N.target.value,H=parseFloat(B);ut(!isNaN(H)&&isFinite(H)?parseFloat(H.toFixed(4)):0)},onChange:N=>ut(N.target.value===""?"":parseFloat(N.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),_.jsxs("div",{style:{marginTop:"30px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Ar.length===0?_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ar.map(N=>_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:N.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[Sr(N.excessRate),"/s"]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof N.product.price=="number"&&_.jsxs("div",{style:{color:N.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",Sr(N.product.price*N.excessRate),"/s"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[_.jsx("input",{type:"checkbox",checked:N.isSold,onChange:B=>rr(H=>({...H,[N.productId]:B.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},N.productId))})]}),_.jsxs("div",{style:{marginTop:"30px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),Ho.length===0?_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ho.map(N=>_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),_.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",Sr(N.deficiencyRate),"/s"]})]}),_.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[N.affectedNodes.length," node",N.affectedNodes.length!==1?"s":""," affected"]})]},N.productId))})]})]})]})]})})}),_.jsxs(Ia,{position:"top-right",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:[Qe&&_.jsxs("div",{className:"mobile-controls-container",children:[_.jsx("button",{onClick:()=>ln(N=>N==="target"?"pan":"target"),className:`btn ${Nt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),_.jsx("button",{onClick:()=>ln(N=>N==="delete"?"pan":"delete"),className:`btn ${Nt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),_.jsxs("div",{className:`menu-container ${He?"":"closed"}`,style:Qe?{maxWidth:"calc(100vw - 10px)"}:{},children:[_.jsx("button",{onClick:()=>De(!He),className:"btn btn-secondary btn-menu-toggle",style:Qe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:He?">":"<"}),_.jsxs("div",{className:"menu-buttons",style:Qe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[_.jsx("button",{onClick:()=>{t([]),a([]),l(0),te([]),J(0),rr({}),Ut(null),nr(null),hr(null),Et(null),gr(null),Sn(),ze("node")},className:"btn btn-secondary",children:"Clear All"}),_.jsx("button",{onClick:()=>at(!0),className:"btn btn-secondary",children:"Saves"}),_.jsx("button",{onClick:()=>Jt(!0),className:"btn btn-secondary",children:"Data"}),_.jsx("button",{onClick:Uc,className:"btn btn-secondary",children:"Restore Defaults"}),_.jsx("button",{onClick:()=>rt(!0),className:"btn btn-secondary",children:"Theme Editor"}),_.jsx("button",{onClick:()=>ct(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),_.jsx("input",{ref:Da,type:"file",accept:".json",style:{display:"none"},onChange:zc}),(oe||m)&&_.jsx("div",{className:"modal-overlay",onClick:fo,children:oe&&_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"450px"},children:[_.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),_.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[_.jsx("button",{onClick:()=>{const N=["free","capped","locked"],H=(N.indexOf(je)+1)%N.length,L=N[H];Ve(L)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:je==="locked"?"#ef4444":je==="capped"?"#f59e0b":"var(--bg-secondary)",color:je==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${je==="free"?"Free (LP/suggestions can change)":je==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:je==="free"?" Free":je==="capped"?" Cap":" Lock"}),_.jsx("input",{type:"number",min:"0",step:"0.1",value:Se,onChange:N=>Ne(N.target.value),onKeyPress:N=>{N.key==="Enter"&&ii(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),_.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[je==="free"&&"Free: LP solver and suggestions can modify this count",je==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Se)||0} (the value when Apply is pressed)`,je==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ae&&!Ie&&_.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:_.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),_.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:fo,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{onClick:()=>ii(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ae&&!Ie&&_.jsx("button",{onClick:()=>ii(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),d&&_.jsx("div",{className:"modal-overlay",onClick:Uo,children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),children:[_.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:x?`Recipes for ${x.name}`:"Select Product or Machine"}),!h&&!x?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"mb-lg",children:_.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[_.jsx("button",{onClick:()=>b("product"),className:`btn ${w==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),_.jsx("button",{onClick:()=>b("machine"),className:`btn ${w==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),w==="product"?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-lg flex-col",children:[_.jsx("input",{type:"text",placeholder:"Search products...",value:E,onChange:N=>I(N.target.value),className:"input"}),_.jsxs("div",{className:"flex-row",children:[_.jsxs("select",{value:j,onChange:N=>P(N.target.value),className:"select",children:[_.jsx("option",{value:"all",children:"All Types"}),_.jsx("option",{value:"item",children:"Items Only"}),_.jsx("option",{value:"fluid",children:"Fluids Only"})]}),_.jsxs("select",{value:M,onChange:N=>T(N.target.value),className:"select",children:[_.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),_.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),_.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),_.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),_.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),_.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[_.jsxs("div",{className:"product-table-header",children:[_.jsx("div",{children:"Product"}),_.jsx("div",{className:"text-right",children:"Price"}),_.jsx("div",{className:"text-right",children:"RP Mult"})]}),hu.map(N=>_.jsxs("div",{onClick:()=>g(N),className:"product-row",children:[_.jsxs("div",{children:[_.jsx("div",{className:"product-name",children:N.name}),_.jsx("div",{className:"product-type",children:N.type==="item"?" Item":" Fluid"})]}),_.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.price==="Variable"?"Variable":`${Sr(N.price)}`}),_.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.rp_multiplier==="Variable"?"Variable":N.rp_multiplier>=1e3?`${Sr(N.rp_multiplier)}x`:`${N.rp_multiplier.toFixed(1)}x`})]},N.id))]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[_.jsx("input",{type:"text",placeholder:"Search machines...",value:E,onChange:N=>I(N.target.value),className:"input",style:{flex:3}}),_.jsxs("select",{value:F,onChange:N=>Q(N.target.value),className:"select",style:{flex:1},children:[_.jsx("option",{value:"all",children:"All Tiers"}),_.jsx("option",{value:"1",children:"Tier 1"}),_.jsx("option",{value:"2",children:"Tier 2"}),_.jsx("option",{value:"3",children:"Tier 3"}),_.jsx("option",{value:"4",children:"Tier 4"}),_.jsx("option",{value:"5",children:"Tier 5"})]})]}),_.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:yu.length===0?_.jsx("div",{className:"empty-state",children:"No machines found"}):yu.map(N=>_.jsxs("div",{onClick:()=>Gc(N),className:"recipe-card",style:{cursor:"pointer"},children:[_.jsx("div",{className:"recipe-machine",style:{color:N.tier===1?"var(--tier-1-color)":N.tier===2?"var(--tier-2-color)":N.tier===3?"var(--tier-3-color)":N.tier===4?"var(--tier-4-color)":(N.tier===5,"var(--tier-5-color)")},children:N.name}),_.jsx("div",{className:"recipe-details",style:{color:"#999"},children:N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"?"Click to create box":`${Cl(N.id).length} recipe(s)`})]},N.id))})]})]}):_.jsxs(_.Fragment,{children:[C==="button"&&_.jsx("button",{onClick:()=>{g(null),q(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&_.jsx("div",{className:"mb-lg",children:_.jsxs("select",{value:D,onChange:N=>O(N.target.value),className:"select",children:[_.jsx("option",{value:"all",children:"All Recipes"}),_.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),_.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),_.jsx("option",{value:"disposal",children:"Disposal"})]})}),_.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:gu.length===0?_.jsx("div",{className:"empty-state",children:"No recipes found"}):gu.map(N=>{const B=vt(N.machine_id),H=Wt.includes(N.id),L=Ji[N.id]??1;return B&&N.inputs&&N.outputs?_.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("button",{onClick:Y=>{Y.stopPropagation(),Kc(N.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:H?"none":"grayscale(100%)",opacity:H?1:.4,transition:"all 0.2s"},onMouseEnter:Y=>{Y.currentTarget.style.transform="scale(1.2)",Y.currentTarget.style.opacity="1"},onMouseLeave:Y=>{Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.opacity=H?"1":"0.4"},title:H?"Remove from favorites":"Add to favorites",children:""}),_.jsx("div",{onClick:Y=>{Y.stopPropagation();const re=L<=0?1:L,ce=Lr(N,re);f(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),Ne(String(re)),se(!0),f(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:V&&L<=0?"var(--delete-bg)":"var(--color-primary)",color:V&&L<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:V&&L<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:Y=>{V&&L<=0?(Y.currentTarget.style.background="var(--delete-hover-bg)",Y.currentTarget.style.color="var(--delete-hover-color)"):(Y.currentTarget.style.background="var(--color-primary-hover)",Y.currentTarget.style.transform="scale(1.05)",Y.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:Y=>{V&&L<=0?(Y.currentTarget.style.background="var(--delete-bg)",Y.currentTarget.style.color="var(--delete-color)"):(Y.currentTarget.style.background="var(--color-primary)",Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.borderColor="transparent")},title:V?L<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(L)?L:L.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(L)?L:L.toFixed(2)}),_.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:Y=>{if(Y.stopPropagation(),L<=0){const ce=Lr(N,1);f(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),Ne("1"),se(!0),f(!1)},50)}else Lr(N),Uo()},children:[_.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[_.jsx("div",{className:"recipe-machine",style:{color:B.tier===1?"var(--tier-1-color)":B.tier===2?"var(--tier-2-color)":B.tier===3?"var(--tier-3-color)":B.tier===4?"var(--tier-4-color)":(B.tier===5,"var(--tier-5-color)")},children:B.name}),N.power_type==="HV"&&_.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),_.jsxs("div",{className:"recipe-details",children:[_.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),_.jsx("span",{children:N.inputs.map(Y=>Z1(Y,bt)).join(", ")})]}),_.jsxs("div",{className:"recipe-details",children:[_.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),_.jsx("span",{children:N.outputs.map(Y=>Z1(Y,bt)).join(", ")})]})]})]},N.id):null})})]}),_.jsx("button",{onClick:Uo,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),U&&_.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[_.jsx("h2",{className:"modal-title",children:"Target Products"}),_.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:W.length===0?_.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):W.map(N=>{var Me;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:H,machine:L,machineCount:Y=0}=B.data||{};if(!H)return null;let re=H.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi(H)){const ge=H.tempDependentInputTemp??In;re=Wn(L.id,ge,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=H.isMineshaftDrill||H.id==="r_mineshaft_drill",ve=(Me=We==null?void 0:We.flows)==null?void 0:Me.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return H.inputs.forEach((fe,ge)=>{var xe;if(typeof fe.quantity=="number"){const ke=(de?fe.quantity:fe.quantity/re)*Y,Re=((xe=ve==null?void 0:ve.inputFlows[ge])==null?void 0:xe.connected)||0;be.inputs[ge]={totalRate:ke,connectedFlow:Re,deficiency:Math.max(0,ke-Re)}}}),H.outputs.forEach((fe,ge)=>{var ye;const xe=fe.quantity;if(typeof xe=="number"){const Re=(de?xe:xe/re)*Y,Pe=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Re,connectedFlow:Pe,excess:Math.max(0,Re-Pe)}}}),_.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:H.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),_.jsx("button",{onClick:()=>co(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),H.inputs.map((fe,ge)=>{const xe=be.inputs[ge];return xe?_.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:ye=>ni(N.id,"input",ge,ye),styleType:"input"},ge):null})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),H.outputs.map((fe,ge)=>{const xe=be.outputs[ge];return xe?_.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:ye=>ni(N.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},N.id)})}),_.jsx("button",{onClick:()=>K(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),ie&&_.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[_.jsx("h2",{className:"modal-title",children:"Recipes"}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[_.jsx("button",{onClick:()=>_e("targets"),className:Z==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Z==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),_.jsx("button",{onClick:()=>_e("canvas"),className:Z==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Z==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),Z==="canvas"&&_.jsx("div",{style:{marginBottom:"15px"},children:_.jsxs("select",{value:Zn,onChange:N=>mt(N.target.value),className:"select",style:{width:"100%"},children:[_.jsx("option",{value:"all",children:"All Recipes"}),_.jsx("option",{value:"excess",children:"Has Excess"}),_.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),_.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:Z==="targets"?_.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[_.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),_.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsx("button",{onClick:()=>{dn(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),pn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),_.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ht&&ht!=="Deficiencies"&&ei.includes(ht)&&(pn(B=>B.filter(H=>H!==ht)),dn(B=>[...B,ht])),Qr(null),Kt(null)},children:Jn.length===0?_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):Jn.map((N,B)=>{const H=Jn.length,L=H>1?B/(H-1):0,Y=Math.round(239-205*L),re=Math.round(68+129*L),ce=Math.round(68+26*L),de=`rgb(${Y}, ${re}, ${ce})`;return _.jsx("div",{draggable:N!=="Deficiencies",onDragStart:()=>N!=="Deficiencies"&&Qr(N),onDragOver:ve=>{ve.preventDefault(),ht&&ht!==N&&N!=="Deficiencies"&&Kt(B)},onDragLeave:()=>Kt(null),onDrop:ve=>{ve.preventDefault(),ve.stopPropagation(),ht&&ht!==N&&N!=="Deficiencies"&&(ei.includes(ht)?(pn(be=>be.filter(Me=>Me!==ht)),dn(be=>{const Me=[...be];return Me.splice(B,0,ht),Me})):Jn.includes(ht)&&dn(be=>{const Me=be.filter(ge=>ge!==ht),fe=Me.indexOf(N);return Me.splice(fe,0,ht),Me})),Kt(null),Qr(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${de}`,borderRadius:"var(--radius-sm)",cursor:N==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:N==="Deficiencies"?.7:ht===N?.5:1,boxShadow:On===B&&N!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:On===B&&N!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{Qr(null),Kt(null)},title:N==="Deficiencies"?"Deficiencies must always be active":"",children:N},N)})})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),_.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ht&&ht!=="Deficiencies"&&Jn.includes(ht)&&(dn(B=>B.filter(H=>H!==ht)),pn(B=>[...B,ht])),Qr(null)},children:ei.length===0?_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):ei.map(N=>_.jsx("div",{draggable:!0,onDragStart:()=>Qr(N),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>Qr(null),children:N},N))})]})]})]}),_.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),_.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),_.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:W.length===0?_.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):W.map(N=>{var Me;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:H,machine:L,machineCount:Y=0}=B.data||{};if(!H)return null;let re=H.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi(H)){const ge=H.tempDependentInputTemp??In;re=Wn(L.id,ge,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=H.isMineshaftDrill||H.id==="r_mineshaft_drill",ve=(Me=We==null?void 0:We.flows)==null?void 0:Me.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return H.inputs.forEach((fe,ge)=>{var xe;if(typeof fe.quantity=="number"){const ke=(de?fe.quantity:fe.quantity/re)*Y,Re=((xe=ve==null?void 0:ve.inputFlows[ge])==null?void 0:xe.connected)||0;be.inputs[ge]={totalRate:ke,connectedFlow:Re,deficiency:Math.max(0,ke-Re)}}}),H.outputs.forEach((fe,ge)=>{var ye;const xe=fe.quantity;if(typeof xe=="number"){const Re=(de?xe:xe/re)*Y,Pe=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Re,connectedFlow:Pe,excess:Math.max(0,Re-Pe)}}}),_.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:H.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),_.jsx("button",{onClick:()=>co(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),H.inputs.map((fe,ge)=>{const xe=be.inputs[ge];return xe?_.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:ye=>ni(N.id,"input",ge,ye),styleType:"input"},ge):null})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),H.outputs.map((fe,ge)=>{const xe=be.outputs[ge];return xe?_.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:ye=>ni(N.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},N.id)})})]})]}):_.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?_.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(N=>{var ve;if(Zn==="all")return!0;const{recipe:B,machineCount:H=0}=N.data||{};if(!B)return!1;let L=B.cycle_time;(typeof L!="number"||L<=0)&&(L=1);const Y=(ve=We==null?void 0:We.flows)==null?void 0:ve.byNode[N.id];if(!Y)return!1;const re=B.isMineshaftDrill||B.id==="r_mineshaft_drill";let ce=!1,de=!1;return B.inputs.forEach((be,Me)=>{var fe;if(typeof be.quantity=="number"){const xe=(re?be.quantity:be.quantity/L)*H,ye=((fe=Y.inputFlows[Me])==null?void 0:fe.connected)||0;Math.max(0,xe-ye)>.001&&(de=!0)}}),B.outputs.forEach((be,Me)=>{var ge;const fe=be.originalQuantity!==void 0?be.originalQuantity:be.quantity;if(typeof fe=="number"){const ye=(re?fe:fe/L)*H,ke=((ge=Y.outputFlows[Me])==null?void 0:ge.connected)||0;Math.max(0,ye-ke)>.001&&(ce=!0)}}),Zn==="excess"?ce:Zn==="deficiency"?de:!0}).map(N=>{const{recipe:B,machine:H,machineCount:L=0,machineCountMode:Y="free",cappedMachineCount:re}=N.data||{};if(!B||!H)return null;let ce=B.cycle_time;if((typeof ce!="number"||ce<=0)&&(ce=1),Ur(H==null?void 0:H.id)){const fe=an[H.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi(B)){const ge=B.tempDependentInputTemp??In;ce=Wn(H.id,ge,ce)}}const ve=B.power_consumption;let be="Variable";typeof ve=="number"?be=Pp(ve*L):typeof ve=="object"&&ve!==null&&"max"in ve&&(be=`${Pp(ve.max*L)} (max)`);const Me=typeof B.pollution=="number"?B.pollution*L:0;return _.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[_.jsxs("div",{style:{flex:1,minWidth:0},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:B.name}),_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("div",{style:{color:H.tier===1?"var(--tier-1-color)":H.tier===2?"var(--tier-2-color)":H.tier===3?"var(--tier-3-color)":H.tier===4?"var(--tier-4-color)":(H.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:H.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",Sr(Math.ceil(L)*(typeof H.cost=="number"?H.cost:0))]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof ce=="number"?`${ce.toFixed(2)}s`:"Variable"]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",be]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",Me.toFixed(2),"%/hr"]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),B.inputs.map((fe,ge)=>{var nt,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=fe.quantity,Re=(typeof ye=="number"?xe?ye:ye/ce:0)*L,Pe=(nt=We==null?void 0:We.flows)==null?void 0:nt.byNode[N.id],Ye=((Dt=Pe==null?void 0:Pe.inputFlows[ge])==null?void 0:Dt.connected)||0,et=Math.max(0,Re-Ye)>.001;return _.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:et?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:et?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),_.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,bt)}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?Sr(Re):"Var","/s"]})]},ge)})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),B.outputs.map((fe,ge)=>{var nt,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=fe.originalQuantity!==void 0?fe.originalQuantity:fe.quantity,Re=(typeof ye=="number"?xe?ye:ye/ce:0)*L,Pe=(nt=We==null?void 0:We.flows)==null?void 0:nt.byNode[N.id],Ye=((Dt=Pe==null?void 0:Pe.outputFlows[ge])==null?void 0:Dt.connected)||0,et=Math.max(0,Re-Ye)>.001;return _.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:et?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:et?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),_.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,bt)}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?Sr(Re):"Var","/s"]})]},ge)})]})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[_.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),_.jsx("input",{type:"number",min:"0",step:"0.1",value:qi[N.id]!==void 0?qi[N.id]:L.toFixed(2),onFocus:()=>{to(fe=>({...fe,[N.id]:L.toFixed(2)}))},onChange:fe=>{to(ge=>({...ge,[N.id]:fe.target.value}))},onBlur:()=>{const fe=parseFloat(qi[N.id]);!isNaN(fe)&&fe>=0&&(Lt(N.id,ge=>({...ge,machineCount:fe})),ze("machineCount")),to(ge=>{const xe={...ge};return delete xe[N.id],xe})},onKeyPress:fe=>{fe.key==="Enter"&&fe.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),_.jsx("button",{onClick:()=>{const fe=["free","capped","locked"],xe=(fe.indexOf(Y)+1)%fe.length,ye=fe[xe];t(ke=>ke.map(Re=>Re.id!==N.id?Re:{...Re,data:{...Re.data,machineCountMode:ye,cappedMachineCount:ye==="free"?void 0:L}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:Y==="locked"?"#ef4444":Y==="capped"?"#f59e0b":"var(--bg-secondary)",color:Y==="free"?"var(--text-primary)":"#fff",border:Y==="free"?"2px solid var(--border-primary)":"none"},title:Y==="free"?"Free: LP/suggestions can change":Y==="capped"?`Capped: Max ${(re==null?void 0:re.toFixed(2))||L.toFixed(2)}`:"Locked: Cannot be changed",children:Y==="free"?" Free":Y==="capped"?" Cap":" Lock"}),_.jsx("button",{onClick:()=>{fn.current&&(fn.current.fitView({nodes:[{id:N.id}],padding:.5,duration:500}),z(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},N.id)})})})}),_.jsx("button",{onClick:()=>z(!1),className:"btn btn-secondary",children:"Close"})]})}),ot&&_.jsx(aV,{onClose:()=>rt(!1)}),ft&&_.jsx(sV,{onClose:()=>ct(!1)}),dt&&_.jsx(fV,{onClose:()=>at(!1),onLoad:Wc,currentCanvas:{nodes:e,edges:i,targetProducts:W,nodeId:u,targetIdCounter:$,soldProducts:tr,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:mr,lastFireboxConfig:yr,lastWasteFacilityConfig:cn},onImport:Ya,onExportCanvas:$c}),Zt&&_.jsx(CV,{onClose:()=>Jt(!1),defaultProducts:Yl,defaultMachines:Ql,defaultRecipes:Xl,onDataChange:Hc}),Qe&&Nt!=="pan"&&_.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Nt==="target"&&" Target Mode: Tap nodes to mark as targets",Nt==="delete"&&" Delete Mode: Tap nodes to delete"]}),sr&&_.jsxs("div",{className:"pending-node-preview",style:{left:`${Bo.x+20}px`,top:`${Bo.y+20}px`},children:[_.jsx("div",{className:"pending-node-recipe-name",children:sr.recipe.name}),_.jsx("div",{className:"pending-node-machine-name",children:sr.machine.name}),_.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",sr.machineCount]}),_.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}WT.createRoot(document.getElementById("root")).render(_.jsx(yk.StrictMode,{children:_.jsx(FL,{})}));

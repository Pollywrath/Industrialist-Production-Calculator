(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ta(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function VN(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var fp={exports:{}},gs={},_p={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function FN(){if(Fx)return Ze;Fx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=f&&z[f]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,q={};function w(z,Z,_e){this.props=z,this.context=Z,this.refs=q,this.updater=_e||g}w.prototype.isReactComponent={},w.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function b(){}b.prototype=w.prototype;function C(z,Z,_e){this.props=z,this.context=Z,this.refs=q,this.updater=_e||g}var S=C.prototype=new b;S.constructor=C,x(S,w.prototype),S.isPureReactComponent=!0;var E=Array.isArray,I=Object.prototype.hasOwnProperty,M={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function P(z,Z,_e){var W,ee={},oe=null,ue=null;if(Z!=null)for(W in Z.ref!==void 0&&(ue=Z.ref),Z.key!==void 0&&(oe=""+Z.key),Z)I.call(Z,W)&&!T.hasOwnProperty(W)&&(ee[W]=Z[W]);var se=arguments.length-2;if(se===1)ee.children=_e;else if(1<se){for(var ge=Array(se),Ee=0;Ee<se;Ee++)ge[Ee]=arguments[Ee+2];ee.children=ge}if(z&&z.defaultProps)for(W in se=z.defaultProps,se)ee[W]===void 0&&(ee[W]=se[W]);return{$$typeof:e,type:z,key:oe,ref:ue,props:ee,_owner:M.current}}function j(z,Z){return{$$typeof:e,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function V(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(_e){return Z[_e]})}var F=/\/+/g;function Q(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):Z.toString(36)}function R(z,Z,_e,W,ee){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var ue=!1;if(z===null)ue=!0;else switch(oe){case"string":case"number":ue=!0;break;case"object":switch(z.$$typeof){case e:case t:ue=!0}}if(ue)return ue=z,ee=ee(ue),z=W===""?"."+Q(ue,0):W,E(ee)?(_e="",z!=null&&(_e=z.replace(F,"$&/")+"/"),R(ee,Z,_e,"",function(Ee){return Ee})):ee!=null&&(D(ee)&&(ee=j(ee,_e+(!ee.key||ue&&ue.key===ee.key?"":(""+ee.key).replace(F,"$&/")+"/")+z)),Z.push(ee)),1;if(ue=0,W=W===""?".":W+":",E(z))for(var se=0;se<z.length;se++){oe=z[se];var ge=W+Q(oe,se);ue+=R(oe,Z,_e,ge,ee)}else if(ge=h(z),typeof ge=="function")for(z=ge.call(z),se=0;!(oe=z.next()).done;)oe=oe.value,ge=W+Q(oe,se++),ue+=R(oe,Z,_e,ge,ee);else if(oe==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ue}function X(z,Z,_e){if(z==null)return z;var W=[],ee=0;return R(z,W,"","",function(oe){return Z.call(_e,oe,ee++)}),W}function H(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(_e){(z._status===0||z._status===-1)&&(z._status=1,z._result=_e)},function(_e){(z._status===0||z._status===-1)&&(z._status=2,z._result=_e)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},U={transition:null},K={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:U,ReactCurrentOwner:M};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:X,forEach:function(z,Z,_e){X(z,function(){Z.apply(this,arguments)},_e)},count:function(z){var Z=0;return X(z,function(){Z++}),Z},toArray:function(z){return X(z,function(Z){return Z})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ze.Component=w,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=C,Ze.StrictMode=i,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ze.act=ie,Ze.cloneElement=function(z,Z,_e){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var W=x({},z.props),ee=z.key,oe=z.ref,ue=z._owner;if(Z!=null){if(Z.ref!==void 0&&(oe=Z.ref,ue=M.current),Z.key!==void 0&&(ee=""+Z.key),z.type&&z.type.defaultProps)var se=z.type.defaultProps;for(ge in Z)I.call(Z,ge)&&!T.hasOwnProperty(ge)&&(W[ge]=Z[ge]===void 0&&se!==void 0?se[ge]:Z[ge])}var ge=arguments.length-2;if(ge===1)W.children=_e;else if(1<ge){se=Array(ge);for(var Ee=0;Ee<ge;Ee++)se[Ee]=arguments[Ee+2];W.children=se}return{$$typeof:e,type:z.type,key:ee,ref:oe,props:W,_owner:ue}},Ze.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},Ze.createElement=P,Ze.createFactory=function(z){var Z=P.bind(null,z);return Z.type=z,Z},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(z){return{$$typeof:l,render:z}},Ze.isValidElement=D,Ze.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:H}},Ze.memo=function(z,Z){return{$$typeof:p,type:z,compare:Z===void 0?null:Z}},Ze.startTransition=function(z){var Z=U.transition;U.transition={};try{z()}finally{U.transition=Z}},Ze.unstable_act=ie,Ze.useCallback=function(z,Z){return te.current.useCallback(z,Z)},Ze.useContext=function(z){return te.current.useContext(z)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(z){return te.current.useDeferredValue(z)},Ze.useEffect=function(z,Z){return te.current.useEffect(z,Z)},Ze.useId=function(){return te.current.useId()},Ze.useImperativeHandle=function(z,Z,_e){return te.current.useImperativeHandle(z,Z,_e)},Ze.useInsertionEffect=function(z,Z){return te.current.useInsertionEffect(z,Z)},Ze.useLayoutEffect=function(z,Z){return te.current.useLayoutEffect(z,Z)},Ze.useMemo=function(z,Z){return te.current.useMemo(z,Z)},Ze.useReducer=function(z,Z,_e){return te.current.useReducer(z,Z,_e)},Ze.useRef=function(z){return te.current.useRef(z)},Ze.useState=function(z){return te.current.useState(z)},Ze.useSyncExternalStore=function(z,Z,_e){return te.current.useSyncExternalStore(z,Z,_e)},Ze.useTransition=function(){return te.current.useTransition()},Ze.version="18.3.1",Ze}var Ax;function Ys(){return Ax||(Ax=1,_p.exports=FN()),_p.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function AN(){if(Lx)return gs;Lx=1;var e=Ys(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,p){var m,f={},h=null,g=null;p!==void 0&&(h=""+p),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(g=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(f[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)f[m]===void 0&&(f[m]=d[m]);return{$$typeof:t,type:l,key:h,ref:g,props:f,_owner:a.current}}return gs.Fragment=n,gs.jsx=u,gs.jsxs=u,gs}var Dx;function LN(){return Dx||(Dx=1,fp.exports=AN()),fp.exports}var _=LN(),A=Ys();const yk=Ta(A);var pl={},mp={exports:{}},Tr={},hp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function DN(){return Bx||(Bx=1,(function(e){function t(U,K){var ie=U.length;U.push(K);e:for(;0<ie;){var z=ie-1>>>1,Z=U[z];if(0<a(Z,K))U[z]=K,U[ie]=Z,ie=z;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],ie=U.pop();if(ie!==K){U[0]=ie;e:for(var z=0,Z=U.length,_e=Z>>>1;z<_e;){var W=2*(z+1)-1,ee=U[W],oe=W+1,ue=U[oe];if(0>a(ee,ie))oe<Z&&0>a(ue,ee)?(U[z]=ue,U[oe]=ie,z=oe):(U[z]=ee,U[W]=ie,z=W);else if(oe<Z&&0>a(ue,ie))U[z]=ue,U[oe]=ie,z=oe;else break e}}return K}function a(U,K){var ie=U.sortIndex-K.sortIndex;return ie!==0?ie:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var d=[],p=[],m=1,f=null,h=3,g=!1,x=!1,q=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=U)i(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=n(p)}}function E(U){if(q=!1,S(U),!x)if(n(d)!==null)x=!0,H(I);else{var K=n(p);K!==null&&te(E,K.startTime-U)}}function I(U,K){x=!1,q&&(q=!1,b(P),P=-1),g=!0;var ie=h;try{for(S(K),f=n(d);f!==null&&(!(f.expirationTime>K)||U&&!V());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var Z=z(f.expirationTime<=K);K=e.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(d)&&i(d),S(K)}else i(d);f=n(d)}if(f!==null)var _e=!0;else{var W=n(p);W!==null&&te(E,W.startTime-K),_e=!1}return _e}finally{f=null,h=ie,g=!1}}var M=!1,T=null,P=-1,j=5,D=-1;function V(){return!(e.unstable_now()-D<j)}function F(){if(T!==null){var U=e.unstable_now();D=U;var K=!0;try{K=T(!0,U)}finally{K?Q():(M=!1,T=null)}}else M=!1}var Q;if(typeof C=="function")Q=function(){C(F)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,X=R.port2;R.port1.onmessage=F,Q=function(){X.postMessage(null)}}else Q=function(){w(F,0)};function H(U){T=U,M||(M=!0,Q())}function te(U,K){P=w(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,H(I))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var ie=h;h=K;try{return U()}finally{h=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=h;h=U;try{return K()}finally{h=ie}},e.unstable_scheduleCallback=function(U,K,ie){var z=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,U={id:m++,callback:K,priorityLevel:U,startTime:ie,expirationTime:Z,sortIndex:-1},ie>z?(U.sortIndex=ie,t(p,U),n(d)===null&&U===n(p)&&(q?(b(P),P=-1):q=!0,te(E,ie-z))):(U.sortIndex=Z,t(d,U),x||g||(x=!0,H(I))),U},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(U){var K=h;return function(){var ie=h;h=K;try{return U.apply(this,arguments)}finally{h=ie}}}})(yp)),yp}var zx;function BN(){return zx||(zx=1,hp.exports=DN()),hp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function zN(){if($x)return Tr;$x=1;var e=Ys(),t=BN();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function s(r,o){u(r,o),u(r+"Capture",o)}function u(r,o){for(a[r]=o,r=0;r<o.length;r++)i.add(o[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function h(r){return d.call(f,r)?!0:d.call(m,r)?!1:p.test(r)?f[r]=!0:(m[r]=!0,!1)}function g(r,o,c,y){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,o,c,y){if(o===null||typeof o>"u"||g(r,o,c,y))return!0;if(y)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function q(r,o,c,y,v,k,O){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=r,this.type=o,this.sanitizeURL=k,this.removeEmptyString=O}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];w[o]=new q(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(b,C);w[o]=new q(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function S(r,o,c,y){var v=w.hasOwnProperty(o)?w[o]:null;(v!==null?v.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,v,y)&&(c=null),y||v===null?h(o)&&(c===null?r.removeAttribute(o):r.setAttribute(o,""+c)):v.mustUseProperty?r[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,y=v.attributeNamespace,c===null?r.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,y?r.setAttributeNS(y,o,c):r.setAttribute(o,c))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),M=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),U=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,z;function Z(r){if(z===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+r}var _e=!1;function W(r,o){if(!r||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var y=pe}Reflect.construct(r,[],o)}else{try{o.call()}catch(pe){y=pe}r.call(o.prototype)}else{try{throw Error()}catch(pe){y=pe}r()}}catch(pe){if(pe&&y&&typeof pe.stack=="string"){for(var v=pe.stack.split(`
`),k=y.stack.split(`
`),O=v.length-1,G=k.length-1;1<=O&&0<=G&&v[O]!==k[G];)G--;for(;1<=O&&0<=G;O--,G--)if(v[O]!==k[G]){if(O!==1||G!==1)do if(O--,G--,0>G||v[O]!==k[G]){var J=`
`+v[O].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=O&&0<=G);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?Z(r):""}function ee(r){switch(r.tag){case 5:return Z(r.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return r=W(r.type,!1),r;case 11:return r=W(r.type.render,!1),r;case 1:return r=W(r.type,!0),r;default:return""}}function oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case M:return"Portal";case j:return"Profiler";case P:return"StrictMode";case Q:return"Suspense";case R:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case F:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case X:return o=r.displayName||null,o!==null?o:oe(r.type)||"Memo";case H:o=r._payload,r=r._init;try{return oe(r(o))}catch{}}return null}function ue(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(o);case 8:return o===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function se(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ge(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ee(r){var o=ge(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,k=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(O){y=""+O,k.call(this,O)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Re(r){r._valueTracker||(r._valueTracker=Ee(r))}function Ie(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),y="";return r&&(y=ge(r)?r.checked?"true":"false":r.value),r=y,r!==c?(o.setValue(r),!0):!1}function Ne(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Pe(r,o){var c=o.checked;return ie({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Oe(r,o){var c=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;c=se(o.value!=null?o.value:c),r._wrapperState={initialChecked:y,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function We(r,o){o=o.checked,o!=null&&S(r,"checked",o,!1)}function Be(r,o){We(r,o);var c=se(o.value),y=o.type;if(c!=null)y==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?st(r,o.type,c):o.hasOwnProperty("defaultValue")&&st(r,o.type,se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function ut(r,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,c||o===r.value||(r.value=o),r.defaultValue=o}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function st(r,o,c){(o!=="number"||Ne(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var Mt=Array.isArray;function qt(r,o,c,y){if(r=r.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=o.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&y&&(r[c].defaultSelected=!0)}else{for(c=""+se(c),o=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,y&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function St(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lt(r,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(Mt(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}r._wrapperState={initialValue:se(c)}}function Sr(r,o){var c=se(o.value),y=se(o.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),o.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),y!=null&&(r.defaultValue=""+y)}function Zt(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function $t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?$t(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var it,Rr=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,y,v){MSApp.execUnsafeLocalFunction(function(){return r(o,c,y,v)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=it.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Nt(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(r){pr.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Kr[o]=Kr[r]})});function Ht(r,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Kr.hasOwnProperty(r)&&Kr[r]?(""+o).trim():o+"px"}function Qe(r,o){r=r.style;for(var c in o)if(o.hasOwnProperty(c)){var y=c.indexOf("--")===0,v=Ht(c,o[c],y);c==="float"&&(c="cssFloat"),y?r.setProperty(c,v):r[c]=v}}var wi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(r,o){if(o){if(wi[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function ln(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function ot(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Or=null,Vr=null,fr=null;function Xn(r){if(r=ns(r)){if(typeof Or!="function")throw Error(n(280));var o=r.stateNode;o&&(o=ku(o),Or(r.stateNode,r.type,o))}}function On(r){Vr?fr?fr.push(r):fr=[r]:Vr=r}function Rt(){if(Vr){var r=Vr,o=fr;if(fr=Vr=null,Xn(r),o)for(r=0;r<o.length;r++)Xn(o[r])}}function er(r,o){return r(o)}function tr(){}var dt=!1;function Do(r,o,c){if(dt)return r(o,c);dt=!0;try{return er(r,o,c)}finally{dt=!1,(Vr!==null||fr!==null)&&(tr(),Rt())}}function yt(r,o){var c=r.stateNode;if(c===null)return null;var y=ku(c);if(y===null)return null;c=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Zi=!1;if(l)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Zi=!1}function Yr(r,o,c,y,v,k,O,G,J){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(c,pe)}catch(qe){this.onError(qe)}}var At=!1,Ut=null,Gt=!1,rr=null,_r={onError:function(r){At=!0,Ut=r}};function mr(r,o,c,y,v,k,O,G,J){At=!1,Ut=null,Yr.apply(_r,arguments)}function hr(r,o,c,y,v,k,O,G,J){if(mr.apply(this,arguments),At){if(At){var pe=Ut;At=!1,Ut=null}else throw Error(n(198));Gt||(Gt=!0,rr=pe)}}function Et(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function cn(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function yr(r){if(Et(r)!==r)throw Error(n(188))}function Ji(r){var o=r.alternate;if(!o){if(o=Et(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,y=o;;){var v=c.return;if(v===null)break;var k=v.alternate;if(k===null){if(y=v.return,y!==null){c=y;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===c)return yr(v),r;if(k===y)return yr(v),o;k=k.sibling}throw Error(n(188))}if(c.return!==y.return)c=v,y=k;else{for(var O=!1,G=v.child;G;){if(G===c){O=!0,c=v,y=k;break}if(G===y){O=!0,y=v,c=k;break}G=G.sibling}if(!O){for(G=k.child;G;){if(G===c){O=!0,c=k,y=v;break}if(G===y){O=!0,y=k,c=v;break}G=G.sibling}if(!O)throw Error(n(189))}}if(c.alternate!==y)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function eo(r){return r=Ji(r),r!==null?ar(r):null}function ar(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=ar(r);if(o!==null)return o;r=r.sibling}return null}var bi=t.unstable_scheduleCallback,qi=t.unstable_cancelCallback,to=t.unstable_shouldYield,Zn=t.unstable_requestPaint,pt=t.unstable_now,Jn=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,ei=t.unstable_UserBlockingPriority,pn=t.unstable_NormalPriority,ft=t.unstable_LowPriority,Qr=t.unstable_IdlePriority,Vn=null,Kt=null;function Bo(r){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Vn,r,void 0,(r.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:Da,ti=Math.log,fn=Math.LN2;function Da(r){return r>>>=0,r===0?32:31-(ti(r)/fn|0)|0}var ro=64,Si=4194304;function Cr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _n(r,o){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,k=r.pingedLanes,O=c&268435455;if(O!==0){var G=O&~v;G!==0?y=Cr(G):(k&=O,k!==0&&(y=Cr(k)))}else O=c&~v,O!==0?y=Cr(O):k!==0&&(y=Cr(k));if(y===0)return 0;if(o!==0&&o!==y&&(o&v)===0&&(v=y&-y,k=o&-o,v>=k||v===16&&(k&4194240)!==0))return o;if((y&4)!==0&&(y|=c&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)c=31-gr(o),v=1<<c,y|=r[c],o&=~v;return y}function zo(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(r,o){for(var c=r.suspendedLanes,y=r.pingedLanes,v=r.expirationTimes,k=r.pendingLanes;0<k;){var O=31-gr(k),G=1<<O,J=v[O];J===-1?((G&c)===0||(G&y)!==0)&&(v[O]=zo(G,o)):J<=o&&(r.expiredLanes|=G),k&=~G}}function nr(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ci(){var r=ro;return ro<<=1,(ro&4194240)===0&&(ro=64),r}function Fr(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Xr(r,o,c){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-gr(o),r[o]=c}function no(r,o){var c=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<c;){var v=31-gr(c),k=1<<v;o[v]=0,y[v]=-1,r[v]=-1,c&=~k}}function He(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var y=31-gr(c),v=1<<y;v&o|r[y]&o&&(r[y]|=o),c&=~v}}var at=0;function io(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var za,oo,$o,ze,$a,Ho=!1,ri=[],mn=null,hn=null,Ar=null,ki=new Map,ao=new Map,Lt=[],Wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(r,o){switch(r){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(o.pointerId)}}function so(r,o,c,y,v,k){return r===null||r.nativeEvent!==k?(r={blockedOn:o,domEventName:c,eventSystemFlags:y,nativeEvent:k,targetContainers:[v]},o!==null&&(o=ns(o),o!==null&&oo(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function Uo(r,o,c,y,v){switch(o){case"focusin":return mn=so(mn,r,o,c,y,v),!0;case"dragenter":return hn=so(hn,r,o,c,y,v),!0;case"mouseover":return Ar=so(Ar,r,o,c,y,v),!0;case"pointerover":var k=v.pointerId;return ki.set(k,so(ki.get(k)||null,r,o,c,y,v)),!0;case"gotpointercapture":return k=v.pointerId,ao.set(k,so(ao.get(k)||null,r,o,c,y,v)),!0}return!1}function cu(r){var o=mo(r.target);if(o!==null){var c=Et(o);if(c!==null){if(o=c.tag,o===13){if(o=cn(c),o!==null){r.blockedOn=o,$a(r.priority,function(){$o(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Go(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Wa(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var y=new c.constructor(c.type,c);me=y,c.target.dispatchEvent(y),me=null}else return o=ns(c),o!==null&&oo(o),r.blockedOn=c,!1;o.shift()}return!0}function du(r,o,c){Go(r)&&c.delete(o)}function Zr(){Ho=!1,mn!==null&&Go(mn)&&(mn=null),hn!==null&&Go(hn)&&(hn=null),Ar!==null&&Go(Ar)&&(Ar=null),ki.forEach(du),ao.forEach(du)}function uo(r,o){r.blockedOn===o&&(r.blockedOn=null,Ho||(Ho=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zr)))}function lo(r){function o(v){return uo(v,r)}if(0<ri.length){uo(ri[0],r);for(var c=1;c<ri.length;c++){var y=ri[c];y.blockedOn===r&&(y.blockedOn=null)}}for(mn!==null&&uo(mn,r),hn!==null&&uo(hn,r),Ar!==null&&uo(Ar,r),ki.forEach(o),ao.forEach(o),c=0;c<Lt.length;c++)y=Lt[c],y.blockedOn===r&&(y.blockedOn=null);for(;0<Lt.length&&(c=Lt[0],c.blockedOn===null);)cu(c),c.blockedOn===null&&Lt.shift()}var Mi=E.ReactCurrentBatchConfig,Ko=!0;function Vc(r,o,c,y){var v=at,k=Mi.transition;Mi.transition=null;try{at=1,Ha(r,o,c,y)}finally{at=v,Mi.transition=k}}function Fc(r,o,c,y){var v=at,k=Mi.transition;Mi.transition=null;try{at=4,Ha(r,o,c,y)}finally{at=v,Mi.transition=k}}function Ha(r,o,c,y){if(Ko){var v=Wa(r,o,c,y);if(v===null)nd(r,o,y,Yo,c),lu(r,y);else if(Uo(v,r,o,c,y))y.stopPropagation();else if(lu(r,y),o&4&&-1<Wo.indexOf(r)){for(;v!==null;){var k=ns(v);if(k!==null&&za(k),k=Wa(r,o,c,y),k===null&&nd(r,o,y,Yo,c),k===v)break;v=k}v!==null&&y.stopPropagation()}else nd(r,o,y,null,c)}}var Yo=null;function Wa(r,o,c,y){if(Yo=null,r=ot(y),r=mo(r),r!==null)if(o=Et(r),o===null)r=null;else if(c=o.tag,c===13){if(r=cn(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Yo=r,null}function pu(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jn()){case dn:return 1;case ei:return 4;case pn:case ft:return 16;case Qr:return 536870912;default:return 16}default:return 16}}var Fn=null,Lr=null,yn=null;function Qo(){if(yn)return yn;var r,o=Lr,c=o.length,y,v="value"in Fn?Fn.value:Fn.textContent,k=v.length;for(r=0;r<c&&o[r]===v[r];r++);var O=c-r;for(y=1;y<=O&&o[c-y]===v[k-y];y++);return yn=v.slice(r,1<y?1-y:void 0)}function ni(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function co(){return!0}function fu(){return!1}function vr(r){function o(c,y,v,k,O){this._reactName=c,this._targetInst=v,this.type=y,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(c=r[G],this[G]=c?c(k):k[G]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?co:fu,this.isPropagationStopped=fu,this}return ie(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),o}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=vr(An),po=ie({},An,{view:0,detail:0}),Ac=vr(po),Ga,Ka,ii,fo=ie({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(Ga=r.screenX-ii.screenX,Ka=r.screenY-ii.screenY):Ka=Ga=0,ii=r),Ga)},movementY:function(r){return"movementY"in r?r.movementY:Ka}}),_u=vr(fo),Lc=ie({},fo,{dataTransfer:0}),Dc=vr(Lc),mu=ie({},po,{relatedTarget:0}),Ya=vr(mu),Bc=ie({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=vr(Bc),$c=ie({},An,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hc=vr($c),Wc=ie({},An,{data:0}),hu=vr(Wc),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=gu[r])?!!o[r]:!1}function N(){return Gc}var B=ie({},po,{key:function(r){if(r.key){var o=yu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Uc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N,charCode:function(r){return r.type==="keypress"?ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$=vr(B),L=ie({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y=vr(L),re=ie({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N}),ce=vr(re),de=ie({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),ve=vr(de),be=ie({},fo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=vr(be),fe=[9,13,27,32],ye=l&&"CompositionEvent"in window,xe=null;l&&"documentMode"in document&&(xe=document.documentMode);var he=l&&"TextEvent"in window&&!xe,Ce=l&&(!ye||xe&&8<xe&&11>=xe),je=" ",Te=!1;function Ye(r,o){switch(r){case"keyup":return fe.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var et=!1;function rt(r,o){switch(r){case"compositionend":return Xe(o);case"keypress":return o.which!==32?null:(Te=!0,je);case"textInput":return r=o.data,r===je&&Te?null:r;default:return null}}function Dt(r,o){if(et)return r==="compositionend"||!ye&&Ye(r,o)?(r=Qo(),yn=Lr=Fn=null,et=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ce&&o.locale!=="ko"?null:o.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!xr[r.type]:o==="textarea"}function Ei(r,o,c,y){On(y),o=qu(o,"onChange"),0<o.length&&(c=new Ua("onChange","change",null,c,y),r.push({event:c,listeners:o}))}var _o=null,Qa=null;function VI(r){Jg(r,0)}function vu(r){var o=ta(r);if(Ie(o))return r}function FI(r,o){if(r==="change")return o}var Vg=!1;if(l){var Kc;if(l){var Yc="oninput"in document;if(!Yc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Yc=typeof Fg.oninput=="function"}Kc=Yc}else Kc=!1;Vg=Kc&&(!document.documentMode||9<document.documentMode)}function Ag(){_o&&(_o.detachEvent("onpropertychange",Lg),Qa=_o=null)}function Lg(r){if(r.propertyName==="value"&&vu(Qa)){var o=[];Ei(o,Qa,r,ot(r)),Do(VI,o)}}function AI(r,o,c){r==="focusin"?(Ag(),_o=o,Qa=c,_o.attachEvent("onpropertychange",Lg)):r==="focusout"&&Ag()}function LI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Qa)}function DI(r,o){if(r==="click")return vu(o)}function BI(r,o){if(r==="input"||r==="change")return vu(o)}function zI(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gn=typeof Object.is=="function"?Object.is:zI;function Xa(r,o){if(gn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),y=Object.keys(o);if(c.length!==y.length)return!1;for(y=0;y<c.length;y++){var v=c[y];if(!d.call(o,v)||!gn(r[v],o[v]))return!1}return!0}function Dg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bg(r,o){var c=Dg(r);r=0;for(var y;c;){if(c.nodeType===3){if(y=r+c.textContent.length,r<=o&&y>=o)return{node:c,offset:o-r};r=y}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Dg(c)}}function zg(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?zg(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function $g(){for(var r=window,o=Ne();o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Ne(r.document)}return o}function Qc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function $I(r){var o=$g(),c=r.focusedElem,y=r.selectionRange;if(o!==c&&c&&c.ownerDocument&&zg(c.ownerDocument.documentElement,c)){if(y!==null&&Qc(c)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(r,c.value.length);else if(r=(o=c.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var v=c.textContent.length,k=Math.min(y.start,v);y=y.end===void 0?k:Math.min(y.end,v),!r.extend&&k>y&&(v=y,y=k,k=v),v=Bg(c,k);var O=Bg(c,y);v&&O&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==O.node||r.focusOffset!==O.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),r.removeAllRanges(),k>y?(r.addRange(o),r.extend(O.node,O.offset)):(o.setEnd(O.node,O.offset),r.addRange(o)))}}for(o=[],r=c;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)r=o[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var HI=l&&"documentMode"in document&&11>=document.documentMode,Xo=null,Xc=null,Za=null,Zc=!1;function Hg(r,o,c){var y=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Zc||Xo==null||Xo!==Ne(y)||(y=Xo,"selectionStart"in y&&Qc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Za&&Xa(Za,y)||(Za=y,y=qu(Xc,"onSelect"),0<y.length&&(o=new Ua("onSelect","select",null,o,c),r.push({event:o,listeners:y}),o.target=Xo)))}function xu(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Zo={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},Jc={},Wg={};l&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function wu(r){if(Jc[r])return Jc[r];if(!Zo[r])return r;var o=Zo[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Wg)return Jc[r]=o[c];return r}var Ug=wu("animationend"),Gg=wu("animationiteration"),Kg=wu("animationstart"),Yg=wu("transitionend"),Qg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(r,o){Qg.set(r,o),s(o,[r])}for(var ed=0;ed<Xg.length;ed++){var td=Xg[ed],WI=td.toLowerCase(),UI=td[0].toUpperCase()+td.slice(1);Ii(WI,"on"+UI)}Ii(Ug,"onAnimationEnd"),Ii(Gg,"onAnimationIteration"),Ii(Kg,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Yg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Zg(r,o,c){var y=r.type||"unknown-event";r.currentTarget=c,hr(y,o,void 0,r),r.currentTarget=null}function Jg(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var y=r[c],v=y.event;y=y.listeners;e:{var k=void 0;if(o)for(var O=y.length-1;0<=O;O--){var G=y[O],J=G.instance,pe=G.currentTarget;if(G=G.listener,J!==k&&v.isPropagationStopped())break e;Zg(v,G,pe),k=J}else for(O=0;O<y.length;O++){if(G=y[O],J=G.instance,pe=G.currentTarget,G=G.listener,J!==k&&v.isPropagationStopped())break e;Zg(v,G,pe),k=J}}}if(Gt)throw r=rr,Gt=!1,rr=null,r}function _t(r,o){var c=o[ld];c===void 0&&(c=o[ld]=new Set);var y=r+"__bubble";c.has(y)||(ev(o,r,2,!1),c.add(y))}function rd(r,o,c){var y=0;o&&(y|=4),ev(c,r,y,o)}var bu="_reactListening"+Math.random().toString(36).slice(2);function es(r){if(!r[bu]){r[bu]=!0,i.forEach(function(c){c!=="selectionchange"&&(GI.has(c)||rd(c,!1,r),rd(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[bu]||(o[bu]=!0,rd("selectionchange",!1,o))}}function ev(r,o,c,y){switch(pu(o)){case 1:var v=Vc;break;case 4:v=Fc;break;default:v=Ha}c=v.bind(null,o,c,r),v=void 0,!Zi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),y?v!==void 0?r.addEventListener(o,c,{capture:!0,passive:v}):r.addEventListener(o,c,!0):v!==void 0?r.addEventListener(o,c,{passive:v}):r.addEventListener(o,c,!1)}function nd(r,o,c,y,v){var k=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var G=y.stateNode.containerInfo;if(G===v||G.nodeType===8&&G.parentNode===v)break;if(O===4)for(O=y.return;O!==null;){var J=O.tag;if((J===3||J===4)&&(J=O.stateNode.containerInfo,J===v||J.nodeType===8&&J.parentNode===v))return;O=O.return}for(;G!==null;){if(O=mo(G),O===null)return;if(J=O.tag,J===5||J===6){y=k=O;continue e}G=G.parentNode}}y=y.return}Do(function(){var pe=k,qe=ot(c),Se=[];e:{var we=Qg.get(r);if(we!==void 0){var Ve=Ua,Ae=r;switch(r){case"keypress":if(ni(c)===0)break e;case"keydown":case"keyup":Ve=$;break;case"focusin":Ae="focus",Ve=Ya;break;case"focusout":Ae="blur",Ve=Ya;break;case"beforeblur":case"afterblur":Ve=Ya;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=ce;break;case Ug:case Gg:case Kg:Ve=zc;break;case Yg:Ve=ve;break;case"scroll":Ve=Ac;break;case"wheel":Ve=ke;break;case"copy":case"cut":case"paste":Ve=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Y}var Le=(o&4)!==0,jt=!Le&&r==="scroll",ae=Le?we!==null?we+"Capture":null:we;Le=[];for(var ne=pe,le;ne!==null;){le=ne;var Me=le.stateNode;if(le.tag===5&&Me!==null&&(le=Me,ae!==null&&(Me=yt(ne,ae),Me!=null&&Le.push(ts(ne,Me,le)))),jt)break;ne=ne.return}0<Le.length&&(we=new Ve(we,Ae,null,c,qe),Se.push({event:we,listeners:Le}))}}if((o&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Ve=r==="mouseout"||r==="pointerout",we&&c!==me&&(Ae=c.relatedTarget||c.fromElement)&&(mo(Ae)||Ae[oi]))break e;if((Ve||we)&&(we=qe.window===qe?qe:(we=qe.ownerDocument)?we.defaultView||we.parentWindow:window,Ve?(Ae=c.relatedTarget||c.toElement,Ve=pe,Ae=Ae?mo(Ae):null,Ae!==null&&(jt=Et(Ae),Ae!==jt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ve=null,Ae=pe),Ve!==Ae)){if(Le=_u,Me="onMouseLeave",ae="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Y,Me="onPointerLeave",ae="onPointerEnter",ne="pointer"),jt=Ve==null?we:ta(Ve),le=Ae==null?we:ta(Ae),we=new Le(Me,ne+"leave",Ve,c,qe),we.target=jt,we.relatedTarget=le,Me=null,mo(qe)===pe&&(Le=new Le(ae,ne+"enter",Ae,c,qe),Le.target=le,Le.relatedTarget=jt,Me=Le),jt=Me,Ve&&Ae)t:{for(Le=Ve,ae=Ae,ne=0,le=Le;le;le=Jo(le))ne++;for(le=0,Me=ae;Me;Me=Jo(Me))le++;for(;0<ne-le;)Le=Jo(Le),ne--;for(;0<le-ne;)ae=Jo(ae),le--;for(;ne--;){if(Le===ae||ae!==null&&Le===ae.alternate)break t;Le=Jo(Le),ae=Jo(ae)}Le=null}else Le=null;Ve!==null&&tv(Se,we,Ve,Le,!1),Ae!==null&&jt!==null&&tv(Se,jt,Ae,Le,!0)}}e:{if(we=pe?ta(pe):window,Ve=we.nodeName&&we.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&we.type==="file")var De=FI;else if(Pt(we))if(Vg)De=BI;else{De=LI;var Ue=AI}else(Ve=we.nodeName)&&Ve.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(De=DI);if(De&&(De=De(r,pe))){Ei(Se,De,c,qe);break e}Ue&&Ue(r,we,pe),r==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&st(we,"number",we.value)}switch(Ue=pe?ta(pe):window,r){case"focusin":(Pt(Ue)||Ue.contentEditable==="true")&&(Xo=Ue,Xc=pe,Za=null);break;case"focusout":Za=Xc=Xo=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,Hg(Se,c,qe);break;case"selectionchange":if(HI)break;case"keydown":case"keyup":Hg(Se,c,qe)}var Ge;if(ye)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else et?Ye(r,c)&&(Ke="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ke="onCompositionStart");Ke&&(Ce&&c.locale!=="ko"&&(et||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&et&&(Ge=Qo()):(Fn=qe,Lr="value"in Fn?Fn.value:Fn.textContent,et=!0)),Ue=qu(pe,Ke),0<Ue.length&&(Ke=new hu(Ke,r,null,c,qe),Se.push({event:Ke,listeners:Ue}),Ge?Ke.data=Ge:(Ge=Xe(c),Ge!==null&&(Ke.data=Ge)))),(Ge=he?rt(r,c):Dt(r,c))&&(pe=qu(pe,"onBeforeInput"),0<pe.length&&(qe=new hu("onBeforeInput","beforeinput",null,c,qe),Se.push({event:qe,listeners:pe}),qe.data=Ge))}Jg(Se,o)})}function ts(r,o,c){return{instance:r,listener:o,currentTarget:c}}function qu(r,o){for(var c=o+"Capture",y=[];r!==null;){var v=r,k=v.stateNode;v.tag===5&&k!==null&&(v=k,k=yt(r,c),k!=null&&y.unshift(ts(r,k,v)),k=yt(r,o),k!=null&&y.push(ts(r,k,v))),r=r.return}return y}function Jo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function tv(r,o,c,y,v){for(var k=o._reactName,O=[];c!==null&&c!==y;){var G=c,J=G.alternate,pe=G.stateNode;if(J!==null&&J===y)break;G.tag===5&&pe!==null&&(G=pe,v?(J=yt(c,k),J!=null&&O.unshift(ts(c,J,G))):v||(J=yt(c,k),J!=null&&O.push(ts(c,J,G)))),c=c.return}O.length!==0&&r.push({event:o,listeners:O})}var KI=/\r\n?/g,YI=/\u0000|\uFFFD/g;function rv(r){return(typeof r=="string"?r:""+r).replace(KI,`
`).replace(YI,"")}function Su(r,o,c){if(o=rv(o),rv(r)!==o&&c)throw Error(n(425))}function Cu(){}var id=null,od=null;function ad(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sd=typeof setTimeout=="function"?setTimeout:void 0,QI=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(r){return nv.resolve(null).then(r).catch(ZI)}:sd;function ZI(r){setTimeout(function(){throw r})}function ud(r,o){var c=o,y=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(y===0){r.removeChild(v),lo(o);return}y--}else c!=="$"&&c!=="$?"&&c!=="$!"||y++;c=v}while(c);lo(o)}function Ni(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function iv(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ea,rs="__reactProps$"+ea,oi="__reactContainer$"+ea,ld="__reactEvents$"+ea,JI="__reactListeners$"+ea,eN="__reactHandles$"+ea;function mo(r){var o=r[Ln];if(o)return o;for(var c=r.parentNode;c;){if(o=c[oi]||c[Ln]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=iv(r);r!==null;){if(c=r[Ln])return c;r=iv(r)}return o}r=c,c=r.parentNode}return null}function ns(r){return r=r[Ln]||r[oi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ta(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ku(r){return r[rs]||null}var cd=[],ra=-1;function Ti(r){return{current:r}}function mt(r){0>ra||(r.current=cd[ra],cd[ra]=null,ra--)}function ct(r,o){ra++,cd[ra]=r.current,r.current=o}var Pi={},sr=Ti(Pi),kr=Ti(!1),ho=Pi;function na(r,o){var c=r.type.contextTypes;if(!c)return Pi;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var v={},k;for(k in c)v[k]=o[k];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=v),v}function Mr(r){return r=r.childContextTypes,r!=null}function Mu(){mt(kr),mt(sr)}function ov(r,o,c){if(sr.current!==Pi)throw Error(n(168));ct(sr,o),ct(kr,c)}function av(r,o,c){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return c;y=y.getChildContext();for(var v in y)if(!(v in o))throw Error(n(108,ue(r)||"Unknown",v));return ie({},c,y)}function Eu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Pi,ho=sr.current,ct(sr,r),ct(kr,kr.current),!0}function sv(r,o,c){var y=r.stateNode;if(!y)throw Error(n(169));c?(r=av(r,o,ho),y.__reactInternalMemoizedMergedChildContext=r,mt(kr),mt(sr),ct(sr,r)):mt(kr),ct(kr,c)}var ai=null,Iu=!1,dd=!1;function uv(r){ai===null?ai=[r]:ai.push(r)}function tN(r){Iu=!0,uv(r)}function ji(){if(!dd&&ai!==null){dd=!0;var r=0,o=at;try{var c=ai;for(at=1;r<c.length;r++){var y=c[r];do y=y(!0);while(y!==null)}ai=null,Iu=!1}catch(v){throw ai!==null&&(ai=ai.slice(r+1)),bi(dn,ji),v}finally{at=o,dd=!1}}return null}var ia=[],oa=0,Nu=null,Tu=0,Jr=[],en=0,yo=null,si=1,ui="";function go(r,o){ia[oa++]=Tu,ia[oa++]=Nu,Nu=r,Tu=o}function lv(r,o,c){Jr[en++]=si,Jr[en++]=ui,Jr[en++]=yo,yo=r;var y=si;r=ui;var v=32-gr(y)-1;y&=~(1<<v),c+=1;var k=32-gr(o)+v;if(30<k){var O=v-v%5;k=(y&(1<<O)-1).toString(32),y>>=O,v-=O,si=1<<32-gr(o)+v|c<<v|y,ui=k+r}else si=1<<k|c<<v|y,ui=r}function pd(r){r.return!==null&&(go(r,1),lv(r,1,0))}function fd(r){for(;r===Nu;)Nu=ia[--oa],ia[oa]=null,Tu=ia[--oa],ia[oa]=null;for(;r===yo;)yo=Jr[--en],Jr[en]=null,ui=Jr[--en],Jr[en]=null,si=Jr[--en],Jr[en]=null}var Dr=null,Br=null,gt=!1,vn=null;function cv(r,o){var c=on(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=r,o=r.deletions,o===null?(r.deletions=[c],r.flags|=16):o.push(c)}function dv(r,o){switch(r.tag){case 5:var c=r.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Dr=r,Br=Ni(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Dr=r,Br=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=yo!==null?{id:si,overflow:ui}:null,r.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=on(18,null,null,0),c.stateNode=o,c.return=r,r.child=c,Dr=r,Br=null,!0):!1;default:return!1}}function _d(r){return(r.mode&1)!==0&&(r.flags&128)===0}function md(r){if(gt){var o=Br;if(o){var c=o;if(!dv(r,o)){if(_d(r))throw Error(n(418));o=Ni(c.nextSibling);var y=Dr;o&&dv(r,o)?cv(y,c):(r.flags=r.flags&-4097|2,gt=!1,Dr=r)}}else{if(_d(r))throw Error(n(418));r.flags=r.flags&-4097|2,gt=!1,Dr=r}}}function pv(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Dr=r}function Pu(r){if(r!==Dr)return!1;if(!gt)return pv(r),gt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!ad(r.type,r.memoizedProps)),o&&(o=Br)){if(_d(r))throw fv(),Error(n(418));for(;o;)cv(r,o),o=Ni(o.nextSibling)}if(pv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(o===0){Br=Ni(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}r=r.nextSibling}Br=null}}else Br=Dr?Ni(r.stateNode.nextSibling):null;return!0}function fv(){for(var r=Br;r;)r=Ni(r.nextSibling)}function aa(){Br=Dr=null,gt=!1}function hd(r){vn===null?vn=[r]:vn.push(r)}var rN=E.ReactCurrentBatchConfig;function is(r,o,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var y=c.stateNode}if(!y)throw Error(n(147,r));var v=y,k=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===k?o.ref:(o=function(O){var G=v.refs;O===null?delete G[k]:G[k]=O},o._stringRef=k,o)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function ju(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function _v(r){var o=r._init;return o(r._payload)}function mv(r){function o(ae,ne){if(r){var le=ae.deletions;le===null?(ae.deletions=[ne],ae.flags|=16):le.push(ne)}}function c(ae,ne){if(!r)return null;for(;ne!==null;)o(ae,ne),ne=ne.sibling;return null}function y(ae,ne){for(ae=new Map;ne!==null;)ne.key!==null?ae.set(ne.key,ne):ae.set(ne.index,ne),ne=ne.sibling;return ae}function v(ae,ne){return ae=Bi(ae,ne),ae.index=0,ae.sibling=null,ae}function k(ae,ne,le){return ae.index=le,r?(le=ae.alternate,le!==null?(le=le.index,le<ne?(ae.flags|=2,ne):le):(ae.flags|=2,ne)):(ae.flags|=1048576,ne)}function O(ae){return r&&ae.alternate===null&&(ae.flags|=2),ae}function G(ae,ne,le,Me){return ne===null||ne.tag!==6?(ne=sp(le,ae.mode,Me),ne.return=ae,ne):(ne=v(ne,le),ne.return=ae,ne)}function J(ae,ne,le,Me){var De=le.type;return De===T?qe(ae,ne,le.props.children,Me,le.key):ne!==null&&(ne.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===H&&_v(De)===ne.type)?(Me=v(ne,le.props),Me.ref=is(ae,ne,le),Me.return=ae,Me):(Me=nl(le.type,le.key,le.props,null,ae.mode,Me),Me.ref=is(ae,ne,le),Me.return=ae,Me)}function pe(ae,ne,le,Me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==le.containerInfo||ne.stateNode.implementation!==le.implementation?(ne=up(le,ae.mode,Me),ne.return=ae,ne):(ne=v(ne,le.children||[]),ne.return=ae,ne)}function qe(ae,ne,le,Me,De){return ne===null||ne.tag!==7?(ne=ko(le,ae.mode,Me,De),ne.return=ae,ne):(ne=v(ne,le),ne.return=ae,ne)}function Se(ae,ne,le){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=sp(""+ne,ae.mode,le),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return le=nl(ne.type,ne.key,ne.props,null,ae.mode,le),le.ref=is(ae,null,ne),le.return=ae,le;case M:return ne=up(ne,ae.mode,le),ne.return=ae,ne;case H:var Me=ne._init;return Se(ae,Me(ne._payload),le)}if(Mt(ne)||K(ne))return ne=ko(ne,ae.mode,le,null),ne.return=ae,ne;ju(ae,ne)}return null}function we(ae,ne,le,Me){var De=ne!==null?ne.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return De!==null?null:G(ae,ne,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return le.key===De?J(ae,ne,le,Me):null;case M:return le.key===De?pe(ae,ne,le,Me):null;case H:return De=le._init,we(ae,ne,De(le._payload),Me)}if(Mt(le)||K(le))return De!==null?null:qe(ae,ne,le,Me,null);ju(ae,le)}return null}function Ve(ae,ne,le,Me,De){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ae=ae.get(le)||null,G(ne,ae,""+Me,De);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:return ae=ae.get(Me.key===null?le:Me.key)||null,J(ne,ae,Me,De);case M:return ae=ae.get(Me.key===null?le:Me.key)||null,pe(ne,ae,Me,De);case H:var Ue=Me._init;return Ve(ae,ne,le,Ue(Me._payload),De)}if(Mt(Me)||K(Me))return ae=ae.get(le)||null,qe(ne,ae,Me,De,null);ju(ne,Me)}return null}function Ae(ae,ne,le,Me){for(var De=null,Ue=null,Ge=ne,Ke=ne=0,Xt=null;Ge!==null&&Ke<le.length;Ke++){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var nt=we(ae,Ge,le[Ke],Me);if(nt===null){Ge===null&&(Ge=Xt);break}r&&Ge&&nt.alternate===null&&o(ae,Ge),ne=k(nt,ne,Ke),Ue===null?De=nt:Ue.sibling=nt,Ue=nt,Ge=Xt}if(Ke===le.length)return c(ae,Ge),gt&&go(ae,Ke),De;if(Ge===null){for(;Ke<le.length;Ke++)Ge=Se(ae,le[Ke],Me),Ge!==null&&(ne=k(Ge,ne,Ke),Ue===null?De=Ge:Ue.sibling=Ge,Ue=Ge);return gt&&go(ae,Ke),De}for(Ge=y(ae,Ge);Ke<le.length;Ke++)Xt=Ve(Ge,ae,Ke,le[Ke],Me),Xt!==null&&(r&&Xt.alternate!==null&&Ge.delete(Xt.key===null?Ke:Xt.key),ne=k(Xt,ne,Ke),Ue===null?De=Xt:Ue.sibling=Xt,Ue=Xt);return r&&Ge.forEach(function(zi){return o(ae,zi)}),gt&&go(ae,Ke),De}function Le(ae,ne,le,Me){var De=K(le);if(typeof De!="function")throw Error(n(150));if(le=De.call(le),le==null)throw Error(n(151));for(var Ue=De=null,Ge=ne,Ke=ne=0,Xt=null,nt=le.next();Ge!==null&&!nt.done;Ke++,nt=le.next()){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var zi=we(ae,Ge,nt.value,Me);if(zi===null){Ge===null&&(Ge=Xt);break}r&&Ge&&zi.alternate===null&&o(ae,Ge),ne=k(zi,ne,Ke),Ue===null?De=zi:Ue.sibling=zi,Ue=zi,Ge=Xt}if(nt.done)return c(ae,Ge),gt&&go(ae,Ke),De;if(Ge===null){for(;!nt.done;Ke++,nt=le.next())nt=Se(ae,nt.value,Me),nt!==null&&(ne=k(nt,ne,Ke),Ue===null?De=nt:Ue.sibling=nt,Ue=nt);return gt&&go(ae,Ke),De}for(Ge=y(ae,Ge);!nt.done;Ke++,nt=le.next())nt=Ve(Ge,ae,Ke,nt.value,Me),nt!==null&&(r&&nt.alternate!==null&&Ge.delete(nt.key===null?Ke:nt.key),ne=k(nt,ne,Ke),Ue===null?De=nt:Ue.sibling=nt,Ue=nt);return r&&Ge.forEach(function(ON){return o(ae,ON)}),gt&&go(ae,Ke),De}function jt(ae,ne,le,Me){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case I:e:{for(var De=le.key,Ue=ne;Ue!==null;){if(Ue.key===De){if(De=le.type,De===T){if(Ue.tag===7){c(ae,Ue.sibling),ne=v(Ue,le.props.children),ne.return=ae,ae=ne;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===H&&_v(De)===Ue.type){c(ae,Ue.sibling),ne=v(Ue,le.props),ne.ref=is(ae,Ue,le),ne.return=ae,ae=ne;break e}c(ae,Ue);break}else o(ae,Ue);Ue=Ue.sibling}le.type===T?(ne=ko(le.props.children,ae.mode,Me,le.key),ne.return=ae,ae=ne):(Me=nl(le.type,le.key,le.props,null,ae.mode,Me),Me.ref=is(ae,ne,le),Me.return=ae,ae=Me)}return O(ae);case M:e:{for(Ue=le.key;ne!==null;){if(ne.key===Ue)if(ne.tag===4&&ne.stateNode.containerInfo===le.containerInfo&&ne.stateNode.implementation===le.implementation){c(ae,ne.sibling),ne=v(ne,le.children||[]),ne.return=ae,ae=ne;break e}else{c(ae,ne);break}else o(ae,ne);ne=ne.sibling}ne=up(le,ae.mode,Me),ne.return=ae,ae=ne}return O(ae);case H:return Ue=le._init,jt(ae,ne,Ue(le._payload),Me)}if(Mt(le))return Ae(ae,ne,le,Me);if(K(le))return Le(ae,ne,le,Me);ju(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ne!==null&&ne.tag===6?(c(ae,ne.sibling),ne=v(ne,le),ne.return=ae,ae=ne):(c(ae,ne),ne=sp(le,ae.mode,Me),ne.return=ae,ae=ne),O(ae)):c(ae,ne)}return jt}var sa=mv(!0),hv=mv(!1),Ru=Ti(null),Ou=null,ua=null,yd=null;function gd(){yd=ua=Ou=null}function vd(r){var o=Ru.current;mt(Ru),r._currentValue=o}function xd(r,o,c){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===c)break;r=r.return}}function la(r,o){Ou=r,yd=ua=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Er=!0),r.firstContext=null)}function tn(r){var o=r._currentValue;if(yd!==r)if(r={context:r,memoizedValue:o,next:null},ua===null){if(Ou===null)throw Error(n(308));ua=r,Ou.dependencies={lanes:0,firstContext:r}}else ua=ua.next=r;return o}var vo=null;function wd(r){vo===null?vo=[r]:vo.push(r)}function yv(r,o,c,y){var v=o.interleaved;return v===null?(c.next=c,wd(o)):(c.next=v.next,v.next=c),o.interleaved=c,li(r,y)}function li(r,o){r.lanes|=o;var c=r.alternate;for(c!==null&&(c.lanes|=o),c=r,r=r.return;r!==null;)r.childLanes|=o,c=r.alternate,c!==null&&(c.childLanes|=o),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Ri=!1;function bd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ci(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Oi(r,o,c){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(tt&2)!==0){var v=y.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),y.pending=o,li(r,c)}return v=y.interleaved,v===null?(o.next=o,wd(y)):(o.next=v.next,v.next=o),y.interleaved=o,li(r,c)}function Vu(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,He(r,c)}}function vv(r,o){var c=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,c===y)){var v=null,k=null;if(c=c.firstBaseUpdate,c!==null){do{var O={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};k===null?v=k=O:k=k.next=O,c=c.next}while(c!==null);k===null?v=k=o:k=k.next=o}else v=k=o;c={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:y.shared,effects:y.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}function Fu(r,o,c,y){var v=r.updateQueue;Ri=!1;var k=v.firstBaseUpdate,O=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var J=G,pe=J.next;J.next=null,O===null?k=pe:O.next=pe,O=J;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,G=qe.lastBaseUpdate,G!==O&&(G===null?qe.firstBaseUpdate=pe:G.next=pe,qe.lastBaseUpdate=J))}if(k!==null){var Se=v.baseState;O=0,qe=pe=J=null,G=k;do{var we=G.lane,Ve=G.eventTime;if((y&we)===we){qe!==null&&(qe=qe.next={eventTime:Ve,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ae=r,Le=G;switch(we=o,Ve=c,Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){Se=Ae.call(Ve,Se,we);break e}Se=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,we=typeof Ae=="function"?Ae.call(Ve,Se,we):Ae,we==null)break e;Se=ie({},Se,we);break e;case 2:Ri=!0}}G.callback!==null&&G.lane!==0&&(r.flags|=64,we=v.effects,we===null?v.effects=[G]:we.push(G))}else Ve={eventTime:Ve,lane:we,tag:G.tag,payload:G.payload,callback:G.callback,next:null},qe===null?(pe=qe=Ve,J=Se):qe=qe.next=Ve,O|=we;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;we=G,G=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);if(qe===null&&(J=Se),v.baseState=J,v.firstBaseUpdate=pe,v.lastBaseUpdate=qe,o=v.shared.interleaved,o!==null){v=o;do O|=v.lane,v=v.next;while(v!==o)}else k===null&&(v.shared.lanes=0);bo|=O,r.lanes=O,r.memoizedState=Se}}function xv(r,o,c){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],v=y.callback;if(v!==null){if(y.callback=null,y=c,typeof v!="function")throw Error(n(191,v));v.call(y)}}}var os={},Dn=Ti(os),as=Ti(os),ss=Ti(os);function xo(r){if(r===os)throw Error(n(174));return r}function qd(r,o){switch(ct(ss,o),ct(as,r),ct(Dn,os),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Jt(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Jt(o,r)}mt(Dn),ct(Dn,o)}function ca(){mt(Dn),mt(as),mt(ss)}function wv(r){xo(ss.current);var o=xo(Dn.current),c=Jt(o,r.type);o!==c&&(ct(as,r),ct(Dn,c))}function Sd(r){as.current===r&&(mt(Dn),mt(as))}var Ct=Ti(0);function Au(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cd=[];function kd(){for(var r=0;r<Cd.length;r++)Cd[r]._workInProgressVersionPrimary=null;Cd.length=0}var Lu=E.ReactCurrentDispatcher,Md=E.ReactCurrentBatchConfig,wo=0,kt=null,Bt=null,Yt=null,Du=!1,us=!1,ls=0,nN=0;function ur(){throw Error(n(321))}function Ed(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!gn(r[c],o[c]))return!1;return!0}function Id(r,o,c,y,v,k){if(wo=k,kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Lu.current=r===null||r.memoizedState===null?sN:uN,r=c(y,v),us){k=0;do{if(us=!1,ls=0,25<=k)throw Error(n(301));k+=1,Yt=Bt=null,o.updateQueue=null,Lu.current=lN,r=c(y,v)}while(us)}if(Lu.current=$u,o=Bt!==null&&Bt.next!==null,wo=0,Yt=Bt=kt=null,Du=!1,o)throw Error(n(300));return r}function Nd(){var r=ls!==0;return ls=0,r}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?kt.memoizedState=Yt=r:Yt=Yt.next=r,Yt}function rn(){if(Bt===null){var r=kt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var o=Yt===null?kt.memoizedState:Yt.next;if(o!==null)Yt=o,Bt=r;else{if(r===null)throw Error(n(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Yt===null?kt.memoizedState=Yt=r:Yt=Yt.next=r}return Yt}function cs(r,o){return typeof o=="function"?o(r):o}function Td(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=Bt,v=y.baseQueue,k=c.pending;if(k!==null){if(v!==null){var O=v.next;v.next=k.next,k.next=O}y.baseQueue=v=k,c.pending=null}if(v!==null){k=v.next,y=y.baseState;var G=O=null,J=null,pe=k;do{var qe=pe.lane;if((wo&qe)===qe)J!==null&&(J=J.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),y=pe.hasEagerState?pe.eagerState:r(y,pe.action);else{var Se={lane:qe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};J===null?(G=J=Se,O=y):J=J.next=Se,kt.lanes|=qe,bo|=qe}pe=pe.next}while(pe!==null&&pe!==k);J===null?O=y:J.next=G,gn(y,o.memoizedState)||(Er=!0),o.memoizedState=y,o.baseState=O,o.baseQueue=J,c.lastRenderedState=y}if(r=c.interleaved,r!==null){v=r;do k=v.lane,kt.lanes|=k,bo|=k,v=v.next;while(v!==r)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Pd(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=c.dispatch,v=c.pending,k=o.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do k=r(k,O.action),O=O.next;while(O!==v);gn(k,o.memoizedState)||(Er=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),c.lastRenderedState=k}return[k,y]}function bv(){}function qv(r,o){var c=kt,y=rn(),v=o(),k=!gn(y.memoizedState,v);if(k&&(y.memoizedState=v,Er=!0),y=y.queue,jd(kv.bind(null,c,y,r),[r]),y.getSnapshot!==o||k||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,ds(9,Cv.bind(null,c,y,v,o),void 0,null),Qt===null)throw Error(n(349));(wo&30)!==0||Sv(c,o,v)}return v}function Sv(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=kt.updateQueue,o===null?(o={lastEffect:null,stores:null},kt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Cv(r,o,c,y){o.value=c,o.getSnapshot=y,Mv(o)&&Ev(r)}function kv(r,o,c){return c(function(){Mv(o)&&Ev(r)})}function Mv(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!gn(r,c)}catch{return!0}}function Ev(r){var o=li(r,1);o!==null&&qn(o,r,1,-1)}function Iv(r){var o=Bn();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},o.queue=r,r=r.dispatch=aN.bind(null,kt,r),[o.memoizedState,r]}function ds(r,o,c,y){return r={tag:r,create:o,destroy:c,deps:y,next:null},o=kt.updateQueue,o===null?(o={lastEffect:null,stores:null},kt.updateQueue=o,o.lastEffect=r.next=r):(c=o.lastEffect,c===null?o.lastEffect=r.next=r:(y=c.next,c.next=r,r.next=y,o.lastEffect=r)),r}function Nv(){return rn().memoizedState}function Bu(r,o,c,y){var v=Bn();kt.flags|=r,v.memoizedState=ds(1|o,c,void 0,y===void 0?null:y)}function zu(r,o,c,y){var v=rn();y=y===void 0?null:y;var k=void 0;if(Bt!==null){var O=Bt.memoizedState;if(k=O.destroy,y!==null&&Ed(y,O.deps)){v.memoizedState=ds(o,c,k,y);return}}kt.flags|=r,v.memoizedState=ds(1|o,c,k,y)}function Tv(r,o){return Bu(8390656,8,r,o)}function jd(r,o){return zu(2048,8,r,o)}function Pv(r,o){return zu(4,2,r,o)}function jv(r,o){return zu(4,4,r,o)}function Rv(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Ov(r,o,c){return c=c!=null?c.concat([r]):null,zu(4,4,Rv.bind(null,o,r),c)}function Rd(){}function Vv(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Ed(o,y[1])?y[0]:(c.memoizedState=[r,o],r)}function Fv(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Ed(o,y[1])?y[0]:(r=r(),c.memoizedState=[r,o],r)}function Av(r,o,c){return(wo&21)===0?(r.baseState&&(r.baseState=!1,Er=!0),r.memoizedState=c):(gn(c,o)||(c=Ci(),kt.lanes|=c,bo|=c,r.baseState=!0),o)}function iN(r,o){var c=at;at=c!==0&&4>c?c:4,r(!0);var y=Md.transition;Md.transition={};try{r(!1),o()}finally{at=c,Md.transition=y}}function Lv(){return rn().memoizedState}function oN(r,o,c){var y=Li(r);if(c={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null},Dv(r))Bv(o,c);else if(c=yv(r,o,c,y),c!==null){var v=br();qn(c,r,y,v),zv(c,o,y)}}function aN(r,o,c){var y=Li(r),v={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dv(r))Bv(o,v);else{var k=r.alternate;if(r.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var O=o.lastRenderedState,G=k(O,c);if(v.hasEagerState=!0,v.eagerState=G,gn(G,O)){var J=o.interleaved;J===null?(v.next=v,wd(o)):(v.next=J.next,J.next=v),o.interleaved=v;return}}catch{}finally{}c=yv(r,o,v,y),c!==null&&(v=br(),qn(c,r,y,v),zv(c,o,y))}}function Dv(r){var o=r.alternate;return r===kt||o!==null&&o===kt}function Bv(r,o){us=Du=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function zv(r,o,c){if((c&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,He(r,c)}}var $u={readContext:tn,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},sN={readContext:tn,useCallback:function(r,o){return Bn().memoizedState=[r,o===void 0?null:o],r},useContext:tn,useEffect:Tv,useImperativeHandle:function(r,o,c){return c=c!=null?c.concat([r]):null,Bu(4194308,4,Rv.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Bu(4194308,4,r,o)},useInsertionEffect:function(r,o){return Bu(4,2,r,o)},useMemo:function(r,o){var c=Bn();return o=o===void 0?null:o,r=r(),c.memoizedState=[r,o],r},useReducer:function(r,o,c){var y=Bn();return o=c!==void 0?c(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=oN.bind(null,kt,r),[y.memoizedState,r]},useRef:function(r){var o=Bn();return r={current:r},o.memoizedState=r},useState:Iv,useDebugValue:Rd,useDeferredValue:function(r){return Bn().memoizedState=r},useTransition:function(){var r=Iv(!1),o=r[0];return r=iN.bind(null,r[1]),Bn().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,c){var y=kt,v=Bn();if(gt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Qt===null)throw Error(n(349));(wo&30)!==0||Sv(y,o,c)}v.memoizedState=c;var k={value:c,getSnapshot:o};return v.queue=k,Tv(kv.bind(null,y,k,r),[r]),y.flags|=2048,ds(9,Cv.bind(null,y,k,c,o),void 0,null),c},useId:function(){var r=Bn(),o=Qt.identifierPrefix;if(gt){var c=ui,y=si;c=(y&~(1<<32-gr(y)-1)).toString(32)+c,o=":"+o+"R"+c,c=ls++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=nN++,o=":"+o+"r"+c.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},uN={readContext:tn,useCallback:Vv,useContext:tn,useEffect:jd,useImperativeHandle:Ov,useInsertionEffect:Pv,useLayoutEffect:jv,useMemo:Fv,useReducer:Td,useRef:Nv,useState:function(){return Td(cs)},useDebugValue:Rd,useDeferredValue:function(r){var o=rn();return Av(o,Bt.memoizedState,r)},useTransition:function(){var r=Td(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1},lN={readContext:tn,useCallback:Vv,useContext:tn,useEffect:jd,useImperativeHandle:Ov,useInsertionEffect:Pv,useLayoutEffect:jv,useMemo:Fv,useReducer:Pd,useRef:Nv,useState:function(){return Pd(cs)},useDebugValue:Rd,useDeferredValue:function(r){var o=rn();return Bt===null?o.memoizedState=r:Av(o,Bt.memoizedState,r)},useTransition:function(){var r=Pd(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1};function xn(r,o){if(r&&r.defaultProps){o=ie({},o),r=r.defaultProps;for(var c in r)o[c]===void 0&&(o[c]=r[c]);return o}return o}function Od(r,o,c,y){o=r.memoizedState,c=c(y,o),c=c==null?o:ie({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Hu={isMounted:function(r){return(r=r._reactInternals)?Et(r)===r:!1},enqueueSetState:function(r,o,c){r=r._reactInternals;var y=br(),v=Li(r),k=ci(y,v);k.payload=o,c!=null&&(k.callback=c),o=Oi(r,k,v),o!==null&&(qn(o,r,v,y),Vu(o,r,v))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var y=br(),v=Li(r),k=ci(y,v);k.tag=1,k.payload=o,c!=null&&(k.callback=c),o=Oi(r,k,v),o!==null&&(qn(o,r,v,y),Vu(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=br(),y=Li(r),v=ci(c,y);v.tag=2,o!=null&&(v.callback=o),o=Oi(r,v,y),o!==null&&(qn(o,r,y,c),Vu(o,r,y))}};function $v(r,o,c,y,v,k,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,k,O):o.prototype&&o.prototype.isPureReactComponent?!Xa(c,y)||!Xa(v,k):!0}function Hv(r,o,c){var y=!1,v=Pi,k=o.contextType;return typeof k=="object"&&k!==null?k=tn(k):(v=Mr(o)?ho:sr.current,y=o.contextTypes,k=(y=y!=null)?na(r,v):Pi),o=new o(c,k),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Hu,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=k),o}function Wv(r,o,c,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,y),o.state!==r&&Hu.enqueueReplaceState(o,o.state,null)}function Vd(r,o,c,y){var v=r.stateNode;v.props=c,v.state=r.memoizedState,v.refs={},bd(r);var k=o.contextType;typeof k=="object"&&k!==null?v.context=tn(k):(k=Mr(o)?ho:sr.current,v.context=na(r,k)),v.state=r.memoizedState,k=o.getDerivedStateFromProps,typeof k=="function"&&(Od(r,o,k,c),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Hu.enqueueReplaceState(v,v.state,null),Fu(r,c,v,y),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function da(r,o){try{var c="",y=o;do c+=ee(y),y=y.return;while(y);var v=c}catch(k){v=`
Error generating stack: `+k.message+`
`+k.stack}return{value:r,source:o,stack:v,digest:null}}function Fd(r,o,c){return{value:r,source:null,stack:c??null,digest:o??null}}function Ad(r,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function Uv(r,o,c){c=ci(-1,c),c.tag=3,c.payload={element:null};var y=o.value;return c.callback=function(){Xu||(Xu=!0,Jd=y),Ad(r,o)},c}function Gv(r,o,c){c=ci(-1,c),c.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var v=o.value;c.payload=function(){return y(v)},c.callback=function(){Ad(r,o)}}var k=r.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(c.callback=function(){Ad(r,o),typeof y!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var O=o.stack;this.componentDidCatch(o.value,{componentStack:O!==null?O:""})}),c}function Kv(r,o,c){var y=r.pingCache;if(y===null){y=r.pingCache=new cN;var v=new Set;y.set(o,v)}else v=y.get(o),v===void 0&&(v=new Set,y.set(o,v));v.has(c)||(v.add(c),r=SN.bind(null,r,o,c),o.then(r,r))}function Yv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Qv(r,o,c,y,v){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=ci(-1,1),o.tag=2,Oi(c,o,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var dN=E.ReactCurrentOwner,Er=!1;function wr(r,o,c,y){o.child=r===null?hv(o,null,c,y):sa(o,r.child,c,y)}function Xv(r,o,c,y,v){c=c.render;var k=o.ref;return la(o,v),y=Id(r,o,c,y,k,v),c=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(gt&&c&&pd(o),o.flags|=1,wr(r,o,y,v),o.child)}function Zv(r,o,c,y,v){if(r===null){var k=c.type;return typeof k=="function"&&!ap(k)&&k.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=k,Jv(r,o,k,y,v)):(r=nl(c.type,null,y,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(k=r.child,(r.lanes&v)===0){var O=k.memoizedProps;if(c=c.compare,c=c!==null?c:Xa,c(O,y)&&r.ref===o.ref)return di(r,o,v)}return o.flags|=1,r=Bi(k,y),r.ref=o.ref,r.return=o,o.child=r}function Jv(r,o,c,y,v){if(r!==null){var k=r.memoizedProps;if(Xa(k,y)&&r.ref===o.ref)if(Er=!1,o.pendingProps=y=k,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Er=!0);else return o.lanes=r.lanes,di(r,o,v)}return Ld(r,o,c,y,v)}function ex(r,o,c){var y=o.pendingProps,v=y.children,k=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(fa,zr),zr|=c;else{if((c&1073741824)===0)return r=k!==null?k.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,ct(fa,zr),zr|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=k!==null?k.baseLanes:c,ct(fa,zr),zr|=y}else k!==null?(y=k.baseLanes|c,o.memoizedState=null):y=c,ct(fa,zr),zr|=y;return wr(r,o,v,c),o.child}function tx(r,o){var c=o.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Ld(r,o,c,y,v){var k=Mr(c)?ho:sr.current;return k=na(o,k),la(o,v),c=Id(r,o,c,y,k,v),y=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(gt&&y&&pd(o),o.flags|=1,wr(r,o,c,v),o.child)}function rx(r,o,c,y,v){if(Mr(c)){var k=!0;Eu(o)}else k=!1;if(la(o,v),o.stateNode===null)Uu(r,o),Hv(o,c,y),Vd(o,c,y,v),y=!0;else if(r===null){var O=o.stateNode,G=o.memoizedProps;O.props=G;var J=O.context,pe=c.contextType;typeof pe=="object"&&pe!==null?pe=tn(pe):(pe=Mr(c)?ho:sr.current,pe=na(o,pe));var qe=c.getDerivedStateFromProps,Se=typeof qe=="function"||typeof O.getSnapshotBeforeUpdate=="function";Se||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==y||J!==pe)&&Wv(o,O,y,pe),Ri=!1;var we=o.memoizedState;O.state=we,Fu(o,y,O,v),J=o.memoizedState,G!==y||we!==J||kr.current||Ri?(typeof qe=="function"&&(Od(o,c,qe,y),J=o.memoizedState),(G=Ri||$v(o,c,G,y,we,J,pe))?(Se||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=J),O.props=y,O.state=J,O.context=pe,y=G):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{O=o.stateNode,gv(r,o),G=o.memoizedProps,pe=o.type===o.elementType?G:xn(o.type,G),O.props=pe,Se=o.pendingProps,we=O.context,J=c.contextType,typeof J=="object"&&J!==null?J=tn(J):(J=Mr(c)?ho:sr.current,J=na(o,J));var Ve=c.getDerivedStateFromProps;(qe=typeof Ve=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==Se||we!==J)&&Wv(o,O,y,J),Ri=!1,we=o.memoizedState,O.state=we,Fu(o,y,O,v);var Ae=o.memoizedState;G!==Se||we!==Ae||kr.current||Ri?(typeof Ve=="function"&&(Od(o,c,Ve,y),Ae=o.memoizedState),(pe=Ri||$v(o,c,pe,y,we,Ae,J)||!1)?(qe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Ae,J),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Ae,J)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ae),O.props=y,O.state=Ae,O.context=J,y=pe):(typeof O.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),y=!1)}return Dd(r,o,c,y,k,v)}function Dd(r,o,c,y,v,k){tx(r,o);var O=(o.flags&128)!==0;if(!y&&!O)return v&&sv(o,c,!1),di(r,o,k);y=o.stateNode,dN.current=o;var G=O&&typeof c.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&O?(o.child=sa(o,r.child,null,k),o.child=sa(o,null,G,k)):wr(r,o,G,k),o.memoizedState=y.state,v&&sv(o,c,!0),o.child}function nx(r){var o=r.stateNode;o.pendingContext?ov(r,o.pendingContext,o.pendingContext!==o.context):o.context&&ov(r,o.context,!1),qd(r,o.containerInfo)}function ix(r,o,c,y,v){return aa(),hd(v),o.flags|=256,wr(r,o,c,y),o.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function zd(r){return{baseLanes:r,cachePool:null,transitions:null}}function ox(r,o,c){var y=o.pendingProps,v=Ct.current,k=!1,O=(o.flags&128)!==0,G;if((G=O)||(G=r!==null&&r.memoizedState===null?!1:(v&2)!==0),G?(k=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),ct(Ct,v&1),r===null)return md(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(O=y.children,r=y.fallback,k?(y=o.mode,k=o.child,O={mode:"hidden",children:O},(y&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=O):k=il(O,y,0,null),r=ko(r,y,c,null),k.return=o,r.return=o,k.sibling=r,o.child=k,o.child.memoizedState=zd(c),o.memoizedState=Bd,r):$d(o,O));if(v=r.memoizedState,v!==null&&(G=v.dehydrated,G!==null))return pN(r,o,O,y,G,v,c);if(k){k=y.fallback,O=o.mode,v=r.child,G=v.sibling;var J={mode:"hidden",children:y.children};return(O&1)===0&&o.child!==v?(y=o.child,y.childLanes=0,y.pendingProps=J,o.deletions=null):(y=Bi(v,J),y.subtreeFlags=v.subtreeFlags&14680064),G!==null?k=Bi(G,k):(k=ko(k,O,c,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,O=r.child.memoizedState,O=O===null?zd(c):{baseLanes:O.baseLanes|c,cachePool:null,transitions:O.transitions},k.memoizedState=O,k.childLanes=r.childLanes&~c,o.memoizedState=Bd,y}return k=r.child,r=k.sibling,y=Bi(k,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=c),y.return=o,y.sibling=null,r!==null&&(c=o.deletions,c===null?(o.deletions=[r],o.flags|=16):c.push(r)),o.child=y,o.memoizedState=null,y}function $d(r,o){return o=il({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Wu(r,o,c,y){return y!==null&&hd(y),sa(o,r.child,null,c),r=$d(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function pN(r,o,c,y,v,k,O){if(c)return o.flags&256?(o.flags&=-257,y=Fd(Error(n(422))),Wu(r,o,O,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(k=y.fallback,v=o.mode,y=il({mode:"visible",children:y.children},v,0,null),k=ko(k,v,O,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,(o.mode&1)!==0&&sa(o,r.child,null,O),o.child.memoizedState=zd(O),o.memoizedState=Bd,k);if((o.mode&1)===0)return Wu(r,o,O,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var G=y.dgst;return y=G,k=Error(n(419)),y=Fd(k,y,void 0),Wu(r,o,O,y)}if(G=(O&r.childLanes)!==0,Er||G){if(y=Qt,y!==null){switch(O&-O){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|O))!==0?0:v,v!==0&&v!==k.retryLane&&(k.retryLane=v,li(r,v),qn(y,r,v,-1))}return op(),y=Fd(Error(n(421))),Wu(r,o,O,y)}return v.data==="$?"?(o.flags|=128,o.child=r.child,o=CN.bind(null,r),v._reactRetry=o,null):(r=k.treeContext,Br=Ni(v.nextSibling),Dr=o,gt=!0,vn=null,r!==null&&(Jr[en++]=si,Jr[en++]=ui,Jr[en++]=yo,si=r.id,ui=r.overflow,yo=o),o=$d(o,y.children),o.flags|=4096,o)}function ax(r,o,c){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),xd(r.return,o,c)}function Hd(r,o,c,y,v){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:c,tailMode:v}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=c,k.tailMode=v)}function sx(r,o,c){var y=o.pendingProps,v=y.revealOrder,k=y.tail;if(wr(r,o,y.children,c),y=Ct.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ax(r,c,o);else if(r.tag===19)ax(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(ct(Ct,y),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)r=c.alternate,r!==null&&Au(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Hd(o,!1,v,c,k);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Au(r)===null){o.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Hd(o,!0,c,null,k);break;case"together":Hd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Uu(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function di(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),bo|=o.lanes,(c&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Bi(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Bi(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function fN(r,o,c){switch(o.tag){case 3:nx(o),aa();break;case 5:wv(o);break;case 1:Mr(o.type)&&Eu(o);break;case 4:qd(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,v=o.memoizedProps.value;ct(Ru,y._currentValue),y._currentValue=v;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(ct(Ct,Ct.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?ox(r,o,c):(ct(Ct,Ct.current&1),r=di(r,o,c),r!==null?r.sibling:null);ct(Ct,Ct.current&1);break;case 19:if(y=(c&o.childLanes)!==0,(r.flags&128)!==0){if(y)return sx(r,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ct(Ct,Ct.current),y)break;return null;case 22:case 23:return o.lanes=0,ex(r,o,c)}return di(r,o,c)}var ux,Wd,lx,cx;ux=function(r,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Wd=function(){},lx=function(r,o,c,y){var v=r.memoizedProps;if(v!==y){r=o.stateNode,xo(Dn.current);var k=null;switch(c){case"input":v=Pe(r,v),y=Pe(r,y),k=[];break;case"select":v=ie({},v,{value:void 0}),y=ie({},y,{value:void 0}),k=[];break;case"textarea":v=St(r,v),y=St(r,y),k=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Cu)}Tt(c,y);var O;c=null;for(pe in v)if(!y.hasOwnProperty(pe)&&v.hasOwnProperty(pe)&&v[pe]!=null)if(pe==="style"){var G=v[pe];for(O in G)G.hasOwnProperty(O)&&(c||(c={}),c[O]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(a.hasOwnProperty(pe)?k||(k=[]):(k=k||[]).push(pe,null));for(pe in y){var J=y[pe];if(G=v!=null?v[pe]:void 0,y.hasOwnProperty(pe)&&J!==G&&(J!=null||G!=null))if(pe==="style")if(G){for(O in G)!G.hasOwnProperty(O)||J&&J.hasOwnProperty(O)||(c||(c={}),c[O]="");for(O in J)J.hasOwnProperty(O)&&G[O]!==J[O]&&(c||(c={}),c[O]=J[O])}else c||(k||(k=[]),k.push(pe,c)),c=J;else pe==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,G=G?G.__html:void 0,J!=null&&G!==J&&(k=k||[]).push(pe,J)):pe==="children"?typeof J!="string"&&typeof J!="number"||(k=k||[]).push(pe,""+J):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(a.hasOwnProperty(pe)?(J!=null&&pe==="onScroll"&&_t("scroll",r),k||G===J||(k=[])):(k=k||[]).push(pe,J))}c&&(k=k||[]).push("style",c);var pe=k;(o.updateQueue=pe)&&(o.flags|=4)}},cx=function(r,o,c,y){c!==y&&(o.flags|=4)};function ps(r,o){if(!gt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var y=null;c!==null;)c.alternate!==null&&(y=c),c=c.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function lr(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,y=0;if(o)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=y,r.childLanes=c,o}function _N(r,o,c){var y=o.pendingProps;switch(fd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(o),null;case 1:return Mr(o.type)&&Mu(),lr(o),null;case 3:return y=o.stateNode,ca(),mt(kr),mt(sr),kd(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(Pu(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vn!==null&&(rp(vn),vn=null))),Wd(r,o),lr(o),null;case 5:Sd(o);var v=xo(ss.current);if(c=o.type,r!==null&&o.stateNode!=null)lx(r,o,c,y,v),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(n(166));return lr(o),null}if(r=xo(Dn.current),Pu(o)){y=o.stateNode,c=o.type;var k=o.memoizedProps;switch(y[Ln]=o,y[rs]=k,r=(o.mode&1)!==0,c){case"dialog":_t("cancel",y),_t("close",y);break;case"iframe":case"object":case"embed":_t("load",y);break;case"video":case"audio":for(v=0;v<Ja.length;v++)_t(Ja[v],y);break;case"source":_t("error",y);break;case"img":case"image":case"link":_t("error",y),_t("load",y);break;case"details":_t("toggle",y);break;case"input":Oe(y,k),_t("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!k.multiple},_t("invalid",y);break;case"textarea":lt(y,k),_t("invalid",y)}Tt(c,k),v=null;for(var O in k)if(k.hasOwnProperty(O)){var G=k[O];O==="children"?typeof G=="string"?y.textContent!==G&&(k.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",G]):typeof G=="number"&&y.textContent!==""+G&&(k.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",""+G]):a.hasOwnProperty(O)&&G!=null&&O==="onScroll"&&_t("scroll",y)}switch(c){case"input":Re(y),ut(y,k,!0);break;case"textarea":Re(y),Zt(y);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(y.onclick=Cu)}y=v,o.updateQueue=y,y!==null&&(o.flags|=4)}else{O=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$t(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=O.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=O.createElement(c,{is:y.is}):(r=O.createElement(c),c==="select"&&(O=r,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):r=O.createElementNS(r,c),r[Ln]=o,r[rs]=y,ux(r,o,!1,!1),o.stateNode=r;e:{switch(O=ln(c,y),c){case"dialog":_t("cancel",r),_t("close",r),v=y;break;case"iframe":case"object":case"embed":_t("load",r),v=y;break;case"video":case"audio":for(v=0;v<Ja.length;v++)_t(Ja[v],r);v=y;break;case"source":_t("error",r),v=y;break;case"img":case"image":case"link":_t("error",r),_t("load",r),v=y;break;case"details":_t("toggle",r),v=y;break;case"input":Oe(r,y),v=Pe(r,y),_t("invalid",r);break;case"option":v=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},v=ie({},y,{value:void 0}),_t("invalid",r);break;case"textarea":lt(r,y),v=St(r,y),_t("invalid",r);break;default:v=y}Tt(c,v),G=v;for(k in G)if(G.hasOwnProperty(k)){var J=G[k];k==="style"?Qe(r,J):k==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Rr(r,J)):k==="children"?typeof J=="string"?(c!=="textarea"||J!=="")&&Nt(r,J):typeof J=="number"&&Nt(r,""+J):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(a.hasOwnProperty(k)?J!=null&&k==="onScroll"&&_t("scroll",r):J!=null&&S(r,k,J,O))}switch(c){case"input":Re(r),ut(r,y,!1);break;case"textarea":Re(r),Zt(r);break;case"option":y.value!=null&&r.setAttribute("value",""+se(y.value));break;case"select":r.multiple=!!y.multiple,k=y.value,k!=null?qt(r,!!y.multiple,k,!1):y.defaultValue!=null&&qt(r,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Cu)}switch(c){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return lr(o),null;case 6:if(r&&o.stateNode!=null)cx(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(c=xo(ss.current),xo(Dn.current),Pu(o)){if(y=o.stateNode,c=o.memoizedProps,y[Ln]=o,(k=y.nodeValue!==c)&&(r=Dr,r!==null))switch(r.tag){case 3:Su(y.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(y.nodeValue,c,(r.mode&1)!==0)}k&&(o.flags|=4)}else y=(c.nodeType===9?c:c.ownerDocument).createTextNode(y),y[Ln]=o,o.stateNode=y}return lr(o),null;case 13:if(mt(Ct),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(gt&&Br!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fv(),aa(),o.flags|=98560,k=!1;else if(k=Pu(o),y!==null&&y.dehydrated!==null){if(r===null){if(!k)throw Error(n(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[Ln]=o}else aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lr(o),k=!1}else vn!==null&&(rp(vn),vn=null),k=!0;if(!k)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(Ct.current&1)!==0?zt===0&&(zt=3):op())),o.updateQueue!==null&&(o.flags|=4),lr(o),null);case 4:return ca(),Wd(r,o),r===null&&es(o.stateNode.containerInfo),lr(o),null;case 10:return vd(o.type._context),lr(o),null;case 17:return Mr(o.type)&&Mu(),lr(o),null;case 19:if(mt(Ct),k=o.memoizedState,k===null)return lr(o),null;if(y=(o.flags&128)!==0,O=k.rendering,O===null)if(y)ps(k,!1);else{if(zt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(O=Au(r),O!==null){for(o.flags|=128,ps(k,!1),y=O.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=c,c=o.child;c!==null;)k=c,r=y,k.flags&=14680066,O=k.alternate,O===null?(k.childLanes=0,k.lanes=r,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=O.childLanes,k.lanes=O.lanes,k.child=O.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=O.memoizedProps,k.memoizedState=O.memoizedState,k.updateQueue=O.updateQueue,k.type=O.type,r=O.dependencies,k.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return ct(Ct,Ct.current&1|2),o.child}r=r.sibling}k.tail!==null&&pt()>_a&&(o.flags|=128,y=!0,ps(k,!1),o.lanes=4194304)}else{if(!y)if(r=Au(O),r!==null){if(o.flags|=128,y=!0,c=r.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),ps(k,!0),k.tail===null&&k.tailMode==="hidden"&&!O.alternate&&!gt)return lr(o),null}else 2*pt()-k.renderingStartTime>_a&&c!==1073741824&&(o.flags|=128,y=!0,ps(k,!1),o.lanes=4194304);k.isBackwards?(O.sibling=o.child,o.child=O):(c=k.last,c!==null?c.sibling=O:o.child=O,k.last=O)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=pt(),o.sibling=null,c=Ct.current,ct(Ct,y?c&1|2:c&1),o):(lr(o),null);case 22:case 23:return ip(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(zr&1073741824)!==0&&(lr(o),o.subtreeFlags&6&&(o.flags|=8192)):lr(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function mN(r,o){switch(fd(o),o.tag){case 1:return Mr(o.type)&&Mu(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ca(),mt(kr),mt(sr),kd(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Sd(o),null;case 13:if(mt(Ct),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));aa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return mt(Ct),null;case 4:return ca(),null;case 10:return vd(o.type._context),null;case 22:case 23:return ip(),null;case 24:return null;default:return null}}var Gu=!1,cr=!1,hN=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function pa(r,o){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(y){It(r,o,y)}else c.current=null}function Ud(r,o,c){try{c()}catch(y){It(r,o,y)}}var dx=!1;function yN(r,o){if(id=Ko,r=$g(),Qc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var y=c.getSelection&&c.getSelection();if(y&&y.rangeCount!==0){c=y.anchorNode;var v=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{c.nodeType,k.nodeType}catch{c=null;break e}var O=0,G=-1,J=-1,pe=0,qe=0,Se=r,we=null;t:for(;;){for(var Ve;Se!==c||v!==0&&Se.nodeType!==3||(G=O+v),Se!==k||y!==0&&Se.nodeType!==3||(J=O+y),Se.nodeType===3&&(O+=Se.nodeValue.length),(Ve=Se.firstChild)!==null;)we=Se,Se=Ve;for(;;){if(Se===r)break t;if(we===c&&++pe===v&&(G=O),we===k&&++qe===y&&(J=O),(Ve=Se.nextSibling)!==null)break;Se=we,we=Se.parentNode}Se=Ve}c=G===-1||J===-1?null:{start:G,end:J}}else c=null}c=c||{start:0,end:0}}else c=null;for(od={focusedElem:r,selectionRange:c},Ko=!1,Fe=o;Fe!==null;)if(o=Fe,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Fe=r;else for(;Fe!==null;){o=Fe;try{var Ae=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Le=Ae.memoizedProps,jt=Ae.memoizedState,ae=o.stateNode,ne=ae.getSnapshotBeforeUpdate(o.elementType===o.type?Le:xn(o.type,Le),jt);ae.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var le=o.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){It(o,o.return,Me)}if(r=o.sibling,r!==null){r.return=o.return,Fe=r;break}Fe=o.return}return Ae=dx,dx=!1,Ae}function fs(r,o,c){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&r)===r){var k=v.destroy;v.destroy=void 0,k!==void 0&&Ud(o,c,k)}v=v.next}while(v!==y)}}function Ku(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&r)===r){var y=c.create;c.destroy=y()}c=c.next}while(c!==o)}}function Gd(r){var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof o=="function"?o(r):o.current=r}}function px(r){var o=r.alternate;o!==null&&(r.alternate=null,px(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Ln],delete o[rs],delete o[ld],delete o[JI],delete o[eN])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function fx(r){return r.tag===5||r.tag===3||r.tag===4}function _x(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||fx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Kd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(r,o):c.insertBefore(r,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(r,c)):(o=c,o.appendChild(r)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Cu));else if(y!==4&&(r=r.child,r!==null))for(Kd(r,o,c),r=r.sibling;r!==null;)Kd(r,o,c),r=r.sibling}function Yd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(Yd(r,o,c),r=r.sibling;r!==null;)Yd(r,o,c),r=r.sibling}var ir=null,wn=!1;function Vi(r,o,c){for(c=c.child;c!==null;)mx(r,o,c),c=c.sibling}function mx(r,o,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Vn,c)}catch{}switch(c.tag){case 5:cr||pa(c,o);case 6:var y=ir,v=wn;ir=null,Vi(r,o,c),ir=y,wn=v,ir!==null&&(wn?(r=ir,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):ir.removeChild(c.stateNode));break;case 18:ir!==null&&(wn?(r=ir,c=c.stateNode,r.nodeType===8?ud(r.parentNode,c):r.nodeType===1&&ud(r,c),lo(r)):ud(ir,c.stateNode));break;case 4:y=ir,v=wn,ir=c.stateNode.containerInfo,wn=!0,Vi(r,o,c),ir=y,wn=v;break;case 0:case 11:case 14:case 15:if(!cr&&(y=c.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var k=v,O=k.destroy;k=k.tag,O!==void 0&&((k&2)!==0||(k&4)!==0)&&Ud(c,o,O),v=v.next}while(v!==y)}Vi(r,o,c);break;case 1:if(!cr&&(pa(c,o),y=c.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=c.memoizedProps,y.state=c.memoizedState,y.componentWillUnmount()}catch(G){It(c,o,G)}Vi(r,o,c);break;case 21:Vi(r,o,c);break;case 22:c.mode&1?(cr=(y=cr)||c.memoizedState!==null,Vi(r,o,c),cr=y):Vi(r,o,c);break;default:Vi(r,o,c)}}function hx(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new hN),o.forEach(function(y){var v=kN.bind(null,r,y);c.has(y)||(c.add(y),y.then(v,v))})}}function bn(r,o){var c=o.deletions;if(c!==null)for(var y=0;y<c.length;y++){var v=c[y];try{var k=r,O=o,G=O;e:for(;G!==null;){switch(G.tag){case 5:ir=G.stateNode,wn=!1;break e;case 3:ir=G.stateNode.containerInfo,wn=!0;break e;case 4:ir=G.stateNode.containerInfo,wn=!0;break e}G=G.return}if(ir===null)throw Error(n(160));mx(k,O,v),ir=null,wn=!1;var J=v.alternate;J!==null&&(J.return=null),v.return=null}catch(pe){It(v,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)yx(o,r),o=o.sibling}function yx(r,o){var c=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bn(o,r),zn(r),y&4){try{fs(3,r,r.return),Ku(3,r)}catch(Le){It(r,r.return,Le)}try{fs(5,r,r.return)}catch(Le){It(r,r.return,Le)}}break;case 1:bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return);break;case 5:if(bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return),r.flags&32){var v=r.stateNode;try{Nt(v,"")}catch(Le){It(r,r.return,Le)}}if(y&4&&(v=r.stateNode,v!=null)){var k=r.memoizedProps,O=c!==null?c.memoizedProps:k,G=r.type,J=r.updateQueue;if(r.updateQueue=null,J!==null)try{G==="input"&&k.type==="radio"&&k.name!=null&&We(v,k),ln(G,O);var pe=ln(G,k);for(O=0;O<J.length;O+=2){var qe=J[O],Se=J[O+1];qe==="style"?Qe(v,Se):qe==="dangerouslySetInnerHTML"?Rr(v,Se):qe==="children"?Nt(v,Se):S(v,qe,Se,pe)}switch(G){case"input":Be(v,k);break;case"textarea":Sr(v,k);break;case"select":var we=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!k.multiple;var Ve=k.value;Ve!=null?qt(v,!!k.multiple,Ve,!1):we!==!!k.multiple&&(k.defaultValue!=null?qt(v,!!k.multiple,k.defaultValue,!0):qt(v,!!k.multiple,k.multiple?[]:"",!1))}v[rs]=k}catch(Le){It(r,r.return,Le)}}break;case 6:if(bn(o,r),zn(r),y&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,k=r.memoizedProps;try{v.nodeValue=k}catch(Le){It(r,r.return,Le)}}break;case 3:if(bn(o,r),zn(r),y&4&&c!==null&&c.memoizedState.isDehydrated)try{lo(o.containerInfo)}catch(Le){It(r,r.return,Le)}break;case 4:bn(o,r),zn(r);break;case 13:bn(o,r),zn(r),v=r.child,v.flags&8192&&(k=v.memoizedState!==null,v.stateNode.isHidden=k,!k||v.alternate!==null&&v.alternate.memoizedState!==null||(Zd=pt())),y&4&&hx(r);break;case 22:if(qe=c!==null&&c.memoizedState!==null,r.mode&1?(cr=(pe=cr)||qe,bn(o,r),cr=pe):bn(o,r),zn(r),y&8192){if(pe=r.memoizedState!==null,(r.stateNode.isHidden=pe)&&!qe&&(r.mode&1)!==0)for(Fe=r,qe=r.child;qe!==null;){for(Se=Fe=qe;Fe!==null;){switch(we=Fe,Ve=we.child,we.tag){case 0:case 11:case 14:case 15:fs(4,we,we.return);break;case 1:pa(we,we.return);var Ae=we.stateNode;if(typeof Ae.componentWillUnmount=="function"){y=we,c=we.return;try{o=y,Ae.props=o.memoizedProps,Ae.state=o.memoizedState,Ae.componentWillUnmount()}catch(Le){It(y,c,Le)}}break;case 5:pa(we,we.return);break;case 22:if(we.memoizedState!==null){xx(Se);continue}}Ve!==null?(Ve.return=we,Fe=Ve):xx(Se)}qe=qe.sibling}e:for(qe=null,Se=r;;){if(Se.tag===5){if(qe===null){qe=Se;try{v=Se.stateNode,pe?(k=v.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(G=Se.stateNode,J=Se.memoizedProps.style,O=J!=null&&J.hasOwnProperty("display")?J.display:null,G.style.display=Ht("display",O))}catch(Le){It(r,r.return,Le)}}}else if(Se.tag===6){if(qe===null)try{Se.stateNode.nodeValue=pe?"":Se.memoizedProps}catch(Le){It(r,r.return,Le)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===r)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===r)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===r)break e;qe===Se&&(qe=null),Se=Se.return}qe===Se&&(qe=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:bn(o,r),zn(r),y&4&&hx(r);break;case 21:break;default:bn(o,r),zn(r)}}function zn(r){var o=r.flags;if(o&2){try{e:{for(var c=r.return;c!==null;){if(fx(c)){var y=c;break e}c=c.return}throw Error(n(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&(Nt(v,""),y.flags&=-33);var k=_x(r);Yd(r,k,v);break;case 3:case 4:var O=y.stateNode.containerInfo,G=_x(r);Kd(r,G,O);break;default:throw Error(n(161))}}catch(J){It(r,r.return,J)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function gN(r,o,c){Fe=r,gx(r)}function gx(r,o,c){for(var y=(r.mode&1)!==0;Fe!==null;){var v=Fe,k=v.child;if(v.tag===22&&y){var O=v.memoizedState!==null||Gu;if(!O){var G=v.alternate,J=G!==null&&G.memoizedState!==null||cr;G=Gu;var pe=cr;if(Gu=O,(cr=J)&&!pe)for(Fe=v;Fe!==null;)O=Fe,J=O.child,O.tag===22&&O.memoizedState!==null?wx(v):J!==null?(J.return=O,Fe=J):wx(v);for(;k!==null;)Fe=k,gx(k),k=k.sibling;Fe=v,Gu=G,cr=pe}vx(r)}else(v.subtreeFlags&8772)!==0&&k!==null?(k.return=v,Fe=k):vx(r)}}function vx(r){for(;Fe!==null;){var o=Fe;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:cr||Ku(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!cr)if(c===null)y.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:xn(o.type,c.memoizedProps);y.componentDidUpdate(v,c.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var k=o.updateQueue;k!==null&&xv(o,k,y);break;case 3:var O=o.updateQueue;if(O!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}xv(o,O,c)}break;case 5:var G=o.stateNode;if(c===null&&o.flags&4){c=G;var J=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&c.focus();break;case"img":J.src&&(c.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var qe=pe.memoizedState;if(qe!==null){var Se=qe.dehydrated;Se!==null&&lo(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}cr||o.flags&512&&Gd(o)}catch(we){It(o,o.return,we)}}if(o===r){Fe=null;break}if(c=o.sibling,c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function xx(r){for(;Fe!==null;){var o=Fe;if(o===r){Fe=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function wx(r){for(;Fe!==null;){var o=Fe;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Ku(4,o)}catch(J){It(o,c,J)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var v=o.return;try{y.componentDidMount()}catch(J){It(o,v,J)}}var k=o.return;try{Gd(o)}catch(J){It(o,k,J)}break;case 5:var O=o.return;try{Gd(o)}catch(J){It(o,O,J)}}}catch(J){It(o,o.return,J)}if(o===r){Fe=null;break}var G=o.sibling;if(G!==null){G.return=o.return,Fe=G;break}Fe=o.return}}var vN=Math.ceil,Yu=E.ReactCurrentDispatcher,Qd=E.ReactCurrentOwner,nn=E.ReactCurrentBatchConfig,tt=0,Qt=null,Ot=null,or=0,zr=0,fa=Ti(0),zt=0,_s=null,bo=0,Qu=0,Xd=0,ms=null,Ir=null,Zd=0,_a=1/0,pi=null,Xu=!1,Jd=null,Fi=null,Zu=!1,Ai=null,Ju=0,hs=0,ep=null,el=-1,tl=0;function br(){return(tt&6)!==0?pt():el!==-1?el:el=pt()}function Li(r){return(r.mode&1)===0?1:(tt&2)!==0&&or!==0?or&-or:rN.transition!==null?(tl===0&&(tl=Ci()),tl):(r=at,r!==0||(r=window.event,r=r===void 0?16:pu(r.type)),r)}function qn(r,o,c,y){if(50<hs)throw hs=0,ep=null,Error(n(185));Xr(r,c,y),((tt&2)===0||r!==Qt)&&(r===Qt&&((tt&2)===0&&(Qu|=c),zt===4&&Di(r,or)),Nr(r,y),c===1&&tt===0&&(o.mode&1)===0&&(_a=pt()+500,Iu&&ji()))}function Nr(r,o){var c=r.callbackNode;Ba(r,o);var y=_n(r,r===Qt?or:0);if(y===0)c!==null&&qi(c),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(c!=null&&qi(c),o===1)r.tag===0?tN(qx.bind(null,r)):uv(qx.bind(null,r)),XI(function(){(tt&6)===0&&ji()}),c=null;else{switch(io(y)){case 1:c=dn;break;case 4:c=ei;break;case 16:c=pn;break;case 536870912:c=Qr;break;default:c=pn}c=Tx(c,bx.bind(null,r))}r.callbackPriority=o,r.callbackNode=c}}function bx(r,o){if(el=-1,tl=0,(tt&6)!==0)throw Error(n(327));var c=r.callbackNode;if(ma()&&r.callbackNode!==c)return null;var y=_n(r,r===Qt?or:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=rl(r,y);else{o=y;var v=tt;tt|=2;var k=Cx();(Qt!==r||or!==o)&&(pi=null,_a=pt()+500,So(r,o));do try{bN();break}catch(G){Sx(r,G)}while(!0);gd(),Yu.current=k,tt=v,Ot!==null?o=0:(Qt=null,or=0,o=zt)}if(o!==0){if(o===2&&(v=nr(r),v!==0&&(y=v,o=tp(r,v))),o===1)throw c=_s,So(r,0),Di(r,y),Nr(r,pt()),c;if(o===6)Di(r,y);else{if(v=r.current.alternate,(y&30)===0&&!xN(v)&&(o=rl(r,y),o===2&&(k=nr(r),k!==0&&(y=k,o=tp(r,k))),o===1))throw c=_s,So(r,0),Di(r,y),Nr(r,pt()),c;switch(r.finishedWork=v,r.finishedLanes=y,o){case 0:case 1:throw Error(n(345));case 2:Co(r,Ir,pi);break;case 3:if(Di(r,y),(y&130023424)===y&&(o=Zd+500-pt(),10<o)){if(_n(r,0)!==0)break;if(v=r.suspendedLanes,(v&y)!==y){br(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=sd(Co.bind(null,r,Ir,pi),o);break}Co(r,Ir,pi);break;case 4:if(Di(r,y),(y&4194240)===y)break;for(o=r.eventTimes,v=-1;0<y;){var O=31-gr(y);k=1<<O,O=o[O],O>v&&(v=O),y&=~k}if(y=v,y=pt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*vN(y/1960))-y,10<y){r.timeoutHandle=sd(Co.bind(null,r,Ir,pi),y);break}Co(r,Ir,pi);break;case 5:Co(r,Ir,pi);break;default:throw Error(n(329))}}}return Nr(r,pt()),r.callbackNode===c?bx.bind(null,r):null}function tp(r,o){var c=ms;return r.current.memoizedState.isDehydrated&&(So(r,o).flags|=256),r=rl(r,o),r!==2&&(o=Ir,Ir=c,o!==null&&rp(o)),r}function rp(r){Ir===null?Ir=r:Ir.push.apply(Ir,r)}function xN(r){for(var o=r;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var y=0;y<c.length;y++){var v=c[y],k=v.getSnapshot;v=v.value;try{if(!gn(k(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Di(r,o){for(o&=~Xd,o&=~Qu,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var c=31-gr(o),y=1<<c;r[c]=-1,o&=~y}}function qx(r){if((tt&6)!==0)throw Error(n(327));ma();var o=_n(r,0);if((o&1)===0)return Nr(r,pt()),null;var c=rl(r,o);if(r.tag!==0&&c===2){var y=nr(r);y!==0&&(o=y,c=tp(r,y))}if(c===1)throw c=_s,So(r,0),Di(r,o),Nr(r,pt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Co(r,Ir,pi),Nr(r,pt()),null}function np(r,o){var c=tt;tt|=1;try{return r(o)}finally{tt=c,tt===0&&(_a=pt()+500,Iu&&ji())}}function qo(r){Ai!==null&&Ai.tag===0&&(tt&6)===0&&ma();var o=tt;tt|=1;var c=nn.transition,y=at;try{if(nn.transition=null,at=1,r)return r()}finally{at=y,nn.transition=c,tt=o,(tt&6)===0&&ji()}}function ip(){zr=fa.current,mt(fa)}function So(r,o){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,QI(c)),Ot!==null)for(c=Ot.return;c!==null;){var y=c;switch(fd(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Mu();break;case 3:ca(),mt(kr),mt(sr),kd();break;case 5:Sd(y);break;case 4:ca();break;case 13:mt(Ct);break;case 19:mt(Ct);break;case 10:vd(y.type._context);break;case 22:case 23:ip()}c=c.return}if(Qt=r,Ot=r=Bi(r.current,null),or=zr=o,zt=0,_s=null,Xd=Qu=bo=0,Ir=ms=null,vo!==null){for(o=0;o<vo.length;o++)if(c=vo[o],y=c.interleaved,y!==null){c.interleaved=null;var v=y.next,k=c.pending;if(k!==null){var O=k.next;k.next=v,y.next=O}c.pending=y}vo=null}return r}function Sx(r,o){do{var c=Ot;try{if(gd(),Lu.current=$u,Du){for(var y=kt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}Du=!1}if(wo=0,Yt=Bt=kt=null,us=!1,ls=0,Qd.current=null,c===null||c.return===null){zt=1,_s=o,Ot=null;break}e:{var k=r,O=c.return,G=c,J=o;if(o=or,G.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var pe=J,qe=G,Se=qe.tag;if((qe.mode&1)===0&&(Se===0||Se===11||Se===15)){var we=qe.alternate;we?(qe.updateQueue=we.updateQueue,qe.memoizedState=we.memoizedState,qe.lanes=we.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Ve=Yv(O);if(Ve!==null){Ve.flags&=-257,Qv(Ve,O,G,k,o),Ve.mode&1&&Kv(k,pe,o),o=Ve,J=pe;var Ae=o.updateQueue;if(Ae===null){var Le=new Set;Le.add(J),o.updateQueue=Le}else Ae.add(J);break e}else{if((o&1)===0){Kv(k,pe,o),op();break e}J=Error(n(426))}}else if(gt&&G.mode&1){var jt=Yv(O);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),Qv(jt,O,G,k,o),hd(da(J,G));break e}}k=J=da(J,G),zt!==4&&(zt=2),ms===null?ms=[k]:ms.push(k),k=O;do{switch(k.tag){case 3:k.flags|=65536,o&=-o,k.lanes|=o;var ae=Uv(k,J,o);vv(k,ae);break e;case 1:G=J;var ne=k.type,le=k.stateNode;if((k.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Fi===null||!Fi.has(le)))){k.flags|=65536,o&=-o,k.lanes|=o;var Me=Gv(k,G,o);vv(k,Me);break e}}k=k.return}while(k!==null)}Mx(c)}catch(De){o=De,Ot===c&&c!==null&&(Ot=c=c.return);continue}break}while(!0)}function Cx(){var r=Yu.current;return Yu.current=$u,r===null?$u:r}function op(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||(bo&268435455)===0&&(Qu&268435455)===0||Di(Qt,or)}function rl(r,o){var c=tt;tt|=2;var y=Cx();(Qt!==r||or!==o)&&(pi=null,So(r,o));do try{wN();break}catch(v){Sx(r,v)}while(!0);if(gd(),tt=c,Yu.current=y,Ot!==null)throw Error(n(261));return Qt=null,or=0,zt}function wN(){for(;Ot!==null;)kx(Ot)}function bN(){for(;Ot!==null&&!to();)kx(Ot)}function kx(r){var o=Nx(r.alternate,r,zr);r.memoizedProps=r.pendingProps,o===null?Mx(r):Ot=o,Qd.current=null}function Mx(r){var o=r;do{var c=o.alternate;if(r=o.return,(o.flags&32768)===0){if(c=_N(c,o,zr),c!==null){Ot=c;return}}else{if(c=mN(c,o),c!==null){c.flags&=32767,Ot=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{zt=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=r}while(o!==null);zt===0&&(zt=5)}function Co(r,o,c){var y=at,v=nn.transition;try{nn.transition=null,at=1,qN(r,o,c,y)}finally{nn.transition=v,at=y}return null}function qN(r,o,c,y){do ma();while(Ai!==null);if((tt&6)!==0)throw Error(n(327));c=r.finishedWork;var v=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var k=c.lanes|c.childLanes;if(no(r,k),r===Qt&&(Ot=Qt=null,or=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Zu||(Zu=!0,Tx(pn,function(){return ma(),null})),k=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||k){k=nn.transition,nn.transition=null;var O=at;at=1;var G=tt;tt|=4,Qd.current=null,yN(r,c),yx(c,r),$I(od),Ko=!!id,od=id=null,r.current=c,gN(c),Zn(),tt=G,at=O,nn.transition=k}else r.current=c;if(Zu&&(Zu=!1,Ai=r,Ju=v),k=r.pendingLanes,k===0&&(Fi=null),Bo(c.stateNode),Nr(r,pt()),o!==null)for(y=r.onRecoverableError,c=0;c<o.length;c++)v=o[c],y(v.value,{componentStack:v.stack,digest:v.digest});if(Xu)throw Xu=!1,r=Jd,Jd=null,r;return(Ju&1)!==0&&r.tag!==0&&ma(),k=r.pendingLanes,(k&1)!==0?r===ep?hs++:(hs=0,ep=r):hs=0,ji(),null}function ma(){if(Ai!==null){var r=io(Ju),o=nn.transition,c=at;try{if(nn.transition=null,at=16>r?16:r,Ai===null)var y=!1;else{if(r=Ai,Ai=null,Ju=0,(tt&6)!==0)throw Error(n(331));var v=tt;for(tt|=4,Fe=r.current;Fe!==null;){var k=Fe,O=k.child;if((Fe.flags&16)!==0){var G=k.deletions;if(G!==null){for(var J=0;J<G.length;J++){var pe=G[J];for(Fe=pe;Fe!==null;){var qe=Fe;switch(qe.tag){case 0:case 11:case 15:fs(8,qe,k)}var Se=qe.child;if(Se!==null)Se.return=qe,Fe=Se;else for(;Fe!==null;){qe=Fe;var we=qe.sibling,Ve=qe.return;if(px(qe),qe===pe){Fe=null;break}if(we!==null){we.return=Ve,Fe=we;break}Fe=Ve}}}var Ae=k.alternate;if(Ae!==null){var Le=Ae.child;if(Le!==null){Ae.child=null;do{var jt=Le.sibling;Le.sibling=null,Le=jt}while(Le!==null)}}Fe=k}}if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,Fe=O;else e:for(;Fe!==null;){if(k=Fe,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:fs(9,k,k.return)}var ae=k.sibling;if(ae!==null){ae.return=k.return,Fe=ae;break e}Fe=k.return}}var ne=r.current;for(Fe=ne;Fe!==null;){O=Fe;var le=O.child;if((O.subtreeFlags&2064)!==0&&le!==null)le.return=O,Fe=le;else e:for(O=ne;Fe!==null;){if(G=Fe,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Ku(9,G)}}catch(De){It(G,G.return,De)}if(G===O){Fe=null;break e}var Me=G.sibling;if(Me!==null){Me.return=G.return,Fe=Me;break e}Fe=G.return}}if(tt=v,ji(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Vn,r)}catch{}y=!0}return y}finally{at=c,nn.transition=o}}return!1}function Ex(r,o,c){o=da(c,o),o=Uv(r,o,1),r=Oi(r,o,1),o=br(),r!==null&&(Xr(r,1,o),Nr(r,o))}function It(r,o,c){if(r.tag===3)Ex(r,r,c);else for(;o!==null;){if(o.tag===3){Ex(o,r,c);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Fi===null||!Fi.has(y))){r=da(c,r),r=Gv(o,r,1),o=Oi(o,r,1),r=br(),o!==null&&(Xr(o,1,r),Nr(o,r));break}}o=o.return}}function SN(r,o,c){var y=r.pingCache;y!==null&&y.delete(o),o=br(),r.pingedLanes|=r.suspendedLanes&c,Qt===r&&(or&c)===c&&(zt===4||zt===3&&(or&130023424)===or&&500>pt()-Zd?So(r,0):Xd|=c),Nr(r,o)}function Ix(r,o){o===0&&((r.mode&1)===0?o=1:(o=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var c=br();r=li(r,o),r!==null&&(Xr(r,o,c),Nr(r,c))}function CN(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),Ix(r,c)}function kN(r,o){var c=0;switch(r.tag){case 13:var y=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(o),Ix(r,c)}var Nx;Nx=function(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps||kr.current)Er=!0;else{if((r.lanes&c)===0&&(o.flags&128)===0)return Er=!1,fN(r,o,c);Er=(r.flags&131072)!==0}else Er=!1,gt&&(o.flags&1048576)!==0&&lv(o,Tu,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;Uu(r,o),r=o.pendingProps;var v=na(o,sr.current);la(o,c),v=Id(null,o,y,r,v,c);var k=Nd();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mr(y)?(k=!0,Eu(o)):k=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,bd(o),v.updater=Hu,o.stateNode=v,v._reactInternals=o,Vd(o,y,r,c),o=Dd(null,o,y,!0,k,c)):(o.tag=0,gt&&k&&pd(o),wr(null,o,v,c),o=o.child),o;case 16:y=o.elementType;e:{switch(Uu(r,o),r=o.pendingProps,v=y._init,y=v(y._payload),o.type=y,v=o.tag=EN(y),r=xn(y,r),v){case 0:o=Ld(null,o,y,r,c);break e;case 1:o=rx(null,o,y,r,c);break e;case 11:o=Xv(null,o,y,r,c);break e;case 14:o=Zv(null,o,y,xn(y.type,r),c);break e}throw Error(n(306,y,""))}return o;case 0:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Ld(r,o,y,v,c);case 1:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),rx(r,o,y,v,c);case 3:e:{if(nx(o),r===null)throw Error(n(387));y=o.pendingProps,k=o.memoizedState,v=k.element,gv(r,o),Fu(o,y,null,c);var O=o.memoizedState;if(y=O.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){v=da(Error(n(423)),o),o=ix(r,o,y,c,v);break e}else if(y!==v){v=da(Error(n(424)),o),o=ix(r,o,y,c,v);break e}else for(Br=Ni(o.stateNode.containerInfo.firstChild),Dr=o,gt=!0,vn=null,c=hv(o,null,y,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(aa(),y===v){o=di(r,o,c);break e}wr(r,o,y,c)}o=o.child}return o;case 5:return wv(o),r===null&&md(o),y=o.type,v=o.pendingProps,k=r!==null?r.memoizedProps:null,O=v.children,ad(y,v)?O=null:k!==null&&ad(y,k)&&(o.flags|=32),tx(r,o),wr(r,o,O,c),o.child;case 6:return r===null&&md(o),null;case 13:return ox(r,o,c);case 4:return qd(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=sa(o,null,y,c):wr(r,o,y,c),o.child;case 11:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Xv(r,o,y,v,c);case 7:return wr(r,o,o.pendingProps,c),o.child;case 8:return wr(r,o,o.pendingProps.children,c),o.child;case 12:return wr(r,o,o.pendingProps.children,c),o.child;case 10:e:{if(y=o.type._context,v=o.pendingProps,k=o.memoizedProps,O=v.value,ct(Ru,y._currentValue),y._currentValue=O,k!==null)if(gn(k.value,O)){if(k.children===v.children&&!kr.current){o=di(r,o,c);break e}}else for(k=o.child,k!==null&&(k.return=o);k!==null;){var G=k.dependencies;if(G!==null){O=k.child;for(var J=G.firstContext;J!==null;){if(J.context===y){if(k.tag===1){J=ci(-1,c&-c),J.tag=2;var pe=k.updateQueue;if(pe!==null){pe=pe.shared;var qe=pe.pending;qe===null?J.next=J:(J.next=qe.next,qe.next=J),pe.pending=J}}k.lanes|=c,J=k.alternate,J!==null&&(J.lanes|=c),xd(k.return,c,o),G.lanes|=c;break}J=J.next}}else if(k.tag===10)O=k.type===o.type?null:k.child;else if(k.tag===18){if(O=k.return,O===null)throw Error(n(341));O.lanes|=c,G=O.alternate,G!==null&&(G.lanes|=c),xd(O,c,o),O=k.sibling}else O=k.child;if(O!==null)O.return=k;else for(O=k;O!==null;){if(O===o){O=null;break}if(k=O.sibling,k!==null){k.return=O.return,O=k;break}O=O.return}k=O}wr(r,o,v.children,c),o=o.child}return o;case 9:return v=o.type,y=o.pendingProps.children,la(o,c),v=tn(v),y=y(v),o.flags|=1,wr(r,o,y,c),o.child;case 14:return y=o.type,v=xn(y,o.pendingProps),v=xn(y.type,v),Zv(r,o,y,v,c);case 15:return Jv(r,o,o.type,o.pendingProps,c);case 17:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Uu(r,o),o.tag=1,Mr(y)?(r=!0,Eu(o)):r=!1,la(o,c),Hv(o,y,v),Vd(o,y,v,c),Dd(null,o,y,!0,r,c);case 19:return sx(r,o,c);case 22:return ex(r,o,c)}throw Error(n(156,o.tag))};function Tx(r,o){return bi(r,o)}function MN(r,o,c,y){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(r,o,c,y){return new MN(r,o,c,y)}function ap(r){return r=r.prototype,!(!r||!r.isReactComponent)}function EN(r){if(typeof r=="function")return ap(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===X)return 14}return 2}function Bi(r,o){var c=r.alternate;return c===null?(c=on(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function nl(r,o,c,y,v,k){var O=2;if(y=r,typeof r=="function")ap(r)&&(O=1);else if(typeof r=="string")O=5;else e:switch(r){case T:return ko(c.children,v,k,o);case P:O=8,v|=8;break;case j:return r=on(12,c,o,v|2),r.elementType=j,r.lanes=k,r;case Q:return r=on(13,c,o,v),r.elementType=Q,r.lanes=k,r;case R:return r=on(19,c,o,v),r.elementType=R,r.lanes=k,r;case te:return il(c,v,k,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:O=10;break e;case V:O=9;break e;case F:O=11;break e;case X:O=14;break e;case H:O=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=on(O,c,o,v),o.elementType=r,o.type=y,o.lanes=k,o}function ko(r,o,c,y){return r=on(7,r,y,o),r.lanes=c,r}function il(r,o,c,y){return r=on(22,r,y,o),r.elementType=te,r.lanes=c,r.stateNode={isHidden:!1},r}function sp(r,o,c){return r=on(6,r,null,o),r.lanes=c,r}function up(r,o,c){return o=on(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function IN(r,o,c,y,v){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function lp(r,o,c,y,v,k,O,G,J){return r=new IN(r,o,c,G,J),o===1?(o=1,k===!0&&(o|=8)):o=0,k=on(3,null,null,o),r.current=k,k.stateNode=r,k.memoizedState={element:y,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(k),r}function NN(r,o,c){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:y==null?null:""+y,children:r,containerInfo:o,implementation:c}}function Px(r){if(!r)return Pi;r=r._reactInternals;e:{if(Et(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Mr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Mr(c))return av(r,c,o)}return o}function jx(r,o,c,y,v,k,O,G,J){return r=lp(c,y,!0,r,v,k,O,G,J),r.context=Px(null),c=r.current,y=br(),v=Li(c),k=ci(y,v),k.callback=o??null,Oi(c,k,v),r.current.lanes=v,Xr(r,v,y),Nr(r,y),r}function ol(r,o,c,y){var v=o.current,k=br(),O=Li(v);return c=Px(c),o.context===null?o.context=c:o.pendingContext=c,o=ci(k,O),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=Oi(v,o,O),r!==null&&(qn(r,v,O,k),Vu(r,v,O)),O}function al(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Rx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function cp(r,o){Rx(r,o),(r=r.alternate)&&Rx(r,o)}function TN(){return null}var Ox=typeof reportError=="function"?reportError:function(r){console.error(r)};function dp(r){this._internalRoot=r}sl.prototype.render=dp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));ol(r,o,null,null)},sl.prototype.unmount=dp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;qo(function(){ol(null,r,null,null)}),o[oi]=null}};function sl(r){this._internalRoot=r}sl.prototype.unstable_scheduleHydration=function(r){if(r){var o=ze();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Lt.length&&o!==0&&o<Lt[c].priority;c++);Lt.splice(c,0,r),c===0&&cu(r)}};function pp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Vx(){}function PN(r,o,c,y,v){if(v){if(typeof y=="function"){var k=y;y=function(){var pe=al(O);k.call(pe)}}var O=jx(o,y,r,0,null,!1,!1,"",Vx);return r._reactRootContainer=O,r[oi]=O.current,es(r.nodeType===8?r.parentNode:r),qo(),O}for(;v=r.lastChild;)r.removeChild(v);if(typeof y=="function"){var G=y;y=function(){var pe=al(J);G.call(pe)}}var J=lp(r,0,!1,null,null,!1,!1,"",Vx);return r._reactRootContainer=J,r[oi]=J.current,es(r.nodeType===8?r.parentNode:r),qo(function(){ol(o,J,c,y)}),J}function ll(r,o,c,y,v){var k=c._reactRootContainer;if(k){var O=k;if(typeof v=="function"){var G=v;v=function(){var J=al(O);G.call(J)}}ol(o,O,r,v)}else O=PN(c,o,r,v,y);return al(O)}za=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var c=Cr(o.pendingLanes);c!==0&&(He(o,c|1),Nr(o,pt()),(tt&6)===0&&(_a=pt()+500,ji()))}break;case 13:qo(function(){var y=li(r,1);if(y!==null){var v=br();qn(y,r,1,v)}}),cp(r,1)}},oo=function(r){if(r.tag===13){var o=li(r,134217728);if(o!==null){var c=br();qn(o,r,134217728,c)}cp(r,134217728)}},$o=function(r){if(r.tag===13){var o=Li(r),c=li(r,o);if(c!==null){var y=br();qn(c,r,o,y)}cp(r,o)}},ze=function(){return at},$a=function(r,o){var c=at;try{return at=r,o()}finally{at=c}},Or=function(r,o,c){switch(o){case"input":if(Be(r,c),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var y=c[o];if(y!==r&&y.form===r.form){var v=ku(y);if(!v)throw Error(n(90));Ie(y),Be(y,v)}}}break;case"textarea":Sr(r,c);break;case"select":o=c.value,o!=null&&qt(r,!!c.multiple,o,!1)}},er=np,tr=qo;var jN={usingClientEntryPoint:!1,Events:[ns,ta,ku,On,Rt,np]},ys={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RN={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=eo(r),r===null?null:r.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||TN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{Vn=cl.inject(RN),Kt=cl}catch{}}return Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jN,Tr.createPortal=function(r,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(o))throw Error(n(200));return NN(r,o,null,c)},Tr.createRoot=function(r,o){if(!pp(r))throw Error(n(299));var c=!1,y="",v=Ox;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=lp(r,1,!1,null,null,c,!1,y,v),r[oi]=o.current,es(r.nodeType===8?r.parentNode:r),new dp(o)},Tr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=eo(o),r=r===null?null:r.stateNode,r},Tr.flushSync=function(r){return qo(r)},Tr.hydrate=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!0,c)},Tr.hydrateRoot=function(r,o,c){if(!pp(r))throw Error(n(405));var y=c!=null&&c.hydratedSources||null,v=!1,k="",O=Ox;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onRecoverableError!==void 0&&(O=c.onRecoverableError)),o=jx(o,null,r,1,c??null,v,!1,k,O),r[oi]=o.current,es(r),y)for(r=0;r<y.length;r++)c=y[r],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new sl(o)},Tr.render=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!1,c)},Tr.unmountComponentAtNode=function(r){if(!ul(r))throw Error(n(40));return r._reactRootContainer?(qo(function(){ll(null,null,r,!1,function(){r._reactRootContainer=null,r[oi]=null})}),!0):!1},Tr.unstable_batchedUpdates=np,Tr.unstable_renderSubtreeIntoContainer=function(r,o,c,y){if(!ul(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ll(r,o,c,!1,y)},Tr.version="18.3.1-next-f1338f8080-20240426",Tr}var Hx;function gk(){if(Hx)return mp.exports;Hx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mp.exports=zN(),mp.exports}var Wx;function $N(){if(Wx)return pl;Wx=1;var e=gk();return pl.createRoot=e.createRoot,pl.hydrateRoot=e.hydrateRoot,pl}var HN=$N();const WN=Ta(HN);function Vt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Vt(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var UN={value:()=>{}};function ac(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Nl(n)}function Nl(e){this._=e}function GN(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Nl.prototype=ac.prototype={constructor:Nl,on:function(e,t){var n=this._,i=GN(e+"",n),a,s=-1,u=i.length;if(arguments.length<2){for(;++s<u;)if((a=(e=i[s]).type)&&(a=KN(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=i[s]).type)n[a]=Ux(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Ux(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nl(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,s;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,n)}};function KN(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Ux(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=UN,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var l0="http://www.w3.org/1999/xhtml";const Gx={svg:"http://www.w3.org/2000/svg",xhtml:l0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gx.hasOwnProperty(t)?{space:Gx[t],local:e}:e}function YN(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===l0&&t.documentElement.namespaceURI===l0?t.createElement(e):t.createElementNS(n,e)}}function QN(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vk(e){var t=sc(e);return(t.local?QN:YN)(t)}function XN(){}function H0(e){return e==null?XN:function(){return this.querySelector(e)}}function ZN(e){typeof e!="function"&&(e=H0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=new Array(u),d,p,m=0;m<u;++m)(d=s[m])&&(p=e.call(d,d.__data__,m,s))&&("__data__"in d&&(p.__data__=d.__data__),l[m]=p);return new Gr(i,this._parents)}function JN(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eT(){return[]}function xk(e){return e==null?eT:function(){return this.querySelectorAll(e)}}function tT(e){return function(){return JN(e.apply(this,arguments))}}function rT(e){typeof e=="function"?e=tT(e):e=xk(e);for(var t=this._groups,n=t.length,i=[],a=[],s=0;s<n;++s)for(var u=t[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&(i.push(e.call(d,d.__data__,p,u)),a.push(d));return new Gr(i,a)}function wk(e){return function(){return this.matches(e)}}function bk(e){return function(t){return t.matches(e)}}var nT=Array.prototype.find;function iT(e){return function(){return nT.call(this.children,e)}}function oT(){return this.firstElementChild}function aT(e){return this.select(e==null?oT:iT(typeof e=="function"?e:bk(e)))}var sT=Array.prototype.filter;function uT(){return Array.from(this.children)}function lT(e){return function(){return sT.call(this.children,e)}}function cT(e){return this.selectAll(e==null?uT:lT(typeof e=="function"?e:bk(e)))}function dT(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new Gr(i,this._parents)}function qk(e){return new Array(e.length)}function pT(){return new Gr(this._enter||this._groups.map(qk),this._parents)}function Fl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fl.prototype={constructor:Fl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fT(e){return function(){return e}}function _T(e,t,n,i,a,s){for(var u=0,l,d=t.length,p=s.length;u<p;++u)(l=t[u])?(l.__data__=s[u],i[u]=l):n[u]=new Fl(e,s[u]);for(;u<d;++u)(l=t[u])&&(a[u]=l)}function mT(e,t,n,i,a,s,u){var l,d,p=new Map,m=t.length,f=s.length,h=new Array(m),g;for(l=0;l<m;++l)(d=t[l])&&(h[l]=g=u.call(d,d.__data__,l,t)+"",p.has(g)?a[l]=d:p.set(g,d));for(l=0;l<f;++l)g=u.call(e,s[l],l,s)+"",(d=p.get(g))?(i[l]=d,d.__data__=s[l],p.delete(g)):n[l]=new Fl(e,s[l]);for(l=0;l<m;++l)(d=t[l])&&p.get(h[l])===d&&(a[l]=d)}function hT(e){return e.__data__}function yT(e,t){if(!arguments.length)return Array.from(this,hT);var n=t?mT:_T,i=this._parents,a=this._groups;typeof e!="function"&&(e=fT(e));for(var s=a.length,u=new Array(s),l=new Array(s),d=new Array(s),p=0;p<s;++p){var m=i[p],f=a[p],h=f.length,g=gT(e.call(m,m&&m.__data__,p,i)),x=g.length,q=l[p]=new Array(x),w=u[p]=new Array(x),b=d[p]=new Array(h);n(m,f,q,w,b,g,t);for(var C=0,S=0,E,I;C<x;++C)if(E=q[C]){for(C>=S&&(S=C+1);!(I=w[S])&&++S<x;);E._next=I||null}}return u=new Gr(u,i),u._enter=l,u._exit=d,u}function gT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vT(){return new Gr(this._exit||this._groups.map(qk),this._parents)}function xT(e,t,n){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),i&&a?i.merge(a).order():a}function wT(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,s=i.length,u=Math.min(a,s),l=new Array(a),d=0;d<u;++d)for(var p=n[d],m=i[d],f=p.length,h=l[d]=new Array(f),g,x=0;x<f;++x)(g=p[x]||m[x])&&(h[x]=g);for(;d<a;++d)l[d]=n[d];return new Gr(l,this._parents)}function bT(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,s=i[a],u;--a>=0;)(u=i[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function qT(e){e||(e=ST);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var u=n[s],l=u.length,d=a[s]=new Array(l),p,m=0;m<l;++m)(p=u[m])&&(d[m]=p);d.sort(t)}return new Gr(a,this._parents).order()}function ST(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function CT(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kT(){return Array.from(this)}function MT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length;a<s;++a){var u=i[a];if(u)return u}return null}function ET(){let e=0;for(const t of this)++e;return e}function IT(){return!this.node()}function NT(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],s=0,u=a.length,l;s<u;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function TT(e){return function(){this.removeAttribute(e)}}function PT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jT(e,t){return function(){this.setAttribute(e,t)}}function RT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function OT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function VT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function FT(e,t){var n=sc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?PT:TT:typeof t=="function"?n.local?VT:OT:n.local?RT:jT)(n,t))}function Sk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function AT(e){return function(){this.style.removeProperty(e)}}function LT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function DT(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function BT(e,t,n){return arguments.length>1?this.each((t==null?AT:typeof t=="function"?DT:LT)(e,t,n??"")):ba(this.node(),e)}function ba(e,t){return e.style.getPropertyValue(t)||Sk(e).getComputedStyle(e,null).getPropertyValue(t)}function zT(e){return function(){delete this[e]}}function $T(e,t){return function(){this[e]=t}}function HT(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function WT(e,t){return arguments.length>1?this.each((t==null?zT:typeof t=="function"?HT:$T)(e,t)):this.node()[e]}function Ck(e){return e.trim().split(/^|\s+/)}function W0(e){return e.classList||new kk(e)}function kk(e){this._node=e,this._names=Ck(e.getAttribute("class")||"")}kk.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mk(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Ek(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function UT(e){return function(){Mk(this,e)}}function GT(e){return function(){Ek(this,e)}}function KT(e,t){return function(){(t.apply(this,arguments)?Mk:Ek)(this,e)}}function YT(e,t){var n=Ck(e+"");if(arguments.length<2){for(var i=W0(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?KT:t?UT:GT)(n,t))}function QT(){this.textContent=""}function XT(e){return function(){this.textContent=e}}function ZT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function JT(e){return arguments.length?this.each(e==null?QT:(typeof e=="function"?ZT:XT)(e)):this.node().textContent}function e5(){this.innerHTML=""}function t5(e){return function(){this.innerHTML=e}}function r5(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function n5(e){return arguments.length?this.each(e==null?e5:(typeof e=="function"?r5:t5)(e)):this.node().innerHTML}function i5(){this.nextSibling&&this.parentNode.appendChild(this)}function o5(){return this.each(i5)}function a5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function s5(){return this.each(a5)}function u5(e){var t=typeof e=="function"?e:vk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function l5(){return null}function c5(e,t){var n=typeof e=="function"?e:vk(e),i=t==null?l5:typeof t=="function"?t:H0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function d5(){var e=this.parentNode;e&&e.removeChild(this)}function p5(){return this.each(d5)}function f5(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _5(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function m5(e){return this.select(e?_5:f5)}function h5(e){return arguments.length?this.property("__data__",e):this.node().__data__}function y5(e){return function(t){e.call(this,t,this.__data__)}}function g5(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function v5(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function x5(e,t,n){return function(){var i=this.__on,a,s=y5(t);if(i){for(var u=0,l=i.length;u<l;++u)if((a=i[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(a):this.__on=[a]}}function w5(e,t,n){var i=g5(e+""),a,s=i.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,p=l.length,m;d<p;++d)for(a=0,m=l[d];a<s;++a)if((u=i[a]).type===m.type&&u.name===m.name)return m.value}return}for(l=t?x5:v5,a=0;a<s;++a)this.each(l(i[a],t,n));return this}function Ik(e,t,n){var i=Sk(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function b5(e,t){return function(){return Ik(this,e,t)}}function q5(e,t){return function(){return Ik(this,e,t.apply(this,arguments))}}function S5(e,t){return this.each((typeof t=="function"?q5:b5)(e,t))}function*C5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length,u;a<s;++a)(u=i[a])&&(yield u)}var Nk=[null];function Gr(e,t){this._groups=e,this._parents=t}function Qs(){return new Gr([[document.documentElement]],Nk)}function k5(){return this}Gr.prototype=Qs.prototype={constructor:Gr,select:ZN,selectAll:rT,selectChild:aT,selectChildren:cT,filter:dT,data:yT,enter:pT,exit:vT,join:xT,merge:wT,selection:k5,order:bT,sort:qT,call:CT,nodes:kT,node:MT,size:ET,empty:IT,each:NT,attr:FT,style:BT,property:WT,classed:YT,text:JT,html:n5,raise:o5,lower:s5,append:u5,insert:c5,remove:p5,clone:m5,datum:h5,on:w5,dispatch:S5,[Symbol.iterator]:C5};function Wr(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],Nk)}function M5(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kn(e,t){if(e=M5(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const E5={passive:!1},Os={capture:!0,passive:!1};function gp(e){e.stopImmediatePropagation()}function va(e){e.preventDefault(),e.stopImmediatePropagation()}function Tk(e){var t=e.document.documentElement,n=Wr(e).on("dragstart.drag",va,Os);"onselectstart"in t?n.on("selectstart.drag",va,Os):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pk(e,t){var n=e.document.documentElement,i=Wr(e).on("dragstart.drag",null);t&&(i.on("click.drag",va,Os),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fl=e=>()=>e;function c0(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:s,x:u,y:l,dx:d,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}c0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function I5(e){return!e.ctrlKey&&!e.button}function N5(){return this.parentNode}function T5(e,t){return t??{x:e.x,y:e.y}}function P5(){return navigator.maxTouchPoints||"ontouchstart"in this}function jk(){var e=I5,t=N5,n=T5,i=P5,a={},s=ac("start","drag","end"),u=0,l,d,p,m,f=0;function h(E){E.on("mousedown.drag",g).filter(i).on("touchstart.drag",w).on("touchmove.drag",b,E5).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,I){if(!(m||!e.call(this,E,I))){var M=S(this,t.call(this,E,I),E,I,"mouse");M&&(Wr(E.view).on("mousemove.drag",x,Os).on("mouseup.drag",q,Os),Tk(E.view),gp(E),p=!1,l=E.clientX,d=E.clientY,M("start",E))}}function x(E){if(va(E),!p){var I=E.clientX-l,M=E.clientY-d;p=I*I+M*M>f}a.mouse("drag",E)}function q(E){Wr(E.view).on("mousemove.drag mouseup.drag",null),Pk(E.view,p),va(E),a.mouse("end",E)}function w(E,I){if(e.call(this,E,I)){var M=E.changedTouches,T=t.call(this,E,I),P=M.length,j,D;for(j=0;j<P;++j)(D=S(this,T,E,I,M[j].identifier,M[j]))&&(gp(E),D("start",E,M[j]))}}function b(E){var I=E.changedTouches,M=I.length,T,P;for(T=0;T<M;++T)(P=a[I[T].identifier])&&(va(E),P("drag",E,I[T]))}function C(E){var I=E.changedTouches,M=I.length,T,P;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<M;++T)(P=a[I[T].identifier])&&(gp(E),P("end",E,I[T]))}function S(E,I,M,T,P,j){var D=s.copy(),V=kn(j||M,I),F,Q,R;if((R=n.call(E,new c0("beforestart",{sourceEvent:M,target:h,identifier:P,active:u,x:V[0],y:V[1],dx:0,dy:0,dispatch:D}),T))!=null)return F=R.x-V[0]||0,Q=R.y-V[1]||0,function X(H,te,U){var K=V,ie;switch(H){case"start":a[P]=X,ie=u++;break;case"end":delete a[P],--u;case"drag":V=kn(U||te,I),ie=u;break}D.call(H,E,new c0(H,{sourceEvent:te,subject:R,target:h,identifier:P,active:ie,x:V[0]+F,y:V[1]+Q,dx:V[0]-K[0],dy:V[1]-K[1],dispatch:D}),T)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:fl(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:fl(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:fl(E),h):n},h.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:fl(!!E),h):i},h.on=function(){var E=s.on.apply(s,arguments);return E===s?h:E},h.clickDistance=function(E){return arguments.length?(f=(E=+E)*E,h):Math.sqrt(f)},h}function U0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rk(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xs(){}var Vs=.7,Al=1/Vs,xa="\\s*([+-]?\\d+)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j5=/^#([0-9a-f]{3,8})$/,R5=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),O5=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),V5=new RegExp(`^rgba\\(${xa},${xa},${xa},${Fs}\\)$`),F5=new RegExp(`^rgba\\(${Un},${Un},${Un},${Fs}\\)$`),A5=new RegExp(`^hsl\\(${Fs},${Un},${Un}\\)$`),L5=new RegExp(`^hsla\\(${Fs},${Un},${Un},${Fs}\\)$`),Kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U0(Xs,To,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yx,formatHex:Yx,formatHex8:D5,formatHsl:B5,formatRgb:Qx,toString:Qx});function Yx(){return this.rgb().formatHex()}function D5(){return this.rgb().formatHex8()}function B5(){return Ok(this).formatHsl()}function Qx(){return this.rgb().formatRgb()}function To(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=j5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xx(t):n===3?new Pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=R5.exec(e))?new Pr(t[1],t[2],t[3],1):(t=O5.exec(e))?new Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=V5.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=F5.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=A5.exec(e))?e1(t[1],t[2]/100,t[3]/100,1):(t=L5.exec(e))?e1(t[1],t[2]/100,t[3]/100,t[4]):Kx.hasOwnProperty(e)?Xx(Kx[e]):e==="transparent"?new Pr(NaN,NaN,NaN,0):null}function Xx(e){return new Pr(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,i){return i<=0&&(e=t=n=NaN),new Pr(e,t,n,i)}function z5(e){return e instanceof Xs||(e=To(e)),e?(e=e.rgb(),new Pr(e.r,e.g,e.b,e.opacity)):new Pr}function d0(e,t,n,i){return arguments.length===1?z5(e):new Pr(e,t,n,i??1)}function Pr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}U0(Pr,d0,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vs:Math.pow(Vs,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pr(Io(this.r),Io(this.g),Io(this.b),Ll(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zx,formatHex:Zx,formatHex8:$5,formatRgb:Jx,toString:Jx}));function Zx(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}`}function $5(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}${Eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jx(){const e=Ll(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function Ll(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Eo(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function e1(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,n,i)}function Ok(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Xs||(e=To(e)),!e)return new En;if(e instanceof En)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),u=NaN,l=s-a,d=(s+a)/2;return l?(t===s?u=(n-i)/l+(n<i)*6:n===s?u=(i-t)/l+2:u=(t-n)/l+4,l/=d<.5?s+a:2-s-a,u*=60):l=d>0&&d<1?0:u,new En(u,l,d,e.opacity)}function H5(e,t,n,i){return arguments.length===1?Ok(e):new En(e,t,n,i??1)}function En(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}U0(En,H5,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vs:Math.pow(Vs,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Pr(vp(e>=240?e-240:e+120,a,i),vp(e,a,i),vp(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new En(t1(this.h),ml(this.s),ml(this.l),Ll(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ll(this.opacity);return`${e===1?"hsl(":"hsla("}${t1(this.h)}, ${ml(this.s)*100}%, ${ml(this.l)*100}%${e===1?")":`, ${e})`}`}}));function t1(e){return e=(e||0)%360,e<0?e+360:e}function ml(e){return Math.max(0,Math.min(1,e||0))}function vp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const G0=e=>()=>e;function W5(e,t){return function(n){return e+n*t}}function U5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function G5(e){return(e=+e)==1?Vk:function(t,n){return n-t?U5(t,n,e):G0(isNaN(t)?n:t)}}function Vk(e,t){var n=t-e;return n?W5(e,n):G0(isNaN(e)?t:e)}const Dl=(function e(t){var n=G5(t);function i(a,s){var u=n((a=d0(a)).r,(s=d0(s)).r),l=n(a.g,s.g),d=n(a.b,s.b),p=Vk(a.opacity,s.opacity);return function(m){return a.r=u(m),a.g=l(m),a.b=d(m),a.opacity=p(m),a+""}}return i.gamma=e,i})(1);function K5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function Y5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Q5(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),u;for(u=0;u<i;++u)a[u]=Es(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(l){for(u=0;u<i;++u)s[u]=a[u](l);return s}}function X5(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Hn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Z5(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Es(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var p0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xp=new RegExp(p0.source,"g");function J5(e){return function(){return e}}function eP(e){return function(t){return e(t)+""}}function Fk(e,t){var n=p0.lastIndex=xp.lastIndex=0,i,a,s,u=-1,l=[],d=[];for(e=e+"",t=t+"";(i=p0.exec(e))&&(a=xp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[u]?l[u]+=s:l[++u]=s),(i=i[0])===(a=a[0])?l[u]?l[u]+=a:l[++u]=a:(l[++u]=null,d.push({i:u,x:Hn(i,a)})),n=xp.lastIndex;return n<t.length&&(s=t.slice(n),l[u]?l[u]+=s:l[++u]=s),l.length<2?d[0]?eP(d[0].x):J5(t):(t=d.length,function(p){for(var m=0,f;m<t;++m)l[(f=d[m]).i]=f.x(p);return l.join("")})}function Es(e,t){var n=typeof t,i;return t==null||n==="boolean"?G0(t):(n==="number"?Hn:n==="string"?(i=To(t))?(t=i,Dl):Fk:t instanceof To?Dl:t instanceof Date?X5:Y5(t)?K5:Array.isArray(t)?Q5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Z5:Hn)(e,t)}var r1=180/Math.PI,f0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ak(e,t,n,i,a,s){var u,l,d;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),e*i<t*n&&(e=-e,t=-t,d=-d,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*r1,skewX:Math.atan(d)*r1,scaleX:u,scaleY:l}}var hl;function tP(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?f0:Ak(t.a,t.b,t.c,t.d,t.e,t.f)}function rP(e){return e==null||(hl||(hl=document.createElementNS("http://www.w3.org/2000/svg","g")),hl.setAttribute("transform",e),!(e=hl.transform.baseVal.consolidate()))?f0:(e=e.matrix,Ak(e.a,e.b,e.c,e.d,e.e,e.f))}function Lk(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function s(p,m,f,h,g,x){if(p!==f||m!==h){var q=g.push("translate(",null,t,null,n);x.push({i:q-4,x:Hn(p,f)},{i:q-2,x:Hn(m,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function u(p,m,f,h){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),h.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Hn(p,m)})):m&&f.push(a(f)+"rotate("+m+i)}function l(p,m,f,h){p!==m?h.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Hn(p,m)}):m&&f.push(a(f)+"skewX("+m+i)}function d(p,m,f,h,g,x){if(p!==f||m!==h){var q=g.push(a(g)+"scale(",null,",",null,")");x.push({i:q-4,x:Hn(p,f)},{i:q-2,x:Hn(m,h)})}else(f!==1||h!==1)&&g.push(a(g)+"scale("+f+","+h+")")}return function(p,m){var f=[],h=[];return p=e(p),m=e(m),s(p.translateX,p.translateY,m.translateX,m.translateY,f,h),u(p.rotate,m.rotate,f,h),l(p.skewX,m.skewX,f,h),d(p.scaleX,p.scaleY,m.scaleX,m.scaleY,f,h),p=m=null,function(g){for(var x=-1,q=h.length,w;++x<q;)f[(w=h[x]).i]=w.x(g);return f.join("")}}}var nP=Lk(tP,"px, ","px)","deg)"),iP=Lk(rP,", ",")",")"),oP=1e-12;function n1(e){return((e=Math.exp(e))+1/e)/2}function aP(e){return((e=Math.exp(e))-1/e)/2}function sP(e){return((e=Math.exp(2*e))-1)/(e+1)}const Tl=(function e(t,n,i){function a(s,u){var l=s[0],d=s[1],p=s[2],m=u[0],f=u[1],h=u[2],g=m-l,x=f-d,q=g*g+x*x,w,b;if(q<oP)b=Math.log(h/p)/t,w=function(T){return[l+T*g,d+T*x,p*Math.exp(t*T*b)]};else{var C=Math.sqrt(q),S=(h*h-p*p+i*q)/(2*p*n*C),E=(h*h-p*p-i*q)/(2*h*n*C),I=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(E*E+1)-E);b=(M-I)/t,w=function(T){var P=T*b,j=n1(I),D=p/(n*C)*(j*sP(t*P+I)-aP(I));return[l+D*g,d+D*x,p*j/n1(t*P+I)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return a.rho=function(s){var u=Math.max(.001,+s),l=u*u,d=l*l;return e(u,l,d)},a})(Math.SQRT2,2,4);var qa=0,qs=0,vs=0,Dk=1e3,Bl,Ss,zl=0,Po=0,uc=0,As=typeof performance=="object"&&performance.now?performance:Date,Bk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K0(){return Po||(Bk(uP),Po=As.now()+uc)}function uP(){Po=0}function $l(){this._call=this._time=this._next=null}$l.prototype=zk.prototype={constructor:$l,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?K0():+n)+(t==null?0:+t),!this._next&&Ss!==this&&(Ss?Ss._next=this:Bl=this,Ss=this),this._call=e,this._time=n,_0()},stop:function(){this._call&&(this._call=null,this._time=1/0,_0())}};function zk(e,t,n){var i=new $l;return i.restart(e,t,n),i}function lP(){K0(),++qa;for(var e=Bl,t;e;)(t=Po-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qa}function i1(){Po=(zl=As.now())+uc,qa=qs=0;try{lP()}finally{qa=0,dP(),Po=0}}function cP(){var e=As.now(),t=e-zl;t>Dk&&(uc-=t,zl=e)}function dP(){for(var e,t=Bl,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bl=n);Ss=e,_0(i)}function _0(e){if(!qa){qs&&(qs=clearTimeout(qs));var t=e-Po;t>24?(e<1/0&&(qs=setTimeout(i1,e-As.now()-uc)),vs&&(vs=clearInterval(vs))):(vs||(zl=As.now(),vs=setInterval(cP,Dk)),qa=1,Bk(i1))}}function o1(e,t,n){var i=new $l;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var pP=ac("start","end","cancel","interrupt"),fP=[],$k=0,a1=1,m0=2,Pl=3,s1=4,h0=5,jl=6;function lc(e,t,n,i,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;_P(e,n,{name:t,index:i,group:a,on:pP,tween:fP,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$k})}function Y0(e,t){var n=jn(e,t);if(n.state>$k)throw new Error("too late; already scheduled");return n}function Kn(e,t){var n=jn(e,t);if(n.state>Pl)throw new Error("too late; already running");return n}function jn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _P(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=zk(s,0,n.time);function s(p){n.state=a1,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var m,f,h,g;if(n.state!==a1)return d();for(m in i)if(g=i[m],g.name===n.name){if(g.state===Pl)return o1(u);g.state===s1?(g.state=jl,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[m]):+m<t&&(g.state=jl,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[m])}if(o1(function(){n.state===Pl&&(n.state=s1,n.timer.restart(l,n.delay,n.time),l(p))}),n.state=m0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===m0){for(n.state=Pl,a=new Array(h=n.tween.length),m=0,f=-1;m<h;++m)(g=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=g);a.length=f+1}}function l(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=h0,1),f=-1,h=a.length;++f<h;)a[f].call(e,m);n.state===h0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=jl,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Rl(e,t){var n=e.__transition,i,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((i=n[u]).name!==t){s=!1;continue}a=i.state>m0&&i.state<h0,i.state=jl,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[u]}s&&delete e.__transition}}function mP(e){return this.each(function(){Rl(this,e)})}function hP(e,t){var n,i;return function(){var a=Kn(this,e),s=a.tween;if(s!==n){i=n=s;for(var u=0,l=i.length;u<l;++u)if(i[u].name===t){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function yP(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var s=Kn(this,e),u=s.tween;if(u!==i){a=(i=u).slice();for(var l={name:t,value:n},d=0,p=a.length;d<p;++d)if(a[d].name===t){a[d]=l;break}d===p&&a.push(l)}s.tween=a}}function gP(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=jn(this.node(),n).tween,a=0,s=i.length,u;a<s;++a)if((u=i[a]).name===e)return u.value;return null}return this.each((t==null?hP:yP)(n,e,t))}function Q0(e,t,n){var i=e._id;return e.each(function(){var a=Kn(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return jn(a,i).value[t]}}function Hk(e,t){var n;return(typeof t=="number"?Hn:t instanceof To?Dl:(n=To(t))?(t=n,Dl):Fk)(e,t)}function vP(e){return function(){this.removeAttribute(e)}}function xP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wP(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===i?s:s=t(i=u,n)}}function bP(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===i?s:s=t(i=u,n)}}function qP(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function SP(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function CP(e,t){var n=sc(e),i=n==="transform"?iP:Hk;return this.attrTween(e,typeof t=="function"?(n.local?SP:qP)(n,i,Q0(this,"attr."+e,t)):t==null?(n.local?xP:vP)(n):(n.local?bP:wP)(n,i,t))}function kP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function MP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function EP(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&MP(e,s)),n}return a._value=t,a}function IP(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&kP(e,s)),n}return a._value=t,a}function NP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=sc(e);return this.tween(n,(i.local?EP:IP)(i,t))}function TP(e,t){return function(){Y0(this,e).delay=+t.apply(this,arguments)}}function PP(e,t){return t=+t,function(){Y0(this,e).delay=t}}function jP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TP:PP)(t,e)):jn(this.node(),t).delay}function RP(e,t){return function(){Kn(this,e).duration=+t.apply(this,arguments)}}function OP(e,t){return t=+t,function(){Kn(this,e).duration=t}}function VP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?RP:OP)(t,e)):jn(this.node(),t).duration}function FP(e,t){if(typeof t!="function")throw new Error;return function(){Kn(this,e).ease=t}}function AP(e){var t=this._id;return arguments.length?this.each(FP(t,e)):jn(this.node(),t).ease}function LP(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kn(this,e).ease=n}}function DP(e){if(typeof e!="function")throw new Error;return this.each(LP(this._id,e))}function BP(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new yi(i,this._parents,this._name,this._id)}function zP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,s=Math.min(i,a),u=new Array(i),l=0;l<s;++l)for(var d=t[l],p=n[l],m=d.length,f=u[l]=new Array(m),h,g=0;g<m;++g)(h=d[g]||p[g])&&(f[g]=h);for(;l<i;++l)u[l]=t[l];return new yi(u,this._parents,this._name,this._id)}function $P(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function HP(e,t,n){var i,a,s=$P(t)?Y0:Kn;return function(){var u=s(this,e),l=u.on;l!==i&&(a=(i=l).copy()).on(t,n),u.on=a}}function WP(e,t){var n=this._id;return arguments.length<2?jn(this.node(),n).on.on(e):this.each(HP(n,e,t))}function UP(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function GP(){return this.on("end.remove",UP(this._id))}function KP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=H0(e));for(var i=this._groups,a=i.length,s=new Array(a),u=0;u<a;++u)for(var l=i[u],d=l.length,p=s[u]=new Array(d),m,f,h=0;h<d;++h)(m=l[h])&&(f=e.call(m,m.__data__,h,l))&&("__data__"in m&&(f.__data__=m.__data__),p[h]=f,lc(p[h],t,n,h,p,jn(m,n)));return new yi(s,this._parents,t,n)}function YP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xk(e));for(var i=this._groups,a=i.length,s=[],u=[],l=0;l<a;++l)for(var d=i[l],p=d.length,m,f=0;f<p;++f)if(m=d[f]){for(var h=e.call(m,m.__data__,f,d),g,x=jn(m,n),q=0,w=h.length;q<w;++q)(g=h[q])&&lc(g,t,n,q,h,x);s.push(h),u.push(m)}return new yi(s,u,t,n)}var QP=Qs.prototype.constructor;function XP(){return new QP(this._groups,this._parents)}function ZP(e,t){var n,i,a;return function(){var s=ba(this,e),u=(this.style.removeProperty(e),ba(this,e));return s===u?null:s===n&&u===i?a:a=t(n=s,i=u)}}function Wk(e){return function(){this.style.removeProperty(e)}}function JP(e,t,n){var i,a=n+"",s;return function(){var u=ba(this,e);return u===a?null:u===i?s:s=t(i=u,n)}}function ej(e,t,n){var i,a,s;return function(){var u=ba(this,e),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),ba(this,e))),u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l))}}function tj(e,t){var n,i,a,s="style."+t,u="end."+s,l;return function(){var d=Kn(this,e),p=d.on,m=d.value[s]==null?l||(l=Wk(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(u,a=m),d.on=i}}function rj(e,t,n){var i=(e+="")=="transform"?nP:Hk;return t==null?this.styleTween(e,ZP(e,i)).on("end.style."+e,Wk(e)):typeof t=="function"?this.styleTween(e,ej(e,i,Q0(this,"style."+e,t))).each(tj(this._id,e)):this.styleTween(e,JP(e,i,t),n).on("end.style."+e,null)}function nj(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function ij(e,t,n){var i,a;function s(){var u=t.apply(this,arguments);return u!==a&&(i=(a=u)&&nj(e,u,n)),i}return s._value=t,s}function oj(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ij(e,t,n??""))}function aj(e){return function(){this.textContent=e}}function sj(e){return function(){var t=e(this);this.textContent=t??""}}function uj(e){return this.tween("text",typeof e=="function"?sj(Q0(this,"text",e)):aj(e==null?"":e+""))}function lj(e){return function(t){this.textContent=e.call(this,t)}}function cj(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&lj(a)),t}return i._value=e,i}function dj(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cj(e))}function pj(){for(var e=this._name,t=this._id,n=Uk(),i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)if(d=u[p]){var m=jn(d,t);lc(d,e,n,p,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new yi(i,this._parents,e,n)}function fj(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(s,u){var l={value:u},d={value:function(){--a===0&&s()}};n.each(function(){var p=Kn(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),p.on=t}),a===0&&s()})}var _j=0;function yi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Uk(){return++_j}var fi=Qs.prototype;yi.prototype={constructor:yi,select:KP,selectAll:YP,selectChild:fi.selectChild,selectChildren:fi.selectChildren,filter:BP,merge:zP,selection:XP,transition:pj,call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:WP,attr:CP,attrTween:NP,style:rj,styleTween:oj,text:uj,textTween:dj,remove:GP,tween:gP,delay:jP,duration:VP,ease:AP,easeVarying:DP,end:fj,[Symbol.iterator]:fi[Symbol.iterator]};function mj(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hj={time:null,delay:0,duration:250,ease:mj};function yj(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gj(e){var t,n;e instanceof yi?(t=e._id,e=e._name):(t=Uk(),(n=hj).time=K0(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&lc(d,e,t,p,u,n||yj(d,t));return new yi(i,this._parents,e,t)}Qs.prototype.interrupt=mP;Qs.prototype.transition=gj;const yl=e=>()=>e;function vj(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function mi(e,t,n){this.k=e,this.x=t,this.y=n}mi.prototype={constructor:mi,scale:function(e){return e===1?this:new mi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cc=new mi(1,0,0);Gk.prototype=mi.prototype;function Gk(e){for(;!e.__zoom;)if(!(e=e.parentNode))return cc;return e.__zoom}function wp(e){e.stopImmediatePropagation()}function xs(e){e.preventDefault(),e.stopImmediatePropagation()}function xj(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wj(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function u1(){return this.__zoom||cc}function bj(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function qj(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sj(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function Kk(){var e=xj,t=wj,n=Sj,i=bj,a=qj,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=Tl,p=ac("start","zoom","end"),m,f,h,g=500,x=150,q=0,w=10;function b(R){R.property("__zoom",u1).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",V).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(R,X,H,te){var U=R.selection?R.selection():R;U.property("__zoom",u1),R!==U?I(R,X,H,te):U.interrupt().each(function(){M(this,arguments).event(te).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},b.scaleBy=function(R,X,H,te){b.scaleTo(R,function(){var U=this.__zoom.k,K=typeof X=="function"?X.apply(this,arguments):X;return U*K},H,te)},b.scaleTo=function(R,X,H,te){b.transform(R,function(){var U=t.apply(this,arguments),K=this.__zoom,ie=H==null?E(U):typeof H=="function"?H.apply(this,arguments):H,z=K.invert(ie),Z=typeof X=="function"?X.apply(this,arguments):X;return n(S(C(K,Z),ie,z),U,u)},H,te)},b.translateBy=function(R,X,H,te){b.transform(R,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),u)},null,te)},b.translateTo=function(R,X,H,te,U){b.transform(R,function(){var K=t.apply(this,arguments),ie=this.__zoom,z=te==null?E(K):typeof te=="function"?te.apply(this,arguments):te;return n(cc.translate(z[0],z[1]).scale(ie.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof H=="function"?-H.apply(this,arguments):-H),K,u)},te,U)};function C(R,X){return X=Math.max(s[0],Math.min(s[1],X)),X===R.k?R:new mi(X,R.x,R.y)}function S(R,X,H){var te=X[0]-H[0]*R.k,U=X[1]-H[1]*R.k;return te===R.x&&U===R.y?R:new mi(R.k,te,U)}function E(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function I(R,X,H,te){R.on("start.zoom",function(){M(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(te).end()}).tween("zoom",function(){var U=this,K=arguments,ie=M(U,K).event(te),z=t.apply(U,K),Z=H==null?E(z):typeof H=="function"?H.apply(U,K):H,_e=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),W=U.__zoom,ee=typeof X=="function"?X.apply(U,K):X,oe=d(W.invert(Z).concat(_e/W.k),ee.invert(Z).concat(_e/ee.k));return function(ue){if(ue===1)ue=ee;else{var se=oe(ue),ge=_e/se[2];ue=new mi(ge,Z[0]-se[0]*ge,Z[1]-se[1]*ge)}ie.zoom(null,ue)}})}function M(R,X,H){return!H&&R.__zooming||new T(R,X)}function T(R,X){this.that=R,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,X),this.taps=0}T.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,X){return this.mouse&&R!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var X=Wr(this.that).datum();p.call(R,this.that,new vj(R,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:p}),X)}};function P(R,...X){if(!e.apply(this,arguments))return;var H=M(this,X).event(R),te=this.__zoom,U=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,i.apply(this,arguments)))),K=kn(R);if(H.wheel)(H.mouse[0][0]!==K[0]||H.mouse[0][1]!==K[1])&&(H.mouse[1]=te.invert(H.mouse[0]=K)),clearTimeout(H.wheel);else{if(te.k===U)return;H.mouse=[K,te.invert(K)],Rl(this),H.start()}xs(R),H.wheel=setTimeout(ie,x),H.zoom("mouse",n(S(C(te,U),H.mouse[0],H.mouse[1]),H.extent,u));function ie(){H.wheel=null,H.end()}}function j(R,...X){if(h||!e.apply(this,arguments))return;var H=R.currentTarget,te=M(this,X,!0).event(R),U=Wr(R.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",_e,!0),K=kn(R,H),ie=R.clientX,z=R.clientY;Tk(R.view),wp(R),te.mouse=[K,this.__zoom.invert(K)],Rl(this),te.start();function Z(W){if(xs(W),!te.moved){var ee=W.clientX-ie,oe=W.clientY-z;te.moved=ee*ee+oe*oe>q}te.event(W).zoom("mouse",n(S(te.that.__zoom,te.mouse[0]=kn(W,H),te.mouse[1]),te.extent,u))}function _e(W){U.on("mousemove.zoom mouseup.zoom",null),Pk(W.view,te.moved),xs(W),te.event(W).end()}}function D(R,...X){if(e.apply(this,arguments)){var H=this.__zoom,te=kn(R.changedTouches?R.changedTouches[0]:R,this),U=H.invert(te),K=H.k*(R.shiftKey?.5:2),ie=n(S(C(H,K),te,U),t.apply(this,X),u);xs(R),l>0?Wr(this).transition().duration(l).call(I,ie,te,R):Wr(this).call(b.transform,ie,te,R)}}function V(R,...X){if(e.apply(this,arguments)){var H=R.touches,te=H.length,U=M(this,X,R.changedTouches.length===te).event(R),K,ie,z,Z;for(wp(R),ie=0;ie<te;++ie)z=H[ie],Z=kn(z,this),Z=[Z,this.__zoom.invert(Z),z.identifier],U.touch0?!U.touch1&&U.touch0[2]!==Z[2]&&(U.touch1=Z,U.taps=0):(U.touch0=Z,K=!0,U.taps=1+!!m);m&&(m=clearTimeout(m)),K&&(U.taps<2&&(f=Z[0],m=setTimeout(function(){m=null},g)),Rl(this),U.start())}}function F(R,...X){if(this.__zooming){var H=M(this,X).event(R),te=R.changedTouches,U=te.length,K,ie,z,Z;for(xs(R),K=0;K<U;++K)ie=te[K],z=kn(ie,this),H.touch0&&H.touch0[2]===ie.identifier?H.touch0[0]=z:H.touch1&&H.touch1[2]===ie.identifier&&(H.touch1[0]=z);if(ie=H.that.__zoom,H.touch1){var _e=H.touch0[0],W=H.touch0[1],ee=H.touch1[0],oe=H.touch1[1],ue=(ue=ee[0]-_e[0])*ue+(ue=ee[1]-_e[1])*ue,se=(se=oe[0]-W[0])*se+(se=oe[1]-W[1])*se;ie=C(ie,Math.sqrt(ue/se)),z=[(_e[0]+ee[0])/2,(_e[1]+ee[1])/2],Z=[(W[0]+oe[0])/2,(W[1]+oe[1])/2]}else if(H.touch0)z=H.touch0[0],Z=H.touch0[1];else return;H.zoom("touch",n(S(ie,z,Z),H.extent,u))}}function Q(R,...X){if(this.__zooming){var H=M(this,X).event(R),te=R.changedTouches,U=te.length,K,ie;for(wp(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),K=0;K<U;++K)ie=te[K],H.touch0&&H.touch0[2]===ie.identifier?delete H.touch0:H.touch1&&H.touch1[2]===ie.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(ie=kn(ie,this),Math.hypot(f[0]-ie[0],f[1]-ie[1])<w)){var z=Wr(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:yl(+R),b):i},b.filter=function(R){return arguments.length?(e=typeof R=="function"?R:yl(!!R),b):e},b.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:yl(!!R),b):a},b.extent=function(R){return arguments.length?(t=typeof R=="function"?R:yl([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),b):t},b.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],b):[s[0],s[1]]},b.translateExtent=function(R){return arguments.length?(u[0][0]=+R[0][0],u[1][0]=+R[1][0],u[0][1]=+R[0][1],u[1][1]=+R[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(R){return arguments.length?(n=R,b):n},b.duration=function(R){return arguments.length?(l=+R,b):l},b.interpolate=function(R){return arguments.length?(d=R,b):d},b.on=function(){var R=p.on.apply(p,arguments);return R===p?b:R},b.clickDistance=function(R){return arguments.length?(q=(R=+R)*R,b):Math.sqrt(q)},b.tapDistance=function(R){return arguments.length?(w=+R,b):w},b}const Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ls=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yk=["Enter"," ","Escape"],Qk={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Sa;(function(e){e.Strict="strict",e.Loose="loose"})(Sa||(Sa={}));var No;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(No||(No={}));var Ds;(function(e){e.Partial="partial",e.Full="full"})(Ds||(Ds={}));const Xk={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ui;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ui||(Ui={}));var Hl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hl||(Hl={}));var $e;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($e||($e={}));const l1={[$e.Left]:$e.Right,[$e.Right]:$e.Left,[$e.Top]:$e.Bottom,[$e.Bottom]:$e.Top};function Zk(e){return e===null?null:e?"valid":"invalid"}const Jk=e=>"id"in e&&"source"in e&&"target"in e,Cj=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),X0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Zs=(e,t=[0,0])=>{const{width:n,height:i}=gi(e),a=e.origin??t,s=n*a[0],u=i*a[1];return{x:e.position.x-s,y:e.position.y-u}},kj=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):X0(a)?a:t.nodeLookup.get(a.id));const l=u?Wl(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return dc(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return pc(n)},Js=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=dc(n,Wl(a)),i=!0)}),i?pc(n):{x:0,y:0,width:0,height:0}},Z0=(e,t,[n,i,a]=[0,0,1],s=!1,u=!1)=>{const l={...tu(t,[n,i,a]),width:t.width/a,height:t.height/a},d=[];for(const p of e.values()){const{measured:m,selectable:f=!0,hidden:h=!1}=p;if(u&&!f||h)continue;const g=m.width??p.width??p.initialWidth??null,x=m.height??p.height??p.initialHeight??null,q=Bs(l,ka(p)),w=(g??0)*(x??0),b=s&&q>0;(!p.internals.handleBounds||b||q>=w||p.dragging)&&d.push(p)}return d},Mj=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Ej(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&n.set(a.id,a)}),n}async function Ij({nodes:e,width:t,height:n,panZoom:i,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const l=Ej(e,u),d=Js(l),p=J0(d,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await i.setViewport(p,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function eM({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),l=u.parentId?n.get(u.parentId):void 0,{x:d,y:p}=l?l.internals.positionAbsolute:{x:0,y:0},m=u.origin??i;let f=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!l)s==null||s("005",Gn.error005());else{const g=l.measured.width,x=l.measured.height;g&&x&&(f=[[d,p],[d+g,p+x]])}else l&&Ma(u.extent)&&(f=[[u.extent[0][0]+d,u.extent[0][1]+p],[u.extent[1][0]+d,u.extent[1][1]+p]]);const h=Ma(f)?jo(t,f,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Gn.error015())),{position:{x:h.x-d+(u.measured.width??0)*m[0],y:h.y-p+(u.measured.height??0)*m[1]},positionAbsolute:h}}async function Nj({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:a}){const s=new Set(e.map(h=>h.id)),u=[];for(const h of n){if(h.deletable===!1)continue;const g=s.has(h.id),x=!g&&h.parentId&&u.find(q=>q.id===h.parentId);(g||x)&&u.push(h)}const l=new Set(t.map(h=>h.id)),d=i.filter(h=>h.deletable!==!1),m=Mj(u,d);for(const h of d)l.has(h.id)&&!m.find(x=>x.id===h.id)&&m.push(h);if(!a)return{edges:m,nodes:u};const f=await a({nodes:u,edges:m});return typeof f=="boolean"?f?{edges:m,nodes:u}:{edges:[],nodes:[]}:f}const Ca=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),jo=(e={x:0,y:0},t,n)=>({x:Ca(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ca(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function tM(e,t,n){const{width:i,height:a}=gi(n),{x:s,y:u}=n.internals.positionAbsolute;return jo(e,[[s,u],[s+i,u+a]],t)}const c1=(e,t,n)=>e<t?Ca(Math.abs(e-t),1,t)/t:e>n?-Ca(Math.abs(e-n),1,t)/t:0,rM=(e,t,n=15,i=40)=>{const a=c1(e.x,i,t.width-i)*n,s=c1(e.y,i,t.height-i)*n;return[a,s]},dc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),y0=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),pc=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),ka=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Wl=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},nM=(e,t)=>pc(dc(y0(e),y0(t))),Bs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},d1=e=>Nn(e.width)&&Nn(e.height)&&Nn(e.x)&&Nn(e.y),Nn=e=>!isNaN(e)&&isFinite(e),Tj=(e,t)=>{},eu=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),tu=({x:e,y:t},[n,i,a],s=!1,u=[1,1])=>{const l={x:(e-n)/a,y:(t-i)/a};return s?eu(l,u):l},Ul=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i});function ha(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Pj(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=ha(e,n),a=ha(e,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof e=="object"){const i=ha(e.top??e.y??0,n),a=ha(e.bottom??e.y??0,n),s=ha(e.left??e.x??0,t),u=ha(e.right??e.x??0,t);return{top:i,right:u,bottom:a,left:s,x:s+u,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function jj(e,t,n,i,a,s){const{x:u,y:l}=Ul(e,[t,n,i]),{x:d,y:p}=Ul({x:e.x+e.width,y:e.y+e.height},[t,n,i]),m=a-d,f=s-p;return{left:Math.floor(u),top:Math.floor(l),right:Math.floor(m),bottom:Math.floor(f)}}const J0=(e,t,n,i,a,s)=>{const u=Pj(s,t,n),l=(t-u.x)/e.width,d=(n-u.y)/e.height,p=Math.min(l,d),m=Ca(p,i,a),f=e.x+e.width/2,h=e.y+e.height/2,g=t/2-f*m,x=n/2-h*m,q=jj(e,g,x,m,t,n),w={left:Math.min(q.left-u.left,0),top:Math.min(q.top-u.top,0),right:Math.min(q.right-u.right,0),bottom:Math.min(q.bottom-u.bottom,0)};return{x:g-w.left+w.right,y:x-w.top+w.bottom,zoom:m}},zs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ma(e){return e!=null&&e!=="parent"}function gi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function iM(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function oM(e,t={width:0,height:0},n,i,a){const s={...e},u=i.get(n);if(u){const l=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function p1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Rj(){let e,t;return{promise:new Promise((i,a)=>{e=i,t=a}),resolve:e,reject:t}}function Oj(e){return{...Qk,...e||{}}}function Is(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:a}){const{x:s,y:u}=Tn(e),l=tu({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},i),{x:d,y:p}=n?eu(l,t):l;return{xSnapped:d,ySnapped:p,...l}}const eg=e=>({width:e.offsetWidth,height:e.offsetHeight}),aM=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Vj=["INPUT","SELECT","TEXTAREA"];function sM(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Vj.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const uM=e=>"clientX"in e,Tn=(e,t)=>{var s,u;const n=uM(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},f1=(e,t,n,i,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...eg(u)}})};function lM({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l}){const d=e*.125+a*.375+u*.375+n*.125,p=t*.125+s*.375+l*.375+i*.125,m=Math.abs(d-e),f=Math.abs(p-t);return[d,p,m,f]}function gl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _1({pos:e,x1:t,y1:n,x2:i,y2:a,c:s}){switch(e){case $e.Left:return[t-gl(t-i,s),n];case $e.Right:return[t+gl(i-t,s),n];case $e.Top:return[t,n-gl(n-a,s)];case $e.Bottom:return[t,n+gl(a-n,s)]}}function tg({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,curvature:u=.25}){const[l,d]=_1({pos:n,x1:e,y1:t,x2:i,y2:a,c:u}),[p,m]=_1({pos:s,x1:i,y1:a,x2:e,y2:t,c:u}),[f,h,g,x]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:l,sourceControlY:d,targetControlX:p,targetControlY:m});return[`M${e},${t} C${l},${d} ${p},${m} ${i},${a}`,f,h,g,x]}function cM({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(i-t)/2,l=i<t?i+u:i-u;return[s,l,a,u]}function Fj({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const u=a&&n?i+1e3:i,l=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+l}function Aj({sourceNode:e,targetNode:t,width:n,height:i,transform:a}){const s=dc(Wl(e),Wl(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:i/a[2]};return Bs(u,pc(s))>0}const Lj=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Dj=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),g0=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||Lj;let a;return Jk(e)?a={...e}:a={...e,id:i(e)},Dj(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function rg({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,s,u,l]=cM({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,s,u,l]}const m1={[$e.Left]:{x:-1,y:0},[$e.Right]:{x:1,y:0},[$e.Top]:{x:0,y:-1},[$e.Bottom]:{x:0,y:1}},Bj=({source:e,sourcePosition:t=$e.Bottom,target:n})=>t===$e.Left||t===$e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},h1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zj({source:e,sourcePosition:t=$e.Bottom,target:n,targetPosition:i=$e.Top,center:a,offset:s,stepPosition:u}){const l=m1[t],d=m1[i],p={x:e.x+l.x*s,y:e.y+l.y*s},m={x:n.x+d.x*s,y:n.y+d.y*s},f=Bj({source:p,sourcePosition:t,target:m}),h=f.x!==0?"x":"y",g=f[h];let x=[],q,w;const b={x:0,y:0},C={x:0,y:0},[,,S,E]=cM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[h]*d[h]===-1){h==="x"?(q=a.x??p.x+(m.x-p.x)*u,w=a.y??(p.y+m.y)/2):(q=a.x??(p.x+m.x)/2,w=a.y??p.y+(m.y-p.y)*u);const M=[{x:q,y:p.y},{x:q,y:m.y}],T=[{x:p.x,y:w},{x:m.x,y:w}];l[h]===g?x=h==="x"?M:T:x=h==="x"?T:M}else{const M=[{x:p.x,y:m.y}],T=[{x:m.x,y:p.y}];if(h==="x"?x=l.x===g?T:M:x=l.y===g?M:T,t===i){const F=Math.abs(e[h]-n[h]);if(F<=s){const Q=Math.min(s-1,s-F);l[h]===g?b[h]=(p[h]>e[h]?-1:1)*Q:C[h]=(m[h]>n[h]?-1:1)*Q}}if(t!==i){const F=h==="x"?"y":"x",Q=l[h]===d[F],R=p[F]>m[F],X=p[F]<m[F];(l[h]===1&&(!Q&&R||Q&&X)||l[h]!==1&&(!Q&&X||Q&&R))&&(x=h==="x"?M:T)}const P={x:p.x+b.x,y:p.y+b.y},j={x:m.x+C.x,y:m.y+C.y},D=Math.max(Math.abs(P.x-x[0].x),Math.abs(j.x-x[0].x)),V=Math.max(Math.abs(P.y-x[0].y),Math.abs(j.y-x[0].y));D>=V?(q=(P.x+j.x)/2,w=x[0].y):(q=x[0].x,w=(P.y+j.y)/2)}return[[e,{x:p.x+b.x,y:p.y+b.y},...x,{x:m.x+C.x,y:m.y+C.y},n],q,w,S,E]}function $j(e,t,n,i){const a=Math.min(h1(e,t)/2,h1(t,n)/2,i),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+a*p},${u}Q ${s},${u} ${s},${u+a*m}`}const l=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${u+a*d}Q ${s},${u} ${s+a*l},${u}`}function v0({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,borderRadius:u=5,centerX:l,centerY:d,offset:p=20,stepPosition:m=.5}){const[f,h,g,x,q]=zj({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:s,center:{x:l,y:d},offset:p,stepPosition:m});return[f.reduce((b,C,S)=>{let E="";return S>0&&S<f.length-1?E=$j(f[S-1],C,f[S+1],u):E=`${S===0?"M":"L"}${C.x} ${C.y}`,b+=E,b},""),h,g,x,q]}function y1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Hj(e){var f;const{sourceNode:t,targetNode:n}=e;if(!y1(t)||!y1(n))return null;const i=t.internals.handleBounds||g1(t.handles),a=n.internals.handleBounds||g1(n.handles),s=v1((i==null?void 0:i.source)??[],e.sourceHandle),u=v1(e.connectionMode===Sa.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(f=e.onError)==null||f.call(e,"008",Gn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||$e.Bottom,d=(u==null?void 0:u.position)||$e.Top,p=Ro(t,s,l),m=Ro(n,u,d);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:l,targetPosition:d}}function g1(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Ro(e,t,n=$e.Left,i=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??gi(e);if(i)return{x:a+u/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case $e.Top:return{x:a+u/2,y:s};case $e.Right:return{x:a+u,y:s+l/2};case $e.Bottom:return{x:a+u/2,y:s+l};case $e.Left:return{x:a,y:s+l/2}}}function v1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function x0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Wj(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,l)=>([l.markerStart||i,l.markerEnd||a].forEach(d=>{if(d&&typeof d=="object"){const p=x0(d,t);s.has(p)||(u.push({id:p,color:d.color||n,...d}),s.add(p))}}),u),[]).sort((u,l)=>u.id.localeCompare(l.id))}const dM=1e3,Uj=10,ng={nodeOrigin:[0,0],nodeExtent:Ls,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Gj={...ng,checkEquality:!0};function ig(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Kj(e,t,n){const i=ig(ng,n);for(const a of e.values())if(a.parentId)ag(a,e,t,i);else{const s=Zs(a,i.nodeOrigin),u=Ma(a.extent)?a.extent:i.nodeExtent,l=jo(s,u,gi(a));a.internals.positionAbsolute=l}}function Yj(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],i=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&i.push(s)}return{source:n,target:i}}function og(e){return e==="manual"}function w0(e,t,n,i={}){var p,m;const a=ig(Gj,i),s={i:0},u=new Map(t),l=a!=null&&a.elevateNodesOnSelect&&!og(a.zIndexMode)?dM:0;let d=e.length>0;t.clear(),n.clear();for(const f of e){let h=u.get(f.id);if(a.checkEquality&&f===(h==null?void 0:h.internals.userNode))t.set(f.id,h);else{const g=Zs(f,a.nodeOrigin),x=Ma(f.extent)?f.extent:a.nodeExtent,q=jo(g,x,gi(f));h={...a.defaults,...f,measured:{width:(p=f.measured)==null?void 0:p.width,height:(m=f.measured)==null?void 0:m.height},internals:{positionAbsolute:q,handleBounds:Yj(f,h),z:pM(f,l,a.zIndexMode),userNode:f}},t.set(f.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(d=!1),f.parentId&&ag(h,t,n,i,s)}return d}function Qj(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ag(e,t,n,i,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:l,zIndexMode:d}=ig(ng,i),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Qj(e,n),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*Uj),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const f=s&&!og(d)?dM:0,{x:h,y:g,z:x}=Xj(e,m,u,l,f,d),{positionAbsolute:q}=e.internals,w=h!==q.x||g!==q.y;(w||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:h,y:g}:q,z:x}})}function pM(e,t,n){const i=Nn(e.zIndex)?e.zIndex:0;return og(n)?i:i+(e.selected?t:0)}function Xj(e,t,n,i,a,s){const{x:u,y:l}=t.internals.positionAbsolute,d=gi(e),p=Zs(e,n),m=Ma(e.extent)?jo(p,e.extent,d):p;let f=jo({x:u+m.x,y:l+m.y},i,d);e.extent==="parent"&&(f=tM(f,d,t));const h=pM(e,a,s),g=t.internals.z??0;return{x:f.x,y:f.y,z:g>=h?g+1:h}}function sg(e,t,n,i=[0,0]){var u;const a=[],s=new Map;for(const l of e){const d=t.get(l.parentId);if(!d)continue;const p=((u=s.get(l.parentId))==null?void 0:u.expandedRect)??ka(d),m=nM(p,l.rect);s.set(l.parentId,{expandedRect:m,parent:d})}return s.size>0&&s.forEach(({expandedRect:l,parent:d},p)=>{var S;const m=d.internals.positionAbsolute,f=gi(d),h=d.origin??i,g=l.x<m.x?Math.round(Math.abs(m.x-l.x)):0,x=l.y<m.y?Math.round(Math.abs(m.y-l.y)):0,q=Math.max(f.width,Math.round(l.width)),w=Math.max(f.height,Math.round(l.height)),b=(q-f.width)*h[0],C=(w-f.height)*h[1];(g>0||x>0||b||C)&&(a.push({id:p,type:"position",position:{x:d.position.x-g+b,y:d.position.y-x+C}}),(S=n.get(p))==null||S.forEach(E=>{e.some(I=>I.id===E.id)||a.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+x}})})),(f.width<l.width||f.height<l.height||g||x)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:q+(g?h[0]*g-b:0),height:w+(x?h[1]*x-C:0)}})}),a}function Zj(e,t,n,i,a,s,u){const l=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!l)return{changes:[],updatedInternals:d};const p=[],m=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(m.transform),h=[];for(const g of e.values()){const x=t.get(g.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),d=!0;continue}const q=eg(g.nodeElement),w=x.measured.width!==q.width||x.measured.height!==q.height;if(!!(q.width&&q.height&&(w||!x.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),S=Ma(x.extent)?x.extent:s;let{positionAbsolute:E}=x.internals;x.parentId&&x.extent==="parent"?E=tM(E,q,t.get(x.parentId)):S&&(E=jo(E,S,q));const I={...x,measured:q,internals:{...x.internals,positionAbsolute:E,handleBounds:{source:f1("source",g.nodeElement,C,f,x.id),target:f1("target",g.nodeElement,C,f,x.id)}}};t.set(x.id,I),x.parentId&&ag(I,t,n,{nodeOrigin:a,zIndexMode:u}),d=!0,w&&(p.push({id:x.id,type:"dimensions",dimensions:q}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:ka(I,a)}))}}if(h.length>0){const g=sg(h,t,n,a);p.push(...g)}return{changes:p,updatedInternals:d}}async function Jj({delta:e,panZoom:t,transform:n,translateExtent:i,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],i),l=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(l)}function x1(e,t,n,i,a,s){let u=a;const l=i.get(u)||new Map;i.set(u,l.set(n,t)),u=`${a}-${e}`;const d=i.get(u)||new Map;if(i.set(u,d.set(n,t)),s){u=`${a}-${e}-${s}`;const p=i.get(u)||new Map;i.set(u,p.set(n,t))}}function fM(e,t,n){e.clear(),t.clear();for(const i of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:l=null}=i,d={edgeId:i.id,source:a,target:s,sourceHandle:u,targetHandle:l},p=`${a}-${u}--${s}-${l}`,m=`${s}-${l}--${a}-${u}`;x1("source",d,m,e,a,u),x1("target",d,p,e,s,l),t.set(i.id,i)}}function _M(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:_M(n,t):!1}function w1(e,t,n){var a;let i=e;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function eR(e,t,n,i){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===i)&&(!u.parentId||!_M(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const l=e.get(s);l&&a.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function bp({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var u,l,d;const a=[];for(const[p,m]of t){const f=(u=n.get(p))==null?void 0:u.internals.userNode;f&&a.push({...f,position:m.position,dragging:i})}if(!e)return[a[0],a];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((d=t.get(e))==null?void 0:d.position)||s.position,dragging:i}:a[0],a]}function tR({dragItems:e,snapGrid:t,x:n,y:i}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:i-a.distance.y},u=eu(s,t);return{x:u.x-s.x,y:u.y-s.y}}function rR({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:a}){let s={x:null,y:null},u=0,l=new Map,d=!1,p={x:0,y:0},m=null,f=!1,h=null,g=!1,x=!1,q=null;function w({noDragClassName:C,handleSelector:S,domNode:E,isSelectable:I,nodeId:M,nodeClickDistance:T=0}){h=Wr(E);function P({x:F,y:Q}){const{nodeLookup:R,nodeExtent:X,snapGrid:H,snapToGrid:te,nodeOrigin:U,onNodeDrag:K,onSelectionDrag:ie,onError:z,updateNodePositions:Z}=t();s={x:F,y:Q};let _e=!1;const W=l.size>1,ee=W&&X?y0(Js(l)):null,oe=W&&te?tR({dragItems:l,snapGrid:H,x:F,y:Q}):null;for(const[ue,se]of l){if(!R.has(ue))continue;let ge={x:F-se.distance.x,y:Q-se.distance.y};te&&(ge=oe?{x:Math.round(ge.x+oe.x),y:Math.round(ge.y+oe.y)}:eu(ge,H));let Ee=null;if(W&&X&&!se.extent&&ee){const{positionAbsolute:Ne}=se.internals,Pe=Ne.x-ee.x+X[0][0],Oe=Ne.x+se.measured.width-ee.x2+X[1][0],We=Ne.y-ee.y+X[0][1],Be=Ne.y+se.measured.height-ee.y2+X[1][1];Ee=[[Pe,We],[Oe,Be]]}const{position:Re,positionAbsolute:Ie}=eM({nodeId:ue,nextPosition:ge,nodeLookup:R,nodeExtent:Ee||X,nodeOrigin:U,onError:z});_e=_e||se.position.x!==Re.x||se.position.y!==Re.y,se.position=Re,se.internals.positionAbsolute=Ie}if(x=x||_e,!!_e&&(Z(l,!0),q&&(i||K||!M&&ie))){const[ue,se]=bp({nodeId:M,dragItems:l,nodeLookup:R});i==null||i(q,l,ue,se),K==null||K(q,ue,se),M||ie==null||ie(q,se)}}async function j(){if(!m)return;const{transform:F,panBy:Q,autoPanSpeed:R,autoPanOnNodeDrag:X}=t();if(!X){d=!1,cancelAnimationFrame(u);return}const[H,te]=rM(p,m,R);(H!==0||te!==0)&&(s.x=(s.x??0)-H/F[2],s.y=(s.y??0)-te/F[2],await Q({x:H,y:te})&&P(s)),u=requestAnimationFrame(j)}function D(F){var W;const{nodeLookup:Q,multiSelectionActive:R,nodesDraggable:X,transform:H,snapGrid:te,snapToGrid:U,selectNodesOnDrag:K,onNodeDragStart:ie,onSelectionDragStart:z,unselectNodesAndEdges:Z}=t();f=!0,(!K||!I)&&!R&&M&&((W=Q.get(M))!=null&&W.selected||Z()),I&&K&&M&&(e==null||e(M));const _e=Is(F.sourceEvent,{transform:H,snapGrid:te,snapToGrid:U,containerBounds:m});if(s=_e,l=eR(Q,X,_e,M),l.size>0&&(n||ie||!M&&z)){const[ee,oe]=bp({nodeId:M,dragItems:l,nodeLookup:Q});n==null||n(F.sourceEvent,l,ee,oe),ie==null||ie(F.sourceEvent,ee,oe),M||z==null||z(F.sourceEvent,oe)}}const V=jk().clickDistance(T).on("start",F=>{const{domNode:Q,nodeDragThreshold:R,transform:X,snapGrid:H,snapToGrid:te}=t();m=(Q==null?void 0:Q.getBoundingClientRect())||null,g=!1,x=!1,q=F.sourceEvent,R===0&&D(F),s=Is(F.sourceEvent,{transform:X,snapGrid:H,snapToGrid:te,containerBounds:m}),p=Tn(F.sourceEvent,m)}).on("drag",F=>{const{autoPanOnNodeDrag:Q,transform:R,snapGrid:X,snapToGrid:H,nodeDragThreshold:te,nodeLookup:U}=t(),K=Is(F.sourceEvent,{transform:R,snapGrid:X,snapToGrid:H,containerBounds:m});if(q=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||M&&!U.has(M))&&(g=!0),!g){if(!d&&Q&&f&&(d=!0,j()),!f){const ie=Tn(F.sourceEvent,m),z=ie.x-p.x,Z=ie.y-p.y;Math.sqrt(z*z+Z*Z)>te&&D(F)}(s.x!==K.xSnapped||s.y!==K.ySnapped)&&l&&f&&(p=Tn(F.sourceEvent,m),P(K))}}).on("end",F=>{if(!(!f||g)&&(d=!1,f=!1,cancelAnimationFrame(u),l.size>0)){const{nodeLookup:Q,updateNodePositions:R,onNodeDragStop:X,onSelectionDragStop:H}=t();if(x&&(R(l,!1),x=!1),a||X||!M&&H){const[te,U]=bp({nodeId:M,dragItems:l,nodeLookup:Q,dragging:!1});a==null||a(F.sourceEvent,l,te,U),X==null||X(F.sourceEvent,te,U),M||H==null||H(F.sourceEvent,U)}}}).filter(F=>{const Q=F.target;return!F.button&&(!C||!w1(Q,`.${C}`,E))&&(!S||w1(Q,S,E))});h.call(V)}function b(){h==null||h.on(".drag",null)}return{update:w,destroy:b}}function nR(e,t,n){const i=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Bs(a,ka(s))>0&&i.push(s);return i}const iR=250;function oR(e,t,n,i){var l,d;let a=[],s=1/0;const u=nR(e,n,t+iR);for(const p of u){const m=[...((l=p.internals.handleBounds)==null?void 0:l.source)??[],...((d=p.internals.handleBounds)==null?void 0:d.target)??[]];for(const f of m){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:h,y:g}=Ro(p,f,f.position,!0),x=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));x>t||(x<s?(a=[{...f,x:h,y:g}],s=x):x===s&&a.push({...f,x:h,y:g}))}}if(!a.length)return null;if(a.length>1){const p=i.type==="source"?"target":"source";return a.find(m=>m.type===p)??a[0]}return a[0]}function mM(e,t,n,i,a,s=!1){var p,m,f;const u=i.get(e);if(!u)return null;const l=a==="strict"?(p=u.internals.handleBounds)==null?void 0:p[t]:[...((m=u.internals.handleBounds)==null?void 0:m.source)??[],...((f=u.internals.handleBounds)==null?void 0:f.target)??[]],d=(n?l==null?void 0:l.find(h=>h.id===n):l==null?void 0:l[0])??null;return d&&s?{...d,...Ro(u,d,d.position,!0)}:d}function hM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function aR(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const yM=()=>!0;function sR(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:l,nodeLookup:d,lib:p,autoPanOnConnect:m,flowId:f,panBy:h,cancelConnection:g,onConnectStart:x,onConnect:q,onConnectEnd:w,isValidConnection:b=yM,onReconnectEnd:C,updateConnection:S,getTransform:E,getFromHandle:I,autoPanSpeed:M,dragThreshold:T=1,handleDomNode:P}){const j=aM(e.target);let D=0,V;const{x:F,y:Q}=Tn(e),R=hM(s,P),X=l==null?void 0:l.getBoundingClientRect();let H=!1;if(!X||!R)return;const te=mM(a,R,i,d,t);if(!te)return;let U=Tn(e,X),K=!1,ie=null,z=!1,Z=null;function _e(){if(!m||!X)return;const[Re,Ie]=rM(U,X,M);h({x:Re,y:Ie}),D=requestAnimationFrame(_e)}const W={...te,nodeId:a,type:R,position:te.position},ee=d.get(a);let ue={inProgress:!0,isValid:null,from:Ro(ee,W,$e.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:ee,to:U,toHandle:null,toPosition:l1[W.position],toNode:null,pointer:U};function se(){H=!0,S(ue),x==null||x(e,{nodeId:a,handleId:i,handleType:R})}T===0&&se();function ge(Re){if(!H){const{x:Be,y:ut}=Tn(Re),st=Be-F,Mt=ut-Q;if(!(st*st+Mt*Mt>T*T))return;se()}if(!I()||!W){Ee(Re);return}const Ie=E();U=Tn(Re,X),V=oR(tu(U,Ie,!1,[1,1]),n,d,W),K||(_e(),K=!0);const Ne=gM(Re,{handle:V,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:u?"target":"source",isValidConnection:b,doc:j,lib:p,flowId:f,nodeLookup:d});Z=Ne.handleDomNode,ie=Ne.connection,z=aR(!!V,Ne.isValid);const Pe=d.get(a),Oe=Pe?Ro(Pe,W,$e.Left,!0):ue.from,We={...ue,from:Oe,isValid:z,to:Ne.toHandle&&z?Ul({x:Ne.toHandle.x,y:Ne.toHandle.y},Ie):U,toHandle:Ne.toHandle,toPosition:z&&Ne.toHandle?Ne.toHandle.position:l1[W.position],toNode:Ne.toHandle?d.get(Ne.toHandle.nodeId):null,pointer:U};S(We),ue=We}function Ee(Re){if(!("touches"in Re&&Re.touches.length>0)){if(H){(V||Z)&&ie&&z&&(q==null||q(ie));const{inProgress:Ie,...Ne}=ue,Pe={...Ne,toPosition:ue.toHandle?ue.toPosition:null};w==null||w(Re,Pe),s&&(C==null||C(Re,Pe))}g(),cancelAnimationFrame(D),K=!1,z=!1,ie=null,Z=null,j.removeEventListener("mousemove",ge),j.removeEventListener("mouseup",Ee),j.removeEventListener("touchmove",ge),j.removeEventListener("touchend",Ee)}}j.addEventListener("mousemove",ge),j.addEventListener("mouseup",Ee),j.addEventListener("touchmove",ge),j.addEventListener("touchend",Ee)}function gM(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:a,fromType:s,doc:u,lib:l,flowId:d,isValidConnection:p=yM,nodeLookup:m}){const f=s==="target",h=t?u.querySelector(`.${l}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:x}=Tn(e),q=u.elementFromPoint(g,x),w=q!=null&&q.classList.contains(`${l}-flow__handle`)?q:h,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const C=hM(void 0,w),S=w.getAttribute("data-nodeid"),E=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!S||!C)return b;const T={source:f?S:i,sourceHandle:f?E:a,target:f?i:S,targetHandle:f?a:E};b.connection=T;const j=I&&M&&(n===Sa.Strict?f&&C==="source"||!f&&C==="target":S!==i||E!==a);b.isValid=j&&p(T),b.toHandle=mM(S,C,E,m,n,!0)}return b}const b0={onPointerDown:sR,isValid:gM};function uR({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const a=Wr(e);function s({translateExtent:l,width:d,height:p,zoomStep:m=1,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const x=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const E=n(),I=S.sourceEvent.ctrlKey&&zs()?10:1,M=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*m,T=E[2]*Math.pow(2,M*I);t.scaleTo(T)};let q=[0,0];const w=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(q=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},b=S=>{const E=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const I=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],M=[I[0]-q[0],I[1]-q[1]];q=I;const T=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),P={x:E[0]-M[0]*T,y:E[1]-M[1]*T},j=[[0,0],[d,p]];t.setViewportConstrained({x:P.x,y:P.y,zoom:E[2]},j,l)},C=Kk().on("start",w).on("zoom",f?b:null).on("zoom.wheel",h?x:null);a.call(C,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:kn}}const fc=e=>({x:e.x,y:e.y,zoom:e.k}),qp=({x:e,y:t,zoom:n})=>cc.translate(e,t).scale(n),ya=(e,t)=>e.target.closest(`.${t}`),vM=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),lR=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Sp=(e,t=0,n=lR,i=()=>{})=>{const a=typeof t=="number"&&t>0;return a||i(),a?e.transition().duration(t).ease(n).on("end",i):e},xM=e=>{const t=e.ctrlKey&&zs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function cR({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:d,onPanZoomEnd:p}){return m=>{if(ya(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(m.ctrlKey&&u){const w=kn(m),b=xM(m),C=f*Math.pow(2,b);i.scaleTo(n,C,w,m);return}const h=m.deltaMode===1?20:1;let g=a===No.Vertical?0:m.deltaX*h,x=a===No.Horizontal?0:m.deltaY*h;!zs()&&m.shiftKey&&a!==No.Vertical&&(g=m.deltaY*h,x=0),i.translateBy(n,-(g/f)*s,-(x/f)*s,{internal:!0});const q=fc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(m,q),e.panScrollTimeout=setTimeout(()=>{p==null||p(m,q),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(m,q))}}function dR({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,a){const s=i.type==="wheel",u=!t&&s&&!i.ctrlKey,l=ya(i,e);if(i.ctrlKey&&s&&l&&i.preventDefault(),u||l)return null;i.preventDefault(),n.call(this,i,a)}}function pR({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,u,l;if((s=i.sourceEvent)!=null&&s.internal)return;const a=fc(i.transform);e.mouseButton=((u=i.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,a))}}function fR({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:a}){return s=>{var u,l;e.usedRightMouseButton=!!(n&&vM(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||i([s.transform.x,s.transform.y,s.transform.k]),a&&!((l=s.sourceEvent)!=null&&l.internal)&&(a==null||a(s.sourceEvent,fc(s.transform)))}}function _R({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var l;if(!((l=u.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&vM(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,i(!1),a)){const d=fc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,d)},n?150:0)}}}function mR({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:l,noPanClassName:d,lib:p,connectionInProgress:m}){return f=>{var w;const h=e||t,g=n&&f.ctrlKey,x=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(ya(f,`${p}-flow__node`)||ya(f,`${p}-flow__edge`)))return!0;if(!i&&!h&&!a&&!s&&!n||u||m&&!x||ya(f,l)&&x||ya(f,d)&&(!x||a&&x&&!e)||!n&&f.ctrlKey&&x)return!1;if(!n&&f.type==="touchstart"&&((w=f.touches)==null?void 0:w.length)>1)return f.preventDefault(),!1;if(!h&&!a&&!g&&x||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const q=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||x)&&q}}function hR({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),f=Kk().scaleExtent([t,n]).translateExtent(i),h=Wr(e).call(f);C({x:a.x,y:a.y,zoom:Ca(a.zoom,t,n)},[[0,0],[m.width,m.height]],i);const g=h.on("wheel.zoom"),x=h.on("dblclick.zoom");f.wheelDelta(xM);function q(V,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Tl).transform(Sp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),V)}):Promise.resolve(!1)}function w({noWheelClassName:V,noPanClassName:F,onPaneContextMenu:Q,userSelectionActive:R,panOnScroll:X,panOnDrag:H,panOnScrollMode:te,panOnScrollSpeed:U,preventScrolling:K,zoomOnPinch:ie,zoomOnScroll:z,zoomOnDoubleClick:Z,zoomActivationKeyPressed:_e,lib:W,onTransformChange:ee,connectionInProgress:oe,paneClickDistance:ue,selectionOnDrag:se}){R&&!p.isZoomingOrPanning&&b();const ge=X&&!_e&&!R;f.clickDistance(se?1/0:!Nn(ue)||ue<0?0:ue);const Ee=ge?cR({zoomPanValues:p,noWheelClassName:V,d3Selection:h,d3Zoom:f,panOnScrollMode:te,panOnScrollSpeed:U,zoomOnPinch:ie,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):dR({noWheelClassName:V,preventScrolling:K,d3ZoomHandler:g});if(h.on("wheel.zoom",Ee,{passive:!1}),!R){const Ie=pR({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:u});f.on("start",Ie);const Ne=fR({zoomPanValues:p,panOnDrag:H,onPaneContextMenu:!!Q,onPanZoom:s,onTransformChange:ee});f.on("zoom",Ne);const Pe=_R({zoomPanValues:p,panOnDrag:H,panOnScroll:X,onPaneContextMenu:Q,onPanZoomEnd:l,onDraggingChange:d});f.on("end",Pe)}const Re=mR({zoomActivationKeyPressed:_e,panOnDrag:H,zoomOnScroll:z,panOnScroll:X,zoomOnDoubleClick:Z,zoomOnPinch:ie,userSelectionActive:R,noPanClassName:F,noWheelClassName:V,lib:W,connectionInProgress:oe});f.filter(Re),Z?h.on("dblclick.zoom",x):h.on("dblclick.zoom",null)}function b(){f.on("zoom",null)}async function C(V,F,Q){const R=qp(V),X=f==null?void 0:f.constrain()(R,F,Q);return X&&await q(X),new Promise(H=>H(X))}async function S(V,F){const Q=qp(V);return await q(Q,F),new Promise(R=>R(Q))}function E(V){if(h){const F=qp(V),Q=h.property("__zoom");(Q.k!==V.zoom||Q.x!==V.x||Q.y!==V.y)&&(f==null||f.transform(h,F,null,{sync:!0}))}}function I(){const V=h?Gk(h.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function M(V,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Tl).scaleTo(Sp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),V)}):Promise.resolve(!1)}function T(V,F){return h?new Promise(Q=>{f==null||f.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Tl).scaleBy(Sp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>Q(!0)),V)}):Promise.resolve(!1)}function P(V){f==null||f.scaleExtent(V)}function j(V){f==null||f.translateExtent(V)}function D(V){const F=!Nn(V)||V<0?0:V;f==null||f.clickDistance(F)}return{update:w,destroy:b,setViewport:S,setViewportConstrained:C,getViewport:I,scaleTo:M,scaleBy:T,setScaleExtent:P,setTranslateExtent:j,syncViewport:E,setClickDistance:D}}var Ea;(function(e){e.Line="line",e.Handle="handle"})(Ea||(Ea={}));function yR({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:a,affectsY:s}){const u=e-t,l=n-i,d=[u>0?1:u<0?-1:0,l>0?1:l<0?-1:0];return u&&a&&(d[0]=d[0]*-1),l&&s&&(d[1]=d[1]*-1),d}function b1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:a}}function $i(e,t){return Math.max(0,t-e)}function Hi(e,t){return Math.max(0,e-t)}function vl(e,t,n){return Math.max(0,t-e,e-n)}function q1(e,t){return e?!t:t}function gR(e,t,n,i,a,s,u,l){let{affectsX:d,affectsY:p}=t;const{isHorizontal:m,isVertical:f}=t,h=m&&f,{xSnapped:g,ySnapped:x}=n,{minWidth:q,maxWidth:w,minHeight:b,maxHeight:C}=i,{x:S,y:E,width:I,height:M,aspectRatio:T}=e;let P=Math.floor(m?g-e.pointerX:0),j=Math.floor(f?x-e.pointerY:0);const D=I+(d?-P:P),V=M+(p?-j:j),F=-s[0]*I,Q=-s[1]*M;let R=vl(D,q,w),X=vl(V,b,C);if(u){let U=0,K=0;d&&P<0?U=$i(S+P+F,u[0][0]):!d&&P>0&&(U=Hi(S+D+F,u[1][0])),p&&j<0?K=$i(E+j+Q,u[0][1]):!p&&j>0&&(K=Hi(E+V+Q,u[1][1])),R=Math.max(R,U),X=Math.max(X,K)}if(l){let U=0,K=0;d&&P>0?U=Hi(S+P,l[0][0]):!d&&P<0&&(U=$i(S+D,l[1][0])),p&&j>0?K=Hi(E+j,l[0][1]):!p&&j<0&&(K=$i(E+V,l[1][1])),R=Math.max(R,U),X=Math.max(X,K)}if(a){if(m){const U=vl(D/T,b,C)*T;if(R=Math.max(R,U),u){let K=0;!d&&!p||d&&!p&&h?K=Hi(E+Q+D/T,u[1][1])*T:K=$i(E+Q+(d?P:-P)/T,u[0][1])*T,R=Math.max(R,K)}if(l){let K=0;!d&&!p||d&&!p&&h?K=$i(E+D/T,l[1][1])*T:K=Hi(E+(d?P:-P)/T,l[0][1])*T,R=Math.max(R,K)}}if(f){const U=vl(V*T,q,w)/T;if(X=Math.max(X,U),u){let K=0;!d&&!p||p&&!d&&h?K=Hi(S+V*T+F,u[1][0])/T:K=$i(S+(p?j:-j)*T+F,u[0][0])/T,X=Math.max(X,K)}if(l){let K=0;!d&&!p||p&&!d&&h?K=$i(S+V*T,l[1][0])/T:K=Hi(S+(p?j:-j)*T,l[0][0])/T,X=Math.max(X,K)}}}j=j+(j<0?X:-X),P=P+(P<0?R:-R),a&&(h?D>V*T?j=(q1(d,p)?-P:P)/T:P=(q1(d,p)?-j:j)*T:m?(j=P/T,p=d):(P=j*T,d=p));const H=d?S+P:S,te=p?E+j:E;return{width:I+(d?-P:P),height:M+(p?-j:j),x:s[0]*P*(d?-1:1)+H,y:s[1]*j*(p?-1:1)+te}}const wM={width:0,height:0,x:0,y:0},vR={...wM,pointerX:0,pointerY:0,aspectRatio:1};function xR(e){return[[0,0],[e.measured.width,e.measured.height]]}function wR(e,t,n){const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,l=n[0]*s,d=n[1]*u;return[[i-l,a-d],[i+s-l,a+u-d]]}function bR({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:a}){const s=Wr(e);let u={controlDirection:b1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:p,boundaries:m,keepAspectRatio:f,resizeDirection:h,onResizeStart:g,onResize:x,onResizeEnd:q,shouldResize:w}){let b={...wM},C={...vR};u={boundaries:m,resizeDirection:h,keepAspectRatio:f,controlDirection:b1(p)};let S,E=null,I=[],M,T,P,j=!1;const D=jk().on("start",V=>{const{nodeLookup:F,transform:Q,snapGrid:R,snapToGrid:X,nodeOrigin:H,paneDomNode:te}=n();if(S=F.get(t),!S)return;E=(te==null?void 0:te.getBoundingClientRect())??null;const{xSnapped:U,ySnapped:K}=Is(V.sourceEvent,{transform:Q,snapGrid:R,snapToGrid:X,containerBounds:E});b={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},C={...b,pointerX:U,pointerY:K,aspectRatio:b.width/b.height},M=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(M=F.get(S.parentId),T=M&&S.extent==="parent"?xR(M):void 0),I=[],P=void 0;for(const[ie,z]of F)if(z.parentId===t&&(I.push({id:ie,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const Z=wR(z,S,z.origin??H);P?P=[[Math.min(Z[0][0],P[0][0]),Math.min(Z[0][1],P[0][1])],[Math.max(Z[1][0],P[1][0]),Math.max(Z[1][1],P[1][1])]]:P=Z}g==null||g(V,{...b})}).on("drag",V=>{const{transform:F,snapGrid:Q,snapToGrid:R,nodeOrigin:X}=n(),H=Is(V.sourceEvent,{transform:F,snapGrid:Q,snapToGrid:R,containerBounds:E}),te=[];if(!S)return;const{x:U,y:K,width:ie,height:z}=b,Z={},_e=S.origin??X,{width:W,height:ee,x:oe,y:ue}=gR(C,u.controlDirection,H,u.boundaries,u.keepAspectRatio,_e,T,P),se=W!==ie,ge=ee!==z,Ee=oe!==U&&se,Re=ue!==K&&ge;if(!Ee&&!Re&&!se&&!ge)return;if((Ee||Re||_e[0]===1||_e[1]===1)&&(Z.x=Ee?oe:b.x,Z.y=Re?ue:b.y,b.x=Z.x,b.y=Z.y,I.length>0)){const Oe=oe-U,We=ue-K;for(const Be of I)Be.position={x:Be.position.x-Oe+_e[0]*(W-ie),y:Be.position.y-We+_e[1]*(ee-z)},te.push(Be)}if((se||ge)&&(Z.width=se&&(!u.resizeDirection||u.resizeDirection==="horizontal")?W:b.width,Z.height=ge&&(!u.resizeDirection||u.resizeDirection==="vertical")?ee:b.height,b.width=Z.width,b.height=Z.height),M&&S.expandParent){const Oe=_e[0]*(Z.width??0);Z.x&&Z.x<Oe&&(b.x=Oe,C.x=C.x-(Z.x-Oe));const We=_e[1]*(Z.height??0);Z.y&&Z.y<We&&(b.y=We,C.y=C.y-(Z.y-We))}const Ie=yR({width:b.width,prevWidth:ie,height:b.height,prevHeight:z,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Ne={...b,direction:Ie};(w==null?void 0:w(V,Ne))!==!1&&(j=!0,x==null||x(V,Ne),i(Z,te))}).on("end",V=>{j&&(q==null||q(V,{...b}),a==null||a({...b}),j=!1)});s.call(D)}function d(){s.on(".drag",null)}return{update:l,destroy:d}}var Cp={exports:{}},kp={},Mp={exports:{}},Ep={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function qR(){if(S1)return Ep;S1=1;var e=Ys();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function l(f,h){var g=h(),x=i({inst:{value:g,getSnapshot:h}}),q=x[0].inst,w=x[1];return s(function(){q.value=g,q.getSnapshot=h,d(q)&&w({inst:q})},[f,g,h]),a(function(){return d(q)&&w({inst:q}),f(function(){d(q)&&w({inst:q})})},[f]),u(g),g}function d(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!n(f,g)}catch{return!0}}function p(f,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:l;return Ep.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Ep}var C1;function SR(){return C1||(C1=1,Mp.exports=qR()),Mp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function CR(){if(k1)return kp;k1=1;var e=Ys(),t=SR();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,l=e.useMemo,d=e.useDebugValue;return kp.useSyncExternalStoreWithSelector=function(p,m,f,h,g){var x=s(null);if(x.current===null){var q={hasValue:!1,value:null};x.current=q}else q=x.current;x=l(function(){function b(M){if(!C){if(C=!0,S=M,M=h(M),g!==void 0&&q.hasValue){var T=q.value;if(g(T,M))return E=T}return E=M}if(T=E,i(S,M))return T;var P=h(M);return g!==void 0&&g(T,P)?(S=M,T):(S=M,E=P)}var C=!1,S,E,I=f===void 0?null:f;return[function(){return b(m())},I===null?void 0:function(){return b(I())}]},[m,f,h,g]);var w=a(p,x[0],x[1]);return u(function(){q.hasValue=!0,q.value=w},[w]),d(w),w},kp}var M1;function kR(){return M1||(M1=1,Cp.exports=CR()),Cp.exports}var MR=kR();const ER=Ta(MR),IR={},E1=e=>{let t;const n=new Set,i=(m,f)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const g=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,g))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(IR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,d);return d},NR=e=>e?E1(e):E1,{useDebugValue:TR}=yk,{useSyncExternalStoreWithSelector:PR}=ER,jR=e=>e;function bM(e,t=jR,n){const i=PR(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return TR(i),i}const I1=(e,t)=>{const n=NR(e),i=(a,s=t)=>bM(n,a,s);return Object.assign(i,n),i},RR=(e,t)=>e?I1(e,t):I1;function xt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var OR=gk();const VR=Ta(OR),_c=A.createContext(null),FR=_c.Provider,qM=Gn.error001();function Je(e,t){const n=A.useContext(_c);if(n===null)throw new Error(qM);return bM(n,e,t)}function wt(){const e=A.useContext(_c);if(e===null)throw new Error(qM);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const N1={display:"none"},AR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},SM="react-flow__node-desc",CM="react-flow__edge-desc",LR="react-flow__aria-live",DR=e=>e.ariaLiveMessage,BR=e=>e.ariaLabelConfig;function zR({rfId:e}){const t=Je(DR);return _.jsx("div",{id:`${LR}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:AR,children:t})}function $R({rfId:e,disableKeyboardA11y:t}){const n=Je(BR);return _.jsxs(_.Fragment,{children:[_.jsx("div",{id:`${SM}-${e}`,style:N1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),_.jsx("div",{id:`${CM}-${e}`,style:N1,children:n["edge.a11yDescription.default"]}),!t&&_.jsx(zR,{rfId:e})]})}const Ia=A.forwardRef(({position:e="top-left",children:t,className:n,style:i,...a},s)=>{const u=`${e}`.split("-");return _.jsx("div",{className:Vt(["react-flow__panel",n,...u]),style:i,ref:s,...a,children:t})});Ia.displayName="Panel";function HR({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:_.jsx(Ia,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const WR=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},xl=e=>e.id;function UR(e,t){return xt(e.selectedNodes.map(xl),t.selectedNodes.map(xl))&&xt(e.selectedEdges.map(xl),t.selectedEdges.map(xl))}function GR({onSelectionChange:e}){const t=wt(),{selectedNodes:n,selectedEdges:i}=Je(WR,UR);return A.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,i,e]),null}const KR=e=>!!e.onSelectionChangeHandlers;function YR({onSelectionChange:e}){const t=Je(KR);return e||t?_.jsx(GR,{onSelectionChange:e}):null}const kM=[0,0],QR={x:0,y:0,zoom:1},XR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],T1=[...XR,"rfId"],ZR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),P1={translateExtent:Ls,nodeOrigin:kM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function JR(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:l,setDefaultNodesAndEdges:d}=Je(ZR,xt),p=wt();A.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=P1,l()}),[]);const m=A.useRef(P1);return A.useEffect(()=>{for(const f of T1){const h=e[f],g=m.current[f];h!==g&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?n(h):f==="minZoom"?i(h):f==="maxZoom"?a(h):f==="translateExtent"?s(h):f==="nodeExtent"?u(h):f==="ariaLabelConfig"?p.setState({ariaLabelConfig:Oj(h)}):f==="fitView"?p.setState({fitViewQueued:h}):f==="fitViewOptions"?p.setState({fitViewOptions:h}):p.setState({[f]:h})))}m.current=e},T1.map(f=>e[f])),null}function j1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function e4(e){var i;const[t,n]=A.useState(e==="system"?null:e);return A.useEffect(()=>{if(e!=="system"){n(e);return}const a=j1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(i=j1())!=null&&i.matches?"dark":"light"}const R1=typeof document<"u"?document:null;function $s(e=null,t={target:R1,actInsideInputWithModifier:!0}){const[n,i]=A.useState(!1),a=A.useRef(!1),s=A.useRef(new Set([])),[u,l]=A.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((f,h)=>f.concat(...h),[]);return[p,m]}return[[],[]]},[e]);return A.useEffect(()=>{const d=(t==null?void 0:t.target)??R1,p=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const m=g=>{var w,b;if(a.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!a.current||a.current&&!p)&&sM(g))return!1;const q=V1(g.code,l);if(s.current.add(g[q]),O1(u,s.current,!1)){const C=((b=(w=g.composedPath)==null?void 0:w.call(g))==null?void 0:b[0])||g.target,S=(C==null?void 0:C.nodeName)==="BUTTON"||(C==null?void 0:C.nodeName)==="A";t.preventDefault!==!1&&(a.current||!S)&&g.preventDefault(),i(!0)}},f=g=>{const x=V1(g.code,l);O1(u,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(g[x]),g.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),n}function O1(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function V1(e,t){return t.includes(e)?"code":"key"}const t4=()=>{const e=wt();return A.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:a,minZoom:s,maxZoom:u,panZoom:l}=e.getState(),d=J0(t,i,a,s,u,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:d}=u.getBoundingClientRect(),p={x:t.x-l,y:t.y-d},m=n.snapGrid??a,f=n.snapToGrid??s;return tu(p,i,f,m)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),u=Ul(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function MM(e,t){const n=[],i=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const u=i.get(s.id);u?u.push(s):i.set(s.id,[s])}for(const s of t){const u=i.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const l={...s};for(const d of u)r4(d,l);n.push(l)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function r4(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function EM(e,t){return MM(e,t)}function IM(e,t){return MM(e,t)}function Mo(e,t){return{id:e,type:"select",selected:t}}function ga(e,t=new Set,n=!1){const i=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),i.push(Mo(s.id,u)))}return i}function F1({items:e=[],lookup:t}){var a;const n=[],i=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const l=t.get(u.id),d=((a=l==null?void 0:l.internals)==null?void 0:a.userNode)??l;d!==void 0&&d!==u&&n.push({id:u.id,item:u,type:"replace"}),d===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function A1(e){return{id:e.id,type:"remove"}}const L1=e=>Cj(e),n4=e=>Jk(e);function NM(e){return A.forwardRef(e)}const i4=typeof window<"u"?A.useLayoutEffect:A.useEffect;function D1(e){const[t,n]=A.useState(BigInt(0)),[i]=A.useState(()=>o4(()=>n(a=>a+BigInt(1))));return i4(()=>{const a=i.get();a.length&&(e(a),i.reset())},[t]),i}function o4(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const TM=A.createContext(null);function a4({children:e}){const t=wt(),n=A.useCallback(l=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:m,onNodesChange:f,nodeLookup:h,fitViewQueued:g,onNodesChangeMiddlewareMap:x}=t.getState();let q=d;for(const b of l)q=typeof b=="function"?b(q):b;let w=F1({items:q,lookup:h});for(const b of x.values())w=b(w);m&&p(q),w.length>0?f==null||f(w):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:C,setNodes:S}=t.getState();b&&S(C)})},[]),i=D1(n),a=A.useCallback(l=>{const{edges:d=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:f,edgeLookup:h}=t.getState();let g=d;for(const x of l)g=typeof x=="function"?x(g):x;m?p(g):f&&f(F1({items:g,lookup:h}))},[]),s=D1(a),u=A.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return _.jsx(TM.Provider,{value:u,children:e})}function s4(){const e=A.useContext(TM);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const u4=e=>!!e.panZoom;function ug(){const e=t4(),t=wt(),n=s4(),i=Je(u4),a=A.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),u=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},d=f=>{var b,C;const{nodeLookup:h,nodeOrigin:g}=t.getState(),x=L1(f)?f:h.get(f.id),q=x.parentId?oM(x.position,x.measured,x.parentId,h,g):x.position,w={...x,position:q,width:((b=x.measured)==null?void 0:b.width)??x.width,height:((C=x.measured)==null?void 0:C.height)??x.height};return ka(w)},p=(f,h,g={replace:!1})=>{u(x=>x.map(q=>{if(q.id===f){const w=typeof h=="function"?h(q):h;return g.replace&&L1(w)?w:{...q,...w}}return q}))},m=(f,h,g={replace:!1})=>{l(x=>x.map(q=>{if(q.id===f){const w=typeof h=="function"?h(q):h;return g.replace&&n4(w)?w:{...q,...w}}return q}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var h;return(h=s(f))==null?void 0:h.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(h=>({...h}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:u,setEdges:l,addNodes:f=>{const h=Array.isArray(f)?f:[f];n.nodeQueue.push(g=>[...g,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];n.edgeQueue.push(g=>[...g,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:g}=t.getState(),[x,q,w]=g;return{nodes:f.map(b=>({...b})),edges:h.map(b=>({...b})),viewport:{x,y:q,zoom:w}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:g,edges:x,onNodesDelete:q,onEdgesDelete:w,triggerNodeChanges:b,triggerEdgeChanges:C,onDelete:S,onBeforeDelete:E}=t.getState(),{nodes:I,edges:M}=await Nj({nodesToRemove:f,edgesToRemove:h,nodes:g,edges:x,onBeforeDelete:E}),T=M.length>0,P=I.length>0;if(T){const j=M.map(A1);w==null||w(M),C(j)}if(P){const j=I.map(A1);q==null||q(I),b(j)}return(P||T)&&(S==null||S({nodes:I,edges:M})),{deletedNodes:I,deletedEdges:M}},getIntersectingNodes:(f,h=!0,g)=>{const x=d1(f),q=x?f:d(f),w=g!==void 0;return q?(g||t.getState().nodes).filter(b=>{const C=t.getState().nodeLookup.get(b.id);if(C&&!x&&(b.id===f.id||!C.internals.positionAbsolute))return!1;const S=ka(w?b:C),E=Bs(S,q);return h&&E>0||E>=S.width*S.height||E>=q.width*q.height}):[]},isNodeIntersecting:(f,h,g=!0)=>{const q=d1(f)?f:d(f);if(!q)return!1;const w=Bs(q,h);return g&&w>0||w>=h.width*h.height||w>=q.width*q.height},updateNode:p,updateNodeData:(f,h,g={replace:!1})=>{p(f,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},updateEdge:m,updateEdgeData:(f,h,g={replace:!1})=>{m(f,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:g}=t.getState();return kj(f,{nodeLookup:h,nodeOrigin:g})},getHandleConnections:({type:f,id:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}-${f}${h?`-${h}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:f,handleId:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}${f?h?`-${f}-${h}`:`-${f}`:""}`))==null?void 0:x.values())??[])},fitView:async f=>{const h=t.getState().fitViewResolver??Rj();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),n.nodeQueue.push(g=>[...g]),h.promise}}},[]);return A.useMemo(()=>({...a,...e,viewportInitialized:i}),[i])}const B1=e=>e.selected,l4=typeof window<"u"?window:void 0;function c4({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=wt(),{deleteElements:i}=ug(),a=$s(e,{actInsideInputWithModifier:!1}),s=$s(t,{target:l4});A.useEffect(()=>{if(a){const{edges:u,nodes:l}=n.getState();i({nodes:l.filter(B1),edges:u.filter(B1)}),n.setState({nodesSelectionActive:!1})}},[a]),A.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function d4(e){const t=wt();A.useEffect(()=>{const n=()=>{var a,s,u,l;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const i=eg(e.current);(i.height===0||i.width===0)&&((l=(u=t.getState()).onError)==null||l.call(u,"004",Gn.error004())),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const mc={position:"absolute",width:"100%",height:"100%",top:0,left:0},p4=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function f4({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=No.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:d,translateExtent:p,minZoom:m,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:g=!0,children:x,noWheelClassName:q,noPanClassName:w,onViewportChange:b,isControlledViewport:C,paneClickDistance:S,selectionOnDrag:E}){const I=wt(),M=A.useRef(null),{userSelectionActive:T,lib:P,connectionInProgress:j}=Je(p4,xt),D=$s(h),V=A.useRef();d4(M);const F=A.useCallback(Q=>{b==null||b({x:Q[0],y:Q[1],zoom:Q[2]}),C||I.setState({transform:Q})},[b,C]);return A.useEffect(()=>{if(M.current){V.current=hR({domNode:M.current,minZoom:m,maxZoom:f,translateExtent:p,viewport:d,onDraggingChange:H=>I.setState({paneDragging:H}),onPanZoomStart:(H,te)=>{const{onViewportChangeStart:U,onMoveStart:K}=I.getState();K==null||K(H,te),U==null||U(te)},onPanZoom:(H,te)=>{const{onViewportChange:U,onMove:K}=I.getState();K==null||K(H,te),U==null||U(te)},onPanZoomEnd:(H,te)=>{const{onViewportChangeEnd:U,onMoveEnd:K}=I.getState();K==null||K(H,te),U==null||U(te)}});const{x:Q,y:R,zoom:X}=V.current.getViewport();return I.setState({panZoom:V.current,transform:[Q,R,X],domNode:M.current.closest(".react-flow")}),()=>{var H;(H=V.current)==null||H.destroy()}}},[]),A.useEffect(()=>{var Q;(Q=V.current)==null||Q.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:w,userSelectionActive:T,noWheelClassName:q,lib:P,onTransformChange:F,connectionInProgress:j,selectionOnDrag:E,paneClickDistance:S})},[e,t,n,i,a,s,u,l,D,g,w,T,q,P,F,j,E,S]),_.jsx("div",{className:"react-flow__renderer",ref:M,style:mc,children:x})}const _4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function m4(){const{userSelectionActive:e,userSelectionRect:t}=Je(_4,xt);return e&&t?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Ip=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},h4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function y4({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ds.Full,panOnDrag:i,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:l,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:g,children:x}){const q=wt(),{userSelectionActive:w,elementsSelectable:b,dragging:C,connectionInProgress:S}=Je(h4,xt),E=b&&(e||w),I=A.useRef(null),M=A.useRef(),T=A.useRef(new Set),P=A.useRef(new Set),j=A.useRef(!1),D=U=>{if(j.current||S){j.current=!1;return}d==null||d(U),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},V=U=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){U.preventDefault();return}p==null||p(U)},F=m?U=>m(U):void 0,Q=U=>{j.current&&(U.stopPropagation(),j.current=!1)},R=U=>{var ee,oe;const{domNode:K}=q.getState();if(M.current=K==null?void 0:K.getBoundingClientRect(),!M.current)return;const ie=U.target===I.current;if(!ie&&!!U.target.closest(".nokey")||!e||!(s&&ie||t)||U.button!==0||!U.isPrimary)return;(oe=(ee=U.target)==null?void 0:ee.setPointerCapture)==null||oe.call(ee,U.pointerId),j.current=!1;const{x:_e,y:W}=Tn(U.nativeEvent,M.current);q.setState({userSelectionRect:{width:0,height:0,startX:_e,startY:W,x:_e,y:W}}),ie||(U.stopPropagation(),U.preventDefault())},X=U=>{const{userSelectionRect:K,transform:ie,nodeLookup:z,edgeLookup:Z,connectionLookup:_e,triggerNodeChanges:W,triggerEdgeChanges:ee,defaultEdgeOptions:oe,resetSelectedElements:ue}=q.getState();if(!M.current||!K)return;const{x:se,y:ge}=Tn(U.nativeEvent,M.current),{startX:Ee,startY:Re}=K;if(!j.current){const We=t?0:a;if(Math.hypot(se-Ee,ge-Re)<=We)return;ue(),u==null||u(U)}j.current=!0;const Ie={startX:Ee,startY:Re,x:se<Ee?se:Ee,y:ge<Re?ge:Re,width:Math.abs(se-Ee),height:Math.abs(ge-Re)},Ne=T.current,Pe=P.current;T.current=new Set(Z0(z,Ie,ie,n===Ds.Partial,!0).map(We=>We.id)),P.current=new Set;const Oe=(oe==null?void 0:oe.selectable)??!0;for(const We of T.current){const Be=_e.get(We);if(Be)for(const{edgeId:ut}of Be.values()){const st=Z.get(ut);st&&(st.selectable??Oe)&&P.current.add(ut)}}if(!p1(Ne,T.current)){const We=ga(z,T.current,!0);W(We)}if(!p1(Pe,P.current)){const We=ga(Z,P.current);ee(We)}q.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},H=U=>{var K,ie;U.button===0&&((ie=(K=U.target)==null?void 0:K.releasePointerCapture)==null||ie.call(K,U.pointerId),!w&&U.target===I.current&&q.getState().userSelectionRect&&(D==null||D(U)),q.setState({userSelectionActive:!1,userSelectionRect:null}),j.current&&(l==null||l(U),q.setState({nodesSelectionActive:T.current.size>0})))},te=i===!0||Array.isArray(i)&&i.includes(0);return _.jsxs("div",{className:Vt(["react-flow__pane",{draggable:te,dragging:C,selection:e}]),onClick:E?void 0:Ip(D,I),onContextMenu:Ip(V,I),onWheel:Ip(F,I),onPointerEnter:E?void 0:f,onPointerMove:E?X:h,onPointerUp:E?H:void 0,onPointerDownCapture:E?R:void 0,onClickCapture:E?Q:void 0,onPointerLeave:g,ref:I,style:mc,children:[x,_.jsx(m4,{})]})}function q0({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:l,onError:d}=t.getState(),p=l.get(e);if(!p){d==null||d("012",Gn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&u)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function PM({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}){const l=wt(),[d,p]=A.useState(!1),m=A.useRef();return A.useEffect(()=>{m.current=rR({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{q0({id:f,store:l,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),A.useEffect(()=>{var f,h;if(t)(f=m.current)==null||f.destroy();else if(e.current)return(h=m.current)==null||h.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var g;(g=m.current)==null||g.destroy()}},[n,i,t,s,e,a]),d}const g4=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function jM(){const e=wt();return A.useCallback(n=>{const{nodeExtent:i,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:l,updateNodePositions:d,nodeLookup:p,nodeOrigin:m}=e.getState(),f=new Map,h=g4(u),g=a?s[0]:5,x=a?s[1]:5,q=n.direction.x*g*n.factor,w=n.direction.y*x*n.factor;for(const[,b]of p){if(!h(b))continue;let C={x:b.internals.positionAbsolute.x+q,y:b.internals.positionAbsolute.y+w};a&&(C=eu(C,s));const{position:S,positionAbsolute:E}=eM({nodeId:b.id,nextPosition:C,nodeLookup:p,nodeExtent:i,nodeOrigin:m,onError:l});b.position=S,b.internals.positionAbsolute=E,f.set(b.id,b)}d(f)},[])}const lg=A.createContext(null),v4=lg.Provider;lg.Consumer;const RM=()=>A.useContext(lg),x4=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),w4=(e,t,n)=>i=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=i,{fromHandle:l,toHandle:d,isValid:p}=u,m=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:m,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Sa.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:m&&p}};function b4({type:e="source",position:t=$e.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:l,children:d,className:p,onMouseDown:m,onTouchStart:f,...h},g){var X,H;const x=u||null,q=e==="target",w=wt(),b=RM(),{connectOnClick:C,noPanClassName:S,rfId:E}=Je(x4,xt),{connectingFrom:I,connectingTo:M,clickConnecting:T,isPossibleEndHandle:P,connectionInProcess:j,clickConnectionInProcess:D,valid:V}=Je(w4(b,x,e),xt);b||(H=(X=w.getState()).onError)==null||H.call(X,"010",Gn.error010());const F=te=>{const{defaultEdgeOptions:U,onConnect:K,hasDefaultEdges:ie}=w.getState(),z={...U,...te};if(ie){const{edges:Z,setEdges:_e}=w.getState();_e(g0(z,Z))}K==null||K(z),l==null||l(z)},Q=te=>{if(!b)return;const U=uM(te.nativeEvent);if(a&&(U&&te.button===0||!U)){const K=w.getState();b0.onPointerDown(te.nativeEvent,{handleDomNode:te.currentTarget,autoPanOnConnect:K.autoPanOnConnect,connectionMode:K.connectionMode,connectionRadius:K.connectionRadius,domNode:K.domNode,nodeLookup:K.nodeLookup,lib:K.lib,isTarget:q,handleId:x,nodeId:b,flowId:K.rfId,panBy:K.panBy,cancelConnection:K.cancelConnection,onConnectStart:K.onConnectStart,onConnectEnd:K.onConnectEnd,updateConnection:K.updateConnection,onConnect:F,isValidConnection:n||K.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:K.autoPanSpeed,dragThreshold:K.connectionDragThreshold})}U?m==null||m(te):f==null||f(te)},R=te=>{const{onClickConnectStart:U,onClickConnectEnd:K,connectionClickStartHandle:ie,connectionMode:z,isValidConnection:Z,lib:_e,rfId:W,nodeLookup:ee,connection:oe}=w.getState();if(!b||!ie&&!a)return;if(!ie){U==null||U(te.nativeEvent,{nodeId:b,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:b,type:e,id:x}});return}const ue=aM(te.target),se=n||Z,{connection:ge,isValid:Ee}=b0.isValid(te.nativeEvent,{handle:{nodeId:b,id:x,type:e},connectionMode:z,fromNodeId:ie.nodeId,fromHandleId:ie.id||null,fromType:ie.type,isValidConnection:se,flowId:W,doc:ue,lib:_e,nodeLookup:ee});Ee&&ge&&F(ge);const Re=structuredClone(oe);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,K==null||K(te,Re),w.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${E}-${b}-${x}-${e}`,className:Vt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,p,{source:!q,target:q,connectable:i,connectablestart:a,connectableend:s,clickconnecting:T,connectingfrom:I,connectingto:M,valid:V,connectionindicator:i&&(!j||P)&&(j||D?s:a)}]),onMouseDown:Q,onTouchStart:Q,onClick:C?R:void 0,ref:g,...h,children:d})}const Hs=A.memo(NM(b4));function q4({data:e,isConnectable:t,sourcePosition:n=$e.Bottom}){return _.jsxs(_.Fragment,{children:[e==null?void 0:e.label,_.jsx(Hs,{type:"source",position:n,isConnectable:t})]})}function S4({data:e,isConnectable:t,targetPosition:n=$e.Top,sourcePosition:i=$e.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,_.jsx(Hs,{type:"source",position:i,isConnectable:t})]})}function C4(){return null}function k4({data:e,isConnectable:t,targetPosition:n=$e.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Gl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},z1={input:q4,default:S4,output:k4,group:C4};function M4(e){var t,n,i,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((i=e.style)==null?void 0:i.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const E4=e=>{const{width:t,height:n,x:i,y:a}=Js(e.nodeLookup,{filter:s=>!!s.selected});return{width:Nn(t)?t:null,height:Nn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${a}px)`}};function I4({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=wt(),{width:a,height:s,transformString:u,userSelectionActive:l}=Je(E4,xt),d=jM(),p=A.useRef(null);if(A.useEffect(()=>{var h;n||(h=p.current)==null||h.focus({preventScroll:!0})},[n]),PM({nodeRef:p}),l||!a||!s)return null;const m=e?h=>{const g=i.getState().nodes.filter(x=>x.selected);e(h,g)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(Gl,h.key)&&(h.preventDefault(),d({direction:Gl[h.key],factor:h.shiftKey?4:1}))};return _.jsx("div",{className:Vt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:_.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:a,height:s}})})}const $1=typeof window<"u"?window:void 0,N4=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function OM({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:m,selectionMode:f,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:q,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:E,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:j,translateExtent:D,minZoom:V,maxZoom:F,preventScrolling:Q,onSelectionContextMenu:R,noWheelClassName:X,noPanClassName:H,disableKeyboardA11y:te,onViewportChange:U,isControlledViewport:K}){const{nodesSelectionActive:ie,userSelectionActive:z}=Je(N4,xt),Z=$s(p,{target:$1}),_e=$s(q,{target:$1}),W=_e||P,ee=_e||E,oe=m&&W!==!0,ue=Z||z||oe;return c4({deleteKeyCode:d,multiSelectionKeyCode:x}),_.jsx(f4,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:S,panOnScroll:ee,panOnScrollSpeed:I,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:!Z&&W,defaultViewport:j,translateExtent:D,minZoom:V,maxZoom:F,zoomActivationKeyCode:w,preventScrolling:Q,noWheelClassName:X,noPanClassName:H,onViewportChange:U,isControlledViewport:K,paneClickDistance:l,selectionOnDrag:oe,children:_.jsxs(y4,{onSelectionStart:h,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:W,isSelecting:!!ue,selectionMode:f,selectionKeyPressed:Z,paneClickDistance:l,selectionOnDrag:oe,children:[e,ie&&_.jsx(I4,{onSelectionContextMenu:R,noPanClassName:H,disableKeyboardA11y:te})]})})}OM.displayName="FlowRenderer";const T4=A.memo(OM),P4=e=>t=>e?Z0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function j4(e){return Je(A.useCallback(P4(e),[e]),xt)}const R4=e=>e.updateNodeInternals;function O4(){const e=Je(R4),[t]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:a.target,force:!0})}),e(i)}));return A.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function V4({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const a=wt(),s=A.useRef(null),u=A.useRef(null),l=A.useRef(e.sourcePosition),d=A.useRef(e.targetPosition),p=A.useRef(t),m=n&&!!e.internals.handleBounds;return A.useEffect(()=>{s.current&&!e.hidden&&(!m||u.current!==s.current)&&(u.current&&(i==null||i.unobserve(u.current)),i==null||i.observe(s.current),u.current=s.current)},[m,e.hidden]),A.useEffect(()=>()=>{u.current&&(i==null||i.unobserve(u.current),u.current=null)},[]),A.useEffect(()=>{if(s.current){const f=p.current!==t,h=l.current!==e.sourcePosition,g=d.current!==e.targetPosition;(f||h||g)&&(p.current=t,l.current=e.sourcePosition,d.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function F4({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:l,elementsSelectable:d,nodesConnectable:p,nodesFocusable:m,resizeObserver:f,noDragClassName:h,noPanClassName:g,disableKeyboardA11y:x,rfId:q,nodeTypes:w,nodeClickDistance:b,onError:C}){const{node:S,internals:E,isParent:I}=Je(se=>{const ge=se.nodeLookup.get(e),Ee=se.parentLookup.has(e);return{node:ge,internals:ge.internals,isParent:Ee}},xt);let M=S.type||"default",T=(w==null?void 0:w[M])||z1[M];T===void 0&&(C==null||C("003",Gn.error003(M)),M="default",T=(w==null?void 0:w.default)||z1.default);const P=!!(S.draggable||l&&typeof S.draggable>"u"),j=!!(S.selectable||d&&typeof S.selectable>"u"),D=!!(S.connectable||p&&typeof S.connectable>"u"),V=!!(S.focusable||m&&typeof S.focusable>"u"),F=wt(),Q=iM(S),R=V4({node:S,nodeType:M,hasDimensions:Q,resizeObserver:f}),X=PM({nodeRef:R,disabled:S.hidden||!P,noDragClassName:h,handleSelector:S.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:b}),H=jM();if(S.hidden)return null;const te=gi(S),U=M4(S),K=j||P||t||n||i||a,ie=n?se=>n(se,{...E.userNode}):void 0,z=i?se=>i(se,{...E.userNode}):void 0,Z=a?se=>a(se,{...E.userNode}):void 0,_e=s?se=>s(se,{...E.userNode}):void 0,W=u?se=>u(se,{...E.userNode}):void 0,ee=se=>{const{selectNodesOnDrag:ge,nodeDragThreshold:Ee}=F.getState();j&&(!ge||!P||Ee>0)&&q0({id:e,store:F,nodeRef:R}),t&&t(se,{...E.userNode})},oe=se=>{if(!(sM(se.nativeEvent)||x)){if(Yk.includes(se.key)&&j){const ge=se.key==="Escape";q0({id:e,store:F,unselect:ge,nodeRef:R})}else if(P&&S.selected&&Object.prototype.hasOwnProperty.call(Gl,se.key)){se.preventDefault();const{ariaLabelConfig:ge}=F.getState();F.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:se.key.replace("Arrow","").toLowerCase(),x:~~E.positionAbsolute.x,y:~~E.positionAbsolute.y})}),H({direction:Gl[se.key],factor:se.shiftKey?4:1})}}},ue=()=>{var Pe;if(x||!((Pe=R.current)!=null&&Pe.matches(":focus-visible")))return;const{transform:se,width:ge,height:Ee,autoPanOnNodeFocus:Re,setCenter:Ie}=F.getState();if(!Re)return;Z0(new Map([[e,S]]),{x:0,y:0,width:ge,height:Ee},se,!0).length>0||Ie(S.position.x+te.width/2,S.position.y+te.height/2,{zoom:se[2]})};return _.jsx("div",{className:Vt(["react-flow__node",`react-flow__node-${M}`,{[g]:P},S.className,{selected:S.selected,selectable:j,parent:I,draggable:P,dragging:X}]),ref:R,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:Q?"visible":"hidden",...S.style,...U},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:ie,onMouseMove:z,onMouseLeave:Z,onContextMenu:_e,onClick:ee,onDoubleClick:W,onKeyDown:V?oe:void 0,tabIndex:V?0:void 0,onFocus:V?ue:void 0,role:S.ariaRole??(V?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${SM}-${q}`,"aria-label":S.ariaLabel,...S.domAttributes,children:_.jsx(v4,{value:e,children:_.jsx(T,{id:e,data:S.data,type:M,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:S.selected??!1,selectable:j,draggable:P,deletable:S.deletable??!0,isConnectable:D,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:X,dragHandle:S.dragHandle,zIndex:E.z,parentId:S.parentId,...te})})})}var A4=A.memo(F4);const L4=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function VM(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=Je(L4,xt),u=j4(e.onlyRenderVisibleElements),l=O4();return _.jsx("div",{className:"react-flow__nodes",style:mc,children:u.map(d=>_.jsx(A4,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},d))})}VM.displayName="NodeRenderer";const D4=A.memo(VM);function B4(e){return Je(A.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const i=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&Aj({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&i.push(a.id)}return i},[e]),xt)}const z4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return _.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},$4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return _.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},H1={[Hl.Arrow]:z4,[Hl.ArrowClosed]:$4};function H4(e){const t=wt();return A.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(H1,e)?H1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Gn.error009(e)),null)},[e])}const W4=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=H4(t);return d?_.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:_.jsx(d,{color:n,strokeWidth:u})}):null},FM=({defaultColor:e,rfId:t})=>{const n=Je(s=>s.edges),i=Je(s=>s.defaultEdgeOptions),a=A.useMemo(()=>Wj(n,{id:t,defaultColor:e,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[n,i,t,e]);return a.length?_.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:_.jsx("defs",{children:a.map(s=>_.jsx(W4,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};FM.displayName="MarkerDefinitions";var U4=A.memo(FM);function AM({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:p,...m}){const[f,h]=A.useState({x:1,y:0,width:0,height:0}),g=Vt(["react-flow__edge-textwrapper",p]),x=A.useRef(null);return A.useEffect(()=>{if(x.current){const q=x.current.getBBox();h({x:q.x,y:q.y,width:q.width,height:q.height})}},[n]),n?_.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...m,children:[a&&_.jsx("rect",{width:f.width+2*u[0],x:-u[0],y:-u[1],height:f.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),_.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:i,children:n}),d]}):null}AM.displayName="EdgeText";const G4=A.memo(AM);function hc({path:e,labelX:t,labelY:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,interactionWidth:p=20,...m}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...m,d:e,fill:"none",className:Vt(["react-flow__edge-path",m.className])}),p?_.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,i&&Nn(t)&&Nn(n)?_.jsx(G4,{x:t,y:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d}):null]})}function W1({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===$e.Left||e===$e.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function LM({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top}){const[u,l]=W1({pos:n,x1:e,y1:t,x2:i,y2:a}),[d,p]=W1({pos:s,x1:i,y1:a,x2:e,y2:t}),[m,f,h,g]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:p});return[`M${e},${t} C${u},${l} ${d},${p} ${i},${a}`,m,f,h,g]}function DM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})=>{const[C,S,E]=LM({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l}),I=e.isInternal?void 0:t;return _.jsx(hc,{id:I,path:C,labelX:S,labelY:E,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})})}const K4=DM({isInternal:!1}),BM=DM({isInternal:!0});K4.displayName="SimpleBezierEdge";BM.displayName="SimpleBezierEdgeInternal";function zM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,sourcePosition:g=$e.Bottom,targetPosition:x=$e.Top,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,E,I]=v0({sourceX:n,sourceY:i,sourcePosition:g,targetX:a,targetY:s,targetPosition:x,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),M=e.isInternal?void 0:t;return _.jsx(hc,{id:M,path:S,labelX:E,labelY:I,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:q,markerStart:w,interactionWidth:C})})}const $M=zM({isInternal:!1}),HM=zM({isInternal:!0});$M.displayName="SmoothStepEdge";HM.displayName="SmoothStepEdgeInternal";function WM(e){return A.memo(({id:t,...n})=>{var a;const i=e.isInternal?void 0:t;return _.jsx($M,{...n,id:i,pathOptions:A.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const Y4=WM({isInternal:!1}),UM=WM({isInternal:!0});Y4.displayName="StepEdge";UM.displayName="StepEdgeInternal";function GM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:x,interactionWidth:q})=>{const[w,b,C]=rg({sourceX:n,sourceY:i,targetX:a,targetY:s}),S=e.isInternal?void 0:t;return _.jsx(hc,{id:S,path:w,labelX:b,labelY:C,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:x,interactionWidth:q})})}const Q4=GM({isInternal:!1}),KM=GM({isInternal:!0});Q4.displayName="StraightEdge";KM.displayName="StraightEdgeInternal";function YM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u=$e.Bottom,targetPosition:l=$e.Top,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:C})=>{const[S,E,I]=tg({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l,curvature:b==null?void 0:b.curvature}),M=e.isInternal?void 0:t;return _.jsx(hc,{id:M,path:S,labelX:E,labelY:I,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:C})})}const X4=YM({isInternal:!1}),QM=YM({isInternal:!0});X4.displayName="BezierEdge";QM.displayName="BezierEdgeInternal";const U1={default:QM,straight:KM,step:UM,smoothstep:HM,simplebezier:BM},G1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Z4=(e,t,n)=>n===$e.Left?e-t:n===$e.Right?e+t:e,J4=(e,t,n)=>n===$e.Top?e-t:n===$e.Bottom?e+t:e,K1="react-flow__edgeupdater";function Y1({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:l}){return _.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Vt([K1,`${K1}-${l}`]),cx:Z4(t,i,e),cy:J4(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function e6({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:a,targetX:s,targetY:u,sourcePosition:l,targetPosition:d,onReconnect:p,onReconnectStart:m,onReconnectEnd:f,setReconnecting:h,setUpdateHover:g}){const x=wt(),q=(E,I)=>{if(E.button!==0)return;const{autoPanOnConnect:M,domNode:T,isValidConnection:P,connectionMode:j,connectionRadius:D,lib:V,onConnectStart:F,onConnectEnd:Q,cancelConnection:R,nodeLookup:X,rfId:H,panBy:te,updateConnection:U}=x.getState(),K=I.type==="target",ie=(_e,W)=>{h(!1),f==null||f(_e,n,I.type,W)},z=_e=>p==null?void 0:p(n,_e),Z=(_e,W)=>{h(!0),m==null||m(E,n,I.type),F==null||F(_e,W)};b0.onPointerDown(E.nativeEvent,{autoPanOnConnect:M,connectionMode:j,connectionRadius:D,domNode:T,handleId:I.id,nodeId:I.nodeId,nodeLookup:X,isTarget:K,edgeUpdaterType:I.type,lib:V,flowId:H,cancelConnection:R,panBy:te,isValidConnection:P,onConnect:z,onConnectStart:Z,onConnectEnd:Q,onReconnectEnd:ie,updateConnection:U,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:E.currentTarget})},w=E=>q(E,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=E=>q(E,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>g(!0),S=()=>g(!1);return _.jsxs(_.Fragment,{children:[(e===!0||e==="source")&&_.jsx(Y1,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:w,onMouseEnter:C,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&_.jsx(Y1,{position:d,centerX:s,centerY:u,radius:t,onMouseDown:b,onMouseEnter:C,onMouseOut:S,type:"target"})]})}function t6({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,reconnectRadius:m,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,rfId:x,edgeTypes:q,noPanClassName:w,onError:b,disableKeyboardA11y:C}){let S=Je(Ie=>Ie.edgeLookup.get(e));const E=Je(Ie=>Ie.defaultEdgeOptions);S=E?{...E,...S}:S;let I=S.type||"default",M=(q==null?void 0:q[I])||U1[I];M===void 0&&(b==null||b("011",Gn.error011(I)),I="default",M=(q==null?void 0:q.default)||U1.default);const T=!!(S.focusable||t&&typeof S.focusable>"u"),P=typeof f<"u"&&(S.reconnectable||n&&typeof S.reconnectable>"u"),j=!!(S.selectable||i&&typeof S.selectable>"u"),D=A.useRef(null),[V,F]=A.useState(!1),[Q,R]=A.useState(!1),X=wt(),{zIndex:H,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z}=Je(A.useCallback(Ie=>{const Ne=Ie.nodeLookup.get(S.source),Pe=Ie.nodeLookup.get(S.target);if(!Ne||!Pe)return{zIndex:S.zIndex,...G1};const Oe=Hj({id:e,sourceNode:Ne,targetNode:Pe,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:Ie.connectionMode,onError:b});return{zIndex:Fj({selected:S.selected,zIndex:S.zIndex,sourceNode:Ne,targetNode:Pe,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Oe||G1}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),xt),_e=A.useMemo(()=>S.markerStart?`url('#${x0(S.markerStart,x)}')`:void 0,[S.markerStart,x]),W=A.useMemo(()=>S.markerEnd?`url('#${x0(S.markerEnd,x)}')`:void 0,[S.markerEnd,x]);if(S.hidden||te===null||U===null||K===null||ie===null)return null;const ee=Ie=>{var We;const{addSelectedEdges:Ne,unselectNodesAndEdges:Pe,multiSelectionActive:Oe}=X.getState();j&&(X.setState({nodesSelectionActive:!1}),S.selected&&Oe?(Pe({nodes:[],edges:[S]}),(We=D.current)==null||We.blur()):Ne([e])),a&&a(Ie,S)},oe=s?Ie=>{s(Ie,{...S})}:void 0,ue=u?Ie=>{u(Ie,{...S})}:void 0,se=l?Ie=>{l(Ie,{...S})}:void 0,ge=d?Ie=>{d(Ie,{...S})}:void 0,Ee=p?Ie=>{p(Ie,{...S})}:void 0,Re=Ie=>{var Ne;if(!C&&Yk.includes(Ie.key)&&j){const{unselectNodesAndEdges:Pe,addSelectedEdges:Oe}=X.getState();Ie.key==="Escape"?((Ne=D.current)==null||Ne.blur(),Pe({edges:[S]})):Oe([e])}};return _.jsx("svg",{style:{zIndex:H},children:_.jsxs("g",{className:Vt(["react-flow__edge",`react-flow__edge-${I}`,S.className,w,{selected:S.selected,animated:S.animated,inactive:!j&&!a,updating:V,selectable:j}]),onClick:ee,onDoubleClick:oe,onContextMenu:ue,onMouseEnter:se,onMouseMove:ge,onMouseLeave:Ee,onKeyDown:T?Re:void 0,tabIndex:T?0:void 0,role:S.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":T?`${CM}-${x}`:void 0,ref:D,...S.domAttributes,children:[!Q&&_.jsx(M,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:j,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:_e,markerEnd:W,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),P&&_.jsx(e6,{edge:S,isReconnectable:P,reconnectRadius:m,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,sourceX:te,sourceY:U,targetX:K,targetY:ie,sourcePosition:z,targetPosition:Z,setUpdateHover:F,setReconnecting:R})]})})}var r6=A.memo(t6);const n6=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function XM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:q}){const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,onError:S}=Je(n6,xt),E=B4(t);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(U4,{defaultColor:e,rfId:n}),E.map(I=>_.jsx(r6,{id:I,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:C,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,onClick:m,reconnectRadius:f,onDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:S,edgeTypes:i,disableKeyboardA11y:q},I))]})}XM.displayName="EdgeRenderer";const i6=A.memo(XM),o6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function a6({children:e}){const t=Je(o6);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function s6(e){const t=ug(),n=A.useRef(!1);A.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const u6=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function l6(e){const t=Je(u6),n=wt();return A.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function c6(e){return e.connection.inProgress?{...e.connection,to:tu(e.connection.to,e.transform)}:{...e.connection}}function d6(e){return c6}function p6(e){const t=d6();return Je(t,xt)}const f6=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function _6({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:a,width:s,height:u,isValid:l,inProgress:d}=Je(f6,xt);return!(s&&a&&d)?null:_.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:Vt(["react-flow__connection",Zk(l)]),children:_.jsx(ZM,{style:t,type:n,CustomComponent:i,isValid:l})})})}const ZM=({style:e,type:t=Ui.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:l,fromPosition:d,to:p,toNode:m,toHandle:f,toPosition:h,pointer:g}=p6();if(!a)return;if(n)return _.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:l,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:h,connectionStatus:Zk(i),toNode:m,toHandle:f,pointer:g});let x="";const q={sourceX:s.x,sourceY:s.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:h};switch(t){case Ui.Bezier:[x]=tg(q);break;case Ui.SimpleBezier:[x]=LM(q);break;case Ui.Step:[x]=v0({...q,borderRadius:0});break;case Ui.SmoothStep:[x]=v0(q);break;default:[x]=rg(q)}return _.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};ZM.displayName="ConnectionLine";const m6={};function Q1(e=m6){A.useRef(e),wt(),A.useEffect(()=>{},[e])}function h6(){wt(),A.useRef(!1),A.useEffect(()=>{},[])}function JM({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:q,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,multiSelectionKeyCode:I,panActivationKeyCode:M,zoomActivationKeyCode:T,deleteKeyCode:P,onlyRenderVisibleElements:j,elementsSelectable:D,defaultViewport:V,translateExtent:F,minZoom:Q,maxZoom:R,preventScrolling:X,defaultMarkerColor:H,zoomOnScroll:te,zoomOnPinch:U,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:z,zoomOnDoubleClick:Z,panOnDrag:_e,onPaneClick:W,onPaneMouseEnter:ee,onPaneMouseMove:oe,onPaneMouseLeave:ue,onPaneScroll:se,onPaneContextMenu:ge,paneClickDistance:Ee,nodeClickDistance:Re,onEdgeContextMenu:Ie,onEdgeMouseEnter:Ne,onEdgeMouseMove:Pe,onEdgeMouseLeave:Oe,reconnectRadius:We,onReconnect:Be,onReconnectStart:ut,onReconnectEnd:st,noDragClassName:Mt,noWheelClassName:qt,noPanClassName:St,disableKeyboardA11y:lt,nodeExtent:Sr,rfId:Zt,viewport:$t,onViewportChange:Jt}){return Q1(e),Q1(t),h6(),s6(n),l6($t),_.jsx(T4,{onPaneClick:W,onPaneMouseEnter:ee,onPaneMouseMove:oe,onPaneMouseLeave:ue,onPaneContextMenu:ge,onPaneScroll:se,paneClickDistance:Ee,deleteKeyCode:P,selectionKeyCode:C,selectionOnDrag:S,selectionMode:E,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:I,panActivationKeyCode:M,zoomActivationKeyCode:T,elementsSelectable:D,zoomOnScroll:te,zoomOnPinch:U,zoomOnDoubleClick:Z,panOnScroll:K,panOnScrollSpeed:ie,panOnScrollMode:z,panOnDrag:_e,defaultViewport:V,translateExtent:F,minZoom:Q,maxZoom:R,onSelectionContextMenu:f,preventScrolling:X,noDragClassName:Mt,noWheelClassName:qt,noPanClassName:St,disableKeyboardA11y:lt,onViewportChange:Jt,isControlledViewport:!!$t,children:_.jsxs(a6,{children:[_.jsx(i6,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:Be,onReconnectStart:ut,onReconnectEnd:st,onlyRenderVisibleElements:j,onEdgeContextMenu:Ie,onEdgeMouseEnter:Ne,onEdgeMouseMove:Pe,onEdgeMouseLeave:Oe,reconnectRadius:We,defaultMarkerColor:H,noPanClassName:St,disableKeyboardA11y:lt,rfId:Zt}),_.jsx(_6,{style:q,type:x,component:w,containerStyle:b}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(D4,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:Re,onlyRenderVisibleElements:j,noPanClassName:St,noDragClassName:Mt,disableKeyboardA11y:lt,nodeExtent:Sr,rfId:Zt}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}JM.displayName="GraphView";const y6=A.memo(JM),X1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:f,zIndexMode:h="basic"}={})=>{const g=new Map,x=new Map,q=new Map,w=new Map,b=i??t??[],C=n??e??[],S=m??[0,0],E=f??Ls;fM(q,w,b);const I=w0(C,g,x,{nodeOrigin:S,nodeExtent:E,zIndexMode:h});let M=[0,0,1];if(u&&a&&s){const T=Js(g,{filter:V=>!!((V.width||V.initialWidth)&&(V.height||V.initialHeight))}),{x:P,y:j,zoom:D}=J0(T,a,s,d,p,(l==null?void 0:l.padding)??.1);M=[P,j,D]}return{rfId:"1",width:a??0,height:s??0,transform:M,nodes:C,nodesInitialized:I,nodeLookup:g,parentLookup:x,edges:b,edgeLookup:w,connectionLookup:q,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:Ls,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Sa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Xk},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Tj,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Qk,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},g6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:f,zIndexMode:h})=>RR((g,x)=>{async function q(){const{nodeLookup:w,panZoom:b,fitViewOptions:C,fitViewResolver:S,width:E,height:I,minZoom:M,maxZoom:T}=x();b&&(await Ij({nodes:w,width:E,height:I,panZoom:b,minZoom:M,maxZoom:T},C),S==null||S.resolve(!0),g({fitViewResolver:null}))}return{...X1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:f,defaultNodes:n,defaultEdges:i,zIndexMode:h}),setNodes:w=>{const{nodeLookup:b,parentLookup:C,nodeOrigin:S,elevateNodesOnSelect:E,fitViewQueued:I,zIndexMode:M}=x(),T=w0(w,b,C,{nodeOrigin:S,nodeExtent:f,elevateNodesOnSelect:E,checkEquality:!0,zIndexMode:M});I&&T?(q(),g({nodes:w,nodesInitialized:T,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:w,nodesInitialized:T})},setEdges:w=>{const{connectionLookup:b,edgeLookup:C}=x();fM(b,C,w),g({edges:w})},setDefaultNodesAndEdges:(w,b)=>{if(w){const{setNodes:C}=x();C(w),g({hasDefaultNodes:!0})}if(b){const{setEdges:C}=x();C(b),g({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:b,nodeLookup:C,parentLookup:S,domNode:E,nodeOrigin:I,nodeExtent:M,debug:T,fitViewQueued:P,zIndexMode:j}=x(),{changes:D,updatedInternals:V}=Zj(w,C,S,E,I,M,j);V&&(Kj(C,S,{nodeOrigin:I,nodeExtent:M,zIndexMode:j}),P?(q(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(D==null?void 0:D.length)>0&&(T&&console.log("React Flow: trigger node changes",D),b==null||b(D)))},updateNodePositions:(w,b=!1)=>{const C=[];let S=[];const{nodeLookup:E,triggerNodeChanges:I,connection:M,updateConnection:T,onNodesChangeMiddlewareMap:P}=x();for(const[j,D]of w){const V=E.get(j),F=!!(V!=null&&V.expandParent&&(V!=null&&V.parentId)&&(D!=null&&D.position)),Q={id:j,type:"position",position:F?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:b};if(V&&M.inProgress&&M.fromNode.id===V.id){const R=Ro(V,M.fromHandle,$e.Left,!0);T({...M,from:R})}F&&V.parentId&&C.push({id:j,parentId:V.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),S.push(Q)}if(C.length>0){const{parentLookup:j,nodeOrigin:D}=x(),V=sg(C,E,j,D);S.push(...V)}for(const j of P.values())S=j(S);I(S)},triggerNodeChanges:w=>{const{onNodesChange:b,setNodes:C,nodes:S,hasDefaultNodes:E,debug:I}=x();if(w!=null&&w.length){if(E){const M=EM(w,S);C(M)}I&&console.log("React Flow: trigger node changes",w),b==null||b(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:b,setEdges:C,edges:S,hasDefaultEdges:E,debug:I}=x();if(w!=null&&w.length){if(E){const M=IM(w,S);C(M)}I&&console.log("React Flow: trigger edge changes",w),b==null||b(w)}},addSelectedNodes:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:E,triggerEdgeChanges:I}=x();if(b){const M=w.map(T=>Mo(T,!0));E(M);return}E(ga(S,new Set([...w]),!0)),I(ga(C))},addSelectedEdges:w=>{const{multiSelectionActive:b,edgeLookup:C,nodeLookup:S,triggerNodeChanges:E,triggerEdgeChanges:I}=x();if(b){const M=w.map(T=>Mo(T,!0));I(M);return}I(ga(C,new Set([...w]))),E(ga(S,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:b}={})=>{const{edges:C,nodes:S,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:M}=x(),T=w||S,P=b||C,j=T.map(V=>{const F=E.get(V.id);return F&&(F.selected=!1),Mo(V.id,!1)}),D=P.map(V=>Mo(V.id,!1));I(j),M(D)},setMinZoom:w=>{const{panZoom:b,maxZoom:C}=x();b==null||b.setScaleExtent([w,C]),g({minZoom:w})},setMaxZoom:w=>{const{panZoom:b,minZoom:C}=x();b==null||b.setScaleExtent([C,w]),g({maxZoom:w})},setTranslateExtent:w=>{var b;(b=x().panZoom)==null||b.setTranslateExtent(w),g({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:b,triggerNodeChanges:C,triggerEdgeChanges:S,elementsSelectable:E}=x();if(!E)return;const I=b.reduce((T,P)=>P.selected?[...T,Mo(P.id,!1)]:T,[]),M=w.reduce((T,P)=>P.selected?[...T,Mo(P.id,!1)]:T,[]);C(I),S(M)},setNodeExtent:w=>{const{nodes:b,nodeLookup:C,parentLookup:S,nodeOrigin:E,elevateNodesOnSelect:I,nodeExtent:M,zIndexMode:T}=x();w[0][0]===M[0][0]&&w[0][1]===M[0][1]&&w[1][0]===M[1][0]&&w[1][1]===M[1][1]||(w0(b,C,S,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:T}),g({nodeExtent:w}))},panBy:w=>{const{transform:b,width:C,height:S,panZoom:E,translateExtent:I}=x();return Jj({delta:w,panZoom:E,transform:b,translateExtent:I,width:C,height:S})},setCenter:async(w,b,C)=>{const{width:S,height:E,maxZoom:I,panZoom:M}=x();if(!M)return Promise.resolve(!1);const T=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:I;return await M.setViewport({x:S/2-w*T,y:E/2-b*T,zoom:T},{duration:C==null?void 0:C.duration,ease:C==null?void 0:C.ease,interpolate:C==null?void 0:C.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Xk}})},updateConnection:w=>{g({connection:w})},reset:()=>g({...X1()})}},Object.is);function v6({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:d,fitView:p,nodeOrigin:m,nodeExtent:f,zIndexMode:h,children:g}){const[x]=A.useState(()=>g6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:p,minZoom:u,maxZoom:l,fitViewOptions:d,nodeOrigin:m,nodeExtent:f,zIndexMode:h}));return _.jsx(FR,{value:x,children:_.jsx(a4,{children:g})})}function x6({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:d,minZoom:p,maxZoom:m,nodeOrigin:f,nodeExtent:h,zIndexMode:g}){return A.useContext(_c)?_.jsx(_.Fragment,{children:e}):_.jsx(v6,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:f,nodeExtent:h,zIndexMode:g,children:e})}const w6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function b6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:l,onEdgeClick:d,onInit:p,onMove:m,onMoveStart:f,onMoveEnd:h,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:E,onNodeContextMenu:I,onNodeDoubleClick:M,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:j,onNodesDelete:D,onEdgesDelete:V,onDelete:F,onSelectionChange:Q,onSelectionDragStart:R,onSelectionDrag:X,onSelectionDragStop:H,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onBeforeDelete:ie,connectionMode:z,connectionLineType:Z=Ui.Bezier,connectionLineStyle:_e,connectionLineComponent:W,connectionLineContainerStyle:ee,deleteKeyCode:oe="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:se=!1,selectionMode:ge=Ds.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:Re=zs()?"Meta":"Control",zoomActivationKeyCode:Ie=zs()?"Meta":"Control",snapToGrid:Ne,snapGrid:Pe,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:We,nodesDraggable:Be,autoPanOnNodeFocus:ut,nodesConnectable:st,nodesFocusable:Mt,nodeOrigin:qt=kM,edgesFocusable:St,edgesReconnectable:lt,elementsSelectable:Sr=!0,defaultViewport:Zt=QR,minZoom:$t=.5,maxZoom:Jt=2,translateExtent:it=Ls,preventScrolling:Rr=!0,nodeExtent:Nt,defaultMarkerColor:Kr="#b1b1b7",zoomOnScroll:pr=!0,zoomOnPinch:Ht=!0,panOnScroll:Qe=!1,panOnScrollSpeed:wi=.5,panOnScrollMode:Tt=No.Free,zoomOnDoubleClick:ln=!0,panOnDrag:me=!0,onPaneClick:ot,onPaneMouseEnter:Or,onPaneMouseMove:Vr,onPaneMouseLeave:fr,onPaneScroll:Xn,onPaneContextMenu:On,paneClickDistance:Rt=1,nodeClickDistance:er=0,children:tr,onReconnect:dt,onReconnectStart:Do,onReconnectEnd:yt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt=10,onNodesChange:rr,onEdgesChange:_r,noDragClassName:mr="nodrag",noWheelClassName:hr="nowheel",noPanClassName:Et="nopan",fitView:cn,fitViewOptions:yr,connectOnClick:Ji,attributionPosition:eo,proOptions:ar,defaultEdgeOptions:bi,elevateNodesOnSelect:qi=!0,elevateEdgesOnSelect:to=!1,disableKeyboardA11y:Zn=!1,autoPanOnConnect:pt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,connectionRadius:ei,isValidConnection:pn,onError:ft,style:Qr,id:Vn,nodeDragThreshold:Kt,connectionDragThreshold:Bo,viewport:gr,onViewportChange:ti,width:fn,height:Da,colorMode:ro="light",debug:Si,onScroll:Cr,ariaLabelConfig:_n,zIndexMode:zo="basic",...Ba},nr){const Ci=Vn||"1",Fr=e4(ro),Xr=A.useCallback(no=>{no.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Cr==null||Cr(no)},[Cr]);return _.jsx("div",{"data-testid":"rf__wrapper",...Ba,onScroll:Xr,style:{...Qr,...w6},ref:nr,className:Vt(["react-flow",a,Fr]),id:Vn,role:"application",children:_.jsxs(x6,{nodes:e,edges:t,width:fn,height:Da,fitView:cn,fitViewOptions:yr,minZoom:$t,maxZoom:Jt,nodeOrigin:qt,nodeExtent:Nt,zIndexMode:zo,children:[_.jsx(y6,{onInit:p,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:S,onNodeMouseLeave:E,onNodeContextMenu:I,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:u,connectionLineType:Z,connectionLineStyle:_e,connectionLineComponent:W,connectionLineContainerStyle:ee,selectionKeyCode:ue,selectionOnDrag:se,selectionMode:ge,deleteKeyCode:oe,multiSelectionKeyCode:Re,panActivationKeyCode:Ee,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Oe,defaultViewport:Zt,translateExtent:it,minZoom:$t,maxZoom:Jt,preventScrolling:Rr,zoomOnScroll:pr,zoomOnPinch:Ht,zoomOnDoubleClick:ln,panOnScroll:Qe,panOnScrollSpeed:wi,panOnScrollMode:Tt,panOnDrag:me,onPaneClick:ot,onPaneMouseEnter:Or,onPaneMouseMove:Vr,onPaneMouseLeave:fr,onPaneScroll:Xn,onPaneContextMenu:On,paneClickDistance:Rt,nodeClickDistance:er,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onReconnect:dt,onReconnectStart:Do,onReconnectEnd:yt,onEdgeContextMenu:Zi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt,defaultMarkerColor:Kr,noDragClassName:mr,noWheelClassName:hr,noPanClassName:Et,rfId:Ci,disableKeyboardA11y:Zn,nodeExtent:Nt,viewport:gr,onViewportChange:ti}),_.jsx(JR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,nodesDraggable:Be,autoPanOnNodeFocus:ut,nodesConnectable:st,nodesFocusable:Mt,edgesFocusable:St,edgesReconnectable:lt,elementsSelectable:Sr,elevateNodesOnSelect:qi,elevateEdgesOnSelect:to,minZoom:$t,maxZoom:Jt,nodeExtent:Nt,onNodesChange:rr,onEdgesChange:_r,snapToGrid:Ne,snapGrid:Pe,connectionMode:z,translateExtent:it,connectOnClick:Ji,defaultEdgeOptions:bi,fitView:cn,fitViewOptions:yr,onNodesDelete:D,onEdgesDelete:V,onDelete:F,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:j,onSelectionDrag:X,onSelectionDragStart:R,onSelectionDragStop:H,onMove:m,onMoveStart:f,onMoveEnd:h,noPanClassName:Et,nodeOrigin:qt,rfId:Ci,autoPanOnConnect:pt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,onError:ft,connectionRadius:ei,isValidConnection:pn,selectNodesOnDrag:We,nodeDragThreshold:Kt,connectionDragThreshold:Bo,onBeforeDelete:ie,debug:Si,ariaLabelConfig:_n,zIndexMode:zo}),_.jsx(YR,{onSelectionChange:Q}),tr,_.jsx(HR,{proOptions:ar,position:eo}),_.jsx($R,{rfId:Ci,disableKeyboardA11y:Zn})]})})}var q6=NM(b6);function S6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>EM(a,s)),[]);return[t,n,i]}function C6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>IM(a,s)),[]);return[t,n,i]}function k6({dimensions:e,lineWidth:t,variant:n,className:i}){return _.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Vt(["react-flow__background-pattern",n,i])})}function M6({radius:e,className:t}){return _.jsx("circle",{cx:e,cy:e,r:e,className:Vt(["react-flow__background-pattern","dots",t])})}var Yi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Yi||(Yi={}));const E6={[Yi.Dots]:1,[Yi.Lines]:1,[Yi.Cross]:6},I6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eE({id:e,variant:t=Yi.Dots,gap:n=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:l,style:d,className:p,patternClassName:m}){const f=A.useRef(null),{transform:h,patternId:g}=Je(I6,xt),x=i||E6[t],q=t===Yi.Dots,w=t===Yi.Cross,b=Array.isArray(n)?n:[n,n],C=[b[0]*h[2]||1,b[1]*h[2]||1],S=x*h[2],E=Array.isArray(s)?s:[s,s],I=w?[S,S]:C,M=[E[0]*h[2]||1+I[0]/2,E[1]*h[2]||1+I[1]/2],T=`${g}${e||""}`;return _.jsxs("svg",{className:Vt(["react-flow__background",p]),style:{...d,...mc,"--xy-background-color-props":l,"--xy-background-pattern-color-props":u},ref:f,"data-testid":"rf__background",children:[_.jsx("pattern",{id:T,x:h[0]%C[0],y:h[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:q?_.jsx(M6,{radius:S/2,className:m}):_.jsx(k6,{dimensions:I,lineWidth:a,variant:t,className:m})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}eE.displayName="Background";const N6=A.memo(eE);function T6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function P6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function j6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function R6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function O6(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function wl({children:e,className:t,...n}){return _.jsx("button",{type:"button",className:Vt(["react-flow__controls-button",t]),...n,children:e})}const V6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function tE({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:p,children:m,position:f="bottom-left",orientation:h="vertical","aria-label":g}){const x=wt(),{isInteractive:q,minZoomReached:w,maxZoomReached:b,ariaLabelConfig:C}=Je(V6,xt),{zoomIn:S,zoomOut:E,fitView:I}=ug(),M=()=>{S(),s==null||s()},T=()=>{E(),u==null||u()},P=()=>{I(a),l==null||l()},j=()=>{x.setState({nodesDraggable:!q,nodesConnectable:!q,elementsSelectable:!q}),d==null||d(!q)},D=h==="horizontal"?"horizontal":"vertical";return _.jsxs(Ia,{className:Vt(["react-flow__controls",D,p]),position:f,style:e,"data-testid":"rf__controls","aria-label":g??C["controls.ariaLabel"],children:[t&&_.jsxs(_.Fragment,{children:[_.jsx(wl,{onClick:M,className:"react-flow__controls-zoomin",title:C["controls.zoomIn.ariaLabel"],"aria-label":C["controls.zoomIn.ariaLabel"],disabled:b,children:_.jsx(T6,{})}),_.jsx(wl,{onClick:T,className:"react-flow__controls-zoomout",title:C["controls.zoomOut.ariaLabel"],"aria-label":C["controls.zoomOut.ariaLabel"],disabled:w,children:_.jsx(P6,{})})]}),n&&_.jsx(wl,{className:"react-flow__controls-fitview",onClick:P,title:C["controls.fitView.ariaLabel"],"aria-label":C["controls.fitView.ariaLabel"],children:_.jsx(j6,{})}),i&&_.jsx(wl,{className:"react-flow__controls-interactive",onClick:j,title:C["controls.interactive.ariaLabel"],"aria-label":C["controls.interactive.ariaLabel"],children:q?_.jsx(O6,{}):_.jsx(R6,{})}),m]})}tE.displayName="Controls";const F6=A.memo(tE);function A6({id:e,x:t,y:n,width:i,height:a,style:s,color:u,strokeColor:l,strokeWidth:d,className:p,borderRadius:m,shapeRendering:f,selected:h,onClick:g}){const{background:x,backgroundColor:q}=s||{},w=u||x||q;return _.jsx("rect",{className:Vt(["react-flow__minimap-node",{selected:h},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,style:{fill:w,stroke:l,strokeWidth:d},shapeRendering:f,onClick:g?b=>g(b,e):void 0})}const L6=A.memo(A6),D6=e=>e.nodes.map(t=>t.id),Np=e=>e instanceof Function?e:()=>e;function B6({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s=L6,onClick:u}){const l=Je(D6,xt),d=Np(t),p=Np(e),m=Np(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:l.map(h=>_.jsx($6,{id:h,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:f},h))})}function z6({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:l,onClick:d}){const{node:p,x:m,y:f,width:h,height:g}=Je(x=>{const{internals:q}=x.nodeLookup.get(e),w=q.userNode,{x:b,y:C}=q.positionAbsolute,{width:S,height:E}=gi(w);return{node:w,x:b,y:C,width:S,height:E}},xt);return!p||p.hidden||!iM(p)?null:_.jsx(l,{x:m,y:f,width:h,height:g,style:p.style,selected:!!p.selected,className:i(p),color:t(p),borderRadius:a,strokeColor:n(p),strokeWidth:s,shapeRendering:u,onClick:d,id:p.id})}const $6=A.memo(z6);var H6=A.memo(B6);const W6=200,U6=150,G6=e=>!e.hidden,K6=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nM(Js(e.nodeLookup,{filter:G6}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Y6="react-flow__minimap-desc";function rE({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:l,bgColor:d,maskColor:p,maskStrokeColor:m,maskStrokeWidth:f,position:h="bottom-right",onClick:g,onNodeClick:x,pannable:q=!1,zoomable:w=!1,ariaLabel:b,inversePan:C,zoomStep:S=1,offsetScale:E=5}){const I=wt(),M=A.useRef(null),{boundingRect:T,viewBB:P,rfId:j,panZoom:D,translateExtent:V,flowWidth:F,flowHeight:Q,ariaLabelConfig:R}=Je(K6,xt),X=(e==null?void 0:e.width)??W6,H=(e==null?void 0:e.height)??U6,te=T.width/X,U=T.height/H,K=Math.max(te,U),ie=K*X,z=K*H,Z=E*K,_e=T.x-(ie-T.width)/2-Z,W=T.y-(z-T.height)/2-Z,ee=ie+Z*2,oe=z+Z*2,ue=`${Y6}-${j}`,se=A.useRef(0),ge=A.useRef();se.current=K,A.useEffect(()=>{if(M.current&&D)return ge.current=uR({domNode:M.current,panZoom:D,getTransform:()=>I.getState().transform,getViewScale:()=>se.current}),()=>{var Ne;(Ne=ge.current)==null||Ne.destroy()}},[D]),A.useEffect(()=>{var Ne;(Ne=ge.current)==null||Ne.update({translateExtent:V,width:F,height:Q,inversePan:C,pannable:q,zoomStep:S,zoomable:w})},[q,w,C,S,V,F,Q]);const Ee=g?Ne=>{var We;const[Pe,Oe]=((We=ge.current)==null?void 0:We.pointer(Ne))||[0,0];g(Ne,{x:Pe,y:Oe})}:void 0,Re=x?A.useCallback((Ne,Pe)=>{const Oe=I.getState().nodeLookup.get(Pe).internals.userNode;x(Ne,Oe)},[]):void 0,Ie=b??R["minimap.ariaLabel"];return _.jsx(Ia,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*K:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Vt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:X,height:H,viewBox:`${_e} ${W} ${ee} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:M,onClick:Ee,children:[Ie&&_.jsx("title",{id:ue,children:Ie}),_.jsx(H6,{onClick:Re,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:l}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${_e-Z},${W-Z}h${ee+Z*2}v${oe+Z*2}h${-ee-Z*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}rE.displayName="MiniMap";const Q6=A.memo(rE),X6=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Z6={[Ea.Line]:"right",[Ea.Handle]:"bottom-right"};function J6({nodeId:e,position:t,variant:n=Ea.Handle,className:i,style:a=void 0,children:s,color:u,minWidth:l=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,autoScale:g=!0,shouldResize:x,onResizeStart:q,onResize:w,onResizeEnd:b}){const C=RM(),S=typeof e=="string"?e:C,E=wt(),I=A.useRef(null),M=n===Ea.Handle,T=Je(A.useCallback(X6(M&&g),[M,g]),xt),P=A.useRef(null),j=t??Z6[n];A.useEffect(()=>{if(!(!I.current||!S))return P.current||(P.current=bR({domNode:I.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:V,transform:F,snapGrid:Q,snapToGrid:R,nodeOrigin:X,domNode:H}=E.getState();return{nodeLookup:V,transform:F,snapGrid:Q,snapToGrid:R,nodeOrigin:X,paneDomNode:H}},onChange:(V,F)=>{const{triggerNodeChanges:Q,nodeLookup:R,parentLookup:X,nodeOrigin:H}=E.getState(),te=[],U={x:V.x,y:V.y},K=R.get(S);if(K&&K.expandParent&&K.parentId){const ie=K.origin??H,z=V.width??K.measured.width??0,Z=V.height??K.measured.height??0,_e={id:K.id,parentId:K.parentId,rect:{width:z,height:Z,...oM({x:V.x??K.position.x,y:V.y??K.position.y},{width:z,height:Z},K.parentId,R,ie)}},W=sg([_e],R,X,H);te.push(...W),U.x=V.x?Math.max(ie[0]*z,V.x):void 0,U.y=V.y?Math.max(ie[1]*Z,V.y):void 0}if(U.x!==void 0&&U.y!==void 0){const ie={id:S,type:"position",position:{...U}};te.push(ie)}if(V.width!==void 0&&V.height!==void 0){const z={id:S,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:V.width,height:V.height}};te.push(z)}for(const ie of F){const z={...ie,type:"position"};te.push(z)}Q(te)},onEnd:({width:V,height:F})=>{const Q={id:S,type:"dimensions",resizing:!1,dimensions:{width:V,height:F}};E.getState().triggerNodeChanges([Q])}})),P.current.update({controlPosition:j,boundaries:{minWidth:l,minHeight:d,maxWidth:p,maxHeight:m},keepAspectRatio:f,resizeDirection:h,onResizeStart:q,onResize:w,onResizeEnd:b,shouldResize:x}),()=>{var V;(V=P.current)==null||V.destroy()}},[j,l,d,p,m,f,q,w,b,x]);const D=j.split("-");return _.jsx("div",{className:Vt(["react-flow__resize-control","nodrag",...D,n,i]),ref:I,style:{...a,scale:T,...u&&{[M?"backgroundColor":"borderColor"]:u}},children:s})}A.memo(J6);const Kl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Yl=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Ql=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Qi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},yc=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},e3=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let $r=yc(Qi.PRODUCTS,Kl),Cn=yc(Qi.MACHINES,Yl),Mn=yc(Qi.RECIPES,Ql);const vt=e=>$r.find(t=>t.id===e),ht=e=>Cn.find(t=>t.id===e),cg=(e,t,n)=>{e.length=0,e.push(...t),e3(n,e)},S0=e=>cg($r,e,Qi.PRODUCTS),C0=e=>cg(Cn,e,Qi.MACHINES),k0=e=>cg(Mn,e,Qi.RECIPES),t3=()=>yc(Qi.CANVAS_STATE,null),r3=()=>localStorage.removeItem(Qi.CANVAS_STATE),n3=()=>{S0(Kl),C0(Yl),k0(Ql),r3()},dg=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),i3=e=>e==="p_variableproduct",_i=(e,t,n)=>{if(i3(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const i=t(e);return i?i.name:"Unknown Product"},o3=e=>dg(e)?"Variable":typeof e=="number"?e.toString():e,ws=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,a3=e=>{if(dg(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:ws(e.drilling),idle:ws(e.idle)};if("max"in e&&"average"in e)return{max:ws(e.max),average:ws(e.average)}}return ws(e)},s3=e=>dg(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,Z1=(e,t)=>{const n=o3(e.quantity),i=_i(e.product_id,t);return`${n}x ${i}`},u3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],nE=e=>u3.includes(e),Hr=18,Ki=18,In=100,dr={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},pg=(e,t={},n=Hr,i=null,a=null)=>{const s=dr[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[i]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Ki,l=t.heatLoss??s.defaultHeatLoss;return u-l;default:return n}},J1=(e,t)=>{const n=dr[e];if(!n||n.type!=="configurable")return null;const i=n.tempOptions.find(a=>a.temp===t);return i?i.power:null},Xl=e=>e==null?"":`${Math.round(e)}C`,l3=e=>{const t=dr[e];return t&&t.type==="configurable"},c3=e=>{const t=dr[e];return t&&t.type==="boiler"},d3=e=>{const t=dr[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},p3=e=>e<=0?1/0:e>=400?2:800/e,f3=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,_3=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,m3=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},h3=e=>e<=0?1/0:64/(.176*Math.abs(e)),an={m_industrial_drill:{type:"steam_input",formula:p3},m_alloyer:{type:"steam_input",formula:f3},m_coal_liquefaction_plant:{type:"steam_input",formula:_3},m_steam_cracking_plant:{type:"steam_input",formula:m3},m_water_treatment_plant:{type:"steam_input",formula:h3}},Ur=e=>e in an,Wn=(e,t,n)=>{const i=an[e];if(!i)return n;const a=i.formula(t);return isFinite(a)?a:n},hi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),ew=(e,t)=>{const n=new Map,i=new Map;Object.keys(e.nodes).forEach(l=>{const d=e.nodes[l];d&&(d.inputs.forEach((p,m)=>{i.set(`${l}:${m}`,Hr)}),d.outputs.forEach((p,m)=>{n.set(`${l}:${m}`,Hr)}))});const{sorted:a,cycleNodes:s}=g3(e),u=(l,d=!1)=>{const p=e.nodes[l];if(!p)return!1;const m={id:p.recipe.machine_id},f=dr[m.id];let h=!1;return p.inputs.forEach((g,x)=>{const q=y3(e,t,l,x,n,!d),w=i.get(`${l}:${x}`),b=q!==null?q:w;Math.abs(b-w)>.01&&(i.set(`${l}:${x}`,b),h=!0)}),p.outputs.forEach((g,x)=>{var w,b;let q=Hr;if(f){if(f.type==="fixed")q=f.outputTemp;else if(f.type==="additive"){if(p.inputs.length>0){const C=i.get(`${l}:0`)||Hr;C>f.maxTemp?q=C:q=Math.min(C+f.tempIncrease,f.maxTemp)}}else if(f.type==="configurable")q=((w=p.recipe.temperatureSettings)==null?void 0:w.temperature)||f.tempOptions[0].temp;else if(f.type==="product_dependent"){if(p.inputs.length>0){const C=p.inputs[0].productId;q=f.temps[C]||f.temps.p_water||400}}else if(f.type==="boiler"){if(p.inputs.length>=2){const C=i.get(`${l}:1`)||Hr,S=((b=p.recipe.temperatureSettings)==null?void 0:b.heatLoss)||f.defaultHeatLoss,E=C-S;x===0?q=E*.85:x===1&&(E<f.minSteamTemp?q=Math.max(E,Hr):q=E)}}else if(f.type==="passthrough"){const C=p.inputs.findIndex(S=>S.productId===f.inputProduct);C>=0&&(q=i.get(`${l}:${C}`)||Hr)}}n.set(`${l}:${x}`,q)}),h};if(a.forEach(l=>{s.has(l)||u(l)}),s.size>0){let d=0,p=!0;const m=a.filter(h=>s.has(h));for(;p&&d<100;)p=!1,m.forEach(h=>{u(h,!0)&&(p=!0)}),d++;const f=new Set;a.forEach(h=>{if(s.has(h))return;const g=e.nodes[h];g&&g.inputs.forEach((x,q)=>{const w=e.products[x.productId];if(!w)return;w.connections.filter(C=>C.targetNodeId===h&&C.targetInputIndex===q).forEach(C=>{s.has(C.sourceNodeId)&&f.add(h)})})}),f.forEach(h=>{u(h,!1)})}return{outputTemperatures:n,inputTemperatures:i}},y3=(e,t,n,i,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[i].productId];if(!u)return s?Hr:null;const l=u.connections.filter(f=>f.targetNodeId===n&&f.targetInputIndex===i);if(l.length===0)return s?Hr:null;const d=[];if(l.forEach(f=>{var g;const h=a.get(`${f.sourceNodeId}:${f.sourceOutputIndex}`);if(h!=null){const x=((g=t.byConnection[f.id])==null?void 0:g.flowRate)||0;d.push({temp:h,flow:x})}}),d.length===0)return s?Hr:null;const p=d.reduce((f,h)=>f+h.flow,0);if(p>0){const f=d.reduce((h,g)=>h+g.temp*g.flow,0);return Math.round(f/p*1e10)/1e10}const m=d.reduce((f,h)=>f+h.temp,0);return Math.round(m/d.length*1e10)/1e10},g3=e=>{const t=[],n=new Set,i=new Set,a=new Set,s=(u,l=[])=>{if(n.has(u))return;if(i.has(u)){const m=l.indexOf(u);for(let f=m;f<l.length;f++)a.add(l[f]);a.add(u);return}i.add(u);const d=[...l,u],p=e.nodes[u];p&&p.inputs.forEach((m,f)=>{const h=e.products[m.productId];h&&h.connections.filter(x=>x.targetNodeId===u&&x.targetInputIndex===f).forEach(x=>{n.has(x.sourceNodeId)||s(x.sourceNodeId,d)})}),i.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},M0=(e,t,n)=>e.map(i=>{if(!n.nodes[i.id])return i;const s={id:i.data.recipe.machine_id},u=dr[s.id],l=Ur(s.id),d=i.data.recipe.outputs.map((m,f)=>{const h=t.outputTemperatures.get(`${i.id}:${f}`);if(h!=null){if((u==null?void 0:u.type)==="boiler"&&m.product_id==="p_steam"){const g=u.minSteamTemp||100;return h<g?{...m,temperature:h,quantity:0,originalQuantity:m.originalQuantity||m.quantity}:{...m,temperature:h,quantity:m.originalQuantity||m.quantity,originalQuantity:m.originalQuantity||m.quantity}}return{...m,temperature:h}}return m});let p={...i.data.recipe,outputs:d};if(l){const m=an[s.id];if((m==null?void 0:m.type)==="steam_input"){const f=i.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(f>=0){const h=t.inputTemperatures.get(`${i.id}:${f}`);if(h!=null&&(p={...p,tempDependentInputTemp:h},s.id==="m_water_treatment_plant")){const x=90*Wn(s.id,h,1);p={...p,inputs:p.inputs.map((q,w)=>w===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(q.product_id)?{...q,quantity:x,originalQuantity:90}:q)}}}}}return{...i,data:{...i.data,recipe:p}}}),E0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],I0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],v3={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},x3=12,w3=3.1,b3=.1,q3=.02,S3=2,Ws={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},C3=()=>Object.keys(Ws).map(e=>parseInt(e)).sort((e,t)=>e-t),k3=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},M3=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Oo=(e,t,n,i)=>{if(!e||!i)return null;const a=k3(e,i),s=M3(t||"none",i),u=n?1.1:1,l=.5*a*s*u,d=Math.ceil(100/l),p=x3,m=n?100:50,f=2*i/m,h=d+p+f,g=d/h;return{deteriorationRate:l,lifeTime:d,replacementTime:p,travelTime:f,totalCycleTime:h,dutyCycle:g,drillingPower:w3,idlePower:b3,pollution:q3}},iE=(e,t,n,i)=>{const a=[],s=Oo(e,t,n,i);if(!s){if(e){const u=E0.find(l=>l.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=E0.find(l=>l.id===e);if(u){const l=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(l.toFixed(6))})}}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);if(u!=null&&u.product_id){const d=(v3[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(d.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:S3}),a},oE=(e,t,n,i)=>{if(!i)return[];const a=Ws[i];if(!a)return[];const s=Oo(e,t,n,i);if(!s)return a.map(l=>({...l,quantity:"Variable"}));const u=n?1.1:1;return a.map(l=>{const d=l.quantity*u*s.dutyCycle;return{product_id:l.product_id,quantity:parseFloat(d.toFixed(4))}})},tw={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},rw=4,E3=20,I3=4,nw=5e5,N3=.3,T3=10,bl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},P3=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),i=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:i,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},aE=P3(),j3=e=>aE.find(t=>t.productId===e),ru=(e,t,n=0)=>{const i=j3(e);if(!i)return null;const s=Math.log2(i.innerStage)+(i.outerStage-1)*6,u=rw*s,l=t?I3:E3,d=n/6,p=s*rw*(l+d)+T3,m=bl.logic_plates*s,f=bl.copper_wires*s,h=bl.semiconductors*s,g=bl.gold_wires*s,x=[{product_id:"p_logic_plate",quantity:m},{product_id:"p_copper_wire",quantity:f},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:g}];t&&x.push({product_id:"p_machine_oil",quantity:parseFloat((N3*p).toFixed(6))});const q=[{product_id:e,quantity:1}],w=nw/l,b=nw/(t?.8:4);return{outerStage:i.outerStage,innerStage:i.innerStage,totalStages:s,totalSteps:u,avgStepTime:l,cycleTime:p,inputs:x,outputs:q,avgPowerConsumption:w,maxPowerConsumption:b,logicPlates:m,copperWires:f,semiconductors:h,goldWires:g}},sE=(e,t)=>{const n=ru(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},uE=(e,t)=>{const n=ru(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},iw={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},N0=11,lE=2,R3=2e5,cE=1,O3=3,dE=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,pE=e=>Math.ceil(e/O3),Zl=(e,t,n,i,a,s)=>{if(!e||!t||!n||!i||a!==1)return null;const u=pE(n),l=dE(s),d=n*cE,p=e/l,m=t/N0,f=Math.min(p,m),h=f*lE,g=t*R3/N0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:i,controller:a,growthTime:l,waterConsumption:d,sustainableHarvestRate:p,maxHarvestRate:m,actualHarvestRate:f,logOutput:h,avgPowerConsumption:g,isTreeLimited:p<m}},fE=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*cE}],fg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const i=dE(n),a=e/i,s=t/N0,l=Math.min(a,s)*lE;return[{product_id:"p_oak_log",quantity:parseFloat(l.toFixed(6))}]},ow={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},_g=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],_E={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},V3={r_industrial_firebox_07:1},mE=e=>_g.find(t=>t.id===e),Jl=(e,t)=>{const n=_E[e],i=mE(t);if(!n||!i)return null;const a=n/i.energy,s=V3[e]||0,u=a+s,l=1,d=a;return{energyNeeded:n,fuelEnergy:i.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:l,fuelPerCycle:d}},T0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const i=Jl(n,t);if(!i)return e;const a=mE(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(i.fuelPerCycle.toFixed(6))},u=_g.map(d=>d.product_id),l=e.filter(d=>d.product_id!=="p_variableproduct"&&!u.includes(d.product_id));return[s,...l]},hE=e=>e in _E,yE=(e,t)=>{const i=(e-100)/5;let a=1,s=1;e<100?(a=1+i*.05,s=1+i*.06666666666666667):e>100&&(a=1+i*.05,s=1+i*.1);const l=(t-100)/5;let d=1,p=1;t<100?(d=1+l*-.0625,p=1+l*.05):t>100&&(d=1+l*-.0425,p=1+l*.25);const m=a*d,f=a,h=s+p-1;return{inputMultiplier:m,outputMultiplier:f,powerMultiplier:h}},F3=(e,t,n)=>{const i=yE(t,n),a=e.inputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.inputMultiplier).toFixed(6)):l.quantity})),s=e.outputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.outputMultiplier).toFixed(6)):l.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*i.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Wi=7e3,mg=140,hg=70,gE=1e6,aw=240,Tp=29.166666666666668,Ns=240,vE=480,Ol=(e,t)=>{const n=e+t;let i;return n<=Ns?i=Tp:n>=vE?i=Tp/2:i=Tp*Ns/n,{cycleTime:i,concreteBlocksPerCycle:mg,leadIngotsPerCycle:hg,totalFlow:n,powerConsumption:gE}},ec=(e,t,n,i)=>{const a=Math.min(e,aw),s=Math.min(t,aw),u=a+s;let l,d;return u<=Ns?(l=Wi,d=Wi):u>=vE?(l=Wi/2,d=Wi/2):(l=Wi*Ns/u,d=Wi*Ns/u),[{product_id:n||"p_variableproduct",quantity:l,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:i||"p_variableproduct",quantity:d,isAnyProduct:i==="p_any_fluid"||!i,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}]},P0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:gE,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}],outputs:[],isWasteFacility:!0},j0=15,A3=2,L3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ts=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;L3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},R0=e=>{const t=[];for(let n=0;n<A3;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:j0})}return t},O0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:j0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:j0}],outputs:[],isLiquidDump:!0},xE=15,wE=8,D3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ps=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;D3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},V0=e=>{const t=[];for(let n=0;n<wE;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:xE})}return t},F0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(wE).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:xE})),outputs:[],isLiquidBurner:!0},sw=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",B3=(e,t,n)=>{switch(e){case"drill":return z3();case"assembler":return $3();case"treeFarm":return H3(n);case"firebox":return W3(t);case"temperature":return U3(t);case"boiler":return G3();case"chemicalPlant":return K3();case"wasteFacility":return Y3();case"liquidDump":return Q3();case"liquidBurner":return X3();default:return null}},z3=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...E0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:I0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...C3().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Oo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),_.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=iE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=oE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),i=e.drillHead&&e.depth?Oo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:i}}}),$3=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,i=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return i?_.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:i}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?ru(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Total Stages: ",e.totalStages]}),_.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),_.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),_.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[_.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),_.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[_.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[_.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),_.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),_.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),_.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,l;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((l=e.microchip)==null?void 0:l.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},i=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=sE(i,t.machineOil),s=uE(i,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),H3=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=pE(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Zl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),_.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),_.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),_.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&_.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const i=fE(t.sprinklers),a=fg(t.trees,t.harvesters,e);return{settings:t,inputs:i,outputs:a,metrics:null}}}),W3=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:_g.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>Jl(e.id,t.fuel),renderMetrics:(t,n)=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[_.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),_.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),_.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&_.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),_.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),_.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),_.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),_.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[_.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),_.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:T0(e.inputs,n.fuel,e.id).map((i,a)=>{const s=typeof i.quantity=="number"?i.quantity.toFixed(4):i.quantity,u=_i(i.product_id,vt);return _.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const i=Jl(n.id,t.fuel),a=T0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:i}}}),U3=e=>{var i,a;const t=e.machine_id,n=dr[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(i=n.tempOptions)==null?void 0:i[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Xl(s.temp)} - ${sw(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const l=u.temperature,d=J1(t,l);return _.jsxs(_.Fragment,{children:[_.jsxs("div",{children:["Output Temperature: ",Xl(l)]}),_.jsxs("div",{children:["Power Consumption: ",sw(d)]})]})}}],onApply:(s,u)=>{const l=J1(t,s.temperature),d=u.outputs.map(p=>({...p,temperature:pg(t,s)}));return{settings:s,inputs:[],outputs:d,metrics:l}}}},G3=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[" Boiler uses the ",_.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),_.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),_.jsx("div",{children:" If output temp < 100C, no steam is produced"}),_.jsx("div",{children:" Water output is cooled (no temperature)"}),_.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),K3=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>yE(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),_.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[_.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),_.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),_.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),_.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[_.jsx("div",{children:" Speed affects input/output quantities and power"}),_.jsx("div",{children:" Efficiency affects input quantities and power"}),_.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),Y3=()=>{const e=$r.filter(n=>n.type==="item").sort((n,i)=>n.name.localeCompare(i.name)),t=$r.filter(n=>n.type==="fluid").sort((n,i)=>n.name.localeCompare(i.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 240/s"}),_.jsx("div",{children:" Fixed requirements per cycle:"}),_.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),_.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const i=ec(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:i,outputs:[],metrics:null}}}},Q3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=[n.fluidProductId0,n.fluidProductId1],a=R0(i),s=Ts(a);return _.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Water variants: 0%/hr"}),_.jsx("div",{children:" Residue: 8.64%/hr per /s"}),_.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),_.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:_.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),_.jsx("div",{children:" Connect fluids to dispose of them"}),_.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],i=R0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},X3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=Array(8).fill(0).map((u,l)=>n[`fluidProductId${l}`]),a=V0(i),s=Ps(a);return _.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Water variants: 0%/hr"}),_.jsx("div",{children:" Residue: 8.64%/hr per /s"}),_.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),_.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:_.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),_.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),_.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),i=V0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},Z3=({recipeType:e,nodeId:t,currentSettings:n,recipe:i,globalPollution:a,onSettingsChange:s,onClose:u})=>{var w;const l=B3(e,i,a),[d,p]=A.useState(n||l.defaultSettings),m=A.useRef(null),f=b=>{const C=m.current;if(!C)return;const S=C.scrollHeight>C.clientHeight,E=C.scrollTop===0&&b.deltaY<0,I=C.scrollTop+C.clientHeight>=C.scrollHeight&&b.deltaY>0;S&&!E&&!I||b.preventDefault(),b.stopPropagation()},h=(b,C)=>{p(typeof b=="object"?S=>({...S,...b}):S=>({...S,[b]:C}))},g=()=>{const b=l.onApply(d,i);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,b.settings,b.inputs,b.outputs);break;case"firebox":s(t,b.settings,b.inputs,b.metrics);break;case"temperature":s(t,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":s(t,b.settings);break;default:s(t,b.settings,b.inputs,b.outputs,b.metrics)}u()},x=()=>{p(l.defaultSettings)},q=l.calculateMetrics?l.calculateMetrics(d,i):null;return VR.createPortal(_.jsx("div",{className:"drill-settings-overlay",onClick:u,children:_.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:f,children:[_.jsx("h3",{className:"drill-settings-title",children:l.title}),_.jsxs("div",{className:"drill-settings-content",children:[l.fields.map((b,C)=>_.jsx(J3,{field:b,value:d[b.key],settings:d,onChange:(S,E)=>{b.type==="dual-select"?h(S,E):h(b.key,S)}},C)),q&&l.renderMetrics&&_.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:l.renderMetrics(q,d)})]}),_.jsxs("div",{className:"drill-settings-buttons",children:[_.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Reset"}),_.jsx("button",{onClick:g,className:"btn btn-primary",disabled:(w=l.hasErrors)==null?void 0:w.call(l,d),children:"Apply"})]})]})}),document.body)},J3=({field:e,value:t,settings:n,onChange:i})=>{var a,s;switch(e.type){case"select":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("select",{value:t,onChange:u=>i(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>_.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&_.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return _.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:_.jsxs("label",{className:"drill-setting-label",children:[_.jsx("input",{type:"checkbox",checked:t,onChange:u=>i(u.target.checked),className:"drill-checkbox"}),_.jsx("span",{children:e.label})]})});case"number":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>i(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&_.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_.jsx("button",{onClick:()=>i(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),_.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),_.jsx("button",{onClick:()=>i(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[_.jsxs("span",{children:["Min: ",e.min]}),_.jsxs("span",{children:["Default: ",e.defaultValue]}),_.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsx("input",{type:"text",value:t,onChange:u=>i(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return _.jsxs("div",{className:"drill-setting-group",children:[_.jsx("label",{className:"drill-setting-label",children:e.label}),_.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[_.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const l=u.target.value;i(e.outerKey,l),l&&parseInt(l)>1&&i(e.innerKey,"64")},className:"select",style:{flex:1},children:[_.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>_.jsxs("option",{value:u,children:[u,"x"]},u))]}),_.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>i(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[_.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?_.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>_.jsxs("option",{value:u,children:[u,"x"]},u))]}),_.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return _.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[_.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),_.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},js=44,A0=8,uw=10,lw=20,cw=380,eO=120,ql=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,tO=A.memo(({data:e,id:t})=>{var pr,Ht,Qe,wi,Tt,ln;const{recipe:n,machine:i,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:l,onOutputClick:d,isTarget:p,onDrillSettingsChange:m,onLogicAssemblerSettingsChange:f,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:g,onTemperatureSettingsChange:x,onBoilerSettingsChange:q,onChemicalPlantSettingsChange:w,globalPollution:b,flows:C,isMobile:S,mobileActionMode:E,onMachineCountModeChange:I,zoomLevel:M}=e,T=!M||M>=.25,[P,j]=A.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!i)return null;const D=n.isMineshaftDrill||n.id==="r_mineshaft_drill",V=n.isLogicAssembler||n.id==="r_logic_assembler",F=n.isTreeFarm||n.id==="r_tree_farm",Q=n.isWasteFacility||n.id==="r_underground_waste_facility",R=n.isLiquidDump||n.id==="r_liquid_dump",X=n.isLiquidBurner||n.id==="r_liquid_burner",H=D||V||F||Q||R||X,te=l3(i.id),U=c3(i.id),K=dr[i.id],ie=i.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",z=i.id==="m_chemical_plant",Z=Ur(i.id),_e=Z?an[i.id]:null;let W=n.cycle_time;const ee=W==="Variable"||typeof W!="number"||W<=0;if(ee&&!H?W="Variable":ee&&H&&(W=1),Z&&(_e==null?void 0:_e.type)==="steam_input"&&typeof W=="number"&&!(i.id==="m_steam_cracking_plant"&&!hi(n))){const me=n.tempDependentInputTemp??In;W=Wn(i.id,me,W)}const oe={outputs:[]};if(K){const me=K.type==="boiler",ot=(pr=n.outputs)==null?void 0:pr.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),Or=(Ht=n.outputs)==null?void 0:Ht.some(Rt=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id)),Vr=(Qe=n.inputs)==null?void 0:Qe.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),fr=n.id==="r_industrial_firebox_07",Xn=i.id==="m_industrial_firebox";(!Xn||Xn&&!fr&&(Vr||ot))&&((wi=n.outputs)==null||wi.forEach((Rt,er)=>{if(nE(Rt.product_id)&&Rt.temperature!=null){const tr=["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id),dt=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id);me?dt&&Or&&oe.outputs.push({temp:Rt.temperature,index:er}):(tr&&ot||dt&&Or)&&oe.outputs.push({temp:Rt.temperature,index:er})}}))}const ue=A.useCallback(me=>{if(me==="Variable")return"Variable";if(typeof me!="number")return String(me);if(W==="Variable")return s==="perSecond"?"Variable":String(ql(me));let ot=s==="perSecond"?me/W:me;return u==="total"&&(ot*=a||0),String(ql(ot))},[W,s,u,a]),se=A.useCallback(me=>{if(me==="Variable"||typeof me!="number")return me;if(s==="perSecond")return"1s";if(me>=60){const ot=Math.floor(me/60),Or=me%60;return`${ot}m ${ql(Or)}s`}return`${ql(me)}s`},[s]),ge=A.useMemo(()=>se(W),[W,se]);let Ee=n.power_consumption,Re=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Ee=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Ee={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Ee={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(Re=n.pollution*a));const Ie=a3(Ee),Ne=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),Pe=n.power_type==="HV"?" HV":"",Oe=n.inputs.length,We=n.outputs.length,Be=Math.max(Oe,We,1),ut=Oe>0,st=We>0,Mt=cw-uw*2,qt=ut&&st?Math.floor((Mt-lw)/2):ut?Mt:0,St=ut&&st?Math.floor((Mt-lw)/2):st?Mt:0,lt=cw,Zt=Be*js+(Be-1)*A0+24,Jt=eO+Zt+12,it=a??0,Rr=Number.isInteger(it)?it.toString():it.toFixed(2),Nt=e.machineCountMode||"free",Kr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:`custom-node ${p?"target":""}`,style:{width:lt,height:Jt},onMouseDownCapture:me=>{me.button===1&&(me.preventDefault(),me.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[_.jsxs("div",{className:"node-info-area",children:[oe.outputs.length>0&&_.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:oe.outputs.map((me,ot)=>_.jsx("div",{children:Xl(me.temp)},`output-${ot}`))}),Z&&(_e==null?void 0:_e.type)==="steam_input"&&hi(n)&&_.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Xl(n.tempDependentInputTemp??In)}),D&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("drill")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),V&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("assembler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),F&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("treeFarm")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),ie&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("firebox")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),z&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("chemicalPlant")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),Q&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("wasteFacility")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),R&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("liquidDump")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),X&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("liquidBurner")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),te&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("temperature")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),U&&_.jsx("button",{onClick:me=>{me.stopPropagation(),j("boiler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),_.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),_.jsxs("div",{className:"node-stats-row",children:[_.jsxs("div",{className:"node-stats",style:{gap:Ne?"1px":"3px",minHeight:"65px",visibility:T?"visible":"hidden"},children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",ge]}),Ne?"drilling"in Ie?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,Pe]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,Pe]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,Pe]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,Pe]})]}):_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,Pe]}),_.jsxs("div",{className:"node-stat-row",children:[_.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",s3(Re)]})]}),_.jsxs("div",{className:"node-machine-info",style:{visibility:T?"visible":"hidden"},children:[_.jsx("div",{className:"node-machine-name",title:i.name,style:{color:i.tier===1?"var(--tier-1-color)":i.tier===2?"var(--tier-2-color)":i.tier===3?"var(--tier-3-color)":i.tier===4?"var(--tier-4-color)":(i.tier===5,"var(--tier-5-color)")},children:i.name}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{className:"node-machine-count",style:Kr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Rr}),Nt!=="free"&&_.jsx("button",{onClick:me=>{me.stopPropagation(),I&&I(t,Nt,a)},onDoubleClick:me=>me.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:me=>me.currentTarget.style.opacity="1",onMouseLeave:me=>me.currentTarget.style.opacity="0.8",title:Nt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Tt=e.cappedMachineCount)==null?void 0:Tt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((ln=e.cappedMachineCount)==null?void 0:ln.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Nt==="locked"?"":""})]})]})]})]}),_.jsxs("div",{className:"node-io-area",children:[_.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:ut&&st?`${qt}px 1fr ${St}px`:"1fr",padding:`0 ${uw}px`},children:[ut&&_.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((me,ot)=>_.jsx("div",{className:"node-rect-wrapper",children:_.jsx(dw,{side:"left",index:ot,width:qt,input:me,onClick:l,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${ot}-${me.product_id}`))}),ut&&st&&_.jsx("div",{className:"node-io-gap"}),st&&_.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((me,ot)=>_.jsx("div",{className:"node-rect-wrapper",children:_.jsx(dw,{side:"right",index:ot,width:St,input:me,onClick:d,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${ot}-${me.product_id}`))})]}),_.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((me,ot)=>_.jsx(pw,{side:"left",index:ot,onClick:l,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Oe,rightCount:We},`handle-left-${t}-${ot}`)),n.outputs.map((me,ot)=>_.jsx(pw,{side:"right",index:ot,onClick:d,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Oe,rightCount:We},`handle-right-${t}-${ot}`))]})]})]}),P&&_.jsx(Z3,{recipeType:P,nodeId:t,currentSettings:P==="drill"?n.drillSettings:P==="assembler"?n.assemblerSettings:P==="treeFarm"?n.treeFarmSettings:P==="firebox"?n.fireboxSettings:P==="temperature"||P==="boiler"?n.temperatureSettings:P==="chemicalPlant"?n.chemicalPlantSettings:P==="wasteFacility"?n.wasteFacilitySettings:P==="liquidDump"?n.liquidDumpSettings:P==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:b||0,onSettingsChange:P==="drill"?m:P==="assembler"?f:P==="treeFarm"?h:P==="firebox"?g:P==="temperature"?x:P==="boiler"?q:P==="chemicalPlant"?w:P==="wasteFacility"?e.onWasteFacilitySettingsChange:P==="liquidDump"?e.onLiquidDumpSettingsChange:P==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>j(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,i=t.data;return!(n.recipe!==i.recipe||n.machineCount!==i.machineCount||n.flows!==i.flows||n.suggestions!==i.suggestions||n.displayMode!==i.displayMode||n.machineDisplayMode!==i.machineDisplayMode||n.isTarget!==i.isTarget||n.zoomLevel!==i.zoomLevel||n.machineCountMode!==i.machineCountMode)}),dw=({side:e,index:t,width:n,input:i,onClick:a,nodeId:s,formatQuantity:u,isMobile:l,mobileActionMode:d})=>{const p=e==="left",m=_i(i.product_id,vt,i.acceptedType),f=u(i.quantity),h=!l||d==="pan";return _.jsx("div",{onClick:g=>{a&&h&&(g.stopPropagation(),a(i.product_id,s,t,g))},title:`${f}x ${m}`,className:`node-rect ${p?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${js}px`,minWidth:`${n}px`},children:_.jsxs("span",{className:"node-rect-text",children:[f,"x ",m]})})},pw=({side:e,index:t,onClick:n,nodeId:i,productId:a,flows:s,onHandleDoubleClick:u,suggestions:l,input:d,data:p,leftCount:m,rightCount:f})=>{var D,V;const g=getComputedStyle(document.documentElement),x=g.getPropertyValue("--handle-input-supplied").trim(),q=g.getPropertyValue("--handle-input-deficient").trim(),w=g.getPropertyValue("--handle-output-connected").trim(),b=g.getPropertyValue("--handle-output-excess").trim();let C=e==="left"?x:w;if(s){const F=e==="left"?(D=s.inputFlows)==null?void 0:D[t]:(V=s.outputFlows)==null?void 0:V[t];if(F){const Q=e==="left"?F.needed-F.connected:F.produced-F.connected;Math.abs(Q)>1e-6&&Q>0&&(C=e==="left"?q:b)}}const S=vt(a),I=(S==null?void 0:S.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",j=12+(Math.max(m,f)-(e==="left"?m:f))*(js+A0)/2+t*(js+A0)+js/2+11;return _.jsx(Hs,{type:e==="left"?"target":"source",position:e==="left"?$e.Left:$e.Right,id:`${e}-${t}`,style:{background:C,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:I,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${j}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:F=>{n&&F.ctrlKey&&(F.stopPropagation(),n(a,i,t,F))},onDoubleClick:F=>{u&&(F.stopPropagation(),u(i,e,t,a,l))}})},rO=(e,t,n,i,a,s)=>{if(n>e){const p=(e+n)/2;return[`M ${e},${t} L ${p},${t} L ${p},${i} L ${n},${i}`,p,(t+i)/2]}else{const p=e+40,m=n-40,f=(t+i)/2+((t+i)/2<300?20:-20);return[`M ${e},${t} L ${p},${t} L ${p},${f} L ${m},${f} L ${m},${i} L ${n},${i}`,(p+m)/2,f]}},nO=({id:e,sourceX:t,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,data:l})=>{const d=(l==null?void 0:l.edgePath)||"orthogonal",p=(l==null?void 0:l.edgeStyle)||"animated",[m]=A.useMemo(()=>d==="straight"?rg({sourceX:t,sourceY:n,targetX:i,targetY:a}):d==="orthogonal"?rO(t,n,i,a):tg({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),[t,n,i,a,s,u,d]),f=p==="animated"?"custom-edge custom-edge-animated":p==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return _.jsx("path",{id:e,className:f,d:m,fill:"none"})},iO=A.memo(nO,(e,t)=>{var n,i,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((i=t.data)==null?void 0:i.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),wa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},oO=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:wa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],tc=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,i])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,i)})},Vl=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):wa}catch{return wa}},L0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),aO=()=>(tc(wa),L0(wa),wa),sO=({onClose:e})=>{const[t,n]=A.useState(Vl()),[i,a]=A.useState(!1),s=f=>{const h={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},g={...f.theme,...h};n(g),tc(g),L0(g)},u=(f,h)=>{const g={...t,[f]:h};n(g),tc(g),L0(g)},l=()=>{const f=aO();n(f)},d=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],p=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],m=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:f=>f.stopPropagation(),style:{width:i?"700px":"600px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Theme Editor"}),i?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[_.jsxs("div",{className:"theme-group",children:[_.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[_.jsxs("div",{children:[_.jsx("label",{className:"theme-color-label",children:"Path Type:"}),_.jsx("select",{value:t.edgePath||"bezier",onChange:f=>u("edgePath",f.target.value),className:"select",style:{marginTop:"6px"},children:p.map(f=>_.jsx("option",{value:f.value,children:f.label},f.value))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"theme-color-label",children:"Line Style:"}),_.jsx("select",{value:t.edgeStyle||"animated",onChange:f=>u("edgeStyle",f.target.value),className:"select",style:{marginTop:"6px"},children:m.map(f=>_.jsx("option",{value:f.value,children:f.label},f.value))})]})]})]}),d.map(f=>_.jsxs("div",{className:"theme-group",children:[_.jsx("h3",{className:"theme-group-title",children:f.title}),_.jsx("div",{className:"theme-color-grid",children:f.colors.map(h=>{const g=t[h.key]||"#000000",x=g.length>7?g.substring(0,7):g;return _.jsxs("div",{className:"theme-color-item",children:[_.jsx("label",{className:"theme-color-label",children:h.label}),_.jsxs("div",{className:"theme-color-inputs",children:[_.jsx("input",{type:"color",value:x,onChange:q=>{const w=t[h.key];if(w&&w.length>7){const b=w.substring(7);u(h.key,q.target.value+b)}else u(h.key,q.target.value)},className:"theme-color-picker"}),_.jsx("input",{type:"text",value:t[h.key],onChange:q=>u(h.key,q.target.value),className:"input theme-color-text"})]})]},h.key)})})]},f.title))]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[_.jsx("button",{onClick:l,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),_.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[_.jsx("div",{style:{marginBottom:"20px"},children:_.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:oO.map(f=>_.jsx("div",{onClick:()=>s(f),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:f.name}),_.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:f.description})]}),_.jsx("div",{style:{display:"flex",gap:"6px"},children:[f.theme.colorPrimary,f.theme.bgMain,f.theme.inputBorder,f.theme.outputBorder].map((h,g)=>_.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},g))})]})},f.id))})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[_.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),_.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},uO=({onClose:e})=>_.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Help & Controls"}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),_.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",_.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),_.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:_.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[_.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)"},children:[_.jsx("div",{children:"Cycle: 4s"}),_.jsx("div",{children:"Power: 150kW"}),_.jsx("div",{children:"Pollution: 0%/hr"})]}),_.jsxs("div",{style:{textAlign:"right"},children:[_.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),_.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),_.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[_.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),_.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),_.jsx("div",{style:{minWidth:"250px"},children:_.jsxs("div",{style:{marginBottom:"15px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),_.jsxs("div",{style:{marginTop:"20px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[_.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),_.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),_.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),_.jsxs("div",{style:{marginTop:"25px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",_.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[_.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),_.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),_.jsxs("div",{style:{marginBottom:"30px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:["Use ",_.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",_.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:[_.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsxs("span",{children:["Use ",_.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[_.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),_.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),_.jsxs("div",{style:{paddingLeft:"15px"},children:[_.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),_.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),_.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),_.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),_.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),gc="industrialist_saves",Na="industrialist_current_save_id",Pa=()=>{try{const e=localStorage.getItem(gc);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading saves:",e),{}}},lO=(e,t)=>{var n;try{const i=Pa(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return i[a]=s,localStorage.setItem(gc,JSON.stringify(i)),localStorage.setItem(Na,a),s}catch(i){return console.error("Error saving canvas:",i),null}},cO=e=>{try{const n=Pa()[e];return n?(localStorage.setItem(Na,e),n.data):null}catch(t){return console.error("Error loading save:",t),null}},dO=e=>{try{const t=Pa();return delete t[e],localStorage.setItem(gc,JSON.stringify(t)),localStorage.getItem(Na)===e&&localStorage.removeItem(Na),!0}catch(t){return console.error("Error deleting save:",t),!1}},pO=(e,t)=>{try{const n=Pa();return n[e]?(n[e].name=t,localStorage.setItem(gc,JSON.stringify(n)),!0):!1}catch(n){return console.error("Error renaming save:",n),!1}},fO=()=>{var e;try{const t=localStorage.getItem(Na);return t&&((e=Pa()[t])==null?void 0:e.name)||"Untitled"}catch{return"Untitled"}},_O=({onClose:e,onLoad:t,currentCanvas:n,onImport:i,onExportCanvas:a})=>{const[s,u]=A.useState({}),[l,d]=A.useState(""),[p,m]=A.useState(null),[f,h]=A.useState(""),[g,x]=A.useState(null);A.useEffect(()=>{q()},[]);const q=()=>{const P=Pa();u(P);const j=localStorage.getItem(Na);x(j)},w=()=>{if(!l.trim()){alert("Please enter a name for your save");return}const P=lO(l.trim(),n);P?(d(""),q(),alert(`Canvas saved as "${P.name}"`)):alert("Failed to save canvas")},b=P=>{if(!window.confirm("Load this save? Your current canvas will be replaced."))return;const j=cO(P);j?(x(P),t(j),e()):alert("Failed to load save")},C=P=>{const j=s[P];window.confirm(`Delete save "${j.name}"? This cannot be undone.`)&&(dO(P)?q():alert("Failed to delete save"))},S=P=>{m(P),h(s[P].name)},E=P=>{if(!f.trim()){alert("Name cannot be empty");return}pO(P,f.trim())?(q(),m(null),h("")):alert("Failed to rename save")},I=()=>{m(null),h("")},M=P=>new Date(P).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),T=Object.values(s).sort((P,j)=>j.timestamp-P.timestamp);return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[_.jsx("h2",{className:"modal-title",children:"Save Manager"}),_.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",_.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:fO()})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[_.jsx("input",{type:"text",value:l,onChange:P=>d(P.target.value),onKeyPress:P=>P.key==="Enter"&&w(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),_.jsx("button",{onClick:w,className:"btn btn-primary",style:{minWidth:"120px"},children:"Save Current"})]}),_.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{onClick:()=>{i&&i()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),_.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[_.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",T.length,")"]}),T.length===0?_.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:T.map(P=>_.jsxs("div",{style:{padding:"15px",background:g===P.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:g===P.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[p===P.id?_.jsx("div",{style:{marginBottom:"10px"},children:_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("input",{type:"text",value:f,onChange:j=>h(j.target.value),onKeyPress:j=>{j.key==="Enter"&&E(P.id),j.key==="Escape"&&I()},className:"input",style:{flex:1},autoFocus:!0}),_.jsx("button",{onClick:()=>E(P.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),_.jsx("button",{onClick:I,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):_.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:_.jsxs("div",{style:{flex:1},children:[_.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[P.name,g===P.id&&_.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[M(P.timestamp),"  ",P.nodeCount," nodes"]})]})}),p!==P.id&&_.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_.jsx("button",{onClick:()=>b(P.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),_.jsx("button",{onClick:()=>S(P.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),_.jsx("button",{onClick:()=>C(P.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},P.id))})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},mO=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],hO=({recipe:e,onClose:t,onSave:n,availableProducts:i,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var M,T,P;const l=!u&&mO.includes(e.id),d=!u&&(((M=e.inputs)==null?void 0:M.some(j=>j.product_id==="p_variableproduct"))||((T=e.outputs)==null?void 0:T.some(j=>j.product_id==="p_variableproduct"))),[p,m]=A.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),f=(j,D)=>{m(V=>({...V,[j]:D}))},h=(j,D,V)=>{const F=[...p.inputs];F[j]={...F[j],[D]:V},m(Q=>({...Q,inputs:F}))},g=(j,D,V)=>{const F=[...p.outputs];F[j]={...F[j],[D]:V},m(Q=>({...Q,outputs:F}))},x=()=>{const j=[...p.inputs,{product_id:"",quantity:1}];m(D=>({...D,inputs:j}))},q=j=>{const D=p.inputs.filter((V,F)=>F!==j);m(V=>({...V,inputs:D}))},w=()=>{const j=[...p.outputs,{product_id:"",quantity:1}];m(D=>({...D,outputs:j}))},b=j=>{const D=p.outputs.filter((V,F)=>F!==j);m(V=>({...V,outputs:D}))},C=j=>{const V=`r_${j.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,F=s.filter(R=>R.id.startsWith(V)).map(R=>{const X=R.id.match(/_(\d+)$/);return X?parseInt(X[1]):0});let Q=1;for(;F.includes(Q);)Q++;return`${V}${String(Q).padStart(2,"0")}`},S=()=>{if(u){if(!p.name||!p.name.trim())return alert("Recipe name is required"),!1;if(!p.machine_id)return alert("Machine is required"),!1;if(!a.find(X=>X.id===p.machine_id))return alert("Selected machine does not exist"),!1}const D=[...p.inputs.map(R=>R.product_id),...p.outputs.map(R=>R.product_id)].filter(R=>R&&R!=="p_variableproduct"&&R!=="p_any_fluid"&&R!=="p_any_item"&&!i.find(X=>X.id===R));if(D.length>0)return alert(`Invalid product IDs: ${D.join(", ")}`),!1;const V=p.inputs.some(R=>!R.product_id),F=p.outputs.some(R=>!R.product_id);return V||F?(alert("All inputs and outputs must have a product selected"),!1):typeof p.cycle_time=="number"&&p.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((p.inputs.some(R=>R.quantity==="Variable")||p.outputs.some(R=>R.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},E=()=>{if(!S())return;let j={...p};if(u){const D=a.find(V=>V.id===p.machine_id);j.id=C(D.name)}n(j),t()},I=a.find(j=>j.id===e.machine_id);return l||d?_.jsx("div",{className:"modal-overlay",onClick:t,children:_.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"600px"},children:[_.jsx("h2",{className:"modal-title",children:l?"Special Recipe":"Variable Product Recipe"}),_.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:l?_.jsxs(_.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",_.jsx("br",{}),_.jsx("br",{}),"Special recipes include:",_.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[_.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),_.jsx("li",{children:"Logic Assembler (microchip stages)"}),_.jsx("li",{children:"Tree Farm (layout configuration)"}),_.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),_.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):_.jsx(_.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),_.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):_.jsx("div",{className:"modal-overlay",onClick:t,children:_.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[_.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),_.jsx("input",{type:"text",value:p.name,onChange:j=>f("name",j.target.value),placeholder:"Enter recipe name",className:"input"})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?_.jsxs("select",{value:p.machine_id,onChange:j=>f("machine_id",j.target.value),className:"select",children:[_.jsx("option",{value:"",children:"Select a machine"}),a.sort((j,D)=>j.name.localeCompare(D.name)).map(j=>_.jsxs("option",{value:j.id,children:[j.name," (Tier ",j.tier||1,")"]},j.id))]}):_.jsx("div",{style:{color:(I==null?void 0:I.tier)===1?"var(--tier-1-color)":(I==null?void 0:I.tier)===2?"var(--tier-2-color)":(I==null?void 0:I.tier)===3?"var(--tier-3-color)":(I==null?void 0:I.tier)===4?"var(--tier-4-color)":(I==null?void 0:I.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(I==null?void 0:I.name)||e.machine_id}),u&&p.machine_id&&_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",C(((P=a.find(j=>j.id===p.machine_id))==null?void 0:P.name)||"")]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:p.cycle_time==="Variable"?"":p.cycle_time,onChange:j=>f("cycle_time",parseFloat(j.target.value)),placeholder:p.cycle_time==="Variable"?"Variable":"",className:"input",disabled:p.cycle_time==="Variable",title:p.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),_.jsx("input",{type:"number",step:"1000",value:typeof p.power_consumption=="number"?p.power_consumption:"",onChange:j=>f("power_consumption",parseFloat(j.target.value)),placeholder:"Variable",className:"input"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),_.jsxs("select",{value:p.power_type||"MV",onChange:j=>f("power_type",j.target.value),className:"select",children:[_.jsx("option",{value:"LV",children:"LV"}),_.jsx("option",{value:"MV",children:"MV"}),_.jsx("option",{value:"HV",children:"HV"})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),_.jsx("input",{type:"number",step:"0.1",value:p.pollution,onChange:j=>f("pollution",parseFloat(j.target.value)),className:"input"})]})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[_.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),_.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),p.inputs.map((j,D)=>_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[_.jsxs("select",{value:j.product_id,onChange:V=>h(D,"product_id",V.target.value),className:"select",style:{flex:2},children:[_.jsx("option",{value:"",children:"Select Product"}),[...i].filter(V=>V.id!=="p_variableproduct"&&V.id!=="p_any_fluid"&&V.id!=="p_any_item").sort((V,F)=>V.name.localeCompare(F.name)).map(V=>_.jsxs("option",{value:V.id,children:[V.name," (",V.type,")"]},V.id))]}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:j.quantity==="Variable"?"":j.quantity,onChange:V=>h(D,"quantity",parseFloat(V.target.value)),placeholder:j.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:j.quantity==="Variable",title:j.quantity==="Variable"?"Cannot edit Variable quantities":""}),_.jsx("button",{onClick:()=>q(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.inputs.length===0&&_.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[_.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),_.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),p.outputs.map((j,D)=>_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[_.jsxs("select",{value:j.product_id,onChange:V=>g(D,"product_id",V.target.value),className:"select",style:{flex:2},children:[_.jsx("option",{value:"",children:"Select Product"}),[...i].filter(V=>V.id!=="p_variableproduct"&&V.id!=="p_any_fluid"&&V.id!=="p_any_item").sort((V,F)=>V.name.localeCompare(F.name)).map(V=>_.jsxs("option",{value:V.id,children:[V.name," (",V.type,")"]},V.id))]}),_.jsx("input",{type:"number",step:"0.1",min:"0",value:j.quantity==="Variable"?"":j.quantity,onChange:V=>g(D,"quantity",parseFloat(V.target.value)),placeholder:j.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:j.quantity==="Variable",title:j.quantity==="Variable"?"Cannot edit Variable quantities":""}),_.jsx("button",{onClick:()=>b(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.outputs.length===0&&_.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},rc="industrialist_custom_products",nc="industrialist_custom_machines",ic="industrialist_custom_recipes",yO=(e,t,n)=>{localStorage.getItem(rc)||localStorage.setItem(rc,JSON.stringify(e)),localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(t)),localStorage.getItem(ic)||localStorage.setItem(ic,JSON.stringify(n))},ja=()=>{try{const e=localStorage.getItem(rc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Ra=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},nu=()=>{try{const e=localStorage.getItem(ic);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Us=e=>{try{return localStorage.setItem(rc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Gs=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},Ks=e=>{try{return localStorage.setItem(ic,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},fw=(e,t)=>{const n=ja(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Us(n)):!1},_w=(e,t)=>{const n=Ra(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Gs(n)):!1},gO=(e,t)=>{const n=nu(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Ks(n)):!1},vO=e=>Us(e),xO=e=>Gs(e),wO=e=>Ks(e),bO=(e,t,n)=>{const i={};return e&&(i.products=ja()),t&&(i.machines=Ra()),n&&(i.recipes=nu()),i},qO=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=ja(),i=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Us(a)&&(t.products=e.products.length)}if(e.machines){const n=Ra(),i=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Gs(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=nu(),i=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Ks(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,qr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),Pp=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,SO=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return Mn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const l=a.inputs.some(p=>p.product_id===e&&p.product_id!=="p_variableproduct"),d=t.includes(e)&&n.includes(a.id)&&a.inputs.some(p=>p.product_id==="p_variableproduct");return l||d||u})},CO=e=>Mn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),Cl=e=>{const t=Mn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[P0]:e==="m_liquid_dump"?[O0]:e==="m_liquid_burner"?[F0]:t},bE=(e,t,n,i,a=Hr)=>{const s=(i==null?void 0:i.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const l=Math.max(t,a),d=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return l<s?{...u,temperature:l,quantity:0,originalQuantity:d}:{...u,temperature:l,quantity:d,originalQuantity:d}}return u}if(nE(u.product_id)){const l=Math.max(t,a);return{...u,temperature:l}}return u})},bs=(e,t)=>{let n={...e};const i=dr[t];if(i){const s=d3(t),u=i.type==="boiler",l=u?Ki:Hr,d=u?{...s,coolantTemp:Ki}:s;let p=null;if(i.type==="product_dependent"&&e.inputs){const h=e.inputs.find(g=>["p_water","p_filtered_water","p_distilled_water"].includes(g.product_id));p=(h==null?void 0:h.product_id)||null}const m=pg(t,d,l,p,u?Ki:null),f=bE(e.outputs,m,u,i,l);n={...n,outputs:f,temperatureSettings:d}}if(Ur(t)){const s=an[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:In})}return n},kO=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:i,onDataChange:a})=>{const[s,u]=A.useState("products"),[l,d]=A.useState(""),[p,m]=A.useState(!0),[f,h]=A.useState(!0),[g,x]=A.useState(!0),q=A.useRef(null),w=()=>{const S=bO(p,f,g),E=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),I=URL.createObjectURL(E),M=document.createElement("a");M.href=I,M.download=`industrialist-data-${Date.now()}.json`,M.click(),URL.revokeObjectURL(I)},b=()=>{var S;(S=q.current)==null||S.click()},C=S=>{var M;const E=(M=S.target.files)==null?void 0:M[0];if(!E)return;const I=new FileReader;I.onload=T=>{try{const P=JSON.parse(T.target.result),j=P.products||P.machines||P.recipes,D=P.canvas;if(!j&&D){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),S.target.value="";return}if(!j){alert("This file does not contain any game data (products, machines, or recipes)."),S.target.value="";return}if(D&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){S.target.value="";return}const V=qO(P);let F=`Import complete:
`;V.products>0&&(F+=`- ${V.products} products imported/updated
`),V.machines>0&&(F+=`- ${V.machines} machines imported/updated
`),V.recipes>0&&(F+=`- ${V.recipes} recipes imported/updated
`),V.errors.length>0&&(F+=`
Errors: ${V.errors.join(", ")}`),alert(F),a()}catch(P){alert(`Import failed: ${P.message}`)}},I.readAsText(E),S.target.value=""};return _.jsx("div",{className:"modal-overlay",onClick:e,children:_.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[_.jsx("h2",{className:"modal-title",children:"Data Manager"}),_.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[_.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),_.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:p,onChange:S=>m(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:f,onChange:S=>h(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[_.jsx("input",{type:"checkbox",checked:g,onChange:S=>x(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),_.jsx("button",{onClick:w,className:"btn btn-primary",children:"Export Data"})]})]}),_.jsx("input",{ref:q,type:"file",accept:".json",style:{display:"none"},onChange:C})]}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[_.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),_.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),_.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:l,onChange:S=>d(S.target.value),className:"input"})}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&_.jsx(MO,{searchTerm:l,defaultProducts:t,onDataChange:a}),s==="machines"&&_.jsx(EO,{searchTerm:l,defaultMachines:n,onDataChange:a}),s==="recipes"&&_.jsx(IO,{searchTerm:l,defaultRecipes:i,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),_.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},MO=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[f,h]=A.useState({name:"",type:"item",price:0,rp_multiplier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(ja())},x=i.filter(M=>M.name.toLowerCase().includes(e.toLowerCase())||M.id.toLowerCase().includes(e.toLowerCase())).sort((M,T)=>M.name.localeCompare(T.name)),q=M=>{u(M.id),d({price:M.price==="Variable"?"":M.price,rp_multiplier:M.rp_multiplier==="Variable"?"":M.rp_multiplier,type:M.type})},w=M=>{const T={price:l.price===""?"Variable":parseFloat(l.price),rp_multiplier:l.rp_multiplier===""?"Variable":parseFloat(l.rp_multiplier),type:l.type};fw(M,T)?(g(),n(),u(null)):alert("Failed to update product")},b=()=>{u(null),d({})},C=M=>{const T=t.find(j=>j.id===M);if(!T){alert("Default product not found");return}const P={price:T.price,rp_multiplier:T.rp_multiplier,type:T.type};fw(M,P)?(g(),n()):alert("Failed to reset product to default")},S=M=>"p_"+M.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!f.name.trim()){alert("Product name is required");return}const M=S(f.name);if(i.find(j=>j.id===M)){alert(`Product ID "${M}" already exists. Please use a different name.`);return}const T={id:M,name:f.name.trim(),type:f.type,price:parseFloat(f.price)||0,rp_multiplier:parseFloat(f.rp_multiplier)||1},P=[...i,T];Us(P)?(g(),n(),m(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},I=M=>{var P;if(!window.confirm(`Delete product "${(P=i.find(j=>j.id===M))==null?void 0:P.name}"? This cannot be undone.`))return;const T=i.filter(j=>j.id!==M);Us(T)?(g(),n()):alert("Failed to delete product")};return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Product"})}),p&&_.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),_.jsx("input",{type:"text",value:f.name,onChange:M=>h({...f,name:M.target.value}),className:"input",placeholder:"Product name"}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?S(f.name):"p_..."]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),_.jsxs("select",{value:f.type,onChange:M=>h({...f,type:M.target.value}),className:"select",children:[_.jsx("option",{value:"item",children:"Item"}),_.jsx("option",{value:"fluid",children:"Fluid"})]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),_.jsx("input",{type:"number",value:f.price,onChange:M=>h({...f,price:M.target.value}),className:"input",placeholder:"0"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),_.jsx("input",{type:"number",step:"0.1",value:f.rp_multiplier,onChange:M=>h({...f,rp_multiplier:M.target.value}),className:"input",placeholder:"1"})]})]}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Product Name"}),_.jsx("div",{children:"Type"}),_.jsx("div",{children:"Price"}),_.jsx("div",{children:"RP Mult"}),_.jsx("div",{children:"Actions"})]}),x.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name}),s===M.id?_.jsxs(_.Fragment,{children:[_.jsxs("select",{value:l.type,onChange:T=>d({...l,type:T.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[_.jsx("option",{value:"item",children:"Item"}),_.jsx("option",{value:"fluid",children:"Fluid"})]}),_.jsx("input",{type:"number",value:l.price,onChange:T=>d({...l,price:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:M.price==="Variable",title:M.price==="Variable"?"Cannot edit Variable values":""}),_.jsx("input",{type:"number",value:l.rp_multiplier,onChange:T=>d({...l,rp_multiplier:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:M.rp_multiplier==="Variable",title:M.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>w(M.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),_.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.type}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.price==="Variable"?"Variable":`$${qr(M.price)}`}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:M.rp_multiplier==="Variable"?"Variable":`${M.rp_multiplier>=1e3?qr(M.rp_multiplier):M.rp_multiplier}x`}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>q(M),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>C(M.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),_.jsx("button",{onClick:()=>I(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},M.id))]})},EO=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[f,h]=A.useState({name:"",cost:0,tier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Ra())},x=i.filter(M=>M.name.toLowerCase().includes(e.toLowerCase())||M.id.toLowerCase().includes(e.toLowerCase())).sort((M,T)=>M.name.localeCompare(T.name)),q=M=>{u(M.id),d({cost:M.cost,tier:M.tier||1})},w=M=>{const T={cost:parseFloat(l.cost),tier:parseInt(l.tier)};_w(M,T)?(g(),n(),u(null)):alert("Failed to update machine")},b=()=>{u(null),d({})},C=M=>{const T=t.find(j=>j.id===M);if(!T){alert("Default machine not found");return}const P={cost:T.cost,tier:T.tier};_w(M,P)?(g(),n()):alert("Failed to reset machine to default")},S=M=>"m_"+M.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!f.name.trim()){alert("Machine name is required");return}const M=S(f.name);if(i.find(j=>j.id===M)){alert(`Machine ID "${M}" already exists. Please use a different name.`);return}const T={id:M,name:f.name.trim(),cost:parseFloat(f.cost)||0,tier:parseInt(f.tier)||1},P=[...i,T];Gs(P)?(g(),n(),m(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},I=M=>{var P;if(!window.confirm(`Delete machine "${(P=i.find(j=>j.id===M))==null?void 0:P.name}"? This cannot be undone.`))return;const T=i.filter(j=>j.id!==M);Gs(T)?(g(),n()):alert("Failed to delete machine")};return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Machine"})}),p&&_.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[_.jsxs("div",{style:{gridColumn:"1 / -1"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),_.jsx("input",{type:"text",value:f.name,onChange:M=>h({...f,name:M.target.value}),className:"input",placeholder:"Machine name"}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?S(f.name):"m_..."]})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),_.jsx("input",{type:"number",value:f.cost,onChange:M=>h({...f,cost:M.target.value}),className:"input",placeholder:"0"})]}),_.jsxs("div",{children:[_.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),_.jsxs("select",{value:f.tier,onChange:M=>h({...f,tier:M.target.value}),className:"select",children:[_.jsx("option",{value:"1",children:"Tier 1"}),_.jsx("option",{value:"2",children:"Tier 2"}),_.jsx("option",{value:"3",children:"Tier 3"}),_.jsx("option",{value:"4",children:"Tier 4"}),_.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Machine Name"}),_.jsx("div",{children:"Cost"}),_.jsx("div",{children:"Tier"}),_.jsx("div",{children:"Actions"})]}),x.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name}),s===M.id?_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"number",value:l.cost,onChange:T=>d({...l,cost:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),_.jsx("input",{type:"number",min:"1",max:"5",value:l.tier,onChange:T=>d({...l,tier:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>w(M.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),_.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",qr(M.cost)]}),_.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",M.tier||1]}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>q(M),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>C(M.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),_.jsx("button",{onClick:()=>I(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},M.id))]})},IO=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:i,onDataChange:a})=>{const[s,u]=A.useState([]),[l,d]=A.useState([]),[p,m]=A.useState([]),[f,h]=A.useState(null),[g,x]=A.useState(!1);A.useEffect(()=>{q(),w(),b()},[]);const q=()=>{u(nu())},w=()=>{d(ja())},b=()=>{m(Ra())},C=(M,T=!1)=>{if(T){const P=[...s,M];Ks(P)?(q(),w(),b(),a()):alert("Failed to create recipe")}else gO(M.id,M)?(q(),w(),b(),a()):alert("Failed to save recipe")},S=M=>{var P;if(!window.confirm(`Delete recipe "${((P=s.find(j=>j.id===M))==null?void 0:P.name)||M}"? This cannot be undone.`))return;const T=s.filter(j=>j.id!==M);Ks(T)?(q(),w(),b(),a()):alert("Failed to delete recipe")},E=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),x(!0)},I=s.filter(M=>{var T;return((T=M.name)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))||M.id.toLowerCase().includes(e.toLowerCase())}).sort((M,T)=>{const P=M.name||M.id,j=T.name||T.id;return P.localeCompare(j)});return _.jsxs("div",{children:[_.jsx("div",{style:{marginBottom:"15px"},children:_.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[_.jsx("div",{children:"Recipe Name"}),_.jsx("div",{children:"Machine"}),_.jsx("div",{children:"Cycle Time"}),_.jsx("div",{children:"Power"}),_.jsx("div",{children:"Actions"})]}),I.map(M=>_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:M.name||M.id}),_.jsx("div",{style:{color:(()=>{const T=p.find(P=>P.id===M.machine_id);if(!T)return"var(--text-secondary)";switch(T.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const T=p.find(P=>P.id===M.machine_id);return T?T.name:M.machine_id})()}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof M.cycle_time=="number"?`${M.cycle_time}s`:String(M.cycle_time)}),_.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof M.power_consumption=="number"?`${qr(M.power_consumption)}W`:typeof M.power_consumption=="object"&&M.power_consumption!==null?`${qr(M.power_consumption.max||M.power_consumption.average||0)}W`:String(M.power_consumption)}),_.jsxs("div",{style:{display:"flex",gap:"4px"},children:[_.jsx("button",{onClick:()=>{h(M),x(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),_.jsx("button",{onClick:()=>S(M.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},M.id)),f&&_.jsx(hO,{recipe:f,onClose:()=>{h(null),x(!1)},onSave:M=>C(M,g),availableProducts:l,defaultMachines:p,allRecipes:s,isCreatingNew:g})]})},Rs=(e,t)=>{var s,u,l,d,p,m;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},i=e.length;for(let f=0;f<i;f++){const h=e[f],g=h.id,x=(s=h.data)==null?void 0:s.recipe,q=((u=h.data)==null?void 0:u.machineCount)||0,w=(l=h.data)==null?void 0:l.machine;if(!x)return;const b=x.isMineshaftDrill||x.id==="r_mineshaft_drill",C=x.isLogicAssembler||x.id==="r_logic_assembler",S=x.isTreeFarm||x.id==="r_tree_farm",E=w&&w.id==="m_industrial_firebox",I=w&&Ur(w.id),M=b||C||S||E||I;let T=x.cycle_time;if(T==="Variable"||typeof T!="number"||T<=0){if(!M)return;T=1}const P=w&&Ur(w.id),j=P?an[w.id]:null;if(P&&(j==null?void 0:j.type)==="steam_input"&&!(w.id==="m_steam_cracking_plant"&&!hi(x))){const F=x.tempDependentInputTemp??In;T=Wn(w.id,F,T)}const D={id:g,recipe:x,machineCount:q,cycleTime:T,isSpecialRecipe:M,isMineshaftDrill:b,isLogicAssembler:C,isTempDependent:P,machineCountMode:((d=h.data)==null?void 0:d.machineCountMode)||"free",cappedMachineCount:(p=h.data)==null?void 0:p.cappedMachineCount,inputs:[],outputs:[]};(m=x.inputs)==null||m.forEach((F,Q)=>{const R=F.product_id;if(R==="p_variableproduct")return;const X=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!M)return;const H=b?X*q:X/T*q,te=D.inputs.length;D.inputs.push({productId:R,quantity:X,rate:H,index:te,recipeIndex:Q,connectedRate:0,temperature:null}),n.products[R]||(n.products[R]={producers:[],consumers:[],connections:[]}),n.products[R].consumers.push({nodeId:g,inputIndex:te,rate:H})});const V=x.outputs;V==null||V.forEach((F,Q)=>{const R=F.product_id;if(R==="p_variableproduct")return;const X=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!M)return;const H=b?X*q:X/T*q,te=D.outputs.length;D.outputs.push({productId:R,quantity:X,rate:H,index:te,recipeIndex:Q,connectedRate:0,temperature:F.temperature||null}),n.products[R]||(n.products[R]={producers:[],consumers:[],connections:[]}),n.products[R].producers.push({nodeId:g,outputIndex:te,rate:H})}),n.nodes[g]=D}const a=t.length;for(let f=0;f<a;f++){const h=t[f],g=n.nodes[h.source],x=n.nodes[h.target];if(!g||!x)continue;const q=parseInt(h.sourceHandle.split("-")[1]),w=parseInt(h.targetHandle.split("-")[1]),b=g.outputs.find(I=>I.recipeIndex===q),C=x.inputs.find(I=>I.recipeIndex===w);if(!b||!C||b.productId!==C.productId)return;const S=b.productId;b.temperature!==void 0&&b.temperature!==null&&(C.temperature=b.temperature);const E={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:b.index,targetInputIndex:C.index,productId:S,sourceRate:b.rate,targetRate:C.rate,flowRate:0,temperature:b.temperature||null};n.connections.push(E),n.products[S]&&n.products[S].connections.push(E)}return n};class NO{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}}let D0=new NO(100);class TO{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const i=this.find(t),a=this.find(n);i!==a&&(this.rank[i]<this.rank[a]?this.parent[i]=a:this.rank[i]>this.rank[a]?this.parent[a]=i:(this.parent[a]=i,this.rank[i]++))}}const PO=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const i=[],a=new Map;n.producers.forEach(m=>{const f=`out:${m.nodeId}:${m.outputIndex}`;a.has(f)||(a.set(f,i.length),i.push({type:"output",nodeId:m.nodeId,index:m.outputIndex,rate:m.rate}))}),n.consumers.forEach(m=>{const f=`in:${m.nodeId}:${m.inputIndex}`;a.has(f)||(a.set(f,i.length),i.push({type:"input",nodeId:m.nodeId,index:m.inputIndex,rate:m.rate}))});const s=new TO(i.length);n.connections.forEach(m=>{const f=`out:${m.sourceNodeId}:${m.sourceOutputIndex}`,h=`in:${m.targetNodeId}:${m.targetInputIndex}`,g=a.get(f),x=a.get(h);g!==void 0&&x!==void 0&&s.union(g,x)});const u=new Map;for(let m=0;m<i.length;m++){const f=s.find(m);u.has(f)||u.set(f,[]),u.get(f).push(m)}const l=[],d=new Map;let p=0;return u.forEach((m,f)=>{const h={id:p,ports:m.map(g=>i[g]),connections:[]};n.connections.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=a.get(x);q!==void 0&&s.find(q)===f&&h.connections.push(g)}),m.forEach(g=>{const x=i[g],q=x.type==="output"?`out:${x.nodeId}:${x.index}`:`in:${x.nodeId}:${x.index}`;d.set(q,p)}),l.push(h),p++}),{components:l,portToComponent:d,ports:i,portToIndex:a}},jO=e=>{const t=e.ports.map(i=>`${i.type}:${i.nodeId}:${i.index}:${i.rate}`).sort().join("|"),n=e.connections.map(i=>`${i.sourceNodeId}:${i.sourceOutputIndex}->${i.targetNodeId}:${i.targetInputIndex}`).sort().join("|");return`${t}##${n}`},RO=(e,t,n)=>{const i=qE(e,t),a=SE(e,t),s={totalProduction:i,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:l}=PO(e,t);return u.forEach(d=>{if(d.connections.length===0)return;const p=jO(d),m=`${t}:comp${d.id}`,f=D0.get(m);let h;if(f&&f.hash===p)h=JSON.parse(JSON.stringify(f.result));else{const g=VO(d.connections,i),x=AO(g);h={connectedFlow:0,connections:{}},d.connections.forEach((w,b)=>{const C=x.connectionFlows[b]||0;h.connections[w.id]={flowRate:C,supplyRatio:w.sourceRate>0?C/w.sourceRate:0,demandRatio:w.targetRate>0?C/w.targetRate:0},h.connectedFlow+=C});const q=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});D0.set(m,{hash:p,result:q})}Object.assign(s.connections,h.connections),s.connectedFlow+=h.connectedFlow}),s},OO=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,VO=(e,t)=>{const n=new Map;let i=0;const a=g=>{let x=n.get(g);return x===void 0&&(x=i++,n.set(g,x)),x},s=a("virtual-source"),u=a("virtual-sink"),l=new Map,d=new Map;e.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=`in:${g.targetNodeId}:${g.targetInputIndex}`;a(x),a(q),l.has(x)||l.set(x,g.sourceRate),d.has(q)||d.set(q,g.targetRate)});const p=Array.from({length:i},()=>[]),m=[],f=t||1e6,h=(g,x,q,w=-1)=>{const b=m.length,C=m.length+1;m.push({to:x,cap:q,flow:0,rev:C,connIndex:w}),m.push({to:g,cap:0,flow:0,rev:b,connIndex:-1}),p[g].push(b),p[x].push(C)};return l.forEach((g,x)=>{h(s,a(x),g)}),d.forEach((g,x)=>{h(a(x),u,g)}),e.forEach((g,x)=>{const q=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,w=`in:${g.targetNodeId}:${g.targetInputIndex}`,b=a(q),C=a(w);h(b,C,f,x)}),{adj:p,edges:m,nodeCount:i,SOURCE:s,SINK:u}};class FO{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const AO=e=>{const{adj:t,edges:n,nodeCount:i,SOURCE:a,SINK:s}=e,u=new Int32Array(i),l=new Int32Array(i),d=new FO(i),p=()=>{for(u.fill(-1),u[a]=0,d.clear(),d.push(a);!d.isEmpty();){const w=d.shift(),b=t[w],C=b.length;for(let S=0;S<C;S++){const E=n[b[S]],I=E.cap-E.flow;u[E.to]<0&&I>1e-15&&(u[E.to]=u[w]+1,d.push(E.to))}}return u[s]>=0},m=()=>{const w=[a],b=new Int32Array(i).fill(-1),C=new Uint8Array(i);for(C[a]=1;w.length>0;){const S=w[w.length-1];if(S===s){let M=1e15,T=s;for(;T!==a;){const P=b[T],j=n[P],D=j.cap-j.flow;M=Math.min(M,D);let V=!1;for(let F=0;F<i;F++){const Q=t[F];for(let R=0;R<Q.length;R++)if(Q[R]===P){T=F,V=!0;break}if(V)break}}for(T=s;T!==a;){const P=b[T];n[P].flow+=M,n[n[P].rev].flow-=M;let j=!1;for(let D=0;D<i;D++){const V=t[D];for(let F=0;F<V.length;F++)if(V[F]===P){T=D,j=!0;break}if(j)break}}return M}let E=!1;const I=t[S];for(let M=l[S];M<I.length;M++){const T=I[M],P=n[T],j=P.cap-P.flow;if(u[S]+1===u[P.to]&&j>1e-15&&!C[P.to]){C[P.to]=1,b[P.to]=T,w.push(P.to),l[S]=M,E=!0;break}}E||(w.pop(),l[S]=I.length)}return 0};let f=0,h=0;const g=1e5;for(;p()&&h++<g;)for(l.fill(0);;){const w=m();if(w===0)break;f+=w}const x=[],q=n.length;for(let w=0;w<q;w++){const b=n[w];b.connIndex>=0&&(x[b.connIndex]=OO(b.flow))}return{totalFlow:f,connectionFlows:x}},jp=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const i=e.nodes[n];t.byNode[n]={inputFlows:i.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:i.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:qE(e,n),totalConsumption:SE(e,n),connectedFlow:0};return}const s=RO(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const l=s.connections[u.id];if(l){t.byConnection[u.id]=l;const d=t.byNode[u.sourceNodeId];d&&(d.outputFlows[u.sourceOutputIndex].connected+=l.flowRate,d.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const p=t.byNode[u.targetNodeId];p&&(p.inputFlows[u.targetInputIndex].connected+=l.flowRate,p.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},qE=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((i,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return i+u.rate},0):0},SE=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((i,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return i+u.rate},0):0},Sn=()=>{D0.clear()},$n=1e-10,LO=(e,t,n,i)=>{var m,f;const a=new Map,s=new Set,u=(m=e.nodes[n])==null?void 0:m.inputs[i];if(!u)return a;const l=u.productId;if(!e.products[l])return a;const p=[{nodeId:n,inputIndex:i,productId:l}];for(s.add(`${n}:${i}`);p.length>0;){const{nodeId:h,inputIndex:g,productId:x}=p.shift();(((f=e.products[x])==null?void 0:f.connections.filter(w=>w.targetNodeId===h&&w.targetInputIndex===g))||[]).forEach(w=>{var E,I;const b=e.nodes[w.sourceNodeId];if(!b)return;const C=`${w.sourceNodeId}:${w.sourceOutputIndex}`,S=(E=t.byNode[w.sourceNodeId])==null?void 0:E.outputFlows[w.sourceOutputIndex];if(S){a.set(C,{nodeId:w.sourceNodeId,outputIndex:w.sourceOutputIndex,maxFlow:S.produced});const M=b.outputs[w.sourceOutputIndex];if(!M)return;(((I=e.products[M.productId])==null?void 0:I.connections.filter(P=>P.sourceNodeId===w.sourceNodeId&&P.sourceOutputIndex===w.sourceOutputIndex))||[]).forEach(P=>{var V;if(P.targetNodeId===h&&P.targetInputIndex===g)return;const j=`${P.targetNodeId}:${P.targetInputIndex}`;if(s.has(j))return;s.add(j);const D=(V=e.nodes[P.targetNodeId])==null?void 0:V.inputs[P.targetInputIndex];D&&p.push({nodeId:P.targetNodeId,inputIndex:P.targetInputIndex,productId:D.productId})})}})}return a},DO=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];s&&a.inputs.forEach((u,l)=>{const d=s.inputFlows[l];if(!d)return;const p=d.needed-d.connected;if(p<=$n)return;if(u.productId,LO(e,t,i,l).forEach((h,g)=>{var j;const x=e.nodes[h.nodeId];if(!x)return;const q=x.machineCount||0;if(q<=0)return;const w=x.machineCountMode||"free";if(w==="locked")return;let b=x.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const C=x.outputs[h.outputIndex];if(!C)return;const S=C.originalQuantity!==void 0?C.originalQuantity:C.quantity;if(typeof S!="number")return;const E=x.isMineshaftDrill?S:S/b;if(typeof E!="number"||E<=$n)return;const I=(j=t.byNode[h.nodeId])==null?void 0:j.outputFlows[h.outputIndex];if(!I)return;const M=p/E;let T=q+M;if(w==="capped"&&x.cappedMachineCount&&(T=Math.min(T,x.cappedMachineCount),T<=q+$n))return;const P=x.outputs.length>1&&x.outputs.some((D,V)=>{if(V===h.outputIndex)return!1;const F=e.products[D.productId];return!F||!F.connections.some(R=>R.sourceNodeId===h.nodeId&&R.sourceOutputIndex===V)?!1:F.connections.some(R=>R.sourceNodeId!==h.nodeId||R.sourceOutputIndex!==V?!1:F.connections.filter(H=>H.targetNodeId===R.targetNodeId&&H.targetInputIndex===R.targetInputIndex&&H.sourceNodeId!==h.nodeId).length===0)});n.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:C.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:I.produced,targetFlow:I.produced+p,deltaFlow:p,currentMachineCount:q,suggestedMachineCount:T,machineDelta:M,hasConstrainedOutputs:P,isMultiOutput:x.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const h=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof h=="number"&&h>$n){const g=p/h,x=(a.machineCount||0)-g;x>$n&&n.push({nodeId:i,handleType:"input",handleIndex:l,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:d.connected,targetFlow:d.connected,deltaFlow:-p,currentMachineCount:a.machineCount||0,suggestedMachineCount:x,machineDelta:-g})}}})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let l=a.cycleTime;(typeof l!="number"||l<=0)&&(l=1),a.outputs.forEach((d,p)=>{var S;const m=s.outputFlows[p];if(!m)return;const f=m.produced-m.connected;if(f<=$n||(a.machineCountMode||"free")==="locked")return;const g=d.originalQuantity!==void 0?d.originalQuantity:d.quantity,x=a.isMineshaftDrill?g:g/l;if(typeof x!="number"||x<=$n)return;const q=f/x,w=u-q;w>$n&&n.push({nodeId:i,handleType:"output",handleIndex:p,productId:d.productId,adjustmentType:"decrease",reason:"excess",currentFlow:m.produced,targetFlow:m.produced-f,deltaFlow:-f,currentMachineCount:u,suggestedMachineCount:w,machineDelta:-q});const b=d.productId;(((S=e.products[b])==null?void 0:S.connections.filter(E=>E.sourceNodeId===i&&E.sourceOutputIndex===p))||[]).forEach(E=>{var Q,R,X,H;const I=e.nodes[E.targetNodeId];if(!I)return;const M=I.machineCount||0;if(M<=0)return;const T=I.machineCountMode||"free";if(T==="locked")return;let P=I.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const j=I.inputs[E.targetInputIndex];if(!j)return;const D=I.isMineshaftDrill?j.quantity:j.quantity/P;if(typeof D!="number"||D<=$n)return;const V=f/D;let F=M+V;T==="capped"&&I.cappedMachineCount&&(F=Math.min(F,I.cappedMachineCount),F<=M+$n)||n.push({nodeId:E.targetNodeId,handleType:"input",handleIndex:E.targetInputIndex,productId:j.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((R=(Q=t.byNode[E.targetNodeId])==null?void 0:Q.inputFlows[E.targetInputIndex])==null?void 0:R.connected)||0,targetFlow:(((H=(X=t.byNode[E.targetNodeId])==null?void 0:X.inputFlows[E.targetInputIndex])==null?void 0:H.connected)||0)+f,deltaFlow:f,currentMachineCount:M,suggestedMachineCount:F,machineDelta:V})})})}),n.forEach(i=>{const a=Math.round(i.suggestedMachineCount*1e10)/1e10,s=Math.round(i.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;i.suggestedMachineCount=u?Math.round(i.suggestedMachineCount*1e20)/1e20:Math.round(i.suggestedMachineCount*1e10)/1e10;const l=Math.round(i.machineDelta*1e10)/1e10,d=Math.round(i.machineDelta*1e20)/1e20,p=Math.abs(d-l)>1e-12;i.machineDelta=p?Math.round(i.machineDelta*1e20)/1e20:Math.round(i.machineDelta*1e10)/1e10}),n},kl=(e,t)=>{const n=[],i=[];Object.keys(e.products).forEach(u=>{const l=e.products[u],d=t.byProduct[u];if(!d)return;const p=d.totalProduction,m=d.connectedFlow,f=p-m;if(Math.abs(f)>1e-6&&f>0){const h=vt(u);h&&n.push({productId:u,product:h,excessRate:f,totalProduction:p,connectedConsumption:m,percentageExcess:p>0?f/p*100:0})}l.consumers.forEach(h=>{var x;const g=(x=t.byNode[h.nodeId])==null?void 0:x.inputFlows[h.inputIndex];if(g){const q=g.needed-g.connected;if(Math.abs(q)>1e-6&&q>0){const w=vt(u);if(w){let b=i.find(C=>C.productId===u);b?(b.deficiencyRate+=q,b.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q})):i.push({productId:u,product:w,deficiencyRate:q,totalConsumption:d.totalConsumption,connectedProduction:m,percentageDeficient:d.totalConsumption>0?q/d.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q}]})}}}})}),n.sort((u,l)=>l.excessRate-u.excessRate),i.sort((u,l)=>l.deficiencyRate-u.deficiencyRate);const s=n.length>0||i.length>0?DO(e,t):[];return{excess:n,deficiency:i,suggestions:s}},mw=(e,t,n={})=>{const{skipTemperature:i=!1,previousTemperatureData:a=null}=n,s=Rs(e,t),u=jp(s);if(i){const C=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:C}}if(!Object.values(s.nodes).some(C=>{const S=C.recipe.machine_id;return dr[S]||Ur(S)})){const C={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:C}}const d=ew(s,u),p=M0(e,d,s);if(!p.some((C,S)=>{var V,F,Q,R,X,H,te,U;const E=e[S],I=(F=(V=E.data)==null?void 0:V.recipe)==null?void 0:F.tempDependentInputTemp,M=(R=(Q=C.data)==null?void 0:Q.recipe)==null?void 0:R.tempDependentInputTemp,T=(H=(X=E.data)==null?void 0:X.recipe)==null?void 0:H.outputs.map(K=>K.temperature).filter(K=>K!==void 0),P=(U=(te=C.data)==null?void 0:te.recipe)==null?void 0:U.outputs.map(K=>K.temperature).filter(K=>K!==void 0),j=Math.abs((I||0)-(M||0))>.1,D=T.length!==P.length||T.some((K,ie)=>Math.abs((K||0)-(P[ie]||0))>.1);return j||D}))return{...kl(s,u),graph:s,flows:u,temperatureData:d};const f=Rs(p,t),h=jp(f),g=ew(f,h),x=M0(p,g,f),q=Rs(x,t),w=jp(q);return{...kl(q,w),graph:q,flows:w,temperatureData:g}},BO=e=>e.excess||[],zO=e=>e.deficiency||[],$O=(e,t,n,i,a,s,u)=>{if(!n||!t)return 1;const l=t.data.recipe,d=t.data.machineCount||0,p=ht(l.machine_id);let m=l.cycle_time;if((typeof m!="number"||m<=0)&&(m=1),p&&Ur(p.id)){const w=an[p.id];if((w==null?void 0:w.type)==="steam_input"&&(p.id!=="m_steam_cracking_plant"||hi(l))){const b=l.tempDependentInputTemp??In;m=Wn(p.id,b,m)}}const f=CE(e,n,null,a,s,i);let h=f.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const g=ht(f.machine_id);if(g&&Ur(g.id)){const w=an[g.id];if((w==null?void 0:w.type)==="steam_input"&&(g.id!=="m_steam_cracking_plant"||hi(f))){const b=f.tempDependentInputTemp??In;h=Wn(g.id,b,h)}}let x=0,q=!1;if(u&&u.byNode&&u.byNode[t.id]){const w=u.byNode[t.id];if(n.isOutput){const b=w.outputFlows[n.outputIndex];if(b){q=!0;const C=b.produced-b.connected;x=Math.max(0,C)}}else{const b=w.inputFlows[n.inputIndex];if(b){q=!0;const C=b.needed-b.connected;x=Math.max(0,C)}}}if(q&&x===0)return 0;if(!q)if(n.isOutput){const w=l.outputs[n.outputIndex];if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;typeof b=="number"&&(x=b/m*d)}}else{const w=l.inputs[n.inputIndex];w&&typeof w.quantity=="number"&&(x=w.quantity/m*d)}if(n.isOutput){const w=f.inputs.find(b=>b.product_id===n.productId);if(w&&typeof w.quantity=="number"&&w.quantity>0){const b=w.quantity/h;return x/b}}else{const w=f.outputs.find(b=>b.product_id===n.productId);if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;if(typeof b=="number"&&b>0){const C=b/h;return x/C}}}return 1},CE=(e,t,n,i,a,s)=>{var d,p,m,f,h,g,x,q,w,b,C,S;let u={...e};const l=ht(e.machine_id);if(!kE(u))return u;if((l==null?void 0:l.id)==="m_industrial_firebox"&&hE(e.id)){const E=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let I=((d=i==null?void 0:i.fireboxConfig)==null?void 0:d.fuel)||"p_coke_fuel";const M=(t==null?void 0:t.productId)||(n==null?void 0:n.id);M&&E.includes(M)&&(I=M);const T=Jl(e.id,I);return T&&(u={...u,inputs:T0(e.inputs,I,e.id),fireboxSettings:{fuel:I},cycle_time:T.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const E=((p=i==null?void 0:i.drillConfig)==null?void 0:p.drillHead)||"steel",I=((m=i==null?void 0:i.drillConfig)==null?void 0:m.consumable)||"hydrochloric_acid",M=((f=i==null?void 0:i.drillConfig)==null?void 0:f.machineOil)!==void 0?i.drillConfig.machineOil:!0,T=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],P={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let j=E,D=100;const V=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(V)if(T.includes(V))j=P[V];else if(t!=null&&t.isOutput)D=100;else{const X=s(V,j,I,M);X&&(D=X)}const F=iE(j,I,M,D),Q=oE(j,I,M,D),R=Oo(j,I,M,D);return u={...u,inputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:Q.length>0?Q:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:j,consumable:I,machineOil:M,depth:D},cycle_time:1,power_consumption:R?{max:R.drillingPower*1e6,average:(R.drillingPower*R.lifeTime+R.idlePower*(R.replacementTime+R.travelTime))/R.totalCycleTime*1e6}:"Variable",pollution:R?R.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const E=((h=i==null?void 0:i.assemblerConfig)==null?void 0:h.outerStage)||1,I=((g=i==null?void 0:i.assemblerConfig)==null?void 0:g.innerStage)||2,M=((x=i==null?void 0:i.assemblerConfig)==null?void 0:x.machineOil)!==void 0?i.assemblerConfig.machineOil:!0,T=((q=i==null?void 0:i.assemblerConfig)==null?void 0:q.tickCircuitDelay)||0;let P=E===1?`p_${I}x_microchip`:`p_${E}x${I}x_microchip`;const j=(t==null?void 0:t.productId)||(n==null?void 0:n.id);j&&j.includes("microchip")&&(P=j);const D=sE(P,M),V=uE(P,M),F=ru(P,M,T),Q=P.match(/p_(?:(\d+)x)?(\d+)x_microchip/),R=Q&&Q[1]?parseInt(Q[1]):1,X=Q?parseInt(Q[2]):I;return u={...u,inputs:D.length>0?D:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:V.length>0?V:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:R,innerStage:X,machineOil:M,tickCircuitDelay:T},cycle_time:F?F.cycleTime:"Variable",power_consumption:F?{max:F.maxPowerConsumption,average:F.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const E=((w=i==null?void 0:i.treeFarmConfig)==null?void 0:w.trees)||450,I=((b=i==null?void 0:i.treeFarmConfig)==null?void 0:b.harvesters)||20,M=((C=i==null?void 0:i.treeFarmConfig)==null?void 0:C.sprinklers)||24,T=((S=i==null?void 0:i.treeFarmConfig)==null?void 0:S.outputs)||8,P=1,j=fE(M),D=fg(E,I,a),V=Zl(E,I,M,T,P,a);return u={...u,inputs:j.length>0?j:[{product_id:"p_water",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:E,harvesters:I,sprinklers:M,outputs:T,controller:P},cycle_time:1,power_consumption:V?V.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let E="p_any_item",I="p_any_fluid";const M=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(M)if(M==="p_concrete_block"||M==="p_lead_ingot")E="p_fission_byproducts",I="p_depleted_uf6_waste";else{const j=vt(M);(j==null?void 0:j.type)==="item"?(E=M,I="p_any_fluid"):(j==null?void 0:j.type)==="fluid"&&(E="p_any_item",I=M)}else E="p_fission_byproducts",I="p_depleted_uf6_waste";const T=ec(0,0,E,I),P=Ol(0,0);return u={...u,inputs:T,outputs:[],wasteFacilitySettings:{itemProductId:E,fluidProductId:I,itemFlowRate:0,fluidFlowRate:0},cycle_time:P.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let E=["p_water","p_residue"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const P=vt(I);(P==null?void 0:P.type)==="fluid"&&(E=[I,I])}const M=R0(E),T=Ts(M);return u={...u,inputs:M,outputs:[],liquidDumpSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:T},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let E=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const P=vt(I);(P==null?void 0:P.type)==="fluid"&&(E=Array(8).fill(I))}const M=V0(E),T=Ps(M);return u={...u,inputs:M,outputs:[],liquidBurnerSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:T},u}return u},HO=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],WO=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Ws).forEach(n=>{n.forEach(i=>t.add(i.product_id))}),Array.from(t)}return e==="r_logic_assembler"?aE.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},kE=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&hE(e.id),hw=1e-10,UO=(e,t,n,i,a,s=null)=>{if(t<hw)return new Map([[e,n]]);const u=n/t,l=new Map;l.set(e,n);const d=new Map;d.set(e,u);const p=new Set([e]),m=[e];for(;m.length>0;){const x=m.shift(),q=i.nodes[x];q&&(q.outputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.sourceNodeId===x))||[]).forEach(S=>{p.has(S.targetNodeId)||(p.add(S.targetNodeId),m.push(S.targetNodeId))})}),q.inputs.forEach(w=>{var C;(((C=i.products[w.productId])==null?void 0:C.connections.filter(S=>S.targetNodeId===x))||[]).forEach(S=>{p.has(S.sourceNodeId)||(p.add(S.sourceNodeId),m.push(S.sourceNodeId))})}))}const f=10;let h=0,g=!0;for(;g&&h<f;)g=!1,h++,p.forEach(x=>{var T;if(x===e)return;const q=i.nodes[x];if(!q)return;const w=(T=s==null?void 0:s.find(P=>P.id===x))==null?void 0:T.data,b=(w==null?void 0:w.machineCountMode)||q.machineCountMode||"free";if(b==="locked")return;const C=q.machineCount||0;if(C<hw)return;const S=[],E=[];if(q.outputs.forEach((P,j)=>{var V;(((V=i.products[P.productId])==null?void 0:V.connections.filter(F=>F.sourceNodeId===x&&F.sourceOutputIndex===j))||[]).forEach(F=>{const Q=d.get(F.targetNodeId);Q!==void 0&&(S.push(Q),E.push({type:"output",productId:P.productId,targetNodeId:F.targetNodeId,ratio:Q}))})}),q.inputs.forEach((P,j)=>{var V;(((V=i.products[P.productId])==null?void 0:V.connections.filter(F=>F.targetNodeId===x&&F.targetInputIndex===j))||[]).forEach(F=>{const Q=d.get(F.sourceNodeId);Q!==void 0&&(S.push(Q),E.push({type:"input",productId:P.productId,sourceNodeId:F.sourceNodeId,ratio:Q}))})}),S.length===0)return;const I=Math.max(...S),M=d.get(x)||1;if(Math.abs(I-M)>1e-4){d.set(x,I);let P=C*I;if(b==="capped"){const j=(w==null?void 0:w.cappedMachineCount)||q.cappedMachineCount;typeof j=="number"&&(P=Math.min(P,j))}l.set(x,P),g=!0}});return l};var yw={},Rp,gw;function ME(){if(gw)return Rp;gw=1;function e(t,n,i,a){this.feasible=i,this.evaluation=n,this.bounded=a,this._tableau=t}return Rp=e,e.prototype.generateSolutionSet=function(){for(var t={},n=this._tableau,i=n.varIndexByRow,a=n.variablesPerIndex,s=n.matrix,u=n.rhsColumn,l=n.height-1,d=Math.round(1/n.precision),p=1;p<=l;p+=1){var m=i[p],f=a[m];if(!(f===void 0||f.isSlack===!0)){var h=s[p][u];t[f.id]=Math.round((Number.EPSILON+h)*d)/d}}return t},Rp}var Op,vw;function GO(){if(vw)return Op;vw=1;var e=ME();function t(n,i,a,s,u){e.call(this,n,i,a,s),this.iter=u}return Op=t,t.prototype=Object.create(e.prototype),t.constructor=t,Op}var Vp,xw;function Yn(){if(xw)return Vp;xw=1;var e=ME(),t=GO();function n(a){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=a||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Vp=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function i(a,s){this.priority=a,this.reducedCosts=new Array(s);for(var u=0;u<s;u+=1)this.reducedCosts[u]=0}return i.prototype.copy=function(){var a=new i(this.priority,this.reducedCosts.length);return a.reducedCosts=this.reducedCosts.slice(),a},n.prototype.setOptionalObjective=function(a,s,u){var l=this.objectivesByPriority[a];if(l===void 0){var d=Math.max(this.width,s+1);l=new i(a,d),this.objectivesByPriority[a]=l,this.optionalObjectives.push(l),this.optionalObjectives.sort(function(p,m){return p.priority-m.priority})}l.reducedCosts[s]=u},n.prototype.initialize=function(a,s,u,l){this.variables=u,this.unrestrictedVars=l,this.width=a,this.height=s;for(var d=new Array(a),p=0;p<a;p++)d[p]=0;this.matrix=new Array(s);for(var m=0;m<s;m++)this.matrix[m]=d.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=a+s-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var a=this.model.variables,s=this.model.constraints,u=a.length,l=s.length,d,p,m=this.matrix[0],f=this.model.isMinimization===!0?-1:1;for(d=0;d<u;d+=1){var h=a[d],g=h.priority,x=f*h.cost;g===0?m[d+1]=x:this.setOptionalObjective(g,d+1,x),p=a[d].index,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=d+1,this.varIndexByCol[d+1]=p}for(var q=1,w=0;w<l;w+=1){var b=s[w],C=b.index;this.rowByVarIndex[C]=q,this.colByVarIndex[C]=-1,this.varIndexByRow[q]=C;var S,E,I,M=b.terms,T=M.length,P=this.matrix[q++];if(b.isUpperBound){for(S=0;S<T;S+=1)E=M[S],I=this.colByVarIndex[E.variable.index],P[I]=E.coefficient;P[0]=b.rhs}else{for(S=0;S<T;S+=1)E=M[S],I=this.colByVarIndex[E.variable.index],P[I]=-E.coefficient;P[0]=-b.rhs}}},n.prototype.setModel=function(a){this.model=a;var s=a.nVariables+1,u=a.nConstraints+1;return this.initialize(s,u,a.variables,a.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},n.prototype.density=function(){for(var a=0,s=this.matrix,u=0;u<this.height;u++)for(var l=s[u],d=0;d<this.width;d++)l[d]!==0&&(a+=1);return a/(this.height*this.width)},n.prototype.setEvaluation=function(){var a=Math.round(1/this.precision),s=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+s)*a)/a;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},n.prototype.getSolution=function(){var a=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new t(this,a,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,a,this.feasible,this.bounded)},Vp}var ww;function KO(){if(ww)return yw;ww=1;var e=Yn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d,p=0;;){for(var m=0,f=-this.precision,h=1;h<=l;h++){d=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var g=a[h][s];g<f&&(f=g,m=h)}if(m===0)return this.feasible=!0,p;for(var x=0,q=-1/0,w=a[0],b=a[m],C=1;C<=u;C++){var S=b[C];if(d=this.unrestrictedVars[this.varIndexByCol[C]]===!0,d||S<-this.precision){var E=-w[C]/S;q<E&&(q=E,x=C)}}if(x===0)return this.feasible=!1,p;if(n){i.push([this.varIndexByRow[m],this.varIndexByCol[x]]);var I=this.checkForCycles(i);if(I.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+I[0]),this.model.messages.push("Length :"+I[1]),this.feasible=!1,p}this.pivot(m,x),p+=1}},e.prototype.phase2=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d=this.precision,p=this.optionalObjectives.length,m=null,f=0,h,g;;){var x=a[this.costRowIndex];p>0&&(m=[]);for(var q=0,w=d,b=!1,C=1;C<=u;C++){if(h=x[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,p>0&&-d<h&&h<d){m.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}if(p>0)for(var S=0;q===0&&m.length>0&&S<p;){var E=[],I=this.optionalObjectives[S].reducedCosts;w=d;for(var M=0;M<m.length;M++){if(C=m[M],h=I[C],g=this.unrestrictedVars[this.varIndexByCol[C]]===!0,-d<h&&h<d){E.push(C);continue}if(g&&h<0){-h>w&&(w=-h,q=C,b=!0);continue}h>w&&(w=h,q=C,b=!1)}m=E,S+=1}if(q===0)return this.setEvaluation(),this.simplexIters+=1,f;var T=0,P=1/0;this.varIndexByRow;for(var j=1;j<=l;j++){var D=a[j],V=D[s],F=D[q];if(!(-d<F&&F<d)){if(F>0&&d>V&&V>-d){P=0,T=j;break}var Q=b?-V/F:V/F;Q>d&&P>Q&&(P=Q,T=j)}}if(P===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[q],f;if(n){i.push([this.varIndexByRow[T],this.varIndexByCol[q]]);var R=this.checkForCycles(i);if(R.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+R[0]),this.model.messages.push("Length :"+R[1]),this.feasible=!1,f}this.pivot(T,q,!0),f+=1}};var t=[];return e.prototype.pivot=function(n,i){var a=this.matrix,s=a[n][i],u=this.height-1,l=this.width-1,d=this.varIndexByRow[n],p=this.varIndexByCol[i];this.varIndexByRow[n]=p,this.varIndexByCol[i]=d,this.rowByVarIndex[p]=n,this.rowByVarIndex[d]=-1,this.colByVarIndex[p]=-1,this.colByVarIndex[d]=i;for(var m=a[n],f=0,h=0;h<=l;h++)m[h]>=-1e-16&&m[h]<=1e-16?m[h]=0:(m[h]/=s,t[f]=h,f+=1);m[i]=1/s;var g,x,q;this.precision;for(var w=0;w<=u;w++)if(w!==n&&!(a[w][i]>=-1e-16&&a[w][i]<=1e-16)){var b=a[w];if(g=b[i],g>=-1e-16&&g<=1e-16)g!==0&&(b[i]=0);else{for(x=0;x<f;x++)h=t[x],q=m[h],q>=-1e-16&&q<=1e-16?q!==0&&(m[h]=0):b[h]=b[h]-g*q;b[i]=-g/s}}var C=this.optionalObjectives.length;if(C>0)for(var S=0;S<C;S+=1){var E=this.optionalObjectives[S].reducedCosts;if(g=E[i],g!==0){for(x=0;x<f;x++)h=t[x],q=m[h],q!==0&&(E[h]=E[h]-g*q);E[i]=-g/s}}},e.prototype.checkForCycles=function(n){for(var i=0;i<n.length-1;i++)for(var a=i+1;a<n.length;a++){var s=n[i],u=n[a];if(s[0]===u[0]&&s[1]===u[1]){if(a-i>n.length-a)break;for(var l=!0,d=1;d<a-i;d++){var p=n[i+d],m=n[a+d];if(p[0]!==m[0]||p[1]!==m[1]){l=!1;break}}if(l)return[i,a-i]}}return[]},yw}var bw={},Fp,qw;function yg(){if(qw)return Fp;qw=1;function e(l,d,p,m){this.id=l,this.cost=d,this.index=p,this.value=0,this.priority=m}function t(l,d,p,m){e.call(this,l,d,p,m)}t.prototype.isInteger=!0;function n(l,d){e.call(this,l,0,d,0)}n.prototype.isSlack=!0;function i(l,d){this.variable=l,this.coefficient=d}function a(l,d,p){return p===0||p==="required"?null:(d=d||1,p=p||1,l.isMinimization===!1&&(d=-d),l.addVariable(d,"r"+l.relaxationIndex++,!1,!1,p))}function s(l,d,p,m){this.slack=new n("s"+p,p),this.index=p,this.model=m,this.rhs=l,this.isUpperBound=d,this.terms=[],this.termsByVarIndex={},this.relaxation=null}s.prototype.addTerm=function(l,d){var p=d.index,m=this.termsByVarIndex[p];if(m===void 0)m=new i(d,l),this.termsByVarIndex[p]=m,this.terms.push(m),this.isUpperBound===!0&&(l=-l),this.model.updateConstraintCoefficient(this,d,l);else{var f=m.coefficient+l;this.setVariableCoefficient(f,d)}return this},s.prototype.removeTerm=function(l){return this},s.prototype.setRightHandSide=function(l){if(l!==this.rhs){var d=l-this.rhs;this.isUpperBound===!0&&(d=-d),this.rhs=l,this.model.updateRightHandSide(this,d)}return this},s.prototype.setVariableCoefficient=function(l,d){var p=d.index;if(p===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var m=this.termsByVarIndex[p];if(m===void 0)this.addTerm(l,d);else if(l!==m.coefficient){var f=l-m.coefficient;this.isUpperBound===!0&&(f=-f),m.coefficient=l,this.model.updateConstraintCoefficient(this,d,f)}return this},s.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this._relax(this.relaxation)},s.prototype._relax=function(l){l!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,l):this.setVariableCoefficient(1,l))};function u(l,d){this.upperBound=l,this.lowerBound=d,this.model=l.model,this.rhs=l.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(l,d){return this.upperBound.addTerm(l,d),this.lowerBound.addTerm(l,d),this},u.prototype.removeTerm=function(l){return this.upperBound.removeTerm(l),this.lowerBound.removeTerm(l),this},u.prototype.setRightHandSide=function(l){this.upperBound.setRightHandSide(l),this.lowerBound.setRightHandSide(l),this.rhs=l},u.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Fp={Constraint:s,Variable:e,IntegerVariable:t,SlackVariable:n,Equality:u,Term:i},Fp}var Sw;function YO(){if(Sw)return bw;Sw=1;var e=Yn(),t=yg().SlackVariable;return e.prototype.addCutConstraints=function(n){for(var i=n.length,a=this.height,s=a+i,u=a;u<s;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var l,d=this.width-1,p=0;p<i;p+=1){var m=n[p],f=a+p,h=m.type==="min"?-1:1,g=m.varIndex,x=this.rowByVarIndex[g],q=this.matrix[f];if(x===-1){for(q[this.rhsColumn]=h*m.value,l=1;l<=d;l+=1)q[l]=0;q[this.colByVarIndex[g]]=h}else{var w=this.matrix[x],b=w[this.rhsColumn];for(q[this.rhsColumn]=h*(m.value-b),l=1;l<=d;l+=1)q[l]=-h*w[l]}var C=this.getNewElementIndex();this.varIndexByRow[f]=C,this.rowByVarIndex[C]=f,this.colByVarIndex[C]=-1,this.variablesPerIndex[C]=new t("s"+C,C),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=Math.floor(s);for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]];if(!m.isInteger)i[l][p]=Math.min(0,i[n][p]/(1-u));else{var f=i[n][p],h=Math.floor(f)+Math.max(0,f-Math.floor(f)-u)/(1-u);i[l][p]=h}}for(var g=0;g<this.width;g+=1)i[l][g]-=i[n][g];return!0},e.prototype._addUpperBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=-u;for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]],f=i[n][p],h=f-Math.floor(f);m.isInteger?h<=u?i[l][p]=-h:i[l][p]=-(1-h)*u/h:f>=0?i[l][p]=-f:i[l][p]=f*u/(1-u)}return!0},e.prototype.applyMIRCuts=function(){},bw}var Cw={},kw;function QO(){if(kw)return Cw;kw=1;var e=Yn();return e.prototype._putInBase=function(t){var n=this.rowByVarIndex[t];if(n===-1){for(var i=this.colByVarIndex[t],a=1;a<this.height;a+=1){var s=this.matrix[a][i];if(s<-this.precision||this.precision<s){n=a;break}}this.pivot(n,i)}return n},e.prototype._takeOutOfBase=function(t){var n=this.colByVarIndex[t];if(n===-1){for(var i=this.rowByVarIndex[t],a=this.matrix[i],s=1;s<this.height;s+=1){var u=a[s];if(u<-this.precision||this.precision<u){n=s;break}}this.pivot(i,n)}return n},e.prototype.updateVariableValues=function(){for(var t=this.variables.length,n=Math.round(1/this.precision),i=0;i<t;i+=1){var a=this.variables[i],s=a.index,u=this.rowByVarIndex[s];if(u===-1)a.value=0;else{var l=this.matrix[u][this.rhsColumn];a.value=Math.round((l+Number.EPSILON)*n)/n}}},e.prototype.updateRightHandSide=function(t,n){var i=this.height-1,a=this.rowByVarIndex[t.index];if(a===-1){for(var s=this.colByVarIndex[t.index],u=0;u<=i;u+=1){var l=this.matrix[u];l[this.rhsColumn]-=n*l[s]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[this.rhsColumn]-=n*m[s]}}else this.matrix[a][this.rhsColumn]-=n},e.prototype.updateConstraintCoefficient=function(t,n,i){if(t.index===n.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var a=this._putInBase(t.index),s=this.colByVarIndex[n.index];if(s===-1)for(var u=this.rowByVarIndex[n.index],l=0;l<this.width;l+=1)this.matrix[a][l]+=i*this.matrix[u][l];else this.matrix[a][s]-=i},e.prototype.updateCost=function(t,n){var i=t.index,a=this.width-1,s=this.colByVarIndex[i];if(s===-1){var u=this.matrix[this.rowByVarIndex[i]],l;if(t.priority===0){var d=this.matrix[0];for(l=0;l<=a;l+=1)d[l]+=n*u[l]}else{var p=this.objectivesByPriority[t.priority].reducedCosts;for(l=0;l<=a;l+=1)p[l]+=n*u[l]}}else this.matrix[0][s]-=n},e.prototype.addConstraint=function(t){var n=t.isUpperBound?1:-1,i=this.height,a=this.matrix[i];a===void 0&&(a=this.matrix[0].slice(),this.matrix[i]=a);for(var s=this.width-1,u=0;u<=s;u+=1)a[u]=0;a[this.rhsColumn]=n*t.rhs;for(var l=t.terms,d=l.length,p=0;p<d;p+=1){var m=l[p],f=m.coefficient,h=m.variable.index,g=this.rowByVarIndex[h];if(g===-1)a[this.colByVarIndex[h]]+=n*f;else{var x=this.matrix[g];for(x[this.rhsColumn],u=0;u<=s;u+=1)a[u]-=n*f*x[u]}}var q=t.index;this.varIndexByRow[i]=q,this.rowByVarIndex[q]=i,this.colByVarIndex[q]=-1,this.height+=1},e.prototype.removeConstraint=function(t){var n=t.index,i=this.height-1,a=this._putInBase(n),s=this.matrix[i];this.matrix[i]=this.matrix[a],this.matrix[a]=s,this.varIndexByRow[a]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.slack.index=-1,this.height-=1},e.prototype.addVariable=function(t){var n=this.height-1,i=this.width,a=this.model.isMinimization===!0?-t.cost:t.cost,s=t.priority,u=this.optionalObjectives.length;if(u>0)for(var l=0;l<u;l+=1)this.optionalObjectives[l].reducedCosts[i]=0;s===0?this.matrix[0][i]=a:(this.setOptionalObjective(s,i,a),this.matrix[0][i]=0);for(var d=1;d<=n;d+=1)this.matrix[d][i]=0;var p=t.index;this.varIndexByCol[i]=p,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=i,this.width+=1},e.prototype.removeVariable=function(t){var n=t.index,i=this._takeOutOfBase(n),a=this.width-1;if(i!==a){for(var s=this.height-1,u=0;u<=s;u+=1){var l=this.matrix[u];l[i]=l[a]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[i]=m[a]}var f=this.varIndexByCol[a];this.varIndexByCol[i]=f,this.colByVarIndex[f]=i}this.varIndexByCol[a]=-1,this.colByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.index=-1,this.width-=1},Cw}var Mw={},Ew;function XO(){if(Ew)return Mw;Ew=1;var e=Yn();return e.prototype.log=function(t,n){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i=5,a="",s=[" "],u,l,d,p,m,f,h,g,x,q,w;for(l=1;l<this.width;l+=1)m=this.varIndexByCol[l],p=this.variablesPerIndex[m],p===void 0?f="c"+m:f=p.id,h=f.length,g=" ",x="	",h>5?g+=" ":x+="	",s[l]=g,a+=x+f;console.log(a);var b,C=this.matrix[this.costRowIndex],S="	";for(u=1;u<this.width;u+=1)b="	",S+=b,S+=s[u],S+=C[u].toFixed(i);for(b="	",S+=b+s[0]+C[0].toFixed(i),console.log(S+"	Z"),d=1;d<this.height;d+=1){for(q=this.matrix[d],w="	",l=1;l<this.width;l+=1)b="	",w+=b+s[l]+q[l].toFixed(i);b="	",w+=b+s[0]+q[0].toFixed(i),m=this.varIndexByRow[d],p=this.variablesPerIndex[m],p===void 0?f="c"+m:f=p.id,console.log(w+"	"+f)}console.log("");var E=this.optionalObjectives.length;if(E>0){console.log("    Optional objectives:");for(var I=0;I<E;I+=1){var M=this.optionalObjectives[I].reducedCosts,T="";for(u=1;u<this.width;u+=1)b=M[u]<0?"":" ",T+=b,T+=s[u],T+=M[u].toFixed(i);b=M[0]<0?"":" ",T+=b+s[0]+M[0].toFixed(i),console.log(T+" z"+I)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},Mw}var Iw={},Nw;function ZO(){if(Nw)return Iw;Nw=1;var e=Yn();return e.prototype.copy=function(){var t=new e(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var n=[],i=0;i<this.optionalObjectives.length;i++)n[i]=this.optionalObjectives[i].copy();t.optionalObjectives=n;for(var a=this.matrix,s=new Array(this.height),u=0;u<this.height;u++)s[u]=a[u].slice();return t.matrix=s,t},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var t=this.savedState,n=t.matrix;this.nVars=t.nVars,this.model=t.model,this.variables=t.variables,this.variablesPerIndex=t.variablesPerIndex,this.unrestrictedVars=t.unrestrictedVars,this.lastElementIndex=t.lastElementIndex,this.width=t.width,this.height=t.height;var i,a;for(i=0;i<this.height;i+=1){var s=n[i],u=this.matrix[i];for(a=0;a<this.width;a+=1)u[a]=s[a]}var l=t.varIndexByRow;for(a=0;a<this.height;a+=1)this.varIndexByRow[a]=l[a];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var d=t.varIndexByCol;for(i=0;i<this.width;i+=1)this.varIndexByCol[i]=d[i];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var p=t.rowByVarIndex,m=t.colByVarIndex,f=0;f<this.nVars;f+=1)this.rowByVarIndex[f]=p[f],this.colByVarIndex[f]=m[f];if(t.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<t.optionalObjectives.length;h++){var g=t.optionalObjectives[h].copy();this.optionalObjectives[h]=g,this.optionalObjectivePerPriority[g.priority]=g}}}},Iw}var Tw={},Pw;function JO(){if(Pw)return Tw;Pw=1;var e=Yn();function t(n,i){this.index=n,this.value=i}return e.prototype.getMostFractionalVar=function(){for(var n=0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l].index,p=this.rowByVarIndex[d];if(p!==-1){var m=this.matrix[p][this.rhsColumn],f=Math.abs(m-Math.round(m));n<f&&(n=f,i=d,a=m)}}return new t(i,a)},e.prototype.getFractionalVarWithLowestCost=function(){for(var n=1/0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l],p=d.index,m=this.rowByVarIndex[p];if(m!==-1){var f=this.matrix[m][this.rhsColumn];if(Math.abs(f-Math.round(f))>this.precision){var h=d.cost;n>h&&(n=h,i=p,a=f)}}}return new t(i,a)},Tw}var jw={},Rw;function eV(){if(Rw)return jw;Rw=1;var e=Yn();return e.prototype.countIntegerValues=function(){for(var t=0,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=i-Math.floor(i),i<this.precision&&-i<this.precision&&(t+=1)}return t},e.prototype.isIntegral=function(){for(var t=this.model.integerVariables,n=t.length,i=0;i<n;i++){var a=this.rowByVarIndex[t[i].index];if(a!==-1){var s=this.matrix[a][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(t){for(var n=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var a=this.matrix[i][this.rhsColumn];a=Math.abs(a);var s=Math.min(a-Math.floor(a),Math.floor(a+1));if(s<this.precision){if(!t)return 0}else n===-1?n=a:n*=a}return n===-1?0:n},jw}var Ap,Ow;function tV(){return Ow||(Ow=1,KO(),YO(),QO(),XO(),ZO(),JO(),eV(),Ap=Yn()),Ap}var Vw={},Fw;function EE(){if(Fw)return Vw;Fw=1;var e=Yn();function t(a,s,u){this.type=a,this.varIndex=s,this.value=u}function n(a,s){this.relaxedEvaluation=a,this.cuts=s}function i(a,s){return s.relaxedEvaluation-a.relaxedEvaluation}return e.prototype.applyCuts=function(a){if(this.restore(),this.addCutConstraints(a),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var l=this.computeFractionalVolume(!0);l>=.9*u&&(s=!1)}},e.prototype.branchAndCut=function(){var a=[],s=0,u=this.model.tolerance,l=!0,d=1e99;this.model.timeout&&(d=Date.now()+this.model.timeout);for(var p=1/0,m=null,f=[],h=0;h<this.optionalObjectives.length;h+=1)f.push(1/0);var g=new n(-1/0,[]),x;for(a.push(g);a.length>0&&l===!0&&Date.now()<d;)if(this.model.isMinimization?x=this.bestPossibleEval*(1+u):x=this.bestPossibleEval*(1-u),u>0&&p<x&&(l=!1),g=a.pop(),!(g.relaxedEvaluation>p)){var q=g.cuts;if(this.applyCuts(q),s++,this.feasible!==!1){var w=this.evaluation;if(!(w>p)){if(w===p){for(var b=!0,C=0;C<this.optionalObjectives.length&&!(this.optionalObjectives[C].reducedCosts[0]>f[C]);C+=1)if(this.optionalObjectives[C].reducedCosts[0]<f[C]){b=!1;break}if(b)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}m=g,p=w;for(var S=0;S<this.optionalObjectives.length;S+=1)f[S]=this.optionalObjectives[S].reducedCosts[0]}else{s===1&&this.save();for(var E=this.getMostFractionalVar(),I=E.index,M=[],T=[],P=q.length,j=0;j<P;j+=1){var D=q[j];D.varIndex===I?D.type==="min"?T.push(D):M.push(D):(M.push(D),T.push(D))}var V=Math.ceil(E.value),F=Math.floor(E.value),Q=new t("min",I,V);M.push(Q);var R=new t("max",I,F);T.push(R),a.push(new n(w,M)),a.push(new n(w,T)),a.sort(i)}}}}m!==null&&this.applyCuts(m.cuts),this.branchAndCutIterations=s},Vw}var Lp,Aw;function rV(){if(Aw)return Lp;Aw=1;var e=Yn();EE();var t=yg(),n=t.Constraint,i=t.Equality,a=t.Variable,s=t.IntegerVariable;t.Term;function u(l,d){this.tableau=new e(l),this.name=d,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return Lp=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var l=this.lastElementIndex;return this.lastElementIndex+=1,l},u.prototype._addConstraint=function(l){var d=l.slack;this.tableau.variablesPerIndex[d.index]=d,this.constraints.push(l),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(l)},u.prototype.smallerThan=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.greaterThan=function(l){var d=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.equal=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(d);var p=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),new i(d,p)},u.prototype.addVariable=function(l,d,p,m,f){if(typeof f=="string")switch(f){case"required":f=0;break;case"strong":f=1;break;case"medium":f=2;break;case"weak":f=3;break;default:f=0;break}var h=this.tableau.getNewElementIndex();d==null&&(d="v"+h),l==null&&(l=0),f==null&&(f=0);var g;return p?(g=new s(d,l,h,f),this.integerVariables.push(g)):g=new a(d,l,h,f),this.variables.push(g),this.tableau.variablesPerIndex[h]=g,m&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(g),g},u.prototype._removeConstraint=function(l){var d=this.constraints.indexOf(l);if(d===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(d,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(l),l.relaxation&&this.removeVariable(l.relaxation)},u.prototype.removeConstraint=function(l){return l.isEquality?(this._removeConstraint(l.upperBound),this._removeConstraint(l.lowerBound)):this._removeConstraint(l),this},u.prototype.removeVariable=function(l){var d=this.variables.indexOf(l);if(d===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(d,1),this.tableauInitialized===!0&&this.tableau.removeVariable(l),this},u.prototype.updateRightHandSide=function(l,d){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(l,d),this},u.prototype.updateConstraintCoefficient=function(l,d,p){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(l,d,p),this},u.prototype.setCost=function(l,d){var p=l-d.cost;return this.isMinimization===!1&&(p=-p),d.cost=l,this.tableau.updateCost(d,p),this},u.prototype.loadJson=function(l){this.isMinimization=l.opType!=="max";for(var d=l.variables,p=l.constraints,m={},f={},h=Object.keys(p),g=h.length,x=0;x<g;x+=1){var q=h[x],w=p[q],b=w.equal,C=w.weight,S=w.priority,E=C!==void 0||S!==void 0,I,M;if(b===void 0){var T=w.min;T!==void 0&&(I=this.greaterThan(T),m[q]=I,E&&I.relax(C,S));var P=w.max;P!==void 0&&(M=this.smallerThan(P),f[q]=M,E&&M.relax(C,S))}else{I=this.greaterThan(b),m[q]=I,M=this.smallerThan(b),f[q]=M;var j=new i(I,M);E&&j.relax(C,S)}}var D=Object.keys(d),V=D.length;this.tolerance=l.tolerance||0,l.timeout&&(this.timeout=l.timeout),l.options&&(l.options.timeout&&(this.timeout=l.options.timeout),this.tolerance===0&&(this.tolerance=l.options.tolerance||0),l.options.useMIRCuts&&(this.useMIRCuts=l.options.useMIRCuts),typeof l.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=l.options.exitOnCycles);for(var F=l.ints||{},Q=l.binaries||{},R=l.unrestricted||{},X=l.optimize,H=0;H<V;H+=1){var te=D[H],U=d[te],K=U[X]||0,ie=!!Q[te],z=!!F[te]||ie,Z=!!R[te],_e=this.addVariable(K,te,z,Z);ie&&this.smallerThan(1).addTerm(1,_e);var W=Object.keys(U);for(x=0;x<W.length;x+=1){var ee=W[x];if(ee!==X){var oe=U[ee],ue=m[ee];ue!==void 0&&ue.addTerm(oe,_e);var se=f[ee];se!==void 0&&se.addTerm(oe,_e)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(l){this.useMIRCuts=l},u.prototype.debug=function(l){this.checkForCycles=l},u.prototype.log=function(l){return this.tableau.log(l)},Lp}var Dp={},Lw;function nV(){return Lw||(Lw=1,Dp.CleanObjectiveAttributes=function(e){var t,n,i;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){t=Math.random();for(n in e.variables)e.variables[n][e.optimize]&&(e.variables[n][t]=e.variables[n][e.optimize]);return e.constraints[t]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(i in e.optimize)if(e.constraints[i])if(e.constraints[i]==="equal")delete e.optimize[i];else{t=Math.random();for(n in e.variables)e.variables[n][i]&&(e.variables[n][t]=e.variables[n][i]);e.constraints[t]=e.constraints[i],delete e.constraints[i]}return e}}),Dp}var Ml={},Bp,Dw;function B0(){if(Dw)return Bp;Dw=1;function e(n){var i={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},a={opType:"",optimize:"_obj",constraints:{},variables:{}},s={">=":"min","<=":"max","=":"equal"},u="",l=null,d="",p="",m="",f=0;typeof n=="string"&&(n=n.split(`
`));for(var h=0;h<n.length;h++)if(m="__"+h,u=n[h],l=null,i.is_objective.test(u))a.opType=u.match(/(max|min)/gi)[0],l=u.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}).slice(1),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0].replace(/\;$/,""),a.variables[p]=a.variables[p]||{},a.variables[p]._obj=d});else if(i.is_int.test(u))l=u.match(i.parse_int).slice(1),a.ints=a.ints||{},l.forEach(function(q){q=q.replace(";",""),a.ints[q]=1});else if(i.is_bin.test(u))l=u.match(i.parse_bin).slice(1),a.binaries=a.binaries||{},l.forEach(function(q){q=q.replace(";",""),a.binaries[q]=1});else if(i.is_constraint.test(u)){var g=u.indexOf(":"),x=g===-1?u:u.slice(g+1);l=x.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0],a.variables[p]=a.variables[p]||{},a.variables[p][m]=d}),f=parseFloat(u.match(i.parse_rhs)[0]),u=s[u.match(i.parse_dir)[0]],a.constraints[m]=a.constraints[m]||{},a.constraints[m][u]=f}else i.is_unrestricted.test(u)&&(l=u.match(i.parse_int).slice(1),a.unrestricted=a.unrestricted||{},l.forEach(function(q){q=q.replace(";",""),a.unrestricted[q]=1}));return a}function t(n){if(!n)throw new Error("Solver requires a model to operate on");var i="",a={max:"<=",min:">=",equal:"="},s=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(n.opType){i+=n.opType+":";for(var u in n.variables)n.variables[u][u]=n.variables[u][u]?n.variables[u][u]:1,n.variables[u][n.optimize]&&(i+=" "+n.variables[u][n.optimize]+" "+u.replace(s,"_"))}else i+="max:";i+=`;

`;for(var l in n.constraints)for(var d in n.constraints[l])if(typeof a[d]<"u"){for(var p in n.variables)typeof n.variables[p][l]<"u"&&(i+=" "+n.variables[p][l]+" "+p.replace(s,"_"));i+=" "+a[d]+" "+n.constraints[l][d],i+=`;
`}if(n.ints){i+=`

`;for(var m in n.ints)i+="int "+m.replace(s,"_")+`;
`}if(n.unrestricted){i+=`

`;for(var f in n.unrestricted)i+="unrestricted "+f.replace(s,"_")+`;
`}return i}return Bp=function(n){return n.length?e(n):t(n)},Bp}const iV={},oV=Object.freeze(Object.defineProperty({__proto__:null,default:iV},Symbol.toStringTag,{value:"Module"})),Bw=VN(oV);var zw;function aV(){if(zw)return Ml;zw=1,Ml.reformat=B0();function e(t){return t=t.replace("\\r\\n",`\r
`),t=t.split(`\r
`),t=t.filter(function(n){var i;return i=new RegExp(" 0$","gi"),!(i.test(n)===!0||(i=new RegExp("\\d$","gi"),i.test(n)===!1))}).map(function(n){return n.split(/\:{0,1} +(?=\d)/)}).reduce(function(n,i,a){return n[i[0]]=i[1],n},{}),t}return Ml.solve=function(t){return new Promise(function(n,i){typeof window<"u"&&i("Function Not Available in Browser");var a=B0()(t);t.external||i("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||i("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||i("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||i("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var s=Bw;s.writeFile(t.external.tempName,a,function(u,l){if(u)i(u);else{var d=Bw.execFile;t.external.args.push(t.external.tempName),d(t.external.binPath,t.external.args,function(p,m){if(p)if(p.code===1)n(e(m));else{var f={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:p.code,meaning:f[p.code],data:m};i(h)}else n(e(m))})}})})},Ml}var zp,$w;function sV(){return $w||($w=1,zp={lpsolve:aV()}),zp}var $p,Hw;function Ww(){return Hw||(Hw=1,$p=function(e,t){var n=t.optimize,i=JSON.parse(JSON.stringify(t.optimize)),a=Object.keys(t.optimize),s,u=0,l={},d="",p={},m=[],f,h,g,x;for(delete t.optimize,f=0;f<a.length;f++)i[a[f]]=0;for(f=0;f<a.length;f++){t.optimize=a[f],t.opType=n[a[f]],s=e.Solve(t,void 0,void 0,!0);for(x in a)if(!t.variables[a[x]]){s[a[x]]=s[a[x]]?s[a[x]]:0;for(g in t.variables)t.variables[g][a[x]]&&s[g]&&(s[a[x]]+=s[g]*t.variables[g][a[x]])}for(d="base",h=0;h<a.length;h++)s[a[h]]?d+="-"+(s[a[h]]*1e3|0)/1e3:d+="-0";if(!l[d]){for(l[d]=1,u++,h=0;h<a.length;h++)s[a[h]]&&(i[a[h]]+=s[a[h]]);delete s.feasible,delete s.result,m.push(s)}}for(f=0;f<a.length;f++)t.constraints[a[f]]={equal:i[a[f]]/u};t.optimize="cheater-"+Math.random(),t.opType="max";for(f in t.variables)t.variables[f].cheater=1;for(f in m)for(g in m[f])p[g]=p[g]||{min:1e99,max:-1e99};for(f in p)for(g in m)m[g][f]?(m[g][f]>p[f].max&&(p[f].max=m[g][f]),m[g][f]<p[f].min&&(p[f].min=m[g][f])):(m[g][f]=0,p[f].min=0);return s=e.Solve(t,void 0,void 0,!0),{midpoint:s,vertices:m,ranges:p}}),$p}var Hp,Uw;function uV(){if(Uw)return Hp;Uw=1;var e=tV(),t=rV(),n=EE(),i=yg(),a=nV(),s=i.Constraint,u=i.Variable,l=i.Numeral,d=i.Term,p=sV(),m=function(){this.Model=t,this.branchAndCut=n,this.Constraint=s,this.Variable=u,this.Numeral=l,this.Term=d,this.Tableau=e,this.lastSolvedModel=null,this.External=p,this.Solve=function(f,h,g,x){if(x)for(var q in a)f=a[q](f);if(!f)throw new Error("Solver requires a model to operate on");if(typeof f.optimize=="object"&&Object.keys(f.optimize>1))return Ww()(this,f);if(f.external){var w=Object.keys(p);if(w=JSON.stringify(w),!f.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+w);if(!p[f.external.solver])throw new Error("No support (yet) for "+f.external.solver+". Please use one of these instead:"+w);return p[f.external.solver].solve(f)}else{f instanceof t||(f=new t(h).loadJson(f));var b=f.solve();if(this.lastSolvedModel=f,b.solutionSet=b.generateSolutionSet(),g)return b;var C={};return C.feasible=b.feasible,C.result=b.evaluation,C.bounded=b.bounded,b._tableau.__isIntegral&&(C.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(S){b.solutionSet[S]!==0&&(C[S]=b.solutionSet[S])}),C}},this.ReformatLP=B0(),this.MultiObjective=function(f){return Ww()(this,f)}};return typeof window=="object"?window.solver=new m:typeof self=="object"&&(self.solver=new m),Hp=new m,Hp}var lV=uV();const cV=Ta(lV),Gi=1e-8,IE=1e15,NE=1e12,TE=1e9,PE=1e6,z0=1e3,jE=1e5,$0=100,RE=10,OE=1e-5,VE=1e-6,dV=(e,t=new Set)=>{const n={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(i=>{var E,I;const a=e.nodes[i],s=`m_${i}`,u=a.machineCount||0,l=a.machineCountMode||"free",d=a.cappedMachineCount;a.cycleTime;const p=a.recipe.power_consumption;let m=0;typeof p=="number"?m=p:typeof p=="object"&&p!==null&&"max"in p&&(m=p.max);const f=a.recipe.pollution,h=typeof f=="number"?f:0,g=ht(a.recipe.machine_id),x=g&&typeof g.cost=="number"?g.cost:0,q=(((E=a.recipe.inputs)==null?void 0:E.length)||0)+(((I=a.recipe.outputs)==null?void 0:I.length)||0),w=Math.ceil(m/15e5)*2,b=q*2,C=1+w+b;n.variables[s]={total_cost:TE*C+OE*m+RE*h+VE*x};const S=`nonneg_${i}`;if(n.constraints[S]={min:0},n.variables[s][S]=1,l==="locked"){const M=`lock_${i}`;n.constraints[M]={equal:u},n.variables[s][M]=1}else if(l==="capped"&&typeof d=="number"){const M=`cap_${i}`;n.constraints[M]={max:d},n.variables[s][M]=1}}),e.connections.forEach(i=>{const a=`f_${i.id}`;n.variables[a]={total_cost:0};const s=`flow_nonneg_${i.id}`;n.constraints[s]={min:0},n.variables[a][s]=1}),Object.keys(e.nodes).forEach(i=>{e.nodes[i].outputs.forEach((s,u)=>{const l=`excess_indicator_${i}_${u}`,m=e.connections.filter(h=>h.sourceNodeId===i&&h.sourceOutputIndex===u).length>0?PE:jE;n.variables[l]={total_cost:m},n.ints[l]=1;const f=`binary_${i}_${u}`;n.constraints[f]={min:0,max:1},n.variables[l][f]=1})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.has(i);a.outputs.forEach((u,l)=>{const d=`flow_out_${i}_${l}`,p=`excess_${i}_${l}`,m=`excess_indicator_${i}_${l}`,f=e.connections.filter(I=>I.sourceNodeId===i&&I.sourceOutputIndex===l),g=f.length>0?z0:$0,x=s?1:g;n.variables[p]={total_cost:x,[d]:-1};const q=`link_excess_${i}_${l}`;n.constraints[q]={max:0};const w=`m_${i}`;let b=a.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const C=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof C!="number")return;const S=a.isMineshaftDrill?C:C/b,E=S*1e4;n.variables[p][q]=1,n.variables[m][q]=-E,n.constraints[d]={equal:0},n.variables[w][d]||(n.variables[w][d]=0),n.variables[w][d]+=S,f.forEach(I=>{const M=`f_${I.id}`;n.variables[M][d]||(n.variables[M][d]=0),n.variables[M][d]-=1})}),a.inputs.forEach((u,l)=>{const d=e.connections.filter(E=>E.targetNodeId===i&&E.targetInputIndex===l);if(d.length===0)return;const p=`flow_in_${i}_${l}`,m=`deficit_${i}_${l}`,f=`m_${i}`;let h=a.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const g=u.quantity;if(typeof g!="number")return;const x=a.isMineshaftDrill?g:g/h;n.variables[m]={total_cost:NE,[p]:1};const q=`deficit_indicator_${i}_${l}`;n.variables[q]={total_cost:IE},n.ints[q]=1;const w=`deficit_binary_${i}_${l}`;n.constraints[w]={min:0,max:1},n.variables[q][w]=1;const b=`deficit_link_${i}_${l}`;n.constraints[b]={max:0};const C=x*1e4;n.variables[m][b]=1,n.variables[q][b]=-C,n.constraints[p]={min:0},d.forEach(E=>{const I=`f_${E.id}`;n.variables[I][p]||(n.variables[I][p]=0),n.variables[I][p]+=1}),n.variables[f][p]||(n.variables[f][p]=0),n.variables[f][p]-=x;const S=`max_flow_in_${i}_${l}`;n.constraints[S]={max:0},d.forEach(E=>{const I=`f_${E.id}`;n.variables[I][S]||(n.variables[I][S]=0),n.variables[I][S]+=1}),n.variables[f][S]=-x})}),t.forEach(i=>{const a=e.nodes[i];a&&a.outputs.forEach((s,u)=>{const l=`excess_${i}_${u}`,d=e.connections.filter(w=>w.sourceNodeId===i&&w.sourceOutputIndex===u);let p=a.cycleTime;(typeof p!="number"||p<=0)&&(p=1);const m=s.originalQuantity!==void 0?s.originalQuantity:s.quantity;if(typeof m!="number")return;const h=(a.isMineshaftDrill?m:m/p)*(a.machineCount||0);let g=0;d.forEach(w=>{const b=e.nodes[w.targetNodeId];if(!b)return;const C=b.inputs[w.targetInputIndex];if(!C)return;let S=b.cycleTime;(typeof S!="number"||S<=0)&&(S=1);const E=C.quantity;if(typeof E!="number")return;const M=(b.isMineshaftDrill?E:E/S)*(b.machineCount||0);g+=Math.min(h-g,M)});const x=Math.max(0,h-g),q=`min_excess_${i}_${u}`;n.constraints[q]={min:x},n.variables[l][q]=1})}),n},pV=e=>{const t=Object.keys(e.nodes),n=new Map;t.forEach((g,x)=>n.set(g,x));const i=t.length,a=new Int32Array(i).fill(-1),s=new Int32Array(i),u=new Uint8Array(i),l=[];let d=0;const p=[],m=g=>{a[g]=d,s[g]=d,d++,l.push(g),u[g]=1;const x=t[g];if(e.nodes[x].outputs.forEach(w=>{const b=e.products[w.productId];b&&b.connections.forEach(C=>{if(C.sourceNodeId!==x)return;const S=n.get(C.targetNodeId);S!==void 0&&(a[S]===-1?(m(S),s[g]=Math.min(s[g],s[S])):u[S]&&(s[g]=Math.min(s[g],a[S])))})}),s[g]===a[g]){const w=[];let b;do b=l.pop(),u[b]=0,w.push(t[b]);while(b!==g);w.length>1&&p.push(w)}};for(let g=0;g<i;g++)a[g]===-1&&m(g);const f=[];p.forEach(g=>{var S;const x=new Set(g),q=new Set;if(e.connections.forEach(E=>{const I=x.has(E.sourceNodeId),M=x.has(E.targetNodeId);if(I&&M){const T=E.productId;q.add(T)}}),q.size===0)return;let w=!1;for(const E of q)if(e.connections.some(M=>{if(M.productId!==E)return!1;const T=!x.has(M.sourceNodeId),P=x.has(M.targetNodeId);return T&&P})){w=!0;break}if(w)return;let b=!0;const C=[];for(const E of q){let I=!1;for(const M of g){const T=e.nodes[M];let P=T.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const j=T.isMineshaftDrill||((S=T.recipe)==null?void 0:S.isMineshaftDrill);let D=0;T.outputs.forEach(F=>{if(F.productId===E){const Q=F.originalQuantity!==void 0?F.originalQuantity:F.quantity;typeof Q=="number"&&(D+=j?Q:Q/P)}});let V=0;if(T.inputs.forEach(F=>{F.productId===E&&typeof F.quantity=="number"&&(V+=j?F.quantity:F.quantity/P)}),D>=V-1e-10){I=!0;break}}I||(b=!1,C.push(E))}b||f.push({nodes:g,nodeNames:g.map(E=>{var I,M;return((M=(I=e.nodes[E])==null?void 0:I.recipe)==null?void 0:M.name)||E}),problematicProducts:C})});const h=new Set;return p.forEach(g=>g.forEach(x=>h.add(x))),t.forEach(g=>{var w;if(h.has(g))return;const x=e.nodes[g];if(!x)return;const q=new Map;if(e.connections.forEach(b=>{if(b.sourceNodeId===g&&b.targetNodeId===g){const C=b.productId,S=x.outputs[b.sourceOutputIndex],E=x.inputs[b.targetInputIndex];S&&E&&S.productId===C&&E.productId===C&&q.set(C,{inputRate:E.rate,outputRate:S.rate})}}),q.size>0){let b=!1;for(const[C,S]of q){const E=e.products[C],I=1e-10;if(!(S.outputRate>S.inputRate+I)){if(S.outputRate<S.inputRate-I){if(!E.producers.some(T=>T.nodeId!==g)){b=!0;break}continue}if(Math.abs(S.outputRate-S.inputRate)<I){const M=E.consumers.some(P=>P.nodeId!==g),T=E.producers.some(P=>P.nodeId!==g);if(!M&&!T)continue;if(M&&!T){b=!0;break}if(T)continue}}}b&&f.push({nodes:[g],nodeNames:[((w=x.recipe)==null?void 0:w.name)||g],isSelfFeeding:!0})}}),f},fV=(e,t=new Set)=>{const n=pV(e);if(n.length>0)return{feasible:!1,unsustainableLoops:n,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const i=dV(e,t),a=cV.Solve(i);if(a.feasible){console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let s=0,u=0,l=0,d=0,p=0,m=0,f=0,h=0,g=0,x=0,q=0,w=0,b=0,C=0,S=0,E=0,I=0,M=0;Object.keys(a).forEach(P=>{var j,D;if(P.startsWith("deficit_indicator_")){const V=a[P]||0;V>Gi&&(x+=V,u+=V*IE)}if(P.startsWith("deficit_")&&!P.includes("indicator")){const V=a[P]||0;V>Gi&&(q+=V,l+=V*NE)}if(P.startsWith("excess_indicator_")){const V=a[P]||0;if(V>Gi){const F=P.split("_"),Q=F.slice(2,-1).join("_"),R=parseInt(F[F.length-1]),H=e.connections.some(te=>te.sourceNodeId===Q&&te.sourceOutputIndex===R)?PE:jE;w+=V,d+=V*H}}if(P.startsWith("excess_")&&!P.includes("indicator")){const V=a[P]||0;if(V>Gi){const F=P.split("_"),Q=F.slice(1,-1).join("_"),R=parseInt(F[F.length-1]),X=e.connections.some(te=>te.sourceNodeId===Q&&te.sourceOutputIndex===R),H=X?z0:$0;X?b+=V:C+=V,p+=V*H}}if(P.startsWith("m_")){const V=P.substring(2),F=e.nodes[V],Q=a[P]||0;F.cycleTime;const R=F.recipe.power_consumption;let X=0;typeof R=="number"?X=R:typeof R=="object"&&R!==null&&"max"in R&&(X=R.max);const H=F.recipe.pollution,te=typeof H=="number"?H:0,U=ht(F.recipe.machine_id),K=U&&typeof U.cost=="number"?U.cost:0,ie=(((j=F.recipe.inputs)==null?void 0:j.length)||0)+(((D=F.recipe.outputs)==null?void 0:D.length)||0),z=Math.ceil(X/15e5)*2,Z=ie*2,_e=1+z+Z,W=Math.ceil(Q),ee=W*_e,oe=Q*X,ue=Q*te,se=W*K;S+=ee,E+=oe,I+=ue,M+=se,m+=ee*TE,f+=oe*OE,h+=ue*RE,g+=se*VE}}),s=u+l+d+p+m+f+h+g,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${x} inputs (cost: ${u.toExponential(2)})`),console.log(`    Deficiency amount: ${q.toFixed(4)} (cost: ${l.toExponential(2)})`),console.log(`    Excess count: ${w} outputs (cost: ${d.toExponential(2)})`),console.log(`    Connected excess: ${b.toFixed(4)} (cost: ${(b*z0).toExponential(2)})`),console.log(`    Unconnected excess: ${C.toFixed(4)} (cost: ${(C*$0).toExponential(2)})`),console.log(`    Model count: ${S.toFixed(0)} (cost: ${m.toExponential(2)})`),console.log(`    Power: ${E.toFixed(0)} W (cost: ${f.toFixed(2)})`),console.log(`    Pollution: ${I.toFixed(2)} %/hr (cost: ${h.toFixed(2)})`),console.log(`    Machine cost: $${M.toFixed(0)} (cost: ${g.toFixed(2)})`),console.log(`    Total: ${s.toExponential(2)}`),console.log("  Machine Count Changes:");let T=!1;Object.keys(e.nodes).forEach(P=>{var R;const j=e.nodes[P],D=`m_${P}`,V=a[D]||0,F=j.machineCount||0;Math.abs(V-F)>Gi&&(T=!0,console.log(`    ${((R=j==null?void 0:j.recipe)==null?void 0:R.name)||P}: ${F.toFixed(4)}  ${V.toFixed(4)}`))}),T||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return a},_V=(e,t)=>{const n=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(t.nodes).forEach(i=>{const a=t.nodes[i],s=`m_${i}`,u=e[s]!==void 0?e[s]:0,l=a.machineCount||0;if(u>=-Gi){const d=Math.max(0,u);Math.abs(d-l)>Gi&&n.set(i,d)}}),n},Gw=(e,t,n,i={})=>{const{allowDeficiency:a=!1}=i;if(n.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const s=Rs(e,t),u=new Set(n.map(f=>f.recipeBoxId)),l=fV(s,u);if(!l.feasible){if(l.unsustainableLoops){const f=l.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${f}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let d=!1;const p=[];if(Object.keys(l).forEach(f=>{var h;if(f.startsWith("deficit_")&&!f.includes("indicator")){const g=l[f]||0;if(g>Gi){d=!0;const x=f.split("_"),q=parseInt(x[x.length-1]),w=x.slice(1,-1).join("_"),b=s.nodes[w];if(b){const C=b.inputs[q];p.push({nodeId:w,nodeName:((h=b.recipe)==null?void 0:h.name)||w,inputIndex:q,productId:C==null?void 0:C.productId,deficitAmount:g})}}}}),d&&!a){const f=p.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${f}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:p}}const m=_V(l,s);return{success:m.size>0,updates:m,converged:!0,iterations:1,message:m.size>0?`Updated ${m.size} nodes`:"Network already balanced"}};function gg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wp,Kw;function mV(){if(Kw)return Wp;Kw=1;function e(){this.__data__=[],this.size=0}return Wp=e,Wp}var Up,Yw;function Oa(){if(Yw)return Up;Yw=1;function e(t,n){return t===n||t!==t&&n!==n}return Up=e,Up}var Gp,Qw;function vc(){if(Qw)return Gp;Qw=1;var e=Oa();function t(n,i){for(var a=n.length;a--;)if(e(n[a][0],i))return a;return-1}return Gp=t,Gp}var Kp,Xw;function hV(){if(Xw)return Kp;Xw=1;var e=vc(),t=Array.prototype,n=t.splice;function i(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var l=s.length-1;return u==l?s.pop():n.call(s,u,1),--this.size,!0}return Kp=i,Kp}var Yp,Zw;function yV(){if(Zw)return Yp;Zw=1;var e=vc();function t(n){var i=this.__data__,a=e(i,n);return a<0?void 0:i[a][1]}return Yp=t,Yp}var Qp,Jw;function gV(){if(Jw)return Qp;Jw=1;var e=vc();function t(n){return e(this.__data__,n)>-1}return Qp=t,Qp}var Xp,eb;function vV(){if(eb)return Xp;eb=1;var e=vc();function t(n,i){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return Xp=t,Xp}var Zp,tb;function xc(){if(tb)return Zp;tb=1;var e=mV(),t=hV(),n=yV(),i=gV(),a=vV();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Zp=s,Zp}var Jp,rb;function xV(){if(rb)return Jp;rb=1;var e=xc();function t(){this.__data__=new e,this.size=0}return Jp=t,Jp}var ef,nb;function wV(){if(nb)return ef;nb=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return ef=e,ef}var tf,ib;function bV(){if(ib)return tf;ib=1;function e(t){return this.__data__.get(t)}return tf=e,tf}var rf,ob;function qV(){if(ob)return rf;ob=1;function e(t){return this.__data__.has(t)}return rf=e,rf}var nf,ab;function FE(){if(ab)return nf;ab=1;var e=typeof dl=="object"&&dl&&dl.Object===Object&&dl;return nf=e,nf}var of,sb;function Rn(){if(sb)return of;sb=1;var e=FE(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return of=n,of}var af,ub;function Va(){if(ub)return af;ub=1;var e=Rn(),t=e.Symbol;return af=t,af}var sf,lb;function SV(){if(lb)return sf;lb=1;var e=Va(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;function s(u){var l=n.call(u,a),d=u[a];try{u[a]=void 0;var p=!0}catch{}var m=i.call(u);return p&&(l?u[a]=d:delete u[a]),m}return sf=s,sf}var uf,cb;function CV(){if(cb)return uf;cb=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return uf=n,uf}var lf,db;function Vo(){if(db)return lf;db=1;var e=Va(),t=SV(),n=CV(),i="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(l){return l==null?l===void 0?a:i:s&&s in Object(l)?t(l):n(l)}return lf=u,lf}var cf,pb;function sn(){if(pb)return cf;pb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return cf=e,cf}var df,fb;function iu(){if(fb)return df;fb=1;var e=Vo(),t=sn(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(l){if(!t(l))return!1;var d=e(l);return d==i||d==a||d==n||d==s}return df=u,df}var pf,_b;function kV(){if(_b)return pf;_b=1;var e=Rn(),t=e["__core-js_shared__"];return pf=t,pf}var ff,mb;function MV(){if(mb)return ff;mb=1;var e=kV(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!t&&t in i}return ff=n,ff}var _f,hb;function AE(){if(hb)return _f;hb=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return _f=n,_f}var mf,yb;function EV(){if(yb)return mf;yb=1;var e=iu(),t=MV(),n=sn(),i=AE(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||t(h))return!1;var g=e(h)?m:s;return g.test(i(h))}return mf=f,mf}var hf,gb;function IV(){if(gb)return hf;gb=1;function e(t,n){return t==null?void 0:t[n]}return hf=e,hf}var yf,vb;function Fo(){if(vb)return yf;vb=1;var e=EV(),t=IV();function n(i,a){var s=t(i,a);return e(s)?s:void 0}return yf=n,yf}var gf,xb;function vg(){if(xb)return gf;xb=1;var e=Fo(),t=Rn(),n=e(t,"Map");return gf=n,gf}var vf,wb;function wc(){if(wb)return vf;wb=1;var e=Fo(),t=e(Object,"create");return vf=t,vf}var xf,bb;function NV(){if(bb)return xf;bb=1;var e=wc();function t(){this.__data__=e?e(null):{},this.size=0}return xf=t,xf}var wf,qb;function TV(){if(qb)return wf;qb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return wf=e,wf}var bf,Sb;function PV(){if(Sb)return bf;Sb=1;var e=wc(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var l=u[s];return l===t?void 0:l}return i.call(u,s)?u[s]:void 0}return bf=a,bf}var qf,Cb;function jV(){if(Cb)return qf;Cb=1;var e=wc(),t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return qf=i,qf}var Sf,kb;function RV(){if(kb)return Sf;kb=1;var e=wc(),t="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&a===void 0?t:a,this}return Sf=n,Sf}var Cf,Mb;function OV(){if(Mb)return Cf;Mb=1;var e=NV(),t=TV(),n=PV(),i=jV(),a=RV();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Cf=s,Cf}var kf,Eb;function VV(){if(Eb)return kf;Eb=1;var e=OV(),t=xc(),n=vg();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return kf=i,kf}var Mf,Ib;function FV(){if(Ib)return Mf;Ib=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Mf=e,Mf}var Ef,Nb;function bc(){if(Nb)return Ef;Nb=1;var e=FV();function t(n,i){var a=n.__data__;return e(i)?a[typeof i=="string"?"string":"hash"]:a.map}return Ef=t,Ef}var If,Tb;function AV(){if(Tb)return If;Tb=1;var e=bc();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return If=t,If}var Nf,Pb;function LV(){if(Pb)return Nf;Pb=1;var e=bc();function t(n){return e(this,n).get(n)}return Nf=t,Nf}var Tf,jb;function DV(){if(jb)return Tf;jb=1;var e=bc();function t(n){return e(this,n).has(n)}return Tf=t,Tf}var Pf,Rb;function BV(){if(Rb)return Pf;Rb=1;var e=bc();function t(n,i){var a=e(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return Pf=t,Pf}var jf,Ob;function xg(){if(Ob)return jf;Ob=1;var e=VV(),t=AV(),n=LV(),i=DV(),a=BV();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,jf=s,jf}var Rf,Vb;function zV(){if(Vb)return Rf;Vb=1;var e=xc(),t=vg(),n=xg(),i=200;function a(s,u){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<i-1)return d.push([s,u]),this.size=++l.size,this;l=this.__data__=new n(d)}return l.set(s,u),this.size=l.size,this}return Rf=a,Rf}var Of,Fb;function qc(){if(Fb)return Of;Fb=1;var e=xc(),t=xV(),n=wV(),i=bV(),a=qV(),s=zV();function u(l){var d=this.__data__=new e(l);this.size=d.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,Of=u,Of}var Vf,Ab;function wg(){if(Ab)return Vf;Ab=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a&&n(t[i],i,t)!==!1;);return t}return Vf=e,Vf}var Ff,Lb;function LE(){if(Lb)return Ff;Lb=1;var e=Fo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Ff=t,Ff}var Af,Db;function Sc(){if(Db)return Af;Db=1;var e=LE();function t(n,i,a){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return Af=t,Af}var Lf,Bb;function Cc(){if(Bb)return Lf;Bb=1;var e=Sc(),t=Oa(),n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l){var d=s[u];(!(i.call(s,u)&&t(d,l))||l===void 0&&!(u in s))&&e(s,u,l)}return Lf=a,Lf}var Df,zb;function ou(){if(zb)return Df;zb=1;var e=Cc(),t=Sc();function n(i,a,s,u){var l=!s;s||(s={});for(var d=-1,p=a.length;++d<p;){var m=a[d],f=u?u(s[m],i[m],m,s,i):void 0;f===void 0&&(f=i[m]),l?t(s,m,f):e(s,m,f)}return s}return Df=n,Df}var Bf,$b;function $V(){if($b)return Bf;$b=1;function e(t,n){for(var i=-1,a=Array(t);++i<t;)a[i]=n(i);return a}return Bf=e,Bf}var zf,Hb;function Qn(){if(Hb)return zf;Hb=1;function e(t){return t!=null&&typeof t=="object"}return zf=e,zf}var $f,Wb;function HV(){if(Wb)return $f;Wb=1;var e=Vo(),t=Qn(),n="[object Arguments]";function i(a){return t(a)&&e(a)==n}return $f=i,$f}var Hf,Ub;function au(){if(Ub)return Hf;Ub=1;var e=HV(),t=Qn(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&i.call(u,"callee")&&!a.call(u,"callee")};return Hf=s,Hf}var Wf,Gb;function Ft(){if(Gb)return Wf;Gb=1;var e=Array.isArray;return Wf=e,Wf}var Cs={exports:{}},Uf,Kb;function WV(){if(Kb)return Uf;Kb=1;function e(){return!1}return Uf=e,Uf}Cs.exports;var Yb;function Fa(){return Yb||(Yb=1,(function(e,t){var n=Rn(),i=WV(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,l=u?n.Buffer:void 0,d=l?l.isBuffer:void 0,p=d||i;e.exports=p})(Cs,Cs.exports)),Cs.exports}var Gf,Qb;function kc(){if(Qb)return Gf;Qb=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return Gf=n,Gf}var Kf,Xb;function bg(){if(Xb)return Kf;Xb=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Kf=t,Kf}var Yf,Zb;function UV(){if(Zb)return Yf;Zb=1;var e=Vo(),t=bg(),n=Qn(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",m="[object Number]",f="[object Object]",h="[object RegExp]",g="[object Set]",x="[object String]",q="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",C="[object Float32Array]",S="[object Float64Array]",E="[object Int8Array]",I="[object Int16Array]",M="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",j="[object Uint16Array]",D="[object Uint32Array]",V={};V[C]=V[S]=V[E]=V[I]=V[M]=V[T]=V[P]=V[j]=V[D]=!0,V[i]=V[a]=V[w]=V[s]=V[b]=V[u]=V[l]=V[d]=V[p]=V[m]=V[f]=V[h]=V[g]=V[x]=V[q]=!1;function F(Q){return n(Q)&&t(Q.length)&&!!V[e(Q)]}return Yf=F,Yf}var Qf,Jb;function Mc(){if(Jb)return Qf;Jb=1;function e(t){return function(n){return t(n)}}return Qf=e,Qf}var ks={exports:{}};ks.exports;var e2;function qg(){return e2||(e2=1,(function(e,t){var n=FE(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s&&n.process,l=(function(){try{var d=a&&a.require&&a.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}})();e.exports=l})(ks,ks.exports)),ks.exports}var Xf,t2;function su(){if(t2)return Xf;t2=1;var e=UV(),t=Mc(),n=qg(),i=n&&n.isTypedArray,a=i?t(i):e;return Xf=a,Xf}var Zf,r2;function DE(){if(r2)return Zf;r2=1;var e=$V(),t=au(),n=Ft(),i=Fa(),a=kc(),s=su(),u=Object.prototype,l=u.hasOwnProperty;function d(p,m){var f=n(p),h=!f&&t(p),g=!f&&!h&&i(p),x=!f&&!h&&!g&&s(p),q=f||h||g||x,w=q?e(p.length,String):[],b=w.length;for(var C in p)(m||l.call(p,C))&&!(q&&(C=="length"||g&&(C=="offset"||C=="parent")||x&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,b)))&&w.push(C);return w}return Zf=d,Zf}var Jf,n2;function Ec(){if(n2)return Jf;n2=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||e;return n===a}return Jf=t,Jf}var e_,i2;function BE(){if(i2)return e_;i2=1;function e(t,n){return function(i){return t(n(i))}}return e_=e,e_}var t_,o2;function GV(){if(o2)return t_;o2=1;var e=BE(),t=e(Object.keys,Object);return t_=t,t_}var r_,a2;function Sg(){if(a2)return r_;a2=1;var e=Ec(),t=GV(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&u.push(l);return u}return r_=a,r_}var n_,s2;function vi(){if(s2)return n_;s2=1;var e=iu(),t=bg();function n(i){return i!=null&&t(i.length)&&!e(i)}return n_=n,n_}var i_,u2;function Xi(){if(u2)return i_;u2=1;var e=DE(),t=Sg(),n=vi();function i(a){return n(a)?e(a):t(a)}return i_=i,i_}var o_,l2;function KV(){if(l2)return o_;l2=1;var e=ou(),t=Xi();function n(i,a){return i&&e(a,t(a),i)}return o_=n,o_}var a_,c2;function YV(){if(c2)return a_;c2=1;function e(t){var n=[];if(t!=null)for(var i in Object(t))n.push(i);return n}return a_=e,a_}var s_,d2;function QV(){if(d2)return s_;d2=1;var e=sn(),t=Ec(),n=YV(),i=Object.prototype,a=i.hasOwnProperty;function s(u){if(!e(u))return n(u);var l=t(u),d=[];for(var p in u)p=="constructor"&&(l||!a.call(u,p))||d.push(p);return d}return s_=s,s_}var u_,p2;function Ao(){if(p2)return u_;p2=1;var e=DE(),t=QV(),n=vi();function i(a){return n(a)?e(a,!0):t(a)}return u_=i,u_}var l_,f2;function XV(){if(f2)return l_;f2=1;var e=ou(),t=Ao();function n(i,a){return i&&e(a,t(a),i)}return l_=n,l_}var Ms={exports:{}};Ms.exports;var _2;function zE(){return _2||(_2=1,(function(e,t){var n=Rn(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?n.Buffer:void 0,l=u?u.allocUnsafe:void 0;function d(p,m){if(m)return p.slice();var f=p.length,h=l?l(f):new p.constructor(f);return p.copy(h),h}e.exports=d})(Ms,Ms.exports)),Ms.exports}var c_,m2;function $E(){if(m2)return c_;m2=1;function e(t,n){var i=-1,a=t.length;for(n||(n=Array(a));++i<a;)n[i]=t[i];return n}return c_=e,c_}var d_,h2;function HE(){if(h2)return d_;h2=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=0,u=[];++i<a;){var l=t[i];n(l,i,t)&&(u[s++]=l)}return u}return d_=e,d_}var p_,y2;function WE(){if(y2)return p_;y2=1;function e(){return[]}return p_=e,p_}var f_,g2;function Cg(){if(g2)return f_;g2=1;var e=HE(),t=WE(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(l){return i.call(u,l)}))}:t;return f_=s,f_}var __,v2;function ZV(){if(v2)return __;v2=1;var e=ou(),t=Cg();function n(i,a){return e(i,t(i),a)}return __=n,__}var m_,x2;function kg(){if(x2)return m_;x2=1;function e(t,n){for(var i=-1,a=n.length,s=t.length;++i<a;)t[s+i]=n[i];return t}return m_=e,m_}var h_,w2;function Ic(){if(w2)return h_;w2=1;var e=BE(),t=e(Object.getPrototypeOf,Object);return h_=t,h_}var y_,b2;function UE(){if(b2)return y_;b2=1;var e=kg(),t=Ic(),n=Cg(),i=WE(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var l=[];u;)e(l,n(u)),u=t(u);return l}:i;return y_=s,y_}var g_,q2;function JV(){if(q2)return g_;q2=1;var e=ou(),t=UE();function n(i,a){return e(i,t(i),a)}return g_=n,g_}var v_,S2;function GE(){if(S2)return v_;S2=1;var e=kg(),t=Ft();function n(i,a,s){var u=a(i);return t(i)?u:e(u,s(i))}return v_=n,v_}var x_,C2;function KE(){if(C2)return x_;C2=1;var e=GE(),t=Cg(),n=Xi();function i(a){return e(a,n,t)}return x_=i,x_}var w_,k2;function eF(){if(k2)return w_;k2=1;var e=GE(),t=UE(),n=Ao();function i(a){return e(a,n,t)}return w_=i,w_}var b_,M2;function tF(){if(M2)return b_;M2=1;var e=Fo(),t=Rn(),n=e(t,"DataView");return b_=n,b_}var q_,E2;function rF(){if(E2)return q_;E2=1;var e=Fo(),t=Rn(),n=e(t,"Promise");return q_=n,q_}var S_,I2;function YE(){if(I2)return S_;I2=1;var e=Fo(),t=Rn(),n=e(t,"Set");return S_=n,S_}var C_,N2;function nF(){if(N2)return C_;N2=1;var e=Fo(),t=Rn(),n=e(t,"WeakMap");return C_=n,C_}var k_,T2;function Aa(){if(T2)return k_;T2=1;var e=tF(),t=vg(),n=rF(),i=YE(),a=nF(),s=Vo(),u=AE(),l="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",f="[object WeakMap]",h="[object DataView]",g=u(e),x=u(t),q=u(n),w=u(i),b=u(a),C=s;return(e&&C(new e(new ArrayBuffer(1)))!=h||t&&C(new t)!=l||n&&C(n.resolve())!=p||i&&C(new i)!=m||a&&C(new a)!=f)&&(C=function(S){var E=s(S),I=E==d?S.constructor:void 0,M=I?u(I):"";if(M)switch(M){case g:return h;case x:return l;case q:return p;case w:return m;case b:return f}return E}),k_=C,k_}var M_,P2;function iF(){if(P2)return M_;P2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=i.length,s=new i.constructor(a);return a&&typeof i[0]=="string"&&t.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return M_=n,M_}var E_,j2;function QE(){if(j2)return E_;j2=1;var e=Rn(),t=e.Uint8Array;return E_=t,E_}var I_,R2;function Mg(){if(R2)return I_;R2=1;var e=QE();function t(n){var i=new n.constructor(n.byteLength);return new e(i).set(new e(n)),i}return I_=t,I_}var N_,O2;function oF(){if(O2)return N_;O2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return N_=t,N_}var T_,V2;function aF(){if(V2)return T_;V2=1;var e=/\w*$/;function t(n){var i=new n.constructor(n.source,e.exec(n));return i.lastIndex=n.lastIndex,i}return T_=t,T_}var P_,F2;function sF(){if(F2)return P_;F2=1;var e=Va(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function i(a){return n?Object(n.call(a)):{}}return P_=i,P_}var j_,A2;function XE(){if(A2)return j_;A2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return j_=t,j_}var R_,L2;function uF(){if(L2)return R_;L2=1;var e=Mg(),t=oF(),n=aF(),i=sF(),a=XE(),s="[object Boolean]",u="[object Date]",l="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",f="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",I="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";function P(j,D,V){var F=j.constructor;switch(D){case g:return e(j);case s:case u:return new F(+j);case x:return t(j,V);case q:case w:case b:case C:case S:case E:case I:case M:case T:return a(j,V);case l:return new F;case d:case f:return new F(j);case p:return n(j);case m:return new F;case h:return i(j)}}return R_=P,R_}var O_,D2;function ZE(){if(D2)return O_;D2=1;var e=sn(),t=Object.create,n=(function(){function i(){}return function(a){if(!e(a))return{};if(t)return t(a);i.prototype=a;var s=new i;return i.prototype=void 0,s}})();return O_=n,O_}var V_,B2;function JE(){if(B2)return V_;B2=1;var e=ZE(),t=Ic(),n=Ec();function i(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return V_=i,V_}var F_,z2;function lF(){if(z2)return F_;z2=1;var e=Aa(),t=Qn(),n="[object Map]";function i(a){return t(a)&&e(a)==n}return F_=i,F_}var A_,$2;function cF(){if($2)return A_;$2=1;var e=lF(),t=Mc(),n=qg(),i=n&&n.isMap,a=i?t(i):e;return A_=a,A_}var L_,H2;function dF(){if(H2)return L_;H2=1;var e=Aa(),t=Qn(),n="[object Set]";function i(a){return t(a)&&e(a)==n}return L_=i,L_}var D_,W2;function pF(){if(W2)return D_;W2=1;var e=dF(),t=Mc(),n=qg(),i=n&&n.isSet,a=i?t(i):e;return D_=a,D_}var B_,U2;function eI(){if(U2)return B_;U2=1;var e=qc(),t=wg(),n=Cc(),i=KV(),a=XV(),s=zE(),u=$E(),l=ZV(),d=JV(),p=KE(),m=eF(),f=Aa(),h=iF(),g=uF(),x=JE(),q=Ft(),w=Fa(),b=cF(),C=sn(),S=pF(),E=Xi(),I=Ao(),M=1,T=2,P=4,j="[object Arguments]",D="[object Array]",V="[object Boolean]",F="[object Date]",Q="[object Error]",R="[object Function]",X="[object GeneratorFunction]",H="[object Map]",te="[object Number]",U="[object Object]",K="[object RegExp]",ie="[object Set]",z="[object String]",Z="[object Symbol]",_e="[object WeakMap]",W="[object ArrayBuffer]",ee="[object DataView]",oe="[object Float32Array]",ue="[object Float64Array]",se="[object Int8Array]",ge="[object Int16Array]",Ee="[object Int32Array]",Re="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Ne="[object Uint16Array]",Pe="[object Uint32Array]",Oe={};Oe[j]=Oe[D]=Oe[W]=Oe[ee]=Oe[V]=Oe[F]=Oe[oe]=Oe[ue]=Oe[se]=Oe[ge]=Oe[Ee]=Oe[H]=Oe[te]=Oe[U]=Oe[K]=Oe[ie]=Oe[z]=Oe[Z]=Oe[Re]=Oe[Ie]=Oe[Ne]=Oe[Pe]=!0,Oe[Q]=Oe[R]=Oe[_e]=!1;function We(Be,ut,st,Mt,qt,St){var lt,Sr=ut&M,Zt=ut&T,$t=ut&P;if(st&&(lt=qt?st(Be,Mt,qt,St):st(Be)),lt!==void 0)return lt;if(!C(Be))return Be;var Jt=q(Be);if(Jt){if(lt=h(Be),!Sr)return u(Be,lt)}else{var it=f(Be),Rr=it==R||it==X;if(w(Be))return s(Be,Sr);if(it==U||it==j||Rr&&!qt){if(lt=Zt||Rr?{}:x(Be),!Sr)return Zt?d(Be,a(lt,Be)):l(Be,i(lt,Be))}else{if(!Oe[it])return qt?Be:{};lt=g(Be,it,Sr)}}St||(St=new e);var Nt=St.get(Be);if(Nt)return Nt;St.set(Be,lt),S(Be)?Be.forEach(function(Ht){lt.add(We(Ht,ut,st,Ht,Be,St))}):b(Be)&&Be.forEach(function(Ht,Qe){lt.set(Qe,We(Ht,ut,st,Qe,Be,St))});var Kr=$t?Zt?m:p:Zt?I:E,pr=Jt?void 0:Kr(Be);return t(pr||Be,function(Ht,Qe){pr&&(Qe=Ht,Ht=Be[Qe]),n(lt,Qe,We(Ht,ut,st,Qe,Be,St))}),lt}return B_=We,B_}var z_,G2;function fF(){if(G2)return z_;G2=1;var e=eI(),t=4;function n(i){return e(i,t)}return z_=n,z_}var $_,K2;function Eg(){if(K2)return $_;K2=1;function e(t){return function(){return t}}return $_=e,$_}var H_,Y2;function _F(){if(Y2)return H_;Y2=1;function e(t){return function(n,i,a){for(var s=-1,u=Object(n),l=a(n),d=l.length;d--;){var p=l[t?d:++s];if(i(u[p],p,u)===!1)break}return n}}return H_=e,H_}var W_,Q2;function Ig(){if(Q2)return W_;Q2=1;var e=_F(),t=e();return W_=t,W_}var U_,X2;function Ng(){if(X2)return U_;X2=1;var e=Ig(),t=Xi();function n(i,a){return i&&e(i,a,t)}return U_=n,U_}var G_,Z2;function mF(){if(Z2)return G_;Z2=1;var e=vi();function t(n,i){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,l=i?u:-1,d=Object(a);(i?l--:++l<u)&&s(d[l],l,d)!==!1;);return a}}return G_=t,G_}var K_,J2;function Nc(){if(J2)return K_;J2=1;var e=Ng(),t=mF(),n=t(e);return K_=n,K_}var Y_,eq;function Lo(){if(eq)return Y_;eq=1;function e(t){return t}return Y_=e,Y_}var Q_,tq;function tI(){if(tq)return Q_;tq=1;var e=Lo();function t(n){return typeof n=="function"?n:e}return Q_=t,Q_}var X_,rq;function rI(){if(rq)return X_;rq=1;var e=wg(),t=Nc(),n=tI(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u))}return X_=a,X_}var Z_,nq;function nI(){return nq||(nq=1,Z_=rI()),Z_}var J_,iq;function hF(){if(iq)return J_;iq=1;var e=Nc();function t(n,i){var a=[];return e(n,function(s,u,l){i(s,u,l)&&a.push(s)}),a}return J_=t,J_}var em,oq;function yF(){if(oq)return em;oq=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return em=t,em}var tm,aq;function gF(){if(aq)return tm;aq=1;function e(t){return this.__data__.has(t)}return tm=e,tm}var rm,sq;function iI(){if(sq)return rm;sq=1;var e=xg(),t=yF(),n=gF();function i(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,rm=i,rm}var nm,uq;function vF(){if(uq)return nm;uq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(t[i],i,t))return!0;return!1}return nm=e,nm}var im,lq;function oI(){if(lq)return im;lq=1;function e(t,n){return t.has(n)}return im=e,im}var om,cq;function aI(){if(cq)return om;cq=1;var e=iI(),t=vF(),n=oI(),i=1,a=2;function s(u,l,d,p,m,f){var h=d&i,g=u.length,x=l.length;if(g!=x&&!(h&&x>g))return!1;var q=f.get(u),w=f.get(l);if(q&&w)return q==l&&w==u;var b=-1,C=!0,S=d&a?new e:void 0;for(f.set(u,l),f.set(l,u);++b<g;){var E=u[b],I=l[b];if(p)var M=h?p(I,E,b,l,u,f):p(E,I,b,u,l,f);if(M!==void 0){if(M)continue;C=!1;break}if(S){if(!t(l,function(T,P){if(!n(S,P)&&(E===T||m(E,T,d,p,f)))return S.push(P)})){C=!1;break}}else if(!(E===I||m(E,I,d,p,f))){C=!1;break}}return f.delete(u),f.delete(l),C}return om=s,om}var am,dq;function xF(){if(dq)return am;dq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a,s){i[++n]=[s,a]}),i}return am=e,am}var sm,pq;function Tg(){if(pq)return sm;pq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a){i[++n]=a}),i}return sm=e,sm}var um,fq;function wF(){if(fq)return um;fq=1;var e=Va(),t=QE(),n=Oa(),i=aI(),a=xF(),s=Tg(),u=1,l=2,d="[object Boolean]",p="[object Date]",m="[object Error]",f="[object Map]",h="[object Number]",g="[object RegExp]",x="[object Set]",q="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",C="[object DataView]",S=e?e.prototype:void 0,E=S?S.valueOf:void 0;function I(M,T,P,j,D,V,F){switch(P){case C:if(M.byteLength!=T.byteLength||M.byteOffset!=T.byteOffset)return!1;M=M.buffer,T=T.buffer;case b:return!(M.byteLength!=T.byteLength||!V(new t(M),new t(T)));case d:case p:case h:return n(+M,+T);case m:return M.name==T.name&&M.message==T.message;case g:case q:return M==T+"";case f:var Q=a;case x:var R=j&u;if(Q||(Q=s),M.size!=T.size&&!R)return!1;var X=F.get(M);if(X)return X==T;j|=l,F.set(M,T);var H=i(Q(M),Q(T),j,D,V,F);return F.delete(M),H;case w:if(E)return E.call(M)==E.call(T)}return!1}return um=I,um}var lm,_q;function bF(){if(_q)return lm;_q=1;var e=KE(),t=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l,d,p,m){var f=l&t,h=e(s),g=h.length,x=e(u),q=x.length;if(g!=q&&!f)return!1;for(var w=g;w--;){var b=h[w];if(!(f?b in u:i.call(u,b)))return!1}var C=m.get(s),S=m.get(u);if(C&&S)return C==u&&S==s;var E=!0;m.set(s,u),m.set(u,s);for(var I=f;++w<g;){b=h[w];var M=s[b],T=u[b];if(d)var P=f?d(T,M,b,u,s,m):d(M,T,b,s,u,m);if(!(P===void 0?M===T||p(M,T,l,d,m):P)){E=!1;break}I||(I=b=="constructor")}if(E&&!I){var j=s.constructor,D=u.constructor;j!=D&&"constructor"in s&&"constructor"in u&&!(typeof j=="function"&&j instanceof j&&typeof D=="function"&&D instanceof D)&&(E=!1)}return m.delete(s),m.delete(u),E}return lm=a,lm}var cm,mq;function qF(){if(mq)return cm;mq=1;var e=qc(),t=aI(),n=wF(),i=bF(),a=Aa(),s=Ft(),u=Fa(),l=su(),d=1,p="[object Arguments]",m="[object Array]",f="[object Object]",h=Object.prototype,g=h.hasOwnProperty;function x(q,w,b,C,S,E){var I=s(q),M=s(w),T=I?m:a(q),P=M?m:a(w);T=T==p?f:T,P=P==p?f:P;var j=T==f,D=P==f,V=T==P;if(V&&u(q)){if(!u(w))return!1;I=!0,j=!1}if(V&&!j)return E||(E=new e),I||l(q)?t(q,w,b,C,S,E):n(q,w,T,b,C,S,E);if(!(b&d)){var F=j&&g.call(q,"__wrapped__"),Q=D&&g.call(w,"__wrapped__");if(F||Q){var R=F?q.value():q,X=Q?w.value():w;return E||(E=new e),S(R,X,b,C,E)}}return V?(E||(E=new e),i(q,w,b,C,S,E)):!1}return cm=x,cm}var dm,hq;function sI(){if(hq)return dm;hq=1;var e=qF(),t=Qn();function n(i,a,s,u,l){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:e(i,a,s,u,n,l)}return dm=n,dm}var pm,yq;function SF(){if(yq)return pm;yq=1;var e=qc(),t=sI(),n=1,i=2;function a(s,u,l,d){var p=l.length,m=p,f=!d;if(s==null)return!m;for(s=Object(s);p--;){var h=l[p];if(f&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++p<m;){h=l[p];var g=h[0],x=s[g],q=h[1];if(f&&h[2]){if(x===void 0&&!(g in s))return!1}else{var w=new e;if(d)var b=d(x,q,g,s,u,w);if(!(b===void 0?t(q,x,n|i,d,w):b))return!1}}return!0}return pm=a,pm}var fm,gq;function uI(){if(gq)return fm;gq=1;var e=sn();function t(n){return n===n&&!e(n)}return fm=t,fm}var _m,vq;function CF(){if(vq)return _m;vq=1;var e=uI(),t=Xi();function n(i){for(var a=t(i),s=a.length;s--;){var u=a[s],l=i[u];a[s]=[u,l,e(l)]}return a}return _m=n,_m}var mm,xq;function lI(){if(xq)return mm;xq=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return mm=e,mm}var hm,wq;function kF(){if(wq)return hm;wq=1;var e=SF(),t=CF(),n=lI();function i(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return hm=i,hm}var ym,bq;function La(){if(bq)return ym;bq=1;var e=Vo(),t=Qn(),n="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&e(a)==n}return ym=i,ym}var gm,qq;function Pg(){if(qq)return gm;qq=1;var e=Ft(),t=La(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,u){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:i.test(s)||!n.test(s)||u!=null&&s in Object(u)}return gm=a,gm}var vm,Sq;function MF(){if(Sq)return vm;Sq=1;var e=xg(),t="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,l=a?a.apply(this,u):u[0],d=s.cache;if(d.has(l))return d.get(l);var p=i.apply(this,u);return s.cache=d.set(l,p)||d,p};return s.cache=new(n.Cache||e),s}return n.Cache=e,vm=n,vm}var xm,Cq;function EF(){if(Cq)return xm;Cq=1;var e=MF(),t=500;function n(i){var a=e(i,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return xm=n,xm}var wm,kq;function IF(){if(kq)return wm;kq=1;var e=EF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,l,d,p){s.push(d?p.replace(n,"$1"):l||u)}),s});return wm=i,wm}var bm,Mq;function Tc(){if(Mq)return bm;Mq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=n(t[i],i,t);return s}return bm=e,bm}var qm,Eq;function NF(){if(Eq)return qm;Eq=1;var e=Va(),t=Tc(),n=Ft(),i=La(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(l){if(typeof l=="string")return l;if(n(l))return t(l,u)+"";if(i(l))return s?s.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return qm=u,qm}var Sm,Iq;function cI(){if(Iq)return Sm;Iq=1;var e=NF();function t(n){return n==null?"":e(n)}return Sm=t,Sm}var Cm,Nq;function Pc(){if(Nq)return Cm;Nq=1;var e=Ft(),t=Pg(),n=IF(),i=cI();function a(s,u){return e(s)?s:t(s,u)?[s]:n(i(s))}return Cm=a,Cm}var km,Tq;function uu(){if(Tq)return km;Tq=1;var e=La();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return km=t,km}var Mm,Pq;function jc(){if(Pq)return Mm;Pq=1;var e=Pc(),t=uu();function n(i,a){a=e(a,i);for(var s=0,u=a.length;i!=null&&s<u;)i=i[t(a[s++])];return s&&s==u?i:void 0}return Mm=n,Mm}var Em,jq;function TF(){if(jq)return Em;jq=1;var e=jc();function t(n,i,a){var s=n==null?void 0:e(n,i);return s===void 0?a:s}return Em=t,Em}var Im,Rq;function PF(){if(Rq)return Im;Rq=1;function e(t,n){return t!=null&&n in Object(t)}return Im=e,Im}var Nm,Oq;function dI(){if(Oq)return Nm;Oq=1;var e=Pc(),t=au(),n=Ft(),i=kc(),a=bg(),s=uu();function u(l,d,p){d=e(d,l);for(var m=-1,f=d.length,h=!1;++m<f;){var g=s(d[m]);if(!(h=l!=null&&p(l,g)))break;l=l[g]}return h||++m!=f?h:(f=l==null?0:l.length,!!f&&a(f)&&i(g,f)&&(n(l)||t(l)))}return Nm=u,Nm}var Tm,Vq;function pI(){if(Vq)return Tm;Vq=1;var e=PF(),t=dI();function n(i,a){return i!=null&&t(i,a,e)}return Tm=n,Tm}var Pm,Fq;function jF(){if(Fq)return Pm;Fq=1;var e=sI(),t=TF(),n=pI(),i=Pg(),a=uI(),s=lI(),u=uu(),l=1,d=2;function p(m,f){return i(m)&&a(f)?s(u(m),f):function(h){var g=t(h,m);return g===void 0&&g===f?n(h,m):e(f,g,l|d)}}return Pm=p,Pm}var jm,Aq;function fI(){if(Aq)return jm;Aq=1;function e(t){return function(n){return n==null?void 0:n[t]}}return jm=e,jm}var Rm,Lq;function RF(){if(Lq)return Rm;Lq=1;var e=jc();function t(n){return function(i){return e(i,n)}}return Rm=t,Rm}var Om,Dq;function OF(){if(Dq)return Om;Dq=1;var e=fI(),t=RF(),n=Pg(),i=uu();function a(s){return n(s)?e(i(s)):t(s)}return Om=a,Om}var Vm,Bq;function xi(){if(Bq)return Vm;Bq=1;var e=kF(),t=jF(),n=Lo(),i=Ft(),a=OF();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?i(u)?t(u[0],u[1]):e(u):a(u)}return Vm=s,Vm}var Fm,zq;function _I(){if(zq)return Fm;zq=1;var e=HE(),t=hF(),n=xi(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u,3))}return Fm=a,Fm}var Am,$q;function VF(){if($q)return Am;$q=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i,a){return i!=null&&t.call(i,a)}return Am=n,Am}var Lm,Hq;function mI(){if(Hq)return Lm;Hq=1;var e=VF(),t=dI();function n(i,a){return i!=null&&t(i,a,e)}return Lm=n,Lm}var Dm,Wq;function FF(){if(Wq)return Dm;Wq=1;var e=Sg(),t=Aa(),n=au(),i=Ft(),a=vi(),s=Fa(),u=Ec(),l=su(),d="[object Map]",p="[object Set]",m=Object.prototype,f=m.hasOwnProperty;function h(g){if(g==null)return!0;if(a(g)&&(i(g)||typeof g=="string"||typeof g.splice=="function"||s(g)||l(g)||n(g)))return!g.length;var x=t(g);if(x==d||x==p)return!g.size;if(u(g))return!e(g).length;for(var q in g)if(f.call(g,q))return!1;return!0}return Dm=h,Dm}var Bm,Uq;function hI(){if(Uq)return Bm;Uq=1;function e(t){return t===void 0}return Bm=e,Bm}var zm,Gq;function yI(){if(Gq)return zm;Gq=1;var e=Nc(),t=vi();function n(i,a){var s=-1,u=t(i)?Array(i.length):[];return e(i,function(l,d,p){u[++s]=a(l,d,p)}),u}return zm=n,zm}var $m,Kq;function gI(){if(Kq)return $m;Kq=1;var e=Tc(),t=xi(),n=yI(),i=Ft();function a(s,u){var l=i(s)?e:n;return l(s,t(u,3))}return $m=a,$m}var Hm,Yq;function AF(){if(Yq)return Hm;Yq=1;function e(t,n,i,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(i=t[++s]);++s<u;)i=n(i,t[s],s,t);return i}return Hm=e,Hm}var Wm,Qq;function LF(){if(Qq)return Wm;Qq=1;function e(t,n,i,a,s){return s(t,function(u,l,d){i=a?(a=!1,u):n(i,u,l,d)}),i}return Wm=e,Wm}var Um,Xq;function vI(){if(Xq)return Um;Xq=1;var e=AF(),t=Nc(),n=xi(),i=LF(),a=Ft();function s(u,l,d){var p=a(u)?e:i,m=arguments.length<3;return p(u,n(l,4),d,m,t)}return Um=s,Um}var Gm,Zq;function DF(){if(Zq)return Gm;Zq=1;var e=Vo(),t=Ft(),n=Qn(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==i}return Gm=a,Gm}var Km,Jq;function BF(){if(Jq)return Km;Jq=1;var e=fI(),t=e("length");return Km=t,Km}var Ym,eS;function zF(){if(eS)return Ym;eS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+e+a+s+"]");function d(p){return l.test(p)}return Ym=d,Ym}var Qm,tS;function $F(){if(tS)return Qm;tS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="["+e+"]",l="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+d+")",m="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",x=p+"?",q="["+s+"]?",w="(?:"+g+"(?:"+[m,f,h].join("|")+")"+q+x+")*",b=q+x+w,C="(?:"+[m+l+"?",l,f,h,u].join("|")+")",S=RegExp(d+"(?="+d+")|"+C+b,"g");function E(I){for(var M=S.lastIndex=0;S.test(I);)++M;return M}return Qm=E,Qm}var Xm,rS;function HF(){if(rS)return Xm;rS=1;var e=BF(),t=zF(),n=$F();function i(a){return t(a)?n(a):e(a)}return Xm=i,Xm}var Zm,nS;function WF(){if(nS)return Zm;nS=1;var e=Sg(),t=Aa(),n=vi(),i=DF(),a=HF(),s="[object Map]",u="[object Set]";function l(d){if(d==null)return 0;if(n(d))return i(d)?a(d):d.length;var p=t(d);return p==s||p==u?d.size:e(d).length}return Zm=l,Zm}var Jm,iS;function UF(){if(iS)return Jm;iS=1;var e=wg(),t=ZE(),n=Ng(),i=xi(),a=Ic(),s=Ft(),u=Fa(),l=iu(),d=sn(),p=su();function m(f,h,g){var x=s(f),q=x||u(f)||p(f);if(h=i(h,4),g==null){var w=f&&f.constructor;q?g=x?new w:[]:d(f)?g=l(w)?t(a(f)):{}:g={}}return(q?e:n)(f,function(b,C,S){return h(g,b,C,S)}),g}return Jm=m,Jm}var eh,oS;function GF(){if(oS)return eh;oS=1;var e=Va(),t=au(),n=Ft(),i=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(i&&s&&s[i])}return eh=a,eh}var th,aS;function jg(){if(aS)return th;aS=1;var e=kg(),t=GF();function n(i,a,s,u,l){var d=-1,p=i.length;for(s||(s=t),l||(l=[]);++d<p;){var m=i[d];a>0&&s(m)?a>1?n(m,a-1,s,u,l):e(l,m):u||(l[l.length]=m)}return l}return th=n,th}var rh,sS;function KF(){if(sS)return rh;sS=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return rh=e,rh}var nh,uS;function xI(){if(uS)return nh;uS=1;var e=KF(),t=Math.max;function n(i,a,s){return a=t(a===void 0?i.length-1:a,0),function(){for(var u=arguments,l=-1,d=t(u.length-a,0),p=Array(d);++l<d;)p[l]=u[a+l];l=-1;for(var m=Array(a+1);++l<a;)m[l]=u[l];return m[a]=s(p),e(i,this,m)}}return nh=n,nh}var ih,lS;function YF(){if(lS)return ih;lS=1;var e=Eg(),t=LE(),n=Lo(),i=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return ih=i,ih}var oh,cS;function QF(){if(cS)return oh;cS=1;var e=800,t=16,n=Date.now;function i(a){var s=0,u=0;return function(){var l=n(),d=t-(l-u);if(u=l,d>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return oh=i,oh}var ah,dS;function wI(){if(dS)return ah;dS=1;var e=YF(),t=QF(),n=t(e);return ah=n,ah}var sh,pS;function Rc(){if(pS)return sh;pS=1;var e=Lo(),t=xI(),n=wI();function i(a,s){return n(t(a,s,e),a+"")}return sh=i,sh}var uh,fS;function bI(){if(fS)return uh;fS=1;function e(t,n,i,a){for(var s=t.length,u=i+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return uh=e,uh}var lh,_S;function XF(){if(_S)return lh;_S=1;function e(t){return t!==t}return lh=e,lh}var ch,mS;function ZF(){if(mS)return ch;mS=1;function e(t,n,i){for(var a=i-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return ch=e,ch}var dh,hS;function JF(){if(hS)return dh;hS=1;var e=bI(),t=XF(),n=ZF();function i(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return dh=i,dh}var ph,yS;function eA(){if(yS)return ph;yS=1;var e=JF();function t(n,i){var a=n==null?0:n.length;return!!a&&e(n,i,0)>-1}return ph=t,ph}var fh,gS;function tA(){if(gS)return fh;gS=1;function e(t,n,i){for(var a=-1,s=t==null?0:t.length;++a<s;)if(i(n,t[a]))return!0;return!1}return fh=e,fh}var _h,vS;function rA(){if(vS)return _h;vS=1;function e(){}return _h=e,_h}var mh,xS;function nA(){if(xS)return mh;xS=1;var e=YE(),t=rA(),n=Tg(),i=1/0,a=e&&1/n(new e([,-0]))[1]==i?function(s){return new e(s)}:t;return mh=a,mh}var hh,wS;function iA(){if(wS)return hh;wS=1;var e=iI(),t=eA(),n=tA(),i=oI(),a=nA(),s=Tg(),u=200;function l(d,p,m){var f=-1,h=t,g=d.length,x=!0,q=[],w=q;if(m)x=!1,h=n;else if(g>=u){var b=p?null:a(d);if(b)return s(b);x=!1,h=i,w=new e}else w=p?[]:q;e:for(;++f<g;){var C=d[f],S=p?p(C):C;if(C=m||C!==0?C:0,x&&S===S){for(var E=w.length;E--;)if(w[E]===S)continue e;p&&w.push(S),q.push(C)}else h(w,S,m)||(w!==q&&w.push(S),q.push(C))}return q}return hh=l,hh}var yh,bS;function qI(){if(bS)return yh;bS=1;var e=vi(),t=Qn();function n(i){return t(i)&&e(i)}return yh=n,yh}var gh,qS;function oA(){if(qS)return gh;qS=1;var e=jg(),t=Rc(),n=iA(),i=qI(),a=t(function(s){return n(e(s,1,i,!0))});return gh=a,gh}var vh,SS;function aA(){if(SS)return vh;SS=1;var e=Tc();function t(n,i){return e(i,function(a){return n[a]})}return vh=t,vh}var xh,CS;function SI(){if(CS)return xh;CS=1;var e=aA(),t=Xi();function n(i){return i==null?[]:e(i,t(i))}return xh=n,xh}var wh,kS;function un(){if(kS)return wh;kS=1;var e;if(typeof gg=="function")try{e={clone:fF(),constant:Eg(),each:nI(),filter:_I(),has:mI(),isArray:Ft(),isEmpty:FF(),isFunction:iu(),isUndefined:hI(),keys:Xi(),map:gI(),reduce:vI(),size:WF(),transform:UF(),union:oA(),values:SI()}}catch{}return e||(e=window._),wh=e,wh}var bh,MS;function Rg(){if(MS)return bh;MS=1;var e=un();bh=a;var t="\0",n="\0",i="";function a(m){this._isDirected=e.has(m,"directed")?m.directed:!0,this._isMultigraph=e.has(m,"multigraph")?m.multigraph:!1,this._isCompound=e.has(m,"compound")?m.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(m){return this._label=m,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultNodeLabelFn=m,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var m=this;return e.filter(this.nodes(),function(f){return e.isEmpty(m._in[f])})},a.prototype.sinks=function(){var m=this;return e.filter(this.nodes(),function(f){return e.isEmpty(m._out[f])})},a.prototype.setNodes=function(m,f){var h=arguments,g=this;return e.each(m,function(x){h.length>1?g.setNode(x,f):g.setNode(x)}),this},a.prototype.setNode=function(m,f){return e.has(this._nodes,m)?(arguments.length>1&&(this._nodes[m]=f),this):(this._nodes[m]=arguments.length>1?f:this._defaultNodeLabelFn(m),this._isCompound&&(this._parent[m]=n,this._children[m]={},this._children[n][m]=!0),this._in[m]={},this._preds[m]={},this._out[m]={},this._sucs[m]={},++this._nodeCount,this)},a.prototype.node=function(m){return this._nodes[m]},a.prototype.hasNode=function(m){return e.has(this._nodes,m)},a.prototype.removeNode=function(m){var f=this;if(e.has(this._nodes,m)){var h=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[m],this._isCompound&&(this._removeFromParentsChildList(m),delete this._parent[m],e.each(this.children(m),function(g){f.setParent(g)}),delete this._children[m]),e.each(e.keys(this._in[m]),h),delete this._in[m],delete this._preds[m],e.each(e.keys(this._out[m]),h),delete this._out[m],delete this._sucs[m],--this._nodeCount}return this},a.prototype.setParent=function(m,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===m)throw new Error("Setting "+f+" as parent of "+m+" would create a cycle");this.setNode(f)}return this.setNode(m),this._removeFromParentsChildList(m),this._parent[m]=f,this._children[f][m]=!0,this},a.prototype._removeFromParentsChildList=function(m){delete this._children[this._parent[m]][m]},a.prototype.parent=function(m){if(this._isCompound){var f=this._parent[m];if(f!==n)return f}},a.prototype.children=function(m){if(e.isUndefined(m)&&(m=n),this._isCompound){var f=this._children[m];if(f)return e.keys(f)}else{if(m===n)return this.nodes();if(this.hasNode(m))return[]}},a.prototype.predecessors=function(m){var f=this._preds[m];if(f)return e.keys(f)},a.prototype.successors=function(m){var f=this._sucs[m];if(f)return e.keys(f)},a.prototype.neighbors=function(m){var f=this.predecessors(m);if(f)return e.union(f,this.successors(m))},a.prototype.isLeaf=function(m){var f;return this.isDirected()?f=this.successors(m):f=this.neighbors(m),f.length===0},a.prototype.filterNodes=function(m){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(q,w){m(w)&&f.setNode(w,q)}),e.each(this._edgeObjs,function(q){f.hasNode(q.v)&&f.hasNode(q.w)&&f.setEdge(q,h.edge(q))});var g={};function x(q){var w=h.parent(q);return w===void 0||f.hasNode(w)?(g[q]=w,w):w in g?g[w]:x(w)}return this._isCompound&&e.each(f.nodes(),function(q){f.setParent(q,x(q))}),f},a.prototype.setDefaultEdgeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultEdgeLabelFn=m,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(m,f){var h=this,g=arguments;return e.reduce(m,function(x,q){return g.length>1?h.setEdge(x,q,f):h.setEdge(x,q),q}),this},a.prototype.setEdge=function(){var m,f,h,g,x=!1,q=arguments[0];typeof q=="object"&&q!==null&&"v"in q?(m=q.v,f=q.w,h=q.name,arguments.length===2&&(g=arguments[1],x=!0)):(m=q,f=arguments[1],h=arguments[3],arguments.length>2&&(g=arguments[2],x=!0)),m=""+m,f=""+f,e.isUndefined(h)||(h=""+h);var w=l(this._isDirected,m,f,h);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=g),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(m),this.setNode(f),this._edgeLabels[w]=x?g:this._defaultEdgeLabelFn(m,f,h);var b=d(this._isDirected,m,f,h);return m=b.v,f=b.w,Object.freeze(b),this._edgeObjs[w]=b,s(this._preds[f],m),s(this._sucs[m],f),this._in[f][w]=b,this._out[m][w]=b,this._edgeCount++,this},a.prototype.edge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h);return this._edgeLabels[g]},a.prototype.hasEdge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h);return e.has(this._edgeLabels,g)},a.prototype.removeEdge=function(m,f,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,f,h),x=this._edgeObjs[g];return x&&(m=x.v,f=x.w,delete this._edgeLabels[g],delete this._edgeObjs[g],u(this._preds[f],m),u(this._sucs[m],f),delete this._in[f][g],delete this._out[m][g],this._edgeCount--),this},a.prototype.inEdges=function(m,f){var h=this._in[m];if(h){var g=e.values(h);return f?e.filter(g,function(x){return x.v===f}):g}},a.prototype.outEdges=function(m,f){var h=this._out[m];if(h){var g=e.values(h);return f?e.filter(g,function(x){return x.w===f}):g}},a.prototype.nodeEdges=function(m,f){var h=this.inEdges(m,f);if(h)return h.concat(this.outEdges(m,f))};function s(m,f){m[f]?m[f]++:m[f]=1}function u(m,f){--m[f]||delete m[f]}function l(m,f,h,g){var x=""+f,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}return x+i+q+i+(e.isUndefined(g)?t:g)}function d(m,f,h,g){var x=""+f,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}var b={v:x,w:q};return g&&(b.name=g),b}function p(m,f){return l(m,f.v,f.w,f.name)}return bh}var qh,ES;function sA(){return ES||(ES=1,qh="2.1.8"),qh}var Sh,IS;function uA(){return IS||(IS=1,Sh={Graph:Rg(),version:sA()}),Sh}var Ch,NS;function lA(){if(NS)return Ch;NS=1;var e=un(),t=Rg();Ch={write:n,read:s};function n(u){var l={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:i(u),edges:a(u)};return e.isUndefined(u.graph())||(l.value=e.clone(u.graph())),l}function i(u){return e.map(u.nodes(),function(l){var d=u.node(l),p=u.parent(l),m={v:l};return e.isUndefined(d)||(m.value=d),e.isUndefined(p)||(m.parent=p),m})}function a(u){return e.map(u.edges(),function(l){var d=u.edge(l),p={v:l.v,w:l.w};return e.isUndefined(l.name)||(p.name=l.name),e.isUndefined(d)||(p.value=d),p})}function s(u){var l=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(d){l.setNode(d.v,d.value),d.parent&&l.setParent(d.v,d.parent)}),e.each(u.edges,function(d){l.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),l}return Ch}var kh,TS;function cA(){if(TS)return kh;TS=1;var e=un();kh=t;function t(n){var i={},a=[],s;function u(l){e.has(i,l)||(i[l]=!0,s.push(l),e.each(n.successors(l),u),e.each(n.predecessors(l),u))}return e.each(n.nodes(),function(l){s=[],u(l),s.length&&a.push(s)}),a}return kh}var Mh,PS;function CI(){if(PS)return Mh;PS=1;var e=un();Mh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,i){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:i}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,i){var a=this._keyIndices[n];if(i>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+i);this._arr[a].priority=i,this._decrease(a)},t.prototype._heapify=function(n){var i=this._arr,a=2*n,s=a+1,u=n;a<i.length&&(u=i[a].priority<i[u].priority?a:u,s<i.length&&(u=i[s].priority<i[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var i=this._arr,a=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,i){var a=this._arr,s=this._keyIndices,u=a[n],l=a[i];a[n]=l,a[i]=u,s[l.key]=n,s[u.key]=i},Mh}var Eh,jS;function kI(){if(jS)return Eh;jS=1;var e=un(),t=CI();Eh=i;var n=e.constant(1);function i(s,u,l,d){return a(s,String(u),l||n,d||function(p){return s.outEdges(p)})}function a(s,u,l,d){var p={},m=new t,f,h,g=function(x){var q=x.v!==f?x.v:x.w,w=p[q],b=l(x),C=h.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+b);C<w.distance&&(w.distance=C,w.predecessor=f,m.decrease(q,C))};for(s.nodes().forEach(function(x){var q=x===u?0:Number.POSITIVE_INFINITY;p[x]={distance:q},m.add(x,q)});m.size()>0&&(f=m.removeMin(),h=p[f],h.distance!==Number.POSITIVE_INFINITY);)d(f).forEach(g);return p}return Eh}var Ih,RS;function dA(){if(RS)return Ih;RS=1;var e=kI(),t=un();Ih=n;function n(i,a,s){return t.transform(i.nodes(),function(u,l){u[l]=e(i,l,a,s)},{})}return Ih}var Nh,OS;function MI(){if(OS)return Nh;OS=1;var e=un();Nh=t;function t(n){var i=0,a=[],s={},u=[];function l(d){var p=s[d]={onStack:!0,lowlink:i,index:i++};if(a.push(d),n.successors(d).forEach(function(h){e.has(s,h)?s[h].onStack&&(p.lowlink=Math.min(p.lowlink,s[h].index)):(l(h),p.lowlink=Math.min(p.lowlink,s[h].lowlink))}),p.lowlink===p.index){var m=[],f;do f=a.pop(),s[f].onStack=!1,m.push(f);while(d!==f);u.push(m)}}return n.nodes().forEach(function(d){e.has(s,d)||l(d)}),u}return Nh}var Th,VS;function pA(){if(VS)return Th;VS=1;var e=un(),t=MI();Th=n;function n(i){return e.filter(t(i),function(a){return a.length>1||a.length===1&&i.hasEdge(a[0],a[0])})}return Th}var Ph,FS;function fA(){if(FS)return Ph;FS=1;var e=un();Ph=n;var t=e.constant(1);function n(a,s,u){return i(a,s||t,u||function(l){return a.outEdges(l)})}function i(a,s,u){var l={},d=a.nodes();return d.forEach(function(p){l[p]={},l[p][p]={distance:0},d.forEach(function(m){p!==m&&(l[p][m]={distance:Number.POSITIVE_INFINITY})}),u(p).forEach(function(m){var f=m.v===p?m.w:m.v,h=s(m);l[p][f]={distance:h,predecessor:p}})}),d.forEach(function(p){var m=l[p];d.forEach(function(f){var h=l[f];d.forEach(function(g){var x=h[p],q=m[g],w=h[g],b=x.distance+q.distance;b<w.distance&&(w.distance=b,w.predecessor=q.predecessor)})})}),l}return Ph}var jh,AS;function EI(){if(AS)return jh;AS=1;var e=un();jh=t,t.CycleException=n;function t(i){var a={},s={},u=[];function l(d){if(e.has(s,d))throw new n;e.has(a,d)||(s[d]=!0,a[d]=!0,e.each(i.predecessors(d),l),delete s[d],u.push(d))}if(e.each(i.sinks(),l),e.size(a)!==i.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,jh}var Rh,LS;function _A(){if(LS)return Rh;LS=1;var e=EI();Rh=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Rh}var Oh,DS;function II(){if(DS)return Oh;DS=1;var e=un();Oh=t;function t(i,a,s){e.isArray(a)||(a=[a]);var u=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],d={};return e.each(a,function(p){if(!i.hasNode(p))throw new Error("Graph does not have node: "+p);n(i,p,s==="post",d,u,l)}),l}function n(i,a,s,u,l,d){e.has(u,a)||(u[a]=!0,s||d.push(a),e.each(l(a),function(p){n(i,p,s,u,l,d)}),s&&d.push(a))}return Oh}var Vh,BS;function mA(){if(BS)return Vh;BS=1;var e=II();Vh=t;function t(n,i){return e(n,i,"post")}return Vh}var Fh,zS;function hA(){if(zS)return Fh;zS=1;var e=II();Fh=t;function t(n,i){return e(n,i,"pre")}return Fh}var Ah,$S;function yA(){if($S)return Ah;$S=1;var e=un(),t=Rg(),n=CI();Ah=i;function i(a,s){var u=new t,l={},d=new n,p;function m(h){var g=h.v===p?h.w:h.v,x=d.priority(g);if(x!==void 0){var q=s(h);q<x&&(l[g]=p,d.decrease(g,q))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(h){d.add(h,Number.POSITIVE_INFINITY),u.setNode(h)}),d.decrease(a.nodes()[0],0);for(var f=!1;d.size()>0;){if(p=d.removeMin(),e.has(l,p))u.setEdge(p,l[p]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(p).forEach(m)}return u}return Ah}var Lh,HS;function gA(){return HS||(HS=1,Lh={components:cA(),dijkstra:kI(),dijkstraAll:dA(),findCycles:pA(),floydWarshall:fA(),isAcyclic:_A(),postorder:mA(),preorder:hA(),prim:yA(),tarjan:MI(),topsort:EI()}),Lh}var Dh,WS;function vA(){if(WS)return Dh;WS=1;var e=uA();return Dh={Graph:e.Graph,json:lA(),alg:gA(),version:e.version},Dh}var Bh,US;function Pn(){if(US)return Bh;US=1;var e;if(typeof gg=="function")try{e=vA()}catch{}return e||(e=window.graphlib),Bh=e,Bh}var zh,GS;function xA(){if(GS)return zh;GS=1;var e=eI(),t=1,n=4;function i(a){return e(a,t|n)}return zh=i,zh}var $h,KS;function Oc(){if(KS)return $h;KS=1;var e=Oa(),t=vi(),n=kc(),i=sn();function a(s,u,l){if(!i(l))return!1;var d=typeof u;return(d=="number"?t(l)&&n(u,l.length):d=="string"&&u in l)?e(l[u],s):!1}return $h=a,$h}var Hh,YS;function wA(){if(YS)return Hh;YS=1;var e=Rc(),t=Oa(),n=Oc(),i=Ao(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(l,d){l=Object(l);var p=-1,m=d.length,f=m>2?d[2]:void 0;for(f&&n(d[0],d[1],f)&&(m=1);++p<m;)for(var h=d[p],g=i(h),x=-1,q=g.length;++x<q;){var w=g[x],b=l[w];(b===void 0||t(b,a[w])&&!s.call(l,w))&&(l[w]=h[w])}return l});return Hh=u,Hh}var Wh,QS;function bA(){if(QS)return Wh;QS=1;var e=xi(),t=vi(),n=Xi();function i(a){return function(s,u,l){var d=Object(s);if(!t(s)){var p=e(u,3);s=n(s),u=function(f){return p(d[f],f,d)}}var m=a(s,u,l);return m>-1?d[p?s[m]:m]:void 0}}return Wh=i,Wh}var Uh,XS;function qA(){if(XS)return Uh;XS=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return Uh=t,Uh}var Gh,ZS;function SA(){if(ZS)return Gh;ZS=1;var e=qA(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return Gh=n,Gh}var Kh,JS;function CA(){if(JS)return Kh;JS=1;var e=SA(),t=sn(),n=La(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return i;if(t(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=t(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=e(p);var f=s.test(p);return f||u.test(p)?l(p.slice(2),f?2:8):a.test(p)?i:+p}return Kh=d,Kh}var Yh,eC;function NI(){if(eC)return Yh;eC=1;var e=CA(),t=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return Yh=i,Yh}var Qh,tC;function kA(){if(tC)return Qh;tC=1;var e=NI();function t(n){var i=e(n),a=i%1;return i===i?a?i-a:i:0}return Qh=t,Qh}var Xh,rC;function MA(){if(rC)return Xh;rC=1;var e=bI(),t=xi(),n=kA(),i=Math.max;function a(s,u,l){var d=s==null?0:s.length;if(!d)return-1;var p=l==null?0:n(l);return p<0&&(p=i(d+p,0)),e(s,t(u,3),p)}return Xh=a,Xh}var Zh,nC;function EA(){if(nC)return Zh;nC=1;var e=bA(),t=MA(),n=e(t);return Zh=n,Zh}var Jh,iC;function TI(){if(iC)return Jh;iC=1;var e=jg();function t(n){var i=n==null?0:n.length;return i?e(n,1):[]}return Jh=t,Jh}var ey,oC;function IA(){if(oC)return ey;oC=1;var e=Ig(),t=tI(),n=Ao();function i(a,s){return a==null?a:e(a,t(s),n)}return ey=i,ey}var ty,aC;function NA(){if(aC)return ty;aC=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ty=e,ty}var ry,sC;function TA(){if(sC)return ry;sC=1;var e=Sc(),t=Ng(),n=xi();function i(a,s){var u={};return s=n(s,3),t(a,function(l,d,p){e(u,d,s(l,d,p))}),u}return ry=i,ry}var ny,uC;function Og(){if(uC)return ny;uC=1;var e=La();function t(n,i,a){for(var s=-1,u=n.length;++s<u;){var l=n[s],d=i(l);if(d!=null&&(p===void 0?d===d&&!e(d):a(d,p)))var p=d,m=l}return m}return ny=t,ny}var iy,lC;function PA(){if(lC)return iy;lC=1;function e(t,n){return t>n}return iy=e,iy}var oy,cC;function jA(){if(cC)return oy;cC=1;var e=Og(),t=PA(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return oy=i,oy}var ay,dC;function PI(){if(dC)return ay;dC=1;var e=Sc(),t=Oa();function n(i,a,s){(s!==void 0&&!t(i[a],s)||s===void 0&&!(a in i))&&e(i,a,s)}return ay=n,ay}var sy,pC;function RA(){if(pC)return sy;pC=1;var e=Vo(),t=Ic(),n=Qn(),i="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,d=u.call(Object);function p(m){if(!n(m)||e(m)!=i)return!1;var f=t(m);if(f===null)return!0;var h=l.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&u.call(h)==d}return sy=p,sy}var uy,fC;function jI(){if(fC)return uy;fC=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return uy=e,uy}var ly,_C;function OA(){if(_C)return ly;_C=1;var e=ou(),t=Ao();function n(i){return e(i,t(i))}return ly=n,ly}var cy,mC;function VA(){if(mC)return cy;mC=1;var e=PI(),t=zE(),n=XE(),i=$E(),a=JE(),s=au(),u=Ft(),l=qI(),d=Fa(),p=iu(),m=sn(),f=RA(),h=su(),g=jI(),x=OA();function q(w,b,C,S,E,I,M){var T=g(w,C),P=g(b,C),j=M.get(P);if(j){e(w,C,j);return}var D=I?I(T,P,C+"",w,b,M):void 0,V=D===void 0;if(V){var F=u(P),Q=!F&&d(P),R=!F&&!Q&&h(P);D=P,F||Q||R?u(T)?D=T:l(T)?D=i(T):Q?(V=!1,D=t(P,!0)):R?(V=!1,D=n(P,!0)):D=[]:f(P)||s(P)?(D=T,s(T)?D=x(T):(!m(T)||p(T))&&(D=a(P))):V=!1}V&&(M.set(P,D),E(D,P,S,I,M),M.delete(P)),e(w,C,D)}return cy=q,cy}var dy,hC;function FA(){if(hC)return dy;hC=1;var e=qc(),t=PI(),n=Ig(),i=VA(),a=sn(),s=Ao(),u=jI();function l(d,p,m,f,h){d!==p&&n(p,function(g,x){if(h||(h=new e),a(g))i(d,p,x,m,l,f,h);else{var q=f?f(u(d,x),g,x+"",d,p,h):void 0;q===void 0&&(q=g),t(d,x,q)}},s)}return dy=l,dy}var py,yC;function AA(){if(yC)return py;yC=1;var e=Rc(),t=Oc();function n(i){return e(function(a,s){var u=-1,l=s.length,d=l>1?s[l-1]:void 0,p=l>2?s[2]:void 0;for(d=i.length>3&&typeof d=="function"?(l--,d):void 0,p&&t(s[0],s[1],p)&&(d=l<3?void 0:d,l=1),a=Object(a);++u<l;){var m=s[u];m&&i(a,m,u,d)}return a})}return py=n,py}var fy,gC;function LA(){if(gC)return fy;gC=1;var e=FA(),t=AA(),n=t(function(i,a,s){e(i,a,s)});return fy=n,fy}var _y,vC;function RI(){if(vC)return _y;vC=1;function e(t,n){return t<n}return _y=e,_y}var my,xC;function DA(){if(xC)return my;xC=1;var e=Og(),t=RI(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return my=i,my}var hy,wC;function BA(){if(wC)return hy;wC=1;var e=Og(),t=xi(),n=RI();function i(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return hy=i,hy}var yy,bC;function zA(){if(bC)return yy;bC=1;var e=Rn(),t=function(){return e.Date.now()};return yy=t,yy}var gy,qC;function $A(){if(qC)return gy;qC=1;var e=Cc(),t=Pc(),n=kc(),i=sn(),a=uu();function s(u,l,d,p){if(!i(u))return u;l=t(l,u);for(var m=-1,f=l.length,h=f-1,g=u;g!=null&&++m<f;){var x=a(l[m]),q=d;if(x==="__proto__"||x==="constructor"||x==="prototype")return u;if(m!=h){var w=g[x];q=p?p(w,x,g):void 0,q===void 0&&(q=i(w)?w:n(l[m+1])?[]:{})}e(g,x,q),g=g[x]}return u}return gy=s,gy}var vy,SC;function HA(){if(SC)return vy;SC=1;var e=jc(),t=$A(),n=Pc();function i(a,s,u){for(var l=-1,d=s.length,p={};++l<d;){var m=s[l],f=e(a,m);u(f,m)&&t(p,n(m,a),f)}return p}return vy=i,vy}var xy,CC;function WA(){if(CC)return xy;CC=1;var e=HA(),t=pI();function n(i,a){return e(i,a,function(s,u){return t(i,u)})}return xy=n,xy}var wy,kC;function UA(){if(kC)return wy;kC=1;var e=TI(),t=xI(),n=wI();function i(a){return n(t(a,void 0,e),a+"")}return wy=i,wy}var by,MC;function GA(){if(MC)return by;MC=1;var e=WA(),t=UA(),n=t(function(i,a){return i==null?{}:e(i,a)});return by=n,by}var qy,EC;function KA(){if(EC)return qy;EC=1;var e=Math.ceil,t=Math.max;function n(i,a,s,u){for(var l=-1,d=t(e((a-i)/(s||1)),0),p=Array(d);d--;)p[u?d:++l]=i,i+=s;return p}return qy=n,qy}var Sy,IC;function YA(){if(IC)return Sy;IC=1;var e=KA(),t=Oc(),n=NI();function i(a){return function(s,u,l){return l&&typeof l!="number"&&t(s,u,l)&&(u=l=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),l=l===void 0?s<u?1:-1:n(l),e(s,u,l,a)}}return Sy=i,Sy}var Cy,NC;function QA(){if(NC)return Cy;NC=1;var e=YA(),t=e();return Cy=t,Cy}var ky,TC;function XA(){if(TC)return ky;TC=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return ky=e,ky}var My,PC;function ZA(){if(PC)return My;PC=1;var e=La();function t(n,i){if(n!==i){var a=n!==void 0,s=n===null,u=n===n,l=e(n),d=i!==void 0,p=i===null,m=i===i,f=e(i);if(!p&&!f&&!l&&n>i||l&&d&&m&&!p&&!f||s&&d&&m||!a&&m||!u)return 1;if(!s&&!l&&!f&&n<i||f&&a&&u&&!s&&!l||p&&a&&u||!d&&u||!m)return-1}return 0}return My=t,My}var Ey,jC;function JA(){if(jC)return Ey;jC=1;var e=ZA();function t(n,i,a){for(var s=-1,u=n.criteria,l=i.criteria,d=u.length,p=a.length;++s<d;){var m=e(u[s],l[s]);if(m){if(s>=p)return m;var f=a[s];return m*(f=="desc"?-1:1)}}return n.index-i.index}return Ey=t,Ey}var Iy,RC;function eL(){if(RC)return Iy;RC=1;var e=Tc(),t=jc(),n=xi(),i=yI(),a=XA(),s=Mc(),u=JA(),l=Lo(),d=Ft();function p(m,f,h){f.length?f=e(f,function(q){return d(q)?function(w){return t(w,q.length===1?q[0]:q)}:q}):f=[l];var g=-1;f=e(f,s(n));var x=i(m,function(q,w,b){var C=e(f,function(S){return S(q)});return{criteria:C,index:++g,value:q}});return a(x,function(q,w){return u(q,w,h)})}return Iy=p,Iy}var Ny,OC;function tL(){if(OC)return Ny;OC=1;var e=jg(),t=eL(),n=Rc(),i=Oc(),a=n(function(s,u){if(s==null)return[];var l=u.length;return l>1&&i(s,u[0],u[1])?u=[]:l>2&&i(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return Ny=a,Ny}var Ty,VC;function rL(){if(VC)return Ty;VC=1;var e=cI(),t=0;function n(i){var a=++t;return e(i)+a}return Ty=n,Ty}var Py,FC;function nL(){if(FC)return Py;FC=1;function e(t,n,i){for(var a=-1,s=t.length,u=n.length,l={};++a<s;){var d=a<u?n[a]:void 0;i(l,t[a],d)}return l}return Py=e,Py}var jy,AC;function iL(){if(AC)return jy;AC=1;var e=Cc(),t=nL();function n(i,a){return t(i||[],a||[],e)}return jy=n,jy}var Ry,LC;function bt(){if(LC)return Ry;LC=1;var e;if(typeof gg=="function")try{e={cloneDeep:xA(),constant:Eg(),defaults:wA(),each:nI(),filter:_I(),find:EA(),flatten:TI(),forEach:rI(),forIn:IA(),has:mI(),isUndefined:hI(),last:NA(),map:gI(),mapValues:TA(),max:jA(),merge:LA(),min:DA(),minBy:BA(),now:zA(),pick:GA(),range:QA(),reduce:vI(),sortBy:tL(),uniqueId:rL(),values:SI(),zipObject:iL()}}catch{}return e||(e=window._),Ry=e,Ry}var Oy,DC;function oL(){if(DC)return Oy;DC=1,Oy=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,a=i._prev;if(a!==i)return t(a),a},e.prototype.enqueue=function(i){var a=this._sentinel;i._prev&&i._next&&t(i),i._next=a._next,a._next._prev=i,a._next=i,i._prev=a},e.prototype.toString=function(){for(var i=[],a=this._sentinel,s=a._prev;s!==a;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"};function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,a){if(i!=="_next"&&i!=="_prev")return a}return Oy}var Vy,BC;function aL(){if(BC)return Vy;BC=1;var e=bt(),t=Pn().Graph,n=oL();Vy=a;var i=e.constant(1);function a(p,m){if(p.nodeCount()<=1)return[];var f=l(p,m||i),h=s(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(h,function(g){return p.outEdges(g.v,g.w)}),!0)}function s(p,m,f){for(var h=[],g=m[m.length-1],x=m[0],q;p.nodeCount();){for(;q=x.dequeue();)u(p,m,f,q);for(;q=g.dequeue();)u(p,m,f,q);if(p.nodeCount()){for(var w=m.length-2;w>0;--w)if(q=m[w].dequeue(),q){h=h.concat(u(p,m,f,q,!0));break}}}return h}function u(p,m,f,h,g){var x=g?[]:void 0;return e.forEach(p.inEdges(h.v),function(q){var w=p.edge(q),b=p.node(q.v);g&&x.push({v:q.v,w:q.w}),b.out-=w,d(m,f,b)}),e.forEach(p.outEdges(h.v),function(q){var w=p.edge(q),b=q.w,C=p.node(b);C.in-=w,d(m,f,C)}),p.removeNode(h.v),x}function l(p,m){var f=new t,h=0,g=0;e.forEach(p.nodes(),function(w){f.setNode(w,{v:w,in:0,out:0})}),e.forEach(p.edges(),function(w){var b=f.edge(w.v,w.w)||0,C=m(w),S=b+C;f.setEdge(w.v,w.w,S),g=Math.max(g,f.node(w.v).out+=C),h=Math.max(h,f.node(w.w).in+=C)});var x=e.range(g+h+3).map(function(){return new n}),q=h+1;return e.forEach(f.nodes(),function(w){d(x,q,f.node(w))}),{graph:f,buckets:x,zeroIdx:q}}function d(p,m,f){f.out?f.in?p[f.out-f.in+m].enqueue(f):p[p.length-1].enqueue(f):p[0].enqueue(f)}return Vy}var Fy,zC;function sL(){if(zC)return Fy;zC=1;var e=bt(),t=aL();Fy={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,l(s)):i(s);e.forEach(u,function(d){var p=s.edge(d);s.removeEdge(d),p.forwardName=d.name,p.reversed=!0,s.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function l(d){return function(p){return d.edge(p).weight}}}function i(s){var u=[],l={},d={};function p(m){e.has(d,m)||(d[m]=!0,l[m]=!0,e.forEach(s.outEdges(m),function(f){e.has(l,f.w)?u.push(f):p(f.w)}),delete l[m])}return e.forEach(s.nodes(),p),u}function a(s){e.forEach(s.edges(),function(u){var l=s.edge(u);if(l.reversed){s.removeEdge(u);var d=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(u.w,u.v,l,d)}})}return Fy}var Ay,$C;function jr(){if($C)return Ay;$C=1;var e=bt(),t=Pn().Graph;Ay={addDummyNode:n,simplify:i,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:l,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:m,addBorderNode:f,maxRank:h,partition:g,time:x,notime:q};function n(w,b,C,S){var E;do E=e.uniqueId(S);while(w.hasNode(E));return C.dummy=b,w.setNode(E,C),E}function i(w){var b=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(C){b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){var S=b.edge(C.v,C.w)||{weight:0,minlen:1},E=w.edge(C);b.setEdge(C.v,C.w,{weight:S.weight+E.weight,minlen:Math.max(S.minlen,E.minlen)})}),b}function a(w){var b=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(C){w.children(C).length||b.setNode(C,w.node(C))}),e.forEach(w.edges(),function(C){b.setEdge(C,w.edge(C))}),b}function s(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.outEdges(C),function(E){S[E.w]=(S[E.w]||0)+w.edge(E).weight}),S});return e.zipObject(w.nodes(),b)}function u(w){var b=e.map(w.nodes(),function(C){var S={};return e.forEach(w.inEdges(C),function(E){S[E.v]=(S[E.v]||0)+w.edge(E).weight}),S});return e.zipObject(w.nodes(),b)}function l(w,b){var C=w.x,S=w.y,E=b.x-C,I=b.y-S,M=w.width/2,T=w.height/2;if(!E&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var P,j;return Math.abs(I)*M>Math.abs(E)*T?(I<0&&(T=-T),P=T*E/I,j=T):(E<0&&(M=-M),P=M,j=M*I/E),{x:C+P,y:S+j}}function d(w){var b=e.map(e.range(h(w)+1),function(){return[]});return e.forEach(w.nodes(),function(C){var S=w.node(C),E=S.rank;e.isUndefined(E)||(b[E][S.order]=C)}),b}function p(w){var b=e.min(e.map(w.nodes(),function(C){return w.node(C).rank}));e.forEach(w.nodes(),function(C){var S=w.node(C);e.has(S,"rank")&&(S.rank-=b)})}function m(w){var b=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),C=[];e.forEach(w.nodes(),function(I){var M=w.node(I).rank-b;C[M]||(C[M]=[]),C[M].push(I)});var S=0,E=w.graph().nodeRankFactor;e.forEach(C,function(I,M){e.isUndefined(I)&&M%E!==0?--S:S&&e.forEach(I,function(T){w.node(T).rank+=S})})}function f(w,b,C,S){var E={width:0,height:0};return arguments.length>=4&&(E.rank=C,E.order=S),n(w,"border",E,b)}function h(w){return e.max(e.map(w.nodes(),function(b){var C=w.node(b).rank;if(!e.isUndefined(C))return C}))}function g(w,b){var C={lhs:[],rhs:[]};return e.forEach(w,function(S){b(S)?C.lhs.push(S):C.rhs.push(S)}),C}function x(w,b){var C=e.now();try{return b()}finally{console.log(w+" time: "+(e.now()-C)+"ms")}}function q(w,b){return b()}return Ay}var Ly,HC;function uL(){if(HC)return Ly;HC=1;var e=bt(),t=jr();Ly={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){i(s,u)})}function i(s,u){var l=u.v,d=s.node(l).rank,p=u.w,m=s.node(p).rank,f=u.name,h=s.edge(u),g=h.labelRank;if(m!==d+1){s.removeEdge(u);var x,q,w;for(w=0,++d;d<m;++w,++d)h.points=[],q={width:0,height:0,edgeLabel:h,edgeObj:u,rank:d},x=t.addDummyNode(s,"edge",q,"_d"),d===g&&(q.width=h.width,q.height=h.height,q.dummy="edge-label",q.labelpos=h.labelpos),s.setEdge(l,x,{weight:h.weight},f),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,p,{weight:h.weight},f)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var l=s.node(u),d=l.edgeLabel,p;for(s.setEdge(l.edgeObj,d);l.dummy;)p=s.successors(u)[0],s.removeNode(u),d.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(d.x=l.x,d.y=l.y,d.width=l.width,d.height=l.height),u=p,l=s.node(u)})}return Ly}var Dy,WC;function oc(){if(WC)return Dy;WC=1;var e=bt();Dy={longestPath:t,slack:n};function t(i){var a={};function s(u){var l=i.node(u);if(e.has(a,u))return l.rank;a[u]=!0;var d=e.min(e.map(i.outEdges(u),function(p){return s(p.w)-i.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),l.rank=d}e.forEach(i.sources(),s)}function n(i,a){return i.node(a.w).rank-i.node(a.v).rank-i.edge(a).minlen}return Dy}var By,UC;function OI(){if(UC)return By;UC=1;var e=bt(),t=Pn().Graph,n=oc().slack;By=i;function i(l){var d=new t({directed:!1}),p=l.nodes()[0],m=l.nodeCount();d.setNode(p,{});for(var f,h;a(d,l)<m;)f=s(d,l),h=d.hasNode(f.v)?n(l,f):-n(l,f),u(d,l,h);return d}function a(l,d){function p(m){e.forEach(d.nodeEdges(m),function(f){var h=f.v,g=m===h?f.w:h;!l.hasNode(g)&&!n(d,f)&&(l.setNode(g,{}),l.setEdge(m,g,{}),p(g))})}return e.forEach(l.nodes(),p),l.nodeCount()}function s(l,d){return e.minBy(d.edges(),function(p){if(l.hasNode(p.v)!==l.hasNode(p.w))return n(d,p)})}function u(l,d,p){e.forEach(l.nodes(),function(m){d.node(m).rank+=p})}return By}var zy,GC;function lL(){if(GC)return zy;GC=1;var e=bt(),t=OI(),n=oc().slack,i=oc().longestPath,a=Pn().alg.preorder,s=Pn().alg.postorder,u=jr().simplify;zy=l,l.initLowLimValues=f,l.initCutValues=d,l.calcCutValue=m,l.leaveEdge=g,l.enterEdge=x,l.exchangeEdges=q;function l(S){S=u(S),i(S);var E=t(S);f(E),d(E,S);for(var I,M;I=g(E);)M=x(E,S,I),q(E,S,I,M)}function d(S,E){var I=s(S,S.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(M){p(S,E,M)})}function p(S,E,I){var M=S.node(I),T=M.parent;S.edge(I,T).cutvalue=m(S,E,I)}function m(S,E,I){var M=S.node(I),T=M.parent,P=!0,j=E.edge(I,T),D=0;return j||(P=!1,j=E.edge(T,I)),D=j.weight,e.forEach(E.nodeEdges(I),function(V){var F=V.v===I,Q=F?V.w:V.v;if(Q!==T){var R=F===P,X=E.edge(V).weight;if(D+=R?X:-X,b(S,I,Q)){var H=S.edge(I,Q).cutvalue;D+=R?-H:H}}}),D}function f(S,E){arguments.length<2&&(E=S.nodes()[0]),h(S,{},1,E)}function h(S,E,I,M,T){var P=I,j=S.node(M);return E[M]=!0,e.forEach(S.neighbors(M),function(D){e.has(E,D)||(I=h(S,E,I,D,M))}),j.low=P,j.lim=I++,T?j.parent=T:delete j.parent,I}function g(S){return e.find(S.edges(),function(E){return S.edge(E).cutvalue<0})}function x(S,E,I){var M=I.v,T=I.w;E.hasEdge(M,T)||(M=I.w,T=I.v);var P=S.node(M),j=S.node(T),D=P,V=!1;P.lim>j.lim&&(D=j,V=!0);var F=e.filter(E.edges(),function(Q){return V===C(S,S.node(Q.v),D)&&V!==C(S,S.node(Q.w),D)});return e.minBy(F,function(Q){return n(E,Q)})}function q(S,E,I,M){var T=I.v,P=I.w;S.removeEdge(T,P),S.setEdge(M.v,M.w,{}),f(S),d(S,E),w(S,E)}function w(S,E){var I=e.find(S.nodes(),function(T){return!E.node(T).parent}),M=a(S,I);M=M.slice(1),e.forEach(M,function(T){var P=S.node(T).parent,j=E.edge(T,P),D=!1;j||(j=E.edge(P,T),D=!0),E.node(T).rank=E.node(P).rank+(D?j.minlen:-j.minlen)})}function b(S,E,I){return S.hasEdge(E,I)}function C(S,E,I){return I.low<=E.lim&&E.lim<=I.lim}return zy}var $y,KC;function cL(){if(KC)return $y;KC=1;var e=oc(),t=e.longestPath,n=OI(),i=lL();$y=a;function a(d){switch(d.graph().ranker){case"network-simplex":l(d);break;case"tight-tree":u(d);break;case"longest-path":s(d);break;default:l(d)}}var s=t;function u(d){t(d),n(d)}function l(d){i(d)}return $y}var Hy,YC;function dL(){if(YC)return Hy;YC=1;var e=bt();Hy=t;function t(a){var s=i(a);e.forEach(a.graph().dummyChains,function(u){for(var l=a.node(u),d=l.edgeObj,p=n(a,s,d.v,d.w),m=p.path,f=p.lca,h=0,g=m[h],x=!0;u!==d.w;){if(l=a.node(u),x){for(;(g=m[h])!==f&&a.node(g).maxRank<l.rank;)h++;g===f&&(x=!1)}if(!x){for(;h<m.length-1&&a.node(g=m[h+1]).minRank<=l.rank;)h++;g=m[h]}a.setParent(u,g),u=a.successors(u)[0]}})}function n(a,s,u,l){var d=[],p=[],m=Math.min(s[u].low,s[l].low),f=Math.max(s[u].lim,s[l].lim),h,g;h=u;do h=a.parent(h),d.push(h);while(h&&(s[h].low>m||f>s[h].lim));for(g=h,h=l;(h=a.parent(h))!==g;)p.push(h);return{path:d.concat(p.reverse()),lca:g}}function i(a){var s={},u=0;function l(d){var p=u;e.forEach(a.children(d),l),s[d]={low:p,lim:u++}}return e.forEach(a.children(),l),s}return Hy}var Wy,QC;function pL(){if(QC)return Wy;QC=1;var e=bt(),t=jr();Wy={run:n,cleanup:u};function n(l){var d=t.addDummyNode(l,"root",{},"_root"),p=a(l),m=e.max(e.values(p))-1,f=2*m+1;l.graph().nestingRoot=d,e.forEach(l.edges(),function(g){l.edge(g).minlen*=f});var h=s(l)+1;e.forEach(l.children(),function(g){i(l,d,f,h,m,p,g)}),l.graph().nodeRankFactor=f}function i(l,d,p,m,f,h,g){var x=l.children(g);if(!x.length){g!==d&&l.setEdge(d,g,{weight:0,minlen:p});return}var q=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),b=l.node(g);l.setParent(q,g),b.borderTop=q,l.setParent(w,g),b.borderBottom=w,e.forEach(x,function(C){i(l,d,p,m,f,h,C);var S=l.node(C),E=S.borderTop?S.borderTop:C,I=S.borderBottom?S.borderBottom:C,M=S.borderTop?m:2*m,T=E!==I?1:f-h[g]+1;l.setEdge(q,E,{weight:M,minlen:T,nestingEdge:!0}),l.setEdge(I,w,{weight:M,minlen:T,nestingEdge:!0})}),l.parent(g)||l.setEdge(d,q,{weight:0,minlen:f+h[g]})}function a(l){var d={};function p(m,f){var h=l.children(m);h&&h.length&&e.forEach(h,function(g){p(g,f+1)}),d[m]=f}return e.forEach(l.children(),function(m){p(m,1)}),d}function s(l){return e.reduce(l.edges(),function(d,p){return d+l.edge(p).weight},0)}function u(l){var d=l.graph();l.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(l.edges(),function(p){var m=l.edge(p);m.nestingEdge&&l.removeEdge(p)})}return Wy}var Uy,XC;function fL(){if(XC)return Uy;XC=1;var e=bt(),t=jr();Uy=n;function n(a){function s(u){var l=a.children(u),d=a.node(u);if(l.length&&e.forEach(l,s),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,m=d.maxRank+1;p<m;++p)i(a,"borderLeft","_bl",u,d,p),i(a,"borderRight","_br",u,d,p)}}e.forEach(a.children(),s)}function i(a,s,u,l,d,p){var m={width:0,height:0,rank:p,borderType:s},f=d[s][p-1],h=t.addDummyNode(a,"border",m,u);d[s][p]=h,a.setParent(h,l),f&&a.setEdge(f,h,{weight:1})}return Uy}var Gy,ZC;function _L(){if(ZC)return Gy;ZC=1;var e=bt();Gy={adjust:t,undo:n};function t(p){var m=p.graph().rankdir.toLowerCase();(m==="lr"||m==="rl")&&i(p)}function n(p){var m=p.graph().rankdir.toLowerCase();(m==="bt"||m==="rl")&&s(p),(m==="lr"||m==="rl")&&(l(p),i(p))}function i(p){e.forEach(p.nodes(),function(m){a(p.node(m))}),e.forEach(p.edges(),function(m){a(p.edge(m))})}function a(p){var m=p.width;p.width=p.height,p.height=m}function s(p){e.forEach(p.nodes(),function(m){u(p.node(m))}),e.forEach(p.edges(),function(m){var f=p.edge(m);e.forEach(f.points,u),e.has(f,"y")&&u(f)})}function u(p){p.y=-p.y}function l(p){e.forEach(p.nodes(),function(m){d(p.node(m))}),e.forEach(p.edges(),function(m){var f=p.edge(m);e.forEach(f.points,d),e.has(f,"x")&&d(f)})}function d(p){var m=p.x;p.x=p.y,p.y=m}return Gy}var Ky,JC;function mL(){if(JC)return Ky;JC=1;var e=bt();Ky=t;function t(n){var i={},a=e.filter(n.nodes(),function(p){return!n.children(p).length}),s=e.max(e.map(a,function(p){return n.node(p).rank})),u=e.map(e.range(s+1),function(){return[]});function l(p){if(!e.has(i,p)){i[p]=!0;var m=n.node(p);u[m.rank].push(p),e.forEach(n.successors(p),l)}}var d=e.sortBy(a,function(p){return n.node(p).rank});return e.forEach(d,l),u}return Ky}var Yy,ek;function hL(){if(ek)return Yy;ek=1;var e=bt();Yy=t;function t(i,a){for(var s=0,u=1;u<a.length;++u)s+=n(i,a[u-1],a[u]);return s}function n(i,a,s){for(var u=e.zipObject(s,e.map(s,function(h,g){return g})),l=e.flatten(e.map(a,function(h){return e.sortBy(e.map(i.outEdges(h),function(g){return{pos:u[g.w],weight:i.edge(g).weight}}),"pos")}),!0),d=1;d<s.length;)d<<=1;var p=2*d-1;d-=1;var m=e.map(new Array(p),function(){return 0}),f=0;return e.forEach(l.forEach(function(h){var g=h.pos+d;m[g]+=h.weight;for(var x=0;g>0;)g%2&&(x+=m[g+1]),g=g-1>>1,m[g]+=h.weight;f+=h.weight*x})),f}return Yy}var Qy,tk;function yL(){if(tk)return Qy;tk=1;var e=bt();Qy=t;function t(n,i){return e.map(i,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(l,d){var p=n.edge(d),m=n.node(d.v);return{sum:l.sum+p.weight*m.order,weight:l.weight+p.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return Qy}var Xy,rk;function gL(){if(rk)return Xy;rk=1;var e=bt();Xy=t;function t(a,s){var u={};e.forEach(a,function(d,p){var m=u[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(m.barycenter=d.barycenter,m.weight=d.weight)}),e.forEach(s.edges(),function(d){var p=u[d.v],m=u[d.w];!e.isUndefined(p)&&!e.isUndefined(m)&&(m.indegree++,p.out.push(u[d.w]))});var l=e.filter(u,function(d){return!d.indegree});return n(l)}function n(a){var s=[];function u(p){return function(m){m.merged||(e.isUndefined(m.barycenter)||e.isUndefined(p.barycenter)||m.barycenter>=p.barycenter)&&i(p,m)}}function l(p){return function(m){m.in.push(p),--m.indegree===0&&a.push(m)}}for(;a.length;){var d=a.pop();s.push(d),e.forEach(d.in.reverse(),u(d)),e.forEach(d.out,l(d))}return e.map(e.filter(s,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function i(a,s){var u=0,l=0;a.weight&&(u+=a.barycenter*a.weight,l+=a.weight),s.weight&&(u+=s.barycenter*s.weight,l+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/l,a.weight=l,a.i=Math.min(s.i,a.i),s.merged=!0}return Xy}var Zy,nk;function vL(){if(nk)return Zy;nk=1;var e=bt(),t=jr();Zy=n;function n(s,u){var l=t.partition(s,function(q){return e.has(q,"barycenter")}),d=l.lhs,p=e.sortBy(l.rhs,function(q){return-q.i}),m=[],f=0,h=0,g=0;d.sort(a(!!u)),g=i(m,p,g),e.forEach(d,function(q){g+=q.vs.length,m.push(q.vs),f+=q.barycenter*q.weight,h+=q.weight,g=i(m,p,g)});var x={vs:e.flatten(m,!0)};return h&&(x.barycenter=f/h,x.weight=h),x}function i(s,u,l){for(var d;u.length&&(d=e.last(u)).i<=l;)u.pop(),s.push(d.vs),l++;return l}function a(s){return function(u,l){return u.barycenter<l.barycenter?-1:u.barycenter>l.barycenter?1:s?l.i-u.i:u.i-l.i}}return Zy}var Jy,ik;function xL(){if(ik)return Jy;ik=1;var e=bt(),t=yL(),n=gL(),i=vL();Jy=a;function a(l,d,p,m){var f=l.children(d),h=l.node(d),g=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,q={};g&&(f=e.filter(f,function(I){return I!==g&&I!==x}));var w=t(l,f);e.forEach(w,function(I){if(l.children(I.v).length){var M=a(l,I.v,p,m);q[I.v]=M,e.has(M,"barycenter")&&u(I,M)}});var b=n(w,p);s(b,q);var C=i(b,m);if(g&&(C.vs=e.flatten([g,C.vs,x],!0),l.predecessors(g).length)){var S=l.node(l.predecessors(g)[0]),E=l.node(l.predecessors(x)[0]);e.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+S.order+E.order)/(C.weight+2),C.weight+=2}return C}function s(l,d){e.forEach(l,function(p){p.vs=e.flatten(p.vs.map(function(m){return d[m]?d[m].vs:m}),!0)})}function u(l,d){e.isUndefined(l.barycenter)?(l.barycenter=d.barycenter,l.weight=d.weight):(l.barycenter=(l.barycenter*l.weight+d.barycenter*d.weight)/(l.weight+d.weight),l.weight+=d.weight)}return Jy}var e0,ok;function wL(){if(ok)return e0;ok=1;var e=bt(),t=Pn().Graph;e0=n;function n(a,s,u){var l=i(a),d=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(p){return a.node(p)});return e.forEach(a.nodes(),function(p){var m=a.node(p),f=a.parent(p);(m.rank===s||m.minRank<=s&&s<=m.maxRank)&&(d.setNode(p),d.setParent(p,f||l),e.forEach(a[u](p),function(h){var g=h.v===p?h.w:h.v,x=d.edge(g,p),q=e.isUndefined(x)?0:x.weight;d.setEdge(g,p,{weight:a.edge(h).weight+q})}),e.has(m,"minRank")&&d.setNode(p,{borderLeft:m.borderLeft[s],borderRight:m.borderRight[s]}))}),d}function i(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return e0}var t0,ak;function bL(){if(ak)return t0;ak=1;var e=bt();t0=t;function t(n,i,a){var s={},u;e.forEach(a,function(l){for(var d=n.parent(l),p,m;d;){if(p=n.parent(d),p?(m=s[p],s[p]=d):(m=u,u=d),m&&m!==d){i.setEdge(m,d);return}d=p}})}return t0}var r0,sk;function qL(){if(sk)return r0;sk=1;var e=bt(),t=mL(),n=hL(),i=xL(),a=wL(),s=bL(),u=Pn().Graph,l=jr();r0=d;function d(h){var g=l.maxRank(h),x=p(h,e.range(1,g+1),"inEdges"),q=p(h,e.range(g-1,-1,-1),"outEdges"),w=t(h);f(h,w);for(var b=Number.POSITIVE_INFINITY,C,S=0,E=0;E<4;++S,++E){m(S%2?x:q,S%4>=2),w=l.buildLayerMatrix(h);var I=n(h,w);I<b&&(E=0,C=e.cloneDeep(w),b=I)}f(h,C)}function p(h,g,x){return e.map(g,function(q){return a(h,q,x)})}function m(h,g){var x=new u;e.forEach(h,function(q){var w=q.graph().root,b=i(q,w,x,g);e.forEach(b.vs,function(C,S){q.node(C).order=S}),s(q,x,b.vs)})}function f(h,g){e.forEach(g,function(x){e.forEach(x,function(q,w){h.node(q).order=w})})}return r0}var n0,uk;function SL(){if(uk)return n0;uk=1;var e=bt(),t=Pn().Graph,n=jr();n0={positionX:x,findType1Conflicts:i,findType2Conflicts:a,addConflict:u,hasConflict:l,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:h,findSmallestWidthAlignment:f,balance:g};function i(b,C){var S={};function E(I,M){var T=0,P=0,j=I.length,D=e.last(M);return e.forEach(M,function(V,F){var Q=s(b,V),R=Q?b.node(Q).order:j;(Q||V===D)&&(e.forEach(M.slice(P,F+1),function(X){e.forEach(b.predecessors(X),function(H){var te=b.node(H),U=te.order;(U<T||R<U)&&!(te.dummy&&b.node(X).dummy)&&u(S,H,X)})}),P=F+1,T=R)}),M}return e.reduce(C,E),S}function a(b,C){var S={};function E(M,T,P,j,D){var V;e.forEach(e.range(T,P),function(F){V=M[F],b.node(V).dummy&&e.forEach(b.predecessors(V),function(Q){var R=b.node(Q);R.dummy&&(R.order<j||R.order>D)&&u(S,Q,V)})})}function I(M,T){var P=-1,j,D=0;return e.forEach(T,function(V,F){if(b.node(V).dummy==="border"){var Q=b.predecessors(V);Q.length&&(j=b.node(Q[0]).order,E(T,D,F,P,j),D=F,P=j)}E(T,D,T.length,j,M.length)}),T}return e.reduce(C,I),S}function s(b,C){if(b.node(C).dummy)return e.find(b.predecessors(C),function(S){return b.node(S).dummy})}function u(b,C,S){if(C>S){var E=C;C=S,S=E}var I=b[C];I||(b[C]=I={}),I[S]=!0}function l(b,C,S){if(C>S){var E=C;C=S,S=E}return e.has(b[C],S)}function d(b,C,S,E){var I={},M={},T={};return e.forEach(C,function(P){e.forEach(P,function(j,D){I[j]=j,M[j]=j,T[j]=D})}),e.forEach(C,function(P){var j=-1;e.forEach(P,function(D){var V=E(D);if(V.length){V=e.sortBy(V,function(H){return T[H]});for(var F=(V.length-1)/2,Q=Math.floor(F),R=Math.ceil(F);Q<=R;++Q){var X=V[Q];M[D]===D&&j<T[X]&&!l(S,D,X)&&(M[X]=D,M[D]=I[D]=I[X],j=T[X])}}})}),{root:I,align:M}}function p(b,C,S,E,I){var M={},T=m(b,C,S,I),P=I?"borderLeft":"borderRight";function j(F,Q){for(var R=T.nodes(),X=R.pop(),H={};X;)H[X]?F(X):(H[X]=!0,R.push(X),R=R.concat(Q(X))),X=R.pop()}function D(F){M[F]=T.inEdges(F).reduce(function(Q,R){return Math.max(Q,M[R.v]+T.edge(R))},0)}function V(F){var Q=T.outEdges(F).reduce(function(X,H){return Math.min(X,M[H.w]-T.edge(H))},Number.POSITIVE_INFINITY),R=b.node(F);Q!==Number.POSITIVE_INFINITY&&R.borderType!==P&&(M[F]=Math.max(M[F],Q))}return j(D,T.predecessors.bind(T)),j(V,T.successors.bind(T)),e.forEach(E,function(F){M[F]=M[S[F]]}),M}function m(b,C,S,E){var I=new t,M=b.graph(),T=q(M.nodesep,M.edgesep,E);return e.forEach(C,function(P){var j;e.forEach(P,function(D){var V=S[D];if(I.setNode(V),j){var F=S[j],Q=I.edge(F,V);I.setEdge(F,V,Math.max(T(b,D,j),Q||0))}j=D})}),I}function f(b,C){return e.minBy(e.values(C),function(S){var E=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(S,function(M,T){var P=w(b,T)/2;E=Math.max(M+P,E),I=Math.min(M-P,I)}),E-I})}function h(b,C){var S=e.values(C),E=e.min(S),I=e.max(S);e.forEach(["u","d"],function(M){e.forEach(["l","r"],function(T){var P=M+T,j=b[P],D;if(j!==C){var V=e.values(j);D=T==="l"?E-e.min(V):I-e.max(V),D&&(b[P]=e.mapValues(j,function(F){return F+D}))}})})}function g(b,C){return e.mapValues(b.ul,function(S,E){if(C)return b[C.toLowerCase()][E];var I=e.sortBy(e.map(b,E));return(I[1]+I[2])/2})}function x(b){var C=n.buildLayerMatrix(b),S=e.merge(i(b,C),a(b,C)),E={},I;e.forEach(["u","d"],function(T){I=T==="u"?C:e.values(C).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(I=e.map(I,function(F){return e.values(F).reverse()}));var j=(T==="u"?b.predecessors:b.successors).bind(b),D=d(b,I,S,j),V=p(b,I,D.root,D.align,P==="r");P==="r"&&(V=e.mapValues(V,function(F){return-F})),E[T+P]=V})});var M=f(b,E);return h(E,M),g(E,b.graph().align)}function q(b,C,S){return function(E,I,M){var T=E.node(I),P=E.node(M),j=0,D;if(j+=T.width/2,e.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":D=-T.width/2;break;case"r":D=T.width/2;break}if(D&&(j+=S?D:-D),D=0,j+=(T.dummy?C:b)/2,j+=(P.dummy?C:b)/2,j+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":D=P.width/2;break;case"r":D=-P.width/2;break}return D&&(j+=S?D:-D),D=0,j}}function w(b,C){return b.node(C).width}return n0}var i0,lk;function CL(){if(lk)return i0;lk=1;var e=bt(),t=jr(),n=SL().positionX;i0=i;function i(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,l){s.node(l).x=u})}function a(s){var u=t.buildLayerMatrix(s),l=s.graph().ranksep,d=0;e.forEach(u,function(p){var m=e.max(e.map(p,function(f){return s.node(f).height}));e.forEach(p,function(f){s.node(f).y=d+m/2}),d+=m+l})}return i0}var o0,ck;function kL(){if(ck)return o0;ck=1;var e=bt(),t=sL(),n=uL(),i=cL(),a=jr().normalizeRanks,s=dL(),u=jr().removeEmptyRanks,l=pL(),d=fL(),p=_L(),m=qL(),f=CL(),h=jr(),g=Pn().Graph;o0=x;function x(W,ee){var oe=ee&&ee.debugTiming?h.time:h.notime;oe("layout",function(){var ue=oe("  buildLayoutGraph",function(){return j(W)});oe("  runLayout",function(){q(ue,oe)}),oe("  updateInputGraph",function(){w(W,ue)})})}function q(W,ee){ee("    makeSpaceForEdgeLabels",function(){D(W)}),ee("    removeSelfEdges",function(){K(W)}),ee("    acyclic",function(){t.run(W)}),ee("    nestingGraph.run",function(){l.run(W)}),ee("    rank",function(){i(h.asNonCompoundGraph(W))}),ee("    injectEdgeLabelProxies",function(){V(W)}),ee("    removeEmptyRanks",function(){u(W)}),ee("    nestingGraph.cleanup",function(){l.cleanup(W)}),ee("    normalizeRanks",function(){a(W)}),ee("    assignRankMinMax",function(){F(W)}),ee("    removeEdgeLabelProxies",function(){Q(W)}),ee("    normalize.run",function(){n.run(W)}),ee("    parentDummyChains",function(){s(W)}),ee("    addBorderSegments",function(){d(W)}),ee("    order",function(){m(W)}),ee("    insertSelfEdges",function(){ie(W)}),ee("    adjustCoordinateSystem",function(){p.adjust(W)}),ee("    position",function(){f(W)}),ee("    positionSelfEdges",function(){z(W)}),ee("    removeBorderNodes",function(){U(W)}),ee("    normalize.undo",function(){n.undo(W)}),ee("    fixupEdgeLabelCoords",function(){H(W)}),ee("    undoCoordinateSystem",function(){p.undo(W)}),ee("    translateGraph",function(){R(W)}),ee("    assignNodeIntersects",function(){X(W)}),ee("    reversePoints",function(){te(W)}),ee("    acyclic.undo",function(){t.undo(W)})}function w(W,ee){e.forEach(W.nodes(),function(oe){var ue=W.node(oe),se=ee.node(oe);ue&&(ue.x=se.x,ue.y=se.y,ee.children(oe).length&&(ue.width=se.width,ue.height=se.height))}),e.forEach(W.edges(),function(oe){var ue=W.edge(oe),se=ee.edge(oe);ue.points=se.points,e.has(se,"x")&&(ue.x=se.x,ue.y=se.y)}),W.graph().width=ee.graph().width,W.graph().height=ee.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],E=["width","height"],I={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function j(W){var ee=new g({multigraph:!0,compound:!0}),oe=_e(W.graph());return ee.setGraph(e.merge({},C,Z(oe,b),e.pick(oe,S))),e.forEach(W.nodes(),function(ue){var se=_e(W.node(ue));ee.setNode(ue,e.defaults(Z(se,E),I)),ee.setParent(ue,W.parent(ue))}),e.forEach(W.edges(),function(ue){var se=_e(W.edge(ue));ee.setEdge(ue,e.merge({},T,Z(se,M),e.pick(se,P)))}),ee}function D(W){var ee=W.graph();ee.ranksep/=2,e.forEach(W.edges(),function(oe){var ue=W.edge(oe);ue.minlen*=2,ue.labelpos.toLowerCase()!=="c"&&(ee.rankdir==="TB"||ee.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})}function V(W){e.forEach(W.edges(),function(ee){var oe=W.edge(ee);if(oe.width&&oe.height){var ue=W.node(ee.v),se=W.node(ee.w),ge={rank:(se.rank-ue.rank)/2+ue.rank,e:ee};h.addDummyNode(W,"edge-proxy",ge,"_ep")}})}function F(W){var ee=0;e.forEach(W.nodes(),function(oe){var ue=W.node(oe);ue.borderTop&&(ue.minRank=W.node(ue.borderTop).rank,ue.maxRank=W.node(ue.borderBottom).rank,ee=e.max(ee,ue.maxRank))}),W.graph().maxRank=ee}function Q(W){e.forEach(W.nodes(),function(ee){var oe=W.node(ee);oe.dummy==="edge-proxy"&&(W.edge(oe.e).labelRank=oe.rank,W.removeNode(ee))})}function R(W){var ee=Number.POSITIVE_INFINITY,oe=0,ue=Number.POSITIVE_INFINITY,se=0,ge=W.graph(),Ee=ge.marginx||0,Re=ge.marginy||0;function Ie(Ne){var Pe=Ne.x,Oe=Ne.y,We=Ne.width,Be=Ne.height;ee=Math.min(ee,Pe-We/2),oe=Math.max(oe,Pe+We/2),ue=Math.min(ue,Oe-Be/2),se=Math.max(se,Oe+Be/2)}e.forEach(W.nodes(),function(Ne){Ie(W.node(Ne))}),e.forEach(W.edges(),function(Ne){var Pe=W.edge(Ne);e.has(Pe,"x")&&Ie(Pe)}),ee-=Ee,ue-=Re,e.forEach(W.nodes(),function(Ne){var Pe=W.node(Ne);Pe.x-=ee,Pe.y-=ue}),e.forEach(W.edges(),function(Ne){var Pe=W.edge(Ne);e.forEach(Pe.points,function(Oe){Oe.x-=ee,Oe.y-=ue}),e.has(Pe,"x")&&(Pe.x-=ee),e.has(Pe,"y")&&(Pe.y-=ue)}),ge.width=oe-ee+Ee,ge.height=se-ue+Re}function X(W){e.forEach(W.edges(),function(ee){var oe=W.edge(ee),ue=W.node(ee.v),se=W.node(ee.w),ge,Ee;oe.points?(ge=oe.points[0],Ee=oe.points[oe.points.length-1]):(oe.points=[],ge=se,Ee=ue),oe.points.unshift(h.intersectRect(ue,ge)),oe.points.push(h.intersectRect(se,Ee))})}function H(W){e.forEach(W.edges(),function(ee){var oe=W.edge(ee);if(e.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function te(W){e.forEach(W.edges(),function(ee){var oe=W.edge(ee);oe.reversed&&oe.points.reverse()})}function U(W){e.forEach(W.nodes(),function(ee){if(W.children(ee).length){var oe=W.node(ee),ue=W.node(oe.borderTop),se=W.node(oe.borderBottom),ge=W.node(e.last(oe.borderLeft)),Ee=W.node(e.last(oe.borderRight));oe.width=Math.abs(Ee.x-ge.x),oe.height=Math.abs(se.y-ue.y),oe.x=ge.x+oe.width/2,oe.y=ue.y+oe.height/2}}),e.forEach(W.nodes(),function(ee){W.node(ee).dummy==="border"&&W.removeNode(ee)})}function K(W){e.forEach(W.edges(),function(ee){if(ee.v===ee.w){var oe=W.node(ee.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:ee,label:W.edge(ee)}),W.removeEdge(ee)}})}function ie(W){var ee=h.buildLayerMatrix(W);e.forEach(ee,function(oe){var ue=0;e.forEach(oe,function(se,ge){var Ee=W.node(se);Ee.order=ge+ue,e.forEach(Ee.selfEdges,function(Re){h.addDummyNode(W,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ee.rank,order:ge+ ++ue,e:Re.e,label:Re.label},"_se")}),delete Ee.selfEdges})})}function z(W){e.forEach(W.nodes(),function(ee){var oe=W.node(ee);if(oe.dummy==="selfedge"){var ue=W.node(oe.e.v),se=ue.x+ue.width/2,ge=ue.y,Ee=oe.x-se,Re=ue.height/2;W.setEdge(oe.e,oe.label),W.removeNode(ee),oe.label.points=[{x:se+2*Ee/3,y:ge-Re},{x:se+5*Ee/6,y:ge-Re},{x:se+Ee,y:ge},{x:se+5*Ee/6,y:ge+Re},{x:se+2*Ee/3,y:ge+Re}],oe.label.x=oe.x,oe.label.y=oe.y}})}function Z(W,ee){return e.mapValues(e.pick(W,ee),Number)}function _e(W){var ee={};return e.forEach(W,function(oe,ue){ee[ue.toLowerCase()]=oe}),ee}return o0}var a0,dk;function ML(){if(dk)return a0;dk=1;var e=bt(),t=jr(),n=Pn().Graph;a0={debugOrdering:i};function i(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(l){u.setNode(l,{label:l}),u.setParent(l,"layer"+a.node(l).rank)}),e.forEach(a.edges(),function(l){u.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,d){var p="layer"+d;u.setNode(p,{rank:"same"}),e.reduce(l,function(m,f){return u.setEdge(m,f,{style:"invis"}),f})}),u}return a0}var s0,pk;function EL(){return pk||(pk=1,s0="0.8.5"),s0}var u0,fk;function IL(){return fk||(fk=1,u0={graphlib:Pn(),layout:kL(),debug:ML(),util:{time:jr().time,notime:jr().notime},version:EL()}),u0}var NL=IL();const _k=Ta(NL),TL=44,PL=8,mk=120,jL=380,RL=e=>{var d,p,m;const t=(d=e.data)==null?void 0:d.recipe;if(!t)return mk+100;const n=((p=t.inputs)==null?void 0:p.length)||0,i=((m=t.outputs)==null?void 0:m.length)||0,a=Math.max(n,i,1),u=a*TL+(a-1)*PL+24;return mk+u+12},OL=(e,t)=>{if(!e||e.length===0)return e;const n=new _k.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=jL,u=RL(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),_k.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},VL={custom:tO},FL={custom:iO},El=e=>typeof e=="number"?e.toFixed(4):"0",Il=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:i,styleType:a})=>{const[s,u]=A.useState(""),[l,d]=A.useState(!1),p=l?s:El(n),m=()=>{if(!l)return;const q=parseFloat(s);isNaN(q)||i(q),d(!1),u("")},f=a==="input",h=f?"var(--input-bg)":"var(--output-bg)",g=f?"var(--input-border)":"var(--output-border)",x=f?"var(--input-text)":"var(--output-text)";return _.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${g}`,borderRadius:"var(--radius-sm)"},children:[_.jsx("div",{style:{color:x,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",El(t),"/s"]}),_.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[f?"Current Deficiency:":"Current Excess:"," ",El(Math.abs(n)),"/s"]}),_.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:f?"Target Additional Demand:":"Target Excess:"}),_.jsx("input",{type:"text",value:p,onFocus:()=>{d(!0),u(El(n))},onChange:q=>u(q.target.value),onBlur:m,onKeyPress:q=>q.key==="Enter"&&m(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),_.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},hk=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function AL(){const[e,t,n]=S6([]),[i,a,s]=C6([]),[u,l]=A.useState(0),[d,p]=A.useState(!1),[m,f]=A.useState(!1),[h,g]=A.useState(null),[x,q]=A.useState(null),[w,b]=A.useState("product"),[C,S]=A.useState("button"),[E,I]=A.useState(""),[M,T]=A.useState("name_asc"),[P,j]=A.useState("all"),[D,V]=A.useState("all"),[F,Q]=A.useState("all"),[R,X]=A.useState(null),[H,te]=A.useState([]),[U,K]=A.useState(!1),[ie,z]=A.useState(!1),[Z,_e]=A.useState("targets"),[W,ee]=A.useState(0),[oe,ue]=A.useState(!1),[se,ge]=A.useState(null),[Ee,Re]=A.useState(""),[Ie,Ne]=A.useState(null),[Pe,Oe]=A.useState("free"),[We,Be]=A.useState(!1),[ut,st]=A.useState(!1),[Mt,qt]=A.useState(!1),[St,lt]=A.useState(!1),[Sr,Zt]=A.useState(!1),[$t,Jt]=A.useState(!1),[it,Rr]=A.useState(()=>{const N=Vl();return{edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}}),[Nt,Kr]=A.useState(!1),[pr,Ht]=A.useState(!1),[Qe,wi]=A.useState(!1),[Tt,ln]=A.useState("pan"),[me,ot]=A.useState(0),[Or,Vr]=A.useState(!1),[fr,Xn]=A.useState(!0),[On,Rt]=A.useState(1),[er,tr]=A.useState({}),[dt,Do]=A.useState("perSecond"),[yt,Zi]=A.useState("total"),[Wt,Yr]=A.useState([]),[At,Ut]=A.useState(null),[Gt,rr]=A.useState(null),[_r,mr]=A.useState(null),[hr,Et]=A.useState(null),[cn,yr]=A.useState(null),[Ji,eo]=A.useState({}),[ar,bi]=A.useState(null),[qi,to]=A.useState({}),[Zn,pt]=A.useState("all"),[Jn,dn]=A.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[ei,pn]=A.useState([]),[ft,Qr]=A.useState(null),[Vn,Kt]=A.useState(null),[Bo,gr]=A.useState({x:0,y:0}),ti=A.useRef(null),fn=A.useRef(null),Da=A.useRef(null),Si=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",Cr=A.useRef(null),_n=A.useRef([]),zo=A.useCallback(N=>{const B=N.filter(Y=>Y.type!=="remove"),$=B.filter(Y=>Y.type==="position"),L=B.filter(Y=>Y.type!=="position");$.length>0&&n($),L.length>0&&(_n.current.push(...L),Cr.current&&clearTimeout(Cr.current),Cr.current=setTimeout(()=>{_n.current.length>0&&(n(_n.current),_n.current=[])},50))},[n]),Ba=A.useCallback(N=>{s(N)},[s]);A.useEffect(()=>{const N=Vl();tc(N),Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}),yO($r,Cn,Mn);const B=()=>{const $="ontouchstart"in window||navigator.maxTouchPoints>0,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);wi($&&L)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const nr=A.useCallback(()=>({onInputClick:Go,onOutputClick:du,isMobile:Qe,mobileActionMode:Tt,onDrillSettingsChange:uo,onLogicAssemblerSettingsChange:lo,onTreeFarmSettingsChange:Mi,onIndustrialFireboxSettingsChange:Ko,onTemperatureSettingsChange:Vc,onBoilerSettingsChange:Fc,onChemicalPlantSettingsChange:Yo,onWasteFacilitySettingsChange:Wa,onLiquidDumpSettingsChange:pu,onLiquidBurnerSettingsChange:Fn,onMiddleClick:po,onHandleDoubleClick:Ha,onMachineCountModeChange:_u}),[Qe,Tt]);A.useEffect(()=>{const N=t3();if(!(N!=null&&N.nodes))return;const B=nr(),$=N.nodes.map(L=>{var ce,de,ve,be;const Y=ht((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:dt,machineDisplayMode:yt,...B,globalPollution:me,flows:null,suggestions:[]}}});t($),a(N.edges||[]),te(N.targetProducts||[]),tr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),rr(N.lastAssemblerConfig||null),mr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),yr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),ee(N.targetIdCounter||0)},[]),A.useEffect(()=>{t(N=>{let B=!1;const $=N.map(L=>L.data.displayMode===dt&&L.data.machineDisplayMode===yt&&L.data.zoomLevel===On?L:(B=!0,{...L,data:{...L.data,displayMode:dt,machineDisplayMode:yt,zoomLevel:On}}));return B?$:N})},[dt,yt,On,t]),A.useEffect(()=>{a(N=>{let B=!1;const $=N.map(L=>{var Y,re;return((Y=L.data)==null?void 0:Y.edgePath)===it.edgePath&&((re=L.data)==null?void 0:re.edgeStyle)===it.edgeStyle?L:(B=!0,{...L,data:it})});return B?$:N})},[it,a]),A.useEffect(()=>{const N={nodes:e,edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn};localStorage.setItem("industrialist_canvas_state",JSON.stringify(N))},[e,i,H,u,W,er,Wt,At,Gt,_r,hr,cn]);const Ci=A.useCallback(()=>{var Y,re;let N=0,B=0,$=0;const L=e.length;for(let ce=0;ce<L;ce++){const de=e[ce],{recipe:ve,machine:be,machineCount:ke=0}=de.data||{};if(!ve)continue;const fe=typeof ve.pollution=="number"?ve.pollution:parseFloat(ve.pollution);!isNaN(fe)&&isFinite(fe)&&(B+=fe*ke);const ye=(((Y=ve.inputs)==null?void 0:Y.length)||0)+(((re=ve.outputs)==null?void 0:re.length)||0),xe=Math.ceil(ke);if((be==null?void 0:be.id)==="m_industrial_firebox"){$+=xe*(1+ye*2);continue}if((be==null?void 0:be.id)==="m_tree_farm"&&ve.treeFarmSettings){const{trees:Te,harvesters:Ye,sprinklers:Xe,controller:et,outputs:rt}=ve.treeFarmSettings,Dt=typeof ve.power_consumption=="number"?ve.power_consumption:0;N+=Dt*ke;const xr=Math.ceil(Xe/3),Pt=ve.power_type==="HV"?2:Math.ceil(Dt/15e5)*2,Ei=Te+Ye+Xe+xr*3+et+rt*3+Pt;$+=xe*Ei;continue}const he=ve.power_consumption;let Ce=0;typeof he=="number"?(Ce=he,N+=he*ke):typeof he=="object"&&he!==null&&"max"in he&&(Ce=he.max,N+=Ce*ke);const je=ve.power_type==="HV"?2:Math.ceil(Ce/15e5)*2;$+=xe*(1+je+ye*2)}return{totalPower:N,totalPollution:B,totalModelCount:$}},[e]),Fr=A.useMemo(()=>Ci(),[e]);A.useEffect(()=>{if(fr||Fr.totalPollution===0)return;const N=setInterval(()=>{if(Or)return;const B=Fr.totalPollution/3600;ot($=>{if(typeof $!="number"||isNaN($)||!isFinite($))return $;const L=parseFloat(($+B).toFixed(4));return L!==$?L:$})},1e3);return()=>clearInterval(N)},[Fr.totalPollution,Or,fr]),A.useEffect(()=>{const N=setInterval(Sn,2e4);return()=>clearInterval(N)},[]);const Xr=A.useRef(null),no=A.useRef(me);A.useEffect(()=>{if(!(Math.abs(me-no.current)<.01))return no.current=me,Xr.current&&clearTimeout(Xr.current),Xr.current=setTimeout(()=>{t(N=>{let B=!1;const $=N.map(L=>{const{recipe:Y,machine:re,globalPollution:ce}=L.data||{};if(Y!=null&&Y.isTreeFarm&&Y.treeFarmSettings){const{trees:de,harvesters:ve,sprinklers:be,outputs:ke,controller:fe}=Y.treeFarmSettings,ye=fg(de,ve,me),xe=Zl(de,ve,be,ke,fe,me);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ye,power_consumption:xe?xe.avgPowerConsumption:"Variable"},globalPollution:me}}}if((re==null?void 0:re.id)==="m_air_separation_unit"){const de=hk(me),ve=Y.outputs.map(be=>be.product_id==="p_residue"?{...be,quantity:parseFloat(de.toFixed(6))}:be);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ve},globalPollution:me}}}return ce!==me?(B=!0,{...L,data:{...L.data,globalPollution:me}}):L});return B?$:N})},250),()=>clearTimeout(Xr.current)},[me,t]);const[He,at]=A.useState(()=>mw([],[],{skipTemperature:!0})),io=A.useRef(null),za=A.useRef(""),oo=A.useRef(!1),$o=A.useRef(null),ze=A.useCallback((N="general")=>{$o.current=N,oo.current=!0},[]);A.useEffect(()=>{if(oo.current)return io.current&&clearTimeout(io.current),io.current=setTimeout(()=>{const N=`${e.length}-${i.length}-${e.map(B=>{var $,L,Y,re,ce,de,ve,be,ke,fe,ye,xe,he;return`${B.id}:${($=B.data)==null?void 0:$.machineCount}:${JSON.stringify(((Y=(L=B.data)==null?void 0:L.recipe)==null?void 0:Y.temperatureSettings)||{})}:${JSON.stringify(((ce=(re=B.data)==null?void 0:re.recipe)==null?void 0:ce.drillSettings)||{})}:${JSON.stringify(((ve=(de=B.data)==null?void 0:de.recipe)==null?void 0:ve.assemblerSettings)||{})}:${JSON.stringify(((ke=(be=B.data)==null?void 0:be.recipe)==null?void 0:ke.treeFarmSettings)||{})}:${JSON.stringify(((ye=(fe=B.data)==null?void 0:fe.recipe)==null?void 0:ye.fireboxSettings)||{})}:${JSON.stringify(((he=(xe=B.data)==null?void 0:xe.recipe)==null?void 0:he.chemicalPlantSettings)||{})}`}).join(",")}`;if(N!==za.current){const B=$o.current||"general",$=["connection","node","temperatureSettings","boilerSettings"].includes(B);console.log(`[Recalculation] Reason: ${B}, Temperature propagation: ${$}`);const L=mw(e,i,{skipTemperature:!$,previousTemperatureData:$?null:He==null?void 0:He.temperatureData});at(L),za.current=N}oo.current=!1,$o.current=null},100),()=>clearTimeout(io.current)},[e,i,He]);const $a=A.useMemo(()=>BO(He),[He]),Ho=A.useMemo(()=>zO(He),[He]),ri=A.useRef(null),mn=A.useRef(null),hn=A.useCallback((N,B,$)=>{var de,ve,be,ke,fe,ye;const L=(de=N.data)==null?void 0:de.recipe,Y=B.byNode[N.id];if(N.data.flows===Y&&N.data.suggestions===$)return N;const re=N.data.flows!==Y,ce=N.data.suggestions!==$&&(((ve=N.data.suggestions)==null?void 0:ve.length)!==($==null?void 0:$.length)||JSON.stringify(N.data.suggestions)!==JSON.stringify($||[]));if(L!=null&&L.isWasteFacility){const xe=Math.min(((be=Y==null?void 0:Y.inputFlows[0])==null?void 0:be.connected)||0,240),he=Math.min(((ke=Y==null?void 0:Y.inputFlows[1])==null?void 0:ke.connected)||0,240),Ce=L.wasteFacilitySettings||{};if(!re&&!ce&&Ce.itemFlowRate===xe&&Ce.fluidFlowRate===he)return N;const je=Ol(xe,he),Te=ec(xe,he,L.inputs[0].product_id,L.inputs[1].product_id);return{...N,data:{...N.data,recipe:{...L,inputs:Te,cycle_time:je.cycleTime,wasteFacilitySettings:{...Ce,itemFlowRate:xe,fluidFlowRate:he}},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidDump){const xe=((fe=N.data)==null?void 0:fe.machineCount)||1,he=L.inputs.map((je,Te)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[Te])==null?void 0:Xe.connected)||0,15*xe)/xe}),Ce=Ts(L.inputs,he);return!re&&!ce&&L.pollution===Ce?N:{...N,data:{...N.data,recipe:{...L,pollution:Ce},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidBurner){const xe=((ye=N.data)==null?void 0:ye.machineCount)||1,he=L.inputs.map((je,Te)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[Te])==null?void 0:Xe.connected)||0,15*xe)/xe}),Ce=Ps(L.inputs,he);return!re&&!ce&&L.pollution===Ce?N:{...N,data:{...N.data,recipe:{...L,pollution:Ce},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}return!re&&!ce?N:{...N,data:{...N.data,flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}},[]);A.useEffect(()=>{var N;if((N=He==null?void 0:He.flows)!=null&&N.byNode&&mn.current!==He.flows)return mn.current=He.flows,ri.current&&clearTimeout(ri.current),ri.current=setTimeout(()=>{t(B=>{let $=B;He.temperatureData&&($=M0(B,He.temperatureData,He.graph));let L=!1;const Y=$.map(re=>{const ce=hn(re,He.flows,He.suggestions);return ce!==re&&(L=!0),ce});return L?Y:B})},250),()=>clearTimeout(ri.current)},[He,t,hn]);const Ar=A.useMemo(()=>$a.map(N=>{const B=H.some($=>{var Y,re,ce;const L=e.find(de=>de.id===$.recipeBoxId);return(ce=(re=(Y=L==null?void 0:L.data)==null?void 0:Y.recipe)==null?void 0:re.outputs)==null?void 0:ce.some(de=>de.product_id===N.productId)});return{...N,isSold:er[N.productId]??(B&&typeof N.product.price=="number"&&N.product.price>1)}}),[$a,er,H,e]),ki=A.useMemo(()=>Ar.reduce((N,B)=>B.isSold&&typeof B.product.price=="number"?N+B.product.price*B.excessRate:N,0),[Ar]),ao=A.useMemo(()=>{const N=new Map,B=new Map,$=(Y,re,ce)=>{N.set(Y,(N.get(Y)||0)+re),B.has(Y)||B.set(Y,ce)};e.forEach(Y=>{var ve,be,ke,fe,ye,xe;const{machine:re,machineCount:ce=0,recipe:de}=Y.data||{};if(re){if(re.id==="m_tree_farm"&&(de!=null&&de.treeFarmSettings)){const{trees:he,harvesters:Ce,sprinklers:je,outputs:Te,controller:Ye}=de.treeFarmSettings,Xe=Math.ceil(je/3);$("m_tree",Math.ceil(he*ce),((ve=ht("m_tree"))==null?void 0:ve.cost)||0),$("m_tree_harvester",Math.ceil(Ce*ce),((be=ht("m_tree_harvester"))==null?void 0:be.cost)||0),$("m_tree_farm_sprinkler",Math.ceil(je*ce),((ke=ht("m_tree_farm_sprinkler"))==null?void 0:ke.cost)||0),$("m_tree_farm_water_tank",Math.ceil(Xe*ce),((fe=ht("m_tree_farm_water_tank"))==null?void 0:fe.cost)||0),$("m_tree_farm_output",Math.ceil(Te*ce),((ye=ht("m_tree_farm_output"))==null?void 0:ye.cost)||0),$("m_tree_farm_controller",Math.ceil(Ye*ce),((xe=ht("m_tree_farm_controller"))==null?void 0:xe.cost)||0);return}$(re.id,Math.ceil(ce),typeof re.cost=="number"?re.cost:0)}});const L=Array.from(N.entries()).map(([Y,re])=>{const ce=Cn.find(ve=>ve.id===Y),de=B.get(Y);return{machineId:Y,machine:ce,count:re,cost:de,totalCost:re*de}}).sort((Y,re)=>Y.machine.name.localeCompare(re.machine.name));return{stats:L,totalCost:L.reduce((Y,re)=>Y+re.totalCost,0)}},[e,Cn]),Lt=(N,B)=>t($=>$.map(L=>L.id===N?{...L,data:B(L.data)}:L)),Wo=A.useCallback((N,B,$,L)=>{const Y=Object.keys(Ws).map(de=>parseInt(de));let re=null,ce=0;return Y.forEach(de=>{const be=Ws[de].find(ke=>ke.product_id===N);if(be){const ke=Oo(B,$,L,de);if(ke){const fe=L?1.1:1,ye=be.quantity*fe*ke.dutyCycle;ye>ce&&(ce=ye,re=de)}}}),re},[]),lu=A.useCallback((N,B,$)=>{const L={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:_r,fireboxConfig:hr},Y=(He==null?void 0:He.flows)||null;return $O(N,B,$,Wo,L,me,Y)},[At,Gt,_r,hr,Wo,me,He]),so=A.useCallback(N=>{const B=e.find(re=>re.id===N.source),$=e.find(re=>re.id===N.target);if(!B||!$)return;const L=B.data.recipe.outputs[parseInt(N.sourceHandle.split("-")[1])],Y=$.data.recipe.inputs[parseInt(N.targetHandle.split("-")[1])];if(!(!L||!Y)){if(Y.isAnyProduct){const re=vt(L.product_id);if(Y.acceptedType&&(re==null?void 0:re.type)!==Y.acceptedType)return;t(ce=>ce.map(de=>{var ke;if(de.id!==$.id)return de;const ve=parseInt(N.targetHandle.split("-")[1]),be=[...de.data.recipe.inputs];if(be[ve]={...be[ve],product_id:L.product_id,isAnyProduct:!1},de.data.recipe.isWasteFacility){const fe=de.data.recipe.wasteFacilitySettings||{},ye=(ke=He==null?void 0:He.flows)==null?void 0:ke.byNode[N.source],xe=parseInt(N.sourceHandle.split("-")[1]),he=ye!=null&&ye.outputFlows[xe]?ye.outputFlows[xe].produced-ye.outputFlows[xe].connected:0,Ce=Math.min(he,240);ve===0?fe.itemFlowRate=Ce:ve===1&&(fe.fluidFlowRate=Ce);const je=Ol(fe.itemFlowRate||0,fe.fluidFlowRate||0),Te=ec(fe.itemFlowRate||0,fe.fluidFlowRate||0,ve===0?L.product_id:be[0].product_id,ve===1?L.product_id:be[1].product_id);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:Te,cycle_time:je.cycleTime,wasteFacilitySettings:fe}}}}if(de.data.recipe.isLiquidDump||de.data.recipe.isLiquidBurner){const fe=de.data.recipe.isLiquidDump?Ts(be):Ps(be);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be,pollution:fe}}}}return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be}}}}))}else if(L.product_id!==Y.product_id)return;a(re=>g0({...N,type:"custom",animated:!1,data:it},re)),Sn(),ze("connection")}},[a,e,it,ze,t,He]),Uo=()=>{p(!1),g(null),q(null),b("product"),I(""),T("name_asc"),j("all"),V("all"),X(null),S("button"),eo({}),Q("all")},cu=A.useCallback(()=>{p(!0),X(null),S("button")},[]),Go=A.useCallback((N,B,$,L)=>{if(L!=null&&L.ctrlKey){a(re=>re.filter(ce=>!(ce.target===B&&ce.targetHandle===`left-${$}`))),Sn(),ze("connection");return}const Y=vt(N);Y&&(p(!0),g(Y),X({nodeId:B,inputIndex:$,productId:N}),S("rectangle"),V("producers"))},[a,Qe,Tt,ze]),du=A.useCallback((N,B,$,L)=>{var ve,be;if(L!=null&&L.ctrlKey){a(ke=>ke.filter(fe=>!(fe.source===B&&fe.sourceHandle===`right-${$}`))),Sn(),ze("connection");return}const Y=An.current.find(ke=>ke.id===B),re=(be=(ve=Y==null?void 0:Y.data)==null?void 0:ve.recipe)==null?void 0:be.machine_id,ce=re&&dr[re],de=vt(N);de&&(p(!0),g(de),X({nodeId:B,outputIndex:$,productId:N,isOutput:!0,isFromHeatSource:!!ce}),S("rectangle"),V("consumers"))},[a,Qe,Tt,ze]),Zr=A.useCallback((N,B,$)=>{a(L=>{const Y=L.filter(re=>{var ce,de,ve,be;if(re.source===N){const ke=parseInt(re.sourceHandle.split("-")[1]);if(ke>=$.length)return!1;const fe=$[ke],ye=e.find(Ce=>Ce.id===re.target);if(!ye)return!1;const xe=parseInt(re.targetHandle.split("-")[1]),he=(de=(ce=ye.data)==null?void 0:ce.recipe)==null?void 0:de.inputs[xe];if(!he||he.product_id!==fe.product_id)return!1}if(re.target===N){const ke=parseInt(re.targetHandle.split("-")[1]);if(ke>=B.length)return!1;const fe=B[ke],ye=e.find(Ce=>Ce.id===re.source);if(!ye)return!1;const xe=parseInt(re.sourceHandle.split("-")[1]),he=(be=(ve=ye.data)==null?void 0:ve.recipe)==null?void 0:be.outputs[xe];if(!he||he.product_id!==fe.product_id)return!1}return!0});return Y.length!==L.length&&(Sn(),ze("connection")),Y})},[a,e,ze]),uo=A.useCallback((N,B,$,L)=>{Ut({drillHead:B.drillHead,consumable:B.consumable,machineOil:B.machineOil});const Y=B.drillHead&&B.depth?Oo(B.drillHead,B.consumable,B.machineOil,B.depth):null;Lt(N,re=>({...re,recipe:{...re.recipe,inputs:$.length>0?$:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:B,cycle_time:1,power_consumption:Y?{max:Y.drillingPower*1e6,average:(Y.drillingPower*Y.lifeTime+Y.idlePower*(Y.replacementTime+Y.travelTime))/Y.totalCycleTime*1e6}:"Variable",pollution:Y?Y.pollution:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,$,L),ze("settings")},[Zr,ze]),lo=A.useCallback((N,B,$,L)=>{rr({outerStage:B.outerStage,innerStage:B.innerStage,machineOil:B.machineOil,tickCircuitDelay:B.tickCircuitDelay});const re=!B.outerStage||!B.innerStage?"":B.outerStage===1?`p_${B.innerStage}x_microchip`:`p_${B.outerStage}x${B.innerStage}x_microchip`,ce=re?ru(re,B.machineOil,B.tickCircuitDelay):null;Lt(N,de=>({...de,recipe:{...de.recipe,inputs:$.length>0?$:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:B,cycle_time:ce?ce.cycleTime:"Variable",power_consumption:ce?{max:ce.maxPowerConsumption,average:ce.avgPowerConsumption}:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,$,L),ze("settings")},[Zr,ze]),Mi=A.useCallback((N,B,$,L)=>{mr({trees:B.trees,harvesters:B.harvesters,sprinklers:B.sprinklers,outputs:B.outputs});const Y=Zl(B.trees,B.harvesters,B.sprinklers,B.outputs,B.controller,me);Lt(N,re=>({...re,recipe:{...re.recipe,inputs:$.length>0?$:[{product_id:"p_water",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:B,cycle_time:1,power_consumption:Y?Y.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),a(re=>re.filter(ce=>{if(ce.source===N||ce.target===N){const de=parseInt((ce.source===N?ce.sourceHandle:ce.targetHandle).split("-")[1]);return ce.source===N?de<L.length:de<$.length}return!0})),ze("settings")},[a,me,ze]),Ko=A.useCallback((N,B,$,L)=>{Et({fuel:B.fuel}),Lt(N,Y=>({...Y,recipe:{...Y.recipe,inputs:$,fireboxSettings:B,cycle_time:L?L.cycleTime:Y.recipe.cycle_time,power_consumption:0}})),ze("settings")},[ze]),Vc=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=ht(re.data.recipe.machine_id),de=Ur(ce==null?void 0:ce.id);let ve=re.data.recipe.power_type;(ce==null?void 0:ce.id)==="m_electric_water_heater"&&(ve=B.temperature>=320?"HV":"MV");let be={...re.data.recipe,outputs:$,temperatureSettings:B,power_consumption:L??re.data.recipe.power_consumption,power_type:ve};if((ce==null?void 0:ce.id)==="m_water_treatment_plant"&&de){const ke=B.temperature||In,fe=Wn(ce.id,ke,1),ye=90*fe,xe=17.6,he=17.6;be={...be,inputs:be.inputs.map(Ce=>Ce.product_id==="p_water"?{...Ce,quantity:xe*fe,originalQuantity:xe}:Ce.product_id==="p_distilled_water"?{...Ce,quantity:he*fe,originalQuantity:he}:Ce),outputs:be.outputs.map(Ce=>Ce.product_id==="p_steam"?{...Ce,quantity:ye,originalQuantity:90}:Ce)}}return{...re,data:{...re.data,recipe:be}}})),ze("temperatureSettings")},[t,ze]),Fc=A.useCallback((N,B)=>{t($=>$.map(L=>{if(L.id!==N)return L;const Y=ht(L.data.recipe.machine_id),re=dr[Y==null?void 0:Y.id];return!re||re.type!=="boiler"?L:{...L,data:{...L.data,recipe:{...L.data.recipe,temperatureSettings:B}}}})),ze("boilerSettings")},[t,ze]),Ha=A.useCallback((N,B,$,L,Y)=>{const re=B==="right"?"output":"input",ce=Y==null?void 0:Y.find(de=>de.nodeId===N&&de.handleType===re&&de.handleIndex===$);ce&&(t(de=>de.map(ve=>{var ye,xe;if(ve.id!==N)return ve;const be=((ye=ve.data)==null?void 0:ye.machineCountMode)||"free",ke=(xe=ve.data)==null?void 0:xe.cappedMachineCount;if(be==="locked")return console.log(`Node ${N} is locked - suggestion ignored`),ve;let fe=ce.suggestedMachineCount;return be==="capped"&&typeof ke=="number"&&fe>ke&&(console.log(`Node ${N} is capped at ${ke} - clamping suggestion from ${fe} to ${ke}`),fe=ke),{...ve,data:{...ve.data,machineCount:fe}}})),ze("machineCount"))},[t,ze]),Yo=A.useCallback((N,B)=>{t($=>$.map(L=>{if(L.id!==N)return L;const Y=ht(L.data.recipe.machine_id);if((Y==null?void 0:Y.id)!=="m_chemical_plant")return L;const re=Mn.find(de=>de.id===L.data.recipe.id);if(!re)return L;const ce=F3(re,B.speedFactor,B.efficiencyFactor);return{...L,data:{...L.data,recipe:ce}}})),ze("settings")},[t,ze]),Wa=A.useCallback((N,B,$,L)=>{yr({itemProductId:B.itemProductId,fluidProductId:B.fluidProductId}),t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=re.data.recipe.wasteFacilitySettings||{},de=ce.itemFlowRate||0,ve=ce.fluidFlowRate||0,be=Ol(de,ve);return{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,wasteFacilitySettings:{...B,itemFlowRate:de,fluidFlowRate:ve},cycle_time:be.cycleTime},leftHandles:Math.max($.length,1)}}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),pu=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,liquidDumpSettings:B,pollution:Ts($)},leftHandles:Math.max($.length,1)}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),Fn=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,liquidBurnerSettings:B,pollution:Ps($)},leftHandles:Math.max($.length,1)}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),Lr=A.useCallback((N,B=null)=>{var ye,xe;const $=ht(N.machine_id);if(!$||!N.inputs||!N.outputs){alert("Error: Invalid machine or recipe data");return}let L=bs(N,$.id);const Y=`node-${u}`,re=R?e.find(he=>he.id===R.nodeId):null;let ce;if(re)ce={x:re.position.x+(R.isOutput?400:-400),y:re.position.y};else if(fn.current&&ti.current){const he=ti.current.getBoundingClientRect(),Ce=fn.current.screenToFlowPosition({x:he.left+he.width/2,y:he.top+he.height/2}),je=320,Te=300,Ye=50;let Xe={x:Ce.x-je/2,y:Ce.y-Te/2},et=0;for(;et<20&&e.some(Pt=>{const Ei=Math.abs(Pt.position.x-Xe.x),_o=Math.abs(Pt.position.y-Xe.y);return Ei<je+Ye&&_o<Te+Ye});){const Dt=et/20*Math.PI*2,xr=100+et*50;Xe={x:Ce.x-je/2+Math.cos(Dt)*xr,y:Ce.y-Te/2+Math.sin(Dt)*xr},et++}ce=Xe}else ce={x:Math.random()*400+100,y:Math.random()*300+100};if(((ye=dr[$.id])==null?void 0:ye.type)==="boiler"){const he={heatLoss:((xe=L.temperatureSettings)==null?void 0:xe.heatLoss)??0,coolantTemp:Ki},Ce=pg($.id,he,Ki,null,Ki),je=dr[$.id],Te=bE(L.outputs,Ce,!0,je,Ki);L={...L,outputs:Te,temperatureSettings:he}}const ve={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:_r,fireboxConfig:hr};if(kE(L)&&(L=CE(L,R,h,ve,me,Wo),L.drillSettings&&Ut({drillHead:L.drillSettings.drillHead,consumable:L.drillSettings.consumable,machineOil:L.drillSettings.machineOil}),L.assemblerSettings&&rr({outerStage:L.assemblerSettings.outerStage,innerStage:L.assemblerSettings.innerStage,machineOil:L.assemblerSettings.machineOil,tickCircuitDelay:L.assemblerSettings.tickCircuitDelay}),L.treeFarmSettings&&mr({trees:L.treeFarmSettings.trees,harvesters:L.treeFarmSettings.harvesters,sprinklers:L.treeFarmSettings.sprinklers,outputs:L.treeFarmSettings.outputs}),L.fireboxSettings&&Et({fuel:L.fireboxSettings.fuel})),$.id==="m_air_separation_unit"){const he=hk(me),Ce=L.outputs.map(je=>je.product_id==="p_residue"?{...je,quantity:parseFloat(he.toFixed(6))}:je);L={...L,outputs:Ce}}const be=B!==null?B:Ji[N.id]??1,ke=nr(),fe={id:Y,type:"custom",position:ce,data:{recipe:L,machine:$,machineCount:be,machineCountMode:"free",cappedMachineCount:void 0,displayMode:dt,machineDisplayMode:yt,leftHandles:Math.max(L.inputs.length,1),rightHandles:Math.max(L.outputs.length,1),...ke,globalPollution:me,isTarget:!1,flows:null,suggestions:[],zoomLevel:On},sourcePosition:"right",targetPosition:"left"};return t(he=>{const Ce=[...he,fe];return ze("node"),R&&be>0&&setTimeout(()=>{var Ye,Xe,et;const je=R.isOutput?"inputs":"outputs";let Te=-1;if((L.isWasteFacility||L.id==="r_underground_waste_facility")&&!R.isOutput)R.productId==="p_concrete_block"?Te=2:R.productId==="p_lead_ingot"?Te=3:Te=L[je].findIndex(rt=>rt.product_id===R.productId);else if(R.isOutput&&R.isFromHeatSource){const rt=ht(L.machine_id);if(rt&&((Ye=dr[rt.id])==null?void 0:Ye.type)==="boiler"&&L.inputs.length>=2){const xr=(Xe=L.inputs[0])==null?void 0:Xe.product_id,Pt=(et=L.inputs[1])==null?void 0:et.product_id;xr===Pt&&Pt===R.productId||Pt===R.productId?Te=1:Te=L[je].findIndex(Ei=>Ei.product_id===R.productId)}else Te=L[je].findIndex(xr=>xr.product_id===R.productId)}else Te=L[je].findIndex(rt=>rt.product_id===R.productId);if(Te!==-1){const rt=R.isOutput?R.outputIndex:Te,Dt=R.isOutput?Te:R.inputIndex,xr={source:R.isOutput?R.nodeId:Y,sourceHandle:`right-${rt}`,target:R.isOutput?Y:R.nodeId,targetHandle:`left-${Dt}`,type:"custom",animated:!1,data:it};a(Pt=>g0(xr,Pt)),Sn(),ze("connection")}},50),Ce}),l(he=>he+1),ze(),Y},[u,e,t,a,dt,yt,At,Gt,_r,hr,Wo,Ji,me,h,ze,R,it,nr]),yn=A.useCallback(N=>{t(B=>B.filter($=>$.id!==N)),a(B=>B.filter($=>$.source!==N&&$.target!==N)),te(B=>B.filter($=>$.recipeBoxId!==N)),Sn(),ze("node")},[t,a,ze]),Qo=A.useCallback(N=>{var $;H.find(L=>L.recipeBoxId===N.id)?(te(L=>L.filter(Y=>Y.recipeBoxId!==N.id)),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!1}}:Y))):($=N.data)!=null&&$.recipe&&(te(L=>[...L,{id:`target_${W}`,recipeBoxId:N.id}]),ee(L=>L+1),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!0}}:Y)))},[H,W,t]),ni=A.useCallback((N,B,$,L)=>{var je;const Y=H.find(Te=>Te.id===N);if(!Y)return;const re=e.find(Te=>Te.id===Y.recipeBoxId);if(!re)return;const{recipe:ce,machine:de,machineCount:ve=0}=re.data||{};if(!ce)return;const be=ce.isMineshaftDrill||ce.id==="r_mineshaft_drill";let ke=ce.cycle_time;if((typeof ke!="number"||ke<=0)&&(ke=1),Ur(de==null?void 0:de.id)){const Te=an[de.id];if((Te==null?void 0:Te.type)==="steam_input"&&hi(ce)){const Ye=ce.tempDependentInputTemp??In;ke=Wn(de.id,Ye,ke)}}(typeof ke!="number"||ke<=0)&&(ke=1);const ye=(je=He==null?void 0:He.flows)==null?void 0:je.byNode[Y.recipeBoxId];if(!ye)return;let xe=0,he=0;if(B==="output"){const Te=ye.outputFlows[$];if(!Te)return;xe=Te.connected;const Ye=ce.outputs[$],Xe=Ye.originalQuantity!==void 0?Ye.originalQuantity:Ye.quantity;he=be?Xe:Xe/ke}else{const Te=ye.inputFlows[$];if(!Te)return;xe=Te.connected;const Ye=ce.inputs[$];he=be?Ye.quantity:Ye.quantity/ke}if(he<=0)return;const Ce=(xe+L)/he;Lt(Y.recipeBoxId,Te=>({...Te,machineCount:Ce})),ze("machineCount")},[H,e,He,ze]),co=A.useCallback(N=>{const B=H.find($=>$.id===N);B&&(te($=>$.filter(L=>L.id!==N)),Lt(B.recipeBoxId,$=>({...$,isTarget:!1})))},[H]),fu=A.useCallback((N,B)=>{if(Qe){if(Tt==="target"){Qo(B);return}else if(Tt==="delete"){yn(B.id);return}}N.shiftKey&&!N.ctrlKey&&!N.altKey?Qo(B):N.ctrlKey&&N.altKey&&yn(B.id)},[Qe,Tt,Qo,yn]),vr=A.useCallback((N,B)=>{var $,L;N.stopPropagation(),ge(B.id),Re(String((($=B.data)==null?void 0:$.machineCount)??0)),Oe(((L=B.data)==null?void 0:L.machineCountMode)||"free"),ue(!0)},[]),An=A.useRef(e),Ua=A.useRef(i);A.useEffect(()=>{An.current=e},[e]),A.useEffect(()=>{Ua.current=i},[i]);const po=A.useCallback(N=>{const B=An.current.find($=>$.id===N);B&&bi({recipe:{...B.data.recipe},machine:B.data.machine,machineCount:B.data.machineCount})},[]),Ac=A.useCallback(N=>{if(!ti.current)return;const B=ti.current.getBoundingClientRect();gr({x:N.clientX-B.left,y:N.clientY-B.top})},[]),Ga=A.useCallback(N=>{if(!ar||N.button!==0||(N.stopPropagation(),!fn.current))return;const B=fn.current.screenToFlowPosition({x:N.clientX,y:N.clientY});B.x-=160,B.y-=150;const $=`node-${u}`,L=nr(),Y={id:$,type:"custom",position:B,data:{recipe:ar.recipe,machine:ar.machine,machineCount:ar.machineCount,displayMode:dt,machineDisplayMode:yt,leftHandles:ar.recipe.inputs.length,rightHandles:ar.recipe.outputs.length,...L,globalPollution:me,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(re=>[...re,Y]),l(re=>re+1),bi(null),ze("node")},[ar,u,dt,yt,me,t,nr,ze]),Ka=A.useCallback(N=>{N.button===2&&bi(null)},[]),ii=A.useCallback((N=!1)=>{var $,L;let B=parseFloat(Ee);if(isNaN(B)||B<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}B=0}if(se&&!Ie){const Y=e.find(de=>de.id===se),re=(($=Y==null?void 0:Y.data)==null?void 0:$.machineCount)||0;let ce=(L=Y==null?void 0:Y.data)==null?void 0:L.cappedMachineCount;if(Pe==="capped"?ce=B:Pe==="free"&&(ce=void 0),N&&re>0&&B!==re){const de=Rs(e,i),ve=He==null?void 0:He.flows;if(ve){const be=UO(se,re,B,de,ve,e);t(ke=>ke.map(fe=>{const ye=be.get(fe.id);return fe.id===se?{...fe,data:{...fe.data,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}}:ye!==void 0?{...fe,data:{...fe.data,machineCount:ye}}:fe}))}else Lt(se,be=>({...be,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Lt(se,de=>({...de,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Ie&&Lt(Ie,Y=>({...Y,machineCount:B}));ue(!1),ge(null),Re(""),Oe("free"),Ne(null),ze("machineCount")},[se,Ee,Pe,Ie,e,i,He,t,yn,ze]),fo=A.useCallback(()=>{Ie&&(yn(Ie),p(!0),g(null),q(null),b("product")),ue(!1),ge(null),Re(""),Oe("free"),Ne(null)},[Ie,yn]),_u=A.useCallback((N,B,$)=>{let L,Y;B==="free"?(L="capped",Y=$):B==="capped"?(L="locked",Y=$):(L="free",Y=void 0),t(re=>re.map(ce=>ce.id!==N?ce:{...ce,data:{...ce.data,machineCountMode:L,cappedMachineCount:Y}}))},[t]),Lc=A.useCallback(()=>{const N=OL(e,i);t(N)},[e,i,t]),Dc=A.useCallback(()=>{if(H.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let N=Gw(e,i,H,{allowDeficiency:!1});if(!N.success&&N.hasDeficiency)if(window.confirm(`${N.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))N=Gw(e,i,H,{allowDeficiency:!0});else return;N.success?(t(B=>B.map($=>{const L=N.updates.get($.id);return L!==void 0?{...$,data:{...$.data,machineCount:L}}:$})),ze("machineCount"),alert(`Success! Updated ${N.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(N.message||"No changes needed - production line is already balanced.")},[H,e,i,t,ze]),mu=()=>{if(!h)return[];const N=vt(h.id),B=CO(h.id),$=SO(h.id),L=[tw,iw,ow,P0,O0,F0],Y=L.filter(de=>WO(de.id).includes(h.id)),re=L.filter(de=>{if(HO(de.id).includes(h.id))return!0;if(N){if(de.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(de.id==="r_liquid_dump"||de.id==="r_liquid_burner")return!1}return!1}),ce=L.filter(de=>de.id==="r_liquid_dump"||de.id==="r_liquid_burner"?(N==null?void 0:N.type)==="fluid":de.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return D==="producers"?[...B,...Y]:D==="consumers"?[...$,...re]:D==="disposal"?ce:Array.from(new Map([...B,...$,...Y,...re,...ce].map(de=>[de.id,de])).values())};A.useEffect(()=>{if(d){const N=w==="product"?mu():Cl(x==null?void 0:x.id),B=R?e.find(L=>L.id===R.nodeId):null,$={};N.forEach(L=>{$[L.id]=lu(L,B,R)}),eo($)}},[d,w,h,x,R,e,D]);const Ya=A.useCallback(()=>{const N=document.createElement("input");N.type="file",N.accept=".json",N.onchange=B=>{var Y;const $=(Y=B.target.files)==null?void 0:Y[0];if(!$)return;const L=new FileReader;L.onload=re=>{try{const ce=JSON.parse(re.target.result);if(!ce.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const de=ce.canvas.nodes||[],ve=[];if(de.forEach(fe=>{var xe,he,Ce,je,Te,Ye,Xe,et;const ye=(he=(xe=fe.data)==null?void 0:xe.recipe)==null?void 0:he.machine_id;ye&&!ht(ye)&&ve.push(`Machine: ${ye}`),(Te=(je=(Ce=fe.data)==null?void 0:Ce.recipe)==null?void 0:je.inputs)==null||Te.forEach(rt=>{rt.product_id!=="p_variableproduct"&&!vt(rt.product_id)&&ve.push(`Product: ${rt.product_id}`)}),(et=(Xe=(Ye=fe.data)==null?void 0:Ye.recipe)==null?void 0:Xe.outputs)==null||et.forEach(rt=>{rt.product_id!=="p_variableproduct"&&!vt(rt.product_id)&&ve.push(`Product: ${rt.product_id}`)})}),ve.length>0){const fe=[...new Set(ve)];alert(`Cannot import canvas - missing items:
${fe.slice(0,10).join(`
`)}${fe.length>10?`
...and ${fe.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const be=nr(),ke=de.map(fe=>{var he,Ce,je,Te;const ye=ht((Ce=(he=fe.data)==null?void 0:he.recipe)==null?void 0:Ce.machine_id);let xe=(je=fe.data)==null?void 0:je.recipe;return ye&&xe&&!((Te=xe.outputs)!=null&&Te.some(Ye=>Ye.temperature!==void 0))&&(xe=bs(xe,ye.id)),{...fe,data:{...fe.data,recipe:xe,machineCount:fe.data.machineCount??1,displayMode:dt,machineDisplayMode:yt,...be,globalPollution:me,flows:null,suggestions:[]}}});t(ke),a(ce.canvas.edges||[]),te(ce.canvas.targetProducts||[]),tr(ce.canvas.soldProducts||{}),Yr(ce.canvas.favoriteRecipes||[]),Ut(ce.canvas.lastDrillConfig||null),rr(ce.canvas.lastAssemblerConfig||null),mr(ce.canvas.lastTreeFarmConfig||null),Et(ce.canvas.lastFireboxConfig||null),yr(ce.canvas.lastWasteFacilityConfig||null),l(ce.canvas.nodeId||0),ee(ce.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas imported successfully!")}catch(ce){alert(`Import failed: ${ce.message}`)}},L.readAsText($)},N.click()},[dt,yt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,yr,l,ee,ze]),Bc=A.useCallback(N=>{var L;const B=(L=N.target.files)==null?void 0:L[0];if(!B)return;const $=new FileReader;$.onload=Y=>{var re,ce;try{const de=JSON.parse(Y.target.result),ve=de.products||de.machines||de.recipes,be=de.canvas;if(ve){const ke=new Map((de.products||[]).map(Ce=>[Ce.id,Ce])),fe=Array.from(ke.values()),ye=new Set(((re=de.machines)==null?void 0:re.map(Ce=>Ce.id))||[]),xe=(de.recipes||[]).filter(Ce=>ye.has(Ce.machine_id)),he=[...$r];if(fe.forEach(Ce=>{const je=he.findIndex(Te=>Te.id===Ce.id);je>=0?he[je]=Ce:he.push(Ce)}),S0(he),((ce=de.machines)==null?void 0:ce.length)>0){const Ce=[...Cn],je=new Set(de.machines.map(Ye=>Ye.id)),Te=Mn.filter(Ye=>!je.has(Ye.machine_id));de.machines.forEach(Ye=>{const Xe=Ce.findIndex(et=>et.id===Ye.id);Xe>=0?Ce[Xe]=Ye:Ce.push(Ye)}),C0(Ce),k0([...Te,...xe])}if(!be){alert("Data import successful!"),window.location.reload();return}}if(be){const ke=de.canvas.nodes||[],fe=[];if(ke.forEach(he=>{var je,Te,Ye,Xe,et,rt,Dt,xr;const Ce=(Te=(je=he.data)==null?void 0:je.recipe)==null?void 0:Te.machine_id;Ce&&!ht(Ce)&&fe.push(`Machine: ${Ce}`),(et=(Xe=(Ye=he.data)==null?void 0:Ye.recipe)==null?void 0:Xe.inputs)==null||et.forEach(Pt=>{Pt.product_id!=="p_variableproduct"&&!vt(Pt.product_id)&&fe.push(`Product: ${Pt.product_id}`)}),(xr=(Dt=(rt=he.data)==null?void 0:rt.recipe)==null?void 0:Dt.outputs)==null||xr.forEach(Pt=>{Pt.product_id!=="p_variableproduct"&&!vt(Pt.product_id)&&fe.push(`Product: ${Pt.product_id}`)})}),fe.length>0){const he=[...new Set(fe)];alert(`Cannot import canvas - missing items:
${he.slice(0,10).join(`
`)}${he.length>10?`
...and ${he.length-10} more`:""}`),N.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){N.target.value="";return}const ye=nr(),xe=ke.map(he=>{var Te,Ye,Xe,et;const Ce=ht((Ye=(Te=he.data)==null?void 0:Te.recipe)==null?void 0:Ye.machine_id);let je=(Xe=he.data)==null?void 0:Xe.recipe;return Ce&&je&&!((et=je.outputs)!=null&&et.some(rt=>rt.temperature!==void 0))&&(je=bs(je,Ce.id)),{...he,data:{...he.data,recipe:je,machineCount:he.data.machineCount??1,displayMode:dt,machineDisplayMode:yt,...ye,globalPollution:me,flows:null,suggestions:[]}}});t(xe),a(de.canvas.edges||[]),te(de.canvas.targetProducts||[]),tr(de.canvas.soldProducts||{}),Yr(de.canvas.favoriteRecipes||[]),Ut(de.canvas.lastDrillConfig||null),rr(de.canvas.lastAssemblerConfig||null),mr(de.canvas.lastTreeFarmConfig||null),Et(de.canvas.lastFireboxConfig||null),yr(de.canvas.lastWasteFacilityConfig||null),l(de.canvas.nodeId||0),ee(de.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas import successful!")}}catch(de){alert(`Import failed: ${de.message}`)}},$.readAsText(B),N.target.value=""},[dt,yt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,l,ee]);A.useCallback(()=>{const N=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn},null,2)],{type:"application/json"}),B=URL.createObjectURL(N),$=document.createElement("a");$.href=B,$.download=`industrialist-data-${Date.now()}.json`,$.click(),URL.revokeObjectURL(B)},[$r,Cn,Mn]);const zc=A.useCallback(()=>{const B={nodes:e.map(re=>({...re,data:{...re.data,flows:void 0,suggestions:void 0}})),edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn},$=new Blob([JSON.stringify({canvas:B},null,2)],{type:"application/json"}),L=URL.createObjectURL($),Y=document.createElement("a");Y.href=L,Y.download=`industrialist-canvas-${Date.now()}.json`,Y.click(),URL.revokeObjectURL(L)},[e,i,H,u,W,er,Wt,At,Gt,_r,hr]);A.useCallback(()=>{const N=e.map(Y=>({...Y,data:{...Y.data,flows:void 0,suggestions:void 0}})),B=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn,canvas:{nodes:N,edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn}},null,2)],{type:"application/json"}),$=URL.createObjectURL(B),L=document.createElement("a");L.href=$,L.download=`industrialist-export-${Date.now()}.json`,L.click(),URL.revokeObjectURL($)},[e,i,H,u,W,er,Wt,At,Gt,_r,hr]);const $c=A.useCallback(()=>{const N=ja(),B=Ra(),$=nu();S0(N),C0(B),k0($),ze("node")},[ze]),Hc=A.useCallback(N=>{const B=nr(),$=N.nodes.map(L=>{var ce,de,ve,be;const Y=ht((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:dt,machineDisplayMode:yt,...B,globalPollution:me,flows:null,suggestions:[]}}});t($),a(N.edges||[]),te(N.targetProducts||[]),tr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),rr(N.lastAssemblerConfig||null),mr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),yr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),ee(N.targetIdCounter||0),Sn(),ze("node")},[dt,yt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,yr,l,ee,ze]),Wc=A.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(n3(),vO(Kl),xO(Yl),wO(Ql),t([]),a([]),l(0),te([]),ee(0),tr({}),Ut(null),rr(null),mr(null),Et(null),yr(null),window.location.reload())},[t,a,$r,Cn,Mn]);A.useEffect(()=>{const N=B=>{if(B.key==="industrialist_theme")try{const $=JSON.parse(B.newValue);Rr({edgePath:$.edgePath||"orthogonal",edgeStyle:$.edgeStyle||"animated"})}catch($){console.error("Error parsing theme from storage:",$)}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),A.useEffect(()=>{if(!ut){const N=Vl();Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"})}},[ut]);const hu=$r.filter(N=>N.name.toLowerCase().includes(E.toLowerCase())&&(P==="all"||N.type===P)).sort((N,B)=>M==="name_asc"?N.name.localeCompare(B.name):M==="name_desc"?B.name.localeCompare(N.name):M==="price_asc"?(N.price==="Variable"?1/0:N.price)-(B.price==="Variable"?1/0:B.price):M==="price_desc"?(B.price==="Variable"?-1/0:B.price)-(N.price==="Variable"?-1/0:N.price):M==="rp_asc"?(N.rp_multiplier==="Variable"?1/0:N.rp_multiplier)-(B.rp_multiplier==="Variable"?1/0:B.rp_multiplier):(B.rp_multiplier==="Variable"?-1/0:B.rp_multiplier)-(N.rp_multiplier==="Variable"?-1/0:N.rp_multiplier)),yu=Cn.filter(N=>{const B=N.name.toLowerCase().includes(E.toLowerCase()),$=N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"||N.id==="m_underground_waste_facility"||N.id==="m_liquid_dump"||N.id==="m_liquid_burner"||Cl(N.id).length>0,L=F==="all"||N.tier!==void 0&&N.tier.toString()===F;return B&&$&&L}).sort((N,B)=>N.name.localeCompare(B.name)),Uc=N=>{if(N.id==="m_mineshaft_drill")Lr(tw,1);else if(N.id==="m_logic_assembler")Lr(iw,1);else if(N.id==="m_tree_farm")Lr(ow,1);else if(N.id==="m_underground_waste_facility")Lr(P0,1);else if(N.id==="m_liquid_dump")Lr(O0,1);else if(N.id==="m_liquid_burner")Lr(F0,1);else{q(N);return}Uo()},gu=(w==="product"?mu():Cl(x==null?void 0:x.id)).sort((N,B)=>{const $=Wt.includes(N.id),L=Wt.includes(B.id);if($&&!L)return-1;if(!$&&L)return 1;const Y=ht(N.machine_id),re=ht(B.machine_id);return((Y==null?void 0:Y.name)||"").localeCompare((re==null?void 0:re.name)||"")}),Gc=N=>{Yr(B=>B.includes(N)?B.filter($=>$!==N):[...B,N])};return _.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[_.jsxs(q6,{ref:ti,nodes:e,edges:i,onNodesChange:zo,onEdgesChange:Ba,onConnect:so,onNodeClick:fu,onNodeDoubleClick:vr,onMouseMove:Ac,onClick:Ga,onContextMenu:Ka,onInit:N=>{fn.current=N,Rt(N.getZoom())},onMoveEnd:(N,B)=>{Rt(B.zoom)},nodeTypes:VL,edgeTypes:FL,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:it.edgePath==="straight"?"straight":it.edgePath==="orthogonal"?"step":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:it.edgeStyle==="animated"||it.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[_.jsx(N6,{color:"#333",gap:16,size:1}),!Qe&&_.jsx(F6,{className:($t||Nt)&&!pr?"controls-shifted":"",position:"bottom-left"}),!Qe&&_.jsx(Q6,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),_.jsx(Ia,{position:"top-left",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:_.jsx("div",{className:`left-panel-container ${pr?"collapsed":""}`,style:Qe?{maxWidth:"100%"}:{},children:_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[_.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[_.jsxs("div",{className:"stats-panel",children:[_.jsx("h3",{className:"stats-title",children:Si}),_.jsxs("div",{className:"stats-grid",children:[_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Power:"}),_.jsx("div",{className:"stat-value",children:Pp(Fr.totalPower)})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Pollution:"}),_.jsxs("div",{className:"stat-value",style:{color:Fr.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Fr.totalPollution.toFixed(2),"%/hr"]})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),_.jsx("div",{className:"stat-value",children:Fr.totalModelCount.toFixed(0)})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Profit:"}),_.jsxs("div",{className:"stat-value",style:{color:ki>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",qr(ki),"/s"]})]}),_.jsxs("div",{className:"stat-item",children:[_.jsx("div",{className:"stat-label",children:"Total Cost:"}),_.jsxs("div",{className:"stat-value",children:["$",qr(ao.totalCost)]})]})]})]}),_.jsxs("div",{className:"flex-col action-buttons-container",children:[_.jsx("button",{onClick:cu,className:"btn btn-primary",children:"+ Select Recipe"}),_.jsx("button",{onClick:()=>{z(!0),_e("targets")},className:"btn btn-secondary",children:"View Recipes"}),_.jsx("button",{onClick:Dc,className:"btn btn-secondary",children:"Compute Machines"}),_.jsx("button",{onClick:Lc,className:"btn btn-secondary",children:"Auto Layout"}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:()=>Jt(!$t),className:"btn btn-secondary btn-square",title:$t?"Close more statistics":"Open more statistics",children:$t?"":""}),_.jsx("button",{onClick:()=>Ht(!pr),className:"btn btn-secondary btn-square btn-panel-toggle",title:pr?"Show left panel":"Hide left panel",children:pr?"":""})]})]})]}),($t||Nt)&&_.jsxs("div",{className:`extended-panel ${Nt?"closing":""}`,children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Qe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Qe?"wrap":"nowrap",gap:Qe?"10px":"0"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Qe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Qe&&_.jsx("button",{onClick:()=>Jt(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),_.jsxs("div",{style:{display:"flex",gap:Qe?"5px":"10px",flexWrap:"wrap"},children:[_.jsx("button",{onClick:()=>Do(N=>N==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:dt==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:dt==="perSecond"?"Per Second":"Per Cycle"}),_.jsx("button",{onClick:()=>Zi(N=>N==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:yt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:yt==="perMachine"?"Per Machine":"Total"})]})]}),_.jsxs("div",{className:"extended-panel-content",children:[_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[_.jsx("button",{onClick:()=>Xn(N=>!N),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:fr?"Resume pollution change":"Pause pollution change",children:fr?"":""}),_.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:me,onFocus:()=>Vr(!0),onBlur:N=>{Vr(!1);const B=N.target.value,$=parseFloat(B);ot(!isNaN($)&&isFinite($)?parseFloat($.toFixed(4)):0)},onChange:N=>ot(N.target.value===""?"":parseFloat(N.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),_.jsxs("div",{style:{marginTop:"30px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Ar.length===0?_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ar.map(N=>_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:N.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[qr(N.excessRate),"/s"]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof N.product.price=="number"&&_.jsxs("div",{style:{color:N.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",qr(N.product.price*N.excessRate),"/s"]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[_.jsx("input",{type:"checkbox",checked:N.isSold,onChange:B=>tr($=>({...$,[N.productId]:B.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},N.productId))})]}),_.jsxs("div",{style:{marginTop:"30px"},children:[_.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),Ho.length===0?_.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ho.map(N=>_.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[_.jsxs("div",{style:{flex:1},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),_.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",qr(N.deficiencyRate),"/s"]})]}),_.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[N.affectedNodes.length," node",N.affectedNodes.length!==1?"s":""," affected"]})]},N.productId))})]})]})]})]})})}),_.jsxs(Ia,{position:"top-right",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:[Qe&&_.jsxs("div",{className:"mobile-controls-container",children:[_.jsx("button",{onClick:()=>ln(N=>N==="target"?"pan":"target"),className:`btn ${Tt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),_.jsx("button",{onClick:()=>ln(N=>N==="delete"?"pan":"delete"),className:`btn ${Tt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),_.jsxs("div",{className:`menu-container ${We?"":"closed"}`,style:Qe?{maxWidth:"calc(100vw - 10px)"}:{},children:[_.jsx("button",{onClick:()=>Be(!We),className:"btn btn-secondary btn-menu-toggle",style:Qe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:We?">":"<"}),_.jsxs("div",{className:"menu-buttons",style:Qe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[_.jsx("button",{onClick:()=>{t([]),a([]),l(0),te([]),ee(0),tr({}),Ut(null),rr(null),mr(null),Et(null),yr(null),Sn(),ze("node")},className:"btn btn-secondary",children:"Clear All"}),_.jsx("button",{onClick:()=>lt(!0),className:"btn btn-secondary",children:"Saves"}),_.jsx("button",{onClick:()=>Zt(!0),className:"btn btn-secondary",children:"Data"}),_.jsx("button",{onClick:Wc,className:"btn btn-secondary",children:"Restore Defaults"}),_.jsx("button",{onClick:()=>st(!0),className:"btn btn-secondary",children:"Theme Editor"}),_.jsx("button",{onClick:()=>qt(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),_.jsx("input",{ref:Da,type:"file",accept:".json",style:{display:"none"},onChange:Bc}),(oe||m)&&_.jsx("div",{className:"modal-overlay",onClick:fo,children:oe&&_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"450px"},children:[_.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),_.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[_.jsx("button",{onClick:()=>{const N=["free","capped","locked"],$=(N.indexOf(Pe)+1)%N.length,L=N[$];Oe(L)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:Pe==="locked"?"#ef4444":Pe==="capped"?"#f59e0b":"var(--bg-secondary)",color:Pe==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${Pe==="free"?"Free (LP/suggestions can change)":Pe==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:Pe==="free"?" Free":Pe==="capped"?" Cap":" Lock"}),_.jsx("input",{type:"number",min:"0",step:"0.1",value:Ee,onChange:N=>Re(N.target.value),onKeyPress:N=>{N.key==="Enter"&&ii(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),_.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[Pe==="free"&&"Free: LP solver and suggestions can modify this count",Pe==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Ee)||0} (the value when Apply is pressed)`,Pe==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),se&&!Ie&&_.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:_.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),_.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),_.jsxs("div",{style:{display:"flex",gap:"10px"},children:[_.jsx("button",{onClick:fo,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),_.jsx("button",{onClick:()=>ii(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),se&&!Ie&&_.jsx("button",{onClick:()=>ii(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),d&&_.jsx("div",{className:"modal-overlay",onClick:Uo,children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),children:[_.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:x?`Recipes for ${x.name}`:"Select Product or Machine"}),!h&&!x?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"mb-lg",children:_.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[_.jsx("button",{onClick:()=>b("product"),className:`btn ${w==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),_.jsx("button",{onClick:()=>b("machine"),className:`btn ${w==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),w==="product"?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-lg flex-col",children:[_.jsx("input",{type:"text",placeholder:"Search products...",value:E,onChange:N=>I(N.target.value),className:"input"}),_.jsxs("div",{className:"flex-row",children:[_.jsxs("select",{value:P,onChange:N=>j(N.target.value),className:"select",children:[_.jsx("option",{value:"all",children:"All Types"}),_.jsx("option",{value:"item",children:"Items Only"}),_.jsx("option",{value:"fluid",children:"Fluids Only"})]}),_.jsxs("select",{value:M,onChange:N=>T(N.target.value),className:"select",children:[_.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),_.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),_.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),_.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),_.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),_.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),_.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[_.jsxs("div",{className:"product-table-header",children:[_.jsx("div",{children:"Product"}),_.jsx("div",{className:"text-right",children:"Price"}),_.jsx("div",{className:"text-right",children:"RP Mult"})]}),hu.map(N=>_.jsxs("div",{onClick:()=>g(N),className:"product-row",children:[_.jsxs("div",{children:[_.jsx("div",{className:"product-name",children:N.name}),_.jsx("div",{className:"product-type",children:N.type==="item"?" Item":" Fluid"})]}),_.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.price==="Variable"?"Variable":`${qr(N.price)}`}),_.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.rp_multiplier==="Variable"?"Variable":N.rp_multiplier>=1e3?`${qr(N.rp_multiplier)}x`:`${N.rp_multiplier.toFixed(1)}x`})]},N.id))]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[_.jsx("input",{type:"text",placeholder:"Search machines...",value:E,onChange:N=>I(N.target.value),className:"input",style:{flex:3}}),_.jsxs("select",{value:F,onChange:N=>Q(N.target.value),className:"select",style:{flex:1},children:[_.jsx("option",{value:"all",children:"All Tiers"}),_.jsx("option",{value:"1",children:"Tier 1"}),_.jsx("option",{value:"2",children:"Tier 2"}),_.jsx("option",{value:"3",children:"Tier 3"}),_.jsx("option",{value:"4",children:"Tier 4"}),_.jsx("option",{value:"5",children:"Tier 5"})]})]}),_.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:yu.length===0?_.jsx("div",{className:"empty-state",children:"No machines found"}):yu.map(N=>_.jsxs("div",{onClick:()=>Uc(N),className:"recipe-card",style:{cursor:"pointer"},children:[_.jsx("div",{className:"recipe-machine",style:{color:N.tier===1?"var(--tier-1-color)":N.tier===2?"var(--tier-2-color)":N.tier===3?"var(--tier-3-color)":N.tier===4?"var(--tier-4-color)":(N.tier===5,"var(--tier-5-color)")},children:N.name}),_.jsx("div",{className:"recipe-details",style:{color:"#999"},children:N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"?"Click to create box":`${Cl(N.id).length} recipe(s)`})]},N.id))})]})]}):_.jsxs(_.Fragment,{children:[C==="button"&&_.jsx("button",{onClick:()=>{g(null),q(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&_.jsx("div",{className:"mb-lg",children:_.jsxs("select",{value:D,onChange:N=>V(N.target.value),className:"select",children:[_.jsx("option",{value:"all",children:"All Recipes"}),_.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),_.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),_.jsx("option",{value:"disposal",children:"Disposal"})]})}),_.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:gu.length===0?_.jsx("div",{className:"empty-state",children:"No recipes found"}):gu.map(N=>{const B=ht(N.machine_id),$=Wt.includes(N.id),L=Ji[N.id]??1;return B&&N.inputs&&N.outputs?_.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[_.jsx("button",{onClick:Y=>{Y.stopPropagation(),Gc(N.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:$?"none":"grayscale(100%)",opacity:$?1:.4,transition:"all 0.2s"},onMouseEnter:Y=>{Y.currentTarget.style.transform="scale(1.2)",Y.currentTarget.style.opacity="1"},onMouseLeave:Y=>{Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.opacity=$?"1":"0.4"},title:$?"Remove from favorites":"Add to favorites",children:""}),_.jsx("div",{onClick:Y=>{Y.stopPropagation();const re=L<=0?1:L,ce=Lr(N,re);f(!0),p(!1),setTimeout(()=>{Ne(ce),ge(ce),Re(String(re)),ue(!0),f(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:R&&L<=0?"var(--delete-bg)":"var(--color-primary)",color:R&&L<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:R&&L<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:Y=>{R&&L<=0?(Y.currentTarget.style.background="var(--delete-hover-bg)",Y.currentTarget.style.color="var(--delete-hover-color)"):(Y.currentTarget.style.background="var(--color-primary-hover)",Y.currentTarget.style.transform="scale(1.05)",Y.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:Y=>{R&&L<=0?(Y.currentTarget.style.background="var(--delete-bg)",Y.currentTarget.style.color="var(--delete-color)"):(Y.currentTarget.style.background="var(--color-primary)",Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.borderColor="transparent")},title:R?L<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(L)?L:L.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(L)?L:L.toFixed(2)}),_.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:Y=>{if(Y.stopPropagation(),L<=0){const ce=Lr(N,1);f(!0),p(!1),setTimeout(()=>{Ne(ce),ge(ce),Re("1"),ue(!0),f(!1)},50)}else Lr(N),Uo()},children:[_.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[_.jsx("div",{className:"recipe-machine",style:{color:B.tier===1?"var(--tier-1-color)":B.tier===2?"var(--tier-2-color)":B.tier===3?"var(--tier-3-color)":B.tier===4?"var(--tier-4-color)":(B.tier===5,"var(--tier-5-color)")},children:B.name}),N.power_type==="HV"&&_.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),_.jsxs("div",{className:"recipe-details",children:[_.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),_.jsx("span",{children:N.inputs.map(Y=>Z1(Y,vt)).join(", ")})]}),_.jsxs("div",{className:"recipe-details",children:[_.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),_.jsx("span",{children:N.outputs.map(Y=>Z1(Y,vt)).join(", ")})]})]})]},N.id):null})})]}),_.jsx("button",{onClick:Uo,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),U&&_.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[_.jsx("h2",{className:"modal-title",children:"Target Products"}),_.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:H.length===0?_.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):H.map(N=>{var ke;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Y=0}=B.data||{};if(!$)return null;let re=$.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi($)){const ye=$.tempDependentInputTemp??In;re=Wn(L.id,ye,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=He==null?void 0:He.flows)==null?void 0:ke.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((fe,ye)=>{var xe;if(typeof fe.quantity=="number"){const Ce=(de?fe.quantity:fe.quantity/re)*Y,je=((xe=ve==null?void 0:ve.inputFlows[ye])==null?void 0:xe.connected)||0;be.inputs[ye]={totalRate:Ce,connectedFlow:je,deficiency:Math.max(0,Ce-je)}}}),$.outputs.forEach((fe,ye)=>{var he;const xe=fe.quantity;if(typeof xe=="number"){const je=(de?xe:xe/re)*Y,Te=((he=ve==null?void 0:ve.outputFlows[ye])==null?void 0:he.connected)||0;be.outputs[ye]={totalRate:je,connectedFlow:Te,excess:Math.max(0,je-Te)}}}),_.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),_.jsx("button",{onClick:()=>co(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((fe,ye)=>{const xe=be.inputs[ye];return xe?_.jsx(Il,{productName:_i(fe.product_id,vt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:he=>ni(N.id,"input",ye,he),styleType:"input"},ye):null})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((fe,ye)=>{const xe=be.outputs[ye];return xe?_.jsx(Il,{productName:_i(fe.product_id,vt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:he=>ni(N.id,"output",ye,he),styleType:"output"},ye):null})]})]})]},N.id)})}),_.jsx("button",{onClick:()=>K(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),ie&&_.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:_.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[_.jsx("h2",{className:"modal-title",children:"Recipes"}),_.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[_.jsx("button",{onClick:()=>_e("targets"),className:Z==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Z==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),_.jsx("button",{onClick:()=>_e("canvas"),className:Z==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Z==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),Z==="canvas"&&_.jsx("div",{style:{marginBottom:"15px"},children:_.jsxs("select",{value:Zn,onChange:N=>pt(N.target.value),className:"select",style:{width:"100%"},children:[_.jsx("option",{value:"all",children:"All Recipes"}),_.jsx("option",{value:"excess",children:"Has Excess"}),_.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),_.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:Z==="targets"?_.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[_.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),_.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.jsx("button",{onClick:()=>{dn(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),pn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),_.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ft&&ft!=="Deficiencies"&&ei.includes(ft)&&(pn(B=>B.filter($=>$!==ft)),dn(B=>[...B,ft])),Qr(null),Kt(null)},children:Jn.length===0?_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):Jn.map((N,B)=>{const $=Jn.length,L=$>1?B/($-1):0,Y=Math.round(239-205*L),re=Math.round(68+129*L),ce=Math.round(68+26*L),de=`rgb(${Y}, ${re}, ${ce})`;return _.jsx("div",{draggable:N!=="Deficiencies",onDragStart:()=>N!=="Deficiencies"&&Qr(N),onDragOver:ve=>{ve.preventDefault(),ft&&ft!==N&&N!=="Deficiencies"&&Kt(B)},onDragLeave:()=>Kt(null),onDrop:ve=>{ve.preventDefault(),ve.stopPropagation(),ft&&ft!==N&&N!=="Deficiencies"&&(ei.includes(ft)?(pn(be=>be.filter(ke=>ke!==ft)),dn(be=>{const ke=[...be];return ke.splice(B,0,ft),ke})):Jn.includes(ft)&&dn(be=>{const ke=be.filter(ye=>ye!==ft),fe=ke.indexOf(N);return ke.splice(fe,0,ft),ke})),Kt(null),Qr(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${de}`,borderRadius:"var(--radius-sm)",cursor:N==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:N==="Deficiencies"?.7:ft===N?.5:1,boxShadow:Vn===B&&N!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:Vn===B&&N!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{Qr(null),Kt(null)},title:N==="Deficiencies"?"Deficiencies must always be active":"",children:N},N)})})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),_.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ft&&ft!=="Deficiencies"&&Jn.includes(ft)&&(dn(B=>B.filter($=>$!==ft)),pn(B=>[...B,ft])),Qr(null)},children:ei.length===0?_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):ei.map(N=>_.jsx("div",{draggable:!0,onDragStart:()=>Qr(N),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>Qr(null),children:N},N))})]})]})]}),_.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),_.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[_.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),_.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:H.length===0?_.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):H.map(N=>{var ke;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Y=0}=B.data||{};if(!$)return null;let re=$.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi($)){const ye=$.tempDependentInputTemp??In;re=Wn(L.id,ye,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=He==null?void 0:He.flows)==null?void 0:ke.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((fe,ye)=>{var xe;if(typeof fe.quantity=="number"){const Ce=(de?fe.quantity:fe.quantity/re)*Y,je=((xe=ve==null?void 0:ve.inputFlows[ye])==null?void 0:xe.connected)||0;be.inputs[ye]={totalRate:Ce,connectedFlow:je,deficiency:Math.max(0,Ce-je)}}}),$.outputs.forEach((fe,ye)=>{var he;const xe=fe.quantity;if(typeof xe=="number"){const je=(de?xe:xe/re)*Y,Te=((he=ve==null?void 0:ve.outputFlows[ye])==null?void 0:he.connected)||0;be.outputs[ye]={totalRate:je,connectedFlow:Te,excess:Math.max(0,je-Te)}}}),_.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),_.jsx("button",{onClick:()=>co(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((fe,ye)=>{const xe=be.inputs[ye];return xe?_.jsx(Il,{productName:_i(fe.product_id,vt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:he=>ni(N.id,"input",ye,he),styleType:"input"},ye):null})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((fe,ye)=>{const xe=be.outputs[ye];return xe?_.jsx(Il,{productName:_i(fe.product_id,vt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:he=>ni(N.id,"output",ye,he),styleType:"output"},ye):null})]})]})]},N.id)})})]})]}):_.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?_.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(N=>{var ve;if(Zn==="all")return!0;const{recipe:B,machineCount:$=0}=N.data||{};if(!B)return!1;let L=B.cycle_time;(typeof L!="number"||L<=0)&&(L=1);const Y=(ve=He==null?void 0:He.flows)==null?void 0:ve.byNode[N.id];if(!Y)return!1;const re=B.isMineshaftDrill||B.id==="r_mineshaft_drill";let ce=!1,de=!1;return B.inputs.forEach((be,ke)=>{var fe;if(typeof be.quantity=="number"){const xe=(re?be.quantity:be.quantity/L)*$,he=((fe=Y.inputFlows[ke])==null?void 0:fe.connected)||0;Math.max(0,xe-he)>.001&&(de=!0)}}),B.outputs.forEach((be,ke)=>{var ye;const fe=be.originalQuantity!==void 0?be.originalQuantity:be.quantity;if(typeof fe=="number"){const he=(re?fe:fe/L)*$,Ce=((ye=Y.outputFlows[ke])==null?void 0:ye.connected)||0;Math.max(0,he-Ce)>.001&&(ce=!0)}}),Zn==="excess"?ce:Zn==="deficiency"?de:!0}).map(N=>{const{recipe:B,machine:$,machineCount:L=0,machineCountMode:Y="free",cappedMachineCount:re}=N.data||{};if(!B||!$)return null;let ce=B.cycle_time;if((typeof ce!="number"||ce<=0)&&(ce=1),Ur($==null?void 0:$.id)){const fe=an[$.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi(B)){const ye=B.tempDependentInputTemp??In;ce=Wn($.id,ye,ce)}}const ve=B.power_consumption;let be="Variable";typeof ve=="number"?be=Pp(ve*L):typeof ve=="object"&&ve!==null&&"max"in ve&&(be=`${Pp(ve.max*L)} (max)`);const ke=typeof B.pollution=="number"?B.pollution*L:0;return _.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[_.jsxs("div",{style:{flex:1,minWidth:0},children:[_.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:B.name}),_.jsxs("div",{style:{marginBottom:"8px"},children:[_.jsx("div",{style:{color:$.tier===1?"var(--tier-1-color)":$.tier===2?"var(--tier-2-color)":$.tier===3?"var(--tier-3-color)":$.tier===4?"var(--tier-4-color)":($.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:$.name}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",qr(Math.ceil(L)*(typeof $.cost=="number"?$.cost:0))]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof ce=="number"?`${ce.toFixed(2)}s`:"Variable"]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",be]}),_.jsxs("div",{children:[_.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",ke.toFixed(2),"%/hr"]})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),B.inputs.map((fe,ye)=>{var rt,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",he=fe.quantity,je=(typeof he=="number"?xe?he:he/ce:0)*L,Te=(rt=He==null?void 0:He.flows)==null?void 0:rt.byNode[N.id],Ye=((Dt=Te==null?void 0:Te.inputFlows[ye])==null?void 0:Dt.connected)||0,et=Math.max(0,je-Ye)>.001;return _.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:et?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:et?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),_.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,vt)}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof he=="number"?qr(je):"Var","/s"]})]},ye)})]}),_.jsxs("div",{children:[_.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),B.outputs.map((fe,ye)=>{var rt,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",he=fe.originalQuantity!==void 0?fe.originalQuantity:fe.quantity,je=(typeof he=="number"?xe?he:he/ce:0)*L,Te=(rt=He==null?void 0:He.flows)==null?void 0:rt.byNode[N.id],Ye=((Dt=Te==null?void 0:Te.outputFlows[ye])==null?void 0:Dt.connected)||0,et=Math.max(0,je-Ye)>.001;return _.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:et?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[_.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:et?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),_.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,vt)}),_.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof he=="number"?qr(je):"Var","/s"]})]},ye)})]})]})]}),_.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[_.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[_.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),_.jsx("input",{type:"number",min:"0",step:"0.1",value:qi[N.id]!==void 0?qi[N.id]:L.toFixed(2),onFocus:()=>{to(fe=>({...fe,[N.id]:L.toFixed(2)}))},onChange:fe=>{to(ye=>({...ye,[N.id]:fe.target.value}))},onBlur:()=>{const fe=parseFloat(qi[N.id]);!isNaN(fe)&&fe>=0&&(Lt(N.id,ye=>({...ye,machineCount:fe})),ze("machineCount")),to(ye=>{const xe={...ye};return delete xe[N.id],xe})},onKeyPress:fe=>{fe.key==="Enter"&&fe.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),_.jsx("button",{onClick:()=>{const fe=["free","capped","locked"],xe=(fe.indexOf(Y)+1)%fe.length,he=fe[xe];t(Ce=>Ce.map(je=>je.id!==N.id?je:{...je,data:{...je.data,machineCountMode:he,cappedMachineCount:he==="free"?void 0:L}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:Y==="locked"?"#ef4444":Y==="capped"?"#f59e0b":"var(--bg-secondary)",color:Y==="free"?"var(--text-primary)":"#fff",border:Y==="free"?"2px solid var(--border-primary)":"none"},title:Y==="free"?"Free: LP/suggestions can change":Y==="capped"?`Capped: Max ${(re==null?void 0:re.toFixed(2))||L.toFixed(2)}`:"Locked: Cannot be changed",children:Y==="free"?" Free":Y==="capped"?" Cap":" Lock"}),_.jsx("button",{onClick:()=>{fn.current&&(fn.current.fitView({nodes:[{id:N.id}],padding:.5,duration:500}),z(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},N.id)})})})}),_.jsx("button",{onClick:()=>z(!1),className:"btn btn-secondary",children:"Close"})]})}),ut&&_.jsx(sO,{onClose:()=>st(!1)}),Mt&&_.jsx(uO,{onClose:()=>qt(!1)}),St&&_.jsx(_O,{onClose:()=>lt(!1),onLoad:Hc,currentCanvas:{nodes:e,edges:i,targetProducts:H,nodeId:u,targetIdCounter:W,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn},onImport:Ya,onExportCanvas:zc}),Sr&&_.jsx(kO,{onClose:()=>Zt(!1),defaultProducts:Kl,defaultMachines:Yl,defaultRecipes:Ql,onDataChange:$c}),Qe&&Tt!=="pan"&&_.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Tt==="target"&&" Target Mode: Tap nodes to mark as targets",Tt==="delete"&&" Delete Mode: Tap nodes to delete"]}),ar&&_.jsxs("div",{className:"pending-node-preview",style:{left:`${Bo.x+20}px`,top:`${Bo.y+20}px`},children:[_.jsx("div",{className:"pending-node-recipe-name",children:ar.recipe.name}),_.jsx("div",{className:"pending-node-machine-name",children:ar.machine.name}),_.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",ar.machineCount]}),_.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}WN.createRoot(document.getElementById("root")).render(_.jsx(yk.StrictMode,{children:_.jsx(AL,{})}));

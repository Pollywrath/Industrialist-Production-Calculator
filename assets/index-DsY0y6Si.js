(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();function Cs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hx(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var i=e.default;if(typeof i=="function"){var r=function o(){return this instanceof o?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};r.prototype=i.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}),r}var wd={exports:{}},Za={},bd={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function Wx(){if(df)return Qe;df=1;var e=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.iterator;function h(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function S(B,Y,pe){this.props=B,this.context=Y,this.refs=b,this.updater=pe||x}S.prototype.isReactComponent={},S.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=S.prototype;function I(B,Y,pe){this.props=B,this.context=Y,this.refs=b,this.updater=pe||x}var M=I.prototype=new k;M.constructor=I,w(M,S.prototype),M.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,C={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function j(B,Y,pe){var ue,he={},be=null,Se=null;if(Y!=null)for(ue in Y.ref!==void 0&&(Se=Y.ref),Y.key!==void 0&&(be=""+Y.key),Y)P.call(Y,ue)&&!R.hasOwnProperty(ue)&&(he[ue]=Y[ue]);var ce=arguments.length-2;if(ce===1)he.children=pe;else if(1<ce){for(var qe=Array(ce),Fe=0;Fe<ce;Fe++)qe[Fe]=arguments[Fe+2];he.children=qe}if(B&&B.defaultProps)for(ue in ce=B.defaultProps,ce)he[ue]===void 0&&(he[ue]=ce[ue]);return{$$typeof:e,type:B,key:be,ref:Se,props:he,_owner:C.current}}function V(B,Y){return{$$typeof:e,type:B.type,key:Y,ref:B.ref,props:B.props,_owner:B._owner}}function Q(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function z(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(pe){return Y[pe]})}var L=/\/+/g;function ie(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):Y.toString(36)}function T(B,Y,pe,ue,he){var be=typeof B;(be==="undefined"||be==="boolean")&&(B=null);var Se=!1;if(B===null)Se=!0;else switch(be){case"string":case"number":Se=!0;break;case"object":switch(B.$$typeof){case e:case i:Se=!0}}if(Se)return Se=B,he=he(Se),B=ue===""?"."+ie(Se,0):ue,E(he)?(pe="",B!=null&&(pe=B.replace(L,"$&/")+"/"),T(he,Y,pe,"",function(Fe){return Fe})):he!=null&&(Q(he)&&(he=V(he,pe+(!he.key||Se&&Se.key===he.key?"":(""+he.key).replace(L,"$&/")+"/")+B)),Y.push(he)),1;if(Se=0,ue=ue===""?".":ue+":",E(B))for(var ce=0;ce<B.length;ce++){be=B[ce];var qe=ue+ie(be,ce);Se+=T(be,Y,pe,qe,he)}else if(qe=h(B),typeof qe=="function")for(B=qe.call(B),ce=0;!(be=B.next()).done;)be=be.value,qe=ue+ie(be,ce++),Se+=T(be,Y,pe,qe,he);else if(be==="object")throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Se}function X(B,Y,pe){if(B==null)return B;var ue=[],he=0;return T(B,ue,"","",function(be){return Y.call(pe,be,he++)}),ue}function G(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(pe){(B._status===0||B._status===-1)&&(B._status=1,B._result=pe)},function(pe){(B._status===0||B._status===-1)&&(B._status=2,B._result=pe)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var Z={current:null},H={transition:null},U={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:H,ReactCurrentOwner:C};function te(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:X,forEach:function(B,Y,pe){X(B,function(){Y.apply(this,arguments)},pe)},count:function(B){var Y=0;return X(B,function(){Y++}),Y},toArray:function(B){return X(B,function(Y){return Y})||[]},only:function(B){if(!Q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Qe.Component=S,Qe.Fragment=r,Qe.Profiler=a,Qe.PureComponent=I,Qe.StrictMode=o,Qe.Suspense=_,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Qe.act=te,Qe.cloneElement=function(B,Y,pe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ue=w({},B.props),he=B.key,be=B.ref,Se=B._owner;if(Y!=null){if(Y.ref!==void 0&&(be=Y.ref,Se=C.current),Y.key!==void 0&&(he=""+Y.key),B.type&&B.type.defaultProps)var ce=B.type.defaultProps;for(qe in Y)P.call(Y,qe)&&!R.hasOwnProperty(qe)&&(ue[qe]=Y[qe]===void 0&&ce!==void 0?ce[qe]:Y[qe])}var qe=arguments.length-2;if(qe===1)ue.children=pe;else if(1<qe){ce=Array(qe);for(var Fe=0;Fe<qe;Fe++)ce[Fe]=arguments[Fe+2];ue.children=ce}return{$$typeof:e,type:B.type,key:he,ref:be,props:ue,_owner:Se}},Qe.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:c,_context:B},B.Consumer=B},Qe.createElement=j,Qe.createFactory=function(B){var Y=j.bind(null,B);return Y.type=B,Y},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(B){return{$$typeof:d,render:B}},Qe.isValidElement=Q,Qe.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:G}},Qe.memo=function(B,Y){return{$$typeof:f,type:B,compare:Y===void 0?null:Y}},Qe.startTransition=function(B){var Y=H.transition;H.transition={};try{B()}finally{H.transition=Y}},Qe.unstable_act=te,Qe.useCallback=function(B,Y){return Z.current.useCallback(B,Y)},Qe.useContext=function(B){return Z.current.useContext(B)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(B){return Z.current.useDeferredValue(B)},Qe.useEffect=function(B,Y){return Z.current.useEffect(B,Y)},Qe.useId=function(){return Z.current.useId()},Qe.useImperativeHandle=function(B,Y,pe){return Z.current.useImperativeHandle(B,Y,pe)},Qe.useInsertionEffect=function(B,Y){return Z.current.useInsertionEffect(B,Y)},Qe.useLayoutEffect=function(B,Y){return Z.current.useLayoutEffect(B,Y)},Qe.useMemo=function(B,Y){return Z.current.useMemo(B,Y)},Qe.useReducer=function(B,Y,pe){return Z.current.useReducer(B,Y,pe)},Qe.useRef=function(B){return Z.current.useRef(B)},Qe.useState=function(B){return Z.current.useState(B)},Qe.useSyncExternalStore=function(B,Y,pe){return Z.current.useSyncExternalStore(B,Y,pe)},Qe.useTransition=function(){return Z.current.useTransition()},Qe.version="18.3.1",Qe}var pf;function qs(){return pf||(pf=1,bd.exports=Wx()),bd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f;function Ux(){if(_f)return Za;_f=1;var e=qs(),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(d,_,f){var y,m={},h=null,x=null;f!==void 0&&(h=""+f),_.key!==void 0&&(h=""+_.key),_.ref!==void 0&&(x=_.ref);for(y in _)o.call(_,y)&&!c.hasOwnProperty(y)&&(m[y]=_[y]);if(d&&d.defaultProps)for(y in _=d.defaultProps,_)m[y]===void 0&&(m[y]=_[y]);return{$$typeof:i,type:d,key:h,ref:x,props:m,_owner:a.current}}return Za.Fragment=r,Za.jsx=u,Za.jsxs=u,Za}var mf;function Gx(){return mf||(mf=1,wd.exports=Ux()),wd.exports}var l=Gx(),F=qs();const S0=Cs(F);var zl={},kd={exports:{}},Si={},Sd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function Yx(){return ff||(ff=1,(function(e){function i(H,U){var te=H.length;H.push(U);e:for(;0<te;){var B=te-1>>>1,Y=H[B];if(0<a(Y,U))H[B]=U,H[te]=Y,te=B;else break e}}function r(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var U=H[0],te=H.pop();if(te!==U){H[0]=te;e:for(var B=0,Y=H.length,pe=Y>>>1;B<pe;){var ue=2*(B+1)-1,he=H[ue],be=ue+1,Se=H[be];if(0>a(he,te))be<Y&&0>a(Se,he)?(H[B]=Se,H[be]=te,B=be):(H[B]=he,H[ue]=te,B=ue);else if(be<Y&&0>a(Se,te))H[B]=Se,H[be]=te,B=be;else break e}}return U}function a(H,U){var te=H.sortIndex-U.sortIndex;return te!==0?te:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var _=[],f=[],y=1,m=null,h=3,x=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(H){for(var U=r(f);U!==null;){if(U.callback===null)o(f);else if(U.startTime<=H)o(f),U.sortIndex=U.expirationTime,i(_,U);else break;U=r(f)}}function E(H){if(b=!1,M(H),!w)if(r(_)!==null)w=!0,G(P);else{var U=r(f);U!==null&&Z(E,U.startTime-H)}}function P(H,U){w=!1,b&&(b=!1,k(j),j=-1),x=!0;var te=h;try{for(M(U),m=r(_);m!==null&&(!(m.expirationTime>U)||H&&!z());){var B=m.callback;if(typeof B=="function"){m.callback=null,h=m.priorityLevel;var Y=B(m.expirationTime<=U);U=e.unstable_now(),typeof Y=="function"?m.callback=Y:m===r(_)&&o(_),M(U)}else o(_);m=r(_)}if(m!==null)var pe=!0;else{var ue=r(f);ue!==null&&Z(E,ue.startTime-U),pe=!1}return pe}finally{m=null,h=te,x=!1}}var C=!1,R=null,j=-1,V=5,Q=-1;function z(){return!(e.unstable_now()-Q<V)}function L(){if(R!==null){var H=e.unstable_now();Q=H;var U=!0;try{U=R(!0,H)}finally{U?ie():(C=!1,R=null)}}else C=!1}var ie;if(typeof I=="function")ie=function(){I(L)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,X=T.port2;T.port1.onmessage=L,ie=function(){X.postMessage(null)}}else ie=function(){S(L,0)};function G(H){R=H,C||(C=!0,ie())}function Z(H,U){j=S(function(){H(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,G(P))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var te=h;h=U;try{return H()}finally{h=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=h;h=H;try{return U()}finally{h=te}},e.unstable_scheduleCallback=function(H,U,te){var B=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?B+te:B):te=B,H){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=te+Y,H={id:y++,callback:U,priorityLevel:H,startTime:te,expirationTime:Y,sortIndex:-1},te>B?(H.sortIndex=te,i(f,H),r(_)===null&&H===r(f)&&(b?(k(j),j=-1):b=!0,Z(E,te-B))):(H.sortIndex=Y,i(_,H),w||x||(w=!0,G(P))),H},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(H){var U=h;return function(){var te=h;h=U;try{return H.apply(this,arguments)}finally{h=te}}}})(Md)),Md}var hf;function Kx(){return hf||(hf=1,Sd.exports=Yx()),Sd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf;function Qx(){if(yf)return Si;yf=1;var e=qs(),i=Kx();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(t,n){u(t,n),u(t+"Capture",n)}function u(t,n){for(a[t]=n,t=0;t<n.length;t++)o.add(n[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},m={};function h(t){return _.call(m,t)?!0:_.call(y,t)?!1:f.test(t)?m[t]=!0:(y[t]=!0,!1)}function x(t,n,s,p){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return p?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w(t,n,s,p){if(n===null||typeof n>"u"||x(t,n,s,p))return!0;if(p)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function b(t,n,s,p,g,v,N){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=s,this.propertyName=t,this.type=n,this.sanitizeURL=v,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new b(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];S[n]=new b(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new b(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new b(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new b(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new b(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new b(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new b(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new b(t,5,!1,t.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function I(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(k,I);S[n]=new b(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(k,I);S[n]=new b(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(k,I);S[n]=new b(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new b(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new b(t,1,!1,t.toLowerCase(),null,!0,!0)});function M(t,n,s,p){var g=S.hasOwnProperty(n)?S[n]:null;(g!==null?g.type!==0:p||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(w(n,s,g,p)&&(s=null),p||g===null?h(n)&&(s===null?t.removeAttribute(n):t.setAttribute(n,""+s)):g.mustUseProperty?t[g.propertyName]=s===null?g.type===3?!1:"":s:(n=g.attributeName,p=g.attributeNamespace,s===null?t.removeAttribute(n):(g=g.type,s=g===3||g===4&&s===!0?"":""+s,p?t.setAttributeNS(p,n,s):t.setAttribute(n,s))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),z=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),H=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=H&&t[H]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,B;function Y(t){if(B===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);B=n&&n[1]||""}return`
`+B+t}var pe=!1;function ue(t,n){if(!t||pe)return"";pe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(se){var p=se}Reflect.construct(t,[],n)}else{try{n.call()}catch(se){p=se}t.call(n.prototype)}else{try{throw Error()}catch(se){p=se}t()}}catch(se){if(se&&p&&typeof se.stack=="string"){for(var g=se.stack.split(`
`),v=p.stack.split(`
`),N=g.length-1,$=v.length-1;1<=N&&0<=$&&g[N]!==v[$];)$--;for(;1<=N&&0<=$;N--,$--)if(g[N]!==v[$]){if(N!==1||$!==1)do if(N--,$--,0>$||g[N]!==v[$]){var K=`
`+g[N].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=N&&0<=$);break}}}finally{pe=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Y(t):""}function he(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=ue(t.type,!1),t;case 11:return t=ue(t.type.render,!1),t;case 1:return t=ue(t.type,!0),t;default:return""}}function be(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case C:return"Portal";case V:return"Profiler";case j:return"StrictMode";case ie:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z:return(t.displayName||"Context")+".Consumer";case Q:return(t._context.displayName||"Context")+".Provider";case L:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return n=t.displayName||null,n!==null?n:be(t.type)||"Memo";case G:n=t._payload,t=t._init;try{return be(t(n))}catch{}}return null}function Se(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(n);case 8:return n===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ce(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Fe(t){var n=qe(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),p=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var g=s.get,v=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return g.call(this)},set:function(N){p=""+N,v.call(this,N)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return p},setValue:function(N){p=""+N},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Le(t){t._valueTracker||(t._valueTracker=Fe(t))}function Ie(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),p="";return t&&(p=qe(t)?t.checked?"true":"false":t.value),t=p,t!==s?(n.setValue(t),!0):!1}function Re(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ze(t,n){var s=n.checked;return te({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ye(t,n){var s=n.defaultValue==null?"":n.defaultValue,p=n.checked!=null?n.checked:n.defaultChecked;s=ce(n.value!=null?n.value:s),t._wrapperState={initialChecked:p,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ge(t,n){n=n.checked,n!=null&&M(t,"checked",n,!1)}function at(t,n){Ge(t,n);var s=ce(n.value),p=n.type;if(s!=null)p==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?xt(t,n.type,s):n.hasOwnProperty("defaultValue")&&xt(t,n.type,ce(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function bt(t,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var p=n.type;if(!(p!=="submit"&&p!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,s||n===t.value||(t.value=n),t.defaultValue=n}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function xt(t,n,s){(n!=="number"||Re(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Et=Array.isArray;function Dt(t,n,s,p){if(t=t.options,n){n={};for(var g=0;g<s.length;g++)n["$"+s[g]]=!0;for(s=0;s<t.length;s++)g=n.hasOwnProperty("$"+t[s].value),t[s].selected!==g&&(t[s].selected=g),g&&p&&(t[s].defaultSelected=!0)}else{for(s=""+ce(s),n=null,g=0;g<t.length;g++){if(t[g].value===s){t[g].selected=!0,p&&(t[g].defaultSelected=!0);return}n!==null||t[g].disabled||(n=t[g])}n!==null&&(n.selected=!0)}}function hi(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ci(t,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(Et(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}t._wrapperState={initialValue:ce(s)}}function Bn(t,n){var s=ce(n.value),p=ce(n.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),n.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),p!=null&&(t.defaultValue=""+p)}function Oi(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Zt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yi(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Zt(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _t,Sn=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,p,g){MSApp.execUnsafeLocalFunction(function(){return t(n,s,p,g)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(_t=_t||document.createElement("div"),_t.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=_t.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function zt(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Mn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bi=["Webkit","ms","Moz","O"];Object.keys(Mn).forEach(function(t){Bi.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Mn[n]=Mn[t]})});function An(t,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Mn.hasOwnProperty(t)&&Mn[t]?(""+n).trim():n+"px"}function Xe(t,n){t=t.style;for(var s in n)if(n.hasOwnProperty(s)){var p=s.indexOf("--")===0,g=An(s,n[s],p);s==="float"&&(s="cssFloat"),p?t.setProperty(s,g):t[s]=g}}var pr=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mt(t,n){if(n){if(pr[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Ji(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var de=null;function nt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Ei=null,oi=null;function $n(t){if(t=Da(t)){if(typeof qi!="function")throw Error(r(280));var n=t.stateNode;n&&(n=Js(n),qi(t.stateNode,t.type,n))}}function Cn(t){Ei?oi?oi.push(t):oi=[t]:Ei=t}function It(){if(Ei){var t=Ei,n=oi;if(oi=Ei=null,$n(t),n)for(t=0;t<n.length;t++)$n(n[t])}}function Ut(t,n){return t(n)}function Gt(){}var st=!1;function Co(t,n,s){if(st)return t(n,s);st=!0;try{return Ut(t,n,s)}finally{st=!1,(Ei!==null||oi!==null)&&(Gt(),It())}}function mt(t,n){var s=t.stateNode;if(s===null)return null;var p=Js(s);if(p===null)return null;s=p[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var Ar=!1;if(d)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{Ar=!1}function Ai(t,n,s,p,g,v,N,$,K){var se=Array.prototype.slice.call(arguments,3);try{n.apply(s,se)}catch(ve){this.onError(ve)}}var Pt=!1,Ot=null,Bt=!1,Yt=null,ai={onError:function(t){Pt=!0,Ot=t}};function si(t,n,s,p,g,v,N,$,K){Pt=!1,Ot=null,Ai.apply(ai,arguments)}function li(t,n,s,p,g,v,N,$,K){if(si.apply(this,arguments),Pt){if(Pt){var se=Ot;Pt=!1,Ot=null}else throw Error(r(198));Bt||(Bt=!0,Yt=se)}}function kt(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function en(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function ui(t){if(kt(t)!==t)throw Error(r(188))}function $r(t){var n=t.alternate;if(!n){if(n=kt(t),n===null)throw Error(r(188));return n!==t?null:t}for(var s=t,p=n;;){var g=s.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){s=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===s)return ui(g),t;if(v===p)return ui(g),n;v=v.sibling}throw Error(r(188))}if(s.return!==p.return)s=g,p=v;else{for(var N=!1,$=g.child;$;){if($===s){N=!0,s=g,p=v;break}if($===p){N=!0,p=g,s=v;break}$=$.sibling}if(!N){for($=v.child;$;){if($===s){N=!0,s=v,p=g;break}if($===p){N=!0,p=v,s=g;break}$=$.sibling}if(!N)throw Error(r(189))}}if(s.alternate!==p)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:n}function Hr(t){return t=$r(t),t!==null?Jt(t):null}function Jt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=Jt(t);if(n!==null)return n;t=t.sibling}return null}var _r=i.unstable_scheduleCallback,mr=i.unstable_cancelCallback,Wr=i.unstable_shouldYield,Hn=i.unstable_requestPaint,lt=i.unstable_now,Wn=i.unstable_getCurrentPriorityLevel,tn=i.unstable_ImmediatePriority,Un=i.unstable_UserBlockingPriority,nn=i.unstable_NormalPriority,ut=i.unstable_LowPriority,$i=i.unstable_IdlePriority,qn=null,At=null;function qo(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(qn,t,void 0,(t.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:va,Gn=Math.log,rn=Math.LN2;function va(t){return t>>>=0,t===0?32:31-(Gn(t)/rn|0)|0}var Ur=64,fr=4194304;function gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function on(t,n){var s=t.pendingLanes;if(s===0)return 0;var p=0,g=t.suspendedLanes,v=t.pingedLanes,N=s&268435455;if(N!==0){var $=N&~g;$!==0?p=gi($):(v&=N,v!==0&&(p=gi(v)))}else N=s&~g,N!==0?p=gi(N):v!==0&&(p=gi(v));if(p===0)return 0;if(n!==0&&n!==p&&(n&g)===0&&(g=p&-p,v=n&-n,g>=v||g===16&&(v&4194240)!==0))return n;if((p&4)!==0&&(p|=s&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=p;0<n;)s=31-ci(n),g=1<<s,p|=t[s],n&=~g;return p}function Eo(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wa(t,n){for(var s=t.suspendedLanes,p=t.pingedLanes,g=t.expirationTimes,v=t.pendingLanes;0<v;){var N=31-ci(v),$=1<<N,K=g[N];K===-1?(($&s)===0||($&p)!==0)&&(g[N]=Eo($,n)):K<=n&&(t.expiredLanes|=$),v&=~$}}function Kt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hr(){var t=Ur;return Ur<<=1,(Ur&4194240)===0&&(Ur=64),t}function Ii(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Hi(t,n,s){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-ci(n),t[n]=s}function Gr(t,n){var s=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<s;){var g=31-ci(s),v=1<<g;n[g]=0,p[g]=-1,t[g]=-1,s&=~v}}function Ae(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var p=31-ci(s),g=1<<p;g&n|t[p]&n&&(t[p]|=n),s&=~g}}var rt=0;function Yr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ba,Kr,Io,Oe,ka,No=!1,Yn=[],an=null,sn=null,Ni=null,yr=new Map,Qr=new Map,Tt=[],jo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fs(t,n){switch(t){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":yr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(n.pointerId)}}function Xr(t,n,s,p,g,v){return t===null||t.nativeEvent!==v?(t={blockedOn:n,domEventName:s,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},n!==null&&(n=Da(n),n!==null&&Kr(n)),t):(t.eventSystemFlags|=p,n=t.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),t)}function Po(t,n,s,p,g){switch(n){case"focusin":return an=Xr(an,t,n,s,p,g),!0;case"dragenter":return sn=Xr(sn,t,n,s,p,g),!0;case"mouseover":return Ni=Xr(Ni,t,n,s,p,g),!0;case"pointerover":var v=g.pointerId;return yr.set(v,Xr(yr.get(v)||null,t,n,s,p,g)),!0;case"gotpointercapture":return v=g.pointerId,Qr.set(v,Xr(Qr.get(v)||null,t,n,s,p,g)),!0}return!1}function Ds(t){var n=ro(t.target);if(n!==null){var s=kt(n);if(s!==null){if(n=s.tag,n===13){if(n=en(s),n!==null){t.blockedOn=n,ka(t.priority,function(){Io(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function To(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=Ma(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var p=new s.constructor(s.type,s);de=p,s.target.dispatchEvent(p),de=null}else return n=Da(s),n!==null&&Kr(n),t.blockedOn=s,!1;n.shift()}return!0}function zs(t,n,s){To(t)&&s.delete(n)}function Wi(){No=!1,an!==null&&To(an)&&(an=null),sn!==null&&To(sn)&&(sn=null),Ni!==null&&To(Ni)&&(Ni=null),yr.forEach(zs),Qr.forEach(zs)}function Zr(t,n){t.blockedOn===n&&(t.blockedOn=null,No||(No=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Wi)))}function Jr(t){function n(g){return Zr(g,t)}if(0<Yn.length){Zr(Yn[0],t);for(var s=1;s<Yn.length;s++){var p=Yn[s];p.blockedOn===t&&(p.blockedOn=null)}}for(an!==null&&Zr(an,t),sn!==null&&Zr(sn,t),Ni!==null&&Zr(Ni,t),yr.forEach(n),Qr.forEach(n),s=0;s<Tt.length;s++)p=Tt[s],p.blockedOn===t&&(p.blockedOn=null);for(;0<Tt.length&&(s=Tt[0],s.blockedOn===null);)Ds(s),s.blockedOn===null&&Tt.shift()}var gr=E.ReactCurrentBatchConfig,Ro=!0;function Hu(t,n,s,p){var g=rt,v=gr.transition;gr.transition=null;try{rt=1,Sa(t,n,s,p)}finally{rt=g,gr.transition=v}}function Wu(t,n,s,p){var g=rt,v=gr.transition;gr.transition=null;try{rt=4,Sa(t,n,s,p)}finally{rt=g,gr.transition=v}}function Sa(t,n,s,p){if(Ro){var g=Ma(t,n,s,p);if(g===null)dc(t,n,p,Vo,s),Fs(t,p);else if(Po(g,t,n,s,p))p.stopPropagation();else if(Fs(t,p),n&4&&-1<jo.indexOf(t)){for(;g!==null;){var v=Da(g);if(v!==null&&ba(v),v=Ma(t,n,s,p),v===null&&dc(t,n,p,Vo,s),v===g)break;g=v}g!==null&&p.stopPropagation()}else dc(t,n,p,null,s)}}var Vo=null;function Ma(t,n,s,p){if(Vo=null,t=nt(p),t=ro(t),t!==null)if(n=kt(t),n===null)t=null;else if(s=n.tag,s===13){if(t=en(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Vo=t,null}function Ls(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wn()){case tn:return 1;case Un:return 4;case nn:case ut:return 16;case $i:return 536870912;default:return 16}default:return 16}}var En=null,ji=null,ln=null;function Fo(){if(ln)return ln;var t,n=ji,s=n.length,p,g="value"in En?En.value:En.textContent,v=g.length;for(t=0;t<s&&n[t]===g[t];t++);var N=s-t;for(p=1;p<=N&&n[s-p]===g[v-p];p++);return ln=g.slice(t,1<p?1-p:void 0)}function Kn(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function Os(){return!1}function di(t){function n(s,p,g,v,N){this._reactName=s,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=N,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(s=t[$],this[$]=s?s(v):v[$]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?eo:Os,this.isPropagationStopped=Os,this}return te(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),n}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=di(In),to=te({},In,{view:0,detail:0}),Uu=di(to),qa,Ea,Qn,io=te({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qn&&(Qn&&t.type==="mousemove"?(qa=t.screenX-Qn.screenX,Ea=t.screenY-Qn.screenY):Ea=qa=0,Qn=t),qa)},movementY:function(t){return"movementY"in t?t.movementY:Ea}}),Bs=di(io),Gu=te({},io,{dataTransfer:0}),Yu=di(Gu),As=te({},to,{relatedTarget:0}),Ia=di(As),Ku=te({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=di(Ku),Xu=te({},In,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zu=di(Xu),Ju=te({},In,{data:0}),$s=di(Ju),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ws={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Ws[t])?!!n[t]:!1}function q(){return tc}var O=te({},to,{key:function(t){if(t.key){var n=Hs[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Kn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ec[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q,charCode:function(t){return t.type==="keypress"?Kn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A=di(O),D=te({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W=di(D),J=te({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q}),oe=di(J),ae=te({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),fe=di(ae),xe=te({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=di(xe),le=[9,13,27,32],me=d&&"CompositionEvent"in window,ye=null;d&&"documentMode"in document&&(ye=document.documentMode);var _e=d&&"TextEvent"in window&&!ye,ke=d&&(!me||ye&&8<ye&&11>=ye),Ne=" ",Ee=!1;function Ue(t,n){switch(t){case"keyup":return le.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ke(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Je=!1;function tt(t,n){switch(t){case"compositionend":return Ke(n);case"keypress":return n.which!==32?null:(Ee=!0,Ne);case"textInput":return t=n.data,t===Ne&&Ee?null:t;default:return null}}function Rt(t,n){if(Je)return t==="compositionend"||!me&&Ue(t,n)?(t=Fo(),ln=ji=En=null,Je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ke&&n.locale!=="ko"?null:n.data;default:return null}}var pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!pi[t.type]:n==="textarea"}function xr(t,n,s,p){Cn(p),n=Qs(n,"onChange"),0<n.length&&(s=new Ca("onChange","change",null,s,p),t.push({event:s,listeners:n}))}var no=null,Na=null;function Hg(t){C_(t,0)}function Us(t){var n=Bo(t);if(Ie(n))return t}function Wg(t,n){if(t==="change")return n}var u_=!1;if(d){var ic;if(d){var nc="oninput"in document;if(!nc){var c_=document.createElement("div");c_.setAttribute("oninput","return;"),nc=typeof c_.oninput=="function"}ic=nc}else ic=!1;u_=ic&&(!document.documentMode||9<document.documentMode)}function d_(){no&&(no.detachEvent("onpropertychange",p_),Na=no=null)}function p_(t){if(t.propertyName==="value"&&Us(Na)){var n=[];xr(n,Na,t,nt(t)),Co(Hg,n)}}function Ug(t,n,s){t==="focusin"?(d_(),no=n,Na=s,no.attachEvent("onpropertychange",p_)):t==="focusout"&&d_()}function Gg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Us(Na)}function Yg(t,n){if(t==="click")return Us(n)}function Kg(t,n){if(t==="input"||t==="change")return Us(n)}function Qg(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var un=typeof Object.is=="function"?Object.is:Qg;function ja(t,n){if(un(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),p=Object.keys(n);if(s.length!==p.length)return!1;for(p=0;p<s.length;p++){var g=s[p];if(!_.call(n,g)||!un(t[g],n[g]))return!1}return!0}function __(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m_(t,n){var s=__(t);t=0;for(var p;s;){if(s.nodeType===3){if(p=t+s.textContent.length,t<=n&&p>=n)return{node:s,offset:n-t};t=p}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=__(s)}}function f_(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?f_(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function h_(){for(var t=window,n=Re();n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Re(t.document)}return n}function rc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Xg(t){var n=h_(),s=t.focusedElem,p=t.selectionRange;if(n!==s&&s&&s.ownerDocument&&f_(s.ownerDocument.documentElement,s)){if(p!==null&&rc(s)){if(n=p.start,t=p.end,t===void 0&&(t=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(t,s.value.length);else if(t=(n=s.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var g=s.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!t.extend&&v>p&&(g=p,p=v,v=g),g=m_(s,v);var N=m_(s,p);g&&N&&(t.rangeCount!==1||t.anchorNode!==g.node||t.anchorOffset!==g.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),t.removeAllRanges(),v>p?(t.addRange(n),t.extend(N.node,N.offset)):(n.setEnd(N.node,N.offset),t.addRange(n)))}}for(n=[],t=s;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)t=n[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zg=d&&"documentMode"in document&&11>=document.documentMode,Do=null,oc=null,Pa=null,ac=!1;function y_(t,n,s){var p=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ac||Do==null||Do!==Re(p)||(p=Do,"selectionStart"in p&&rc(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Pa&&ja(Pa,p)||(Pa=p,p=Qs(oc,"onSelect"),0<p.length&&(n=new Ca("onSelect","select",null,n,s),t.push({event:n,listeners:p}),n.target=Do)))}function Gs(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var zo={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},sc={},g_={};d&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Ys(t){if(sc[t])return sc[t];if(!zo[t])return t;var n=zo[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in g_)return sc[t]=n[s];return t}var x_=Ys("animationend"),v_=Ys("animationiteration"),w_=Ys("animationstart"),b_=Ys("transitionend"),k_=new Map,S_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(t,n){k_.set(t,n),c(n,[t])}for(var lc=0;lc<S_.length;lc++){var uc=S_[lc],Jg=uc.toLowerCase(),ex=uc[0].toUpperCase()+uc.slice(1);vr(Jg,"on"+ex)}vr(x_,"onAnimationEnd"),vr(v_,"onAnimationIteration"),vr(w_,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(b_,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function M_(t,n,s){var p=t.type||"unknown-event";t.currentTarget=s,li(p,n,void 0,t),t.currentTarget=null}function C_(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var p=t[s],g=p.event;p=p.listeners;e:{var v=void 0;if(n)for(var N=p.length-1;0<=N;N--){var $=p[N],K=$.instance,se=$.currentTarget;if($=$.listener,K!==v&&g.isPropagationStopped())break e;M_(g,$,se),v=K}else for(N=0;N<p.length;N++){if($=p[N],K=$.instance,se=$.currentTarget,$=$.listener,K!==v&&g.isPropagationStopped())break e;M_(g,$,se),v=K}}}if(Bt)throw t=Yt,Bt=!1,Yt=null,t}function ct(t,n){var s=n[yc];s===void 0&&(s=n[yc]=new Set);var p=t+"__bubble";s.has(p)||(q_(n,t,2,!1),s.add(p))}function cc(t,n,s){var p=0;n&&(p|=4),q_(s,t,p,n)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function Ra(t){if(!t[Ks]){t[Ks]=!0,o.forEach(function(s){s!=="selectionchange"&&(tx.has(s)||cc(s,!1,t),cc(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ks]||(n[Ks]=!0,cc("selectionchange",!1,n))}}function q_(t,n,s,p){switch(Ls(n)){case 1:var g=Hu;break;case 4:g=Wu;break;default:g=Sa}s=g.bind(null,n,s,t),g=void 0,!Ar||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),p?g!==void 0?t.addEventListener(n,s,{capture:!0,passive:g}):t.addEventListener(n,s,!0):g!==void 0?t.addEventListener(n,s,{passive:g}):t.addEventListener(n,s,!1)}function dc(t,n,s,p,g){var v=p;if((n&1)===0&&(n&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var $=p.stateNode.containerInfo;if($===g||$.nodeType===8&&$.parentNode===g)break;if(N===4)for(N=p.return;N!==null;){var K=N.tag;if((K===3||K===4)&&(K=N.stateNode.containerInfo,K===g||K.nodeType===8&&K.parentNode===g))return;N=N.return}for(;$!==null;){if(N=ro($),N===null)return;if(K=N.tag,K===5||K===6){p=v=N;continue e}$=$.parentNode}}p=p.return}Co(function(){var se=v,ve=nt(s),we=[];e:{var ge=k_.get(t);if(ge!==void 0){var je=Ca,Te=t;switch(t){case"keypress":if(Kn(s)===0)break e;case"keydown":case"keyup":je=A;break;case"focusin":Te="focus",je=Ia;break;case"focusout":Te="blur",je=Ia;break;case"beforeblur":case"afterblur":je=Ia;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=oe;break;case x_:case v_:case w_:je=Qu;break;case b_:je=fe;break;case"scroll":je=Uu;break;case"wheel":je=Me;break;case"copy":case"cut":case"paste":je=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=W}var Ve=(n&4)!==0,qt=!Ve&&t==="scroll",ne=Ve?ge!==null?ge+"Capture":null:ge;Ve=[];for(var ee=se,re;ee!==null;){re=ee;var Ce=re.stateNode;if(re.tag===5&&Ce!==null&&(re=Ce,ne!==null&&(Ce=mt(ee,ne),Ce!=null&&Ve.push(Va(ee,Ce,re)))),qt)break;ee=ee.return}0<Ve.length&&(ge=new je(ge,Te,null,s,ve),we.push({event:ge,listeners:Ve}))}}if((n&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",je=t==="mouseout"||t==="pointerout",ge&&s!==de&&(Te=s.relatedTarget||s.fromElement)&&(ro(Te)||Te[Xn]))break e;if((je||ge)&&(ge=ve.window===ve?ve:(ge=ve.ownerDocument)?ge.defaultView||ge.parentWindow:window,je?(Te=s.relatedTarget||s.toElement,je=se,Te=Te?ro(Te):null,Te!==null&&(qt=kt(Te),Te!==qt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(je=null,Te=se),je!==Te)){if(Ve=Bs,Ce="onMouseLeave",ne="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=W,Ce="onPointerLeave",ne="onPointerEnter",ee="pointer"),qt=je==null?ge:Bo(je),re=Te==null?ge:Bo(Te),ge=new Ve(Ce,ee+"leave",je,s,ve),ge.target=qt,ge.relatedTarget=re,Ce=null,ro(ve)===se&&(Ve=new Ve(ne,ee+"enter",Te,s,ve),Ve.target=re,Ve.relatedTarget=qt,Ce=Ve),qt=Ce,je&&Te)t:{for(Ve=je,ne=Te,ee=0,re=Ve;re;re=Lo(re))ee++;for(re=0,Ce=ne;Ce;Ce=Lo(Ce))re++;for(;0<ee-re;)Ve=Lo(Ve),ee--;for(;0<re-ee;)ne=Lo(ne),re--;for(;ee--;){if(Ve===ne||ne!==null&&Ve===ne.alternate)break t;Ve=Lo(Ve),ne=Lo(ne)}Ve=null}else Ve=null;je!==null&&E_(we,ge,je,Ve,!1),Te!==null&&qt!==null&&E_(we,qt,Te,Ve,!0)}}e:{if(ge=se?Bo(se):window,je=ge.nodeName&&ge.nodeName.toLowerCase(),je==="select"||je==="input"&&ge.type==="file")var De=Wg;else if(Ct(ge))if(u_)De=Kg;else{De=Gg;var $e=Ug}else(je=ge.nodeName)&&je.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(De=Yg);if(De&&(De=De(t,se))){xr(we,De,s,ve);break e}$e&&$e(t,ge,se),t==="focusout"&&($e=ge._wrapperState)&&$e.controlled&&ge.type==="number"&&xt(ge,"number",ge.value)}switch($e=se?Bo(se):window,t){case"focusin":(Ct($e)||$e.contentEditable==="true")&&(Do=$e,oc=se,Pa=null);break;case"focusout":Pa=oc=Do=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,y_(we,s,ve);break;case"selectionchange":if(Zg)break;case"keydown":case"keyup":y_(we,s,ve)}var He;if(me)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Je?Ue(t,s)&&(We="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(We="onCompositionStart");We&&(ke&&s.locale!=="ko"&&(Je||We!=="onCompositionStart"?We==="onCompositionEnd"&&Je&&(He=Fo()):(En=ve,ji="value"in En?En.value:En.textContent,Je=!0)),$e=Qs(se,We),0<$e.length&&(We=new $s(We,t,null,s,ve),we.push({event:We,listeners:$e}),He?We.data=He:(He=Ke(s),He!==null&&(We.data=He)))),(He=_e?tt(t,s):Rt(t,s))&&(se=Qs(se,"onBeforeInput"),0<se.length&&(ve=new $s("onBeforeInput","beforeinput",null,s,ve),we.push({event:ve,listeners:se}),ve.data=He))}C_(we,n)})}function Va(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Qs(t,n){for(var s=n+"Capture",p=[];t!==null;){var g=t,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=mt(t,s),v!=null&&p.unshift(Va(t,v,g)),v=mt(t,n),v!=null&&p.push(Va(t,v,g))),t=t.return}return p}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E_(t,n,s,p,g){for(var v=n._reactName,N=[];s!==null&&s!==p;){var $=s,K=$.alternate,se=$.stateNode;if(K!==null&&K===p)break;$.tag===5&&se!==null&&($=se,g?(K=mt(s,v),K!=null&&N.unshift(Va(s,K,$))):g||(K=mt(s,v),K!=null&&N.push(Va(s,K,$)))),s=s.return}N.length!==0&&t.push({event:n,listeners:N})}var ix=/\r\n?/g,nx=/\u0000|\uFFFD/g;function I_(t){return(typeof t=="string"?t:""+t).replace(ix,`
`).replace(nx,"")}function Xs(t,n,s){if(n=I_(n),I_(t)!==n&&s)throw Error(r(425))}function Zs(){}var pc=null,_c=null;function mc(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(t){return N_.resolve(null).then(t).catch(ax)}:fc;function ax(t){setTimeout(function(){throw t})}function hc(t,n){var s=n,p=0;do{var g=s.nextSibling;if(t.removeChild(s),g&&g.nodeType===8)if(s=g.data,s==="/$"){if(p===0){t.removeChild(g),Jr(n);return}p--}else s!=="$"&&s!=="$?"&&s!=="$!"||p++;s=g}while(s);Jr(n)}function wr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function j_(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Oo,Fa="__reactProps$"+Oo,Xn="__reactContainer$"+Oo,yc="__reactEvents$"+Oo,sx="__reactListeners$"+Oo,lx="__reactHandles$"+Oo;function ro(t){var n=t[Nn];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Xn]||s[Nn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=j_(t);t!==null;){if(s=t[Nn])return s;t=j_(t)}return n}t=s,s=t.parentNode}return null}function Da(t){return t=t[Nn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Js(t){return t[Fa]||null}var gc=[],Ao=-1;function br(t){return{current:t}}function dt(t){0>Ao||(t.current=gc[Ao],gc[Ao]=null,Ao--)}function ot(t,n){Ao++,gc[Ao]=t.current,t.current=n}var kr={},ei=br(kr),xi=br(!1),oo=kr;function $o(t,n){var s=t.type.contextTypes;if(!s)return kr;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===n)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in s)g[v]=n[v];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=g),g}function vi(t){return t=t.childContextTypes,t!=null}function el(){dt(xi),dt(ei)}function P_(t,n,s){if(ei.current!==kr)throw Error(r(168));ot(ei,n),ot(xi,s)}function T_(t,n,s){var p=t.stateNode;if(n=n.childContextTypes,typeof p.getChildContext!="function")return s;p=p.getChildContext();for(var g in p)if(!(g in n))throw Error(r(108,Se(t)||"Unknown",g));return te({},s,p)}function tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,oo=ei.current,ot(ei,t),ot(xi,xi.current),!0}function R_(t,n,s){var p=t.stateNode;if(!p)throw Error(r(169));s?(t=T_(t,n,oo),p.__reactInternalMemoizedMergedChildContext=t,dt(xi),dt(ei),ot(ei,t)):dt(xi),ot(xi,s)}var Zn=null,il=!1,xc=!1;function V_(t){Zn===null?Zn=[t]:Zn.push(t)}function ux(t){il=!0,V_(t)}function Sr(){if(!xc&&Zn!==null){xc=!0;var t=0,n=rt;try{var s=Zn;for(rt=1;t<s.length;t++){var p=s[t];do p=p(!0);while(p!==null)}Zn=null,il=!1}catch(g){throw Zn!==null&&(Zn=Zn.slice(t+1)),_r(tn,Sr),g}finally{rt=n,xc=!1}}return null}var Ho=[],Wo=0,nl=null,rl=0,Ui=[],Gi=0,ao=null,Jn=1,er="";function so(t,n){Ho[Wo++]=rl,Ho[Wo++]=nl,nl=t,rl=n}function F_(t,n,s){Ui[Gi++]=Jn,Ui[Gi++]=er,Ui[Gi++]=ao,ao=t;var p=Jn;t=er;var g=32-ci(p)-1;p&=~(1<<g),s+=1;var v=32-ci(n)+g;if(30<v){var N=g-g%5;v=(p&(1<<N)-1).toString(32),p>>=N,g-=N,Jn=1<<32-ci(n)+g|s<<g|p,er=v+t}else Jn=1<<v|s<<g|p,er=t}function vc(t){t.return!==null&&(so(t,1),F_(t,1,0))}function wc(t){for(;t===nl;)nl=Ho[--Wo],Ho[Wo]=null,rl=Ho[--Wo],Ho[Wo]=null;for(;t===ao;)ao=Ui[--Gi],Ui[Gi]=null,er=Ui[--Gi],Ui[Gi]=null,Jn=Ui[--Gi],Ui[Gi]=null}var Pi=null,Ti=null,ft=!1,cn=null;function D_(t,n){var s=Xi(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=t,n=t.deletions,n===null?(t.deletions=[s],t.flags|=16):n.push(s)}function z_(t,n){switch(t.tag){case 5:var s=t.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Pi=t,Ti=wr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Pi=t,Ti=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=ao!==null?{id:Jn,overflow:er}:null,t.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Xi(18,null,null,0),s.stateNode=n,s.return=t,t.child=s,Pi=t,Ti=null,!0):!1;default:return!1}}function bc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kc(t){if(ft){var n=Ti;if(n){var s=n;if(!z_(t,n)){if(bc(t))throw Error(r(418));n=wr(s.nextSibling);var p=Pi;n&&z_(t,n)?D_(p,s):(t.flags=t.flags&-4097|2,ft=!1,Pi=t)}}else{if(bc(t))throw Error(r(418));t.flags=t.flags&-4097|2,ft=!1,Pi=t}}}function L_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pi=t}function ol(t){if(t!==Pi)return!1;if(!ft)return L_(t),ft=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!mc(t.type,t.memoizedProps)),n&&(n=Ti)){if(bc(t))throw O_(),Error(r(418));for(;n;)D_(t,n),n=wr(n.nextSibling)}if(L_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(n===0){Ti=wr(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}t=t.nextSibling}Ti=null}}else Ti=Pi?wr(t.stateNode.nextSibling):null;return!0}function O_(){for(var t=Ti;t;)t=wr(t.nextSibling)}function Uo(){Ti=Pi=null,ft=!1}function Sc(t){cn===null?cn=[t]:cn.push(t)}var cx=E.ReactCurrentBatchConfig;function za(t,n,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var p=s.stateNode}if(!p)throw Error(r(147,t));var g=p,v=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(N){var $=g.refs;N===null?delete $[v]:$[v]=N},n._stringRef=v,n)}if(typeof t!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,t))}return t}function al(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function B_(t){var n=t._init;return n(t._payload)}function A_(t){function n(ne,ee){if(t){var re=ne.deletions;re===null?(ne.deletions=[ee],ne.flags|=16):re.push(ee)}}function s(ne,ee){if(!t)return null;for(;ee!==null;)n(ne,ee),ee=ee.sibling;return null}function p(ne,ee){for(ne=new Map;ee!==null;)ee.key!==null?ne.set(ee.key,ee):ne.set(ee.index,ee),ee=ee.sibling;return ne}function g(ne,ee){return ne=Pr(ne,ee),ne.index=0,ne.sibling=null,ne}function v(ne,ee,re){return ne.index=re,t?(re=ne.alternate,re!==null?(re=re.index,re<ee?(ne.flags|=2,ee):re):(ne.flags|=2,ee)):(ne.flags|=1048576,ee)}function N(ne){return t&&ne.alternate===null&&(ne.flags|=2),ne}function $(ne,ee,re,Ce){return ee===null||ee.tag!==6?(ee=fd(re,ne.mode,Ce),ee.return=ne,ee):(ee=g(ee,re),ee.return=ne,ee)}function K(ne,ee,re,Ce){var De=re.type;return De===R?ve(ne,ee,re.props.children,Ce,re.key):ee!==null&&(ee.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===G&&B_(De)===ee.type)?(Ce=g(ee,re.props),Ce.ref=za(ne,ee,re),Ce.return=ne,Ce):(Ce=Nl(re.type,re.key,re.props,null,ne.mode,Ce),Ce.ref=za(ne,ee,re),Ce.return=ne,Ce)}function se(ne,ee,re,Ce){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==re.containerInfo||ee.stateNode.implementation!==re.implementation?(ee=hd(re,ne.mode,Ce),ee.return=ne,ee):(ee=g(ee,re.children||[]),ee.return=ne,ee)}function ve(ne,ee,re,Ce,De){return ee===null||ee.tag!==7?(ee=ho(re,ne.mode,Ce,De),ee.return=ne,ee):(ee=g(ee,re),ee.return=ne,ee)}function we(ne,ee,re){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=fd(""+ee,ne.mode,re),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case P:return re=Nl(ee.type,ee.key,ee.props,null,ne.mode,re),re.ref=za(ne,null,ee),re.return=ne,re;case C:return ee=hd(ee,ne.mode,re),ee.return=ne,ee;case G:var Ce=ee._init;return we(ne,Ce(ee._payload),re)}if(Et(ee)||U(ee))return ee=ho(ee,ne.mode,re,null),ee.return=ne,ee;al(ne,ee)}return null}function ge(ne,ee,re,Ce){var De=ee!==null?ee.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return De!==null?null:$(ne,ee,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case P:return re.key===De?K(ne,ee,re,Ce):null;case C:return re.key===De?se(ne,ee,re,Ce):null;case G:return De=re._init,ge(ne,ee,De(re._payload),Ce)}if(Et(re)||U(re))return De!==null?null:ve(ne,ee,re,Ce,null);al(ne,re)}return null}function je(ne,ee,re,Ce,De){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ne=ne.get(re)||null,$(ee,ne,""+Ce,De);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case P:return ne=ne.get(Ce.key===null?re:Ce.key)||null,K(ee,ne,Ce,De);case C:return ne=ne.get(Ce.key===null?re:Ce.key)||null,se(ee,ne,Ce,De);case G:var $e=Ce._init;return je(ne,ee,re,$e(Ce._payload),De)}if(Et(Ce)||U(Ce))return ne=ne.get(re)||null,ve(ee,ne,Ce,De,null);al(ee,Ce)}return null}function Te(ne,ee,re,Ce){for(var De=null,$e=null,He=ee,We=ee=0,Wt=null;He!==null&&We<re.length;We++){He.index>We?(Wt=He,He=null):Wt=He.sibling;var it=ge(ne,He,re[We],Ce);if(it===null){He===null&&(He=Wt);break}t&&He&&it.alternate===null&&n(ne,He),ee=v(it,ee,We),$e===null?De=it:$e.sibling=it,$e=it,He=Wt}if(We===re.length)return s(ne,He),ft&&so(ne,We),De;if(He===null){for(;We<re.length;We++)He=we(ne,re[We],Ce),He!==null&&(ee=v(He,ee,We),$e===null?De=He:$e.sibling=He,$e=He);return ft&&so(ne,We),De}for(He=p(ne,He);We<re.length;We++)Wt=je(He,ne,We,re[We],Ce),Wt!==null&&(t&&Wt.alternate!==null&&He.delete(Wt.key===null?We:Wt.key),ee=v(Wt,ee,We),$e===null?De=Wt:$e.sibling=Wt,$e=Wt);return t&&He.forEach(function(Tr){return n(ne,Tr)}),ft&&so(ne,We),De}function Ve(ne,ee,re,Ce){var De=U(re);if(typeof De!="function")throw Error(r(150));if(re=De.call(re),re==null)throw Error(r(151));for(var $e=De=null,He=ee,We=ee=0,Wt=null,it=re.next();He!==null&&!it.done;We++,it=re.next()){He.index>We?(Wt=He,He=null):Wt=He.sibling;var Tr=ge(ne,He,it.value,Ce);if(Tr===null){He===null&&(He=Wt);break}t&&He&&Tr.alternate===null&&n(ne,He),ee=v(Tr,ee,We),$e===null?De=Tr:$e.sibling=Tr,$e=Tr,He=Wt}if(it.done)return s(ne,He),ft&&so(ne,We),De;if(He===null){for(;!it.done;We++,it=re.next())it=we(ne,it.value,Ce),it!==null&&(ee=v(it,ee,We),$e===null?De=it:$e.sibling=it,$e=it);return ft&&so(ne,We),De}for(He=p(ne,He);!it.done;We++,it=re.next())it=je(He,ne,We,it.value,Ce),it!==null&&(t&&it.alternate!==null&&He.delete(it.key===null?We:it.key),ee=v(it,ee,We),$e===null?De=it:$e.sibling=it,$e=it);return t&&He.forEach(function($x){return n(ne,$x)}),ft&&so(ne,We),De}function qt(ne,ee,re,Ce){if(typeof re=="object"&&re!==null&&re.type===R&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case P:e:{for(var De=re.key,$e=ee;$e!==null;){if($e.key===De){if(De=re.type,De===R){if($e.tag===7){s(ne,$e.sibling),ee=g($e,re.props.children),ee.return=ne,ne=ee;break e}}else if($e.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===G&&B_(De)===$e.type){s(ne,$e.sibling),ee=g($e,re.props),ee.ref=za(ne,$e,re),ee.return=ne,ne=ee;break e}s(ne,$e);break}else n(ne,$e);$e=$e.sibling}re.type===R?(ee=ho(re.props.children,ne.mode,Ce,re.key),ee.return=ne,ne=ee):(Ce=Nl(re.type,re.key,re.props,null,ne.mode,Ce),Ce.ref=za(ne,ee,re),Ce.return=ne,ne=Ce)}return N(ne);case C:e:{for($e=re.key;ee!==null;){if(ee.key===$e)if(ee.tag===4&&ee.stateNode.containerInfo===re.containerInfo&&ee.stateNode.implementation===re.implementation){s(ne,ee.sibling),ee=g(ee,re.children||[]),ee.return=ne,ne=ee;break e}else{s(ne,ee);break}else n(ne,ee);ee=ee.sibling}ee=hd(re,ne.mode,Ce),ee.return=ne,ne=ee}return N(ne);case G:return $e=re._init,qt(ne,ee,$e(re._payload),Ce)}if(Et(re))return Te(ne,ee,re,Ce);if(U(re))return Ve(ne,ee,re,Ce);al(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,ee!==null&&ee.tag===6?(s(ne,ee.sibling),ee=g(ee,re),ee.return=ne,ne=ee):(s(ne,ee),ee=fd(re,ne.mode,Ce),ee.return=ne,ne=ee),N(ne)):s(ne,ee)}return qt}var Go=A_(!0),$_=A_(!1),sl=br(null),ll=null,Yo=null,Mc=null;function Cc(){Mc=Yo=ll=null}function qc(t){var n=sl.current;dt(sl),t._currentValue=n}function Ec(t,n,s){for(;t!==null;){var p=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,p!==null&&(p.childLanes|=n)):p!==null&&(p.childLanes&n)!==n&&(p.childLanes|=n),t===s)break;t=t.return}}function Ko(t,n){ll=t,Mc=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(wi=!0),t.firstContext=null)}function Yi(t){var n=t._currentValue;if(Mc!==t)if(t={context:t,memoizedValue:n,next:null},Yo===null){if(ll===null)throw Error(r(308));Yo=t,ll.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return n}var lo=null;function Ic(t){lo===null?lo=[t]:lo.push(t)}function H_(t,n,s,p){var g=n.interleaved;return g===null?(s.next=s,Ic(n)):(s.next=g.next,g.next=s),n.interleaved=s,tr(t,p)}function tr(t,n){t.lanes|=n;var s=t.alternate;for(s!==null&&(s.lanes|=n),s=t,t=t.return;t!==null;)t.childLanes|=n,s=t.alternate,s!==null&&(s.childLanes|=n),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Mr=!1;function Nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W_(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Cr(t,n,s){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(et&2)!==0){var g=p.pending;return g===null?n.next=n:(n.next=g.next,g.next=n),p.pending=n,tr(t,s)}return g=p.interleaved,g===null?(n.next=n,Ic(p)):(n.next=g.next,g.next=n),p.interleaved=n,tr(t,s)}function ul(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var p=n.lanes;p&=t.pendingLanes,s|=p,n.lanes=s,Ae(t,s)}}function U_(t,n){var s=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,s===p)){var g=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var N={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?g=v=N:v=v.next=N,s=s.next}while(s!==null);v===null?g=v=n:v=v.next=n}else g=v=n;s={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}function cl(t,n,s,p){var g=t.updateQueue;Mr=!1;var v=g.firstBaseUpdate,N=g.lastBaseUpdate,$=g.shared.pending;if($!==null){g.shared.pending=null;var K=$,se=K.next;K.next=null,N===null?v=se:N.next=se,N=K;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,$=ve.lastBaseUpdate,$!==N&&($===null?ve.firstBaseUpdate=se:$.next=se,ve.lastBaseUpdate=K))}if(v!==null){var we=g.baseState;N=0,ve=se=K=null,$=v;do{var ge=$.lane,je=$.eventTime;if((p&ge)===ge){ve!==null&&(ve=ve.next={eventTime:je,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Te=t,Ve=$;switch(ge=n,je=s,Ve.tag){case 1:if(Te=Ve.payload,typeof Te=="function"){we=Te.call(je,we,ge);break e}we=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ve.payload,ge=typeof Te=="function"?Te.call(je,we,ge):Te,ge==null)break e;we=te({},we,ge);break e;case 2:Mr=!0}}$.callback!==null&&$.lane!==0&&(t.flags|=64,ge=g.effects,ge===null?g.effects=[$]:ge.push($))}else je={eventTime:je,lane:ge,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ve===null?(se=ve=je,K=we):ve=ve.next=je,N|=ge;if($=$.next,$===null){if($=g.shared.pending,$===null)break;ge=$,$=ge.next,ge.next=null,g.lastBaseUpdate=ge,g.shared.pending=null}}while(!0);if(ve===null&&(K=we),g.baseState=K,g.firstBaseUpdate=se,g.lastBaseUpdate=ve,n=g.shared.interleaved,n!==null){g=n;do N|=g.lane,g=g.next;while(g!==n)}else v===null&&(g.shared.lanes=0);po|=N,t.lanes=N,t.memoizedState=we}}function G_(t,n,s){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var p=t[n],g=p.callback;if(g!==null){if(p.callback=null,p=s,typeof g!="function")throw Error(r(191,g));g.call(p)}}}var La={},jn=br(La),Oa=br(La),Ba=br(La);function uo(t){if(t===La)throw Error(r(174));return t}function jc(t,n){switch(ot(Ba,n),ot(Oa,t),ot(jn,La),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:yi(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=yi(n,t)}dt(jn),ot(jn,n)}function Qo(){dt(jn),dt(Oa),dt(Ba)}function Y_(t){uo(Ba.current);var n=uo(jn.current),s=yi(n,t.type);n!==s&&(ot(Oa,t),ot(jn,s))}function Pc(t){Oa.current===t&&(dt(jn),dt(Oa))}var vt=br(0);function dl(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Tc=[];function Rc(){for(var t=0;t<Tc.length;t++)Tc[t]._workInProgressVersionPrimary=null;Tc.length=0}var pl=E.ReactCurrentDispatcher,Vc=E.ReactCurrentBatchConfig,co=0,wt=null,Vt=null,$t=null,_l=!1,Aa=!1,$a=0,dx=0;function ti(){throw Error(r(321))}function Fc(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!un(t[s],n[s]))return!1;return!0}function Dc(t,n,s,p,g,v){if(co=v,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,pl.current=t===null||t.memoizedState===null?fx:hx,t=s(p,g),Aa){v=0;do{if(Aa=!1,$a=0,25<=v)throw Error(r(301));v+=1,$t=Vt=null,n.updateQueue=null,pl.current=yx,t=s(p,g)}while(Aa)}if(pl.current=hl,n=Vt!==null&&Vt.next!==null,co=0,$t=Vt=wt=null,_l=!1,n)throw Error(r(300));return t}function zc(){var t=$a!==0;return $a=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?wt.memoizedState=$t=t:$t=$t.next=t,$t}function Ki(){if(Vt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var n=$t===null?wt.memoizedState:$t.next;if(n!==null)$t=n,Vt=t;else{if(t===null)throw Error(r(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},$t===null?wt.memoizedState=$t=t:$t=$t.next=t}return $t}function Ha(t,n){return typeof n=="function"?n(t):n}function Lc(t){var n=Ki(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var p=Vt,g=p.baseQueue,v=s.pending;if(v!==null){if(g!==null){var N=g.next;g.next=v.next,v.next=N}p.baseQueue=g=v,s.pending=null}if(g!==null){v=g.next,p=p.baseState;var $=N=null,K=null,se=v;do{var ve=se.lane;if((co&ve)===ve)K!==null&&(K=K.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),p=se.hasEagerState?se.eagerState:t(p,se.action);else{var we={lane:ve,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};K===null?($=K=we,N=p):K=K.next=we,wt.lanes|=ve,po|=ve}se=se.next}while(se!==null&&se!==v);K===null?N=p:K.next=$,un(p,n.memoizedState)||(wi=!0),n.memoizedState=p,n.baseState=N,n.baseQueue=K,s.lastRenderedState=p}if(t=s.interleaved,t!==null){g=t;do v=g.lane,wt.lanes|=v,po|=v,g=g.next;while(g!==t)}else g===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Oc(t){var n=Ki(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var p=s.dispatch,g=s.pending,v=n.memoizedState;if(g!==null){s.pending=null;var N=g=g.next;do v=t(v,N.action),N=N.next;while(N!==g);un(v,n.memoizedState)||(wi=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,p]}function K_(){}function Q_(t,n){var s=wt,p=Ki(),g=n(),v=!un(p.memoizedState,g);if(v&&(p.memoizedState=g,wi=!0),p=p.queue,Bc(J_.bind(null,s,p,t),[t]),p.getSnapshot!==n||v||$t!==null&&$t.memoizedState.tag&1){if(s.flags|=2048,Wa(9,Z_.bind(null,s,p,g,n),void 0,null),Ht===null)throw Error(r(349));(co&30)!==0||X_(s,n,g)}return g}function X_(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=wt.updateQueue,n===null?(n={lastEffect:null,stores:null},wt.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function Z_(t,n,s,p){n.value=s,n.getSnapshot=p,em(n)&&tm(t)}function J_(t,n,s){return s(function(){em(n)&&tm(t)})}function em(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!un(t,s)}catch{return!0}}function tm(t){var n=tr(t,1);n!==null&&mn(n,t,1,-1)}function im(t){var n=Pn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t},n.queue=t,t=t.dispatch=mx.bind(null,wt,t),[n.memoizedState,t]}function Wa(t,n,s,p){return t={tag:t,create:n,destroy:s,deps:p,next:null},n=wt.updateQueue,n===null?(n={lastEffect:null,stores:null},wt.updateQueue=n,n.lastEffect=t.next=t):(s=n.lastEffect,s===null?n.lastEffect=t.next=t:(p=s.next,s.next=t,t.next=p,n.lastEffect=t)),t}function nm(){return Ki().memoizedState}function ml(t,n,s,p){var g=Pn();wt.flags|=t,g.memoizedState=Wa(1|n,s,void 0,p===void 0?null:p)}function fl(t,n,s,p){var g=Ki();p=p===void 0?null:p;var v=void 0;if(Vt!==null){var N=Vt.memoizedState;if(v=N.destroy,p!==null&&Fc(p,N.deps)){g.memoizedState=Wa(n,s,v,p);return}}wt.flags|=t,g.memoizedState=Wa(1|n,s,v,p)}function rm(t,n){return ml(8390656,8,t,n)}function Bc(t,n){return fl(2048,8,t,n)}function om(t,n){return fl(4,2,t,n)}function am(t,n){return fl(4,4,t,n)}function sm(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function lm(t,n,s){return s=s!=null?s.concat([t]):null,fl(4,4,sm.bind(null,n,t),s)}function Ac(){}function um(t,n){var s=Ki();n=n===void 0?null:n;var p=s.memoizedState;return p!==null&&n!==null&&Fc(n,p[1])?p[0]:(s.memoizedState=[t,n],t)}function cm(t,n){var s=Ki();n=n===void 0?null:n;var p=s.memoizedState;return p!==null&&n!==null&&Fc(n,p[1])?p[0]:(t=t(),s.memoizedState=[t,n],t)}function dm(t,n,s){return(co&21)===0?(t.baseState&&(t.baseState=!1,wi=!0),t.memoizedState=s):(un(s,n)||(s=hr(),wt.lanes|=s,po|=s,t.baseState=!0),n)}function px(t,n){var s=rt;rt=s!==0&&4>s?s:4,t(!0);var p=Vc.transition;Vc.transition={};try{t(!1),n()}finally{rt=s,Vc.transition=p}}function pm(){return Ki().memoizedState}function _x(t,n,s){var p=Nr(t);if(s={lane:p,action:s,hasEagerState:!1,eagerState:null,next:null},_m(t))mm(n,s);else if(s=H_(t,n,s,p),s!==null){var g=mi();mn(s,t,p,g),fm(s,n,p)}}function mx(t,n,s){var p=Nr(t),g={lane:p,action:s,hasEagerState:!1,eagerState:null,next:null};if(_m(t))mm(n,g);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var N=n.lastRenderedState,$=v(N,s);if(g.hasEagerState=!0,g.eagerState=$,un($,N)){var K=n.interleaved;K===null?(g.next=g,Ic(n)):(g.next=K.next,K.next=g),n.interleaved=g;return}}catch{}finally{}s=H_(t,n,g,p),s!==null&&(g=mi(),mn(s,t,p,g),fm(s,n,p))}}function _m(t){var n=t.alternate;return t===wt||n!==null&&n===wt}function mm(t,n){Aa=_l=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function fm(t,n,s){if((s&4194240)!==0){var p=n.lanes;p&=t.pendingLanes,s|=p,n.lanes=s,Ae(t,s)}}var hl={readContext:Yi,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},fx={readContext:Yi,useCallback:function(t,n){return Pn().memoizedState=[t,n===void 0?null:n],t},useContext:Yi,useEffect:rm,useImperativeHandle:function(t,n,s){return s=s!=null?s.concat([t]):null,ml(4194308,4,sm.bind(null,n,t),s)},useLayoutEffect:function(t,n){return ml(4194308,4,t,n)},useInsertionEffect:function(t,n){return ml(4,2,t,n)},useMemo:function(t,n){var s=Pn();return n=n===void 0?null:n,t=t(),s.memoizedState=[t,n],t},useReducer:function(t,n,s){var p=Pn();return n=s!==void 0?s(n):n,p.memoizedState=p.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},p.queue=t,t=t.dispatch=_x.bind(null,wt,t),[p.memoizedState,t]},useRef:function(t){var n=Pn();return t={current:t},n.memoizedState=t},useState:im,useDebugValue:Ac,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=im(!1),n=t[0];return t=px.bind(null,t[1]),Pn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,s){var p=wt,g=Pn();if(ft){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),Ht===null)throw Error(r(349));(co&30)!==0||X_(p,n,s)}g.memoizedState=s;var v={value:s,getSnapshot:n};return g.queue=v,rm(J_.bind(null,p,v,t),[t]),p.flags|=2048,Wa(9,Z_.bind(null,p,v,s,n),void 0,null),s},useId:function(){var t=Pn(),n=Ht.identifierPrefix;if(ft){var s=er,p=Jn;s=(p&~(1<<32-ci(p)-1)).toString(32)+s,n=":"+n+"R"+s,s=$a++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=dx++,n=":"+n+"r"+s.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},hx={readContext:Yi,useCallback:um,useContext:Yi,useEffect:Bc,useImperativeHandle:lm,useInsertionEffect:om,useLayoutEffect:am,useMemo:cm,useReducer:Lc,useRef:nm,useState:function(){return Lc(Ha)},useDebugValue:Ac,useDeferredValue:function(t){var n=Ki();return dm(n,Vt.memoizedState,t)},useTransition:function(){var t=Lc(Ha)[0],n=Ki().memoizedState;return[t,n]},useMutableSource:K_,useSyncExternalStore:Q_,useId:pm,unstable_isNewReconciler:!1},yx={readContext:Yi,useCallback:um,useContext:Yi,useEffect:Bc,useImperativeHandle:lm,useInsertionEffect:om,useLayoutEffect:am,useMemo:cm,useReducer:Oc,useRef:nm,useState:function(){return Oc(Ha)},useDebugValue:Ac,useDeferredValue:function(t){var n=Ki();return Vt===null?n.memoizedState=t:dm(n,Vt.memoizedState,t)},useTransition:function(){var t=Oc(Ha)[0],n=Ki().memoizedState;return[t,n]},useMutableSource:K_,useSyncExternalStore:Q_,useId:pm,unstable_isNewReconciler:!1};function dn(t,n){if(t&&t.defaultProps){n=te({},n),t=t.defaultProps;for(var s in t)n[s]===void 0&&(n[s]=t[s]);return n}return n}function $c(t,n,s,p){n=t.memoizedState,s=s(p,n),s=s==null?n:te({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var yl={isMounted:function(t){return(t=t._reactInternals)?kt(t)===t:!1},enqueueSetState:function(t,n,s){t=t._reactInternals;var p=mi(),g=Nr(t),v=ir(p,g);v.payload=n,s!=null&&(v.callback=s),n=Cr(t,v,g),n!==null&&(mn(n,t,g,p),ul(n,t,g))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var p=mi(),g=Nr(t),v=ir(p,g);v.tag=1,v.payload=n,s!=null&&(v.callback=s),n=Cr(t,v,g),n!==null&&(mn(n,t,g,p),ul(n,t,g))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=mi(),p=Nr(t),g=ir(s,p);g.tag=2,n!=null&&(g.callback=n),n=Cr(t,g,p),n!==null&&(mn(n,t,p,s),ul(n,t,p))}};function hm(t,n,s,p,g,v,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,v,N):n.prototype&&n.prototype.isPureReactComponent?!ja(s,p)||!ja(g,v):!0}function ym(t,n,s){var p=!1,g=kr,v=n.contextType;return typeof v=="object"&&v!==null?v=Yi(v):(g=vi(n)?oo:ei.current,p=n.contextTypes,v=(p=p!=null)?$o(t,g):kr),n=new n(s,v),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=yl,t.stateNode=n,n._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=g,t.__reactInternalMemoizedMaskedChildContext=v),n}function gm(t,n,s,p){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,p),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,p),n.state!==t&&yl.enqueueReplaceState(n,n.state,null)}function Hc(t,n,s,p){var g=t.stateNode;g.props=s,g.state=t.memoizedState,g.refs={},Nc(t);var v=n.contextType;typeof v=="object"&&v!==null?g.context=Yi(v):(v=vi(n)?oo:ei.current,g.context=$o(t,v)),g.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&($c(t,n,v,s),g.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(n=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),n!==g.state&&yl.enqueueReplaceState(g,g.state,null),cl(t,s,g,p),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308)}function Xo(t,n){try{var s="",p=n;do s+=he(p),p=p.return;while(p);var g=s}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:n,stack:g,digest:null}}function Wc(t,n,s){return{value:t,source:null,stack:s??null,digest:n??null}}function Uc(t,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var gx=typeof WeakMap=="function"?WeakMap:Map;function xm(t,n,s){s=ir(-1,s),s.tag=3,s.payload={element:null};var p=n.value;return s.callback=function(){Sl||(Sl=!0,sd=p),Uc(t,n)},s}function vm(t,n,s){s=ir(-1,s),s.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var g=n.value;s.payload=function(){return p(g)},s.callback=function(){Uc(t,n)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){Uc(t,n),typeof p!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})}),s}function wm(t,n,s){var p=t.pingCache;if(p===null){p=t.pingCache=new gx;var g=new Set;p.set(n,g)}else g=p.get(n),g===void 0&&(g=new Set,p.set(n,g));g.has(s)||(g.add(s),t=Px.bind(null,t,n,s),n.then(t,t))}function bm(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function km(t,n,s,p,g){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=ir(-1,1),n.tag=2,Cr(s,n,1))),s.lanes|=1),t):(t.flags|=65536,t.lanes=g,t)}var xx=E.ReactCurrentOwner,wi=!1;function _i(t,n,s,p){n.child=t===null?$_(n,null,s,p):Go(n,t.child,s,p)}function Sm(t,n,s,p,g){s=s.render;var v=n.ref;return Ko(n,g),p=Dc(t,n,s,p,v,g),s=zc(),t!==null&&!wi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~g,nr(t,n,g)):(ft&&s&&vc(n),n.flags|=1,_i(t,n,p,g),n.child)}function Mm(t,n,s,p,g){if(t===null){var v=s.type;return typeof v=="function"&&!md(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,Cm(t,n,v,p,g)):(t=Nl(s.type,null,p,n,n.mode,g),t.ref=n.ref,t.return=n,n.child=t)}if(v=t.child,(t.lanes&g)===0){var N=v.memoizedProps;if(s=s.compare,s=s!==null?s:ja,s(N,p)&&t.ref===n.ref)return nr(t,n,g)}return n.flags|=1,t=Pr(v,p),t.ref=n.ref,t.return=n,n.child=t}function Cm(t,n,s,p,g){if(t!==null){var v=t.memoizedProps;if(ja(v,p)&&t.ref===n.ref)if(wi=!1,n.pendingProps=p=v,(t.lanes&g)!==0)(t.flags&131072)!==0&&(wi=!0);else return n.lanes=t.lanes,nr(t,n,g)}return Gc(t,n,s,p,g)}function qm(t,n,s){var p=n.pendingProps,g=p.children,v=t!==null?t.memoizedState:null;if(p.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Jo,Ri),Ri|=s;else{if((s&1073741824)===0)return t=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,ot(Jo,Ri),Ri|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:s,ot(Jo,Ri),Ri|=p}else v!==null?(p=v.baseLanes|s,n.memoizedState=null):p=s,ot(Jo,Ri),Ri|=p;return _i(t,n,g,s),n.child}function Em(t,n){var s=n.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Gc(t,n,s,p,g){var v=vi(s)?oo:ei.current;return v=$o(n,v),Ko(n,g),s=Dc(t,n,s,p,v,g),p=zc(),t!==null&&!wi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~g,nr(t,n,g)):(ft&&p&&vc(n),n.flags|=1,_i(t,n,s,g),n.child)}function Im(t,n,s,p,g){if(vi(s)){var v=!0;tl(n)}else v=!1;if(Ko(n,g),n.stateNode===null)xl(t,n),ym(n,s,p),Hc(n,s,p,g),p=!0;else if(t===null){var N=n.stateNode,$=n.memoizedProps;N.props=$;var K=N.context,se=s.contextType;typeof se=="object"&&se!==null?se=Yi(se):(se=vi(s)?oo:ei.current,se=$o(n,se));var ve=s.getDerivedStateFromProps,we=typeof ve=="function"||typeof N.getSnapshotBeforeUpdate=="function";we||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==p||K!==se)&&gm(n,N,p,se),Mr=!1;var ge=n.memoizedState;N.state=ge,cl(n,p,N,g),K=n.memoizedState,$!==p||ge!==K||xi.current||Mr?(typeof ve=="function"&&($c(n,s,ve,p),K=n.memoizedState),($=Mr||hm(n,s,$,p,ge,K,se))?(we||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(n.flags|=4194308)):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=p,n.memoizedState=K),N.props=p,N.state=K,N.context=se,p=$):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),p=!1)}else{N=n.stateNode,W_(t,n),$=n.memoizedProps,se=n.type===n.elementType?$:dn(n.type,$),N.props=se,we=n.pendingProps,ge=N.context,K=s.contextType,typeof K=="object"&&K!==null?K=Yi(K):(K=vi(s)?oo:ei.current,K=$o(n,K));var je=s.getDerivedStateFromProps;(ve=typeof je=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==we||ge!==K)&&gm(n,N,p,K),Mr=!1,ge=n.memoizedState,N.state=ge,cl(n,p,N,g);var Te=n.memoizedState;$!==we||ge!==Te||xi.current||Mr?(typeof je=="function"&&($c(n,s,je,p),Te=n.memoizedState),(se=Mr||hm(n,s,se,p,ge,Te,K)||!1)?(ve||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(p,Te,K),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(p,Te,K)),typeof N.componentDidUpdate=="function"&&(n.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof N.componentDidUpdate!="function"||$===t.memoizedProps&&ge===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&ge===t.memoizedState||(n.flags|=1024),n.memoizedProps=p,n.memoizedState=Te),N.props=p,N.state=Te,N.context=K,p=se):(typeof N.componentDidUpdate!="function"||$===t.memoizedProps&&ge===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&ge===t.memoizedState||(n.flags|=1024),p=!1)}return Yc(t,n,s,p,v,g)}function Yc(t,n,s,p,g,v){Em(t,n);var N=(n.flags&128)!==0;if(!p&&!N)return g&&R_(n,s,!1),nr(t,n,v);p=n.stateNode,xx.current=n;var $=N&&typeof s.getDerivedStateFromError!="function"?null:p.render();return n.flags|=1,t!==null&&N?(n.child=Go(n,t.child,null,v),n.child=Go(n,null,$,v)):_i(t,n,$,v),n.memoizedState=p.state,g&&R_(n,s,!0),n.child}function Nm(t){var n=t.stateNode;n.pendingContext?P_(t,n.pendingContext,n.pendingContext!==n.context):n.context&&P_(t,n.context,!1),jc(t,n.containerInfo)}function jm(t,n,s,p,g){return Uo(),Sc(g),n.flags|=256,_i(t,n,s,p),n.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Qc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pm(t,n,s){var p=n.pendingProps,g=vt.current,v=!1,N=(n.flags&128)!==0,$;if(($=N)||($=t!==null&&t.memoizedState===null?!1:(g&2)!==0),$?(v=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(g|=1),ot(vt,g&1),t===null)return kc(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(N=p.children,t=p.fallback,v?(p=n.mode,v=n.child,N={mode:"hidden",children:N},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=N):v=jl(N,p,0,null),t=ho(t,p,s,null),v.return=n,t.return=n,v.sibling=t,n.child=v,n.child.memoizedState=Qc(s),n.memoizedState=Kc,t):Xc(n,N));if(g=t.memoizedState,g!==null&&($=g.dehydrated,$!==null))return vx(t,n,N,p,$,g,s);if(v){v=p.fallback,N=n.mode,g=t.child,$=g.sibling;var K={mode:"hidden",children:p.children};return(N&1)===0&&n.child!==g?(p=n.child,p.childLanes=0,p.pendingProps=K,n.deletions=null):(p=Pr(g,K),p.subtreeFlags=g.subtreeFlags&14680064),$!==null?v=Pr($,v):(v=ho(v,N,s,null),v.flags|=2),v.return=n,p.return=n,p.sibling=v,n.child=p,p=v,v=n.child,N=t.child.memoizedState,N=N===null?Qc(s):{baseLanes:N.baseLanes|s,cachePool:null,transitions:N.transitions},v.memoizedState=N,v.childLanes=t.childLanes&~s,n.memoizedState=Kc,p}return v=t.child,t=v.sibling,p=Pr(v,{mode:"visible",children:p.children}),(n.mode&1)===0&&(p.lanes=s),p.return=n,p.sibling=null,t!==null&&(s=n.deletions,s===null?(n.deletions=[t],n.flags|=16):s.push(t)),n.child=p,n.memoizedState=null,p}function Xc(t,n){return n=jl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function gl(t,n,s,p){return p!==null&&Sc(p),Go(n,t.child,null,s),t=Xc(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function vx(t,n,s,p,g,v,N){if(s)return n.flags&256?(n.flags&=-257,p=Wc(Error(r(422))),gl(t,n,N,p)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(v=p.fallback,g=n.mode,p=jl({mode:"visible",children:p.children},g,0,null),v=ho(v,g,N,null),v.flags|=2,p.return=n,v.return=n,p.sibling=v,n.child=p,(n.mode&1)!==0&&Go(n,t.child,null,N),n.child.memoizedState=Qc(N),n.memoizedState=Kc,v);if((n.mode&1)===0)return gl(t,n,N,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var $=p.dgst;return p=$,v=Error(r(419)),p=Wc(v,p,void 0),gl(t,n,N,p)}if($=(N&t.childLanes)!==0,wi||$){if(p=Ht,p!==null){switch(N&-N){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|N))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,tr(t,g),mn(p,t,g,-1))}return _d(),p=Wc(Error(r(421))),gl(t,n,N,p)}return g.data==="$?"?(n.flags|=128,n.child=t.child,n=Tx.bind(null,t),g._reactRetry=n,null):(t=v.treeContext,Ti=wr(g.nextSibling),Pi=n,ft=!0,cn=null,t!==null&&(Ui[Gi++]=Jn,Ui[Gi++]=er,Ui[Gi++]=ao,Jn=t.id,er=t.overflow,ao=n),n=Xc(n,p.children),n.flags|=4096,n)}function Tm(t,n,s){t.lanes|=n;var p=t.alternate;p!==null&&(p.lanes|=n),Ec(t.return,n,s)}function Zc(t,n,s,p,g){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:p,tail:s,tailMode:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=s,v.tailMode=g)}function Rm(t,n,s){var p=n.pendingProps,g=p.revealOrder,v=p.tail;if(_i(t,n,p.children,s),p=vt.current,(p&2)!==0)p=p&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tm(t,s,n);else if(t.tag===19)Tm(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(ot(vt,p),(n.mode&1)===0)n.memoizedState=null;else switch(g){case"forwards":for(s=n.child,g=null;s!==null;)t=s.alternate,t!==null&&dl(t)===null&&(g=s),s=s.sibling;s=g,s===null?(g=n.child,n.child=null):(g=s.sibling,s.sibling=null),Zc(n,!1,g,s,v);break;case"backwards":for(s=null,g=n.child,n.child=null;g!==null;){if(t=g.alternate,t!==null&&dl(t)===null){n.child=g;break}t=g.sibling,g.sibling=s,s=g,g=t}Zc(n,!0,s,null,v);break;case"together":Zc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function xl(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function nr(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),po|=n.lanes,(s&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,s=Pr(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Pr(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function wx(t,n,s){switch(n.tag){case 3:Nm(n),Uo();break;case 5:Y_(n);break;case 1:vi(n.type)&&tl(n);break;case 4:jc(n,n.stateNode.containerInfo);break;case 10:var p=n.type._context,g=n.memoizedProps.value;ot(sl,p._currentValue),p._currentValue=g;break;case 13:if(p=n.memoizedState,p!==null)return p.dehydrated!==null?(ot(vt,vt.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Pm(t,n,s):(ot(vt,vt.current&1),t=nr(t,n,s),t!==null?t.sibling:null);ot(vt,vt.current&1);break;case 19:if(p=(s&n.childLanes)!==0,(t.flags&128)!==0){if(p)return Rm(t,n,s);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(vt,vt.current),p)break;return null;case 22:case 23:return n.lanes=0,qm(t,n,s)}return nr(t,n,s)}var Vm,Jc,Fm,Dm;Vm=function(t,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Jc=function(){},Fm=function(t,n,s,p){var g=t.memoizedProps;if(g!==p){t=n.stateNode,uo(jn.current);var v=null;switch(s){case"input":g=ze(t,g),p=ze(t,p),v=[];break;case"select":g=te({},g,{value:void 0}),p=te({},p,{value:void 0}),v=[];break;case"textarea":g=hi(t,g),p=hi(t,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=Zs)}Mt(s,p);var N;s=null;for(se in g)if(!p.hasOwnProperty(se)&&g.hasOwnProperty(se)&&g[se]!=null)if(se==="style"){var $=g[se];for(N in $)$.hasOwnProperty(N)&&(s||(s={}),s[N]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(a.hasOwnProperty(se)?v||(v=[]):(v=v||[]).push(se,null));for(se in p){var K=p[se];if($=g!=null?g[se]:void 0,p.hasOwnProperty(se)&&K!==$&&(K!=null||$!=null))if(se==="style")if($){for(N in $)!$.hasOwnProperty(N)||K&&K.hasOwnProperty(N)||(s||(s={}),s[N]="");for(N in K)K.hasOwnProperty(N)&&$[N]!==K[N]&&(s||(s={}),s[N]=K[N])}else s||(v||(v=[]),v.push(se,s)),s=K;else se==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,$=$?$.__html:void 0,K!=null&&$!==K&&(v=v||[]).push(se,K)):se==="children"?typeof K!="string"&&typeof K!="number"||(v=v||[]).push(se,""+K):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(a.hasOwnProperty(se)?(K!=null&&se==="onScroll"&&ct("scroll",t),v||$===K||(v=[])):(v=v||[]).push(se,K))}s&&(v=v||[]).push("style",s);var se=v;(n.updateQueue=se)&&(n.flags|=4)}},Dm=function(t,n,s,p){s!==p&&(n.flags|=4)};function Ua(t,n){if(!ft)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var p=null;s!==null;)s.alternate!==null&&(p=s),s=s.sibling;p===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ii(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,p=0;if(n)for(var g=t.child;g!==null;)s|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=t,g=g.sibling;else for(g=t.child;g!==null;)s|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=t,g=g.sibling;return t.subtreeFlags|=p,t.childLanes=s,n}function bx(t,n,s){var p=n.pendingProps;switch(wc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(n),null;case 1:return vi(n.type)&&el(),ii(n),null;case 3:return p=n.stateNode,Qo(),dt(xi),dt(ei),Rc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(ol(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,cn!==null&&(cd(cn),cn=null))),Jc(t,n),ii(n),null;case 5:Pc(n);var g=uo(Ba.current);if(s=n.type,t!==null&&n.stateNode!=null)Fm(t,n,s,p,g),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!p){if(n.stateNode===null)throw Error(r(166));return ii(n),null}if(t=uo(jn.current),ol(n)){p=n.stateNode,s=n.type;var v=n.memoizedProps;switch(p[Nn]=n,p[Fa]=v,t=(n.mode&1)!==0,s){case"dialog":ct("cancel",p),ct("close",p);break;case"iframe":case"object":case"embed":ct("load",p);break;case"video":case"audio":for(g=0;g<Ta.length;g++)ct(Ta[g],p);break;case"source":ct("error",p);break;case"img":case"image":case"link":ct("error",p),ct("load",p);break;case"details":ct("toggle",p);break;case"input":Ye(p,v),ct("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},ct("invalid",p);break;case"textarea":Ci(p,v),ct("invalid",p)}Mt(s,v),g=null;for(var N in v)if(v.hasOwnProperty(N)){var $=v[N];N==="children"?typeof $=="string"?p.textContent!==$&&(v.suppressHydrationWarning!==!0&&Xs(p.textContent,$,t),g=["children",$]):typeof $=="number"&&p.textContent!==""+$&&(v.suppressHydrationWarning!==!0&&Xs(p.textContent,$,t),g=["children",""+$]):a.hasOwnProperty(N)&&$!=null&&N==="onScroll"&&ct("scroll",p)}switch(s){case"input":Le(p),bt(p,v,!0);break;case"textarea":Le(p),Oi(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=Zs)}p=g,n.updateQueue=p,p!==null&&(n.flags|=4)}else{N=g.nodeType===9?g:g.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zt(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=N.createElement(s,{is:p.is}):(t=N.createElement(s),s==="select"&&(N=t,p.multiple?N.multiple=!0:p.size&&(N.size=p.size))):t=N.createElementNS(t,s),t[Nn]=n,t[Fa]=p,Vm(t,n,!1,!1),n.stateNode=t;e:{switch(N=Ji(s,p),s){case"dialog":ct("cancel",t),ct("close",t),g=p;break;case"iframe":case"object":case"embed":ct("load",t),g=p;break;case"video":case"audio":for(g=0;g<Ta.length;g++)ct(Ta[g],t);g=p;break;case"source":ct("error",t),g=p;break;case"img":case"image":case"link":ct("error",t),ct("load",t),g=p;break;case"details":ct("toggle",t),g=p;break;case"input":Ye(t,p),g=ze(t,p),ct("invalid",t);break;case"option":g=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},g=te({},p,{value:void 0}),ct("invalid",t);break;case"textarea":Ci(t,p),g=hi(t,p),ct("invalid",t);break;default:g=p}Mt(s,g),$=g;for(v in $)if($.hasOwnProperty(v)){var K=$[v];v==="style"?Xe(t,K):v==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Sn(t,K)):v==="children"?typeof K=="string"?(s!=="textarea"||K!=="")&&zt(t,K):typeof K=="number"&&zt(t,""+K):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?K!=null&&v==="onScroll"&&ct("scroll",t):K!=null&&M(t,v,K,N))}switch(s){case"input":Le(t),bt(t,p,!1);break;case"textarea":Le(t),Oi(t);break;case"option":p.value!=null&&t.setAttribute("value",""+ce(p.value));break;case"select":t.multiple=!!p.multiple,v=p.value,v!=null?Dt(t,!!p.multiple,v,!1):p.defaultValue!=null&&Dt(t,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(t.onclick=Zs)}switch(s){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return ii(n),null;case 6:if(t&&n.stateNode!=null)Dm(t,n,t.memoizedProps,p);else{if(typeof p!="string"&&n.stateNode===null)throw Error(r(166));if(s=uo(Ba.current),uo(jn.current),ol(n)){if(p=n.stateNode,s=n.memoizedProps,p[Nn]=n,(v=p.nodeValue!==s)&&(t=Pi,t!==null))switch(t.tag){case 3:Xs(p.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xs(p.nodeValue,s,(t.mode&1)!==0)}v&&(n.flags|=4)}else p=(s.nodeType===9?s:s.ownerDocument).createTextNode(p),p[Nn]=n,n.stateNode=p}return ii(n),null;case 13:if(dt(vt),p=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&Ti!==null&&(n.mode&1)!==0&&(n.flags&128)===0)O_(),Uo(),n.flags|=98560,v=!1;else if(v=ol(n),p!==null&&p.dehydrated!==null){if(t===null){if(!v)throw Error(r(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Nn]=n}else Uo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ii(n),v=!1}else cn!==null&&(cd(cn),cn=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(vt.current&1)!==0?Ft===0&&(Ft=3):_d())),n.updateQueue!==null&&(n.flags|=4),ii(n),null);case 4:return Qo(),Jc(t,n),t===null&&Ra(n.stateNode.containerInfo),ii(n),null;case 10:return qc(n.type._context),ii(n),null;case 17:return vi(n.type)&&el(),ii(n),null;case 19:if(dt(vt),v=n.memoizedState,v===null)return ii(n),null;if(p=(n.flags&128)!==0,N=v.rendering,N===null)if(p)Ua(v,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(N=dl(t),N!==null){for(n.flags|=128,Ua(v,!1),p=N.updateQueue,p!==null&&(n.updateQueue=p,n.flags|=4),n.subtreeFlags=0,p=s,s=n.child;s!==null;)v=s,t=p,v.flags&=14680066,N=v.alternate,N===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=N.childLanes,v.lanes=N.lanes,v.child=N.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=N.memoizedProps,v.memoizedState=N.memoizedState,v.updateQueue=N.updateQueue,v.type=N.type,t=N.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ot(vt,vt.current&1|2),n.child}t=t.sibling}v.tail!==null&&lt()>ea&&(n.flags|=128,p=!0,Ua(v,!1),n.lanes=4194304)}else{if(!p)if(t=dl(N),t!==null){if(n.flags|=128,p=!0,s=t.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Ua(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!ft)return ii(n),null}else 2*lt()-v.renderingStartTime>ea&&s!==1073741824&&(n.flags|=128,p=!0,Ua(v,!1),n.lanes=4194304);v.isBackwards?(N.sibling=n.child,n.child=N):(s=v.last,s!==null?s.sibling=N:n.child=N,v.last=N)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=lt(),n.sibling=null,s=vt.current,ot(vt,p?s&1|2:s&1),n):(ii(n),null);case 22:case 23:return pd(),p=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(n.flags|=8192),p&&(n.mode&1)!==0?(Ri&1073741824)!==0&&(ii(n),n.subtreeFlags&6&&(n.flags|=8192)):ii(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function kx(t,n){switch(wc(n),n.tag){case 1:return vi(n.type)&&el(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Qo(),dt(xi),dt(ei),Rc(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Pc(n),null;case 13:if(dt(vt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Uo()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return dt(vt),null;case 4:return Qo(),null;case 10:return qc(n.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var vl=!1,ni=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Zo(t,n){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(p){St(t,n,p)}else s.current=null}function ed(t,n,s){try{s()}catch(p){St(t,n,p)}}var zm=!1;function Mx(t,n){if(pc=Ro,t=h_(),rc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var p=s.getSelection&&s.getSelection();if(p&&p.rangeCount!==0){s=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var N=0,$=-1,K=-1,se=0,ve=0,we=t,ge=null;t:for(;;){for(var je;we!==s||g!==0&&we.nodeType!==3||($=N+g),we!==v||p!==0&&we.nodeType!==3||(K=N+p),we.nodeType===3&&(N+=we.nodeValue.length),(je=we.firstChild)!==null;)ge=we,we=je;for(;;){if(we===t)break t;if(ge===s&&++se===g&&($=N),ge===v&&++ve===p&&(K=N),(je=we.nextSibling)!==null)break;we=ge,ge=we.parentNode}we=je}s=$===-1||K===-1?null:{start:$,end:K}}else s=null}s=s||{start:0,end:0}}else s=null;for(_c={focusedElem:t,selectionRange:s},Ro=!1,Pe=n;Pe!==null;)if(n=Pe,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Pe=t;else for(;Pe!==null;){n=Pe;try{var Te=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ve=Te.memoizedProps,qt=Te.memoizedState,ne=n.stateNode,ee=ne.getSnapshotBeforeUpdate(n.elementType===n.type?Ve:dn(n.type,Ve),qt);ne.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var re=n.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ce){St(n,n.return,Ce)}if(t=n.sibling,t!==null){t.return=n.return,Pe=t;break}Pe=n.return}return Te=zm,zm=!1,Te}function Ga(t,n,s){var p=n.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&t)===t){var v=g.destroy;g.destroy=void 0,v!==void 0&&ed(n,s,v)}g=g.next}while(g!==p)}}function wl(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var p=s.create;s.destroy=p()}s=s.next}while(s!==n)}}function td(t){var n=t.ref;if(n!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof n=="function"?n(t):n.current=t}}function Lm(t){var n=t.alternate;n!==null&&(t.alternate=null,Lm(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Nn],delete n[Fa],delete n[yc],delete n[sx],delete n[lx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Om(t){return t.tag===5||t.tag===3||t.tag===4}function Bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Om(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function id(t,n,s){var p=t.tag;if(p===5||p===6)t=t.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(t,n):s.insertBefore(t,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(t,s)):(n=s,n.appendChild(t)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Zs));else if(p!==4&&(t=t.child,t!==null))for(id(t,n,s),t=t.sibling;t!==null;)id(t,n,s),t=t.sibling}function nd(t,n,s){var p=t.tag;if(p===5||p===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(nd(t,n,s),t=t.sibling;t!==null;)nd(t,n,s),t=t.sibling}var Qt=null,pn=!1;function qr(t,n,s){for(s=s.child;s!==null;)Am(t,n,s),s=s.sibling}function Am(t,n,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(qn,s)}catch{}switch(s.tag){case 5:ni||Zo(s,n);case 6:var p=Qt,g=pn;Qt=null,qr(t,n,s),Qt=p,pn=g,Qt!==null&&(pn?(t=Qt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Qt.removeChild(s.stateNode));break;case 18:Qt!==null&&(pn?(t=Qt,s=s.stateNode,t.nodeType===8?hc(t.parentNode,s):t.nodeType===1&&hc(t,s),Jr(t)):hc(Qt,s.stateNode));break;case 4:p=Qt,g=pn,Qt=s.stateNode.containerInfo,pn=!0,qr(t,n,s),Qt=p,pn=g;break;case 0:case 11:case 14:case 15:if(!ni&&(p=s.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,N=v.destroy;v=v.tag,N!==void 0&&((v&2)!==0||(v&4)!==0)&&ed(s,n,N),g=g.next}while(g!==p)}qr(t,n,s);break;case 1:if(!ni&&(Zo(s,n),p=s.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=s.memoizedProps,p.state=s.memoizedState,p.componentWillUnmount()}catch($){St(s,n,$)}qr(t,n,s);break;case 21:qr(t,n,s);break;case 22:s.mode&1?(ni=(p=ni)||s.memoizedState!==null,qr(t,n,s),ni=p):qr(t,n,s);break;default:qr(t,n,s)}}function $m(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Sx),n.forEach(function(p){var g=Rx.bind(null,t,p);s.has(p)||(s.add(p),p.then(g,g))})}}function _n(t,n){var s=n.deletions;if(s!==null)for(var p=0;p<s.length;p++){var g=s[p];try{var v=t,N=n,$=N;e:for(;$!==null;){switch($.tag){case 5:Qt=$.stateNode,pn=!1;break e;case 3:Qt=$.stateNode.containerInfo,pn=!0;break e;case 4:Qt=$.stateNode.containerInfo,pn=!0;break e}$=$.return}if(Qt===null)throw Error(r(160));Am(v,N,g),Qt=null,pn=!1;var K=g.alternate;K!==null&&(K.return=null),g.return=null}catch(se){St(g,n,se)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Hm(n,t),n=n.sibling}function Hm(t,n){var s=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(n,t),Tn(t),p&4){try{Ga(3,t,t.return),wl(3,t)}catch(Ve){St(t,t.return,Ve)}try{Ga(5,t,t.return)}catch(Ve){St(t,t.return,Ve)}}break;case 1:_n(n,t),Tn(t),p&512&&s!==null&&Zo(s,s.return);break;case 5:if(_n(n,t),Tn(t),p&512&&s!==null&&Zo(s,s.return),t.flags&32){var g=t.stateNode;try{zt(g,"")}catch(Ve){St(t,t.return,Ve)}}if(p&4&&(g=t.stateNode,g!=null)){var v=t.memoizedProps,N=s!==null?s.memoizedProps:v,$=t.type,K=t.updateQueue;if(t.updateQueue=null,K!==null)try{$==="input"&&v.type==="radio"&&v.name!=null&&Ge(g,v),Ji($,N);var se=Ji($,v);for(N=0;N<K.length;N+=2){var ve=K[N],we=K[N+1];ve==="style"?Xe(g,we):ve==="dangerouslySetInnerHTML"?Sn(g,we):ve==="children"?zt(g,we):M(g,ve,we,se)}switch($){case"input":at(g,v);break;case"textarea":Bn(g,v);break;case"select":var ge=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var je=v.value;je!=null?Dt(g,!!v.multiple,je,!1):ge!==!!v.multiple&&(v.defaultValue!=null?Dt(g,!!v.multiple,v.defaultValue,!0):Dt(g,!!v.multiple,v.multiple?[]:"",!1))}g[Fa]=v}catch(Ve){St(t,t.return,Ve)}}break;case 6:if(_n(n,t),Tn(t),p&4){if(t.stateNode===null)throw Error(r(162));g=t.stateNode,v=t.memoizedProps;try{g.nodeValue=v}catch(Ve){St(t,t.return,Ve)}}break;case 3:if(_n(n,t),Tn(t),p&4&&s!==null&&s.memoizedState.isDehydrated)try{Jr(n.containerInfo)}catch(Ve){St(t,t.return,Ve)}break;case 4:_n(n,t),Tn(t);break;case 13:_n(n,t),Tn(t),g=t.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(ad=lt())),p&4&&$m(t);break;case 22:if(ve=s!==null&&s.memoizedState!==null,t.mode&1?(ni=(se=ni)||ve,_n(n,t),ni=se):_n(n,t),Tn(t),p&8192){if(se=t.memoizedState!==null,(t.stateNode.isHidden=se)&&!ve&&(t.mode&1)!==0)for(Pe=t,ve=t.child;ve!==null;){for(we=Pe=ve;Pe!==null;){switch(ge=Pe,je=ge.child,ge.tag){case 0:case 11:case 14:case 15:Ga(4,ge,ge.return);break;case 1:Zo(ge,ge.return);var Te=ge.stateNode;if(typeof Te.componentWillUnmount=="function"){p=ge,s=ge.return;try{n=p,Te.props=n.memoizedProps,Te.state=n.memoizedState,Te.componentWillUnmount()}catch(Ve){St(p,s,Ve)}}break;case 5:Zo(ge,ge.return);break;case 22:if(ge.memoizedState!==null){Gm(we);continue}}je!==null?(je.return=ge,Pe=je):Gm(we)}ve=ve.sibling}e:for(ve=null,we=t;;){if(we.tag===5){if(ve===null){ve=we;try{g=we.stateNode,se?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):($=we.stateNode,K=we.memoizedProps.style,N=K!=null&&K.hasOwnProperty("display")?K.display:null,$.style.display=An("display",N))}catch(Ve){St(t,t.return,Ve)}}}else if(we.tag===6){if(ve===null)try{we.stateNode.nodeValue=se?"":we.memoizedProps}catch(Ve){St(t,t.return,Ve)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===t)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===t)break e;for(;we.sibling===null;){if(we.return===null||we.return===t)break e;ve===we&&(ve=null),we=we.return}ve===we&&(ve=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:_n(n,t),Tn(t),p&4&&$m(t);break;case 21:break;default:_n(n,t),Tn(t)}}function Tn(t){var n=t.flags;if(n&2){try{e:{for(var s=t.return;s!==null;){if(Om(s)){var p=s;break e}s=s.return}throw Error(r(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(zt(g,""),p.flags&=-33);var v=Bm(t);nd(t,v,g);break;case 3:case 4:var N=p.stateNode.containerInfo,$=Bm(t);id(t,$,N);break;default:throw Error(r(161))}}catch(K){St(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Cx(t,n,s){Pe=t,Wm(t)}function Wm(t,n,s){for(var p=(t.mode&1)!==0;Pe!==null;){var g=Pe,v=g.child;if(g.tag===22&&p){var N=g.memoizedState!==null||vl;if(!N){var $=g.alternate,K=$!==null&&$.memoizedState!==null||ni;$=vl;var se=ni;if(vl=N,(ni=K)&&!se)for(Pe=g;Pe!==null;)N=Pe,K=N.child,N.tag===22&&N.memoizedState!==null?Ym(g):K!==null?(K.return=N,Pe=K):Ym(g);for(;v!==null;)Pe=v,Wm(v),v=v.sibling;Pe=g,vl=$,ni=se}Um(t)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Pe=v):Um(t)}}function Um(t){for(;Pe!==null;){var n=Pe;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:ni||wl(5,n);break;case 1:var p=n.stateNode;if(n.flags&4&&!ni)if(s===null)p.componentDidMount();else{var g=n.elementType===n.type?s.memoizedProps:dn(n.type,s.memoizedProps);p.componentDidUpdate(g,s.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&G_(n,v,p);break;case 3:var N=n.updateQueue;if(N!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}G_(n,N,s)}break;case 5:var $=n.stateNode;if(s===null&&n.flags&4){s=$;var K=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&s.focus();break;case"img":K.src&&(s.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var se=n.alternate;if(se!==null){var ve=se.memoizedState;if(ve!==null){var we=ve.dehydrated;we!==null&&Jr(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ni||n.flags&512&&td(n)}catch(ge){St(n,n.return,ge)}}if(n===t){Pe=null;break}if(s=n.sibling,s!==null){s.return=n.return,Pe=s;break}Pe=n.return}}function Gm(t){for(;Pe!==null;){var n=Pe;if(n===t){Pe=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Pe=s;break}Pe=n.return}}function Ym(t){for(;Pe!==null;){var n=Pe;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{wl(4,n)}catch(K){St(n,s,K)}break;case 1:var p=n.stateNode;if(typeof p.componentDidMount=="function"){var g=n.return;try{p.componentDidMount()}catch(K){St(n,g,K)}}var v=n.return;try{td(n)}catch(K){St(n,v,K)}break;case 5:var N=n.return;try{td(n)}catch(K){St(n,N,K)}}}catch(K){St(n,n.return,K)}if(n===t){Pe=null;break}var $=n.sibling;if($!==null){$.return=n.return,Pe=$;break}Pe=n.return}}var qx=Math.ceil,bl=E.ReactCurrentDispatcher,rd=E.ReactCurrentOwner,Qi=E.ReactCurrentBatchConfig,et=0,Ht=null,Nt=null,Xt=0,Ri=0,Jo=br(0),Ft=0,Ya=null,po=0,kl=0,od=0,Ka=null,bi=null,ad=0,ea=1/0,rr=null,Sl=!1,sd=null,Er=null,Ml=!1,Ir=null,Cl=0,Qa=0,ld=null,ql=-1,El=0;function mi(){return(et&6)!==0?lt():ql!==-1?ql:ql=lt()}function Nr(t){return(t.mode&1)===0?1:(et&2)!==0&&Xt!==0?Xt&-Xt:cx.transition!==null?(El===0&&(El=hr()),El):(t=rt,t!==0||(t=window.event,t=t===void 0?16:Ls(t.type)),t)}function mn(t,n,s,p){if(50<Qa)throw Qa=0,ld=null,Error(r(185));Hi(t,s,p),((et&2)===0||t!==Ht)&&(t===Ht&&((et&2)===0&&(kl|=s),Ft===4&&jr(t,Xt)),ki(t,p),s===1&&et===0&&(n.mode&1)===0&&(ea=lt()+500,il&&Sr()))}function ki(t,n){var s=t.callbackNode;wa(t,n);var p=on(t,t===Ht?Xt:0);if(p===0)s!==null&&mr(s),t.callbackNode=null,t.callbackPriority=0;else if(n=p&-p,t.callbackPriority!==n){if(s!=null&&mr(s),n===1)t.tag===0?ux(Qm.bind(null,t)):V_(Qm.bind(null,t)),ox(function(){(et&6)===0&&Sr()}),s=null;else{switch(Yr(p)){case 1:s=tn;break;case 4:s=Un;break;case 16:s=nn;break;case 536870912:s=$i;break;default:s=nn}s=of(s,Km.bind(null,t))}t.callbackPriority=n,t.callbackNode=s}}function Km(t,n){if(ql=-1,El=0,(et&6)!==0)throw Error(r(327));var s=t.callbackNode;if(ta()&&t.callbackNode!==s)return null;var p=on(t,t===Ht?Xt:0);if(p===0)return null;if((p&30)!==0||(p&t.expiredLanes)!==0||n)n=Il(t,p);else{n=p;var g=et;et|=2;var v=Zm();(Ht!==t||Xt!==n)&&(rr=null,ea=lt()+500,mo(t,n));do try{Nx();break}catch($){Xm(t,$)}while(!0);Cc(),bl.current=v,et=g,Nt!==null?n=0:(Ht=null,Xt=0,n=Ft)}if(n!==0){if(n===2&&(g=Kt(t),g!==0&&(p=g,n=ud(t,g))),n===1)throw s=Ya,mo(t,0),jr(t,p),ki(t,lt()),s;if(n===6)jr(t,p);else{if(g=t.current.alternate,(p&30)===0&&!Ex(g)&&(n=Il(t,p),n===2&&(v=Kt(t),v!==0&&(p=v,n=ud(t,v))),n===1))throw s=Ya,mo(t,0),jr(t,p),ki(t,lt()),s;switch(t.finishedWork=g,t.finishedLanes=p,n){case 0:case 1:throw Error(r(345));case 2:fo(t,bi,rr);break;case 3:if(jr(t,p),(p&130023424)===p&&(n=ad+500-lt(),10<n)){if(on(t,0)!==0)break;if(g=t.suspendedLanes,(g&p)!==p){mi(),t.pingedLanes|=t.suspendedLanes&g;break}t.timeoutHandle=fc(fo.bind(null,t,bi,rr),n);break}fo(t,bi,rr);break;case 4:if(jr(t,p),(p&4194240)===p)break;for(n=t.eventTimes,g=-1;0<p;){var N=31-ci(p);v=1<<N,N=n[N],N>g&&(g=N),p&=~v}if(p=g,p=lt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*qx(p/1960))-p,10<p){t.timeoutHandle=fc(fo.bind(null,t,bi,rr),p);break}fo(t,bi,rr);break;case 5:fo(t,bi,rr);break;default:throw Error(r(329))}}}return ki(t,lt()),t.callbackNode===s?Km.bind(null,t):null}function ud(t,n){var s=Ka;return t.current.memoizedState.isDehydrated&&(mo(t,n).flags|=256),t=Il(t,n),t!==2&&(n=bi,bi=s,n!==null&&cd(n)),t}function cd(t){bi===null?bi=t:bi.push.apply(bi,t)}function Ex(t){for(var n=t;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var p=0;p<s.length;p++){var g=s[p],v=g.getSnapshot;g=g.value;try{if(!un(v(),g))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function jr(t,n){for(n&=~od,n&=~kl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var s=31-ci(n),p=1<<s;t[s]=-1,n&=~p}}function Qm(t){if((et&6)!==0)throw Error(r(327));ta();var n=on(t,0);if((n&1)===0)return ki(t,lt()),null;var s=Il(t,n);if(t.tag!==0&&s===2){var p=Kt(t);p!==0&&(n=p,s=ud(t,p))}if(s===1)throw s=Ya,mo(t,0),jr(t,n),ki(t,lt()),s;if(s===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,fo(t,bi,rr),ki(t,lt()),null}function dd(t,n){var s=et;et|=1;try{return t(n)}finally{et=s,et===0&&(ea=lt()+500,il&&Sr())}}function _o(t){Ir!==null&&Ir.tag===0&&(et&6)===0&&ta();var n=et;et|=1;var s=Qi.transition,p=rt;try{if(Qi.transition=null,rt=1,t)return t()}finally{rt=p,Qi.transition=s,et=n,(et&6)===0&&Sr()}}function pd(){Ri=Jo.current,dt(Jo)}function mo(t,n){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,rx(s)),Nt!==null)for(s=Nt.return;s!==null;){var p=s;switch(wc(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&el();break;case 3:Qo(),dt(xi),dt(ei),Rc();break;case 5:Pc(p);break;case 4:Qo();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:qc(p.type._context);break;case 22:case 23:pd()}s=s.return}if(Ht=t,Nt=t=Pr(t.current,null),Xt=Ri=n,Ft=0,Ya=null,od=kl=po=0,bi=Ka=null,lo!==null){for(n=0;n<lo.length;n++)if(s=lo[n],p=s.interleaved,p!==null){s.interleaved=null;var g=p.next,v=s.pending;if(v!==null){var N=v.next;v.next=g,p.next=N}s.pending=p}lo=null}return t}function Xm(t,n){do{var s=Nt;try{if(Cc(),pl.current=hl,_l){for(var p=wt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}_l=!1}if(co=0,$t=Vt=wt=null,Aa=!1,$a=0,rd.current=null,s===null||s.return===null){Ft=1,Ya=n,Nt=null;break}e:{var v=t,N=s.return,$=s,K=n;if(n=Xt,$.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var se=K,ve=$,we=ve.tag;if((ve.mode&1)===0&&(we===0||we===11||we===15)){var ge=ve.alternate;ge?(ve.updateQueue=ge.updateQueue,ve.memoizedState=ge.memoizedState,ve.lanes=ge.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var je=bm(N);if(je!==null){je.flags&=-257,km(je,N,$,v,n),je.mode&1&&wm(v,se,n),n=je,K=se;var Te=n.updateQueue;if(Te===null){var Ve=new Set;Ve.add(K),n.updateQueue=Ve}else Te.add(K);break e}else{if((n&1)===0){wm(v,se,n),_d();break e}K=Error(r(426))}}else if(ft&&$.mode&1){var qt=bm(N);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),km(qt,N,$,v,n),Sc(Xo(K,$));break e}}v=K=Xo(K,$),Ft!==4&&(Ft=2),Ka===null?Ka=[v]:Ka.push(v),v=N;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var ne=xm(v,K,n);U_(v,ne);break e;case 1:$=K;var ee=v.type,re=v.stateNode;if((v.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Er===null||!Er.has(re)))){v.flags|=65536,n&=-n,v.lanes|=n;var Ce=vm(v,$,n);U_(v,Ce);break e}}v=v.return}while(v!==null)}ef(s)}catch(De){n=De,Nt===s&&s!==null&&(Nt=s=s.return);continue}break}while(!0)}function Zm(){var t=bl.current;return bl.current=hl,t===null?hl:t}function _d(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Ht===null||(po&268435455)===0&&(kl&268435455)===0||jr(Ht,Xt)}function Il(t,n){var s=et;et|=2;var p=Zm();(Ht!==t||Xt!==n)&&(rr=null,mo(t,n));do try{Ix();break}catch(g){Xm(t,g)}while(!0);if(Cc(),et=s,bl.current=p,Nt!==null)throw Error(r(261));return Ht=null,Xt=0,Ft}function Ix(){for(;Nt!==null;)Jm(Nt)}function Nx(){for(;Nt!==null&&!Wr();)Jm(Nt)}function Jm(t){var n=rf(t.alternate,t,Ri);t.memoizedProps=t.pendingProps,n===null?ef(t):Nt=n,rd.current=null}function ef(t){var n=t;do{var s=n.alternate;if(t=n.return,(n.flags&32768)===0){if(s=bx(s,n,Ri),s!==null){Nt=s;return}}else{if(s=kx(s,n),s!==null){s.flags&=32767,Nt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Nt=null;return}}if(n=n.sibling,n!==null){Nt=n;return}Nt=n=t}while(n!==null);Ft===0&&(Ft=5)}function fo(t,n,s){var p=rt,g=Qi.transition;try{Qi.transition=null,rt=1,jx(t,n,s,p)}finally{Qi.transition=g,rt=p}return null}function jx(t,n,s,p){do ta();while(Ir!==null);if((et&6)!==0)throw Error(r(327));s=t.finishedWork;var g=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var v=s.lanes|s.childLanes;if(Gr(t,v),t===Ht&&(Nt=Ht=null,Xt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ml||(Ml=!0,of(nn,function(){return ta(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Qi.transition,Qi.transition=null;var N=rt;rt=1;var $=et;et|=4,rd.current=null,Mx(t,s),Hm(s,t),Xg(_c),Ro=!!pc,_c=pc=null,t.current=s,Cx(s),Hn(),et=$,rt=N,Qi.transition=v}else t.current=s;if(Ml&&(Ml=!1,Ir=t,Cl=g),v=t.pendingLanes,v===0&&(Er=null),qo(s.stateNode),ki(t,lt()),n!==null)for(p=t.onRecoverableError,s=0;s<n.length;s++)g=n[s],p(g.value,{componentStack:g.stack,digest:g.digest});if(Sl)throw Sl=!1,t=sd,sd=null,t;return(Cl&1)!==0&&t.tag!==0&&ta(),v=t.pendingLanes,(v&1)!==0?t===ld?Qa++:(Qa=0,ld=t):Qa=0,Sr(),null}function ta(){if(Ir!==null){var t=Yr(Cl),n=Qi.transition,s=rt;try{if(Qi.transition=null,rt=16>t?16:t,Ir===null)var p=!1;else{if(t=Ir,Ir=null,Cl=0,(et&6)!==0)throw Error(r(331));var g=et;for(et|=4,Pe=t.current;Pe!==null;){var v=Pe,N=v.child;if((Pe.flags&16)!==0){var $=v.deletions;if($!==null){for(var K=0;K<$.length;K++){var se=$[K];for(Pe=se;Pe!==null;){var ve=Pe;switch(ve.tag){case 0:case 11:case 15:Ga(8,ve,v)}var we=ve.child;if(we!==null)we.return=ve,Pe=we;else for(;Pe!==null;){ve=Pe;var ge=ve.sibling,je=ve.return;if(Lm(ve),ve===se){Pe=null;break}if(ge!==null){ge.return=je,Pe=ge;break}Pe=je}}}var Te=v.alternate;if(Te!==null){var Ve=Te.child;if(Ve!==null){Te.child=null;do{var qt=Ve.sibling;Ve.sibling=null,Ve=qt}while(Ve!==null)}}Pe=v}}if((v.subtreeFlags&2064)!==0&&N!==null)N.return=v,Pe=N;else e:for(;Pe!==null;){if(v=Pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ga(9,v,v.return)}var ne=v.sibling;if(ne!==null){ne.return=v.return,Pe=ne;break e}Pe=v.return}}var ee=t.current;for(Pe=ee;Pe!==null;){N=Pe;var re=N.child;if((N.subtreeFlags&2064)!==0&&re!==null)re.return=N,Pe=re;else e:for(N=ee;Pe!==null;){if($=Pe,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:wl(9,$)}}catch(De){St($,$.return,De)}if($===N){Pe=null;break e}var Ce=$.sibling;if(Ce!==null){Ce.return=$.return,Pe=Ce;break e}Pe=$.return}}if(et=g,Sr(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(qn,t)}catch{}p=!0}return p}finally{rt=s,Qi.transition=n}}return!1}function tf(t,n,s){n=Xo(s,n),n=xm(t,n,1),t=Cr(t,n,1),n=mi(),t!==null&&(Hi(t,1,n),ki(t,n))}function St(t,n,s){if(t.tag===3)tf(t,t,s);else for(;n!==null;){if(n.tag===3){tf(n,t,s);break}else if(n.tag===1){var p=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Er===null||!Er.has(p))){t=Xo(s,t),t=vm(n,t,1),n=Cr(n,t,1),t=mi(),n!==null&&(Hi(n,1,t),ki(n,t));break}}n=n.return}}function Px(t,n,s){var p=t.pingCache;p!==null&&p.delete(n),n=mi(),t.pingedLanes|=t.suspendedLanes&s,Ht===t&&(Xt&s)===s&&(Ft===4||Ft===3&&(Xt&130023424)===Xt&&500>lt()-ad?mo(t,0):od|=s),ki(t,n)}function nf(t,n){n===0&&((t.mode&1)===0?n=1:(n=fr,fr<<=1,(fr&130023424)===0&&(fr=4194304)));var s=mi();t=tr(t,n),t!==null&&(Hi(t,n,s),ki(t,s))}function Tx(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),nf(t,s)}function Rx(t,n){var s=0;switch(t.tag){case 13:var p=t.stateNode,g=t.memoizedState;g!==null&&(s=g.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(r(314))}p!==null&&p.delete(n),nf(t,s)}var rf;rf=function(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps||xi.current)wi=!0;else{if((t.lanes&s)===0&&(n.flags&128)===0)return wi=!1,wx(t,n,s);wi=(t.flags&131072)!==0}else wi=!1,ft&&(n.flags&1048576)!==0&&F_(n,rl,n.index);switch(n.lanes=0,n.tag){case 2:var p=n.type;xl(t,n),t=n.pendingProps;var g=$o(n,ei.current);Ko(n,s),g=Dc(null,n,p,t,g,s);var v=zc();return n.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,vi(p)?(v=!0,tl(n)):v=!1,n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Nc(n),g.updater=yl,n.stateNode=g,g._reactInternals=n,Hc(n,p,t,s),n=Yc(null,n,p,!0,v,s)):(n.tag=0,ft&&v&&vc(n),_i(null,n,g,s),n=n.child),n;case 16:p=n.elementType;e:{switch(xl(t,n),t=n.pendingProps,g=p._init,p=g(p._payload),n.type=p,g=n.tag=Fx(p),t=dn(p,t),g){case 0:n=Gc(null,n,p,t,s);break e;case 1:n=Im(null,n,p,t,s);break e;case 11:n=Sm(null,n,p,t,s);break e;case 14:n=Mm(null,n,p,dn(p.type,t),s);break e}throw Error(r(306,p,""))}return n;case 0:return p=n.type,g=n.pendingProps,g=n.elementType===p?g:dn(p,g),Gc(t,n,p,g,s);case 1:return p=n.type,g=n.pendingProps,g=n.elementType===p?g:dn(p,g),Im(t,n,p,g,s);case 3:e:{if(Nm(n),t===null)throw Error(r(387));p=n.pendingProps,v=n.memoizedState,g=v.element,W_(t,n),cl(n,p,null,s);var N=n.memoizedState;if(p=N.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){g=Xo(Error(r(423)),n),n=jm(t,n,p,s,g);break e}else if(p!==g){g=Xo(Error(r(424)),n),n=jm(t,n,p,s,g);break e}else for(Ti=wr(n.stateNode.containerInfo.firstChild),Pi=n,ft=!0,cn=null,s=$_(n,null,p,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Uo(),p===g){n=nr(t,n,s);break e}_i(t,n,p,s)}n=n.child}return n;case 5:return Y_(n),t===null&&kc(n),p=n.type,g=n.pendingProps,v=t!==null?t.memoizedProps:null,N=g.children,mc(p,g)?N=null:v!==null&&mc(p,v)&&(n.flags|=32),Em(t,n),_i(t,n,N,s),n.child;case 6:return t===null&&kc(n),null;case 13:return Pm(t,n,s);case 4:return jc(n,n.stateNode.containerInfo),p=n.pendingProps,t===null?n.child=Go(n,null,p,s):_i(t,n,p,s),n.child;case 11:return p=n.type,g=n.pendingProps,g=n.elementType===p?g:dn(p,g),Sm(t,n,p,g,s);case 7:return _i(t,n,n.pendingProps,s),n.child;case 8:return _i(t,n,n.pendingProps.children,s),n.child;case 12:return _i(t,n,n.pendingProps.children,s),n.child;case 10:e:{if(p=n.type._context,g=n.pendingProps,v=n.memoizedProps,N=g.value,ot(sl,p._currentValue),p._currentValue=N,v!==null)if(un(v.value,N)){if(v.children===g.children&&!xi.current){n=nr(t,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var $=v.dependencies;if($!==null){N=v.child;for(var K=$.firstContext;K!==null;){if(K.context===p){if(v.tag===1){K=ir(-1,s&-s),K.tag=2;var se=v.updateQueue;if(se!==null){se=se.shared;var ve=se.pending;ve===null?K.next=K:(K.next=ve.next,ve.next=K),se.pending=K}}v.lanes|=s,K=v.alternate,K!==null&&(K.lanes|=s),Ec(v.return,s,n),$.lanes|=s;break}K=K.next}}else if(v.tag===10)N=v.type===n.type?null:v.child;else if(v.tag===18){if(N=v.return,N===null)throw Error(r(341));N.lanes|=s,$=N.alternate,$!==null&&($.lanes|=s),Ec(N,s,n),N=v.sibling}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===n){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}_i(t,n,g.children,s),n=n.child}return n;case 9:return g=n.type,p=n.pendingProps.children,Ko(n,s),g=Yi(g),p=p(g),n.flags|=1,_i(t,n,p,s),n.child;case 14:return p=n.type,g=dn(p,n.pendingProps),g=dn(p.type,g),Mm(t,n,p,g,s);case 15:return Cm(t,n,n.type,n.pendingProps,s);case 17:return p=n.type,g=n.pendingProps,g=n.elementType===p?g:dn(p,g),xl(t,n),n.tag=1,vi(p)?(t=!0,tl(n)):t=!1,Ko(n,s),ym(n,p,g),Hc(n,p,g,s),Yc(null,n,p,!0,t,s);case 19:return Rm(t,n,s);case 22:return qm(t,n,s)}throw Error(r(156,n.tag))};function of(t,n){return _r(t,n)}function Vx(t,n,s,p){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(t,n,s,p){return new Vx(t,n,s,p)}function md(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return md(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===X)return 14}return 2}function Pr(t,n){var s=t.alternate;return s===null?(s=Xi(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Nl(t,n,s,p,g,v){var N=2;if(p=t,typeof t=="function")md(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case R:return ho(s.children,g,v,n);case j:N=8,g|=8;break;case V:return t=Xi(12,s,n,g|2),t.elementType=V,t.lanes=v,t;case ie:return t=Xi(13,s,n,g),t.elementType=ie,t.lanes=v,t;case T:return t=Xi(19,s,n,g),t.elementType=T,t.lanes=v,t;case Z:return jl(s,g,v,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:N=10;break e;case z:N=9;break e;case L:N=11;break e;case X:N=14;break e;case G:N=16,p=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=Xi(N,s,n,g),n.elementType=t,n.type=p,n.lanes=v,n}function ho(t,n,s,p){return t=Xi(7,t,p,n),t.lanes=s,t}function jl(t,n,s,p){return t=Xi(22,t,p,n),t.elementType=Z,t.lanes=s,t.stateNode={isHidden:!1},t}function fd(t,n,s){return t=Xi(6,t,null,n),t.lanes=s,t}function hd(t,n,s){return n=Xi(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Dx(t,n,s,p,g){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function yd(t,n,s,p,g,v,N,$,K){return t=new Dx(t,n,s,$,K),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Xi(3,null,null,n),t.current=v,v.stateNode=t,v.memoizedState={element:p,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(v),t}function zx(t,n,s){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:p==null?null:""+p,children:t,containerInfo:n,implementation:s}}function af(t){if(!t)return kr;t=t._reactInternals;e:{if(kt(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(vi(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var s=t.type;if(vi(s))return T_(t,s,n)}return n}function sf(t,n,s,p,g,v,N,$,K){return t=yd(s,p,!0,t,g,v,N,$,K),t.context=af(null),s=t.current,p=mi(),g=Nr(s),v=ir(p,g),v.callback=n??null,Cr(s,v,g),t.current.lanes=g,Hi(t,g,p),ki(t,p),t}function Pl(t,n,s,p){var g=n.current,v=mi(),N=Nr(g);return s=af(s),n.context===null?n.context=s:n.pendingContext=s,n=ir(v,N),n.payload={element:t},p=p===void 0?null:p,p!==null&&(n.callback=p),t=Cr(g,n,N),t!==null&&(mn(t,g,N,v),ul(t,g,N)),N}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lf(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function gd(t,n){lf(t,n),(t=t.alternate)&&lf(t,n)}function Lx(){return null}var uf=typeof reportError=="function"?reportError:function(t){console.error(t)};function xd(t){this._internalRoot=t}Rl.prototype.render=xd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));Pl(t,n,null,null)},Rl.prototype.unmount=xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;_o(function(){Pl(null,t,null,null)}),n[Xn]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var n=Oe();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Tt.length&&n!==0&&n<Tt[s].priority;s++);Tt.splice(s,0,t),s===0&&Ds(t)}};function vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cf(){}function Ox(t,n,s,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var se=Tl(N);v.call(se)}}var N=sf(n,p,t,0,null,!1,!1,"",cf);return t._reactRootContainer=N,t[Xn]=N.current,Ra(t.nodeType===8?t.parentNode:t),_o(),N}for(;g=t.lastChild;)t.removeChild(g);if(typeof p=="function"){var $=p;p=function(){var se=Tl(K);$.call(se)}}var K=yd(t,0,!1,null,null,!1,!1,"",cf);return t._reactRootContainer=K,t[Xn]=K.current,Ra(t.nodeType===8?t.parentNode:t),_o(function(){Pl(n,K,s,p)}),K}function Fl(t,n,s,p,g){var v=s._reactRootContainer;if(v){var N=v;if(typeof g=="function"){var $=g;g=function(){var K=Tl(N);$.call(K)}}Pl(n,N,t,g)}else N=Ox(s,n,t,g,p);return Tl(N)}ba=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var s=gi(n.pendingLanes);s!==0&&(Ae(n,s|1),ki(n,lt()),(et&6)===0&&(ea=lt()+500,Sr()))}break;case 13:_o(function(){var p=tr(t,1);if(p!==null){var g=mi();mn(p,t,1,g)}}),gd(t,1)}},Kr=function(t){if(t.tag===13){var n=tr(t,134217728);if(n!==null){var s=mi();mn(n,t,134217728,s)}gd(t,134217728)}},Io=function(t){if(t.tag===13){var n=Nr(t),s=tr(t,n);if(s!==null){var p=mi();mn(s,t,n,p)}gd(t,n)}},Oe=function(){return rt},ka=function(t,n){var s=rt;try{return rt=t,n()}finally{rt=s}},qi=function(t,n,s){switch(n){case"input":if(at(t,s),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var p=s[n];if(p!==t&&p.form===t.form){var g=Js(p);if(!g)throw Error(r(90));Ie(p),at(p,g)}}}break;case"textarea":Bn(t,s);break;case"select":n=s.value,n!=null&&Dt(t,!!s.multiple,n,!1)}},Ut=dd,Gt=_o;var Bx={usingClientEntryPoint:!1,Events:[Da,Bo,Js,Cn,It,dd]},Xa={findFiberByHostInstance:ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ax={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hr(t),t===null?null:t.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||Lx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{qn=Dl.inject(Ax),At=Dl}catch{}}return Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bx,Si.createPortal=function(t,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(n))throw Error(r(200));return zx(t,n,null,s)},Si.createRoot=function(t,n){if(!vd(t))throw Error(r(299));var s=!1,p="",g=uf;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=yd(t,1,!1,null,null,s,!1,p,g),t[Xn]=n.current,Ra(t.nodeType===8?t.parentNode:t),new xd(n)},Si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Hr(n),t=t===null?null:t.stateNode,t},Si.flushSync=function(t){return _o(t)},Si.hydrate=function(t,n,s){if(!Vl(n))throw Error(r(200));return Fl(null,t,n,!0,s)},Si.hydrateRoot=function(t,n,s){if(!vd(t))throw Error(r(405));var p=s!=null&&s.hydratedSources||null,g=!1,v="",N=uf;if(s!=null&&(s.unstable_strictMode===!0&&(g=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(N=s.onRecoverableError)),n=sf(n,null,t,1,s??null,g,!1,v,N),t[Xn]=n.current,Ra(t),p)for(t=0;t<p.length;t++)s=p[t],g=s._getVersion,g=g(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,g]:n.mutableSourceEagerHydrationData.push(s,g);return new Rl(n)},Si.render=function(t,n,s){if(!Vl(n))throw Error(r(200));return Fl(null,t,n,!1,s)},Si.unmountComponentAtNode=function(t){if(!Vl(t))throw Error(r(40));return t._reactRootContainer?(_o(function(){Fl(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1},Si.unstable_batchedUpdates=dd,Si.unstable_renderSubtreeIntoContainer=function(t,n,s,p){if(!Vl(s))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Fl(t,n,s,!1,p)},Si.version="18.3.1-next-f1338f8080-20240426",Si}var gf;function M0(){if(gf)return kd.exports;gf=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),kd.exports=Qx(),kd.exports}var xf;function Xx(){if(xf)return zl;xf=1;var e=M0();return zl.createRoot=e.createRoot,zl.hydrateRoot=e.hydrateRoot,zl}var Zx=Xx();const Jx=Cs(Zx);function jt(e){if(typeof e=="string"||typeof e=="number")return""+e;let i="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=jt(e[r]))!==""&&(i+=(i&&" ")+o);else for(let r in e)e[r]&&(i+=(i&&" ")+r);return i}var ev={value:()=>{}};function ju(){for(var e=0,i=arguments.length,r={},o;e<i;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new iu(r)}function iu(e){this._=e}function tv(e,i){return e.trim().split(/^|\s+/).map(function(r){var o="",a=r.indexOf(".");if(a>=0&&(o=r.slice(a+1),r=r.slice(0,a)),r&&!i.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}iu.prototype=ju.prototype={constructor:iu,on:function(e,i){var r=this._,o=tv(e+"",r),a,c=-1,u=o.length;if(arguments.length<2){for(;++c<u;)if((a=(e=o[c]).type)&&(a=iv(r[a],e.name)))return a;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++c<u;)if(a=(e=o[c]).type)r[a]=vf(r[a],e.name,i);else if(i==null)for(a in r)r[a]=vf(r[a],e.name,null);return this},copy:function(){var e={},i=this._;for(var r in i)e[r]=i[r].slice();return new iu(e)},call:function(e,i){if((a=arguments.length-2)>0)for(var r=new Array(a),o=0,a,c;o<a;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],o=0,a=c.length;o<a;++o)c[o].value.apply(i,r)},apply:function(e,i,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,c=o.length;a<c;++a)o[a].value.apply(i,r)}};function iv(e,i){for(var r=0,o=e.length,a;r<o;++r)if((a=e[r]).name===i)return a.value}function vf(e,i,r){for(var o=0,a=e.length;o<a;++o)if(e[o].name===i){e[o]=ev,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:i,value:r}),e}var Jd="http://www.w3.org/1999/xhtml";const wf={svg:"http://www.w3.org/2000/svg",xhtml:Jd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pu(e){var i=e+="",r=i.indexOf(":");return r>=0&&(i=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),wf.hasOwnProperty(i)?{space:wf[i],local:e}:e}function nv(e){return function(){var i=this.ownerDocument,r=this.namespaceURI;return r===Jd&&i.documentElement.namespaceURI===Jd?i.createElement(e):i.createElementNS(r,e)}}function rv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function C0(e){var i=Pu(e);return(i.local?rv:nv)(i)}function ov(){}function Rp(e){return e==null?ov:function(){return this.querySelector(e)}}function av(e){typeof e!="function"&&(e=Rp(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,d=o[a]=new Array(u),_,f,y=0;y<u;++y)(_=c[y])&&(f=e.call(_,_.__data__,y,c))&&("__data__"in _&&(f.__data__=_.__data__),d[y]=f);return new Li(o,this._parents)}function sv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lv(){return[]}function q0(e){return e==null?lv:function(){return this.querySelectorAll(e)}}function uv(e){return function(){return sv(e.apply(this,arguments))}}function cv(e){typeof e=="function"?e=uv(e):e=q0(e);for(var i=this._groups,r=i.length,o=[],a=[],c=0;c<r;++c)for(var u=i[c],d=u.length,_,f=0;f<d;++f)(_=u[f])&&(o.push(e.call(_,_.__data__,f,u)),a.push(_));return new Li(o,a)}function E0(e){return function(){return this.matches(e)}}function I0(e){return function(i){return i.matches(e)}}var dv=Array.prototype.find;function pv(e){return function(){return dv.call(this.children,e)}}function _v(){return this.firstElementChild}function mv(e){return this.select(e==null?_v:pv(typeof e=="function"?e:I0(e)))}var fv=Array.prototype.filter;function hv(){return Array.from(this.children)}function yv(e){return function(){return fv.call(this.children,e)}}function gv(e){return this.selectAll(e==null?hv:yv(typeof e=="function"?e:I0(e)))}function xv(e){typeof e!="function"&&(e=E0(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,d=o[a]=[],_,f=0;f<u;++f)(_=c[f])&&e.call(_,_.__data__,f,c)&&d.push(_);return new Li(o,this._parents)}function N0(e){return new Array(e.length)}function vv(){return new Li(this._enter||this._groups.map(N0),this._parents)}function uu(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}uu.prototype={constructor:uu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function wv(e){return function(){return e}}function bv(e,i,r,o,a,c){for(var u=0,d,_=i.length,f=c.length;u<f;++u)(d=i[u])?(d.__data__=c[u],o[u]=d):r[u]=new uu(e,c[u]);for(;u<_;++u)(d=i[u])&&(a[u]=d)}function kv(e,i,r,o,a,c,u){var d,_,f=new Map,y=i.length,m=c.length,h=new Array(y),x;for(d=0;d<y;++d)(_=i[d])&&(h[d]=x=u.call(_,_.__data__,d,i)+"",f.has(x)?a[d]=_:f.set(x,_));for(d=0;d<m;++d)x=u.call(e,c[d],d,c)+"",(_=f.get(x))?(o[d]=_,_.__data__=c[d],f.delete(x)):r[d]=new uu(e,c[d]);for(d=0;d<y;++d)(_=i[d])&&f.get(h[d])===_&&(a[d]=_)}function Sv(e){return e.__data__}function Mv(e,i){if(!arguments.length)return Array.from(this,Sv);var r=i?kv:bv,o=this._parents,a=this._groups;typeof e!="function"&&(e=wv(e));for(var c=a.length,u=new Array(c),d=new Array(c),_=new Array(c),f=0;f<c;++f){var y=o[f],m=a[f],h=m.length,x=Cv(e.call(y,y&&y.__data__,f,o)),w=x.length,b=d[f]=new Array(w),S=u[f]=new Array(w),k=_[f]=new Array(h);r(y,m,b,S,k,x,i);for(var I=0,M=0,E,P;I<w;++I)if(E=b[I]){for(I>=M&&(M=I+1);!(P=S[M])&&++M<w;);E._next=P||null}}return u=new Li(u,o),u._enter=d,u._exit=_,u}function Cv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qv(){return new Li(this._exit||this._groups.map(N0),this._parents)}function Ev(e,i,r){var o=this.enter(),a=this,c=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),i!=null&&(a=i(a),a&&(a=a.selection())),r==null?c.remove():r(c),o&&a?o.merge(a).order():a}function Iv(e){for(var i=e.selection?e.selection():e,r=this._groups,o=i._groups,a=r.length,c=o.length,u=Math.min(a,c),d=new Array(a),_=0;_<u;++_)for(var f=r[_],y=o[_],m=f.length,h=d[_]=new Array(m),x,w=0;w<m;++w)(x=f[w]||y[w])&&(h[w]=x);for(;_<a;++_)d[_]=r[_];return new Li(d,this._parents)}function Nv(){for(var e=this._groups,i=-1,r=e.length;++i<r;)for(var o=e[i],a=o.length-1,c=o[a],u;--a>=0;)(u=o[a])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function jv(e){e||(e=Pv);function i(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var r=this._groups,o=r.length,a=new Array(o),c=0;c<o;++c){for(var u=r[c],d=u.length,_=a[c]=new Array(d),f,y=0;y<d;++y)(f=u[y])&&(_[y]=f);_.sort(i)}return new Li(a,this._parents).order()}function Pv(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function Tv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rv(){return Array.from(this)}function Vv(){for(var e=this._groups,i=0,r=e.length;i<r;++i)for(var o=e[i],a=0,c=o.length;a<c;++a){var u=o[a];if(u)return u}return null}function Fv(){let e=0;for(const i of this)++e;return e}function Dv(){return!this.node()}function zv(e){for(var i=this._groups,r=0,o=i.length;r<o;++r)for(var a=i[r],c=0,u=a.length,d;c<u;++c)(d=a[c])&&e.call(d,d.__data__,c,a);return this}function Lv(e){return function(){this.removeAttribute(e)}}function Ov(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bv(e,i){return function(){this.setAttribute(e,i)}}function Av(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function $v(e,i){return function(){var r=i.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Hv(e,i){return function(){var r=i.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Wv(e,i){var r=Pu(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((i==null?r.local?Ov:Lv:typeof i=="function"?r.local?Hv:$v:r.local?Av:Bv)(r,i))}function j0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uv(e){return function(){this.style.removeProperty(e)}}function Gv(e,i,r){return function(){this.style.setProperty(e,i,r)}}function Yv(e,i,r){return function(){var o=i.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function Kv(e,i,r){return arguments.length>1?this.each((i==null?Uv:typeof i=="function"?Yv:Gv)(e,i,r??"")):la(this.node(),e)}function la(e,i){return e.style.getPropertyValue(i)||j0(e).getComputedStyle(e,null).getPropertyValue(i)}function Qv(e){return function(){delete this[e]}}function Xv(e,i){return function(){this[e]=i}}function Zv(e,i){return function(){var r=i.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Jv(e,i){return arguments.length>1?this.each((i==null?Qv:typeof i=="function"?Zv:Xv)(e,i)):this.node()[e]}function P0(e){return e.trim().split(/^|\s+/)}function Vp(e){return e.classList||new T0(e)}function T0(e){this._node=e,this._names=P0(e.getAttribute("class")||"")}T0.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function R0(e,i){for(var r=Vp(e),o=-1,a=i.length;++o<a;)r.add(i[o])}function V0(e,i){for(var r=Vp(e),o=-1,a=i.length;++o<a;)r.remove(i[o])}function e1(e){return function(){R0(this,e)}}function t1(e){return function(){V0(this,e)}}function i1(e,i){return function(){(i.apply(this,arguments)?R0:V0)(this,e)}}function n1(e,i){var r=P0(e+"");if(arguments.length<2){for(var o=Vp(this.node()),a=-1,c=r.length;++a<c;)if(!o.contains(r[a]))return!1;return!0}return this.each((typeof i=="function"?i1:i?e1:t1)(r,i))}function r1(){this.textContent=""}function o1(e){return function(){this.textContent=e}}function a1(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function s1(e){return arguments.length?this.each(e==null?r1:(typeof e=="function"?a1:o1)(e)):this.node().textContent}function l1(){this.innerHTML=""}function u1(e){return function(){this.innerHTML=e}}function c1(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function d1(e){return arguments.length?this.each(e==null?l1:(typeof e=="function"?c1:u1)(e)):this.node().innerHTML}function p1(){this.nextSibling&&this.parentNode.appendChild(this)}function _1(){return this.each(p1)}function m1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function f1(){return this.each(m1)}function h1(e){var i=typeof e=="function"?e:C0(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function y1(){return null}function g1(e,i){var r=typeof e=="function"?e:C0(e),o=i==null?y1:typeof i=="function"?i:Rp(i);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function x1(){var e=this.parentNode;e&&e.removeChild(this)}function v1(){return this.each(x1)}function w1(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function b1(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function k1(e){return this.select(e?b1:w1)}function S1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function M1(e){return function(i){e.call(this,i,this.__data__)}}function C1(e){return e.trim().split(/^|\s+/).map(function(i){var r="",o=i.indexOf(".");return o>=0&&(r=i.slice(o+1),i=i.slice(0,o)),{type:i,name:r}})}function q1(e){return function(){var i=this.__on;if(i){for(var r=0,o=-1,a=i.length,c;r<a;++r)c=i[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):i[++o]=c;++o?i.length=o:delete this.__on}}}function E1(e,i,r){return function(){var o=this.__on,a,c=M1(i);if(o){for(var u=0,d=o.length;u<d;++u)if((a=o[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=c,a.options=r),a.value=i;return}}this.addEventListener(e.type,c,r),a={type:e.type,name:e.name,value:i,listener:c,options:r},o?o.push(a):this.__on=[a]}}function I1(e,i,r){var o=C1(e+""),a,c=o.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var _=0,f=d.length,y;_<f;++_)for(a=0,y=d[_];a<c;++a)if((u=o[a]).type===y.type&&u.name===y.name)return y.value}return}for(d=i?E1:q1,a=0;a<c;++a)this.each(d(o[a],i,r));return this}function F0(e,i,r){var o=j0(e),a=o.CustomEvent;typeof a=="function"?a=new a(i,r):(a=o.document.createEvent("Event"),r?(a.initEvent(i,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(i,!1,!1)),e.dispatchEvent(a)}function N1(e,i){return function(){return F0(this,e,i)}}function j1(e,i){return function(){return F0(this,e,i.apply(this,arguments))}}function P1(e,i){return this.each((typeof i=="function"?j1:N1)(e,i))}function*T1(){for(var e=this._groups,i=0,r=e.length;i<r;++i)for(var o=e[i],a=0,c=o.length,u;a<c;++a)(u=o[a])&&(yield u)}var D0=[null];function Li(e,i){this._groups=e,this._parents=i}function Es(){return new Li([[document.documentElement]],D0)}function R1(){return this}Li.prototype=Es.prototype={constructor:Li,select:av,selectAll:cv,selectChild:mv,selectChildren:gv,filter:xv,data:Mv,enter:vv,exit:qv,join:Ev,merge:Iv,selection:R1,order:Nv,sort:jv,call:Tv,nodes:Rv,node:Vv,size:Fv,empty:Dv,each:zv,attr:Wv,style:Kv,property:Jv,classed:n1,text:s1,html:d1,raise:_1,lower:f1,append:h1,insert:g1,remove:v1,clone:k1,datum:S1,on:I1,dispatch:P1,[Symbol.iterator]:T1};function Di(e){return typeof e=="string"?new Li([[document.querySelector(e)]],[document.documentElement]):new Li([[e]],D0)}function V1(e){let i;for(;i=e.sourceEvent;)e=i;return e}function yn(e,i){if(e=V1(e),i===void 0&&(i=e.currentTarget),i){var r=i.ownerSVGElement||i;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(i.getScreenCTM().inverse()),[o.x,o.y]}if(i.getBoundingClientRect){var a=i.getBoundingClientRect();return[e.clientX-a.left-i.clientLeft,e.clientY-a.top-i.clientTop]}}return[e.pageX,e.pageY]}const F1={passive:!1},ps={capture:!0,passive:!1};function Cd(e){e.stopImmediatePropagation()}function oa(e){e.preventDefault(),e.stopImmediatePropagation()}function z0(e){var i=e.document.documentElement,r=Di(e).on("dragstart.drag",oa,ps);"onselectstart"in i?r.on("selectstart.drag",oa,ps):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function L0(e,i){var r=e.document.documentElement,o=Di(e).on("dragstart.drag",null);i&&(o.on("click.drag",oa,ps),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Ll=e=>()=>e;function ep(e,{sourceEvent:i,subject:r,target:o,identifier:a,active:c,x:u,y:d,dx:_,dy:f,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:y}})}ep.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function D1(e){return!e.ctrlKey&&!e.button}function z1(){return this.parentNode}function L1(e,i){return i??{x:e.x,y:e.y}}function O1(){return navigator.maxTouchPoints||"ontouchstart"in this}function O0(){var e=D1,i=z1,r=L1,o=O1,a={},c=ju("start","drag","end"),u=0,d,_,f,y,m=0;function h(E){E.on("mousedown.drag",x).filter(o).on("touchstart.drag",S).on("touchmove.drag",k,F1).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(E,P){if(!(y||!e.call(this,E,P))){var C=M(this,i.call(this,E,P),E,P,"mouse");C&&(Di(E.view).on("mousemove.drag",w,ps).on("mouseup.drag",b,ps),z0(E.view),Cd(E),f=!1,d=E.clientX,_=E.clientY,C("start",E))}}function w(E){if(oa(E),!f){var P=E.clientX-d,C=E.clientY-_;f=P*P+C*C>m}a.mouse("drag",E)}function b(E){Di(E.view).on("mousemove.drag mouseup.drag",null),L0(E.view,f),oa(E),a.mouse("end",E)}function S(E,P){if(e.call(this,E,P)){var C=E.changedTouches,R=i.call(this,E,P),j=C.length,V,Q;for(V=0;V<j;++V)(Q=M(this,R,E,P,C[V].identifier,C[V]))&&(Cd(E),Q("start",E,C[V]))}}function k(E){var P=E.changedTouches,C=P.length,R,j;for(R=0;R<C;++R)(j=a[P[R].identifier])&&(oa(E),j("drag",E,P[R]))}function I(E){var P=E.changedTouches,C=P.length,R,j;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),R=0;R<C;++R)(j=a[P[R].identifier])&&(Cd(E),j("end",E,P[R]))}function M(E,P,C,R,j,V){var Q=c.copy(),z=yn(V||C,P),L,ie,T;if((T=r.call(E,new ep("beforestart",{sourceEvent:C,target:h,identifier:j,active:u,x:z[0],y:z[1],dx:0,dy:0,dispatch:Q}),R))!=null)return L=T.x-z[0]||0,ie=T.y-z[1]||0,function X(G,Z,H){var U=z,te;switch(G){case"start":a[j]=X,te=u++;break;case"end":delete a[j],--u;case"drag":z=yn(H||Z,P),te=u;break}Q.call(G,E,new ep(G,{sourceEvent:Z,subject:T,target:h,identifier:j,active:te,x:z[0]+L,y:z[1]+ie,dx:z[0]-U[0],dy:z[1]-U[1],dispatch:Q}),R)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Ll(!!E),h):e},h.container=function(E){return arguments.length?(i=typeof E=="function"?E:Ll(E),h):i},h.subject=function(E){return arguments.length?(r=typeof E=="function"?E:Ll(E),h):r},h.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:Ll(!!E),h):o},h.on=function(){var E=c.on.apply(c,arguments);return E===c?h:E},h.clickDistance=function(E){return arguments.length?(m=(E=+E)*E,h):Math.sqrt(m)},h}function Fp(e,i,r){e.prototype=i.prototype=r,r.constructor=e}function B0(e,i){var r=Object.create(e.prototype);for(var o in i)r[o]=i[o];return r}function Is(){}var _s=.7,cu=1/_s,aa="\\s*([+-]?\\d+)\\s*",ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",B1=/^#([0-9a-f]{3,8})$/,A1=new RegExp(`^rgb\\(${aa},${aa},${aa}\\)$`),$1=new RegExp(`^rgb\\(${Dn},${Dn},${Dn}\\)$`),H1=new RegExp(`^rgba\\(${aa},${aa},${aa},${ms}\\)$`),W1=new RegExp(`^rgba\\(${Dn},${Dn},${Dn},${ms}\\)$`),U1=new RegExp(`^hsl\\(${ms},${Dn},${Dn}\\)$`),G1=new RegExp(`^hsla\\(${ms},${Dn},${Dn},${ms}\\)$`),bf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fp(Is,wo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kf,formatHex:kf,formatHex8:Y1,formatHsl:K1,formatRgb:Sf,toString:Sf});function kf(){return this.rgb().formatHex()}function Y1(){return this.rgb().formatHex8()}function K1(){return A0(this).formatHsl()}function Sf(){return this.rgb().formatRgb()}function wo(e){var i,r;return e=(e+"").trim().toLowerCase(),(i=B1.exec(e))?(r=i[1].length,i=parseInt(i[1],16),r===6?Mf(i):r===3?new Mi(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):r===8?Ol(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):r===4?Ol(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=A1.exec(e))?new Mi(i[1],i[2],i[3],1):(i=$1.exec(e))?new Mi(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=H1.exec(e))?Ol(i[1],i[2],i[3],i[4]):(i=W1.exec(e))?Ol(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=U1.exec(e))?Ef(i[1],i[2]/100,i[3]/100,1):(i=G1.exec(e))?Ef(i[1],i[2]/100,i[3]/100,i[4]):bf.hasOwnProperty(e)?Mf(bf[e]):e==="transparent"?new Mi(NaN,NaN,NaN,0):null}function Mf(e){return new Mi(e>>16&255,e>>8&255,e&255,1)}function Ol(e,i,r,o){return o<=0&&(e=i=r=NaN),new Mi(e,i,r,o)}function Q1(e){return e instanceof Is||(e=wo(e)),e?(e=e.rgb(),new Mi(e.r,e.g,e.b,e.opacity)):new Mi}function tp(e,i,r,o){return arguments.length===1?Q1(e):new Mi(e,i,r,o??1)}function Mi(e,i,r,o){this.r=+e,this.g=+i,this.b=+r,this.opacity=+o}Fp(Mi,tp,B0(Is,{brighter(e){return e=e==null?cu:Math.pow(cu,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_s:Math.pow(_s,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mi(xo(this.r),xo(this.g),xo(this.b),du(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cf,formatHex:Cf,formatHex8:X1,formatRgb:qf,toString:qf}));function Cf(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function X1(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function qf(){const e=du(this.opacity);return`${e===1?"rgb(":"rgba("}${xo(this.r)}, ${xo(this.g)}, ${xo(this.b)}${e===1?")":`, ${e})`}`}function du(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function go(e){return e=xo(e),(e<16?"0":"")+e.toString(16)}function Ef(e,i,r,o){return o<=0?e=i=r=NaN:r<=0||r>=1?e=i=NaN:i<=0&&(e=NaN),new xn(e,i,r,o)}function A0(e){if(e instanceof xn)return new xn(e.h,e.s,e.l,e.opacity);if(e instanceof Is||(e=wo(e)),!e)return new xn;if(e instanceof xn)return e;e=e.rgb();var i=e.r/255,r=e.g/255,o=e.b/255,a=Math.min(i,r,o),c=Math.max(i,r,o),u=NaN,d=c-a,_=(c+a)/2;return d?(i===c?u=(r-o)/d+(r<o)*6:r===c?u=(o-i)/d+2:u=(i-r)/d+4,d/=_<.5?c+a:2-c-a,u*=60):d=_>0&&_<1?0:u,new xn(u,d,_,e.opacity)}function Z1(e,i,r,o){return arguments.length===1?A0(e):new xn(e,i,r,o??1)}function xn(e,i,r,o){this.h=+e,this.s=+i,this.l=+r,this.opacity=+o}Fp(xn,Z1,B0(Is,{brighter(e){return e=e==null?cu:Math.pow(cu,e),new xn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_s:Math.pow(_s,e),new xn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*i,a=2*r-o;return new Mi(qd(e>=240?e-240:e+120,a,o),qd(e,a,o),qd(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new xn(If(this.h),Bl(this.s),Bl(this.l),du(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=du(this.opacity);return`${e===1?"hsl(":"hsla("}${If(this.h)}, ${Bl(this.s)*100}%, ${Bl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function If(e){return e=(e||0)%360,e<0?e+360:e}function Bl(e){return Math.max(0,Math.min(1,e||0))}function qd(e,i,r){return(e<60?i+(r-i)*e/60:e<180?r:e<240?i+(r-i)*(240-e)/60:i)*255}const Dp=e=>()=>e;function J1(e,i){return function(r){return e+r*i}}function ew(e,i,r){return e=Math.pow(e,r),i=Math.pow(i,r)-e,r=1/r,function(o){return Math.pow(e+o*i,r)}}function tw(e){return(e=+e)==1?$0:function(i,r){return r-i?ew(i,r,e):Dp(isNaN(i)?r:i)}}function $0(e,i){var r=i-e;return r?J1(e,r):Dp(isNaN(e)?i:e)}const pu=(function e(i){var r=tw(i);function o(a,c){var u=r((a=tp(a)).r,(c=tp(c)).r),d=r(a.g,c.g),_=r(a.b,c.b),f=$0(a.opacity,c.opacity);return function(y){return a.r=u(y),a.g=d(y),a.b=_(y),a.opacity=f(y),a+""}}return o.gamma=e,o})(1);function iw(e,i){i||(i=[]);var r=e?Math.min(i.length,e.length):0,o=i.slice(),a;return function(c){for(a=0;a<r;++a)o[a]=e[a]*(1-c)+i[a]*c;return o}}function nw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rw(e,i){var r=i?i.length:0,o=e?Math.min(r,e.length):0,a=new Array(o),c=new Array(r),u;for(u=0;u<o;++u)a[u]=os(e[u],i[u]);for(;u<r;++u)c[u]=i[u];return function(d){for(u=0;u<o;++u)c[u]=a[u](d);return c}}function ow(e,i){var r=new Date;return e=+e,i=+i,function(o){return r.setTime(e*(1-o)+i*o),r}}function Vn(e,i){return e=+e,i=+i,function(r){return e*(1-r)+i*r}}function aw(e,i){var r={},o={},a;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(a in i)a in e?r[a]=os(e[a],i[a]):o[a]=i[a];return function(c){for(a in r)o[a]=r[a](c);return o}}var ip=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ed=new RegExp(ip.source,"g");function sw(e){return function(){return e}}function lw(e){return function(i){return e(i)+""}}function H0(e,i){var r=ip.lastIndex=Ed.lastIndex=0,o,a,c,u=-1,d=[],_=[];for(e=e+"",i=i+"";(o=ip.exec(e))&&(a=Ed.exec(i));)(c=a.index)>r&&(c=i.slice(r,c),d[u]?d[u]+=c:d[++u]=c),(o=o[0])===(a=a[0])?d[u]?d[u]+=a:d[++u]=a:(d[++u]=null,_.push({i:u,x:Vn(o,a)})),r=Ed.lastIndex;return r<i.length&&(c=i.slice(r),d[u]?d[u]+=c:d[++u]=c),d.length<2?_[0]?lw(_[0].x):sw(i):(i=_.length,function(f){for(var y=0,m;y<i;++y)d[(m=_[y]).i]=m.x(f);return d.join("")})}function os(e,i){var r=typeof i,o;return i==null||r==="boolean"?Dp(i):(r==="number"?Vn:r==="string"?(o=wo(i))?(i=o,pu):H0:i instanceof wo?pu:i instanceof Date?ow:nw(i)?iw:Array.isArray(i)?rw:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?aw:Vn)(e,i)}var Nf=180/Math.PI,np={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function W0(e,i,r,o,a,c){var u,d,_;return(u=Math.sqrt(e*e+i*i))&&(e/=u,i/=u),(_=e*r+i*o)&&(r-=e*_,o-=i*_),(d=Math.sqrt(r*r+o*o))&&(r/=d,o/=d,_/=d),e*o<i*r&&(e=-e,i=-i,_=-_,u=-u),{translateX:a,translateY:c,rotate:Math.atan2(i,e)*Nf,skewX:Math.atan(_)*Nf,scaleX:u,scaleY:d}}var Al;function uw(e){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return i.isIdentity?np:W0(i.a,i.b,i.c,i.d,i.e,i.f)}function cw(e){return e==null||(Al||(Al=document.createElementNS("http://www.w3.org/2000/svg","g")),Al.setAttribute("transform",e),!(e=Al.transform.baseVal.consolidate()))?np:(e=e.matrix,W0(e.a,e.b,e.c,e.d,e.e,e.f))}function U0(e,i,r,o){function a(f){return f.length?f.pop()+" ":""}function c(f,y,m,h,x,w){if(f!==m||y!==h){var b=x.push("translate(",null,i,null,r);w.push({i:b-4,x:Vn(f,m)},{i:b-2,x:Vn(y,h)})}else(m||h)&&x.push("translate("+m+i+h+r)}function u(f,y,m,h){f!==y?(f-y>180?y+=360:y-f>180&&(f+=360),h.push({i:m.push(a(m)+"rotate(",null,o)-2,x:Vn(f,y)})):y&&m.push(a(m)+"rotate("+y+o)}function d(f,y,m,h){f!==y?h.push({i:m.push(a(m)+"skewX(",null,o)-2,x:Vn(f,y)}):y&&m.push(a(m)+"skewX("+y+o)}function _(f,y,m,h,x,w){if(f!==m||y!==h){var b=x.push(a(x)+"scale(",null,",",null,")");w.push({i:b-4,x:Vn(f,m)},{i:b-2,x:Vn(y,h)})}else(m!==1||h!==1)&&x.push(a(x)+"scale("+m+","+h+")")}return function(f,y){var m=[],h=[];return f=e(f),y=e(y),c(f.translateX,f.translateY,y.translateX,y.translateY,m,h),u(f.rotate,y.rotate,m,h),d(f.skewX,y.skewX,m,h),_(f.scaleX,f.scaleY,y.scaleX,y.scaleY,m,h),f=y=null,function(x){for(var w=-1,b=h.length,S;++w<b;)m[(S=h[w]).i]=S.x(x);return m.join("")}}}var dw=U0(uw,"px, ","px)","deg)"),pw=U0(cw,", ",")",")"),_w=1e-12;function jf(e){return((e=Math.exp(e))+1/e)/2}function mw(e){return((e=Math.exp(e))-1/e)/2}function fw(e){return((e=Math.exp(2*e))-1)/(e+1)}const nu=(function e(i,r,o){function a(c,u){var d=c[0],_=c[1],f=c[2],y=u[0],m=u[1],h=u[2],x=y-d,w=m-_,b=x*x+w*w,S,k;if(b<_w)k=Math.log(h/f)/i,S=function(R){return[d+R*x,_+R*w,f*Math.exp(i*R*k)]};else{var I=Math.sqrt(b),M=(h*h-f*f+o*b)/(2*f*r*I),E=(h*h-f*f-o*b)/(2*h*r*I),P=Math.log(Math.sqrt(M*M+1)-M),C=Math.log(Math.sqrt(E*E+1)-E);k=(C-P)/i,S=function(R){var j=R*k,V=jf(P),Q=f/(r*I)*(V*fw(i*j+P)-mw(P));return[d+Q*x,_+Q*w,f*V/jf(i*j+P)]}}return S.duration=k*1e3*i/Math.SQRT2,S}return a.rho=function(c){var u=Math.max(.001,+c),d=u*u,_=d*d;return e(u,d,_)},a})(Math.SQRT2,2,4);var ua=0,ns=0,Ja=0,G0=1e3,_u,rs,mu=0,bo=0,Tu=0,fs=typeof performance=="object"&&performance.now?performance:Date,Y0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zp(){return bo||(Y0(hw),bo=fs.now()+Tu)}function hw(){bo=0}function fu(){this._call=this._time=this._next=null}fu.prototype=K0.prototype={constructor:fu,restart:function(e,i,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?zp():+r)+(i==null?0:+i),!this._next&&rs!==this&&(rs?rs._next=this:_u=this,rs=this),this._call=e,this._time=r,rp()},stop:function(){this._call&&(this._call=null,this._time=1/0,rp())}};function K0(e,i,r){var o=new fu;return o.restart(e,i,r),o}function yw(){zp(),++ua;for(var e=_u,i;e;)(i=bo-e._time)>=0&&e._call.call(void 0,i),e=e._next;--ua}function Pf(){bo=(mu=fs.now())+Tu,ua=ns=0;try{yw()}finally{ua=0,xw(),bo=0}}function gw(){var e=fs.now(),i=e-mu;i>G0&&(Tu-=i,mu=e)}function xw(){for(var e,i=_u,r,o=1/0;i;)i._call?(o>i._time&&(o=i._time),e=i,i=i._next):(r=i._next,i._next=null,i=e?e._next=r:_u=r);rs=e,rp(o)}function rp(e){if(!ua){ns&&(ns=clearTimeout(ns));var i=e-bo;i>24?(e<1/0&&(ns=setTimeout(Pf,e-fs.now()-Tu)),Ja&&(Ja=clearInterval(Ja))):(Ja||(mu=fs.now(),Ja=setInterval(gw,G0)),ua=1,Y0(Pf))}}function Tf(e,i,r){var o=new fu;return i=i==null?0:+i,o.restart(a=>{o.stop(),e(a+i)},i,r),o}var vw=ju("start","end","cancel","interrupt"),ww=[],Q0=0,Rf=1,op=2,ru=3,Vf=4,ap=5,ou=6;function Ru(e,i,r,o,a,c){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;bw(e,r,{name:i,index:o,group:a,on:vw,tween:ww,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Q0})}function Lp(e,i){var r=kn(e,i);if(r.state>Q0)throw new Error("too late; already scheduled");return r}function Ln(e,i){var r=kn(e,i);if(r.state>ru)throw new Error("too late; already running");return r}function kn(e,i){var r=e.__transition;if(!r||!(r=r[i]))throw new Error("transition not found");return r}function bw(e,i,r){var o=e.__transition,a;o[i]=r,r.timer=K0(c,0,r.time);function c(f){r.state=Rf,r.timer.restart(u,r.delay,r.time),r.delay<=f&&u(f-r.delay)}function u(f){var y,m,h,x;if(r.state!==Rf)return _();for(y in o)if(x=o[y],x.name===r.name){if(x.state===ru)return Tf(u);x.state===Vf?(x.state=ou,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[y]):+y<i&&(x.state=ou,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[y])}if(Tf(function(){r.state===ru&&(r.state=Vf,r.timer.restart(d,r.delay,r.time),d(f))}),r.state=op,r.on.call("start",e,e.__data__,r.index,r.group),r.state===op){for(r.state=ru,a=new Array(h=r.tween.length),y=0,m=-1;y<h;++y)(x=r.tween[y].value.call(e,e.__data__,r.index,r.group))&&(a[++m]=x);a.length=m+1}}function d(f){for(var y=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(_),r.state=ap,1),m=-1,h=a.length;++m<h;)a[m].call(e,y);r.state===ap&&(r.on.call("end",e,e.__data__,r.index,r.group),_())}function _(){r.state=ou,r.timer.stop(),delete o[i];for(var f in o)return;delete e.__transition}}function au(e,i){var r=e.__transition,o,a,c=!0,u;if(r){i=i==null?null:i+"";for(u in r){if((o=r[u]).name!==i){c=!1;continue}a=o.state>op&&o.state<ap,o.state=ou,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[u]}c&&delete e.__transition}}function kw(e){return this.each(function(){au(this,e)})}function Sw(e,i){var r,o;return function(){var a=Ln(this,e),c=a.tween;if(c!==r){o=r=c;for(var u=0,d=o.length;u<d;++u)if(o[u].name===i){o=o.slice(),o.splice(u,1);break}}a.tween=o}}function Mw(e,i,r){var o,a;if(typeof r!="function")throw new Error;return function(){var c=Ln(this,e),u=c.tween;if(u!==o){a=(o=u).slice();for(var d={name:i,value:r},_=0,f=a.length;_<f;++_)if(a[_].name===i){a[_]=d;break}_===f&&a.push(d)}c.tween=a}}function Cw(e,i){var r=this._id;if(e+="",arguments.length<2){for(var o=kn(this.node(),r).tween,a=0,c=o.length,u;a<c;++a)if((u=o[a]).name===e)return u.value;return null}return this.each((i==null?Sw:Mw)(r,e,i))}function Op(e,i,r){var o=e._id;return e.each(function(){var a=Ln(this,o);(a.value||(a.value={}))[i]=r.apply(this,arguments)}),function(a){return kn(a,o).value[i]}}function X0(e,i){var r;return(typeof i=="number"?Vn:i instanceof wo?pu:(r=wo(i))?(i=r,pu):H0)(e,i)}function qw(e){return function(){this.removeAttribute(e)}}function Ew(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Iw(e,i,r){var o,a=r+"",c;return function(){var u=this.getAttribute(e);return u===a?null:u===o?c:c=i(o=u,r)}}function Nw(e,i,r){var o,a=r+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===o?c:c=i(o=u,r)}}function jw(e,i,r){var o,a,c;return function(){var u,d=r(this),_;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),_=d+"",u===_?null:u===o&&_===a?c:(a=_,c=i(o=u,d)))}}function Pw(e,i,r){var o,a,c;return function(){var u,d=r(this),_;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),_=d+"",u===_?null:u===o&&_===a?c:(a=_,c=i(o=u,d)))}}function Tw(e,i){var r=Pu(e),o=r==="transform"?pw:X0;return this.attrTween(e,typeof i=="function"?(r.local?Pw:jw)(r,o,Op(this,"attr."+e,i)):i==null?(r.local?Ew:qw)(r):(r.local?Nw:Iw)(r,o,i))}function Rw(e,i){return function(r){this.setAttribute(e,i.call(this,r))}}function Vw(e,i){return function(r){this.setAttributeNS(e.space,e.local,i.call(this,r))}}function Fw(e,i){var r,o;function a(){var c=i.apply(this,arguments);return c!==o&&(r=(o=c)&&Vw(e,c)),r}return a._value=i,a}function Dw(e,i){var r,o;function a(){var c=i.apply(this,arguments);return c!==o&&(r=(o=c)&&Rw(e,c)),r}return a._value=i,a}function zw(e,i){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(i==null)return this.tween(r,null);if(typeof i!="function")throw new Error;var o=Pu(e);return this.tween(r,(o.local?Fw:Dw)(o,i))}function Lw(e,i){return function(){Lp(this,e).delay=+i.apply(this,arguments)}}function Ow(e,i){return i=+i,function(){Lp(this,e).delay=i}}function Bw(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Lw:Ow)(i,e)):kn(this.node(),i).delay}function Aw(e,i){return function(){Ln(this,e).duration=+i.apply(this,arguments)}}function $w(e,i){return i=+i,function(){Ln(this,e).duration=i}}function Hw(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Aw:$w)(i,e)):kn(this.node(),i).duration}function Ww(e,i){if(typeof i!="function")throw new Error;return function(){Ln(this,e).ease=i}}function Uw(e){var i=this._id;return arguments.length?this.each(Ww(i,e)):kn(this.node(),i).ease}function Gw(e,i){return function(){var r=i.apply(this,arguments);if(typeof r!="function")throw new Error;Ln(this,e).ease=r}}function Yw(e){if(typeof e!="function")throw new Error;return this.each(Gw(this._id,e))}function Kw(e){typeof e!="function"&&(e=E0(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var c=i[a],u=c.length,d=o[a]=[],_,f=0;f<u;++f)(_=c[f])&&e.call(_,_.__data__,f,c)&&d.push(_);return new cr(o,this._parents,this._name,this._id)}function Qw(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,r=e._groups,o=i.length,a=r.length,c=Math.min(o,a),u=new Array(o),d=0;d<c;++d)for(var _=i[d],f=r[d],y=_.length,m=u[d]=new Array(y),h,x=0;x<y;++x)(h=_[x]||f[x])&&(m[x]=h);for(;d<o;++d)u[d]=i[d];return new cr(u,this._parents,this._name,this._id)}function Xw(e){return(e+"").trim().split(/^|\s+/).every(function(i){var r=i.indexOf(".");return r>=0&&(i=i.slice(0,r)),!i||i==="start"})}function Zw(e,i,r){var o,a,c=Xw(i)?Lp:Ln;return function(){var u=c(this,e),d=u.on;d!==o&&(a=(o=d).copy()).on(i,r),u.on=a}}function Jw(e,i){var r=this._id;return arguments.length<2?kn(this.node(),r).on.on(e):this.each(Zw(r,e,i))}function eb(e){return function(){var i=this.parentNode;for(var r in this.__transition)if(+r!==e)return;i&&i.removeChild(this)}}function tb(){return this.on("end.remove",eb(this._id))}function ib(e){var i=this._name,r=this._id;typeof e!="function"&&(e=Rp(e));for(var o=this._groups,a=o.length,c=new Array(a),u=0;u<a;++u)for(var d=o[u],_=d.length,f=c[u]=new Array(_),y,m,h=0;h<_;++h)(y=d[h])&&(m=e.call(y,y.__data__,h,d))&&("__data__"in y&&(m.__data__=y.__data__),f[h]=m,Ru(f[h],i,r,h,f,kn(y,r)));return new cr(c,this._parents,i,r)}function nb(e){var i=this._name,r=this._id;typeof e!="function"&&(e=q0(e));for(var o=this._groups,a=o.length,c=[],u=[],d=0;d<a;++d)for(var _=o[d],f=_.length,y,m=0;m<f;++m)if(y=_[m]){for(var h=e.call(y,y.__data__,m,_),x,w=kn(y,r),b=0,S=h.length;b<S;++b)(x=h[b])&&Ru(x,i,r,b,h,w);c.push(h),u.push(y)}return new cr(c,u,i,r)}var rb=Es.prototype.constructor;function ob(){return new rb(this._groups,this._parents)}function ab(e,i){var r,o,a;return function(){var c=la(this,e),u=(this.style.removeProperty(e),la(this,e));return c===u?null:c===r&&u===o?a:a=i(r=c,o=u)}}function Z0(e){return function(){this.style.removeProperty(e)}}function sb(e,i,r){var o,a=r+"",c;return function(){var u=la(this,e);return u===a?null:u===o?c:c=i(o=u,r)}}function lb(e,i,r){var o,a,c;return function(){var u=la(this,e),d=r(this),_=d+"";return d==null&&(_=d=(this.style.removeProperty(e),la(this,e))),u===_?null:u===o&&_===a?c:(a=_,c=i(o=u,d))}}function ub(e,i){var r,o,a,c="style."+i,u="end."+c,d;return function(){var _=Ln(this,e),f=_.on,y=_.value[c]==null?d||(d=Z0(i)):void 0;(f!==r||a!==y)&&(o=(r=f).copy()).on(u,a=y),_.on=o}}function cb(e,i,r){var o=(e+="")=="transform"?dw:X0;return i==null?this.styleTween(e,ab(e,o)).on("end.style."+e,Z0(e)):typeof i=="function"?this.styleTween(e,lb(e,o,Op(this,"style."+e,i))).each(ub(this._id,e)):this.styleTween(e,sb(e,o,i),r).on("end.style."+e,null)}function db(e,i,r){return function(o){this.style.setProperty(e,i.call(this,o),r)}}function pb(e,i,r){var o,a;function c(){var u=i.apply(this,arguments);return u!==a&&(o=(a=u)&&db(e,u,r)),o}return c._value=i,c}function _b(e,i,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;return this.tween(o,pb(e,i,r??""))}function mb(e){return function(){this.textContent=e}}function fb(e){return function(){var i=e(this);this.textContent=i??""}}function hb(e){return this.tween("text",typeof e=="function"?fb(Op(this,"text",e)):mb(e==null?"":e+""))}function yb(e){return function(i){this.textContent=e.call(this,i)}}function gb(e){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&yb(a)),i}return o._value=e,o}function xb(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,gb(e))}function vb(){for(var e=this._name,i=this._id,r=J0(),o=this._groups,a=o.length,c=0;c<a;++c)for(var u=o[c],d=u.length,_,f=0;f<d;++f)if(_=u[f]){var y=kn(_,i);Ru(_,e,r,f,u,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new cr(o,this._parents,e,r)}function wb(){var e,i,r=this,o=r._id,a=r.size();return new Promise(function(c,u){var d={value:u},_={value:function(){--a===0&&c()}};r.each(function(){var f=Ln(this,o),y=f.on;y!==e&&(i=(e=y).copy(),i._.cancel.push(d),i._.interrupt.push(d),i._.end.push(_)),f.on=i}),a===0&&c()})}var bb=0;function cr(e,i,r,o){this._groups=e,this._parents=i,this._name=r,this._id=o}function J0(){return++bb}var or=Es.prototype;cr.prototype={constructor:cr,select:ib,selectAll:nb,selectChild:or.selectChild,selectChildren:or.selectChildren,filter:Kw,merge:Qw,selection:ob,transition:vb,call:or.call,nodes:or.nodes,node:or.node,size:or.size,empty:or.empty,each:or.each,on:Jw,attr:Tw,attrTween:zw,style:cb,styleTween:_b,text:hb,textTween:xb,remove:tb,tween:Cw,delay:Bw,duration:Hw,ease:Uw,easeVarying:Yw,end:wb,[Symbol.iterator]:or[Symbol.iterator]};function kb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Sb={time:null,delay:0,duration:250,ease:kb};function Mb(e,i){for(var r;!(r=e.__transition)||!(r=r[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return r}function Cb(e){var i,r;e instanceof cr?(i=e._id,e=e._name):(i=J0(),(r=Sb).time=zp(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,c=0;c<a;++c)for(var u=o[c],d=u.length,_,f=0;f<d;++f)(_=u[f])&&Ru(_,e,i,f,u,r||Mb(_,i));return new cr(o,this._parents,e,i)}Es.prototype.interrupt=kw;Es.prototype.transition=Cb;const $l=e=>()=>e;function qb(e,{sourceEvent:i,target:r,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function sr(e,i,r){this.k=e,this.x=i,this.y=r}sr.prototype={constructor:sr,scale:function(e){return e===1?this:new sr(this.k*e,this.x,this.y)},translate:function(e,i){return e===0&i===0?this:new sr(this.k,this.x+this.k*e,this.y+this.k*i)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vu=new sr(1,0,0);ey.prototype=sr.prototype;function ey(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Vu;return e.__zoom}function Id(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function Eb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ib(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ff(){return this.__zoom||Vu}function Nb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pb(e,i,r){var o=e.invertX(i[0][0])-r[0][0],a=e.invertX(i[1][0])-r[1][0],c=e.invertY(i[0][1])-r[0][1],u=e.invertY(i[1][1])-r[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function ty(){var e=Eb,i=Ib,r=Pb,o=Nb,a=jb,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,_=nu,f=ju("start","zoom","end"),y,m,h,x=500,w=150,b=0,S=10;function k(T){T.property("__zoom",Ff).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",Q).filter(a).on("touchstart.zoom",z).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(T,X,G,Z){var H=T.selection?T.selection():T;H.property("__zoom",Ff),T!==H?P(T,X,G,Z):H.interrupt().each(function(){C(this,arguments).event(Z).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},k.scaleBy=function(T,X,G,Z){k.scaleTo(T,function(){var H=this.__zoom.k,U=typeof X=="function"?X.apply(this,arguments):X;return H*U},G,Z)},k.scaleTo=function(T,X,G,Z){k.transform(T,function(){var H=i.apply(this,arguments),U=this.__zoom,te=G==null?E(H):typeof G=="function"?G.apply(this,arguments):G,B=U.invert(te),Y=typeof X=="function"?X.apply(this,arguments):X;return r(M(I(U,Y),te,B),H,u)},G,Z)},k.translateBy=function(T,X,G,Z){k.transform(T,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof G=="function"?G.apply(this,arguments):G),i.apply(this,arguments),u)},null,Z)},k.translateTo=function(T,X,G,Z,H){k.transform(T,function(){var U=i.apply(this,arguments),te=this.__zoom,B=Z==null?E(U):typeof Z=="function"?Z.apply(this,arguments):Z;return r(Vu.translate(B[0],B[1]).scale(te.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof G=="function"?-G.apply(this,arguments):-G),U,u)},Z,H)};function I(T,X){return X=Math.max(c[0],Math.min(c[1],X)),X===T.k?T:new sr(X,T.x,T.y)}function M(T,X,G){var Z=X[0]-G[0]*T.k,H=X[1]-G[1]*T.k;return Z===T.x&&H===T.y?T:new sr(T.k,Z,H)}function E(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function P(T,X,G,Z){T.on("start.zoom",function(){C(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(Z).end()}).tween("zoom",function(){var H=this,U=arguments,te=C(H,U).event(Z),B=i.apply(H,U),Y=G==null?E(B):typeof G=="function"?G.apply(H,U):G,pe=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),ue=H.__zoom,he=typeof X=="function"?X.apply(H,U):X,be=_(ue.invert(Y).concat(pe/ue.k),he.invert(Y).concat(pe/he.k));return function(Se){if(Se===1)Se=he;else{var ce=be(Se),qe=pe/ce[2];Se=new sr(qe,Y[0]-ce[0]*qe,Y[1]-ce[1]*qe)}te.zoom(null,Se)}})}function C(T,X,G){return!G&&T.__zooming||new R(T,X)}function R(T,X){this.that=T,this.args=X,this.active=0,this.sourceEvent=null,this.extent=i.apply(T,X),this.taps=0}R.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,X){return this.mouse&&T!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var X=Di(this.that).datum();f.call(T,this.that,new qb(T,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:f}),X)}};function j(T,...X){if(!e.apply(this,arguments))return;var G=C(this,X).event(T),Z=this.__zoom,H=Math.max(c[0],Math.min(c[1],Z.k*Math.pow(2,o.apply(this,arguments)))),U=yn(T);if(G.wheel)(G.mouse[0][0]!==U[0]||G.mouse[0][1]!==U[1])&&(G.mouse[1]=Z.invert(G.mouse[0]=U)),clearTimeout(G.wheel);else{if(Z.k===H)return;G.mouse=[U,Z.invert(U)],au(this),G.start()}es(T),G.wheel=setTimeout(te,w),G.zoom("mouse",r(M(I(Z,H),G.mouse[0],G.mouse[1]),G.extent,u));function te(){G.wheel=null,G.end()}}function V(T,...X){if(h||!e.apply(this,arguments))return;var G=T.currentTarget,Z=C(this,X,!0).event(T),H=Di(T.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",pe,!0),U=yn(T,G),te=T.clientX,B=T.clientY;z0(T.view),Id(T),Z.mouse=[U,this.__zoom.invert(U)],au(this),Z.start();function Y(ue){if(es(ue),!Z.moved){var he=ue.clientX-te,be=ue.clientY-B;Z.moved=he*he+be*be>b}Z.event(ue).zoom("mouse",r(M(Z.that.__zoom,Z.mouse[0]=yn(ue,G),Z.mouse[1]),Z.extent,u))}function pe(ue){H.on("mousemove.zoom mouseup.zoom",null),L0(ue.view,Z.moved),es(ue),Z.event(ue).end()}}function Q(T,...X){if(e.apply(this,arguments)){var G=this.__zoom,Z=yn(T.changedTouches?T.changedTouches[0]:T,this),H=G.invert(Z),U=G.k*(T.shiftKey?.5:2),te=r(M(I(G,U),Z,H),i.apply(this,X),u);es(T),d>0?Di(this).transition().duration(d).call(P,te,Z,T):Di(this).call(k.transform,te,Z,T)}}function z(T,...X){if(e.apply(this,arguments)){var G=T.touches,Z=G.length,H=C(this,X,T.changedTouches.length===Z).event(T),U,te,B,Y;for(Id(T),te=0;te<Z;++te)B=G[te],Y=yn(B,this),Y=[Y,this.__zoom.invert(Y),B.identifier],H.touch0?!H.touch1&&H.touch0[2]!==Y[2]&&(H.touch1=Y,H.taps=0):(H.touch0=Y,U=!0,H.taps=1+!!y);y&&(y=clearTimeout(y)),U&&(H.taps<2&&(m=Y[0],y=setTimeout(function(){y=null},x)),au(this),H.start())}}function L(T,...X){if(this.__zooming){var G=C(this,X).event(T),Z=T.changedTouches,H=Z.length,U,te,B,Y;for(es(T),U=0;U<H;++U)te=Z[U],B=yn(te,this),G.touch0&&G.touch0[2]===te.identifier?G.touch0[0]=B:G.touch1&&G.touch1[2]===te.identifier&&(G.touch1[0]=B);if(te=G.that.__zoom,G.touch1){var pe=G.touch0[0],ue=G.touch0[1],he=G.touch1[0],be=G.touch1[1],Se=(Se=he[0]-pe[0])*Se+(Se=he[1]-pe[1])*Se,ce=(ce=be[0]-ue[0])*ce+(ce=be[1]-ue[1])*ce;te=I(te,Math.sqrt(Se/ce)),B=[(pe[0]+he[0])/2,(pe[1]+he[1])/2],Y=[(ue[0]+be[0])/2,(ue[1]+be[1])/2]}else if(G.touch0)B=G.touch0[0],Y=G.touch0[1];else return;G.zoom("touch",r(M(te,B,Y),G.extent,u))}}function ie(T,...X){if(this.__zooming){var G=C(this,X).event(T),Z=T.changedTouches,H=Z.length,U,te;for(Id(T),h&&clearTimeout(h),h=setTimeout(function(){h=null},x),U=0;U<H;++U)te=Z[U],G.touch0&&G.touch0[2]===te.identifier?delete G.touch0:G.touch1&&G.touch1[2]===te.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&(te=yn(te,this),Math.hypot(m[0]-te[0],m[1]-te[1])<S)){var B=Di(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return k.wheelDelta=function(T){return arguments.length?(o=typeof T=="function"?T:$l(+T),k):o},k.filter=function(T){return arguments.length?(e=typeof T=="function"?T:$l(!!T),k):e},k.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:$l(!!T),k):a},k.extent=function(T){return arguments.length?(i=typeof T=="function"?T:$l([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),k):i},k.scaleExtent=function(T){return arguments.length?(c[0]=+T[0],c[1]=+T[1],k):[c[0],c[1]]},k.translateExtent=function(T){return arguments.length?(u[0][0]=+T[0][0],u[1][0]=+T[1][0],u[0][1]=+T[0][1],u[1][1]=+T[1][1],k):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},k.constrain=function(T){return arguments.length?(r=T,k):r},k.duration=function(T){return arguments.length?(d=+T,k):d},k.interpolate=function(T){return arguments.length?(_=T,k):_},k.on=function(){var T=f.on.apply(f,arguments);return T===f?k:T},k.clickDistance=function(T){return arguments.length?(b=(T=+T)*T,k):Math.sqrt(b)},k.tapDistance=function(T){return arguments.length?(S=+T,k):S},k}const zn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:i,sourceHandle:r,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:o}", edge id: ${i}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},hs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],iy=["Enter"," ","Escape"],ny={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:i,y:r})=>`Moved selected node ${e}. New position, x: ${i}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ca;(function(e){e.Strict="strict",e.Loose="loose"})(ca||(ca={}));var vo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(vo||(vo={}));var ys;(function(e){e.Partial="partial",e.Full="full"})(ys||(ys={}));const ry={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Dr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Dr||(Dr={}));var hu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(hu||(hu={}));var Be;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Be||(Be={}));const Df={[Be.Left]:Be.Right,[Be.Right]:Be.Left,[Be.Top]:Be.Bottom,[Be.Bottom]:Be.Top};function oy(e){return e===null?null:e?"valid":"invalid"}const ay=e=>"id"in e&&"source"in e&&"target"in e,Tb=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Bp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ns=(e,i=[0,0])=>{const{width:r,height:o}=dr(e),a=e.origin??i,c=r*a[0],u=o*a[1];return{x:e.position.x-c,y:e.position.y-u}},Rb=(e,i={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,a)=>{const c=typeof a=="string";let u=!i.nodeLookup&&!c?a:void 0;i.nodeLookup&&(u=c?i.nodeLookup.get(a):Bp(a)?a:i.nodeLookup.get(a.id));const d=u?yu(u,i.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fu(o,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Du(r)},js=(e,i={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(a=>{(i.filter===void 0||i.filter(a))&&(r=Fu(r,yu(a)),o=!0)}),o?Du(r):{x:0,y:0,width:0,height:0}},Ap=(e,i,[r,o,a]=[0,0,1],c=!1,u=!1)=>{const d={...Ts(i,[r,o,a]),width:i.width/a,height:i.height/a},_=[];for(const f of e.values()){const{measured:y,selectable:m=!0,hidden:h=!1}=f;if(u&&!m||h)continue;const x=y.width??f.width??f.initialWidth??null,w=y.height??f.height??f.initialHeight??null,b=gs(d,pa(f)),S=(x??0)*(w??0),k=c&&b>0;(!f.internals.handleBounds||k||b>=S||f.dragging)&&_.push(f)}return _},Vb=(e,i)=>{const r=new Set;return e.forEach(o=>{r.add(o.id)}),i.filter(o=>r.has(o.source)||r.has(o.target))};function Fb(e,i){const r=new Map,o=i!=null&&i.nodes?new Set(i.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((i==null?void 0:i.includeHiddenNodes)||!a.hidden)&&(!o||o.has(a.id))&&r.set(a.id,a)}),r}async function Db({nodes:e,width:i,height:r,panZoom:o,minZoom:a,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=Fb(e,u),_=js(d),f=$p(_,i,r,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??c,(u==null?void 0:u.padding)??.1);return await o.setViewport(f,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function sy({nodeId:e,nextPosition:i,nodeLookup:r,nodeOrigin:o=[0,0],nodeExtent:a,onError:c}){const u=r.get(e),d=u.parentId?r.get(u.parentId):void 0,{x:_,y:f}=d?d.internals.positionAbsolute:{x:0,y:0},y=u.origin??o;let m=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!d)c==null||c("005",zn.error005());else{const x=d.measured.width,w=d.measured.height;x&&w&&(m=[[_,f],[_+x,f+w]])}else d&&_a(u.extent)&&(m=[[u.extent[0][0]+_,u.extent[0][1]+f],[u.extent[1][0]+_,u.extent[1][1]+f]]);const h=_a(m)?ko(i,m,u.measured):i;return(u.measured.width===void 0||u.measured.height===void 0)&&(c==null||c("015",zn.error015())),{position:{x:h.x-_+(u.measured.width??0)*y[0],y:h.y-f+(u.measured.height??0)*y[1]},positionAbsolute:h}}async function zb({nodesToRemove:e=[],edgesToRemove:i=[],nodes:r,edges:o,onBeforeDelete:a}){const c=new Set(e.map(h=>h.id)),u=[];for(const h of r){if(h.deletable===!1)continue;const x=c.has(h.id),w=!x&&h.parentId&&u.find(b=>b.id===h.parentId);(x||w)&&u.push(h)}const d=new Set(i.map(h=>h.id)),_=o.filter(h=>h.deletable!==!1),y=Vb(u,_);for(const h of _)d.has(h.id)&&!y.find(w=>w.id===h.id)&&y.push(h);if(!a)return{edges:y,nodes:u};const m=await a({nodes:u,edges:y});return typeof m=="boolean"?m?{edges:y,nodes:u}:{edges:[],nodes:[]}:m}const da=(e,i=0,r=1)=>Math.min(Math.max(e,i),r),ko=(e={x:0,y:0},i,r)=>({x:da(e.x,i[0][0],i[1][0]-((r==null?void 0:r.width)??0)),y:da(e.y,i[0][1],i[1][1]-((r==null?void 0:r.height)??0))});function ly(e,i,r){const{width:o,height:a}=dr(r),{x:c,y:u}=r.internals.positionAbsolute;return ko(e,[[c,u],[c+o,u+a]],i)}const zf=(e,i,r)=>e<i?da(Math.abs(e-i),1,i)/i:e>r?-da(Math.abs(e-r),1,i)/i:0,uy=(e,i,r=15,o=40)=>{const a=zf(e.x,o,i.width-o)*r,c=zf(e.y,o,i.height-o)*r;return[a,c]},Fu=(e,i)=>({x:Math.min(e.x,i.x),y:Math.min(e.y,i.y),x2:Math.max(e.x2,i.x2),y2:Math.max(e.y2,i.y2)}),sp=({x:e,y:i,width:r,height:o})=>({x:e,y:i,x2:e+r,y2:i+o}),Du=({x:e,y:i,x2:r,y2:o})=>({x:e,y:i,width:r-e,height:o-i}),pa=(e,i=[0,0])=>{var a,c;const{x:r,y:o}=Bp(e)?e.internals.positionAbsolute:Ns(e,i);return{x:r,y:o,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((c=e.measured)==null?void 0:c.height)??e.height??e.initialHeight??0}},yu=(e,i=[0,0])=>{var a,c;const{x:r,y:o}=Bp(e)?e.internals.positionAbsolute:Ns(e,i);return{x:r,y:o,x2:r+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:o+(((c=e.measured)==null?void 0:c.height)??e.height??e.initialHeight??0)}},cy=(e,i)=>Du(Fu(sp(e),sp(i))),gs=(e,i)=>{const r=Math.max(0,Math.min(e.x+e.width,i.x+i.width)-Math.max(e.x,i.x)),o=Math.max(0,Math.min(e.y+e.height,i.y+i.height)-Math.max(e.y,i.y));return Math.ceil(r*o)},Lf=e=>wn(e.width)&&wn(e.height)&&wn(e.x)&&wn(e.y),wn=e=>!isNaN(e)&&isFinite(e),Lb=(e,i)=>{},Ps=(e,i=[1,1])=>({x:i[0]*Math.round(e.x/i[0]),y:i[1]*Math.round(e.y/i[1])}),Ts=({x:e,y:i},[r,o,a],c=!1,u=[1,1])=>{const d={x:(e-r)/a,y:(i-o)/a};return c?Ps(d,u):d},gu=({x:e,y:i},[r,o,a])=>({x:e*a+r,y:i*a+o});function ia(e,i){if(typeof e=="number")return Math.floor((i-i/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(i*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ob(e,i,r){if(typeof e=="string"||typeof e=="number"){const o=ia(e,r),a=ia(e,i);return{top:o,right:a,bottom:o,left:a,x:a*2,y:o*2}}if(typeof e=="object"){const o=ia(e.top??e.y??0,r),a=ia(e.bottom??e.y??0,r),c=ia(e.left??e.x??0,i),u=ia(e.right??e.x??0,i);return{top:o,right:u,bottom:a,left:c,x:c+u,y:o+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Bb(e,i,r,o,a,c){const{x:u,y:d}=gu(e,[i,r,o]),{x:_,y:f}=gu({x:e.x+e.width,y:e.y+e.height},[i,r,o]),y=a-_,m=c-f;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(y),bottom:Math.floor(m)}}const $p=(e,i,r,o,a,c)=>{const u=Ob(c,i,r),d=(i-u.x)/e.width,_=(r-u.y)/e.height,f=Math.min(d,_),y=da(f,o,a),m=e.x+e.width/2,h=e.y+e.height/2,x=i/2-m*y,w=r/2-h*y,b=Bb(e,x,w,y,i,r),S={left:Math.min(b.left-u.left,0),top:Math.min(b.top-u.top,0),right:Math.min(b.right-u.right,0),bottom:Math.min(b.bottom-u.bottom,0)};return{x:x-S.left+S.right,y:w-S.top+S.bottom,zoom:y}},xs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function _a(e){return e!=null&&e!=="parent"}function dr(e){var i,r;return{width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}}function dy(e){var i,r;return(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth)!==void 0&&(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight)!==void 0}function py(e,i={width:0,height:0},r,o,a){const c={...e},u=o.get(r);if(u){const d=u.origin||a;c.x+=u.internals.positionAbsolute.x-(i.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(i.height??0)*d[1]}return c}function Of(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}function Ab(){let e,i;return{promise:new Promise((o,a)=>{e=o,i=a}),resolve:e,reject:i}}function $b(e){return{...ny,...e||{}}}function as(e,{snapGrid:i=[0,0],snapToGrid:r=!1,transform:o,containerBounds:a}){const{x:c,y:u}=bn(e),d=Ts({x:c-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},o),{x:_,y:f}=r?Ps(d,i):d;return{xSnapped:_,ySnapped:f,...d}}const Hp=e=>({width:e.offsetWidth,height:e.offsetHeight}),_y=e=>{var i;return((i=e==null?void 0:e.getRootNode)==null?void 0:i.call(e))||(window==null?void 0:window.document)},Hb=["INPUT","SELECT","TEXTAREA"];function my(e){var o,a;const i=((a=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:a[0])||e.target;return(i==null?void 0:i.nodeType)!==1?!1:Hb.includes(i.nodeName)||i.hasAttribute("contenteditable")||!!i.closest(".nokey")}const fy=e=>"clientX"in e,bn=(e,i)=>{var c,u;const r=fy(e),o=r?e.clientX:(c=e.touches)==null?void 0:c[0].clientX,a=r?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:o-((i==null?void 0:i.left)??0),y:a-((i==null?void 0:i.top)??0)}},Bf=(e,i,r,o,a)=>{const c=i.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(d.left-r.left)/o,y:(d.top-r.top)/o,...Hp(u)}})};function hy({sourceX:e,sourceY:i,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d}){const _=e*.125+a*.375+u*.375+r*.125,f=i*.125+c*.375+d*.375+o*.125,y=Math.abs(_-e),m=Math.abs(f-i);return[_,f,y,m]}function Hl(e,i){return e>=0?.5*e:i*25*Math.sqrt(-e)}function Af({pos:e,x1:i,y1:r,x2:o,y2:a,c}){switch(e){case Be.Left:return[i-Hl(i-o,c),r];case Be.Right:return[i+Hl(o-i,c),r];case Be.Top:return[i,r-Hl(r-a,c)];case Be.Bottom:return[i,r+Hl(a-r,c)]}}function Wp({sourceX:e,sourceY:i,sourcePosition:r=Be.Bottom,targetX:o,targetY:a,targetPosition:c=Be.Top,curvature:u=.25}){const[d,_]=Af({pos:r,x1:e,y1:i,x2:o,y2:a,c:u}),[f,y]=Af({pos:c,x1:o,y1:a,x2:e,y2:i,c:u}),[m,h,x,w]=hy({sourceX:e,sourceY:i,targetX:o,targetY:a,sourceControlX:d,sourceControlY:_,targetControlX:f,targetControlY:y});return[`M${e},${i} C${d},${_} ${f},${y} ${o},${a}`,m,h,x,w]}function yy({sourceX:e,sourceY:i,targetX:r,targetY:o}){const a=Math.abs(r-e)/2,c=r<e?r+a:r-a,u=Math.abs(o-i)/2,d=o<i?o+u:o-u;return[c,d,a,u]}function Wb({sourceNode:e,targetNode:i,selected:r=!1,zIndex:o=0,elevateOnSelect:a=!1,zIndexMode:c="basic"}){if(c==="manual")return o;const u=a&&r?o+1e3:o,d=Math.max(e.parentId||a&&e.selected?e.internals.z:0,i.parentId||a&&i.selected?i.internals.z:0);return u+d}function Ub({sourceNode:e,targetNode:i,width:r,height:o,transform:a}){const c=Fu(yu(e),yu(i));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:r/a[2],height:o/a[2]};return gs(u,Du(c))>0}const Gb=({source:e,sourceHandle:i,target:r,targetHandle:o})=>`xy-edge__${e}${i||""}-${r}${o||""}`,Yb=(e,i)=>i.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),lp=(e,i,r={})=>{if(!e.source||!e.target)return i;const o=r.getEdgeId||Gb;let a;return ay(e)?a={...e}:a={...e,id:o(e)},Yb(a,i)?i:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,i.concat(a))};function Up({sourceX:e,sourceY:i,targetX:r,targetY:o}){const[a,c,u,d]=yy({sourceX:e,sourceY:i,targetX:r,targetY:o});return[`M ${e},${i}L ${r},${o}`,a,c,u,d]}const $f={[Be.Left]:{x:-1,y:0},[Be.Right]:{x:1,y:0},[Be.Top]:{x:0,y:-1},[Be.Bottom]:{x:0,y:1}},Kb=({source:e,sourcePosition:i=Be.Bottom,target:r})=>i===Be.Left||i===Be.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Hf=(e,i)=>Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));function Qb({source:e,sourcePosition:i=Be.Bottom,target:r,targetPosition:o=Be.Top,center:a,offset:c,stepPosition:u}){const d=$f[i],_=$f[o],f={x:e.x+d.x*c,y:e.y+d.y*c},y={x:r.x+_.x*c,y:r.y+_.y*c},m=Kb({source:f,sourcePosition:i,target:y}),h=m.x!==0?"x":"y",x=m[h];let w=[],b,S;const k={x:0,y:0},I={x:0,y:0},[,,M,E]=yy({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(d[h]*_[h]===-1){h==="x"?(b=a.x??f.x+(y.x-f.x)*u,S=a.y??(f.y+y.y)/2):(b=a.x??(f.x+y.x)/2,S=a.y??f.y+(y.y-f.y)*u);const C=[{x:b,y:f.y},{x:b,y:y.y}],R=[{x:f.x,y:S},{x:y.x,y:S}];d[h]===x?w=h==="x"?C:R:w=h==="x"?R:C}else{const C=[{x:f.x,y:y.y}],R=[{x:y.x,y:f.y}];if(h==="x"?w=d.x===x?R:C:w=d.y===x?C:R,i===o){const L=Math.abs(e[h]-r[h]);if(L<=c){const ie=Math.min(c-1,c-L);d[h]===x?k[h]=(f[h]>e[h]?-1:1)*ie:I[h]=(y[h]>r[h]?-1:1)*ie}}if(i!==o){const L=h==="x"?"y":"x",ie=d[h]===_[L],T=f[L]>y[L],X=f[L]<y[L];(d[h]===1&&(!ie&&T||ie&&X)||d[h]!==1&&(!ie&&X||ie&&T))&&(w=h==="x"?C:R)}const j={x:f.x+k.x,y:f.y+k.y},V={x:y.x+I.x,y:y.y+I.y},Q=Math.max(Math.abs(j.x-w[0].x),Math.abs(V.x-w[0].x)),z=Math.max(Math.abs(j.y-w[0].y),Math.abs(V.y-w[0].y));Q>=z?(b=(j.x+V.x)/2,S=w[0].y):(b=w[0].x,S=(j.y+V.y)/2)}return[[e,{x:f.x+k.x,y:f.y+k.y},...w,{x:y.x+I.x,y:y.y+I.y},r],b,S,M,E]}function Xb(e,i,r,o){const a=Math.min(Hf(e,i)/2,Hf(i,r)/2,o),{x:c,y:u}=i;if(e.x===c&&c===r.x||e.y===u&&u===r.y)return`L${c} ${u}`;if(e.y===u){const f=e.x<r.x?-1:1,y=e.y<r.y?1:-1;return`L ${c+a*f},${u}Q ${c},${u} ${c},${u+a*y}`}const d=e.x<r.x?1:-1,_=e.y<r.y?-1:1;return`L ${c},${u+a*_}Q ${c},${u} ${c+a*d},${u}`}function up({sourceX:e,sourceY:i,sourcePosition:r=Be.Bottom,targetX:o,targetY:a,targetPosition:c=Be.Top,borderRadius:u=5,centerX:d,centerY:_,offset:f=20,stepPosition:y=.5}){const[m,h,x,w,b]=Qb({source:{x:e,y:i},sourcePosition:r,target:{x:o,y:a},targetPosition:c,center:{x:d,y:_},offset:f,stepPosition:y});return[m.reduce((k,I,M)=>{let E="";return M>0&&M<m.length-1?E=Xb(m[M-1],I,m[M+1],u):E=`${M===0?"M":"L"}${I.x} ${I.y}`,k+=E,k},""),h,x,w,b]}function Wf(e){var i;return e&&!!(e.internals.handleBounds||(i=e.handles)!=null&&i.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Zb(e){var m;const{sourceNode:i,targetNode:r}=e;if(!Wf(i)||!Wf(r))return null;const o=i.internals.handleBounds||Uf(i.handles),a=r.internals.handleBounds||Uf(r.handles),c=Gf((o==null?void 0:o.source)??[],e.sourceHandle),u=Gf(e.connectionMode===ca.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!c||!u)return(m=e.onError)==null||m.call(e,"008",zn.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=(c==null?void 0:c.position)||Be.Bottom,_=(u==null?void 0:u.position)||Be.Top,f=So(i,c,d),y=So(r,u,_);return{sourceX:f.x,sourceY:f.y,targetX:y.x,targetY:y.y,sourcePosition:d,targetPosition:_}}function Uf(e){if(!e)return null;const i=[],r=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?i.push(o):o.type==="target"&&r.push(o);return{source:i,target:r}}function So(e,i,r=Be.Left,o=!1){const a=((i==null?void 0:i.x)??0)+e.internals.positionAbsolute.x,c=((i==null?void 0:i.y)??0)+e.internals.positionAbsolute.y,{width:u,height:d}=i??dr(e);if(o)return{x:a+u/2,y:c+d/2};switch((i==null?void 0:i.position)??r){case Be.Top:return{x:a+u/2,y:c};case Be.Right:return{x:a+u,y:c+d/2};case Be.Bottom:return{x:a+u/2,y:c+d};case Be.Left:return{x:a,y:c+d/2}}}function Gf(e,i){return e&&(i?e.find(r=>r.id===i):e[0])||null}function cp(e,i){return e?typeof e=="string"?e:`${i?`${i}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Jb(e,{id:i,defaultColor:r,defaultMarkerStart:o,defaultMarkerEnd:a}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||o,d.markerEnd||a].forEach(_=>{if(_&&typeof _=="object"){const f=cp(_,i);c.has(f)||(u.push({id:f,color:_.color||r,..._}),c.add(f))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const gy=1e3,e2=10,Gp={nodeOrigin:[0,0],nodeExtent:hs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},t2={...Gp,checkEquality:!0};function Yp(e,i){const r={...e};for(const o in i)i[o]!==void 0&&(r[o]=i[o]);return r}function i2(e,i,r){const o=Yp(Gp,r);for(const a of e.values())if(a.parentId)Qp(a,e,i,o);else{const c=Ns(a,o.nodeOrigin),u=_a(a.extent)?a.extent:o.nodeExtent,d=ko(c,u,dr(a));a.internals.positionAbsolute=d}}function n2(e,i){if(!e.handles)return e.measured?i==null?void 0:i.internals.handleBounds:void 0;const r=[],o=[];for(const a of e.handles){const c={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?r.push(c):a.type==="target"&&o.push(c)}return{source:r,target:o}}function Kp(e){return e==="manual"}function dp(e,i,r,o={}){var f,y;const a=Yp(t2,o),c={i:0},u=new Map(i),d=a!=null&&a.elevateNodesOnSelect&&!Kp(a.zIndexMode)?gy:0;let _=e.length>0;i.clear(),r.clear();for(const m of e){let h=u.get(m.id);if(a.checkEquality&&m===(h==null?void 0:h.internals.userNode))i.set(m.id,h);else{const x=Ns(m,a.nodeOrigin),w=_a(m.extent)?m.extent:a.nodeExtent,b=ko(x,w,dr(m));h={...a.defaults,...m,measured:{width:(f=m.measured)==null?void 0:f.width,height:(y=m.measured)==null?void 0:y.height},internals:{positionAbsolute:b,handleBounds:n2(m,h),z:xy(m,d,a.zIndexMode),userNode:m}},i.set(m.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(_=!1),m.parentId&&Qp(h,i,r,o,c)}return _}function r2(e,i){if(!e.parentId)return;const r=i.get(e.parentId);r?r.set(e.id,e):i.set(e.parentId,new Map([[e.id,e]]))}function Qp(e,i,r,o,a){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d,zIndexMode:_}=Yp(Gp,o),f=e.parentId,y=i.get(f);if(!y){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}r2(e,r),a&&!y.parentId&&y.internals.rootParentIndex===void 0&&_==="auto"&&(y.internals.rootParentIndex=++a.i,y.internals.z=y.internals.z+a.i*e2),a&&y.internals.rootParentIndex!==void 0&&(a.i=y.internals.rootParentIndex);const m=c&&!Kp(_)?gy:0,{x:h,y:x,z:w}=o2(e,y,u,d,m,_),{positionAbsolute:b}=e.internals,S=h!==b.x||x!==b.y;(S||w!==e.internals.z)&&i.set(e.id,{...e,internals:{...e.internals,positionAbsolute:S?{x:h,y:x}:b,z:w}})}function xy(e,i,r){const o=wn(e.zIndex)?e.zIndex:0;return Kp(r)?o:o+(e.selected?i:0)}function o2(e,i,r,o,a,c){const{x:u,y:d}=i.internals.positionAbsolute,_=dr(e),f=Ns(e,r),y=_a(e.extent)?ko(f,e.extent,_):f;let m=ko({x:u+y.x,y:d+y.y},o,_);e.extent==="parent"&&(m=ly(m,_,i));const h=xy(e,a,c),x=i.internals.z??0;return{x:m.x,y:m.y,z:x>=h?x+1:h}}function Xp(e,i,r,o=[0,0]){var u;const a=[],c=new Map;for(const d of e){const _=i.get(d.parentId);if(!_)continue;const f=((u=c.get(d.parentId))==null?void 0:u.expandedRect)??pa(_),y=cy(f,d.rect);c.set(d.parentId,{expandedRect:y,parent:_})}return c.size>0&&c.forEach(({expandedRect:d,parent:_},f)=>{var M;const y=_.internals.positionAbsolute,m=dr(_),h=_.origin??o,x=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,w=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,b=Math.max(m.width,Math.round(d.width)),S=Math.max(m.height,Math.round(d.height)),k=(b-m.width)*h[0],I=(S-m.height)*h[1];(x>0||w>0||k||I)&&(a.push({id:f,type:"position",position:{x:_.position.x-x+k,y:_.position.y-w+I}}),(M=r.get(f))==null||M.forEach(E=>{e.some(P=>P.id===E.id)||a.push({id:E.id,type:"position",position:{x:E.position.x+x,y:E.position.y+w}})})),(m.width<d.width||m.height<d.height||x||w)&&a.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:b+(x?h[0]*x-k:0),height:S+(w?h[1]*w-I:0)}})}),a}function a2(e,i,r,o,a,c,u){const d=o==null?void 0:o.querySelector(".xyflow__viewport");let _=!1;if(!d)return{changes:[],updatedInternals:_};const f=[],y=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(y.transform),h=[];for(const x of e.values()){const w=i.get(x.id);if(!w)continue;if(w.hidden){i.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),_=!0;continue}const b=Hp(x.nodeElement),S=w.measured.width!==b.width||w.measured.height!==b.height;if(!!(b.width&&b.height&&(S||!w.internals.handleBounds||x.force))){const I=x.nodeElement.getBoundingClientRect(),M=_a(w.extent)?w.extent:c;let{positionAbsolute:E}=w.internals;w.parentId&&w.extent==="parent"?E=ly(E,b,i.get(w.parentId)):M&&(E=ko(E,M,b));const P={...w,measured:b,internals:{...w.internals,positionAbsolute:E,handleBounds:{source:Bf("source",x.nodeElement,I,m,w.id),target:Bf("target",x.nodeElement,I,m,w.id)}}};i.set(w.id,P),w.parentId&&Qp(P,i,r,{nodeOrigin:a,zIndexMode:u}),_=!0,S&&(f.push({id:w.id,type:"dimensions",dimensions:b}),w.expandParent&&w.parentId&&h.push({id:w.id,parentId:w.parentId,rect:pa(P,a)}))}}if(h.length>0){const x=Xp(h,i,r,a);f.push(...x)}return{changes:f,updatedInternals:_}}async function s2({delta:e,panZoom:i,transform:r,translateExtent:o,width:a,height:c}){if(!i||!e.x&&!e.y)return Promise.resolve(!1);const u=await i.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[a,c]],o),d=!!u&&(u.x!==r[0]||u.y!==r[1]||u.k!==r[2]);return Promise.resolve(d)}function Yf(e,i,r,o,a,c){let u=a;const d=o.get(u)||new Map;o.set(u,d.set(r,i)),u=`${a}-${e}`;const _=o.get(u)||new Map;if(o.set(u,_.set(r,i)),c){u=`${a}-${e}-${c}`;const f=o.get(u)||new Map;o.set(u,f.set(r,i))}}function vy(e,i,r){e.clear(),i.clear();for(const o of r){const{source:a,target:c,sourceHandle:u=null,targetHandle:d=null}=o,_={edgeId:o.id,source:a,target:c,sourceHandle:u,targetHandle:d},f=`${a}-${u}--${c}-${d}`,y=`${c}-${d}--${a}-${u}`;Yf("source",_,y,e,a,u),Yf("target",_,f,e,c,d),i.set(o.id,o)}}function wy(e,i){if(!e.parentId)return!1;const r=i.get(e.parentId);return r?r.selected?!0:wy(r,i):!1}function Kf(e,i,r){var a;let o=e;do{if((a=o==null?void 0:o.matches)!=null&&a.call(o,i))return!0;if(o===r)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function l2(e,i,r,o){const a=new Map;for(const[c,u]of e)if((u.selected||u.id===o)&&(!u.parentId||!wy(u,e))&&(u.draggable||i&&typeof u.draggable>"u")){const d=e.get(c);d&&a.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:r.x-d.internals.positionAbsolute.x,y:r.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return a}function Nd({nodeId:e,dragItems:i,nodeLookup:r,dragging:o=!0}){var u,d,_;const a=[];for(const[f,y]of i){const m=(u=r.get(f))==null?void 0:u.internals.userNode;m&&a.push({...m,position:y.position,dragging:o})}if(!e)return[a[0],a];const c=(d=r.get(e))==null?void 0:d.internals.userNode;return[c?{...c,position:((_=i.get(e))==null?void 0:_.position)||c.position,dragging:o}:a[0],a]}function u2({dragItems:e,snapGrid:i,x:r,y:o}){const a=e.values().next().value;if(!a)return null;const c={x:r-a.distance.x,y:o-a.distance.y},u=Ps(c,i);return{x:u.x-c.x,y:u.y-c.y}}function c2({onNodeMouseDown:e,getStoreItems:i,onDragStart:r,onDrag:o,onDragStop:a}){let c={x:null,y:null},u=0,d=new Map,_=!1,f={x:0,y:0},y=null,m=!1,h=null,x=!1,w=!1,b=null;function S({noDragClassName:I,handleSelector:M,domNode:E,isSelectable:P,nodeId:C,nodeClickDistance:R=0}){h=Di(E);function j({x:L,y:ie}){const{nodeLookup:T,nodeExtent:X,snapGrid:G,snapToGrid:Z,nodeOrigin:H,onNodeDrag:U,onSelectionDrag:te,onError:B,updateNodePositions:Y}=i();c={x:L,y:ie};let pe=!1;const ue=d.size>1,he=ue&&X?sp(js(d)):null,be=ue&&Z?u2({dragItems:d,snapGrid:G,x:L,y:ie}):null;for(const[Se,ce]of d){if(!T.has(Se))continue;let qe={x:L-ce.distance.x,y:ie-ce.distance.y};Z&&(qe=be?{x:Math.round(qe.x+be.x),y:Math.round(qe.y+be.y)}:Ps(qe,G));let Fe=null;if(ue&&X&&!ce.extent&&he){const{positionAbsolute:Re}=ce.internals,ze=Re.x-he.x+X[0][0],Ye=Re.x+ce.measured.width-he.x2+X[1][0],Ge=Re.y-he.y+X[0][1],at=Re.y+ce.measured.height-he.y2+X[1][1];Fe=[[ze,Ge],[Ye,at]]}const{position:Le,positionAbsolute:Ie}=sy({nodeId:Se,nextPosition:qe,nodeLookup:T,nodeExtent:Fe||X,nodeOrigin:H,onError:B});pe=pe||ce.position.x!==Le.x||ce.position.y!==Le.y,ce.position=Le,ce.internals.positionAbsolute=Ie}if(w=w||pe,!!pe&&(Y(d,!0),b&&(o||U||!C&&te))){const[Se,ce]=Nd({nodeId:C,dragItems:d,nodeLookup:T});o==null||o(b,d,Se,ce),U==null||U(b,Se,ce),C||te==null||te(b,ce)}}async function V(){if(!y)return;const{transform:L,panBy:ie,autoPanSpeed:T,autoPanOnNodeDrag:X}=i();if(!X){_=!1,cancelAnimationFrame(u);return}const[G,Z]=uy(f,y,T);(G!==0||Z!==0)&&(c.x=(c.x??0)-G/L[2],c.y=(c.y??0)-Z/L[2],await ie({x:G,y:Z})&&j(c)),u=requestAnimationFrame(V)}function Q(L){var ue;const{nodeLookup:ie,multiSelectionActive:T,nodesDraggable:X,transform:G,snapGrid:Z,snapToGrid:H,selectNodesOnDrag:U,onNodeDragStart:te,onSelectionDragStart:B,unselectNodesAndEdges:Y}=i();m=!0,(!U||!P)&&!T&&C&&((ue=ie.get(C))!=null&&ue.selected||Y()),P&&U&&C&&(e==null||e(C));const pe=as(L.sourceEvent,{transform:G,snapGrid:Z,snapToGrid:H,containerBounds:y});if(c=pe,d=l2(ie,X,pe,C),d.size>0&&(r||te||!C&&B)){const[he,be]=Nd({nodeId:C,dragItems:d,nodeLookup:ie});r==null||r(L.sourceEvent,d,he,be),te==null||te(L.sourceEvent,he,be),C||B==null||B(L.sourceEvent,be)}}const z=O0().clickDistance(R).on("start",L=>{const{domNode:ie,nodeDragThreshold:T,transform:X,snapGrid:G,snapToGrid:Z}=i();y=(ie==null?void 0:ie.getBoundingClientRect())||null,x=!1,w=!1,b=L.sourceEvent,T===0&&Q(L),c=as(L.sourceEvent,{transform:X,snapGrid:G,snapToGrid:Z,containerBounds:y}),f=bn(L.sourceEvent,y)}).on("drag",L=>{const{autoPanOnNodeDrag:ie,transform:T,snapGrid:X,snapToGrid:G,nodeDragThreshold:Z,nodeLookup:H}=i(),U=as(L.sourceEvent,{transform:T,snapGrid:X,snapToGrid:G,containerBounds:y});if(b=L.sourceEvent,(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||C&&!H.has(C))&&(x=!0),!x){if(!_&&ie&&m&&(_=!0,V()),!m){const te=bn(L.sourceEvent,y),B=te.x-f.x,Y=te.y-f.y;Math.sqrt(B*B+Y*Y)>Z&&Q(L)}(c.x!==U.xSnapped||c.y!==U.ySnapped)&&d&&m&&(f=bn(L.sourceEvent,y),j(U))}}).on("end",L=>{if(!(!m||x)&&(_=!1,m=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:ie,updateNodePositions:T,onNodeDragStop:X,onSelectionDragStop:G}=i();if(w&&(T(d,!1),w=!1),a||X||!C&&G){const[Z,H]=Nd({nodeId:C,dragItems:d,nodeLookup:ie,dragging:!1});a==null||a(L.sourceEvent,d,Z,H),X==null||X(L.sourceEvent,Z,H),C||G==null||G(L.sourceEvent,H)}}}).filter(L=>{const ie=L.target;return!L.button&&(!I||!Kf(ie,`.${I}`,E))&&(!M||Kf(ie,M,E))});h.call(z)}function k(){h==null||h.on(".drag",null)}return{update:S,destroy:k}}function d2(e,i,r){const o=[],a={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const c of i.values())gs(a,pa(c))>0&&o.push(c);return o}const p2=250;function _2(e,i,r,o){var d,_;let a=[],c=1/0;const u=d2(e,r,i+p2);for(const f of u){const y=[...((d=f.internals.handleBounds)==null?void 0:d.source)??[],...((_=f.internals.handleBounds)==null?void 0:_.target)??[]];for(const m of y){if(o.nodeId===m.nodeId&&o.type===m.type&&o.id===m.id)continue;const{x:h,y:x}=So(f,m,m.position,!0),w=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(x-e.y,2));w>i||(w<c?(a=[{...m,x:h,y:x}],c=w):w===c&&a.push({...m,x:h,y:x}))}}if(!a.length)return null;if(a.length>1){const f=o.type==="source"?"target":"source";return a.find(y=>y.type===f)??a[0]}return a[0]}function by(e,i,r,o,a,c=!1){var f,y,m;const u=o.get(e);if(!u)return null;const d=a==="strict"?(f=u.internals.handleBounds)==null?void 0:f[i]:[...((y=u.internals.handleBounds)==null?void 0:y.source)??[],...((m=u.internals.handleBounds)==null?void 0:m.target)??[]],_=(r?d==null?void 0:d.find(h=>h.id===r):d==null?void 0:d[0])??null;return _&&c?{..._,...So(u,_,_.position,!0)}:_}function ky(e,i){return e||(i!=null&&i.classList.contains("target")?"target":i!=null&&i.classList.contains("source")?"source":null)}function m2(e,i){let r=null;return i?r=!0:e&&!i&&(r=!1),r}const Sy=()=>!0;function f2(e,{connectionMode:i,connectionRadius:r,handleId:o,nodeId:a,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:_,lib:f,autoPanOnConnect:y,flowId:m,panBy:h,cancelConnection:x,onConnectStart:w,onConnect:b,onConnectEnd:S,isValidConnection:k=Sy,onReconnectEnd:I,updateConnection:M,getTransform:E,getFromHandle:P,autoPanSpeed:C,dragThreshold:R=1,handleDomNode:j}){const V=_y(e.target);let Q=0,z;const{x:L,y:ie}=bn(e),T=ky(c,j),X=d==null?void 0:d.getBoundingClientRect();let G=!1;if(!X||!T)return;const Z=by(a,T,o,_,i);if(!Z)return;let H=bn(e,X),U=!1,te=null,B=!1,Y=null;function pe(){if(!y||!X)return;const[Le,Ie]=uy(H,X,C);h({x:Le,y:Ie}),Q=requestAnimationFrame(pe)}const ue={...Z,nodeId:a,type:T,position:Z.position},he=_.get(a);let Se={inProgress:!0,isValid:null,from:So(he,ue,Be.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:he,to:H,toHandle:null,toPosition:Df[ue.position],toNode:null,pointer:H};function ce(){G=!0,M(Se),w==null||w(e,{nodeId:a,handleId:o,handleType:T})}R===0&&ce();function qe(Le){if(!G){const{x:at,y:bt}=bn(Le),xt=at-L,Et=bt-ie;if(!(xt*xt+Et*Et>R*R))return;ce()}if(!P()||!ue){Fe(Le);return}const Ie=E();H=bn(Le,X),z=_2(Ts(H,Ie,!1,[1,1]),r,_,ue),U||(pe(),U=!0);const Re=My(Le,{handle:z,connectionMode:i,fromNodeId:a,fromHandleId:o,fromType:u?"target":"source",isValidConnection:k,doc:V,lib:f,flowId:m,nodeLookup:_});Y=Re.handleDomNode,te=Re.connection,B=m2(!!z,Re.isValid);const ze=_.get(a),Ye=ze?So(ze,ue,Be.Left,!0):Se.from,Ge={...Se,from:Ye,isValid:B,to:Re.toHandle&&B?gu({x:Re.toHandle.x,y:Re.toHandle.y},Ie):H,toHandle:Re.toHandle,toPosition:B&&Re.toHandle?Re.toHandle.position:Df[ue.position],toNode:Re.toHandle?_.get(Re.toHandle.nodeId):null,pointer:H};M(Ge),Se=Ge}function Fe(Le){if(!("touches"in Le&&Le.touches.length>0)){if(G){(z||Y)&&te&&B&&(b==null||b(te));const{inProgress:Ie,...Re}=Se,ze={...Re,toPosition:Se.toHandle?Se.toPosition:null};S==null||S(Le,ze),c&&(I==null||I(Le,ze))}x(),cancelAnimationFrame(Q),U=!1,B=!1,te=null,Y=null,V.removeEventListener("mousemove",qe),V.removeEventListener("mouseup",Fe),V.removeEventListener("touchmove",qe),V.removeEventListener("touchend",Fe)}}V.addEventListener("mousemove",qe),V.addEventListener("mouseup",Fe),V.addEventListener("touchmove",qe),V.addEventListener("touchend",Fe)}function My(e,{handle:i,connectionMode:r,fromNodeId:o,fromHandleId:a,fromType:c,doc:u,lib:d,flowId:_,isValidConnection:f=Sy,nodeLookup:y}){const m=c==="target",h=i?u.querySelector(`.${d}-flow__handle[data-id="${_}-${i==null?void 0:i.nodeId}-${i==null?void 0:i.id}-${i==null?void 0:i.type}"]`):null,{x,y:w}=bn(e),b=u.elementFromPoint(x,w),S=b!=null&&b.classList.contains(`${d}-flow__handle`)?b:h,k={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const I=ky(void 0,S),M=S.getAttribute("data-nodeid"),E=S.getAttribute("data-handleid"),P=S.classList.contains("connectable"),C=S.classList.contains("connectableend");if(!M||!I)return k;const R={source:m?M:o,sourceHandle:m?E:a,target:m?o:M,targetHandle:m?a:E};k.connection=R;const V=P&&C&&(r===ca.Strict?m&&I==="source"||!m&&I==="target":M!==o||E!==a);k.isValid=V&&f(R),k.toHandle=by(M,I,E,y,r,!0)}return k}const pp={onPointerDown:f2,isValid:My};function h2({domNode:e,panZoom:i,getTransform:r,getViewScale:o}){const a=Di(e);function c({translateExtent:d,width:_,height:f,zoomStep:y=1,pannable:m=!0,zoomable:h=!0,inversePan:x=!1}){const w=M=>{if(M.sourceEvent.type!=="wheel"||!i)return;const E=r(),P=M.sourceEvent.ctrlKey&&xs()?10:1,C=-M.sourceEvent.deltaY*(M.sourceEvent.deltaMode===1?.05:M.sourceEvent.deltaMode?1:.002)*y,R=E[2]*Math.pow(2,C*P);i.scaleTo(R)};let b=[0,0];const S=M=>{(M.sourceEvent.type==="mousedown"||M.sourceEvent.type==="touchstart")&&(b=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY])},k=M=>{const E=r();if(M.sourceEvent.type!=="mousemove"&&M.sourceEvent.type!=="touchmove"||!i)return;const P=[M.sourceEvent.clientX??M.sourceEvent.touches[0].clientX,M.sourceEvent.clientY??M.sourceEvent.touches[0].clientY],C=[P[0]-b[0],P[1]-b[1]];b=P;const R=o()*Math.max(E[2],Math.log(E[2]))*(x?-1:1),j={x:E[0]-C[0]*R,y:E[1]-C[1]*R},V=[[0,0],[_,f]];i.setViewportConstrained({x:j.x,y:j.y,zoom:E[2]},V,d)},I=ty().on("start",S).on("zoom",m?k:null).on("zoom.wheel",h?w:null);a.call(I,{})}function u(){a.on("zoom",null)}return{update:c,destroy:u,pointer:yn}}const zu=e=>({x:e.x,y:e.y,zoom:e.k}),jd=({x:e,y:i,zoom:r})=>Vu.translate(e,i).scale(r),na=(e,i)=>e.target.closest(`.${i}`),Cy=(e,i)=>i===2&&Array.isArray(e)&&e.includes(2),y2=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Pd=(e,i=0,r=y2,o=()=>{})=>{const a=typeof i=="number"&&i>0;return a||o(),a?e.transition().duration(i).ease(r).on("end",o):e},qy=e=>{const i=e.ctrlKey&&xs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*i};function g2({zoomPanValues:e,noWheelClassName:i,d3Selection:r,d3Zoom:o,panOnScrollMode:a,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:_,onPanZoomEnd:f}){return y=>{if(na(y,i))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const m=r.property("__zoom").k||1;if(y.ctrlKey&&u){const S=yn(y),k=qy(y),I=m*Math.pow(2,k);o.scaleTo(r,I,S,y);return}const h=y.deltaMode===1?20:1;let x=a===vo.Vertical?0:y.deltaX*h,w=a===vo.Horizontal?0:y.deltaY*h;!xs()&&y.shiftKey&&a!==vo.Vertical&&(x=y.deltaY*h,w=0),o.translateBy(r,-(x/m)*c,-(w/m)*c,{internal:!0});const b=zu(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(_==null||_(y,b),e.panScrollTimeout=setTimeout(()=>{f==null||f(y,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d==null||d(y,b))}}function x2({noWheelClassName:e,preventScrolling:i,d3ZoomHandler:r}){return function(o,a){const c=o.type==="wheel",u=!i&&c&&!o.ctrlKey,d=na(o,e);if(o.ctrlKey&&c&&d&&o.preventDefault(),u||d)return null;o.preventDefault(),r.call(this,o,a)}}function v2({zoomPanValues:e,onDraggingChange:i,onPanZoomStart:r}){return o=>{var c,u,d;if((c=o.sourceEvent)!=null&&c.internal)return;const a=zu(o.transform);e.mouseButton=((u=o.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((d=o.sourceEvent)==null?void 0:d.type)==="mousedown"&&i(!0),r&&(r==null||r(o.sourceEvent,a))}}function w2({zoomPanValues:e,panOnDrag:i,onPaneContextMenu:r,onTransformChange:o,onPanZoom:a}){return c=>{var u,d;e.usedRightMouseButton=!!(r&&Cy(i,e.mouseButton??0)),(u=c.sourceEvent)!=null&&u.sync||o([c.transform.x,c.transform.y,c.transform.k]),a&&!((d=c.sourceEvent)!=null&&d.internal)&&(a==null||a(c.sourceEvent,zu(c.transform)))}}function b2({zoomPanValues:e,panOnDrag:i,panOnScroll:r,onDraggingChange:o,onPanZoomEnd:a,onPaneContextMenu:c}){return u=>{var d;if(!((d=u.sourceEvent)!=null&&d.internal)&&(e.isZoomingOrPanning=!1,c&&Cy(i,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,o(!1),a)){const _=zu(u.transform);e.prevViewport=_,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,_)},r?150:0)}}}function k2({zoomActivationKeyPressed:e,zoomOnScroll:i,zoomOnPinch:r,panOnDrag:o,panOnScroll:a,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:_,lib:f,connectionInProgress:y}){return m=>{var S;const h=e||i,x=r&&m.ctrlKey,w=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(na(m,`${f}-flow__node`)||na(m,`${f}-flow__edge`)))return!0;if(!o&&!h&&!a&&!c&&!r||u||y&&!w||na(m,d)&&w||na(m,_)&&(!w||a&&w&&!e)||!r&&m.ctrlKey&&w)return!1;if(!r&&m.type==="touchstart"&&((S=m.touches)==null?void 0:S.length)>1)return m.preventDefault(),!1;if(!h&&!a&&!x&&w||!o&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(o)&&!o.includes(m.button)&&m.type==="mousedown")return!1;const b=Array.isArray(o)&&o.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||w)&&b}}function S2({domNode:e,minZoom:i,maxZoom:r,translateExtent:o,viewport:a,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:_}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=e.getBoundingClientRect(),m=ty().scaleExtent([i,r]).translateExtent(o),h=Di(e).call(m);I({x:a.x,y:a.y,zoom:da(a.zoom,i,r)},[[0,0],[y.width,y.height]],o);const x=h.on("wheel.zoom"),w=h.on("dblclick.zoom");m.wheelDelta(qy);function b(z,L){return h?new Promise(ie=>{m==null||m.interpolate((L==null?void 0:L.interpolate)==="linear"?os:nu).transform(Pd(h,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>ie(!0)),z)}):Promise.resolve(!1)}function S({noWheelClassName:z,noPanClassName:L,onPaneContextMenu:ie,userSelectionActive:T,panOnScroll:X,panOnDrag:G,panOnScrollMode:Z,panOnScrollSpeed:H,preventScrolling:U,zoomOnPinch:te,zoomOnScroll:B,zoomOnDoubleClick:Y,zoomActivationKeyPressed:pe,lib:ue,onTransformChange:he,connectionInProgress:be,paneClickDistance:Se,selectionOnDrag:ce}){T&&!f.isZoomingOrPanning&&k();const qe=X&&!pe&&!T;m.clickDistance(ce?1/0:!wn(Se)||Se<0?0:Se);const Fe=qe?g2({zoomPanValues:f,noWheelClassName:z,d3Selection:h,d3Zoom:m,panOnScrollMode:Z,panOnScrollSpeed:H,zoomOnPinch:te,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):x2({noWheelClassName:z,preventScrolling:U,d3ZoomHandler:x});if(h.on("wheel.zoom",Fe,{passive:!1}),!T){const Ie=v2({zoomPanValues:f,onDraggingChange:_,onPanZoomStart:u});m.on("start",Ie);const Re=w2({zoomPanValues:f,panOnDrag:G,onPaneContextMenu:!!ie,onPanZoom:c,onTransformChange:he});m.on("zoom",Re);const ze=b2({zoomPanValues:f,panOnDrag:G,panOnScroll:X,onPaneContextMenu:ie,onPanZoomEnd:d,onDraggingChange:_});m.on("end",ze)}const Le=k2({zoomActivationKeyPressed:pe,panOnDrag:G,zoomOnScroll:B,panOnScroll:X,zoomOnDoubleClick:Y,zoomOnPinch:te,userSelectionActive:T,noPanClassName:L,noWheelClassName:z,lib:ue,connectionInProgress:be});m.filter(Le),Y?h.on("dblclick.zoom",w):h.on("dblclick.zoom",null)}function k(){m.on("zoom",null)}async function I(z,L,ie){const T=jd(z),X=m==null?void 0:m.constrain()(T,L,ie);return X&&await b(X),new Promise(G=>G(X))}async function M(z,L){const ie=jd(z);return await b(ie,L),new Promise(T=>T(ie))}function E(z){if(h){const L=jd(z),ie=h.property("__zoom");(ie.k!==z.zoom||ie.x!==z.x||ie.y!==z.y)&&(m==null||m.transform(h,L,null,{sync:!0}))}}function P(){const z=h?ey(h.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function C(z,L){return h?new Promise(ie=>{m==null||m.interpolate((L==null?void 0:L.interpolate)==="linear"?os:nu).scaleTo(Pd(h,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>ie(!0)),z)}):Promise.resolve(!1)}function R(z,L){return h?new Promise(ie=>{m==null||m.interpolate((L==null?void 0:L.interpolate)==="linear"?os:nu).scaleBy(Pd(h,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>ie(!0)),z)}):Promise.resolve(!1)}function j(z){m==null||m.scaleExtent(z)}function V(z){m==null||m.translateExtent(z)}function Q(z){const L=!wn(z)||z<0?0:z;m==null||m.clickDistance(L)}return{update:S,destroy:k,setViewport:M,setViewportConstrained:I,getViewport:P,scaleTo:C,scaleBy:R,setScaleExtent:j,setTranslateExtent:V,syncViewport:E,setClickDistance:Q}}var ma;(function(e){e.Line="line",e.Handle="handle"})(ma||(ma={}));function M2({width:e,prevWidth:i,height:r,prevHeight:o,affectsX:a,affectsY:c}){const u=e-i,d=r-o,_=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&a&&(_[0]=_[0]*-1),d&&c&&(_[1]=_[1]*-1),_}function Qf(e){const i=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),o=e.includes("left"),a=e.includes("top");return{isHorizontal:i,isVertical:r,affectsX:o,affectsY:a}}function Rr(e,i){return Math.max(0,i-e)}function Vr(e,i){return Math.max(0,e-i)}function Wl(e,i,r){return Math.max(0,i-e,e-r)}function Xf(e,i){return e?!i:i}function C2(e,i,r,o,a,c,u,d){let{affectsX:_,affectsY:f}=i;const{isHorizontal:y,isVertical:m}=i,h=y&&m,{xSnapped:x,ySnapped:w}=r,{minWidth:b,maxWidth:S,minHeight:k,maxHeight:I}=o,{x:M,y:E,width:P,height:C,aspectRatio:R}=e;let j=Math.floor(y?x-e.pointerX:0),V=Math.floor(m?w-e.pointerY:0);const Q=P+(_?-j:j),z=C+(f?-V:V),L=-c[0]*P,ie=-c[1]*C;let T=Wl(Q,b,S),X=Wl(z,k,I);if(u){let H=0,U=0;_&&j<0?H=Rr(M+j+L,u[0][0]):!_&&j>0&&(H=Vr(M+Q+L,u[1][0])),f&&V<0?U=Rr(E+V+ie,u[0][1]):!f&&V>0&&(U=Vr(E+z+ie,u[1][1])),T=Math.max(T,H),X=Math.max(X,U)}if(d){let H=0,U=0;_&&j>0?H=Vr(M+j,d[0][0]):!_&&j<0&&(H=Rr(M+Q,d[1][0])),f&&V>0?U=Vr(E+V,d[0][1]):!f&&V<0&&(U=Rr(E+z,d[1][1])),T=Math.max(T,H),X=Math.max(X,U)}if(a){if(y){const H=Wl(Q/R,k,I)*R;if(T=Math.max(T,H),u){let U=0;!_&&!f||_&&!f&&h?U=Vr(E+ie+Q/R,u[1][1])*R:U=Rr(E+ie+(_?j:-j)/R,u[0][1])*R,T=Math.max(T,U)}if(d){let U=0;!_&&!f||_&&!f&&h?U=Rr(E+Q/R,d[1][1])*R:U=Vr(E+(_?j:-j)/R,d[0][1])*R,T=Math.max(T,U)}}if(m){const H=Wl(z*R,b,S)/R;if(X=Math.max(X,H),u){let U=0;!_&&!f||f&&!_&&h?U=Vr(M+z*R+L,u[1][0])/R:U=Rr(M+(f?V:-V)*R+L,u[0][0])/R,X=Math.max(X,U)}if(d){let U=0;!_&&!f||f&&!_&&h?U=Rr(M+z*R,d[1][0])/R:U=Vr(M+(f?V:-V)*R,d[0][0])/R,X=Math.max(X,U)}}}V=V+(V<0?X:-X),j=j+(j<0?T:-T),a&&(h?Q>z*R?V=(Xf(_,f)?-j:j)/R:j=(Xf(_,f)?-V:V)*R:y?(V=j/R,f=_):(j=V*R,_=f));const G=_?M+j:M,Z=f?E+V:E;return{width:P+(_?-j:j),height:C+(f?-V:V),x:c[0]*j*(_?-1:1)+G,y:c[1]*V*(f?-1:1)+Z}}const Ey={width:0,height:0,x:0,y:0},q2={...Ey,pointerX:0,pointerY:0,aspectRatio:1};function E2(e){return[[0,0],[e.measured.width,e.measured.height]]}function I2(e,i,r){const o=i.position.x+e.position.x,a=i.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=r[0]*c,_=r[1]*u;return[[o-d,a-_],[o+c-d,a+u-_]]}function N2({domNode:e,nodeId:i,getStoreItems:r,onChange:o,onEnd:a}){const c=Di(e);let u={controlDirection:Qf("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:f,boundaries:y,keepAspectRatio:m,resizeDirection:h,onResizeStart:x,onResize:w,onResizeEnd:b,shouldResize:S}){let k={...Ey},I={...q2};u={boundaries:y,resizeDirection:h,keepAspectRatio:m,controlDirection:Qf(f)};let M,E=null,P=[],C,R,j,V=!1;const Q=O0().on("start",z=>{const{nodeLookup:L,transform:ie,snapGrid:T,snapToGrid:X,nodeOrigin:G,paneDomNode:Z}=r();if(M=L.get(i),!M)return;E=(Z==null?void 0:Z.getBoundingClientRect())??null;const{xSnapped:H,ySnapped:U}=as(z.sourceEvent,{transform:ie,snapGrid:T,snapToGrid:X,containerBounds:E});k={width:M.measured.width??0,height:M.measured.height??0,x:M.position.x??0,y:M.position.y??0},I={...k,pointerX:H,pointerY:U,aspectRatio:k.width/k.height},C=void 0,M.parentId&&(M.extent==="parent"||M.expandParent)&&(C=L.get(M.parentId),R=C&&M.extent==="parent"?E2(C):void 0),P=[],j=void 0;for(const[te,B]of L)if(B.parentId===i&&(P.push({id:te,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const Y=I2(B,M,B.origin??G);j?j=[[Math.min(Y[0][0],j[0][0]),Math.min(Y[0][1],j[0][1])],[Math.max(Y[1][0],j[1][0]),Math.max(Y[1][1],j[1][1])]]:j=Y}x==null||x(z,{...k})}).on("drag",z=>{const{transform:L,snapGrid:ie,snapToGrid:T,nodeOrigin:X}=r(),G=as(z.sourceEvent,{transform:L,snapGrid:ie,snapToGrid:T,containerBounds:E}),Z=[];if(!M)return;const{x:H,y:U,width:te,height:B}=k,Y={},pe=M.origin??X,{width:ue,height:he,x:be,y:Se}=C2(I,u.controlDirection,G,u.boundaries,u.keepAspectRatio,pe,R,j),ce=ue!==te,qe=he!==B,Fe=be!==H&&ce,Le=Se!==U&&qe;if(!Fe&&!Le&&!ce&&!qe)return;if((Fe||Le||pe[0]===1||pe[1]===1)&&(Y.x=Fe?be:k.x,Y.y=Le?Se:k.y,k.x=Y.x,k.y=Y.y,P.length>0)){const Ye=be-H,Ge=Se-U;for(const at of P)at.position={x:at.position.x-Ye+pe[0]*(ue-te),y:at.position.y-Ge+pe[1]*(he-B)},Z.push(at)}if((ce||qe)&&(Y.width=ce&&(!u.resizeDirection||u.resizeDirection==="horizontal")?ue:k.width,Y.height=qe&&(!u.resizeDirection||u.resizeDirection==="vertical")?he:k.height,k.width=Y.width,k.height=Y.height),C&&M.expandParent){const Ye=pe[0]*(Y.width??0);Y.x&&Y.x<Ye&&(k.x=Ye,I.x=I.x-(Y.x-Ye));const Ge=pe[1]*(Y.height??0);Y.y&&Y.y<Ge&&(k.y=Ge,I.y=I.y-(Y.y-Ge))}const Ie=M2({width:k.width,prevWidth:te,height:k.height,prevHeight:B,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Re={...k,direction:Ie};(S==null?void 0:S(z,Re))!==!1&&(V=!0,w==null||w(z,Re),o(Y,Z))}).on("end",z=>{V&&(b==null||b(z,{...k}),a==null||a({...k}),V=!1)});c.call(Q)}function _(){c.on(".drag",null)}return{update:d,destroy:_}}var Td={exports:{}},Rd={},Vd={exports:{}},Fd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function j2(){if(Zf)return Fd;Zf=1;var e=qs();function i(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:i,o=e.useState,a=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(m,h){var x=h(),w=o({inst:{value:x,getSnapshot:h}}),b=w[0].inst,S=w[1];return c(function(){b.value=x,b.getSnapshot=h,_(b)&&S({inst:b})},[m,x,h]),a(function(){return _(b)&&S({inst:b}),m(function(){_(b)&&S({inst:b})})},[m]),u(x),x}function _(m){var h=m.getSnapshot;m=m.value;try{var x=h();return!r(m,x)}catch{return!0}}function f(m,h){return h()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return Fd.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Fd}var Jf;function P2(){return Jf||(Jf=1,Vd.exports=j2()),Vd.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function T2(){if(eh)return Rd;eh=1;var e=qs(),i=P2();function r(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var o=typeof Object.is=="function"?Object.is:r,a=i.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,_=e.useDebugValue;return Rd.useSyncExternalStoreWithSelector=function(f,y,m,h,x){var w=c(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=d(function(){function k(C){if(!I){if(I=!0,M=C,C=h(C),x!==void 0&&b.hasValue){var R=b.value;if(x(R,C))return E=R}return E=C}if(R=E,o(M,C))return R;var j=h(C);return x!==void 0&&x(R,j)?(M=C,R):(M=C,E=j)}var I=!1,M,E,P=m===void 0?null:m;return[function(){return k(y())},P===null?void 0:function(){return k(P())}]},[y,m,h,x]);var S=a(f,w[0],w[1]);return u(function(){b.hasValue=!0,b.value=S},[S]),_(S),S},Rd}var th;function R2(){return th||(th=1,Td.exports=T2()),Td.exports}var V2=R2();const F2=Cs(V2),D2={},ih=e=>{let i;const r=new Set,o=(y,m)=>{const h=typeof y=="function"?y(i):y;if(!Object.is(h,i)){const x=i;i=m??(typeof h!="object"||h===null)?h:Object.assign({},i,h),r.forEach(w=>w(i,x))}},a=()=>i,_={setState:o,getState:a,getInitialState:()=>f,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(D2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},f=i=e(o,a,_);return _},z2=e=>e?ih(e):ih,{useDebugValue:L2}=S0,{useSyncExternalStoreWithSelector:O2}=F2,B2=e=>e;function Iy(e,i=B2,r){const o=O2(e.subscribe,e.getState,e.getServerState||e.getInitialState,i,r);return L2(o),o}const nh=(e,i)=>{const r=z2(e),o=(a,c=i)=>Iy(r,a,c);return Object.assign(o,r),o},A2=(e,i)=>e?nh(e,i):nh;function yt(e,i){if(Object.is(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;if(e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(const[o,a]of e)if(!Object.is(a,i.get(o)))return!1;return!0}if(e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(const o of e)if(!i.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(i).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(i,o)||!Object.is(e[o],i[o]))return!1;return!0}var $2=M0();const H2=Cs($2),Lu=F.createContext(null),W2=Lu.Provider,Ny=zn.error001();function Ze(e,i){const r=F.useContext(Lu);if(r===null)throw new Error(Ny);return Iy(r,e,i)}function gt(){const e=F.useContext(Lu);if(e===null)throw new Error(Ny);return F.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const rh={display:"none"},U2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jy="react-flow__node-desc",Py="react-flow__edge-desc",G2="react-flow__aria-live",Y2=e=>e.ariaLiveMessage,K2=e=>e.ariaLabelConfig;function Q2({rfId:e}){const i=Ze(Y2);return l.jsx("div",{id:`${G2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:U2,children:i})}function X2({rfId:e,disableKeyboardA11y:i}){const r=Ze(K2);return l.jsxs(l.Fragment,{children:[l.jsx("div",{id:`${jy}-${e}`,style:rh,children:i?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),l.jsx("div",{id:`${Py}-${e}`,style:rh,children:r["edge.a11yDescription.default"]}),!i&&l.jsx(Q2,{rfId:e})]})}const fa=F.forwardRef(({position:e="top-left",children:i,className:r,style:o,...a},c)=>{const u=`${e}`.split("-");return l.jsx("div",{className:jt(["react-flow__panel",r,...u]),style:o,ref:c,...a,children:i})});fa.displayName="Panel";function Z2({proOptions:e,position:i="bottom-right"}){return e!=null&&e.hideAttribution?null:l.jsx(fa,{position:i,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const J2=e=>{const i=[],r=[];for(const[,o]of e.nodeLookup)o.selected&&i.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&r.push(o);return{selectedNodes:i,selectedEdges:r}},Ul=e=>e.id;function ek(e,i){return yt(e.selectedNodes.map(Ul),i.selectedNodes.map(Ul))&&yt(e.selectedEdges.map(Ul),i.selectedEdges.map(Ul))}function tk({onSelectionChange:e}){const i=gt(),{selectedNodes:r,selectedEdges:o}=Ze(J2,ek);return F.useEffect(()=>{const a={nodes:r,edges:o};e==null||e(a),i.getState().onSelectionChangeHandlers.forEach(c=>c(a))},[r,o,e]),null}const ik=e=>!!e.onSelectionChangeHandlers;function nk({onSelectionChange:e}){const i=Ze(ik);return e||i?l.jsx(tk,{onSelectionChange:e}):null}const Ty=[0,0],rk={x:0,y:0,zoom:1},ok=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],oh=[...ok,"rfId"],ak=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),ah={translateExtent:hs,nodeOrigin:Ty,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function sk(e){const{setNodes:i,setEdges:r,setMinZoom:o,setMaxZoom:a,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:_}=Ze(ak,yt),f=gt();F.useEffect(()=>(_(e.defaultNodes,e.defaultEdges),()=>{y.current=ah,d()}),[]);const y=F.useRef(ah);return F.useEffect(()=>{for(const m of oh){const h=e[m],x=y.current[m];h!==x&&(typeof e[m]>"u"||(m==="nodes"?i(h):m==="edges"?r(h):m==="minZoom"?o(h):m==="maxZoom"?a(h):m==="translateExtent"?c(h):m==="nodeExtent"?u(h):m==="ariaLabelConfig"?f.setState({ariaLabelConfig:$b(h)}):m==="fitView"?f.setState({fitViewQueued:h}):m==="fitViewOptions"?f.setState({fitViewOptions:h}):f.setState({[m]:h})))}y.current=e},oh.map(m=>e[m])),null}function sh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function lk(e){var o;const[i,r]=F.useState(e==="system"?null:e);return F.useEffect(()=>{if(e!=="system"){r(e);return}const a=sh(),c=()=>r(a!=null&&a.matches?"dark":"light");return c(),a==null||a.addEventListener("change",c),()=>{a==null||a.removeEventListener("change",c)}},[e]),i!==null?i:(o=sh())!=null&&o.matches?"dark":"light"}const lh=typeof document<"u"?document:null;function vs(e=null,i={target:lh,actInsideInputWithModifier:!0}){const[r,o]=F.useState(!1),a=F.useRef(!1),c=F.useRef(new Set([])),[u,d]=F.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=f.reduce((m,h)=>m.concat(...h),[]);return[f,y]}return[[],[]]},[e]);return F.useEffect(()=>{const _=(i==null?void 0:i.target)??lh,f=(i==null?void 0:i.actInsideInputWithModifier)??!0;if(e!==null){const y=x=>{var S,k;if(a.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!a.current||a.current&&!f)&&my(x))return!1;const b=ch(x.code,d);if(c.current.add(x[b]),uh(u,c.current,!1)){const I=((k=(S=x.composedPath)==null?void 0:S.call(x))==null?void 0:k[0])||x.target,M=(I==null?void 0:I.nodeName)==="BUTTON"||(I==null?void 0:I.nodeName)==="A";i.preventDefault!==!1&&(a.current||!M)&&x.preventDefault(),o(!0)}},m=x=>{const w=ch(x.code,d);uh(u,c.current,!0)?(o(!1),c.current.clear()):c.current.delete(x[w]),x.key==="Meta"&&c.current.clear(),a.current=!1},h=()=>{c.current.clear(),o(!1)};return _==null||_.addEventListener("keydown",y),_==null||_.addEventListener("keyup",m),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{_==null||_.removeEventListener("keydown",y),_==null||_.removeEventListener("keyup",m),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,o]),r}function uh(e,i,r){return e.filter(o=>r||o.length===i.size).some(o=>o.every(a=>i.has(a)))}function ch(e,i){return i.includes(e)?"code":"key"}const uk=()=>{const e=gt();return F.useMemo(()=>({zoomIn:i=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:i==null?void 0:i.duration}):Promise.resolve(!1)},zoomOut:i=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:i==null?void 0:i.duration}):Promise.resolve(!1)},zoomTo:(i,r)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(i,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(i,r)=>{const{transform:[o,a,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:i.x??o,y:i.y??a,zoom:i.zoom??c},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[i,r,o]=e.getState().transform;return{x:i,y:r,zoom:o}},setCenter:async(i,r,o)=>e.getState().setCenter(i,r,o),fitBounds:async(i,r)=>{const{width:o,height:a,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),_=$p(i,o,a,c,u,(r==null?void 0:r.padding)??.1);return d?(await d.setViewport(_,{duration:r==null?void 0:r.duration,ease:r==null?void 0:r.ease,interpolate:r==null?void 0:r.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(i,r={})=>{const{transform:o,snapGrid:a,snapToGrid:c,domNode:u}=e.getState();if(!u)return i;const{x:d,y:_}=u.getBoundingClientRect(),f={x:i.x-d,y:i.y-_},y=r.snapGrid??a,m=r.snapToGrid??c;return Ts(f,o,m,y)},flowToScreenPosition:i=>{const{transform:r,domNode:o}=e.getState();if(!o)return i;const{x:a,y:c}=o.getBoundingClientRect(),u=gu(i,r);return{x:u.x+a,y:u.y+c}}}),[])};function Ry(e,i){const r=[],o=new Map,a=[];for(const c of e)if(c.type==="add"){a.push(c);continue}else if(c.type==="remove"||c.type==="replace")o.set(c.id,[c]);else{const u=o.get(c.id);u?u.push(c):o.set(c.id,[c])}for(const c of i){const u=o.get(c.id);if(!u){r.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){r.push({...u[0].item});continue}const d={...c};for(const _ of u)ck(_,d);r.push(d)}return a.length&&a.forEach(c=>{c.index!==void 0?r.splice(c.index,0,{...c.item}):r.push({...c.item})}),r}function ck(e,i){switch(e.type){case"select":{i.selected=e.selected;break}case"position":{typeof e.position<"u"&&(i.position=e.position),typeof e.dragging<"u"&&(i.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(i.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(i.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(i.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(i.resizing=e.resizing);break}}}function Vy(e,i){return Ry(e,i)}function Fy(e,i){return Ry(e,i)}function yo(e,i){return{id:e,type:"select",selected:i}}function ra(e,i=new Set,r=!1){const o=[];for(const[a,c]of e){const u=i.has(a);!(c.selected===void 0&&!u)&&c.selected!==u&&(r&&(c.selected=u),o.push(yo(c.id,u)))}return o}function dh({items:e=[],lookup:i}){var a;const r=[],o=new Map(e.map(c=>[c.id,c]));for(const[c,u]of e.entries()){const d=i.get(u.id),_=((a=d==null?void 0:d.internals)==null?void 0:a.userNode)??d;_!==void 0&&_!==u&&r.push({id:u.id,item:u,type:"replace"}),_===void 0&&r.push({item:u,type:"add",index:c})}for(const[c]of i)o.get(c)===void 0&&r.push({id:c,type:"remove"});return r}function ph(e){return{id:e.id,type:"remove"}}const _h=e=>Tb(e),dk=e=>ay(e);function Dy(e){return F.forwardRef(e)}const pk=typeof window<"u"?F.useLayoutEffect:F.useEffect;function mh(e){const[i,r]=F.useState(BigInt(0)),[o]=F.useState(()=>_k(()=>r(a=>a+BigInt(1))));return pk(()=>{const a=o.get();a.length&&(e(a),o.reset())},[i]),o}function _k(e){let i=[];return{get:()=>i,reset:()=>{i=[]},push:r=>{i.push(r),e()}}}const zy=F.createContext(null);function mk({children:e}){const i=gt(),r=F.useCallback(d=>{const{nodes:_=[],setNodes:f,hasDefaultNodes:y,onNodesChange:m,nodeLookup:h,fitViewQueued:x,onNodesChangeMiddlewareMap:w}=i.getState();let b=_;for(const k of d)b=typeof k=="function"?k(b):k;let S=dh({items:b,lookup:h});for(const k of w.values())S=k(S);y&&f(b),S.length>0?m==null||m(S):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:k,nodes:I,setNodes:M}=i.getState();k&&M(I)})},[]),o=mh(r),a=F.useCallback(d=>{const{edges:_=[],setEdges:f,hasDefaultEdges:y,onEdgesChange:m,edgeLookup:h}=i.getState();let x=_;for(const w of d)x=typeof w=="function"?w(x):w;y?f(x):m&&m(dh({items:x,lookup:h}))},[]),c=mh(a),u=F.useMemo(()=>({nodeQueue:o,edgeQueue:c}),[]);return l.jsx(zy.Provider,{value:u,children:e})}function fk(){const e=F.useContext(zy);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const hk=e=>!!e.panZoom;function Zp(){const e=uk(),i=gt(),r=fk(),o=Ze(hk),a=F.useMemo(()=>{const c=m=>i.getState().nodeLookup.get(m),u=m=>{r.nodeQueue.push(m)},d=m=>{r.edgeQueue.push(m)},_=m=>{var k,I;const{nodeLookup:h,nodeOrigin:x}=i.getState(),w=_h(m)?m:h.get(m.id),b=w.parentId?py(w.position,w.measured,w.parentId,h,x):w.position,S={...w,position:b,width:((k=w.measured)==null?void 0:k.width)??w.width,height:((I=w.measured)==null?void 0:I.height)??w.height};return pa(S)},f=(m,h,x={replace:!1})=>{u(w=>w.map(b=>{if(b.id===m){const S=typeof h=="function"?h(b):h;return x.replace&&_h(S)?S:{...b,...S}}return b}))},y=(m,h,x={replace:!1})=>{d(w=>w.map(b=>{if(b.id===m){const S=typeof h=="function"?h(b):h;return x.replace&&dk(S)?S:{...b,...S}}return b}))};return{getNodes:()=>i.getState().nodes.map(m=>({...m})),getNode:m=>{var h;return(h=c(m))==null?void 0:h.internals.userNode},getInternalNode:c,getEdges:()=>{const{edges:m=[]}=i.getState();return m.map(h=>({...h}))},getEdge:m=>i.getState().edgeLookup.get(m),setNodes:u,setEdges:d,addNodes:m=>{const h=Array.isArray(m)?m:[m];r.nodeQueue.push(x=>[...x,...h])},addEdges:m=>{const h=Array.isArray(m)?m:[m];r.edgeQueue.push(x=>[...x,...h])},toObject:()=>{const{nodes:m=[],edges:h=[],transform:x}=i.getState(),[w,b,S]=x;return{nodes:m.map(k=>({...k})),edges:h.map(k=>({...k})),viewport:{x:w,y:b,zoom:S}}},deleteElements:async({nodes:m=[],edges:h=[]})=>{const{nodes:x,edges:w,onNodesDelete:b,onEdgesDelete:S,triggerNodeChanges:k,triggerEdgeChanges:I,onDelete:M,onBeforeDelete:E}=i.getState(),{nodes:P,edges:C}=await zb({nodesToRemove:m,edgesToRemove:h,nodes:x,edges:w,onBeforeDelete:E}),R=C.length>0,j=P.length>0;if(R){const V=C.map(ph);S==null||S(C),I(V)}if(j){const V=P.map(ph);b==null||b(P),k(V)}return(j||R)&&(M==null||M({nodes:P,edges:C})),{deletedNodes:P,deletedEdges:C}},getIntersectingNodes:(m,h=!0,x)=>{const w=Lf(m),b=w?m:_(m),S=x!==void 0;return b?(x||i.getState().nodes).filter(k=>{const I=i.getState().nodeLookup.get(k.id);if(I&&!w&&(k.id===m.id||!I.internals.positionAbsolute))return!1;const M=pa(S?k:I),E=gs(M,b);return h&&E>0||E>=M.width*M.height||E>=b.width*b.height}):[]},isNodeIntersecting:(m,h,x=!0)=>{const b=Lf(m)?m:_(m);if(!b)return!1;const S=gs(b,h);return x&&S>0||S>=h.width*h.height||S>=b.width*b.height},updateNode:f,updateNodeData:(m,h,x={replace:!1})=>{f(m,w=>{const b=typeof h=="function"?h(w):h;return x.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},x)},updateEdge:y,updateEdgeData:(m,h,x={replace:!1})=>{y(m,w=>{const b=typeof h=="function"?h(w):h;return x.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},x)},getNodesBounds:m=>{const{nodeLookup:h,nodeOrigin:x}=i.getState();return Rb(m,{nodeLookup:h,nodeOrigin:x})},getHandleConnections:({type:m,id:h,nodeId:x})=>{var w;return Array.from(((w=i.getState().connectionLookup.get(`${x}-${m}${h?`-${h}`:""}`))==null?void 0:w.values())??[])},getNodeConnections:({type:m,handleId:h,nodeId:x})=>{var w;return Array.from(((w=i.getState().connectionLookup.get(`${x}${m?h?`-${m}-${h}`:`-${m}`:""}`))==null?void 0:w.values())??[])},fitView:async m=>{const h=i.getState().fitViewResolver??Ab();return i.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:h}),r.nodeQueue.push(x=>[...x]),h.promise}}},[]);return F.useMemo(()=>({...a,...e,viewportInitialized:o}),[o])}const fh=e=>e.selected,yk=typeof window<"u"?window:void 0;function gk({deleteKeyCode:e,multiSelectionKeyCode:i}){const r=gt(),{deleteElements:o}=Zp(),a=vs(e,{actInsideInputWithModifier:!1}),c=vs(i,{target:yk});F.useEffect(()=>{if(a){const{edges:u,nodes:d}=r.getState();o({nodes:d.filter(fh),edges:u.filter(fh)}),r.setState({nodesSelectionActive:!1})}},[a]),F.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])}function xk(e){const i=gt();F.useEffect(()=>{const r=()=>{var a,c,u,d;if(!e.current||!(((c=(a=e.current).checkVisibility)==null?void 0:c.call(a))??!0))return!1;const o=Hp(e.current);(o.height===0||o.width===0)&&((d=(u=i.getState()).onError)==null||d.call(u,"004",zn.error004())),i.setState({width:o.width||500,height:o.height||500})};if(e.current){r(),window.addEventListener("resize",r);const o=new ResizeObserver(()=>r());return o.observe(e.current),()=>{window.removeEventListener("resize",r),o&&e.current&&o.unobserve(e.current)}}},[])}const Ou={position:"absolute",width:"100%",height:"100%",top:0,left:0},vk=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function wk({onPaneContextMenu:e,zoomOnScroll:i=!0,zoomOnPinch:r=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=vo.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:_,translateExtent:f,minZoom:y,maxZoom:m,zoomActivationKeyCode:h,preventScrolling:x=!0,children:w,noWheelClassName:b,noPanClassName:S,onViewportChange:k,isControlledViewport:I,paneClickDistance:M,selectionOnDrag:E}){const P=gt(),C=F.useRef(null),{userSelectionActive:R,lib:j,connectionInProgress:V}=Ze(vk,yt),Q=vs(h),z=F.useRef();xk(C);const L=F.useCallback(ie=>{k==null||k({x:ie[0],y:ie[1],zoom:ie[2]}),I||P.setState({transform:ie})},[k,I]);return F.useEffect(()=>{if(C.current){z.current=S2({domNode:C.current,minZoom:y,maxZoom:m,translateExtent:f,viewport:_,onDraggingChange:G=>P.setState({paneDragging:G}),onPanZoomStart:(G,Z)=>{const{onViewportChangeStart:H,onMoveStart:U}=P.getState();U==null||U(G,Z),H==null||H(Z)},onPanZoom:(G,Z)=>{const{onViewportChange:H,onMove:U}=P.getState();U==null||U(G,Z),H==null||H(Z)},onPanZoomEnd:(G,Z)=>{const{onViewportChangeEnd:H,onMoveEnd:U}=P.getState();U==null||U(G,Z),H==null||H(Z)}});const{x:ie,y:T,zoom:X}=z.current.getViewport();return P.setState({panZoom:z.current,transform:[ie,T,X],domNode:C.current.closest(".react-flow")}),()=>{var G;(G=z.current)==null||G.destroy()}}},[]),F.useEffect(()=>{var ie;(ie=z.current)==null||ie.update({onPaneContextMenu:e,zoomOnScroll:i,zoomOnPinch:r,panOnScroll:o,panOnScrollSpeed:a,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:Q,preventScrolling:x,noPanClassName:S,userSelectionActive:R,noWheelClassName:b,lib:j,onTransformChange:L,connectionInProgress:V,selectionOnDrag:E,paneClickDistance:M})},[e,i,r,o,a,c,u,d,Q,x,S,R,b,j,L,V,E,M]),l.jsx("div",{className:"react-flow__renderer",ref:C,style:Ou,children:w})}const bk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function kk(){const{userSelectionActive:e,userSelectionRect:i}=Ze(bk,yt);return e&&i?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:i.width,height:i.height,transform:`translate(${i.x}px, ${i.y}px)`}}):null}const Dd=(e,i)=>r=>{r.target===i.current&&(e==null||e(r))},Sk=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Mk({isSelecting:e,selectionKeyPressed:i,selectionMode:r=ys.Full,panOnDrag:o,paneClickDistance:a,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:_,onPaneContextMenu:f,onPaneScroll:y,onPaneMouseEnter:m,onPaneMouseMove:h,onPaneMouseLeave:x,children:w}){const b=gt(),{userSelectionActive:S,elementsSelectable:k,dragging:I,connectionInProgress:M}=Ze(Sk,yt),E=k&&(e||S),P=F.useRef(null),C=F.useRef(),R=F.useRef(new Set),j=F.useRef(new Set),V=F.useRef(!1),Q=H=>{if(V.current||M){V.current=!1;return}_==null||_(H),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},z=H=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){H.preventDefault();return}f==null||f(H)},L=y?H=>y(H):void 0,ie=H=>{V.current&&(H.stopPropagation(),V.current=!1)},T=H=>{var he,be;const{domNode:U}=b.getState();if(C.current=U==null?void 0:U.getBoundingClientRect(),!C.current)return;const te=H.target===P.current;if(!te&&!!H.target.closest(".nokey")||!e||!(c&&te||i)||H.button!==0||!H.isPrimary)return;(be=(he=H.target)==null?void 0:he.setPointerCapture)==null||be.call(he,H.pointerId),V.current=!1;const{x:pe,y:ue}=bn(H.nativeEvent,C.current);b.setState({userSelectionRect:{width:0,height:0,startX:pe,startY:ue,x:pe,y:ue}}),te||(H.stopPropagation(),H.preventDefault())},X=H=>{const{userSelectionRect:U,transform:te,nodeLookup:B,edgeLookup:Y,connectionLookup:pe,triggerNodeChanges:ue,triggerEdgeChanges:he,defaultEdgeOptions:be,resetSelectedElements:Se}=b.getState();if(!C.current||!U)return;const{x:ce,y:qe}=bn(H.nativeEvent,C.current),{startX:Fe,startY:Le}=U;if(!V.current){const Ge=i?0:a;if(Math.hypot(ce-Fe,qe-Le)<=Ge)return;Se(),u==null||u(H)}V.current=!0;const Ie={startX:Fe,startY:Le,x:ce<Fe?ce:Fe,y:qe<Le?qe:Le,width:Math.abs(ce-Fe),height:Math.abs(qe-Le)},Re=R.current,ze=j.current;R.current=new Set(Ap(B,Ie,te,r===ys.Partial,!0).map(Ge=>Ge.id)),j.current=new Set;const Ye=(be==null?void 0:be.selectable)??!0;for(const Ge of R.current){const at=pe.get(Ge);if(at)for(const{edgeId:bt}of at.values()){const xt=Y.get(bt);xt&&(xt.selectable??Ye)&&j.current.add(bt)}}if(!Of(Re,R.current)){const Ge=ra(B,R.current,!0);ue(Ge)}if(!Of(ze,j.current)){const Ge=ra(Y,j.current);he(Ge)}b.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},G=H=>{var U,te;H.button===0&&((te=(U=H.target)==null?void 0:U.releasePointerCapture)==null||te.call(U,H.pointerId),!S&&H.target===P.current&&b.getState().userSelectionRect&&(Q==null||Q(H)),b.setState({userSelectionActive:!1,userSelectionRect:null}),V.current&&(d==null||d(H),b.setState({nodesSelectionActive:R.current.size>0})))},Z=o===!0||Array.isArray(o)&&o.includes(0);return l.jsxs("div",{className:jt(["react-flow__pane",{draggable:Z,dragging:I,selection:e}]),onClick:E?void 0:Dd(Q,P),onContextMenu:Dd(z,P),onWheel:Dd(L,P),onPointerEnter:E?void 0:m,onPointerMove:E?X:h,onPointerUp:E?G:void 0,onPointerDownCapture:E?T:void 0,onClickCapture:E?ie:void 0,onPointerLeave:x,ref:P,style:Ou,children:[w,l.jsx(kk,{})]})}function _p({id:e,store:i,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:a,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:_}=i.getState(),f=d.get(e);if(!f){_==null||_("012",zn.error012(e));return}i.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&u)&&(c({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var y;return(y=o==null?void 0:o.current)==null?void 0:y.blur()})):a([e])}function Ly({nodeRef:e,disabled:i=!1,noDragClassName:r,handleSelector:o,nodeId:a,isSelectable:c,nodeClickDistance:u}){const d=gt(),[_,f]=F.useState(!1),y=F.useRef();return F.useEffect(()=>{y.current=c2({getStoreItems:()=>d.getState(),onNodeMouseDown:m=>{_p({id:m,store:d,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),F.useEffect(()=>{var m,h;if(i)(m=y.current)==null||m.destroy();else if(e.current)return(h=y.current)==null||h.update({noDragClassName:r,handleSelector:o,domNode:e.current,isSelectable:c,nodeId:a,nodeClickDistance:u}),()=>{var x;(x=y.current)==null||x.destroy()}},[r,o,i,c,e,a]),_}const Ck=e=>i=>i.selected&&(i.draggable||e&&typeof i.draggable>"u");function Oy(){const e=gt();return F.useCallback(r=>{const{nodeExtent:o,snapToGrid:a,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:_,nodeLookup:f,nodeOrigin:y}=e.getState(),m=new Map,h=Ck(u),x=a?c[0]:5,w=a?c[1]:5,b=r.direction.x*x*r.factor,S=r.direction.y*w*r.factor;for(const[,k]of f){if(!h(k))continue;let I={x:k.internals.positionAbsolute.x+b,y:k.internals.positionAbsolute.y+S};a&&(I=Ps(I,c));const{position:M,positionAbsolute:E}=sy({nodeId:k.id,nextPosition:I,nodeLookup:f,nodeExtent:o,nodeOrigin:y,onError:d});k.position=M,k.internals.positionAbsolute=E,m.set(k.id,k)}_(m)},[])}const Jp=F.createContext(null),qk=Jp.Provider;Jp.Consumer;const By=()=>F.useContext(Jp),Ek=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Ik=(e,i,r)=>o=>{const{connectionClickStartHandle:a,connectionMode:c,connection:u}=o,{fromHandle:d,toHandle:_,isValid:f}=u,y=(_==null?void 0:_.nodeId)===e&&(_==null?void 0:_.id)===i&&(_==null?void 0:_.type)===r;return{connectingFrom:(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===i&&(d==null?void 0:d.type)===r,connectingTo:y,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===i&&(a==null?void 0:a.type)===r,isPossibleEndHandle:c===ca.Strict?(d==null?void 0:d.type)!==r:e!==(d==null?void 0:d.nodeId)||i!==(d==null?void 0:d.id),connectionInProcess:!!d,clickConnectionInProcess:!!a,valid:y&&f}};function Nk({type:e="source",position:i=Be.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:_,className:f,onMouseDown:y,onTouchStart:m,...h},x){var X,G;const w=u||null,b=e==="target",S=gt(),k=By(),{connectOnClick:I,noPanClassName:M,rfId:E}=Ze(Ek,yt),{connectingFrom:P,connectingTo:C,clickConnecting:R,isPossibleEndHandle:j,connectionInProcess:V,clickConnectionInProcess:Q,valid:z}=Ze(Ik(k,w,e),yt);k||(G=(X=S.getState()).onError)==null||G.call(X,"010",zn.error010());const L=Z=>{const{defaultEdgeOptions:H,onConnect:U,hasDefaultEdges:te}=S.getState(),B={...H,...Z};if(te){const{edges:Y,setEdges:pe}=S.getState();pe(lp(B,Y))}U==null||U(B),d==null||d(B)},ie=Z=>{if(!k)return;const H=fy(Z.nativeEvent);if(a&&(H&&Z.button===0||!H)){const U=S.getState();pp.onPointerDown(Z.nativeEvent,{handleDomNode:Z.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:b,handleId:w,nodeId:k,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:L,isValidConnection:r||U.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}H?y==null||y(Z):m==null||m(Z)},T=Z=>{const{onClickConnectStart:H,onClickConnectEnd:U,connectionClickStartHandle:te,connectionMode:B,isValidConnection:Y,lib:pe,rfId:ue,nodeLookup:he,connection:be}=S.getState();if(!k||!te&&!a)return;if(!te){H==null||H(Z.nativeEvent,{nodeId:k,handleId:w,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:k,type:e,id:w}});return}const Se=_y(Z.target),ce=r||Y,{connection:qe,isValid:Fe}=pp.isValid(Z.nativeEvent,{handle:{nodeId:k,id:w,type:e},connectionMode:B,fromNodeId:te.nodeId,fromHandleId:te.id||null,fromType:te.type,isValidConnection:ce,flowId:ue,doc:Se,lib:pe,nodeLookup:he});Fe&&qe&&L(qe);const Le=structuredClone(be);delete Le.inProgress,Le.toPosition=Le.toHandle?Le.toHandle.position:null,U==null||U(Z,Le),S.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":w,"data-nodeid":k,"data-handlepos":i,"data-id":`${E}-${k}-${w}-${e}`,className:jt(["react-flow__handle",`react-flow__handle-${i}`,"nodrag",M,f,{source:!b,target:b,connectable:o,connectablestart:a,connectableend:c,clickconnecting:R,connectingfrom:P,connectingto:C,valid:z,connectionindicator:o&&(!V||j)&&(V||Q?c:a)}]),onMouseDown:ie,onTouchStart:ie,onClick:I?T:void 0,ref:x,...h,children:_})}const ws=F.memo(Dy(Nk));function jk({data:e,isConnectable:i,sourcePosition:r=Be.Bottom}){return l.jsxs(l.Fragment,{children:[e==null?void 0:e.label,l.jsx(ws,{type:"source",position:r,isConnectable:i})]})}function Pk({data:e,isConnectable:i,targetPosition:r=Be.Top,sourcePosition:o=Be.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(ws,{type:"target",position:r,isConnectable:i}),e==null?void 0:e.label,l.jsx(ws,{type:"source",position:o,isConnectable:i})]})}function Tk(){return null}function Rk({data:e,isConnectable:i,targetPosition:r=Be.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(ws,{type:"target",position:r,isConnectable:i}),e==null?void 0:e.label]})}const xu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},hh={input:jk,default:Pk,output:Rk,group:Tk};function Vk(e){var i,r,o,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((i=e.style)==null?void 0:i.width),height:e.height??e.initialHeight??((r=e.style)==null?void 0:r.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const Fk=e=>{const{width:i,height:r,x:o,y:a}=js(e.nodeLookup,{filter:c=>!!c.selected});return{width:wn(i)?i:null,height:wn(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${a}px)`}};function Dk({onSelectionContextMenu:e,noPanClassName:i,disableKeyboardA11y:r}){const o=gt(),{width:a,height:c,transformString:u,userSelectionActive:d}=Ze(Fk,yt),_=Oy(),f=F.useRef(null);if(F.useEffect(()=>{var h;r||(h=f.current)==null||h.focus({preventScroll:!0})},[r]),Ly({nodeRef:f}),d||!a||!c)return null;const y=e?h=>{const x=o.getState().nodes.filter(w=>w.selected);e(h,x)}:void 0,m=h=>{Object.prototype.hasOwnProperty.call(xu,h.key)&&(h.preventDefault(),_({direction:xu[h.key],factor:h.shiftKey?4:1}))};return l.jsx("div",{className:jt(["react-flow__nodesselection","react-flow__container",i]),style:{transform:u},children:l.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:c}})})}const yh=typeof window<"u"?window:void 0,zk=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ay({children:e,onPaneClick:i,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:_,selectionKeyCode:f,selectionOnDrag:y,selectionMode:m,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:w,panActivationKeyCode:b,zoomActivationKeyCode:S,elementsSelectable:k,zoomOnScroll:I,zoomOnPinch:M,panOnScroll:E,panOnScrollSpeed:P,panOnScrollMode:C,zoomOnDoubleClick:R,panOnDrag:j,defaultViewport:V,translateExtent:Q,minZoom:z,maxZoom:L,preventScrolling:ie,onSelectionContextMenu:T,noWheelClassName:X,noPanClassName:G,disableKeyboardA11y:Z,onViewportChange:H,isControlledViewport:U}){const{nodesSelectionActive:te,userSelectionActive:B}=Ze(zk,yt),Y=vs(f,{target:yh}),pe=vs(b,{target:yh}),ue=pe||j,he=pe||E,be=y&&ue!==!0,Se=Y||B||be;return gk({deleteKeyCode:_,multiSelectionKeyCode:w}),l.jsx(wk,{onPaneContextMenu:c,elementsSelectable:k,zoomOnScroll:I,zoomOnPinch:M,panOnScroll:he,panOnScrollSpeed:P,panOnScrollMode:C,zoomOnDoubleClick:R,panOnDrag:!Y&&ue,defaultViewport:V,translateExtent:Q,minZoom:z,maxZoom:L,zoomActivationKeyCode:S,preventScrolling:ie,noWheelClassName:X,noPanClassName:G,onViewportChange:H,isControlledViewport:U,paneClickDistance:d,selectionOnDrag:be,children:l.jsxs(Mk,{onSelectionStart:h,onSelectionEnd:x,onPaneClick:i,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:ue,isSelecting:!!Se,selectionMode:m,selectionKeyPressed:Y,paneClickDistance:d,selectionOnDrag:be,children:[e,te&&l.jsx(Dk,{onSelectionContextMenu:T,noPanClassName:G,disableKeyboardA11y:Z})]})})}Ay.displayName="FlowRenderer";const Lk=F.memo(Ay),Ok=e=>i=>e?Ap(i.nodeLookup,{x:0,y:0,width:i.width,height:i.height},i.transform,!0).map(r=>r.id):Array.from(i.nodeLookup.keys());function Bk(e){return Ze(F.useCallback(Ok(e),[e]),yt)}const Ak=e=>e.updateNodeInternals;function $k(){const e=Ze(Ak),[i]=F.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const o=new Map;r.forEach(a=>{const c=a.target.getAttribute("data-id");o.set(c,{id:c,nodeElement:a.target,force:!0})}),e(o)}));return F.useEffect(()=>()=>{i==null||i.disconnect()},[i]),i}function Hk({node:e,nodeType:i,hasDimensions:r,resizeObserver:o}){const a=gt(),c=F.useRef(null),u=F.useRef(null),d=F.useRef(e.sourcePosition),_=F.useRef(e.targetPosition),f=F.useRef(i),y=r&&!!e.internals.handleBounds;return F.useEffect(()=>{c.current&&!e.hidden&&(!y||u.current!==c.current)&&(u.current&&(o==null||o.unobserve(u.current)),o==null||o.observe(c.current),u.current=c.current)},[y,e.hidden]),F.useEffect(()=>()=>{u.current&&(o==null||o.unobserve(u.current),u.current=null)},[]),F.useEffect(()=>{if(c.current){const m=f.current!==i,h=d.current!==e.sourcePosition,x=_.current!==e.targetPosition;(m||h||x)&&(f.current=i,d.current=e.sourcePosition,_.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,i,e.sourcePosition,e.targetPosition]),c}function Wk({id:e,onClick:i,onMouseEnter:r,onMouseMove:o,onMouseLeave:a,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:_,nodesConnectable:f,nodesFocusable:y,resizeObserver:m,noDragClassName:h,noPanClassName:x,disableKeyboardA11y:w,rfId:b,nodeTypes:S,nodeClickDistance:k,onError:I}){const{node:M,internals:E,isParent:P}=Ze(ce=>{const qe=ce.nodeLookup.get(e),Fe=ce.parentLookup.has(e);return{node:qe,internals:qe.internals,isParent:Fe}},yt);let C=M.type||"default",R=(S==null?void 0:S[C])||hh[C];R===void 0&&(I==null||I("003",zn.error003(C)),C="default",R=(S==null?void 0:S.default)||hh.default);const j=!!(M.draggable||d&&typeof M.draggable>"u"),V=!!(M.selectable||_&&typeof M.selectable>"u"),Q=!!(M.connectable||f&&typeof M.connectable>"u"),z=!!(M.focusable||y&&typeof M.focusable>"u"),L=gt(),ie=dy(M),T=Hk({node:M,nodeType:C,hasDimensions:ie,resizeObserver:m}),X=Ly({nodeRef:T,disabled:M.hidden||!j,noDragClassName:h,handleSelector:M.dragHandle,nodeId:e,isSelectable:V,nodeClickDistance:k}),G=Oy();if(M.hidden)return null;const Z=dr(M),H=Vk(M),U=V||j||i||r||o||a,te=r?ce=>r(ce,{...E.userNode}):void 0,B=o?ce=>o(ce,{...E.userNode}):void 0,Y=a?ce=>a(ce,{...E.userNode}):void 0,pe=c?ce=>c(ce,{...E.userNode}):void 0,ue=u?ce=>u(ce,{...E.userNode}):void 0,he=ce=>{const{selectNodesOnDrag:qe,nodeDragThreshold:Fe}=L.getState();V&&(!qe||!j||Fe>0)&&_p({id:e,store:L,nodeRef:T}),i&&i(ce,{...E.userNode})},be=ce=>{if(!(my(ce.nativeEvent)||w)){if(iy.includes(ce.key)&&V){const qe=ce.key==="Escape";_p({id:e,store:L,unselect:qe,nodeRef:T})}else if(j&&M.selected&&Object.prototype.hasOwnProperty.call(xu,ce.key)){ce.preventDefault();const{ariaLabelConfig:qe}=L.getState();L.setState({ariaLiveMessage:qe["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~E.positionAbsolute.x,y:~~E.positionAbsolute.y})}),G({direction:xu[ce.key],factor:ce.shiftKey?4:1})}}},Se=()=>{var ze;if(w||!((ze=T.current)!=null&&ze.matches(":focus-visible")))return;const{transform:ce,width:qe,height:Fe,autoPanOnNodeFocus:Le,setCenter:Ie}=L.getState();if(!Le)return;Ap(new Map([[e,M]]),{x:0,y:0,width:qe,height:Fe},ce,!0).length>0||Ie(M.position.x+Z.width/2,M.position.y+Z.height/2,{zoom:ce[2]})};return l.jsx("div",{className:jt(["react-flow__node",`react-flow__node-${C}`,{[x]:j},M.className,{selected:M.selected,selectable:V,parent:P,draggable:j,dragging:X}]),ref:T,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:U?"all":"none",visibility:ie?"visible":"hidden",...M.style,...H},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:te,onMouseMove:B,onMouseLeave:Y,onContextMenu:pe,onClick:he,onDoubleClick:ue,onKeyDown:z?be:void 0,tabIndex:z?0:void 0,onFocus:z?Se:void 0,role:M.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${jy}-${b}`,"aria-label":M.ariaLabel,...M.domAttributes,children:l.jsx(qk,{value:e,children:l.jsx(R,{id:e,data:M.data,type:C,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:M.selected??!1,selectable:V,draggable:j,deletable:M.deletable??!0,isConnectable:Q,sourcePosition:M.sourcePosition,targetPosition:M.targetPosition,dragging:X,dragHandle:M.dragHandle,zIndex:E.z,parentId:M.parentId,...Z})})})}var Uk=F.memo(Wk);const Gk=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function $y(e){const{nodesDraggable:i,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,onError:c}=Ze(Gk,yt),u=Bk(e.onlyRenderVisibleElements),d=$k();return l.jsx("div",{className:"react-flow__nodes",style:Ou,children:u.map(_=>l.jsx(Uk,{id:_,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:i,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:c},_))})}$y.displayName="NodeRenderer";const Yk=F.memo($y);function Kk(e){return Ze(F.useCallback(r=>{if(!e)return r.edges.map(a=>a.id);const o=[];if(r.width&&r.height)for(const a of r.edges){const c=r.nodeLookup.get(a.source),u=r.nodeLookup.get(a.target);c&&u&&Ub({sourceNode:c,targetNode:u,width:r.width,height:r.height,transform:r.transform})&&o.push(a.id)}return o},[e]),yt)}const Qk=({color:e="none",strokeWidth:i=1})=>{const r={strokeWidth:i,...e&&{stroke:e}};return l.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Xk=({color:e="none",strokeWidth:i=1})=>{const r={strokeWidth:i,...e&&{stroke:e,fill:e}};return l.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},gh={[hu.Arrow]:Qk,[hu.ArrowClosed]:Xk};function Zk(e){const i=gt();return F.useMemo(()=>{var a,c;return Object.prototype.hasOwnProperty.call(gh,e)?gh[e]:((c=(a=i.getState()).onError)==null||c.call(a,"009",zn.error009(e)),null)},[e])}const Jk=({id:e,type:i,color:r,width:o=12.5,height:a=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const _=Zk(i);return _?l.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:l.jsx(_,{color:r,strokeWidth:u})}):null},Hy=({defaultColor:e,rfId:i})=>{const r=Ze(c=>c.edges),o=Ze(c=>c.defaultEdgeOptions),a=F.useMemo(()=>Jb(r,{id:i,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[r,o,i,e]);return a.length?l.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:l.jsx("defs",{children:a.map(c=>l.jsx(Jk,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};Hy.displayName="MarkerDefinitions";var eS=F.memo(Hy);function Wy({x:e,y:i,label:r,labelStyle:o,labelShowBg:a=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:_,className:f,...y}){const[m,h]=F.useState({x:1,y:0,width:0,height:0}),x=jt(["react-flow__edge-textwrapper",f]),w=F.useRef(null);return F.useEffect(()=>{if(w.current){const b=w.current.getBBox();h({x:b.x,y:b.y,width:b.width,height:b.height})}},[r]),r?l.jsxs("g",{transform:`translate(${e-m.width/2} ${i-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...y,children:[a&&l.jsx("rect",{width:m.width+2*u[0],x:-u[0],y:-u[1],height:m.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),l.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:w,style:o,children:r}),_]}):null}Wy.displayName="EdgeText";const tS=F.memo(Wy);function Bu({path:e,labelX:i,labelY:r,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:_,interactionWidth:f=20,...y}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{...y,d:e,fill:"none",className:jt(["react-flow__edge-path",y.className])}),f?l.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,o&&wn(i)&&wn(r)?l.jsx(tS,{x:i,y:r,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:_}):null]})}function xh({pos:e,x1:i,y1:r,x2:o,y2:a}){return e===Be.Left||e===Be.Right?[.5*(i+o),r]:[i,.5*(r+a)]}function Uy({sourceX:e,sourceY:i,sourcePosition:r=Be.Bottom,targetX:o,targetY:a,targetPosition:c=Be.Top}){const[u,d]=xh({pos:r,x1:e,y1:i,x2:o,y2:a}),[_,f]=xh({pos:c,x1:o,y1:a,x2:e,y2:i}),[y,m,h,x]=hy({sourceX:e,sourceY:i,targetX:o,targetY:a,sourceControlX:u,sourceControlY:d,targetControlX:_,targetControlY:f});return[`M${e},${i} C${u},${d} ${_},${f} ${o},${a}`,y,m,h,x]}function Gy(e){return F.memo(({id:i,sourceX:r,sourceY:o,targetX:a,targetY:c,sourcePosition:u,targetPosition:d,label:_,labelStyle:f,labelShowBg:y,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:S,interactionWidth:k})=>{const[I,M,E]=Uy({sourceX:r,sourceY:o,sourcePosition:u,targetX:a,targetY:c,targetPosition:d}),P=e.isInternal?void 0:i;return l.jsx(Bu,{id:P,path:I,labelX:M,labelY:E,label:_,labelStyle:f,labelShowBg:y,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:S,interactionWidth:k})})}const iS=Gy({isInternal:!1}),Yy=Gy({isInternal:!0});iS.displayName="SimpleBezierEdge";Yy.displayName="SimpleBezierEdgeInternal";function Ky(e){return F.memo(({id:i,sourceX:r,sourceY:o,targetX:a,targetY:c,label:u,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:m,style:h,sourcePosition:x=Be.Bottom,targetPosition:w=Be.Top,markerEnd:b,markerStart:S,pathOptions:k,interactionWidth:I})=>{const[M,E,P]=up({sourceX:r,sourceY:o,sourcePosition:x,targetX:a,targetY:c,targetPosition:w,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset,stepPosition:k==null?void 0:k.stepPosition}),C=e.isInternal?void 0:i;return l.jsx(Bu,{id:C,path:M,labelX:E,labelY:P,label:u,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:m,style:h,markerEnd:b,markerStart:S,interactionWidth:I})})}const Qy=Ky({isInternal:!1}),Xy=Ky({isInternal:!0});Qy.displayName="SmoothStepEdge";Xy.displayName="SmoothStepEdgeInternal";function Zy(e){return F.memo(({id:i,...r})=>{var a;const o=e.isInternal?void 0:i;return l.jsx(Qy,{...r,id:o,pathOptions:F.useMemo(()=>{var c;return{borderRadius:0,offset:(c=r.pathOptions)==null?void 0:c.offset}},[(a=r.pathOptions)==null?void 0:a.offset])})})}const nS=Zy({isInternal:!1}),Jy=Zy({isInternal:!0});nS.displayName="StepEdge";Jy.displayName="StepEdgeInternal";function eg(e){return F.memo(({id:i,sourceX:r,sourceY:o,targetX:a,targetY:c,label:u,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:m,style:h,markerEnd:x,markerStart:w,interactionWidth:b})=>{const[S,k,I]=Up({sourceX:r,sourceY:o,targetX:a,targetY:c}),M=e.isInternal?void 0:i;return l.jsx(Bu,{id:M,path:S,labelX:k,labelY:I,label:u,labelStyle:d,labelShowBg:_,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:m,style:h,markerEnd:x,markerStart:w,interactionWidth:b})})}const rS=eg({isInternal:!1}),tg=eg({isInternal:!0});rS.displayName="StraightEdge";tg.displayName="StraightEdgeInternal";function ig(e){return F.memo(({id:i,sourceX:r,sourceY:o,targetX:a,targetY:c,sourcePosition:u=Be.Bottom,targetPosition:d=Be.Top,label:_,labelStyle:f,labelShowBg:y,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:S,pathOptions:k,interactionWidth:I})=>{const[M,E,P]=Wp({sourceX:r,sourceY:o,sourcePosition:u,targetX:a,targetY:c,targetPosition:d,curvature:k==null?void 0:k.curvature}),C=e.isInternal?void 0:i;return l.jsx(Bu,{id:C,path:M,labelX:E,labelY:P,label:_,labelStyle:f,labelShowBg:y,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:S,interactionWidth:I})})}const oS=ig({isInternal:!1}),ng=ig({isInternal:!0});oS.displayName="BezierEdge";ng.displayName="BezierEdgeInternal";const vh={default:ng,straight:tg,step:Jy,smoothstep:Xy,simplebezier:Yy},wh={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},aS=(e,i,r)=>r===Be.Left?e-i:r===Be.Right?e+i:e,sS=(e,i,r)=>r===Be.Top?e-i:r===Be.Bottom?e+i:e,bh="react-flow__edgeupdater";function kh({position:e,centerX:i,centerY:r,radius:o=10,onMouseDown:a,onMouseEnter:c,onMouseOut:u,type:d}){return l.jsx("circle",{onMouseDown:a,onMouseEnter:c,onMouseOut:u,className:jt([bh,`${bh}-${d}`]),cx:aS(i,o,e),cy:sS(r,o,e),r:o,stroke:"transparent",fill:"transparent"})}function lS({isReconnectable:e,reconnectRadius:i,edge:r,sourceX:o,sourceY:a,targetX:c,targetY:u,sourcePosition:d,targetPosition:_,onReconnect:f,onReconnectStart:y,onReconnectEnd:m,setReconnecting:h,setUpdateHover:x}){const w=gt(),b=(E,P)=>{if(E.button!==0)return;const{autoPanOnConnect:C,domNode:R,isValidConnection:j,connectionMode:V,connectionRadius:Q,lib:z,onConnectStart:L,onConnectEnd:ie,cancelConnection:T,nodeLookup:X,rfId:G,panBy:Z,updateConnection:H}=w.getState(),U=P.type==="target",te=(pe,ue)=>{h(!1),m==null||m(pe,r,P.type,ue)},B=pe=>f==null?void 0:f(r,pe),Y=(pe,ue)=>{h(!0),y==null||y(E,r,P.type),L==null||L(pe,ue)};pp.onPointerDown(E.nativeEvent,{autoPanOnConnect:C,connectionMode:V,connectionRadius:Q,domNode:R,handleId:P.id,nodeId:P.nodeId,nodeLookup:X,isTarget:U,edgeUpdaterType:P.type,lib:z,flowId:G,cancelConnection:T,panBy:Z,isValidConnection:j,onConnect:B,onConnectStart:Y,onConnectEnd:ie,onReconnectEnd:te,updateConnection:H,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:E.currentTarget})},S=E=>b(E,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),k=E=>b(E,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),I=()=>x(!0),M=()=>x(!1);return l.jsxs(l.Fragment,{children:[(e===!0||e==="source")&&l.jsx(kh,{position:d,centerX:o,centerY:a,radius:i,onMouseDown:S,onMouseEnter:I,onMouseOut:M,type:"source"}),(e===!0||e==="target")&&l.jsx(kh,{position:_,centerX:c,centerY:u,radius:i,onMouseDown:k,onMouseEnter:I,onMouseOut:M,type:"target"})]})}function uS({id:e,edgesFocusable:i,edgesReconnectable:r,elementsSelectable:o,onClick:a,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:_,onMouseLeave:f,reconnectRadius:y,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,rfId:w,edgeTypes:b,noPanClassName:S,onError:k,disableKeyboardA11y:I}){let M=Ze(Ie=>Ie.edgeLookup.get(e));const E=Ze(Ie=>Ie.defaultEdgeOptions);M=E?{...E,...M}:M;let P=M.type||"default",C=(b==null?void 0:b[P])||vh[P];C===void 0&&(k==null||k("011",zn.error011(P)),P="default",C=(b==null?void 0:b.default)||vh.default);const R=!!(M.focusable||i&&typeof M.focusable>"u"),j=typeof m<"u"&&(M.reconnectable||r&&typeof M.reconnectable>"u"),V=!!(M.selectable||o&&typeof M.selectable>"u"),Q=F.useRef(null),[z,L]=F.useState(!1),[ie,T]=F.useState(!1),X=gt(),{zIndex:G,sourceX:Z,sourceY:H,targetX:U,targetY:te,sourcePosition:B,targetPosition:Y}=Ze(F.useCallback(Ie=>{const Re=Ie.nodeLookup.get(M.source),ze=Ie.nodeLookup.get(M.target);if(!Re||!ze)return{zIndex:M.zIndex,...wh};const Ye=Zb({id:e,sourceNode:Re,targetNode:ze,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:Ie.connectionMode,onError:k});return{zIndex:Wb({selected:M.selected,zIndex:M.zIndex,sourceNode:Re,targetNode:ze,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Ye||wh}},[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),yt),pe=F.useMemo(()=>M.markerStart?`url('#${cp(M.markerStart,w)}')`:void 0,[M.markerStart,w]),ue=F.useMemo(()=>M.markerEnd?`url('#${cp(M.markerEnd,w)}')`:void 0,[M.markerEnd,w]);if(M.hidden||Z===null||H===null||U===null||te===null)return null;const he=Ie=>{var Ge;const{addSelectedEdges:Re,unselectNodesAndEdges:ze,multiSelectionActive:Ye}=X.getState();V&&(X.setState({nodesSelectionActive:!1}),M.selected&&Ye?(ze({nodes:[],edges:[M]}),(Ge=Q.current)==null||Ge.blur()):Re([e])),a&&a(Ie,M)},be=c?Ie=>{c(Ie,{...M})}:void 0,Se=u?Ie=>{u(Ie,{...M})}:void 0,ce=d?Ie=>{d(Ie,{...M})}:void 0,qe=_?Ie=>{_(Ie,{...M})}:void 0,Fe=f?Ie=>{f(Ie,{...M})}:void 0,Le=Ie=>{var Re;if(!I&&iy.includes(Ie.key)&&V){const{unselectNodesAndEdges:ze,addSelectedEdges:Ye}=X.getState();Ie.key==="Escape"?((Re=Q.current)==null||Re.blur(),ze({edges:[M]})):Ye([e])}};return l.jsx("svg",{style:{zIndex:G},children:l.jsxs("g",{className:jt(["react-flow__edge",`react-flow__edge-${P}`,M.className,S,{selected:M.selected,animated:M.animated,inactive:!V&&!a,updating:z,selectable:V}]),onClick:he,onDoubleClick:be,onContextMenu:Se,onMouseEnter:ce,onMouseMove:qe,onMouseLeave:Fe,onKeyDown:R?Le:void 0,tabIndex:R?0:void 0,role:M.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":M.ariaLabel===null?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":R?`${Py}-${w}`:void 0,ref:Q,...M.domAttributes,children:[!ie&&l.jsx(C,{id:e,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:V,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:Z,sourceY:H,targetX:U,targetY:te,sourcePosition:B,targetPosition:Y,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:pe,markerEnd:ue,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),j&&l.jsx(lS,{edge:M,isReconnectable:j,reconnectRadius:y,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,sourceX:Z,sourceY:H,targetX:U,targetY:te,sourcePosition:B,targetPosition:Y,setUpdateHover:L,setReconnecting:T})]})})}var cS=F.memo(uS);const dS=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function rg({defaultMarkerColor:e,onlyRenderVisibleElements:i,rfId:r,edgeTypes:o,noPanClassName:a,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:_,onEdgeMouseLeave:f,onEdgeClick:y,reconnectRadius:m,onEdgeDoubleClick:h,onReconnectStart:x,onReconnectEnd:w,disableKeyboardA11y:b}){const{edgesFocusable:S,edgesReconnectable:k,elementsSelectable:I,onError:M}=Ze(dS,yt),E=Kk(i);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(eS,{defaultColor:e,rfId:r}),E.map(P=>l.jsx(cS,{id:P,edgesFocusable:S,edgesReconnectable:k,elementsSelectable:I,noPanClassName:a,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:_,onMouseLeave:f,onClick:y,reconnectRadius:m,onDoubleClick:h,onReconnectStart:x,onReconnectEnd:w,rfId:r,onError:M,edgeTypes:o,disableKeyboardA11y:b},P))]})}rg.displayName="EdgeRenderer";const pS=F.memo(rg),_S=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function mS({children:e}){const i=Ze(_S);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:i},children:e})}function fS(e){const i=Zp(),r=F.useRef(!1);F.useEffect(()=>{!r.current&&i.viewportInitialized&&e&&(setTimeout(()=>e(i),1),r.current=!0)},[e,i.viewportInitialized])}const hS=e=>{var i;return(i=e.panZoom)==null?void 0:i.syncViewport};function yS(e){const i=Ze(hS),r=gt();return F.useEffect(()=>{e&&(i==null||i(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,i]),null}function gS(e){return e.connection.inProgress?{...e.connection,to:Ts(e.connection.to,e.transform)}:{...e.connection}}function xS(e){return gS}function vS(e){const i=xS();return Ze(i,yt)}const wS=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function bS({containerStyle:e,style:i,type:r,component:o}){const{nodesConnectable:a,width:c,height:u,isValid:d,inProgress:_}=Ze(wS,yt);return!(c&&a&&_)?null:l.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:jt(["react-flow__connection",oy(d)]),children:l.jsx(og,{style:i,type:r,CustomComponent:o,isValid:d})})})}const og=({style:e,type:i=Dr.Bezier,CustomComponent:r,isValid:o})=>{const{inProgress:a,from:c,fromNode:u,fromHandle:d,fromPosition:_,to:f,toNode:y,toHandle:m,toPosition:h,pointer:x}=vS();if(!a)return;if(r)return l.jsx(r,{connectionLineType:i,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:f.x,toY:f.y,fromPosition:_,toPosition:h,connectionStatus:oy(o),toNode:y,toHandle:m,pointer:x});let w="";const b={sourceX:c.x,sourceY:c.y,sourcePosition:_,targetX:f.x,targetY:f.y,targetPosition:h};switch(i){case Dr.Bezier:[w]=Wp(b);break;case Dr.SimpleBezier:[w]=Uy(b);break;case Dr.Step:[w]=up({...b,borderRadius:0});break;case Dr.SmoothStep:[w]=up(b);break;default:[w]=Up(b)}return l.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};og.displayName="ConnectionLine";const kS={};function Sh(e=kS){F.useRef(e),gt(),F.useEffect(()=>{},[e])}function SS(){gt(),F.useRef(!1),F.useEffect(()=>{},[])}function ag({nodeTypes:e,edgeTypes:i,onInit:r,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:_,onNodeMouseLeave:f,onNodeContextMenu:y,onSelectionContextMenu:m,onSelectionStart:h,onSelectionEnd:x,connectionLineType:w,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:k,selectionKeyCode:I,selectionOnDrag:M,selectionMode:E,multiSelectionKeyCode:P,panActivationKeyCode:C,zoomActivationKeyCode:R,deleteKeyCode:j,onlyRenderVisibleElements:V,elementsSelectable:Q,defaultViewport:z,translateExtent:L,minZoom:ie,maxZoom:T,preventScrolling:X,defaultMarkerColor:G,zoomOnScroll:Z,zoomOnPinch:H,panOnScroll:U,panOnScrollSpeed:te,panOnScrollMode:B,zoomOnDoubleClick:Y,panOnDrag:pe,onPaneClick:ue,onPaneMouseEnter:he,onPaneMouseMove:be,onPaneMouseLeave:Se,onPaneScroll:ce,onPaneContextMenu:qe,paneClickDistance:Fe,nodeClickDistance:Le,onEdgeContextMenu:Ie,onEdgeMouseEnter:Re,onEdgeMouseMove:ze,onEdgeMouseLeave:Ye,reconnectRadius:Ge,onReconnect:at,onReconnectStart:bt,onReconnectEnd:xt,noDragClassName:Et,noWheelClassName:Dt,noPanClassName:hi,disableKeyboardA11y:Ci,nodeExtent:Bn,rfId:Oi,viewport:Zt,onViewportChange:yi}){return Sh(e),Sh(i),SS(),fS(r),yS(Zt),l.jsx(Lk,{onPaneClick:ue,onPaneMouseEnter:he,onPaneMouseMove:be,onPaneMouseLeave:Se,onPaneContextMenu:qe,onPaneScroll:ce,paneClickDistance:Fe,deleteKeyCode:j,selectionKeyCode:I,selectionOnDrag:M,selectionMode:E,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:P,panActivationKeyCode:C,zoomActivationKeyCode:R,elementsSelectable:Q,zoomOnScroll:Z,zoomOnPinch:H,zoomOnDoubleClick:Y,panOnScroll:U,panOnScrollSpeed:te,panOnScrollMode:B,panOnDrag:pe,defaultViewport:z,translateExtent:L,minZoom:ie,maxZoom:T,onSelectionContextMenu:m,preventScrolling:X,noDragClassName:Et,noWheelClassName:Dt,noPanClassName:hi,disableKeyboardA11y:Ci,onViewportChange:yi,isControlledViewport:!!Zt,children:l.jsxs(mS,{children:[l.jsx(pS,{edgeTypes:i,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:at,onReconnectStart:bt,onReconnectEnd:xt,onlyRenderVisibleElements:V,onEdgeContextMenu:Ie,onEdgeMouseEnter:Re,onEdgeMouseMove:ze,onEdgeMouseLeave:Ye,reconnectRadius:Ge,defaultMarkerColor:G,noPanClassName:hi,disableKeyboardA11y:Ci,rfId:Oi}),l.jsx(bS,{style:b,type:w,component:S,containerStyle:k}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(Yk,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:_,onNodeMouseLeave:f,onNodeContextMenu:y,nodeClickDistance:Le,onlyRenderVisibleElements:V,noPanClassName:hi,noDragClassName:Et,disableKeyboardA11y:Ci,nodeExtent:Bn,rfId:Oi}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}ag.displayName="GraphView";const MS=F.memo(ag),Mh=({nodes:e,edges:i,defaultNodes:r,defaultEdges:o,width:a,height:c,fitView:u,fitViewOptions:d,minZoom:_=.5,maxZoom:f=2,nodeOrigin:y,nodeExtent:m,zIndexMode:h="basic"}={})=>{const x=new Map,w=new Map,b=new Map,S=new Map,k=o??i??[],I=r??e??[],M=y??[0,0],E=m??hs;vy(b,S,k);const P=dp(I,x,w,{nodeOrigin:M,nodeExtent:E,zIndexMode:h});let C=[0,0,1];if(u&&a&&c){const R=js(x,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:j,y:V,zoom:Q}=$p(R,a,c,_,f,(d==null?void 0:d.padding)??.1);C=[j,V,Q]}return{rfId:"1",width:a??0,height:c??0,transform:C,nodes:I,nodesInitialized:P,nodeLookup:x,parentLookup:w,edges:k,edgeLookup:S,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:_,maxZoom:f,translateExtent:hs,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ca.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:M,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...ry},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Lb,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ny,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},CS=({nodes:e,edges:i,defaultNodes:r,defaultEdges:o,width:a,height:c,fitView:u,fitViewOptions:d,minZoom:_,maxZoom:f,nodeOrigin:y,nodeExtent:m,zIndexMode:h})=>A2((x,w)=>{async function b(){const{nodeLookup:S,panZoom:k,fitViewOptions:I,fitViewResolver:M,width:E,height:P,minZoom:C,maxZoom:R}=w();k&&(await Db({nodes:S,width:E,height:P,panZoom:k,minZoom:C,maxZoom:R},I),M==null||M.resolve(!0),x({fitViewResolver:null}))}return{...Mh({nodes:e,edges:i,width:a,height:c,fitView:u,fitViewOptions:d,minZoom:_,maxZoom:f,nodeOrigin:y,nodeExtent:m,defaultNodes:r,defaultEdges:o,zIndexMode:h}),setNodes:S=>{const{nodeLookup:k,parentLookup:I,nodeOrigin:M,elevateNodesOnSelect:E,fitViewQueued:P,zIndexMode:C}=w(),R=dp(S,k,I,{nodeOrigin:M,nodeExtent:m,elevateNodesOnSelect:E,checkEquality:!0,zIndexMode:C});P&&R?(b(),x({nodes:S,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):x({nodes:S,nodesInitialized:R})},setEdges:S=>{const{connectionLookup:k,edgeLookup:I}=w();vy(k,I,S),x({edges:S})},setDefaultNodesAndEdges:(S,k)=>{if(S){const{setNodes:I}=w();I(S),x({hasDefaultNodes:!0})}if(k){const{setEdges:I}=w();I(k),x({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:k,nodeLookup:I,parentLookup:M,domNode:E,nodeOrigin:P,nodeExtent:C,debug:R,fitViewQueued:j,zIndexMode:V}=w(),{changes:Q,updatedInternals:z}=a2(S,I,M,E,P,C,V);z&&(i2(I,M,{nodeOrigin:P,nodeExtent:C,zIndexMode:V}),j?(b(),x({fitViewQueued:!1,fitViewOptions:void 0})):x({}),(Q==null?void 0:Q.length)>0&&(R&&console.log("React Flow: trigger node changes",Q),k==null||k(Q)))},updateNodePositions:(S,k=!1)=>{const I=[];let M=[];const{nodeLookup:E,triggerNodeChanges:P,connection:C,updateConnection:R,onNodesChangeMiddlewareMap:j}=w();for(const[V,Q]of S){const z=E.get(V),L=!!(z!=null&&z.expandParent&&(z!=null&&z.parentId)&&(Q!=null&&Q.position)),ie={id:V,type:"position",position:L?{x:Math.max(0,Q.position.x),y:Math.max(0,Q.position.y)}:Q.position,dragging:k};if(z&&C.inProgress&&C.fromNode.id===z.id){const T=So(z,C.fromHandle,Be.Left,!0);R({...C,from:T})}L&&z.parentId&&I.push({id:V,parentId:z.parentId,rect:{...Q.internals.positionAbsolute,width:Q.measured.width??0,height:Q.measured.height??0}}),M.push(ie)}if(I.length>0){const{parentLookup:V,nodeOrigin:Q}=w(),z=Xp(I,E,V,Q);M.push(...z)}for(const V of j.values())M=V(M);P(M)},triggerNodeChanges:S=>{const{onNodesChange:k,setNodes:I,nodes:M,hasDefaultNodes:E,debug:P}=w();if(S!=null&&S.length){if(E){const C=Vy(S,M);I(C)}P&&console.log("React Flow: trigger node changes",S),k==null||k(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:k,setEdges:I,edges:M,hasDefaultEdges:E,debug:P}=w();if(S!=null&&S.length){if(E){const C=Fy(S,M);I(C)}P&&console.log("React Flow: trigger edge changes",S),k==null||k(S)}},addSelectedNodes:S=>{const{multiSelectionActive:k,edgeLookup:I,nodeLookup:M,triggerNodeChanges:E,triggerEdgeChanges:P}=w();if(k){const C=S.map(R=>yo(R,!0));E(C);return}E(ra(M,new Set([...S]),!0)),P(ra(I))},addSelectedEdges:S=>{const{multiSelectionActive:k,edgeLookup:I,nodeLookup:M,triggerNodeChanges:E,triggerEdgeChanges:P}=w();if(k){const C=S.map(R=>yo(R,!0));P(C);return}P(ra(I,new Set([...S]))),E(ra(M,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:k}={})=>{const{edges:I,nodes:M,nodeLookup:E,triggerNodeChanges:P,triggerEdgeChanges:C}=w(),R=S||M,j=k||I,V=R.map(z=>{const L=E.get(z.id);return L&&(L.selected=!1),yo(z.id,!1)}),Q=j.map(z=>yo(z.id,!1));P(V),C(Q)},setMinZoom:S=>{const{panZoom:k,maxZoom:I}=w();k==null||k.setScaleExtent([S,I]),x({minZoom:S})},setMaxZoom:S=>{const{panZoom:k,minZoom:I}=w();k==null||k.setScaleExtent([I,S]),x({maxZoom:S})},setTranslateExtent:S=>{var k;(k=w().panZoom)==null||k.setTranslateExtent(S),x({translateExtent:S})},resetSelectedElements:()=>{const{edges:S,nodes:k,triggerNodeChanges:I,triggerEdgeChanges:M,elementsSelectable:E}=w();if(!E)return;const P=k.reduce((R,j)=>j.selected?[...R,yo(j.id,!1)]:R,[]),C=S.reduce((R,j)=>j.selected?[...R,yo(j.id,!1)]:R,[]);I(P),M(C)},setNodeExtent:S=>{const{nodes:k,nodeLookup:I,parentLookup:M,nodeOrigin:E,elevateNodesOnSelect:P,nodeExtent:C,zIndexMode:R}=w();S[0][0]===C[0][0]&&S[0][1]===C[0][1]&&S[1][0]===C[1][0]&&S[1][1]===C[1][1]||(dp(k,I,M,{nodeOrigin:E,nodeExtent:S,elevateNodesOnSelect:P,checkEquality:!1,zIndexMode:R}),x({nodeExtent:S}))},panBy:S=>{const{transform:k,width:I,height:M,panZoom:E,translateExtent:P}=w();return s2({delta:S,panZoom:E,transform:k,translateExtent:P,width:I,height:M})},setCenter:async(S,k,I)=>{const{width:M,height:E,maxZoom:P,panZoom:C}=w();if(!C)return Promise.resolve(!1);const R=typeof(I==null?void 0:I.zoom)<"u"?I.zoom:P;return await C.setViewport({x:M/2-S*R,y:E/2-k*R,zoom:R},{duration:I==null?void 0:I.duration,ease:I==null?void 0:I.ease,interpolate:I==null?void 0:I.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{x({connection:{...ry}})},updateConnection:S=>{x({connection:S})},reset:()=>x({...Mh()})}},Object.is);function qS({initialNodes:e,initialEdges:i,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:_,fitView:f,nodeOrigin:y,nodeExtent:m,zIndexMode:h,children:x}){const[w]=F.useState(()=>CS({nodes:e,edges:i,defaultNodes:r,defaultEdges:o,width:a,height:c,fitView:f,minZoom:u,maxZoom:d,fitViewOptions:_,nodeOrigin:y,nodeExtent:m,zIndexMode:h}));return l.jsx(W2,{value:w,children:l.jsx(mk,{children:x})})}function ES({children:e,nodes:i,edges:r,defaultNodes:o,defaultEdges:a,width:c,height:u,fitView:d,fitViewOptions:_,minZoom:f,maxZoom:y,nodeOrigin:m,nodeExtent:h,zIndexMode:x}){return F.useContext(Lu)?l.jsx(l.Fragment,{children:e}):l.jsx(qS,{initialNodes:i,initialEdges:r,defaultNodes:o,defaultEdges:a,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:_,initialMinZoom:f,initialMaxZoom:y,nodeOrigin:m,nodeExtent:h,zIndexMode:x,children:e})}const IS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function NS({nodes:e,edges:i,defaultNodes:r,defaultEdges:o,className:a,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:_,onInit:f,onMove:y,onMoveStart:m,onMoveEnd:h,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:S,onClickConnectEnd:k,onNodeMouseEnter:I,onNodeMouseMove:M,onNodeMouseLeave:E,onNodeContextMenu:P,onNodeDoubleClick:C,onNodeDragStart:R,onNodeDrag:j,onNodeDragStop:V,onNodesDelete:Q,onEdgesDelete:z,onDelete:L,onSelectionChange:ie,onSelectionDragStart:T,onSelectionDrag:X,onSelectionDragStop:G,onSelectionContextMenu:Z,onSelectionStart:H,onSelectionEnd:U,onBeforeDelete:te,connectionMode:B,connectionLineType:Y=Dr.Bezier,connectionLineStyle:pe,connectionLineComponent:ue,connectionLineContainerStyle:he,deleteKeyCode:be="Backspace",selectionKeyCode:Se="Shift",selectionOnDrag:ce=!1,selectionMode:qe=ys.Full,panActivationKeyCode:Fe="Space",multiSelectionKeyCode:Le=xs()?"Meta":"Control",zoomActivationKeyCode:Ie=xs()?"Meta":"Control",snapToGrid:Re,snapGrid:ze,onlyRenderVisibleElements:Ye=!1,selectNodesOnDrag:Ge,nodesDraggable:at,autoPanOnNodeFocus:bt,nodesConnectable:xt,nodesFocusable:Et,nodeOrigin:Dt=Ty,edgesFocusable:hi,edgesReconnectable:Ci,elementsSelectable:Bn=!0,defaultViewport:Oi=rk,minZoom:Zt=.5,maxZoom:yi=2,translateExtent:_t=hs,preventScrolling:Sn=!0,nodeExtent:zt,defaultMarkerColor:Mn="#b1b1b7",zoomOnScroll:Bi=!0,zoomOnPinch:An=!0,panOnScroll:Xe=!1,panOnScrollSpeed:pr=.5,panOnScrollMode:Mt=vo.Free,zoomOnDoubleClick:Ji=!0,panOnDrag:de=!0,onPaneClick:nt,onPaneMouseEnter:qi,onPaneMouseMove:Ei,onPaneMouseLeave:oi,onPaneScroll:$n,onPaneContextMenu:Cn,paneClickDistance:It=1,nodeClickDistance:Ut=0,children:Gt,onReconnect:st,onReconnectStart:Co,onReconnectEnd:mt,onEdgeContextMenu:Ar,onEdgeDoubleClick:Lt,onEdgeMouseEnter:Ai,onEdgeMouseMove:Pt,onEdgeMouseLeave:Ot,reconnectRadius:Bt=10,onNodesChange:Yt,onEdgesChange:ai,noDragClassName:si="nodrag",noWheelClassName:li="nowheel",noPanClassName:kt="nopan",fitView:en,fitViewOptions:ui,connectOnClick:$r,attributionPosition:Hr,proOptions:Jt,defaultEdgeOptions:_r,elevateNodesOnSelect:mr=!0,elevateEdgesOnSelect:Wr=!1,disableKeyboardA11y:Hn=!1,autoPanOnConnect:lt,autoPanOnNodeDrag:Wn,autoPanSpeed:tn,connectionRadius:Un,isValidConnection:nn,onError:ut,style:$i,id:qn,nodeDragThreshold:At,connectionDragThreshold:qo,viewport:ci,onViewportChange:Gn,width:rn,height:va,colorMode:Ur="light",debug:fr,onScroll:gi,ariaLabelConfig:on,zIndexMode:Eo="basic",...wa},Kt){const hr=qn||"1",Ii=lk(Ur),Hi=F.useCallback(Gr=>{Gr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),gi==null||gi(Gr)},[gi]);return l.jsx("div",{"data-testid":"rf__wrapper",...wa,onScroll:Hi,style:{...$i,...IS},ref:Kt,className:jt(["react-flow",a,Ii]),id:qn,role:"application",children:l.jsxs(ES,{nodes:e,edges:i,width:rn,height:va,fitView:en,fitViewOptions:ui,minZoom:Zt,maxZoom:yi,nodeOrigin:Dt,nodeExtent:zt,zIndexMode:Eo,children:[l.jsx(MS,{onInit:f,onNodeClick:d,onEdgeClick:_,onNodeMouseEnter:I,onNodeMouseMove:M,onNodeMouseLeave:E,onNodeContextMenu:P,onNodeDoubleClick:C,nodeTypes:c,edgeTypes:u,connectionLineType:Y,connectionLineStyle:pe,connectionLineComponent:ue,connectionLineContainerStyle:he,selectionKeyCode:Se,selectionOnDrag:ce,selectionMode:qe,deleteKeyCode:be,multiSelectionKeyCode:Le,panActivationKeyCode:Fe,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ye,defaultViewport:Oi,translateExtent:_t,minZoom:Zt,maxZoom:yi,preventScrolling:Sn,zoomOnScroll:Bi,zoomOnPinch:An,zoomOnDoubleClick:Ji,panOnScroll:Xe,panOnScrollSpeed:pr,panOnScrollMode:Mt,panOnDrag:de,onPaneClick:nt,onPaneMouseEnter:qi,onPaneMouseMove:Ei,onPaneMouseLeave:oi,onPaneScroll:$n,onPaneContextMenu:Cn,paneClickDistance:It,nodeClickDistance:Ut,onSelectionContextMenu:Z,onSelectionStart:H,onSelectionEnd:U,onReconnect:st,onReconnectStart:Co,onReconnectEnd:mt,onEdgeContextMenu:Ar,onEdgeDoubleClick:Lt,onEdgeMouseEnter:Ai,onEdgeMouseMove:Pt,onEdgeMouseLeave:Ot,reconnectRadius:Bt,defaultMarkerColor:Mn,noDragClassName:si,noWheelClassName:li,noPanClassName:kt,rfId:hr,disableKeyboardA11y:Hn,nodeExtent:zt,viewport:ci,onViewportChange:Gn}),l.jsx(sk,{nodes:e,edges:i,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:S,onClickConnectEnd:k,nodesDraggable:at,autoPanOnNodeFocus:bt,nodesConnectable:xt,nodesFocusable:Et,edgesFocusable:hi,edgesReconnectable:Ci,elementsSelectable:Bn,elevateNodesOnSelect:mr,elevateEdgesOnSelect:Wr,minZoom:Zt,maxZoom:yi,nodeExtent:zt,onNodesChange:Yt,onEdgesChange:ai,snapToGrid:Re,snapGrid:ze,connectionMode:B,translateExtent:_t,connectOnClick:$r,defaultEdgeOptions:_r,fitView:en,fitViewOptions:ui,onNodesDelete:Q,onEdgesDelete:z,onDelete:L,onNodeDragStart:R,onNodeDrag:j,onNodeDragStop:V,onSelectionDrag:X,onSelectionDragStart:T,onSelectionDragStop:G,onMove:y,onMoveStart:m,onMoveEnd:h,noPanClassName:kt,nodeOrigin:Dt,rfId:hr,autoPanOnConnect:lt,autoPanOnNodeDrag:Wn,autoPanSpeed:tn,onError:ut,connectionRadius:Un,isValidConnection:nn,selectNodesOnDrag:Ge,nodeDragThreshold:At,connectionDragThreshold:qo,onBeforeDelete:te,debug:fr,ariaLabelConfig:on,zIndexMode:Eo}),l.jsx(nk,{onSelectionChange:ie}),Gt,l.jsx(Z2,{proOptions:Jt,position:Hr}),l.jsx(X2,{rfId:hr,disableKeyboardA11y:Hn})]})})}var jS=Dy(NS);function PS(e){const[i,r]=F.useState(e),o=F.useCallback(a=>r(c=>Vy(a,c)),[]);return[i,r,o]}function TS(e){const[i,r]=F.useState(e),o=F.useCallback(a=>r(c=>Fy(a,c)),[]);return[i,r,o]}function RS({dimensions:e,lineWidth:i,variant:r,className:o}){return l.jsx("path",{strokeWidth:i,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:jt(["react-flow__background-pattern",r,o])})}function VS({radius:e,className:i}){return l.jsx("circle",{cx:e,cy:e,r:e,className:jt(["react-flow__background-pattern","dots",i])})}var Or;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Or||(Or={}));const FS={[Or.Dots]:1,[Or.Lines]:1,[Or.Cross]:6},DS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function sg({id:e,variant:i=Or.Dots,gap:r=20,size:o,lineWidth:a=1,offset:c=0,color:u,bgColor:d,style:_,className:f,patternClassName:y}){const m=F.useRef(null),{transform:h,patternId:x}=Ze(DS,yt),w=o||FS[i],b=i===Or.Dots,S=i===Or.Cross,k=Array.isArray(r)?r:[r,r],I=[k[0]*h[2]||1,k[1]*h[2]||1],M=w*h[2],E=Array.isArray(c)?c:[c,c],P=S?[M,M]:I,C=[E[0]*h[2]||1+P[0]/2,E[1]*h[2]||1+P[1]/2],R=`${x}${e||""}`;return l.jsxs("svg",{className:jt(["react-flow__background",f]),style:{..._,...Ou,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:m,"data-testid":"rf__background",children:[l.jsx("pattern",{id:R,x:h[0]%I[0],y:h[1]%I[1],width:I[0],height:I[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:b?l.jsx(VS,{radius:M/2,className:y}):l.jsx(RS,{dimensions:P,lineWidth:a,variant:i,className:y})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}sg.displayName="Background";const zS=F.memo(sg);function LS(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function OS(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function BS(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function AS(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function $S(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Gl({children:e,className:i,...r}){return l.jsx("button",{type:"button",className:jt(["react-flow__controls-button",i]),...r,children:e})}const HS=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function lg({style:e,showZoom:i=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:a,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:_,className:f,children:y,position:m="bottom-left",orientation:h="vertical","aria-label":x}){const w=gt(),{isInteractive:b,minZoomReached:S,maxZoomReached:k,ariaLabelConfig:I}=Ze(HS,yt),{zoomIn:M,zoomOut:E,fitView:P}=Zp(),C=()=>{M(),c==null||c()},R=()=>{E(),u==null||u()},j=()=>{P(a),d==null||d()},V=()=>{w.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),_==null||_(!b)},Q=h==="horizontal"?"horizontal":"vertical";return l.jsxs(fa,{className:jt(["react-flow__controls",Q,f]),position:m,style:e,"data-testid":"rf__controls","aria-label":x??I["controls.ariaLabel"],children:[i&&l.jsxs(l.Fragment,{children:[l.jsx(Gl,{onClick:C,className:"react-flow__controls-zoomin",title:I["controls.zoomIn.ariaLabel"],"aria-label":I["controls.zoomIn.ariaLabel"],disabled:k,children:l.jsx(LS,{})}),l.jsx(Gl,{onClick:R,className:"react-flow__controls-zoomout",title:I["controls.zoomOut.ariaLabel"],"aria-label":I["controls.zoomOut.ariaLabel"],disabled:S,children:l.jsx(OS,{})})]}),r&&l.jsx(Gl,{className:"react-flow__controls-fitview",onClick:j,title:I["controls.fitView.ariaLabel"],"aria-label":I["controls.fitView.ariaLabel"],children:l.jsx(BS,{})}),o&&l.jsx(Gl,{className:"react-flow__controls-interactive",onClick:V,title:I["controls.interactive.ariaLabel"],"aria-label":I["controls.interactive.ariaLabel"],children:b?l.jsx($S,{}):l.jsx(AS,{})}),y]})}lg.displayName="Controls";const WS=F.memo(lg);function US({id:e,x:i,y:r,width:o,height:a,style:c,color:u,strokeColor:d,strokeWidth:_,className:f,borderRadius:y,shapeRendering:m,selected:h,onClick:x}){const{background:w,backgroundColor:b}=c||{},S=u||w||b;return l.jsx("rect",{className:jt(["react-flow__minimap-node",{selected:h},f]),x:i,y:r,rx:y,ry:y,width:o,height:a,style:{fill:S,stroke:d,strokeWidth:_},shapeRendering:m,onClick:x?k=>x(k,e):void 0})}const GS=F.memo(US),YS=e=>e.nodes.map(i=>i.id),zd=e=>e instanceof Function?e:()=>e;function KS({nodeStrokeColor:e,nodeColor:i,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:c=GS,onClick:u}){const d=Ze(YS,yt),_=zd(i),f=zd(e),y=zd(r),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:d.map(h=>l.jsx(XS,{id:h,nodeColorFunc:_,nodeStrokeColorFunc:f,nodeClassNameFunc:y,nodeBorderRadius:o,nodeStrokeWidth:a,NodeComponent:c,onClick:u,shapeRendering:m},h))})}function QS({id:e,nodeColorFunc:i,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:a,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:_}){const{node:f,x:y,y:m,width:h,height:x}=Ze(w=>{const{internals:b}=w.nodeLookup.get(e),S=b.userNode,{x:k,y:I}=b.positionAbsolute,{width:M,height:E}=dr(S);return{node:S,x:k,y:I,width:M,height:E}},yt);return!f||f.hidden||!dy(f)?null:l.jsx(d,{x:y,y:m,width:h,height:x,style:f.style,selected:!!f.selected,className:o(f),color:i(f),borderRadius:a,strokeColor:r(f),strokeWidth:c,shapeRendering:u,onClick:_,id:f.id})}const XS=F.memo(QS);var ZS=F.memo(KS);const JS=200,eM=150,tM=e=>!e.hidden,iM=e=>{const i={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:i,boundingRect:e.nodeLookup.size>0?cy(js(e.nodeLookup,{filter:tM}),i):i,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},nM="react-flow__minimap-desc";function ug({style:e,className:i,nodeStrokeColor:r,nodeColor:o,nodeClassName:a="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:_,maskColor:f,maskStrokeColor:y,maskStrokeWidth:m,position:h="bottom-right",onClick:x,onNodeClick:w,pannable:b=!1,zoomable:S=!1,ariaLabel:k,inversePan:I,zoomStep:M=1,offsetScale:E=5}){const P=gt(),C=F.useRef(null),{boundingRect:R,viewBB:j,rfId:V,panZoom:Q,translateExtent:z,flowWidth:L,flowHeight:ie,ariaLabelConfig:T}=Ze(iM,yt),X=(e==null?void 0:e.width)??JS,G=(e==null?void 0:e.height)??eM,Z=R.width/X,H=R.height/G,U=Math.max(Z,H),te=U*X,B=U*G,Y=E*U,pe=R.x-(te-R.width)/2-Y,ue=R.y-(B-R.height)/2-Y,he=te+Y*2,be=B+Y*2,Se=`${nM}-${V}`,ce=F.useRef(0),qe=F.useRef();ce.current=U,F.useEffect(()=>{if(C.current&&Q)return qe.current=h2({domNode:C.current,panZoom:Q,getTransform:()=>P.getState().transform,getViewScale:()=>ce.current}),()=>{var Re;(Re=qe.current)==null||Re.destroy()}},[Q]),F.useEffect(()=>{var Re;(Re=qe.current)==null||Re.update({translateExtent:z,width:L,height:ie,inversePan:I,pannable:b,zoomStep:M,zoomable:S})},[b,S,I,M,z,L,ie]);const Fe=x?Re=>{var Ge;const[ze,Ye]=((Ge=qe.current)==null?void 0:Ge.pointer(Re))||[0,0];x(Re,{x:ze,y:Ye})}:void 0,Le=w?F.useCallback((Re,ze)=>{const Ye=P.getState().nodeLookup.get(ze).internals.userNode;w(Re,Ye)},[]):void 0,Ie=k??T["minimap.ariaLabel"];return l.jsx(fa,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof _=="string"?_:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*U:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:jt(["react-flow__minimap",i]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:X,height:G,viewBox:`${pe} ${ue} ${he} ${be}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Se,ref:C,onClick:Fe,children:[Ie&&l.jsx("title",{id:Se,children:Ie}),l.jsx(ZS,{onClick:Le,nodeColor:o,nodeStrokeColor:r,nodeBorderRadius:c,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:d}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${pe-Y},${ue-Y}h${he+Y*2}v${be+Y*2}h${-he-Y*2}z
        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ug.displayName="MiniMap";const rM=F.memo(ug),oM=e=>i=>e?`${Math.max(1/i.transform[2],1)}`:void 0,aM={[ma.Line]:"right",[ma.Handle]:"bottom-right"};function sM({nodeId:e,position:i,variant:r=ma.Handle,className:o,style:a=void 0,children:c,color:u,minWidth:d=10,minHeight:_=10,maxWidth:f=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:h,autoScale:x=!0,shouldResize:w,onResizeStart:b,onResize:S,onResizeEnd:k}){const I=By(),M=typeof e=="string"?e:I,E=gt(),P=F.useRef(null),C=r===ma.Handle,R=Ze(F.useCallback(oM(C&&x),[C,x]),yt),j=F.useRef(null),V=i??aM[r];F.useEffect(()=>{if(!(!P.current||!M))return j.current||(j.current=N2({domNode:P.current,nodeId:M,getStoreItems:()=>{const{nodeLookup:z,transform:L,snapGrid:ie,snapToGrid:T,nodeOrigin:X,domNode:G}=E.getState();return{nodeLookup:z,transform:L,snapGrid:ie,snapToGrid:T,nodeOrigin:X,paneDomNode:G}},onChange:(z,L)=>{const{triggerNodeChanges:ie,nodeLookup:T,parentLookup:X,nodeOrigin:G}=E.getState(),Z=[],H={x:z.x,y:z.y},U=T.get(M);if(U&&U.expandParent&&U.parentId){const te=U.origin??G,B=z.width??U.measured.width??0,Y=z.height??U.measured.height??0,pe={id:U.id,parentId:U.parentId,rect:{width:B,height:Y,...py({x:z.x??U.position.x,y:z.y??U.position.y},{width:B,height:Y},U.parentId,T,te)}},ue=Xp([pe],T,X,G);Z.push(...ue),H.x=z.x?Math.max(te[0]*B,z.x):void 0,H.y=z.y?Math.max(te[1]*Y,z.y):void 0}if(H.x!==void 0&&H.y!==void 0){const te={id:M,type:"position",position:{...H}};Z.push(te)}if(z.width!==void 0&&z.height!==void 0){const B={id:M,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};Z.push(B)}for(const te of L){const B={...te,type:"position"};Z.push(B)}ie(Z)},onEnd:({width:z,height:L})=>{const ie={id:M,type:"dimensions",resizing:!1,dimensions:{width:z,height:L}};E.getState().triggerNodeChanges([ie])}})),j.current.update({controlPosition:V,boundaries:{minWidth:d,minHeight:_,maxWidth:f,maxHeight:y},keepAspectRatio:m,resizeDirection:h,onResizeStart:b,onResize:S,onResizeEnd:k,shouldResize:w}),()=>{var z;(z=j.current)==null||z.destroy()}},[V,d,_,f,y,m,b,S,k,w]);const Q=V.split("-");return l.jsx("div",{className:jt(["react-flow__resize-control","nodrag",...Q,r,o]),ref:P,style:{...a,scale:R,...u&&{[C?"backgroundColor":"borderColor"]:u}},children:c})}F.memo(sM);const vu=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),wu=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),bu=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Br={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},Au=(e,i)=>{try{const r=localStorage.getItem(e);return r?JSON.parse(r):i}catch(r){return console.error(`Error loading ${e}:`,r),i}},lM=(e,i)=>{try{localStorage.setItem(e,JSON.stringify(i))}catch(r){console.error(`Error saving ${e}:`,r)}};let Vi=Au(Br.PRODUCTS,vu),hn=Au(Br.MACHINES,wu),gn=Au(Br.RECIPES,bu);const ht=e=>Vi.find(i=>i.id===e),pt=e=>hn.find(i=>i.id===e),e_=(e,i,r)=>{e.length=0,e.push(...i),lM(r,e)},mp=e=>e_(Vi,e,Br.PRODUCTS),fp=e=>e_(hn,e,Br.MACHINES),hp=e=>e_(gn,e,Br.RECIPES),uM=()=>Au(Br.CANVAS_STATE,null),cM=()=>localStorage.removeItem(Br.CANVAS_STATE),dM=()=>{mp(vu),fp(wu),hp(bu),cM()},t_=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),pM=e=>e==="p_variableproduct",ar=(e,i,r)=>{if(pM(e))return r==="item"?"Variable Item":r==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const o=i(e);return o?o.name:"Unknown Product"},_M=e=>t_(e)?"Variable":typeof e=="number"?e.toString():e,ts=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,mM=e=>{if(t_(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:ts(e.drilling),idle:ts(e.idle)};if("max"in e&&"average"in e)return{max:ts(e.max),average:ts(e.average)}}return ts(e)},fM=e=>t_(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,Ch=(e,i)=>{const r=_M(e.quantity),o=ar(e.product_id,i);return`${r}x ${o}`},hM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],cg=e=>hM.includes(e),Fi=18,Lr=18,vn=100,ri={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},i_=(e,i={},r=Fi,o=null,a=null)=>{const c=ri[e];if(!c)return r;switch(c.type){case"fixed":return c.outputTemp;case"additive":return Math.min(r+c.tempIncrease,c.maxTemp);case"configurable":return i.temperature||c.tempOptions[0].temp;case"product_dependent":return c.temps[o]||c.temps.p_water||400;case"passthrough":return r;case"boiler":const u=a??Lr,d=i.heatLoss??c.defaultHeatLoss;return u-d;default:return r}},qh=(e,i)=>{const r=ri[e];if(!r||r.type!=="configurable")return null;const o=r.tempOptions.find(a=>a.temp===i);return o?o.power:null},ku=e=>e==null?"":`${Math.round(e)}C`,yM=e=>{const i=ri[e];return i&&i.type==="configurable"},gM=e=>{const i=ri[e];return i&&i.type==="boiler"},xM=e=>{const i=ri[e];return i?i.type==="configurable"?{temperature:i.tempOptions[0].temp}:i.type==="boiler"?{heatLoss:i.defaultHeatLoss}:{}:{}},vM=e=>e<=0?1/0:e>=400?2:800/e,wM=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,bM=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,kM=e=>{if(e<=0)return 30;const i=2973/11,r=4e3/11;return e<=i?30+-165/1982*e:e<r?-99/2054*e+21081/1027:3},SM=e=>e<=0?1/0:64/(.176*Math.abs(e)),Zi={m_industrial_drill:{type:"steam_input",formula:vM},m_alloyer:{type:"steam_input",formula:wM},m_coal_liquefaction_plant:{type:"steam_input",formula:bM},m_steam_cracking_plant:{type:"steam_input",formula:kM},m_water_treatment_plant:{type:"steam_input",formula:SM}},zi=e=>e in Zi,Fn=(e,i,r)=>{const o=Zi[e];if(!o)return r;const a=o.formula(i);return isFinite(a)?a:r},lr=e=>!e||!e.inputs?!1:e.inputs.some(i=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(i.product_id)),Eh=(e,i)=>{const r=new Map,o=new Map;Object.keys(e.nodes).forEach(d=>{const _=e.nodes[d];_&&(_.inputs.forEach((f,y)=>{o.set(`${d}:${y}`,Fi)}),_.outputs.forEach((f,y)=>{r.set(`${d}:${y}`,Fi)}))});const{sorted:a,cycleNodes:c}=CM(e),u=(d,_=!1)=>{const f=e.nodes[d];if(!f)return!1;const y={id:f.recipe.machine_id},m=ri[y.id];let h=!1;return f.inputs.forEach((x,w)=>{const b=MM(e,i,d,w,r,!_),S=o.get(`${d}:${w}`),k=b!==null?b:S;Math.abs(k-S)>.01&&(o.set(`${d}:${w}`,k),h=!0)}),f.outputs.forEach((x,w)=>{var S,k;let b=Fi;if(m){if(m.type==="fixed")b=m.outputTemp;else if(m.type==="additive"){if(f.inputs.length>0){const I=o.get(`${d}:0`)||Fi;I>m.maxTemp?b=I:b=Math.min(I+m.tempIncrease,m.maxTemp)}}else if(m.type==="configurable")b=((S=f.recipe.temperatureSettings)==null?void 0:S.temperature)||m.tempOptions[0].temp;else if(m.type==="product_dependent"){if(f.inputs.length>0){const I=f.inputs[0].productId;b=m.temps[I]||m.temps.p_water||400}}else if(m.type==="boiler"){if(f.inputs.length>=2){const I=o.get(`${d}:1`)||Fi,M=((k=f.recipe.temperatureSettings)==null?void 0:k.heatLoss)||m.defaultHeatLoss,E=I-M;w===0?b=E*.85:w===1&&(E<m.minSteamTemp?b=Math.max(E,Fi):b=E)}}else if(m.type==="passthrough"){const I=f.inputs.findIndex(M=>M.productId===m.inputProduct);I>=0&&(b=o.get(`${d}:${I}`)||Fi)}}r.set(`${d}:${w}`,b)}),h};if(a.forEach(d=>{c.has(d)||u(d)}),c.size>0){let _=0,f=!0;const y=a.filter(h=>c.has(h));for(;f&&_<100;)f=!1,y.forEach(h=>{u(h,!0)&&(f=!0)}),_++;const m=new Set;a.forEach(h=>{if(c.has(h))return;const x=e.nodes[h];x&&x.inputs.forEach((w,b)=>{const S=e.products[w.productId];if(!S)return;S.connections.filter(I=>I.targetNodeId===h&&I.targetInputIndex===b).forEach(I=>{c.has(I.sourceNodeId)&&m.add(h)})})}),m.forEach(h=>{u(h,!1)})}return{outputTemperatures:r,inputTemperatures:o}},MM=(e,i,r,o,a,c=!0)=>{const u=e.products[e.nodes[r].inputs[o].productId];if(!u)return c?Fi:null;const d=u.connections.filter(m=>m.targetNodeId===r&&m.targetInputIndex===o);if(d.length===0)return c?Fi:null;const _=[];if(d.forEach(m=>{var x;const h=a.get(`${m.sourceNodeId}:${m.sourceOutputIndex}`);if(h!=null){const w=((x=i.byConnection[m.id])==null?void 0:x.flowRate)||0;_.push({temp:h,flow:w})}}),_.length===0)return c?Fi:null;const f=_.reduce((m,h)=>m+h.flow,0);if(f>0){const m=_.reduce((h,x)=>h+x.temp*x.flow,0);return Math.round(m/f*1e10)/1e10}const y=_.reduce((m,h)=>m+h.temp,0);return Math.round(y/_.length*1e10)/1e10},CM=e=>{const i=[],r=new Set,o=new Set,a=new Set,c=(u,d=[])=>{if(r.has(u))return;if(o.has(u)){const y=d.indexOf(u);for(let m=y;m<d.length;m++)a.add(d[m]);a.add(u);return}o.add(u);const _=[...d,u],f=e.nodes[u];f&&f.inputs.forEach((y,m)=>{const h=e.products[y.productId];h&&h.connections.filter(w=>w.targetNodeId===u&&w.targetInputIndex===m).forEach(w=>{r.has(w.sourceNodeId)||c(w.sourceNodeId,_)})}),o.delete(u),r.add(u),i.push(u)};return Object.keys(e.nodes).forEach(u=>{r.has(u)||c(u)}),{sorted:i,cycleNodes:a}},yp=(e,i,r)=>e.map(o=>{if(!r.nodes[o.id])return o;const c={id:o.data.recipe.machine_id},u=ri[c.id],d=zi(c.id),_=o.data.recipe.outputs.map((y,m)=>{const h=i.outputTemperatures.get(`${o.id}:${m}`);if(h!=null){if((u==null?void 0:u.type)==="boiler"&&y.product_id==="p_steam"){const x=u.minSteamTemp||100;return h<x?{...y,temperature:h,quantity:0,originalQuantity:y.originalQuantity||y.quantity}:{...y,temperature:h,quantity:y.originalQuantity||y.quantity,originalQuantity:y.originalQuantity||y.quantity}}return{...y,temperature:h}}return y});let f={...o.data.recipe,outputs:_};if(d){const y=Zi[c.id];if((y==null?void 0:y.type)==="steam_input"){const m=o.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(m>=0){const h=i.inputTemperatures.get(`${o.id}:${m}`);if(h!=null&&(f={...f,tempDependentInputTemp:h},c.id==="m_water_treatment_plant")){const w=90*Fn(c.id,h,1);f={...f,inputs:f.inputs.map((b,S)=>S===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(b.product_id)?{...b,quantity:w,originalQuantity:90}:b)}}}}}return{...o,data:{...o.data,recipe:f}}}),gp=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],xp=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],qM={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},EM=12,IM=3.1,NM=.1,jM=.02,PM=2,bs={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},TM=()=>Object.keys(bs).map(e=>parseInt(e)).sort((e,i)=>e-i),RM=(e,i)=>{switch(e){case"copper":return i/150;case"iron":return .04*Math.pow(i,.25);case"steel":return .02*Math.pow(i,.25);case"tungsten_carbide":return .005*Math.pow(i,.25);default:return 1}},VM=(e,i)=>{switch(e){case"none":return Math.pow(i,2)/9e5;case"water":return Math.pow(i,2)/1875e3;case"acetic_acid":return Math.pow(i,.8)/450;case"sulfuric_acid":return .09*Math.pow(i,.25);case"hydrochloric_acid":return i<6e3?13e-6*Math.pow(i,1.5-5e-5*i)+4.3875*Math.pow(10,-13.3)*Math.pow(i,3):.09*Math.pow(i,.25);default:return 1}},Mo=(e,i,r,o)=>{if(!e||!o)return null;const a=RM(e,o),c=VM(i||"none",o),u=r?1.1:1,d=.5*a*c*u,_=Math.ceil(100/d),f=EM,y=r?100:50,m=2*o/y,h=_+f+m,x=_/h;return{deteriorationRate:d,lifeTime:_,replacementTime:f,travelTime:m,totalCycleTime:h,dutyCycle:x,drillingPower:IM,idlePower:NM,pollution:jM}},dg=(e,i,r,o)=>{const a=[],c=Mo(e,i,r,o);if(!c){if(e){const u=gp.find(d=>d.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(i&&i!=="none"){const u=xp.find(d=>d.id===i);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return r&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=gp.find(d=>d.id===e);if(u){const d=1/c.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(d.toFixed(6))})}}if(i&&i!=="none"){const u=xp.find(d=>d.id===i);if(u!=null&&u.product_id){const _=(qM[i]||0)*c.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(_.toFixed(6))})}}return r&&a.push({product_id:"p_machine_oil",quantity:PM}),a},pg=(e,i,r,o)=>{if(!o)return[];const a=bs[o];if(!a)return[];const c=Mo(e,i,r,o);if(!c)return a.map(d=>({...d,quantity:"Variable"}));const u=r?1.1:1;return a.map(d=>{const _=d.quantity*u*c.dutyCycle;return{product_id:d.product_id,quantity:parseFloat(_.toFixed(4))}})},Ih={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},Nh=4,FM=20,DM=4,jh=5e5,zM=.3,LM=10,Yl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},OM=()=>{const e=[];for(let i=1;i<=6;i++){const r=Math.pow(2,i),o=`${r}x Microchip`,a=`p_${r}x_microchip`;e.push({outerStage:1,innerStage:r,innerPower:i,name:o,productId:a})}for(let i=2;i<=8;i++){const a=`${i}x64x Microchip`,c=`p_${i}x64x_microchip`;e.push({outerStage:i,innerStage:64,innerPower:6,name:a,productId:c})}return e},_g=OM(),BM=e=>_g.find(i=>i.productId===e),Rs=(e,i,r=0)=>{const o=BM(e);if(!o)return null;const c=Math.log2(o.innerStage)+(o.outerStage-1)*6,u=Nh*c,d=i?DM:FM,_=r/6,f=c*Nh*(d+_)+LM,y=Yl.logic_plates*c,m=Yl.copper_wires*c,h=Yl.semiconductors*c,x=Yl.gold_wires*c,w=[{product_id:"p_logic_plate",quantity:y},{product_id:"p_copper_wire",quantity:m},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:x}];i&&w.push({product_id:"p_machine_oil",quantity:parseFloat((zM*f).toFixed(6))});const b=[{product_id:e,quantity:1}],S=jh/d,k=jh/(i?.8:4);return{outerStage:o.outerStage,innerStage:o.innerStage,totalStages:c,totalSteps:u,avgStepTime:d,cycleTime:f,inputs:w,outputs:b,avgPowerConsumption:S,maxPowerConsumption:k,logicPlates:y,copperWires:m,semiconductors:h,goldWires:x}},mg=(e,i)=>{const r=Rs(e,i,0);return r?r.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},fg=(e,i)=>{const r=Rs(e,i,0);return r?r.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},Ph={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},vp=11,hg=2,AM=2e5,yg=1,$M=3,gg=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,xg=e=>Math.ceil(e/$M),Su=(e,i,r,o,a,c)=>{if(!e||!i||!r||!o||a!==1)return null;const u=xg(r),d=gg(c),_=r*yg,f=e/d,y=i/vp,m=Math.min(f,y),h=m*hg,x=i*AM/vp;return{trees:e,harvesters:i,sprinklers:r,waterTanks:u,outputs:o,controller:a,growthTime:d,waterConsumption:_,sustainableHarvestRate:f,maxHarvestRate:y,actualHarvestRate:m,logOutput:h,avgPowerConsumption:x,isTreeLimited:f<y}},vg=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*yg}],n_=(e,i,r)=>{if(!e||!i)return[{product_id:"p_oak_log",quantity:"Variable"}];const o=gg(r),a=e/o,c=i/vp,d=Math.min(a,c)*hg;return[{product_id:"p_oak_log",quantity:parseFloat(d.toFixed(6))}]},Th={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},r_=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],wg={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},HM={r_industrial_firebox_07:1},bg=e=>r_.find(i=>i.id===e),Mu=(e,i)=>{const r=wg[e],o=bg(i);if(!r||!o)return null;const a=r/o.energy,c=HM[e]||0,u=a+c,d=1,_=a;return{energyNeeded:r,fuelEnergy:o.energy,waitTime:a,additionalWait:c,cycleTime:u,fuelConsumptionRate:d,fuelPerCycle:_}},wp=(e,i,r)=>{if(r==="r_industrial_firebox_07")return e;const o=Mu(r,i);if(!o)return e;const a=bg(i);if(!a)return e;const c={product_id:a.product_id,quantity:parseFloat(o.fuelPerCycle.toFixed(6))},u=r_.map(_=>_.product_id),d=e.filter(_=>_.product_id!=="p_variableproduct"&&!u.includes(_.product_id));return[c,...d]},kg=e=>e in wg,Sg=(e,i)=>{const o=(e-100)/5;let a=1,c=1;e<100?(a=1+o*.05,c=1+o*.06666666666666667):e>100&&(a=1+o*.05,c=1+o*.1);const d=(i-100)/5;let _=1,f=1;i<100?(_=1+d*-.0625,f=1+d*.05):i>100&&(_=1+d*-.0425,f=1+d*.25);const y=a*_,m=a,h=c+f-1;return{inputMultiplier:y,outputMultiplier:m,powerMultiplier:h}},WM=(e,i,r)=>{const o=Sg(i,r),a=e.inputs.map(d=>({...d,quantity:typeof d.quantity=="number"?parseFloat((d.quantity*o.inputMultiplier).toFixed(6)):d.quantity})),c=e.outputs.map(d=>({...d,quantity:typeof d.quantity=="number"?parseFloat((d.quantity*o.outputMultiplier).toFixed(6)):d.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*o.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:c,power_consumption:u,chemicalPlantSettings:{speedFactor:i,efficiencyFactor:r}}},Fr=7e3,o_=140,a_=70,Mg=1e6,Rh=240,Ld=29.166666666666668,ss=240,Cg=480,su=(e,i)=>{const r=e+i;let o;return r<=ss?o=Ld:r>=Cg?o=Ld/2:o=Ld*ss/r,{cycleTime:o,concreteBlocksPerCycle:o_,leadIngotsPerCycle:a_,totalFlow:r,powerConsumption:Mg}},Cu=(e,i,r,o)=>{const a=Math.min(e,Rh),c=Math.min(i,Rh),u=a+c;let d,_;return u<=ss?(d=Fr,_=Fr):u>=Cg?(d=Fr/2,_=Fr/2):(d=Fr*ss/u,_=Fr*ss/u),[{product_id:r||"p_variableproduct",quantity:d,isAnyProduct:r==="p_any_item"||!r,acceptedType:"item"},{product_id:o||"p_variableproduct",quantity:_,isAnyProduct:o==="p_any_fluid"||!o,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:o_},{product_id:"p_lead_ingot",quantity:a_}]},bp={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:Mg,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Fr,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Fr,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:o_},{product_id:"p_lead_ingot",quantity:a_}],outputs:[],isWasteFacility:!0},kp=15,UM=2,GM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],ls=(e,i=null)=>{let r=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const c=i&&i[a]!==void 0?i[a]:o.quantity||0;GM.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*c:r+=.0216*c}),r},Sp=e=>{const i=[];for(let r=0;r<UM;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";i.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:kp})}return i},Mp={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:kp},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:kp}],outputs:[],isLiquidDump:!0},qg=15,Eg=8,YM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],us=(e,i=null)=>{let r=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const c=i&&i[a]!==void 0?i[a]:o.quantity||0;YM.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*c:r+=.0216*c}),r},Cp=e=>{const i=[];for(let r=0;r<Eg;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";i.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:qg})}return i},qp={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(Eg).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:qg})),outputs:[],isLiquidBurner:!0},Vh=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",KM=(e,i,r)=>{switch(e){case"drill":return QM();case"assembler":return XM();case"treeFarm":return ZM(r);case"firebox":return JM(i);case"temperature":return eC(i);case"boiler":return tC();case"chemicalPlant":return iC();case"wasteFacility":return nC();case"liquidDump":return rC();case"liquidBurner":return oC();default:return null}},QM=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...gp.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:xp.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...TM().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Mo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[l.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),l.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),l.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),l.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),l.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),l.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const i=dg(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),r=pg(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),o=e.drillHead&&e.depth?Mo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:i,outputs:r,metrics:o}}}),XM=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const i=e.outerStage,r=e.innerStage,o=i&&r?parseInt(i)===1?`${r}x Microchip`:`${i}x${r}x Microchip`:"";return o?l.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:o}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const r=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return r?Rs(r,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[l.jsxs("div",{children:["Total Stages: ",e.totalStages]}),l.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),l.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),l.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[l.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),l.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[l.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[l.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),l.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),l.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),l.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,d;const i={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((d=e.microchip)==null?void 0:d.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},o=!i.outerStage||!i.innerStage?"":parseInt(i.outerStage)===1?`p_${i.innerStage}x_microchip`:`p_${i.outerStage}x${i.innerStage}x_microchip`,a=mg(o,i.machineOil),c=fg(o,i.machineOil);return{settings:i,inputs:a,outputs:c,metrics:null}}}),ZM=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:i=>i>500||i<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:i=>i<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:i=>i<1,hint:function(i){const r=xg(i);return`Requires ${r} water tank${r!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:i=>i<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:i=>Su(i.trees,i.harvesters,i.sprinklers,i.outputs,i.controller,e),renderMetrics:(i,r)=>l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[l.jsxs("div",{children:["Growth Time: ",i.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),l.jsxs("div",{children:["Water Tanks: ",i.waterTanks]}),l.jsxs("div",{children:["Sustainable Rate: ",i.sustainableHarvestRate.toFixed(4)," trees/s"]}),l.jsxs("div",{children:["Max Harvest Rate: ",i.maxHarvestRate.toFixed(4)," trees/s"]}),l.jsxs("div",{children:["Actual Rate: ",i.actualHarvestRate.toFixed(4)," trees/s"]}),l.jsxs("div",{children:["Power: ",(i.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),i.isTreeLimited&&l.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:i=>i.trees>500||i.trees<1||i.harvesters<1||i.sprinklers<1||i.outputs<1,onApply:(i,r)=>{const o=vg(i.sprinklers),a=n_(i.trees,i.harvesters,e);return{settings:i,inputs:o,outputs:a,metrics:null}}}),JM=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:r_.map(i=>({value:i.id,label:`${i.name} (${(i.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:i=>Mu(e.id,i.fuel),renderMetrics:(i,r)=>l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[l.jsxs("div",{children:["Energy Needed: ",(i.energyNeeded/1e3).toFixed(0),"k"]}),l.jsxs("div",{children:["Fuel Energy: ",(i.fuelEnergy/1e3).toFixed(0),"k per unit"]}),l.jsxs("div",{children:["Wait Time: ",i.waitTime.toFixed(2),"s"]}),i.additionalWait>0&&l.jsxs("div",{children:["Additional Wait: +",i.additionalWait,"s"]}),l.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",i.cycleTime.toFixed(2),"s"]}),l.jsxs("div",{children:["Fuel Per Cycle: ",i.fuelPerCycle.toFixed(2)," units"]}),l.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/i.cycleTime).toFixed(4)," cycles/s"]})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[l.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),l.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:wp(e.inputs,r.fuel,e.id).map((o,a)=>{const c=typeof o.quantity=="number"?o.quantity.toFixed(4):o.quantity,u=ar(o.product_id,ht);return l.jsxs("div",{children:[c,"x ",u]},a)})})]})]}),onApply:(i,r)=>{const o=Mu(r.id,i.fuel),a=wp(r.inputs,i.fuel,r.id);return{settings:i,inputs:a,outputs:[],metrics:o}}}),eC=e=>{var o,a;const i=e.machine_id,r=ri[i];return{title:`${r.name} Settings`,defaultSettings:{temperature:((a=(o=r.tempOptions)==null?void 0:o[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:c=>parseInt(c),options:r.tempOptions.map(c=>({value:c.temp,label:`${ku(c.temp)} - ${Vh(c.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(c,u)=>{const d=u.temperature,_=qh(i,d);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:["Output Temperature: ",ku(d)]}),l.jsxs("div",{children:["Power Consumption: ",Vh(_)]})]})}}],onApply:(c,u)=>{const d=qh(i,c.temperature),_=u.outputs.map(f=>({...f,temperature:i_(i,c)}));return{settings:c,inputs:[],outputs:_,metrics:d}}}},tC=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[" Boiler uses the ",l.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),l.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),l.jsx("div",{children:" If output temp < 100C, no steam is produced"}),l.jsx("div",{children:" Water output is cooled (no temperature)"}),l.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),iC=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>Sg(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),l.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[l.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),l.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),l.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),l.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[l.jsx("div",{children:" Speed affects input/output quantities and power"}),l.jsx("div",{children:" Efficiency affects input quantities and power"}),l.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),nC=()=>{const e=Vi.filter(r=>r.type==="item").sort((r,o)=>r.name.localeCompare(o.name)),i=Vi.filter(r=>r.type==="fluid").sort((r,o)=>r.name.localeCompare(o.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(r=>({value:r.id,label:r.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...i.map(r=>({value:r.id,label:r.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" Each input accepts up to 240/s"}),l.jsx("div",{children:" Fixed requirements per cycle:"}),l.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),l.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:r=>{const o=Cu(0,0,r.itemProductId,r.fluidProductId);return{settings:r,inputs:o,outputs:[],metrics:null}}}},rC=()=>{const e=Vi.filter(i=>i.type==="fluid").sort((i,r)=>i.name.localeCompare(r.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((i,r)=>({type:"select",key:`fluidProductId${r}`,label:`Input ${r+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(i,r)=>{const o=[r.fluidProductId0,r.fluidProductId1],a=Sp(o),c=ls(a);return l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" Water variants: 0%/hr"}),l.jsx("div",{children:" Residue: 8.64%/hr per /s"}),l.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),l.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:l.jsxs("strong",{children:["Current Pollution: ",c.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),l.jsx("div",{children:" Connect fluids to dispose of them"}),l.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:i=>{const r=[i.fluidProductId0,i.fluidProductId1],o=Sp(r);return{settings:{fluidProductIds:r,searchTerm:i.searchTerm},inputs:o,outputs:[],metrics:null}}}},oC=()=>{const e=Vi.filter(i=>i.type==="fluid").sort((i,r)=>i.name.localeCompare(r.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((i,r)=>({type:"select",key:`fluidProductId${r}`,label:`Input ${r+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(i,r)=>{const o=Array(8).fill(0).map((u,d)=>r[`fluidProductId${d}`]),a=Cp(o),c=us(a);return l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" Water variants: 0%/hr"}),l.jsx("div",{children:" Residue: 8.64%/hr per /s"}),l.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),l.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:l.jsxs("strong",{children:["Current Pollution: ",c.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),l.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),l.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:i=>{const r=Array(8).fill(0).map((a,c)=>i[`fluidProductId${c}`]),o=Cp(r);return{settings:{fluidProductIds:r,searchTerm:i.searchTerm},inputs:o,outputs:[],metrics:null}}}},aC=({recipeType:e,nodeId:i,currentSettings:r,recipe:o,globalPollution:a,onSettingsChange:c,onClose:u})=>{var S;const d=KM(e,o,a),[_,f]=F.useState(r||d.defaultSettings),y=F.useRef(null),m=k=>{const I=y.current;if(!I)return;const M=I.scrollHeight>I.clientHeight,E=I.scrollTop===0&&k.deltaY<0,P=I.scrollTop+I.clientHeight>=I.scrollHeight&&k.deltaY>0;M&&!E&&!P||k.preventDefault(),k.stopPropagation()},h=(k,I)=>{f(typeof k=="object"?M=>({...M,...k}):M=>({...M,[k]:I}))},x=()=>{const k=d.onApply(_,o);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":c(i,k.settings,k.inputs,k.outputs);break;case"firebox":c(i,k.settings,k.inputs,k.metrics);break;case"temperature":c(i,k.settings,k.outputs,k.metrics);break;case"boiler":case"chemicalPlant":c(i,k.settings);break;default:c(i,k.settings,k.inputs,k.outputs,k.metrics)}u()},w=()=>{f(d.defaultSettings)},b=d.calculateMetrics?d.calculateMetrics(_,o):null;return H2.createPortal(l.jsx("div",{className:"drill-settings-overlay",onClick:u,children:l.jsxs("div",{ref:y,className:"drill-settings-bubble",onClick:k=>k.stopPropagation(),onDoubleClick:k=>k.stopPropagation(),onWheel:m,children:[l.jsx("h3",{className:"drill-settings-title",children:d.title}),l.jsxs("div",{className:"drill-settings-content",children:[d.fields.map((k,I)=>l.jsx(sC,{field:k,value:_[k.key],settings:_,onChange:(M,E)=>{k.type==="dual-select"?h(M,E):h(k.key,M)}},I)),b&&d.renderMetrics&&l.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:d.renderMetrics(b,_)})]}),l.jsxs("div",{className:"drill-settings-buttons",children:[l.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Reset"}),l.jsx("button",{onClick:x,className:"btn btn-primary",disabled:(S=d.hasErrors)==null?void 0:S.call(d,_),children:"Apply"})]})]})}),document.body)},sC=({field:e,value:i,settings:r,onChange:o})=>{var a,c;switch(e.type){case"select":return l.jsxs("div",{className:"drill-setting-group",children:[l.jsx("label",{className:"drill-setting-label",children:e.label}),l.jsx("select",{value:i,onChange:u=>o(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,r),children:e.options.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&l.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(i,r):e.hint})]});case"checkbox":return l.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:l.jsxs("label",{className:"drill-setting-label",children:[l.jsx("input",{type:"checkbox",checked:i,onChange:u=>o(u.target.checked),className:"drill-checkbox"}),l.jsx("span",{children:e.label})]})});case"number":return l.jsxs("div",{className:"drill-setting-group",children:[l.jsx("label",{className:"drill-setting-label",children:e.label}),l.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:i,onChange:u=>o(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(c=e.hasError)!=null&&c.call(e,i)?{borderColor:"#ef4444"}:{}}),e.hint&&l.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(i,r):e.hint})]});case"number-buttons":return l.jsxs("div",{className:"drill-setting-group",children:[l.jsx("label",{className:"drill-setting-label",children:e.label}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx("button",{onClick:()=>o(Math.max(e.min,i-e.step)),disabled:i<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:i<=e.min?.5:1,cursor:i<=e.min?"not-allowed":"pointer"},children:""}),l.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:i}),l.jsx("button",{onClick:()=>o(Math.min(e.max,i+e.step)),disabled:i>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:i>=e.max?.5:1,cursor:i>=e.max?"not-allowed":"pointer"},children:""})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[l.jsxs("span",{children:["Min: ",e.min]}),l.jsxs("span",{children:["Default: ",e.defaultValue]}),l.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return l.jsxs("div",{className:"drill-setting-group",children:[l.jsx("label",{className:"drill-setting-label",children:e.label}),l.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return l.jsxs("div",{className:"drill-setting-group",children:[l.jsx("label",{className:"drill-setting-label",children:e.label}),l.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[l.jsxs("select",{value:r[e.outerKey]||"",onChange:u=>{const d=u.target.value;o(e.outerKey,d),d&&parseInt(d)>1&&o(e.innerKey,"64")},className:"select",style:{flex:1},children:[l.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>l.jsxs("option",{value:u,children:[u,"x"]},u))]}),l.jsxs("select",{value:r[e.innerKey]||"",onChange:u=>o(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:r[e.outerKey]&&parseInt(r[e.outerKey])>1,children:[l.jsx("option",{value:"",children:"Inner"}),r[e.outerKey]&&parseInt(r[e.outerKey])>1?l.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>l.jsxs("option",{value:u,children:[u,"x"]},u))]}),l.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(r)]});case"info-box":return l.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[l.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),l.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(i,r)})]});default:return null}},cs=44,Ep=8,Fh=10,Dh=20,zh=380,lC=120,Kl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,uC=F.memo(({data:e,id:i})=>{var Bi,An,Xe,pr,Mt,Ji;const{recipe:r,machine:o,machineCount:a,displayMode:c,machineDisplayMode:u,onInputClick:d,onOutputClick:_,isTarget:f,onDrillSettingsChange:y,onLogicAssemblerSettingsChange:m,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:x,onTemperatureSettingsChange:w,onBoilerSettingsChange:b,onChemicalPlantSettingsChange:S,globalPollution:k,flows:I,isMobile:M,mobileActionMode:E,onMachineCountModeChange:P,zoomLevel:C}=e,R=!C||C>=.25,[j,V]=F.useState(null);if(!(r!=null&&r.inputs)||!(r!=null&&r.outputs)||!o)return null;const Q=r.isMineshaftDrill||r.id==="r_mineshaft_drill",z=r.isLogicAssembler||r.id==="r_logic_assembler",L=r.isTreeFarm||r.id==="r_tree_farm",ie=r.isWasteFacility||r.id==="r_underground_waste_facility",T=r.isLiquidDump||r.id==="r_liquid_dump",X=r.isLiquidBurner||r.id==="r_liquid_burner",G=Q||z||L||ie||T||X,Z=yM(o.id),H=gM(o.id),U=ri[o.id],te=o.id==="m_industrial_firebox"&&r.id!=="r_industrial_firebox_07",B=o.id==="m_chemical_plant",Y=zi(o.id),pe=Y?Zi[o.id]:null;let ue=r.cycle_time;const he=ue==="Variable"||typeof ue!="number"||ue<=0;if(he&&!G?ue="Variable":he&&G&&(ue=1),Y&&(pe==null?void 0:pe.type)==="steam_input"&&typeof ue=="number"&&!(o.id==="m_steam_cracking_plant"&&!lr(r))){const de=r.tempDependentInputTemp??vn;ue=Fn(o.id,de,ue)}const be={outputs:[]};if(U){const de=U.type==="boiler",nt=(Bi=r.outputs)==null?void 0:Bi.some(It=>["p_water","p_filtered_water","p_distilled_water"].includes(It.product_id)),qi=(An=r.outputs)==null?void 0:An.some(It=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(It.product_id)),Ei=(Xe=r.inputs)==null?void 0:Xe.some(It=>["p_water","p_filtered_water","p_distilled_water"].includes(It.product_id)),oi=r.id==="r_industrial_firebox_07",$n=o.id==="m_industrial_firebox";(!$n||$n&&!oi&&(Ei||nt))&&((pr=r.outputs)==null||pr.forEach((It,Ut)=>{if(cg(It.product_id)&&It.temperature!=null){const Gt=["p_water","p_filtered_water","p_distilled_water"].includes(It.product_id),st=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(It.product_id);de?st&&qi&&be.outputs.push({temp:It.temperature,index:Ut}):(Gt&&nt||st&&qi)&&be.outputs.push({temp:It.temperature,index:Ut})}}))}const Se=F.useCallback(de=>{if(de==="Variable")return"Variable";if(typeof de!="number")return String(de);if(ue==="Variable")return c==="perSecond"?"Variable":String(Kl(de));let nt=c==="perSecond"?de/ue:de;return u==="total"&&(nt*=a||0),String(Kl(nt))},[ue,c,u,a]),ce=F.useCallback(de=>{if(de==="Variable"||typeof de!="number")return de;if(c==="perSecond")return"1s";if(de>=60){const nt=Math.floor(de/60),qi=de%60;return`${nt}m ${Kl(qi)}s`}return`${Kl(de)}s`},[c]),qe=F.useMemo(()=>ce(ue),[ue,ce]);let Fe=r.power_consumption,Le=r.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof r.power_consumption=="number"?Fe=r.power_consumption*a:typeof r.power_consumption=="object"&&r.power_consumption!==null&&r.power_consumption!=="Variable"&&("drilling"in r.power_consumption&&"idle"in r.power_consumption?Fe={drilling:typeof r.power_consumption.drilling=="number"?r.power_consumption.drilling*a:r.power_consumption.drilling,idle:typeof r.power_consumption.idle=="number"?r.power_consumption.idle*a:r.power_consumption.idle}:"max"in r.power_consumption&&"average"in r.power_consumption&&(Fe={max:typeof r.power_consumption.max=="number"?r.power_consumption.max*a:r.power_consumption.max,average:typeof r.power_consumption.average=="number"?r.power_consumption.average*a:r.power_consumption.average})),typeof r.pollution=="number"&&(Le=r.pollution*a));const Ie=mM(Fe),Re=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),ze=r.power_type==="HV"?" HV":"",Ye=r.inputs.length,Ge=r.outputs.length,at=Math.max(Ye,Ge,1),bt=Ye>0,xt=Ge>0,Et=zh-Fh*2,Dt=bt&&xt?Math.floor((Et-Dh)/2):bt?Et:0,hi=bt&&xt?Math.floor((Et-Dh)/2):xt?Et:0,Ci=zh,Oi=at*cs+(at-1)*Ep+24,yi=lC+Oi+12,_t=a??0,Sn=Number.isInteger(_t)?_t.toString():_t.toFixed(2),zt=e.machineCountMode||"free",Mn=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`custom-node ${f?"target":""}`,style:{width:Ci,height:yi},onMouseDownCapture:de=>{de.button===1&&(de.preventDefault(),de.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(i))},children:[l.jsxs("div",{className:"node-info-area",children:[be.outputs.length>0&&l.jsx("div",{onDoubleClick:de=>de.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:be.outputs.map((de,nt)=>l.jsx("div",{children:ku(de.temp)},`output-${nt}`))}),Y&&(pe==null?void 0:pe.type)==="steam_input"&&lr(r)&&l.jsx("div",{onDoubleClick:de=>de.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:ku(r.tempDependentInputTemp??vn)}),Q&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("drill")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),z&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("assembler")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),L&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("treeFarm")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),te&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("firebox")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),B&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("chemicalPlant")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),ie&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("wasteFacility")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),T&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("liquidDump")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),X&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("liquidBurner")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),Z&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("temperature")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),H&&l.jsx("button",{onClick:de=>{de.stopPropagation(),V("boiler")},onDoubleClick:de=>de.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),l.jsx("div",{className:"node-recipe-name",title:r.name,children:r.name}),l.jsxs("div",{className:"node-stats-row",children:[l.jsxs("div",{className:"node-stats",style:{gap:Re?"1px":"3px",minHeight:"65px",visibility:R?"visible":"hidden"},children:[l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",qe]}),Re?"drilling"in Ie?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,ze]}),l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,ze]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,ze]}),l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,ze]})]}):l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,ze]}),l.jsxs("div",{className:"node-stat-row",children:[l.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",fM(Le)]})]}),l.jsxs("div",{className:"node-machine-info",style:{visibility:R?"visible":"hidden"},children:[l.jsx("div",{className:"node-machine-name",title:o.name,style:{color:o.tier===1?"var(--tier-1-color)":o.tier===2?"var(--tier-2-color)":o.tier===3?"var(--tier-3-color)":o.tier===4?"var(--tier-4-color)":(o.tier===5,"var(--tier-5-color)")},children:o.name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("div",{className:"node-machine-count",style:Mn,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Sn}),zt!=="free"&&l.jsx("button",{onClick:de=>{de.stopPropagation(),P&&P(i,zt,a)},onDoubleClick:de=>de.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:de=>de.currentTarget.style.opacity="1",onMouseLeave:de=>de.currentTarget.style.opacity="0.8",title:zt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Mt=e.cappedMachineCount)==null?void 0:Mt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((Ji=e.cappedMachineCount)==null?void 0:Ji.toFixed(2))||a.toFixed(2)}
Click to lock`,children:zt==="locked"?"":""})]})]})]})]}),l.jsxs("div",{className:"node-io-area",children:[l.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:bt&&xt?`${Dt}px 1fr ${hi}px`:"1fr",padding:`0 ${Fh}px`},children:[bt&&l.jsx("div",{className:"node-io-column node-io-left",children:r.inputs.map((de,nt)=>l.jsx("div",{className:"node-rect-wrapper",children:l.jsx(Lh,{side:"left",index:nt,width:Dt,input:de,onClick:d,nodeId:i,formatQuantity:Se,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${i}-${nt}-${de.product_id}`))}),bt&&xt&&l.jsx("div",{className:"node-io-gap"}),xt&&l.jsx("div",{className:"node-io-column node-io-right",children:r.outputs.map((de,nt)=>l.jsx("div",{className:"node-rect-wrapper",children:l.jsx(Lh,{side:"right",index:nt,width:hi,input:de,onClick:_,nodeId:i,formatQuantity:Se,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${i}-${nt}-${de.product_id}`))})]}),l.jsxs("div",{className:"node-handles-container",children:[r.inputs.map((de,nt)=>l.jsx(Oh,{side:"left",index:nt,onClick:d,nodeId:i,productId:de.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:de,data:e,leftCount:Ye,rightCount:Ge},`handle-left-${i}-${nt}`)),r.outputs.map((de,nt)=>l.jsx(Oh,{side:"right",index:nt,onClick:_,nodeId:i,productId:de.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:de,data:e,leftCount:Ye,rightCount:Ge},`handle-right-${i}-${nt}`))]})]})]}),j&&l.jsx(aC,{recipeType:j,nodeId:i,currentSettings:j==="drill"?r.drillSettings:j==="assembler"?r.assemblerSettings:j==="treeFarm"?r.treeFarmSettings:j==="firebox"?r.fireboxSettings:j==="temperature"||j==="boiler"?r.temperatureSettings:j==="chemicalPlant"?r.chemicalPlantSettings:j==="wasteFacility"?r.wasteFacilitySettings:j==="liquidDump"?r.liquidDumpSettings:j==="liquidBurner"?r.liquidBurnerSettings:{},recipe:r,globalPollution:k||0,onSettingsChange:j==="drill"?y:j==="assembler"?m:j==="treeFarm"?h:j==="firebox"?x:j==="temperature"?w:j==="boiler"?b:j==="chemicalPlant"?S:j==="wasteFacility"?e.onWasteFacilitySettingsChange:j==="liquidDump"?e.onLiquidDumpSettingsChange:j==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>V(null)})]})},(e,i)=>{if(e.data===i.data&&e.id===i.id)return!0;if(e.id!==i.id)return!1;const r=e.data,o=i.data;return!(r.recipe!==o.recipe||r.machineCount!==o.machineCount||r.flows!==o.flows||r.suggestions!==o.suggestions||r.displayMode!==o.displayMode||r.machineDisplayMode!==o.machineDisplayMode||r.isTarget!==o.isTarget||r.zoomLevel!==o.zoomLevel||r.machineCountMode!==o.machineCountMode)}),Lh=({side:e,index:i,width:r,input:o,onClick:a,nodeId:c,formatQuantity:u,isMobile:d,mobileActionMode:_})=>{const f=e==="left",y=ar(o.product_id,ht,o.acceptedType),m=u(o.quantity),h=!d||_==="pan";return l.jsx("div",{onClick:x=>{a&&h&&(x.stopPropagation(),a(o.product_id,c,i,x))},title:`${m}x ${y}`,className:`node-rect ${f?"input":"output"} ${a?"clickable":""}`,style:{width:`${r}px`,height:`${cs}px`,minWidth:`${r}px`},children:l.jsxs("span",{className:"node-rect-text",children:[m,"x ",y]})})},Oh=({side:e,index:i,onClick:r,nodeId:o,productId:a,flows:c,onHandleDoubleClick:u,suggestions:d,input:_,data:f,leftCount:y,rightCount:m})=>{var Q,z;const x=getComputedStyle(document.documentElement),w=x.getPropertyValue("--handle-input-supplied").trim(),b=x.getPropertyValue("--handle-input-deficient").trim(),S=x.getPropertyValue("--handle-output-connected").trim(),k=x.getPropertyValue("--handle-output-excess").trim();let I=e==="left"?w:S;if(c){const L=e==="left"?(Q=c.inputFlows)==null?void 0:Q[i]:(z=c.outputFlows)==null?void 0:z[i];if(L){const ie=e==="left"?L.needed-L.connected:L.produced-L.connected;Math.abs(ie)>1e-6&&ie>0&&(I=e==="left"?b:k)}}const M=ht(a),P=(M==null?void 0:M.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",V=12+(Math.max(y,m)-(e==="left"?y:m))*(cs+Ep)/2+i*(cs+Ep)+cs/2+11;return l.jsx(ws,{type:e==="left"?"target":"source",position:e==="left"?Be.Left:Be.Right,id:`${e}-${i}`,style:{background:I,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:P,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${V}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:L=>{r&&L.ctrlKey&&(L.stopPropagation(),r(a,o,i,L))},onDoubleClick:L=>{u&&(L.stopPropagation(),u(o,e,i,a,d))}})},cC=(e,i,r,o,a,c)=>{if(r>e){const f=(e+r)/2;return[`M ${e},${i} L ${f},${i} L ${f},${o} L ${r},${o}`,f,(i+o)/2]}else{const f=e+40,y=r-40,m=(i+o)/2+((i+o)/2<300?20:-20);return[`M ${e},${i} L ${f},${i} L ${f},${m} L ${y},${m} L ${y},${o} L ${r},${o}`,(f+y)/2,m]}},dC=({id:e,sourceX:i,sourceY:r,targetX:o,targetY:a,sourcePosition:c,targetPosition:u,data:d})=>{const _=(d==null?void 0:d.edgePath)||"orthogonal",f=(d==null?void 0:d.edgeStyle)||"animated",[y]=F.useMemo(()=>_==="straight"?Up({sourceX:i,sourceY:r,targetX:o,targetY:a}):_==="orthogonal"?cC(i,r,o,a):Wp({sourceX:i,sourceY:r,sourcePosition:c,targetX:o,targetY:a,targetPosition:u}),[i,r,o,a,c,u,_]),m=f==="animated"?"custom-edge custom-edge-animated":f==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return l.jsx("path",{id:e,className:m,d:y,fill:"none"})},pC=F.memo(dC,(e,i)=>{var r,o,a,c;return e.sourceX===i.sourceX&&e.sourceY===i.sourceY&&e.targetX===i.targetX&&e.targetY===i.targetY&&((r=e.data)==null?void 0:r.edgePath)===((o=i.data)==null?void 0:o.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((c=i.data)==null?void 0:c.edgeStyle)}),sa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},_C=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:sa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],qu=e=>{const i=document.documentElement;Object.entries(e).forEach(([r,o])=>{const a="--"+r.replace(/([A-Z])/g,"-$1").toLowerCase();i.style.setProperty(a,o)})},lu=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):sa}catch{return sa}},Ip=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),mC=()=>(qu(sa),Ip(sa),sa),fC=({onClose:e})=>{const[i,r]=F.useState(lu()),[o,a]=F.useState(!1),c=m=>{const h={edgePath:i.edgePath||"orthogonal",edgeStyle:i.edgeStyle||"animated"},x={...m.theme,...h};r(x),qu(x),Ip(x)},u=(m,h)=>{const x={...i,[m]:h};r(x),qu(x),Ip(x)},d=()=>{const m=mC();r(m)},_=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],f=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],y=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),style:{width:o?"700px":"600px",maxHeight:"85vh"},children:[l.jsx("h2",{className:"modal-title",children:"Theme Editor"}),o?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),l.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[l.jsxs("div",{className:"theme-group",children:[l.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[l.jsxs("div",{children:[l.jsx("label",{className:"theme-color-label",children:"Path Type:"}),l.jsx("select",{value:i.edgePath||"bezier",onChange:m=>u("edgePath",m.target.value),className:"select",style:{marginTop:"6px"},children:f.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"theme-color-label",children:"Line Style:"}),l.jsx("select",{value:i.edgeStyle||"animated",onChange:m=>u("edgeStyle",m.target.value),className:"select",style:{marginTop:"6px"},children:y.map(m=>l.jsx("option",{value:m.value,children:m.label},m.value))})]})]})]}),_.map(m=>l.jsxs("div",{className:"theme-group",children:[l.jsx("h3",{className:"theme-group-title",children:m.title}),l.jsx("div",{className:"theme-color-grid",children:m.colors.map(h=>{const x=i[h.key]||"#000000",w=x.length>7?x.substring(0,7):x;return l.jsxs("div",{className:"theme-color-item",children:[l.jsx("label",{className:"theme-color-label",children:h.label}),l.jsxs("div",{className:"theme-color-inputs",children:[l.jsx("input",{type:"color",value:w,onChange:b=>{const S=i[h.key];if(S&&S.length>7){const k=S.substring(7);u(h.key,b.target.value+k)}else u(h.key,b.target.value)},className:"theme-color-picker"}),l.jsx("input",{type:"text",value:i[h.key],onChange:b=>u(h.key,b.target.value),className:"input theme-color-text"})]})]},h.key)})})]},m.title))]}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[l.jsx("button",{onClick:d,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),l.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[l.jsx("div",{style:{marginBottom:"20px"},children:l.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:_C.map(m=>l.jsx("div",{onClick:()=>c(m),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:m.name}),l.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:m.description})]}),l.jsx("div",{style:{display:"flex",gap:"6px"},children:[m.theme.colorPrimary,m.theme.bgMain,m.theme.inputBorder,m.theme.outputBorder].map((h,x)=>l.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},x))})]})},m.id))})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[l.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),l.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},hC=({onClose:e})=>l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal",onClick:i=>i.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[l.jsx("h2",{className:"modal-title",children:"Help & Controls"}),l.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[l.jsxs("div",{style:{marginBottom:"30px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),l.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),l.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),l.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),l.jsxs("div",{style:{marginBottom:"30px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",l.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),l.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[l.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)"},children:[l.jsx("div",{children:"Cycle: 4s"}),l.jsx("div",{children:"Power: 150kW"}),l.jsx("div",{children:"Pollution: 0%/hr"})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),l.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),l.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),l.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),l.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),l.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),l.jsx("div",{style:{minWidth:"250px"},children:l.jsxs("div",{style:{marginBottom:"15px"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),l.jsxs("div",{style:{marginTop:"20px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[l.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[l.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[l.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[l.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),l.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[l.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),l.jsxs("div",{style:{marginTop:"25px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[l.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[l.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",l.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[l.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),l.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),l.jsxs("div",{style:{marginBottom:"30px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:["Use ",l.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",l.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:[l.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsxs("span",{children:["Use ",l.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[l.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),l.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),l.jsxs("div",{style:{paddingLeft:"15px"},children:[l.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),l.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:i=>{i.currentTarget.style.textDecoration="underline"},onMouseLeave:i=>{i.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),l.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:i=>{i.currentTarget.style.textDecoration="underline"},onMouseLeave:i=>{i.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),l.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:i=>{i.currentTarget.style.textDecoration="underline"},onMouseLeave:i=>{i.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),l.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:i=>{i.currentTarget.style.textDecoration="underline"},onMouseLeave:i=>{i.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),l.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),$u="industrialist_saves",ha="industrialist_current_save_id",ya=()=>{try{const e=localStorage.getItem($u);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading saves:",e),{}}},yC=(e,i)=>{var r;try{const o=ya(),a=`save_${Date.now()}`,c={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((r=i.nodes)==null?void 0:r.length)||0,data:i};return o[a]=c,localStorage.setItem($u,JSON.stringify(o)),localStorage.setItem(ha,a),c}catch(o){return console.error("Error saving canvas:",o),null}},gC=e=>{try{const r=ya()[e];return r?(localStorage.setItem(ha,e),r.data):null}catch(i){return console.error("Error loading save:",i),null}},xC=e=>{try{const i=ya();return delete i[e],localStorage.setItem($u,JSON.stringify(i)),localStorage.getItem(ha)===e&&localStorage.removeItem(ha),!0}catch(i){return console.error("Error deleting save:",i),!1}},vC=(e,i)=>{try{const r=ya();return r[e]?(r[e].name=i,localStorage.setItem($u,JSON.stringify(r)),!0):!1}catch(r){return console.error("Error renaming save:",r),!1}},wC=()=>{var e;try{const i=localStorage.getItem(ha);return i&&((e=ya()[i])==null?void 0:e.name)||"Untitled"}catch{return"Untitled"}},bC=({onClose:e,onLoad:i,currentCanvas:r,onImport:o,onExportCanvas:a})=>{const[c,u]=F.useState({}),[d,_]=F.useState(""),[f,y]=F.useState(null),[m,h]=F.useState(""),[x,w]=F.useState(null);F.useEffect(()=>{b()},[]);const b=()=>{const j=ya();u(j);const V=localStorage.getItem(ha);w(V)},S=()=>{if(!d.trim()){alert("Please enter a name for your save");return}const j=yC(d.trim(),r);j?(_(""),b(),alert(`Canvas saved as "${j.name}"`)):alert("Failed to save canvas")},k=j=>{if(!window.confirm("Load this save? Your current canvas will be replaced."))return;const V=gC(j);V?(w(j),i(V),e()):alert("Failed to load save")},I=j=>{const V=c[j];window.confirm(`Delete save "${V.name}"? This cannot be undone.`)&&(xC(j)?b():alert("Failed to delete save"))},M=j=>{y(j),h(c[j].name)},E=j=>{if(!m.trim()){alert("Name cannot be empty");return}vC(j,m.trim())?(b(),y(null),h("")):alert("Failed to rename save")},P=()=>{y(null),h("")},C=j=>new Date(j).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),R=Object.values(c).sort((j,V)=>V.timestamp-j.timestamp);return l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[l.jsx("h2",{className:"modal-title",children:"Save Manager"}),l.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",l.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:wC()})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[l.jsx("input",{type:"text",value:d,onChange:j=>_(j.target.value),onKeyPress:j=>j.key==="Enter"&&S(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),l.jsx("button",{onClick:S,className:"btn btn-primary",style:{minWidth:"120px"},children:"Save Current"})]}),l.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>{o&&o()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),l.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),l.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[l.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",R.length,")"]}),R.length===0?l.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:R.map(j=>l.jsxs("div",{style:{padding:"15px",background:x===j.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:x===j.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[f===j.id?l.jsx("div",{style:{marginBottom:"10px"},children:l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("input",{type:"text",value:m,onChange:V=>h(V.target.value),onKeyPress:V=>{V.key==="Enter"&&E(j.id),V.key==="Escape"&&P()},className:"input",style:{flex:1},autoFocus:!0}),l.jsx("button",{onClick:()=>E(j.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),l.jsx("button",{onClick:P,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[j.name,x===j.id&&l.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[C(j.timestamp),"  ",j.nodeCount," nodes"]})]})}),f!==j.id&&l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>k(j.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),l.jsx("button",{onClick:()=>M(j.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),l.jsx("button",{onClick:()=>I(j.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},j.id))})]}),l.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},kC=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],SC=({recipe:e,onClose:i,onSave:r,availableProducts:o,defaultMachines:a,allRecipes:c=[],isCreatingNew:u=!1})=>{var C,R,j;const d=!u&&kC.includes(e.id),_=!u&&(((C=e.inputs)==null?void 0:C.some(V=>V.product_id==="p_variableproduct"))||((R=e.outputs)==null?void 0:R.some(V=>V.product_id==="p_variableproduct"))),[f,y]=F.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),m=(V,Q)=>{y(z=>({...z,[V]:Q}))},h=(V,Q,z)=>{const L=[...f.inputs];L[V]={...L[V],[Q]:z},y(ie=>({...ie,inputs:L}))},x=(V,Q,z)=>{const L=[...f.outputs];L[V]={...L[V],[Q]:z},y(ie=>({...ie,outputs:L}))},w=()=>{const V=[...f.inputs,{product_id:"",quantity:1}];y(Q=>({...Q,inputs:V}))},b=V=>{const Q=f.inputs.filter((z,L)=>L!==V);y(z=>({...z,inputs:Q}))},S=()=>{const V=[...f.outputs,{product_id:"",quantity:1}];y(Q=>({...Q,outputs:V}))},k=V=>{const Q=f.outputs.filter((z,L)=>L!==V);y(z=>({...z,outputs:Q}))},I=V=>{const z=`r_${V.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,L=c.filter(T=>T.id.startsWith(z)).map(T=>{const X=T.id.match(/_(\d+)$/);return X?parseInt(X[1]):0});let ie=1;for(;L.includes(ie);)ie++;return`${z}${String(ie).padStart(2,"0")}`},M=()=>{if(u){if(!f.name||!f.name.trim())return alert("Recipe name is required"),!1;if(!f.machine_id)return alert("Machine is required"),!1;if(!a.find(X=>X.id===f.machine_id))return alert("Selected machine does not exist"),!1}const Q=[...f.inputs.map(T=>T.product_id),...f.outputs.map(T=>T.product_id)].filter(T=>T&&T!=="p_variableproduct"&&T!=="p_any_fluid"&&T!=="p_any_item"&&!o.find(X=>X.id===T));if(Q.length>0)return alert(`Invalid product IDs: ${Q.join(", ")}`),!1;const z=f.inputs.some(T=>!T.product_id),L=f.outputs.some(T=>!T.product_id);return z||L?(alert("All inputs and outputs must have a product selected"),!1):typeof f.cycle_time=="number"&&f.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((f.inputs.some(T=>T.quantity==="Variable")||f.outputs.some(T=>T.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},E=()=>{if(!M())return;let V={...f};if(u){const Q=a.find(z=>z.id===f.machine_id);V.id=I(Q.name)}r(V),i()},P=a.find(V=>V.id===e.machine_id);return d||_?l.jsx("div",{className:"modal-overlay",onClick:i,children:l.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),style:{width:"600px"},children:[l.jsx("h2",{className:"modal-title",children:d?"Special Recipe":"Variable Product Recipe"}),l.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:d?l.jsxs(l.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",l.jsx("br",{}),l.jsx("br",{}),"Special recipes include:",l.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[l.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),l.jsx("li",{children:"Logic Assembler (microchip stages)"}),l.jsx("li",{children:"Tree Farm (layout configuration)"}),l.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),l.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):l.jsx(l.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),l.jsx("button",{onClick:i,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):l.jsx("div",{className:"modal-overlay",onClick:i,children:l.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[l.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),l.jsx("input",{type:"text",value:f.name,onChange:V=>m("name",V.target.value),placeholder:"Enter recipe name",className:"input"})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?l.jsxs("select",{value:f.machine_id,onChange:V=>m("machine_id",V.target.value),className:"select",children:[l.jsx("option",{value:"",children:"Select a machine"}),a.sort((V,Q)=>V.name.localeCompare(Q.name)).map(V=>l.jsxs("option",{value:V.id,children:[V.name," (Tier ",V.tier||1,")"]},V.id))]}):l.jsx("div",{style:{color:(P==null?void 0:P.tier)===1?"var(--tier-1-color)":(P==null?void 0:P.tier)===2?"var(--tier-2-color)":(P==null?void 0:P.tier)===3?"var(--tier-3-color)":(P==null?void 0:P.tier)===4?"var(--tier-4-color)":(P==null?void 0:P.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(P==null?void 0:P.name)||e.machine_id}),u&&f.machine_id&&l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",I(((j=a.find(V=>V.id===f.machine_id))==null?void 0:j.name)||"")]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),l.jsx("input",{type:"number",step:"0.1",min:"0",value:f.cycle_time==="Variable"?"":f.cycle_time,onChange:V=>m("cycle_time",parseFloat(V.target.value)),placeholder:f.cycle_time==="Variable"?"Variable":"",className:"input",disabled:f.cycle_time==="Variable",title:f.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),l.jsx("input",{type:"number",step:"1000",value:typeof f.power_consumption=="number"?f.power_consumption:"",onChange:V=>m("power_consumption",parseFloat(V.target.value)),placeholder:"Variable",className:"input"})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),l.jsxs("select",{value:f.power_type||"MV",onChange:V=>m("power_type",V.target.value),className:"select",children:[l.jsx("option",{value:"LV",children:"LV"}),l.jsx("option",{value:"MV",children:"MV"}),l.jsx("option",{value:"HV",children:"HV"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),l.jsx("input",{type:"number",step:"0.1",value:f.pollution,onChange:V=>m("pollution",parseFloat(V.target.value)),className:"input"})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[l.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),l.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),f.inputs.map((V,Q)=>l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[l.jsxs("select",{value:V.product_id,onChange:z=>h(Q,"product_id",z.target.value),className:"select",style:{flex:2},children:[l.jsx("option",{value:"",children:"Select Product"}),[...o].filter(z=>z.id!=="p_variableproduct"&&z.id!=="p_any_fluid"&&z.id!=="p_any_item").sort((z,L)=>z.name.localeCompare(L.name)).map(z=>l.jsxs("option",{value:z.id,children:[z.name," (",z.type,")"]},z.id))]}),l.jsx("input",{type:"number",step:"0.1",min:"0",value:V.quantity==="Variable"?"":V.quantity,onChange:z=>h(Q,"quantity",parseFloat(z.target.value)),placeholder:V.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:V.quantity==="Variable",title:V.quantity==="Variable"?"Cannot edit Variable quantities":""}),l.jsx("button",{onClick:()=>b(Q),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},Q)),f.inputs.length===0&&l.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[l.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),l.jsx("button",{onClick:S,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),f.outputs.map((V,Q)=>l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[l.jsxs("select",{value:V.product_id,onChange:z=>x(Q,"product_id",z.target.value),className:"select",style:{flex:2},children:[l.jsx("option",{value:"",children:"Select Product"}),[...o].filter(z=>z.id!=="p_variableproduct"&&z.id!=="p_any_fluid"&&z.id!=="p_any_item").sort((z,L)=>z.name.localeCompare(L.name)).map(z=>l.jsxs("option",{value:z.id,children:[z.name," (",z.type,")"]},z.id))]}),l.jsx("input",{type:"number",step:"0.1",min:"0",value:V.quantity==="Variable"?"":V.quantity,onChange:z=>x(Q,"quantity",parseFloat(z.target.value)),placeholder:V.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:V.quantity==="Variable",title:V.quantity==="Variable"?"Cannot edit Variable quantities":""}),l.jsx("button",{onClick:()=>k(Q),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},Q)),f.outputs.length===0&&l.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:i,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),l.jsx("button",{onClick:E,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},Eu="industrialist_custom_products",Iu="industrialist_custom_machines",Nu="industrialist_custom_recipes",MC=(e,i,r)=>{localStorage.getItem(Eu)||localStorage.setItem(Eu,JSON.stringify(e)),localStorage.getItem(Iu)||localStorage.setItem(Iu,JSON.stringify(i)),localStorage.getItem(Nu)||localStorage.setItem(Nu,JSON.stringify(r))},ga=()=>{try{const e=localStorage.getItem(Eu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},xa=()=>{try{const e=localStorage.getItem(Iu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},Vs=()=>{try{const e=localStorage.getItem(Nu);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},ks=e=>{try{return localStorage.setItem(Eu,JSON.stringify(e)),!0}catch(i){return console.error("Error saving custom products:",i),!1}},Ss=e=>{try{return localStorage.setItem(Iu,JSON.stringify(e)),!0}catch(i){return console.error("Error saving custom machines:",i),!1}},Ms=e=>{try{return localStorage.setItem(Nu,JSON.stringify(e)),!0}catch(i){return console.error("Error saving custom recipes:",i),!1}},Bh=(e,i)=>{const r=ga(),o=r.findIndex(a=>a.id===e);return o>=0?(r[o]={...r[o],...i},ks(r)):!1},Ah=(e,i)=>{const r=xa(),o=r.findIndex(a=>a.id===e);return o>=0?(r[o]={...r[o],...i},Ss(r)):!1},CC=(e,i)=>{const r=Vs(),o=r.findIndex(a=>a.id===e);return o>=0?(r[o]={...r[o],...i},Ms(r)):!1},qC=e=>ks(e),EC=e=>Ss(e),IC=e=>Ms(e),NC=(e,i,r)=>{const o={};return e&&(o.products=ga()),i&&(o.machines=xa()),r&&(o.recipes=Vs()),o},jC=e=>{const i={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const r=ga(),o=new Map(r.map(c=>[c.id,c]));e.products.forEach(c=>{o.set(c.id,c)});const a=Array.from(o.values());ks(a)&&(i.products=e.products.length)}if(e.machines){const r=xa(),o=new Map(r.map(c=>[c.id,c]));e.machines.forEach(c=>{o.set(c.id,c)});const a=Array.from(o.values());Ss(a)&&(i.machines=e.machines.length)}if(e.recipes){const r=Vs(),o=new Map(r.map(c=>[c.id,c]));e.recipes.forEach(c=>{o.set(c.id,c)});const a=Array.from(o.values());Ms(a)&&(i.recipes=e.recipes.length)}}catch(r){i.errors.push(r.message)}return i},Ql=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,fi=e=>typeof e!="number"?e:e>=1e9?Ql(e/1e9)+"B":e>=1e6?Ql(e/1e6)+"M":e>=1e3?Ql(e/1e3)+"k":Ql(e),Od=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,PC=e=>{const i=["p_coal","p_coke_fuel","p_planks","p_oak_log"],r=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return gn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const c=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(c||a.id==="r_underground_waste_facility"&&!u)return!1;const d=a.inputs.some(f=>f.product_id===e&&f.product_id!=="p_variableproduct"),_=i.includes(e)&&r.includes(a.id)&&a.inputs.some(f=>f.product_id==="p_variableproduct");return d||_||u})},TC=e=>gn.filter(i=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(i.id)&&i.outputs.some(r=>r.product_id===e&&r.product_id!=="p_variableproduct")),Xl=e=>{const i=gn.filter(r=>r.machine_id===e);return e==="m_underground_waste_facility"?[bp]:e==="m_liquid_dump"?[Mp]:e==="m_liquid_burner"?[qp]:i},Ig=(e,i,r,o,a=Fi)=>{const c=(o==null?void 0:o.minSteamTemp)||100;return e.map(u=>{if(r){if(u.product_id==="p_steam"){const d=Math.max(i,a),_=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return d<c?{...u,temperature:d,quantity:0,originalQuantity:_}:{...u,temperature:d,quantity:_,originalQuantity:_}}return u}if(cg(u.product_id)){const d=Math.max(i,a);return{...u,temperature:d}}return u})},is=(e,i)=>{let r={...e};const o=ri[i];if(o){const c=xM(i),u=o.type==="boiler",d=u?Lr:Fi,_=u?{...c,coolantTemp:Lr}:c;let f=null;if(o.type==="product_dependent"&&e.inputs){const h=e.inputs.find(x=>["p_water","p_filtered_water","p_distilled_water"].includes(x.product_id));f=(h==null?void 0:h.product_id)||null}const y=i_(i,_,d,f,u?Lr:null),m=Ig(e.outputs,y,u,o,d);r={...r,outputs:m,temperatureSettings:_}}if(zi(i)){const c=Zi[i];(c==null?void 0:c.type)==="steam_input"&&(r={...r,tempDependentInputTemp:vn})}return r},RC=({onClose:e,defaultProducts:i,defaultMachines:r,defaultRecipes:o,onDataChange:a})=>{const[c,u]=F.useState("products"),[d,_]=F.useState(""),[f,y]=F.useState(!0),[m,h]=F.useState(!0),[x,w]=F.useState(!0),b=F.useRef(null),S=()=>{const M=NC(f,m,x),E=new Blob([JSON.stringify(M,null,2)],{type:"application/json"}),P=URL.createObjectURL(E),C=document.createElement("a");C.href=P,C.download=`industrialist-data-${Date.now()}.json`,C.click(),URL.revokeObjectURL(P)},k=()=>{var M;(M=b.current)==null||M.click()},I=M=>{var C;const E=(C=M.target.files)==null?void 0:C[0];if(!E)return;const P=new FileReader;P.onload=R=>{try{const j=JSON.parse(R.target.result),V=j.products||j.machines||j.recipes,Q=j.canvas;if(!V&&Q){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),M.target.value="";return}if(!V){alert("This file does not contain any game data (products, machines, or recipes)."),M.target.value="";return}if(Q&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){M.target.value="";return}const z=jC(j);let L=`Import complete:
`;z.products>0&&(L+=`- ${z.products} products imported/updated
`),z.machines>0&&(L+=`- ${z.machines} machines imported/updated
`),z.recipes>0&&(L+=`- ${z.recipes} recipes imported/updated
`),z.errors.length>0&&(L+=`
Errors: ${z.errors.join(", ")}`),alert(L),a()}catch(j){alert(`Import failed: ${j.message}`)}},P.readAsText(E),M.target.value=""};return l.jsx("div",{className:"modal-overlay",onClick:e,children:l.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[l.jsx("h2",{className:"modal-title",children:"Data Manager"}),l.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[l.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),l.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[l.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[l.jsx("input",{type:"checkbox",checked:f,onChange:M=>y(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[l.jsx("input",{type:"checkbox",checked:m,onChange:M=>h(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[l.jsx("input",{type:"checkbox",checked:x,onChange:M=>w(M.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:k,className:"btn btn-secondary",children:"Import JSON"}),l.jsx("button",{onClick:S,className:"btn btn-primary",children:"Export Data"})]})]}),l.jsx("input",{ref:b,type:"file",accept:".json",style:{display:"none"},onChange:I})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[l.jsx("button",{onClick:()=>u("products"),className:`btn ${c==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),l.jsx("button",{onClick:()=>u("machines"),className:`btn ${c==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),l.jsx("button",{onClick:()=>u("recipes"),className:`btn ${c==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),l.jsx("div",{style:{marginBottom:"15px"},children:l.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:d,onChange:M=>_(M.target.value),className:"input"})}),l.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[c==="products"&&l.jsx(VC,{searchTerm:d,defaultProducts:i,onDataChange:a}),c==="machines"&&l.jsx(FC,{searchTerm:d,defaultMachines:r,onDataChange:a}),c==="recipes"&&l.jsx(DC,{searchTerm:d,defaultRecipes:o,defaultMachines:r,defaultProducts:i,onDataChange:a})]}),l.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},VC=({searchTerm:e,defaultProducts:i,onDataChange:r})=>{const[o,a]=F.useState([]),[c,u]=F.useState(null),[d,_]=F.useState({}),[f,y]=F.useState(!1),[m,h]=F.useState({name:"",type:"item",price:0,rp_multiplier:1});F.useEffect(()=>{x()},[]);const x=()=>{a(ga())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,R)=>C.name.localeCompare(R.name)),b=C=>{u(C.id),_({price:C.price==="Variable"?"":C.price,rp_multiplier:C.rp_multiplier==="Variable"?"":C.rp_multiplier,type:C.type})},S=C=>{const R={price:d.price===""?"Variable":parseFloat(d.price),rp_multiplier:d.rp_multiplier===""?"Variable":parseFloat(d.rp_multiplier),type:d.type};Bh(C,R)?(x(),r(),u(null)):alert("Failed to update product")},k=()=>{u(null),_({})},I=C=>{const R=i.find(V=>V.id===C);if(!R){alert("Default product not found");return}const j={price:R.price,rp_multiplier:R.rp_multiplier,type:R.type};Bh(C,j)?(x(),r()):alert("Failed to reset product to default")},M=C=>"p_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!m.name.trim()){alert("Product name is required");return}const C=M(m.name);if(o.find(V=>V.id===C)){alert(`Product ID "${C}" already exists. Please use a different name.`);return}const R={id:C,name:m.name.trim(),type:m.type,price:parseFloat(m.price)||0,rp_multiplier:parseFloat(m.rp_multiplier)||1},j=[...o,R];ks(j)?(x(),r(),y(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},P=C=>{var j;if(!window.confirm(`Delete product "${(j=o.find(V=>V.id===C))==null?void 0:j.name}"? This cannot be undone.`))return;const R=o.filter(V=>V.id!==C);ks(R)?(x(),r()):alert("Failed to delete product")};return l.jsxs("div",{children:[l.jsx("div",{style:{marginBottom:"15px"},children:l.jsx("button",{onClick:()=>y(!f),className:"btn btn-primary",style:{width:"100%"},children:f?"Cancel":"+ Add New Product"})}),f&&l.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),l.jsx("input",{type:"text",value:m.name,onChange:C=>h({...m,name:C.target.value}),className:"input",placeholder:"Product name"}),l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",m.name?M(m.name):"p_..."]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),l.jsxs("select",{value:m.type,onChange:C=>h({...m,type:C.target.value}),className:"select",children:[l.jsx("option",{value:"item",children:"Item"}),l.jsx("option",{value:"fluid",children:"Fluid"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),l.jsx("input",{type:"number",value:m.price,onChange:C=>h({...m,price:C.target.value}),className:"input",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),l.jsx("input",{type:"number",step:"0.1",value:m.rp_multiplier,onChange:C=>h({...m,rp_multiplier:C.target.value}),className:"input",placeholder:"1"})]})]}),l.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[l.jsx("div",{children:"Product Name"}),l.jsx("div",{children:"Type"}),l.jsx("div",{children:"Price"}),l.jsx("div",{children:"RP Mult"}),l.jsx("div",{children:"Actions"})]}),w.map(C=>l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),c===C.id?l.jsxs(l.Fragment,{children:[l.jsxs("select",{value:d.type,onChange:R=>_({...d,type:R.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"item",children:"Item"}),l.jsx("option",{value:"fluid",children:"Fluid"})]}),l.jsx("input",{type:"number",value:d.price,onChange:R=>_({...d,price:R.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.price==="Variable",title:C.price==="Variable"?"Cannot edit Variable values":""}),l.jsx("input",{type:"number",value:d.rp_multiplier,onChange:R=>_({...d,rp_multiplier:R.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.rp_multiplier==="Variable",title:C.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{onClick:()=>S(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),l.jsx("button",{onClick:k,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{color:"var(--text-secondary)"},children:C.type}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:C.price==="Variable"?"Variable":`$${fi(C.price)}`}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:C.rp_multiplier==="Variable"?"Variable":`${C.rp_multiplier>=1e3?fi(C.rp_multiplier):C.rp_multiplier}x`}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{onClick:()=>b(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),l.jsx("button",{onClick:()=>I(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),l.jsx("button",{onClick:()=>P(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},FC=({searchTerm:e,defaultMachines:i,onDataChange:r})=>{const[o,a]=F.useState([]),[c,u]=F.useState(null),[d,_]=F.useState({}),[f,y]=F.useState(!1),[m,h]=F.useState({name:"",cost:0,tier:1});F.useEffect(()=>{x()},[]);const x=()=>{a(xa())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,R)=>C.name.localeCompare(R.name)),b=C=>{u(C.id),_({cost:C.cost,tier:C.tier||1})},S=C=>{const R={cost:parseFloat(d.cost),tier:parseInt(d.tier)};Ah(C,R)?(x(),r(),u(null)):alert("Failed to update machine")},k=()=>{u(null),_({})},I=C=>{const R=i.find(V=>V.id===C);if(!R){alert("Default machine not found");return}const j={cost:R.cost,tier:R.tier};Ah(C,j)?(x(),r()):alert("Failed to reset machine to default")},M=C=>"m_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),E=()=>{if(!m.name.trim()){alert("Machine name is required");return}const C=M(m.name);if(o.find(V=>V.id===C)){alert(`Machine ID "${C}" already exists. Please use a different name.`);return}const R={id:C,name:m.name.trim(),cost:parseFloat(m.cost)||0,tier:parseInt(m.tier)||1},j=[...o,R];Ss(j)?(x(),r(),y(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},P=C=>{var j;if(!window.confirm(`Delete machine "${(j=o.find(V=>V.id===C))==null?void 0:j.name}"? This cannot be undone.`))return;const R=o.filter(V=>V.id!==C);Ss(R)?(x(),r()):alert("Failed to delete machine")};return l.jsxs("div",{children:[l.jsx("div",{style:{marginBottom:"15px"},children:l.jsx("button",{onClick:()=>y(!f),className:"btn btn-primary",style:{width:"100%"},children:f?"Cancel":"+ Add New Machine"})}),f&&l.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[l.jsxs("div",{style:{gridColumn:"1 / -1"},children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),l.jsx("input",{type:"text",value:m.name,onChange:C=>h({...m,name:C.target.value}),className:"input",placeholder:"Machine name"}),l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",m.name?M(m.name):"m_..."]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),l.jsx("input",{type:"number",value:m.cost,onChange:C=>h({...m,cost:C.target.value}),className:"input",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),l.jsxs("select",{value:m.tier,onChange:C=>h({...m,tier:C.target.value}),className:"select",children:[l.jsx("option",{value:"1",children:"Tier 1"}),l.jsx("option",{value:"2",children:"Tier 2"}),l.jsx("option",{value:"3",children:"Tier 3"}),l.jsx("option",{value:"4",children:"Tier 4"}),l.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),l.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[l.jsx("div",{children:"Machine Name"}),l.jsx("div",{children:"Cost"}),l.jsx("div",{children:"Tier"}),l.jsx("div",{children:"Actions"})]}),w.map(C=>l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),c===C.id?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"number",value:d.cost,onChange:R=>_({...d,cost:R.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),l.jsx("input",{type:"number",min:"1",max:"5",value:d.tier,onChange:R=>_({...d,tier:R.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{onClick:()=>S(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),l.jsx("button",{onClick:k,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",fi(C.cost)]}),l.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",C.tier||1]}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{onClick:()=>b(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),l.jsx("button",{onClick:()=>I(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),l.jsx("button",{onClick:()=>P(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},DC=({searchTerm:e,defaultRecipes:i,defaultMachines:r,defaultProducts:o,onDataChange:a})=>{const[c,u]=F.useState([]),[d,_]=F.useState([]),[f,y]=F.useState([]),[m,h]=F.useState(null),[x,w]=F.useState(!1);F.useEffect(()=>{b(),S(),k()},[]);const b=()=>{u(Vs())},S=()=>{_(ga())},k=()=>{y(xa())},I=(C,R=!1)=>{if(R){const j=[...c,C];Ms(j)?(b(),S(),k(),a()):alert("Failed to create recipe")}else CC(C.id,C)?(b(),S(),k(),a()):alert("Failed to save recipe")},M=C=>{var j;if(!window.confirm(`Delete recipe "${((j=c.find(V=>V.id===C))==null?void 0:j.name)||C}"? This cannot be undone.`))return;const R=c.filter(V=>V.id!==C);Ms(R)?(b(),S(),k(),a()):alert("Failed to delete recipe")},E=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),w(!0)},P=c.filter(C=>{var R;return((R=C.name)==null?void 0:R.toLowerCase().includes(e.toLowerCase()))||C.id.toLowerCase().includes(e.toLowerCase())}).sort((C,R)=>{const j=C.name||C.id,V=R.name||R.id;return j.localeCompare(V)});return l.jsxs("div",{children:[l.jsx("div",{style:{marginBottom:"15px"},children:l.jsx("button",{onClick:E,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[l.jsx("div",{children:"Recipe Name"}),l.jsx("div",{children:"Machine"}),l.jsx("div",{children:"Cycle Time"}),l.jsx("div",{children:"Power"}),l.jsx("div",{children:"Actions"})]}),P.map(C=>l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name||C.id}),l.jsx("div",{style:{color:(()=>{const R=f.find(j=>j.id===C.machine_id);if(!R)return"var(--text-secondary)";switch(R.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const R=f.find(j=>j.id===C.machine_id);return R?R.name:C.machine_id})()}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.cycle_time=="number"?`${C.cycle_time}s`:String(C.cycle_time)}),l.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.power_consumption=="number"?`${fi(C.power_consumption)}W`:typeof C.power_consumption=="object"&&C.power_consumption!==null?`${fi(C.power_consumption.max||C.power_consumption.average||0)}W`:String(C.power_consumption)}),l.jsxs("div",{style:{display:"flex",gap:"4px"},children:[l.jsx("button",{onClick:()=>{h(C),w(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),l.jsx("button",{onClick:()=>M(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},C.id)),m&&l.jsx(SC,{recipe:m,onClose:()=>{h(null),w(!1)},onSave:C=>I(C,x),availableProducts:d,defaultMachines:f,allRecipes:c,isCreatingNew:x})]})},ds=(e,i)=>{var c,u,d,_,f,y;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const r={nodes:{},products:{},connections:[]},o=e.length;for(let m=0;m<o;m++){const h=e[m],x=h.id,w=(c=h.data)==null?void 0:c.recipe,b=((u=h.data)==null?void 0:u.machineCount)||0,S=(d=h.data)==null?void 0:d.machine;if(!w)return;const k=w.isMineshaftDrill||w.id==="r_mineshaft_drill",I=w.isLogicAssembler||w.id==="r_logic_assembler",M=w.isTreeFarm||w.id==="r_tree_farm",E=S&&S.id==="m_industrial_firebox",P=S&&zi(S.id),C=k||I||M||E||P;let R=w.cycle_time;if(R==="Variable"||typeof R!="number"||R<=0){if(!C)return;R=1}const j=S&&zi(S.id),V=j?Zi[S.id]:null;if(j&&(V==null?void 0:V.type)==="steam_input"&&!(S.id==="m_steam_cracking_plant"&&!lr(w))){const L=w.tempDependentInputTemp??vn;R=Fn(S.id,L,R)}const Q={id:x,recipe:w,machineCount:b,cycleTime:R,isSpecialRecipe:C,isMineshaftDrill:k,isLogicAssembler:I,isTempDependent:j,machineCountMode:((_=h.data)==null?void 0:_.machineCountMode)||"free",cappedMachineCount:(f=h.data)==null?void 0:f.cappedMachineCount,inputs:[],outputs:[]};(y=w.inputs)==null||y.forEach((L,ie)=>{const T=L.product_id;if(T==="p_variableproduct")return;const X=typeof L.quantity=="number"?L.quantity:0;if(L.quantity==="Variable"&&!C)return;const G=k?X*b:X/R*b,Z=Q.inputs.length;Q.inputs.push({productId:T,quantity:X,rate:G,index:Z,recipeIndex:ie,connectedRate:0,temperature:null}),r.products[T]||(r.products[T]={producers:[],consumers:[],connections:[]}),r.products[T].consumers.push({nodeId:x,inputIndex:Z,rate:G})});const z=w.outputs;z==null||z.forEach((L,ie)=>{const T=L.product_id;if(T==="p_variableproduct")return;const X=typeof L.quantity=="number"?L.quantity:0;if(L.quantity==="Variable"&&!C)return;const G=k?X*b:X/R*b,Z=Q.outputs.length;Q.outputs.push({productId:T,quantity:X,rate:G,index:Z,recipeIndex:ie,connectedRate:0,temperature:L.temperature||null}),r.products[T]||(r.products[T]={producers:[],consumers:[],connections:[]}),r.products[T].producers.push({nodeId:x,outputIndex:Z,rate:G})}),r.nodes[x]=Q}const a=i.length;for(let m=0;m<a;m++){const h=i[m],x=r.nodes[h.source],w=r.nodes[h.target];if(!x||!w)continue;const b=parseInt(h.sourceHandle.split("-")[1]),S=parseInt(h.targetHandle.split("-")[1]),k=x.outputs.find(P=>P.recipeIndex===b),I=w.inputs.find(P=>P.recipeIndex===S);if(!k||!I||k.productId!==I.productId)return;const M=k.productId;k.temperature!==void 0&&k.temperature!==null&&(I.temperature=k.temperature);const E={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:k.index,targetInputIndex:I.index,productId:M,sourceRate:k.rate,targetRate:I.rate,flowRate:0,temperature:k.temperature||null};r.connections.push(E),r.products[M]&&r.products[M].connections.push(E)}return r};class zC{constructor(i=100){this.cache=new Map,this.maxSize=i}get(i){if(!this.cache.has(i))return null;const r=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,r),r}set(i,r){if(this.cache.has(i))this.cache.delete(i);else if(this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(i,r)}clear(){this.cache.clear()}}let Np=new zC(100);class LC{constructor(i){this.parent=new Int32Array(i),this.rank=new Int32Array(i);for(let r=0;r<i;r++)this.parent[r]=r}find(i){return this.parent[i]!==i&&(this.parent[i]=this.find(this.parent[i])),this.parent[i]}union(i,r){const o=this.find(i),a=this.find(r);o!==a&&(this.rank[o]<this.rank[a]?this.parent[o]=a:this.rank[o]>this.rank[a]?this.parent[a]=o:(this.parent[a]=o,this.rank[o]++))}}const OC=(e,i)=>{const r=e.products[i];if(!r)return{components:[],portToComponent:new Map};const o=[],a=new Map;r.producers.forEach(y=>{const m=`out:${y.nodeId}:${y.outputIndex}`;a.has(m)||(a.set(m,o.length),o.push({type:"output",nodeId:y.nodeId,index:y.outputIndex,rate:y.rate}))}),r.consumers.forEach(y=>{const m=`in:${y.nodeId}:${y.inputIndex}`;a.has(m)||(a.set(m,o.length),o.push({type:"input",nodeId:y.nodeId,index:y.inputIndex,rate:y.rate}))});const c=new LC(o.length);r.connections.forEach(y=>{const m=`out:${y.sourceNodeId}:${y.sourceOutputIndex}`,h=`in:${y.targetNodeId}:${y.targetInputIndex}`,x=a.get(m),w=a.get(h);x!==void 0&&w!==void 0&&c.union(x,w)});const u=new Map;for(let y=0;y<o.length;y++){const m=c.find(y);u.has(m)||u.set(m,[]),u.get(m).push(y)}const d=[],_=new Map;let f=0;return u.forEach((y,m)=>{const h={id:f,ports:y.map(x=>o[x]),connections:[]};r.connections.forEach(x=>{const w=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,b=a.get(w);b!==void 0&&c.find(b)===m&&h.connections.push(x)}),y.forEach(x=>{const w=o[x],b=w.type==="output"?`out:${w.nodeId}:${w.index}`:`in:${w.nodeId}:${w.index}`;_.set(b,f)}),d.push(h),f++}),{components:d,portToComponent:_,ports:o,portToIndex:a}},BC=e=>{const i=e.ports.map(o=>`${o.type}:${o.nodeId}:${o.index}:${o.rate}`).sort().join("|"),r=e.connections.map(o=>`${o.sourceNodeId}:${o.sourceOutputIndex}->${o.targetNodeId}:${o.targetInputIndex}`).sort().join("|");return`${i}##${r}`},AC=(e,i,r)=>{const o=Ng(e,i),a=jg(e,i),c={totalProduction:o,totalConsumption:a,connectedFlow:0,connections:{}};if(r.length===0)return c;const{components:u,portToComponent:d}=OC(e,i);return u.forEach(_=>{if(_.connections.length===0)return;const f=BC(_),y=`${i}:comp${_.id}`,m=Np.get(y);let h;if(m&&m.hash===f)h=JSON.parse(JSON.stringify(m.result));else{const x=HC(_.connections,o),w=UC(x);h={connectedFlow:0,connections:{}},_.connections.forEach((S,k)=>{const I=w.connectionFlows[k]||0;h.connections[S.id]={flowRate:I,supplyRatio:S.sourceRate>0?I/S.sourceRate:0,demandRatio:S.targetRate>0?I/S.targetRate:0},h.connectedFlow+=I});const b=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});Np.set(y,{hash:f,result:b})}Object.assign(c.connections,h.connections),c.connectedFlow+=h.connectedFlow}),c},$C=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,HC=(e,i)=>{const r=new Map;let o=0;const a=x=>{let w=r.get(x);return w===void 0&&(w=o++,r.set(x,w)),w},c=a("virtual-source"),u=a("virtual-sink"),d=new Map,_=new Map;e.forEach(x=>{const w=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,b=`in:${x.targetNodeId}:${x.targetInputIndex}`;a(w),a(b),d.has(w)||d.set(w,x.sourceRate),_.has(b)||_.set(b,x.targetRate)});const f=Array.from({length:o},()=>[]),y=[],m=i||1e6,h=(x,w,b,S=-1)=>{const k=y.length,I=y.length+1;y.push({to:w,cap:b,flow:0,rev:I,connIndex:S}),y.push({to:x,cap:0,flow:0,rev:k,connIndex:-1}),f[x].push(k),f[w].push(I)};return d.forEach((x,w)=>{h(c,a(w),x)}),_.forEach((x,w)=>{h(a(w),u,x)}),e.forEach((x,w)=>{const b=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,S=`in:${x.targetNodeId}:${x.targetInputIndex}`,k=a(b),I=a(S);h(k,I,m,w)}),{adj:f,edges:y,nodeCount:o,SOURCE:c,SINK:u}};class WC{constructor(i){this.buffer=new Array(i),this.head=0,this.tail=0,this.size=0,this.capacity=i}push(i){this.buffer[this.tail]=i,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const i=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,i}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const UC=e=>{const{adj:i,edges:r,nodeCount:o,SOURCE:a,SINK:c}=e,u=new Int32Array(o),d=new Int32Array(o),_=new WC(o),f=()=>{for(u.fill(-1),u[a]=0,_.clear(),_.push(a);!_.isEmpty();){const S=_.shift(),k=i[S],I=k.length;for(let M=0;M<I;M++){const E=r[k[M]],P=E.cap-E.flow;u[E.to]<0&&P>1e-15&&(u[E.to]=u[S]+1,_.push(E.to))}}return u[c]>=0},y=()=>{const S=[a],k=new Int32Array(o).fill(-1),I=new Uint8Array(o);for(I[a]=1;S.length>0;){const M=S[S.length-1];if(M===c){let C=1e15,R=c;for(;R!==a;){const j=k[R],V=r[j],Q=V.cap-V.flow;C=Math.min(C,Q);let z=!1;for(let L=0;L<o;L++){const ie=i[L];for(let T=0;T<ie.length;T++)if(ie[T]===j){R=L,z=!0;break}if(z)break}}for(R=c;R!==a;){const j=k[R];r[j].flow+=C,r[r[j].rev].flow-=C;let V=!1;for(let Q=0;Q<o;Q++){const z=i[Q];for(let L=0;L<z.length;L++)if(z[L]===j){R=Q,V=!0;break}if(V)break}}return C}let E=!1;const P=i[M];for(let C=d[M];C<P.length;C++){const R=P[C],j=r[R],V=j.cap-j.flow;if(u[M]+1===u[j.to]&&V>1e-15&&!I[j.to]){I[j.to]=1,k[j.to]=R,S.push(j.to),d[M]=C,E=!0;break}}E||(S.pop(),d[M]=P.length)}return 0};let m=0,h=0;const x=1e5;for(;f()&&h++<x;)for(d.fill(0);;){const S=y();if(S===0)break;m+=S}const w=[],b=r.length;for(let S=0;S<b;S++){const k=r[S];k.connIndex>=0&&(w[k.connIndex]=$C(k.flow))}return{totalFlow:m,connectionFlows:w}},Bd=e=>{const i={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(r=>{const o=e.nodes[r];i.byNode[r]={inputFlows:o.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:o.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(r=>{const a=e.products[r].connections;if(a.length===0){i.byProduct[r]={totalProduction:Ng(e,r),totalConsumption:jg(e,r),connectedFlow:0};return}const c=AC(e,r,a);i.byProduct[r]=c,a.forEach(u=>{const d=c.connections[u.id];if(d){i.byConnection[u.id]=d;const _=i.byNode[u.sourceNodeId];_&&(_.outputFlows[u.sourceOutputIndex].connected+=d.flowRate,_.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const f=i.byNode[u.targetNodeId];f&&(f.inputFlows[u.targetInputIndex].connected+=d.flowRate,f.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),i},Ng=(e,i)=>{const r=e.products[i];return r?r.producers.reduce((o,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return o+u.rate},0):0},jg=(e,i)=>{const r=e.products[i];return r?r.consumers.reduce((o,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return o+u.rate},0):0},fn=()=>{Np.clear()},Rn=1e-10,GC=(e,i,r,o)=>{var y,m;const a=new Map,c=new Set,u=(y=e.nodes[r])==null?void 0:y.inputs[o];if(!u)return a;const d=u.productId;if(!e.products[d])return a;const f=[{nodeId:r,inputIndex:o,productId:d}];for(c.add(`${r}:${o}`);f.length>0;){const{nodeId:h,inputIndex:x,productId:w}=f.shift();(((m=e.products[w])==null?void 0:m.connections.filter(S=>S.targetNodeId===h&&S.targetInputIndex===x))||[]).forEach(S=>{var E,P;const k=e.nodes[S.sourceNodeId];if(!k)return;const I=`${S.sourceNodeId}:${S.sourceOutputIndex}`,M=(E=i.byNode[S.sourceNodeId])==null?void 0:E.outputFlows[S.sourceOutputIndex];if(M){a.set(I,{nodeId:S.sourceNodeId,outputIndex:S.sourceOutputIndex,maxFlow:M.produced});const C=k.outputs[S.sourceOutputIndex];if(!C)return;(((P=e.products[C.productId])==null?void 0:P.connections.filter(j=>j.sourceNodeId===S.sourceNodeId&&j.sourceOutputIndex===S.sourceOutputIndex))||[]).forEach(j=>{var z;if(j.targetNodeId===h&&j.targetInputIndex===x)return;const V=`${j.targetNodeId}:${j.targetInputIndex}`;if(c.has(V))return;c.add(V);const Q=(z=e.nodes[j.targetNodeId])==null?void 0:z.inputs[j.targetInputIndex];Q&&f.push({nodeId:j.targetNodeId,inputIndex:j.targetInputIndex,productId:Q.productId})})}})}return a},YC=(e,i)=>{const r=[];return Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],c=i.byNode[o];c&&a.inputs.forEach((u,d)=>{const _=c.inputFlows[d];if(!_)return;const f=_.needed-_.connected;if(f<=Rn)return;if(u.productId,GC(e,i,o,d).forEach((h,x)=>{var V;const w=e.nodes[h.nodeId];if(!w)return;const b=w.machineCount||0;if(b<=0)return;const S=w.machineCountMode||"free";if(S==="locked")return;let k=w.cycleTime;(typeof k!="number"||k<=0)&&(k=1);const I=w.outputs[h.outputIndex];if(!I)return;const M=I.originalQuantity!==void 0?I.originalQuantity:I.quantity;if(typeof M!="number")return;const E=w.isMineshaftDrill?M:M/k;if(typeof E!="number"||E<=Rn)return;const P=(V=i.byNode[h.nodeId])==null?void 0:V.outputFlows[h.outputIndex];if(!P)return;const C=f/E;let R=b+C;if(S==="capped"&&w.cappedMachineCount&&(R=Math.min(R,w.cappedMachineCount),R<=b+Rn))return;const j=w.outputs.length>1&&w.outputs.some((Q,z)=>{if(z===h.outputIndex)return!1;const L=e.products[Q.productId];return!L||!L.connections.some(T=>T.sourceNodeId===h.nodeId&&T.sourceOutputIndex===z)?!1:L.connections.some(T=>T.sourceNodeId!==h.nodeId||T.sourceOutputIndex!==z?!1:L.connections.filter(G=>G.targetNodeId===T.targetNodeId&&G.targetInputIndex===T.targetInputIndex&&G.sourceNodeId!==h.nodeId).length===0)});r.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:I.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:P.produced,targetFlow:P.produced+f,deltaFlow:f,currentMachineCount:b,suggestedMachineCount:R,machineDelta:C,hasConstrainedOutputs:j,isMultiOutput:w.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const h=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof h=="number"&&h>Rn){const x=f/h,w=(a.machineCount||0)-x;w>Rn&&r.push({nodeId:o,handleType:"input",handleIndex:d,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:_.connected,targetFlow:_.connected,deltaFlow:-f,currentMachineCount:a.machineCount||0,suggestedMachineCount:w,machineDelta:-x})}}})}),Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],c=i.byNode[o];if(!c)return;const u=a.machineCount||0;if(u<=0)return;let d=a.cycleTime;(typeof d!="number"||d<=0)&&(d=1),a.outputs.forEach((_,f)=>{var M;const y=c.outputFlows[f];if(!y)return;const m=y.produced-y.connected;if(m<=Rn||(a.machineCountMode||"free")==="locked")return;const x=_.originalQuantity!==void 0?_.originalQuantity:_.quantity,w=a.isMineshaftDrill?x:x/d;if(typeof w!="number"||w<=Rn)return;const b=m/w,S=u-b;S>Rn&&r.push({nodeId:o,handleType:"output",handleIndex:f,productId:_.productId,adjustmentType:"decrease",reason:"excess",currentFlow:y.produced,targetFlow:y.produced-m,deltaFlow:-m,currentMachineCount:u,suggestedMachineCount:S,machineDelta:-b});const k=_.productId;(((M=e.products[k])==null?void 0:M.connections.filter(E=>E.sourceNodeId===o&&E.sourceOutputIndex===f))||[]).forEach(E=>{var ie,T,X,G;const P=e.nodes[E.targetNodeId];if(!P)return;const C=P.machineCount||0;if(C<=0)return;const R=P.machineCountMode||"free";if(R==="locked")return;let j=P.cycleTime;(typeof j!="number"||j<=0)&&(j=1);const V=P.inputs[E.targetInputIndex];if(!V)return;const Q=P.isMineshaftDrill?V.quantity:V.quantity/j;if(typeof Q!="number"||Q<=Rn)return;const z=m/Q;let L=C+z;R==="capped"&&P.cappedMachineCount&&(L=Math.min(L,P.cappedMachineCount),L<=C+Rn)||r.push({nodeId:E.targetNodeId,handleType:"input",handleIndex:E.targetInputIndex,productId:V.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((T=(ie=i.byNode[E.targetNodeId])==null?void 0:ie.inputFlows[E.targetInputIndex])==null?void 0:T.connected)||0,targetFlow:(((G=(X=i.byNode[E.targetNodeId])==null?void 0:X.inputFlows[E.targetInputIndex])==null?void 0:G.connected)||0)+m,deltaFlow:m,currentMachineCount:C,suggestedMachineCount:L,machineDelta:z})})})}),r.forEach(o=>{const a=Math.round(o.suggestedMachineCount*1e10)/1e10,c=Math.round(o.suggestedMachineCount*1e20)/1e20,u=Math.abs(c-a)>1e-12;o.suggestedMachineCount=u?Math.round(o.suggestedMachineCount*1e20)/1e20:Math.round(o.suggestedMachineCount*1e10)/1e10;const d=Math.round(o.machineDelta*1e10)/1e10,_=Math.round(o.machineDelta*1e20)/1e20,f=Math.abs(_-d)>1e-12;o.machineDelta=f?Math.round(o.machineDelta*1e20)/1e20:Math.round(o.machineDelta*1e10)/1e10}),r},Zl=(e,i)=>{const r=[],o=[];Object.keys(e.products).forEach(u=>{const d=e.products[u],_=i.byProduct[u];if(!_)return;const f=_.totalProduction,y=_.connectedFlow,m=f-y;if(Math.abs(m)>1e-6&&m>0){const h=ht(u);h&&r.push({productId:u,product:h,excessRate:m,totalProduction:f,connectedConsumption:y,percentageExcess:f>0?m/f*100:0})}d.consumers.forEach(h=>{var w;const x=(w=i.byNode[h.nodeId])==null?void 0:w.inputFlows[h.inputIndex];if(x){const b=x.needed-x.connected;if(Math.abs(b)>1e-6&&b>0){const S=ht(u);if(S){let k=o.find(I=>I.productId===u);k?(k.deficiencyRate+=b,k.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:b})):o.push({productId:u,product:S,deficiencyRate:b,totalConsumption:_.totalConsumption,connectedProduction:y,percentageDeficient:_.totalConsumption>0?b/_.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:b}]})}}}})}),r.sort((u,d)=>d.excessRate-u.excessRate),o.sort((u,d)=>d.deficiencyRate-u.deficiencyRate);const c=r.length>0||o.length>0?YC(e,i):[];return{excess:r,deficiency:o,suggestions:c}},$h=(e,i,r={})=>{const{skipTemperature:o=!1,previousTemperatureData:a=null}=r,c=ds(e,i),u=Bd(c);if(o){const I=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Zl(c,u),graph:c,flows:u,temperatureData:I}}if(!Object.values(c.nodes).some(I=>{const M=I.recipe.machine_id;return ri[M]||zi(M)})){const I={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Zl(c,u),graph:c,flows:u,temperatureData:I}}const _=Eh(c,u),f=yp(e,_,c);if(!f.some((I,M)=>{var z,L,ie,T,X,G,Z,H;const E=e[M],P=(L=(z=E.data)==null?void 0:z.recipe)==null?void 0:L.tempDependentInputTemp,C=(T=(ie=I.data)==null?void 0:ie.recipe)==null?void 0:T.tempDependentInputTemp,R=(G=(X=E.data)==null?void 0:X.recipe)==null?void 0:G.outputs.map(U=>U.temperature).filter(U=>U!==void 0),j=(H=(Z=I.data)==null?void 0:Z.recipe)==null?void 0:H.outputs.map(U=>U.temperature).filter(U=>U!==void 0),V=Math.abs((P||0)-(C||0))>.1,Q=R.length!==j.length||R.some((U,te)=>Math.abs((U||0)-(j[te]||0))>.1);return V||Q}))return{...Zl(c,u),graph:c,flows:u,temperatureData:_};const m=ds(f,i),h=Bd(m),x=Eh(m,h),w=yp(f,x,m),b=ds(w,i),S=Bd(b);return{...Zl(b,S),graph:b,flows:S,temperatureData:x}},KC=e=>e.excess||[],QC=e=>e.deficiency||[],XC=(e,i,r,o,a,c,u)=>{if(!r||!i)return 1;const d=i.data.recipe,_=i.data.machineCount||0,f=pt(d.machine_id);let y=d.cycle_time;if((typeof y!="number"||y<=0)&&(y=1),f&&zi(f.id)){const S=Zi[f.id];if((S==null?void 0:S.type)==="steam_input"&&(f.id!=="m_steam_cracking_plant"||lr(d))){const k=d.tempDependentInputTemp??vn;y=Fn(f.id,k,y)}}const m=Pg(e,r,null,a,c,o);let h=m.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const x=pt(m.machine_id);if(x&&zi(x.id)){const S=Zi[x.id];if((S==null?void 0:S.type)==="steam_input"&&(x.id!=="m_steam_cracking_plant"||lr(m))){const k=m.tempDependentInputTemp??vn;h=Fn(x.id,k,h)}}let w=0,b=!1;if(u&&u.byNode&&u.byNode[i.id]){const S=u.byNode[i.id];if(r.isOutput){const k=S.outputFlows[r.outputIndex];if(k){b=!0;const I=k.produced-k.connected;w=Math.max(0,I)}}else{const k=S.inputFlows[r.inputIndex];if(k){b=!0;const I=k.needed-k.connected;w=Math.max(0,I)}}}if(b&&w===0)return 0;if(!b)if(r.isOutput){const S=d.outputs[r.outputIndex];if(S){const k=S.originalQuantity!==void 0?S.originalQuantity:S.quantity;typeof k=="number"&&(w=k/y*_)}}else{const S=d.inputs[r.inputIndex];S&&typeof S.quantity=="number"&&(w=S.quantity/y*_)}if(r.isOutput){const S=m.inputs.find(k=>k.product_id===r.productId);if(S&&typeof S.quantity=="number"&&S.quantity>0){const k=S.quantity/h;return w/k}}else{const S=m.outputs.find(k=>k.product_id===r.productId);if(S){const k=S.originalQuantity!==void 0?S.originalQuantity:S.quantity;if(typeof k=="number"&&k>0){const I=k/h;return w/I}}}return 1},Pg=(e,i,r,o,a,c)=>{var _,f,y,m,h,x,w,b,S,k,I,M;let u={...e};const d=pt(e.machine_id);if(!Tg(u))return u;if((d==null?void 0:d.id)==="m_industrial_firebox"&&kg(e.id)){const E=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let P=((_=o==null?void 0:o.fireboxConfig)==null?void 0:_.fuel)||"p_coke_fuel";const C=(i==null?void 0:i.productId)||(r==null?void 0:r.id);C&&E.includes(C)&&(P=C);const R=Mu(e.id,P);return R&&(u={...u,inputs:wp(e.inputs,P,e.id),fireboxSettings:{fuel:P},cycle_time:R.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const E=((f=o==null?void 0:o.drillConfig)==null?void 0:f.drillHead)||"steel",P=((y=o==null?void 0:o.drillConfig)==null?void 0:y.consumable)||"hydrochloric_acid",C=((m=o==null?void 0:o.drillConfig)==null?void 0:m.machineOil)!==void 0?o.drillConfig.machineOil:!0,R=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],j={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let V=E,Q=100;const z=(i==null?void 0:i.productId)||(r==null?void 0:r.id);if(z)if(R.includes(z))V=j[z];else if(i!=null&&i.isOutput)Q=100;else{const X=c(z,V,P,C);X&&(Q=X)}const L=dg(V,P,C,Q),ie=pg(V,P,C,Q),T=Mo(V,P,C,Q);return u={...u,inputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:ie.length>0?ie:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:V,consumable:P,machineOil:C,depth:Q},cycle_time:1,power_consumption:T?{max:T.drillingPower*1e6,average:(T.drillingPower*T.lifeTime+T.idlePower*(T.replacementTime+T.travelTime))/T.totalCycleTime*1e6}:"Variable",pollution:T?T.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const E=((h=o==null?void 0:o.assemblerConfig)==null?void 0:h.outerStage)||1,P=((x=o==null?void 0:o.assemblerConfig)==null?void 0:x.innerStage)||2,C=((w=o==null?void 0:o.assemblerConfig)==null?void 0:w.machineOil)!==void 0?o.assemblerConfig.machineOil:!0,R=((b=o==null?void 0:o.assemblerConfig)==null?void 0:b.tickCircuitDelay)||0;let j=E===1?`p_${P}x_microchip`:`p_${E}x${P}x_microchip`;const V=(i==null?void 0:i.productId)||(r==null?void 0:r.id);V&&V.includes("microchip")&&(j=V);const Q=mg(j,C),z=fg(j,C),L=Rs(j,C,R),ie=j.match(/p_(?:(\d+)x)?(\d+)x_microchip/),T=ie&&ie[1]?parseInt(ie[1]):1,X=ie?parseInt(ie[2]):P;return u={...u,inputs:Q.length>0?Q:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:T,innerStage:X,machineOil:C,tickCircuitDelay:R},cycle_time:L?L.cycleTime:"Variable",power_consumption:L?{max:L.maxPowerConsumption,average:L.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const E=((S=o==null?void 0:o.treeFarmConfig)==null?void 0:S.trees)||450,P=((k=o==null?void 0:o.treeFarmConfig)==null?void 0:k.harvesters)||20,C=((I=o==null?void 0:o.treeFarmConfig)==null?void 0:I.sprinklers)||24,R=((M=o==null?void 0:o.treeFarmConfig)==null?void 0:M.outputs)||8,j=1,V=vg(C),Q=n_(E,P,a),z=Su(E,P,C,R,j,a);return u={...u,inputs:V.length>0?V:[{product_id:"p_water",quantity:"Variable"}],outputs:Q.length>0?Q:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:E,harvesters:P,sprinklers:C,outputs:R,controller:j},cycle_time:1,power_consumption:z?z.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let E="p_any_item",P="p_any_fluid";const C=(i==null?void 0:i.productId)||(r==null?void 0:r.id);if(C)if(C==="p_concrete_block"||C==="p_lead_ingot")E="p_fission_byproducts",P="p_depleted_uf6_waste";else{const V=ht(C);(V==null?void 0:V.type)==="item"?(E=C,P="p_any_fluid"):(V==null?void 0:V.type)==="fluid"&&(E="p_any_item",P=C)}else E="p_fission_byproducts",P="p_depleted_uf6_waste";const R=Cu(0,0,E,P),j=su(0,0);return u={...u,inputs:R,outputs:[],wasteFacilitySettings:{itemProductId:E,fluidProductId:P,itemFlowRate:0,fluidFlowRate:0},cycle_time:j.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let E=["p_water","p_residue"];const P=(i==null?void 0:i.productId)||(r==null?void 0:r.id);if(P){const j=ht(P);(j==null?void 0:j.type)==="fluid"&&(E=[P,P])}const C=Sp(E),R=ls(C);return u={...u,inputs:C,outputs:[],liquidDumpSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:R},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let E=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const P=(i==null?void 0:i.productId)||(r==null?void 0:r.id);if(P){const j=ht(P);(j==null?void 0:j.type)==="fluid"&&(E=Array(8).fill(P))}const C=Cp(E),R=us(C);return u={...u,inputs:C,outputs:[],liquidBurnerSettings:{fluidProductIds:E},cycle_time:1,power_consumption:0,pollution:R},u}return u},ZC=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],JC=e=>{if(e==="r_mineshaft_drill"){const i=new Set;return Object.values(bs).forEach(r=>{r.forEach(o=>i.add(o.product_id))}),Array.from(i)}return e==="r_logic_assembler"?_g.map(i=>i.productId):e==="r_tree_farm"?["p_oak_log"]:[]},Tg=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&kg(e.id),Hh=1e-10,eq=(e,i,r,o,a,c=null)=>{if(i<Hh)return new Map([[e,r]]);const u=r/i,d=new Map;d.set(e,r);const _=new Map;_.set(e,u);const f=new Set([e]),y=[e];for(;y.length>0;){const w=y.shift(),b=o.nodes[w];b&&(b.outputs.forEach(S=>{var I;(((I=o.products[S.productId])==null?void 0:I.connections.filter(M=>M.sourceNodeId===w))||[]).forEach(M=>{f.has(M.targetNodeId)||(f.add(M.targetNodeId),y.push(M.targetNodeId))})}),b.inputs.forEach(S=>{var I;(((I=o.products[S.productId])==null?void 0:I.connections.filter(M=>M.targetNodeId===w))||[]).forEach(M=>{f.has(M.sourceNodeId)||(f.add(M.sourceNodeId),y.push(M.sourceNodeId))})}))}const m=10;let h=0,x=!0;for(;x&&h<m;)x=!1,h++,f.forEach(w=>{var R;if(w===e)return;const b=o.nodes[w];if(!b)return;const S=(R=c==null?void 0:c.find(j=>j.id===w))==null?void 0:R.data,k=(S==null?void 0:S.machineCountMode)||b.machineCountMode||"free";if(k==="locked")return;const I=b.machineCount||0;if(I<Hh)return;const M=[],E=[];if(b.outputs.forEach((j,V)=>{var z;(((z=o.products[j.productId])==null?void 0:z.connections.filter(L=>L.sourceNodeId===w&&L.sourceOutputIndex===V))||[]).forEach(L=>{const ie=_.get(L.targetNodeId);ie!==void 0&&(M.push(ie),E.push({type:"output",productId:j.productId,targetNodeId:L.targetNodeId,ratio:ie}))})}),b.inputs.forEach((j,V)=>{var z;(((z=o.products[j.productId])==null?void 0:z.connections.filter(L=>L.targetNodeId===w&&L.targetInputIndex===V))||[]).forEach(L=>{const ie=_.get(L.sourceNodeId);ie!==void 0&&(M.push(ie),E.push({type:"input",productId:j.productId,sourceNodeId:L.sourceNodeId,ratio:ie}))})}),M.length===0)return;const P=Math.max(...M),C=_.get(w)||1;if(Math.abs(P-C)>1e-4){_.set(w,P);let j=I*P;if(k==="capped"){const V=(S==null?void 0:S.cappedMachineCount)||b.cappedMachineCount;typeof V=="number"&&(j=Math.min(j,V))}d.set(w,j),x=!0}});return d};var Wh={},Ad,Uh;function Rg(){if(Uh)return Ad;Uh=1;function e(i,r,o,a){this.feasible=o,this.evaluation=r,this.bounded=a,this._tableau=i}return Ad=e,e.prototype.generateSolutionSet=function(){for(var i={},r=this._tableau,o=r.varIndexByRow,a=r.variablesPerIndex,c=r.matrix,u=r.rhsColumn,d=r.height-1,_=Math.round(1/r.precision),f=1;f<=d;f+=1){var y=o[f],m=a[y];if(!(m===void 0||m.isSlack===!0)){var h=c[f][u];i[m.id]=Math.round((Number.EPSILON+h)*_)/_}}return i},Ad}var $d,Gh;function tq(){if(Gh)return $d;Gh=1;var e=Rg();function i(r,o,a,c,u){e.call(this,r,o,a,c),this.iter=u}return $d=i,i.prototype=Object.create(e.prototype),i.constructor=i,$d}var Hd,Yh;function On(){if(Yh)return Hd;Yh=1;var e=Rg(),i=tq();function r(a){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=a||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Hd=r,r.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function o(a,c){this.priority=a,this.reducedCosts=new Array(c);for(var u=0;u<c;u+=1)this.reducedCosts[u]=0}return o.prototype.copy=function(){var a=new o(this.priority,this.reducedCosts.length);return a.reducedCosts=this.reducedCosts.slice(),a},r.prototype.setOptionalObjective=function(a,c,u){var d=this.objectivesByPriority[a];if(d===void 0){var _=Math.max(this.width,c+1);d=new o(a,_),this.objectivesByPriority[a]=d,this.optionalObjectives.push(d),this.optionalObjectives.sort(function(f,y){return f.priority-y.priority})}d.reducedCosts[c]=u},r.prototype.initialize=function(a,c,u,d){this.variables=u,this.unrestrictedVars=d,this.width=a,this.height=c;for(var _=new Array(a),f=0;f<a;f++)_[f]=0;this.matrix=new Array(c);for(var y=0;y<c;y++)this.matrix[y]=_.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=a+c-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},r.prototype._resetMatrix=function(){var a=this.model.variables,c=this.model.constraints,u=a.length,d=c.length,_,f,y=this.matrix[0],m=this.model.isMinimization===!0?-1:1;for(_=0;_<u;_+=1){var h=a[_],x=h.priority,w=m*h.cost;x===0?y[_+1]=w:this.setOptionalObjective(x,_+1,w),f=a[_].index,this.rowByVarIndex[f]=-1,this.colByVarIndex[f]=_+1,this.varIndexByCol[_+1]=f}for(var b=1,S=0;S<d;S+=1){var k=c[S],I=k.index;this.rowByVarIndex[I]=b,this.colByVarIndex[I]=-1,this.varIndexByRow[b]=I;var M,E,P,C=k.terms,R=C.length,j=this.matrix[b++];if(k.isUpperBound){for(M=0;M<R;M+=1)E=C[M],P=this.colByVarIndex[E.variable.index],j[P]=E.coefficient;j[0]=k.rhs}else{for(M=0;M<R;M+=1)E=C[M],P=this.colByVarIndex[E.variable.index],j[P]=-E.coefficient;j[0]=-k.rhs}}},r.prototype.setModel=function(a){this.model=a;var c=a.nVariables+1,u=a.nConstraints+1;return this.initialize(c,u,a.variables,a.unrestrictedVariables),this._resetMatrix(),this},r.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},r.prototype.density=function(){for(var a=0,c=this.matrix,u=0;u<this.height;u++)for(var d=c[u],_=0;_<this.width;_++)d[_]!==0&&(a+=1);return a/(this.height*this.width)},r.prototype.setEvaluation=function(){var a=Math.round(1/this.precision),c=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+c)*a)/a;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},r.prototype.getSolution=function(){var a=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new i(this,a,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,a,this.feasible,this.bounded)},Hd}var Kh;function iq(){if(Kh)return Wh;Kh=1;var e=On();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var r=this.model.checkForCycles,o=[],a=this.matrix,c=this.rhsColumn,u=this.width-1,d=this.height-1,_,f=0;;){for(var y=0,m=-this.precision,h=1;h<=d;h++){_=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var x=a[h][c];x<m&&(m=x,y=h)}if(y===0)return this.feasible=!0,f;for(var w=0,b=-1/0,S=a[0],k=a[y],I=1;I<=u;I++){var M=k[I];if(_=this.unrestrictedVars[this.varIndexByCol[I]]===!0,_||M<-this.precision){var E=-S[I]/M;b<E&&(b=E,w=I)}}if(w===0)return this.feasible=!1,f;if(r){o.push([this.varIndexByRow[y],this.varIndexByCol[w]]);var P=this.checkForCycles(o);if(P.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+P[0]),this.model.messages.push("Length :"+P[1]),this.feasible=!1,f}this.pivot(y,w),f+=1}},e.prototype.phase2=function(){for(var r=this.model.checkForCycles,o=[],a=this.matrix,c=this.rhsColumn,u=this.width-1,d=this.height-1,_=this.precision,f=this.optionalObjectives.length,y=null,m=0,h,x;;){var w=a[this.costRowIndex];f>0&&(y=[]);for(var b=0,S=_,k=!1,I=1;I<=u;I++){if(h=w[I],x=this.unrestrictedVars[this.varIndexByCol[I]]===!0,f>0&&-_<h&&h<_){y.push(I);continue}if(x&&h<0){-h>S&&(S=-h,b=I,k=!0);continue}h>S&&(S=h,b=I,k=!1)}if(f>0)for(var M=0;b===0&&y.length>0&&M<f;){var E=[],P=this.optionalObjectives[M].reducedCosts;S=_;for(var C=0;C<y.length;C++){if(I=y[C],h=P[I],x=this.unrestrictedVars[this.varIndexByCol[I]]===!0,-_<h&&h<_){E.push(I);continue}if(x&&h<0){-h>S&&(S=-h,b=I,k=!0);continue}h>S&&(S=h,b=I,k=!1)}y=E,M+=1}if(b===0)return this.setEvaluation(),this.simplexIters+=1,m;var R=0,j=1/0;this.varIndexByRow;for(var V=1;V<=d;V++){var Q=a[V],z=Q[c],L=Q[b];if(!(-_<L&&L<_)){if(L>0&&_>z&&z>-_){j=0,R=V;break}var ie=k?-z/L:z/L;ie>_&&j>ie&&(j=ie,R=V)}}if(j===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[b],m;if(r){o.push([this.varIndexByRow[R],this.varIndexByCol[b]]);var T=this.checkForCycles(o);if(T.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+T[0]),this.model.messages.push("Length :"+T[1]),this.feasible=!1,m}this.pivot(R,b,!0),m+=1}};var i=[];return e.prototype.pivot=function(r,o){var a=this.matrix,c=a[r][o],u=this.height-1,d=this.width-1,_=this.varIndexByRow[r],f=this.varIndexByCol[o];this.varIndexByRow[r]=f,this.varIndexByCol[o]=_,this.rowByVarIndex[f]=r,this.rowByVarIndex[_]=-1,this.colByVarIndex[f]=-1,this.colByVarIndex[_]=o;for(var y=a[r],m=0,h=0;h<=d;h++)y[h]>=-1e-16&&y[h]<=1e-16?y[h]=0:(y[h]/=c,i[m]=h,m+=1);y[o]=1/c;var x,w,b;this.precision;for(var S=0;S<=u;S++)if(S!==r&&!(a[S][o]>=-1e-16&&a[S][o]<=1e-16)){var k=a[S];if(x=k[o],x>=-1e-16&&x<=1e-16)x!==0&&(k[o]=0);else{for(w=0;w<m;w++)h=i[w],b=y[h],b>=-1e-16&&b<=1e-16?b!==0&&(y[h]=0):k[h]=k[h]-x*b;k[o]=-x/c}}var I=this.optionalObjectives.length;if(I>0)for(var M=0;M<I;M+=1){var E=this.optionalObjectives[M].reducedCosts;if(x=E[o],x!==0){for(w=0;w<m;w++)h=i[w],b=y[h],b!==0&&(E[h]=E[h]-x*b);E[o]=-x/c}}},e.prototype.checkForCycles=function(r){for(var o=0;o<r.length-1;o++)for(var a=o+1;a<r.length;a++){var c=r[o],u=r[a];if(c[0]===u[0]&&c[1]===u[1]){if(a-o>r.length-a)break;for(var d=!0,_=1;_<a-o;_++){var f=r[o+_],y=r[a+_];if(f[0]!==y[0]||f[1]!==y[1]){d=!1;break}}if(d)return[o,a-o]}}return[]},Wh}var Qh={},Wd,Xh;function s_(){if(Xh)return Wd;Xh=1;function e(d,_,f,y){this.id=d,this.cost=_,this.index=f,this.value=0,this.priority=y}function i(d,_,f,y){e.call(this,d,_,f,y)}i.prototype.isInteger=!0;function r(d,_){e.call(this,d,0,_,0)}r.prototype.isSlack=!0;function o(d,_){this.variable=d,this.coefficient=_}function a(d,_,f){return f===0||f==="required"?null:(_=_||1,f=f||1,d.isMinimization===!1&&(_=-_),d.addVariable(_,"r"+d.relaxationIndex++,!1,!1,f))}function c(d,_,f,y){this.slack=new r("s"+f,f),this.index=f,this.model=y,this.rhs=d,this.isUpperBound=_,this.terms=[],this.termsByVarIndex={},this.relaxation=null}c.prototype.addTerm=function(d,_){var f=_.index,y=this.termsByVarIndex[f];if(y===void 0)y=new o(_,d),this.termsByVarIndex[f]=y,this.terms.push(y),this.isUpperBound===!0&&(d=-d),this.model.updateConstraintCoefficient(this,_,d);else{var m=y.coefficient+d;this.setVariableCoefficient(m,_)}return this},c.prototype.removeTerm=function(d){return this},c.prototype.setRightHandSide=function(d){if(d!==this.rhs){var _=d-this.rhs;this.isUpperBound===!0&&(_=-_),this.rhs=d,this.model.updateRightHandSide(this,_)}return this},c.prototype.setVariableCoefficient=function(d,_){var f=_.index;if(f===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var y=this.termsByVarIndex[f];if(y===void 0)this.addTerm(d,_);else if(d!==y.coefficient){var m=d-y.coefficient;this.isUpperBound===!0&&(m=-m),y.coefficient=d,this.model.updateConstraintCoefficient(this,_,m)}return this},c.prototype.relax=function(d,_){this.relaxation=a(this.model,d,_),this._relax(this.relaxation)},c.prototype._relax=function(d){d!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,d):this.setVariableCoefficient(1,d))};function u(d,_){this.upperBound=d,this.lowerBound=_,this.model=d.model,this.rhs=d.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(d,_){return this.upperBound.addTerm(d,_),this.lowerBound.addTerm(d,_),this},u.prototype.removeTerm=function(d){return this.upperBound.removeTerm(d),this.lowerBound.removeTerm(d),this},u.prototype.setRightHandSide=function(d){this.upperBound.setRightHandSide(d),this.lowerBound.setRightHandSide(d),this.rhs=d},u.prototype.relax=function(d,_){this.relaxation=a(this.model,d,_),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Wd={Constraint:c,Variable:e,IntegerVariable:i,SlackVariable:r,Equality:u,Term:o},Wd}var Zh;function nq(){if(Zh)return Qh;Zh=1;var e=On(),i=s_().SlackVariable;return e.prototype.addCutConstraints=function(r){for(var o=r.length,a=this.height,c=a+o,u=a;u<c;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=c,this.nVars=this.width+this.height-2;for(var d,_=this.width-1,f=0;f<o;f+=1){var y=r[f],m=a+f,h=y.type==="min"?-1:1,x=y.varIndex,w=this.rowByVarIndex[x],b=this.matrix[m];if(w===-1){for(b[this.rhsColumn]=h*y.value,d=1;d<=_;d+=1)b[d]=0;b[this.colByVarIndex[x]]=h}else{var S=this.matrix[w],k=S[this.rhsColumn];for(b[this.rhsColumn]=h*(y.value-k),d=1;d<=_;d+=1)b[d]=-h*S[d]}var I=this.getNewElementIndex();this.varIndexByRow[m]=I,this.rowByVarIndex[I]=m,this.colByVarIndex[I]=-1,this.variablesPerIndex[I]=new i("s"+I,I),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[r]];if(!a.isInteger)return!1;var c=o[r][this.rhsColumn],u=c-Math.floor(c);if(u<this.precision||1-this.precision<u)return!1;var d=this.height;o[d]=o[d-1].slice(),this.height+=1,this.nVars+=1;var _=this.getNewElementIndex();this.varIndexByRow[d]=_,this.rowByVarIndex[_]=d,this.colByVarIndex[_]=-1,this.variablesPerIndex[_]=new i("s"+_,_),o[d][this.rhsColumn]=Math.floor(c);for(var f=1;f<this.varIndexByCol.length;f+=1){var y=this.variablesPerIndex[this.varIndexByCol[f]];if(!y.isInteger)o[d][f]=Math.min(0,o[r][f]/(1-u));else{var m=o[r][f],h=Math.floor(m)+Math.max(0,m-Math.floor(m)-u)/(1-u);o[d][f]=h}}for(var x=0;x<this.width;x+=1)o[d][x]-=o[r][x];return!0},e.prototype._addUpperBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[r]];if(!a.isInteger)return!1;var c=o[r][this.rhsColumn],u=c-Math.floor(c);if(u<this.precision||1-this.precision<u)return!1;var d=this.height;o[d]=o[d-1].slice(),this.height+=1,this.nVars+=1;var _=this.getNewElementIndex();this.varIndexByRow[d]=_,this.rowByVarIndex[_]=d,this.colByVarIndex[_]=-1,this.variablesPerIndex[_]=new i("s"+_,_),o[d][this.rhsColumn]=-u;for(var f=1;f<this.varIndexByCol.length;f+=1){var y=this.variablesPerIndex[this.varIndexByCol[f]],m=o[r][f],h=m-Math.floor(m);y.isInteger?h<=u?o[d][f]=-h:o[d][f]=-(1-h)*u/h:m>=0?o[d][f]=-m:o[d][f]=m*u/(1-u)}return!0},e.prototype.applyMIRCuts=function(){},Qh}var Jh={},e0;function rq(){if(e0)return Jh;e0=1;var e=On();return e.prototype._putInBase=function(i){var r=this.rowByVarIndex[i];if(r===-1){for(var o=this.colByVarIndex[i],a=1;a<this.height;a+=1){var c=this.matrix[a][o];if(c<-this.precision||this.precision<c){r=a;break}}this.pivot(r,o)}return r},e.prototype._takeOutOfBase=function(i){var r=this.colByVarIndex[i];if(r===-1){for(var o=this.rowByVarIndex[i],a=this.matrix[o],c=1;c<this.height;c+=1){var u=a[c];if(u<-this.precision||this.precision<u){r=c;break}}this.pivot(o,r)}return r},e.prototype.updateVariableValues=function(){for(var i=this.variables.length,r=Math.round(1/this.precision),o=0;o<i;o+=1){var a=this.variables[o],c=a.index,u=this.rowByVarIndex[c];if(u===-1)a.value=0;else{var d=this.matrix[u][this.rhsColumn];a.value=Math.round((d+Number.EPSILON)*r)/r}}},e.prototype.updateRightHandSide=function(i,r){var o=this.height-1,a=this.rowByVarIndex[i.index];if(a===-1){for(var c=this.colByVarIndex[i.index],u=0;u<=o;u+=1){var d=this.matrix[u];d[this.rhsColumn]-=r*d[c]}var _=this.optionalObjectives.length;if(_>0)for(var f=0;f<_;f+=1){var y=this.optionalObjectives[f].reducedCosts;y[this.rhsColumn]-=r*y[c]}}else this.matrix[a][this.rhsColumn]-=r},e.prototype.updateConstraintCoefficient=function(i,r,o){if(i.index===r.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var a=this._putInBase(i.index),c=this.colByVarIndex[r.index];if(c===-1)for(var u=this.rowByVarIndex[r.index],d=0;d<this.width;d+=1)this.matrix[a][d]+=o*this.matrix[u][d];else this.matrix[a][c]-=o},e.prototype.updateCost=function(i,r){var o=i.index,a=this.width-1,c=this.colByVarIndex[o];if(c===-1){var u=this.matrix[this.rowByVarIndex[o]],d;if(i.priority===0){var _=this.matrix[0];for(d=0;d<=a;d+=1)_[d]+=r*u[d]}else{var f=this.objectivesByPriority[i.priority].reducedCosts;for(d=0;d<=a;d+=1)f[d]+=r*u[d]}}else this.matrix[0][c]-=r},e.prototype.addConstraint=function(i){var r=i.isUpperBound?1:-1,o=this.height,a=this.matrix[o];a===void 0&&(a=this.matrix[0].slice(),this.matrix[o]=a);for(var c=this.width-1,u=0;u<=c;u+=1)a[u]=0;a[this.rhsColumn]=r*i.rhs;for(var d=i.terms,_=d.length,f=0;f<_;f+=1){var y=d[f],m=y.coefficient,h=y.variable.index,x=this.rowByVarIndex[h];if(x===-1)a[this.colByVarIndex[h]]+=r*m;else{var w=this.matrix[x];for(w[this.rhsColumn],u=0;u<=c;u+=1)a[u]-=r*m*w[u]}}var b=i.index;this.varIndexByRow[o]=b,this.rowByVarIndex[b]=o,this.colByVarIndex[b]=-1,this.height+=1},e.prototype.removeConstraint=function(i){var r=i.index,o=this.height-1,a=this._putInBase(r),c=this.matrix[o];this.matrix[o]=this.matrix[a],this.matrix[a]=c,this.varIndexByRow[a]=this.varIndexByRow[o],this.varIndexByRow[o]=-1,this.rowByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,i.slack.index=-1,this.height-=1},e.prototype.addVariable=function(i){var r=this.height-1,o=this.width,a=this.model.isMinimization===!0?-i.cost:i.cost,c=i.priority,u=this.optionalObjectives.length;if(u>0)for(var d=0;d<u;d+=1)this.optionalObjectives[d].reducedCosts[o]=0;c===0?this.matrix[0][o]=a:(this.setOptionalObjective(c,o,a),this.matrix[0][o]=0);for(var _=1;_<=r;_+=1)this.matrix[_][o]=0;var f=i.index;this.varIndexByCol[o]=f,this.rowByVarIndex[f]=-1,this.colByVarIndex[f]=o,this.width+=1},e.prototype.removeVariable=function(i){var r=i.index,o=this._takeOutOfBase(r),a=this.width-1;if(o!==a){for(var c=this.height-1,u=0;u<=c;u+=1){var d=this.matrix[u];d[o]=d[a]}var _=this.optionalObjectives.length;if(_>0)for(var f=0;f<_;f+=1){var y=this.optionalObjectives[f].reducedCosts;y[o]=y[a]}var m=this.varIndexByCol[a];this.varIndexByCol[o]=m,this.colByVarIndex[m]=o}this.varIndexByCol[a]=-1,this.colByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,i.index=-1,this.width-=1},Jh}var t0={},i0;function oq(){if(i0)return t0;i0=1;var e=On();return e.prototype.log=function(i,r){console.log("****",i,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var o=5,a="",c=[" "],u,d,_,f,y,m,h,x,w,b,S;for(d=1;d<this.width;d+=1)y=this.varIndexByCol[d],f=this.variablesPerIndex[y],f===void 0?m="c"+y:m=f.id,h=m.length,x=" ",w="	",h>5?x+=" ":w+="	",c[d]=x,a+=w+m;console.log(a);var k,I=this.matrix[this.costRowIndex],M="	";for(u=1;u<this.width;u+=1)k="	",M+=k,M+=c[u],M+=I[u].toFixed(o);for(k="	",M+=k+c[0]+I[0].toFixed(o),console.log(M+"	Z"),_=1;_<this.height;_+=1){for(b=this.matrix[_],S="	",d=1;d<this.width;d+=1)k="	",S+=k+c[d]+b[d].toFixed(o);k="	",S+=k+c[0]+b[0].toFixed(o),y=this.varIndexByRow[_],f=this.variablesPerIndex[y],f===void 0?m="c"+y:m=f.id,console.log(S+"	"+m)}console.log("");var E=this.optionalObjectives.length;if(E>0){console.log("    Optional objectives:");for(var P=0;P<E;P+=1){var C=this.optionalObjectives[P].reducedCosts,R="";for(u=1;u<this.width;u+=1)k=C[u]<0?"":" ",R+=k,R+=c[u],R+=C[u].toFixed(o);k=C[0]<0?"":" ",R+=k+c[0]+C[0].toFixed(o),console.log(R+" z"+P)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},t0}var n0={},r0;function aq(){if(r0)return n0;r0=1;var e=On();return e.prototype.copy=function(){var i=new e(this.precision);i.width=this.width,i.height=this.height,i.nVars=this.nVars,i.model=this.model,i.variables=this.variables,i.variablesPerIndex=this.variablesPerIndex,i.unrestrictedVars=this.unrestrictedVars,i.lastElementIndex=this.lastElementIndex,i.varIndexByRow=this.varIndexByRow.slice(),i.varIndexByCol=this.varIndexByCol.slice(),i.rowByVarIndex=this.rowByVarIndex.slice(),i.colByVarIndex=this.colByVarIndex.slice(),i.availableIndexes=this.availableIndexes.slice();for(var r=[],o=0;o<this.optionalObjectives.length;o++)r[o]=this.optionalObjectives[o].copy();i.optionalObjectives=r;for(var a=this.matrix,c=new Array(this.height),u=0;u<this.height;u++)c[u]=a[u].slice();return i.matrix=c,i},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var i=this.savedState,r=i.matrix;this.nVars=i.nVars,this.model=i.model,this.variables=i.variables,this.variablesPerIndex=i.variablesPerIndex,this.unrestrictedVars=i.unrestrictedVars,this.lastElementIndex=i.lastElementIndex,this.width=i.width,this.height=i.height;var o,a;for(o=0;o<this.height;o+=1){var c=r[o],u=this.matrix[o];for(a=0;a<this.width;a+=1)u[a]=c[a]}var d=i.varIndexByRow;for(a=0;a<this.height;a+=1)this.varIndexByRow[a]=d[a];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var _=i.varIndexByCol;for(o=0;o<this.width;o+=1)this.varIndexByCol[o]=_[o];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var f=i.rowByVarIndex,y=i.colByVarIndex,m=0;m<this.nVars;m+=1)this.rowByVarIndex[m]=f[m],this.colByVarIndex[m]=y[m];if(i.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<i.optionalObjectives.length;h++){var x=i.optionalObjectives[h].copy();this.optionalObjectives[h]=x,this.optionalObjectivePerPriority[x.priority]=x}}}},n0}var o0={},a0;function sq(){if(a0)return o0;a0=1;var e=On();function i(r,o){this.index=r,this.value=o}return e.prototype.getMostFractionalVar=function(){for(var r=0,o=null,a=null,c=this.model.integerVariables,u=c.length,d=0;d<u;d++){var _=c[d].index,f=this.rowByVarIndex[_];if(f!==-1){var y=this.matrix[f][this.rhsColumn],m=Math.abs(y-Math.round(y));r<m&&(r=m,o=_,a=y)}}return new i(o,a)},e.prototype.getFractionalVarWithLowestCost=function(){for(var r=1/0,o=null,a=null,c=this.model.integerVariables,u=c.length,d=0;d<u;d++){var _=c[d],f=_.index,y=this.rowByVarIndex[f];if(y!==-1){var m=this.matrix[y][this.rhsColumn];if(Math.abs(m-Math.round(m))>this.precision){var h=_.cost;r>h&&(r=h,o=f,a=m)}}}return new i(o,a)},o0}var s0={},l0;function lq(){if(l0)return s0;l0=1;var e=On();return e.prototype.countIntegerValues=function(){for(var i=0,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var o=this.matrix[r][this.rhsColumn];o=o-Math.floor(o),o<this.precision&&-o<this.precision&&(i+=1)}return i},e.prototype.isIntegral=function(){for(var i=this.model.integerVariables,r=i.length,o=0;o<r;o++){var a=this.rowByVarIndex[i[o].index];if(a!==-1){var c=this.matrix[a][this.rhsColumn];if(Math.abs(c-Math.round(c))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(i){for(var r=-1,o=1;o<this.height;o+=1)if(this.variablesPerIndex[this.varIndexByRow[o]].isInteger){var a=this.matrix[o][this.rhsColumn];a=Math.abs(a);var c=Math.min(a-Math.floor(a),Math.floor(a+1));if(c<this.precision){if(!i)return 0}else r===-1?r=a:r*=a}return r===-1?0:r},s0}var Ud,u0;function uq(){return u0||(u0=1,iq(),nq(),rq(),oq(),aq(),sq(),lq(),Ud=On()),Ud}var c0={},d0;function Vg(){if(d0)return c0;d0=1;var e=On();function i(a,c,u){this.type=a,this.varIndex=c,this.value=u}function r(a,c){this.relaxedEvaluation=a,this.cuts=c}function o(a,c){return c.relaxedEvaluation-a.relaxedEvaluation}return e.prototype.applyCuts=function(a){if(this.restore(),this.addCutConstraints(a),this.simplex(),this.model.useMIRCuts)for(var c=!0;c;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var d=this.computeFractionalVolume(!0);d>=.9*u&&(c=!1)}},e.prototype.branchAndCut=function(){var a=[],c=0,u=this.model.tolerance,d=!0,_=1e99;this.model.timeout&&(_=Date.now()+this.model.timeout);for(var f=1/0,y=null,m=[],h=0;h<this.optionalObjectives.length;h+=1)m.push(1/0);var x=new r(-1/0,[]),w;for(a.push(x);a.length>0&&d===!0&&Date.now()<_;)if(this.model.isMinimization?w=this.bestPossibleEval*(1+u):w=this.bestPossibleEval*(1-u),u>0&&f<w&&(d=!1),x=a.pop(),!(x.relaxedEvaluation>f)){var b=x.cuts;if(this.applyCuts(b),c++,this.feasible!==!1){var S=this.evaluation;if(!(S>f)){if(S===f){for(var k=!0,I=0;I<this.optionalObjectives.length&&!(this.optionalObjectives[I].reducedCosts[0]>m[I]);I+=1)if(this.optionalObjectives[I].reducedCosts[0]<m[I]){k=!1;break}if(k)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,c===1){this.branchAndCutIterations=c;return}y=x,f=S;for(var M=0;M<this.optionalObjectives.length;M+=1)m[M]=this.optionalObjectives[M].reducedCosts[0]}else{c===1&&this.save();for(var E=this.getMostFractionalVar(),P=E.index,C=[],R=[],j=b.length,V=0;V<j;V+=1){var Q=b[V];Q.varIndex===P?Q.type==="min"?R.push(Q):C.push(Q):(C.push(Q),R.push(Q))}var z=Math.ceil(E.value),L=Math.floor(E.value),ie=new i("min",P,z);C.push(ie);var T=new i("max",P,L);R.push(T),a.push(new r(S,C)),a.push(new r(S,R)),a.sort(o)}}}}y!==null&&this.applyCuts(y.cuts),this.branchAndCutIterations=c},c0}var Gd,p0;function cq(){if(p0)return Gd;p0=1;var e=On();Vg();var i=s_(),r=i.Constraint,o=i.Equality,a=i.Variable,c=i.IntegerVariable;i.Term;function u(d,_){this.tableau=new e(d),this.name=_,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return Gd=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var d=this.lastElementIndex;return this.lastElementIndex+=1,d},u.prototype._addConstraint=function(d){var _=d.slack;this.tableau.variablesPerIndex[_.index]=_,this.constraints.push(d),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(d)},u.prototype.smallerThan=function(d){var _=new r(d,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(_),_},u.prototype.greaterThan=function(d){var _=new r(d,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(_),_},u.prototype.equal=function(d){var _=new r(d,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(_);var f=new r(d,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(f),new o(_,f)},u.prototype.addVariable=function(d,_,f,y,m){if(typeof m=="string")switch(m){case"required":m=0;break;case"strong":m=1;break;case"medium":m=2;break;case"weak":m=3;break;default:m=0;break}var h=this.tableau.getNewElementIndex();_==null&&(_="v"+h),d==null&&(d=0),m==null&&(m=0);var x;return f?(x=new c(_,d,h,m),this.integerVariables.push(x)):x=new a(_,d,h,m),this.variables.push(x),this.tableau.variablesPerIndex[h]=x,y&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(x),x},u.prototype._removeConstraint=function(d){var _=this.constraints.indexOf(d);if(_===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(_,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(d),d.relaxation&&this.removeVariable(d.relaxation)},u.prototype.removeConstraint=function(d){return d.isEquality?(this._removeConstraint(d.upperBound),this._removeConstraint(d.lowerBound)):this._removeConstraint(d),this},u.prototype.removeVariable=function(d){var _=this.variables.indexOf(d);if(_===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(_,1),this.tableauInitialized===!0&&this.tableau.removeVariable(d),this},u.prototype.updateRightHandSide=function(d,_){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(d,_),this},u.prototype.updateConstraintCoefficient=function(d,_,f){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(d,_,f),this},u.prototype.setCost=function(d,_){var f=d-_.cost;return this.isMinimization===!1&&(f=-f),_.cost=d,this.tableau.updateCost(_,f),this},u.prototype.loadJson=function(d){this.isMinimization=d.opType!=="max";for(var _=d.variables,f=d.constraints,y={},m={},h=Object.keys(f),x=h.length,w=0;w<x;w+=1){var b=h[w],S=f[b],k=S.equal,I=S.weight,M=S.priority,E=I!==void 0||M!==void 0,P,C;if(k===void 0){var R=S.min;R!==void 0&&(P=this.greaterThan(R),y[b]=P,E&&P.relax(I,M));var j=S.max;j!==void 0&&(C=this.smallerThan(j),m[b]=C,E&&C.relax(I,M))}else{P=this.greaterThan(k),y[b]=P,C=this.smallerThan(k),m[b]=C;var V=new o(P,C);E&&V.relax(I,M)}}var Q=Object.keys(_),z=Q.length;this.tolerance=d.tolerance||0,d.timeout&&(this.timeout=d.timeout),d.options&&(d.options.timeout&&(this.timeout=d.options.timeout),this.tolerance===0&&(this.tolerance=d.options.tolerance||0),d.options.useMIRCuts&&(this.useMIRCuts=d.options.useMIRCuts),typeof d.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=d.options.exitOnCycles);for(var L=d.ints||{},ie=d.binaries||{},T=d.unrestricted||{},X=d.optimize,G=0;G<z;G+=1){var Z=Q[G],H=_[Z],U=H[X]||0,te=!!ie[Z],B=!!L[Z]||te,Y=!!T[Z],pe=this.addVariable(U,Z,B,Y);te&&this.smallerThan(1).addTerm(1,pe);var ue=Object.keys(H);for(w=0;w<ue.length;w+=1){var he=ue[w];if(he!==X){var be=H[he],Se=y[he];Se!==void 0&&Se.addTerm(be,pe);var ce=m[he];ce!==void 0&&ce.addTerm(be,pe)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(d){this.useMIRCuts=d},u.prototype.debug=function(d){this.checkForCycles=d},u.prototype.log=function(d){return this.tableau.log(d)},Gd}var Yd={},_0;function dq(){return _0||(_0=1,Yd.CleanObjectiveAttributes=function(e){var i,r,o;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){i=Math.random();for(r in e.variables)e.variables[r][e.optimize]&&(e.variables[r][i]=e.variables[r][e.optimize]);return e.constraints[i]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(o in e.optimize)if(e.constraints[o])if(e.constraints[o]==="equal")delete e.optimize[o];else{i=Math.random();for(r in e.variables)e.variables[r][o]&&(e.variables[r][i]=e.variables[r][o]);e.constraints[i]=e.constraints[o],delete e.constraints[o]}return e}}),Yd}var Jl={},Kd,m0;function jp(){if(m0)return Kd;m0=1;function e(r){var o={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},a={opType:"",optimize:"_obj",constraints:{},variables:{}},c={">=":"min","<=":"max","=":"equal"},u="",d=null,_="",f="",y="",m=0;typeof r=="string"&&(r=r.split(`
`));for(var h=0;h<r.length;h++)if(y="__"+h,u=r[h],d=null,o.is_objective.test(u))a.opType=u.match(/(max|min)/gi)[0],d=u.match(o.parse_lhs).map(function(b){return b.replace(/\s+/,"")}).slice(1),d.forEach(function(b){_=b.match(o.get_num),_===null?b.substr(0,1)==="-"?_=-1:_=1:_=_[0],_=parseFloat(_),f=b.match(o.get_word)[0].replace(/\;$/,""),a.variables[f]=a.variables[f]||{},a.variables[f]._obj=_});else if(o.is_int.test(u))d=u.match(o.parse_int).slice(1),a.ints=a.ints||{},d.forEach(function(b){b=b.replace(";",""),a.ints[b]=1});else if(o.is_bin.test(u))d=u.match(o.parse_bin).slice(1),a.binaries=a.binaries||{},d.forEach(function(b){b=b.replace(";",""),a.binaries[b]=1});else if(o.is_constraint.test(u)){var x=u.indexOf(":"),w=x===-1?u:u.slice(x+1);d=w.match(o.parse_lhs).map(function(b){return b.replace(/\s+/,"")}),d.forEach(function(b){_=b.match(o.get_num),_===null?b.substr(0,1)==="-"?_=-1:_=1:_=_[0],_=parseFloat(_),f=b.match(o.get_word)[0],a.variables[f]=a.variables[f]||{},a.variables[f][y]=_}),m=parseFloat(u.match(o.parse_rhs)[0]),u=c[u.match(o.parse_dir)[0]],a.constraints[y]=a.constraints[y]||{},a.constraints[y][u]=m}else o.is_unrestricted.test(u)&&(d=u.match(o.parse_int).slice(1),a.unrestricted=a.unrestricted||{},d.forEach(function(b){b=b.replace(";",""),a.unrestricted[b]=1}));return a}function i(r){if(!r)throw new Error("Solver requires a model to operate on");var o="",a={max:"<=",min:">=",equal:"="},c=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(r.opType){o+=r.opType+":";for(var u in r.variables)r.variables[u][u]=r.variables[u][u]?r.variables[u][u]:1,r.variables[u][r.optimize]&&(o+=" "+r.variables[u][r.optimize]+" "+u.replace(c,"_"))}else o+="max:";o+=`;

`;for(var d in r.constraints)for(var _ in r.constraints[d])if(typeof a[_]<"u"){for(var f in r.variables)typeof r.variables[f][d]<"u"&&(o+=" "+r.variables[f][d]+" "+f.replace(c,"_"));o+=" "+a[_]+" "+r.constraints[d][_],o+=`;
`}if(r.ints){o+=`

`;for(var y in r.ints)o+="int "+y.replace(c,"_")+`;
`}if(r.unrestricted){o+=`

`;for(var m in r.unrestricted)o+="unrestricted "+m.replace(c,"_")+`;
`}return o}return Kd=function(r){return r.length?e(r):i(r)},Kd}const pq={},_q=Object.freeze(Object.defineProperty({__proto__:null,default:pq},Symbol.toStringTag,{value:"Module"})),f0=Hx(_q);var h0;function mq(){if(h0)return Jl;h0=1,Jl.reformat=jp();function e(i){return i=i.replace("\\r\\n",`\r
`),i=i.split(`\r
`),i=i.filter(function(r){var o;return o=new RegExp(" 0$","gi"),!(o.test(r)===!0||(o=new RegExp("\\d$","gi"),o.test(r)===!1))}).map(function(r){return r.split(/\:{0,1} +(?=\d)/)}).reduce(function(r,o,a){return r[o[0]]=o[1],r},{}),i}return Jl.solve=function(i){return new Promise(function(r,o){typeof window<"u"&&o("Function Not Available in Browser");var a=jp()(i);i.external||o("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),i.external.binPath||o("No Executable | Binary path provided in arguments as 'binPath'"),i.external.args||o("No arguments array for cli | bash provided on 'args' attribute"),i.external.tempName||o("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var c=f0;c.writeFile(i.external.tempName,a,function(u,d){if(u)o(u);else{var _=f0.execFile;i.external.args.push(i.external.tempName),_(i.external.binPath,i.external.args,function(f,y){if(f)if(f.code===1)r(e(y));else{var m={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:f.code,meaning:m[f.code],data:y};o(h)}else r(e(y))})}})})},Jl}var Qd,y0;function fq(){return y0||(y0=1,Qd={lpsolve:mq()}),Qd}var Xd,g0;function x0(){return g0||(g0=1,Xd=function(e,i){var r=i.optimize,o=JSON.parse(JSON.stringify(i.optimize)),a=Object.keys(i.optimize),c,u=0,d={},_="",f={},y=[],m,h,x,w;for(delete i.optimize,m=0;m<a.length;m++)o[a[m]]=0;for(m=0;m<a.length;m++){i.optimize=a[m],i.opType=r[a[m]],c=e.Solve(i,void 0,void 0,!0);for(w in a)if(!i.variables[a[w]]){c[a[w]]=c[a[w]]?c[a[w]]:0;for(x in i.variables)i.variables[x][a[w]]&&c[x]&&(c[a[w]]+=c[x]*i.variables[x][a[w]])}for(_="base",h=0;h<a.length;h++)c[a[h]]?_+="-"+(c[a[h]]*1e3|0)/1e3:_+="-0";if(!d[_]){for(d[_]=1,u++,h=0;h<a.length;h++)c[a[h]]&&(o[a[h]]+=c[a[h]]);delete c.feasible,delete c.result,y.push(c)}}for(m=0;m<a.length;m++)i.constraints[a[m]]={equal:o[a[m]]/u};i.optimize="cheater-"+Math.random(),i.opType="max";for(m in i.variables)i.variables[m].cheater=1;for(m in y)for(x in y[m])f[x]=f[x]||{min:1e99,max:-1e99};for(m in f)for(x in y)y[x][m]?(y[x][m]>f[m].max&&(f[m].max=y[x][m]),y[x][m]<f[m].min&&(f[m].min=y[x][m])):(y[x][m]=0,f[m].min=0);return c=e.Solve(i,void 0,void 0,!0),{midpoint:c,vertices:y,ranges:f}}),Xd}var Zd,v0;function hq(){if(v0)return Zd;v0=1;var e=uq(),i=cq(),r=Vg(),o=s_(),a=dq(),c=o.Constraint,u=o.Variable,d=o.Numeral,_=o.Term,f=fq(),y=function(){this.Model=i,this.branchAndCut=r,this.Constraint=c,this.Variable=u,this.Numeral=d,this.Term=_,this.Tableau=e,this.lastSolvedModel=null,this.External=f,this.Solve=function(m,h,x,w){if(w)for(var b in a)m=a[b](m);if(!m)throw new Error("Solver requires a model to operate on");if(typeof m.optimize=="object"&&Object.keys(m.optimize>1))return x0()(this,m);if(m.external){var S=Object.keys(f);if(S=JSON.stringify(S),!m.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+S);if(!f[m.external.solver])throw new Error("No support (yet) for "+m.external.solver+". Please use one of these instead:"+S);return f[m.external.solver].solve(m)}else{m instanceof i||(m=new i(h).loadJson(m));var k=m.solve();if(this.lastSolvedModel=m,k.solutionSet=k.generateSolutionSet(),x)return k;var I={};return I.feasible=k.feasible,I.result=k.evaluation,I.bounded=k.bounded,k._tableau.__isIntegral&&(I.isIntegral=!0),Object.keys(k.solutionSet).forEach(function(M){k.solutionSet[M]!==0&&(I[M]=k.solutionSet[M])}),I}},this.ReformatLP=jp(),this.MultiObjective=function(m){return x0()(this,m)}};return typeof window=="object"?window.solver=new y:typeof self=="object"&&(self.solver=new y),Zd=new y,Zd}var yq=hq();const gq=Cs(yq),zr=1e-8,Fg=1e15,Dg=1e12,zg=1e9,Lg=1e6,Pp=1e3,Og=1e5,Tp=100,Bg=10,Ag=1e-5,$g=1e-6,xq=(e,i=new Set)=>{const r={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(o=>{var E,P;const a=e.nodes[o],c=`m_${o}`,u=a.machineCount||0,d=a.machineCountMode||"free",_=a.cappedMachineCount;a.cycleTime;const f=a.recipe.power_consumption;let y=0;typeof f=="number"?y=f:typeof f=="object"&&f!==null&&"max"in f&&(y=f.max);const m=a.recipe.pollution,h=typeof m=="number"?m:0,x=pt(a.recipe.machine_id),w=x&&typeof x.cost=="number"?x.cost:0,b=(((E=a.recipe.inputs)==null?void 0:E.length)||0)+(((P=a.recipe.outputs)==null?void 0:P.length)||0),S=Math.ceil(y/15e5)*2,k=b*2,I=1+S+k;r.variables[c]={total_cost:zg*I+Ag*y+Bg*h+$g*w};const M=`nonneg_${o}`;if(r.constraints[M]={min:0},r.variables[c][M]=1,d==="locked"){const C=`lock_${o}`;r.constraints[C]={equal:u},r.variables[c][C]=1}else if(d==="capped"&&typeof _=="number"){const C=`cap_${o}`;r.constraints[C]={max:_},r.variables[c][C]=1}}),e.connections.forEach(o=>{const a=`f_${o.id}`;r.variables[a]={total_cost:0};const c=`flow_nonneg_${o.id}`;r.constraints[c]={min:0},r.variables[a][c]=1}),Object.keys(e.nodes).forEach(o=>{e.nodes[o].outputs.forEach((c,u)=>{const d=`excess_indicator_${o}_${u}`,y=e.connections.filter(h=>h.sourceNodeId===o&&h.sourceOutputIndex===u).length>0?Lg:Og;r.variables[d]={total_cost:y},r.ints[d]=1;const m=`binary_${o}_${u}`;r.constraints[m]={min:0,max:1},r.variables[d][m]=1})}),Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],c=i.has(o);a.outputs.forEach((u,d)=>{const _=`flow_out_${o}_${d}`,f=`excess_${o}_${d}`,y=`excess_indicator_${o}_${d}`,m=e.connections.filter(P=>P.sourceNodeId===o&&P.sourceOutputIndex===d),x=m.length>0?Pp:Tp,w=c?1:x;r.variables[f]={total_cost:w,[_]:-1};const b=`link_excess_${o}_${d}`;r.constraints[b]={max:0};const S=`m_${o}`;let k=a.cycleTime;(typeof k!="number"||k<=0)&&(k=1);const I=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof I!="number")return;const M=a.isMineshaftDrill?I:I/k,E=M*1e4;r.variables[f][b]=1,r.variables[y][b]=-E,r.constraints[_]={equal:0},r.variables[S][_]||(r.variables[S][_]=0),r.variables[S][_]+=M,m.forEach(P=>{const C=`f_${P.id}`;r.variables[C][_]||(r.variables[C][_]=0),r.variables[C][_]-=1})}),a.inputs.forEach((u,d)=>{const _=e.connections.filter(E=>E.targetNodeId===o&&E.targetInputIndex===d);if(_.length===0)return;const f=`flow_in_${o}_${d}`,y=`deficit_${o}_${d}`,m=`m_${o}`;let h=a.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const x=u.quantity;if(typeof x!="number")return;const w=a.isMineshaftDrill?x:x/h;r.variables[y]={total_cost:Dg,[f]:1};const b=`deficit_indicator_${o}_${d}`;r.variables[b]={total_cost:Fg},r.ints[b]=1;const S=`deficit_binary_${o}_${d}`;r.constraints[S]={min:0,max:1},r.variables[b][S]=1;const k=`deficit_link_${o}_${d}`;r.constraints[k]={max:0};const I=w*1e4;r.variables[y][k]=1,r.variables[b][k]=-I,r.constraints[f]={min:0},_.forEach(E=>{const P=`f_${E.id}`;r.variables[P][f]||(r.variables[P][f]=0),r.variables[P][f]+=1}),r.variables[m][f]||(r.variables[m][f]=0),r.variables[m][f]-=w;const M=`max_flow_in_${o}_${d}`;r.constraints[M]={max:0},_.forEach(E=>{const P=`f_${E.id}`;r.variables[P][M]||(r.variables[P][M]=0),r.variables[P][M]+=1}),r.variables[m][M]=-w})}),i.forEach(o=>{const a=e.nodes[o];a&&a.outputs.forEach((c,u)=>{const d=`excess_${o}_${u}`,_=e.connections.filter(S=>S.sourceNodeId===o&&S.sourceOutputIndex===u);let f=a.cycleTime;(typeof f!="number"||f<=0)&&(f=1);const y=c.originalQuantity!==void 0?c.originalQuantity:c.quantity;if(typeof y!="number")return;const h=(a.isMineshaftDrill?y:y/f)*(a.machineCount||0);let x=0;_.forEach(S=>{const k=e.nodes[S.targetNodeId];if(!k)return;const I=k.inputs[S.targetInputIndex];if(!I)return;let M=k.cycleTime;(typeof M!="number"||M<=0)&&(M=1);const E=I.quantity;if(typeof E!="number")return;const C=(k.isMineshaftDrill?E:E/M)*(k.machineCount||0);x+=Math.min(h-x,C)});const w=Math.max(0,h-x),b=`min_excess_${o}_${u}`;r.constraints[b]={min:w},r.variables[d][b]=1})}),r},vq=e=>{const i=Object.keys(e.nodes),r=new Map;i.forEach((x,w)=>r.set(x,w));const o=i.length,a=new Int32Array(o).fill(-1),c=new Int32Array(o),u=new Uint8Array(o),d=[];let _=0;const f=[],y=x=>{a[x]=_,c[x]=_,_++,d.push(x),u[x]=1;const w=i[x];if(e.nodes[w].outputs.forEach(S=>{const k=e.products[S.productId];k&&k.connections.forEach(I=>{if(I.sourceNodeId!==w)return;const M=r.get(I.targetNodeId);M!==void 0&&(a[M]===-1?(y(M),c[x]=Math.min(c[x],c[M])):u[M]&&(c[x]=Math.min(c[x],a[M])))})}),c[x]===a[x]){const S=[];let k;do k=d.pop(),u[k]=0,S.push(i[k]);while(k!==x);S.length>1&&f.push(S)}};for(let x=0;x<o;x++)a[x]===-1&&y(x);const m=[];f.forEach(x=>{var M;const w=new Set(x),b=new Set;if(e.connections.forEach(E=>{const P=w.has(E.sourceNodeId),C=w.has(E.targetNodeId);if(P&&C){const R=E.productId;b.add(R)}}),b.size===0)return;let S=!1;for(const E of b)if(e.connections.some(C=>{if(C.productId!==E)return!1;const R=!w.has(C.sourceNodeId),j=w.has(C.targetNodeId);return R&&j})){S=!0;break}if(S)return;let k=!0;const I=[];for(const E of b){let P=!1;for(const C of x){const R=e.nodes[C];let j=R.cycleTime;(typeof j!="number"||j<=0)&&(j=1);const V=R.isMineshaftDrill||((M=R.recipe)==null?void 0:M.isMineshaftDrill);let Q=0;R.outputs.forEach(L=>{if(L.productId===E){const ie=L.originalQuantity!==void 0?L.originalQuantity:L.quantity;typeof ie=="number"&&(Q+=V?ie:ie/j)}});let z=0;if(R.inputs.forEach(L=>{L.productId===E&&typeof L.quantity=="number"&&(z+=V?L.quantity:L.quantity/j)}),Q>=z-1e-10){P=!0;break}}P||(k=!1,I.push(E))}k||m.push({nodes:x,nodeNames:x.map(E=>{var P,C;return((C=(P=e.nodes[E])==null?void 0:P.recipe)==null?void 0:C.name)||E}),problematicProducts:I})});const h=new Set;return f.forEach(x=>x.forEach(w=>h.add(w))),i.forEach(x=>{var S;if(h.has(x))return;const w=e.nodes[x];if(!w)return;const b=new Map;if(e.connections.forEach(k=>{if(k.sourceNodeId===x&&k.targetNodeId===x){const I=k.productId,M=w.outputs[k.sourceOutputIndex],E=w.inputs[k.targetInputIndex];M&&E&&M.productId===I&&E.productId===I&&b.set(I,{inputRate:E.rate,outputRate:M.rate})}}),b.size>0){let k=!1;for(const[I,M]of b){const E=e.products[I],P=1e-10;if(!(M.outputRate>M.inputRate+P)){if(M.outputRate<M.inputRate-P){if(!E.producers.some(R=>R.nodeId!==x)){k=!0;break}continue}if(Math.abs(M.outputRate-M.inputRate)<P){const C=E.consumers.some(j=>j.nodeId!==x),R=E.producers.some(j=>j.nodeId!==x);if(!C&&!R)continue;if(C&&!R){k=!0;break}if(R)continue}}}k&&m.push({nodes:[x],nodeNames:[((S=w.recipe)==null?void 0:S.name)||x],isSelfFeeding:!0})}}),m},wq=(e,i=new Set)=>{const r=vq(e);if(r.length>0)return{feasible:!1,unsustainableLoops:r,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const o=xq(e,i),a=gq.Solve(o);if(a.feasible){console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let c=0,u=0,d=0,_=0,f=0,y=0,m=0,h=0,x=0,w=0,b=0,S=0,k=0,I=0,M=0,E=0,P=0,C=0;Object.keys(a).forEach(j=>{var V,Q;if(j.startsWith("deficit_indicator_")){const z=a[j]||0;z>zr&&(w+=z,u+=z*Fg)}if(j.startsWith("deficit_")&&!j.includes("indicator")){const z=a[j]||0;z>zr&&(b+=z,d+=z*Dg)}if(j.startsWith("excess_indicator_")){const z=a[j]||0;if(z>zr){const L=j.split("_"),ie=L.slice(2,-1).join("_"),T=parseInt(L[L.length-1]),G=e.connections.some(Z=>Z.sourceNodeId===ie&&Z.sourceOutputIndex===T)?Lg:Og;S+=z,_+=z*G}}if(j.startsWith("excess_")&&!j.includes("indicator")){const z=a[j]||0;if(z>zr){const L=j.split("_"),ie=L.slice(1,-1).join("_"),T=parseInt(L[L.length-1]),X=e.connections.some(Z=>Z.sourceNodeId===ie&&Z.sourceOutputIndex===T),G=X?Pp:Tp;X?k+=z:I+=z,f+=z*G}}if(j.startsWith("m_")){const z=j.substring(2),L=e.nodes[z],ie=a[j]||0;L.cycleTime;const T=L.recipe.power_consumption;let X=0;typeof T=="number"?X=T:typeof T=="object"&&T!==null&&"max"in T&&(X=T.max);const G=L.recipe.pollution,Z=typeof G=="number"?G:0,H=pt(L.recipe.machine_id),U=H&&typeof H.cost=="number"?H.cost:0,te=(((V=L.recipe.inputs)==null?void 0:V.length)||0)+(((Q=L.recipe.outputs)==null?void 0:Q.length)||0),B=Math.ceil(X/15e5)*2,Y=te*2,pe=1+B+Y,ue=Math.ceil(ie),he=ue*pe,be=ie*X,Se=ie*Z,ce=ue*U;M+=he,E+=be,P+=Se,C+=ce,y+=he*zg,m+=be*Ag,h+=Se*Bg,x+=ce*$g}}),c=u+d+_+f+y+m+h+x,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${w} inputs (cost: ${u.toExponential(2)})`),console.log(`    Deficiency amount: ${b.toFixed(4)} (cost: ${d.toExponential(2)})`),console.log(`    Excess count: ${S} outputs (cost: ${_.toExponential(2)})`),console.log(`    Connected excess: ${k.toFixed(4)} (cost: ${(k*Pp).toExponential(2)})`),console.log(`    Unconnected excess: ${I.toFixed(4)} (cost: ${(I*Tp).toExponential(2)})`),console.log(`    Model count: ${M.toFixed(0)} (cost: ${y.toExponential(2)})`),console.log(`    Power: ${E.toFixed(0)} W (cost: ${m.toFixed(2)})`),console.log(`    Pollution: ${P.toFixed(2)} %/hr (cost: ${h.toFixed(2)})`),console.log(`    Machine cost: $${C.toFixed(0)} (cost: ${x.toFixed(2)})`),console.log(`    Total: ${c.toExponential(2)}`),console.log("  Machine Count Changes:");let R=!1;Object.keys(e.nodes).forEach(j=>{var T;const V=e.nodes[j],Q=`m_${j}`,z=a[Q]||0,L=V.machineCount||0;Math.abs(z-L)>zr&&(R=!0,console.log(`    ${((T=V==null?void 0:V.recipe)==null?void 0:T.name)||j}: ${L.toFixed(4)}  ${z.toFixed(4)}`))}),R||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return a},bq=(e,i)=>{const r=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(i.nodes).forEach(o=>{const a=i.nodes[o],c=`m_${o}`,u=e[c]!==void 0?e[c]:0,d=a.machineCount||0;if(u>=-zr){const _=Math.max(0,u);Math.abs(_-d)>zr&&r.set(o,_)}}),r},w0=(e,i,r,o={})=>{const{allowDeficiency:a=!1}=o;if(r.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const c=ds(e,i),u=new Set(r.map(m=>m.recipeBoxId)),d=wq(c,u);if(!d.feasible){if(d.unsustainableLoops){const m=d.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${m}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let _=!1;const f=[];if(Object.keys(d).forEach(m=>{var h;if(m.startsWith("deficit_")&&!m.includes("indicator")){const x=d[m]||0;if(x>zr){_=!0;const w=m.split("_"),b=parseInt(w[w.length-1]),S=w.slice(1,-1).join("_"),k=c.nodes[S];if(k){const I=k.inputs[b];f.push({nodeId:S,nodeName:((h=k.recipe)==null?void 0:h.name)||S,inputIndex:b,productId:I==null?void 0:I.productId,deficitAmount:x})}}}}),_&&!a){const m=f.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${m}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:f}}const y=bq(d,c);return{success:y.size>0,updates:y,converged:!0,iterations:1,message:y.size>0?`Updated ${y.size} nodes`:"Network already balanced"}},kq=44,Sq=8,b0=120,Mq=380,Cq=200,ur=100,l_=e=>{var _,f,y;const i=(_=e.data)==null?void 0:_.recipe;if(!i)return b0+100;const r=((f=i.inputs)==null?void 0:f.length)||0,o=((y=i.outputs)==null?void 0:y.length)||0,a=Math.max(r,o,1),u=a*kq+(a-1)*Sq+24;return b0+u+12},qq=(e,i)=>{const r=new Map,o=e.map(m=>m.id);o.forEach(m=>r.set(m,[])),i.forEach(m=>{r.has(m.source)&&r.get(m.source).push(m.target)});let a=0;const c=new Map,u=new Map,d=new Set,_=[],f=[],y=m=>{c.set(m,a),u.set(m,a),a++,_.push(m),d.add(m);const h=r.get(m)||[];for(const x of h)c.has(x)?d.has(x)&&u.set(m,Math.min(u.get(m),c.get(x))):(y(x),u.set(m,Math.min(u.get(m),u.get(x))));if(u.get(m)===c.get(m)){const x=[];let w;do w=_.pop(),d.delete(w),x.push(w);while(w!==m);x.length>0&&f.push(x)}};for(const m of o)c.has(m)||y(m);return f},Eq=(e,i,r,o)=>{const a=new Map,c=new Map,u=new Map,d=new Map,_=new Map,f=new Map;e.forEach(b=>{u.set(b.id,[]),d.set(b.id,[])}),r.forEach((b,S)=>{_.set(S,new Set),f.set(S,new Set)}),i.forEach(b=>{u.has(b.source)&&u.get(b.source).push(b.target),d.has(b.target)&&d.get(b.target).push(b.source);const S=o.get(b.source),k=o.get(b.target);S!==k&&S!==void 0&&k!==void 0&&(_.get(S).add(k),f.get(k).add(S))});const y=[];_.forEach((b,S)=>{b.size===0&&y.push(S)});const m=new Set,h=y.map(b=>({sccIndex:b,layer:0}));h.forEach(b=>{c.set(b.sccIndex,b.layer),m.add(b.sccIndex)});let x=0;for(;h.length>0;){const{sccIndex:b,layer:S}=h.shift();Array.from(f.get(b)||[]).forEach(I=>{if(m.has(I)){const M=c.get(I),E=Array.from(_.get(I)||[]),C=Math.min(...E.map(R=>c.get(R)||0))-1;C<M&&(c.set(I,C),x=Math.max(x,Math.abs(C)))}else{const M=S-1;c.set(I,M),x=Math.max(x,Math.abs(M)),m.add(I),h.push({sccIndex:I,layer:M})}})}r.forEach((b,S)=>{m.has(S)||(c.set(S,-x-1),x=x+1)});const w=Math.min(...Array.from(c.values()));return c.forEach((b,S)=>{c.set(S,b-w)}),x=Math.max(...Array.from(c.values())),e.forEach(b=>{const S=o.get(b.id),k=c.get(S)||0;a.set(b.id,k)}),{layers:a,maxLayer:x}},Iq=(e,i,r)=>{const o=new Map;e.forEach(c=>o.set(c.id,[])),i.forEach(c=>{o.has(c.source)&&o.get(c.source).push(c.target)});const a=new Map;return e.forEach(c=>{const u=o.get(c.id)||[],d=r.get(c.id),_=u.slice().sort().join(",")||`no-consumers-${d}`;a.has(_)||a.set(_,[]),a.get(_).push(c)}),a},Nq=(e,i,r,o)=>{const a=new Map;for(let _=0;_<=r;_++)a.set(_,[]);e.forEach(_=>{const f=i.get(_.id);a.get(f).push(_)});const c=new Map,u=new Map;e.forEach(_=>{c.set(_.id,[]),u.set(_.id,[])}),o.forEach(_=>{c.has(_.source)&&c.get(_.source).push(_.target),u.has(_.target)&&u.get(_.target).push(_.source)}),Iq(e,o,i);const d=new Map;for(let _=r;_>=0;_--){const f=a.get(_);if(f.length===0)continue;const y=new Map;f.forEach(w=>{const b=(c.get(w.id)||[]).filter(S=>i.get(S)===_+1).sort().join(",")||`no-consumers-${_}`;y.has(b)||y.set(b,[]),y.get(b).push(w)});const m=[];y.forEach((w,b)=>{const S=w.reduce((k,I)=>{const M=c.get(I.id)||[];if(M.length===0)return k;const E=M.map(R=>d.get(R)).filter(R=>R!==void 0);if(E.length===0)return k;E.sort((R,j)=>R-j);const P=Math.floor(E.length/2),C=E.length%2===0?(E[P-1]+E[P])/2:E[P];return k+C},0)/w.length;m.push({nodes:w,medianY:S||0})}),m.sort((w,b)=>w.medianY-b.medianY);let h=0;const x=[];m.forEach(w=>{w.nodes.forEach(b=>{d.set(b.id,h),x.push(b),h++})}),a.set(_,x)}return a},jq=(e,i)=>{const r=new Map,o=new Map;return e.forEach(a=>{r.set(a.id,[]),o.set(a.id,[])}),i.forEach(a=>{r.has(a.source)&&r.get(a.source).push(a.target),o.has(a.target)&&o.get(a.target).push(a.source)}),{outgoing:r,incoming:o}},Pq=(e,i,r,o,a)=>{const c=new Map,{outgoing:u}=jq(o,r),d=new Map;o.forEach(_=>{d.set(_.id,l_(_))});for(let _=i;_>=0;_--){const f=e.get(_),y=_*(Mq+Cq),m=new Map;f.forEach(x=>{const w=u.get(x.id)||[],b=w.length===0?`sink-${x.id}`:w.sort().join(",");m.has(b)||m.set(b,[]),m.get(b).push(x)});let h=0;m.forEach((x,w)=>{if(w.startsWith("sink-"))x.forEach(b=>{const S=d.get(b.id);c.set(b.id,{x:y,y:h}),h+=S+ur});else{const b=w.split(","),S=x.reduce((E,P,C)=>{const R=d.get(P.id);return E+R+(C>0?ur:0)},0),k=b.map(E=>{const P=c.get(E),C=d.get(E)||200;return P?P.y+C/2:null}).filter(E=>E!==null);let I;k.length>0?I=k.reduce((P,C)=>P+C,0)/k.length:I=h+S/2;let M=I-S/2;x.forEach(E=>{const P=d.get(E.id);c.set(E.id,{x:y,y:M}),M+=P+ur}),h=M}})}return c},Tq=(e,i,r,o)=>{const a=new Map;e.forEach(u=>{a.set(u.id,l_(u))});const c=new Map;return e.forEach(u=>{const d=r.get(u.id);c.has(d)||c.set(d,[]),c.get(d).push(u.id)}),c.forEach((u,d)=>{if(u.length<=1)return;let _=u.map(y=>({id:y,pos:i.get(y),height:a.get(y)})).sort((y,m)=>y.pos.y-m.pos.y),f=10;for(let y=0;y<f;y++){let m=!1;for(let h=0;h<_.length-1;h++){const x=_[h],w=_[h+1],b=x.pos.y+x.height,S=w.pos.y-b;if(S<ur){const k=ur-S;w.pos.y+=k,i.set(w.id,{x:w.pos.x,y:w.pos.y}),m=!0}}for(let h=_.length-1;h>0;h--){const x=_[h],w=_[h-1],b=w.pos.y+w.height,S=x.pos.y-b;if(S<ur){const k=ur-S;w.pos.y-=k,i.set(w.id,{x:w.pos.x,y:w.pos.y}),m=!0}}if(_.sort((h,x)=>h.pos.y-x.pos.y),!m)break}}),i},Rq=(e,i,r,o)=>(r.filter(c=>c.length>1).forEach(c=>{const u=new Set(c),d=new Set,_=new Set;i.forEach(m=>{const h=u.has(m.source),x=u.has(m.target);!h&&x&&d.add(m.target),h&&!x&&_.add(m.source)});const f=c.map(m=>e.find(h=>h.id===m)).filter(m=>m),y=c.map(m=>o.get(m)).filter(m=>m);if(y.length>0){const m=y.reduce((b,S)=>b+S.x,0)/y.length,h=f.map(b=>({id:b.id,height:l_(b),pos:o.get(b.id)}));h.sort((b,S)=>b.pos.y-S.pos.y);let w=-h.reduce((b,S,k)=>b+S.height+(k>0?ur:0),0)/2;h.forEach(b=>{o.set(b.id,{x:m,y:w}),w+=b.height+ur})}}),o),Vq=(e,i)=>{if(!e||e.length===0)return e;const r=qq(e,i),o=new Map;r.forEach((f,y)=>{f.forEach(m=>o.set(m,y))});const{layers:a,maxLayer:c}=Eq(e,i,r,o),u=Nq(e,a,c,i);let d=Pq(u,c,i,e);return d=Rq(e,i,r,d),d=Tq(e,d,a),e.map(f=>{const y=d.get(f.id);return y?{...f,position:{x:y.x,y:y.y}}:f})},Fq={custom:uC},Dq={custom:pC},eu=e=>typeof e=="number"?e.toFixed(4):"0",tu=({productName:e,connectedFlow:i,currentExcess:r,onTargetExcessCommit:o,styleType:a})=>{const[c,u]=F.useState(""),[d,_]=F.useState(!1),f=d?c:eu(r),y=()=>{if(!d)return;const b=parseFloat(c);isNaN(b)||o(b),_(!1),u("")},m=a==="input",h=m?"var(--input-bg)":"var(--output-bg)",x=m?"var(--input-border)":"var(--output-border)",w=m?"var(--input-text)":"var(--output-text)";return l.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${x}`,borderRadius:"var(--radius-sm)"},children:[l.jsx("div",{style:{color:w,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",eu(i),"/s"]}),l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[m?"Current Deficiency:":"Current Excess:"," ",eu(Math.abs(r)),"/s"]}),l.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:m?"Target Additional Demand:":"Target Excess:"}),l.jsx("input",{type:"text",value:f,onFocus:()=>{_(!0),u(eu(r))},onChange:b=>u(b.target.value),onBlur:y,onKeyPress:b=>b.key==="Enter"&&y(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),l.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},k0=e=>{if(e<0)return 0;const i=1+5429*e/7322;return Math.pow(Math.log(i),1.1)};function zq(){const[e,i,r]=PS([]),[o,a,c]=TS([]),[u,d]=F.useState(0),[_,f]=F.useState(!1),[y,m]=F.useState(!1),[h,x]=F.useState(null),[w,b]=F.useState(null),[S,k]=F.useState("product"),[I,M]=F.useState("button"),[E,P]=F.useState(""),[C,R]=F.useState("name_asc"),[j,V]=F.useState("all"),[Q,z]=F.useState("all"),[L,ie]=F.useState("all"),[T,X]=F.useState(null),[G,Z]=F.useState([]),[H,U]=F.useState(!1),[te,B]=F.useState(!1),[Y,pe]=F.useState("targets"),[ue,he]=F.useState(0),[be,Se]=F.useState(!1),[ce,qe]=F.useState(null),[Fe,Le]=F.useState(""),[Ie,Re]=F.useState(null),[ze,Ye]=F.useState("free"),[Ge,at]=F.useState(!1),[bt,xt]=F.useState(!1),[Et,Dt]=F.useState(!1),[hi,Ci]=F.useState(!1),[Bn,Oi]=F.useState(!1),[Zt,yi]=F.useState(!1),[_t,Sn]=F.useState(()=>{const q=lu();return{edgePath:q.edgePath||"orthogonal",edgeStyle:q.edgeStyle||"animated"}}),[zt,Mn]=F.useState(!1),[Bi,An]=F.useState(!1),[Xe,pr]=F.useState(!1),[Mt,Ji]=F.useState("pan"),[de,nt]=F.useState(0),[qi,Ei]=F.useState(!1),[oi,$n]=F.useState(!0),[Cn,It]=F.useState(1),[Ut,Gt]=F.useState({}),[st,Co]=F.useState("perSecond"),[mt,Ar]=F.useState("total"),[Lt,Ai]=F.useState([]),[Pt,Ot]=F.useState(null),[Bt,Yt]=F.useState(null),[ai,si]=F.useState(null),[li,kt]=F.useState(null),[en,ui]=F.useState(null),[$r,Hr]=F.useState({}),[Jt,_r]=F.useState(null),[mr,Wr]=F.useState({}),[Hn,lt]=F.useState("all"),[Wn,tn]=F.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[Un,nn]=F.useState([]),[ut,$i]=F.useState(null),[qn,At]=F.useState(null),[qo,ci]=F.useState({x:0,y:0}),Gn=F.useRef(null),rn=F.useRef(null),va=F.useRef(null),fr=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",gi=F.useRef(null),on=F.useRef([]),Eo=F.useCallback(q=>{const O=q.filter(W=>W.type!=="remove"),A=O.filter(W=>W.type==="position"),D=O.filter(W=>W.type!=="position");A.length>0&&r(A),D.length>0&&(on.current.push(...D),gi.current&&clearTimeout(gi.current),gi.current=setTimeout(()=>{on.current.length>0&&(r(on.current),on.current=[])},50))},[r]),wa=F.useCallback(q=>{c(q)},[c]);F.useEffect(()=>{const q=lu();qu(q),Sn({edgePath:q.edgePath||"orthogonal",edgeStyle:q.edgeStyle||"animated"}),MC(Vi,hn,gn);const O=()=>{const A="ontouchstart"in window||navigator.maxTouchPoints>0,D=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);pr(A&&D)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const Kt=F.useCallback(()=>({onInputClick:To,onOutputClick:zs,isMobile:Xe,mobileActionMode:Mt,onDrillSettingsChange:Zr,onLogicAssemblerSettingsChange:Jr,onTreeFarmSettingsChange:gr,onIndustrialFireboxSettingsChange:Ro,onTemperatureSettingsChange:Hu,onBoilerSettingsChange:Wu,onChemicalPlantSettingsChange:Vo,onWasteFacilitySettingsChange:Ma,onLiquidDumpSettingsChange:Ls,onLiquidBurnerSettingsChange:En,onMiddleClick:to,onHandleDoubleClick:Sa,onMachineCountModeChange:Bs}),[Xe,Mt]);F.useEffect(()=>{const q=uM();if(!(q!=null&&q.nodes))return;const O=Kt(),A=q.nodes.map(D=>{var oe,ae,fe,xe;const W=pt((ae=(oe=D.data)==null?void 0:oe.recipe)==null?void 0:ae.machine_id);let J=(fe=D.data)==null?void 0:fe.recipe;return W&&J&&!((xe=J.outputs)!=null&&xe.some(Me=>Me.temperature!==void 0))&&(J=is(J,W.id)),{...D,data:{...D.data,recipe:J,machineCount:D.data.machineCount??1,displayMode:st,machineDisplayMode:mt,...O,globalPollution:de,flows:null,suggestions:[]}}});i(A),a(q.edges||[]),Z(q.targetProducts||[]),Gt(q.soldProducts||{}),Ai(q.favoriteRecipes||[]),Ot(q.lastDrillConfig||null),Yt(q.lastAssemblerConfig||null),si(q.lastTreeFarmConfig||null),kt(q.lastFireboxConfig||null),ui(q.lastWasteFacilityConfig||null),d(q.nodeId||0),he(q.targetIdCounter||0)},[]),F.useEffect(()=>{i(q=>{let O=!1;const A=q.map(D=>D.data.displayMode===st&&D.data.machineDisplayMode===mt&&D.data.zoomLevel===Cn?D:(O=!0,{...D,data:{...D.data,displayMode:st,machineDisplayMode:mt,zoomLevel:Cn}}));return O?A:q})},[st,mt,Cn,i]),F.useEffect(()=>{a(q=>{let O=!1;const A=q.map(D=>{var W,J;return((W=D.data)==null?void 0:W.edgePath)===_t.edgePath&&((J=D.data)==null?void 0:J.edgeStyle)===_t.edgeStyle?D:(O=!0,{...D,data:_t})});return O?A:q})},[_t,a]),F.useEffect(()=>{const q={nodes:e,edges:o,targetProducts:G,nodeId:u,targetIdCounter:ue,soldProducts:Ut,favoriteRecipes:Lt,lastDrillConfig:Pt,lastAssemblerConfig:Bt,lastTreeFarmConfig:ai,lastFireboxConfig:li,lastWasteFacilityConfig:en};localStorage.setItem("industrialist_canvas_state",JSON.stringify(q))},[e,o,G,u,ue,Ut,Lt,Pt,Bt,ai,li,en]);const hr=F.useCallback(()=>{var W,J;let q=0,O=0,A=0;const D=e.length;for(let oe=0;oe<D;oe++){const ae=e[oe],{recipe:fe,machine:xe,machineCount:Me=0}=ae.data||{};if(!fe)continue;const le=typeof fe.pollution=="number"?fe.pollution:parseFloat(fe.pollution);!isNaN(le)&&isFinite(le)&&(O+=le*Me);const me=(((W=fe.inputs)==null?void 0:W.length)||0)+(((J=fe.outputs)==null?void 0:J.length)||0),ye=Math.ceil(Me);if((xe==null?void 0:xe.id)==="m_industrial_firebox"){A+=ye*(1+me*2);continue}if((xe==null?void 0:xe.id)==="m_tree_farm"&&fe.treeFarmSettings){const{trees:Ee,harvesters:Ue,sprinklers:Ke,controller:Je,outputs:tt}=fe.treeFarmSettings,Rt=typeof fe.power_consumption=="number"?fe.power_consumption:0;q+=Rt*Me;const pi=Math.ceil(Ke/3),Ct=fe.power_type==="HV"?2:Math.ceil(Rt/15e5)*2,xr=Ee+Ue+Ke+pi*3+Je+tt*3+Ct;A+=ye*xr;continue}const _e=fe.power_consumption;let ke=0;typeof _e=="number"?(ke=_e,q+=_e*Me):typeof _e=="object"&&_e!==null&&"max"in _e&&(ke=_e.max,q+=ke*Me);const Ne=fe.power_type==="HV"?2:Math.ceil(ke/15e5)*2;A+=ye*(1+Ne+me*2)}return{totalPower:q,totalPollution:O,totalModelCount:A}},[e]),Ii=F.useMemo(()=>hr(),[e]);F.useEffect(()=>{if(oi||Ii.totalPollution===0)return;const q=setInterval(()=>{if(qi)return;const O=Ii.totalPollution/3600;nt(A=>{if(typeof A!="number"||isNaN(A)||!isFinite(A))return A;const D=parseFloat((A+O).toFixed(4));return D!==A?D:A})},1e3);return()=>clearInterval(q)},[Ii.totalPollution,qi,oi]),F.useEffect(()=>{const q=setInterval(fn,2e4);return()=>clearInterval(q)},[]);const Hi=F.useRef(null),Gr=F.useRef(de);F.useEffect(()=>{if(!(Math.abs(de-Gr.current)<.01))return Gr.current=de,Hi.current&&clearTimeout(Hi.current),Hi.current=setTimeout(()=>{i(q=>{let O=!1;const A=q.map(D=>{const{recipe:W,machine:J,globalPollution:oe}=D.data||{};if(W!=null&&W.isTreeFarm&&W.treeFarmSettings){const{trees:ae,harvesters:fe,sprinklers:xe,outputs:Me,controller:le}=W.treeFarmSettings,me=n_(ae,fe,de),ye=Su(ae,fe,xe,Me,le,de);return O=!0,{...D,data:{...D.data,recipe:{...W,outputs:me,power_consumption:ye?ye.avgPowerConsumption:"Variable"},globalPollution:de}}}if((J==null?void 0:J.id)==="m_air_separation_unit"){const ae=k0(de),fe=W.outputs.map(xe=>xe.product_id==="p_residue"?{...xe,quantity:parseFloat(ae.toFixed(6))}:xe);return O=!0,{...D,data:{...D.data,recipe:{...W,outputs:fe},globalPollution:de}}}return oe!==de?(O=!0,{...D,data:{...D.data,globalPollution:de}}):D});return O?A:q})},250),()=>clearTimeout(Hi.current)},[de,i]);const[Ae,rt]=F.useState(()=>$h([],[],{skipTemperature:!0})),Yr=F.useRef(null),ba=F.useRef(""),Kr=F.useRef(!1),Io=F.useRef(null),Oe=F.useCallback((q="general")=>{Io.current=q,Kr.current=!0},[]);F.useEffect(()=>{if(Kr.current)return Yr.current&&clearTimeout(Yr.current),Yr.current=setTimeout(()=>{const q=`${e.length}-${o.length}-${e.map(O=>{var A,D,W,J,oe,ae,fe,xe,Me,le,me,ye,_e;return`${O.id}:${(A=O.data)==null?void 0:A.machineCount}:${JSON.stringify(((W=(D=O.data)==null?void 0:D.recipe)==null?void 0:W.temperatureSettings)||{})}:${JSON.stringify(((oe=(J=O.data)==null?void 0:J.recipe)==null?void 0:oe.drillSettings)||{})}:${JSON.stringify(((fe=(ae=O.data)==null?void 0:ae.recipe)==null?void 0:fe.assemblerSettings)||{})}:${JSON.stringify(((Me=(xe=O.data)==null?void 0:xe.recipe)==null?void 0:Me.treeFarmSettings)||{})}:${JSON.stringify(((me=(le=O.data)==null?void 0:le.recipe)==null?void 0:me.fireboxSettings)||{})}:${JSON.stringify(((_e=(ye=O.data)==null?void 0:ye.recipe)==null?void 0:_e.chemicalPlantSettings)||{})}`}).join(",")}`;if(q!==ba.current){const O=Io.current||"general",A=["connection","node","temperatureSettings","boilerSettings"].includes(O);console.log(`[Recalculation] Reason: ${O}, Temperature propagation: ${A}`);const D=$h(e,o,{skipTemperature:!A,previousTemperatureData:A?null:Ae==null?void 0:Ae.temperatureData});rt(D),ba.current=q}Kr.current=!1,Io.current=null},100),()=>clearTimeout(Yr.current)},[e,o,Ae]);const ka=F.useMemo(()=>KC(Ae),[Ae]),No=F.useMemo(()=>QC(Ae),[Ae]),Yn=F.useRef(null),an=F.useRef(null),sn=F.useCallback((q,O,A)=>{var ae,fe,xe,Me,le,me;const D=(ae=q.data)==null?void 0:ae.recipe,W=O.byNode[q.id];if(q.data.flows===W&&q.data.suggestions===A)return q;const J=q.data.flows!==W,oe=q.data.suggestions!==A&&(((fe=q.data.suggestions)==null?void 0:fe.length)!==(A==null?void 0:A.length)||JSON.stringify(q.data.suggestions)!==JSON.stringify(A||[]));if(D!=null&&D.isWasteFacility){const ye=Math.min(((xe=W==null?void 0:W.inputFlows[0])==null?void 0:xe.connected)||0,240),_e=Math.min(((Me=W==null?void 0:W.inputFlows[1])==null?void 0:Me.connected)||0,240),ke=D.wasteFacilitySettings||{};if(!J&&!oe&&ke.itemFlowRate===ye&&ke.fluidFlowRate===_e)return q;const Ne=su(ye,_e),Ee=Cu(ye,_e,D.inputs[0].product_id,D.inputs[1].product_id);return{...q,data:{...q.data,recipe:{...D,inputs:Ee,cycle_time:Ne.cycleTime,wasteFacilitySettings:{...ke,itemFlowRate:ye,fluidFlowRate:_e}},flows:W||null,suggestions:A||[],zoomLevel:q.data.zoomLevel}}}if(D!=null&&D.isLiquidDump){const ye=((le=q.data)==null?void 0:le.machineCount)||1,_e=D.inputs.map((Ne,Ee)=>{var Ke;return Math.min(((Ke=W==null?void 0:W.inputFlows[Ee])==null?void 0:Ke.connected)||0,15*ye)/ye}),ke=ls(D.inputs,_e);return!J&&!oe&&D.pollution===ke?q:{...q,data:{...q.data,recipe:{...D,pollution:ke},flows:W||null,suggestions:A||[],zoomLevel:q.data.zoomLevel}}}if(D!=null&&D.isLiquidBurner){const ye=((me=q.data)==null?void 0:me.machineCount)||1,_e=D.inputs.map((Ne,Ee)=>{var Ke;return Math.min(((Ke=W==null?void 0:W.inputFlows[Ee])==null?void 0:Ke.connected)||0,15*ye)/ye}),ke=us(D.inputs,_e);return!J&&!oe&&D.pollution===ke?q:{...q,data:{...q.data,recipe:{...D,pollution:ke},flows:W||null,suggestions:A||[],zoomLevel:q.data.zoomLevel}}}return!J&&!oe?q:{...q,data:{...q.data,flows:W||null,suggestions:A||[],zoomLevel:q.data.zoomLevel}}},[]);F.useEffect(()=>{var q;if((q=Ae==null?void 0:Ae.flows)!=null&&q.byNode&&an.current!==Ae.flows)return an.current=Ae.flows,Yn.current&&clearTimeout(Yn.current),Yn.current=setTimeout(()=>{i(O=>{let A=O;Ae.temperatureData&&(A=yp(O,Ae.temperatureData,Ae.graph));let D=!1;const W=A.map(J=>{const oe=sn(J,Ae.flows,Ae.suggestions);return oe!==J&&(D=!0),oe});return D?W:O})},250),()=>clearTimeout(Yn.current)},[Ae,i,sn]);const Ni=F.useMemo(()=>ka.map(q=>{const O=G.some(A=>{var W,J,oe;const D=e.find(ae=>ae.id===A.recipeBoxId);return(oe=(J=(W=D==null?void 0:D.data)==null?void 0:W.recipe)==null?void 0:J.outputs)==null?void 0:oe.some(ae=>ae.product_id===q.productId)});return{...q,isSold:Ut[q.productId]??(O&&typeof q.product.price=="number"&&q.product.price>1)}}),[ka,Ut,G,e]),yr=F.useMemo(()=>Ni.reduce((q,O)=>O.isSold&&typeof O.product.price=="number"?q+O.product.price*O.excessRate:q,0),[Ni]),Qr=F.useMemo(()=>{const q=new Map,O=new Map,A=(W,J,oe)=>{q.set(W,(q.get(W)||0)+J),O.has(W)||O.set(W,oe)};e.forEach(W=>{var fe,xe,Me,le,me,ye;const{machine:J,machineCount:oe=0,recipe:ae}=W.data||{};if(J){if(J.id==="m_tree_farm"&&(ae!=null&&ae.treeFarmSettings)){const{trees:_e,harvesters:ke,sprinklers:Ne,outputs:Ee,controller:Ue}=ae.treeFarmSettings,Ke=Math.ceil(Ne/3);A("m_tree",Math.ceil(_e*oe),((fe=pt("m_tree"))==null?void 0:fe.cost)||0),A("m_tree_harvester",Math.ceil(ke*oe),((xe=pt("m_tree_harvester"))==null?void 0:xe.cost)||0),A("m_tree_farm_sprinkler",Math.ceil(Ne*oe),((Me=pt("m_tree_farm_sprinkler"))==null?void 0:Me.cost)||0),A("m_tree_farm_water_tank",Math.ceil(Ke*oe),((le=pt("m_tree_farm_water_tank"))==null?void 0:le.cost)||0),A("m_tree_farm_output",Math.ceil(Ee*oe),((me=pt("m_tree_farm_output"))==null?void 0:me.cost)||0),A("m_tree_farm_controller",Math.ceil(Ue*oe),((ye=pt("m_tree_farm_controller"))==null?void 0:ye.cost)||0);return}A(J.id,Math.ceil(oe),typeof J.cost=="number"?J.cost:0)}});const D=Array.from(q.entries()).map(([W,J])=>{const oe=hn.find(fe=>fe.id===W),ae=O.get(W);return{machineId:W,machine:oe,count:J,cost:ae,totalCost:J*ae}}).sort((W,J)=>W.machine.name.localeCompare(J.machine.name));return{stats:D,totalCost:D.reduce((W,J)=>W+J.totalCost,0)}},[e,hn]),Tt=(q,O)=>i(A=>A.map(D=>D.id===q?{...D,data:O(D.data)}:D)),jo=F.useCallback((q,O,A,D)=>{const W=Object.keys(bs).map(ae=>parseInt(ae));let J=null,oe=0;return W.forEach(ae=>{const xe=bs[ae].find(Me=>Me.product_id===q);if(xe){const Me=Mo(O,A,D,ae);if(Me){const le=D?1.1:1,me=xe.quantity*le*Me.dutyCycle;me>oe&&(oe=me,J=ae)}}}),J},[]),Fs=F.useCallback((q,O,A)=>{const D={drillConfig:Pt,assemblerConfig:Bt,treeFarmConfig:ai,fireboxConfig:li},W=(Ae==null?void 0:Ae.flows)||null;return XC(q,O,A,jo,D,de,W)},[Pt,Bt,ai,li,jo,de,Ae]),Xr=F.useCallback(q=>{const O=e.find(J=>J.id===q.source),A=e.find(J=>J.id===q.target);if(!O||!A)return;const D=O.data.recipe.outputs[parseInt(q.sourceHandle.split("-")[1])],W=A.data.recipe.inputs[parseInt(q.targetHandle.split("-")[1])];if(!(!D||!W)){if(W.isAnyProduct){const J=ht(D.product_id);if(W.acceptedType&&(J==null?void 0:J.type)!==W.acceptedType)return;i(oe=>oe.map(ae=>{var Me;if(ae.id!==A.id)return ae;const fe=parseInt(q.targetHandle.split("-")[1]),xe=[...ae.data.recipe.inputs];if(xe[fe]={...xe[fe],product_id:D.product_id,isAnyProduct:!1},ae.data.recipe.isWasteFacility){const le=ae.data.recipe.wasteFacilitySettings||{},me=(Me=Ae==null?void 0:Ae.flows)==null?void 0:Me.byNode[q.source],ye=parseInt(q.sourceHandle.split("-")[1]),_e=me!=null&&me.outputFlows[ye]?me.outputFlows[ye].produced-me.outputFlows[ye].connected:0,ke=Math.min(_e,240);fe===0?le.itemFlowRate=ke:fe===1&&(le.fluidFlowRate=ke);const Ne=su(le.itemFlowRate||0,le.fluidFlowRate||0),Ee=Cu(le.itemFlowRate||0,le.fluidFlowRate||0,fe===0?D.product_id:xe[0].product_id,fe===1?D.product_id:xe[1].product_id);return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:Ee,cycle_time:Ne.cycleTime,wasteFacilitySettings:le}}}}if(ae.data.recipe.isLiquidDump||ae.data.recipe.isLiquidBurner){const le=ae.data.recipe.isLiquidDump?ls(xe):us(xe);return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:xe,pollution:le}}}}return{...ae,data:{...ae.data,recipe:{...ae.data.recipe,inputs:xe}}}}))}else if(D.product_id!==W.product_id)return;a(J=>lp({...q,type:"custom",animated:!1,data:_t},J)),fn(),Oe("connection")}},[a,e,_t,Oe,i,Ae]),Po=()=>{f(!1),x(null),b(null),k("product"),P(""),R("name_asc"),V("all"),z("all"),X(null),M("button"),Hr({}),ie("all")},Ds=F.useCallback(()=>{f(!0),X(null),M("button")},[]),To=F.useCallback((q,O,A,D)=>{if(D!=null&&D.ctrlKey){a(J=>J.filter(oe=>!(oe.target===O&&oe.targetHandle===`left-${A}`))),fn(),Oe("connection");return}const W=ht(q);W&&(f(!0),x(W),X({nodeId:O,inputIndex:A,productId:q}),M("rectangle"),z("producers"))},[a,Xe,Mt,Oe]),zs=F.useCallback((q,O,A,D)=>{var fe,xe;if(D!=null&&D.ctrlKey){a(Me=>Me.filter(le=>!(le.source===O&&le.sourceHandle===`right-${A}`))),fn(),Oe("connection");return}const W=In.current.find(Me=>Me.id===O),J=(xe=(fe=W==null?void 0:W.data)==null?void 0:fe.recipe)==null?void 0:xe.machine_id,oe=J&&ri[J],ae=ht(q);ae&&(f(!0),x(ae),X({nodeId:O,outputIndex:A,productId:q,isOutput:!0,isFromHeatSource:!!oe}),M("rectangle"),z("consumers"))},[a,Xe,Mt,Oe]),Wi=F.useCallback((q,O,A)=>{a(D=>{const W=D.filter(J=>{var oe,ae,fe,xe;if(J.source===q){const Me=parseInt(J.sourceHandle.split("-")[1]);if(Me>=A.length)return!1;const le=A[Me],me=e.find(ke=>ke.id===J.target);if(!me)return!1;const ye=parseInt(J.targetHandle.split("-")[1]),_e=(ae=(oe=me.data)==null?void 0:oe.recipe)==null?void 0:ae.inputs[ye];if(!_e||_e.product_id!==le.product_id)return!1}if(J.target===q){const Me=parseInt(J.targetHandle.split("-")[1]);if(Me>=O.length)return!1;const le=O[Me],me=e.find(ke=>ke.id===J.source);if(!me)return!1;const ye=parseInt(J.sourceHandle.split("-")[1]),_e=(xe=(fe=me.data)==null?void 0:fe.recipe)==null?void 0:xe.outputs[ye];if(!_e||_e.product_id!==le.product_id)return!1}return!0});return W.length!==D.length&&(fn(),Oe("connection")),W})},[a,e,Oe]),Zr=F.useCallback((q,O,A,D)=>{Ot({drillHead:O.drillHead,consumable:O.consumable,machineOil:O.machineOil});const W=O.drillHead&&O.depth?Mo(O.drillHead,O.consumable,O.machineOil,O.depth):null;Tt(q,J=>({...J,recipe:{...J.recipe,inputs:A.length>0?A:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:O,cycle_time:1,power_consumption:W?{max:W.drillingPower*1e6,average:(W.drillingPower*W.lifeTime+W.idlePower*(W.replacementTime+W.travelTime))/W.totalCycleTime*1e6}:"Variable",pollution:W?W.pollution:"Variable"},leftHandles:Math.max(A.length,1),rightHandles:Math.max(D.length,1)})),Wi(q,A,D),Oe("settings")},[Wi,Oe]),Jr=F.useCallback((q,O,A,D)=>{Yt({outerStage:O.outerStage,innerStage:O.innerStage,machineOil:O.machineOil,tickCircuitDelay:O.tickCircuitDelay});const J=!O.outerStage||!O.innerStage?"":O.outerStage===1?`p_${O.innerStage}x_microchip`:`p_${O.outerStage}x${O.innerStage}x_microchip`,oe=J?Rs(J,O.machineOil,O.tickCircuitDelay):null;Tt(q,ae=>({...ae,recipe:{...ae.recipe,inputs:A.length>0?A:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:O,cycle_time:oe?oe.cycleTime:"Variable",power_consumption:oe?{max:oe.maxPowerConsumption,average:oe.avgPowerConsumption}:"Variable"},leftHandles:Math.max(A.length,1),rightHandles:Math.max(D.length,1)})),Wi(q,A,D),Oe("settings")},[Wi,Oe]),gr=F.useCallback((q,O,A,D)=>{si({trees:O.trees,harvesters:O.harvesters,sprinklers:O.sprinklers,outputs:O.outputs});const W=Su(O.trees,O.harvesters,O.sprinklers,O.outputs,O.controller,de);Tt(q,J=>({...J,recipe:{...J.recipe,inputs:A.length>0?A:[{product_id:"p_water",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:O,cycle_time:1,power_consumption:W?W.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max(A.length,1),rightHandles:Math.max(D.length,1)})),a(J=>J.filter(oe=>{if(oe.source===q||oe.target===q){const ae=parseInt((oe.source===q?oe.sourceHandle:oe.targetHandle).split("-")[1]);return oe.source===q?ae<D.length:ae<A.length}return!0})),Oe("settings")},[a,de,Oe]),Ro=F.useCallback((q,O,A,D)=>{kt({fuel:O.fuel}),Tt(q,W=>({...W,recipe:{...W.recipe,inputs:A,fireboxSettings:O,cycle_time:D?D.cycleTime:W.recipe.cycle_time,power_consumption:0}})),Oe("settings")},[Oe]),Hu=F.useCallback((q,O,A,D)=>{i(W=>W.map(J=>{if(J.id!==q)return J;const oe=pt(J.data.recipe.machine_id),ae=zi(oe==null?void 0:oe.id);let fe=J.data.recipe.power_type;(oe==null?void 0:oe.id)==="m_electric_water_heater"&&(fe=O.temperature>=320?"HV":"MV");let xe={...J.data.recipe,outputs:A,temperatureSettings:O,power_consumption:D??J.data.recipe.power_consumption,power_type:fe};if((oe==null?void 0:oe.id)==="m_water_treatment_plant"&&ae){const Me=O.temperature||vn,le=Fn(oe.id,Me,1),me=90*le,ye=17.6,_e=17.6;xe={...xe,inputs:xe.inputs.map(ke=>ke.product_id==="p_water"?{...ke,quantity:ye*le,originalQuantity:ye}:ke.product_id==="p_distilled_water"?{...ke,quantity:_e*le,originalQuantity:_e}:ke),outputs:xe.outputs.map(ke=>ke.product_id==="p_steam"?{...ke,quantity:me,originalQuantity:90}:ke)}}return{...J,data:{...J.data,recipe:xe}}})),Oe("temperatureSettings")},[i,Oe]),Wu=F.useCallback((q,O)=>{i(A=>A.map(D=>{if(D.id!==q)return D;const W=pt(D.data.recipe.machine_id),J=ri[W==null?void 0:W.id];return!J||J.type!=="boiler"?D:{...D,data:{...D.data,recipe:{...D.data.recipe,temperatureSettings:O}}}})),Oe("boilerSettings")},[i,Oe]),Sa=F.useCallback((q,O,A,D,W)=>{const J=O==="right"?"output":"input",oe=W==null?void 0:W.find(ae=>ae.nodeId===q&&ae.handleType===J&&ae.handleIndex===A);oe&&(i(ae=>ae.map(fe=>{var me,ye;if(fe.id!==q)return fe;const xe=((me=fe.data)==null?void 0:me.machineCountMode)||"free",Me=(ye=fe.data)==null?void 0:ye.cappedMachineCount;if(xe==="locked")return console.log(`Node ${q} is locked - suggestion ignored`),fe;let le=oe.suggestedMachineCount;return xe==="capped"&&typeof Me=="number"&&le>Me&&(console.log(`Node ${q} is capped at ${Me} - clamping suggestion from ${le} to ${Me}`),le=Me),{...fe,data:{...fe.data,machineCount:le}}})),Oe("machineCount"))},[i,Oe]),Vo=F.useCallback((q,O)=>{i(A=>A.map(D=>{if(D.id!==q)return D;const W=pt(D.data.recipe.machine_id);if((W==null?void 0:W.id)!=="m_chemical_plant")return D;const J=gn.find(ae=>ae.id===D.data.recipe.id);if(!J)return D;const oe=WM(J,O.speedFactor,O.efficiencyFactor);return{...D,data:{...D.data,recipe:oe}}})),Oe("settings")},[i,Oe]),Ma=F.useCallback((q,O,A,D)=>{ui({itemProductId:O.itemProductId,fluidProductId:O.fluidProductId}),i(W=>W.map(J=>{if(J.id!==q)return J;const oe=J.data.recipe.wasteFacilitySettings||{},ae=oe.itemFlowRate||0,fe=oe.fluidFlowRate||0,xe=su(ae,fe);return{...J,data:{...J.data,recipe:{...J.data.recipe,inputs:A.length>0?A:J.data.recipe.inputs,wasteFacilitySettings:{...O,itemFlowRate:ae,fluidFlowRate:fe},cycle_time:xe.cycleTime},leftHandles:Math.max(A.length,1)}}})),Wi(q,A,D),Oe("settings")},[Wi,Oe,i]),Ls=F.useCallback((q,O,A,D)=>{i(W=>W.map(J=>J.id!==q?J:{...J,data:{...J.data,recipe:{...J.data.recipe,inputs:A.length>0?A:J.data.recipe.inputs,liquidDumpSettings:O,pollution:ls(A)},leftHandles:Math.max(A.length,1)}})),Wi(q,A,D),Oe("settings")},[Wi,Oe,i]),En=F.useCallback((q,O,A,D)=>{i(W=>W.map(J=>J.id!==q?J:{...J,data:{...J.data,recipe:{...J.data.recipe,inputs:A.length>0?A:J.data.recipe.inputs,liquidBurnerSettings:O,pollution:us(A)},leftHandles:Math.max(A.length,1)}})),Wi(q,A,D),Oe("settings")},[Wi,Oe,i]),ji=F.useCallback((q,O=null)=>{var me,ye;const A=pt(q.machine_id);if(!A||!q.inputs||!q.outputs){alert("Error: Invalid machine or recipe data");return}let D=is(q,A.id);const W=`node-${u}`,J=T?e.find(_e=>_e.id===T.nodeId):null;let oe;if(J)oe={x:J.position.x+(T.isOutput?400:-400),y:J.position.y};else if(rn.current&&Gn.current){const _e=Gn.current.getBoundingClientRect(),ke=rn.current.screenToFlowPosition({x:_e.left+_e.width/2,y:_e.top+_e.height/2}),Ne=320,Ee=300,Ue=50;let Ke={x:ke.x-Ne/2,y:ke.y-Ee/2},Je=0;for(;Je<20&&e.some(Ct=>{const xr=Math.abs(Ct.position.x-Ke.x),no=Math.abs(Ct.position.y-Ke.y);return xr<Ne+Ue&&no<Ee+Ue});){const Rt=Je/20*Math.PI*2,pi=100+Je*50;Ke={x:ke.x-Ne/2+Math.cos(Rt)*pi,y:ke.y-Ee/2+Math.sin(Rt)*pi},Je++}oe=Ke}else oe={x:Math.random()*400+100,y:Math.random()*300+100};if(((me=ri[A.id])==null?void 0:me.type)==="boiler"){const _e={heatLoss:((ye=D.temperatureSettings)==null?void 0:ye.heatLoss)??0,coolantTemp:Lr},ke=i_(A.id,_e,Lr,null,Lr),Ne=ri[A.id],Ee=Ig(D.outputs,ke,!0,Ne,Lr);D={...D,outputs:Ee,temperatureSettings:_e}}const fe={drillConfig:Pt,assemblerConfig:Bt,treeFarmConfig:ai,fireboxConfig:li};if(Tg(D)&&(D=Pg(D,T,h,fe,de,jo),D.drillSettings&&Ot({drillHead:D.drillSettings.drillHead,consumable:D.drillSettings.consumable,machineOil:D.drillSettings.machineOil}),D.assemblerSettings&&Yt({outerStage:D.assemblerSettings.outerStage,innerStage:D.assemblerSettings.innerStage,machineOil:D.assemblerSettings.machineOil,tickCircuitDelay:D.assemblerSettings.tickCircuitDelay}),D.treeFarmSettings&&si({trees:D.treeFarmSettings.trees,harvesters:D.treeFarmSettings.harvesters,sprinklers:D.treeFarmSettings.sprinklers,outputs:D.treeFarmSettings.outputs}),D.fireboxSettings&&kt({fuel:D.fireboxSettings.fuel})),A.id==="m_air_separation_unit"){const _e=k0(de),ke=D.outputs.map(Ne=>Ne.product_id==="p_residue"?{...Ne,quantity:parseFloat(_e.toFixed(6))}:Ne);D={...D,outputs:ke}}const xe=O!==null?O:$r[q.id]??1,Me=Kt(),le={id:W,type:"custom",position:oe,data:{recipe:D,machine:A,machineCount:xe,machineCountMode:"free",cappedMachineCount:void 0,displayMode:st,machineDisplayMode:mt,leftHandles:Math.max(D.inputs.length,1),rightHandles:Math.max(D.outputs.length,1),...Me,globalPollution:de,isTarget:!1,flows:null,suggestions:[],zoomLevel:Cn},sourcePosition:"right",targetPosition:"left"};return i(_e=>{const ke=[..._e,le];return Oe("node"),T&&xe>0&&setTimeout(()=>{var Ue,Ke,Je;const Ne=T.isOutput?"inputs":"outputs";let Ee=-1;if((D.isWasteFacility||D.id==="r_underground_waste_facility")&&!T.isOutput)T.productId==="p_concrete_block"?Ee=2:T.productId==="p_lead_ingot"?Ee=3:Ee=D[Ne].findIndex(tt=>tt.product_id===T.productId);else if(T.isOutput&&T.isFromHeatSource){const tt=pt(D.machine_id);if(tt&&((Ue=ri[tt.id])==null?void 0:Ue.type)==="boiler"&&D.inputs.length>=2){const pi=(Ke=D.inputs[0])==null?void 0:Ke.product_id,Ct=(Je=D.inputs[1])==null?void 0:Je.product_id;pi===Ct&&Ct===T.productId||Ct===T.productId?Ee=1:Ee=D[Ne].findIndex(xr=>xr.product_id===T.productId)}else Ee=D[Ne].findIndex(pi=>pi.product_id===T.productId)}else Ee=D[Ne].findIndex(tt=>tt.product_id===T.productId);if(Ee!==-1){const tt=T.isOutput?T.outputIndex:Ee,Rt=T.isOutput?Ee:T.inputIndex,pi={source:T.isOutput?T.nodeId:W,sourceHandle:`right-${tt}`,target:T.isOutput?W:T.nodeId,targetHandle:`left-${Rt}`,type:"custom",animated:!1,data:_t};a(Ct=>lp(pi,Ct)),fn(),Oe("connection")}},50),ke}),d(_e=>_e+1),Oe(),W},[u,e,i,a,st,mt,Pt,Bt,ai,li,jo,$r,de,h,Oe,T,_t,Kt]),ln=F.useCallback(q=>{i(O=>O.filter(A=>A.id!==q)),a(O=>O.filter(A=>A.source!==q&&A.target!==q)),Z(O=>O.filter(A=>A.recipeBoxId!==q)),fn(),Oe("node")},[i,a,Oe]),Fo=F.useCallback(q=>{var A;G.find(D=>D.recipeBoxId===q.id)?(Z(D=>D.filter(W=>W.recipeBoxId!==q.id)),i(D=>D.map(W=>W.id===q.id?{...W,data:{...W.data,isTarget:!1}}:W))):(A=q.data)!=null&&A.recipe&&(Z(D=>[...D,{id:`target_${ue}`,recipeBoxId:q.id}]),he(D=>D+1),i(D=>D.map(W=>W.id===q.id?{...W,data:{...W.data,isTarget:!0}}:W)))},[G,ue,i]),Kn=F.useCallback((q,O,A,D)=>{var Ne;const W=G.find(Ee=>Ee.id===q);if(!W)return;const J=e.find(Ee=>Ee.id===W.recipeBoxId);if(!J)return;const{recipe:oe,machine:ae,machineCount:fe=0}=J.data||{};if(!oe)return;const xe=oe.isMineshaftDrill||oe.id==="r_mineshaft_drill";let Me=oe.cycle_time;if((typeof Me!="number"||Me<=0)&&(Me=1),zi(ae==null?void 0:ae.id)){const Ee=Zi[ae.id];if((Ee==null?void 0:Ee.type)==="steam_input"&&lr(oe)){const Ue=oe.tempDependentInputTemp??vn;Me=Fn(ae.id,Ue,Me)}}(typeof Me!="number"||Me<=0)&&(Me=1);const me=(Ne=Ae==null?void 0:Ae.flows)==null?void 0:Ne.byNode[W.recipeBoxId];if(!me)return;let ye=0,_e=0;if(O==="output"){const Ee=me.outputFlows[A];if(!Ee)return;ye=Ee.connected;const Ue=oe.outputs[A],Ke=Ue.originalQuantity!==void 0?Ue.originalQuantity:Ue.quantity;_e=xe?Ke:Ke/Me}else{const Ee=me.inputFlows[A];if(!Ee)return;ye=Ee.connected;const Ue=oe.inputs[A];_e=xe?Ue.quantity:Ue.quantity/Me}if(_e<=0)return;const ke=(ye+D)/_e;Tt(W.recipeBoxId,Ee=>({...Ee,machineCount:ke})),Oe("machineCount")},[G,e,Ae,Oe]),eo=F.useCallback(q=>{const O=G.find(A=>A.id===q);O&&(Z(A=>A.filter(D=>D.id!==q)),Tt(O.recipeBoxId,A=>({...A,isTarget:!1})))},[G]),Os=F.useCallback((q,O)=>{if(Xe){if(Mt==="target"){Fo(O);return}else if(Mt==="delete"){ln(O.id);return}}q.shiftKey&&!q.ctrlKey&&!q.altKey?Fo(O):q.ctrlKey&&q.altKey&&ln(O.id)},[Xe,Mt,Fo,ln]),di=F.useCallback((q,O)=>{var A,D;q.stopPropagation(),qe(O.id),Le(String(((A=O.data)==null?void 0:A.machineCount)??0)),Ye(((D=O.data)==null?void 0:D.machineCountMode)||"free"),Se(!0)},[]),In=F.useRef(e),Ca=F.useRef(o);F.useEffect(()=>{In.current=e},[e]),F.useEffect(()=>{Ca.current=o},[o]);const to=F.useCallback(q=>{const O=In.current.find(A=>A.id===q);O&&_r({recipe:{...O.data.recipe},machine:O.data.machine,machineCount:O.data.machineCount})},[]),Uu=F.useCallback(q=>{if(!Gn.current)return;const O=Gn.current.getBoundingClientRect();ci({x:q.clientX-O.left,y:q.clientY-O.top})},[]),qa=F.useCallback(q=>{if(!Jt||q.button!==0||(q.stopPropagation(),!rn.current))return;const O=rn.current.screenToFlowPosition({x:q.clientX,y:q.clientY});O.x-=160,O.y-=150;const A=`node-${u}`,D=Kt(),W={id:A,type:"custom",position:O,data:{recipe:Jt.recipe,machine:Jt.machine,machineCount:Jt.machineCount,displayMode:st,machineDisplayMode:mt,leftHandles:Jt.recipe.inputs.length,rightHandles:Jt.recipe.outputs.length,...D,globalPollution:de,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};i(J=>[...J,W]),d(J=>J+1),_r(null),Oe("node")},[Jt,u,st,mt,de,i,Kt,Oe]),Ea=F.useCallback(q=>{q.button===2&&_r(null)},[]),Qn=F.useCallback((q=!1)=>{var A,D;let O=parseFloat(Fe);if(isNaN(O)||O<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}O=0}if(ce&&!Ie){const W=e.find(ae=>ae.id===ce),J=((A=W==null?void 0:W.data)==null?void 0:A.machineCount)||0;let oe=(D=W==null?void 0:W.data)==null?void 0:D.cappedMachineCount;if(ze==="capped"?oe=O:ze==="free"&&(oe=void 0),q&&J>0&&O!==J){const ae=ds(e,o),fe=Ae==null?void 0:Ae.flows;if(fe){const xe=eq(ce,J,O,ae,fe,e);i(Me=>Me.map(le=>{const me=xe.get(le.id);return le.id===ce?{...le,data:{...le.data,machineCount:O,machineCountMode:ze,cappedMachineCount:oe}}:me!==void 0?{...le,data:{...le.data,machineCount:me}}:le}))}else Tt(ce,xe=>({...xe,machineCount:O,machineCountMode:ze,cappedMachineCount:oe}))}else Tt(ce,ae=>({...ae,machineCount:O,machineCountMode:ze,cappedMachineCount:oe}))}else Ie&&Tt(Ie,W=>({...W,machineCount:O}));Se(!1),qe(null),Le(""),Ye("free"),Re(null),Oe("machineCount")},[ce,Fe,ze,Ie,e,o,Ae,i,ln,Oe]),io=F.useCallback(()=>{Ie&&(ln(Ie),f(!0),x(null),b(null),k("product")),Se(!1),qe(null),Le(""),Ye("free"),Re(null)},[Ie,ln]),Bs=F.useCallback((q,O,A)=>{let D,W;O==="free"?(D="capped",W=A):O==="capped"?(D="locked",W=A):(D="free",W=void 0),i(J=>J.map(oe=>oe.id!==q?oe:{...oe,data:{...oe.data,machineCountMode:D,cappedMachineCount:W}}))},[i]),Gu=F.useCallback(()=>{const q=Vq(e,o);i(q)},[e,o,i]),Yu=F.useCallback(()=>{if(G.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let q=w0(e,o,G,{allowDeficiency:!1});if(!q.success&&q.hasDeficiency)if(window.confirm(`${q.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))q=w0(e,o,G,{allowDeficiency:!0});else return;q.success?(i(O=>O.map(A=>{const D=q.updates.get(A.id);return D!==void 0?{...A,data:{...A.data,machineCount:D}}:A})),Oe("machineCount"),alert(`Success! Updated ${q.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(q.message||"No changes needed - production line is already balanced.")},[G,e,o,i,Oe]),As=()=>{if(!h)return[];const q=ht(h.id),O=TC(h.id),A=PC(h.id),D=[Ih,Ph,Th,bp,Mp,qp],W=D.filter(ae=>JC(ae.id).includes(h.id)),J=D.filter(ae=>{if(ZC(ae.id).includes(h.id))return!0;if(q){if(ae.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner")return!1}return!1}),oe=D.filter(ae=>ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner"?(q==null?void 0:q.type)==="fluid":ae.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return Q==="producers"?[...O,...W]:Q==="consumers"?[...A,...J]:Q==="disposal"?oe:Array.from(new Map([...O,...A,...W,...J,...oe].map(ae=>[ae.id,ae])).values())};F.useEffect(()=>{if(_){const q=S==="product"?As():Xl(w==null?void 0:w.id),O=T?e.find(D=>D.id===T.nodeId):null,A={};q.forEach(D=>{A[D.id]=Fs(D,O,T)}),Hr(A)}},[_,S,h,w,T,e,Q]);const Ia=F.useCallback(()=>{const q=document.createElement("input");q.type="file",q.accept=".json",q.onchange=O=>{var W;const A=(W=O.target.files)==null?void 0:W[0];if(!A)return;const D=new FileReader;D.onload=J=>{try{const oe=JSON.parse(J.target.result);if(!oe.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const ae=oe.canvas.nodes||[],fe=[];if(ae.forEach(le=>{var ye,_e,ke,Ne,Ee,Ue,Ke,Je;const me=(_e=(ye=le.data)==null?void 0:ye.recipe)==null?void 0:_e.machine_id;me&&!pt(me)&&fe.push(`Machine: ${me}`),(Ee=(Ne=(ke=le.data)==null?void 0:ke.recipe)==null?void 0:Ne.inputs)==null||Ee.forEach(tt=>{tt.product_id!=="p_variableproduct"&&!ht(tt.product_id)&&fe.push(`Product: ${tt.product_id}`)}),(Je=(Ke=(Ue=le.data)==null?void 0:Ue.recipe)==null?void 0:Ke.outputs)==null||Je.forEach(tt=>{tt.product_id!=="p_variableproduct"&&!ht(tt.product_id)&&fe.push(`Product: ${tt.product_id}`)})}),fe.length>0){const le=[...new Set(fe)];alert(`Cannot import canvas - missing items:
${le.slice(0,10).join(`
`)}${le.length>10?`
...and ${le.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const xe=Kt(),Me=ae.map(le=>{var _e,ke,Ne,Ee;const me=pt((ke=(_e=le.data)==null?void 0:_e.recipe)==null?void 0:ke.machine_id);let ye=(Ne=le.data)==null?void 0:Ne.recipe;return me&&ye&&!((Ee=ye.outputs)!=null&&Ee.some(Ue=>Ue.temperature!==void 0))&&(ye=is(ye,me.id)),{...le,data:{...le.data,recipe:ye,machineCount:le.data.machineCount??1,displayMode:st,machineDisplayMode:mt,...xe,globalPollution:de,flows:null,suggestions:[]}}});i(Me),a(oe.canvas.edges||[]),Z(oe.canvas.targetProducts||[]),Gt(oe.canvas.soldProducts||{}),Ai(oe.canvas.favoriteRecipes||[]),Ot(oe.canvas.lastDrillConfig||null),Yt(oe.canvas.lastAssemblerConfig||null),si(oe.canvas.lastTreeFarmConfig||null),kt(oe.canvas.lastFireboxConfig||null),ui(oe.canvas.lastWasteFacilityConfig||null),d(oe.canvas.nodeId||0),he(oe.canvas.targetIdCounter||0),fn(),Oe("node"),alert("Canvas imported successfully!")}catch(oe){alert(`Import failed: ${oe.message}`)}},D.readAsText(A)},q.click()},[st,mt,de,Kt,i,a,Z,Gt,Ai,Ot,Yt,si,kt,ui,d,he,Oe]),Ku=F.useCallback(q=>{var D;const O=(D=q.target.files)==null?void 0:D[0];if(!O)return;const A=new FileReader;A.onload=W=>{var J,oe;try{const ae=JSON.parse(W.target.result),fe=ae.products||ae.machines||ae.recipes,xe=ae.canvas;if(fe){const Me=new Map((ae.products||[]).map(ke=>[ke.id,ke])),le=Array.from(Me.values()),me=new Set(((J=ae.machines)==null?void 0:J.map(ke=>ke.id))||[]),ye=(ae.recipes||[]).filter(ke=>me.has(ke.machine_id)),_e=[...Vi];if(le.forEach(ke=>{const Ne=_e.findIndex(Ee=>Ee.id===ke.id);Ne>=0?_e[Ne]=ke:_e.push(ke)}),mp(_e),((oe=ae.machines)==null?void 0:oe.length)>0){const ke=[...hn],Ne=new Set(ae.machines.map(Ue=>Ue.id)),Ee=gn.filter(Ue=>!Ne.has(Ue.machine_id));ae.machines.forEach(Ue=>{const Ke=ke.findIndex(Je=>Je.id===Ue.id);Ke>=0?ke[Ke]=Ue:ke.push(Ue)}),fp(ke),hp([...Ee,...ye])}if(!xe){alert("Data import successful!"),window.location.reload();return}}if(xe){const Me=ae.canvas.nodes||[],le=[];if(Me.forEach(_e=>{var Ne,Ee,Ue,Ke,Je,tt,Rt,pi;const ke=(Ee=(Ne=_e.data)==null?void 0:Ne.recipe)==null?void 0:Ee.machine_id;ke&&!pt(ke)&&le.push(`Machine: ${ke}`),(Je=(Ke=(Ue=_e.data)==null?void 0:Ue.recipe)==null?void 0:Ke.inputs)==null||Je.forEach(Ct=>{Ct.product_id!=="p_variableproduct"&&!ht(Ct.product_id)&&le.push(`Product: ${Ct.product_id}`)}),(pi=(Rt=(tt=_e.data)==null?void 0:tt.recipe)==null?void 0:Rt.outputs)==null||pi.forEach(Ct=>{Ct.product_id!=="p_variableproduct"&&!ht(Ct.product_id)&&le.push(`Product: ${Ct.product_id}`)})}),le.length>0){const _e=[...new Set(le)];alert(`Cannot import canvas - missing items:
${_e.slice(0,10).join(`
`)}${_e.length>10?`
...and ${_e.length-10} more`:""}`),q.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){q.target.value="";return}const me=Kt(),ye=Me.map(_e=>{var Ee,Ue,Ke,Je;const ke=pt((Ue=(Ee=_e.data)==null?void 0:Ee.recipe)==null?void 0:Ue.machine_id);let Ne=(Ke=_e.data)==null?void 0:Ke.recipe;return ke&&Ne&&!((Je=Ne.outputs)!=null&&Je.some(tt=>tt.temperature!==void 0))&&(Ne=is(Ne,ke.id)),{..._e,data:{..._e.data,recipe:Ne,machineCount:_e.data.machineCount??1,displayMode:st,machineDisplayMode:mt,...me,globalPollution:de,flows:null,suggestions:[]}}});i(ye),a(ae.canvas.edges||[]),Z(ae.canvas.targetProducts||[]),Gt(ae.canvas.soldProducts||{}),Ai(ae.canvas.favoriteRecipes||[]),Ot(ae.canvas.lastDrillConfig||null),Yt(ae.canvas.lastAssemblerConfig||null),si(ae.canvas.lastTreeFarmConfig||null),kt(ae.canvas.lastFireboxConfig||null),ui(ae.canvas.lastWasteFacilityConfig||null),d(ae.canvas.nodeId||0),he(ae.canvas.targetIdCounter||0),fn(),Oe("node"),alert("Canvas import successful!")}}catch(ae){alert(`Import failed: ${ae.message}`)}},A.readAsText(O),q.target.value=""},[st,mt,de,Kt,i,a,Z,Gt,Ai,Ot,Yt,si,kt,d,he]);F.useCallback(()=>{const q=new Blob([JSON.stringify({products:Vi,machines:hn,recipes:gn},null,2)],{type:"application/json"}),O=URL.createObjectURL(q),A=document.createElement("a");A.href=O,A.download=`industrialist-data-${Date.now()}.json`,A.click(),URL.revokeObjectURL(O)},[Vi,hn,gn]);const Qu=F.useCallback(()=>{const O={nodes:e.map(J=>({...J,data:{...J.data,flows:void 0,suggestions:void 0}})),edges:o,targetProducts:G,nodeId:u,targetIdCounter:ue,soldProducts:Ut,favoriteRecipes:Lt,lastDrillConfig:Pt,lastAssemblerConfig:Bt,lastTreeFarmConfig:ai,lastFireboxConfig:li,lastWasteFacilityConfig:en},A=new Blob([JSON.stringify({canvas:O},null,2)],{type:"application/json"}),D=URL.createObjectURL(A),W=document.createElement("a");W.href=D,W.download=`industrialist-canvas-${Date.now()}.json`,W.click(),URL.revokeObjectURL(D)},[e,o,G,u,ue,Ut,Lt,Pt,Bt,ai,li]);F.useCallback(()=>{const q=e.map(W=>({...W,data:{...W.data,flows:void 0,suggestions:void 0}})),O=new Blob([JSON.stringify({products:Vi,machines:hn,recipes:gn,canvas:{nodes:q,edges:o,targetProducts:G,nodeId:u,targetIdCounter:ue,soldProducts:Ut,favoriteRecipes:Lt,lastDrillConfig:Pt,lastAssemblerConfig:Bt,lastTreeFarmConfig:ai,lastFireboxConfig:li,lastWasteFacilityConfig:en}},null,2)],{type:"application/json"}),A=URL.createObjectURL(O),D=document.createElement("a");D.href=A,D.download=`industrialist-export-${Date.now()}.json`,D.click(),URL.revokeObjectURL(A)},[e,o,G,u,ue,Ut,Lt,Pt,Bt,ai,li]);const Xu=F.useCallback(()=>{const q=ga(),O=xa(),A=Vs();mp(q),fp(O),hp(A),Oe("node")},[Oe]),Zu=F.useCallback(q=>{const O=Kt(),A=q.nodes.map(D=>{var oe,ae,fe,xe;const W=pt((ae=(oe=D.data)==null?void 0:oe.recipe)==null?void 0:ae.machine_id);let J=(fe=D.data)==null?void 0:fe.recipe;return W&&J&&!((xe=J.outputs)!=null&&xe.some(Me=>Me.temperature!==void 0))&&(J=is(J,W.id)),{...D,data:{...D.data,recipe:J,machineCount:D.data.machineCount??1,displayMode:st,machineDisplayMode:mt,...O,globalPollution:de,flows:null,suggestions:[]}}});i(A),a(q.edges||[]),Z(q.targetProducts||[]),Gt(q.soldProducts||{}),Ai(q.favoriteRecipes||[]),Ot(q.lastDrillConfig||null),Yt(q.lastAssemblerConfig||null),si(q.lastTreeFarmConfig||null),kt(q.lastFireboxConfig||null),ui(q.lastWasteFacilityConfig||null),d(q.nodeId||0),he(q.targetIdCounter||0),fn(),Oe("node")},[st,mt,de,Kt,i,a,Z,Gt,Ai,Ot,Yt,si,kt,ui,d,he,Oe]),Ju=F.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(dM(),qC(vu),EC(wu),IC(bu),i([]),a([]),d(0),Z([]),he(0),Gt({}),Ot(null),Yt(null),si(null),kt(null),ui(null),window.location.reload())},[i,a,Vi,hn,gn]);F.useEffect(()=>{const q=O=>{if(O.key==="industrialist_theme")try{const A=JSON.parse(O.newValue);Sn({edgePath:A.edgePath||"orthogonal",edgeStyle:A.edgeStyle||"animated"})}catch(A){console.error("Error parsing theme from storage:",A)}};return window.addEventListener("storage",q),()=>window.removeEventListener("storage",q)},[]),F.useEffect(()=>{if(!bt){const q=lu();Sn({edgePath:q.edgePath||"orthogonal",edgeStyle:q.edgeStyle||"animated"})}},[bt]);const $s=Vi.filter(q=>q.name.toLowerCase().includes(E.toLowerCase())&&(j==="all"||q.type===j)).sort((q,O)=>C==="name_asc"?q.name.localeCompare(O.name):C==="name_desc"?O.name.localeCompare(q.name):C==="price_asc"?(q.price==="Variable"?1/0:q.price)-(O.price==="Variable"?1/0:O.price):C==="price_desc"?(O.price==="Variable"?-1/0:O.price)-(q.price==="Variable"?-1/0:q.price):C==="rp_asc"?(q.rp_multiplier==="Variable"?1/0:q.rp_multiplier)-(O.rp_multiplier==="Variable"?1/0:O.rp_multiplier):(O.rp_multiplier==="Variable"?-1/0:O.rp_multiplier)-(q.rp_multiplier==="Variable"?-1/0:q.rp_multiplier)),Hs=hn.filter(q=>{const O=q.name.toLowerCase().includes(E.toLowerCase()),A=q.id==="m_mineshaft_drill"||q.id==="m_logic_assembler"||q.id==="m_tree_farm"||q.id==="m_underground_waste_facility"||q.id==="m_liquid_dump"||q.id==="m_liquid_burner"||Xl(q.id).length>0,D=L==="all"||q.tier!==void 0&&q.tier.toString()===L;return O&&A&&D}).sort((q,O)=>q.name.localeCompare(O.name)),ec=q=>{if(q.id==="m_mineshaft_drill")ji(Ih,1);else if(q.id==="m_logic_assembler")ji(Ph,1);else if(q.id==="m_tree_farm")ji(Th,1);else if(q.id==="m_underground_waste_facility")ji(bp,1);else if(q.id==="m_liquid_dump")ji(Mp,1);else if(q.id==="m_liquid_burner")ji(qp,1);else{b(q);return}Po()},Ws=(S==="product"?As():Xl(w==null?void 0:w.id)).sort((q,O)=>{const A=Lt.includes(q.id),D=Lt.includes(O.id);if(A&&!D)return-1;if(!A&&D)return 1;const W=pt(q.machine_id),J=pt(O.machine_id);return((W==null?void 0:W.name)||"").localeCompare((J==null?void 0:J.name)||"")}),tc=q=>{Ai(O=>O.includes(q)?O.filter(A=>A!==q):[...O,q])};return l.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[l.jsxs(jS,{ref:Gn,nodes:e,edges:o,onNodesChange:Eo,onEdgesChange:wa,onConnect:Xr,onNodeClick:Os,onNodeDoubleClick:di,onMouseMove:Uu,onClick:qa,onContextMenu:Ea,onInit:q=>{rn.current=q,It(q.getZoom())},onMoveEnd:(q,O)=>{It(O.zoom)},nodeTypes:Fq,edgeTypes:Dq,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:_t.edgePath==="straight"?"straight":_t.edgePath==="orthogonal"?"step":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:_t.edgeStyle==="animated"||_t.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[l.jsx(zS,{color:"#333",gap:16,size:1}),!Xe&&l.jsx(WS,{className:(Zt||zt)&&!Bi?"controls-shifted":"",position:"bottom-left"}),!Xe&&l.jsx(rM,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),l.jsx(fa,{position:"top-left",style:{margin:Xe?"5px":"10px",maxWidth:Xe?"calc(100vw - 10px)":"none"},children:l.jsx("div",{className:`left-panel-container ${Bi?"collapsed":""}`,style:Xe?{maxWidth:"100%"}:{},children:l.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[l.jsxs("div",{className:"stats-panel",children:[l.jsx("h3",{className:"stats-title",children:fr}),l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Power:"}),l.jsx("div",{className:"stat-value",children:Od(Ii.totalPower)})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Pollution:"}),l.jsxs("div",{className:"stat-value",style:{color:Ii.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Ii.totalPollution.toFixed(2),"%/hr"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),l.jsx("div",{className:"stat-value",children:Ii.totalModelCount.toFixed(0)})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Profit:"}),l.jsxs("div",{className:"stat-value",style:{color:yr>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",fi(yr),"/s"]})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("div",{className:"stat-label",children:"Total Cost:"}),l.jsxs("div",{className:"stat-value",children:["$",fi(Qr.totalCost)]})]})]})]}),l.jsxs("div",{className:"flex-col action-buttons-container",children:[l.jsx("button",{onClick:Ds,className:"btn btn-primary",children:"+ Select Recipe"}),l.jsx("button",{onClick:()=>{B(!0),pe("targets")},className:"btn btn-secondary",children:"View Recipes"}),l.jsx("button",{onClick:Yu,className:"btn btn-secondary",children:"Compute Machines"}),l.jsx("button",{onClick:Gu,className:"btn btn-secondary",children:"Auto Layout"}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>yi(!Zt),className:"btn btn-secondary btn-square",title:Zt?"Close more statistics":"Open more statistics",children:Zt?"":""}),l.jsx("button",{onClick:()=>An(!Bi),className:"btn btn-secondary btn-square btn-panel-toggle",title:Bi?"Show left panel":"Hide left panel",children:Bi?"":""})]})]})]}),(Zt||zt)&&l.jsxs("div",{className:`extended-panel ${zt?"closing":""}`,children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Xe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Xe?"wrap":"nowrap",gap:Xe?"10px":"0"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Xe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Xe&&l.jsx("button",{onClick:()=>yi(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),l.jsxs("div",{style:{display:"flex",gap:Xe?"5px":"10px",flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>Co(q=>q==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Xe?"6px 10px":"8px 16px",fontSize:Xe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:st==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:st==="perSecond"?"Per Second":"Per Cycle"}),l.jsx("button",{onClick:()=>Ar(q=>q==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Xe?"6px 10px":"8px 16px",fontSize:Xe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:mt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:mt==="perMachine"?"Per Machine":"Total"})]})]}),l.jsxs("div",{className:"extended-panel-content",children:[l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("button",{onClick:()=>$n(q=>!q),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:oi?"Resume pollution change":"Pause pollution change",children:oi?"":""}),l.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:de,onFocus:()=>Ei(!0),onBlur:q=>{Ei(!1);const O=q.target.value,A=parseFloat(O);nt(!isNaN(A)&&isFinite(A)?parseFloat(A.toFixed(4)):0)},onChange:q=>nt(q.target.value===""?"":parseFloat(q.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),l.jsxs("div",{style:{marginTop:"30px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Ni.length===0?l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ni.map(q=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:q.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:q.product.name}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[fi(q.excessRate),"/s"]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof q.product.price=="number"&&l.jsxs("div",{style:{color:q.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",fi(q.product.price*q.excessRate),"/s"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[l.jsx("input",{type:"checkbox",checked:q.isSold,onChange:O=>Gt(A=>({...A,[q.productId]:O.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},q.productId))})]}),l.jsxs("div",{style:{marginTop:"30px"},children:[l.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),No.length===0?l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:No.map(q=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:q.product.name}),l.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",fi(q.deficiencyRate),"/s"]})]}),l.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[q.affectedNodes.length," node",q.affectedNodes.length!==1?"s":""," affected"]})]},q.productId))})]})]})]})]})})}),l.jsxs(fa,{position:"top-right",style:{margin:Xe?"5px":"10px",maxWidth:Xe?"calc(100vw - 10px)":"none"},children:[Xe&&l.jsxs("div",{className:"mobile-controls-container",children:[l.jsx("button",{onClick:()=>Ji(q=>q==="target"?"pan":"target"),className:`btn ${Mt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),l.jsx("button",{onClick:()=>Ji(q=>q==="delete"?"pan":"delete"),className:`btn ${Mt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),l.jsxs("div",{className:`menu-container ${Ge?"":"closed"}`,style:Xe?{maxWidth:"calc(100vw - 10px)"}:{},children:[l.jsx("button",{onClick:()=>at(!Ge),className:"btn btn-secondary btn-menu-toggle",style:Xe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:Ge?">":"<"}),l.jsxs("div",{className:"menu-buttons",style:Xe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[l.jsx("button",{onClick:()=>{i([]),a([]),d(0),Z([]),he(0),Gt({}),Ot(null),Yt(null),si(null),kt(null),ui(null),fn(),Oe("node")},className:"btn btn-secondary",children:"Clear All"}),l.jsx("button",{onClick:()=>Ci(!0),className:"btn btn-secondary",children:"Saves"}),l.jsx("button",{onClick:()=>Oi(!0),className:"btn btn-secondary",children:"Data"}),l.jsx("button",{onClick:Ju,className:"btn btn-secondary",children:"Restore Defaults"}),l.jsx("button",{onClick:()=>xt(!0),className:"btn btn-secondary",children:"Theme Editor"}),l.jsx("button",{onClick:()=>Dt(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),l.jsx("input",{ref:va,type:"file",accept:".json",style:{display:"none"},onChange:Ku}),(be||y)&&l.jsx("div",{className:"modal-overlay",onClick:io,children:be&&l.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),style:{width:"450px"},children:[l.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),l.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[l.jsx("button",{onClick:()=>{const q=["free","capped","locked"],A=(q.indexOf(ze)+1)%q.length,D=q[A];Ye(D)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:ze==="locked"?"#ef4444":ze==="capped"?"#f59e0b":"var(--bg-secondary)",color:ze==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${ze==="free"?"Free (LP/suggestions can change)":ze==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:ze==="free"?" Free":ze==="capped"?" Cap":" Lock"}),l.jsx("input",{type:"number",min:"0",step:"0.1",value:Fe,onChange:q=>Le(q.target.value),onKeyPress:q=>{q.key==="Enter"&&Qn(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),l.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[ze==="free"&&"Free: LP solver and suggestions can modify this count",ze==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Fe)||0} (the value when Apply is pressed)`,ze==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ce&&!Ie&&l.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:l.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),l.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:io,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),l.jsx("button",{onClick:()=>Qn(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ce&&!Ie&&l.jsx("button",{onClick:()=>Qn(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),_&&l.jsx("div",{className:"modal-overlay",onClick:Po,children:l.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),children:[l.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:w?`Recipes for ${w.name}`:"Select Product or Machine"}),!h&&!w?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-lg",children:l.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[l.jsx("button",{onClick:()=>k("product"),className:`btn ${S==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),l.jsx("button",{onClick:()=>k("machine"),className:`btn ${S==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),S==="product"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-lg flex-col",children:[l.jsx("input",{type:"text",placeholder:"Search products...",value:E,onChange:q=>P(q.target.value),className:"input"}),l.jsxs("div",{className:"flex-row",children:[l.jsxs("select",{value:j,onChange:q=>V(q.target.value),className:"select",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"item",children:"Items Only"}),l.jsx("option",{value:"fluid",children:"Fluids Only"})]}),l.jsxs("select",{value:C,onChange:q=>R(q.target.value),className:"select",children:[l.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),l.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),l.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),l.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),l.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),l.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),l.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[l.jsxs("div",{className:"product-table-header",children:[l.jsx("div",{children:"Product"}),l.jsx("div",{className:"text-right",children:"Price"}),l.jsx("div",{className:"text-right",children:"RP Mult"})]}),$s.map(q=>l.jsxs("div",{onClick:()=>x(q),className:"product-row",children:[l.jsxs("div",{children:[l.jsx("div",{className:"product-name",children:q.name}),l.jsx("div",{className:"product-type",children:q.type==="item"?" Item":" Fluid"})]}),l.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:q.price==="Variable"?"Variable":`${fi(q.price)}`}),l.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:q.rp_multiplier==="Variable"?"Variable":q.rp_multiplier>=1e3?`${fi(q.rp_multiplier)}x`:`${q.rp_multiplier.toFixed(1)}x`})]},q.id))]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[l.jsx("input",{type:"text",placeholder:"Search machines...",value:E,onChange:q=>P(q.target.value),className:"input",style:{flex:3}}),l.jsxs("select",{value:L,onChange:q=>ie(q.target.value),className:"select",style:{flex:1},children:[l.jsx("option",{value:"all",children:"All Tiers"}),l.jsx("option",{value:"1",children:"Tier 1"}),l.jsx("option",{value:"2",children:"Tier 2"}),l.jsx("option",{value:"3",children:"Tier 3"}),l.jsx("option",{value:"4",children:"Tier 4"}),l.jsx("option",{value:"5",children:"Tier 5"})]})]}),l.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:Hs.length===0?l.jsx("div",{className:"empty-state",children:"No machines found"}):Hs.map(q=>l.jsxs("div",{onClick:()=>ec(q),className:"recipe-card",style:{cursor:"pointer"},children:[l.jsx("div",{className:"recipe-machine",style:{color:q.tier===1?"var(--tier-1-color)":q.tier===2?"var(--tier-2-color)":q.tier===3?"var(--tier-3-color)":q.tier===4?"var(--tier-4-color)":(q.tier===5,"var(--tier-5-color)")},children:q.name}),l.jsx("div",{className:"recipe-details",style:{color:"#999"},children:q.id==="m_mineshaft_drill"||q.id==="m_logic_assembler"||q.id==="m_tree_farm"?"Click to create box":`${Xl(q.id).length} recipe(s)`})]},q.id))})]})]}):l.jsxs(l.Fragment,{children:[I==="button"&&l.jsx("button",{onClick:()=>{x(null),b(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&l.jsx("div",{className:"mb-lg",children:l.jsxs("select",{value:Q,onChange:q=>z(q.target.value),className:"select",children:[l.jsx("option",{value:"all",children:"All Recipes"}),l.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),l.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),l.jsx("option",{value:"disposal",children:"Disposal"})]})}),l.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:Ws.length===0?l.jsx("div",{className:"empty-state",children:"No recipes found"}):Ws.map(q=>{const O=pt(q.machine_id),A=Lt.includes(q.id),D=$r[q.id]??1;return O&&q.inputs&&q.outputs?l.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("button",{onClick:W=>{W.stopPropagation(),tc(q.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:A?"none":"grayscale(100%)",opacity:A?1:.4,transition:"all 0.2s"},onMouseEnter:W=>{W.currentTarget.style.transform="scale(1.2)",W.currentTarget.style.opacity="1"},onMouseLeave:W=>{W.currentTarget.style.transform="scale(1)",W.currentTarget.style.opacity=A?"1":"0.4"},title:A?"Remove from favorites":"Add to favorites",children:""}),l.jsx("div",{onClick:W=>{W.stopPropagation();const J=D<=0?1:D,oe=ji(q,J);m(!0),f(!1),setTimeout(()=>{Re(oe),qe(oe),Le(String(J)),Se(!0),m(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:T&&D<=0?"var(--delete-bg)":"var(--color-primary)",color:T&&D<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:T&&D<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:W=>{T&&D<=0?(W.currentTarget.style.background="var(--delete-hover-bg)",W.currentTarget.style.color="var(--delete-hover-color)"):(W.currentTarget.style.background="var(--color-primary-hover)",W.currentTarget.style.transform="scale(1.05)",W.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:W=>{T&&D<=0?(W.currentTarget.style.background="var(--delete-bg)",W.currentTarget.style.color="var(--delete-color)"):(W.currentTarget.style.background="var(--color-primary)",W.currentTarget.style.transform="scale(1)",W.currentTarget.style.borderColor="transparent")},title:T?D<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(D)?D:D.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(D)?D:D.toFixed(2)}),l.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:W=>{if(W.stopPropagation(),D<=0){const oe=ji(q,1);m(!0),f(!1),setTimeout(()=>{Re(oe),qe(oe),Le("1"),Se(!0),m(!1)},50)}else ji(q),Po()},children:[l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[l.jsx("div",{className:"recipe-machine",style:{color:O.tier===1?"var(--tier-1-color)":O.tier===2?"var(--tier-2-color)":O.tier===3?"var(--tier-3-color)":O.tier===4?"var(--tier-4-color)":(O.tier===5,"var(--tier-5-color)")},children:O.name}),q.power_type==="HV"&&l.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),l.jsxs("div",{className:"recipe-details",children:[l.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),l.jsx("span",{children:q.inputs.map(W=>Ch(W,ht)).join(", ")})]}),l.jsxs("div",{className:"recipe-details",children:[l.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),l.jsx("span",{children:q.outputs.map(W=>Ch(W,ht)).join(", ")})]})]})]},q.id):null})})]}),l.jsx("button",{onClick:Po,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),H&&l.jsx("div",{className:"modal-overlay",onClick:()=>U(!1),children:l.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[l.jsx("h2",{className:"modal-title",children:"Target Products"}),l.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:G.length===0?l.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):G.map(q=>{var Me;const O=e.find(le=>le.id===q.recipeBoxId);if(!O)return null;const{recipe:A,machine:D,machineCount:W=0}=O.data||{};if(!A)return null;let J=A.cycle_time;if((typeof J!="number"||J<=0)&&(J=1),zi(D==null?void 0:D.id)){const le=Zi[D.id];if((le==null?void 0:le.type)==="steam_input"&&lr(A)){const me=A.tempDependentInputTemp??vn;J=Fn(D.id,me,J)}}(typeof J!="number"||J<=0)&&(J=1);const ae=A.isMineshaftDrill||A.id==="r_mineshaft_drill",fe=(Me=Ae==null?void 0:Ae.flows)==null?void 0:Me.byNode[q.recipeBoxId],xe={inputs:{},outputs:{}};return A.inputs.forEach((le,me)=>{var ye;if(typeof le.quantity=="number"){const ke=(ae?le.quantity:le.quantity/J)*W,Ne=((ye=fe==null?void 0:fe.inputFlows[me])==null?void 0:ye.connected)||0;xe.inputs[me]={totalRate:ke,connectedFlow:Ne,deficiency:Math.max(0,ke-Ne)}}}),A.outputs.forEach((le,me)=>{var _e;const ye=le.quantity;if(typeof ye=="number"){const Ne=(ae?ye:ye/J)*W,Ee=((_e=fe==null?void 0:fe.outputFlows[me])==null?void 0:_e.connected)||0;xe.outputs[me]={totalRate:Ne,connectedFlow:Ee,excess:Math.max(0,Ne-Ee)}}}),l.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:A.name}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",W.toFixed(4)]})]}),l.jsx("button",{onClick:()=>eo(q.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),A.inputs.map((le,me)=>{const ye=xe.inputs[me];return ye?l.jsx(tu,{productName:ar(le.product_id,ht),connectedFlow:ye.connectedFlow,currentExcess:ye.deficiency,onTargetExcessCommit:_e=>Kn(q.id,"input",me,_e),styleType:"input"},me):null})]}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),A.outputs.map((le,me)=>{const ye=xe.outputs[me];return ye?l.jsx(tu,{productName:ar(le.product_id,ht),connectedFlow:ye.connectedFlow,currentExcess:ye.excess,onTargetExcessCommit:_e=>Kn(q.id,"output",me,_e),styleType:"output"},me):null})]})]})]},q.id)})}),l.jsx("button",{onClick:()=>U(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),te&&l.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:l.jsxs("div",{className:"modal",onClick:q=>q.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[l.jsx("h2",{className:"modal-title",children:"Recipes"}),l.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[l.jsx("button",{onClick:()=>pe("targets"),className:Y==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Y==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),l.jsx("button",{onClick:()=>pe("canvas"),className:Y==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Y==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),Y==="canvas"&&l.jsx("div",{style:{marginBottom:"15px"},children:l.jsxs("select",{value:Hn,onChange:q=>lt(q.target.value),className:"select",style:{width:"100%"},children:[l.jsx("option",{value:"all",children:"All Recipes"}),l.jsx("option",{value:"excess",children:"Has Excess"}),l.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),l.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:Y==="targets"?l.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[l.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),l.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:l.jsx("button",{onClick:()=>{tn(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),nn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),l.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:q=>q.preventDefault(),onDrop:q=>{q.preventDefault(),ut&&ut!=="Deficiencies"&&Un.includes(ut)&&(nn(O=>O.filter(A=>A!==ut)),tn(O=>[...O,ut])),$i(null),At(null)},children:Wn.length===0?l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):Wn.map((q,O)=>{const A=Wn.length,D=A>1?O/(A-1):0,W=Math.round(239-205*D),J=Math.round(68+129*D),oe=Math.round(68+26*D),ae=`rgb(${W}, ${J}, ${oe})`;return l.jsx("div",{draggable:q!=="Deficiencies",onDragStart:()=>q!=="Deficiencies"&&$i(q),onDragOver:fe=>{fe.preventDefault(),ut&&ut!==q&&q!=="Deficiencies"&&At(O)},onDragLeave:()=>At(null),onDrop:fe=>{fe.preventDefault(),fe.stopPropagation(),ut&&ut!==q&&q!=="Deficiencies"&&(Un.includes(ut)?(nn(xe=>xe.filter(Me=>Me!==ut)),tn(xe=>{const Me=[...xe];return Me.splice(O,0,ut),Me})):Wn.includes(ut)&&tn(xe=>{const Me=xe.filter(me=>me!==ut),le=Me.indexOf(q);return Me.splice(le,0,ut),Me})),At(null),$i(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${ae}`,borderRadius:"var(--radius-sm)",cursor:q==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:q==="Deficiencies"?.7:ut===q?.5:1,boxShadow:qn===O&&q!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:qn===O&&q!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{$i(null),At(null)},title:q==="Deficiencies"?"Deficiencies must always be active":"",children:q},q)})})]}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),l.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:q=>q.preventDefault(),onDrop:q=>{q.preventDefault(),ut&&ut!=="Deficiencies"&&Wn.includes(ut)&&(tn(O=>O.filter(A=>A!==ut)),nn(O=>[...O,ut])),$i(null)},children:Un.length===0?l.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):Un.map(q=>l.jsx("div",{draggable:!0,onDragStart:()=>$i(q),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>$i(null),children:q},q))})]})]})]}),l.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),l.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[l.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),l.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:G.length===0?l.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):G.map(q=>{var Me;const O=e.find(le=>le.id===q.recipeBoxId);if(!O)return null;const{recipe:A,machine:D,machineCount:W=0}=O.data||{};if(!A)return null;let J=A.cycle_time;if((typeof J!="number"||J<=0)&&(J=1),zi(D==null?void 0:D.id)){const le=Zi[D.id];if((le==null?void 0:le.type)==="steam_input"&&lr(A)){const me=A.tempDependentInputTemp??vn;J=Fn(D.id,me,J)}}(typeof J!="number"||J<=0)&&(J=1);const ae=A.isMineshaftDrill||A.id==="r_mineshaft_drill",fe=(Me=Ae==null?void 0:Ae.flows)==null?void 0:Me.byNode[q.recipeBoxId],xe={inputs:{},outputs:{}};return A.inputs.forEach((le,me)=>{var ye;if(typeof le.quantity=="number"){const ke=(ae?le.quantity:le.quantity/J)*W,Ne=((ye=fe==null?void 0:fe.inputFlows[me])==null?void 0:ye.connected)||0;xe.inputs[me]={totalRate:ke,connectedFlow:Ne,deficiency:Math.max(0,ke-Ne)}}}),A.outputs.forEach((le,me)=>{var _e;const ye=le.quantity;if(typeof ye=="number"){const Ne=(ae?ye:ye/J)*W,Ee=((_e=fe==null?void 0:fe.outputFlows[me])==null?void 0:_e.connected)||0;xe.outputs[me]={totalRate:Ne,connectedFlow:Ee,excess:Math.max(0,Ne-Ee)}}}),l.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:A.name}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",W.toFixed(4)]})]}),l.jsx("button",{onClick:()=>eo(q.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),A.inputs.map((le,me)=>{const ye=xe.inputs[me];return ye?l.jsx(tu,{productName:ar(le.product_id,ht),connectedFlow:ye.connectedFlow,currentExcess:ye.deficiency,onTargetExcessCommit:_e=>Kn(q.id,"input",me,_e),styleType:"input"},me):null})]}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),A.outputs.map((le,me)=>{const ye=xe.outputs[me];return ye?l.jsx(tu,{productName:ar(le.product_id,ht),connectedFlow:ye.connectedFlow,currentExcess:ye.excess,onTargetExcessCommit:_e=>Kn(q.id,"output",me,_e),styleType:"output"},me):null})]})]})]},q.id)})})]})]}):l.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?l.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(q=>{var fe;if(Hn==="all")return!0;const{recipe:O,machineCount:A=0}=q.data||{};if(!O)return!1;let D=O.cycle_time;(typeof D!="number"||D<=0)&&(D=1);const W=(fe=Ae==null?void 0:Ae.flows)==null?void 0:fe.byNode[q.id];if(!W)return!1;const J=O.isMineshaftDrill||O.id==="r_mineshaft_drill";let oe=!1,ae=!1;return O.inputs.forEach((xe,Me)=>{var le;if(typeof xe.quantity=="number"){const ye=(J?xe.quantity:xe.quantity/D)*A,_e=((le=W.inputFlows[Me])==null?void 0:le.connected)||0;Math.max(0,ye-_e)>.001&&(ae=!0)}}),O.outputs.forEach((xe,Me)=>{var me;const le=xe.originalQuantity!==void 0?xe.originalQuantity:xe.quantity;if(typeof le=="number"){const _e=(J?le:le/D)*A,ke=((me=W.outputFlows[Me])==null?void 0:me.connected)||0;Math.max(0,_e-ke)>.001&&(oe=!0)}}),Hn==="excess"?oe:Hn==="deficiency"?ae:!0}).map(q=>{const{recipe:O,machine:A,machineCount:D=0,machineCountMode:W="free",cappedMachineCount:J}=q.data||{};if(!O||!A)return null;let oe=O.cycle_time;if((typeof oe!="number"||oe<=0)&&(oe=1),zi(A==null?void 0:A.id)){const le=Zi[A.id];if((le==null?void 0:le.type)==="steam_input"&&lr(O)){const me=O.tempDependentInputTemp??vn;oe=Fn(A.id,me,oe)}}const fe=O.power_consumption;let xe="Variable";typeof fe=="number"?xe=Od(fe*D):typeof fe=="object"&&fe!==null&&"max"in fe&&(xe=`${Od(fe.max*D)} (max)`);const Me=typeof O.pollution=="number"?O.pollution*D:0;return l.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:O.name}),l.jsxs("div",{style:{marginBottom:"8px"},children:[l.jsx("div",{style:{color:A.tier===1?"var(--tier-1-color)":A.tier===2?"var(--tier-2-color)":A.tier===3?"var(--tier-3-color)":A.tier===4?"var(--tier-4-color)":(A.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:A.name}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",fi(Math.ceil(D)*(typeof A.cost=="number"?A.cost:0))]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof oe=="number"?`${oe.toFixed(2)}s`:"Variable"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",xe]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",Me.toFixed(2),"%/hr"]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),O.inputs.map((le,me)=>{var tt,Rt;const ye=O.isMineshaftDrill||O.id==="r_mineshaft_drill",_e=le.quantity,Ne=(typeof _e=="number"?ye?_e:_e/oe:0)*D,Ee=(tt=Ae==null?void 0:Ae.flows)==null?void 0:tt.byNode[q.id],Ue=((Rt=Ee==null?void 0:Ee.inputFlows[me])==null?void 0:Rt.connected)||0,Je=Math.max(0,Ne-Ue)>.001;return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:Je?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Je?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),l.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ar(le.product_id,ht)}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof _e=="number"?fi(Ne):"Var","/s"]})]},me)})]}),l.jsxs("div",{children:[l.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),O.outputs.map((le,me)=>{var tt,Rt;const ye=O.isMineshaftDrill||O.id==="r_mineshaft_drill",_e=le.originalQuantity!==void 0?le.originalQuantity:le.quantity,Ne=(typeof _e=="number"?ye?_e:_e/oe:0)*D,Ee=(tt=Ae==null?void 0:Ae.flows)==null?void 0:tt.byNode[q.id],Ue=((Rt=Ee==null?void 0:Ee.outputFlows[me])==null?void 0:Rt.connected)||0,Je=Math.max(0,Ne-Ue)>.001;return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:Je?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Je?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),l.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ar(le.product_id,ht)}),l.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof _e=="number"?fi(Ne):"Var","/s"]})]},me)})]})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[l.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),l.jsx("input",{type:"number",min:"0",step:"0.1",value:mr[q.id]!==void 0?mr[q.id]:D.toFixed(2),onFocus:()=>{Wr(le=>({...le,[q.id]:D.toFixed(2)}))},onChange:le=>{Wr(me=>({...me,[q.id]:le.target.value}))},onBlur:()=>{const le=parseFloat(mr[q.id]);!isNaN(le)&&le>=0&&(Tt(q.id,me=>({...me,machineCount:le})),Oe("machineCount")),Wr(me=>{const ye={...me};return delete ye[q.id],ye})},onKeyPress:le=>{le.key==="Enter"&&le.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),l.jsx("button",{onClick:()=>{const le=["free","capped","locked"],ye=(le.indexOf(W)+1)%le.length,_e=le[ye];i(ke=>ke.map(Ne=>Ne.id!==q.id?Ne:{...Ne,data:{...Ne.data,machineCountMode:_e,cappedMachineCount:_e==="free"?void 0:D}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:W==="locked"?"#ef4444":W==="capped"?"#f59e0b":"var(--bg-secondary)",color:W==="free"?"var(--text-primary)":"#fff",border:W==="free"?"2px solid var(--border-primary)":"none"},title:W==="free"?"Free: LP/suggestions can change":W==="capped"?`Capped: Max ${(J==null?void 0:J.toFixed(2))||D.toFixed(2)}`:"Locked: Cannot be changed",children:W==="free"?" Free":W==="capped"?" Cap":" Lock"}),l.jsx("button",{onClick:()=>{rn.current&&(rn.current.fitView({nodes:[{id:q.id}],padding:.5,duration:500}),B(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},q.id)})})})}),l.jsx("button",{onClick:()=>B(!1),className:"btn btn-secondary",children:"Close"})]})}),bt&&l.jsx(fC,{onClose:()=>xt(!1)}),Et&&l.jsx(hC,{onClose:()=>Dt(!1)}),hi&&l.jsx(bC,{onClose:()=>Ci(!1),onLoad:Zu,currentCanvas:{nodes:e,edges:o,targetProducts:G,nodeId:u,targetIdCounter:ue,soldProducts:Ut,favoriteRecipes:Lt,lastDrillConfig:Pt,lastAssemblerConfig:Bt,lastTreeFarmConfig:ai,lastFireboxConfig:li,lastWasteFacilityConfig:en},onImport:Ia,onExportCanvas:Qu}),Bn&&l.jsx(RC,{onClose:()=>Oi(!1),defaultProducts:vu,defaultMachines:wu,defaultRecipes:bu,onDataChange:Xu}),Xe&&Mt!=="pan"&&l.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Mt==="target"&&" Target Mode: Tap nodes to mark as targets",Mt==="delete"&&" Delete Mode: Tap nodes to delete"]}),Jt&&l.jsxs("div",{className:"pending-node-preview",style:{left:`${qo.x+20}px`,top:`${qo.y+20}px`},children:[l.jsx("div",{className:"pending-node-recipe-name",children:Jt.recipe.name}),l.jsx("div",{className:"pending-node-machine-name",children:Jt.machine.name}),l.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",Jt.machineCount]}),l.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}Jx.createRoot(document.getElementById("root")).render(l.jsx(S0.StrictMode,{children:l.jsx(zq,{})}));

(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(s){if(s.ep)return;s.ep=!0;const u=r(s);fetch(s.href,u)}})();function os(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function x1(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var zc={exports:{}},Fa={},$c={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function w1(){if(Pm)return Xe;Pm=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function h(F){return F===null||typeof F!="object"?null:(F=_&&F[_]||F["@@iterator"],typeof F=="function"?F:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function k(F,G,ce){this.props=F,this.context=G,this.refs=M,this.updater=ce||x}k.prototype.isReactComponent={},k.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function v(){}v.prototype=k.prototype;function S(F,G,ce){this.props=F,this.context=G,this.refs=M,this.updater=ce||x}var q=S.prototype=new v;q.constructor=S,b(q,k.prototype),q.isPureReactComponent=!0;var C=Array.isArray,P=Object.prototype.hasOwnProperty,I={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function V(F,G,ce){var le,me={},ge=null,xe=null;if(G!=null)for(le in G.ref!==void 0&&(xe=G.ref),G.key!==void 0&&(ge=""+G.key),G)P.call(G,le)&&!R.hasOwnProperty(le)&&(me[le]=G[le]);var se=arguments.length-2;if(se===1)me.children=ce;else if(1<se){for(var ve=Array(se),Oe=0;Oe<se;Oe++)ve[Oe]=arguments[Oe+2];me.children=ve}if(F&&F.defaultProps)for(le in se=F.defaultProps,se)me[le]===void 0&&(me[le]=se[le]);return{$$typeof:e,type:F,key:ge,ref:xe,props:me,_owner:I.current}}function A(F,G){return{$$typeof:e,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function ee(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function W(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ce){return G[ce]})}var H=/\/+/g;function te(F,G){return typeof F=="object"&&F!==null&&F.key!=null?W(""+F.key):G.toString(36)}function T(F,G,ce,le,me){var ge=typeof F;(ge==="undefined"||ge==="boolean")&&(F=null);var xe=!1;if(F===null)xe=!0;else switch(ge){case"string":case"number":xe=!0;break;case"object":switch(F.$$typeof){case e:case n:xe=!0}}if(xe)return xe=F,me=me(xe),F=le===""?"."+te(xe,0):le,C(me)?(ce="",F!=null&&(ce=F.replace(H,"$&/")+"/"),T(me,G,ce,"",function(Oe){return Oe})):me!=null&&(ee(me)&&(me=A(me,ce+(!me.key||xe&&xe.key===me.key?"":(""+me.key).replace(H,"$&/")+"/")+F)),G.push(me)),1;if(xe=0,le=le===""?".":le+":",C(F))for(var se=0;se<F.length;se++){ge=F[se];var ve=le+te(ge,se);xe+=T(ge,G,ce,ve,me)}else if(ve=h(F),typeof ve=="function")for(F=ve.call(F),se=0;!(ge=F.next()).done;)ge=ge.value,ve=le+te(ge,se++),xe+=T(ge,G,ce,ve,me);else if(ge==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return xe}function Z(F,G,ce){if(F==null)return F;var le=[],me=0;return T(F,le,"","",function(ge){return G.call(ce,ge,me++)}),le}function U(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(ce){(F._status===0||F._status===-1)&&(F._status=1,F._result=ce)},function(ce){(F._status===0||F._status===-1)&&(F._status=2,F._result=ce)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var J={current:null},O={transition:null},B={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:O,ReactCurrentOwner:I};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:Z,forEach:function(F,G,ce){Z(F,function(){G.apply(this,arguments)},ce)},count:function(F){var G=0;return Z(F,function(){G++}),G},toArray:function(F){return Z(F,function(G){return G})||[]},only:function(F){if(!ee(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Xe.Component=k,Xe.Fragment=r,Xe.Profiler=s,Xe.PureComponent=S,Xe.StrictMode=o,Xe.Suspense=p,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,Xe.act=Q,Xe.cloneElement=function(F,G,ce){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var le=b({},F.props),me=F.key,ge=F.ref,xe=F._owner;if(G!=null){if(G.ref!==void 0&&(ge=G.ref,xe=I.current),G.key!==void 0&&(me=""+G.key),F.type&&F.type.defaultProps)var se=F.type.defaultProps;for(ve in G)P.call(G,ve)&&!R.hasOwnProperty(ve)&&(le[ve]=G[ve]===void 0&&se!==void 0?se[ve]:G[ve])}var ve=arguments.length-2;if(ve===1)le.children=ce;else if(1<ve){se=Array(ve);for(var Oe=0;Oe<ve;Oe++)se[Oe]=arguments[Oe+2];le.children=se}return{$$typeof:e,type:F.type,key:me,ref:ge,props:le,_owner:xe}},Xe.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:u,_context:F},F.Consumer=F},Xe.createElement=V,Xe.createFactory=function(F){var G=V.bind(null,F);return G.type=F,G},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(F){return{$$typeof:c,render:F}},Xe.isValidElement=ee,Xe.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:U}},Xe.memo=function(F,G){return{$$typeof:m,type:F,compare:G===void 0?null:G}},Xe.startTransition=function(F){var G=O.transition;O.transition={};try{F()}finally{O.transition=G}},Xe.unstable_act=Q,Xe.useCallback=function(F,G){return J.current.useCallback(F,G)},Xe.useContext=function(F){return J.current.useContext(F)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(F){return J.current.useDeferredValue(F)},Xe.useEffect=function(F,G){return J.current.useEffect(F,G)},Xe.useId=function(){return J.current.useId()},Xe.useImperativeHandle=function(F,G,ce){return J.current.useImperativeHandle(F,G,ce)},Xe.useInsertionEffect=function(F,G){return J.current.useInsertionEffect(F,G)},Xe.useLayoutEffect=function(F,G){return J.current.useLayoutEffect(F,G)},Xe.useMemo=function(F,G){return J.current.useMemo(F,G)},Xe.useReducer=function(F,G,ce){return J.current.useReducer(F,G,ce)},Xe.useRef=function(F){return J.current.useRef(F)},Xe.useState=function(F){return J.current.useState(F)},Xe.useSyncExternalStore=function(F,G,ce){return J.current.useSyncExternalStore(F,G,ce)},Xe.useTransition=function(){return J.current.useTransition()},Xe.version="18.3.1",Xe}var Tm;function as(){return Tm||(Tm=1,$c.exports=w1()),$c.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function v1(){if(Rm)return Fa;Rm=1;var e=as(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(c,p,m){var g,_={},h=null,x=null;m!==void 0&&(h=""+m),p.key!==void 0&&(h=""+p.key),p.ref!==void 0&&(x=p.ref);for(g in p)o.call(p,g)&&!u.hasOwnProperty(g)&&(_[g]=p[g]);if(c&&c.defaultProps)for(g in p=c.defaultProps,p)_[g]===void 0&&(_[g]=p[g]);return{$$typeof:n,type:c,key:h,ref:x,props:_,_owner:s.current}}return Fa.Fragment=r,Fa.jsx=l,Fa.jsxs=l,Fa}var Vm;function b1(){return Vm||(Vm=1,zc.exports=v1()),zc.exports}var f=b1(),j=as();const Ei=os(j);var _l={},Hc={exports:{}},Si={},Wc={exports:{}},Uc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function k1(){return jm||(jm=1,(function(e){function n(O,B){var Q=O.length;O.push(B);e:for(;0<Q;){var F=Q-1>>>1,G=O[F];if(0<s(G,B))O[F]=B,O[Q]=G,Q=F;else break e}}function r(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var B=O[0],Q=O.pop();if(Q!==B){O[0]=Q;e:for(var F=0,G=O.length,ce=G>>>1;F<ce;){var le=2*(F+1)-1,me=O[le],ge=le+1,xe=O[ge];if(0>s(me,Q))ge<G&&0>s(xe,me)?(O[F]=xe,O[ge]=Q,F=ge):(O[F]=me,O[le]=Q,F=le);else if(ge<G&&0>s(xe,Q))O[F]=xe,O[ge]=Q,F=ge;else break e}}return B}function s(O,B){var Q=O.sortIndex-B.sortIndex;return Q!==0?Q:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var p=[],m=[],g=1,_=null,h=3,x=!1,b=!1,M=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(O){for(var B=r(m);B!==null;){if(B.callback===null)o(m);else if(B.startTime<=O)o(m),B.sortIndex=B.expirationTime,n(p,B);else break;B=r(m)}}function C(O){if(M=!1,q(O),!b)if(r(p)!==null)b=!0,U(P);else{var B=r(m);B!==null&&J(C,B.startTime-O)}}function P(O,B){b=!1,M&&(M=!1,v(V),V=-1),x=!0;var Q=h;try{for(q(B),_=r(p);_!==null&&(!(_.expirationTime>B)||O&&!W());){var F=_.callback;if(typeof F=="function"){_.callback=null,h=_.priorityLevel;var G=F(_.expirationTime<=B);B=e.unstable_now(),typeof G=="function"?_.callback=G:_===r(p)&&o(p),q(B)}else o(p);_=r(p)}if(_!==null)var ce=!0;else{var le=r(m);le!==null&&J(C,le.startTime-B),ce=!1}return ce}finally{_=null,h=Q,x=!1}}var I=!1,R=null,V=-1,A=5,ee=-1;function W(){return!(e.unstable_now()-ee<A)}function H(){if(R!==null){var O=e.unstable_now();ee=O;var B=!0;try{B=R(!0,O)}finally{B?te():(I=!1,R=null)}}else I=!1}var te;if(typeof S=="function")te=function(){S(H)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,Z=T.port2;T.port1.onmessage=H,te=function(){Z.postMessage(null)}}else te=function(){k(H,0)};function U(O){R=O,I||(I=!0,te())}function J(O,B){V=k(function(){O(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,U(P))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var Q=h;h=B;try{return O()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=h;h=O;try{return B()}finally{h=Q}},e.unstable_scheduleCallback=function(O,B,Q){var F=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?F+Q:F):Q=F,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Q+G,O={id:g++,callback:B,priorityLevel:O,startTime:Q,expirationTime:G,sortIndex:-1},Q>F?(O.sortIndex=Q,n(m,O),r(p)===null&&O===r(m)&&(M?(v(V),V=-1):M=!0,J(C,Q-F))):(O.sortIndex=G,n(p,O),b||x||(b=!0,U(P))),O},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(O){var B=h;return function(){var Q=h;h=B;try{return O.apply(this,arguments)}finally{h=Q}}}})(Uc)),Uc}var Fm;function q1(){return Fm||(Fm=1,Wc.exports=k1()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function M1(){if(Dm)return Si;Dm=1;var e=as(),n=q1();function r(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(t,i){l(t,i),l(t+"Capture",i)}function l(t,i){for(s[t]=i,t=0;t<i.length;t++)o.add(i[t])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function h(t){return p.call(_,t)?!0:p.call(g,t)?!1:m.test(t)?_[t]=!0:(g[t]=!0,!1)}function x(t,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b(t,i,a,d){if(i===null||typeof i>"u"||x(t,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function M(t,i,a,d,y,w,N){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=t,this.type=i,this.sanitizeURL=w,this.removeEmptyString=N}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){k[t]=new M(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];k[i]=new M(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){k[t]=new M(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){k[t]=new M(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){k[t]=new M(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){k[t]=new M(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){k[t]=new M(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){k[t]=new M(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){k[t]=new M(t,5,!1,t.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function S(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(v,S);k[i]=new M(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(v,S);k[i]=new M(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(v,S);k[i]=new M(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){k[t]=new M(t,1,!1,t.toLowerCase(),null,!1,!1)}),k.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){k[t]=new M(t,1,!1,t.toLowerCase(),null,!0,!0)});function q(t,i,a,d){var y=k.hasOwnProperty(i)?k[i]:null;(y!==null?y.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,a,y,d)&&(a=null),d||y===null?h(i)&&(a===null?t.removeAttribute(i):t.setAttribute(i,""+a)):y.mustUseProperty?t[y.propertyName]=a===null?y.type===3?!1:"":a:(i=y.attributeName,d=y.attributeNamespace,a===null?t.removeAttribute(i):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,d?t.setAttributeNS(d,i,a):t.setAttribute(i,a))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),I=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),W=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),O=Symbol.iterator;function B(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var Q=Object.assign,F;function G(t){if(F===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+t}var ce=!1;function le(t,i){if(!t||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(oe){var d=oe}Reflect.construct(t,[],i)}else{try{i.call()}catch(oe){d=oe}t.call(i.prototype)}else{try{throw Error()}catch(oe){d=oe}t()}}catch(oe){if(oe&&d&&typeof oe.stack=="string"){for(var y=oe.stack.split(`
`),w=d.stack.split(`
`),N=y.length-1,D=w.length-1;1<=N&&0<=D&&y[N]!==w[D];)D--;for(;1<=N&&0<=D;N--,D--)if(y[N]!==w[D]){if(N!==1||D!==1)do if(N--,D--,0>D||y[N]!==w[D]){var Y=`
`+y[N].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=N&&0<=D);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?G(t):""}function me(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=le(t.type,!1),t;case 11:return t=le(t.type.render,!1),t;case 1:return t=le(t.type,!0),t;default:return""}}function ge(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case I:return"Portal";case A:return"Profiler";case V:return"StrictMode";case te:return"Suspense";case T:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W:return(t.displayName||"Context")+".Consumer";case ee:return(t._context.displayName||"Context")+".Provider";case H:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return i=t.displayName||null,i!==null?i:ge(t.type)||"Memo";case U:i=t._payload,t=t._init;try{return ge(t(i))}catch{}}return null}function xe(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(i);case 8:return i===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function se(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ve(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oe(t){var i=ve(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),d=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,w=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return y.call(this)},set:function(N){d=""+N,w.call(this,N)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(N){d=""+N},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function $e(t){t._valueTracker||(t._valueTracker=Oe(t))}function Le(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return t&&(d=ve(t)?t.checked?"true":"false":t.value),t=d,t!==a?(i.setValue(t),!0):!1}function Fe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qe(t,i){var a=i.checked;return Q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Je(t,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=se(i.value!=null?i.value:a),t._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function He(t,i){i=i.checked,i!=null&&q(t,"checked",i,!1)}function Ze(t,i){He(t,i);var a=se(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Tt(t,i.type,a):i.hasOwnProperty("defaultValue")&&Tt(t,i.type,se(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Dt(t,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,a||i===t.value||(t.value=i),t.defaultValue=i}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Tt(t,i,a){(i!=="number"||Fe(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var yt=Array.isArray;function ai(t,i,a,d){if(t=t.options,i){i={};for(var y=0;y<a.length;y++)i["$"+a[y]]=!0;for(a=0;a<t.length;a++)y=i.hasOwnProperty("$"+t[a].value),t[a].selected!==y&&(t[a].selected=y),y&&d&&(t[a].defaultSelected=!0)}else{for(a=""+se(a),i=null,y=0;y<t.length;y++){if(t[y].value===a){t[y].selected=!0,d&&(t[y].defaultSelected=!0);return}i!==null||t[y].disabled||(i=t[y])}i!==null&&(i.selected=!0)}}function Ke(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return Q({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ht(t,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(r(92));if(yt(a)){if(1<a.length)throw Error(r(93));a=a[0]}i=a}i==null&&(i=""),a=i}t._wrapperState={initialValue:se(a)}}function Ai(t,i){var a=se(i.value),d=se(i.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),i.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),d!=null&&(t.defaultValue=""+d)}function gt(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Xt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Xt(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qt,Kt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,y){MSApp.execUnsafeLocalFunction(function(){return t(i,a,d,y)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(qt=qt||document.createElement("div"),qt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=qt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function lt(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lt=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(t){Lt.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),tn[i]=tn[t]})});function kn(t,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||tn.hasOwnProperty(t)&&tn[t]?(""+i).trim():i+"px"}function Ot(t,i){t=t.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,y=kn(a,i[a],d);a==="float"&&(a="cssFloat"),d?t.setProperty(a,y):t[a]=y}}var fi=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rt(t,i){if(i){if(fi[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function si(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vt=null;function hi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ut=null,Bt=null,Nt=null;function li(t){if(t=va(t)){if(typeof Ut!="function")throw Error(r(280));var i=t.stateNode;i&&(i=Ns(i),Ut(t.stateNode,t.type,i))}}function nn(t){Bt?Nt?Nt.push(t):Nt=[t]:Bt=t}function yi(){if(Bt){var t=Bt,i=Nt;if(Nt=Bt=null,li(t),i)for(t=0;t<i.length;t++)li(i[t])}}function ui(t,i){return t(i)}function qn(){}var Et=!1;function rn(t,i,a){if(Et)return t(i,a);Et=!0;try{return ui(t,i,a)}finally{Et=!1,(Bt!==null||Nt!==null)&&(qn(),yi())}}function Ii(t,i){var a=t.stateNode;if(a===null)return null;var d=Ns(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var on=!1;if(c)try{var Zt={};Object.defineProperty(Zt,"passive",{get:function(){on=!0}}),window.addEventListener("test",Zt,Zt),window.removeEventListener("test",Zt,Zt)}catch{on=!1}function an(t,i,a,d,y,w,N,D,Y){var oe=Array.prototype.slice.call(arguments,3);try{i.apply(a,oe)}catch(_e){this.onError(_e)}}var Pi=!1,Mn=null,sn=!1,zi=null,ye={onError:function(t){Pi=!0,Mn=t}};function et(t,i,a,d,y,w,N,D,Y){Pi=!1,Mn=null,an.apply(ye,arguments)}function ut(t,i,a,d,y,w,N,D,Y){if(et.apply(this,arguments),Pi){if(Pi){var oe=Mn;Pi=!1,Mn=null}else throw Error(r(198));sn||(sn=!0,zi=oe)}}function Gt(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function Jt(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function ei(t){if(Gt(t)!==t)throw Error(r(188))}function Br(t){var i=t.alternate;if(!i){if(i=Gt(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,d=i;;){var y=a.return;if(y===null)break;var w=y.alternate;if(w===null){if(d=y.return,d!==null){a=d;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===a)return ei(y),t;if(w===d)return ei(y),i;w=w.sibling}throw Error(r(188))}if(a.return!==d.return)a=y,d=w;else{for(var N=!1,D=y.child;D;){if(D===a){N=!0,a=y,d=w;break}if(D===d){N=!0,d=y,a=w;break}D=D.sibling}if(!N){for(D=w.child;D;){if(D===a){N=!0,a=w,d=y;break}if(D===d){N=!0,d=w,a=y;break}D=D.sibling}if(!N)throw Error(r(189))}}if(a.alternate!==d)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function Me(t){return t=Br(t),t!==null?$n(t):null}function $n(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=$n(t);if(i!==null)return i;t=t.sibling}return null}var $i=n.unstable_scheduleCallback,Cn=n.unstable_cancelCallback,Ar=n.unstable_shouldYield,dr=n.unstable_requestPaint,Ie=n.unstable_now,yo=n.unstable_getCurrentPriorityLevel,pr=n.unstable_ImmediatePriority,Sn=n.unstable_UserBlockingPriority,Hn=n.unstable_NormalPriority,_r=n.unstable_LowPriority,zr=n.unstable_IdlePriority,ln=null,_t=null;function mr(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(ln,t,void 0,(t.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:aa,oa=Math.log,Ti=Math.LN2;function aa(t){return t>>>=0,t===0?32:31-(oa(t)/Ti|0)|0}var gi=64,xi=4194304;function Mt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wi(t,i){var a=t.pendingLanes;if(a===0)return 0;var d=0,y=t.suspendedLanes,w=t.pingedLanes,N=a&268435455;if(N!==0){var D=N&~y;D!==0?d=Mt(D):(w&=N,w!==0&&(d=Mt(w)))}else N=a&~y,N!==0?d=Mt(N):w!==0&&(d=Mt(w));if(d===0)return 0;if(i!==0&&i!==d&&(i&y)===0&&(y=d&-d,w=i&-i,y>=w||y===16&&(w&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=d;0<i;)a=31-ci(i),y=1<<a,d|=t[a],i&=~y;return d}function Hi(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function un(t,i){for(var a=t.suspendedLanes,d=t.pingedLanes,y=t.expirationTimes,w=t.pendingLanes;0<w;){var N=31-ci(w),D=1<<N,Y=y[N];Y===-1?((D&a)===0||(D&d)!==0)&&(y[N]=Hi(D,i)):Y<=i&&(t.expiredLanes|=D),w&=~D}}function Ri(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=gi;return gi<<=1,(gi&4194240)===0&&(gi=64),t}function Vi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Wi(t,i,a){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-ci(i),t[i]=a}function Ui(t,i){var a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<a;){var y=31-ci(a),w=1<<y;i[y]=0,d[y]=-1,t[y]=-1,a&=~w}}function sa(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var d=31-ci(a),y=1<<d;y&i|t[d]&i&&(t[d]|=i),a&=~y}}var ot=0;function ms(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Gi,Wn,la,fs,hs,ua=!1,go=[],Yi=null,Nn=null,di=null,$r=new Map,Hr=new Map,En=[],ca="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function da(t,i){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":$r.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(i.pointerId)}}function Wr(t,i,a,d,y,w){return t===null||t.nativeEvent!==w?(t={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:w,targetContainers:[y]},i!==null&&(i=va(i),i!==null&&Wn(i)),t):(t.eventSystemFlags|=d,i=t.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),t)}function ys(t,i,a,d,y){switch(i){case"focusin":return Yi=Wr(Yi,t,i,a,d,y),!0;case"dragenter":return Nn=Wr(Nn,t,i,a,d,y),!0;case"mouseover":return di=Wr(di,t,i,a,d,y),!0;case"pointerover":var w=y.pointerId;return $r.set(w,Wr($r.get(w)||null,t,i,a,d,y)),!0;case"gotpointercapture":return w=y.pointerId,Hr.set(w,Wr(Hr.get(w)||null,t,i,a,d,y)),!0}return!1}function gs(t){var i=Qr(t.target);if(i!==null){var a=Gt(i);if(a!==null){if(i=a.tag,i===13){if(i=Jt(a),i!==null){t.blockedOn=i,hs(t.priority,function(){la(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xo(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=$(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var d=new a.constructor(a.type,a);Vt=d,a.target.dispatchEvent(d),Vt=null}else return i=va(a),i!==null&&Wn(i),t.blockedOn=a,!1;i.shift()}return!0}function xs(t,i,a){xo(t)&&a.delete(i)}function hu(){ua=!1,Yi!==null&&xo(Yi)&&(Yi=null),Nn!==null&&xo(Nn)&&(Nn=null),di!==null&&xo(di)&&(di=null),$r.forEach(xs),Hr.forEach(xs)}function Ur(t,i){t.blockedOn===i&&(t.blockedOn=null,ua||(ua=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hu)))}function Gr(t){function i(y){return Ur(y,t)}if(0<go.length){Ur(go[0],t);for(var a=1;a<go.length;a++){var d=go[a];d.blockedOn===t&&(d.blockedOn=null)}}for(Yi!==null&&Ur(Yi,t),Nn!==null&&Ur(Nn,t),di!==null&&Ur(di,t),$r.forEach(i),Hr.forEach(i),a=0;a<En.length;a++)d=En[a],d.blockedOn===t&&(d.blockedOn=null);for(;0<En.length&&(a=En[0],a.blockedOn===null);)gs(a),a.blockedOn===null&&En.shift()}var Un=C.ReactCurrentBatchConfig,wo=!0;function ws(t,i,a,d){var y=ot,w=Un.transition;Un.transition=null;try{ot=1,E(t,i,a,d)}finally{ot=y,Un.transition=w}}function yu(t,i,a,d){var y=ot,w=Un.transition;Un.transition=null;try{ot=4,E(t,i,a,d)}finally{ot=y,Un.transition=w}}function E(t,i,a,d){if(wo){var y=$(t,i,a,d);if(y===null)Tu(t,i,d,L,a),da(t,d);else if(ys(y,t,i,a,d))d.stopPropagation();else if(da(t,d),i&4&&-1<ca.indexOf(t)){for(;y!==null;){var w=va(y);if(w!==null&&Gi(w),w=$(t,i,a,d),w===null&&Tu(t,i,d,L,a),w===y)break;y=w}y!==null&&d.stopPropagation()}else Tu(t,i,d,null,a)}}var L=null;function $(t,i,a,d){if(L=null,t=hi(d),t=Qr(t),t!==null)if(i=Gt(t),i===null)t=null;else if(a=i.tag,a===13){if(t=Jt(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return L=t,null}function z(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yo()){case pr:return 1;case Sn:return 4;case Hn:case _r:return 16;case zr:return 536870912;default:return 16}default:return 16}}var K=null,ne=null,de=null;function ae(){if(de)return de;var t,i=ne,a=i.length,d,y="value"in K?K.value:K.textContent,w=y.length;for(t=0;t<a&&i[t]===y[t];t++);var N=a-t;for(d=1;d<=N&&i[a-d]===y[w-d];d++);return de=y.slice(t,1<d?1-d:void 0)}function Ve(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ke(){return!0}function Ne(){return!1}function Pe(t){function i(a,d,y,w,N){this._reactName=a,this._targetInst=y,this.type=d,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(a=t[D],this[D]=a?a(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ke:Ne,this.isPropagationStopped=Ne,this}return Q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ke)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ke)},persist:function(){},isPersistent:ke}),i}var Ae={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Se=Pe(Ae),be=Q({},Ae,{view:0,detail:0}),ue=Pe(be),fe,Ce,qe,ze=Q({},be,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qe&&(qe&&t.type==="mousemove"?(fe=t.screenX-qe.screenX,Ce=t.screenY-qe.screenY):Ce=fe=0,qe=t),fe)},movementY:function(t){return"movementY"in t?t.movementY:Ce}}),Ge=Pe(ze),nt=Q({},ze,{dataTransfer:0}),at=Pe(nt),st=Q({},be,{relatedTarget:0}),Ct=Pe(st),pi=Q({},Ae,{animationName:0,elapsedTime:0,pseudoElement:0}),In=Pe(pi),fr=Q({},Ae,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hr=Pe(fr),Yr=Q({},Ae,{data:0}),yr=Pe(Yr),gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rg(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=wu[t])?!!i[t]:!1}function vu(){return rg}var og=Q({},be,{key:function(t){if(t.key){var i=gu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ve(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?Ve(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ve(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ag=Pe(og),sg=Q({},ze,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=Pe(sg),lg=Q({},be,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),ug=Pe(lg),cg=Q({},Ae,{propertyName:0,elapsedTime:0,pseudoElement:0}),dg=Pe(cg),pg=Q({},ze,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_g=Pe(pg),mg=[9,13,27,32],bu=c&&"CompositionEvent"in window,pa=null;c&&"documentMode"in document&&(pa=document.documentMode);var fg=c&&"TextEvent"in window&&!pa,kp=c&&(!bu||pa&&8<pa&&11>=pa),qp=" ",Mp=!1;function Cp(t,i){switch(t){case"keyup":return mg.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vo=!1;function hg(t,i){switch(t){case"compositionend":return Sp(i);case"keypress":return i.which!==32?null:(Mp=!0,qp);case"textInput":return t=i.data,t===qp&&Mp?null:t;default:return null}}function yg(t,i){if(vo)return t==="compositionend"||!bu&&Cp(t,i)?(t=ae(),de=ne=K=null,vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kp&&i.locale!=="ko"?null:i.data;default:return null}}var gg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!gg[t.type]:i==="textarea"}function Ep(t,i,a,d){nn(d),i=Ms(i,"onChange"),0<i.length&&(a=new Se("onChange","change",null,a,d),t.push({event:a,listeners:i}))}var _a=null,ma=null;function xg(t){Gp(t,0)}function vs(t){var i=Co(t);if(Le(i))return t}function wg(t,i){if(t==="change")return i}var Ip=!1;if(c){var ku;if(c){var qu="oninput"in document;if(!qu){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),qu=typeof Pp.oninput=="function"}ku=qu}else ku=!1;Ip=ku&&(!document.documentMode||9<document.documentMode)}function Tp(){_a&&(_a.detachEvent("onpropertychange",Rp),ma=_a=null)}function Rp(t){if(t.propertyName==="value"&&vs(ma)){var i=[];Ep(i,ma,t,hi(t)),rn(xg,i)}}function vg(t,i,a){t==="focusin"?(Tp(),_a=i,ma=a,_a.attachEvent("onpropertychange",Rp)):t==="focusout"&&Tp()}function bg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vs(ma)}function kg(t,i){if(t==="click")return vs(i)}function qg(t,i){if(t==="input"||t==="change")return vs(i)}function Mg(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var cn=typeof Object.is=="function"?Object.is:Mg;function fa(t,i){if(cn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var y=a[d];if(!p.call(i,y)||!cn(t[y],i[y]))return!1}return!0}function Vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jp(t,i){var a=Vp(t);t=0;for(var d;a;){if(a.nodeType===3){if(d=t+a.textContent.length,t<=i&&d>=i)return{node:a,offset:i-t};t=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vp(a)}}function Fp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Fp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Dp(){for(var t=window,i=Fe();i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Fe(t.document)}return i}function Mu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Cg(t){var i=Dp(),a=t.focusedElem,d=t.selectionRange;if(i!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(d!==null&&Mu(a)){if(i=d.start,t=d.end,t===void 0&&(t=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(t,a.value.length);else if(t=(i=a.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var y=a.textContent.length,w=Math.min(d.start,y);d=d.end===void 0?w:Math.min(d.end,y),!t.extend&&w>d&&(y=d,d=w,w=y),y=jp(a,w);var N=jp(a,d);y&&N&&(t.rangeCount!==1||t.anchorNode!==y.node||t.anchorOffset!==y.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(i=i.createRange(),i.setStart(y.node,y.offset),t.removeAllRanges(),w>d?(t.addRange(i),t.extend(N.node,N.offset)):(i.setEnd(N.node,N.offset),t.addRange(i)))}}for(i=[],t=a;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)t=i[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sg=c&&"documentMode"in document&&11>=document.documentMode,bo=null,Cu=null,ha=null,Su=!1;function Lp(t,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Su||bo==null||bo!==Fe(d)||(d=bo,"selectionStart"in d&&Mu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ha&&fa(ha,d)||(ha=d,d=Ms(Cu,"onSelect"),0<d.length&&(i=new Se("onSelect","select",null,i,a),t.push({event:i,listeners:d}),i.target=bo)))}function bs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ko={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Nu={},Op={};c&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function ks(t){if(Nu[t])return Nu[t];if(!ko[t])return t;var i=ko[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Op)return Nu[t]=i[a];return t}var Bp=ks("animationend"),Ap=ks("animationiteration"),zp=ks("animationstart"),$p=ks("transitionend"),Hp=new Map,Wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,i){Hp.set(t,i),u(i,[t])}for(var Eu=0;Eu<Wp.length;Eu++){var Iu=Wp[Eu],Ng=Iu.toLowerCase(),Eg=Iu[0].toUpperCase()+Iu.slice(1);gr(Ng,"on"+Eg)}gr(Bp,"onAnimationEnd"),gr(Ap,"onAnimationIteration"),gr(zp,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr($p,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Up(t,i,a){var d=t.type||"unknown-event";t.currentTarget=a,ut(d,i,void 0,t),t.currentTarget=null}function Gp(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var d=t[a],y=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var N=d.length-1;0<=N;N--){var D=d[N],Y=D.instance,oe=D.currentTarget;if(D=D.listener,Y!==w&&y.isPropagationStopped())break e;Up(y,D,oe),w=Y}else for(N=0;N<d.length;N++){if(D=d[N],Y=D.instance,oe=D.currentTarget,D=D.listener,Y!==w&&y.isPropagationStopped())break e;Up(y,D,oe),w=Y}}}if(sn)throw t=zi,sn=!1,zi=null,t}function dt(t,i){var a=i[Lu];a===void 0&&(a=i[Lu]=new Set);var d=t+"__bubble";a.has(d)||(Yp(i,t,2,!1),a.add(d))}function Pu(t,i,a){var d=0;i&&(d|=4),Yp(a,t,d,i)}var qs="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[qs]){t[qs]=!0,o.forEach(function(a){a!=="selectionchange"&&(Ig.has(a)||Pu(a,!1,t),Pu(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[qs]||(i[qs]=!0,Pu("selectionchange",!1,i))}}function Yp(t,i,a,d){switch(z(i)){case 1:var y=ws;break;case 4:y=yu;break;default:y=E}a=y.bind(null,i,a,t),y=void 0,!on||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),d?y!==void 0?t.addEventListener(i,a,{capture:!0,passive:y}):t.addEventListener(i,a,!0):y!==void 0?t.addEventListener(i,a,{passive:y}):t.addEventListener(i,a,!1)}function Tu(t,i,a,d,y){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var D=d.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(N===4)for(N=d.return;N!==null;){var Y=N.tag;if((Y===3||Y===4)&&(Y=N.stateNode.containerInfo,Y===y||Y.nodeType===8&&Y.parentNode===y))return;N=N.return}for(;D!==null;){if(N=Qr(D),N===null)return;if(Y=N.tag,Y===5||Y===6){d=w=N;continue e}D=D.parentNode}}d=d.return}rn(function(){var oe=w,_e=hi(a),he=[];e:{var pe=Hp.get(t);if(pe!==void 0){var Ee=Se,Re=t;switch(t){case"keypress":if(Ve(a)===0)break e;case"keydown":case"keyup":Ee=ag;break;case"focusin":Re="focus",Ee=Ct;break;case"focusout":Re="blur",Ee=Ct;break;case"beforeblur":case"afterblur":Ee=Ct;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=at;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=ug;break;case Bp:case Ap:case zp:Ee=In;break;case $p:Ee=dg;break;case"scroll":Ee=ue;break;case"wheel":Ee=_g;break;case"copy":case"cut":case"paste":Ee=hr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=bp}var je=(i&4)!==0,St=!je&&t==="scroll",ie=je?pe!==null?pe+"Capture":null:pe;je=[];for(var X=oe,re;X!==null;){re=X;var we=re.stateNode;if(re.tag===5&&we!==null&&(re=we,ie!==null&&(we=Ii(X,ie),we!=null&&je.push(xa(X,we,re)))),St)break;X=X.return}0<je.length&&(pe=new Ee(pe,Re,null,a,_e),he.push({event:pe,listeners:je}))}}if((i&7)===0){e:{if(pe=t==="mouseover"||t==="pointerover",Ee=t==="mouseout"||t==="pointerout",pe&&a!==Vt&&(Re=a.relatedTarget||a.fromElement)&&(Qr(Re)||Re[Gn]))break e;if((Ee||pe)&&(pe=_e.window===_e?_e:(pe=_e.ownerDocument)?pe.defaultView||pe.parentWindow:window,Ee?(Re=a.relatedTarget||a.toElement,Ee=oe,Re=Re?Qr(Re):null,Re!==null&&(St=Gt(Re),Re!==St||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Ee=null,Re=oe),Ee!==Re)){if(je=Ge,we="onMouseLeave",ie="onMouseEnter",X="mouse",(t==="pointerout"||t==="pointerover")&&(je=bp,we="onPointerLeave",ie="onPointerEnter",X="pointer"),St=Ee==null?pe:Co(Ee),re=Re==null?pe:Co(Re),pe=new je(we,X+"leave",Ee,a,_e),pe.target=St,pe.relatedTarget=re,we=null,Qr(_e)===oe&&(je=new je(ie,X+"enter",Re,a,_e),je.target=re,je.relatedTarget=St,we=je),St=we,Ee&&Re)t:{for(je=Ee,ie=Re,X=0,re=je;re;re=qo(re))X++;for(re=0,we=ie;we;we=qo(we))re++;for(;0<X-re;)je=qo(je),X--;for(;0<re-X;)ie=qo(ie),re--;for(;X--;){if(je===ie||ie!==null&&je===ie.alternate)break t;je=qo(je),ie=qo(ie)}je=null}else je=null;Ee!==null&&Qp(he,pe,Ee,je,!1),Re!==null&&St!==null&&Qp(he,St,Re,je,!0)}}e:{if(pe=oe?Co(oe):window,Ee=pe.nodeName&&pe.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&pe.type==="file")var De=wg;else if(Np(pe))if(Ip)De=qg;else{De=bg;var We=vg}else(Ee=pe.nodeName)&&Ee.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(De=kg);if(De&&(De=De(t,oe))){Ep(he,De,a,_e);break e}We&&We(t,pe,oe),t==="focusout"&&(We=pe._wrapperState)&&We.controlled&&pe.type==="number"&&Tt(pe,"number",pe.value)}switch(We=oe?Co(oe):window,t){case"focusin":(Np(We)||We.contentEditable==="true")&&(bo=We,Cu=oe,ha=null);break;case"focusout":ha=Cu=bo=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,Lp(he,a,_e);break;case"selectionchange":if(Sg)break;case"keydown":case"keyup":Lp(he,a,_e)}var Ue;if(bu)e:{switch(t){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else vo?Cp(t,a)&&(Ye="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(kp&&a.locale!=="ko"&&(vo||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&vo&&(Ue=ae()):(K=_e,ne="value"in K?K.value:K.textContent,vo=!0)),We=Ms(oe,Ye),0<We.length&&(Ye=new yr(Ye,t,null,a,_e),he.push({event:Ye,listeners:We}),Ue?Ye.data=Ue:(Ue=Sp(a),Ue!==null&&(Ye.data=Ue)))),(Ue=fg?hg(t,a):yg(t,a))&&(oe=Ms(oe,"onBeforeInput"),0<oe.length&&(_e=new yr("onBeforeInput","beforeinput",null,a,_e),he.push({event:_e,listeners:oe}),_e.data=Ue))}Gp(he,i)})}function xa(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ms(t,i){for(var a=i+"Capture",d=[];t!==null;){var y=t,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Ii(t,a),w!=null&&d.unshift(xa(t,w,y)),w=Ii(t,i),w!=null&&d.push(xa(t,w,y))),t=t.return}return d}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qp(t,i,a,d,y){for(var w=i._reactName,N=[];a!==null&&a!==d;){var D=a,Y=D.alternate,oe=D.stateNode;if(Y!==null&&Y===d)break;D.tag===5&&oe!==null&&(D=oe,y?(Y=Ii(a,w),Y!=null&&N.unshift(xa(a,Y,D))):y||(Y=Ii(a,w),Y!=null&&N.push(xa(a,Y,D)))),a=a.return}N.length!==0&&t.push({event:i,listeners:N})}var Pg=/\r\n?/g,Tg=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(Pg,`
`).replace(Tg,"")}function Cs(t,i,a){if(i=Xp(i),Xp(t)!==i&&a)throw Error(r(425))}function Ss(){}var Ru=null,Vu=null;function ju(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Fu=typeof setTimeout=="function"?setTimeout:void 0,Rg=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,Vg=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(t){return Kp.resolve(null).then(t).catch(jg)}:Fu;function jg(t){setTimeout(function(){throw t})}function Du(t,i){var a=i,d=0;do{var y=a.nextSibling;if(t.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(d===0){t.removeChild(y),Gr(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=y}while(a);Gr(i)}function xr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Zp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Mo,wa="__reactProps$"+Mo,Gn="__reactContainer$"+Mo,Lu="__reactEvents$"+Mo,Fg="__reactListeners$"+Mo,Dg="__reactHandles$"+Mo;function Qr(t){var i=t[Pn];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Gn]||a[Pn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Zp(t);t!==null;){if(a=t[Pn])return a;t=Zp(t)}return i}t=a,a=t.parentNode}return null}function va(t){return t=t[Pn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function Ns(t){return t[wa]||null}var Ou=[],So=-1;function wr(t){return{current:t}}function pt(t){0>So||(t.current=Ou[So],Ou[So]=null,So--)}function ct(t,i){So++,Ou[So]=t.current,t.current=i}var vr={},ti=wr(vr),bi=wr(!1),Xr=vr;function No(t,i){var a=t.type.contextTypes;if(!a)return vr;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in a)y[w]=i[w];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=y),y}function ki(t){return t=t.childContextTypes,t!=null}function Es(){pt(bi),pt(ti)}function Jp(t,i,a){if(ti.current!==vr)throw Error(r(168));ct(ti,i),ct(bi,a)}function e_(t,i,a){var d=t.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var y in d)if(!(y in i))throw Error(r(108,xe(t)||"Unknown",y));return Q({},a,d)}function Is(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,Xr=ti.current,ct(ti,t),ct(bi,bi.current),!0}function t_(t,i,a){var d=t.stateNode;if(!d)throw Error(r(169));a?(t=e_(t,i,Xr),d.__reactInternalMemoizedMergedChildContext=t,pt(bi),pt(ti),ct(ti,t)):pt(bi),ct(bi,a)}var Yn=null,Ps=!1,Bu=!1;function i_(t){Yn===null?Yn=[t]:Yn.push(t)}function Lg(t){Ps=!0,i_(t)}function br(){if(!Bu&&Yn!==null){Bu=!0;var t=0,i=ot;try{var a=Yn;for(ot=1;t<a.length;t++){var d=a[t];do d=d(!0);while(d!==null)}Yn=null,Ps=!1}catch(y){throw Yn!==null&&(Yn=Yn.slice(t+1)),$i(pr,br),y}finally{ot=i,Bu=!1}}return null}var Eo=[],Io=0,Ts=null,Rs=0,Qi=[],Xi=0,Kr=null,Qn=1,Xn="";function Zr(t,i){Eo[Io++]=Rs,Eo[Io++]=Ts,Ts=t,Rs=i}function n_(t,i,a){Qi[Xi++]=Qn,Qi[Xi++]=Xn,Qi[Xi++]=Kr,Kr=t;var d=Qn;t=Xn;var y=32-ci(d)-1;d&=~(1<<y),a+=1;var w=32-ci(i)+y;if(30<w){var N=y-y%5;w=(d&(1<<N)-1).toString(32),d>>=N,y-=N,Qn=1<<32-ci(i)+y|a<<y|d,Xn=w+t}else Qn=1<<w|a<<y|d,Xn=t}function Au(t){t.return!==null&&(Zr(t,1),n_(t,1,0))}function zu(t){for(;t===Ts;)Ts=Eo[--Io],Eo[Io]=null,Rs=Eo[--Io],Eo[Io]=null;for(;t===Kr;)Kr=Qi[--Xi],Qi[Xi]=null,Xn=Qi[--Xi],Qi[Xi]=null,Qn=Qi[--Xi],Qi[Xi]=null}var ji=null,Fi=null,mt=!1,dn=null;function r_(t,i){var a=en(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=t,i=t.deletions,i===null?(t.deletions=[a],t.flags|=16):i.push(a)}function o_(t,i){switch(t.tag){case 5:var a=t.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,ji=t,Fi=xr(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,ji=t,Fi=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Kr!==null?{id:Qn,overflow:Xn}:null,t.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=en(18,null,null,0),a.stateNode=i,a.return=t,t.child=a,ji=t,Fi=null,!0):!1;default:return!1}}function $u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(mt){var i=Fi;if(i){var a=i;if(!o_(t,i)){if($u(t))throw Error(r(418));i=xr(a.nextSibling);var d=ji;i&&o_(t,i)?r_(d,a):(t.flags=t.flags&-4097|2,mt=!1,ji=t)}}else{if($u(t))throw Error(r(418));t.flags=t.flags&-4097|2,mt=!1,ji=t}}}function a_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ji=t}function Vs(t){if(t!==ji)return!1;if(!mt)return a_(t),mt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!ju(t.type,t.memoizedProps)),i&&(i=Fi)){if($u(t))throw s_(),Error(r(418));for(;i;)r_(t,i),i=xr(i.nextSibling)}if(a_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(i===0){Fi=xr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}t=t.nextSibling}Fi=null}}else Fi=ji?xr(t.stateNode.nextSibling):null;return!0}function s_(){for(var t=Fi;t;)t=xr(t.nextSibling)}function Po(){Fi=ji=null,mt=!1}function Wu(t){dn===null?dn=[t]:dn.push(t)}var Og=C.ReactCurrentBatchConfig;function ba(t,i,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var d=a.stateNode}if(!d)throw Error(r(147,t));var y=d,w=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(N){var D=y.refs;N===null?delete D[w]:D[w]=N},i._stringRef=w,i)}if(typeof t!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,t))}return t}function js(t,i){throw t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function l_(t){var i=t._init;return i(t._payload)}function u_(t){function i(ie,X){if(t){var re=ie.deletions;re===null?(ie.deletions=[X],ie.flags|=16):re.push(X)}}function a(ie,X){if(!t)return null;for(;X!==null;)i(ie,X),X=X.sibling;return null}function d(ie,X){for(ie=new Map;X!==null;)X.key!==null?ie.set(X.key,X):ie.set(X.index,X),X=X.sibling;return ie}function y(ie,X){return ie=Ir(ie,X),ie.index=0,ie.sibling=null,ie}function w(ie,X,re){return ie.index=re,t?(re=ie.alternate,re!==null?(re=re.index,re<X?(ie.flags|=2,X):re):(ie.flags|=2,X)):(ie.flags|=1048576,X)}function N(ie){return t&&ie.alternate===null&&(ie.flags|=2),ie}function D(ie,X,re,we){return X===null||X.tag!==6?(X=Fc(re,ie.mode,we),X.return=ie,X):(X=y(X,re),X.return=ie,X)}function Y(ie,X,re,we){var De=re.type;return De===R?_e(ie,X,re.props.children,we,re.key):X!==null&&(X.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===U&&l_(De)===X.type)?(we=y(X,re.props),we.ref=ba(ie,X,re),we.return=ie,we):(we=ol(re.type,re.key,re.props,null,ie.mode,we),we.ref=ba(ie,X,re),we.return=ie,we)}function oe(ie,X,re,we){return X===null||X.tag!==4||X.stateNode.containerInfo!==re.containerInfo||X.stateNode.implementation!==re.implementation?(X=Dc(re,ie.mode,we),X.return=ie,X):(X=y(X,re.children||[]),X.return=ie,X)}function _e(ie,X,re,we,De){return X===null||X.tag!==7?(X=ao(re,ie.mode,we,De),X.return=ie,X):(X=y(X,re),X.return=ie,X)}function he(ie,X,re){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Fc(""+X,ie.mode,re),X.return=ie,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case P:return re=ol(X.type,X.key,X.props,null,ie.mode,re),re.ref=ba(ie,null,X),re.return=ie,re;case I:return X=Dc(X,ie.mode,re),X.return=ie,X;case U:var we=X._init;return he(ie,we(X._payload),re)}if(yt(X)||B(X))return X=ao(X,ie.mode,re,null),X.return=ie,X;js(ie,X)}return null}function pe(ie,X,re,we){var De=X!==null?X.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return De!==null?null:D(ie,X,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case P:return re.key===De?Y(ie,X,re,we):null;case I:return re.key===De?oe(ie,X,re,we):null;case U:return De=re._init,pe(ie,X,De(re._payload),we)}if(yt(re)||B(re))return De!==null?null:_e(ie,X,re,we,null);js(ie,re)}return null}function Ee(ie,X,re,we,De){if(typeof we=="string"&&we!==""||typeof we=="number")return ie=ie.get(re)||null,D(X,ie,""+we,De);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case P:return ie=ie.get(we.key===null?re:we.key)||null,Y(X,ie,we,De);case I:return ie=ie.get(we.key===null?re:we.key)||null,oe(X,ie,we,De);case U:var We=we._init;return Ee(ie,X,re,We(we._payload),De)}if(yt(we)||B(we))return ie=ie.get(re)||null,_e(X,ie,we,De,null);js(X,we)}return null}function Re(ie,X,re,we){for(var De=null,We=null,Ue=X,Ye=X=0,$t=null;Ue!==null&&Ye<re.length;Ye++){Ue.index>Ye?($t=Ue,Ue=null):$t=Ue.sibling;var rt=pe(ie,Ue,re[Ye],we);if(rt===null){Ue===null&&(Ue=$t);break}t&&Ue&&rt.alternate===null&&i(ie,Ue),X=w(rt,X,Ye),We===null?De=rt:We.sibling=rt,We=rt,Ue=$t}if(Ye===re.length)return a(ie,Ue),mt&&Zr(ie,Ye),De;if(Ue===null){for(;Ye<re.length;Ye++)Ue=he(ie,re[Ye],we),Ue!==null&&(X=w(Ue,X,Ye),We===null?De=Ue:We.sibling=Ue,We=Ue);return mt&&Zr(ie,Ye),De}for(Ue=d(ie,Ue);Ye<re.length;Ye++)$t=Ee(Ue,ie,Ye,re[Ye],we),$t!==null&&(t&&$t.alternate!==null&&Ue.delete($t.key===null?Ye:$t.key),X=w($t,X,Ye),We===null?De=$t:We.sibling=$t,We=$t);return t&&Ue.forEach(function(Pr){return i(ie,Pr)}),mt&&Zr(ie,Ye),De}function je(ie,X,re,we){var De=B(re);if(typeof De!="function")throw Error(r(150));if(re=De.call(re),re==null)throw Error(r(151));for(var We=De=null,Ue=X,Ye=X=0,$t=null,rt=re.next();Ue!==null&&!rt.done;Ye++,rt=re.next()){Ue.index>Ye?($t=Ue,Ue=null):$t=Ue.sibling;var Pr=pe(ie,Ue,rt.value,we);if(Pr===null){Ue===null&&(Ue=$t);break}t&&Ue&&Pr.alternate===null&&i(ie,Ue),X=w(Pr,X,Ye),We===null?De=Pr:We.sibling=Pr,We=Pr,Ue=$t}if(rt.done)return a(ie,Ue),mt&&Zr(ie,Ye),De;if(Ue===null){for(;!rt.done;Ye++,rt=re.next())rt=he(ie,rt.value,we),rt!==null&&(X=w(rt,X,Ye),We===null?De=rt:We.sibling=rt,We=rt);return mt&&Zr(ie,Ye),De}for(Ue=d(ie,Ue);!rt.done;Ye++,rt=re.next())rt=Ee(Ue,ie,Ye,rt.value,we),rt!==null&&(t&&rt.alternate!==null&&Ue.delete(rt.key===null?Ye:rt.key),X=w(rt,X,Ye),We===null?De=rt:We.sibling=rt,We=rt);return t&&Ue.forEach(function(g1){return i(ie,g1)}),mt&&Zr(ie,Ye),De}function St(ie,X,re,we){if(typeof re=="object"&&re!==null&&re.type===R&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case P:e:{for(var De=re.key,We=X;We!==null;){if(We.key===De){if(De=re.type,De===R){if(We.tag===7){a(ie,We.sibling),X=y(We,re.props.children),X.return=ie,ie=X;break e}}else if(We.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===U&&l_(De)===We.type){a(ie,We.sibling),X=y(We,re.props),X.ref=ba(ie,We,re),X.return=ie,ie=X;break e}a(ie,We);break}else i(ie,We);We=We.sibling}re.type===R?(X=ao(re.props.children,ie.mode,we,re.key),X.return=ie,ie=X):(we=ol(re.type,re.key,re.props,null,ie.mode,we),we.ref=ba(ie,X,re),we.return=ie,ie=we)}return N(ie);case I:e:{for(We=re.key;X!==null;){if(X.key===We)if(X.tag===4&&X.stateNode.containerInfo===re.containerInfo&&X.stateNode.implementation===re.implementation){a(ie,X.sibling),X=y(X,re.children||[]),X.return=ie,ie=X;break e}else{a(ie,X);break}else i(ie,X);X=X.sibling}X=Dc(re,ie.mode,we),X.return=ie,ie=X}return N(ie);case U:return We=re._init,St(ie,X,We(re._payload),we)}if(yt(re))return Re(ie,X,re,we);if(B(re))return je(ie,X,re,we);js(ie,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,X!==null&&X.tag===6?(a(ie,X.sibling),X=y(X,re),X.return=ie,ie=X):(a(ie,X),X=Fc(re,ie.mode,we),X.return=ie,ie=X),N(ie)):a(ie,X)}return St}var To=u_(!0),c_=u_(!1),Fs=wr(null),Ds=null,Ro=null,Uu=null;function Gu(){Uu=Ro=Ds=null}function Yu(t){var i=Fs.current;pt(Fs),t._currentValue=i}function Qu(t,i,a){for(;t!==null;){var d=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),t===a)break;t=t.return}}function Vo(t,i){Ds=t,Uu=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(qi=!0),t.firstContext=null)}function Ki(t){var i=t._currentValue;if(Uu!==t)if(t={context:t,memoizedValue:i,next:null},Ro===null){if(Ds===null)throw Error(r(308));Ro=t,Ds.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return i}var Jr=null;function Xu(t){Jr===null?Jr=[t]:Jr.push(t)}function d_(t,i,a,d){var y=i.interleaved;return y===null?(a.next=a,Xu(i)):(a.next=y.next,y.next=a),i.interleaved=a,Kn(t,d)}function Kn(t,i){t.lanes|=i;var a=t.alternate;for(a!==null&&(a.lanes|=i),a=t,t=t.return;t!==null;)t.childLanes|=i,a=t.alternate,a!==null&&(a.childLanes|=i),a=t,t=t.return;return a.tag===3?a.stateNode:null}var kr=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p_(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function qr(t,i,a){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var y=d.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),d.pending=i,Kn(t,a)}return y=d.interleaved,y===null?(i.next=i,Xu(d)):(i.next=y.next,y.next=i),d.interleaved=i,Kn(t,a)}function Ls(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=t.pendingLanes,a|=d,i.lanes=a,sa(t,a)}}function __(t,i){var a=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var y=null,w=null;if(a=a.firstBaseUpdate,a!==null){do{var N={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};w===null?y=w=N:w=w.next=N,a=a.next}while(a!==null);w===null?y=w=i:w=w.next=i}else y=w=i;a={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:d.shared,effects:d.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}function Os(t,i,a,d){var y=t.updateQueue;kr=!1;var w=y.firstBaseUpdate,N=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var Y=D,oe=Y.next;Y.next=null,N===null?w=oe:N.next=oe,N=Y;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,D=_e.lastBaseUpdate,D!==N&&(D===null?_e.firstBaseUpdate=oe:D.next=oe,_e.lastBaseUpdate=Y))}if(w!==null){var he=y.baseState;N=0,_e=oe=Y=null,D=w;do{var pe=D.lane,Ee=D.eventTime;if((d&pe)===pe){_e!==null&&(_e=_e.next={eventTime:Ee,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Re=t,je=D;switch(pe=i,Ee=a,je.tag){case 1:if(Re=je.payload,typeof Re=="function"){he=Re.call(Ee,he,pe);break e}he=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=je.payload,pe=typeof Re=="function"?Re.call(Ee,he,pe):Re,pe==null)break e;he=Q({},he,pe);break e;case 2:kr=!0}}D.callback!==null&&D.lane!==0&&(t.flags|=64,pe=y.effects,pe===null?y.effects=[D]:pe.push(D))}else Ee={eventTime:Ee,lane:pe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},_e===null?(oe=_e=Ee,Y=he):_e=_e.next=Ee,N|=pe;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;pe=D,D=pe.next,pe.next=null,y.lastBaseUpdate=pe,y.shared.pending=null}}while(!0);if(_e===null&&(Y=he),y.baseState=Y,y.firstBaseUpdate=oe,y.lastBaseUpdate=_e,i=y.shared.interleaved,i!==null){y=i;do N|=y.lane,y=y.next;while(y!==i)}else w===null&&(y.shared.lanes=0);io|=N,t.lanes=N,t.memoizedState=he}}function m_(t,i,a){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var d=t[i],y=d.callback;if(y!==null){if(d.callback=null,d=a,typeof y!="function")throw Error(r(191,y));y.call(d)}}}var ka={},Tn=wr(ka),qa=wr(ka),Ma=wr(ka);function eo(t){if(t===ka)throw Error(r(174));return t}function Zu(t,i){switch(ct(Ma,i),ct(qa,t),ct(Tn,ka),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Wt(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Wt(i,t)}pt(Tn),ct(Tn,i)}function jo(){pt(Tn),pt(qa),pt(Ma)}function f_(t){eo(Ma.current);var i=eo(Tn.current),a=Wt(i,t.type);i!==a&&(ct(qa,t),ct(Tn,a))}function Ju(t){qa.current===t&&(pt(Tn),pt(qa))}var xt=wr(0);function Bs(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ec=[];function tc(){for(var t=0;t<ec.length;t++)ec[t]._workInProgressVersionPrimary=null;ec.length=0}var As=C.ReactCurrentDispatcher,ic=C.ReactCurrentBatchConfig,to=0,wt=null,jt=null,At=null,zs=!1,Ca=!1,Sa=0,Bg=0;function ii(){throw Error(r(321))}function nc(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!cn(t[a],i[a]))return!1;return!0}function rc(t,i,a,d,y,w){if(to=w,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,As.current=t===null||t.memoizedState===null?Hg:Wg,t=a(d,y),Ca){w=0;do{if(Ca=!1,Sa=0,25<=w)throw Error(r(301));w+=1,At=jt=null,i.updateQueue=null,As.current=Ug,t=a(d,y)}while(Ca)}if(As.current=Ws,i=jt!==null&&jt.next!==null,to=0,At=jt=wt=null,zs=!1,i)throw Error(r(300));return t}function oc(){var t=Sa!==0;return Sa=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?wt.memoizedState=At=t:At=At.next=t,At}function Zi(){if(jt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var i=At===null?wt.memoizedState:At.next;if(i!==null)At=i,jt=t;else{if(t===null)throw Error(r(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},At===null?wt.memoizedState=At=t:At=At.next=t}return At}function Na(t,i){return typeof i=="function"?i(t):i}function ac(t){var i=Zi(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var d=jt,y=d.baseQueue,w=a.pending;if(w!==null){if(y!==null){var N=y.next;y.next=w.next,w.next=N}d.baseQueue=y=w,a.pending=null}if(y!==null){w=y.next,d=d.baseState;var D=N=null,Y=null,oe=w;do{var _e=oe.lane;if((to&_e)===_e)Y!==null&&(Y=Y.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),d=oe.hasEagerState?oe.eagerState:t(d,oe.action);else{var he={lane:_e,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};Y===null?(D=Y=he,N=d):Y=Y.next=he,wt.lanes|=_e,io|=_e}oe=oe.next}while(oe!==null&&oe!==w);Y===null?N=d:Y.next=D,cn(d,i.memoizedState)||(qi=!0),i.memoizedState=d,i.baseState=N,i.baseQueue=Y,a.lastRenderedState=d}if(t=a.interleaved,t!==null){y=t;do w=y.lane,wt.lanes|=w,io|=w,y=y.next;while(y!==t)}else y===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function sc(t){var i=Zi(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var d=a.dispatch,y=a.pending,w=i.memoizedState;if(y!==null){a.pending=null;var N=y=y.next;do w=t(w,N.action),N=N.next;while(N!==y);cn(w,i.memoizedState)||(qi=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),a.lastRenderedState=w}return[w,d]}function h_(){}function y_(t,i){var a=wt,d=Zi(),y=i(),w=!cn(d.memoizedState,y);if(w&&(d.memoizedState=y,qi=!0),d=d.queue,lc(w_.bind(null,a,d,t),[t]),d.getSnapshot!==i||w||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ea(9,x_.bind(null,a,d,y,i),void 0,null),zt===null)throw Error(r(349));(to&30)!==0||g_(a,i,y)}return y}function g_(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i={lastEffect:null,stores:null},wt.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function x_(t,i,a,d){i.value=a,i.getSnapshot=d,v_(i)&&b_(t)}function w_(t,i,a){return a(function(){v_(i)&&b_(t)})}function v_(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!cn(t,a)}catch{return!0}}function b_(t){var i=Kn(t,1);i!==null&&fn(i,t,1,-1)}function k_(t){var i=Rn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},i.queue=t,t=t.dispatch=$g.bind(null,wt,t),[i.memoizedState,t]}function Ea(t,i,a,d){return t={tag:t,create:i,destroy:a,deps:d,next:null},i=wt.updateQueue,i===null?(i={lastEffect:null,stores:null},wt.updateQueue=i,i.lastEffect=t.next=t):(a=i.lastEffect,a===null?i.lastEffect=t.next=t:(d=a.next,a.next=t,t.next=d,i.lastEffect=t)),t}function q_(){return Zi().memoizedState}function $s(t,i,a,d){var y=Rn();wt.flags|=t,y.memoizedState=Ea(1|i,a,void 0,d===void 0?null:d)}function Hs(t,i,a,d){var y=Zi();d=d===void 0?null:d;var w=void 0;if(jt!==null){var N=jt.memoizedState;if(w=N.destroy,d!==null&&nc(d,N.deps)){y.memoizedState=Ea(i,a,w,d);return}}wt.flags|=t,y.memoizedState=Ea(1|i,a,w,d)}function M_(t,i){return $s(8390656,8,t,i)}function lc(t,i){return Hs(2048,8,t,i)}function C_(t,i){return Hs(4,2,t,i)}function S_(t,i){return Hs(4,4,t,i)}function N_(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function E_(t,i,a){return a=a!=null?a.concat([t]):null,Hs(4,4,N_.bind(null,i,t),a)}function uc(){}function I_(t,i){var a=Zi();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&nc(i,d[1])?d[0]:(a.memoizedState=[t,i],t)}function P_(t,i){var a=Zi();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&nc(i,d[1])?d[0]:(t=t(),a.memoizedState=[t,i],t)}function T_(t,i,a){return(to&21)===0?(t.baseState&&(t.baseState=!1,qi=!0),t.memoizedState=a):(cn(a,i)||(a=vi(),wt.lanes|=a,io|=a,t.baseState=!0),i)}function Ag(t,i){var a=ot;ot=a!==0&&4>a?a:4,t(!0);var d=ic.transition;ic.transition={};try{t(!1),i()}finally{ot=a,ic.transition=d}}function R_(){return Zi().memoizedState}function zg(t,i,a){var d=Nr(t);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},V_(t))j_(i,a);else if(a=d_(t,i,a,d),a!==null){var y=mi();fn(a,t,d,y),F_(a,i,d)}}function $g(t,i,a){var d=Nr(t),y={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(V_(t))j_(i,y);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var N=i.lastRenderedState,D=w(N,a);if(y.hasEagerState=!0,y.eagerState=D,cn(D,N)){var Y=i.interleaved;Y===null?(y.next=y,Xu(i)):(y.next=Y.next,Y.next=y),i.interleaved=y;return}}catch{}finally{}a=d_(t,i,y,d),a!==null&&(y=mi(),fn(a,t,d,y),F_(a,i,d))}}function V_(t){var i=t.alternate;return t===wt||i!==null&&i===wt}function j_(t,i){Ca=zs=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function F_(t,i,a){if((a&4194240)!==0){var d=i.lanes;d&=t.pendingLanes,a|=d,i.lanes=a,sa(t,a)}}var Ws={readContext:Ki,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},Hg={readContext:Ki,useCallback:function(t,i){return Rn().memoizedState=[t,i===void 0?null:i],t},useContext:Ki,useEffect:M_,useImperativeHandle:function(t,i,a){return a=a!=null?a.concat([t]):null,$s(4194308,4,N_.bind(null,i,t),a)},useLayoutEffect:function(t,i){return $s(4194308,4,t,i)},useInsertionEffect:function(t,i){return $s(4,2,t,i)},useMemo:function(t,i){var a=Rn();return i=i===void 0?null:i,t=t(),a.memoizedState=[t,i],t},useReducer:function(t,i,a){var d=Rn();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},d.queue=t,t=t.dispatch=zg.bind(null,wt,t),[d.memoizedState,t]},useRef:function(t){var i=Rn();return t={current:t},i.memoizedState=t},useState:k_,useDebugValue:uc,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=k_(!1),i=t[0];return t=Ag.bind(null,t[1]),Rn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,a){var d=wt,y=Rn();if(mt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),zt===null)throw Error(r(349));(to&30)!==0||g_(d,i,a)}y.memoizedState=a;var w={value:a,getSnapshot:i};return y.queue=w,M_(w_.bind(null,d,w,t),[t]),d.flags|=2048,Ea(9,x_.bind(null,d,w,a,i),void 0,null),a},useId:function(){var t=Rn(),i=zt.identifierPrefix;if(mt){var a=Xn,d=Qn;a=(d&~(1<<32-ci(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=Sa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Bg++,i=":"+i+"r"+a.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Wg={readContext:Ki,useCallback:I_,useContext:Ki,useEffect:lc,useImperativeHandle:E_,useInsertionEffect:C_,useLayoutEffect:S_,useMemo:P_,useReducer:ac,useRef:q_,useState:function(){return ac(Na)},useDebugValue:uc,useDeferredValue:function(t){var i=Zi();return T_(i,jt.memoizedState,t)},useTransition:function(){var t=ac(Na)[0],i=Zi().memoizedState;return[t,i]},useMutableSource:h_,useSyncExternalStore:y_,useId:R_,unstable_isNewReconciler:!1},Ug={readContext:Ki,useCallback:I_,useContext:Ki,useEffect:lc,useImperativeHandle:E_,useInsertionEffect:C_,useLayoutEffect:S_,useMemo:P_,useReducer:sc,useRef:q_,useState:function(){return sc(Na)},useDebugValue:uc,useDeferredValue:function(t){var i=Zi();return jt===null?i.memoizedState=t:T_(i,jt.memoizedState,t)},useTransition:function(){var t=sc(Na)[0],i=Zi().memoizedState;return[t,i]},useMutableSource:h_,useSyncExternalStore:y_,useId:R_,unstable_isNewReconciler:!1};function pn(t,i){if(t&&t.defaultProps){i=Q({},i),t=t.defaultProps;for(var a in t)i[a]===void 0&&(i[a]=t[a]);return i}return i}function cc(t,i,a,d){i=t.memoizedState,a=a(d,i),a=a==null?i:Q({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Us={isMounted:function(t){return(t=t._reactInternals)?Gt(t)===t:!1},enqueueSetState:function(t,i,a){t=t._reactInternals;var d=mi(),y=Nr(t),w=Zn(d,y);w.payload=i,a!=null&&(w.callback=a),i=qr(t,w,y),i!==null&&(fn(i,t,y,d),Ls(i,t,y))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var d=mi(),y=Nr(t),w=Zn(d,y);w.tag=1,w.payload=i,a!=null&&(w.callback=a),i=qr(t,w,y),i!==null&&(fn(i,t,y,d),Ls(i,t,y))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=mi(),d=Nr(t),y=Zn(a,d);y.tag=2,i!=null&&(y.callback=i),i=qr(t,y,d),i!==null&&(fn(i,t,d,a),Ls(i,t,d))}};function D_(t,i,a,d,y,w,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,w,N):i.prototype&&i.prototype.isPureReactComponent?!fa(a,d)||!fa(y,w):!0}function L_(t,i,a){var d=!1,y=vr,w=i.contextType;return typeof w=="object"&&w!==null?w=Ki(w):(y=ki(i)?Xr:ti.current,d=i.contextTypes,w=(d=d!=null)?No(t,y):vr),i=new i(a,w),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Us,t.stateNode=i,i._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=y,t.__reactInternalMemoizedMaskedChildContext=w),i}function O_(t,i,a,d){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==t&&Us.enqueueReplaceState(i,i.state,null)}function dc(t,i,a,d){var y=t.stateNode;y.props=a,y.state=t.memoizedState,y.refs={},Ku(t);var w=i.contextType;typeof w=="object"&&w!==null?y.context=Ki(w):(w=ki(i)?Xr:ti.current,y.context=No(t,w)),y.state=t.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(cc(t,i,w,a),y.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(i=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),i!==y.state&&Us.enqueueReplaceState(y,y.state,null),Os(t,a,y,d),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308)}function Fo(t,i){try{var a="",d=i;do a+=me(d),d=d.return;while(d);var y=a}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:t,source:i,stack:y,digest:null}}function pc(t,i,a){return{value:t,source:null,stack:a??null,digest:i??null}}function _c(t,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Gg=typeof WeakMap=="function"?WeakMap:Map;function B_(t,i,a){a=Zn(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){Js||(Js=!0,Nc=d),_c(t,i)},a}function A_(t,i,a){a=Zn(-1,a),a.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var y=i.value;a.payload=function(){return d(y)},a.callback=function(){_c(t,i)}}var w=t.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){_c(t,i),typeof d!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var N=i.stack;this.componentDidCatch(i.value,{componentStack:N!==null?N:""})}),a}function z_(t,i,a){var d=t.pingCache;if(d===null){d=t.pingCache=new Gg;var y=new Set;d.set(i,y)}else y=d.get(i),y===void 0&&(y=new Set,d.set(i,y));y.has(a)||(y.add(a),t=s1.bind(null,t,i,a),i.then(t,t))}function $_(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function H_(t,i,a,d,y){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Zn(-1,1),i.tag=2,qr(a,i,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=y,t)}var Yg=C.ReactCurrentOwner,qi=!1;function _i(t,i,a,d){i.child=t===null?c_(i,null,a,d):To(i,t.child,a,d)}function W_(t,i,a,d,y){a=a.render;var w=i.ref;return Vo(i,y),d=rc(t,i,a,d,w,y),a=oc(),t!==null&&!qi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~y,Jn(t,i,y)):(mt&&a&&Au(i),i.flags|=1,_i(t,i,d,y),i.child)}function U_(t,i,a,d,y){if(t===null){var w=a.type;return typeof w=="function"&&!jc(w)&&w.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=w,G_(t,i,w,d,y)):(t=ol(a.type,null,d,i,i.mode,y),t.ref=i.ref,t.return=i,i.child=t)}if(w=t.child,(t.lanes&y)===0){var N=w.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(N,d)&&t.ref===i.ref)return Jn(t,i,y)}return i.flags|=1,t=Ir(w,d),t.ref=i.ref,t.return=i,i.child=t}function G_(t,i,a,d,y){if(t!==null){var w=t.memoizedProps;if(fa(w,d)&&t.ref===i.ref)if(qi=!1,i.pendingProps=d=w,(t.lanes&y)!==0)(t.flags&131072)!==0&&(qi=!0);else return i.lanes=t.lanes,Jn(t,i,y)}return mc(t,i,a,d,y)}function Y_(t,i,a){var d=i.pendingProps,y=d.children,w=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Lo,Di),Di|=a;else{if((a&1073741824)===0)return t=w!==null?w.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,ct(Lo,Di),Di|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=w!==null?w.baseLanes:a,ct(Lo,Di),Di|=d}else w!==null?(d=w.baseLanes|a,i.memoizedState=null):d=a,ct(Lo,Di),Di|=d;return _i(t,i,y,a),i.child}function Q_(t,i){var a=i.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function mc(t,i,a,d,y){var w=ki(a)?Xr:ti.current;return w=No(i,w),Vo(i,y),a=rc(t,i,a,d,w,y),d=oc(),t!==null&&!qi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~y,Jn(t,i,y)):(mt&&d&&Au(i),i.flags|=1,_i(t,i,a,y),i.child)}function X_(t,i,a,d,y){if(ki(a)){var w=!0;Is(i)}else w=!1;if(Vo(i,y),i.stateNode===null)Ys(t,i),L_(i,a,d),dc(i,a,d,y),d=!0;else if(t===null){var N=i.stateNode,D=i.memoizedProps;N.props=D;var Y=N.context,oe=a.contextType;typeof oe=="object"&&oe!==null?oe=Ki(oe):(oe=ki(a)?Xr:ti.current,oe=No(i,oe));var _e=a.getDerivedStateFromProps,he=typeof _e=="function"||typeof N.getSnapshotBeforeUpdate=="function";he||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(D!==d||Y!==oe)&&O_(i,N,d,oe),kr=!1;var pe=i.memoizedState;N.state=pe,Os(i,d,N,y),Y=i.memoizedState,D!==d||pe!==Y||bi.current||kr?(typeof _e=="function"&&(cc(i,a,_e,d),Y=i.memoizedState),(D=kr||D_(i,a,D,d,pe,Y,oe))?(he||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(i.flags|=4194308)):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=Y),N.props=d,N.state=Y,N.context=oe,d=D):(typeof N.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{N=i.stateNode,p_(t,i),D=i.memoizedProps,oe=i.type===i.elementType?D:pn(i.type,D),N.props=oe,he=i.pendingProps,pe=N.context,Y=a.contextType,typeof Y=="object"&&Y!==null?Y=Ki(Y):(Y=ki(a)?Xr:ti.current,Y=No(i,Y));var Ee=a.getDerivedStateFromProps;(_e=typeof Ee=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(D!==he||pe!==Y)&&O_(i,N,d,Y),kr=!1,pe=i.memoizedState,N.state=pe,Os(i,d,N,y);var Re=i.memoizedState;D!==he||pe!==Re||bi.current||kr?(typeof Ee=="function"&&(cc(i,a,Ee,d),Re=i.memoizedState),(oe=kr||D_(i,a,oe,d,pe,Re,Y)||!1)?(_e||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(d,Re,Y),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(d,Re,Y)),typeof N.componentDidUpdate=="function"&&(i.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof N.componentDidUpdate!="function"||D===t.memoizedProps&&pe===t.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&pe===t.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Re),N.props=d,N.state=Re,N.context=Y,d=oe):(typeof N.componentDidUpdate!="function"||D===t.memoizedProps&&pe===t.memoizedState||(i.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&pe===t.memoizedState||(i.flags|=1024),d=!1)}return fc(t,i,a,d,w,y)}function fc(t,i,a,d,y,w){Q_(t,i);var N=(i.flags&128)!==0;if(!d&&!N)return y&&t_(i,a,!1),Jn(t,i,w);d=i.stateNode,Yg.current=i;var D=N&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,t!==null&&N?(i.child=To(i,t.child,null,w),i.child=To(i,null,D,w)):_i(t,i,D,w),i.memoizedState=d.state,y&&t_(i,a,!0),i.child}function K_(t){var i=t.stateNode;i.pendingContext?Jp(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Jp(t,i.context,!1),Zu(t,i.containerInfo)}function Z_(t,i,a,d,y){return Po(),Wu(y),i.flags|=256,_i(t,i,a,d),i.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function J_(t,i,a){var d=i.pendingProps,y=xt.current,w=!1,N=(i.flags&128)!==0,D;if((D=N)||(D=t!==null&&t.memoizedState===null?!1:(y&2)!==0),D?(w=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(y|=1),ct(xt,y&1),t===null)return Hu(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(N=d.children,t=d.fallback,w?(d=i.mode,w=i.child,N={mode:"hidden",children:N},(d&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=N):w=al(N,d,0,null),t=ao(t,d,a,null),w.return=i,t.return=i,w.sibling=t,i.child=w,i.child.memoizedState=yc(a),i.memoizedState=hc,t):gc(i,N));if(y=t.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return Qg(t,i,N,d,D,y,a);if(w){w=d.fallback,N=i.mode,y=t.child,D=y.sibling;var Y={mode:"hidden",children:d.children};return(N&1)===0&&i.child!==y?(d=i.child,d.childLanes=0,d.pendingProps=Y,i.deletions=null):(d=Ir(y,Y),d.subtreeFlags=y.subtreeFlags&14680064),D!==null?w=Ir(D,w):(w=ao(w,N,a,null),w.flags|=2),w.return=i,d.return=i,d.sibling=w,i.child=d,d=w,w=i.child,N=t.child.memoizedState,N=N===null?yc(a):{baseLanes:N.baseLanes|a,cachePool:null,transitions:N.transitions},w.memoizedState=N,w.childLanes=t.childLanes&~a,i.memoizedState=hc,d}return w=t.child,t=w.sibling,d=Ir(w,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,t!==null&&(a=i.deletions,a===null?(i.deletions=[t],i.flags|=16):a.push(t)),i.child=d,i.memoizedState=null,d}function gc(t,i){return i=al({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Gs(t,i,a,d){return d!==null&&Wu(d),To(i,t.child,null,a),t=gc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Qg(t,i,a,d,y,w,N){if(a)return i.flags&256?(i.flags&=-257,d=pc(Error(r(422))),Gs(t,i,N,d)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(w=d.fallback,y=i.mode,d=al({mode:"visible",children:d.children},y,0,null),w=ao(w,y,N,null),w.flags|=2,d.return=i,w.return=i,d.sibling=w,i.child=d,(i.mode&1)!==0&&To(i,t.child,null,N),i.child.memoizedState=yc(N),i.memoizedState=hc,w);if((i.mode&1)===0)return Gs(t,i,N,null);if(y.data==="$!"){if(d=y.nextSibling&&y.nextSibling.dataset,d)var D=d.dgst;return d=D,w=Error(r(419)),d=pc(w,d,void 0),Gs(t,i,N,d)}if(D=(N&t.childLanes)!==0,qi||D){if(d=zt,d!==null){switch(N&-N){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(d.suspendedLanes|N))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Kn(t,y),fn(d,t,y,-1))}return Vc(),d=pc(Error(r(421))),Gs(t,i,N,d)}return y.data==="$?"?(i.flags|=128,i.child=t.child,i=l1.bind(null,t),y._reactRetry=i,null):(t=w.treeContext,Fi=xr(y.nextSibling),ji=i,mt=!0,dn=null,t!==null&&(Qi[Xi++]=Qn,Qi[Xi++]=Xn,Qi[Xi++]=Kr,Qn=t.id,Xn=t.overflow,Kr=i),i=gc(i,d.children),i.flags|=4096,i)}function em(t,i,a){t.lanes|=i;var d=t.alternate;d!==null&&(d.lanes|=i),Qu(t.return,i,a)}function xc(t,i,a,d,y){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=a,w.tailMode=y)}function tm(t,i,a){var d=i.pendingProps,y=d.revealOrder,w=d.tail;if(_i(t,i,d.children,a),d=xt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&em(t,a,i);else if(t.tag===19)em(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(ct(xt,d),(i.mode&1)===0)i.memoizedState=null;else switch(y){case"forwards":for(a=i.child,y=null;a!==null;)t=a.alternate,t!==null&&Bs(t)===null&&(y=a),a=a.sibling;a=y,a===null?(y=i.child,i.child=null):(y=a.sibling,a.sibling=null),xc(i,!1,y,a,w);break;case"backwards":for(a=null,y=i.child,i.child=null;y!==null;){if(t=y.alternate,t!==null&&Bs(t)===null){i.child=y;break}t=y.sibling,y.sibling=a,a=y,y=t}xc(i,!0,a,null,w);break;case"together":xc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ys(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Jn(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),io|=i.lanes,(a&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Ir(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ir(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Xg(t,i,a){switch(i.tag){case 3:K_(i),Po();break;case 5:f_(i);break;case 1:ki(i.type)&&Is(i);break;case 4:Zu(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,y=i.memoizedProps.value;ct(Fs,d._currentValue),d._currentValue=y;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(ct(xt,xt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?J_(t,i,a):(ct(xt,xt.current&1),t=Jn(t,i,a),t!==null?t.sibling:null);ct(xt,xt.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(t.flags&128)!==0){if(d)return tm(t,i,a);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ct(xt,xt.current),d)break;return null;case 22:case 23:return i.lanes=0,Y_(t,i,a)}return Jn(t,i,a)}var im,wc,nm,rm;im=function(t,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wc=function(){},nm=function(t,i,a,d){var y=t.memoizedProps;if(y!==d){t=i.stateNode,eo(Tn.current);var w=null;switch(a){case"input":y=Qe(t,y),d=Qe(t,d),w=[];break;case"select":y=Q({},y,{value:void 0}),d=Q({},d,{value:void 0}),w=[];break;case"textarea":y=Ke(t,y),d=Ke(t,d),w=[];break;default:typeof y.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=Ss)}Rt(a,d);var N;a=null;for(oe in y)if(!d.hasOwnProperty(oe)&&y.hasOwnProperty(oe)&&y[oe]!=null)if(oe==="style"){var D=y[oe];for(N in D)D.hasOwnProperty(N)&&(a||(a={}),a[N]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(s.hasOwnProperty(oe)?w||(w=[]):(w=w||[]).push(oe,null));for(oe in d){var Y=d[oe];if(D=y!=null?y[oe]:void 0,d.hasOwnProperty(oe)&&Y!==D&&(Y!=null||D!=null))if(oe==="style")if(D){for(N in D)!D.hasOwnProperty(N)||Y&&Y.hasOwnProperty(N)||(a||(a={}),a[N]="");for(N in Y)Y.hasOwnProperty(N)&&D[N]!==Y[N]&&(a||(a={}),a[N]=Y[N])}else a||(w||(w=[]),w.push(oe,a)),a=Y;else oe==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,D=D?D.__html:void 0,Y!=null&&D!==Y&&(w=w||[]).push(oe,Y)):oe==="children"?typeof Y!="string"&&typeof Y!="number"||(w=w||[]).push(oe,""+Y):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(s.hasOwnProperty(oe)?(Y!=null&&oe==="onScroll"&&dt("scroll",t),w||D===Y||(w=[])):(w=w||[]).push(oe,Y))}a&&(w=w||[]).push("style",a);var oe=w;(i.updateQueue=oe)&&(i.flags|=4)}},rm=function(t,i,a,d){a!==d&&(i.flags|=4)};function Ia(t,i){if(!mt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function ni(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,d=0;if(i)for(var y=t.child;y!==null;)a|=y.lanes|y.childLanes,d|=y.subtreeFlags&14680064,d|=y.flags&14680064,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)a|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=d,t.childLanes=a,i}function Kg(t,i,a){var d=i.pendingProps;switch(zu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(i),null;case 1:return ki(i.type)&&Es(),ni(i),null;case 3:return d=i.stateNode,jo(),pt(bi),pt(ti),tc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(Vs(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dn!==null&&(Pc(dn),dn=null))),wc(t,i),ni(i),null;case 5:Ju(i);var y=eo(Ma.current);if(a=i.type,t!==null&&i.stateNode!=null)nm(t,i,a,d,y),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(r(166));return ni(i),null}if(t=eo(Tn.current),Vs(i)){d=i.stateNode,a=i.type;var w=i.memoizedProps;switch(d[Pn]=i,d[wa]=w,t=(i.mode&1)!==0,a){case"dialog":dt("cancel",d),dt("close",d);break;case"iframe":case"object":case"embed":dt("load",d);break;case"video":case"audio":for(y=0;y<ya.length;y++)dt(ya[y],d);break;case"source":dt("error",d);break;case"img":case"image":case"link":dt("error",d),dt("load",d);break;case"details":dt("toggle",d);break;case"input":Je(d,w),dt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!w.multiple},dt("invalid",d);break;case"textarea":Ht(d,w),dt("invalid",d)}Rt(a,w),y=null;for(var N in w)if(w.hasOwnProperty(N)){var D=w[N];N==="children"?typeof D=="string"?d.textContent!==D&&(w.suppressHydrationWarning!==!0&&Cs(d.textContent,D,t),y=["children",D]):typeof D=="number"&&d.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&Cs(d.textContent,D,t),y=["children",""+D]):s.hasOwnProperty(N)&&D!=null&&N==="onScroll"&&dt("scroll",d)}switch(a){case"input":$e(d),Dt(d,w,!0);break;case"textarea":$e(d),gt(d);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(d.onclick=Ss)}d=y,i.updateQueue=d,d!==null&&(i.flags|=4)}else{N=y.nodeType===9?y:y.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xt(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=N.createElement(a,{is:d.is}):(t=N.createElement(a),a==="select"&&(N=t,d.multiple?N.multiple=!0:d.size&&(N.size=d.size))):t=N.createElementNS(t,a),t[Pn]=i,t[wa]=d,im(t,i,!1,!1),i.stateNode=t;e:{switch(N=si(a,d),a){case"dialog":dt("cancel",t),dt("close",t),y=d;break;case"iframe":case"object":case"embed":dt("load",t),y=d;break;case"video":case"audio":for(y=0;y<ya.length;y++)dt(ya[y],t);y=d;break;case"source":dt("error",t),y=d;break;case"img":case"image":case"link":dt("error",t),dt("load",t),y=d;break;case"details":dt("toggle",t),y=d;break;case"input":Je(t,d),y=Qe(t,d),dt("invalid",t);break;case"option":y=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},y=Q({},d,{value:void 0}),dt("invalid",t);break;case"textarea":Ht(t,d),y=Ke(t,d),dt("invalid",t);break;default:y=d}Rt(a,y),D=y;for(w in D)if(D.hasOwnProperty(w)){var Y=D[w];w==="style"?Ot(t,Y):w==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Kt(t,Y)):w==="children"?typeof Y=="string"?(a!=="textarea"||Y!=="")&&lt(t,Y):typeof Y=="number"&&lt(t,""+Y):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?Y!=null&&w==="onScroll"&&dt("scroll",t):Y!=null&&q(t,w,Y,N))}switch(a){case"input":$e(t),Dt(t,d,!1);break;case"textarea":$e(t),gt(t);break;case"option":d.value!=null&&t.setAttribute("value",""+se(d.value));break;case"select":t.multiple=!!d.multiple,w=d.value,w!=null?ai(t,!!d.multiple,w,!1):d.defaultValue!=null&&ai(t,!!d.multiple,d.defaultValue,!0);break;default:typeof y.onClick=="function"&&(t.onclick=Ss)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ni(i),null;case 6:if(t&&i.stateNode!=null)rm(t,i,t.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(a=eo(Ma.current),eo(Tn.current),Vs(i)){if(d=i.stateNode,a=i.memoizedProps,d[Pn]=i,(w=d.nodeValue!==a)&&(t=ji,t!==null))switch(t.tag){case 3:Cs(d.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cs(d.nodeValue,a,(t.mode&1)!==0)}w&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Pn]=i,i.stateNode=d}return ni(i),null;case 13:if(pt(xt),d=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Fi!==null&&(i.mode&1)!==0&&(i.flags&128)===0)s_(),Po(),i.flags|=98560,w=!1;else if(w=Vs(i),d!==null&&d.dehydrated!==null){if(t===null){if(!w)throw Error(r(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[Pn]=i}else Po(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ni(i),w=!1}else dn!==null&&(Pc(dn),dn=null),w=!0;if(!w)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(xt.current&1)!==0?Ft===0&&(Ft=3):Vc())),i.updateQueue!==null&&(i.flags|=4),ni(i),null);case 4:return jo(),wc(t,i),t===null&&ga(i.stateNode.containerInfo),ni(i),null;case 10:return Yu(i.type._context),ni(i),null;case 17:return ki(i.type)&&Es(),ni(i),null;case 19:if(pt(xt),w=i.memoizedState,w===null)return ni(i),null;if(d=(i.flags&128)!==0,N=w.rendering,N===null)if(d)Ia(w,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(N=Bs(t),N!==null){for(i.flags|=128,Ia(w,!1),d=N.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)w=a,t=d,w.flags&=14680066,N=w.alternate,N===null?(w.childLanes=0,w.lanes=t,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=N.childLanes,w.lanes=N.lanes,w.child=N.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=N.memoizedProps,w.memoizedState=N.memoizedState,w.updateQueue=N.updateQueue,w.type=N.type,t=N.dependencies,w.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return ct(xt,xt.current&1|2),i.child}t=t.sibling}w.tail!==null&&Ie()>Oo&&(i.flags|=128,d=!0,Ia(w,!1),i.lanes=4194304)}else{if(!d)if(t=Bs(N),t!==null){if(i.flags|=128,d=!0,a=t.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ia(w,!0),w.tail===null&&w.tailMode==="hidden"&&!N.alternate&&!mt)return ni(i),null}else 2*Ie()-w.renderingStartTime>Oo&&a!==1073741824&&(i.flags|=128,d=!0,Ia(w,!1),i.lanes=4194304);w.isBackwards?(N.sibling=i.child,i.child=N):(a=w.last,a!==null?a.sibling=N:i.child=N,w.last=N)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=Ie(),i.sibling=null,a=xt.current,ct(xt,d?a&1|2:a&1),i):(ni(i),null);case 22:case 23:return Rc(),d=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Di&1073741824)!==0&&(ni(i),i.subtreeFlags&6&&(i.flags|=8192)):ni(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function Zg(t,i){switch(zu(i),i.tag){case 1:return ki(i.type)&&Es(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return jo(),pt(bi),pt(ti),tc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Ju(i),null;case 13:if(pt(xt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Po()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return pt(xt),null;case 4:return jo(),null;case 10:return Yu(i.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var Qs=!1,ri=!1,Jg=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Do(t,i){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){bt(t,i,d)}else a.current=null}function vc(t,i,a){try{a()}catch(d){bt(t,i,d)}}var om=!1;function e1(t,i){if(Ru=wo,t=Dp(),Mu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var y=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{a.nodeType,w.nodeType}catch{a=null;break e}var N=0,D=-1,Y=-1,oe=0,_e=0,he=t,pe=null;t:for(;;){for(var Ee;he!==a||y!==0&&he.nodeType!==3||(D=N+y),he!==w||d!==0&&he.nodeType!==3||(Y=N+d),he.nodeType===3&&(N+=he.nodeValue.length),(Ee=he.firstChild)!==null;)pe=he,he=Ee;for(;;){if(he===t)break t;if(pe===a&&++oe===y&&(D=N),pe===w&&++_e===d&&(Y=N),(Ee=he.nextSibling)!==null)break;he=pe,pe=he.parentNode}he=Ee}a=D===-1||Y===-1?null:{start:D,end:Y}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vu={focusedElem:t,selectionRange:a},wo=!1,Te=i;Te!==null;)if(i=Te,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Te=t;else for(;Te!==null;){i=Te;try{var Re=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var je=Re.memoizedProps,St=Re.memoizedState,ie=i.stateNode,X=ie.getSnapshotBeforeUpdate(i.elementType===i.type?je:pn(i.type,je),St);ie.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var re=i.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(we){bt(i,i.return,we)}if(t=i.sibling,t!==null){t.return=i.return,Te=t;break}Te=i.return}return Re=om,om=!1,Re}function Pa(t,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&t)===t){var w=y.destroy;y.destroy=void 0,w!==void 0&&vc(i,a,w)}y=y.next}while(y!==d)}}function Xs(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function bc(t){var i=t.ref;if(i!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof i=="function"?i(t):i.current=t}}function am(t){var i=t.alternate;i!==null&&(t.alternate=null,am(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Pn],delete i[wa],delete i[Lu],delete i[Fg],delete i[Dg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sm(t){return t.tag===5||t.tag===3||t.tag===4}function lm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kc(t,i,a){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(t,i):a.insertBefore(t,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(t,a)):(i=a,i.appendChild(t)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ss));else if(d!==4&&(t=t.child,t!==null))for(kc(t,i,a),t=t.sibling;t!==null;)kc(t,i,a),t=t.sibling}function qc(t,i,a){var d=t.tag;if(d===5||d===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(qc(t,i,a),t=t.sibling;t!==null;)qc(t,i,a),t=t.sibling}var Yt=null,_n=!1;function Mr(t,i,a){for(a=a.child;a!==null;)um(t,i,a),a=a.sibling}function um(t,i,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(ln,a)}catch{}switch(a.tag){case 5:ri||Do(a,i);case 6:var d=Yt,y=_n;Yt=null,Mr(t,i,a),Yt=d,_n=y,Yt!==null&&(_n?(t=Yt,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Yt.removeChild(a.stateNode));break;case 18:Yt!==null&&(_n?(t=Yt,a=a.stateNode,t.nodeType===8?Du(t.parentNode,a):t.nodeType===1&&Du(t,a),Gr(t)):Du(Yt,a.stateNode));break;case 4:d=Yt,y=_n,Yt=a.stateNode.containerInfo,_n=!0,Mr(t,i,a),Yt=d,_n=y;break;case 0:case 11:case 14:case 15:if(!ri&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){y=d=d.next;do{var w=y,N=w.destroy;w=w.tag,N!==void 0&&((w&2)!==0||(w&4)!==0)&&vc(a,i,N),y=y.next}while(y!==d)}Mr(t,i,a);break;case 1:if(!ri&&(Do(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(D){bt(a,i,D)}Mr(t,i,a);break;case 21:Mr(t,i,a);break;case 22:a.mode&1?(ri=(d=ri)||a.memoizedState!==null,Mr(t,i,a),ri=d):Mr(t,i,a);break;default:Mr(t,i,a)}}function cm(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new Jg),i.forEach(function(d){var y=u1.bind(null,t,d);a.has(d)||(a.add(d),d.then(y,y))})}}function mn(t,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var y=a[d];try{var w=t,N=i,D=N;e:for(;D!==null;){switch(D.tag){case 5:Yt=D.stateNode,_n=!1;break e;case 3:Yt=D.stateNode.containerInfo,_n=!0;break e;case 4:Yt=D.stateNode.containerInfo,_n=!0;break e}D=D.return}if(Yt===null)throw Error(r(160));um(w,N,y),Yt=null,_n=!1;var Y=y.alternate;Y!==null&&(Y.return=null),y.return=null}catch(oe){bt(y,i,oe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)dm(i,t),i=i.sibling}function dm(t,i){var a=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(i,t),Vn(t),d&4){try{Pa(3,t,t.return),Xs(3,t)}catch(je){bt(t,t.return,je)}try{Pa(5,t,t.return)}catch(je){bt(t,t.return,je)}}break;case 1:mn(i,t),Vn(t),d&512&&a!==null&&Do(a,a.return);break;case 5:if(mn(i,t),Vn(t),d&512&&a!==null&&Do(a,a.return),t.flags&32){var y=t.stateNode;try{lt(y,"")}catch(je){bt(t,t.return,je)}}if(d&4&&(y=t.stateNode,y!=null)){var w=t.memoizedProps,N=a!==null?a.memoizedProps:w,D=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&He(y,w),si(D,N);var oe=si(D,w);for(N=0;N<Y.length;N+=2){var _e=Y[N],he=Y[N+1];_e==="style"?Ot(y,he):_e==="dangerouslySetInnerHTML"?Kt(y,he):_e==="children"?lt(y,he):q(y,_e,he,oe)}switch(D){case"input":Ze(y,w);break;case"textarea":Ai(y,w);break;case"select":var pe=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var Ee=w.value;Ee!=null?ai(y,!!w.multiple,Ee,!1):pe!==!!w.multiple&&(w.defaultValue!=null?ai(y,!!w.multiple,w.defaultValue,!0):ai(y,!!w.multiple,w.multiple?[]:"",!1))}y[wa]=w}catch(je){bt(t,t.return,je)}}break;case 6:if(mn(i,t),Vn(t),d&4){if(t.stateNode===null)throw Error(r(162));y=t.stateNode,w=t.memoizedProps;try{y.nodeValue=w}catch(je){bt(t,t.return,je)}}break;case 3:if(mn(i,t),Vn(t),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Gr(i.containerInfo)}catch(je){bt(t,t.return,je)}break;case 4:mn(i,t),Vn(t);break;case 13:mn(i,t),Vn(t),y=t.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Sc=Ie())),d&4&&cm(t);break;case 22:if(_e=a!==null&&a.memoizedState!==null,t.mode&1?(ri=(oe=ri)||_e,mn(i,t),ri=oe):mn(i,t),Vn(t),d&8192){if(oe=t.memoizedState!==null,(t.stateNode.isHidden=oe)&&!_e&&(t.mode&1)!==0)for(Te=t,_e=t.child;_e!==null;){for(he=Te=_e;Te!==null;){switch(pe=Te,Ee=pe.child,pe.tag){case 0:case 11:case 14:case 15:Pa(4,pe,pe.return);break;case 1:Do(pe,pe.return);var Re=pe.stateNode;if(typeof Re.componentWillUnmount=="function"){d=pe,a=pe.return;try{i=d,Re.props=i.memoizedProps,Re.state=i.memoizedState,Re.componentWillUnmount()}catch(je){bt(d,a,je)}}break;case 5:Do(pe,pe.return);break;case 22:if(pe.memoizedState!==null){mm(he);continue}}Ee!==null?(Ee.return=pe,Te=Ee):mm(he)}_e=_e.sibling}e:for(_e=null,he=t;;){if(he.tag===5){if(_e===null){_e=he;try{y=he.stateNode,oe?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=he.stateNode,Y=he.memoizedProps.style,N=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,D.style.display=kn("display",N))}catch(je){bt(t,t.return,je)}}}else if(he.tag===6){if(_e===null)try{he.stateNode.nodeValue=oe?"":he.memoizedProps}catch(je){bt(t,t.return,je)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===t)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===t)break e;for(;he.sibling===null;){if(he.return===null||he.return===t)break e;_e===he&&(_e=null),he=he.return}_e===he&&(_e=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:mn(i,t),Vn(t),d&4&&cm(t);break;case 21:break;default:mn(i,t),Vn(t)}}function Vn(t){var i=t.flags;if(i&2){try{e:{for(var a=t.return;a!==null;){if(sm(a)){var d=a;break e}a=a.return}throw Error(r(160))}switch(d.tag){case 5:var y=d.stateNode;d.flags&32&&(lt(y,""),d.flags&=-33);var w=lm(t);qc(t,w,y);break;case 3:case 4:var N=d.stateNode.containerInfo,D=lm(t);kc(t,D,N);break;default:throw Error(r(161))}}catch(Y){bt(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function t1(t,i,a){Te=t,pm(t)}function pm(t,i,a){for(var d=(t.mode&1)!==0;Te!==null;){var y=Te,w=y.child;if(y.tag===22&&d){var N=y.memoizedState!==null||Qs;if(!N){var D=y.alternate,Y=D!==null&&D.memoizedState!==null||ri;D=Qs;var oe=ri;if(Qs=N,(ri=Y)&&!oe)for(Te=y;Te!==null;)N=Te,Y=N.child,N.tag===22&&N.memoizedState!==null?fm(y):Y!==null?(Y.return=N,Te=Y):fm(y);for(;w!==null;)Te=w,pm(w),w=w.sibling;Te=y,Qs=D,ri=oe}_m(t)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,Te=w):_m(t)}}function _m(t){for(;Te!==null;){var i=Te;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ri||Xs(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!ri)if(a===null)d.componentDidMount();else{var y=i.elementType===i.type?a.memoizedProps:pn(i.type,a.memoizedProps);d.componentDidUpdate(y,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&m_(i,w,d);break;case 3:var N=i.updateQueue;if(N!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}m_(i,N,a)}break;case 5:var D=i.stateNode;if(a===null&&i.flags&4){a=D;var Y=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&a.focus();break;case"img":Y.src&&(a.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var oe=i.alternate;if(oe!==null){var _e=oe.memoizedState;if(_e!==null){var he=_e.dehydrated;he!==null&&Gr(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ri||i.flags&512&&bc(i)}catch(pe){bt(i,i.return,pe)}}if(i===t){Te=null;break}if(a=i.sibling,a!==null){a.return=i.return,Te=a;break}Te=i.return}}function mm(t){for(;Te!==null;){var i=Te;if(i===t){Te=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Te=a;break}Te=i.return}}function fm(t){for(;Te!==null;){var i=Te;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Xs(4,i)}catch(Y){bt(i,a,Y)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var y=i.return;try{d.componentDidMount()}catch(Y){bt(i,y,Y)}}var w=i.return;try{bc(i)}catch(Y){bt(i,w,Y)}break;case 5:var N=i.return;try{bc(i)}catch(Y){bt(i,N,Y)}}}catch(Y){bt(i,i.return,Y)}if(i===t){Te=null;break}var D=i.sibling;if(D!==null){D.return=i.return,Te=D;break}Te=i.return}}var i1=Math.ceil,Ks=C.ReactCurrentDispatcher,Mc=C.ReactCurrentOwner,Ji=C.ReactCurrentBatchConfig,it=0,zt=null,It=null,Qt=0,Di=0,Lo=wr(0),Ft=0,Ta=null,io=0,Zs=0,Cc=0,Ra=null,Mi=null,Sc=0,Oo=1/0,er=null,Js=!1,Nc=null,Cr=null,el=!1,Sr=null,tl=0,Va=0,Ec=null,il=-1,nl=0;function mi(){return(it&6)!==0?Ie():il!==-1?il:il=Ie()}function Nr(t){return(t.mode&1)===0?1:(it&2)!==0&&Qt!==0?Qt&-Qt:Og.transition!==null?(nl===0&&(nl=vi()),nl):(t=ot,t!==0||(t=window.event,t=t===void 0?16:z(t.type)),t)}function fn(t,i,a,d){if(50<Va)throw Va=0,Ec=null,Error(r(185));Wi(t,a,d),((it&2)===0||t!==zt)&&(t===zt&&((it&2)===0&&(Zs|=a),Ft===4&&Er(t,Qt)),Ci(t,d),a===1&&it===0&&(i.mode&1)===0&&(Oo=Ie()+500,Ps&&br()))}function Ci(t,i){var a=t.callbackNode;un(t,i);var d=wi(t,t===zt?Qt:0);if(d===0)a!==null&&Cn(a),t.callbackNode=null,t.callbackPriority=0;else if(i=d&-d,t.callbackPriority!==i){if(a!=null&&Cn(a),i===1)t.tag===0?Lg(ym.bind(null,t)):i_(ym.bind(null,t)),Vg(function(){(it&6)===0&&br()}),a=null;else{switch(ms(d)){case 1:a=pr;break;case 4:a=Sn;break;case 16:a=Hn;break;case 536870912:a=zr;break;default:a=Hn}a=Mm(a,hm.bind(null,t))}t.callbackPriority=i,t.callbackNode=a}}function hm(t,i){if(il=-1,nl=0,(it&6)!==0)throw Error(r(327));var a=t.callbackNode;if(Bo()&&t.callbackNode!==a)return null;var d=wi(t,t===zt?Qt:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||i)i=rl(t,d);else{i=d;var y=it;it|=2;var w=xm();(zt!==t||Qt!==i)&&(er=null,Oo=Ie()+500,ro(t,i));do try{o1();break}catch(D){gm(t,D)}while(!0);Gu(),Ks.current=w,it=y,It!==null?i=0:(zt=null,Qt=0,i=Ft)}if(i!==0){if(i===2&&(y=Ri(t),y!==0&&(d=y,i=Ic(t,y))),i===1)throw a=Ta,ro(t,0),Er(t,d),Ci(t,Ie()),a;if(i===6)Er(t,d);else{if(y=t.current.alternate,(d&30)===0&&!n1(y)&&(i=rl(t,d),i===2&&(w=Ri(t),w!==0&&(d=w,i=Ic(t,w))),i===1))throw a=Ta,ro(t,0),Er(t,d),Ci(t,Ie()),a;switch(t.finishedWork=y,t.finishedLanes=d,i){case 0:case 1:throw Error(r(345));case 2:oo(t,Mi,er);break;case 3:if(Er(t,d),(d&130023424)===d&&(i=Sc+500-Ie(),10<i)){if(wi(t,0)!==0)break;if(y=t.suspendedLanes,(y&d)!==d){mi(),t.pingedLanes|=t.suspendedLanes&y;break}t.timeoutHandle=Fu(oo.bind(null,t,Mi,er),i);break}oo(t,Mi,er);break;case 4:if(Er(t,d),(d&4194240)===d)break;for(i=t.eventTimes,y=-1;0<d;){var N=31-ci(d);w=1<<N,N=i[N],N>y&&(y=N),d&=~w}if(d=y,d=Ie()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*i1(d/1960))-d,10<d){t.timeoutHandle=Fu(oo.bind(null,t,Mi,er),d);break}oo(t,Mi,er);break;case 5:oo(t,Mi,er);break;default:throw Error(r(329))}}}return Ci(t,Ie()),t.callbackNode===a?hm.bind(null,t):null}function Ic(t,i){var a=Ra;return t.current.memoizedState.isDehydrated&&(ro(t,i).flags|=256),t=rl(t,i),t!==2&&(i=Mi,Mi=a,i!==null&&Pc(i)),t}function Pc(t){Mi===null?Mi=t:Mi.push.apply(Mi,t)}function n1(t){for(var i=t;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var y=a[d],w=y.getSnapshot;y=y.value;try{if(!cn(w(),y))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(t,i){for(i&=~Cc,i&=~Zs,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var a=31-ci(i),d=1<<a;t[a]=-1,i&=~d}}function ym(t){if((it&6)!==0)throw Error(r(327));Bo();var i=wi(t,0);if((i&1)===0)return Ci(t,Ie()),null;var a=rl(t,i);if(t.tag!==0&&a===2){var d=Ri(t);d!==0&&(i=d,a=Ic(t,d))}if(a===1)throw a=Ta,ro(t,0),Er(t,i),Ci(t,Ie()),a;if(a===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,oo(t,Mi,er),Ci(t,Ie()),null}function Tc(t,i){var a=it;it|=1;try{return t(i)}finally{it=a,it===0&&(Oo=Ie()+500,Ps&&br())}}function no(t){Sr!==null&&Sr.tag===0&&(it&6)===0&&Bo();var i=it;it|=1;var a=Ji.transition,d=ot;try{if(Ji.transition=null,ot=1,t)return t()}finally{ot=d,Ji.transition=a,it=i,(it&6)===0&&br()}}function Rc(){Di=Lo.current,pt(Lo)}function ro(t,i){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,Rg(a)),It!==null)for(a=It.return;a!==null;){var d=a;switch(zu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Es();break;case 3:jo(),pt(bi),pt(ti),tc();break;case 5:Ju(d);break;case 4:jo();break;case 13:pt(xt);break;case 19:pt(xt);break;case 10:Yu(d.type._context);break;case 22:case 23:Rc()}a=a.return}if(zt=t,It=t=Ir(t.current,null),Qt=Di=i,Ft=0,Ta=null,Cc=Zs=io=0,Mi=Ra=null,Jr!==null){for(i=0;i<Jr.length;i++)if(a=Jr[i],d=a.interleaved,d!==null){a.interleaved=null;var y=d.next,w=a.pending;if(w!==null){var N=w.next;w.next=y,d.next=N}a.pending=d}Jr=null}return t}function gm(t,i){do{var a=It;try{if(Gu(),As.current=Ws,zs){for(var d=wt.memoizedState;d!==null;){var y=d.queue;y!==null&&(y.pending=null),d=d.next}zs=!1}if(to=0,At=jt=wt=null,Ca=!1,Sa=0,Mc.current=null,a===null||a.return===null){Ft=1,Ta=i,It=null;break}e:{var w=t,N=a.return,D=a,Y=i;if(i=Qt,D.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var oe=Y,_e=D,he=_e.tag;if((_e.mode&1)===0&&(he===0||he===11||he===15)){var pe=_e.alternate;pe?(_e.updateQueue=pe.updateQueue,_e.memoizedState=pe.memoizedState,_e.lanes=pe.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Ee=$_(N);if(Ee!==null){Ee.flags&=-257,H_(Ee,N,D,w,i),Ee.mode&1&&z_(w,oe,i),i=Ee,Y=oe;var Re=i.updateQueue;if(Re===null){var je=new Set;je.add(Y),i.updateQueue=je}else Re.add(Y);break e}else{if((i&1)===0){z_(w,oe,i),Vc();break e}Y=Error(r(426))}}else if(mt&&D.mode&1){var St=$_(N);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),H_(St,N,D,w,i),Wu(Fo(Y,D));break e}}w=Y=Fo(Y,D),Ft!==4&&(Ft=2),Ra===null?Ra=[w]:Ra.push(w),w=N;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var ie=B_(w,Y,i);__(w,ie);break e;case 1:D=Y;var X=w.type,re=w.stateNode;if((w.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Cr===null||!Cr.has(re)))){w.flags|=65536,i&=-i,w.lanes|=i;var we=A_(w,D,i);__(w,we);break e}}w=w.return}while(w!==null)}vm(a)}catch(De){i=De,It===a&&a!==null&&(It=a=a.return);continue}break}while(!0)}function xm(){var t=Ks.current;return Ks.current=Ws,t===null?Ws:t}function Vc(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),zt===null||(io&268435455)===0&&(Zs&268435455)===0||Er(zt,Qt)}function rl(t,i){var a=it;it|=2;var d=xm();(zt!==t||Qt!==i)&&(er=null,ro(t,i));do try{r1();break}catch(y){gm(t,y)}while(!0);if(Gu(),it=a,Ks.current=d,It!==null)throw Error(r(261));return zt=null,Qt=0,Ft}function r1(){for(;It!==null;)wm(It)}function o1(){for(;It!==null&&!Ar();)wm(It)}function wm(t){var i=qm(t.alternate,t,Di);t.memoizedProps=t.pendingProps,i===null?vm(t):It=i,Mc.current=null}function vm(t){var i=t;do{var a=i.alternate;if(t=i.return,(i.flags&32768)===0){if(a=Kg(a,i,Di),a!==null){It=a;return}}else{if(a=Zg(a,i),a!==null){a.flags&=32767,It=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,It=null;return}}if(i=i.sibling,i!==null){It=i;return}It=i=t}while(i!==null);Ft===0&&(Ft=5)}function oo(t,i,a){var d=ot,y=Ji.transition;try{Ji.transition=null,ot=1,a1(t,i,a,d)}finally{Ji.transition=y,ot=d}return null}function a1(t,i,a,d){do Bo();while(Sr!==null);if((it&6)!==0)throw Error(r(327));a=t.finishedWork;var y=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var w=a.lanes|a.childLanes;if(Ui(t,w),t===zt&&(It=zt=null,Qt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||el||(el=!0,Mm(Hn,function(){return Bo(),null})),w=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||w){w=Ji.transition,Ji.transition=null;var N=ot;ot=1;var D=it;it|=4,Mc.current=null,e1(t,a),dm(a,t),Cg(Vu),wo=!!Ru,Vu=Ru=null,t.current=a,t1(a),dr(),it=D,ot=N,Ji.transition=w}else t.current=a;if(el&&(el=!1,Sr=t,tl=y),w=t.pendingLanes,w===0&&(Cr=null),mr(a.stateNode),Ci(t,Ie()),i!==null)for(d=t.onRecoverableError,a=0;a<i.length;a++)y=i[a],d(y.value,{componentStack:y.stack,digest:y.digest});if(Js)throw Js=!1,t=Nc,Nc=null,t;return(tl&1)!==0&&t.tag!==0&&Bo(),w=t.pendingLanes,(w&1)!==0?t===Ec?Va++:(Va=0,Ec=t):Va=0,br(),null}function Bo(){if(Sr!==null){var t=ms(tl),i=Ji.transition,a=ot;try{if(Ji.transition=null,ot=16>t?16:t,Sr===null)var d=!1;else{if(t=Sr,Sr=null,tl=0,(it&6)!==0)throw Error(r(331));var y=it;for(it|=4,Te=t.current;Te!==null;){var w=Te,N=w.child;if((Te.flags&16)!==0){var D=w.deletions;if(D!==null){for(var Y=0;Y<D.length;Y++){var oe=D[Y];for(Te=oe;Te!==null;){var _e=Te;switch(_e.tag){case 0:case 11:case 15:Pa(8,_e,w)}var he=_e.child;if(he!==null)he.return=_e,Te=he;else for(;Te!==null;){_e=Te;var pe=_e.sibling,Ee=_e.return;if(am(_e),_e===oe){Te=null;break}if(pe!==null){pe.return=Ee,Te=pe;break}Te=Ee}}}var Re=w.alternate;if(Re!==null){var je=Re.child;if(je!==null){Re.child=null;do{var St=je.sibling;je.sibling=null,je=St}while(je!==null)}}Te=w}}if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,Te=N;else e:for(;Te!==null;){if(w=Te,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Pa(9,w,w.return)}var ie=w.sibling;if(ie!==null){ie.return=w.return,Te=ie;break e}Te=w.return}}var X=t.current;for(Te=X;Te!==null;){N=Te;var re=N.child;if((N.subtreeFlags&2064)!==0&&re!==null)re.return=N,Te=re;else e:for(N=X;Te!==null;){if(D=Te,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Xs(9,D)}}catch(De){bt(D,D.return,De)}if(D===N){Te=null;break e}var we=D.sibling;if(we!==null){we.return=D.return,Te=we;break e}Te=D.return}}if(it=y,br(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(ln,t)}catch{}d=!0}return d}finally{ot=a,Ji.transition=i}}return!1}function bm(t,i,a){i=Fo(a,i),i=B_(t,i,1),t=qr(t,i,1),i=mi(),t!==null&&(Wi(t,1,i),Ci(t,i))}function bt(t,i,a){if(t.tag===3)bm(t,t,a);else for(;i!==null;){if(i.tag===3){bm(i,t,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Cr===null||!Cr.has(d))){t=Fo(a,t),t=A_(i,t,1),i=qr(i,t,1),t=mi(),i!==null&&(Wi(i,1,t),Ci(i,t));break}}i=i.return}}function s1(t,i,a){var d=t.pingCache;d!==null&&d.delete(i),i=mi(),t.pingedLanes|=t.suspendedLanes&a,zt===t&&(Qt&a)===a&&(Ft===4||Ft===3&&(Qt&130023424)===Qt&&500>Ie()-Sc?ro(t,0):Cc|=a),Ci(t,i)}function km(t,i){i===0&&((t.mode&1)===0?i=1:(i=xi,xi<<=1,(xi&130023424)===0&&(xi=4194304)));var a=mi();t=Kn(t,i),t!==null&&(Wi(t,i,a),Ci(t,a))}function l1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),km(t,a)}function u1(t,i){var a=0;switch(t.tag){case 13:var d=t.stateNode,y=t.memoizedState;y!==null&&(a=y.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(r(314))}d!==null&&d.delete(i),km(t,a)}var qm;qm=function(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps||bi.current)qi=!0;else{if((t.lanes&a)===0&&(i.flags&128)===0)return qi=!1,Xg(t,i,a);qi=(t.flags&131072)!==0}else qi=!1,mt&&(i.flags&1048576)!==0&&n_(i,Rs,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Ys(t,i),t=i.pendingProps;var y=No(i,ti.current);Vo(i,a),y=rc(null,i,d,t,y,a);var w=oc();return i.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,ki(d)?(w=!0,Is(i)):w=!1,i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ku(i),y.updater=Us,i.stateNode=y,y._reactInternals=i,dc(i,d,t,a),i=fc(null,i,d,!0,w,a)):(i.tag=0,mt&&w&&Au(i),_i(null,i,y,a),i=i.child),i;case 16:d=i.elementType;e:{switch(Ys(t,i),t=i.pendingProps,y=d._init,d=y(d._payload),i.type=d,y=i.tag=d1(d),t=pn(d,t),y){case 0:i=mc(null,i,d,t,a);break e;case 1:i=X_(null,i,d,t,a);break e;case 11:i=W_(null,i,d,t,a);break e;case 14:i=U_(null,i,d,pn(d.type,t),a);break e}throw Error(r(306,d,""))}return i;case 0:return d=i.type,y=i.pendingProps,y=i.elementType===d?y:pn(d,y),mc(t,i,d,y,a);case 1:return d=i.type,y=i.pendingProps,y=i.elementType===d?y:pn(d,y),X_(t,i,d,y,a);case 3:e:{if(K_(i),t===null)throw Error(r(387));d=i.pendingProps,w=i.memoizedState,y=w.element,p_(t,i),Os(i,d,null,a);var N=i.memoizedState;if(d=N.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){y=Fo(Error(r(423)),i),i=Z_(t,i,d,a,y);break e}else if(d!==y){y=Fo(Error(r(424)),i),i=Z_(t,i,d,a,y);break e}else for(Fi=xr(i.stateNode.containerInfo.firstChild),ji=i,mt=!0,dn=null,a=c_(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Po(),d===y){i=Jn(t,i,a);break e}_i(t,i,d,a)}i=i.child}return i;case 5:return f_(i),t===null&&Hu(i),d=i.type,y=i.pendingProps,w=t!==null?t.memoizedProps:null,N=y.children,ju(d,y)?N=null:w!==null&&ju(d,w)&&(i.flags|=32),Q_(t,i),_i(t,i,N,a),i.child;case 6:return t===null&&Hu(i),null;case 13:return J_(t,i,a);case 4:return Zu(i,i.stateNode.containerInfo),d=i.pendingProps,t===null?i.child=To(i,null,d,a):_i(t,i,d,a),i.child;case 11:return d=i.type,y=i.pendingProps,y=i.elementType===d?y:pn(d,y),W_(t,i,d,y,a);case 7:return _i(t,i,i.pendingProps,a),i.child;case 8:return _i(t,i,i.pendingProps.children,a),i.child;case 12:return _i(t,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,y=i.pendingProps,w=i.memoizedProps,N=y.value,ct(Fs,d._currentValue),d._currentValue=N,w!==null)if(cn(w.value,N)){if(w.children===y.children&&!bi.current){i=Jn(t,i,a);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var D=w.dependencies;if(D!==null){N=w.child;for(var Y=D.firstContext;Y!==null;){if(Y.context===d){if(w.tag===1){Y=Zn(-1,a&-a),Y.tag=2;var oe=w.updateQueue;if(oe!==null){oe=oe.shared;var _e=oe.pending;_e===null?Y.next=Y:(Y.next=_e.next,_e.next=Y),oe.pending=Y}}w.lanes|=a,Y=w.alternate,Y!==null&&(Y.lanes|=a),Qu(w.return,a,i),D.lanes|=a;break}Y=Y.next}}else if(w.tag===10)N=w.type===i.type?null:w.child;else if(w.tag===18){if(N=w.return,N===null)throw Error(r(341));N.lanes|=a,D=N.alternate,D!==null&&(D.lanes|=a),Qu(N,a,i),N=w.sibling}else N=w.child;if(N!==null)N.return=w;else for(N=w;N!==null;){if(N===i){N=null;break}if(w=N.sibling,w!==null){w.return=N.return,N=w;break}N=N.return}w=N}_i(t,i,y.children,a),i=i.child}return i;case 9:return y=i.type,d=i.pendingProps.children,Vo(i,a),y=Ki(y),d=d(y),i.flags|=1,_i(t,i,d,a),i.child;case 14:return d=i.type,y=pn(d,i.pendingProps),y=pn(d.type,y),U_(t,i,d,y,a);case 15:return G_(t,i,i.type,i.pendingProps,a);case 17:return d=i.type,y=i.pendingProps,y=i.elementType===d?y:pn(d,y),Ys(t,i),i.tag=1,ki(d)?(t=!0,Is(i)):t=!1,Vo(i,a),L_(i,d,y),dc(i,d,y,a),fc(null,i,d,!0,t,a);case 19:return tm(t,i,a);case 22:return Y_(t,i,a)}throw Error(r(156,i.tag))};function Mm(t,i){return $i(t,i)}function c1(t,i,a,d){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,i,a,d){return new c1(t,i,a,d)}function jc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d1(t){if(typeof t=="function")return jc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H)return 11;if(t===Z)return 14}return 2}function Ir(t,i){var a=t.alternate;return a===null?(a=en(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function ol(t,i,a,d,y,w){var N=2;if(d=t,typeof t=="function")jc(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case R:return ao(a.children,y,w,i);case V:N=8,y|=8;break;case A:return t=en(12,a,i,y|2),t.elementType=A,t.lanes=w,t;case te:return t=en(13,a,i,y),t.elementType=te,t.lanes=w,t;case T:return t=en(19,a,i,y),t.elementType=T,t.lanes=w,t;case J:return al(a,y,w,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:N=10;break e;case W:N=9;break e;case H:N=11;break e;case Z:N=14;break e;case U:N=16,d=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return i=en(N,a,i,y),i.elementType=t,i.type=d,i.lanes=w,i}function ao(t,i,a,d){return t=en(7,t,d,i),t.lanes=a,t}function al(t,i,a,d){return t=en(22,t,d,i),t.elementType=J,t.lanes=a,t.stateNode={isHidden:!1},t}function Fc(t,i,a){return t=en(6,t,null,i),t.lanes=a,t}function Dc(t,i,a){return i=en(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function p1(t,i,a,d,y){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vi(0),this.expirationTimes=Vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.identifierPrefix=d,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Lc(t,i,a,d,y,w,N,D,Y){return t=new p1(t,i,a,D,Y),i===1?(i=1,w===!0&&(i|=8)):i=0,w=en(3,null,null,i),t.current=w,w.stateNode=t,w.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(w),t}function _1(t,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:d==null?null:""+d,children:t,containerInfo:i,implementation:a}}function Cm(t){if(!t)return vr;t=t._reactInternals;e:{if(Gt(t)!==t||t.tag!==1)throw Error(r(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(ki(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(t.tag===1){var a=t.type;if(ki(a))return e_(t,a,i)}return i}function Sm(t,i,a,d,y,w,N,D,Y){return t=Lc(a,d,!0,t,y,w,N,D,Y),t.context=Cm(null),a=t.current,d=mi(),y=Nr(a),w=Zn(d,y),w.callback=i??null,qr(a,w,y),t.current.lanes=y,Wi(t,y,d),Ci(t,d),t}function sl(t,i,a,d){var y=i.current,w=mi(),N=Nr(y);return a=Cm(a),i.context===null?i.context=a:i.pendingContext=a,i=Zn(w,N),i.payload={element:t},d=d===void 0?null:d,d!==null&&(i.callback=d),t=qr(y,i,N),t!==null&&(fn(t,y,N,w),Ls(t,y,N)),N}function ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nm(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Oc(t,i){Nm(t,i),(t=t.alternate)&&Nm(t,i)}function m1(){return null}var Em=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bc(t){this._internalRoot=t}ul.prototype.render=Bc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));sl(t,i,null,null)},ul.prototype.unmount=Bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;no(function(){sl(null,t,null,null)}),i[Gn]=null}};function ul(t){this._internalRoot=t}ul.prototype.unstable_scheduleHydration=function(t){if(t){var i=fs();t={blockedOn:null,target:t,priority:i};for(var a=0;a<En.length&&i!==0&&i<En[a].priority;a++);En.splice(a,0,t),a===0&&gs(t)}};function Ac(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Im(){}function f1(t,i,a,d,y){if(y){if(typeof d=="function"){var w=d;d=function(){var oe=ll(N);w.call(oe)}}var N=Sm(i,d,t,0,null,!1,!1,"",Im);return t._reactRootContainer=N,t[Gn]=N.current,ga(t.nodeType===8?t.parentNode:t),no(),N}for(;y=t.lastChild;)t.removeChild(y);if(typeof d=="function"){var D=d;d=function(){var oe=ll(Y);D.call(oe)}}var Y=Lc(t,0,!1,null,null,!1,!1,"",Im);return t._reactRootContainer=Y,t[Gn]=Y.current,ga(t.nodeType===8?t.parentNode:t),no(function(){sl(i,Y,a,d)}),Y}function dl(t,i,a,d,y){var w=a._reactRootContainer;if(w){var N=w;if(typeof y=="function"){var D=y;y=function(){var Y=ll(N);D.call(Y)}}sl(i,N,t,y)}else N=f1(a,i,t,y,d);return ll(N)}Gi=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var a=Mt(i.pendingLanes);a!==0&&(sa(i,a|1),Ci(i,Ie()),(it&6)===0&&(Oo=Ie()+500,br()))}break;case 13:no(function(){var d=Kn(t,1);if(d!==null){var y=mi();fn(d,t,1,y)}}),Oc(t,1)}},Wn=function(t){if(t.tag===13){var i=Kn(t,134217728);if(i!==null){var a=mi();fn(i,t,134217728,a)}Oc(t,134217728)}},la=function(t){if(t.tag===13){var i=Nr(t),a=Kn(t,i);if(a!==null){var d=mi();fn(a,t,i,d)}Oc(t,i)}},fs=function(){return ot},hs=function(t,i){var a=ot;try{return ot=t,i()}finally{ot=a}},Ut=function(t,i,a){switch(i){case"input":if(Ze(t,a),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==t&&d.form===t.form){var y=Ns(d);if(!y)throw Error(r(90));Le(d),Ze(d,y)}}}break;case"textarea":Ai(t,a);break;case"select":i=a.value,i!=null&&ai(t,!!a.multiple,i,!1)}},ui=Tc,qn=no;var h1={usingClientEntryPoint:!1,Events:[va,Co,Ns,nn,yi,Tc]},ja={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y1={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Me(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||m1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{ln=pl.inject(y1),_t=pl}catch{}}return Si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1,Si.createPortal=function(t,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ac(i))throw Error(r(200));return _1(t,i,null,a)},Si.createRoot=function(t,i){if(!Ac(t))throw Error(r(299));var a=!1,d="",y=Em;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=Lc(t,1,!1,null,null,a,!1,d,y),t[Gn]=i.current,ga(t.nodeType===8?t.parentNode:t),new Bc(i)},Si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Me(i),t=t===null?null:t.stateNode,t},Si.flushSync=function(t){return no(t)},Si.hydrate=function(t,i,a){if(!cl(i))throw Error(r(200));return dl(null,t,i,!0,a)},Si.hydrateRoot=function(t,i,a){if(!Ac(t))throw Error(r(405));var d=a!=null&&a.hydratedSources||null,y=!1,w="",N=Em;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(w=a.identifierPrefix),a.onRecoverableError!==void 0&&(N=a.onRecoverableError)),i=Sm(i,null,t,1,a??null,y,!1,w,N),t[Gn]=i.current,ga(t),d)for(t=0;t<d.length;t++)a=d[t],y=a._getVersion,y=y(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,y]:i.mutableSourceEagerHydrationData.push(a,y);return new ul(i)},Si.render=function(t,i,a){if(!cl(i))throw Error(r(200));return dl(null,t,i,!1,a)},Si.unmountComponentAtNode=function(t){if(!cl(t))throw Error(r(40));return t._reactRootContainer?(no(function(){dl(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1},Si.unstable_batchedUpdates=Tc,Si.unstable_renderSubtreeIntoContainer=function(t,i,a,d){if(!cl(a))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return dl(t,i,a,!1,d)},Si.version="18.3.1-next-f1338f8080-20240426",Si}var Lm;function L0(){if(Lm)return Hc.exports;Lm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hc.exports=M1(),Hc.exports}var Om;function C1(){if(Om)return _l;Om=1;var e=L0();return _l.createRoot=e.createRoot,_l.hydrateRoot=e.hydrateRoot,_l}var S1=C1();const N1=os(S1);function Pt(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=Pt(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var E1={value:()=>{}};function ru(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new Il(r)}function Il(e){this._=e}function I1(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}Il.prototype=ru.prototype={constructor:Il,on:function(e,n){var r=this._,o=I1(e+"",r),s,u=-1,l=o.length;if(arguments.length<2){for(;++u<l;)if((s=(e=o[u]).type)&&(s=P1(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<l;)if(s=(e=o[u]).type)r[s]=Bm(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Bm(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Il(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,u;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],o=0,s=u.length;o<s;++o)u[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,u=o.length;s<u;++s)o[s].value.apply(n,r)}};function P1(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Bm(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=E1,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var vd="http://www.w3.org/1999/xhtml";const Am={svg:"http://www.w3.org/2000/svg",xhtml:vd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ou(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Am.hasOwnProperty(n)?{space:Am[n],local:e}:e}function T1(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===vd&&n.documentElement.namespaceURI===vd?n.createElement(e):n.createElementNS(r,e)}}function R1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function O0(e){var n=ou(e);return(n.local?R1:T1)(n)}function V1(){}function Gd(e){return e==null?V1:function(){return this.querySelector(e)}}function j1(e){typeof e!="function"&&(e=Gd(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=new Array(l),p,m,g=0;g<l;++g)(p=u[g])&&(m=e.call(p,p.__data__,g,u))&&("__data__"in p&&(m.__data__=p.__data__),c[g]=m);return new Bi(o,this._parents)}function F1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function D1(){return[]}function B0(e){return e==null?D1:function(){return this.querySelectorAll(e)}}function L1(e){return function(){return F1(e.apply(this,arguments))}}function O1(e){typeof e=="function"?e=L1(e):e=B0(e);for(var n=this._groups,r=n.length,o=[],s=[],u=0;u<r;++u)for(var l=n[u],c=l.length,p,m=0;m<c;++m)(p=l[m])&&(o.push(e.call(p,p.__data__,m,l)),s.push(p));return new Bi(o,s)}function A0(e){return function(){return this.matches(e)}}function z0(e){return function(n){return n.matches(e)}}var B1=Array.prototype.find;function A1(e){return function(){return B1.call(this.children,e)}}function z1(){return this.firstElementChild}function $1(e){return this.select(e==null?z1:A1(typeof e=="function"?e:z0(e)))}var H1=Array.prototype.filter;function W1(){return Array.from(this.children)}function U1(e){return function(){return H1.call(this.children,e)}}function G1(e){return this.selectAll(e==null?W1:U1(typeof e=="function"?e:z0(e)))}function Y1(e){typeof e!="function"&&(e=A0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],p,m=0;m<l;++m)(p=u[m])&&e.call(p,p.__data__,m,u)&&c.push(p);return new Bi(o,this._parents)}function $0(e){return new Array(e.length)}function Q1(){return new Bi(this._enter||this._groups.map($0),this._parents)}function Bl(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Bl.prototype={constructor:Bl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function X1(e){return function(){return e}}function K1(e,n,r,o,s,u){for(var l=0,c,p=n.length,m=u.length;l<m;++l)(c=n[l])?(c.__data__=u[l],o[l]=c):r[l]=new Bl(e,u[l]);for(;l<p;++l)(c=n[l])&&(s[l]=c)}function Z1(e,n,r,o,s,u,l){var c,p,m=new Map,g=n.length,_=u.length,h=new Array(g),x;for(c=0;c<g;++c)(p=n[c])&&(h[c]=x=l.call(p,p.__data__,c,n)+"",m.has(x)?s[c]=p:m.set(x,p));for(c=0;c<_;++c)x=l.call(e,u[c],c,u)+"",(p=m.get(x))?(o[c]=p,p.__data__=u[c],m.delete(x)):r[c]=new Bl(e,u[c]);for(c=0;c<g;++c)(p=n[c])&&m.get(h[c])===p&&(s[c]=p)}function J1(e){return e.__data__}function ex(e,n){if(!arguments.length)return Array.from(this,J1);var r=n?Z1:K1,o=this._parents,s=this._groups;typeof e!="function"&&(e=X1(e));for(var u=s.length,l=new Array(u),c=new Array(u),p=new Array(u),m=0;m<u;++m){var g=o[m],_=s[m],h=_.length,x=tx(e.call(g,g&&g.__data__,m,o)),b=x.length,M=c[m]=new Array(b),k=l[m]=new Array(b),v=p[m]=new Array(h);r(g,_,M,k,v,x,n);for(var S=0,q=0,C,P;S<b;++S)if(C=M[S]){for(S>=q&&(q=S+1);!(P=k[q])&&++q<b;);C._next=P||null}}return l=new Bi(l,o),l._enter=c,l._exit=p,l}function tx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ix(){return new Bi(this._exit||this._groups.map($0),this._parents)}function nx(e,n,r){var o=this.enter(),s=this,u=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?u.remove():r(u),o&&s?o.merge(s).order():s}function rx(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,u=o.length,l=Math.min(s,u),c=new Array(s),p=0;p<l;++p)for(var m=r[p],g=o[p],_=m.length,h=c[p]=new Array(_),x,b=0;b<_;++b)(x=m[b]||g[b])&&(h[b]=x);for(;p<s;++p)c[p]=r[p];return new Bi(c,this._parents)}function ox(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,u=o[s],l;--s>=0;)(l=o[s])&&(u&&l.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(l,u),u=l);return this}function ax(e){e||(e=sx);function n(_,h){return _&&h?e(_.__data__,h.__data__):!_-!h}for(var r=this._groups,o=r.length,s=new Array(o),u=0;u<o;++u){for(var l=r[u],c=l.length,p=s[u]=new Array(c),m,g=0;g<c;++g)(m=l[g])&&(p[g]=m);p.sort(n)}return new Bi(s,this._parents).order()}function sx(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function lx(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ux(){return Array.from(this)}function cx(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length;s<u;++s){var l=o[s];if(l)return l}return null}function dx(){let e=0;for(const n of this)++e;return e}function px(){return!this.node()}function _x(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],u=0,l=s.length,c;u<l;++u)(c=s[u])&&e.call(c,c.__data__,u,s);return this}function mx(e){return function(){this.removeAttribute(e)}}function fx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hx(e,n){return function(){this.setAttribute(e,n)}}function yx(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function gx(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function xx(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function wx(e,n){var r=ou(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?fx:mx:typeof n=="function"?r.local?xx:gx:r.local?yx:hx)(r,n))}function H0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vx(e){return function(){this.style.removeProperty(e)}}function bx(e,n,r){return function(){this.style.setProperty(e,n,r)}}function kx(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function qx(e,n,r){return arguments.length>1?this.each((n==null?vx:typeof n=="function"?kx:bx)(e,n,r??"")):Xo(this.node(),e)}function Xo(e,n){return e.style.getPropertyValue(n)||H0(e).getComputedStyle(e,null).getPropertyValue(n)}function Mx(e){return function(){delete this[e]}}function Cx(e,n){return function(){this[e]=n}}function Sx(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Nx(e,n){return arguments.length>1?this.each((n==null?Mx:typeof n=="function"?Sx:Cx)(e,n)):this.node()[e]}function W0(e){return e.trim().split(/^|\s+/)}function Yd(e){return e.classList||new U0(e)}function U0(e){this._node=e,this._names=W0(e.getAttribute("class")||"")}U0.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function G0(e,n){for(var r=Yd(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function Y0(e,n){for(var r=Yd(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function Ex(e){return function(){G0(this,e)}}function Ix(e){return function(){Y0(this,e)}}function Px(e,n){return function(){(n.apply(this,arguments)?G0:Y0)(this,e)}}function Tx(e,n){var r=W0(e+"");if(arguments.length<2){for(var o=Yd(this.node()),s=-1,u=r.length;++s<u;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?Px:n?Ex:Ix)(r,n))}function Rx(){this.textContent=""}function Vx(e){return function(){this.textContent=e}}function jx(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function Fx(e){return arguments.length?this.each(e==null?Rx:(typeof e=="function"?jx:Vx)(e)):this.node().textContent}function Dx(){this.innerHTML=""}function Lx(e){return function(){this.innerHTML=e}}function Ox(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function Bx(e){return arguments.length?this.each(e==null?Dx:(typeof e=="function"?Ox:Lx)(e)):this.node().innerHTML}function Ax(){this.nextSibling&&this.parentNode.appendChild(this)}function zx(){return this.each(Ax)}function $x(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hx(){return this.each($x)}function Wx(e){var n=typeof e=="function"?e:O0(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Ux(){return null}function Gx(e,n){var r=typeof e=="function"?e:O0(e),o=n==null?Ux:typeof n=="function"?n:Gd(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function Yx(){var e=this.parentNode;e&&e.removeChild(this)}function Qx(){return this.each(Yx)}function Xx(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Kx(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Zx(e){return this.select(e?Kx:Xx)}function Jx(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ew(e){return function(n){e.call(this,n,this.__data__)}}function tw(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function iw(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,u;r<s;++r)u=n[r],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):n[++o]=u;++o?n.length=o:delete this.__on}}}function nw(e,n,r){return function(){var o=this.__on,s,u=ew(n);if(o){for(var l=0,c=o.length;l<c;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=u,s.options=r),s.value=n;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:n,listener:u,options:r},o?o.push(s):this.__on=[s]}}function rw(e,n,r){var o=tw(e+""),s,u=o.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var p=0,m=c.length,g;p<m;++p)for(s=0,g=c[p];s<u;++s)if((l=o[s]).type===g.type&&l.name===g.name)return g.value}return}for(c=n?nw:iw,s=0;s<u;++s)this.each(c(o[s],n,r));return this}function Q0(e,n,r){var o=H0(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function ow(e,n){return function(){return Q0(this,e,n)}}function aw(e,n){return function(){return Q0(this,e,n.apply(this,arguments))}}function sw(e,n){return this.each((typeof n=="function"?aw:ow)(e,n))}function*lw(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length,l;s<u;++s)(l=o[s])&&(yield l)}var X0=[null];function Bi(e,n){this._groups=e,this._parents=n}function ss(){return new Bi([[document.documentElement]],X0)}function uw(){return this}Bi.prototype=ss.prototype={constructor:Bi,select:j1,selectAll:O1,selectChild:$1,selectChildren:G1,filter:Y1,data:ex,enter:Q1,exit:ix,join:nx,merge:rx,selection:uw,order:ox,sort:ax,call:lx,nodes:ux,node:cx,size:dx,empty:px,each:_x,attr:wx,style:qx,property:Nx,classed:Tx,text:Fx,html:Bx,raise:zx,lower:Hx,append:Wx,insert:Gx,remove:Qx,clone:Zx,datum:Jx,on:rw,dispatch:sw,[Symbol.iterator]:lw};function Oi(e){return typeof e=="string"?new Bi([[document.querySelector(e)]],[document.documentElement]):new Bi([[e]],X0)}function cw(e){let n;for(;n=e.sourceEvent;)e=n;return e}function hn(e,n){if(e=cw(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const dw={passive:!1},Ya={capture:!0,passive:!1};function Gc(e){e.stopImmediatePropagation()}function Go(e){e.preventDefault(),e.stopImmediatePropagation()}function K0(e){var n=e.document.documentElement,r=Oi(e).on("dragstart.drag",Go,Ya);"onselectstart"in n?r.on("selectstart.drag",Go,Ya):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Z0(e,n){var r=e.document.documentElement,o=Oi(e).on("dragstart.drag",null);n&&(o.on("click.drag",Go,Ya),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ml=e=>()=>e;function bd(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:u,x:l,y:c,dx:p,dy:m,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:g}})}bd.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pw(e){return!e.ctrlKey&&!e.button}function _w(){return this.parentNode}function mw(e,n){return n??{x:e.x,y:e.y}}function fw(){return navigator.maxTouchPoints||"ontouchstart"in this}function J0(){var e=pw,n=_w,r=mw,o=fw,s={},u=ru("start","drag","end"),l=0,c,p,m,g,_=0;function h(C){C.on("mousedown.drag",x).filter(o).on("touchstart.drag",k).on("touchmove.drag",v,dw).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(C,P){if(!(g||!e.call(this,C,P))){var I=q(this,n.call(this,C,P),C,P,"mouse");I&&(Oi(C.view).on("mousemove.drag",b,Ya).on("mouseup.drag",M,Ya),K0(C.view),Gc(C),m=!1,c=C.clientX,p=C.clientY,I("start",C))}}function b(C){if(Go(C),!m){var P=C.clientX-c,I=C.clientY-p;m=P*P+I*I>_}s.mouse("drag",C)}function M(C){Oi(C.view).on("mousemove.drag mouseup.drag",null),Z0(C.view,m),Go(C),s.mouse("end",C)}function k(C,P){if(e.call(this,C,P)){var I=C.changedTouches,R=n.call(this,C,P),V=I.length,A,ee;for(A=0;A<V;++A)(ee=q(this,R,C,P,I[A].identifier,I[A]))&&(Gc(C),ee("start",C,I[A]))}}function v(C){var P=C.changedTouches,I=P.length,R,V;for(R=0;R<I;++R)(V=s[P[R].identifier])&&(Go(C),V("drag",C,P[R]))}function S(C){var P=C.changedTouches,I=P.length,R,V;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),R=0;R<I;++R)(V=s[P[R].identifier])&&(Gc(C),V("end",C,P[R]))}function q(C,P,I,R,V,A){var ee=u.copy(),W=hn(A||I,P),H,te,T;if((T=r.call(C,new bd("beforestart",{sourceEvent:I,target:h,identifier:V,active:l,x:W[0],y:W[1],dx:0,dy:0,dispatch:ee}),R))!=null)return H=T.x-W[0]||0,te=T.y-W[1]||0,function Z(U,J,O){var B=W,Q;switch(U){case"start":s[V]=Z,Q=l++;break;case"end":delete s[V],--l;case"drag":W=hn(O||J,P),Q=l;break}ee.call(U,C,new bd(U,{sourceEvent:J,subject:T,target:h,identifier:V,active:Q,x:W[0]+H,y:W[1]+te,dx:W[0]-B[0],dy:W[1]-B[1],dispatch:ee}),R)}}return h.filter=function(C){return arguments.length?(e=typeof C=="function"?C:ml(!!C),h):e},h.container=function(C){return arguments.length?(n=typeof C=="function"?C:ml(C),h):n},h.subject=function(C){return arguments.length?(r=typeof C=="function"?C:ml(C),h):r},h.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:ml(!!C),h):o},h.on=function(){var C=u.on.apply(u,arguments);return C===u?h:C},h.clickDistance=function(C){return arguments.length?(_=(C=+C)*C,h):Math.sqrt(_)},h}function Qd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function eh(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ls(){}var Qa=.7,Al=1/Qa,Yo="\\s*([+-]?\\d+)\\s*",Xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hw=/^#([0-9a-f]{3,8})$/,yw=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),gw=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),xw=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Xa}\\)$`),ww=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${Xa}\\)$`),vw=new RegExp(`^hsl\\(${Xa},${Fn},${Fn}\\)$`),bw=new RegExp(`^hsla\\(${Xa},${Fn},${Fn},${Xa}\\)$`),zm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qd(ls,po,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$m,formatHex:$m,formatHex8:kw,formatHsl:qw,formatRgb:Hm,toString:Hm});function $m(){return this.rgb().formatHex()}function kw(){return this.rgb().formatHex8()}function qw(){return th(this).formatHsl()}function Hm(){return this.rgb().formatRgb()}function po(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=hw.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Wm(n):r===3?new Ni(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?fl(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?fl(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=yw.exec(e))?new Ni(n[1],n[2],n[3],1):(n=gw.exec(e))?new Ni(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=xw.exec(e))?fl(n[1],n[2],n[3],n[4]):(n=ww.exec(e))?fl(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vw.exec(e))?Ym(n[1],n[2]/100,n[3]/100,1):(n=bw.exec(e))?Ym(n[1],n[2]/100,n[3]/100,n[4]):zm.hasOwnProperty(e)?Wm(zm[e]):e==="transparent"?new Ni(NaN,NaN,NaN,0):null}function Wm(e){return new Ni(e>>16&255,e>>8&255,e&255,1)}function fl(e,n,r,o){return o<=0&&(e=n=r=NaN),new Ni(e,n,r,o)}function Mw(e){return e instanceof ls||(e=po(e)),e?(e=e.rgb(),new Ni(e.r,e.g,e.b,e.opacity)):new Ni}function kd(e,n,r,o){return arguments.length===1?Mw(e):new Ni(e,n,r,o??1)}function Ni(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}Qd(Ni,kd,eh(ls,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new Ni(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qa:Math.pow(Qa,e),new Ni(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ni(uo(this.r),uo(this.g),uo(this.b),zl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Um,formatHex:Um,formatHex8:Cw,formatRgb:Gm,toString:Gm}));function Um(){return`#${lo(this.r)}${lo(this.g)}${lo(this.b)}`}function Cw(){return`#${lo(this.r)}${lo(this.g)}${lo(this.b)}${lo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gm(){const e=zl(this.opacity);return`${e===1?"rgb(":"rgba("}${uo(this.r)}, ${uo(this.g)}, ${uo(this.b)}${e===1?")":`, ${e})`}`}function zl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lo(e){return e=uo(e),(e<16?"0":"")+e.toString(16)}function Ym(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,r,o)}function th(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof ls||(e=po(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),u=Math.max(n,r,o),l=NaN,c=u-s,p=(u+s)/2;return c?(n===u?l=(r-o)/c+(r<o)*6:r===u?l=(o-n)/c+2:l=(n-r)/c+4,c/=p<.5?u+s:2-u-s,l*=60):c=p>0&&p<1?0:l,new yn(l,c,p,e.opacity)}function Sw(e,n,r,o){return arguments.length===1?th(e):new yn(e,n,r,o??1)}function yn(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}Qd(yn,Sw,eh(ls,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qa:Math.pow(Qa,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Ni(Yc(e>=240?e-240:e+120,s,o),Yc(e,s,o),Yc(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new yn(Qm(this.h),hl(this.s),hl(this.l),zl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zl(this.opacity);return`${e===1?"hsl(":"hsla("}${Qm(this.h)}, ${hl(this.s)*100}%, ${hl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qm(e){return e=(e||0)%360,e<0?e+360:e}function hl(e){return Math.max(0,Math.min(1,e||0))}function Yc(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Xd=e=>()=>e;function Nw(e,n){return function(r){return e+r*n}}function Ew(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function Iw(e){return(e=+e)==1?ih:function(n,r){return r-n?Ew(n,r,e):Xd(isNaN(n)?r:n)}}function ih(e,n){var r=n-e;return r?Nw(e,r):Xd(isNaN(e)?n:e)}const $l=(function e(n){var r=Iw(n);function o(s,u){var l=r((s=kd(s)).r,(u=kd(u)).r),c=r(s.g,u.g),p=r(s.b,u.b),m=ih(s.opacity,u.opacity);return function(g){return s.r=l(g),s.g=c(g),s.b=p(g),s.opacity=m(g),s+""}}return o.gamma=e,o})(1);function Pw(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,o=n.slice(),s;return function(u){for(s=0;s<r;++s)o[s]=e[s]*(1-u)+n[s]*u;return o}}function Tw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rw(e,n){var r=n?n.length:0,o=e?Math.min(r,e.length):0,s=new Array(o),u=new Array(r),l;for(l=0;l<o;++l)s[l]=$a(e[l],n[l]);for(;l<r;++l)u[l]=n[l];return function(c){for(l=0;l<o;++l)u[l]=s[l](c);return u}}function Vw(e,n){var r=new Date;return e=+e,n=+n,function(o){return r.setTime(e*(1-o)+n*o),r}}function jn(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function jw(e,n){var r={},o={},s;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(s in n)s in e?r[s]=$a(e[s],n[s]):o[s]=n[s];return function(u){for(s in r)o[s]=r[s](u);return o}}var qd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qc=new RegExp(qd.source,"g");function Fw(e){return function(){return e}}function Dw(e){return function(n){return e(n)+""}}function nh(e,n){var r=qd.lastIndex=Qc.lastIndex=0,o,s,u,l=-1,c=[],p=[];for(e=e+"",n=n+"";(o=qd.exec(e))&&(s=Qc.exec(n));)(u=s.index)>r&&(u=n.slice(r,u),c[l]?c[l]+=u:c[++l]=u),(o=o[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,p.push({i:l,x:jn(o,s)})),r=Qc.lastIndex;return r<n.length&&(u=n.slice(r),c[l]?c[l]+=u:c[++l]=u),c.length<2?p[0]?Dw(p[0].x):Fw(n):(n=p.length,function(m){for(var g=0,_;g<n;++g)c[(_=p[g]).i]=_.x(m);return c.join("")})}function $a(e,n){var r=typeof n,o;return n==null||r==="boolean"?Xd(n):(r==="number"?jn:r==="string"?(o=po(n))?(n=o,$l):nh:n instanceof po?$l:n instanceof Date?Vw:Tw(n)?Pw:Array.isArray(n)?Rw:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?jw:jn)(e,n)}var Xm=180/Math.PI,Md={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rh(e,n,r,o,s,u){var l,c,p;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(p=e*r+n*o)&&(r-=e*p,o-=n*p),(c=Math.sqrt(r*r+o*o))&&(r/=c,o/=c,p/=c),e*o<n*r&&(e=-e,n=-n,p=-p,l=-l),{translateX:s,translateY:u,rotate:Math.atan2(n,e)*Xm,skewX:Math.atan(p)*Xm,scaleX:l,scaleY:c}}var yl;function Lw(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Md:rh(n.a,n.b,n.c,n.d,n.e,n.f)}function Ow(e){return e==null||(yl||(yl=document.createElementNS("http://www.w3.org/2000/svg","g")),yl.setAttribute("transform",e),!(e=yl.transform.baseVal.consolidate()))?Md:(e=e.matrix,rh(e.a,e.b,e.c,e.d,e.e,e.f))}function oh(e,n,r,o){function s(m){return m.length?m.pop()+" ":""}function u(m,g,_,h,x,b){if(m!==_||g!==h){var M=x.push("translate(",null,n,null,r);b.push({i:M-4,x:jn(m,_)},{i:M-2,x:jn(g,h)})}else(_||h)&&x.push("translate("+_+n+h+r)}function l(m,g,_,h){m!==g?(m-g>180?g+=360:g-m>180&&(m+=360),h.push({i:_.push(s(_)+"rotate(",null,o)-2,x:jn(m,g)})):g&&_.push(s(_)+"rotate("+g+o)}function c(m,g,_,h){m!==g?h.push({i:_.push(s(_)+"skewX(",null,o)-2,x:jn(m,g)}):g&&_.push(s(_)+"skewX("+g+o)}function p(m,g,_,h,x,b){if(m!==_||g!==h){var M=x.push(s(x)+"scale(",null,",",null,")");b.push({i:M-4,x:jn(m,_)},{i:M-2,x:jn(g,h)})}else(_!==1||h!==1)&&x.push(s(x)+"scale("+_+","+h+")")}return function(m,g){var _=[],h=[];return m=e(m),g=e(g),u(m.translateX,m.translateY,g.translateX,g.translateY,_,h),l(m.rotate,g.rotate,_,h),c(m.skewX,g.skewX,_,h),p(m.scaleX,m.scaleY,g.scaleX,g.scaleY,_,h),m=g=null,function(x){for(var b=-1,M=h.length,k;++b<M;)_[(k=h[b]).i]=k.x(x);return _.join("")}}}var Bw=oh(Lw,"px, ","px)","deg)"),Aw=oh(Ow,", ",")",")"),zw=1e-12;function Km(e){return((e=Math.exp(e))+1/e)/2}function $w(e){return((e=Math.exp(e))-1/e)/2}function Hw(e){return((e=Math.exp(2*e))-1)/(e+1)}const Pl=(function e(n,r,o){function s(u,l){var c=u[0],p=u[1],m=u[2],g=l[0],_=l[1],h=l[2],x=g-c,b=_-p,M=x*x+b*b,k,v;if(M<zw)v=Math.log(h/m)/n,k=function(R){return[c+R*x,p+R*b,m*Math.exp(n*R*v)]};else{var S=Math.sqrt(M),q=(h*h-m*m+o*M)/(2*m*r*S),C=(h*h-m*m-o*M)/(2*h*r*S),P=Math.log(Math.sqrt(q*q+1)-q),I=Math.log(Math.sqrt(C*C+1)-C);v=(I-P)/n,k=function(R){var V=R*v,A=Km(P),ee=m/(r*S)*(A*Hw(n*V+P)-$w(P));return[c+ee*x,p+ee*b,m*A/Km(n*V+P)]}}return k.duration=v*1e3*n/Math.SQRT2,k}return s.rho=function(u){var l=Math.max(.001,+u),c=l*l,p=c*c;return e(l,c,p)},s})(Math.SQRT2,2,4);var Ko=0,Ba=0,Da=0,ah=1e3,Hl,Aa,Wl=0,_o=0,au=0,Ka=typeof performance=="object"&&performance.now?performance:Date,sh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kd(){return _o||(sh(Ww),_o=Ka.now()+au)}function Ww(){_o=0}function Ul(){this._call=this._time=this._next=null}Ul.prototype=lh.prototype={constructor:Ul,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Kd():+r)+(n==null?0:+n),!this._next&&Aa!==this&&(Aa?Aa._next=this:Hl=this,Aa=this),this._call=e,this._time=r,Cd()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cd())}};function lh(e,n,r){var o=new Ul;return o.restart(e,n,r),o}function Uw(){Kd(),++Ko;for(var e=Hl,n;e;)(n=_o-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ko}function Zm(){_o=(Wl=Ka.now())+au,Ko=Ba=0;try{Uw()}finally{Ko=0,Yw(),_o=0}}function Gw(){var e=Ka.now(),n=e-Wl;n>ah&&(au-=n,Wl=e)}function Yw(){for(var e,n=Hl,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Hl=r);Aa=e,Cd(o)}function Cd(e){if(!Ko){Ba&&(Ba=clearTimeout(Ba));var n=e-_o;n>24?(e<1/0&&(Ba=setTimeout(Zm,e-Ka.now()-au)),Da&&(Da=clearInterval(Da))):(Da||(Wl=Ka.now(),Da=setInterval(Gw,ah)),Ko=1,sh(Zm))}}function Jm(e,n,r){var o=new Ul;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var Qw=ru("start","end","cancel","interrupt"),Xw=[],uh=0,ef=1,Sd=2,Tl=3,tf=4,Nd=5,Rl=6;function su(e,n,r,o,s,u){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;Kw(e,r,{name:n,index:o,group:s,on:Qw,tween:Xw,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:uh})}function Zd(e,n){var r=bn(e,n);if(r.state>uh)throw new Error("too late; already scheduled");return r}function Bn(e,n){var r=bn(e,n);if(r.state>Tl)throw new Error("too late; already running");return r}function bn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function Kw(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=lh(u,0,r.time);function u(m){r.state=ef,r.timer.restart(l,r.delay,r.time),r.delay<=m&&l(m-r.delay)}function l(m){var g,_,h,x;if(r.state!==ef)return p();for(g in o)if(x=o[g],x.name===r.name){if(x.state===Tl)return Jm(l);x.state===tf?(x.state=Rl,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[g]):+g<n&&(x.state=Rl,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[g])}if(Jm(function(){r.state===Tl&&(r.state=tf,r.timer.restart(c,r.delay,r.time),c(m))}),r.state=Sd,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Sd){for(r.state=Tl,s=new Array(h=r.tween.length),g=0,_=-1;g<h;++g)(x=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(s[++_]=x);s.length=_+1}}function c(m){for(var g=m<r.duration?r.ease.call(null,m/r.duration):(r.timer.restart(p),r.state=Nd,1),_=-1,h=s.length;++_<h;)s[_].call(e,g);r.state===Nd&&(r.on.call("end",e,e.__data__,r.index,r.group),p())}function p(){r.state=Rl,r.timer.stop(),delete o[n];for(var m in o)return;delete e.__transition}}function Vl(e,n){var r=e.__transition,o,s,u=!0,l;if(r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){u=!1;continue}s=o.state>Sd&&o.state<Nd,o.state=Rl,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}u&&delete e.__transition}}function Zw(e){return this.each(function(){Vl(this,e)})}function Jw(e,n){var r,o;return function(){var s=Bn(this,e),u=s.tween;if(u!==r){o=r=u;for(var l=0,c=o.length;l<c;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function ev(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var u=Bn(this,e),l=u.tween;if(l!==o){s=(o=l).slice();for(var c={name:n,value:r},p=0,m=s.length;p<m;++p)if(s[p].name===n){s[p]=c;break}p===m&&s.push(c)}u.tween=s}}function tv(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=bn(this.node(),r).tween,s=0,u=o.length,l;s<u;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?Jw:ev)(r,e,n))}function Jd(e,n,r){var o=e._id;return e.each(function(){var s=Bn(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return bn(s,o).value[n]}}function ch(e,n){var r;return(typeof n=="number"?jn:n instanceof po?$l:(r=po(n))?(n=r,$l):nh)(e,n)}function iv(e){return function(){this.removeAttribute(e)}}function nv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rv(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttribute(e);return l===s?null:l===o?u:u=n(o=l,r)}}function ov(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?u:u=n(o=l,r)}}function av(e,n,r){var o,s,u;return function(){var l,c=r(this),p;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),p=c+"",l===p?null:l===o&&p===s?u:(s=p,u=n(o=l,c)))}}function sv(e,n,r){var o,s,u;return function(){var l,c=r(this),p;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),p=c+"",l===p?null:l===o&&p===s?u:(s=p,u=n(o=l,c)))}}function lv(e,n){var r=ou(e),o=r==="transform"?Aw:ch;return this.attrTween(e,typeof n=="function"?(r.local?sv:av)(r,o,Jd(this,"attr."+e,n)):n==null?(r.local?nv:iv)(r):(r.local?ov:rv)(r,o,n))}function uv(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function cv(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function dv(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&cv(e,u)),r}return s._value=n,s}function pv(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&uv(e,u)),r}return s._value=n,s}function _v(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=ou(e);return this.tween(r,(o.local?dv:pv)(o,n))}function mv(e,n){return function(){Zd(this,e).delay=+n.apply(this,arguments)}}function fv(e,n){return n=+n,function(){Zd(this,e).delay=n}}function hv(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?mv:fv)(n,e)):bn(this.node(),n).delay}function yv(e,n){return function(){Bn(this,e).duration=+n.apply(this,arguments)}}function gv(e,n){return n=+n,function(){Bn(this,e).duration=n}}function xv(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?yv:gv)(n,e)):bn(this.node(),n).duration}function wv(e,n){if(typeof n!="function")throw new Error;return function(){Bn(this,e).ease=n}}function vv(e){var n=this._id;return arguments.length?this.each(wv(n,e)):bn(this.node(),n).ease}function bv(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Bn(this,e).ease=r}}function kv(e){if(typeof e!="function")throw new Error;return this.each(bv(this._id,e))}function qv(e){typeof e!="function"&&(e=A0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],p,m=0;m<l;++m)(p=u[m])&&e.call(p,p.__data__,m,u)&&c.push(p);return new ur(o,this._parents,this._name,this._id)}function Mv(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,u=Math.min(o,s),l=new Array(o),c=0;c<u;++c)for(var p=n[c],m=r[c],g=p.length,_=l[c]=new Array(g),h,x=0;x<g;++x)(h=p[x]||m[x])&&(_[x]=h);for(;c<o;++c)l[c]=n[c];return new ur(l,this._parents,this._name,this._id)}function Cv(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function Sv(e,n,r){var o,s,u=Cv(n)?Zd:Bn;return function(){var l=u(this,e),c=l.on;c!==o&&(s=(o=c).copy()).on(n,r),l.on=s}}function Nv(e,n){var r=this._id;return arguments.length<2?bn(this.node(),r).on.on(e):this.each(Sv(r,e,n))}function Ev(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function Iv(){return this.on("end.remove",Ev(this._id))}function Pv(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Gd(e));for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l)for(var c=o[l],p=c.length,m=u[l]=new Array(p),g,_,h=0;h<p;++h)(g=c[h])&&(_=e.call(g,g.__data__,h,c))&&("__data__"in g&&(_.__data__=g.__data__),m[h]=_,su(m[h],n,r,h,m,bn(g,r)));return new ur(u,this._parents,n,r)}function Tv(e){var n=this._name,r=this._id;typeof e!="function"&&(e=B0(e));for(var o=this._groups,s=o.length,u=[],l=[],c=0;c<s;++c)for(var p=o[c],m=p.length,g,_=0;_<m;++_)if(g=p[_]){for(var h=e.call(g,g.__data__,_,p),x,b=bn(g,r),M=0,k=h.length;M<k;++M)(x=h[M])&&su(x,n,r,M,h,b);u.push(h),l.push(g)}return new ur(u,l,n,r)}var Rv=ss.prototype.constructor;function Vv(){return new Rv(this._groups,this._parents)}function jv(e,n){var r,o,s;return function(){var u=Xo(this,e),l=(this.style.removeProperty(e),Xo(this,e));return u===l?null:u===r&&l===o?s:s=n(r=u,o=l)}}function dh(e){return function(){this.style.removeProperty(e)}}function Fv(e,n,r){var o,s=r+"",u;return function(){var l=Xo(this,e);return l===s?null:l===o?u:u=n(o=l,r)}}function Dv(e,n,r){var o,s,u;return function(){var l=Xo(this,e),c=r(this),p=c+"";return c==null&&(p=c=(this.style.removeProperty(e),Xo(this,e))),l===p?null:l===o&&p===s?u:(s=p,u=n(o=l,c))}}function Lv(e,n){var r,o,s,u="style."+n,l="end."+u,c;return function(){var p=Bn(this,e),m=p.on,g=p.value[u]==null?c||(c=dh(n)):void 0;(m!==r||s!==g)&&(o=(r=m).copy()).on(l,s=g),p.on=o}}function Ov(e,n,r){var o=(e+="")=="transform"?Bw:ch;return n==null?this.styleTween(e,jv(e,o)).on("end.style."+e,dh(e)):typeof n=="function"?this.styleTween(e,Dv(e,o,Jd(this,"style."+e,n))).each(Lv(this._id,e)):this.styleTween(e,Fv(e,o,n),r).on("end.style."+e,null)}function Bv(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function Av(e,n,r){var o,s;function u(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&Bv(e,l,r)),o}return u._value=n,u}function zv(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,Av(e,n,r??""))}function $v(e){return function(){this.textContent=e}}function Hv(e){return function(){var n=e(this);this.textContent=n??""}}function Wv(e){return this.tween("text",typeof e=="function"?Hv(Jd(this,"text",e)):$v(e==null?"":e+""))}function Uv(e){return function(n){this.textContent=e.call(this,n)}}function Gv(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Uv(s)),n}return o._value=e,o}function Yv(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Gv(e))}function Qv(){for(var e=this._name,n=this._id,r=ph(),o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,p,m=0;m<c;++m)if(p=l[m]){var g=bn(p,n);su(p,e,r,m,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new ur(o,this._parents,e,r)}function Xv(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(u,l){var c={value:l},p={value:function(){--s===0&&u()}};r.each(function(){var m=Bn(this,o),g=m.on;g!==e&&(n=(e=g).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(p)),m.on=n}),s===0&&u()})}var Kv=0;function ur(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function ph(){return++Kv}var tr=ss.prototype;ur.prototype={constructor:ur,select:Pv,selectAll:Tv,selectChild:tr.selectChild,selectChildren:tr.selectChildren,filter:qv,merge:Mv,selection:Vv,transition:Qv,call:tr.call,nodes:tr.nodes,node:tr.node,size:tr.size,empty:tr.empty,each:tr.each,on:Nv,attr:lv,attrTween:_v,style:Ov,styleTween:zv,text:Wv,textTween:Yv,remove:Iv,tween:tv,delay:hv,duration:xv,ease:vv,easeVarying:kv,end:Xv,[Symbol.iterator]:tr[Symbol.iterator]};function Zv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jv={time:null,delay:0,duration:250,ease:Zv};function eb(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function tb(e){var n,r;e instanceof ur?(n=e._id,e=e._name):(n=ph(),(r=Jv).time=Kd(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,p,m=0;m<c;++m)(p=l[m])&&su(p,e,n,m,l,r||eb(p,n));return new ur(o,this._parents,e,n)}ss.prototype.interrupt=Zw;ss.prototype.transition=tb;const gl=e=>()=>e;function ib(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function ar(e,n,r){this.k=e,this.x=n,this.y=r}ar.prototype={constructor:ar,scale:function(e){return e===1?this:new ar(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ar(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lu=new ar(1,0,0);_h.prototype=ar.prototype;function _h(e){for(;!e.__zoom;)if(!(e=e.parentNode))return lu;return e.__zoom}function Xc(e){e.stopImmediatePropagation()}function La(e){e.preventDefault(),e.stopImmediatePropagation()}function nb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function rb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function nf(){return this.__zoom||lu}function ob(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ab(){return navigator.maxTouchPoints||"ontouchstart"in this}function sb(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],u=e.invertY(n[0][1])-r[0][1],l=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l))}function mh(){var e=nb,n=rb,r=sb,o=ob,s=ab,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,p=Pl,m=ru("start","zoom","end"),g,_,h,x=500,b=150,M=0,k=10;function v(T){T.property("__zoom",nf).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",ee).filter(s).on("touchstart.zoom",W).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(T,Z,U,J){var O=T.selection?T.selection():T;O.property("__zoom",nf),T!==O?P(T,Z,U,J):O.interrupt().each(function(){I(this,arguments).event(J).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},v.scaleBy=function(T,Z,U,J){v.scaleTo(T,function(){var O=this.__zoom.k,B=typeof Z=="function"?Z.apply(this,arguments):Z;return O*B},U,J)},v.scaleTo=function(T,Z,U,J){v.transform(T,function(){var O=n.apply(this,arguments),B=this.__zoom,Q=U==null?C(O):typeof U=="function"?U.apply(this,arguments):U,F=B.invert(Q),G=typeof Z=="function"?Z.apply(this,arguments):Z;return r(q(S(B,G),Q,F),O,l)},U,J)},v.translateBy=function(T,Z,U,J){v.transform(T,function(){return r(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof U=="function"?U.apply(this,arguments):U),n.apply(this,arguments),l)},null,J)},v.translateTo=function(T,Z,U,J,O){v.transform(T,function(){var B=n.apply(this,arguments),Q=this.__zoom,F=J==null?C(B):typeof J=="function"?J.apply(this,arguments):J;return r(lu.translate(F[0],F[1]).scale(Q.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof U=="function"?-U.apply(this,arguments):-U),B,l)},J,O)};function S(T,Z){return Z=Math.max(u[0],Math.min(u[1],Z)),Z===T.k?T:new ar(Z,T.x,T.y)}function q(T,Z,U){var J=Z[0]-U[0]*T.k,O=Z[1]-U[1]*T.k;return J===T.x&&O===T.y?T:new ar(T.k,J,O)}function C(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function P(T,Z,U,J){T.on("start.zoom",function(){I(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(J).end()}).tween("zoom",function(){var O=this,B=arguments,Q=I(O,B).event(J),F=n.apply(O,B),G=U==null?C(F):typeof U=="function"?U.apply(O,B):U,ce=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),le=O.__zoom,me=typeof Z=="function"?Z.apply(O,B):Z,ge=p(le.invert(G).concat(ce/le.k),me.invert(G).concat(ce/me.k));return function(xe){if(xe===1)xe=me;else{var se=ge(xe),ve=ce/se[2];xe=new ar(ve,G[0]-se[0]*ve,G[1]-se[1]*ve)}Q.zoom(null,xe)}})}function I(T,Z,U){return!U&&T.__zooming||new R(T,Z)}function R(T,Z){this.that=T,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=n.apply(T,Z),this.taps=0}R.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,Z){return this.mouse&&T!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var Z=Oi(this.that).datum();m.call(T,this.that,new ib(T,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:m}),Z)}};function V(T,...Z){if(!e.apply(this,arguments))return;var U=I(this,Z).event(T),J=this.__zoom,O=Math.max(u[0],Math.min(u[1],J.k*Math.pow(2,o.apply(this,arguments)))),B=hn(T);if(U.wheel)(U.mouse[0][0]!==B[0]||U.mouse[0][1]!==B[1])&&(U.mouse[1]=J.invert(U.mouse[0]=B)),clearTimeout(U.wheel);else{if(J.k===O)return;U.mouse=[B,J.invert(B)],Vl(this),U.start()}La(T),U.wheel=setTimeout(Q,b),U.zoom("mouse",r(q(S(J,O),U.mouse[0],U.mouse[1]),U.extent,l));function Q(){U.wheel=null,U.end()}}function A(T,...Z){if(h||!e.apply(this,arguments))return;var U=T.currentTarget,J=I(this,Z,!0).event(T),O=Oi(T.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",ce,!0),B=hn(T,U),Q=T.clientX,F=T.clientY;K0(T.view),Xc(T),J.mouse=[B,this.__zoom.invert(B)],Vl(this),J.start();function G(le){if(La(le),!J.moved){var me=le.clientX-Q,ge=le.clientY-F;J.moved=me*me+ge*ge>M}J.event(le).zoom("mouse",r(q(J.that.__zoom,J.mouse[0]=hn(le,U),J.mouse[1]),J.extent,l))}function ce(le){O.on("mousemove.zoom mouseup.zoom",null),Z0(le.view,J.moved),La(le),J.event(le).end()}}function ee(T,...Z){if(e.apply(this,arguments)){var U=this.__zoom,J=hn(T.changedTouches?T.changedTouches[0]:T,this),O=U.invert(J),B=U.k*(T.shiftKey?.5:2),Q=r(q(S(U,B),J,O),n.apply(this,Z),l);La(T),c>0?Oi(this).transition().duration(c).call(P,Q,J,T):Oi(this).call(v.transform,Q,J,T)}}function W(T,...Z){if(e.apply(this,arguments)){var U=T.touches,J=U.length,O=I(this,Z,T.changedTouches.length===J).event(T),B,Q,F,G;for(Xc(T),Q=0;Q<J;++Q)F=U[Q],G=hn(F,this),G=[G,this.__zoom.invert(G),F.identifier],O.touch0?!O.touch1&&O.touch0[2]!==G[2]&&(O.touch1=G,O.taps=0):(O.touch0=G,B=!0,O.taps=1+!!g);g&&(g=clearTimeout(g)),B&&(O.taps<2&&(_=G[0],g=setTimeout(function(){g=null},x)),Vl(this),O.start())}}function H(T,...Z){if(this.__zooming){var U=I(this,Z).event(T),J=T.changedTouches,O=J.length,B,Q,F,G;for(La(T),B=0;B<O;++B)Q=J[B],F=hn(Q,this),U.touch0&&U.touch0[2]===Q.identifier?U.touch0[0]=F:U.touch1&&U.touch1[2]===Q.identifier&&(U.touch1[0]=F);if(Q=U.that.__zoom,U.touch1){var ce=U.touch0[0],le=U.touch0[1],me=U.touch1[0],ge=U.touch1[1],xe=(xe=me[0]-ce[0])*xe+(xe=me[1]-ce[1])*xe,se=(se=ge[0]-le[0])*se+(se=ge[1]-le[1])*se;Q=S(Q,Math.sqrt(xe/se)),F=[(ce[0]+me[0])/2,(ce[1]+me[1])/2],G=[(le[0]+ge[0])/2,(le[1]+ge[1])/2]}else if(U.touch0)F=U.touch0[0],G=U.touch0[1];else return;U.zoom("touch",r(q(Q,F,G),U.extent,l))}}function te(T,...Z){if(this.__zooming){var U=I(this,Z).event(T),J=T.changedTouches,O=J.length,B,Q;for(Xc(T),h&&clearTimeout(h),h=setTimeout(function(){h=null},x),B=0;B<O;++B)Q=J[B],U.touch0&&U.touch0[2]===Q.identifier?delete U.touch0:U.touch1&&U.touch1[2]===Q.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(Q=hn(Q,this),Math.hypot(_[0]-Q[0],_[1]-Q[1])<k)){var F=Oi(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return v.wheelDelta=function(T){return arguments.length?(o=typeof T=="function"?T:gl(+T),v):o},v.filter=function(T){return arguments.length?(e=typeof T=="function"?T:gl(!!T),v):e},v.touchable=function(T){return arguments.length?(s=typeof T=="function"?T:gl(!!T),v):s},v.extent=function(T){return arguments.length?(n=typeof T=="function"?T:gl([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),v):n},v.scaleExtent=function(T){return arguments.length?(u[0]=+T[0],u[1]=+T[1],v):[u[0],u[1]]},v.translateExtent=function(T){return arguments.length?(l[0][0]=+T[0][0],l[1][0]=+T[1][0],l[0][1]=+T[0][1],l[1][1]=+T[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(T){return arguments.length?(r=T,v):r},v.duration=function(T){return arguments.length?(c=+T,v):c},v.interpolate=function(T){return arguments.length?(p=T,v):p},v.on=function(){var T=m.on.apply(m,arguments);return T===m?v:T},v.clickDistance=function(T){return arguments.length?(M=(T=+T)*T,v):Math.sqrt(M)},v.tapDistance=function(T){return arguments.length?(k=+T,v):k},v}const Dn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:o}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Za=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fh=["Enter"," ","Escape"],hh={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Zo;(function(e){e.Strict="strict",e.Loose="loose"})(Zo||(Zo={}));var co;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(co||(co={}));var Ja;(function(e){e.Partial="partial",e.Full="full"})(Ja||(Ja={}));const yh={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Fr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Fr||(Fr={}));var Gl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Gl||(Gl={}));var Be;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Be||(Be={}));const rf={[Be.Left]:Be.Right,[Be.Right]:Be.Left,[Be.Top]:Be.Bottom,[Be.Bottom]:Be.Top};function gh(e){return e===null?null:e?"valid":"invalid"}const xh=e=>"id"in e&&"source"in e&&"target"in e,lb=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ep=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),us=(e,n=[0,0])=>{const{width:r,height:o}=cr(e),s=e.origin??n,u=r*s[0],l=o*s[1];return{x:e.position.x-u,y:e.position.y-l}},ub=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const u=typeof s=="string";let l=!n.nodeLookup&&!u?s:void 0;n.nodeLookup&&(l=u?n.nodeLookup.get(s):ep(s)?s:n.nodeLookup.get(s.id));const c=l?Yl(l,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return uu(o,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cu(r)},cs=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(s=>{(n.filter===void 0||n.filter(s))&&(r=uu(r,Yl(s)),o=!0)}),o?cu(r):{x:0,y:0,width:0,height:0}},tp=(e,n,[r,o,s]=[0,0,1],u=!1,l=!1)=>{const c={...ps(n,[r,o,s]),width:n.width/s,height:n.height/s},p=[];for(const m of e.values()){const{measured:g,selectable:_=!0,hidden:h=!1}=m;if(l&&!_||h)continue;const x=g.width??m.width??m.initialWidth??null,b=g.height??m.height??m.initialHeight??null,M=es(c,ea(m)),k=(x??0)*(b??0),v=u&&M>0;(!m.internals.handleBounds||v||M>=k||m.dragging)&&p.push(m)}return p},cb=(e,n)=>{const r=new Set;return e.forEach(o=>{r.add(o.id)}),n.filter(o=>r.has(o.source)||r.has(o.target))};function db(e,n){const r=new Map,o=n!=null&&n.nodes?new Set(n.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((n==null?void 0:n.includeHiddenNodes)||!s.hidden)&&(!o||o.has(s.id))&&r.set(s.id,s)}),r}async function pb({nodes:e,width:n,height:r,panZoom:o,minZoom:s,maxZoom:u},l){if(e.size===0)return Promise.resolve(!0);const c=db(e,l),p=cs(c),m=ip(p,n,r,(l==null?void 0:l.minZoom)??s,(l==null?void 0:l.maxZoom)??u,(l==null?void 0:l.padding)??.1);return await o.setViewport(m,{duration:l==null?void 0:l.duration,ease:l==null?void 0:l.ease,interpolate:l==null?void 0:l.interpolate}),Promise.resolve(!0)}function wh({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:o=[0,0],nodeExtent:s,onError:u}){const l=r.get(e),c=l.parentId?r.get(l.parentId):void 0,{x:p,y:m}=c?c.internals.positionAbsolute:{x:0,y:0},g=l.origin??o;let _=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!c)u==null||u("005",Dn.error005());else{const x=c.measured.width,b=c.measured.height;x&&b&&(_=[[p,m],[p+x,m+b]])}else c&&ta(l.extent)&&(_=[[l.extent[0][0]+p,l.extent[0][1]+m],[l.extent[1][0]+p,l.extent[1][1]+m]]);const h=ta(_)?mo(n,_,l.measured):n;return(l.measured.width===void 0||l.measured.height===void 0)&&(u==null||u("015",Dn.error015())),{position:{x:h.x-p+(l.measured.width??0)*g[0],y:h.y-m+(l.measured.height??0)*g[1]},positionAbsolute:h}}async function _b({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:o,onBeforeDelete:s}){const u=new Set(e.map(h=>h.id)),l=[];for(const h of r){if(h.deletable===!1)continue;const x=u.has(h.id),b=!x&&h.parentId&&l.find(M=>M.id===h.parentId);(x||b)&&l.push(h)}const c=new Set(n.map(h=>h.id)),p=o.filter(h=>h.deletable!==!1),g=cb(l,p);for(const h of p)c.has(h.id)&&!g.find(b=>b.id===h.id)&&g.push(h);if(!s)return{edges:g,nodes:l};const _=await s({nodes:l,edges:g});return typeof _=="boolean"?_?{edges:g,nodes:l}:{edges:[],nodes:[]}:_}const Jo=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),mo=(e={x:0,y:0},n,r)=>({x:Jo(e.x,n[0][0],n[1][0]-((r==null?void 0:r.width)??0)),y:Jo(e.y,n[0][1],n[1][1]-((r==null?void 0:r.height)??0))});function vh(e,n,r){const{width:o,height:s}=cr(r),{x:u,y:l}=r.internals.positionAbsolute;return mo(e,[[u,l],[u+o,l+s]],n)}const of=(e,n,r)=>e<n?Jo(Math.abs(e-n),1,n)/n:e>r?-Jo(Math.abs(e-r),1,n)/n:0,bh=(e,n,r=15,o=40)=>{const s=of(e.x,o,n.width-o)*r,u=of(e.y,o,n.height-o)*r;return[s,u]},uu=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Ed=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),cu=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),ea=(e,n=[0,0])=>{var s,u;const{x:r,y:o}=ep(e)?e.internals.positionAbsolute:us(e,n);return{x:r,y:o,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((u=e.measured)==null?void 0:u.height)??e.height??e.initialHeight??0}},Yl=(e,n=[0,0])=>{var s,u;const{x:r,y:o}=ep(e)?e.internals.positionAbsolute:us(e,n);return{x:r,y:o,x2:r+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:o+(((u=e.measured)==null?void 0:u.height)??e.height??e.initialHeight??0)}},kh=(e,n)=>cu(uu(Ed(e),Ed(n))),es=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},af=e=>xn(e.width)&&xn(e.height)&&xn(e.x)&&xn(e.y),xn=e=>!isNaN(e)&&isFinite(e),mb=(e,n)=>{},ds=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),ps=({x:e,y:n},[r,o,s],u=!1,l=[1,1])=>{const c={x:(e-r)/s,y:(n-o)/s};return u?ds(c,l):c},Ql=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o});function Ao(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fb(e,n,r){if(typeof e=="string"||typeof e=="number"){const o=Ao(e,r),s=Ao(e,n);return{top:o,right:s,bottom:o,left:s,x:s*2,y:o*2}}if(typeof e=="object"){const o=Ao(e.top??e.y??0,r),s=Ao(e.bottom??e.y??0,r),u=Ao(e.left??e.x??0,n),l=Ao(e.right??e.x??0,n);return{top:o,right:l,bottom:s,left:u,x:u+l,y:o+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hb(e,n,r,o,s,u){const{x:l,y:c}=Ql(e,[n,r,o]),{x:p,y:m}=Ql({x:e.x+e.width,y:e.y+e.height},[n,r,o]),g=s-p,_=u-m;return{left:Math.floor(l),top:Math.floor(c),right:Math.floor(g),bottom:Math.floor(_)}}const ip=(e,n,r,o,s,u)=>{const l=fb(u,n,r),c=(n-l.x)/e.width,p=(r-l.y)/e.height,m=Math.min(c,p),g=Jo(m,o,s),_=e.x+e.width/2,h=e.y+e.height/2,x=n/2-_*g,b=r/2-h*g,M=hb(e,x,b,g,n,r),k={left:Math.min(M.left-l.left,0),top:Math.min(M.top-l.top,0),right:Math.min(M.right-l.right,0),bottom:Math.min(M.bottom-l.bottom,0)};return{x:x-k.left+k.right,y:b-k.top+k.bottom,zoom:g}},ts=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ta(e){return e!=null&&e!=="parent"}function cr(e){var n,r;return{width:((n=e.measured)==null?void 0:n.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}}function qh(e){var n,r;return(((n=e.measured)==null?void 0:n.width)??e.width??e.initialWidth)!==void 0&&(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight)!==void 0}function Mh(e,n={width:0,height:0},r,o,s){const u={...e},l=o.get(r);if(l){const c=l.origin||s;u.x+=l.internals.positionAbsolute.x-(n.width??0)*c[0],u.y+=l.internals.positionAbsolute.y-(n.height??0)*c[1]}return u}function sf(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function yb(){let e,n;return{promise:new Promise((o,s)=>{e=o,n=s}),resolve:e,reject:n}}function gb(e){return{...hh,...e||{}}}function Ha(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:o,containerBounds:s}){const{x:u,y:l}=wn(e),c=ps({x:u-((s==null?void 0:s.left)??0),y:l-((s==null?void 0:s.top)??0)},o),{x:p,y:m}=r?ds(c,n):c;return{xSnapped:p,ySnapped:m,...c}}const np=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ch=e=>{var n;return((n=e==null?void 0:e.getRootNode)==null?void 0:n.call(e))||(window==null?void 0:window.document)},xb=["INPUT","SELECT","TEXTAREA"];function Sh(e){var o,s;const n=((s=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:s[0])||e.target;return(n==null?void 0:n.nodeType)!==1?!1:xb.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const Nh=e=>"clientX"in e,wn=(e,n)=>{var u,l;const r=Nh(e),o=r?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,s=r?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((n==null?void 0:n.left)??0),y:s-((n==null?void 0:n.top)??0)}},lf=(e,n,r,o,s)=>{const u=n.querySelectorAll(`.${e}`);return!u||!u.length?null:Array.from(u).map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:s,position:l.getAttribute("data-handlepos"),x:(c.left-r.left)/o,y:(c.top-r.top)/o,...np(l)}})};function Eh({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c}){const p=e*.125+s*.375+l*.375+r*.125,m=n*.125+u*.375+c*.375+o*.125,g=Math.abs(p-e),_=Math.abs(m-n);return[p,m,g,_]}function xl(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function uf({pos:e,x1:n,y1:r,x2:o,y2:s,c:u}){switch(e){case Be.Left:return[n-xl(n-o,u),r];case Be.Right:return[n+xl(o-n,u),r];case Be.Top:return[n,r-xl(r-s,u)];case Be.Bottom:return[n,r+xl(s-r,u)]}}function rp({sourceX:e,sourceY:n,sourcePosition:r=Be.Bottom,targetX:o,targetY:s,targetPosition:u=Be.Top,curvature:l=.25}){const[c,p]=uf({pos:r,x1:e,y1:n,x2:o,y2:s,c:l}),[m,g]=uf({pos:u,x1:o,y1:s,x2:e,y2:n,c:l}),[_,h,x,b]=Eh({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:c,sourceControlY:p,targetControlX:m,targetControlY:g});return[`M${e},${n} C${c},${p} ${m},${g} ${o},${s}`,_,h,x,b]}function Ih({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,u=r<e?r+s:r-s,l=Math.abs(o-n)/2,c=o<n?o+l:o-l;return[u,c,s,l]}function wb({sourceNode:e,targetNode:n,selected:r=!1,zIndex:o=0,elevateOnSelect:s=!1,zIndexMode:u="basic"}){if(u==="manual")return o;const l=s&&r?o+1e3:o,c=Math.max(e.parentId||s&&e.selected?e.internals.z:0,n.parentId||s&&n.selected?n.internals.z:0);return l+c}function vb({sourceNode:e,targetNode:n,width:r,height:o,transform:s}){const u=uu(Yl(e),Yl(n));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:r/s[2],height:o/s[2]};return es(l,cu(u))>0}const bb=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`xy-edge__${e}${n||""}-${r}${o||""}`,kb=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Id=(e,n,r={})=>{if(!e.source||!e.target)return n;const o=r.getEdgeId||bb;let s;return xh(e)?s={...e}:s={...e,id:o(e)},kb(s,n)?n:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,n.concat(s))};function op({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,u,l,c]=Ih({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,u,l,c]}const cf={[Be.Left]:{x:-1,y:0},[Be.Right]:{x:1,y:0},[Be.Top]:{x:0,y:-1},[Be.Bottom]:{x:0,y:1}},qb=({source:e,sourcePosition:n=Be.Bottom,target:r})=>n===Be.Left||n===Be.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},df=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function Mb({source:e,sourcePosition:n=Be.Bottom,target:r,targetPosition:o=Be.Top,center:s,offset:u,stepPosition:l}){const c=cf[n],p=cf[o],m={x:e.x+c.x*u,y:e.y+c.y*u},g={x:r.x+p.x*u,y:r.y+p.y*u},_=qb({source:m,sourcePosition:n,target:g}),h=_.x!==0?"x":"y",x=_[h];let b=[],M,k;const v={x:0,y:0},S={x:0,y:0},[,,q,C]=Ih({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(c[h]*p[h]===-1){h==="x"?(M=s.x??m.x+(g.x-m.x)*l,k=s.y??(m.y+g.y)/2):(M=s.x??(m.x+g.x)/2,k=s.y??m.y+(g.y-m.y)*l);const I=[{x:M,y:m.y},{x:M,y:g.y}],R=[{x:m.x,y:k},{x:g.x,y:k}];c[h]===x?b=h==="x"?I:R:b=h==="x"?R:I}else{const I=[{x:m.x,y:g.y}],R=[{x:g.x,y:m.y}];if(h==="x"?b=c.x===x?R:I:b=c.y===x?I:R,n===o){const H=Math.abs(e[h]-r[h]);if(H<=u){const te=Math.min(u-1,u-H);c[h]===x?v[h]=(m[h]>e[h]?-1:1)*te:S[h]=(g[h]>r[h]?-1:1)*te}}if(n!==o){const H=h==="x"?"y":"x",te=c[h]===p[H],T=m[H]>g[H],Z=m[H]<g[H];(c[h]===1&&(!te&&T||te&&Z)||c[h]!==1&&(!te&&Z||te&&T))&&(b=h==="x"?I:R)}const V={x:m.x+v.x,y:m.y+v.y},A={x:g.x+S.x,y:g.y+S.y},ee=Math.max(Math.abs(V.x-b[0].x),Math.abs(A.x-b[0].x)),W=Math.max(Math.abs(V.y-b[0].y),Math.abs(A.y-b[0].y));ee>=W?(M=(V.x+A.x)/2,k=b[0].y):(M=b[0].x,k=(V.y+A.y)/2)}return[[e,{x:m.x+v.x,y:m.y+v.y},...b,{x:g.x+S.x,y:g.y+S.y},r],M,k,q,C]}function Cb(e,n,r,o){const s=Math.min(df(e,n)/2,df(n,r)/2,o),{x:u,y:l}=n;if(e.x===u&&u===r.x||e.y===l&&l===r.y)return`L${u} ${l}`;if(e.y===l){const m=e.x<r.x?-1:1,g=e.y<r.y?1:-1;return`L ${u+s*m},${l}Q ${u},${l} ${u},${l+s*g}`}const c=e.x<r.x?1:-1,p=e.y<r.y?-1:1;return`L ${u},${l+s*p}Q ${u},${l} ${u+s*c},${l}`}function Pd({sourceX:e,sourceY:n,sourcePosition:r=Be.Bottom,targetX:o,targetY:s,targetPosition:u=Be.Top,borderRadius:l=5,centerX:c,centerY:p,offset:m=20,stepPosition:g=.5}){const[_,h,x,b,M]=Mb({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:u,center:{x:c,y:p},offset:m,stepPosition:g});return[_.reduce((v,S,q)=>{let C="";return q>0&&q<_.length-1?C=Cb(_[q-1],S,_[q+1],l):C=`${q===0?"M":"L"}${S.x} ${S.y}`,v+=C,v},""),h,x,b,M]}function pf(e){var n;return e&&!!(e.internals.handleBounds||(n=e.handles)!=null&&n.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Sb(e){var _;const{sourceNode:n,targetNode:r}=e;if(!pf(n)||!pf(r))return null;const o=n.internals.handleBounds||_f(n.handles),s=r.internals.handleBounds||_f(r.handles),u=mf((o==null?void 0:o.source)??[],e.sourceHandle),l=mf(e.connectionMode===Zo.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!u||!l)return(_=e.onError)==null||_.call(e,"008",Dn.error008(u?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(u==null?void 0:u.position)||Be.Bottom,p=(l==null?void 0:l.position)||Be.Top,m=fo(n,u,c),g=fo(r,l,p);return{sourceX:m.x,sourceY:m.y,targetX:g.x,targetY:g.y,sourcePosition:c,targetPosition:p}}function _f(e){if(!e)return null;const n=[],r=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?n.push(o):o.type==="target"&&r.push(o);return{source:n,target:r}}function fo(e,n,r=Be.Left,o=!1){const s=((n==null?void 0:n.x)??0)+e.internals.positionAbsolute.x,u=((n==null?void 0:n.y)??0)+e.internals.positionAbsolute.y,{width:l,height:c}=n??cr(e);if(o)return{x:s+l/2,y:u+c/2};switch((n==null?void 0:n.position)??r){case Be.Top:return{x:s+l/2,y:u};case Be.Right:return{x:s+l,y:u+c/2};case Be.Bottom:return{x:s+l/2,y:u+c};case Be.Left:return{x:s,y:u+c/2}}}function mf(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function Td(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function Nb(e,{id:n,defaultColor:r,defaultMarkerStart:o,defaultMarkerEnd:s}){const u=new Set;return e.reduce((l,c)=>([c.markerStart||o,c.markerEnd||s].forEach(p=>{if(p&&typeof p=="object"){const m=Td(p,n);u.has(m)||(l.push({id:m,color:p.color||r,...p}),u.add(m))}}),l),[]).sort((l,c)=>l.id.localeCompare(c.id))}const Ph=1e3,Eb=10,ap={nodeOrigin:[0,0],nodeExtent:Za,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Ib={...ap,checkEquality:!0};function sp(e,n){const r={...e};for(const o in n)n[o]!==void 0&&(r[o]=n[o]);return r}function Pb(e,n,r){const o=sp(ap,r);for(const s of e.values())if(s.parentId)up(s,e,n,o);else{const u=us(s,o.nodeOrigin),l=ta(s.extent)?s.extent:o.nodeExtent,c=mo(u,l,cr(s));s.internals.positionAbsolute=c}}function Tb(e,n){if(!e.handles)return e.measured?n==null?void 0:n.internals.handleBounds:void 0;const r=[],o=[];for(const s of e.handles){const u={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?r.push(u):s.type==="target"&&o.push(u)}return{source:r,target:o}}function lp(e){return e==="manual"}function Rd(e,n,r,o={}){var m,g;const s=sp(Ib,o),u={i:0},l=new Map(n),c=s!=null&&s.elevateNodesOnSelect&&!lp(s.zIndexMode)?Ph:0;let p=e.length>0;n.clear(),r.clear();for(const _ of e){let h=l.get(_.id);if(s.checkEquality&&_===(h==null?void 0:h.internals.userNode))n.set(_.id,h);else{const x=us(_,s.nodeOrigin),b=ta(_.extent)?_.extent:s.nodeExtent,M=mo(x,b,cr(_));h={...s.defaults,..._,measured:{width:(m=_.measured)==null?void 0:m.width,height:(g=_.measured)==null?void 0:g.height},internals:{positionAbsolute:M,handleBounds:Tb(_,h),z:Th(_,c,s.zIndexMode),userNode:_}},n.set(_.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(p=!1),_.parentId&&up(h,n,r,o,u)}return p}function Rb(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function up(e,n,r,o,s){const{elevateNodesOnSelect:u,nodeOrigin:l,nodeExtent:c,zIndexMode:p}=sp(ap,o),m=e.parentId,g=n.get(m);if(!g){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Rb(e,r),s&&!g.parentId&&g.internals.rootParentIndex===void 0&&p==="auto"&&(g.internals.rootParentIndex=++s.i,g.internals.z=g.internals.z+s.i*Eb),s&&g.internals.rootParentIndex!==void 0&&(s.i=g.internals.rootParentIndex);const _=u&&!lp(p)?Ph:0,{x:h,y:x,z:b}=Vb(e,g,l,c,_,p),{positionAbsolute:M}=e.internals,k=h!==M.x||x!==M.y;(k||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:k?{x:h,y:x}:M,z:b}})}function Th(e,n,r){const o=xn(e.zIndex)?e.zIndex:0;return lp(r)?o:o+(e.selected?n:0)}function Vb(e,n,r,o,s,u){const{x:l,y:c}=n.internals.positionAbsolute,p=cr(e),m=us(e,r),g=ta(e.extent)?mo(m,e.extent,p):m;let _=mo({x:l+g.x,y:c+g.y},o,p);e.extent==="parent"&&(_=vh(_,p,n));const h=Th(e,s,u),x=n.internals.z??0;return{x:_.x,y:_.y,z:x>=h?x+1:h}}function cp(e,n,r,o=[0,0]){var l;const s=[],u=new Map;for(const c of e){const p=n.get(c.parentId);if(!p)continue;const m=((l=u.get(c.parentId))==null?void 0:l.expandedRect)??ea(p),g=kh(m,c.rect);u.set(c.parentId,{expandedRect:g,parent:p})}return u.size>0&&u.forEach(({expandedRect:c,parent:p},m)=>{var q;const g=p.internals.positionAbsolute,_=cr(p),h=p.origin??o,x=c.x<g.x?Math.round(Math.abs(g.x-c.x)):0,b=c.y<g.y?Math.round(Math.abs(g.y-c.y)):0,M=Math.max(_.width,Math.round(c.width)),k=Math.max(_.height,Math.round(c.height)),v=(M-_.width)*h[0],S=(k-_.height)*h[1];(x>0||b>0||v||S)&&(s.push({id:m,type:"position",position:{x:p.position.x-x+v,y:p.position.y-b+S}}),(q=r.get(m))==null||q.forEach(C=>{e.some(P=>P.id===C.id)||s.push({id:C.id,type:"position",position:{x:C.position.x+x,y:C.position.y+b}})})),(_.width<c.width||_.height<c.height||x||b)&&s.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:M+(x?h[0]*x-v:0),height:k+(b?h[1]*b-S:0)}})}),s}function jb(e,n,r,o,s,u,l){const c=o==null?void 0:o.querySelector(".xyflow__viewport");let p=!1;if(!c)return{changes:[],updatedInternals:p};const m=[],g=window.getComputedStyle(c),{m22:_}=new window.DOMMatrixReadOnly(g.transform),h=[];for(const x of e.values()){const b=n.get(x.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),p=!0;continue}const M=np(x.nodeElement),k=b.measured.width!==M.width||b.measured.height!==M.height;if(!!(M.width&&M.height&&(k||!b.internals.handleBounds||x.force))){const S=x.nodeElement.getBoundingClientRect(),q=ta(b.extent)?b.extent:u;let{positionAbsolute:C}=b.internals;b.parentId&&b.extent==="parent"?C=vh(C,M,n.get(b.parentId)):q&&(C=mo(C,q,M));const P={...b,measured:M,internals:{...b.internals,positionAbsolute:C,handleBounds:{source:lf("source",x.nodeElement,S,_,b.id),target:lf("target",x.nodeElement,S,_,b.id)}}};n.set(b.id,P),b.parentId&&up(P,n,r,{nodeOrigin:s,zIndexMode:l}),p=!0,k&&(m.push({id:b.id,type:"dimensions",dimensions:M}),b.expandParent&&b.parentId&&h.push({id:b.id,parentId:b.parentId,rect:ea(P,s)}))}}if(h.length>0){const x=cp(h,n,r,s);m.push(...x)}return{changes:m,updatedInternals:p}}async function Fb({delta:e,panZoom:n,transform:r,translateExtent:o,width:s,height:u}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const l=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[s,u]],o),c=!!l&&(l.x!==r[0]||l.y!==r[1]||l.k!==r[2]);return Promise.resolve(c)}function ff(e,n,r,o,s,u){let l=s;const c=o.get(l)||new Map;o.set(l,c.set(r,n)),l=`${s}-${e}`;const p=o.get(l)||new Map;if(o.set(l,p.set(r,n)),u){l=`${s}-${e}-${u}`;const m=o.get(l)||new Map;o.set(l,m.set(r,n))}}function Rh(e,n,r){e.clear(),n.clear();for(const o of r){const{source:s,target:u,sourceHandle:l=null,targetHandle:c=null}=o,p={edgeId:o.id,source:s,target:u,sourceHandle:l,targetHandle:c},m=`${s}-${l}--${u}-${c}`,g=`${u}-${c}--${s}-${l}`;ff("source",p,g,e,s,l),ff("target",p,m,e,u,c),n.set(o.id,o)}}function Vh(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:Vh(r,n):!1}function hf(e,n,r){var s;let o=e;do{if((s=o==null?void 0:o.matches)!=null&&s.call(o,n))return!0;if(o===r)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function Db(e,n,r,o){const s=new Map;for(const[u,l]of e)if((l.selected||l.id===o)&&(!l.parentId||!Vh(l,e))&&(l.draggable||n&&typeof l.draggable>"u")){const c=e.get(u);c&&s.set(u,{id:u,position:c.position||{x:0,y:0},distance:{x:r.x-c.internals.positionAbsolute.x,y:r.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return s}function Kc({nodeId:e,dragItems:n,nodeLookup:r,dragging:o=!0}){var l,c,p;const s=[];for(const[m,g]of n){const _=(l=r.get(m))==null?void 0:l.internals.userNode;_&&s.push({..._,position:g.position,dragging:o})}if(!e)return[s[0],s];const u=(c=r.get(e))==null?void 0:c.internals.userNode;return[u?{...u,position:((p=n.get(e))==null?void 0:p.position)||u.position,dragging:o}:s[0],s]}function Lb({dragItems:e,snapGrid:n,x:r,y:o}){const s=e.values().next().value;if(!s)return null;const u={x:r-s.distance.x,y:o-s.distance.y},l=ds(u,n);return{x:l.x-u.x,y:l.y-u.y}}function Ob({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:o,onDragStop:s}){let u={x:null,y:null},l=0,c=new Map,p=!1,m={x:0,y:0},g=null,_=!1,h=null,x=!1,b=!1,M=null;function k({noDragClassName:S,handleSelector:q,domNode:C,isSelectable:P,nodeId:I,nodeClickDistance:R=0}){h=Oi(C);function V({x:H,y:te}){const{nodeLookup:T,nodeExtent:Z,snapGrid:U,snapToGrid:J,nodeOrigin:O,onNodeDrag:B,onSelectionDrag:Q,onError:F,updateNodePositions:G}=n();u={x:H,y:te};let ce=!1;const le=c.size>1,me=le&&Z?Ed(cs(c)):null,ge=le&&J?Lb({dragItems:c,snapGrid:U,x:H,y:te}):null;for(const[xe,se]of c){if(!T.has(xe))continue;let ve={x:H-se.distance.x,y:te-se.distance.y};J&&(ve=ge?{x:Math.round(ve.x+ge.x),y:Math.round(ve.y+ge.y)}:ds(ve,U));let Oe=null;if(le&&Z&&!se.extent&&me){const{positionAbsolute:Fe}=se.internals,Qe=Fe.x-me.x+Z[0][0],Je=Fe.x+se.measured.width-me.x2+Z[1][0],He=Fe.y-me.y+Z[0][1],Ze=Fe.y+se.measured.height-me.y2+Z[1][1];Oe=[[Qe,He],[Je,Ze]]}const{position:$e,positionAbsolute:Le}=wh({nodeId:xe,nextPosition:ve,nodeLookup:T,nodeExtent:Oe||Z,nodeOrigin:O,onError:F});ce=ce||se.position.x!==$e.x||se.position.y!==$e.y,se.position=$e,se.internals.positionAbsolute=Le}if(b=b||ce,!!ce&&(G(c,!0),M&&(o||B||!I&&Q))){const[xe,se]=Kc({nodeId:I,dragItems:c,nodeLookup:T});o==null||o(M,c,xe,se),B==null||B(M,xe,se),I||Q==null||Q(M,se)}}async function A(){if(!g)return;const{transform:H,panBy:te,autoPanSpeed:T,autoPanOnNodeDrag:Z}=n();if(!Z){p=!1,cancelAnimationFrame(l);return}const[U,J]=bh(m,g,T);(U!==0||J!==0)&&(u.x=(u.x??0)-U/H[2],u.y=(u.y??0)-J/H[2],await te({x:U,y:J})&&V(u)),l=requestAnimationFrame(A)}function ee(H){var le;const{nodeLookup:te,multiSelectionActive:T,nodesDraggable:Z,transform:U,snapGrid:J,snapToGrid:O,selectNodesOnDrag:B,onNodeDragStart:Q,onSelectionDragStart:F,unselectNodesAndEdges:G}=n();_=!0,(!B||!P)&&!T&&I&&((le=te.get(I))!=null&&le.selected||G()),P&&B&&I&&(e==null||e(I));const ce=Ha(H.sourceEvent,{transform:U,snapGrid:J,snapToGrid:O,containerBounds:g});if(u=ce,c=Db(te,Z,ce,I),c.size>0&&(r||Q||!I&&F)){const[me,ge]=Kc({nodeId:I,dragItems:c,nodeLookup:te});r==null||r(H.sourceEvent,c,me,ge),Q==null||Q(H.sourceEvent,me,ge),I||F==null||F(H.sourceEvent,ge)}}const W=J0().clickDistance(R).on("start",H=>{const{domNode:te,nodeDragThreshold:T,transform:Z,snapGrid:U,snapToGrid:J}=n();g=(te==null?void 0:te.getBoundingClientRect())||null,x=!1,b=!1,M=H.sourceEvent,T===0&&ee(H),u=Ha(H.sourceEvent,{transform:Z,snapGrid:U,snapToGrid:J,containerBounds:g}),m=wn(H.sourceEvent,g)}).on("drag",H=>{const{autoPanOnNodeDrag:te,transform:T,snapGrid:Z,snapToGrid:U,nodeDragThreshold:J,nodeLookup:O}=n(),B=Ha(H.sourceEvent,{transform:T,snapGrid:Z,snapToGrid:U,containerBounds:g});if(M=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||I&&!O.has(I))&&(x=!0),!x){if(!p&&te&&_&&(p=!0,A()),!_){const Q=wn(H.sourceEvent,g),F=Q.x-m.x,G=Q.y-m.y;Math.sqrt(F*F+G*G)>J&&ee(H)}(u.x!==B.xSnapped||u.y!==B.ySnapped)&&c&&_&&(m=wn(H.sourceEvent,g),V(B))}}).on("end",H=>{if(!(!_||x)&&(p=!1,_=!1,cancelAnimationFrame(l),c.size>0)){const{nodeLookup:te,updateNodePositions:T,onNodeDragStop:Z,onSelectionDragStop:U}=n();if(b&&(T(c,!1),b=!1),s||Z||!I&&U){const[J,O]=Kc({nodeId:I,dragItems:c,nodeLookup:te,dragging:!1});s==null||s(H.sourceEvent,c,J,O),Z==null||Z(H.sourceEvent,J,O),I||U==null||U(H.sourceEvent,O)}}}).filter(H=>{const te=H.target;return!H.button&&(!S||!hf(te,`.${S}`,C))&&(!q||hf(te,q,C))});h.call(W)}function v(){h==null||h.on(".drag",null)}return{update:k,destroy:v}}function Bb(e,n,r){const o=[],s={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const u of n.values())es(s,ea(u))>0&&o.push(u);return o}const Ab=250;function zb(e,n,r,o){var c,p;let s=[],u=1/0;const l=Bb(e,r,n+Ab);for(const m of l){const g=[...((c=m.internals.handleBounds)==null?void 0:c.source)??[],...((p=m.internals.handleBounds)==null?void 0:p.target)??[]];for(const _ of g){if(o.nodeId===_.nodeId&&o.type===_.type&&o.id===_.id)continue;const{x:h,y:x}=fo(m,_,_.position,!0),b=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(x-e.y,2));b>n||(b<u?(s=[{..._,x:h,y:x}],u=b):b===u&&s.push({..._,x:h,y:x}))}}if(!s.length)return null;if(s.length>1){const m=o.type==="source"?"target":"source";return s.find(g=>g.type===m)??s[0]}return s[0]}function jh(e,n,r,o,s,u=!1){var m,g,_;const l=o.get(e);if(!l)return null;const c=s==="strict"?(m=l.internals.handleBounds)==null?void 0:m[n]:[...((g=l.internals.handleBounds)==null?void 0:g.source)??[],...((_=l.internals.handleBounds)==null?void 0:_.target)??[]],p=(r?c==null?void 0:c.find(h=>h.id===r):c==null?void 0:c[0])??null;return p&&u?{...p,...fo(l,p,p.position,!0)}:p}function Fh(e,n){return e||(n!=null&&n.classList.contains("target")?"target":n!=null&&n.classList.contains("source")?"source":null)}function $b(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const Dh=()=>!0;function Hb(e,{connectionMode:n,connectionRadius:r,handleId:o,nodeId:s,edgeUpdaterType:u,isTarget:l,domNode:c,nodeLookup:p,lib:m,autoPanOnConnect:g,flowId:_,panBy:h,cancelConnection:x,onConnectStart:b,onConnect:M,onConnectEnd:k,isValidConnection:v=Dh,onReconnectEnd:S,updateConnection:q,getTransform:C,getFromHandle:P,autoPanSpeed:I,dragThreshold:R=1,handleDomNode:V}){const A=Ch(e.target);let ee=0,W;const{x:H,y:te}=wn(e),T=Fh(u,V),Z=c==null?void 0:c.getBoundingClientRect();let U=!1;if(!Z||!T)return;const J=jh(s,T,o,p,n);if(!J)return;let O=wn(e,Z),B=!1,Q=null,F=!1,G=null;function ce(){if(!g||!Z)return;const[$e,Le]=bh(O,Z,I);h({x:$e,y:Le}),ee=requestAnimationFrame(ce)}const le={...J,nodeId:s,type:T,position:J.position},me=p.get(s);let xe={inProgress:!0,isValid:null,from:fo(me,le,Be.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:me,to:O,toHandle:null,toPosition:rf[le.position],toNode:null,pointer:O};function se(){U=!0,q(xe),b==null||b(e,{nodeId:s,handleId:o,handleType:T})}R===0&&se();function ve($e){if(!U){const{x:Ze,y:Dt}=wn($e),Tt=Ze-H,yt=Dt-te;if(!(Tt*Tt+yt*yt>R*R))return;se()}if(!P()||!le){Oe($e);return}const Le=C();O=wn($e,Z),W=zb(ps(O,Le,!1,[1,1]),r,p,le),B||(ce(),B=!0);const Fe=Lh($e,{handle:W,connectionMode:n,fromNodeId:s,fromHandleId:o,fromType:l?"target":"source",isValidConnection:v,doc:A,lib:m,flowId:_,nodeLookup:p});G=Fe.handleDomNode,Q=Fe.connection,F=$b(!!W,Fe.isValid);const Qe=p.get(s),Je=Qe?fo(Qe,le,Be.Left,!0):xe.from,He={...xe,from:Je,isValid:F,to:Fe.toHandle&&F?Ql({x:Fe.toHandle.x,y:Fe.toHandle.y},Le):O,toHandle:Fe.toHandle,toPosition:F&&Fe.toHandle?Fe.toHandle.position:rf[le.position],toNode:Fe.toHandle?p.get(Fe.toHandle.nodeId):null,pointer:O};q(He),xe=He}function Oe($e){if(!("touches"in $e&&$e.touches.length>0)){if(U){(W||G)&&Q&&F&&(M==null||M(Q));const{inProgress:Le,...Fe}=xe,Qe={...Fe,toPosition:xe.toHandle?xe.toPosition:null};k==null||k($e,Qe),u&&(S==null||S($e,Qe))}x(),cancelAnimationFrame(ee),B=!1,F=!1,Q=null,G=null,A.removeEventListener("mousemove",ve),A.removeEventListener("mouseup",Oe),A.removeEventListener("touchmove",ve),A.removeEventListener("touchend",Oe)}}A.addEventListener("mousemove",ve),A.addEventListener("mouseup",Oe),A.addEventListener("touchmove",ve),A.addEventListener("touchend",Oe)}function Lh(e,{handle:n,connectionMode:r,fromNodeId:o,fromHandleId:s,fromType:u,doc:l,lib:c,flowId:p,isValidConnection:m=Dh,nodeLookup:g}){const _=u==="target",h=n?l.querySelector(`.${c}-flow__handle[data-id="${p}-${n==null?void 0:n.nodeId}-${n==null?void 0:n.id}-${n==null?void 0:n.type}"]`):null,{x,y:b}=wn(e),M=l.elementFromPoint(x,b),k=M!=null&&M.classList.contains(`${c}-flow__handle`)?M:h,v={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const S=Fh(void 0,k),q=k.getAttribute("data-nodeid"),C=k.getAttribute("data-handleid"),P=k.classList.contains("connectable"),I=k.classList.contains("connectableend");if(!q||!S)return v;const R={source:_?q:o,sourceHandle:_?C:s,target:_?o:q,targetHandle:_?s:C};v.connection=R;const A=P&&I&&(r===Zo.Strict?_&&S==="source"||!_&&S==="target":q!==o||C!==s);v.isValid=A&&m(R),v.toHandle=jh(q,S,C,g,r,!0)}return v}const Vd={onPointerDown:Hb,isValid:Lh};function Wb({domNode:e,panZoom:n,getTransform:r,getViewScale:o}){const s=Oi(e);function u({translateExtent:c,width:p,height:m,zoomStep:g=1,pannable:_=!0,zoomable:h=!0,inversePan:x=!1}){const b=q=>{if(q.sourceEvent.type!=="wheel"||!n)return;const C=r(),P=q.sourceEvent.ctrlKey&&ts()?10:1,I=-q.sourceEvent.deltaY*(q.sourceEvent.deltaMode===1?.05:q.sourceEvent.deltaMode?1:.002)*g,R=C[2]*Math.pow(2,I*P);n.scaleTo(R)};let M=[0,0];const k=q=>{(q.sourceEvent.type==="mousedown"||q.sourceEvent.type==="touchstart")&&(M=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY])},v=q=>{const C=r();if(q.sourceEvent.type!=="mousemove"&&q.sourceEvent.type!=="touchmove"||!n)return;const P=[q.sourceEvent.clientX??q.sourceEvent.touches[0].clientX,q.sourceEvent.clientY??q.sourceEvent.touches[0].clientY],I=[P[0]-M[0],P[1]-M[1]];M=P;const R=o()*Math.max(C[2],Math.log(C[2]))*(x?-1:1),V={x:C[0]-I[0]*R,y:C[1]-I[1]*R},A=[[0,0],[p,m]];n.setViewportConstrained({x:V.x,y:V.y,zoom:C[2]},A,c)},S=mh().on("start",k).on("zoom",_?v:null).on("zoom.wheel",h?b:null);s.call(S,{})}function l(){s.on("zoom",null)}return{update:u,destroy:l,pointer:hn}}const du=e=>({x:e.x,y:e.y,zoom:e.k}),Zc=({x:e,y:n,zoom:r})=>lu.translate(e,n).scale(r),zo=(e,n)=>e.target.closest(`.${n}`),Oh=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),Ub=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Jc=(e,n=0,r=Ub,o=()=>{})=>{const s=typeof n=="number"&&n>0;return s||o(),s?e.transition().duration(n).ease(r).on("end",o):e},Bh=e=>{const n=e.ctrlKey&&ts()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function Gb({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:o,panOnScrollMode:s,panOnScrollSpeed:u,zoomOnPinch:l,onPanZoomStart:c,onPanZoom:p,onPanZoomEnd:m}){return g=>{if(zo(g,n))return g.ctrlKey&&g.preventDefault(),!1;g.preventDefault(),g.stopImmediatePropagation();const _=r.property("__zoom").k||1;if(g.ctrlKey&&l){const k=hn(g),v=Bh(g),S=_*Math.pow(2,v);o.scaleTo(r,S,k,g);return}const h=g.deltaMode===1?20:1;let x=s===co.Vertical?0:g.deltaX*h,b=s===co.Horizontal?0:g.deltaY*h;!ts()&&g.shiftKey&&s!==co.Vertical&&(x=g.deltaY*h,b=0),o.translateBy(r,-(x/_)*u,-(b/_)*u,{internal:!0});const M=du(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(p==null||p(g,M),e.panScrollTimeout=setTimeout(()=>{m==null||m(g,M),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c==null||c(g,M))}}function Yb({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(o,s){const u=o.type==="wheel",l=!n&&u&&!o.ctrlKey,c=zo(o,e);if(o.ctrlKey&&u&&c&&o.preventDefault(),l||c)return null;o.preventDefault(),r.call(this,o,s)}}function Qb({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return o=>{var u,l,c;if((u=o.sourceEvent)!=null&&u.internal)return;const s=du(o.transform);e.mouseButton=((l=o.sourceEvent)==null?void 0:l.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((c=o.sourceEvent)==null?void 0:c.type)==="mousedown"&&n(!0),r&&(r==null||r(o.sourceEvent,s))}}function Xb({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:o,onPanZoom:s}){return u=>{var l,c;e.usedRightMouseButton=!!(r&&Oh(n,e.mouseButton??0)),(l=u.sourceEvent)!=null&&l.sync||o([u.transform.x,u.transform.y,u.transform.k]),s&&!((c=u.sourceEvent)!=null&&c.internal)&&(s==null||s(u.sourceEvent,du(u.transform)))}}function Kb({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:o,onPanZoomEnd:s,onPaneContextMenu:u}){return l=>{var c;if(!((c=l.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,u&&Oh(n,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&u(l.sourceEvent),e.usedRightMouseButton=!1,o(!1),s)){const p=du(l.transform);e.prevViewport=p,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(l.sourceEvent,p)},r?150:0)}}}function Zb({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:o,panOnScroll:s,zoomOnDoubleClick:u,userSelectionActive:l,noWheelClassName:c,noPanClassName:p,lib:m,connectionInProgress:g}){return _=>{var k;const h=e||n,x=r&&_.ctrlKey,b=_.type==="wheel";if(_.button===1&&_.type==="mousedown"&&(zo(_,`${m}-flow__node`)||zo(_,`${m}-flow__edge`)))return!0;if(!o&&!h&&!s&&!u&&!r||l||g&&!b||zo(_,c)&&b||zo(_,p)&&(!b||s&&b&&!e)||!r&&_.ctrlKey&&b)return!1;if(!r&&_.type==="touchstart"&&((k=_.touches)==null?void 0:k.length)>1)return _.preventDefault(),!1;if(!h&&!s&&!x&&b||!o&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(o)&&!o.includes(_.button)&&_.type==="mousedown")return!1;const M=Array.isArray(o)&&o.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||b)&&M}}function Jb({domNode:e,minZoom:n,maxZoom:r,translateExtent:o,viewport:s,onPanZoom:u,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:p}){const m={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=e.getBoundingClientRect(),_=mh().scaleExtent([n,r]).translateExtent(o),h=Oi(e).call(_);S({x:s.x,y:s.y,zoom:Jo(s.zoom,n,r)},[[0,0],[g.width,g.height]],o);const x=h.on("wheel.zoom"),b=h.on("dblclick.zoom");_.wheelDelta(Bh);function M(W,H){return h?new Promise(te=>{_==null||_.interpolate((H==null?void 0:H.interpolate)==="linear"?$a:Pl).transform(Jc(h,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>te(!0)),W)}):Promise.resolve(!1)}function k({noWheelClassName:W,noPanClassName:H,onPaneContextMenu:te,userSelectionActive:T,panOnScroll:Z,panOnDrag:U,panOnScrollMode:J,panOnScrollSpeed:O,preventScrolling:B,zoomOnPinch:Q,zoomOnScroll:F,zoomOnDoubleClick:G,zoomActivationKeyPressed:ce,lib:le,onTransformChange:me,connectionInProgress:ge,paneClickDistance:xe,selectionOnDrag:se}){T&&!m.isZoomingOrPanning&&v();const ve=Z&&!ce&&!T;_.clickDistance(se?1/0:!xn(xe)||xe<0?0:xe);const Oe=ve?Gb({zoomPanValues:m,noWheelClassName:W,d3Selection:h,d3Zoom:_,panOnScrollMode:J,panOnScrollSpeed:O,zoomOnPinch:Q,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:c}):Yb({noWheelClassName:W,preventScrolling:B,d3ZoomHandler:x});if(h.on("wheel.zoom",Oe,{passive:!1}),!T){const Le=Qb({zoomPanValues:m,onDraggingChange:p,onPanZoomStart:l});_.on("start",Le);const Fe=Xb({zoomPanValues:m,panOnDrag:U,onPaneContextMenu:!!te,onPanZoom:u,onTransformChange:me});_.on("zoom",Fe);const Qe=Kb({zoomPanValues:m,panOnDrag:U,panOnScroll:Z,onPaneContextMenu:te,onPanZoomEnd:c,onDraggingChange:p});_.on("end",Qe)}const $e=Zb({zoomActivationKeyPressed:ce,panOnDrag:U,zoomOnScroll:F,panOnScroll:Z,zoomOnDoubleClick:G,zoomOnPinch:Q,userSelectionActive:T,noPanClassName:H,noWheelClassName:W,lib:le,connectionInProgress:ge});_.filter($e),G?h.on("dblclick.zoom",b):h.on("dblclick.zoom",null)}function v(){_.on("zoom",null)}async function S(W,H,te){const T=Zc(W),Z=_==null?void 0:_.constrain()(T,H,te);return Z&&await M(Z),new Promise(U=>U(Z))}async function q(W,H){const te=Zc(W);return await M(te,H),new Promise(T=>T(te))}function C(W){if(h){const H=Zc(W),te=h.property("__zoom");(te.k!==W.zoom||te.x!==W.x||te.y!==W.y)&&(_==null||_.transform(h,H,null,{sync:!0}))}}function P(){const W=h?_h(h.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function I(W,H){return h?new Promise(te=>{_==null||_.interpolate((H==null?void 0:H.interpolate)==="linear"?$a:Pl).scaleTo(Jc(h,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>te(!0)),W)}):Promise.resolve(!1)}function R(W,H){return h?new Promise(te=>{_==null||_.interpolate((H==null?void 0:H.interpolate)==="linear"?$a:Pl).scaleBy(Jc(h,H==null?void 0:H.duration,H==null?void 0:H.ease,()=>te(!0)),W)}):Promise.resolve(!1)}function V(W){_==null||_.scaleExtent(W)}function A(W){_==null||_.translateExtent(W)}function ee(W){const H=!xn(W)||W<0?0:W;_==null||_.clickDistance(H)}return{update:k,destroy:v,setViewport:q,setViewportConstrained:S,getViewport:P,scaleTo:I,scaleBy:R,setScaleExtent:V,setTranslateExtent:A,syncViewport:C,setClickDistance:ee}}var ia;(function(e){e.Line="line",e.Handle="handle"})(ia||(ia={}));function e2({width:e,prevWidth:n,height:r,prevHeight:o,affectsX:s,affectsY:u}){const l=e-n,c=r-o,p=[l>0?1:l<0?-1:0,c>0?1:c<0?-1:0];return l&&s&&(p[0]=p[0]*-1),c&&u&&(p[1]=p[1]*-1),p}function yf(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),o=e.includes("left"),s=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:o,affectsY:s}}function Tr(e,n){return Math.max(0,n-e)}function Rr(e,n){return Math.max(0,e-n)}function wl(e,n,r){return Math.max(0,n-e,e-r)}function gf(e,n){return e?!n:n}function t2(e,n,r,o,s,u,l,c){let{affectsX:p,affectsY:m}=n;const{isHorizontal:g,isVertical:_}=n,h=g&&_,{xSnapped:x,ySnapped:b}=r,{minWidth:M,maxWidth:k,minHeight:v,maxHeight:S}=o,{x:q,y:C,width:P,height:I,aspectRatio:R}=e;let V=Math.floor(g?x-e.pointerX:0),A=Math.floor(_?b-e.pointerY:0);const ee=P+(p?-V:V),W=I+(m?-A:A),H=-u[0]*P,te=-u[1]*I;let T=wl(ee,M,k),Z=wl(W,v,S);if(l){let O=0,B=0;p&&V<0?O=Tr(q+V+H,l[0][0]):!p&&V>0&&(O=Rr(q+ee+H,l[1][0])),m&&A<0?B=Tr(C+A+te,l[0][1]):!m&&A>0&&(B=Rr(C+W+te,l[1][1])),T=Math.max(T,O),Z=Math.max(Z,B)}if(c){let O=0,B=0;p&&V>0?O=Rr(q+V,c[0][0]):!p&&V<0&&(O=Tr(q+ee,c[1][0])),m&&A>0?B=Rr(C+A,c[0][1]):!m&&A<0&&(B=Tr(C+W,c[1][1])),T=Math.max(T,O),Z=Math.max(Z,B)}if(s){if(g){const O=wl(ee/R,v,S)*R;if(T=Math.max(T,O),l){let B=0;!p&&!m||p&&!m&&h?B=Rr(C+te+ee/R,l[1][1])*R:B=Tr(C+te+(p?V:-V)/R,l[0][1])*R,T=Math.max(T,B)}if(c){let B=0;!p&&!m||p&&!m&&h?B=Tr(C+ee/R,c[1][1])*R:B=Rr(C+(p?V:-V)/R,c[0][1])*R,T=Math.max(T,B)}}if(_){const O=wl(W*R,M,k)/R;if(Z=Math.max(Z,O),l){let B=0;!p&&!m||m&&!p&&h?B=Rr(q+W*R+H,l[1][0])/R:B=Tr(q+(m?A:-A)*R+H,l[0][0])/R,Z=Math.max(Z,B)}if(c){let B=0;!p&&!m||m&&!p&&h?B=Tr(q+W*R,c[1][0])/R:B=Rr(q+(m?A:-A)*R,c[0][0])/R,Z=Math.max(Z,B)}}}A=A+(A<0?Z:-Z),V=V+(V<0?T:-T),s&&(h?ee>W*R?A=(gf(p,m)?-V:V)/R:V=(gf(p,m)?-A:A)*R:g?(A=V/R,m=p):(V=A*R,p=m));const U=p?q+V:q,J=m?C+A:C;return{width:P+(p?-V:V),height:I+(m?-A:A),x:u[0]*V*(p?-1:1)+U,y:u[1]*A*(m?-1:1)+J}}const Ah={width:0,height:0,x:0,y:0},i2={...Ah,pointerX:0,pointerY:0,aspectRatio:1};function n2(e){return[[0,0],[e.measured.width,e.measured.height]]}function r2(e,n,r){const o=n.position.x+e.position.x,s=n.position.y+e.position.y,u=e.measured.width??0,l=e.measured.height??0,c=r[0]*u,p=r[1]*l;return[[o-c,s-p],[o+u-c,s+l-p]]}function o2({domNode:e,nodeId:n,getStoreItems:r,onChange:o,onEnd:s}){const u=Oi(e);let l={controlDirection:yf("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:m,boundaries:g,keepAspectRatio:_,resizeDirection:h,onResizeStart:x,onResize:b,onResizeEnd:M,shouldResize:k}){let v={...Ah},S={...i2};l={boundaries:g,resizeDirection:h,keepAspectRatio:_,controlDirection:yf(m)};let q,C=null,P=[],I,R,V,A=!1;const ee=J0().on("start",W=>{const{nodeLookup:H,transform:te,snapGrid:T,snapToGrid:Z,nodeOrigin:U,paneDomNode:J}=r();if(q=H.get(n),!q)return;C=(J==null?void 0:J.getBoundingClientRect())??null;const{xSnapped:O,ySnapped:B}=Ha(W.sourceEvent,{transform:te,snapGrid:T,snapToGrid:Z,containerBounds:C});v={width:q.measured.width??0,height:q.measured.height??0,x:q.position.x??0,y:q.position.y??0},S={...v,pointerX:O,pointerY:B,aspectRatio:v.width/v.height},I=void 0,q.parentId&&(q.extent==="parent"||q.expandParent)&&(I=H.get(q.parentId),R=I&&q.extent==="parent"?n2(I):void 0),P=[],V=void 0;for(const[Q,F]of H)if(F.parentId===n&&(P.push({id:Q,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const G=r2(F,q,F.origin??U);V?V=[[Math.min(G[0][0],V[0][0]),Math.min(G[0][1],V[0][1])],[Math.max(G[1][0],V[1][0]),Math.max(G[1][1],V[1][1])]]:V=G}x==null||x(W,{...v})}).on("drag",W=>{const{transform:H,snapGrid:te,snapToGrid:T,nodeOrigin:Z}=r(),U=Ha(W.sourceEvent,{transform:H,snapGrid:te,snapToGrid:T,containerBounds:C}),J=[];if(!q)return;const{x:O,y:B,width:Q,height:F}=v,G={},ce=q.origin??Z,{width:le,height:me,x:ge,y:xe}=t2(S,l.controlDirection,U,l.boundaries,l.keepAspectRatio,ce,R,V),se=le!==Q,ve=me!==F,Oe=ge!==O&&se,$e=xe!==B&&ve;if(!Oe&&!$e&&!se&&!ve)return;if((Oe||$e||ce[0]===1||ce[1]===1)&&(G.x=Oe?ge:v.x,G.y=$e?xe:v.y,v.x=G.x,v.y=G.y,P.length>0)){const Je=ge-O,He=xe-B;for(const Ze of P)Ze.position={x:Ze.position.x-Je+ce[0]*(le-Q),y:Ze.position.y-He+ce[1]*(me-F)},J.push(Ze)}if((se||ve)&&(G.width=se&&(!l.resizeDirection||l.resizeDirection==="horizontal")?le:v.width,G.height=ve&&(!l.resizeDirection||l.resizeDirection==="vertical")?me:v.height,v.width=G.width,v.height=G.height),I&&q.expandParent){const Je=ce[0]*(G.width??0);G.x&&G.x<Je&&(v.x=Je,S.x=S.x-(G.x-Je));const He=ce[1]*(G.height??0);G.y&&G.y<He&&(v.y=He,S.y=S.y-(G.y-He))}const Le=e2({width:v.width,prevWidth:Q,height:v.height,prevHeight:F,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),Fe={...v,direction:Le};(k==null?void 0:k(W,Fe))!==!1&&(A=!0,b==null||b(W,Fe),o(G,J))}).on("end",W=>{A&&(M==null||M(W,{...v}),s==null||s({...v}),A=!1)});u.call(ee)}function p(){u.on(".drag",null)}return{update:c,destroy:p}}var ed={exports:{}},td={},id={exports:{}},nd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function a2(){if(xf)return nd;xf=1;var e=as();function n(_,h){return _===h&&(_!==0||1/_===1/h)||_!==_&&h!==h}var r=typeof Object.is=="function"?Object.is:n,o=e.useState,s=e.useEffect,u=e.useLayoutEffect,l=e.useDebugValue;function c(_,h){var x=h(),b=o({inst:{value:x,getSnapshot:h}}),M=b[0].inst,k=b[1];return u(function(){M.value=x,M.getSnapshot=h,p(M)&&k({inst:M})},[_,x,h]),s(function(){return p(M)&&k({inst:M}),_(function(){p(M)&&k({inst:M})})},[_]),l(x),x}function p(_){var h=_.getSnapshot;_=_.value;try{var x=h();return!r(_,x)}catch{return!0}}function m(_,h){return h()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:c;return nd.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,nd}var wf;function s2(){return wf||(wf=1,id.exports=a2()),id.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf;function l2(){if(vf)return td;vf=1;var e=as(),n=s2();function r(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var o=typeof Object.is=="function"?Object.is:r,s=n.useSyncExternalStore,u=e.useRef,l=e.useEffect,c=e.useMemo,p=e.useDebugValue;return td.useSyncExternalStoreWithSelector=function(m,g,_,h,x){var b=u(null);if(b.current===null){var M={hasValue:!1,value:null};b.current=M}else M=b.current;b=c(function(){function v(I){if(!S){if(S=!0,q=I,I=h(I),x!==void 0&&M.hasValue){var R=M.value;if(x(R,I))return C=R}return C=I}if(R=C,o(q,I))return R;var V=h(I);return x!==void 0&&x(R,V)?(q=I,R):(q=I,C=V)}var S=!1,q,C,P=_===void 0?null:_;return[function(){return v(g())},P===null?void 0:function(){return v(P())}]},[g,_,h,x]);var k=s(m,b[0],b[1]);return l(function(){M.hasValue=!0,M.value=k},[k]),p(k),k},td}var bf;function u2(){return bf||(bf=1,ed.exports=l2()),ed.exports}var c2=u2();const d2=os(c2),p2={},kf=e=>{let n;const r=new Set,o=(g,_)=>{const h=typeof g=="function"?g(n):g;if(!Object.is(h,n)){const x=n;n=_??(typeof h!="object"||h===null)?h:Object.assign({},n,h),r.forEach(b=>b(n,x))}},s=()=>n,p={setState:o,getState:s,getInitialState:()=>m,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(p2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},m=n=e(o,s,p);return p},_2=e=>e?kf(e):kf,{useDebugValue:m2}=Ei,{useSyncExternalStoreWithSelector:f2}=d2,h2=e=>e;function zh(e,n=h2,r){const o=f2(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return m2(o),o}const qf=(e,n)=>{const r=_2(e),o=(s,u=n)=>zh(r,s,u);return Object.assign(o,r),o},y2=(e,n)=>e?qf(e,n):qf;function ft(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var g2=L0();const An=os(g2),pu=j.createContext(null),x2=pu.Provider,$h=Dn.error001();function tt(e,n){const r=j.useContext(pu);if(r===null)throw new Error($h);return zh(r,e,n)}function ht(){const e=j.useContext(pu);if(e===null)throw new Error($h);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Mf={display:"none"},w2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Hh="react-flow__node-desc",Wh="react-flow__edge-desc",v2="react-flow__aria-live",b2=e=>e.ariaLiveMessage,k2=e=>e.ariaLabelConfig;function q2({rfId:e}){const n=tt(b2);return f.jsx("div",{id:`${v2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:w2,children:n})}function M2({rfId:e,disableKeyboardA11y:n}){const r=tt(k2);return f.jsxs(f.Fragment,{children:[f.jsx("div",{id:`${Hh}-${e}`,style:Mf,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),f.jsx("div",{id:`${Wh}-${e}`,style:Mf,children:r["edge.a11yDescription.default"]}),!n&&f.jsx(q2,{rfId:e})]})}const na=j.forwardRef(({position:e="top-left",children:n,className:r,style:o,...s},u)=>{const l=`${e}`.split("-");return f.jsx("div",{className:Pt(["react-flow__panel",r,...l]),style:o,ref:u,...s,children:n})});na.displayName="Panel";function C2({proOptions:e,position:n="bottom-right"}){return e!=null&&e.hideAttribution?null:f.jsx(na,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const S2=e=>{const n=[],r=[];for(const[,o]of e.nodeLookup)o.selected&&n.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&r.push(o);return{selectedNodes:n,selectedEdges:r}},vl=e=>e.id;function N2(e,n){return ft(e.selectedNodes.map(vl),n.selectedNodes.map(vl))&&ft(e.selectedEdges.map(vl),n.selectedEdges.map(vl))}function E2({onSelectionChange:e}){const n=ht(),{selectedNodes:r,selectedEdges:o}=tt(S2,N2);return j.useEffect(()=>{const s={nodes:r,edges:o};e==null||e(s),n.getState().onSelectionChangeHandlers.forEach(u=>u(s))},[r,o,e]),null}const I2=e=>!!e.onSelectionChangeHandlers;function P2({onSelectionChange:e}){const n=tt(I2);return e||n?f.jsx(E2,{onSelectionChange:e}):null}const Uh=[0,0],T2={x:0,y:0,zoom:1},R2=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Cf=[...R2,"rfId"],V2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Sf={translateExtent:Za,nodeOrigin:Uh,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function j2(e){const{setNodes:n,setEdges:r,setMinZoom:o,setMaxZoom:s,setTranslateExtent:u,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:p}=tt(V2,ft),m=ht();j.useEffect(()=>(p(e.defaultNodes,e.defaultEdges),()=>{g.current=Sf,c()}),[]);const g=j.useRef(Sf);return j.useEffect(()=>{for(const _ of Cf){const h=e[_],x=g.current[_];h!==x&&(typeof e[_]>"u"||(_==="nodes"?n(h):_==="edges"?r(h):_==="minZoom"?o(h):_==="maxZoom"?s(h):_==="translateExtent"?u(h):_==="nodeExtent"?l(h):_==="ariaLabelConfig"?m.setState({ariaLabelConfig:gb(h)}):_==="fitView"?m.setState({fitViewQueued:h}):_==="fitViewOptions"?m.setState({fitViewOptions:h}):m.setState({[_]:h})))}g.current=e},Cf.map(_=>e[_])),null}function Nf(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function F2(e){var o;const[n,r]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){r(e);return}const s=Nf(),u=()=>r(s!=null&&s.matches?"dark":"light");return u(),s==null||s.addEventListener("change",u),()=>{s==null||s.removeEventListener("change",u)}},[e]),n!==null?n:(o=Nf())!=null&&o.matches?"dark":"light"}const Ef=typeof document<"u"?document:null;function is(e=null,n={target:Ef,actInsideInputWithModifier:!0}){const[r,o]=j.useState(!1),s=j.useRef(!1),u=j.useRef(new Set([])),[l,c]=j.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(_=>typeof _=="string").map(_=>_.replace("+",`
`).replace(`

`,`
+`).split(`
`)),g=m.reduce((_,h)=>_.concat(...h),[]);return[m,g]}return[[],[]]},[e]);return j.useEffect(()=>{const p=(n==null?void 0:n.target)??Ef,m=(n==null?void 0:n.actInsideInputWithModifier)??!0;if(e!==null){const g=x=>{var k,v;if(s.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!s.current||s.current&&!m)&&Sh(x))return!1;const M=Pf(x.code,c);if(u.current.add(x[M]),If(l,u.current,!1)){const S=((v=(k=x.composedPath)==null?void 0:k.call(x))==null?void 0:v[0])||x.target,q=(S==null?void 0:S.nodeName)==="BUTTON"||(S==null?void 0:S.nodeName)==="A";n.preventDefault!==!1&&(s.current||!q)&&x.preventDefault(),o(!0)}},_=x=>{const b=Pf(x.code,c);If(l,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(x[b]),x.key==="Meta"&&u.current.clear(),s.current=!1},h=()=>{u.current.clear(),o(!1)};return p==null||p.addEventListener("keydown",g),p==null||p.addEventListener("keyup",_),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{p==null||p.removeEventListener("keydown",g),p==null||p.removeEventListener("keyup",_),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,o]),r}function If(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function Pf(e,n){return n.includes(e)?"code":"key"}const D2=()=>{const e=ht();return j.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(n,{duration:r==null?void 0:r.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[o,s,u],panZoom:l}=e.getState();return l?(await l.setViewport({x:n.x??o,y:n.y??s,zoom:n.zoom??u},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,o]=e.getState().transform;return{x:n,y:r,zoom:o}},setCenter:async(n,r,o)=>e.getState().setCenter(n,r,o),fitBounds:async(n,r)=>{const{width:o,height:s,minZoom:u,maxZoom:l,panZoom:c}=e.getState(),p=ip(n,o,s,u,l,(r==null?void 0:r.padding)??.1);return c?(await c.setViewport(p,{duration:r==null?void 0:r.duration,ease:r==null?void 0:r.ease,interpolate:r==null?void 0:r.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:o,snapGrid:s,snapToGrid:u,domNode:l}=e.getState();if(!l)return n;const{x:c,y:p}=l.getBoundingClientRect(),m={x:n.x-c,y:n.y-p},g=r.snapGrid??s,_=r.snapToGrid??u;return ps(m,o,_,g)},flowToScreenPosition:n=>{const{transform:r,domNode:o}=e.getState();if(!o)return n;const{x:s,y:u}=o.getBoundingClientRect(),l=Ql(n,r);return{x:l.x+s,y:l.y+u}}}),[])};function Gh(e,n){const r=[],o=new Map,s=[];for(const u of e)if(u.type==="add"){s.push(u);continue}else if(u.type==="remove"||u.type==="replace")o.set(u.id,[u]);else{const l=o.get(u.id);l?l.push(u):o.set(u.id,[u])}for(const u of n){const l=o.get(u.id);if(!l){r.push(u);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){r.push({...l[0].item});continue}const c={...u};for(const p of l)L2(p,c);r.push(c)}return s.length&&s.forEach(u=>{u.index!==void 0?r.splice(u.index,0,{...u.item}):r.push({...u.item})}),r}function L2(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Yh(e,n){return Gh(e,n)}function Qh(e,n){return Gh(e,n)}function so(e,n){return{id:e,type:"select",selected:n}}function $o(e,n=new Set,r=!1){const o=[];for(const[s,u]of e){const l=n.has(s);!(u.selected===void 0&&!l)&&u.selected!==l&&(r&&(u.selected=l),o.push(so(u.id,l)))}return o}function Tf({items:e=[],lookup:n}){var s;const r=[],o=new Map(e.map(u=>[u.id,u]));for(const[u,l]of e.entries()){const c=n.get(l.id),p=((s=c==null?void 0:c.internals)==null?void 0:s.userNode)??c;p!==void 0&&p!==l&&r.push({id:l.id,item:l,type:"replace"}),p===void 0&&r.push({item:l,type:"add",index:u})}for(const[u]of n)o.get(u)===void 0&&r.push({id:u,type:"remove"});return r}function Rf(e){return{id:e.id,type:"remove"}}const Vf=e=>lb(e),O2=e=>xh(e);function Xh(e){return j.forwardRef(e)}const B2=typeof window<"u"?j.useLayoutEffect:j.useEffect;function jf(e){const[n,r]=j.useState(BigInt(0)),[o]=j.useState(()=>A2(()=>r(s=>s+BigInt(1))));return B2(()=>{const s=o.get();s.length&&(e(s),o.reset())},[n]),o}function A2(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const Kh=j.createContext(null);function z2({children:e}){const n=ht(),r=j.useCallback(c=>{const{nodes:p=[],setNodes:m,hasDefaultNodes:g,onNodesChange:_,nodeLookup:h,fitViewQueued:x,onNodesChangeMiddlewareMap:b}=n.getState();let M=p;for(const v of c)M=typeof v=="function"?v(M):v;let k=Tf({items:M,lookup:h});for(const v of b.values())k=v(k);g&&m(M),k.length>0?_==null||_(k):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:v,nodes:S,setNodes:q}=n.getState();v&&q(S)})},[]),o=jf(r),s=j.useCallback(c=>{const{edges:p=[],setEdges:m,hasDefaultEdges:g,onEdgesChange:_,edgeLookup:h}=n.getState();let x=p;for(const b of c)x=typeof b=="function"?b(x):b;g?m(x):_&&_(Tf({items:x,lookup:h}))},[]),u=jf(s),l=j.useMemo(()=>({nodeQueue:o,edgeQueue:u}),[]);return f.jsx(Kh.Provider,{value:l,children:e})}function $2(){const e=j.useContext(Kh);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const H2=e=>!!e.panZoom;function dp(){const e=D2(),n=ht(),r=$2(),o=tt(H2),s=j.useMemo(()=>{const u=_=>n.getState().nodeLookup.get(_),l=_=>{r.nodeQueue.push(_)},c=_=>{r.edgeQueue.push(_)},p=_=>{var v,S;const{nodeLookup:h,nodeOrigin:x}=n.getState(),b=Vf(_)?_:h.get(_.id),M=b.parentId?Mh(b.position,b.measured,b.parentId,h,x):b.position,k={...b,position:M,width:((v=b.measured)==null?void 0:v.width)??b.width,height:((S=b.measured)==null?void 0:S.height)??b.height};return ea(k)},m=(_,h,x={replace:!1})=>{l(b=>b.map(M=>{if(M.id===_){const k=typeof h=="function"?h(M):h;return x.replace&&Vf(k)?k:{...M,...k}}return M}))},g=(_,h,x={replace:!1})=>{c(b=>b.map(M=>{if(M.id===_){const k=typeof h=="function"?h(M):h;return x.replace&&O2(k)?k:{...M,...k}}return M}))};return{getNodes:()=>n.getState().nodes.map(_=>({..._})),getNode:_=>{var h;return(h=u(_))==null?void 0:h.internals.userNode},getInternalNode:u,getEdges:()=>{const{edges:_=[]}=n.getState();return _.map(h=>({...h}))},getEdge:_=>n.getState().edgeLookup.get(_),setNodes:l,setEdges:c,addNodes:_=>{const h=Array.isArray(_)?_:[_];r.nodeQueue.push(x=>[...x,...h])},addEdges:_=>{const h=Array.isArray(_)?_:[_];r.edgeQueue.push(x=>[...x,...h])},toObject:()=>{const{nodes:_=[],edges:h=[],transform:x}=n.getState(),[b,M,k]=x;return{nodes:_.map(v=>({...v})),edges:h.map(v=>({...v})),viewport:{x:b,y:M,zoom:k}}},deleteElements:async({nodes:_=[],edges:h=[]})=>{const{nodes:x,edges:b,onNodesDelete:M,onEdgesDelete:k,triggerNodeChanges:v,triggerEdgeChanges:S,onDelete:q,onBeforeDelete:C}=n.getState(),{nodes:P,edges:I}=await _b({nodesToRemove:_,edgesToRemove:h,nodes:x,edges:b,onBeforeDelete:C}),R=I.length>0,V=P.length>0;if(R){const A=I.map(Rf);k==null||k(I),S(A)}if(V){const A=P.map(Rf);M==null||M(P),v(A)}return(V||R)&&(q==null||q({nodes:P,edges:I})),{deletedNodes:P,deletedEdges:I}},getIntersectingNodes:(_,h=!0,x)=>{const b=af(_),M=b?_:p(_),k=x!==void 0;return M?(x||n.getState().nodes).filter(v=>{const S=n.getState().nodeLookup.get(v.id);if(S&&!b&&(v.id===_.id||!S.internals.positionAbsolute))return!1;const q=ea(k?v:S),C=es(q,M);return h&&C>0||C>=q.width*q.height||C>=M.width*M.height}):[]},isNodeIntersecting:(_,h,x=!0)=>{const M=af(_)?_:p(_);if(!M)return!1;const k=es(M,h);return x&&k>0||k>=h.width*h.height||k>=M.width*M.height},updateNode:m,updateNodeData:(_,h,x={replace:!1})=>{m(_,b=>{const M=typeof h=="function"?h(b):h;return x.replace?{...b,data:M}:{...b,data:{...b.data,...M}}},x)},updateEdge:g,updateEdgeData:(_,h,x={replace:!1})=>{g(_,b=>{const M=typeof h=="function"?h(b):h;return x.replace?{...b,data:M}:{...b,data:{...b.data,...M}}},x)},getNodesBounds:_=>{const{nodeLookup:h,nodeOrigin:x}=n.getState();return ub(_,{nodeLookup:h,nodeOrigin:x})},getHandleConnections:({type:_,id:h,nodeId:x})=>{var b;return Array.from(((b=n.getState().connectionLookup.get(`${x}-${_}${h?`-${h}`:""}`))==null?void 0:b.values())??[])},getNodeConnections:({type:_,handleId:h,nodeId:x})=>{var b;return Array.from(((b=n.getState().connectionLookup.get(`${x}${_?h?`-${_}-${h}`:`-${_}`:""}`))==null?void 0:b.values())??[])},fitView:async _=>{const h=n.getState().fitViewResolver??yb();return n.setState({fitViewQueued:!0,fitViewOptions:_,fitViewResolver:h}),r.nodeQueue.push(x=>[...x]),h.promise}}},[]);return j.useMemo(()=>({...s,...e,viewportInitialized:o}),[o])}const Ff=e=>e.selected,W2=typeof window<"u"?window:void 0;function U2({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=ht(),{deleteElements:o}=dp(),s=is(e,{actInsideInputWithModifier:!1}),u=is(n,{target:W2});j.useEffect(()=>{if(s){const{edges:l,nodes:c}=r.getState();o({nodes:c.filter(Ff),edges:l.filter(Ff)}),r.setState({nodesSelectionActive:!1})}},[s]),j.useEffect(()=>{r.setState({multiSelectionActive:u})},[u])}function G2(e){const n=ht();j.useEffect(()=>{const r=()=>{var s,u,l,c;if(!e.current||!(((u=(s=e.current).checkVisibility)==null?void 0:u.call(s))??!0))return!1;const o=np(e.current);(o.height===0||o.width===0)&&((c=(l=n.getState()).onError)==null||c.call(l,"004",Dn.error004())),n.setState({width:o.width||500,height:o.height||500})};if(e.current){r(),window.addEventListener("resize",r);const o=new ResizeObserver(()=>r());return o.observe(e.current),()=>{window.removeEventListener("resize",r),o&&e.current&&o.unobserve(e.current)}}},[])}const _u={position:"absolute",width:"100%",height:"100%",top:0,left:0},Y2=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function Q2({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:u=co.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:p,translateExtent:m,minZoom:g,maxZoom:_,zoomActivationKeyCode:h,preventScrolling:x=!0,children:b,noWheelClassName:M,noPanClassName:k,onViewportChange:v,isControlledViewport:S,paneClickDistance:q,selectionOnDrag:C}){const P=ht(),I=j.useRef(null),{userSelectionActive:R,lib:V,connectionInProgress:A}=tt(Y2,ft),ee=is(h),W=j.useRef();G2(I);const H=j.useCallback(te=>{v==null||v({x:te[0],y:te[1],zoom:te[2]}),S||P.setState({transform:te})},[v,S]);return j.useEffect(()=>{if(I.current){W.current=Jb({domNode:I.current,minZoom:g,maxZoom:_,translateExtent:m,viewport:p,onDraggingChange:U=>P.setState({paneDragging:U}),onPanZoomStart:(U,J)=>{const{onViewportChangeStart:O,onMoveStart:B}=P.getState();B==null||B(U,J),O==null||O(J)},onPanZoom:(U,J)=>{const{onViewportChange:O,onMove:B}=P.getState();B==null||B(U,J),O==null||O(J)},onPanZoomEnd:(U,J)=>{const{onViewportChangeEnd:O,onMoveEnd:B}=P.getState();B==null||B(U,J),O==null||O(J)}});const{x:te,y:T,zoom:Z}=W.current.getViewport();return P.setState({panZoom:W.current,transform:[te,T,Z],domNode:I.current.closest(".react-flow")}),()=>{var U;(U=W.current)==null||U.destroy()}}},[]),j.useEffect(()=>{var te;(te=W.current)==null||te.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:o,panOnScrollSpeed:s,panOnScrollMode:u,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:ee,preventScrolling:x,noPanClassName:k,userSelectionActive:R,noWheelClassName:M,lib:V,onTransformChange:H,connectionInProgress:A,selectionOnDrag:C,paneClickDistance:q})},[e,n,r,o,s,u,l,c,ee,x,k,R,M,V,H,A,C,q]),f.jsx("div",{className:"react-flow__renderer",ref:I,style:_u,children:b})}const X2=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function K2(){const{userSelectionActive:e,userSelectionRect:n}=tt(X2,ft);return e&&n?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const rd=(e,n)=>r=>{r.target===n.current&&(e==null||e(r))},Z2=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function J2({isSelecting:e,selectionKeyPressed:n,selectionMode:r=Ja.Full,panOnDrag:o,paneClickDistance:s,selectionOnDrag:u,onSelectionStart:l,onSelectionEnd:c,onPaneClick:p,onPaneContextMenu:m,onPaneScroll:g,onPaneMouseEnter:_,onPaneMouseMove:h,onPaneMouseLeave:x,children:b}){const M=ht(),{userSelectionActive:k,elementsSelectable:v,dragging:S,connectionInProgress:q}=tt(Z2,ft),C=v&&(e||k),P=j.useRef(null),I=j.useRef(),R=j.useRef(new Set),V=j.useRef(new Set),A=j.useRef(!1),ee=O=>{if(A.current||q){A.current=!1;return}p==null||p(O),M.getState().resetSelectedElements(),M.setState({nodesSelectionActive:!1})},W=O=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){O.preventDefault();return}m==null||m(O)},H=g?O=>g(O):void 0,te=O=>{A.current&&(O.stopPropagation(),A.current=!1)},T=O=>{var me,ge;const{domNode:B}=M.getState();if(I.current=B==null?void 0:B.getBoundingClientRect(),!I.current)return;const Q=O.target===P.current;if(!Q&&!!O.target.closest(".nokey")||!e||!(u&&Q||n)||O.button!==0||!O.isPrimary)return;(ge=(me=O.target)==null?void 0:me.setPointerCapture)==null||ge.call(me,O.pointerId),A.current=!1;const{x:ce,y:le}=wn(O.nativeEvent,I.current);M.setState({userSelectionRect:{width:0,height:0,startX:ce,startY:le,x:ce,y:le}}),Q||(O.stopPropagation(),O.preventDefault())},Z=O=>{const{userSelectionRect:B,transform:Q,nodeLookup:F,edgeLookup:G,connectionLookup:ce,triggerNodeChanges:le,triggerEdgeChanges:me,defaultEdgeOptions:ge,resetSelectedElements:xe}=M.getState();if(!I.current||!B)return;const{x:se,y:ve}=wn(O.nativeEvent,I.current),{startX:Oe,startY:$e}=B;if(!A.current){const He=n?0:s;if(Math.hypot(se-Oe,ve-$e)<=He)return;xe(),l==null||l(O)}A.current=!0;const Le={startX:Oe,startY:$e,x:se<Oe?se:Oe,y:ve<$e?ve:$e,width:Math.abs(se-Oe),height:Math.abs(ve-$e)},Fe=R.current,Qe=V.current;R.current=new Set(tp(F,Le,Q,r===Ja.Partial,!0).map(He=>He.id)),V.current=new Set;const Je=(ge==null?void 0:ge.selectable)??!0;for(const He of R.current){const Ze=ce.get(He);if(Ze)for(const{edgeId:Dt}of Ze.values()){const Tt=G.get(Dt);Tt&&(Tt.selectable??Je)&&V.current.add(Dt)}}if(!sf(Fe,R.current)){const He=$o(F,R.current,!0);le(He)}if(!sf(Qe,V.current)){const He=$o(G,V.current);me(He)}M.setState({userSelectionRect:Le,userSelectionActive:!0,nodesSelectionActive:!1})},U=O=>{var B,Q;O.button===0&&((Q=(B=O.target)==null?void 0:B.releasePointerCapture)==null||Q.call(B,O.pointerId),!k&&O.target===P.current&&M.getState().userSelectionRect&&(ee==null||ee(O)),M.setState({userSelectionActive:!1,userSelectionRect:null}),A.current&&(c==null||c(O),M.setState({nodesSelectionActive:R.current.size>0})))},J=o===!0||Array.isArray(o)&&o.includes(0);return f.jsxs("div",{className:Pt(["react-flow__pane",{draggable:J,dragging:S,selection:e}]),onClick:C?void 0:rd(ee,P),onContextMenu:rd(W,P),onWheel:rd(H,P),onPointerEnter:C?void 0:_,onPointerMove:C?Z:h,onPointerUp:C?U:void 0,onPointerDownCapture:C?T:void 0,onClickCapture:C?te:void 0,onPointerLeave:x,ref:P,style:_u,children:[b,f.jsx(K2,{})]})}function jd({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:l,nodeLookup:c,onError:p}=n.getState(),m=c.get(e);if(!m){p==null||p("012",Dn.error012(e));return}n.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&l)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var g;return(g=o==null?void 0:o.current)==null?void 0:g.blur()})):s([e])}function Zh({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:u,nodeClickDistance:l}){const c=ht(),[p,m]=j.useState(!1),g=j.useRef();return j.useEffect(()=>{g.current=Ob({getStoreItems:()=>c.getState(),onNodeMouseDown:_=>{jd({id:_,store:c,nodeRef:e})},onDragStart:()=>{m(!0)},onDragStop:()=>{m(!1)}})},[]),j.useEffect(()=>{var _,h;if(n)(_=g.current)==null||_.destroy();else if(e.current)return(h=g.current)==null||h.update({noDragClassName:r,handleSelector:o,domNode:e.current,isSelectable:u,nodeId:s,nodeClickDistance:l}),()=>{var x;(x=g.current)==null||x.destroy()}},[r,o,n,u,e,s]),p}const ek=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Jh(){const e=ht();return j.useCallback(r=>{const{nodeExtent:o,snapToGrid:s,snapGrid:u,nodesDraggable:l,onError:c,updateNodePositions:p,nodeLookup:m,nodeOrigin:g}=e.getState(),_=new Map,h=ek(l),x=s?u[0]:5,b=s?u[1]:5,M=r.direction.x*x*r.factor,k=r.direction.y*b*r.factor;for(const[,v]of m){if(!h(v))continue;let S={x:v.internals.positionAbsolute.x+M,y:v.internals.positionAbsolute.y+k};s&&(S=ds(S,u));const{position:q,positionAbsolute:C}=wh({nodeId:v.id,nextPosition:S,nodeLookup:m,nodeExtent:o,nodeOrigin:g,onError:c});v.position=q,v.internals.positionAbsolute=C,_.set(v.id,v)}p(_)},[])}const pp=j.createContext(null),tk=pp.Provider;pp.Consumer;const ey=()=>j.useContext(pp),ik=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),nk=(e,n,r)=>o=>{const{connectionClickStartHandle:s,connectionMode:u,connection:l}=o,{fromHandle:c,toHandle:p,isValid:m}=l,g=(p==null?void 0:p.nodeId)===e&&(p==null?void 0:p.id)===n&&(p==null?void 0:p.type)===r;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===n&&(c==null?void 0:c.type)===r,connectingTo:g,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===n&&(s==null?void 0:s.type)===r,isPossibleEndHandle:u===Zo.Strict?(c==null?void 0:c.type)!==r:e!==(c==null?void 0:c.nodeId)||n!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!s,valid:g&&m}};function rk({type:e="source",position:n=Be.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:l,onConnect:c,children:p,className:m,onMouseDown:g,onTouchStart:_,...h},x){var Z,U;const b=l||null,M=e==="target",k=ht(),v=ey(),{connectOnClick:S,noPanClassName:q,rfId:C}=tt(ik,ft),{connectingFrom:P,connectingTo:I,clickConnecting:R,isPossibleEndHandle:V,connectionInProcess:A,clickConnectionInProcess:ee,valid:W}=tt(nk(v,b,e),ft);v||(U=(Z=k.getState()).onError)==null||U.call(Z,"010",Dn.error010());const H=J=>{const{defaultEdgeOptions:O,onConnect:B,hasDefaultEdges:Q}=k.getState(),F={...O,...J};if(Q){const{edges:G,setEdges:ce}=k.getState();ce(Id(F,G))}B==null||B(F),c==null||c(F)},te=J=>{if(!v)return;const O=Nh(J.nativeEvent);if(s&&(O&&J.button===0||!O)){const B=k.getState();Vd.onPointerDown(J.nativeEvent,{handleDomNode:J.currentTarget,autoPanOnConnect:B.autoPanOnConnect,connectionMode:B.connectionMode,connectionRadius:B.connectionRadius,domNode:B.domNode,nodeLookup:B.nodeLookup,lib:B.lib,isTarget:M,handleId:b,nodeId:v,flowId:B.rfId,panBy:B.panBy,cancelConnection:B.cancelConnection,onConnectStart:B.onConnectStart,onConnectEnd:B.onConnectEnd,updateConnection:B.updateConnection,onConnect:H,isValidConnection:r||B.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:B.autoPanSpeed,dragThreshold:B.connectionDragThreshold})}O?g==null||g(J):_==null||_(J)},T=J=>{const{onClickConnectStart:O,onClickConnectEnd:B,connectionClickStartHandle:Q,connectionMode:F,isValidConnection:G,lib:ce,rfId:le,nodeLookup:me,connection:ge}=k.getState();if(!v||!Q&&!s)return;if(!Q){O==null||O(J.nativeEvent,{nodeId:v,handleId:b,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:v,type:e,id:b}});return}const xe=Ch(J.target),se=r||G,{connection:ve,isValid:Oe}=Vd.isValid(J.nativeEvent,{handle:{nodeId:v,id:b,type:e},connectionMode:F,fromNodeId:Q.nodeId,fromHandleId:Q.id||null,fromType:Q.type,isValidConnection:se,flowId:le,doc:xe,lib:ce,nodeLookup:me});Oe&&ve&&H(ve);const $e=structuredClone(ge);delete $e.inProgress,$e.toPosition=$e.toHandle?$e.toHandle.position:null,B==null||B(J,$e),k.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":b,"data-nodeid":v,"data-handlepos":n,"data-id":`${C}-${v}-${b}-${e}`,className:Pt(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",q,m,{source:!M,target:M,connectable:o,connectablestart:s,connectableend:u,clickconnecting:R,connectingfrom:P,connectingto:I,valid:W,connectionindicator:o&&(!A||V)&&(A||ee?u:s)}]),onMouseDown:te,onTouchStart:te,onClick:S?T:void 0,ref:x,...h,children:p})}const ns=j.memo(Xh(rk));function ok({data:e,isConnectable:n,sourcePosition:r=Be.Bottom}){return f.jsxs(f.Fragment,{children:[e==null?void 0:e.label,f.jsx(ns,{type:"source",position:r,isConnectable:n})]})}function ak({data:e,isConnectable:n,targetPosition:r=Be.Top,sourcePosition:o=Be.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx(ns,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label,f.jsx(ns,{type:"source",position:o,isConnectable:n})]})}function sk(){return null}function lk({data:e,isConnectable:n,targetPosition:r=Be.Top}){return f.jsxs(f.Fragment,{children:[f.jsx(ns,{type:"target",position:r,isConnectable:n}),e==null?void 0:e.label]})}const Xl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Df={input:ok,default:ak,output:lk,group:sk};function uk(e){var n,r,o,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((n=e.style)==null?void 0:n.width),height:e.height??e.initialHeight??((r=e.style)==null?void 0:r.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const ck=e=>{const{width:n,height:r,x:o,y:s}=cs(e.nodeLookup,{filter:u=>!!u.selected});return{width:xn(n)?n:null,height:xn(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${s}px)`}};function dk({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=ht(),{width:s,height:u,transformString:l,userSelectionActive:c}=tt(ck,ft),p=Jh(),m=j.useRef(null);if(j.useEffect(()=>{var h;r||(h=m.current)==null||h.focus({preventScroll:!0})},[r]),Zh({nodeRef:m}),c||!s||!u)return null;const g=e?h=>{const x=o.getState().nodes.filter(b=>b.selected);e(h,x)}:void 0,_=h=>{Object.prototype.hasOwnProperty.call(Xl,h.key)&&(h.preventDefault(),p({direction:Xl[h.key],factor:h.shiftKey?4:1}))};return f.jsx("div",{className:Pt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:l},children:f.jsx("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:r?void 0:-1,onKeyDown:r?void 0:_,style:{width:s,height:u}})})}const Lf=typeof window<"u"?window:void 0,pk=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ty({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:p,selectionKeyCode:m,selectionOnDrag:g,selectionMode:_,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:b,panActivationKeyCode:M,zoomActivationKeyCode:k,elementsSelectable:v,zoomOnScroll:S,zoomOnPinch:q,panOnScroll:C,panOnScrollSpeed:P,panOnScrollMode:I,zoomOnDoubleClick:R,panOnDrag:V,defaultViewport:A,translateExtent:ee,minZoom:W,maxZoom:H,preventScrolling:te,onSelectionContextMenu:T,noWheelClassName:Z,noPanClassName:U,disableKeyboardA11y:J,onViewportChange:O,isControlledViewport:B}){const{nodesSelectionActive:Q,userSelectionActive:F}=tt(pk,ft),G=is(m,{target:Lf}),ce=is(M,{target:Lf}),le=ce||V,me=ce||C,ge=g&&le!==!0,xe=G||F||ge;return U2({deleteKeyCode:p,multiSelectionKeyCode:b}),f.jsx(Q2,{onPaneContextMenu:u,elementsSelectable:v,zoomOnScroll:S,zoomOnPinch:q,panOnScroll:me,panOnScrollSpeed:P,panOnScrollMode:I,zoomOnDoubleClick:R,panOnDrag:!G&&le,defaultViewport:A,translateExtent:ee,minZoom:W,maxZoom:H,zoomActivationKeyCode:k,preventScrolling:te,noWheelClassName:Z,noPanClassName:U,onViewportChange:O,isControlledViewport:B,paneClickDistance:c,selectionOnDrag:ge,children:f.jsxs(J2,{onSelectionStart:h,onSelectionEnd:x,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,panOnDrag:le,isSelecting:!!xe,selectionMode:_,selectionKeyPressed:G,paneClickDistance:c,selectionOnDrag:ge,children:[e,Q&&f.jsx(dk,{onSelectionContextMenu:T,noPanClassName:U,disableKeyboardA11y:J})]})})}ty.displayName="FlowRenderer";const _k=j.memo(ty),mk=e=>n=>e?tp(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function fk(e){return tt(j.useCallback(mk(e),[e]),ft)}const hk=e=>e.updateNodeInternals;function yk(){const e=tt(hk),[n]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const o=new Map;r.forEach(s=>{const u=s.target.getAttribute("data-id");o.set(u,{id:u,nodeElement:s.target,force:!0})}),e(o)}));return j.useEffect(()=>()=>{n==null||n.disconnect()},[n]),n}function gk({node:e,nodeType:n,hasDimensions:r,resizeObserver:o}){const s=ht(),u=j.useRef(null),l=j.useRef(null),c=j.useRef(e.sourcePosition),p=j.useRef(e.targetPosition),m=j.useRef(n),g=r&&!!e.internals.handleBounds;return j.useEffect(()=>{u.current&&!e.hidden&&(!g||l.current!==u.current)&&(l.current&&(o==null||o.unobserve(l.current)),o==null||o.observe(u.current),l.current=u.current)},[g,e.hidden]),j.useEffect(()=>()=>{l.current&&(o==null||o.unobserve(l.current),l.current=null)},[]),j.useEffect(()=>{if(u.current){const _=m.current!==n,h=c.current!==e.sourcePosition,x=p.current!==e.targetPosition;(_||h||x)&&(m.current=n,c.current=e.sourcePosition,p.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:u.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),u}function xk({id:e,onClick:n,onMouseEnter:r,onMouseMove:o,onMouseLeave:s,onContextMenu:u,onDoubleClick:l,nodesDraggable:c,elementsSelectable:p,nodesConnectable:m,nodesFocusable:g,resizeObserver:_,noDragClassName:h,noPanClassName:x,disableKeyboardA11y:b,rfId:M,nodeTypes:k,nodeClickDistance:v,onError:S}){const{node:q,internals:C,isParent:P}=tt(se=>{const ve=se.nodeLookup.get(e),Oe=se.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:Oe}},ft);let I=q.type||"default",R=(k==null?void 0:k[I])||Df[I];R===void 0&&(S==null||S("003",Dn.error003(I)),I="default",R=(k==null?void 0:k.default)||Df.default);const V=!!(q.draggable||c&&typeof q.draggable>"u"),A=!!(q.selectable||p&&typeof q.selectable>"u"),ee=!!(q.connectable||m&&typeof q.connectable>"u"),W=!!(q.focusable||g&&typeof q.focusable>"u"),H=ht(),te=qh(q),T=gk({node:q,nodeType:I,hasDimensions:te,resizeObserver:_}),Z=Zh({nodeRef:T,disabled:q.hidden||!V,noDragClassName:h,handleSelector:q.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:v}),U=Jh();if(q.hidden)return null;const J=cr(q),O=uk(q),B=A||V||n||r||o||s,Q=r?se=>r(se,{...C.userNode}):void 0,F=o?se=>o(se,{...C.userNode}):void 0,G=s?se=>s(se,{...C.userNode}):void 0,ce=u?se=>u(se,{...C.userNode}):void 0,le=l?se=>l(se,{...C.userNode}):void 0,me=se=>{const{selectNodesOnDrag:ve,nodeDragThreshold:Oe}=H.getState();A&&(!ve||!V||Oe>0)&&jd({id:e,store:H,nodeRef:T}),n&&n(se,{...C.userNode})},ge=se=>{if(!(Sh(se.nativeEvent)||b)){if(fh.includes(se.key)&&A){const ve=se.key==="Escape";jd({id:e,store:H,unselect:ve,nodeRef:T})}else if(V&&q.selected&&Object.prototype.hasOwnProperty.call(Xl,se.key)){se.preventDefault();const{ariaLabelConfig:ve}=H.getState();H.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:se.key.replace("Arrow","").toLowerCase(),x:~~C.positionAbsolute.x,y:~~C.positionAbsolute.y})}),U({direction:Xl[se.key],factor:se.shiftKey?4:1})}}},xe=()=>{var Qe;if(b||!((Qe=T.current)!=null&&Qe.matches(":focus-visible")))return;const{transform:se,width:ve,height:Oe,autoPanOnNodeFocus:$e,setCenter:Le}=H.getState();if(!$e)return;tp(new Map([[e,q]]),{x:0,y:0,width:ve,height:Oe},se,!0).length>0||Le(q.position.x+J.width/2,q.position.y+J.height/2,{zoom:se[2]})};return f.jsx("div",{className:Pt(["react-flow__node",`react-flow__node-${I}`,{[x]:V},q.className,{selected:q.selected,selectable:A,parent:P,draggable:V,dragging:Z}]),ref:T,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:te?"visible":"hidden",...q.style,...O},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Q,onMouseMove:F,onMouseLeave:G,onContextMenu:ce,onClick:me,onDoubleClick:le,onKeyDown:W?ge:void 0,tabIndex:W?0:void 0,onFocus:W?xe:void 0,role:q.ariaRole??(W?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${Hh}-${M}`,"aria-label":q.ariaLabel,...q.domAttributes,children:f.jsx(tk,{value:e,children:f.jsx(R,{id:e,data:q.data,type:I,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:q.selected??!1,selectable:A,draggable:V,deletable:q.deletable??!0,isConnectable:ee,sourcePosition:q.sourcePosition,targetPosition:q.targetPosition,dragging:Z,dragHandle:q.dragHandle,zIndex:C.z,parentId:q.parentId,...J})})})}var wk=j.memo(xk);const vk=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function iy(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,onError:u}=tt(vk,ft),l=fk(e.onlyRenderVisibleElements),c=yk();return f.jsx("div",{className:"react-flow__nodes",style:_u,children:l.map(p=>f.jsx(wk,{id:p,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:u},p))})}iy.displayName="NodeRenderer";const bk=j.memo(iy);function kk(e){return tt(j.useCallback(r=>{if(!e)return r.edges.map(s=>s.id);const o=[];if(r.width&&r.height)for(const s of r.edges){const u=r.nodeLookup.get(s.source),l=r.nodeLookup.get(s.target);u&&l&&vb({sourceNode:u,targetNode:l,width:r.width,height:r.height,transform:r.transform})&&o.push(s.id)}return o},[e]),ft)}const qk=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return f.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Mk=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return f.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Of={[Gl.Arrow]:qk,[Gl.ArrowClosed]:Mk};function Ck(e){const n=ht();return j.useMemo(()=>{var s,u;return Object.prototype.hasOwnProperty.call(Of,e)?Of[e]:((u=(s=n.getState()).onError)==null||u.call(s,"009",Dn.error009(e)),null)},[e])}const Sk=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const p=Ck(n);return p?f.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:c,refX:"0",refY:"0",children:f.jsx(p,{color:r,strokeWidth:l})}):null},ny=({defaultColor:e,rfId:n})=>{const r=tt(u=>u.edges),o=tt(u=>u.defaultEdgeOptions),s=j.useMemo(()=>Nb(r,{id:n,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[r,o,n,e]);return s.length?f.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:f.jsx("defs",{children:s.map(u=>f.jsx(Sk,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};ny.displayName="MarkerDefinitions";var Nk=j.memo(ny);function ry({x:e,y:n,label:r,labelStyle:o,labelShowBg:s=!0,labelBgStyle:u,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:p,className:m,...g}){const[_,h]=j.useState({x:1,y:0,width:0,height:0}),x=Pt(["react-flow__edge-textwrapper",m]),b=j.useRef(null);return j.useEffect(()=>{if(b.current){const M=b.current.getBBox();h({x:M.x,y:M.y,width:M.width,height:M.height})}},[r]),r?f.jsxs("g",{transform:`translate(${e-_.width/2} ${n-_.height/2})`,className:x,visibility:_.width?"visible":"hidden",...g,children:[s&&f.jsx("rect",{width:_.width+2*l[0],x:-l[0],y:-l[1],height:_.height+2*l[1],className:"react-flow__edge-textbg",style:u,rx:c,ry:c}),f.jsx("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:b,style:o,children:r}),p]}):null}ry.displayName="EdgeText";const Ek=j.memo(ry);function mu({path:e,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:p,interactionWidth:m=20,...g}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...g,d:e,fill:"none",className:Pt(["react-flow__edge-path",g.className])}),m?f.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}):null,o&&xn(n)&&xn(r)?f.jsx(Ek,{x:n,y:r,label:o,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:p}):null]})}function Bf({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===Be.Left||e===Be.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function oy({sourceX:e,sourceY:n,sourcePosition:r=Be.Bottom,targetX:o,targetY:s,targetPosition:u=Be.Top}){const[l,c]=Bf({pos:r,x1:e,y1:n,x2:o,y2:s}),[p,m]=Bf({pos:u,x1:o,y1:s,x2:e,y2:n}),[g,_,h,x]=Eh({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:p,targetControlY:m});return[`M${e},${n} C${l},${c} ${p},${m} ${o},${s}`,g,_,h,x]}function ay(e){return j.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:u,sourcePosition:l,targetPosition:c,label:p,labelStyle:m,labelShowBg:g,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:x,style:b,markerEnd:M,markerStart:k,interactionWidth:v})=>{const[S,q,C]=oy({sourceX:r,sourceY:o,sourcePosition:l,targetX:s,targetY:u,targetPosition:c}),P=e.isInternal?void 0:n;return f.jsx(mu,{id:P,path:S,labelX:q,labelY:C,label:p,labelStyle:m,labelShowBg:g,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:x,style:b,markerEnd:M,markerStart:k,interactionWidth:v})})}const Ik=ay({isInternal:!1}),sy=ay({isInternal:!0});Ik.displayName="SimpleBezierEdge";sy.displayName="SimpleBezierEdgeInternal";function ly(e){return j.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:u,label:l,labelStyle:c,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:_,style:h,sourcePosition:x=Be.Bottom,targetPosition:b=Be.Top,markerEnd:M,markerStart:k,pathOptions:v,interactionWidth:S})=>{const[q,C,P]=Pd({sourceX:r,sourceY:o,sourcePosition:x,targetX:s,targetY:u,targetPosition:b,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset,stepPosition:v==null?void 0:v.stepPosition}),I=e.isInternal?void 0:n;return f.jsx(mu,{id:I,path:q,labelX:C,labelY:P,label:l,labelStyle:c,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:_,style:h,markerEnd:M,markerStart:k,interactionWidth:S})})}const uy=ly({isInternal:!1}),cy=ly({isInternal:!0});uy.displayName="SmoothStepEdge";cy.displayName="SmoothStepEdgeInternal";function dy(e){return j.memo(({id:n,...r})=>{var s;const o=e.isInternal?void 0:n;return f.jsx(uy,{...r,id:o,pathOptions:j.useMemo(()=>{var u;return{borderRadius:0,offset:(u=r.pathOptions)==null?void 0:u.offset}},[(s=r.pathOptions)==null?void 0:s.offset])})})}const Pk=dy({isInternal:!1}),py=dy({isInternal:!0});Pk.displayName="StepEdge";py.displayName="StepEdgeInternal";function _y(e){return j.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:u,label:l,labelStyle:c,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:_,style:h,markerEnd:x,markerStart:b,interactionWidth:M})=>{const[k,v,S]=op({sourceX:r,sourceY:o,targetX:s,targetY:u}),q=e.isInternal?void 0:n;return f.jsx(mu,{id:q,path:k,labelX:v,labelY:S,label:l,labelStyle:c,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:_,style:h,markerEnd:x,markerStart:b,interactionWidth:M})})}const Tk=_y({isInternal:!1}),my=_y({isInternal:!0});Tk.displayName="StraightEdge";my.displayName="StraightEdgeInternal";function fy(e){return j.memo(({id:n,sourceX:r,sourceY:o,targetX:s,targetY:u,sourcePosition:l=Be.Bottom,targetPosition:c=Be.Top,label:p,labelStyle:m,labelShowBg:g,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:x,style:b,markerEnd:M,markerStart:k,pathOptions:v,interactionWidth:S})=>{const[q,C,P]=rp({sourceX:r,sourceY:o,sourcePosition:l,targetX:s,targetY:u,targetPosition:c,curvature:v==null?void 0:v.curvature}),I=e.isInternal?void 0:n;return f.jsx(mu,{id:I,path:q,labelX:C,labelY:P,label:p,labelStyle:m,labelShowBg:g,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:x,style:b,markerEnd:M,markerStart:k,interactionWidth:S})})}const Rk=fy({isInternal:!1}),hy=fy({isInternal:!0});Rk.displayName="BezierEdge";hy.displayName="BezierEdgeInternal";const Af={default:hy,straight:my,step:py,smoothstep:cy,simplebezier:sy},zf={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Vk=(e,n,r)=>r===Be.Left?e-n:r===Be.Right?e+n:e,jk=(e,n,r)=>r===Be.Top?e-n:r===Be.Bottom?e+n:e,$f="react-flow__edgeupdater";function Hf({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:u,onMouseOut:l,type:c}){return f.jsx("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:l,className:Pt([$f,`${$f}-${c}`]),cx:Vk(n,o,e),cy:jk(r,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Fk({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:o,sourceY:s,targetX:u,targetY:l,sourcePosition:c,targetPosition:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:_,setReconnecting:h,setUpdateHover:x}){const b=ht(),M=(C,P)=>{if(C.button!==0)return;const{autoPanOnConnect:I,domNode:R,isValidConnection:V,connectionMode:A,connectionRadius:ee,lib:W,onConnectStart:H,onConnectEnd:te,cancelConnection:T,nodeLookup:Z,rfId:U,panBy:J,updateConnection:O}=b.getState(),B=P.type==="target",Q=(ce,le)=>{h(!1),_==null||_(ce,r,P.type,le)},F=ce=>m==null?void 0:m(r,ce),G=(ce,le)=>{h(!0),g==null||g(C,r,P.type),H==null||H(ce,le)};Vd.onPointerDown(C.nativeEvent,{autoPanOnConnect:I,connectionMode:A,connectionRadius:ee,domNode:R,handleId:P.id,nodeId:P.nodeId,nodeLookup:Z,isTarget:B,edgeUpdaterType:P.type,lib:W,flowId:U,cancelConnection:T,panBy:J,isValidConnection:V,onConnect:F,onConnectStart:G,onConnectEnd:te,onReconnectEnd:Q,updateConnection:O,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:C.currentTarget})},k=C=>M(C,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),v=C=>M(C,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),S=()=>x(!0),q=()=>x(!1);return f.jsxs(f.Fragment,{children:[(e===!0||e==="source")&&f.jsx(Hf,{position:c,centerX:o,centerY:s,radius:n,onMouseDown:k,onMouseEnter:S,onMouseOut:q,type:"source"}),(e===!0||e==="target")&&f.jsx(Hf,{position:p,centerX:u,centerY:l,radius:n,onMouseDown:v,onMouseEnter:S,onMouseOut:q,type:"target"})]})}function Dk({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:o,onClick:s,onDoubleClick:u,onContextMenu:l,onMouseEnter:c,onMouseMove:p,onMouseLeave:m,reconnectRadius:g,onReconnect:_,onReconnectStart:h,onReconnectEnd:x,rfId:b,edgeTypes:M,noPanClassName:k,onError:v,disableKeyboardA11y:S}){let q=tt(Le=>Le.edgeLookup.get(e));const C=tt(Le=>Le.defaultEdgeOptions);q=C?{...C,...q}:q;let P=q.type||"default",I=(M==null?void 0:M[P])||Af[P];I===void 0&&(v==null||v("011",Dn.error011(P)),P="default",I=(M==null?void 0:M.default)||Af.default);const R=!!(q.focusable||n&&typeof q.focusable>"u"),V=typeof _<"u"&&(q.reconnectable||r&&typeof q.reconnectable>"u"),A=!!(q.selectable||o&&typeof q.selectable>"u"),ee=j.useRef(null),[W,H]=j.useState(!1),[te,T]=j.useState(!1),Z=ht(),{zIndex:U,sourceX:J,sourceY:O,targetX:B,targetY:Q,sourcePosition:F,targetPosition:G}=tt(j.useCallback(Le=>{const Fe=Le.nodeLookup.get(q.source),Qe=Le.nodeLookup.get(q.target);if(!Fe||!Qe)return{zIndex:q.zIndex,...zf};const Je=Sb({id:e,sourceNode:Fe,targetNode:Qe,sourceHandle:q.sourceHandle||null,targetHandle:q.targetHandle||null,connectionMode:Le.connectionMode,onError:v});return{zIndex:wb({selected:q.selected,zIndex:q.zIndex,sourceNode:Fe,targetNode:Qe,elevateOnSelect:Le.elevateEdgesOnSelect,zIndexMode:Le.zIndexMode}),...Je||zf}},[q.source,q.target,q.sourceHandle,q.targetHandle,q.selected,q.zIndex]),ft),ce=j.useMemo(()=>q.markerStart?`url('#${Td(q.markerStart,b)}')`:void 0,[q.markerStart,b]),le=j.useMemo(()=>q.markerEnd?`url('#${Td(q.markerEnd,b)}')`:void 0,[q.markerEnd,b]);if(q.hidden||J===null||O===null||B===null||Q===null)return null;const me=Le=>{var He;const{addSelectedEdges:Fe,unselectNodesAndEdges:Qe,multiSelectionActive:Je}=Z.getState();A&&(Z.setState({nodesSelectionActive:!1}),q.selected&&Je?(Qe({nodes:[],edges:[q]}),(He=ee.current)==null||He.blur()):Fe([e])),s&&s(Le,q)},ge=u?Le=>{u(Le,{...q})}:void 0,xe=l?Le=>{l(Le,{...q})}:void 0,se=c?Le=>{c(Le,{...q})}:void 0,ve=p?Le=>{p(Le,{...q})}:void 0,Oe=m?Le=>{m(Le,{...q})}:void 0,$e=Le=>{var Fe;if(!S&&fh.includes(Le.key)&&A){const{unselectNodesAndEdges:Qe,addSelectedEdges:Je}=Z.getState();Le.key==="Escape"?((Fe=ee.current)==null||Fe.blur(),Qe({edges:[q]})):Je([e])}};return f.jsx("svg",{style:{zIndex:U},children:f.jsxs("g",{className:Pt(["react-flow__edge",`react-flow__edge-${P}`,q.className,k,{selected:q.selected,animated:q.animated,inactive:!A&&!s,updating:W,selectable:A}]),onClick:me,onDoubleClick:ge,onContextMenu:xe,onMouseEnter:se,onMouseMove:ve,onMouseLeave:Oe,onKeyDown:R?$e:void 0,tabIndex:R?0:void 0,role:q.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":q.ariaLabel===null?void 0:q.ariaLabel||`Edge from ${q.source} to ${q.target}`,"aria-describedby":R?`${Wh}-${b}`:void 0,ref:ee,...q.domAttributes,children:[!te&&f.jsx(I,{id:e,source:q.source,target:q.target,type:q.type,selected:q.selected,animated:q.animated,selectable:A,deletable:q.deletable??!0,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,sourceX:J,sourceY:O,targetX:B,targetY:Q,sourcePosition:F,targetPosition:G,data:q.data,style:q.style,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerStart:ce,markerEnd:le,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth}),V&&f.jsx(Fk,{edge:q,isReconnectable:V,reconnectRadius:g,onReconnect:_,onReconnectStart:h,onReconnectEnd:x,sourceX:J,sourceY:O,targetX:B,targetY:Q,sourcePosition:F,targetPosition:G,setUpdateHover:H,setReconnecting:T})]})})}var Lk=j.memo(Dk);const Ok=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function yy({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:o,noPanClassName:s,onReconnect:u,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:g,reconnectRadius:_,onEdgeDoubleClick:h,onReconnectStart:x,onReconnectEnd:b,disableKeyboardA11y:M}){const{edgesFocusable:k,edgesReconnectable:v,elementsSelectable:S,onError:q}=tt(Ok,ft),C=kk(n);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(Nk,{defaultColor:e,rfId:r}),C.map(P=>f.jsx(Lk,{id:P,edgesFocusable:k,edgesReconnectable:v,elementsSelectable:S,noPanClassName:s,onReconnect:u,onContextMenu:l,onMouseEnter:c,onMouseMove:p,onMouseLeave:m,onClick:g,reconnectRadius:_,onDoubleClick:h,onReconnectStart:x,onReconnectEnd:b,rfId:r,onError:q,edgeTypes:o,disableKeyboardA11y:M},P))]})}yy.displayName="EdgeRenderer";const Bk=j.memo(yy),Ak=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function zk({children:e}){const n=tt(Ak);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function $k(e){const n=dp(),r=j.useRef(!1);j.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const Hk=e=>{var n;return(n=e.panZoom)==null?void 0:n.syncViewport};function Wk(e){const n=tt(Hk),r=ht();return j.useEffect(()=>{e&&(n==null||n(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function Uk(e){return e.connection.inProgress?{...e.connection,to:ps(e.connection.to,e.transform)}:{...e.connection}}function Gk(e){return Uk}function Yk(e){const n=Gk();return tt(n,ft)}const Qk=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Xk({containerStyle:e,style:n,type:r,component:o}){const{nodesConnectable:s,width:u,height:l,isValid:c,inProgress:p}=tt(Qk,ft);return!(u&&s&&p)?null:f.jsx("svg",{style:e,width:u,height:l,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Pt(["react-flow__connection",gh(c)]),children:f.jsx(gy,{style:n,type:r,CustomComponent:o,isValid:c})})})}const gy=({style:e,type:n=Fr.Bezier,CustomComponent:r,isValid:o})=>{const{inProgress:s,from:u,fromNode:l,fromHandle:c,fromPosition:p,to:m,toNode:g,toHandle:_,toPosition:h,pointer:x}=Yk();if(!s)return;if(r)return f.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:l,fromHandle:c,fromX:u.x,fromY:u.y,toX:m.x,toY:m.y,fromPosition:p,toPosition:h,connectionStatus:gh(o),toNode:g,toHandle:_,pointer:x});let b="";const M={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:m.x,targetY:m.y,targetPosition:h};switch(n){case Fr.Bezier:[b]=rp(M);break;case Fr.SimpleBezier:[b]=oy(M);break;case Fr.Step:[b]=Pd({...M,borderRadius:0});break;case Fr.SmoothStep:[b]=Pd(M);break;default:[b]=op(M)}return f.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};gy.displayName="ConnectionLine";const Kk={};function Wf(e=Kk){j.useRef(e),ht(),j.useEffect(()=>{},[e])}function Zk(){ht(),j.useRef(!1),j.useEffect(()=>{},[])}function xy({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:u,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:_,onSelectionStart:h,onSelectionEnd:x,connectionLineType:b,connectionLineStyle:M,connectionLineComponent:k,connectionLineContainerStyle:v,selectionKeyCode:S,selectionOnDrag:q,selectionMode:C,multiSelectionKeyCode:P,panActivationKeyCode:I,zoomActivationKeyCode:R,deleteKeyCode:V,onlyRenderVisibleElements:A,elementsSelectable:ee,defaultViewport:W,translateExtent:H,minZoom:te,maxZoom:T,preventScrolling:Z,defaultMarkerColor:U,zoomOnScroll:J,zoomOnPinch:O,panOnScroll:B,panOnScrollSpeed:Q,panOnScrollMode:F,zoomOnDoubleClick:G,panOnDrag:ce,onPaneClick:le,onPaneMouseEnter:me,onPaneMouseMove:ge,onPaneMouseLeave:xe,onPaneScroll:se,onPaneContextMenu:ve,paneClickDistance:Oe,nodeClickDistance:$e,onEdgeContextMenu:Le,onEdgeMouseEnter:Fe,onEdgeMouseMove:Qe,onEdgeMouseLeave:Je,reconnectRadius:He,onReconnect:Ze,onReconnectStart:Dt,onReconnectEnd:Tt,noDragClassName:yt,noWheelClassName:ai,noPanClassName:Ke,disableKeyboardA11y:Ht,nodeExtent:Ai,rfId:gt,viewport:Xt,onViewportChange:Wt}){return Wf(e),Wf(n),Zk(),$k(r),Wk(Xt),f.jsx(_k,{onPaneClick:le,onPaneMouseEnter:me,onPaneMouseMove:ge,onPaneMouseLeave:xe,onPaneContextMenu:ve,onPaneScroll:se,paneClickDistance:Oe,deleteKeyCode:V,selectionKeyCode:S,selectionOnDrag:q,selectionMode:C,onSelectionStart:h,onSelectionEnd:x,multiSelectionKeyCode:P,panActivationKeyCode:I,zoomActivationKeyCode:R,elementsSelectable:ee,zoomOnScroll:J,zoomOnPinch:O,zoomOnDoubleClick:G,panOnScroll:B,panOnScrollSpeed:Q,panOnScrollMode:F,panOnDrag:ce,defaultViewport:W,translateExtent:H,minZoom:te,maxZoom:T,onSelectionContextMenu:_,preventScrolling:Z,noDragClassName:yt,noWheelClassName:ai,noPanClassName:Ke,disableKeyboardA11y:Ht,onViewportChange:Wt,isControlledViewport:!!Xt,children:f.jsxs(zk,{children:[f.jsx(Bk,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:Ze,onReconnectStart:Dt,onReconnectEnd:Tt,onlyRenderVisibleElements:A,onEdgeContextMenu:Le,onEdgeMouseEnter:Fe,onEdgeMouseMove:Qe,onEdgeMouseLeave:Je,reconnectRadius:He,defaultMarkerColor:U,noPanClassName:Ke,disableKeyboardA11y:Ht,rfId:gt}),f.jsx(Xk,{style:M,type:b,component:k,containerStyle:v}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(bk,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:g,nodeClickDistance:$e,onlyRenderVisibleElements:A,noPanClassName:Ke,noDragClassName:yt,disableKeyboardA11y:Ht,nodeExtent:Ai,rfId:gt}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}xy.displayName="GraphView";const Jk=j.memo(xy),Uf=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:u,fitView:l,fitViewOptions:c,minZoom:p=.5,maxZoom:m=2,nodeOrigin:g,nodeExtent:_,zIndexMode:h="basic"}={})=>{const x=new Map,b=new Map,M=new Map,k=new Map,v=o??n??[],S=r??e??[],q=g??[0,0],C=_??Za;Rh(M,k,v);const P=Rd(S,x,b,{nodeOrigin:q,nodeExtent:C,zIndexMode:h});let I=[0,0,1];if(l&&s&&u){const R=cs(x,{filter:W=>!!((W.width||W.initialWidth)&&(W.height||W.initialHeight))}),{x:V,y:A,zoom:ee}=ip(R,s,u,p,m,(c==null?void 0:c.padding)??.1);I=[V,A,ee]}return{rfId:"1",width:s??0,height:u??0,transform:I,nodes:S,nodesInitialized:P,nodeLookup:x,parentLookup:b,edges:v,edgeLookup:k,connectionLookup:M,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:m,translateExtent:Za,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Zo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:q,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:c,fitViewResolver:null,connection:{...yh},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:mb,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:hh,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},eq=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:u,fitView:l,fitViewOptions:c,minZoom:p,maxZoom:m,nodeOrigin:g,nodeExtent:_,zIndexMode:h})=>y2((x,b)=>{async function M(){const{nodeLookup:k,panZoom:v,fitViewOptions:S,fitViewResolver:q,width:C,height:P,minZoom:I,maxZoom:R}=b();v&&(await pb({nodes:k,width:C,height:P,panZoom:v,minZoom:I,maxZoom:R},S),q==null||q.resolve(!0),x({fitViewResolver:null}))}return{...Uf({nodes:e,edges:n,width:s,height:u,fitView:l,fitViewOptions:c,minZoom:p,maxZoom:m,nodeOrigin:g,nodeExtent:_,defaultNodes:r,defaultEdges:o,zIndexMode:h}),setNodes:k=>{const{nodeLookup:v,parentLookup:S,nodeOrigin:q,elevateNodesOnSelect:C,fitViewQueued:P,zIndexMode:I}=b(),R=Rd(k,v,S,{nodeOrigin:q,nodeExtent:_,elevateNodesOnSelect:C,checkEquality:!0,zIndexMode:I});P&&R?(M(),x({nodes:k,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):x({nodes:k,nodesInitialized:R})},setEdges:k=>{const{connectionLookup:v,edgeLookup:S}=b();Rh(v,S,k),x({edges:k})},setDefaultNodesAndEdges:(k,v)=>{if(k){const{setNodes:S}=b();S(k),x({hasDefaultNodes:!0})}if(v){const{setEdges:S}=b();S(v),x({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:v,nodeLookup:S,parentLookup:q,domNode:C,nodeOrigin:P,nodeExtent:I,debug:R,fitViewQueued:V,zIndexMode:A}=b(),{changes:ee,updatedInternals:W}=jb(k,S,q,C,P,I,A);W&&(Pb(S,q,{nodeOrigin:P,nodeExtent:I,zIndexMode:A}),V?(M(),x({fitViewQueued:!1,fitViewOptions:void 0})):x({}),(ee==null?void 0:ee.length)>0&&(R&&console.log("React Flow: trigger node changes",ee),v==null||v(ee)))},updateNodePositions:(k,v=!1)=>{const S=[];let q=[];const{nodeLookup:C,triggerNodeChanges:P,connection:I,updateConnection:R,onNodesChangeMiddlewareMap:V}=b();for(const[A,ee]of k){const W=C.get(A),H=!!(W!=null&&W.expandParent&&(W!=null&&W.parentId)&&(ee!=null&&ee.position)),te={id:A,type:"position",position:H?{x:Math.max(0,ee.position.x),y:Math.max(0,ee.position.y)}:ee.position,dragging:v};if(W&&I.inProgress&&I.fromNode.id===W.id){const T=fo(W,I.fromHandle,Be.Left,!0);R({...I,from:T})}H&&W.parentId&&S.push({id:A,parentId:W.parentId,rect:{...ee.internals.positionAbsolute,width:ee.measured.width??0,height:ee.measured.height??0}}),q.push(te)}if(S.length>0){const{parentLookup:A,nodeOrigin:ee}=b(),W=cp(S,C,A,ee);q.push(...W)}for(const A of V.values())q=A(q);P(q)},triggerNodeChanges:k=>{const{onNodesChange:v,setNodes:S,nodes:q,hasDefaultNodes:C,debug:P}=b();if(k!=null&&k.length){if(C){const I=Yh(k,q);S(I)}P&&console.log("React Flow: trigger node changes",k),v==null||v(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:v,setEdges:S,edges:q,hasDefaultEdges:C,debug:P}=b();if(k!=null&&k.length){if(C){const I=Qh(k,q);S(I)}P&&console.log("React Flow: trigger edge changes",k),v==null||v(k)}},addSelectedNodes:k=>{const{multiSelectionActive:v,edgeLookup:S,nodeLookup:q,triggerNodeChanges:C,triggerEdgeChanges:P}=b();if(v){const I=k.map(R=>so(R,!0));C(I);return}C($o(q,new Set([...k]),!0)),P($o(S))},addSelectedEdges:k=>{const{multiSelectionActive:v,edgeLookup:S,nodeLookup:q,triggerNodeChanges:C,triggerEdgeChanges:P}=b();if(v){const I=k.map(R=>so(R,!0));P(I);return}P($o(S,new Set([...k]))),C($o(q,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:v}={})=>{const{edges:S,nodes:q,nodeLookup:C,triggerNodeChanges:P,triggerEdgeChanges:I}=b(),R=k||q,V=v||S,A=R.map(W=>{const H=C.get(W.id);return H&&(H.selected=!1),so(W.id,!1)}),ee=V.map(W=>so(W.id,!1));P(A),I(ee)},setMinZoom:k=>{const{panZoom:v,maxZoom:S}=b();v==null||v.setScaleExtent([k,S]),x({minZoom:k})},setMaxZoom:k=>{const{panZoom:v,minZoom:S}=b();v==null||v.setScaleExtent([S,k]),x({maxZoom:k})},setTranslateExtent:k=>{var v;(v=b().panZoom)==null||v.setTranslateExtent(k),x({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:v,triggerNodeChanges:S,triggerEdgeChanges:q,elementsSelectable:C}=b();if(!C)return;const P=v.reduce((R,V)=>V.selected?[...R,so(V.id,!1)]:R,[]),I=k.reduce((R,V)=>V.selected?[...R,so(V.id,!1)]:R,[]);S(P),q(I)},setNodeExtent:k=>{const{nodes:v,nodeLookup:S,parentLookup:q,nodeOrigin:C,elevateNodesOnSelect:P,nodeExtent:I,zIndexMode:R}=b();k[0][0]===I[0][0]&&k[0][1]===I[0][1]&&k[1][0]===I[1][0]&&k[1][1]===I[1][1]||(Rd(v,S,q,{nodeOrigin:C,nodeExtent:k,elevateNodesOnSelect:P,checkEquality:!1,zIndexMode:R}),x({nodeExtent:k}))},panBy:k=>{const{transform:v,width:S,height:q,panZoom:C,translateExtent:P}=b();return Fb({delta:k,panZoom:C,transform:v,translateExtent:P,width:S,height:q})},setCenter:async(k,v,S)=>{const{width:q,height:C,maxZoom:P,panZoom:I}=b();if(!I)return Promise.resolve(!1);const R=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:P;return await I.setViewport({x:q/2-k*R,y:C/2-v*R,zoom:R},{duration:S==null?void 0:S.duration,ease:S==null?void 0:S.ease,interpolate:S==null?void 0:S.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{x({connection:{...yh}})},updateConnection:k=>{x({connection:k})},reset:()=>x({...Uf()})}},Object.is);function tq({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:s,initialHeight:u,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:p,fitView:m,nodeOrigin:g,nodeExtent:_,zIndexMode:h,children:x}){const[b]=j.useState(()=>eq({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:u,fitView:m,minZoom:l,maxZoom:c,fitViewOptions:p,nodeOrigin:g,nodeExtent:_,zIndexMode:h}));return f.jsx(x2,{value:b,children:f.jsx(z2,{children:x})})}function iq({children:e,nodes:n,edges:r,defaultNodes:o,defaultEdges:s,width:u,height:l,fitView:c,fitViewOptions:p,minZoom:m,maxZoom:g,nodeOrigin:_,nodeExtent:h,zIndexMode:x}){return j.useContext(pu)?f.jsx(f.Fragment,{children:e}):f.jsx(tq,{initialNodes:n,initialEdges:r,defaultNodes:o,defaultEdges:s,initialWidth:u,initialHeight:l,fitView:c,initialFitViewOptions:p,initialMinZoom:m,initialMaxZoom:g,nodeOrigin:_,nodeExtent:h,zIndexMode:x,children:e})}const nq={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function rq({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:u,edgeTypes:l,onNodeClick:c,onEdgeClick:p,onInit:m,onMove:g,onMoveStart:_,onMoveEnd:h,onConnect:x,onConnectStart:b,onConnectEnd:M,onClickConnectStart:k,onClickConnectEnd:v,onNodeMouseEnter:S,onNodeMouseMove:q,onNodeMouseLeave:C,onNodeContextMenu:P,onNodeDoubleClick:I,onNodeDragStart:R,onNodeDrag:V,onNodeDragStop:A,onNodesDelete:ee,onEdgesDelete:W,onDelete:H,onSelectionChange:te,onSelectionDragStart:T,onSelectionDrag:Z,onSelectionDragStop:U,onSelectionContextMenu:J,onSelectionStart:O,onSelectionEnd:B,onBeforeDelete:Q,connectionMode:F,connectionLineType:G=Fr.Bezier,connectionLineStyle:ce,connectionLineComponent:le,connectionLineContainerStyle:me,deleteKeyCode:ge="Backspace",selectionKeyCode:xe="Shift",selectionOnDrag:se=!1,selectionMode:ve=Ja.Full,panActivationKeyCode:Oe="Space",multiSelectionKeyCode:$e=ts()?"Meta":"Control",zoomActivationKeyCode:Le=ts()?"Meta":"Control",snapToGrid:Fe,snapGrid:Qe,onlyRenderVisibleElements:Je=!1,selectNodesOnDrag:He,nodesDraggable:Ze,autoPanOnNodeFocus:Dt,nodesConnectable:Tt,nodesFocusable:yt,nodeOrigin:ai=Uh,edgesFocusable:Ke,edgesReconnectable:Ht,elementsSelectable:Ai=!0,defaultViewport:gt=T2,minZoom:Xt=.5,maxZoom:Wt=2,translateExtent:qt=Za,preventScrolling:Kt=!0,nodeExtent:lt,defaultMarkerColor:tn="#b1b1b7",zoomOnScroll:Lt=!0,zoomOnPinch:kn=!0,panOnScroll:Ot=!1,panOnScrollSpeed:fi=.5,panOnScrollMode:Rt=co.Free,zoomOnDoubleClick:si=!0,panOnDrag:Vt=!0,onPaneClick:hi,onPaneMouseEnter:Ut,onPaneMouseMove:Bt,onPaneMouseLeave:Nt,onPaneScroll:li,onPaneContextMenu:nn,paneClickDistance:yi=1,nodeClickDistance:ui=0,children:qn,onReconnect:Et,onReconnectStart:rn,onReconnectEnd:Ii,onEdgeContextMenu:on,onEdgeDoubleClick:Zt,onEdgeMouseEnter:an,onEdgeMouseMove:Pi,onEdgeMouseLeave:Mn,reconnectRadius:sn=10,onNodesChange:zi,onEdgesChange:ye,noDragClassName:et="nodrag",noWheelClassName:ut="nowheel",noPanClassName:Gt="nopan",fitView:Jt,fitViewOptions:ei,connectOnClick:Br,attributionPosition:Me,proOptions:$n,defaultEdgeOptions:$i,elevateNodesOnSelect:Cn=!0,elevateEdgesOnSelect:Ar=!1,disableKeyboardA11y:dr=!1,autoPanOnConnect:Ie,autoPanOnNodeDrag:yo,autoPanSpeed:pr,connectionRadius:Sn,isValidConnection:Hn,onError:_r,style:zr,id:ln,nodeDragThreshold:_t,connectionDragThreshold:mr,viewport:ci,onViewportChange:oa,width:Ti,height:aa,colorMode:gi="light",debug:xi,onScroll:Mt,ariaLabelConfig:wi,zIndexMode:Hi="basic",...un},Ri){const vi=ln||"1",Vi=F2(gi),Wi=j.useCallback(Ui=>{Ui.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Mt==null||Mt(Ui)},[Mt]);return f.jsx("div",{"data-testid":"rf__wrapper",...un,onScroll:Wi,style:{...zr,...nq},ref:Ri,className:Pt(["react-flow",s,Vi]),id:ln,role:"application",children:f.jsxs(iq,{nodes:e,edges:n,width:Ti,height:aa,fitView:Jt,fitViewOptions:ei,minZoom:Xt,maxZoom:Wt,nodeOrigin:ai,nodeExtent:lt,zIndexMode:Hi,children:[f.jsx(Jk,{onInit:m,onNodeClick:c,onEdgeClick:p,onNodeMouseEnter:S,onNodeMouseMove:q,onNodeMouseLeave:C,onNodeContextMenu:P,onNodeDoubleClick:I,nodeTypes:u,edgeTypes:l,connectionLineType:G,connectionLineStyle:ce,connectionLineComponent:le,connectionLineContainerStyle:me,selectionKeyCode:xe,selectionOnDrag:se,selectionMode:ve,deleteKeyCode:ge,multiSelectionKeyCode:$e,panActivationKeyCode:Oe,zoomActivationKeyCode:Le,onlyRenderVisibleElements:Je,defaultViewport:gt,translateExtent:qt,minZoom:Xt,maxZoom:Wt,preventScrolling:Kt,zoomOnScroll:Lt,zoomOnPinch:kn,zoomOnDoubleClick:si,panOnScroll:Ot,panOnScrollSpeed:fi,panOnScrollMode:Rt,panOnDrag:Vt,onPaneClick:hi,onPaneMouseEnter:Ut,onPaneMouseMove:Bt,onPaneMouseLeave:Nt,onPaneScroll:li,onPaneContextMenu:nn,paneClickDistance:yi,nodeClickDistance:ui,onSelectionContextMenu:J,onSelectionStart:O,onSelectionEnd:B,onReconnect:Et,onReconnectStart:rn,onReconnectEnd:Ii,onEdgeContextMenu:on,onEdgeDoubleClick:Zt,onEdgeMouseEnter:an,onEdgeMouseMove:Pi,onEdgeMouseLeave:Mn,reconnectRadius:sn,defaultMarkerColor:tn,noDragClassName:et,noWheelClassName:ut,noPanClassName:Gt,rfId:vi,disableKeyboardA11y:dr,nodeExtent:lt,viewport:ci,onViewportChange:oa}),f.jsx(j2,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:b,onConnectEnd:M,onClickConnectStart:k,onClickConnectEnd:v,nodesDraggable:Ze,autoPanOnNodeFocus:Dt,nodesConnectable:Tt,nodesFocusable:yt,edgesFocusable:Ke,edgesReconnectable:Ht,elementsSelectable:Ai,elevateNodesOnSelect:Cn,elevateEdgesOnSelect:Ar,minZoom:Xt,maxZoom:Wt,nodeExtent:lt,onNodesChange:zi,onEdgesChange:ye,snapToGrid:Fe,snapGrid:Qe,connectionMode:F,translateExtent:qt,connectOnClick:Br,defaultEdgeOptions:$i,fitView:Jt,fitViewOptions:ei,onNodesDelete:ee,onEdgesDelete:W,onDelete:H,onNodeDragStart:R,onNodeDrag:V,onNodeDragStop:A,onSelectionDrag:Z,onSelectionDragStart:T,onSelectionDragStop:U,onMove:g,onMoveStart:_,onMoveEnd:h,noPanClassName:Gt,nodeOrigin:ai,rfId:vi,autoPanOnConnect:Ie,autoPanOnNodeDrag:yo,autoPanSpeed:pr,onError:_r,connectionRadius:Sn,isValidConnection:Hn,selectNodesOnDrag:He,nodeDragThreshold:_t,connectionDragThreshold:mr,onBeforeDelete:Q,debug:xi,ariaLabelConfig:wi,zIndexMode:Hi}),f.jsx(P2,{onSelectionChange:te}),qn,f.jsx(C2,{proOptions:$n,position:Me}),f.jsx(M2,{rfId:vi,disableKeyboardA11y:dr})]})})}var oq=Xh(rq);function aq(e){const[n,r]=j.useState(e),o=j.useCallback(s=>r(u=>Yh(s,u)),[]);return[n,r,o]}function sq(e){const[n,r]=j.useState(e),o=j.useCallback(s=>r(u=>Qh(s,u)),[]);return[n,r,o]}function lq({dimensions:e,lineWidth:n,variant:r,className:o}){return f.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Pt(["react-flow__background-pattern",r,o])})}function uq({radius:e,className:n}){return f.jsx("circle",{cx:e,cy:e,r:e,className:Pt(["react-flow__background-pattern","dots",n])})}var Dr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Dr||(Dr={}));const cq={[Dr.Dots]:1,[Dr.Lines]:1,[Dr.Cross]:6},dq=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function wy({id:e,variant:n=Dr.Dots,gap:r=20,size:o,lineWidth:s=1,offset:u=0,color:l,bgColor:c,style:p,className:m,patternClassName:g}){const _=j.useRef(null),{transform:h,patternId:x}=tt(dq,ft),b=o||cq[n],M=n===Dr.Dots,k=n===Dr.Cross,v=Array.isArray(r)?r:[r,r],S=[v[0]*h[2]||1,v[1]*h[2]||1],q=b*h[2],C=Array.isArray(u)?u:[u,u],P=k?[q,q]:S,I=[C[0]*h[2]||1+P[0]/2,C[1]*h[2]||1+P[1]/2],R=`${x}${e||""}`;return f.jsxs("svg",{className:Pt(["react-flow__background",m]),style:{...p,..._u,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:_,"data-testid":"rf__background",children:[f.jsx("pattern",{id:R,x:h[0]%S[0],y:h[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`,children:M?f.jsx(uq,{radius:q/2,className:g}):f.jsx(lq,{dimensions:P,lineWidth:s,variant:n,className:g})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}wy.displayName="Background";const pq=j.memo(wy);function _q(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function mq(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function fq(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function hq(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function yq(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function bl({children:e,className:n,...r}){return f.jsx("button",{type:"button",className:Pt(["react-flow__controls-button",n]),...r,children:e})}const gq=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function vy({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:u,onZoomOut:l,onFitView:c,onInteractiveChange:p,className:m,children:g,position:_="bottom-left",orientation:h="vertical","aria-label":x}){const b=ht(),{isInteractive:M,minZoomReached:k,maxZoomReached:v,ariaLabelConfig:S}=tt(gq,ft),{zoomIn:q,zoomOut:C,fitView:P}=dp(),I=()=>{q(),u==null||u()},R=()=>{C(),l==null||l()},V=()=>{P(s),c==null||c()},A=()=>{b.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),p==null||p(!M)},ee=h==="horizontal"?"horizontal":"vertical";return f.jsxs(na,{className:Pt(["react-flow__controls",ee,m]),position:_,style:e,"data-testid":"rf__controls","aria-label":x??S["controls.ariaLabel"],children:[n&&f.jsxs(f.Fragment,{children:[f.jsx(bl,{onClick:I,className:"react-flow__controls-zoomin",title:S["controls.zoomIn.ariaLabel"],"aria-label":S["controls.zoomIn.ariaLabel"],disabled:v,children:f.jsx(_q,{})}),f.jsx(bl,{onClick:R,className:"react-flow__controls-zoomout",title:S["controls.zoomOut.ariaLabel"],"aria-label":S["controls.zoomOut.ariaLabel"],disabled:k,children:f.jsx(mq,{})})]}),r&&f.jsx(bl,{className:"react-flow__controls-fitview",onClick:V,title:S["controls.fitView.ariaLabel"],"aria-label":S["controls.fitView.ariaLabel"],children:f.jsx(fq,{})}),o&&f.jsx(bl,{className:"react-flow__controls-interactive",onClick:A,title:S["controls.interactive.ariaLabel"],"aria-label":S["controls.interactive.ariaLabel"],children:M?f.jsx(yq,{}):f.jsx(hq,{})}),g]})}vy.displayName="Controls";const xq=j.memo(vy);function wq({id:e,x:n,y:r,width:o,height:s,style:u,color:l,strokeColor:c,strokeWidth:p,className:m,borderRadius:g,shapeRendering:_,selected:h,onClick:x}){const{background:b,backgroundColor:M}=u||{},k=l||b||M;return f.jsx("rect",{className:Pt(["react-flow__minimap-node",{selected:h},m]),x:n,y:r,rx:g,ry:g,width:o,height:s,style:{fill:k,stroke:c,strokeWidth:p},shapeRendering:_,onClick:x?v=>x(v,e):void 0})}const vq=j.memo(wq),bq=e=>e.nodes.map(n=>n.id),od=e=>e instanceof Function?e:()=>e;function kq({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:u=vq,onClick:l}){const c=tt(bq,ft),p=od(n),m=od(e),g=od(r),_=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:c.map(h=>f.jsx(Mq,{id:h,nodeColorFunc:p,nodeStrokeColorFunc:m,nodeClassNameFunc:g,nodeBorderRadius:o,nodeStrokeWidth:s,NodeComponent:u,onClick:l,shapeRendering:_},h))})}function qq({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:s,nodeStrokeWidth:u,shapeRendering:l,NodeComponent:c,onClick:p}){const{node:m,x:g,y:_,width:h,height:x}=tt(b=>{const{internals:M}=b.nodeLookup.get(e),k=M.userNode,{x:v,y:S}=M.positionAbsolute,{width:q,height:C}=cr(k);return{node:k,x:v,y:S,width:q,height:C}},ft);return!m||m.hidden||!qh(m)?null:f.jsx(c,{x:g,y:_,width:h,height:x,style:m.style,selected:!!m.selected,className:o(m),color:n(m),borderRadius:s,strokeColor:r(m),strokeWidth:u,shapeRendering:l,onClick:p,id:m.id})}const Mq=j.memo(qq);var Cq=j.memo(kq);const Sq=200,Nq=150,Eq=e=>!e.hidden,Iq=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?kh(cs(e.nodeLookup,{filter:Eq}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Pq="react-flow__minimap-desc";function by({style:e,className:n,nodeStrokeColor:r,nodeColor:o,nodeClassName:s="",nodeBorderRadius:u=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:p,maskColor:m,maskStrokeColor:g,maskStrokeWidth:_,position:h="bottom-right",onClick:x,onNodeClick:b,pannable:M=!1,zoomable:k=!1,ariaLabel:v,inversePan:S,zoomStep:q=1,offsetScale:C=5}){const P=ht(),I=j.useRef(null),{boundingRect:R,viewBB:V,rfId:A,panZoom:ee,translateExtent:W,flowWidth:H,flowHeight:te,ariaLabelConfig:T}=tt(Iq,ft),Z=(e==null?void 0:e.width)??Sq,U=(e==null?void 0:e.height)??Nq,J=R.width/Z,O=R.height/U,B=Math.max(J,O),Q=B*Z,F=B*U,G=C*B,ce=R.x-(Q-R.width)/2-G,le=R.y-(F-R.height)/2-G,me=Q+G*2,ge=F+G*2,xe=`${Pq}-${A}`,se=j.useRef(0),ve=j.useRef();se.current=B,j.useEffect(()=>{if(I.current&&ee)return ve.current=Wb({domNode:I.current,panZoom:ee,getTransform:()=>P.getState().transform,getViewScale:()=>se.current}),()=>{var Fe;(Fe=ve.current)==null||Fe.destroy()}},[ee]),j.useEffect(()=>{var Fe;(Fe=ve.current)==null||Fe.update({translateExtent:W,width:H,height:te,inversePan:S,pannable:M,zoomStep:q,zoomable:k})},[M,k,S,q,W,H,te]);const Oe=x?Fe=>{var He;const[Qe,Je]=((He=ve.current)==null?void 0:He.pointer(Fe))||[0,0];x(Fe,{x:Qe,y:Je})}:void 0,$e=b?j.useCallback((Fe,Qe)=>{const Je=P.getState().nodeLookup.get(Qe).internals.userNode;b(Fe,Je)},[]):void 0,Le=v??T["minimap.ariaLabel"];return f.jsx(na,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-width-props":typeof _=="number"?_*B:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Pt(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:Z,height:U,viewBox:`${ce} ${le} ${me} ${ge}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":xe,ref:I,onClick:Oe,children:[Le&&f.jsx("title",{id:xe,children:Le}),f.jsx(Cq,{onClick:$e,nodeColor:o,nodeStrokeColor:r,nodeBorderRadius:u,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:c}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-G},${le-G}h${me+G*2}v${ge+G*2}h${-me-G*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}by.displayName="MiniMap";const Tq=j.memo(by),Rq=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,Vq={[ia.Line]:"right",[ia.Handle]:"bottom-right"};function jq({nodeId:e,position:n,variant:r=ia.Handle,className:o,style:s=void 0,children:u,color:l,minWidth:c=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:_=!1,resizeDirection:h,autoScale:x=!0,shouldResize:b,onResizeStart:M,onResize:k,onResizeEnd:v}){const S=ey(),q=typeof e=="string"?e:S,C=ht(),P=j.useRef(null),I=r===ia.Handle,R=tt(j.useCallback(Rq(I&&x),[I,x]),ft),V=j.useRef(null),A=n??Vq[r];j.useEffect(()=>{if(!(!P.current||!q))return V.current||(V.current=o2({domNode:P.current,nodeId:q,getStoreItems:()=>{const{nodeLookup:W,transform:H,snapGrid:te,snapToGrid:T,nodeOrigin:Z,domNode:U}=C.getState();return{nodeLookup:W,transform:H,snapGrid:te,snapToGrid:T,nodeOrigin:Z,paneDomNode:U}},onChange:(W,H)=>{const{triggerNodeChanges:te,nodeLookup:T,parentLookup:Z,nodeOrigin:U}=C.getState(),J=[],O={x:W.x,y:W.y},B=T.get(q);if(B&&B.expandParent&&B.parentId){const Q=B.origin??U,F=W.width??B.measured.width??0,G=W.height??B.measured.height??0,ce={id:B.id,parentId:B.parentId,rect:{width:F,height:G,...Mh({x:W.x??B.position.x,y:W.y??B.position.y},{width:F,height:G},B.parentId,T,Q)}},le=cp([ce],T,Z,U);J.push(...le),O.x=W.x?Math.max(Q[0]*F,W.x):void 0,O.y=W.y?Math.max(Q[1]*G,W.y):void 0}if(O.x!==void 0&&O.y!==void 0){const Q={id:q,type:"position",position:{...O}};J.push(Q)}if(W.width!==void 0&&W.height!==void 0){const F={id:q,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:W.width,height:W.height}};J.push(F)}for(const Q of H){const F={...Q,type:"position"};J.push(F)}te(J)},onEnd:({width:W,height:H})=>{const te={id:q,type:"dimensions",resizing:!1,dimensions:{width:W,height:H}};C.getState().triggerNodeChanges([te])}})),V.current.update({controlPosition:A,boundaries:{minWidth:c,minHeight:p,maxWidth:m,maxHeight:g},keepAspectRatio:_,resizeDirection:h,onResizeStart:M,onResize:k,onResizeEnd:v,shouldResize:b}),()=>{var W;(W=V.current)==null||W.destroy()}},[A,c,p,m,g,_,M,k,v,b]);const ee=A.split("-");return f.jsx("div",{className:Pt(["react-flow__resize-control","nodrag",...ee,r,o]),ref:P,style:{...s,scale:R,...l&&{[I?"backgroundColor":"borderColor"]:l}},children:u})}j.memo(jq);const ky=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),qy=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),My=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Or={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},fu=(e,n)=>{try{const r=localStorage.getItem(e);return r?JSON.parse(r):n}catch(r){return console.error(`Error loading ${e}:`,r),n}},Fq=(e,n)=>{try{localStorage.setItem(e,JSON.stringify(n))}catch(r){console.error(`Error saving ${e}:`,r)}};let gn=fu(Or.PRODUCTS,ky),rr=fu(Or.MACHINES,qy),or=fu(Or.RECIPES,My);const vt=e=>gn.find(n=>n.id===e),kt=e=>rr.find(n=>n.id===e),_p=(e,n,r)=>{e.length=0,e.push(...n),Fq(r,e)},Cy=e=>_p(gn,e,Or.PRODUCTS),Sy=e=>_p(rr,e,Or.MACHINES),Ny=e=>_p(or,e,Or.RECIPES),Dq=()=>fu(Or.CANVAS_STATE,null),Lq=()=>localStorage.removeItem(Or.CANVAS_STATE),Oq=()=>{Cy(ky),Sy(qy),Ny(My),Lq()},mp=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),Bq=e=>e==="p_variableproduct",Ln=(e,n,r)=>{if(Bq(e))return r==="item"?"Variable Item":r==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const o=n(e);return o?o.name:"Unknown Product"},Aq=e=>mp(e)?"Variable":typeof e=="number"?e.toString():e,Oa=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,zq=e=>{if(mp(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:Oa(e.drilling),idle:Oa(e.idle)};if("max"in e&&"average"in e)return{max:Oa(e.max),average:Oa(e.average)}}return Oa(e)},$q=e=>mp(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,Gf=(e,n)=>{const r=Aq(e.quantity),o=Ln(e.product_id,n);return`${r}x ${o}`},Hq=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ey=e=>Hq.includes(e),Li=18,sr=18,lr=100,oi={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},fp=(e,n={},r=Li,o=null,s=null)=>{const u=oi[e];if(!u)return r;switch(u.type){case"fixed":return u.outputTemp;case"additive":return Math.min(r+u.tempIncrease,u.maxTemp);case"configurable":return n.temperature||u.tempOptions[0].temp;case"product_dependent":return u.temps[o]||u.temps.p_water||400;case"passthrough":return r;case"boiler":const l=s??sr,c=n.heatLoss??u.defaultHeatLoss;return l-c;default:return r}},Wq=(e,n)=>{const r=oi[e];if(!r||r.type!=="configurable")return null;const o=r.tempOptions.find(s=>s.temp===n);return o?o.power:null},Kl=e=>e==null?"":`${Math.round(e)}C`,Uq=e=>{const n=oi[e];return n&&n.type==="configurable"},Gq=e=>{const n=oi[e];return n&&n.type==="boiler"},Yq=e=>{const n=oi[e];return n?n.type==="configurable"?{temperature:n.tempOptions[0].temp}:n.type==="boiler"?{heatLoss:n.defaultHeatLoss}:{}:{}};function Qq(e){return e<=0?1/0:e>=400?2:800/e}function Xq(e){return e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8}function Kq(e){return e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10}function Zq(e){if(e<=0)return 30;const n=2973/11,r=4e3/11;if(e<=n)return 30+-.08324924318869828*e;if(e<r){const o=-.048198636806231744,s=21081/1027;return o*e+s}return 3}function Jq(e){return e<=0?1/0:64/(.176*Math.abs(e))}const On={m_industrial_drill:{type:"steam_input",formula:Qq},m_alloyer:{type:"steam_input",formula:Xq},m_coal_liquefaction_plant:{type:"steam_input",formula:Kq},m_steam_cracking_plant:{type:"steam_input",formula:Zq},m_water_treatment_plant:{type:"steam_input",formula:Jq}};function vn(e){return e in On}function Lr(e,n,r){const o=On[e];if(!o)return r;const s=o.formula(n);return isFinite(s)?s:r}function ho(e){return!e||!e.inputs?!1:e.inputs.some(n=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(n.product_id))}const Fd=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],Dd=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],eM={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},tM=12,iM=3.1,nM=.1,rM=.02,oM=2,rs={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.3},{product_id:"p_medium_earth_fragment",quantity:3.4},{product_id:"p_rock",quantity:9.4}],2200:[{product_id:"p_raw_iron",quantity:9.6},{product_id:"p_shallow_earth_fragment",quantity:2.3},{product_id:"p_raw_lead",quantity:5.1},{product_id:"p_medium_earth_fragment",quantity:3.1}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.5},{product_id:"p_rock",quantity:9.8}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.4},{product_id:"p_rock",quantity:10.2}],2800:[{product_id:"p_gravel",quantity:1.8},{product_id:"p_raw_iron",quantity:10.4},{product_id:"p_shallow_earth_fragment",quantity:2.5},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.5},{product_id:"p_raw_lead",quantity:1.9},{product_id:"p_rock",quantity:6}],3200:[{product_id:"p_rock",quantity:5.1},{product_id:"p_medium_earth_fragment",quantity:4.6},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.5}],3400:[{product_id:"p_raw_iron",quantity:8.3},{product_id:"p_raw_lead",quantity:8.6},{product_id:"p_rock",quantity:7.8}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.3},{product_id:"p_raw_lead",quantity:6.4},{product_id:"p_rock",quantity:6.2}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.4},{product_id:"p_rock",quantity:9.6},{product_id:"p_raw_lead",quantity:3.5},{product_id:"p_coal",quantity:30.4}],4e3:[{product_id:"p_table_salt",quantity:58.5},{product_id:"p_medium_earth_fragment",quantity:3.7},{product_id:"p_rock",quantity:5.9},{product_id:"p_raw_lead",quantity:9.6}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.3},{product_id:"p_rock",quantity:5},{product_id:"p_raw_lead",quantity:4.8},{product_id:"p_coal",quantity:39.3}],4400:[{product_id:"p_rock",quantity:14.8},{product_id:"p_coal",quantity:40.2}],4600:[{product_id:"p_raw_zinc",quantity:7.6},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_rock",quantity:7.8}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.8},{product_id:"p_raw_zinc",quantity:9.8},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.6}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.9},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:5.2}],5200:[{product_id:"p_raw_iron",quantity:21.6},{product_id:"p_rock",quantity:7.6},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.8}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.8},{product_id:"p_raw_copper",quantity:18.3},{product_id:"p_bauxite_residue",quantity:.9}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.9},{product_id:"p_raw_lead",quantity:15.8}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.1},{product_id:"p_rock",quantity:5.2}],6200:[{product_id:"p_raw_copper",quantity:50.7},{product_id:"p_deep_earth_fragment",quantity:4.4},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:6.6}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.7},{product_id:"p_rock",quantity:7.7}],6600:[{product_id:"p_rock",quantity:8.8},{product_id:"p_deep_earth_fragment",quantity:9},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.8},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.9},{product_id:"p_rock",quantity:10.4}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.7},{product_id:"p_bauxite_residue",quantity:1.3}],7200:[{product_id:"p_raw_lead",quantity:5.5},{product_id:"p_bauxite_residue",quantity:1.1},{product_id:"p_deep_earth_fragment",quantity:8.6},{product_id:"p_rock",quantity:10.8}],7400:[{product_id:"p_raw_copper",quantity:43},{product_id:"p_bauxite_residue",quantity:1.1},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.4}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:9.8}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.6},{product_id:"p_bauxite_residue",quantity:2.2},{product_id:"p_deep_earth_fragment",quantity:8.4}],8e3:[{product_id:"p_bauxite_residue",quantity:2.1},{product_id:"p_rock",quantity:10.7},{product_id:"p_deep_earth_fragment",quantity:11.7}],8200:[{product_id:"p_raw_zirconium",quantity:.6},{product_id:"p_rock",quantity:10.7},{product_id:"p_deep_earth_fragment",quantity:3.5}],8400:[{product_id:"p_raw_zirconium",quantity:1.7},{product_id:"p_raw_uranium",quantity:.2},{product_id:"p_deep_earth_fragment",quantity:1.5}],8600:[{product_id:"p_raw_zirconium",quantity:.5},{product_id:"p_raw_uranium",quantity:2.2},{product_id:"p_raw_iron",quantity:10.5}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.2},{product_id:"p_raw_uranium",quantity:2.2},{product_id:"p_raw_iron",quantity:13.5}],9e3:[{product_id:"p_raw_lead",quantity:8.6},{product_id:"p_raw_zirconium",quantity:.7},{product_id:"p_raw_iron",quantity:3.5}]},aM=()=>Object.keys(rs).map(e=>parseInt(e)).sort((e,n)=>e-n),sM=(e,n)=>{const r=n===100?300:n;switch(e){case"copper":return r/150;case"iron":return .04*Math.pow(r,.25);case"steel":return .02*Math.pow(r,.25);case"tungsten_carbide":return .005*Math.pow(r,.25);default:return 1}},lM=(e,n)=>{const r=n===100?300:n;switch(e){case"none":return Math.pow(r,2)/9e5;case"water":return Math.pow(r,2)/1875e3;case"acetic_acid":return Math.pow(r,.8)/450;case"sulfuric_acid":return .09*Math.pow(r,.25);case"hydrochloric_acid":return r<6e3?13e-6*Math.pow(r,1.5-5e-5*r)+4.3875*Math.pow(10,-13.3)*Math.pow(r,3):.09*Math.pow(r,.25);default:return 1}},ra=(e,n,r,o)=>{if(!e||!o)return null;const s=sM(e,o),u=lM(n||"none",o),l=r?1.1:1,c=.5*s*u*l,p=Math.ceil(100/c),m=tM,g=r?100:50,_=2*o/g,h=p+m+_,x=p/h;return{deteriorationRate:c,lifeTime:p,replacementTime:m,travelTime:_,totalCycleTime:h,dutyCycle:x,drillingPower:iM,idlePower:nM,pollution:rM}},Iy=(e,n,r,o)=>{const s=[],u=ra(e,n,r,o);if(!u){if(e){const l=Fd.find(c=>c.id===e);l&&s.push({product_id:l.product_id,quantity:"Variable"})}if(n&&n!=="none"){const l=Dd.find(c=>c.id===n);l!=null&&l.product_id&&s.push({product_id:l.product_id,quantity:"Variable"})}return r&&s.push({product_id:"p_machine_oil",quantity:"Variable"}),s}if(e){const l=Fd.find(c=>c.id===e);if(l){const c=1/u.totalCycleTime;s.push({product_id:l.product_id,quantity:parseFloat(c.toFixed(6))})}}if(n&&n!=="none"){const l=Dd.find(c=>c.id===n);if(l!=null&&l.product_id){const p=(eM[n]||0)*u.dutyCycle;s.push({product_id:l.product_id,quantity:parseFloat(p.toFixed(6))})}}return r&&s.push({product_id:"p_machine_oil",quantity:oM}),s},Py=(e,n,r,o)=>{if(!o)return[];const s=rs[o];if(!s)return[];const u=ra(e,n,r,o);if(!u)return s.map(c=>({...c,quantity:"Variable"}));const l=r?1.1:1;return s.map(c=>{const p=c.quantity*l*u.dutyCycle;return{product_id:c.product_id,quantity:parseFloat(p.toFixed(4))}})},Yf={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},uM=({nodeId:e,currentSettings:n,onSettingsChange:r,onClose:o})=>{const[s,u]=j.useState((n==null?void 0:n.drillHead)||""),[l,c]=j.useState((n==null?void 0:n.consumable)||"none"),[p,m]=j.useState((n==null?void 0:n.machineOil)||!1),[g,_]=j.useState((n==null?void 0:n.depth)||""),h=Ei.useRef(null),x=q=>{const C=h.current;if(!C)return;const P=C.scrollHeight>C.clientHeight,I=C.scrollTop===0&&q.deltaY<0,R=C.scrollTop+C.clientHeight>=C.scrollHeight&&q.deltaY>0;P&&!I&&!R||q.preventDefault(),q.stopPropagation()},b=s&&g?ra(s,l,p,parseInt(g)):null,M=Iy(s,l,p,g?parseInt(g):null),k=Py(s,l,p,g?parseInt(g):null),v=()=>{r(e,{drillHead:s,consumable:l,machineOil:p,depth:g?parseInt(g):null},M,k),o()},S=()=>{u(""),c("none"),m(!1),_("")};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:o,children:f.jsxs("div",{ref:h,className:"drill-settings-bubble",onClick:q=>q.stopPropagation(),onDoubleClick:q=>q.stopPropagation(),onWheel:x,children:[f.jsx("h3",{className:"drill-settings-title",children:"Mineshaft Drill Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Drill Head:"}),f.jsxs("select",{value:s,onChange:q=>u(q.target.value),className:"select",children:[f.jsx("option",{value:"",children:"None (Variable)"}),Fd.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Consumable:"}),f.jsx("select",{value:l,onChange:q=>c(q.target.value),className:"select",children:Dd.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))})]}),f.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:f.jsxs("label",{className:"drill-setting-label",children:[f.jsx("input",{type:"checkbox",checked:p,onChange:q=>m(q.target.checked),className:"drill-checkbox"}),f.jsx("span",{children:"Machine Oil (2/s)"})]})}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Target Depth:"}),f.jsxs("select",{value:g,onChange:q=>_(q.target.value),className:"select",children:[f.jsx("option",{value:"",children:"None (Variable)"}),aM().map(q=>f.jsxs("option",{value:q,children:[q," m"]},q))]})]}),b&&f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Deterioration: ",b.deteriorationRate.toFixed(4),"%/s"]}),f.jsxs("div",{children:["Life Time: ",b.lifeTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Replacement: ",b.replacementTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Travel Time: ",b.travelTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Total Cycle: ",b.totalCycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Efficiency: ",(b.dutyCycle*100).toFixed(1),"%"]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[M.length>0&&f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs:"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:M.map((q,C)=>f.jsxs("div",{children:[typeof q.quantity=="number"?q.quantity.toFixed(4):q.quantity,"x ",Ln(q.product_id,vt)]},C))})]}),k.length>0&&f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--settings-output-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Outputs:"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:k.map((q,C)=>f.jsxs("div",{children:[typeof q.quantity=="number"?q.quantity.toFixed(4):q.quantity,"x ",Ln(q.product_id,vt)]},C))})]})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:S,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:v,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},Qf=4,cM=20,dM=4,Xf=5e5,pM=.3,_M=10,kl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},mM=()=>{const e=[];for(let n=1;n<=6;n++){const r=Math.pow(2,n),o=`${r}x Microchip`,s=`p_${r}x_microchip`;e.push({outerStage:1,innerStage:r,innerPower:n,name:o,productId:s})}for(let n=2;n<=8;n++){const s=`${n}x64x Microchip`,u=`p_${n}x64x_microchip`;e.push({outerStage:n,innerStage:64,innerPower:6,name:s,productId:u})}return e},Ty=mM(),fM=e=>Ty.find(n=>n.productId===e),_s=(e,n,r=0)=>{const o=fM(e);if(!o)return null;const u=Math.log2(o.innerStage)+(o.outerStage-1)*6,l=Qf*u,c=n?dM:cM,p=r/6,m=u*Qf*(c+p)+_M,g=kl.logic_plates*u,_=kl.copper_wires*u,h=kl.semiconductors*u,x=kl.gold_wires*u,b=[{product_id:"p_logic_plate",quantity:g},{product_id:"p_copper_wire",quantity:_},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:x}];n&&b.push({product_id:"p_machine_oil",quantity:parseFloat((pM*m).toFixed(6))});const M=[{product_id:e,quantity:1}],k=Xf/c,v=Xf/(n?.8:4);return{outerStage:o.outerStage,innerStage:o.innerStage,totalStages:u,totalSteps:l,avgStepTime:c,cycleTime:m,inputs:b,outputs:M,avgPowerConsumption:k,maxPowerConsumption:v,logicPlates:g,copperWires:_,semiconductors:h,goldWires:x}},Ry=(e,n)=>{const r=_s(e,n,0);return r?r.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},Vy=(e,n)=>{const r=_s(e,n,0);return r?r.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},Kf={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},hM=[1,2,3,4,5,6,7,8],yM=5e5,gM=({nodeId:e,currentSettings:n,onSettingsChange:r,onClose:o})=>{const[s,u]=j.useState((n==null?void 0:n.outerStage)||""),[l,c]=j.useState((n==null?void 0:n.innerStage)||""),[p,m]=j.useState((n==null?void 0:n.machineOil)||!1),[g,_]=j.useState((n==null?void 0:n.tickCircuitDelay)??0),h=Ei.useRef(null),x=I=>{const R=h.current;if(!R)return;const V=R.scrollHeight>R.clientHeight,A=R.scrollTop===0&&I.deltaY<0,ee=R.scrollTop+R.clientHeight>=R.scrollHeight&&I.deltaY>0;V&&!A&&!ee||I.preventDefault(),I.stopPropagation()},M=!s||!l?"":parseInt(s)===1?`p_${l}x_microchip`:`p_${s}x${l}x_microchip`,k=M?_s(M,p,g):null,v=Ry(M,p),S=Vy(M,p),q=k?yM/(p?.8:4):null,C=()=>{r(e,{outerStage:s?parseInt(s):"",innerStage:l?parseInt(l):"",machineOil:p,tickCircuitDelay:g},v,S),o()},P=()=>{u(""),c(""),m(!1),_(0)};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:o,children:f.jsxs("div",{ref:h,className:"drill-settings-bubble",onClick:I=>I.stopPropagation(),onDoubleClick:I=>I.stopPropagation(),onWheel:x,children:[f.jsx("h3",{className:"drill-settings-title",children:"Logic Assembler Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Target Microchip:"}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsxs("select",{value:s,onChange:I=>{const R=I.target.value;u(R),R&&parseInt(R)>1&&c("64")},className:"select",style:{flex:1},children:[f.jsx("option",{value:"",children:"Outer"}),hM.map(I=>f.jsxs("option",{value:I,children:[I,"x"]},I))]}),f.jsxs("select",{value:l,onChange:I=>c(I.target.value),className:"select",style:{flex:1},disabled:s&&parseInt(s)>1,children:[f.jsx("option",{value:"",children:"Inner"}),s&&parseInt(s)>1?f.jsx("option",{value:"64",children:"64x"}):[2,4,8,16,32,64].map(I=>f.jsxs("option",{value:I,children:[I,"x"]},I))]}),f.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:"Microchip"})]}),M&&f.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:s==="1"?`${l}x Microchip`:`${s}x${l}x Microchip`})]}),f.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:f.jsxs("label",{className:"drill-setting-label",children:[f.jsx("input",{type:"checkbox",checked:p,onChange:I=>m(I.target.checked),className:"drill-checkbox"}),f.jsx("span",{children:"Machine Oil (0.3/s, 5x speed)"})]})}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Tick Circuit Delay (ticks):"}),f.jsx("input",{type:"text",value:g,onChange:I=>_(I.target.value===""?0:parseFloat(I.target.value)),className:"input",placeholder:"0"})]}),k&&f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Total Stages: ",k.totalStages]}),f.jsxs("div",{children:["Total Steps: ",k.totalSteps]}),f.jsxs("div",{children:["Avg Step Time: ",k.avgStepTime,"s"]}),f.jsxs("div",{children:["Cycle Time: ",k.cycleTime.toFixed(2),"s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Max: ",(q/1e3).toFixed(2)," kMF/s"]}),f.jsxs("div",{children:["Avg: ",(k.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Logic Plates: ",k.logicPlates]}),f.jsxs("div",{children:["Copper Wires: ",k.copperWires]}),f.jsxs("div",{children:["Semiconductors: ",k.semiconductors]}),f.jsxs("div",{children:["Gold Wires: ",k.goldWires]})]})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:P,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:C,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},Ld=11,jy=2,xM=2e5,Fy=1,wM=3,Dy=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,Ly=e=>Math.ceil(e/wM),Zl=(e,n,r,o,s,u)=>{if(!e||!n||!r||!o||s!==1)return null;const l=Ly(r),c=Dy(u),p=r*Fy,m=e/c,g=n/Ld,_=Math.min(m,g),h=_*jy,x=n*xM/Ld;return{trees:e,harvesters:n,sprinklers:r,waterTanks:l,outputs:o,controller:s,growthTime:c,waterConsumption:p,sustainableHarvestRate:m,maxHarvestRate:g,actualHarvestRate:_,logOutput:h,avgPowerConsumption:x,isTreeLimited:m<g}},Oy=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*Fy}],hp=(e,n,r)=>{if(!e||!n)return[{product_id:"p_oak_log",quantity:"Variable"}];const o=Dy(r),s=e/o,u=n/Ld,c=Math.min(s,u)*jy;return[{product_id:"p_oak_log",quantity:parseFloat(c.toFixed(6))}]},Zf={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},vM=({nodeId:e,currentSettings:n,globalPollution:r,onSettingsChange:o,onClose:s})=>{const[u,l]=j.useState((n==null?void 0:n.trees)||450),[c,p]=j.useState((n==null?void 0:n.harvesters)||20),[m,g]=j.useState((n==null?void 0:n.sprinklers)||24),[_,h]=j.useState((n==null?void 0:n.outputs)||8),x=1,b=Ei.useRef(null),M=V=>{const A=b.current;if(!A)return;const ee=A.scrollHeight>A.clientHeight,W=A.scrollTop===0&&V.deltaY<0,H=A.scrollTop+A.clientHeight>=A.scrollHeight&&V.deltaY>0;ee&&!W&&!H||V.preventDefault(),V.stopPropagation()},k=Ly(m),v=Zl(u,c,m,_,x,r),S=Oy(m),q=hp(u,c,r),C=()=>{o(e,{trees:u,harvesters:c,sprinklers:m,outputs:_,controller:x},S,q),s()},P=()=>{l(450),p(20),g(24),h(8)},I=(V,A,ee=1,W=1/0)=>{const H=parseInt(V);!isNaN(H)&&H>=ee&&H<=W?A(H):V===""&&A("")},R=u>500||u<1||c<1||m<1||_<1;return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:s,children:f.jsxs("div",{ref:b,className:"drill-settings-bubble",onClick:V=>V.stopPropagation(),onDoubleClick:V=>V.stopPropagation(),onWheel:M,children:[f.jsx("h3",{className:"drill-settings-title",children:"Tree Farm Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Trees (max 500):"}),f.jsx("input",{type:"number",min:"1",max:"500",value:u,onChange:V=>I(V.target.value,l,1,500),className:"input",style:{borderColor:u>500||u<1?"#ef4444":void 0}})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Harvesters:"}),f.jsx("input",{type:"number",min:"1",value:c,onChange:V=>I(V.target.value,p,1),className:"input",style:{borderColor:c<1?"#ef4444":void 0}})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Sprinklers:"}),f.jsx("input",{type:"number",min:"1",value:m,onChange:V=>I(V.target.value,g,1),className:"input",style:{borderColor:m<1?"#ef4444":void 0}}),f.jsxs("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:["Requires ",k," water tank",k!==1?"s":""," (3 sprinklers per tank)"]})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Outputs:"}),f.jsx("input",{type:"number",min:"1",value:_,onChange:V=>I(V.target.value,h,1),className:"input",style:{borderColor:_<1?"#ef4444":void 0}})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Controller:"}),f.jsx("input",{type:"number",value:1,disabled:!0,className:"input",style:{backgroundColor:"var(--bg-secondary)",cursor:"not-allowed"}})]}),v&&f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Growth Time: ",v.growthTime,"s (at ",typeof r=="number"?r.toFixed(1):r,"% pollution)"]}),f.jsxs("div",{children:["Water Tanks: ",v.waterTanks]}),f.jsxs("div",{children:["Sustainable Rate: ",v.sustainableHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Max Harvest Rate: ",v.maxHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Actual Rate: ",v.actualHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Power: ",(v.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),v.isTreeLimited&&f.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[S.length>0&&f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs:"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:S.map((V,A)=>f.jsxs("div",{children:[typeof V.quantity=="number"?V.quantity.toFixed(4):V.quantity,"x ",Ln(V.product_id,vt)]},A))})]}),q.length>0&&f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--settings-output-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Outputs:"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:q.map((V,A)=>f.jsxs("div",{children:[typeof V.quantity=="number"?V.quantity.toFixed(4):V.quantity,"x ",Ln(V.product_id,vt)]},A))})]})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:P,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:C,className:"btn btn-primary",disabled:R,children:"Apply"})]})]})}),document.body)},yp=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],By={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},bM={r_industrial_firebox_07:1},Ay=e=>yp.find(n=>n.id===e),gp=(e,n)=>{const r=By[e],o=Ay(n);if(!r||!o)return null;const s=r/o.energy,u=bM[e]||0,l=s+u,c=1,p=s;return{energyNeeded:r,fuelEnergy:o.energy,waitTime:s,additionalWait:u,cycleTime:l,fuelConsumptionRate:c,fuelPerCycle:p}},zy=(e,n,r)=>{const o=gp(r,n);if(!o)return e;const s=Ay(n);if(!s)return e;const u={product_id:s.product_id,quantity:parseFloat(o.fuelPerCycle.toFixed(6))},l=yp.map(p=>p.product_id),c=e.filter(p=>p.product_id!=="p_variableproduct"&&!l.includes(p.product_id));return[u,...c]},$y=e=>e in By,kM=({nodeId:e,currentSettings:n,recipe:r,onSettingsChange:o,onClose:s})=>{const[u,l]=j.useState((n==null?void 0:n.fuel)||"p_coal"),c=Ei.useRef(null),p=x=>{const b=c.current;if(!b)return;const M=b.scrollHeight>b.clientHeight,k=b.scrollTop===0&&x.deltaY<0,v=b.scrollTop+b.clientHeight>=b.scrollHeight&&x.deltaY>0;M&&!k&&!v||x.preventDefault(),x.stopPropagation()},m=gp(r.id,u),g=m?zy(r.inputs,u,r.id):r.inputs,_=()=>{o(e,{fuel:u},g,m),s()},h=()=>{l("p_coal")};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:s,children:f.jsxs("div",{ref:c,className:"drill-settings-bubble",onClick:x=>x.stopPropagation(),onDoubleClick:x=>x.stopPropagation(),onWheel:p,children:[f.jsx("h3",{className:"drill-settings-title",children:"Industrial Firebox Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Fuel Type:"}),f.jsx("select",{value:u,onChange:x=>l(x.target.value),className:"select",children:yp.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",(x.energy/1e3).toFixed(0),"k energy)"]},x.id))})]}),m&&f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Energy Needed: ",(m.energyNeeded/1e3).toFixed(0),"k"]}),f.jsxs("div",{children:["Fuel Energy: ",(m.fuelEnergy/1e3).toFixed(0),"k per unit"]}),f.jsxs("div",{children:["Wait Time: ",m.waitTime.toFixed(2),"s"]}),m.additionalWait>0&&f.jsxs("div",{children:["Additional Wait: +",m.additionalWait,"s"]}),f.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",m.cycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Fuel Per Cycle: ",m.fuelPerCycle.toFixed(2)," units"]}),f.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/m.cycleTime).toFixed(4)," cycles/s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:g.map((x,b)=>f.jsxs("div",{children:[typeof x.quantity=="number"?x.quantity.toFixed(4):x.quantity,"x ",Ln(x.product_id,vt)]},b))})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:h,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:_,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},qM=({nodeId:e,machineId:n,currentSettings:r,recipe:o,onSettingsChange:s,onClose:u})=>{var b,M;const l=oi[n],[c,p]=j.useState((r==null?void 0:r.temperature)||((M=(b=l==null?void 0:l.tempOptions)==null?void 0:b[0])==null?void 0:M.temp)||120),m=Ei.useRef(null),g=k=>{const v=m.current;if(!v)return;const S=v.scrollHeight>v.clientHeight,q=v.scrollTop===0&&k.deltaY<0,C=v.scrollTop+v.clientHeight>=v.scrollHeight&&k.deltaY>0;S&&!q&&!C||k.preventDefault(),k.stopPropagation()};if(!l||l.type!=="configurable")return null;const _=Wq(n,c),h=k=>k?k>=1e6?`${(k/1e6).toFixed(1)} MMF/s`:k>=1e3?`${(k/1e3).toFixed(1)} kMF/s`:`${k.toFixed(0)} MF/s`:"N/A",x=()=>{const k={temperature:c},v=o.outputs.map(S=>({...S,temperature:fp(n,k)}));s(e,k,v,_),u()};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:u,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:k=>k.stopPropagation(),onDoubleClick:k=>k.stopPropagation(),onWheel:g,children:[f.jsxs("h3",{className:"drill-settings-title",children:[l.name," Settings"]}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Output Temperature:"}),f.jsx("select",{value:c,onChange:k=>p(parseInt(k.target.value)),className:"select",children:l.tempOptions.map(k=>f.jsxs("option",{value:k.temp,children:[Kl(k.temp)," - ",h(k.power)]},k.temp))})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"8px"},children:"Preview:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsxs("div",{children:["Output Temperature: ",Kl(c)]}),f.jsxs("div",{children:["Power Consumption: ",h(_)]})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:u,className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:x,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},MM=({nodeId:e,currentSettings:n,onSettingsChange:r,onClose:o})=>{const[s,u]=j.useState((n==null?void 0:n.heatLoss)??0),l=Ei.useRef(null),c=m=>{const g=l.current;if(!g)return;const _=g.scrollHeight>g.clientHeight,h=g.scrollTop===0&&m.deltaY<0,x=g.scrollTop+g.clientHeight>=g.scrollHeight&&m.deltaY>0;_&&!h&&!x||m.preventDefault(),m.stopPropagation()},p=()=>{r(e,{heatLoss:s}),o()};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:o,children:f.jsxs("div",{ref:l,className:"drill-settings-bubble",onClick:m=>m.stopPropagation(),onDoubleClick:m=>m.stopPropagation(),onWheel:c,children:[f.jsx("h3",{className:"drill-settings-title",children:"Boiler Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Heat Loss (C):"}),f.jsx("input",{type:"number",min:"0",max:"50",step:"0.1",value:s,onChange:m=>u(parseFloat(m.target.value)||0),className:"input",placeholder:"8"}),f.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:"Temperature loss when converting hot water to steam. Default is 0C."})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"8px"},children:"How it works:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsxs("div",{children:[" Boiler uses the ",f.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),f.jsxs("div",{children:[" Steam output temp = Coolant temp - ",s,"C"]}),f.jsx("div",{children:" If output temp < 100C, no steam is produced"}),f.jsx("div",{children:" Water output is cooled (no temperature)"}),f.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",s,"C loss, use ",100+s,"C coolant"]})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),f.jsx("button",{onClick:p,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},Hy=(e,n)=>{const o=(e-100)/5;let s=1,u=1;e<100?(s=1+o*.05,u=1+o*.06666666666666667):e>100&&(s=1+o*.05,u=1+o*.1);const c=(n-100)/5;let p=1,m=1;n<100?(p=1+c*-.0625,m=1+c*.05):n>100&&(p=1+c*-.0425,m=1+c*.25);const g=s*p,_=s,h=u+m-1;return{inputMultiplier:g,outputMultiplier:_,powerMultiplier:h}},CM=(e,n,r)=>{const o=Hy(n,r),s=e.inputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.inputMultiplier).toFixed(6)):c.quantity})),u=e.outputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.outputMultiplier).toFixed(6)):c.quantity})),l=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*o.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:s,outputs:u,power_consumption:l,chemicalPlantSettings:{speedFactor:n,efficiencyFactor:r}}},SM=({nodeId:e,currentSettings:n,recipe:r,onSettingsChange:o,onClose:s})=>{const[u,l]=j.useState((n==null?void 0:n.speedFactor)||100),[c,p]=j.useState((n==null?void 0:n.efficiencyFactor)||100),m=Ei.useRef(null),g=k=>{const v=m.current;if(!v)return;const S=v.scrollHeight>v.clientHeight,q=v.scrollTop===0&&k.deltaY<0,C=v.scrollTop+v.clientHeight>=v.scrollHeight&&k.deltaY>0;S&&!q&&!C||k.preventDefault(),k.stopPropagation()},_=Hy(u,c),h=k=>{l(v=>{const S=v+k*5;return Math.max(50,Math.min(200,S))})},x=k=>{p(v=>{const S=v+k*5;return Math.max(80,Math.min(120,S))})},b=()=>{o(e,{speedFactor:u,efficiencyFactor:c}),s()},M=()=>{l(100),p(100)};return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:s,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:k=>k.stopPropagation(),onDoubleClick:k=>k.stopPropagation(),onWheel:g,children:[f.jsx("h3",{className:"drill-settings-title",children:"Chemical Plant Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Speed Factor"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>h(-1),disabled:u<=50,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:u<=50?.5:1,cursor:u<=50?"not-allowed":"pointer"},children:""}),f.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:u}),f.jsx("button",{onClick:()=>h(1),disabled:u>=200,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:u>=200?.5:1,cursor:u>=200?"not-allowed":"pointer"},children:""})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[f.jsx("span",{children:"Min: 50"}),f.jsx("span",{children:"Default: 100"}),f.jsx("span",{children:"Max: 200"})]})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Efficiency Factor"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>x(-1),disabled:c<=80,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:c<=80?.5:1,cursor:c<=80?"not-allowed":"pointer"},children:""}),f.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:c}),f.jsx("button",{onClick:()=>x(1),disabled:c>=120,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:c>=120?.5:1,cursor:c>=120?"not-allowed":"pointer"},children:""})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[f.jsx("span",{children:"Min: 80"}),f.jsx("span",{children:"Default: 100"}),f.jsx("span",{children:"Max: 120"})]})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsxs("div",{children:["Input Multiplier: ",_.inputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Output Multiplier: ",_.outputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Power Multiplier: ",_.powerMultiplier.toFixed(4),"x"]})]}),f.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[f.jsx("div",{children:" Speed affects input/output quantities and power"}),f.jsx("div",{children:" Efficiency affects input quantities and power"}),f.jsx("div",{children:" Effects combine additively"})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:M,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:b,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},jr=7e3,xp=140,wp=70,Wy=1e6,Jf=240,ad=29.166666666666668,Wa=240,Uy=480,za=(e,n)=>{const r=e+n;let o;return r<=Wa?o=ad:r>=Uy?o=ad/2:o=ad*Wa/r,{cycleTime:o,concreteBlocksPerCycle:xp,leadIngotsPerCycle:wp,totalFlow:r,powerConsumption:Wy}},Ua=(e,n,r,o)=>{const s=Math.min(e,Jf),u=Math.min(n,Jf),l=s+u;let c,p;return l<=Wa?(c=jr,p=jr):l>=Uy?(c=jr/2,p=jr/2):(c=jr*Wa/l,p=jr*Wa/l),[{product_id:r||"p_variableproduct",quantity:c,isAnyProduct:r==="p_any_item"||!r,acceptedType:"item"},{product_id:o||"p_variableproduct",quantity:p,isAnyProduct:o==="p_any_fluid"||!o,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:xp},{product_id:"p_lead_ingot",quantity:wp}]},Od={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:Wy,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:jr,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:jr,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:xp},{product_id:"p_lead_ingot",quantity:wp}],outputs:[],isWasteFacility:!0},NM=({nodeId:e,currentSettings:n,onSettingsChange:r,onClose:o})=>{const[s,u]=j.useState((n==null?void 0:n.itemProductId)||"p_any_item"),[l,c]=j.useState((n==null?void 0:n.fluidProductId)||"p_any_fluid"),[p,m]=j.useState(""),[g,_]=j.useState(""),h=Ei.useRef(null),x=C=>{const P=h.current;if(!P)return;const I=P.scrollHeight>P.clientHeight,R=P.scrollTop===0&&C.deltaY<0,V=P.scrollTop+P.clientHeight>=P.scrollHeight&&C.deltaY>0;I&&!R&&!V||C.preventDefault(),C.stopPropagation()},b=Ua(0,0,s,l),M=(C,P)=>{C==="item"?u(P):C==="fluid"&&c(P)},k=()=>{r(e,{itemProductId:s,fluidProductId:l},b,[]),o()},v=()=>{u("p_any_item"),c("p_any_fluid"),m(""),_("")},S=gn.filter(C=>{if(C.type!=="item")return!1;const P=C.name.toLowerCase().includes(p.toLowerCase()),I=C.id===s;return P||I}).sort((C,P)=>C.name.localeCompare(P.name)),q=gn.filter(C=>{if(C.type!=="fluid")return!1;const P=C.name.toLowerCase().includes(g.toLowerCase()),I=C.id===l;return P||I}).sort((C,P)=>C.name.localeCompare(P.name));return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:o,children:f.jsxs("div",{ref:h,className:"drill-settings-bubble",onClick:C=>C.stopPropagation(),onDoubleClick:C=>C.stopPropagation(),onWheel:x,children:[f.jsx("h3",{className:"drill-settings-title",children:"Underground Waste Facility Settings"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Search Items:"}),f.jsx("input",{type:"text",value:p,onChange:C=>m(C.target.value),placeholder:"Search items...",className:"input",style:{marginBottom:"10px"}})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Item Input Product:"}),f.jsxs("select",{value:s,onChange:C=>M("item",C.target.value),className:"select",children:[f.jsx("option",{value:"p_any_item",children:"Any Item"}),S.map(C=>f.jsx("option",{value:C.id,children:C.name},C.id))]})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"15px"},children:[f.jsx("label",{className:"drill-setting-label",children:"Search Fluids:"}),f.jsx("input",{type:"text",value:g,onChange:C=>_(C.target.value),placeholder:"Search fluids...",className:"input",style:{marginBottom:"10px"}})]}),f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Fluid Input Product:"}),f.jsxs("select",{value:l,onChange:C=>M("fluid",C.target.value),className:"select",children:[f.jsx("option",{value:"p_any_fluid",children:"Any Fluid"}),q.map(C=>f.jsx("option",{value:C.id,children:C.name},C.id))]})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"10px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",fontSize:"12px"},children:[f.jsx("div",{style:{color:"#60a5fa",fontWeight:600,marginBottom:"6px"},children:" How it works:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5"},children:[f.jsx("div",{children:" Each input accepts up to 240/s"}),f.jsx("div",{children:" Fixed requirements per cycle:"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:v,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:k,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},Bd=15,EM=2,IM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ho=(e,n=null)=>{let r=0;return e.forEach((o,s)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const u=n&&n[s]!==void 0?n[s]:o.quantity||0;IM.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*u:r+=.0216*u}),r},Gy=e=>{const n=[];for(let r=0;r<EM;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";n.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:Bd})}return n},Ad={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:Bd},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:Bd}],outputs:[],isLiquidDump:!0},PM=({nodeId:e,currentSettings:n,recipe:r,onSettingsChange:o,onClose:s})=>{const[u,l]=j.useState((n==null?void 0:n.fluidProductIds)||Array(2).fill("p_any_fluid")),[c,p]=j.useState(""),m=Ei.useRef(null),g=v=>{const S=m.current;if(!S)return;const q=S.scrollHeight>S.clientHeight,C=S.scrollTop===0&&v.deltaY<0,P=S.scrollTop+S.clientHeight>=S.scrollHeight&&v.deltaY>0;q&&!C&&!P||v.preventDefault(),v.stopPropagation()},_=Gy(u),h=Ho(_),x=(v,S)=>{const q=[...u];q[v]=S,l(q)},b=()=>{o(e,{fluidProductIds:u},_,[]),s()},M=()=>{l(Array(2).fill("p_any_fluid")),p("")},k=gn.filter(v=>{if(v.type!=="fluid")return!1;const S=v.name.toLowerCase().includes(c.toLowerCase()),q=u.includes(v.id);return S||q}).sort((v,S)=>v.name.localeCompare(S.name));return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:s,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:v=>v.stopPropagation(),onDoubleClick:v=>v.stopPropagation(),onWheel:g,children:[f.jsx("h3",{className:"drill-settings-title",children:"Liquid Dump Info"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Search Products:"}),f.jsx("input",{type:"text",value:c,onChange:v=>p(v.target.value),placeholder:"Search fluids...",className:"input",style:{marginBottom:"15px"}})]}),[0,1].map(v=>f.jsxs("div",{className:"drill-setting-group",children:[f.jsxs("label",{className:"drill-setting-label",children:["Input ",v+1," Product:"]}),f.jsxs("select",{value:u[v],onChange:S=>x(v,S.target.value),className:"select",children:[f.jsx("option",{value:"p_any_fluid",children:"Any Fluid"}),k.map(S=>f.jsx("option",{value:S.id,children:S.name},S.id))]})]},v)),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"8px"},children:"Pollution Calculation:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",h.toFixed(4),"%/hr"]})})]})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"15px",padding:"10px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",fontSize:"12px"},children:[f.jsx("div",{style:{color:"#60a5fa",fontWeight:600,marginBottom:"6px"},children:" How it works:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5"},children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to dispose of them"}),f.jsx("div",{children:" Water variants produce no pollution"})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:M,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:b,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},Yy=15,Qy=8,TM=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Wo=(e,n=null)=>{let r=0;return e.forEach((o,s)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const u=n&&n[s]!==void 0?n[s]:o.quantity||0;TM.includes(o.product_id)?r+=0:o.product_id==="p_residue"?r+=8.64*u:r+=.0216*u}),r},Xy=e=>{const n=[];for(let r=0;r<Qy;r++){const o=(e==null?void 0:e[r])||"p_variableproduct";n.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:Yy})}return n},zd={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(Qy).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:Yy})),outputs:[],isLiquidBurner:!0},RM=({nodeId:e,currentSettings:n,recipe:r,onSettingsChange:o,onClose:s})=>{const[u,l]=j.useState((n==null?void 0:n.fluidProductIds)||Array(8).fill("p_any_fluid")),[c,p]=j.useState(""),m=Ei.useRef(null),g=v=>{const S=m.current;if(!S)return;const q=S.scrollHeight>S.clientHeight,C=S.scrollTop===0&&v.deltaY<0,P=S.scrollTop+S.clientHeight>=S.scrollHeight&&v.deltaY>0;q&&!C&&!P||v.preventDefault(),v.stopPropagation()},_=Xy(u),h=Wo(_),x=(v,S)=>{const q=[...u];q[v]=S,l(q)},b=()=>{o(e,{fluidProductIds:u},_,[]),s()},M=()=>{l(Array(8).fill("p_any_fluid")),p("")},k=gn.filter(v=>{if(v.type!=="fluid")return!1;const S=v.name.toLowerCase().includes(c.toLowerCase()),q=u.includes(v.id);return S||q}).sort((v,S)=>v.name.localeCompare(S.name));return An.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:s,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:v=>v.stopPropagation(),onDoubleClick:v=>v.stopPropagation(),onWheel:g,children:[f.jsx("h3",{className:"drill-settings-title",children:"Liquid Burner Info"}),f.jsxs("div",{className:"drill-settings-content",children:[f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:"Search Products:"}),f.jsx("input",{type:"text",value:c,onChange:v=>p(v.target.value),placeholder:"Search fluids...",className:"input",style:{marginBottom:"15px"}})]}),[0,1,2,3,4,5,6,7].map(v=>f.jsxs("div",{className:"drill-setting-group",children:[f.jsxs("label",{className:"drill-setting-label",children:["Input ",v+1," Product:"]}),f.jsxs("select",{value:u[v],onChange:S=>x(v,S.target.value),className:"select",children:[f.jsx("option",{value:"p_any_fluid",children:"Any Fluid"}),k.map(S=>f.jsx("option",{value:S.id,children:S.name},S.id))]})]},v)),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"8px"},children:"Pollution Calculation:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",h.toFixed(4),"%/hr"]})})]})]}),f.jsxs("div",{className:"drill-setting-group",style:{marginTop:"15px",padding:"10px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",fontSize:"12px"},children:[f.jsx("div",{style:{color:"#60a5fa",fontWeight:600,marginBottom:"6px"},children:" How it works:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5"},children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),f.jsx("div",{children:" Water variants produce no pollution"})]})]})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:M,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:b,className:"btn btn-primary",children:"Apply"})]})]})}),document.body)},ql=44,sd=8,e0=20,Jl=10,VM=20,jM=320,Ml=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,FM=(e,n,r=16)=>{const o=r*.61,s=e.length*o;return Math.ceil(s/n)},DM=j.memo(({data:e,id:n})=>{var Pi,Mn,sn,zi;const{recipe:r,machine:o,machineCount:s,displayMode:u,machineDisplayMode:l,onInputClick:c,onOutputClick:p,isTarget:m,onDrillSettingsChange:g,onLogicAssemblerSettingsChange:_,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:x,onTemperatureSettingsChange:b,onBoilerSettingsChange:M,onChemicalPlantSettingsChange:k,globalPollution:v,flows:S}=e,[q,C]=j.useState(!1),[P,I]=j.useState(!1),[R,V]=j.useState(!1),[A,ee]=j.useState(!1),[W,H]=j.useState(!1),[te,T]=j.useState(!1),[Z,U]=j.useState(!1),[J,O]=j.useState(!1),[B,Q]=j.useState(!1),[F,G]=j.useState(!1);if(!(r!=null&&r.inputs)||!(r!=null&&r.outputs)||!o)return null;const ce=r.isMineshaftDrill||r.id==="r_mineshaft_drill",le=r.isLogicAssembler||r.id==="r_logic_assembler",me=r.isTreeFarm||r.id==="r_tree_farm",ge=r.isWasteFacility||r.id==="r_underground_waste_facility",xe=r.isLiquidDump||r.id==="r_liquid_dump",se=r.isLiquidBurner||r.id==="r_liquid_burner",ve=ce||le||me||ge||xe||se,Oe=Uq(o.id),$e=Gq(o.id),Le=oi[o.id],Fe=o.id==="m_industrial_firebox"&&r.id!=="r_industrial_firebox_07",Qe=o.id==="m_chemical_plant",Je=vn(o.id),He=Je?On[o.id]:null;let Ze=r.cycle_time;const Dt=Ze==="Variable"||typeof Ze!="number"||Ze<=0;if(Dt&&!ve?Ze="Variable":Dt&&ve&&(Ze=1),Je&&(He==null?void 0:He.type)==="steam_input"&&typeof Ze=="number"&&!(o.id==="m_steam_cracking_plant"&&!ho(r))){const ye=r.tempDependentInputTemp??lr;Ze=Lr(o.id,ye,Ze)}const Tt={outputs:[]};if(Le){const ye=Le.type==="boiler",et=(Pi=r.outputs)==null?void 0:Pi.some(Me=>["p_water","p_filtered_water","p_distilled_water"].includes(Me.product_id)),ut=(Mn=r.outputs)==null?void 0:Mn.some(Me=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Me.product_id)),Gt=(sn=r.inputs)==null?void 0:sn.some(Me=>["p_water","p_filtered_water","p_distilled_water"].includes(Me.product_id)),Jt=r.id==="r_industrial_firebox_07",ei=o.id==="m_industrial_firebox";(!ei||ei&&!Jt&&(Gt||et))&&((zi=r.outputs)==null||zi.forEach((Me,$n)=>{if(Ey(Me.product_id)&&Me.temperature!=null){const $i=["p_water","p_filtered_water","p_distilled_water"].includes(Me.product_id),Cn=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Me.product_id);ye?Cn&&ut&&Tt.outputs.push({temp:Me.temperature,index:$n}):($i&&et||Cn&&ut)&&Tt.outputs.push({temp:Me.temperature,index:$n})}}))}const yt=ye=>{if(ye==="Variable")return"Variable";if(typeof ye!="number")return String(ye);if(Ze==="Variable")return u==="perSecond"?"Variable":String(Ml(ye));let et=u==="perSecond"?ye/Ze:ye;return l==="total"&&(et*=s||0),String(Ml(et))},Ke=(ye=>{if(ye==="Variable"||typeof ye!="number")return ye;if(u==="perSecond")return"1s";if(ye>=60){const et=Math.floor(ye/60),ut=ye%60;return`${et}m ${Ml(ut)}s`}return`${Ml(ye)}s`})(Ze);let Ht=r.power_consumption,Ai=r.pollution;l==="total"&&typeof s=="number"&&s>0&&(typeof r.power_consumption=="number"?Ht=r.power_consumption*s:typeof r.power_consumption=="object"&&r.power_consumption!==null&&r.power_consumption!=="Variable"&&("drilling"in r.power_consumption&&"idle"in r.power_consumption?Ht={drilling:typeof r.power_consumption.drilling=="number"?r.power_consumption.drilling*s:r.power_consumption.drilling,idle:typeof r.power_consumption.idle=="number"?r.power_consumption.idle*s:r.power_consumption.idle}:"max"in r.power_consumption&&"average"in r.power_consumption&&(Ht={max:typeof r.power_consumption.max=="number"?r.power_consumption.max*s:r.power_consumption.max,average:typeof r.power_consumption.average=="number"?r.power_consumption.average*s:r.power_consumption.average})),typeof r.pollution=="number"&&(Ai=r.pollution*s));const gt=zq(Ht),Xt=typeof gt=="object"&&gt!==null&&("drilling"in gt&&"idle"in gt||"max"in gt&&"average"in gt),Wt=r.power_type==="HV"?" HV":"",qt=r.inputs.length,Kt=r.outputs.length,lt=Math.max(qt,Kt,1),tn=lt>=5?8:24,Lt=ye=>ye!=null&&ye.length?Math.max(80,...ye.map(et=>{const ut=Ln(et.product_id,vt);return yt(et.quantity).length*10+ut.length*10+20})):80,kn=qt>0?Lt(r.inputs):0,Ot=Kt>0?Lt(r.outputs):0,fi=qt>0,Rt=Kt>0,si=fi&&Rt?kn+Ot+VM+Jl*2:(fi?kn:Ot)+Jl*2,Vt=Math.max(si,jM),Bt=Vt-30-30,li=FM(r.name,Bt,14),nn=li>1?(li-1)*22:0,yi=109+tn*Math.ceil(lt/2)+nn,ui=yi+lt*ql+(lt-1)*sd+e0,qn=ye=>{if(ye===0)return[];const et=ye*ql+(ye-1)*sd,ut=ui-yi-e0,Gt=Math.max((ut-et)/2,0);return Array.from({length:ye},(Jt,ei)=>yi+Gt+ei*(ql+sd))},Et=qn(qt),rn=qn(Kt),Ii=ye=>ye.map(et=>(et+ql/2)/ui*100),on=s??0,Zt=Number.isInteger(on)?on.toString():on.toFixed(2),an=l==="total"?{color:"var(--text-muted)",opacity:.5}:{};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`custom-node ${m?"target":""}`,style:{width:Vt,height:ui},onMouseDownCapture:ye=>{ye.button===1&&(ye.preventDefault(),ye.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(n))},children:[Tt.outputs.length>0&&f.jsx("div",{onDoubleClick:ye=>ye.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:Tt.outputs.map((ye,et)=>f.jsx("div",{children:Kl(ye.temp)},`output-${et}`))}),Je&&(He==null?void 0:He.type)==="steam_input"&&ho(r)&&f.jsx("div",{onDoubleClick:ye=>ye.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Kl(r.tempDependentInputTemp??lr)}),ce&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),C(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),le&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),I(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),me&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),V(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),Fe&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),ee(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),Qe&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),U(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),ge&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),O(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),xe&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),Q(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),se&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),G(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),Oe&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),H(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),$e&&f.jsx("button",{onClick:ye=>{ye.stopPropagation(),T(!0)},onDoubleClick:ye=>ye.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),f.jsx("div",{className:"node-recipe-name",title:r.name,style:{paddingLeft:"30px",paddingRight:"30px"},children:r.name}),f.jsxs("div",{className:"node-stats-row",children:[f.jsxs("div",{className:"node-stats",children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",Ke]}),Xt?"drilling"in gt?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",gt.drilling,Wt]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",gt.idle,Wt]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",gt.max,Wt]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",gt.average,Wt]})]}):f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power:"})," ",gt,Wt]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",$q(Ai)]})]}),f.jsxs("div",{className:"node-machine-info",children:[f.jsx("div",{className:"node-machine-name",title:o.name,style:{color:o.tier===1?"var(--tier-1-color)":o.tier===2?"var(--tier-2-color)":o.tier===3?"var(--tier-3-color)":o.tier===4?"var(--tier-4-color)":(o.tier===5,"var(--tier-5-color)")},children:o.name}),f.jsx("div",{className:"node-machine-count",style:an,title:l==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Zt})]})]}),Et.map((ye,et)=>{const ut=r.inputs[et];return ut?f.jsxs(Ei.Fragment,{children:[f.jsx(t0,{side:"left",index:et,position:ye,width:kn,isOnly:!Rt,input:ut,onClick:c,nodeId:n,formatQuantity:yt}),f.jsx(i0,{side:"left",index:et,position:Ii(Et)[et],onClick:c,nodeId:n,productId:ut.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:ut})]},`left-${n}-${et}-${ut.product_id}`):null}),rn.map((ye,et)=>{const ut=r.outputs[et];return ut?f.jsxs(Ei.Fragment,{children:[f.jsx(t0,{side:"right",index:et,position:ye,width:Ot,isOnly:!fi,input:ut,onClick:p,nodeId:n,formatQuantity:yt}),f.jsx(i0,{side:"right",index:et,position:Ii(rn)[et],onClick:p,nodeId:n,productId:ut.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:ut})]},`right-${n}-${et}-${ut.product_id}`):null})]}),q&&f.jsx(uM,{nodeId:n,currentSettings:r.drillSettings||{},onSettingsChange:g,onClose:()=>C(!1)}),P&&f.jsx(gM,{nodeId:n,currentSettings:r.assemblerSettings||{},onSettingsChange:_,onClose:()=>I(!1)}),W&&f.jsx(qM,{nodeId:n,machineId:o.id,currentSettings:r.temperatureSettings||{},recipe:r,onSettingsChange:b,onClose:()=>H(!1)}),te&&f.jsx(MM,{nodeId:n,currentSettings:r.temperatureSettings||{},onSettingsChange:M,onClose:()=>T(!1)}),R&&f.jsx(vM,{nodeId:n,currentSettings:r.treeFarmSettings||{},globalPollution:v||0,onSettingsChange:h,onClose:()=>V(!1)}),A&&f.jsx(kM,{nodeId:n,currentSettings:r.fireboxSettings||{},recipe:r,onSettingsChange:x,onClose:()=>ee(!1)}),Z&&f.jsx(SM,{nodeId:n,currentSettings:r.chemicalPlantSettings||{},recipe:r,onSettingsChange:k,onClose:()=>U(!1)}),J&&f.jsx(NM,{nodeId:n,currentSettings:r.wasteFacilitySettings||{},onSettingsChange:e.onWasteFacilitySettingsChange,onClose:()=>O(!1)}),B&&f.jsx(PM,{nodeId:n,currentSettings:r.liquidDumpSettings||{},recipe:r,onSettingsChange:e.onLiquidDumpSettingsChange,onClose:()=>Q(!1)}),F&&f.jsx(RM,{nodeId:n,currentSettings:r.liquidBurnerSettings||{},recipe:r,onSettingsChange:e.onLiquidBurnerSettingsChange,onClose:()=>G(!1)})]})},(e,n)=>{if(e.id!==n.id)return!1;const r=e.data,o=n.data;return!(r.machineCount!==o.machineCount||r.displayMode!==o.displayMode||r.machineDisplayMode!==o.machineDisplayMode||r.isTarget!==o.isTarget||r.globalPollution!==o.globalPollution||r.recipe!==o.recipe||r.flows!==o.flows||r.suggestions!==o.suggestions)}),t0=({side:e,index:n,position:r,width:o,isOnly:s,input:u,onClick:l,nodeId:c,formatQuantity:p})=>{const m=e==="left",g=Ln(u.product_id,vt,u.acceptedType),_=p(u.quantity);return f.jsxs("div",{onClick:h=>{l&&(h.stopPropagation(),l(u.product_id,c,n,h))},title:`${_}x ${g}`,className:`node-rect ${m?"input":"output"} ${l?"clickable":""}`,style:{left:s?"50%":m?`${Jl}px`:void 0,right:!s&&!m?`${Jl}px`:void 0,transform:s?"translateX(-50%)":void 0,top:`${r}px`,width:`${o}px`},children:[_,"x ",g]})},i0=({side:e,index:n,position:r,onClick:o,nodeId:s,productId:u,flows:l,onHandleDoubleClick:c,suggestions:p,input:m})=>{var C,P;const _=getComputedStyle(document.documentElement),h=_.getPropertyValue("--handle-input-supplied").trim(),x=_.getPropertyValue("--handle-input-deficient").trim(),b=_.getPropertyValue("--handle-output-connected").trim(),M=_.getPropertyValue("--handle-output-excess").trim();let k=e==="left"?h:b;if(l){const I=e==="left"?(C=l.inputFlows)==null?void 0:C[n]:(P=l.outputFlows)==null?void 0:P[n];if(I){const R=e==="left"?I.needed-I.connected:I.produced-I.connected;Math.abs(R)>1e-6&&R>0&&(k=e==="left"?x:M)}}const v=vt(u),q=(v==null?void 0:v.type)==="fluid"||u==="p_any_fluid"?"50%":"2px";return f.jsx(ns,{type:e==="left"?"target":"source",position:e==="left"?Be.Left:Be.Right,id:`${e}-${n}`,style:{background:k,width:"12px",height:"12px",border:"2px solid #1a1a1a",top:`${r}%`,borderRadius:q},onClick:I=>{o&&I.ctrlKey&&(I.stopPropagation(),o(u,s,n,I))},onDoubleClick:I=>{c&&(I.stopPropagation(),c(s,e,n,u,p))}})},LM=(e,n,r,o,s,u)=>{if(r>e){const m=(e+r)/2;return[`M ${e},${n} L ${m},${n} L ${m},${o} L ${r},${o}`,m,(n+o)/2]}else{const m=e+40,g=r-40,_=(n+o)/2+((n+o)/2<300?20:-20);return[`M ${e},${n} L ${m},${n} L ${m},${_} L ${g},${_} L ${g},${o} L ${r},${o}`,(m+g)/2,_]}},OM=({id:e,sourceX:n,sourceY:r,targetX:o,targetY:s,sourcePosition:u,targetPosition:l,data:c})=>{const p=(c==null?void 0:c.edgePath)||"orthogonal",m=(c==null?void 0:c.edgeStyle)||"animated",[g]=j.useMemo(()=>p==="straight"?op({sourceX:n,sourceY:r,targetX:o,targetY:s}):p==="orthogonal"?LM(n,r,o,s):rp({sourceX:n,sourceY:r,sourcePosition:u,targetX:o,targetY:s,targetPosition:l}),[n,r,o,s,u,l,p]),_=m==="animated"?"custom-edge custom-edge-animated":m==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return f.jsx("path",{id:e,className:_,d:g,fill:"none"})},Qo={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},BM=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:Qo},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],eu=e=>{const n=document.documentElement;Object.entries(e).forEach(([r,o])=>{const s="--"+r.replace(/([A-Z])/g,"-$1").toLowerCase();n.style.setProperty(s,o)})},jl=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):Qo}catch{return Qo}},$d=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),AM=()=>(eu(Qo),$d(Qo),Qo),zM=({onClose:e})=>{const[n,r]=j.useState(jl()),[o,s]=j.useState(!1),u=_=>{const h={edgePath:n.edgePath||"orthogonal",edgeStyle:n.edgeStyle||"animated"},x={..._.theme,...h};r(x),eu(x),$d(x)},l=(_,h)=>{const x={...n,[_]:h};r(x),eu(x),$d(x)},c=()=>{const _=AM();r(_)},p=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],m=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],g=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),style:{width:o?"700px":"600px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Theme Editor"}),o?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>s(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Path Type:"}),f.jsx("select",{value:n.edgePath||"bezier",onChange:_=>l("edgePath",_.target.value),className:"select",style:{marginTop:"6px"},children:m.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Line Style:"}),f.jsx("select",{value:n.edgeStyle||"animated",onChange:_=>l("edgeStyle",_.target.value),className:"select",style:{marginTop:"6px"},children:g.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]})]})]}),p.map(_=>f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:_.title}),f.jsx("div",{className:"theme-color-grid",children:_.colors.map(h=>{const x=n[h.key]||"#000000",b=x.length>7?x.substring(0,7):x;return f.jsxs("div",{className:"theme-color-item",children:[f.jsx("label",{className:"theme-color-label",children:h.label}),f.jsxs("div",{className:"theme-color-inputs",children:[f.jsx("input",{type:"color",value:b,onChange:M=>{const k=n[h.key];if(k&&k.length>7){const v=k.substring(7);l(h.key,M.target.value+v)}else l(h.key,M.target.value)},className:"theme-color-picker"}),f.jsx("input",{type:"text",value:n[h.key],onChange:M=>l(h.key,M.target.value),className:"input theme-color-text"})]})]},h.key)})})]},_.title))]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:c,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[f.jsx("div",{style:{marginBottom:"20px"},children:f.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:BM.map(_=>f.jsx("div",{onClick:()=>u(_),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:_.name}),f.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:_.description})]}),f.jsx("div",{style:{display:"flex",gap:"6px"},children:[_.theme.colorPrimary,_.theme.bgMain,_.theme.inputBorder,_.theme.outputBorder].map((h,x)=>f.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},x))})]})},_.id))})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:()=>s(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},n0=(e,n)=>{const r=new Map,o=new Map,{sorted:s,cycleNodes:u}=HM(e);Object.keys(e.nodes).forEach(c=>{const p=e.nodes[c];p&&(p.inputs.forEach((m,g)=>{o.set(`${c}:${g}`,Li)}),p.outputs.forEach((m,g)=>{r.set(`${c}:${g}`,Li)}))});const l=(c,p=!1)=>{const m=e.nodes[c];if(!m)return!1;const g={id:m.recipe.machine_id},_=oi[g.id];let h=!1;return m.inputs.forEach((x,b)=>{const M=$M(e,n,c,b,r,!p),k=o.get(`${c}:${b}`),v=M!==null?M:k;Math.abs(v-k)>.01&&(o.set(`${c}:${b}`,v),h=!0)}),m.outputs.forEach((x,b)=>{var k,v;let M=Li;if(_){if(_.type==="fixed")M=_.outputTemp;else if(_.type==="additive"){const S=m.inputs.findIndex(q=>["p_water","p_filtered_water","p_distilled_water"].includes(q.productId));if(S>=0){const q=o.get(`${c}:${S}`);M=Math.min((q??Li)+_.tempIncrease,_.maxTemp)}}else if(_.type==="configurable")M=((k=m.recipe.temperatureSettings)==null?void 0:k.temperature)||_.tempOptions[0].temp;else if(_.type==="product_dependent"){const S=m.inputs.findIndex(q=>["p_water","p_filtered_water","p_distilled_water"].includes(q.productId));if(S>=0){const q=m.inputs[S].productId;M=_.temps[q]||_.temps.p_water||400}}else if(_.type==="boiler"){if(m.inputs.length>=2){const S=o.get(`${c}:1`)||sr,q=((v=m.recipe.temperatureSettings)==null?void 0:v.heatLoss)||_.defaultHeatLoss;M=S-q,M<_.minSteamTemp&&(M=Math.max(M,Li))}}else if(_.type==="passthrough"){const S=m.inputs.findIndex(q=>q.productId===_.inputProduct);S>=0&&(M=o.get(`${c}:${S}`)||Li)}if(_.maxTemp&&M>_.maxTemp){const S=m.inputs.findIndex(q=>["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(q.productId));if(S>=0){const q=o.get(`${c}:${S}`);q!=null&&(M=q)}}}r.set(`${c}:${b}`,M)}),h};if(s.forEach(c=>{u.has(c)||l(c)}),u.size>0){let p=0,m=!0;for(;m&&p<50;)m=!1,u.forEach(_=>{l(_,!0)&&(m=!0)}),p++;const g=new Set;s.forEach(_=>{if(u.has(_))return;const h=e.nodes[_];h&&h.inputs.forEach((x,b)=>{const M=e.products[x.productId];if(!M)return;M.connections.filter(v=>v.targetNodeId===_&&v.targetInputIndex===b).forEach(v=>{u.has(v.sourceNodeId)&&g.add(_)})})}),g.forEach(_=>{l(_,!1)})}return{outputTemperatures:r,inputTemperatures:o}},$M=(e,n,r,o,s,u=!0)=>{const l=e.products[e.nodes[r].inputs[o].productId];if(!l)return u?Li:null;const c=l.connections.filter(_=>_.targetNodeId===r&&_.targetInputIndex===o);if(c.length===0)return u?Li:null;let p=0,m=0,g=!1;return c.forEach(_=>{var x;const h=s.get(`${_.sourceNodeId}:${_.sourceOutputIndex}`);if(h!=null){g=!0;const b=((x=n.byConnection[_.id])==null?void 0:x.flowRate)||0;p+=b,m+=h*b}}),!g||p===0?u?Li:null:Math.round(m/p*1e10)/1e10},HM=e=>{const n=[],r=new Set,o=new Set,s=new Set,u=(l,c=[])=>{if(r.has(l))return;if(o.has(l)){const g=c.indexOf(l);for(let _=g;_<c.length;_++)s.add(c[_]);s.add(l);return}o.add(l);const p=[...c,l],m=e.nodes[l];m&&m.inputs.forEach((g,_)=>{const h=e.products[g.productId];h&&h.connections.filter(b=>b.targetNodeId===l&&b.targetInputIndex===_).forEach(b=>{r.has(b.sourceNodeId)||u(b.sourceNodeId,p)})}),o.delete(l),r.add(l),n.push(l)};return Object.keys(e.nodes).forEach(l=>{r.has(l)||u(l)}),{sorted:n,cycleNodes:s}},Hd=(e,n,r)=>e.map(o=>{if(!r.nodes[o.id])return o;const u={id:o.data.recipe.machine_id},l=oi[u.id],c=vn(u.id),p=o.data.recipe.outputs.map((g,_)=>{const h=n.outputTemperatures.get(`${o.id}:${_}`);if(h!=null){if((l==null?void 0:l.type)==="boiler"&&g.product_id==="p_steam"){const x=l.minSteamTemp||100;return h<x?{...g,temperature:h,quantity:0,originalQuantity:g.originalQuantity||g.quantity}:{...g,temperature:h,quantity:g.originalQuantity||g.quantity,originalQuantity:g.originalQuantity||g.quantity}}return{...g,temperature:h}}return g});let m={...o.data.recipe,outputs:p};if(c){const g=On[u.id];if((g==null?void 0:g.type)==="steam_input"){const _=o.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(_>=0){const h=n.inputTemperatures.get(`${o.id}:${_}`);if(h!=null&&(m={...m,tempDependentInputTemp:h},u.id==="m_water_treatment_plant")){const b=90*Lr(u.id,h,1);m={...m,inputs:m.inputs.map((M,k)=>k===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(M.product_id)?{...M,quantity:b,originalQuantity:90}:M)}}}}}return{...o,data:{...o.data,recipe:m}}}),Ga=(e,n)=>{var u,l,c,p;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const r={nodes:{},products:{},connections:[]},o=e.length;for(let m=0;m<o;m++){const g=e[m],_=g.id,h=(u=g.data)==null?void 0:u.recipe,x=((l=g.data)==null?void 0:l.machineCount)||0,b=(c=g.data)==null?void 0:c.machine;if(!h)return;const M=h.isMineshaftDrill||h.id==="r_mineshaft_drill",k=h.isLogicAssembler||h.id==="r_logic_assembler",v=h.isTreeFarm||h.id==="r_tree_farm",S=b&&b.id==="m_industrial_firebox",q=b&&vn(b.id),C=M||k||v||S||q;let P=h.cycle_time;if(P==="Variable"||typeof P!="number"||P<=0){if(!C)return;P=1}const I=b&&vn(b.id),R=I?On[b.id]:null;if(I&&(R==null?void 0:R.type)==="steam_input"&&!(b.id==="m_steam_cracking_plant"&&!ho(h))){const ee=h.tempDependentInputTemp??lr;P=Lr(b.id,ee,P)}const V={id:_,recipe:h,machineCount:x,cycleTime:P,isSpecialRecipe:C,isMineshaftDrill:M,isLogicAssembler:k,isTempDependent:I,inputs:[],outputs:[]};(p=h.inputs)==null||p.forEach((ee,W)=>{const H=ee.product_id;if(H==="p_variableproduct")return;const te=typeof ee.quantity=="number"?ee.quantity:0;if(ee.quantity==="Variable"&&!C)return;const T=M?te*x:te/P*x,Z=V.inputs.length;V.inputs.push({productId:H,quantity:te,rate:T,index:Z,connectedRate:0,temperature:null}),r.products[H]||(r.products[H]={producers:[],consumers:[],connections:[]}),r.products[H].consumers.push({nodeId:_,inputIndex:Z,rate:T})});const A=h.outputs;A==null||A.forEach((ee,W)=>{const H=ee.product_id;if(H==="p_variableproduct")return;const te=typeof ee.quantity=="number"?ee.quantity:0;if(ee.quantity==="Variable"&&!C)return;const T=M?te*x:te/P*x,Z=V.outputs.length;V.outputs.push({productId:H,quantity:te,rate:T,index:Z,connectedRate:0,temperature:ee.temperature||null}),r.products[H]||(r.products[H]={producers:[],consumers:[],connections:[]}),r.products[H].producers.push({nodeId:_,outputIndex:Z,rate:T})}),r.nodes[_]=V}const s=n.length;for(let m=0;m<s;m++){const g=n[m],_=r.nodes[g.source],h=r.nodes[g.target];if(!_||!h)continue;const x=parseInt(g.sourceHandle.split("-")[1]),b=parseInt(g.targetHandle.split("-")[1]),M=_.outputs[x],k=h.inputs[b];if(!M||!k||M.productId!==k.productId)return;const v=M.productId;M.temperature!==void 0&&M.temperature!==null&&(k.temperature=M.temperature);const S={id:g.id,sourceNodeId:g.source,targetNodeId:g.target,sourceOutputIndex:x,targetInputIndex:b,productId:v,sourceRate:M.rate,targetRate:k.rate,flowRate:0,temperature:M.temperature||null};r.connections.push(S),r.products[v]&&r.products[v].connections.push(S)}return r};class WM{constructor(n=100){this.cache=new Map,this.maxSize=n}get(n){if(!this.cache.has(n))return null;const r=this.cache.get(n);return this.cache.delete(n),this.cache.set(n,r),r}set(n,r){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(n,r)}clear(){this.cache.clear()}}let Wd=new WM(100);class UM{constructor(n){this.parent=new Int32Array(n),this.rank=new Int32Array(n);for(let r=0;r<n;r++)this.parent[r]=r}find(n){return this.parent[n]!==n&&(this.parent[n]=this.find(this.parent[n])),this.parent[n]}union(n,r){const o=this.find(n),s=this.find(r);o!==s&&(this.rank[o]<this.rank[s]?this.parent[o]=s:this.rank[o]>this.rank[s]?this.parent[s]=o:(this.parent[s]=o,this.rank[o]++))}}const GM=(e,n)=>{const r=e.products[n];if(!r)return{components:[],portToComponent:new Map};const o=[],s=new Map;r.producers.forEach(g=>{const _=`out:${g.nodeId}:${g.outputIndex}`;s.has(_)||(s.set(_,o.length),o.push({type:"output",nodeId:g.nodeId,index:g.outputIndex,rate:g.rate}))}),r.consumers.forEach(g=>{const _=`in:${g.nodeId}:${g.inputIndex}`;s.has(_)||(s.set(_,o.length),o.push({type:"input",nodeId:g.nodeId,index:g.inputIndex,rate:g.rate}))});const u=new UM(o.length);r.connections.forEach(g=>{const _=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,h=`in:${g.targetNodeId}:${g.targetInputIndex}`,x=s.get(_),b=s.get(h);x!==void 0&&b!==void 0&&u.union(x,b)});const l=new Map;for(let g=0;g<o.length;g++){const _=u.find(g);l.has(_)||l.set(_,[]),l.get(_).push(g)}const c=[],p=new Map;let m=0;return l.forEach((g,_)=>{const h={id:m,ports:g.map(x=>o[x]),connections:[]};r.connections.forEach(x=>{const b=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,M=s.get(b);M!==void 0&&u.find(M)===_&&h.connections.push(x)}),g.forEach(x=>{const b=o[x],M=b.type==="output"?`out:${b.nodeId}:${b.index}`:`in:${b.nodeId}:${b.index}`;p.set(M,m)}),c.push(h),m++}),{components:c,portToComponent:p,ports:o,portToIndex:s}},YM=e=>{const n=e.ports.map(o=>`${o.type}:${o.nodeId}:${o.index}:${o.rate}`).sort().join("|"),r=e.connections.map(o=>`${o.sourceNodeId}:${o.sourceOutputIndex}->${o.targetNodeId}:${o.targetInputIndex}`).sort().join("|");return`${n}##${r}`},QM=(e,n,r)=>{const o=Ky(e,n),s=Zy(e,n),u={totalProduction:o,totalConsumption:s,connectedFlow:0,connections:{}};if(r.length===0)return u;const{components:l,portToComponent:c}=GM(e,n);return l.forEach(p=>{if(p.connections.length===0)return;const m=YM(p),g=`${n}:comp${p.id}`,_=Wd.get(g);let h;if(_&&_.hash===m)h=JSON.parse(JSON.stringify(_.result));else{const x=KM(p.connections,o),b=JM(x);h={connectedFlow:0,connections:{}},p.connections.forEach((k,v)=>{const S=b.connectionFlows[v]||0;h.connections[k.id]={flowRate:S,supplyRatio:k.sourceRate>0?S/k.sourceRate:0,demandRatio:k.targetRate>0?S/k.targetRate:0},h.connectedFlow+=S});const M=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});Wd.set(g,{hash:m,result:M})}Object.assign(u.connections,h.connections),u.connectedFlow+=h.connectedFlow}),u},XM=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,KM=(e,n)=>{const r=new Map;let o=0;const s=x=>{let b=r.get(x);return b===void 0&&(b=o++,r.set(x,b)),b},u=s("virtual-source"),l=s("virtual-sink"),c=new Map,p=new Map;e.forEach(x=>{const b=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,M=`in:${x.targetNodeId}:${x.targetInputIndex}`;s(b),s(M),c.has(b)||c.set(b,x.sourceRate),p.has(M)||p.set(M,x.targetRate)});const m=Array.from({length:o},()=>[]),g=[],_=n||1e6,h=(x,b,M,k=-1)=>{const v=g.length,S=g.length+1;g.push({to:b,cap:M,flow:0,rev:S,connIndex:k}),g.push({to:x,cap:0,flow:0,rev:v,connIndex:-1}),m[x].push(v),m[b].push(S)};return c.forEach((x,b)=>{h(u,s(b),x)}),p.forEach((x,b)=>{h(s(b),l,x)}),e.forEach((x,b)=>{const M=`out:${x.sourceNodeId}:${x.sourceOutputIndex}`,k=`in:${x.targetNodeId}:${x.targetInputIndex}`,v=s(M),S=s(k);h(v,S,_,b)}),{adj:m,edges:g,nodeCount:o,SOURCE:u,SINK:l}};class ZM{constructor(n){this.buffer=new Array(n),this.head=0,this.tail=0,this.size=0,this.capacity=n}push(n){this.buffer[this.tail]=n,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const n=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,n}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const JM=e=>{const{adj:n,edges:r,nodeCount:o,SOURCE:s,SINK:u}=e,l=new Int32Array(o),c=new Int32Array(o),p=new ZM(o),m=()=>{for(l.fill(-1),l[s]=0,p.clear(),p.push(s);!p.isEmpty();){const k=p.shift(),v=n[k],S=v.length;for(let q=0;q<S;q++){const C=r[v[q]],P=C.cap-C.flow;l[C.to]<0&&P>1e-15&&(l[C.to]=l[k]+1,p.push(C.to))}}return l[u]>=0},g=()=>{const k=[s],v=new Int32Array(o).fill(-1),S=new Uint8Array(o);for(S[s]=1;k.length>0;){const q=k[k.length-1];if(q===u){let I=1e15,R=u;for(;R!==s;){const V=v[R],A=r[V],ee=A.cap-A.flow;I=Math.min(I,ee);let W=!1;for(let H=0;H<o;H++){const te=n[H];for(let T=0;T<te.length;T++)if(te[T]===V){R=H,W=!0;break}if(W)break}}for(R=u;R!==s;){const V=v[R];r[V].flow+=I,r[r[V].rev].flow-=I;let A=!1;for(let ee=0;ee<o;ee++){const W=n[ee];for(let H=0;H<W.length;H++)if(W[H]===V){R=ee,A=!0;break}if(A)break}}return I}let C=!1;const P=n[q];for(let I=c[q];I<P.length;I++){const R=P[I],V=r[R],A=V.cap-V.flow;if(l[q]+1===l[V.to]&&A>1e-15&&!S[V.to]){S[V.to]=1,v[V.to]=R,k.push(V.to),c[q]=I,C=!0;break}}C||(k.pop(),c[q]=P.length)}return 0};let _=0,h=0;const x=1e5;for(;m()&&h++<x;)for(c.fill(0);;){const k=g();if(k===0)break;_+=k}const b=[],M=r.length;for(let k=0;k<M;k++){const v=r[k];v.connIndex>=0&&(b[v.connIndex]=XM(v.flow))}return{totalFlow:_,connectionFlows:b}},ld=e=>{const n={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(r=>{const o=e.nodes[r];n.byNode[r]={inputFlows:o.inputs.map(s=>({connected:0,needed:s.rate})),outputFlows:o.outputs.map(s=>({connected:0,produced:s.rate}))}}),Object.keys(e.products).forEach(r=>{const s=e.products[r].connections;if(s.length===0){n.byProduct[r]={totalProduction:Ky(e,r),totalConsumption:Zy(e,r),connectedFlow:0};return}const u=QM(e,r,s);n.byProduct[r]=u,s.forEach(l=>{const c=u.connections[l.id];if(c){n.byConnection[l.id]=c;const p=n.byNode[l.sourceNodeId];p&&(p.outputFlows[l.sourceOutputIndex].connected+=c.flowRate,p.outputFlows[l.sourceOutputIndex].produced=l.sourceRate);const m=n.byNode[l.targetNodeId];m&&(m.inputFlows[l.targetInputIndex].connected+=c.flowRate,m.inputFlows[l.targetInputIndex].needed=l.targetRate)}})}),n},Ky=(e,n)=>{const r=e.products[n];return r?r.producers.reduce((o,s)=>{const l=e.nodes[s.nodeId].outputs[s.outputIndex];return o+l.rate},0):0},Zy=(e,n)=>{const r=e.products[n];return r?r.consumers.reduce((o,s)=>{const l=e.nodes[s.nodeId].inputs[s.inputIndex];return o+l.rate},0):0},ir=()=>{Wd.clear()},Vr=1e-10,eC=(e,n,r,o)=>{var g,_;const s=new Map,u=new Set,l=(g=e.nodes[r])==null?void 0:g.inputs[o];if(!l)return s;const c=l.productId;if(!e.products[c])return s;const m=[{nodeId:r,inputIndex:o,productId:c}];for(u.add(`${r}:${o}`);m.length>0;){const{nodeId:h,inputIndex:x,productId:b}=m.shift();(((_=e.products[b])==null?void 0:_.connections.filter(k=>k.targetNodeId===h&&k.targetInputIndex===x))||[]).forEach(k=>{var C,P;const v=e.nodes[k.sourceNodeId];if(!v)return;const S=`${k.sourceNodeId}:${k.sourceOutputIndex}`,q=(C=n.byNode[k.sourceNodeId])==null?void 0:C.outputFlows[k.sourceOutputIndex];if(q){s.set(S,{nodeId:k.sourceNodeId,outputIndex:k.sourceOutputIndex,maxFlow:q.produced});const I=v.outputs[k.sourceOutputIndex];if(!I)return;(((P=e.products[I.productId])==null?void 0:P.connections.filter(V=>V.sourceNodeId===k.sourceNodeId&&V.sourceOutputIndex===k.sourceOutputIndex))||[]).forEach(V=>{var W;if(V.targetNodeId===h&&V.targetInputIndex===x)return;const A=`${V.targetNodeId}:${V.targetInputIndex}`;if(u.has(A))return;u.add(A);const ee=(W=e.nodes[V.targetNodeId])==null?void 0:W.inputs[V.targetInputIndex];ee&&m.push({nodeId:V.targetNodeId,inputIndex:V.targetInputIndex,productId:ee.productId})})}})}return s},tC=(e,n)=>{const r=[];return Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o],u=n.byNode[o];u&&s.inputs.forEach((l,c)=>{const p=u.inputFlows[c];if(!p)return;const m=p.needed-p.connected;if(m<=Vr)return;l.productId,eC(e,n,o,c).forEach((h,x)=>{var V;const b=e.nodes[h.nodeId];if(!b)return;const M=b.machineCount||0;if(M<=0)return;let k=b.cycleTime;(typeof k!="number"||k<=0)&&(k=1);const v=b.outputs[h.outputIndex];if(!v)return;const S=v.originalQuantity!==void 0?v.originalQuantity:v.quantity;if(typeof S!="number")return;const q=b.isMineshaftDrill?S:S/k;if(typeof q!="number"||q<=Vr)return;const C=(V=n.byNode[h.nodeId])==null?void 0:V.outputFlows[h.outputIndex];if(!C)return;const P=m/q,I=M+P,R=b.outputs.length>1&&b.outputs.some((A,ee)=>{if(ee===h.outputIndex)return!1;const W=e.products[A.productId];return!W||!W.connections.some(te=>te.sourceNodeId===h.nodeId&&te.sourceOutputIndex===ee)?!1:W.connections.some(te=>te.sourceNodeId!==h.nodeId||te.sourceOutputIndex!==ee?!1:W.connections.filter(Z=>Z.targetNodeId===te.targetNodeId&&Z.targetInputIndex===te.targetInputIndex&&Z.sourceNodeId!==h.nodeId).length===0)});r.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:v.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:C.produced,targetFlow:C.produced+m,deltaFlow:m,currentMachineCount:M,suggestedMachineCount:I,machineDelta:P,hasConstrainedOutputs:R,isMultiOutput:b.outputs.length>1})});const _=s.isMineshaftDrill?l.quantity:l.quantity/(s.cycleTime||1);if(typeof _=="number"&&_>Vr){const h=m/_,x=(s.machineCount||0)-h;x>Vr&&r.push({nodeId:o,handleType:"input",handleIndex:c,productId:l.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:p.connected,targetFlow:p.connected,deltaFlow:-m,currentMachineCount:s.machineCount||0,suggestedMachineCount:x,machineDelta:-h})}})}),Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o],u=n.byNode[o];if(!u)return;const l=s.machineCount||0;if(l<=0)return;let c=s.cycleTime;(typeof c!="number"||c<=0)&&(c=1),s.outputs.forEach((p,m)=>{var S;const g=u.outputFlows[m];if(!g)return;const _=g.produced-g.connected;if(_<=Vr)return;const h=p.originalQuantity!==void 0?p.originalQuantity:p.quantity,x=s.isMineshaftDrill?h:h/c;if(typeof x!="number"||x<=Vr)return;const b=_/x,M=l-b;M>Vr&&r.push({nodeId:o,handleType:"output",handleIndex:m,productId:p.productId,adjustmentType:"decrease",reason:"excess",currentFlow:g.produced,targetFlow:g.produced-_,deltaFlow:-_,currentMachineCount:l,suggestedMachineCount:M,machineDelta:-b});const k=p.productId;(((S=e.products[k])==null?void 0:S.connections.filter(q=>q.sourceNodeId===o&&q.sourceOutputIndex===m))||[]).forEach(q=>{var W,H,te,T;const C=e.nodes[q.targetNodeId];if(!C)return;const P=C.machineCount||0;if(P<=0)return;let I=C.cycleTime;(typeof I!="number"||I<=0)&&(I=1);const R=C.inputs[q.targetInputIndex];if(!R)return;const V=C.isMineshaftDrill?R.quantity:R.quantity/I;if(typeof V!="number"||V<=Vr)return;const A=_/V,ee=P+A;r.push({nodeId:q.targetNodeId,handleType:"input",handleIndex:q.targetInputIndex,productId:R.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((H=(W=n.byNode[q.targetNodeId])==null?void 0:W.inputFlows[q.targetInputIndex])==null?void 0:H.connected)||0,targetFlow:(((T=(te=n.byNode[q.targetNodeId])==null?void 0:te.inputFlows[q.targetInputIndex])==null?void 0:T.connected)||0)+_,deltaFlow:_,currentMachineCount:P,suggestedMachineCount:ee,machineDelta:A})})})}),r.forEach(o=>{const s=Math.round(o.suggestedMachineCount*1e10)/1e10,u=Math.round(o.suggestedMachineCount*1e20)/1e20,l=Math.abs(u-s)>1e-12;o.suggestedMachineCount=l?Math.round(o.suggestedMachineCount*1e20)/1e20:Math.round(o.suggestedMachineCount*1e10)/1e10;const c=Math.round(o.machineDelta*1e10)/1e10,p=Math.round(o.machineDelta*1e20)/1e20,m=Math.abs(p-c)>1e-12;o.machineDelta=m?Math.round(o.machineDelta*1e20)/1e20:Math.round(o.machineDelta*1e10)/1e10}),r},Cl=(e,n)=>{const r=[],o=[];Object.keys(e.products).forEach(l=>{const c=e.products[l],p=n.byProduct[l];if(!p)return;const m=p.totalProduction,g=p.connectedFlow,_=m-g;if(Math.abs(_)>1e-6&&_>0){const h=vt(l);h&&r.push({productId:l,product:h,excessRate:_,totalProduction:m,connectedConsumption:g,percentageExcess:m>0?_/m*100:0})}c.consumers.forEach(h=>{var b;const x=(b=n.byNode[h.nodeId])==null?void 0:b.inputFlows[h.inputIndex];if(x){const M=x.needed-x.connected;if(Math.abs(M)>1e-6&&M>0){const k=vt(l);if(k){let v=o.find(S=>S.productId===l);v?(v.deficiencyRate+=M,v.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:M})):o.push({productId:l,product:k,deficiencyRate:M,totalConsumption:p.totalConsumption,connectedProduction:g,percentageDeficient:p.totalConsumption>0?M/p.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:M}]})}}}})}),r.sort((l,c)=>c.excessRate-l.excessRate),o.sort((l,c)=>c.deficiencyRate-l.deficiencyRate);const u=r.length>0||o.length>0?tC(e,n):[];return{excess:r,deficiency:o,suggestions:u}},r0=(e,n,r={})=>{const{skipTemperature:o=!1,previousTemperatureData:s=null}=r,u=Ga(e,n),l=ld(u);if(o){const S=s||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(u,l),graph:u,flows:l,temperatureData:S}}if(!Object.values(u.nodes).some(S=>{const q=S.recipe.machine_id;return oi[q]||vn(q)})){const S={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(u,l),graph:u,flows:l,temperatureData:S}}const p=n0(u,l),m=Hd(e,p,u);if(!m.some((S,q)=>{var W,H,te,T,Z,U,J,O;const C=e[q],P=(H=(W=C.data)==null?void 0:W.recipe)==null?void 0:H.tempDependentInputTemp,I=(T=(te=S.data)==null?void 0:te.recipe)==null?void 0:T.tempDependentInputTemp,R=(U=(Z=C.data)==null?void 0:Z.recipe)==null?void 0:U.outputs.map(B=>B.temperature).filter(B=>B!==void 0),V=(O=(J=S.data)==null?void 0:J.recipe)==null?void 0:O.outputs.map(B=>B.temperature).filter(B=>B!==void 0),A=Math.abs((P||0)-(I||0))>.1,ee=R.length!==V.length||R.some((B,Q)=>Math.abs((B||0)-(V[Q]||0))>.1);return A||ee}))return{...Cl(u,l),graph:u,flows:l,temperatureData:p};const _=Ga(m,n),h=ld(_),x=n0(_,h),b=Hd(m,x,_),M=Ga(b,n),k=ld(M);return{...Cl(M,k),graph:M,flows:k,temperatureData:x}},iC=e=>e.excess||[],nC=e=>e.deficiency||[],Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,nr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),rC=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,oC=e=>{const n=["p_coal","p_coke_fuel","p_planks","p_oak_log"],r=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return or.filter(s=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(s.id))return!1;const u=["r_liquid_dump","r_liquid_burner"].includes(s.id),l=s.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(u||s.id==="r_underground_waste_facility"&&!l)return!1;const c=s.inputs.some(m=>m.product_id===e&&m.product_id!=="p_variableproduct"),p=n.includes(e)&&r.includes(s.id)&&s.inputs.some(m=>m.product_id==="p_variableproduct");return c||p||l})},aC=e=>or.filter(n=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(n.id)&&n.outputs.some(r=>r.product_id===e&&r.product_id!=="p_variableproduct")),Nl=e=>{const n=or.filter(r=>r.machine_id===e);return e==="m_underground_waste_facility"?[Od]:e==="m_liquid_dump"?[Ad]:e==="m_liquid_burner"?[zd]:n},Jy=(e,n,r,o,s=Li)=>{const u=(o==null?void 0:o.minSteamTemp)||100;return e.map(l=>{if(r){if(l.product_id==="p_steam"){const c=Math.max(n,s),p=l.originalQuantity!==void 0?l.originalQuantity:l.quantity;return c<u?{...l,temperature:c,quantity:0,originalQuantity:p}:{...l,temperature:c,quantity:p,originalQuantity:p}}return l}if(Ey(l.product_id)){const c=Math.max(n,s);return{...l,temperature:c}}return l})},ud=(e,n)=>{let r={...e};const o=oi[n];if(o){const u=Yq(n),l=o.type==="boiler",c=l?sr:Li,p=l?{...u,coolantTemp:sr}:u;let m=null;if(o.type==="product_dependent"&&e.inputs){const h=e.inputs.find(x=>["p_water","p_filtered_water","p_distilled_water"].includes(x.product_id));m=(h==null?void 0:h.product_id)||null}const g=fp(n,p,c,m,l?sr:null),_=Jy(e.outputs,g,l,o,c);r={...r,outputs:_,temperatureSettings:p}}if(vn(n)){const u=On[n];(u==null?void 0:u.type)==="steam_input"&&(r={...r,tempDependentInputTemp:lr})}return r},sC=(e,n,r,o,s,u,l)=>{if(!r||!n)return 1;const c=n.data.recipe,p=n.data.machineCount||0,m=kt(c.machine_id);let g=c.cycle_time;if((typeof g!="number"||g<=0)&&(g=1),m&&vn(m.id)){const k=On[m.id];if((k==null?void 0:k.type)==="steam_input"&&(m.id!=="m_steam_cracking_plant"||ho(c))){const v=c.tempDependentInputTemp??lr;g=Lr(m.id,v,g)}}const _=eg(e,r,null,s,u,o);let h=_.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const x=kt(_.machine_id);if(x&&vn(x.id)){const k=On[x.id];if((k==null?void 0:k.type)==="steam_input"&&(x.id!=="m_steam_cracking_plant"||ho(_))){const v=_.tempDependentInputTemp??lr;h=Lr(x.id,v,h)}}let b=0,M=!1;if(l&&l.byNode&&l.byNode[n.id]){const k=l.byNode[n.id];if(r.isOutput){const v=k.outputFlows[r.outputIndex];if(v){M=!0;const S=v.produced-v.connected;b=Math.max(0,S)}}else{const v=k.inputFlows[r.inputIndex];if(v){M=!0;const S=v.needed-v.connected;b=Math.max(0,S)}}}if(M&&b===0)return 0;if(!M)if(r.isOutput){const k=c.outputs[r.outputIndex];if(k){const v=k.originalQuantity!==void 0?k.originalQuantity:k.quantity;typeof v=="number"&&(b=v/g*p)}}else{const k=c.inputs[r.inputIndex];k&&typeof k.quantity=="number"&&(b=k.quantity/g*p)}if(r.isOutput){const k=_.inputs.find(v=>v.product_id===r.productId);if(k&&typeof k.quantity=="number"&&k.quantity>0){const v=k.quantity/h;return b/v}}else{const k=_.outputs.find(v=>v.product_id===r.productId);if(k){const v=k.originalQuantity!==void 0?k.originalQuantity:k.quantity;if(typeof v=="number"&&v>0){const S=v/h;return b/S}}}return 1},eg=(e,n,r,o,s,u)=>{var p,m,g,_,h,x,b,M,k,v,S,q;let l={...e};const c=kt(e.machine_id);if(!tg(l))return l;if((c==null?void 0:c.id)==="m_industrial_firebox"&&$y(e.id)){const C=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let P=((p=o==null?void 0:o.fireboxConfig)==null?void 0:p.fuel)||"p_coke_fuel";const I=(n==null?void 0:n.productId)||(r==null?void 0:r.id);I&&C.includes(I)&&(P=I);const R=gp(e.id,P);return R&&(l={...l,inputs:zy(e.inputs,P,e.id),fireboxSettings:{fuel:P},cycle_time:R.cycleTime,power_consumption:0}),l}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const C=((m=o==null?void 0:o.drillConfig)==null?void 0:m.drillHead)||"steel",P=((g=o==null?void 0:o.drillConfig)==null?void 0:g.consumable)||"hydrochloric_acid",I=((_=o==null?void 0:o.drillConfig)==null?void 0:_.machineOil)!==void 0?o.drillConfig.machineOil:!0,R=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],V={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let A=C,ee=100;const W=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(W)if(R.includes(W))A=V[W];else if(n!=null&&n.isOutput)ee=100;else{const Z=u(W,A,P,I);Z&&(ee=Z)}const H=Iy(A,P,I,ee),te=Py(A,P,I,ee),T=ra(A,P,I,ee);return l={...l,inputs:H.length>0?H:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:te.length>0?te:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:A,consumable:P,machineOil:I,depth:ee},cycle_time:1,power_consumption:T?{max:T.drillingPower*1e6,average:(T.drillingPower*T.lifeTime+T.idlePower*(T.replacementTime+T.travelTime))/T.totalCycleTime*1e6}:"Variable",pollution:T?T.pollution:"Variable"},l}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const C=((h=o==null?void 0:o.assemblerConfig)==null?void 0:h.outerStage)||1,P=((x=o==null?void 0:o.assemblerConfig)==null?void 0:x.innerStage)||2,I=((b=o==null?void 0:o.assemblerConfig)==null?void 0:b.machineOil)!==void 0?o.assemblerConfig.machineOil:!0,R=((M=o==null?void 0:o.assemblerConfig)==null?void 0:M.tickCircuitDelay)||0;let V=C===1?`p_${P}x_microchip`:`p_${C}x${P}x_microchip`;const A=(n==null?void 0:n.productId)||(r==null?void 0:r.id);A&&A.includes("microchip")&&(V=A);const ee=Ry(V,I),W=Vy(V,I),H=_s(V,I,R),te=V.match(/p_(?:(\d+)x)?(\d+)x_microchip/),T=te&&te[1]?parseInt(te[1]):1,Z=te?parseInt(te[2]):P;return l={...l,inputs:ee.length>0?ee:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:W.length>0?W:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:T,innerStage:Z,machineOil:I,tickCircuitDelay:R},cycle_time:H?H.cycleTime:"Variable",power_consumption:H?{max:H.maxPowerConsumption,average:H.avgPowerConsumption}:"Variable"},l}if(e.isTreeFarm||e.id==="r_tree_farm"){const C=((k=o==null?void 0:o.treeFarmConfig)==null?void 0:k.trees)||450,P=((v=o==null?void 0:o.treeFarmConfig)==null?void 0:v.harvesters)||20,I=((S=o==null?void 0:o.treeFarmConfig)==null?void 0:S.sprinklers)||24,R=((q=o==null?void 0:o.treeFarmConfig)==null?void 0:q.outputs)||8,V=1,A=Oy(I),ee=hp(C,P,s),W=Zl(C,P,I,R,V,s);return l={...l,inputs:A.length>0?A:[{product_id:"p_water",quantity:"Variable"}],outputs:ee.length>0?ee:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:C,harvesters:P,sprinklers:I,outputs:R,controller:V},cycle_time:1,power_consumption:W?W.avgPowerConsumption:"Variable",pollution:0},l}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let C="p_any_item",P="p_any_fluid";const I=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(I)if(I==="p_concrete_block"||I==="p_lead_ingot")C="p_fission_byproducts",P="p_depleted_uf6_waste";else{const A=vt(I);(A==null?void 0:A.type)==="item"?(C=I,P="p_any_fluid"):(A==null?void 0:A.type)==="fluid"&&(C="p_any_item",P=I)}else C="p_fission_byproducts",P="p_depleted_uf6_waste";const R=Ua(0,0,C,P),V=za(0,0);return l={...l,inputs:R,outputs:[],wasteFacilitySettings:{itemProductId:C,fluidProductId:P,itemFlowRate:0,fluidFlowRate:0},cycle_time:V.cycleTime,power_consumption:1e6,pollution:0},l}if(e.isLiquidDump||e.id==="r_liquid_dump"){let C=["p_water","p_residue"];const P=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(P){const V=vt(P);(V==null?void 0:V.type)==="fluid"&&(C=[P,P])}const I=Gy(C),R=Ho(I);return l={...l,inputs:I,outputs:[],liquidDumpSettings:{fluidProductIds:C},cycle_time:1,power_consumption:0,pollution:R},l}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let C=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const P=(n==null?void 0:n.productId)||(r==null?void 0:r.id);if(P){const V=vt(P);(V==null?void 0:V.type)==="fluid"&&(C=Array(8).fill(P))}const I=Xy(C),R=Wo(I);return l={...l,inputs:I,outputs:[],liquidBurnerSettings:{fluidProductIds:C},cycle_time:1,power_consumption:0,pollution:R},l}return l},lC=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],uC=e=>{if(e==="r_mineshaft_drill"){const n=new Set;return Object.values(rs).forEach(r=>{r.forEach(o=>n.add(o.product_id))}),Array.from(n)}return e==="r_logic_assembler"?Ty.map(n=>n.productId):e==="r_tree_farm"?["p_oak_log"]:[]},tg=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&$y(e.id),o0=1e-10,cC=(e,n,r,o,s)=>{if(n<o0)return new Map([[e,r]]);const u=r/n,l=new Map;l.set(e,r);const c=new Map;c.set(e,u);const p=new Set([e]),m=[e];for(;m.length>0;){const x=m.shift(),b=o.nodes[x];b&&(b.outputs.forEach(M=>{var v;(((v=o.products[M.productId])==null?void 0:v.connections.filter(S=>S.sourceNodeId===x))||[]).forEach(S=>{p.has(S.targetNodeId)||(p.add(S.targetNodeId),m.push(S.targetNodeId))})}),b.inputs.forEach(M=>{var v;(((v=o.products[M.productId])==null?void 0:v.connections.filter(S=>S.targetNodeId===x))||[]).forEach(S=>{p.has(S.sourceNodeId)||(p.add(S.sourceNodeId),m.push(S.sourceNodeId))})}))}const g=10;let _=0,h=!0;for(;h&&_<g;)h=!1,_++,p.forEach(x=>{if(x===e)return;const b=o.nodes[x];if(!b)return;const M=b.machineCount||0;if(M<o0)return;const k=[],v=[];if(b.outputs.forEach((C,P)=>{var R;(((R=o.products[C.productId])==null?void 0:R.connections.filter(V=>V.sourceNodeId===x&&V.sourceOutputIndex===P))||[]).forEach(V=>{const A=c.get(V.targetNodeId);A!==void 0&&(k.push(A),v.push({type:"output",productId:C.productId,targetNodeId:V.targetNodeId,ratio:A}))})}),b.inputs.forEach((C,P)=>{var R;(((R=o.products[C.productId])==null?void 0:R.connections.filter(V=>V.targetNodeId===x&&V.targetInputIndex===P))||[]).forEach(V=>{const A=c.get(V.sourceNodeId);A!==void 0&&(k.push(A),v.push({type:"input",productId:C.productId,sourceNodeId:V.sourceNodeId,ratio:A}))})}),k.length===0)return;const S=Math.max(...k),q=c.get(x)||1;if(Math.abs(S-q)>1e-4){c.set(x,S);const C=M*S;l.set(x,C),h=!0}});return l};var a0={},cd,s0;function ig(){if(s0)return cd;s0=1;function e(n,r,o,s){this.feasible=o,this.evaluation=r,this.bounded=s,this._tableau=n}return cd=e,e.prototype.generateSolutionSet=function(){for(var n={},r=this._tableau,o=r.varIndexByRow,s=r.variablesPerIndex,u=r.matrix,l=r.rhsColumn,c=r.height-1,p=Math.round(1/r.precision),m=1;m<=c;m+=1){var g=o[m],_=s[g];if(!(_===void 0||_.isSlack===!0)){var h=u[m][l];n[_.id]=Math.round((Number.EPSILON+h)*p)/p}}return n},cd}var dd,l0;function dC(){if(l0)return dd;l0=1;var e=ig();function n(r,o,s,u,l){e.call(this,r,o,s,u),this.iter=l}return dd=n,n.prototype=Object.create(e.prototype),n.constructor=n,dd}var pd,u0;function zn(){if(u0)return pd;u0=1;var e=ig(),n=dC();function r(s){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=s||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}pd=r,r.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function o(s,u){this.priority=s,this.reducedCosts=new Array(u);for(var l=0;l<u;l+=1)this.reducedCosts[l]=0}return o.prototype.copy=function(){var s=new o(this.priority,this.reducedCosts.length);return s.reducedCosts=this.reducedCosts.slice(),s},r.prototype.setOptionalObjective=function(s,u,l){var c=this.objectivesByPriority[s];if(c===void 0){var p=Math.max(this.width,u+1);c=new o(s,p),this.objectivesByPriority[s]=c,this.optionalObjectives.push(c),this.optionalObjectives.sort(function(m,g){return m.priority-g.priority})}c.reducedCosts[u]=l},r.prototype.initialize=function(s,u,l,c){this.variables=l,this.unrestrictedVars=c,this.width=s,this.height=u;for(var p=new Array(s),m=0;m<s;m++)p[m]=0;this.matrix=new Array(u);for(var g=0;g<u;g++)this.matrix[g]=p.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=s+u-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},r.prototype._resetMatrix=function(){var s=this.model.variables,u=this.model.constraints,l=s.length,c=u.length,p,m,g=this.matrix[0],_=this.model.isMinimization===!0?-1:1;for(p=0;p<l;p+=1){var h=s[p],x=h.priority,b=_*h.cost;x===0?g[p+1]=b:this.setOptionalObjective(x,p+1,b),m=s[p].index,this.rowByVarIndex[m]=-1,this.colByVarIndex[m]=p+1,this.varIndexByCol[p+1]=m}for(var M=1,k=0;k<c;k+=1){var v=u[k],S=v.index;this.rowByVarIndex[S]=M,this.colByVarIndex[S]=-1,this.varIndexByRow[M]=S;var q,C,P,I=v.terms,R=I.length,V=this.matrix[M++];if(v.isUpperBound){for(q=0;q<R;q+=1)C=I[q],P=this.colByVarIndex[C.variable.index],V[P]=C.coefficient;V[0]=v.rhs}else{for(q=0;q<R;q+=1)C=I[q],P=this.colByVarIndex[C.variable.index],V[P]=-C.coefficient;V[0]=-v.rhs}}},r.prototype.setModel=function(s){this.model=s;var u=s.nVariables+1,l=s.nConstraints+1;return this.initialize(u,l,s.variables,s.unrestrictedVariables),this._resetMatrix(),this},r.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var s=this.lastElementIndex;return this.lastElementIndex+=1,s},r.prototype.density=function(){for(var s=0,u=this.matrix,l=0;l<this.height;l++)for(var c=u[l],p=0;p<this.width;p++)c[p]!==0&&(s+=1);return s/(this.height*this.width)},r.prototype.setEvaluation=function(){var s=Math.round(1/this.precision),u=this.matrix[this.costRowIndex][this.rhsColumn],l=Math.round((Number.EPSILON+u)*s)/s;this.evaluation=l,this.simplexIters===0&&(this.bestPossibleEval=l)},r.prototype.getSolution=function(){var s=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,s,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,s,this.feasible,this.bounded)},pd}var c0;function pC(){if(c0)return a0;c0=1;var e=zn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var r=this.model.checkForCycles,o=[],s=this.matrix,u=this.rhsColumn,l=this.width-1,c=this.height-1,p,m=0;;){for(var g=0,_=-this.precision,h=1;h<=c;h++){p=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var x=s[h][u];x<_&&(_=x,g=h)}if(g===0)return this.feasible=!0,m;for(var b=0,M=-1/0,k=s[0],v=s[g],S=1;S<=l;S++){var q=v[S];if(p=this.unrestrictedVars[this.varIndexByCol[S]]===!0,p||q<-this.precision){var C=-k[S]/q;M<C&&(M=C,b=S)}}if(b===0)return this.feasible=!1,m;if(r){o.push([this.varIndexByRow[g],this.varIndexByCol[b]]);var P=this.checkForCycles(o);if(P.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+P[0]),this.model.messages.push("Length :"+P[1]),this.feasible=!1,m}this.pivot(g,b),m+=1}},e.prototype.phase2=function(){for(var r=this.model.checkForCycles,o=[],s=this.matrix,u=this.rhsColumn,l=this.width-1,c=this.height-1,p=this.precision,m=this.optionalObjectives.length,g=null,_=0,h,x;;){var b=s[this.costRowIndex];m>0&&(g=[]);for(var M=0,k=p,v=!1,S=1;S<=l;S++){if(h=b[S],x=this.unrestrictedVars[this.varIndexByCol[S]]===!0,m>0&&-p<h&&h<p){g.push(S);continue}if(x&&h<0){-h>k&&(k=-h,M=S,v=!0);continue}h>k&&(k=h,M=S,v=!1)}if(m>0)for(var q=0;M===0&&g.length>0&&q<m;){var C=[],P=this.optionalObjectives[q].reducedCosts;k=p;for(var I=0;I<g.length;I++){if(S=g[I],h=P[S],x=this.unrestrictedVars[this.varIndexByCol[S]]===!0,-p<h&&h<p){C.push(S);continue}if(x&&h<0){-h>k&&(k=-h,M=S,v=!0);continue}h>k&&(k=h,M=S,v=!1)}g=C,q+=1}if(M===0)return this.setEvaluation(),this.simplexIters+=1,_;var R=0,V=1/0;this.varIndexByRow;for(var A=1;A<=c;A++){var ee=s[A],W=ee[u],H=ee[M];if(!(-p<H&&H<p)){if(H>0&&p>W&&W>-p){V=0,R=A;break}var te=v?-W/H:W/H;te>p&&V>te&&(V=te,R=A)}}if(V===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[M],_;if(r){o.push([this.varIndexByRow[R],this.varIndexByCol[M]]);var T=this.checkForCycles(o);if(T.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+T[0]),this.model.messages.push("Length :"+T[1]),this.feasible=!1,_}this.pivot(R,M,!0),_+=1}};var n=[];return e.prototype.pivot=function(r,o){var s=this.matrix,u=s[r][o],l=this.height-1,c=this.width-1,p=this.varIndexByRow[r],m=this.varIndexByCol[o];this.varIndexByRow[r]=m,this.varIndexByCol[o]=p,this.rowByVarIndex[m]=r,this.rowByVarIndex[p]=-1,this.colByVarIndex[m]=-1,this.colByVarIndex[p]=o;for(var g=s[r],_=0,h=0;h<=c;h++)g[h]>=-1e-16&&g[h]<=1e-16?g[h]=0:(g[h]/=u,n[_]=h,_+=1);g[o]=1/u;var x,b,M;this.precision;for(var k=0;k<=l;k++)if(k!==r&&!(s[k][o]>=-1e-16&&s[k][o]<=1e-16)){var v=s[k];if(x=v[o],x>=-1e-16&&x<=1e-16)x!==0&&(v[o]=0);else{for(b=0;b<_;b++)h=n[b],M=g[h],M>=-1e-16&&M<=1e-16?M!==0&&(g[h]=0):v[h]=v[h]-x*M;v[o]=-x/u}}var S=this.optionalObjectives.length;if(S>0)for(var q=0;q<S;q+=1){var C=this.optionalObjectives[q].reducedCosts;if(x=C[o],x!==0){for(b=0;b<_;b++)h=n[b],M=g[h],M!==0&&(C[h]=C[h]-x*M);C[o]=-x/u}}},e.prototype.checkForCycles=function(r){for(var o=0;o<r.length-1;o++)for(var s=o+1;s<r.length;s++){var u=r[o],l=r[s];if(u[0]===l[0]&&u[1]===l[1]){if(s-o>r.length-s)break;for(var c=!0,p=1;p<s-o;p++){var m=r[o+p],g=r[s+p];if(m[0]!==g[0]||m[1]!==g[1]){c=!1;break}}if(c)return[o,s-o]}}return[]},a0}var d0={},_d,p0;function vp(){if(p0)return _d;p0=1;function e(c,p,m,g){this.id=c,this.cost=p,this.index=m,this.value=0,this.priority=g}function n(c,p,m,g){e.call(this,c,p,m,g)}n.prototype.isInteger=!0;function r(c,p){e.call(this,c,0,p,0)}r.prototype.isSlack=!0;function o(c,p){this.variable=c,this.coefficient=p}function s(c,p,m){return m===0||m==="required"?null:(p=p||1,m=m||1,c.isMinimization===!1&&(p=-p),c.addVariable(p,"r"+c.relaxationIndex++,!1,!1,m))}function u(c,p,m,g){this.slack=new r("s"+m,m),this.index=m,this.model=g,this.rhs=c,this.isUpperBound=p,this.terms=[],this.termsByVarIndex={},this.relaxation=null}u.prototype.addTerm=function(c,p){var m=p.index,g=this.termsByVarIndex[m];if(g===void 0)g=new o(p,c),this.termsByVarIndex[m]=g,this.terms.push(g),this.isUpperBound===!0&&(c=-c),this.model.updateConstraintCoefficient(this,p,c);else{var _=g.coefficient+c;this.setVariableCoefficient(_,p)}return this},u.prototype.removeTerm=function(c){return this},u.prototype.setRightHandSide=function(c){if(c!==this.rhs){var p=c-this.rhs;this.isUpperBound===!0&&(p=-p),this.rhs=c,this.model.updateRightHandSide(this,p)}return this},u.prototype.setVariableCoefficient=function(c,p){var m=p.index;if(m===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var g=this.termsByVarIndex[m];if(g===void 0)this.addTerm(c,p);else if(c!==g.coefficient){var _=c-g.coefficient;this.isUpperBound===!0&&(_=-_),g.coefficient=c,this.model.updateConstraintCoefficient(this,p,_)}return this},u.prototype.relax=function(c,p){this.relaxation=s(this.model,c,p),this._relax(this.relaxation)},u.prototype._relax=function(c){c!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,c):this.setVariableCoefficient(1,c))};function l(c,p){this.upperBound=c,this.lowerBound=p,this.model=c.model,this.rhs=c.rhs,this.relaxation=null}return l.prototype.isEquality=!0,l.prototype.addTerm=function(c,p){return this.upperBound.addTerm(c,p),this.lowerBound.addTerm(c,p),this},l.prototype.removeTerm=function(c){return this.upperBound.removeTerm(c),this.lowerBound.removeTerm(c),this},l.prototype.setRightHandSide=function(c){this.upperBound.setRightHandSide(c),this.lowerBound.setRightHandSide(c),this.rhs=c},l.prototype.relax=function(c,p){this.relaxation=s(this.model,c,p),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},_d={Constraint:u,Variable:e,IntegerVariable:n,SlackVariable:r,Equality:l,Term:o},_d}var _0;function _C(){if(_0)return d0;_0=1;var e=zn(),n=vp().SlackVariable;return e.prototype.addCutConstraints=function(r){for(var o=r.length,s=this.height,u=s+o,l=s;l<u;l+=1)this.matrix[l]===void 0&&(this.matrix[l]=this.matrix[l-1].slice());this.height=u,this.nVars=this.width+this.height-2;for(var c,p=this.width-1,m=0;m<o;m+=1){var g=r[m],_=s+m,h=g.type==="min"?-1:1,x=g.varIndex,b=this.rowByVarIndex[x],M=this.matrix[_];if(b===-1){for(M[this.rhsColumn]=h*g.value,c=1;c<=p;c+=1)M[c]=0;M[this.colByVarIndex[x]]=h}else{var k=this.matrix[b],v=k[this.rhsColumn];for(M[this.rhsColumn]=h*(g.value-v),c=1;c<=p;c+=1)M[c]=-h*k[c]}var S=this.getNewElementIndex();this.varIndexByRow[_]=S,this.rowByVarIndex[S]=_,this.colByVarIndex[S]=-1,this.variablesPerIndex[S]=new n("s"+S,S),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,s=this.variablesPerIndex[this.varIndexByRow[r]];if(!s.isInteger)return!1;var u=o[r][this.rhsColumn],l=u-Math.floor(u);if(l<this.precision||1-this.precision<l)return!1;var c=this.height;o[c]=o[c-1].slice(),this.height+=1,this.nVars+=1;var p=this.getNewElementIndex();this.varIndexByRow[c]=p,this.rowByVarIndex[p]=c,this.colByVarIndex[p]=-1,this.variablesPerIndex[p]=new n("s"+p,p),o[c][this.rhsColumn]=Math.floor(u);for(var m=1;m<this.varIndexByCol.length;m+=1){var g=this.variablesPerIndex[this.varIndexByCol[m]];if(!g.isInteger)o[c][m]=Math.min(0,o[r][m]/(1-l));else{var _=o[r][m],h=Math.floor(_)+Math.max(0,_-Math.floor(_)-l)/(1-l);o[c][m]=h}}for(var x=0;x<this.width;x+=1)o[c][x]-=o[r][x];return!0},e.prototype._addUpperBoundMIRCut=function(r){if(r===this.costRowIndex)return!1;this.model;var o=this.matrix,s=this.variablesPerIndex[this.varIndexByRow[r]];if(!s.isInteger)return!1;var u=o[r][this.rhsColumn],l=u-Math.floor(u);if(l<this.precision||1-this.precision<l)return!1;var c=this.height;o[c]=o[c-1].slice(),this.height+=1,this.nVars+=1;var p=this.getNewElementIndex();this.varIndexByRow[c]=p,this.rowByVarIndex[p]=c,this.colByVarIndex[p]=-1,this.variablesPerIndex[p]=new n("s"+p,p),o[c][this.rhsColumn]=-l;for(var m=1;m<this.varIndexByCol.length;m+=1){var g=this.variablesPerIndex[this.varIndexByCol[m]],_=o[r][m],h=_-Math.floor(_);g.isInteger?h<=l?o[c][m]=-h:o[c][m]=-(1-h)*l/h:_>=0?o[c][m]=-_:o[c][m]=_*l/(1-l)}return!0},e.prototype.applyMIRCuts=function(){},d0}var m0={},f0;function mC(){if(f0)return m0;f0=1;var e=zn();return e.prototype._putInBase=function(n){var r=this.rowByVarIndex[n];if(r===-1){for(var o=this.colByVarIndex[n],s=1;s<this.height;s+=1){var u=this.matrix[s][o];if(u<-this.precision||this.precision<u){r=s;break}}this.pivot(r,o)}return r},e.prototype._takeOutOfBase=function(n){var r=this.colByVarIndex[n];if(r===-1){for(var o=this.rowByVarIndex[n],s=this.matrix[o],u=1;u<this.height;u+=1){var l=s[u];if(l<-this.precision||this.precision<l){r=u;break}}this.pivot(o,r)}return r},e.prototype.updateVariableValues=function(){for(var n=this.variables.length,r=Math.round(1/this.precision),o=0;o<n;o+=1){var s=this.variables[o],u=s.index,l=this.rowByVarIndex[u];if(l===-1)s.value=0;else{var c=this.matrix[l][this.rhsColumn];s.value=Math.round((c+Number.EPSILON)*r)/r}}},e.prototype.updateRightHandSide=function(n,r){var o=this.height-1,s=this.rowByVarIndex[n.index];if(s===-1){for(var u=this.colByVarIndex[n.index],l=0;l<=o;l+=1){var c=this.matrix[l];c[this.rhsColumn]-=r*c[u]}var p=this.optionalObjectives.length;if(p>0)for(var m=0;m<p;m+=1){var g=this.optionalObjectives[m].reducedCosts;g[this.rhsColumn]-=r*g[u]}}else this.matrix[s][this.rhsColumn]-=r},e.prototype.updateConstraintCoefficient=function(n,r,o){if(n.index===r.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var s=this._putInBase(n.index),u=this.colByVarIndex[r.index];if(u===-1)for(var l=this.rowByVarIndex[r.index],c=0;c<this.width;c+=1)this.matrix[s][c]+=o*this.matrix[l][c];else this.matrix[s][u]-=o},e.prototype.updateCost=function(n,r){var o=n.index,s=this.width-1,u=this.colByVarIndex[o];if(u===-1){var l=this.matrix[this.rowByVarIndex[o]],c;if(n.priority===0){var p=this.matrix[0];for(c=0;c<=s;c+=1)p[c]+=r*l[c]}else{var m=this.objectivesByPriority[n.priority].reducedCosts;for(c=0;c<=s;c+=1)m[c]+=r*l[c]}}else this.matrix[0][u]-=r},e.prototype.addConstraint=function(n){var r=n.isUpperBound?1:-1,o=this.height,s=this.matrix[o];s===void 0&&(s=this.matrix[0].slice(),this.matrix[o]=s);for(var u=this.width-1,l=0;l<=u;l+=1)s[l]=0;s[this.rhsColumn]=r*n.rhs;for(var c=n.terms,p=c.length,m=0;m<p;m+=1){var g=c[m],_=g.coefficient,h=g.variable.index,x=this.rowByVarIndex[h];if(x===-1)s[this.colByVarIndex[h]]+=r*_;else{var b=this.matrix[x];for(b[this.rhsColumn],l=0;l<=u;l+=1)s[l]-=r*_*b[l]}}var M=n.index;this.varIndexByRow[o]=M,this.rowByVarIndex[M]=o,this.colByVarIndex[M]=-1,this.height+=1},e.prototype.removeConstraint=function(n){var r=n.index,o=this.height-1,s=this._putInBase(r),u=this.matrix[o];this.matrix[o]=this.matrix[s],this.matrix[s]=u,this.varIndexByRow[s]=this.varIndexByRow[o],this.varIndexByRow[o]=-1,this.rowByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,n.slack.index=-1,this.height-=1},e.prototype.addVariable=function(n){var r=this.height-1,o=this.width,s=this.model.isMinimization===!0?-n.cost:n.cost,u=n.priority,l=this.optionalObjectives.length;if(l>0)for(var c=0;c<l;c+=1)this.optionalObjectives[c].reducedCosts[o]=0;u===0?this.matrix[0][o]=s:(this.setOptionalObjective(u,o,s),this.matrix[0][o]=0);for(var p=1;p<=r;p+=1)this.matrix[p][o]=0;var m=n.index;this.varIndexByCol[o]=m,this.rowByVarIndex[m]=-1,this.colByVarIndex[m]=o,this.width+=1},e.prototype.removeVariable=function(n){var r=n.index,o=this._takeOutOfBase(r),s=this.width-1;if(o!==s){for(var u=this.height-1,l=0;l<=u;l+=1){var c=this.matrix[l];c[o]=c[s]}var p=this.optionalObjectives.length;if(p>0)for(var m=0;m<p;m+=1){var g=this.optionalObjectives[m].reducedCosts;g[o]=g[s]}var _=this.varIndexByCol[s];this.varIndexByCol[o]=_,this.colByVarIndex[_]=o}this.varIndexByCol[s]=-1,this.colByVarIndex[r]=-1,this.availableIndexes[this.availableIndexes.length]=r,n.index=-1,this.width-=1},m0}var h0={},y0;function fC(){if(y0)return h0;y0=1;var e=zn();return e.prototype.log=function(n,r){console.log("****",n,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var o=5,s="",u=[" "],l,c,p,m,g,_,h,x,b,M,k;for(c=1;c<this.width;c+=1)g=this.varIndexByCol[c],m=this.variablesPerIndex[g],m===void 0?_="c"+g:_=m.id,h=_.length,x=" ",b="	",h>5?x+=" ":b+="	",u[c]=x,s+=b+_;console.log(s);var v,S=this.matrix[this.costRowIndex],q="	";for(l=1;l<this.width;l+=1)v="	",q+=v,q+=u[l],q+=S[l].toFixed(o);for(v="	",q+=v+u[0]+S[0].toFixed(o),console.log(q+"	Z"),p=1;p<this.height;p+=1){for(M=this.matrix[p],k="	",c=1;c<this.width;c+=1)v="	",k+=v+u[c]+M[c].toFixed(o);v="	",k+=v+u[0]+M[0].toFixed(o),g=this.varIndexByRow[p],m=this.variablesPerIndex[g],m===void 0?_="c"+g:_=m.id,console.log(k+"	"+_)}console.log("");var C=this.optionalObjectives.length;if(C>0){console.log("    Optional objectives:");for(var P=0;P<C;P+=1){var I=this.optionalObjectives[P].reducedCosts,R="";for(l=1;l<this.width;l+=1)v=I[l]<0?"":" ",R+=v,R+=u[l],R+=I[l].toFixed(o);v=I[0]<0?"":" ",R+=v+u[0]+I[0].toFixed(o),console.log(R+" z"+P)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},h0}var g0={},x0;function hC(){if(x0)return g0;x0=1;var e=zn();return e.prototype.copy=function(){var n=new e(this.precision);n.width=this.width,n.height=this.height,n.nVars=this.nVars,n.model=this.model,n.variables=this.variables,n.variablesPerIndex=this.variablesPerIndex,n.unrestrictedVars=this.unrestrictedVars,n.lastElementIndex=this.lastElementIndex,n.varIndexByRow=this.varIndexByRow.slice(),n.varIndexByCol=this.varIndexByCol.slice(),n.rowByVarIndex=this.rowByVarIndex.slice(),n.colByVarIndex=this.colByVarIndex.slice(),n.availableIndexes=this.availableIndexes.slice();for(var r=[],o=0;o<this.optionalObjectives.length;o++)r[o]=this.optionalObjectives[o].copy();n.optionalObjectives=r;for(var s=this.matrix,u=new Array(this.height),l=0;l<this.height;l++)u[l]=s[l].slice();return n.matrix=u,n},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var n=this.savedState,r=n.matrix;this.nVars=n.nVars,this.model=n.model,this.variables=n.variables,this.variablesPerIndex=n.variablesPerIndex,this.unrestrictedVars=n.unrestrictedVars,this.lastElementIndex=n.lastElementIndex,this.width=n.width,this.height=n.height;var o,s;for(o=0;o<this.height;o+=1){var u=r[o],l=this.matrix[o];for(s=0;s<this.width;s+=1)l[s]=u[s]}var c=n.varIndexByRow;for(s=0;s<this.height;s+=1)this.varIndexByRow[s]=c[s];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var p=n.varIndexByCol;for(o=0;o<this.width;o+=1)this.varIndexByCol[o]=p[o];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var m=n.rowByVarIndex,g=n.colByVarIndex,_=0;_<this.nVars;_+=1)this.rowByVarIndex[_]=m[_],this.colByVarIndex[_]=g[_];if(n.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<n.optionalObjectives.length;h++){var x=n.optionalObjectives[h].copy();this.optionalObjectives[h]=x,this.optionalObjectivePerPriority[x.priority]=x}}}},g0}var w0={},v0;function yC(){if(v0)return w0;v0=1;var e=zn();function n(r,o){this.index=r,this.value=o}return e.prototype.getMostFractionalVar=function(){for(var r=0,o=null,s=null,u=this.model.integerVariables,l=u.length,c=0;c<l;c++){var p=u[c].index,m=this.rowByVarIndex[p];if(m!==-1){var g=this.matrix[m][this.rhsColumn],_=Math.abs(g-Math.round(g));r<_&&(r=_,o=p,s=g)}}return new n(o,s)},e.prototype.getFractionalVarWithLowestCost=function(){for(var r=1/0,o=null,s=null,u=this.model.integerVariables,l=u.length,c=0;c<l;c++){var p=u[c],m=p.index,g=this.rowByVarIndex[m];if(g!==-1){var _=this.matrix[g][this.rhsColumn];if(Math.abs(_-Math.round(_))>this.precision){var h=p.cost;r>h&&(r=h,o=m,s=_)}}}return new n(o,s)},w0}var b0={},k0;function gC(){if(k0)return b0;k0=1;var e=zn();return e.prototype.countIntegerValues=function(){for(var n=0,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var o=this.matrix[r][this.rhsColumn];o=o-Math.floor(o),o<this.precision&&-o<this.precision&&(n+=1)}return n},e.prototype.isIntegral=function(){for(var n=this.model.integerVariables,r=n.length,o=0;o<r;o++){var s=this.rowByVarIndex[n[o].index];if(s!==-1){var u=this.matrix[s][this.rhsColumn];if(Math.abs(u-Math.round(u))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(n){for(var r=-1,o=1;o<this.height;o+=1)if(this.variablesPerIndex[this.varIndexByRow[o]].isInteger){var s=this.matrix[o][this.rhsColumn];s=Math.abs(s);var u=Math.min(s-Math.floor(s),Math.floor(s+1));if(u<this.precision){if(!n)return 0}else r===-1?r=s:r*=s}return r===-1?0:r},b0}var md,q0;function xC(){return q0||(q0=1,pC(),_C(),mC(),fC(),hC(),yC(),gC(),md=zn()),md}var M0={},C0;function ng(){if(C0)return M0;C0=1;var e=zn();function n(s,u,l){this.type=s,this.varIndex=u,this.value=l}function r(s,u){this.relaxedEvaluation=s,this.cuts=u}function o(s,u){return u.relaxedEvaluation-s.relaxedEvaluation}return e.prototype.applyCuts=function(s){if(this.restore(),this.addCutConstraints(s),this.simplex(),this.model.useMIRCuts)for(var u=!0;u;){var l=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var c=this.computeFractionalVolume(!0);c>=.9*l&&(u=!1)}},e.prototype.branchAndCut=function(){var s=[],u=0,l=this.model.tolerance,c=!0,p=1e99;this.model.timeout&&(p=Date.now()+this.model.timeout);for(var m=1/0,g=null,_=[],h=0;h<this.optionalObjectives.length;h+=1)_.push(1/0);var x=new r(-1/0,[]),b;for(s.push(x);s.length>0&&c===!0&&Date.now()<p;)if(this.model.isMinimization?b=this.bestPossibleEval*(1+l):b=this.bestPossibleEval*(1-l),l>0&&m<b&&(c=!1),x=s.pop(),!(x.relaxedEvaluation>m)){var M=x.cuts;if(this.applyCuts(M),u++,this.feasible!==!1){var k=this.evaluation;if(!(k>m)){if(k===m){for(var v=!0,S=0;S<this.optionalObjectives.length&&!(this.optionalObjectives[S].reducedCosts[0]>_[S]);S+=1)if(this.optionalObjectives[S].reducedCosts[0]<_[S]){v=!1;break}if(v)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,u===1){this.branchAndCutIterations=u;return}g=x,m=k;for(var q=0;q<this.optionalObjectives.length;q+=1)_[q]=this.optionalObjectives[q].reducedCosts[0]}else{u===1&&this.save();for(var C=this.getMostFractionalVar(),P=C.index,I=[],R=[],V=M.length,A=0;A<V;A+=1){var ee=M[A];ee.varIndex===P?ee.type==="min"?R.push(ee):I.push(ee):(I.push(ee),R.push(ee))}var W=Math.ceil(C.value),H=Math.floor(C.value),te=new n("min",P,W);I.push(te);var T=new n("max",P,H);R.push(T),s.push(new r(k,I)),s.push(new r(k,R)),s.sort(o)}}}}g!==null&&this.applyCuts(g.cuts),this.branchAndCutIterations=u},M0}var fd,S0;function wC(){if(S0)return fd;S0=1;var e=zn();ng();var n=vp(),r=n.Constraint,o=n.Equality,s=n.Variable,u=n.IntegerVariable;n.Term;function l(c,p){this.tableau=new e(c),this.name=p,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return fd=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var c=this.lastElementIndex;return this.lastElementIndex+=1,c},l.prototype._addConstraint=function(c){var p=c.slack;this.tableau.variablesPerIndex[p.index]=p,this.constraints.push(c),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(c)},l.prototype.smallerThan=function(c){var p=new r(c,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),p},l.prototype.greaterThan=function(c){var p=new r(c,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),p},l.prototype.equal=function(c){var p=new r(c,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(p);var m=new r(c,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(m),new o(p,m)},l.prototype.addVariable=function(c,p,m,g,_){if(typeof _=="string")switch(_){case"required":_=0;break;case"strong":_=1;break;case"medium":_=2;break;case"weak":_=3;break;default:_=0;break}var h=this.tableau.getNewElementIndex();p==null&&(p="v"+h),c==null&&(c=0),_==null&&(_=0);var x;return m?(x=new u(p,c,h,_),this.integerVariables.push(x)):x=new s(p,c,h,_),this.variables.push(x),this.tableau.variablesPerIndex[h]=x,g&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(x),x},l.prototype._removeConstraint=function(c){var p=this.constraints.indexOf(c);if(p===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(p,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(c),c.relaxation&&this.removeVariable(c.relaxation)},l.prototype.removeConstraint=function(c){return c.isEquality?(this._removeConstraint(c.upperBound),this._removeConstraint(c.lowerBound)):this._removeConstraint(c),this},l.prototype.removeVariable=function(c){var p=this.variables.indexOf(c);if(p===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(p,1),this.tableauInitialized===!0&&this.tableau.removeVariable(c),this},l.prototype.updateRightHandSide=function(c,p){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(c,p),this},l.prototype.updateConstraintCoefficient=function(c,p,m){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(c,p,m),this},l.prototype.setCost=function(c,p){var m=c-p.cost;return this.isMinimization===!1&&(m=-m),p.cost=c,this.tableau.updateCost(p,m),this},l.prototype.loadJson=function(c){this.isMinimization=c.opType!=="max";for(var p=c.variables,m=c.constraints,g={},_={},h=Object.keys(m),x=h.length,b=0;b<x;b+=1){var M=h[b],k=m[M],v=k.equal,S=k.weight,q=k.priority,C=S!==void 0||q!==void 0,P,I;if(v===void 0){var R=k.min;R!==void 0&&(P=this.greaterThan(R),g[M]=P,C&&P.relax(S,q));var V=k.max;V!==void 0&&(I=this.smallerThan(V),_[M]=I,C&&I.relax(S,q))}else{P=this.greaterThan(v),g[M]=P,I=this.smallerThan(v),_[M]=I;var A=new o(P,I);C&&A.relax(S,q)}}var ee=Object.keys(p),W=ee.length;this.tolerance=c.tolerance||0,c.timeout&&(this.timeout=c.timeout),c.options&&(c.options.timeout&&(this.timeout=c.options.timeout),this.tolerance===0&&(this.tolerance=c.options.tolerance||0),c.options.useMIRCuts&&(this.useMIRCuts=c.options.useMIRCuts),typeof c.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=c.options.exitOnCycles);for(var H=c.ints||{},te=c.binaries||{},T=c.unrestricted||{},Z=c.optimize,U=0;U<W;U+=1){var J=ee[U],O=p[J],B=O[Z]||0,Q=!!te[J],F=!!H[J]||Q,G=!!T[J],ce=this.addVariable(B,J,F,G);Q&&this.smallerThan(1).addTerm(1,ce);var le=Object.keys(O);for(b=0;b<le.length;b+=1){var me=le[b];if(me!==Z){var ge=O[me],xe=g[me];xe!==void 0&&xe.addTerm(ge,ce);var se=_[me];se!==void 0&&se.addTerm(ge,ce)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(c){this.useMIRCuts=c},l.prototype.debug=function(c){this.checkForCycles=c},l.prototype.log=function(c){return this.tableau.log(c)},fd}var hd={},N0;function vC(){return N0||(N0=1,hd.CleanObjectiveAttributes=function(e){var n,r,o;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){n=Math.random();for(r in e.variables)e.variables[r][e.optimize]&&(e.variables[r][n]=e.variables[r][e.optimize]);return e.constraints[n]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(o in e.optimize)if(e.constraints[o])if(e.constraints[o]==="equal")delete e.optimize[o];else{n=Math.random();for(r in e.variables)e.variables[r][o]&&(e.variables[r][n]=e.variables[r][o]);e.constraints[n]=e.constraints[o],delete e.constraints[o]}return e}}),hd}var El={},yd,E0;function Ud(){if(E0)return yd;E0=1;function e(r){var o={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},s={opType:"",optimize:"_obj",constraints:{},variables:{}},u={">=":"min","<=":"max","=":"equal"},l="",c=null,p="",m="",g="",_=0;typeof r=="string"&&(r=r.split(`
`));for(var h=0;h<r.length;h++)if(g="__"+h,l=r[h],c=null,o.is_objective.test(l))s.opType=l.match(/(max|min)/gi)[0],c=l.match(o.parse_lhs).map(function(M){return M.replace(/\s+/,"")}).slice(1),c.forEach(function(M){p=M.match(o.get_num),p===null?M.substr(0,1)==="-"?p=-1:p=1:p=p[0],p=parseFloat(p),m=M.match(o.get_word)[0].replace(/\;$/,""),s.variables[m]=s.variables[m]||{},s.variables[m]._obj=p});else if(o.is_int.test(l))c=l.match(o.parse_int).slice(1),s.ints=s.ints||{},c.forEach(function(M){M=M.replace(";",""),s.ints[M]=1});else if(o.is_bin.test(l))c=l.match(o.parse_bin).slice(1),s.binaries=s.binaries||{},c.forEach(function(M){M=M.replace(";",""),s.binaries[M]=1});else if(o.is_constraint.test(l)){var x=l.indexOf(":"),b=x===-1?l:l.slice(x+1);c=b.match(o.parse_lhs).map(function(M){return M.replace(/\s+/,"")}),c.forEach(function(M){p=M.match(o.get_num),p===null?M.substr(0,1)==="-"?p=-1:p=1:p=p[0],p=parseFloat(p),m=M.match(o.get_word)[0],s.variables[m]=s.variables[m]||{},s.variables[m][g]=p}),_=parseFloat(l.match(o.parse_rhs)[0]),l=u[l.match(o.parse_dir)[0]],s.constraints[g]=s.constraints[g]||{},s.constraints[g][l]=_}else o.is_unrestricted.test(l)&&(c=l.match(o.parse_int).slice(1),s.unrestricted=s.unrestricted||{},c.forEach(function(M){M=M.replace(";",""),s.unrestricted[M]=1}));return s}function n(r){if(!r)throw new Error("Solver requires a model to operate on");var o="",s={max:"<=",min:">=",equal:"="},u=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(r.opType){o+=r.opType+":";for(var l in r.variables)r.variables[l][l]=r.variables[l][l]?r.variables[l][l]:1,r.variables[l][r.optimize]&&(o+=" "+r.variables[l][r.optimize]+" "+l.replace(u,"_"))}else o+="max:";o+=`;

`;for(var c in r.constraints)for(var p in r.constraints[c])if(typeof s[p]<"u"){for(var m in r.variables)typeof r.variables[m][c]<"u"&&(o+=" "+r.variables[m][c]+" "+m.replace(u,"_"));o+=" "+s[p]+" "+r.constraints[c][p],o+=`;
`}if(r.ints){o+=`

`;for(var g in r.ints)o+="int "+g.replace(u,"_")+`;
`}if(r.unrestricted){o+=`

`;for(var _ in r.unrestricted)o+="unrestricted "+_.replace(u,"_")+`;
`}return o}return yd=function(r){return r.length?e(r):n(r)},yd}const bC={},kC=Object.freeze(Object.defineProperty({__proto__:null,default:bC},Symbol.toStringTag,{value:"Module"})),I0=x1(kC);var P0;function qC(){if(P0)return El;P0=1,El.reformat=Ud();function e(n){return n=n.replace("\\r\\n",`\r
`),n=n.split(`\r
`),n=n.filter(function(r){var o;return o=new RegExp(" 0$","gi"),!(o.test(r)===!0||(o=new RegExp("\\d$","gi"),o.test(r)===!1))}).map(function(r){return r.split(/\:{0,1} +(?=\d)/)}).reduce(function(r,o,s){return r[o[0]]=o[1],r},{}),n}return El.solve=function(n){return new Promise(function(r,o){typeof window<"u"&&o("Function Not Available in Browser");var s=Ud()(n);n.external||o("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),n.external.binPath||o("No Executable | Binary path provided in arguments as 'binPath'"),n.external.args||o("No arguments array for cli | bash provided on 'args' attribute"),n.external.tempName||o("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var u=I0;u.writeFile(n.external.tempName,s,function(l,c){if(l)o(l);else{var p=I0.execFile;n.external.args.push(n.external.tempName),p(n.external.binPath,n.external.args,function(m,g){if(m)if(m.code===1)r(e(g));else{var _={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:m.code,meaning:_[m.code],data:g};o(h)}else r(e(g))})}})})},El}var gd,T0;function MC(){return T0||(T0=1,gd={lpsolve:qC()}),gd}var xd,R0;function V0(){return R0||(R0=1,xd=function(e,n){var r=n.optimize,o=JSON.parse(JSON.stringify(n.optimize)),s=Object.keys(n.optimize),u,l=0,c={},p="",m={},g=[],_,h,x,b;for(delete n.optimize,_=0;_<s.length;_++)o[s[_]]=0;for(_=0;_<s.length;_++){n.optimize=s[_],n.opType=r[s[_]],u=e.Solve(n,void 0,void 0,!0);for(b in s)if(!n.variables[s[b]]){u[s[b]]=u[s[b]]?u[s[b]]:0;for(x in n.variables)n.variables[x][s[b]]&&u[x]&&(u[s[b]]+=u[x]*n.variables[x][s[b]])}for(p="base",h=0;h<s.length;h++)u[s[h]]?p+="-"+(u[s[h]]*1e3|0)/1e3:p+="-0";if(!c[p]){for(c[p]=1,l++,h=0;h<s.length;h++)u[s[h]]&&(o[s[h]]+=u[s[h]]);delete u.feasible,delete u.result,g.push(u)}}for(_=0;_<s.length;_++)n.constraints[s[_]]={equal:o[s[_]]/l};n.optimize="cheater-"+Math.random(),n.opType="max";for(_ in n.variables)n.variables[_].cheater=1;for(_ in g)for(x in g[_])m[x]=m[x]||{min:1e99,max:-1e99};for(_ in m)for(x in g)g[x][_]?(g[x][_]>m[_].max&&(m[_].max=g[x][_]),g[x][_]<m[_].min&&(m[_].min=g[x][_])):(g[x][_]=0,m[_].min=0);return u=e.Solve(n,void 0,void 0,!0),{midpoint:u,vertices:g,ranges:m}}),xd}var wd,j0;function CC(){if(j0)return wd;j0=1;var e=xC(),n=wC(),r=ng(),o=vp(),s=vC(),u=o.Constraint,l=o.Variable,c=o.Numeral,p=o.Term,m=MC(),g=function(){this.Model=n,this.branchAndCut=r,this.Constraint=u,this.Variable=l,this.Numeral=c,this.Term=p,this.Tableau=e,this.lastSolvedModel=null,this.External=m,this.Solve=function(_,h,x,b){if(b)for(var M in s)_=s[M](_);if(!_)throw new Error("Solver requires a model to operate on");if(typeof _.optimize=="object"&&Object.keys(_.optimize>1))return V0()(this,_);if(_.external){var k=Object.keys(m);if(k=JSON.stringify(k),!_.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+k);if(!m[_.external.solver])throw new Error("No support (yet) for "+_.external.solver+". Please use one of these instead:"+k);return m[_.external.solver].solve(_)}else{_ instanceof n||(_=new n(h).loadJson(_));var v=_.solve();if(this.lastSolvedModel=_,v.solutionSet=v.generateSolutionSet(),x)return v;var S={};return S.feasible=v.feasible,S.result=v.evaluation,S.bounded=v.bounded,v._tableau.__isIntegral&&(S.isIntegral=!0),Object.keys(v.solutionSet).forEach(function(q){v.solutionSet[q]!==0&&(S[q]=v.solutionSet[q])}),S}},this.ReformatLP=Ud(),this.MultiObjective=function(_){return V0()(this,_)}};return typeof window=="object"?window.solver=new g:typeof self=="object"&&(self.solver=new g),wd=new g,wd}var SC=CC();const NC=os(SC),Uo=1e-8,tu=1e9,iu=1e6,nu=1e4,Fl=100,Dl=1,Ll=1e-5,Ol=1e-6,EC=(e,n=new Set)=>{console.log("%c[LP Solver] Building Full Graph Model (Flow-Based)","color: #2ecc71; font-weight: bold"),console.log(`  Nodes: ${Object.keys(e.nodes).length}`),console.log(`  Products: ${Object.keys(e.products).length}`),console.log(`  Connections: ${e.connections.length}`),console.log(`  Targets: ${n.size}`),n.size>0&&(console.log("  Target node IDs:",Array.from(n)),n.forEach(o=>{var u;const s=e.nodes[o];s&&console.log(`    - ${o}: ${((u=s.recipe)==null?void 0:u.name)||"Unknown"} (${s.machineCount} machines)`)}));const r={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};Object.keys(e.nodes).forEach(o=>{var S,q,C,P;const s=e.nodes[o],u=`m_${o}`,l=s.machineCount||0;s.cycleTime;const c=s.recipe.power_consumption;let p=0;typeof c=="number"?p=c:typeof c=="object"&&c!==null&&"max"in c&&(p=c.max);const m=s.recipe.pollution,g=typeof m=="number"?m:0,_=kt(s.recipe.machine_id),h=_&&typeof _.cost=="number"?_.cost:0,x=(((S=s.recipe.inputs)==null?void 0:S.length)||0)+(((q=s.recipe.outputs)==null?void 0:q.length)||0),b=Math.ceil(p/15e5)*2,M=x*2,k=1+b+M;r.variables[u]={total_cost:Fl*k+Ll*p+Dl*g+Ol*h};{const I={modelCount:Fl*k,power:Ll*p,pollution:Dl*g,machineCost:Ol*h};o===Object.keys(e.nodes)[0]&&(console.log(`  Sample cost breakdown for ${((C=s.recipe)==null?void 0:C.name)||o}:`),console.log(`    Model count: ${k}  ${Fl} = ${I.modelCount}`),console.log(`    Power: ${p}  ${Ll} = ${I.power}`),console.log(`    Pollution: ${g}  ${Dl} = ${I.pollution}`),console.log(`    Machine cost: ${h}  ${Ol} = ${I.machineCost}`),console.log(`    Total per machine: ${I.modelCount+I.power+I.pollution+I.machineCost}`))}const v=`nonneg_${o}`;if(r.constraints[v]={min:0},r.variables[u][v]=1,n.has(o)){const I=`fixed_${o}`;r.constraints[I]={min:l,max:l},r.variables[u][I]=1,console.log(`  Target node ${o} (${(P=s.recipe)==null?void 0:P.name}): fixed at ${l} machines`)}}),e.connections.forEach(o=>{const s=`f_${o.id}`;r.variables[s]={total_cost:0}}),Object.keys(e.nodes).forEach(o=>{e.nodes[o].outputs.forEach((u,l)=>{const c=`excess_indicator_${o}_${l}`;r.variables[c]={total_cost:iu},r.ints[c]=1;const p=`binary_${o}_${l}`;r.constraints[p]={min:0,max:1},r.variables[c][p]=1})}),Object.keys(e.nodes).forEach(o=>{const s=e.nodes[o];s.outputs.forEach((u,l)=>{const c=`flow_out_${o}_${l}`,p=`excess_${o}_${l}`,m=`excess_indicator_${o}_${l}`;r.variables[p]={total_cost:nu,[c]:-1};const g=`link_excess_${o}_${l}`;r.constraints[g]={max:0};const _=`m_${o}`;let h=s.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const x=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof x!="number")return;const b=s.isMineshaftDrill?x:x/h,M=b*1e4;r.variables[p][g]=1,r.variables[m][g]=-M,r.constraints[c]={min:0},r.variables[_][c]||(r.variables[_][c]=0),r.variables[_][c]+=b,e.connections.filter(v=>v.sourceNodeId===o&&v.sourceOutputIndex===l).forEach(v=>{const S=`f_${v.id}`;r.variables[S][c]||(r.variables[S][c]=0),r.variables[S][c]-=1})}),s.inputs.forEach((u,l)=>{const c=e.connections.filter(b=>b.targetNodeId===o&&b.targetInputIndex===l);if(c.length===0){console.log(`  Skipping unconnected input: ${o} input ${l} (${u.productId})`);return}const p=`flow_in_${o}_${l}`,m=`deficit_${o}_${l}`;r.variables[m]={total_cost:tu,[p]:1};const g=`m_${o}`;let _=s.cycleTime;(typeof _!="number"||_<=0)&&(_=1);const h=u.quantity;if(typeof h!="number")return;const x=s.isMineshaftDrill?h:h/_;r.constraints[p]={min:0},c.forEach(b=>{const M=`f_${b.id}`;r.variables[M][p]||(r.variables[M][p]=0),r.variables[M][p]+=1}),r.variables[g][p]||(r.variables[g][p]=0),r.variables[g][p]-=x})});{const o=Object.keys(r.variables).filter(m=>m.startsWith("m_")).length,s=Object.keys(r.variables).filter(m=>m.startsWith("f_")).length,u=Object.keys(r.variables).filter(m=>m.startsWith("deficit_")).length,l=Object.keys(r.variables).filter(m=>m.startsWith("excess_")&&!m.includes("indicator")).length,c=Object.keys(r.variables).filter(m=>m.startsWith("excess_indicator_")).length;console.log(`  Created ${o} machine variables`),console.log(`  Created ${s} flow variables`),console.log(`  Created ${u} deficiency slack variables (weight: ${tu})`),console.log(`  Created ${l} excess amount variables (weight: ${nu})`),console.log(`  Created ${c} excess count indicators (weight: ${iu})`),console.log(`  Created ${Object.keys(r.constraints).length} constraints`);const p=Object.keys(r.variables).find(m=>m.startsWith("deficit_"));p&&console.log("  Sample deficit variable structure:",r.variables[p])}return r},IC=e=>{const n=Object.keys(e.nodes),r=new Map;n.forEach((x,b)=>r.set(x,b));const o=n.length,s=new Int32Array(o).fill(-1),u=new Int32Array(o),l=new Uint8Array(o),c=[];let p=0;const m=[],g=x=>{s[x]=p,u[x]=p,p++,c.push(x),l[x]=1;const b=n[x];if(e.nodes[b].outputs.forEach(k=>{const v=e.products[k.productId];v&&v.connections.forEach(S=>{if(S.sourceNodeId!==b)return;const q=r.get(S.targetNodeId);q!==void 0&&(s[q]===-1?(g(q),u[x]=Math.min(u[x],u[q])):l[q]&&(u[x]=Math.min(u[x],s[q])))})}),u[x]===s[x]){const k=[];let v;do v=c.pop(),l[v]=0,k.push(n[v]);while(v!==x);k.length>1&&m.push(k)}};for(let x=0;x<o;x++)s[x]===-1&&g(x);const _=[];m.forEach(x=>{const b=new Set(x);let M=!1;for(const k of x){const v=e.nodes[k];for(const S of v.inputs){const q=e.products[S.productId];if(!q)continue;if(q.producers.some(P=>!b.has(P.nodeId))){M=!0;break}}if(M)break}M||_.push({nodes:x,nodeNames:x.map(k=>{var v,S;return((S=(v=e.nodes[k])==null?void 0:v.recipe)==null?void 0:S.name)||k})})});const h=new Set;return m.forEach(x=>x.forEach(b=>h.add(b))),n.forEach(x=>{var k;if(h.has(x))return;const b=e.nodes[x];if(!b)return;const M=new Map;if(b.inputs.forEach(v=>{const S=e.products[v.productId];if(!S)return;const q=S.producers.find(C=>C.nodeId===x);q&&M.set(v.productId,{inputRate:v.rate,outputRate:q.rate})}),M.size>0){let v=!1;for(const[S,q]of M){const C=e.products[S],P=1e-10;if(!(q.outputRate>q.inputRate+P)){if(q.outputRate<q.inputRate-P){if(!C.producers.some(R=>R.nodeId!==x)){v=!0;break}continue}if(Math.abs(q.outputRate-q.inputRate)<P){const I=C.consumers.some(V=>V.nodeId!==x),R=C.producers.some(V=>V.nodeId!==x);if(!I&&!R)continue;if(I&&!R){v=!0;break}if(R)continue}}}v&&_.push({nodes:[x],nodeNames:[((k=b.recipe)==null?void 0:k.name)||x],isSelfFeeding:!0})}}),_},PC=(e,n=new Set)=>{const r=IC(e);if(r.length>0)return console.log("%c[LP Solver] Unsustainable Loops Detected","color: #e74c3c; font-weight: bold"),r.forEach((u,l)=>{console.log(`  Loop ${l+1}: ${u.nodeNames.join("  ")}`),console.log("    These nodes form a cycle with no external input source")}),{feasible:!1,unsustainableLoops:r,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const o=EC(e,n);console.log("%c[LP Solver] Solving Full Graph","color: #2ecc71; font-weight: bold");const s=NC.Solve(o);if(s.feasible){console.log("   Feasible solution found"),console.log(`    Reported cost: ${s.total_cost||0}`);let u=0,l=0,c=0,p=0,m=0,g=0,_=0,h=0,x=0,b=0,M=0,k=0,v=0,S=0,q=0;Object.keys(s).forEach(C=>{var P,I;if(C.startsWith("deficit_")){const R=s[C]||0;R>Uo&&(x+=R,l+=R*tu,console.log(`    DEFICIENCY ${C}: ${R} (cost: ${R*tu})`))}if(C.startsWith("excess_indicator_")){const R=s[C]||0;R>Uo&&(b+=R,c+=R*iu,console.log(`    EXCESS COUNT ${C}: ${R} (cost: ${R*iu})`))}if(C.startsWith("excess_")&&!C.includes("indicator")){const R=s[C]||0;R>Uo&&(M+=R,p+=R*nu,console.log(`    EXCESS AMOUNT ${C}: ${R} (cost: ${R*nu})`))}if(C.startsWith("m_")){const R=C.substring(2),V=e.nodes[R],A=s[C]||0;V.cycleTime;const ee=V.recipe.power_consumption;let W=0;typeof ee=="number"?W=ee:typeof ee=="object"&&ee!==null&&"max"in ee&&(W=ee.max);const H=V.recipe.pollution,te=typeof H=="number"?H:0,T=kt(V.recipe.machine_id),Z=T&&typeof T.cost=="number"?T.cost:0,U=(((P=V.recipe.inputs)==null?void 0:P.length)||0)+(((I=V.recipe.outputs)==null?void 0:I.length)||0),J=Math.ceil(W/15e5)*2,O=U*2,B=1+J+O,Q=Math.ceil(A),F=Q*B,G=A*W,ce=A*te,le=Q*Z;k+=F,v+=G,S+=ce,q+=le,m+=F*Fl,g+=G*Ll,_+=ce*Dl,h+=le*Ol}}),u=l+c+p+m+g+_+h,console.log(`    Total deficiency: ${x} (cost: ${l})`),console.log(`    Total excess count: ${b} outputs (cost: ${c})`),console.log(`    Total excess amount: ${M} (cost: ${p})`),console.log(`    Total model count: ${k.toFixed(2)} (cost: ${m.toFixed(2)})`),console.log(`    Total power: ${v.toFixed(2)} W (cost: ${g.toFixed(2)})`),console.log(`    Total pollution: ${S.toFixed(2)} %/hr (cost: ${_.toFixed(2)})`),console.log(`    Total machine cost: $${q.toFixed(2)} (cost: ${h.toFixed(2)})`),console.log(`    ACTUAL TOTAL COST: ${u.toFixed(2)}`),Object.keys(e.nodes).forEach(C=>{var W;const P=e.nodes[C],I=`m_${C}`,R=s[I]||0,V=P.machineCount||0,ee=Math.abs(R-V)>Uo?" ":"";console.log(`    ${((W=P==null?void 0:P.recipe)==null?void 0:W.name)||C}: ${V}  ${R}${ee}`)})}else console.log("   No feasible solution"),s.bounded===!1&&console.log("    Problem is unbounded");return s},TC=(e,n)=>{const r=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(n.nodes).forEach(o=>{var p;const s=n.nodes[o],u=`m_${o}`,l=e[u]!==void 0?e[u]:0,c=s.machineCount||0;if(l>=-Uo){const m=Math.max(0,l);Math.abs(m-c)>Uo&&(r.set(o,m),console.log(`  Update: ${((p=s==null?void 0:s.recipe)==null?void 0:p.name)||o}: ${c}  ${m}`))}}),r},RC=(e,n,r)=>{if(r.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const o=Ga(e,n),s=new Set(r.map(c=>c.recipeBoxId)),u=PC(o,s);if(!u.feasible){if(u.unsustainableLoops){const c=u.unsustainableLoops.map(p=>p.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${c}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}const l=TC(u,o);return{success:l.size>0,updates:l,converged:!0,iterations:1,message:l.size>0?`Updated ${l.size} nodes`:"Network already balanced"}},VC={custom:DM},jC={custom:OM},F0=({productName:e,connectedFlow:n,currentExcess:r,onTargetExcessCommit:o,styleType:s})=>{const[u,l]=j.useState(""),[c,p]=j.useState(!1),m=x=>typeof x!="number"?"0":x.toFixed(4),g=c?u:m(r),_=()=>{if(!c)return;const x=parseFloat(u);isNaN(x)||o(x),p(!1),l("")},h=x=>{x.key==="Enter"&&_()};return f.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:s==="input"?"var(--input-bg)":"var(--output-bg)",border:`1px solid ${s==="input"?"var(--input-border)":"var(--output-border)"}`,borderRadius:"var(--radius-sm)"},children:[f.jsx("div",{style:{color:s==="input"?"var(--input-text)":"var(--output-text)",fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",m(n),"/s"]}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[s==="output"?"Current Excess:":"Current Deficiency:"," ",m(Math.abs(r)),"/s"]}),f.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:s==="output"?"Target Excess:":"Target Additional Demand:"}),f.jsx("input",{type:"text",value:g,onFocus:()=>{p(!0),l(m(r))},onChange:x=>l(x.target.value),onBlur:_,onKeyPress:h,className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),f.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},D0=e=>{const n=e;if(n<0)return 0;const r=1+5429*n/7322;return Math.pow(Math.log(r),1.1)};function FC(){const[e,n,r]=aq([]),[o,s,u]=sq([]),[l,c]=j.useState(0),[p,m]=j.useState(!1),[g,_]=j.useState(!1),[h,x]=j.useState(null),[b,M]=j.useState(null),[k,v]=j.useState("product"),[S,q]=j.useState("button"),[C,P]=j.useState(""),[I,R]=j.useState("name_asc"),[V,A]=j.useState("all"),[ee,W]=j.useState("all"),[H,te]=j.useState("all"),[T,Z]=j.useState(null),[U,J]=j.useState([]),[O,B]=j.useState(!1),[Q,F]=j.useState(0),[G,ce]=j.useState(!1),[le,me]=j.useState(null),[ge,xe]=j.useState(""),[se,ve]=j.useState(null),[Oe,$e]=j.useState(!1),[Le,Fe]=j.useState(!1),[Qe,Je]=j.useState(!1),[He,Ze]=j.useState(()=>{const E=jl();return{edgePath:E.edgePath||"orthogonal",edgeStyle:E.edgeStyle||"animated"}}),[Dt,Tt]=j.useState(!1),[yt,ai]=j.useState(!1),[Ke,Ht]=j.useState(0),[Ai,gt]=j.useState(!1),[Xt,Wt]=j.useState(!0),[qt,Kt]=j.useState({}),[lt,tn]=j.useState("perSecond"),[Lt,kn]=j.useState("total"),[Ot,fi]=j.useState([]),[Rt,si]=j.useState(null),[Vt,hi]=j.useState(null),[Ut,Bt]=j.useState(null),[Nt,li]=j.useState(null),[nn,yi]=j.useState(null),[ui,qn]=j.useState({}),[Et,rn]=j.useState(null),[Ii,on]=j.useState({x:0,y:0}),Zt=j.useRef(null),an=j.useRef(null),Pi=j.useRef(null),sn=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",zi=j.useRef(null),ye=j.useRef([]),et=j.useCallback(E=>{const L=[],$=[];for(let z=0;z<E.length;z++){const K=E[z];K.type==="position"&&K.dragging?L.push(K):$.push(K)}L.length>0&&r(L),$.length>0&&(ye.current.push(...$),zi.current&&clearTimeout(zi.current),zi.current=setTimeout(()=>{ye.current.length>0&&(r(ye.current),ye.current=[])},50))},[r]),ut=j.useCallback(E=>{u(E)},[u]);j.useEffect(()=>{const E=jl();eu(E),Ze({edgePath:E.edgePath||"orthogonal",edgeStyle:E.edgeStyle||"animated"})},[]),j.useEffect(()=>{const E=Dq();if(E!=null&&E.nodes){const L=E.nodes.map($=>{var ne,de,ae,Ve;const z=kt((de=(ne=$.data)==null?void 0:ne.recipe)==null?void 0:de.machine_id);let K=(ae=$.data)==null?void 0:ae.recipe;return z&&K&&!((Ve=K.outputs)!=null&&Ve.some(ke=>ke.temperature!==void 0))&&(K=ud(K,z.id)),{...$,data:{...$.data,recipe:K,machineCount:$.data.machineCount??1,displayMode:lt,machineDisplayMode:Lt,onInputClick:gi,onOutputClick:xi,onDrillSettingsChange:wi,onLogicAssemblerSettingsChange:Hi,onTreeFarmSettingsChange:un,onIndustrialFireboxSettingsChange:Ri,onTemperatureSettingsChange:vi,onBoilerSettingsChange:Vi,onChemicalPlantSettingsChange:Ui,onMiddleClick:di,onHandleDoubleClick:Wi,globalPollution:Ke,flows:null,suggestions:[]}}});n(L),s(E.edges||[]),J(E.targetProducts||[]),Kt(E.soldProducts||{}),fi(E.favoriteRecipes||[]),si(E.lastDrillConfig||null),hi(E.lastAssemblerConfig||null),Bt(E.lastTreeFarmConfig||null),li(E.lastFireboxConfig||null),yi(E.lastWasteFacilityConfig||null),c(E.nodeId||0),F(E.targetIdCounter||0)}},[]),j.useEffect(()=>{n(E=>{const L=new Array(E.length);for(let $=0;$<E.length;$++){const z=E[$];L[$]={...z,data:{...z.data,displayMode:lt,machineDisplayMode:Lt}}}return L})},[lt,Lt,n]),j.useEffect(()=>{s(E=>E.map(L=>({...L,data:He})))},[He,s]),j.useEffect(()=>{const E={nodes:e,edges:o,targetProducts:U,nodeId:l,targetIdCounter:Q,soldProducts:qt,favoriteRecipes:Ot,lastDrillConfig:Rt,lastAssemblerConfig:Vt,lastTreeFarmConfig:Ut,lastFireboxConfig:Nt,lastWasteFacilityConfig:nn};localStorage.setItem("industrialist_canvas_state",JSON.stringify(E))},[e,o,U,l,Q,qt,Ot,Rt,Vt,Ut,Nt,nn]);const Gt=j.useCallback(()=>{let E=0,L=0,$=0;return e.forEach(z=>{var ue,fe,Ce,qe,ze,Ge,nt,at,st;const K=(ue=z.data)==null?void 0:ue.recipe,ne=(fe=z.data)==null?void 0:fe.machine;if(!K)return;if((ne==null?void 0:ne.id)==="m_industrial_firebox"){const Ct=((Ce=z.data)==null?void 0:Ce.machineCount)||0,pi=K.pollution,In=typeof pi=="number"?pi:parseFloat(pi);!isNaN(In)&&isFinite(In)&&(L+=In*Ct);const fr=(((qe=K.inputs)==null?void 0:qe.length)||0)+(((ze=K.outputs)==null?void 0:ze.length)||0),hr=0,Yr=fr*2,yr=Math.ceil(Ct);$+=yr*(1+hr+Yr);return}if((ne==null?void 0:ne.id)==="m_tree_farm"&&(K!=null&&K.treeFarmSettings)){const Ct=((Ge=z.data)==null?void 0:Ge.machineCount)||0,pi=K.treeFarmSettings,In=Math.ceil(pi.sprinklers/3),fr=K.power_consumption,hr=typeof fr=="number"?fr:0;E+=hr*Ct;const Yr=K.pollution,yr=typeof Yr=="number"?Yr:parseFloat(Yr);!isNaN(yr)&&isFinite(yr)&&(L+=yr*Ct);const gu=K.power_type==="HV"?2:Math.ceil(hr/15e5)*2,xu=pi.trees+pi.harvesters+pi.sprinklers+In*3+pi.controller+pi.outputs*3+gu,wu=Math.ceil(Ct);$+=wu*xu;return}const de=((nt=z.data)==null?void 0:nt.machineCount)||0,ae=K.power_consumption;let Ve=0;typeof ae=="number"?(Ve=ae,E+=ae*de):typeof ae=="object"&&ae!==null&&"max"in ae&&(Ve=ae.max,E+=Ve*de);const ke=K.pollution,Ne=typeof ke=="number"?ke:parseFloat(ke);!isNaN(Ne)&&isFinite(Ne)&&(L+=Ne*de);const Pe=(((at=K.inputs)==null?void 0:at.length)||0)+(((st=K.outputs)==null?void 0:st.length)||0),Ae=K.power_type==="HV"?2:Math.ceil(Ve/15e5)*2,Se=Pe*2,be=Math.ceil(de);$+=be*(1+Ae+Se)}),{totalPower:E,totalPollution:L,totalModelCount:$}},[e]),Jt=j.useMemo(()=>Gt(),[e]);j.useEffect(()=>{if(Xt||Jt.totalPollution===0)return;const E=setInterval(()=>{if(Ai)return;const L=Jt.totalPollution/3600;Ht($=>{if(typeof $!="number"||isNaN($)||!isFinite($))return $;const z=parseFloat(($+L).toFixed(4));return z!==$?z:$})},1e3);return()=>clearInterval(E)},[Jt.totalPollution,Ai,Xt]),j.useEffect(()=>{const E=setInterval(()=>{ir()},2e4);return()=>clearInterval(E)},[]);const ei=j.useRef(null),Br=j.useRef(Ke);j.useEffect(()=>{if(!(Math.abs(Ke-Br.current)<.01))return Br.current=Ke,ei.current&&clearTimeout(ei.current),ei.current=setTimeout(()=>{n(E=>{var z,K;const L=new Array(E.length);let $=!1;for(let ne=0;ne<E.length;ne++){const de=E[ne],ae=(z=de.data)==null?void 0:z.recipe,Ve=(K=de.data)==null?void 0:K.machine;if(ae!=null&&ae.isTreeFarm&&ae.treeFarmSettings){const ke=ae.treeFarmSettings,Ne=hp(ke.trees,ke.harvesters,Ke),Pe=Zl(ke.trees,ke.harvesters,ke.sprinklers,ke.outputs,ke.controller,Ke);$=!0,L[ne]={...de,data:{...de.data,recipe:{...ae,outputs:Ne,power_consumption:Pe?Pe.avgPowerConsumption:"Variable"},globalPollution:Ke}}}else if((Ve==null?void 0:Ve.id)==="m_air_separation_unit"){const ke=D0(Ke),Ne=new Array(ae.outputs.length);for(let Pe=0;Pe<ae.outputs.length;Pe++){const Ae=ae.outputs[Pe];Ae.product_id==="p_residue"?Ne[Pe]={...Ae,quantity:parseFloat(ke.toFixed(6))}:Ne[Pe]=Ae}$=!0,L[ne]={...de,data:{...de.data,recipe:{...ae,outputs:Ne},globalPollution:Ke}}}else de.data.globalPollution!==Ke?($=!0,L[ne]={...de,data:{...de.data,globalPollution:Ke}}):L[ne]=de}return $?L:E})},250),()=>{ei.current&&clearTimeout(ei.current)}},[Ke,n]);const[Me,$n]=j.useState(()=>r0([],[],{skipTemperature:!0})),$i=j.useRef(null),Cn=j.useRef(""),Ar=j.useRef(!1),dr=j.useRef(null),Ie=j.useCallback((E="general")=>{dr.current=E,Ar.current=!0},[]);j.useEffect(()=>{if(Ar.current)return $i.current&&clearTimeout($i.current),$i.current=setTimeout(()=>{const E=`${e.length}-${o.length}-${e.map(L=>{var $,z,K,ne,de,ae,Ve,ke,Ne,Pe,Ae,Se,be;return`${L.id}:${($=L.data)==null?void 0:$.machineCount}:${JSON.stringify(((K=(z=L.data)==null?void 0:z.recipe)==null?void 0:K.temperatureSettings)||{})}:${JSON.stringify(((de=(ne=L.data)==null?void 0:ne.recipe)==null?void 0:de.drillSettings)||{})}:${JSON.stringify(((Ve=(ae=L.data)==null?void 0:ae.recipe)==null?void 0:Ve.assemblerSettings)||{})}:${JSON.stringify(((Ne=(ke=L.data)==null?void 0:ke.recipe)==null?void 0:Ne.treeFarmSettings)||{})}:${JSON.stringify(((Ae=(Pe=L.data)==null?void 0:Pe.recipe)==null?void 0:Ae.fireboxSettings)||{})}:${JSON.stringify(((be=(Se=L.data)==null?void 0:Se.recipe)==null?void 0:be.chemicalPlantSettings)||{})}`}).join(",")}`;if(E!==Cn.current){const L=dr.current||"general",$=L==="connection"||L==="node"||L==="temperatureSettings"||L==="boilerSettings";console.log(`[Recalculation] Reason: ${L}, Temperature propagation: ${$}`);const z=r0(e,o,{skipTemperature:!$,previousTemperatureData:$?null:Me==null?void 0:Me.temperatureData});$n(z),Cn.current=E}Ar.current=!1,dr.current=null},100),()=>{$i.current&&clearTimeout($i.current)}},[e,o,Me]);const yo=j.useMemo(()=>iC(Me),[Me]),pr=j.useMemo(()=>nC(Me),[Me]),Sn=j.useRef(null),Hn=j.useRef(null);j.useEffect(()=>{var E;if((E=Me==null?void 0:Me.flows)!=null&&E.byNode){if(Hn.current===Me.flows)return;Hn.current=Me.flows,Sn.current&&clearTimeout(Sn.current),Sn.current=setTimeout(()=>{n(L=>{var z,K,ne,de,ae,Ve,ke,Ne,Pe,Ae;const $=new Array(L.length);if(Me.temperatureData){const Se=Hd(L,Me.temperatureData,Me.graph);for(let be=0;be<Se.length;be++){const ue=Se[be],fe=(z=ue.data)==null?void 0:z.recipe;if(fe!=null&&fe.isWasteFacility){const Ce=Me.flows.byNode[ue.id],qe=Math.min(((K=Ce==null?void 0:Ce.inputFlows[0])==null?void 0:K.connected)||0,240),ze=Math.min(((ne=Ce==null?void 0:Ce.inputFlows[1])==null?void 0:ne.connected)||0,240),Ge=fe.wasteFacilitySettings||{},nt=za(qe,ze),at=Ua(qe,ze,fe.inputs[0].product_id,fe.inputs[1].product_id);$[be]={...ue,data:{...ue.data,recipe:{...fe,inputs:at,cycle_time:nt.cycleTime,wasteFacilitySettings:{...Ge,itemFlowRate:qe,fluidFlowRate:ze}},flows:Me.flows.byNode[ue.id]||null,suggestions:Me.suggestions||[]}}}else if(fe!=null&&fe.isLiquidDump){const Ce=Me.flows.byNode[ue.id],qe=((de=ue.data)==null?void 0:de.machineCount)||1,ze=fe.inputs.map((nt,at)=>{var Ct;return Math.min(((Ct=Ce==null?void 0:Ce.inputFlows[at])==null?void 0:Ct.connected)||0,15*qe)/qe}),Ge=Ho(fe.inputs,ze);$[be]={...ue,data:{...ue.data,recipe:{...fe,pollution:Ge},flows:Me.flows.byNode[ue.id]||null,suggestions:Me.suggestions||[]}}}else if(fe!=null&&fe.isLiquidBurner){const Ce=Me.flows.byNode[ue.id],qe=((ae=ue.data)==null?void 0:ae.machineCount)||1,ze=fe.inputs.map((nt,at)=>{var Ct;return Math.min(((Ct=Ce==null?void 0:Ce.inputFlows[at])==null?void 0:Ct.connected)||0,15*qe)/qe}),Ge=Wo(fe.inputs,ze);$[be]={...ue,data:{...ue.data,recipe:{...fe,pollution:Ge},flows:Me.flows.byNode[ue.id]||null,suggestions:Me.suggestions||[]}}}else $[be]={...ue,data:{...ue.data,flows:Me.flows.byNode[ue.id]||null,suggestions:Me.suggestions||[]}}}}else for(let Se=0;Se<L.length;Se++){const be=L[Se],ue=(Ve=be.data)==null?void 0:Ve.recipe;if(ue!=null&&ue.isWasteFacility){const fe=Me.flows.byNode[be.id],Ce=Math.min(((ke=fe==null?void 0:fe.inputFlows[0])==null?void 0:ke.connected)||0,240),qe=Math.min(((Ne=fe==null?void 0:fe.inputFlows[1])==null?void 0:Ne.connected)||0,240),ze=ue.wasteFacilitySettings||{},Ge=za(Ce,qe),nt=Ua(Ce,qe,ue.inputs[0].product_id,ue.inputs[1].product_id);$[Se]={...be,data:{...be.data,recipe:{...ue,inputs:nt,cycle_time:Ge.cycleTime,wasteFacilitySettings:{...ze,itemFlowRate:Ce,fluidFlowRate:qe}},flows:Me.flows.byNode[be.id]||null,suggestions:Me.suggestions||[]}}}else if(ue!=null&&ue.isLiquidDump){const fe=Me.flows.byNode[be.id],Ce=((Pe=be.data)==null?void 0:Pe.machineCount)||1,qe=ue.inputs.map((Ge,nt)=>{var st;return Math.min(((st=fe==null?void 0:fe.inputFlows[nt])==null?void 0:st.connected)||0,15*Ce)/Ce}),ze=Ho(ue.inputs,qe);$[Se]={...be,data:{...be.data,recipe:{...ue,pollution:ze},flows:Me.flows.byNode[be.id]||null,suggestions:Me.suggestions||[]}}}else if(ue!=null&&ue.isLiquidBurner){const fe=Me.flows.byNode[be.id],Ce=((Ae=be.data)==null?void 0:Ae.machineCount)||1,qe=ue.inputs.map((Ge,nt)=>{var st;return Math.min(((st=fe==null?void 0:fe.inputFlows[nt])==null?void 0:st.connected)||0,15*Ce)/Ce}),ze=Wo(ue.inputs,qe);$[Se]={...be,data:{...be.data,recipe:{...ue,pollution:ze},flows:Me.flows.byNode[be.id]||null,suggestions:Me.suggestions||[]}}}else $[Se]={...be,data:{...be.data,flows:Me.flows.byNode[be.id]||null,suggestions:Me.suggestions||[]}}}return $})},250)}return()=>{Sn.current&&clearTimeout(Sn.current)}},[Me,n]);const _r=j.useMemo(()=>yo.map(E=>{const L=typeof E.product.price=="number"&&E.product.price>0,$=qt[E.productId];return{...E,isSold:$!==void 0?$:L}}),[yo,qt]),zr=j.useMemo(()=>_r.reduce((E,L)=>L.isSold&&typeof L.product.price=="number"?E+L.product.price*L.excessRate:E,0),[_r]),ln=j.useMemo(()=>{const E={},L={};e.forEach(z=>{var ke,Ne,Pe,Ae,Se,be,ue,fe,Ce;const K=(ke=z.data)==null?void 0:ke.machine,ne=((Ne=z.data)==null?void 0:Ne.machineCount)||0,de=(Pe=z.data)==null?void 0:Pe.recipe;if(!K)return;if(K.id==="m_tree_farm"&&(de!=null&&de.treeFarmSettings)){const qe=de.treeFarmSettings,ze=Math.ceil(qe.sprinklers/3);E.m_tree||(E.m_tree=0),L.m_tree||(L.m_tree=((Ae=kt("m_tree"))==null?void 0:Ae.cost)||0),E.m_tree+=Math.ceil(qe.trees*ne),E.m_tree_harvester||(E.m_tree_harvester=0),L.m_tree_harvester||(L.m_tree_harvester=((Se=kt("m_tree_harvester"))==null?void 0:Se.cost)||0),E.m_tree_harvester+=Math.ceil(qe.harvesters*ne),E.m_tree_farm_sprinkler||(E.m_tree_farm_sprinkler=0),L.m_tree_farm_sprinkler||(L.m_tree_farm_sprinkler=((be=kt("m_tree_farm_sprinkler"))==null?void 0:be.cost)||0),E.m_tree_farm_sprinkler+=Math.ceil(qe.sprinklers*ne),E.m_tree_farm_water_tank||(E.m_tree_farm_water_tank=0),L.m_tree_farm_water_tank||(L.m_tree_farm_water_tank=((ue=kt("m_tree_farm_water_tank"))==null?void 0:ue.cost)||0),E.m_tree_farm_water_tank+=Math.ceil(ze*ne),E.m_tree_farm_output||(E.m_tree_farm_output=0),L.m_tree_farm_output||(L.m_tree_farm_output=((fe=kt("m_tree_farm_output"))==null?void 0:fe.cost)||0),E.m_tree_farm_output+=Math.ceil(qe.outputs*ne),E.m_tree_farm_controller||(E.m_tree_farm_controller=0),L.m_tree_farm_controller||(L.m_tree_farm_controller=((Ce=kt("m_tree_farm_controller"))==null?void 0:Ce.cost)||0),E.m_tree_farm_controller+=Math.ceil(qe.controller*ne);return}const ae=K.id,Ve=Math.ceil(ne);E[ae]||(E[ae]=0,L[ae]=typeof K.cost=="number"?K.cost:0),E[ae]+=Ve});const $=Object.keys(E).map(z=>{const K=rr.find(ae=>ae.id===z),ne=E[z],de=L[z];return{machineId:z,machine:K,count:ne,cost:de,totalCost:ne*de}}).sort((z,K)=>z.machine.name.localeCompare(K.machine.name));return{stats:$,totalCost:$.reduce((z,K)=>z+K.totalCost,0)}},[e,rr]),_t=(E,L)=>n($=>$.map(z=>z.id===E?{...z,data:L(z.data)}:z)),mr=j.useCallback((E,L,$,z)=>{const K=Object.keys(rs).map(ae=>parseInt(ae));let ne=null,de=0;return K.forEach(ae=>{const ke=rs[ae].find(Ne=>Ne.product_id===E);if(ke){const Ne=ra(L,$,z,ae);if(Ne){const Pe=z?1.1:1,Ae=ke.quantity*Pe*Ne.dutyCycle;Ae>de&&(de=Ae,ne=ae)}}}),ne},[]),ci=j.useCallback((E,L,$)=>{const z={drillConfig:Rt,assemblerConfig:Vt,treeFarmConfig:Ut,fireboxConfig:Nt},K=(Me==null?void 0:Me.flows)||null;return sC(E,L,$,mr,z,Ke,K)},[Rt,Vt,Ut,Nt,mr,Ke,Me]),oa=j.useCallback(E=>{const L=e.find(ae=>ae.id===E.source),$=e.find(ae=>ae.id===E.target);if(!L||!$)return;const z=L.data.recipe.outputs[parseInt(E.sourceHandle.split("-")[1])],K=$.data.recipe.inputs[parseInt(E.targetHandle.split("-")[1])];if(!z||!K)return;const ne=z.product_id,de=K.product_id;if(K.isAnyProduct){const ae=vt(ne),Ve=K.acceptedType;if(Ve&&(ae==null?void 0:ae.type)!==Ve)return;n(ke=>ke.map(Ne=>{var Pe;if(Ne.id===$.id){const Ae=[...Ne.data.recipe.inputs],Se=parseInt(E.targetHandle.split("-")[1]);if(Ae[Se]={...Ae[Se],product_id:ne,isAnyProduct:!1},Ne.data.recipe.isWasteFacility){const be=Ne.data.recipe.wasteFacilitySettings||{},ue=(Pe=Me==null?void 0:Me.flows)==null?void 0:Pe.byNode[E.source],fe=parseInt(E.sourceHandle.split("-")[1]),Ce=ue==null?void 0:ue.outputFlows[fe],qe=Ce?Ce.produced-Ce.connected:0,ze=Math.min(qe,240),Ge=parseInt(E.targetHandle.split("-")[1]);Ge===0?be.itemFlowRate=ze:Ge===1&&(be.fluidFlowRate=ze);const nt=za(be.itemFlowRate||0,be.fluidFlowRate||0),at=Ua(be.itemFlowRate||0,be.fluidFlowRate||0,Ge===0?ne:Ae[0].product_id,Ge===1?ne:Ae[1].product_id);return{...Ne,data:{...Ne.data,recipe:{...Ne.data.recipe,inputs:at,cycle_time:nt.cycleTime,wasteFacilitySettings:be}}}}if(Ne.data.recipe.isLiquidDump||Ne.data.recipe.isLiquidBurner){const be=Ne.data.recipe.isLiquidDump?Ho(Ae):Wo(Ae);return{...Ne,data:{...Ne.data,recipe:{...Ne.data.recipe,inputs:Ae,pollution:be}}}}return{...Ne,data:{...Ne.data,recipe:{...Ne.data.recipe,inputs:Ae}}}}return Ne}))}else if(ne!==de)return;s(ae=>Id({...E,type:"custom",animated:!1,data:He},ae)),ir(),Ie("connection")},[s,e,He,Ie,n,Me]),Ti=()=>{m(!1),x(null),M(null),v("product"),P(""),R("name_asc"),A("all"),W("all"),Z(null),q("button"),qn({}),te("all")},aa=j.useCallback(()=>{m(!0),Z(null),q("button")},[]),gi=j.useCallback((E,L,$,z)=>{if(z!=null&&z.ctrlKey){s(ne=>ne.filter(de=>!(de.target===L&&de.targetHandle===`left-${$}`))),ir(),Ie("connection");return}const K=vt(E);K&&(m(!0),x(K),Z({nodeId:L,inputIndex:$,productId:E}),q("rectangle"),W("producers"))},[s]),xi=j.useCallback((E,L,$,z)=>{var Ve,ke;if(z!=null&&z.ctrlKey){s(Ne=>Ne.filter(Pe=>!(Pe.source===L&&Pe.sourceHandle===`right-${$}`))),ir(),Ie("connection");return}const K=Yi.current.find(Ne=>Ne.id===L),ne=(ke=(Ve=K==null?void 0:K.data)==null?void 0:Ve.recipe)==null?void 0:ke.machine_id,de=ne&&oi[ne],ae=vt(E);ae&&(m(!0),x(ae),Z({nodeId:L,outputIndex:$,productId:E,isOutput:!0,isFromHeatSource:!!de}),q("rectangle"),W("consumers"))},[s]),Mt=j.useCallback((E,L,$)=>{s(z=>{const K=z.filter(ne=>{var de,ae,Ve,ke;if(ne.source===E){const Ne=parseInt(ne.sourceHandle.split("-")[1]);if(Ne>=$.length)return!1;const Pe=$[Ne],Ae=e.find(ue=>ue.id===ne.target);if(!Ae)return!1;const Se=parseInt(ne.targetHandle.split("-")[1]),be=(ae=(de=Ae.data)==null?void 0:de.recipe)==null?void 0:ae.inputs[Se];if(!be||be.product_id!==Pe.product_id)return!1}if(ne.target===E){const Ne=parseInt(ne.targetHandle.split("-")[1]);if(Ne>=L.length)return!1;const Pe=L[Ne],Ae=e.find(ue=>ue.id===ne.source);if(!Ae)return!1;const Se=parseInt(ne.sourceHandle.split("-")[1]),be=(ke=(Ve=Ae.data)==null?void 0:Ve.recipe)==null?void 0:ke.outputs[Se];if(!be||be.product_id!==Pe.product_id)return!1}return!0});return K.length!==z.length&&(ir(),Ie("connection")),K})},[s,e,Ie]),wi=j.useCallback((E,L,$,z)=>{si({drillHead:L.drillHead,consumable:L.consumable,machineOil:L.machineOil});const K=L.drillHead&&L.depth?ra(L.drillHead,L.consumable,L.machineOil,L.depth):null;_t(E,ne=>({...ne,recipe:{...ne.recipe,inputs:$.length>0?$:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:L,cycle_time:1,power_consumption:K?{max:K.drillingPower*1e6,average:(K.drillingPower*K.lifeTime+K.idlePower*(K.replacementTime+K.travelTime))/K.totalCycleTime*1e6}:"Variable",pollution:K?K.pollution:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(z.length,1)})),Mt(E,$,z),Ie("settings")},[Mt,Ie]),Hi=j.useCallback((E,L,$,z)=>{hi({outerStage:L.outerStage,innerStage:L.innerStage,machineOil:L.machineOil,tickCircuitDelay:L.tickCircuitDelay});const ne=!L.outerStage||!L.innerStage?"":L.outerStage===1?`p_${L.innerStage}x_microchip`:`p_${L.outerStage}x${L.innerStage}x_microchip`,de=ne?_s(ne,L.machineOil,L.tickCircuitDelay):null;_t(E,ae=>({...ae,recipe:{...ae.recipe,inputs:$.length>0?$:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:L,cycle_time:de?de.cycleTime:"Variable",power_consumption:de?{max:de.maxPowerConsumption,average:de.avgPowerConsumption}:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(z.length,1)})),Mt(E,$,z),Ie("settings")},[Mt,Ie]),un=j.useCallback((E,L,$,z)=>{Bt({trees:L.trees,harvesters:L.harvesters,sprinklers:L.sprinklers,outputs:L.outputs});const K=Zl(L.trees,L.harvesters,L.sprinklers,L.outputs,L.controller,Ke);_t(E,ne=>({...ne,recipe:{...ne.recipe,inputs:$.length>0?$:[{product_id:"p_water",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:L,cycle_time:1,power_consumption:K?K.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max($.length,1),rightHandles:Math.max(z.length,1)})),s(ne=>ne.filter(de=>{if(de.source===E||de.target===E){const ae=parseInt((de.source===E?de.sourceHandle:de.targetHandle).split("-")[1]);return de.source===E?ae<z.length:ae<$.length}return!0})),Ie("settings")},[s,Ke,Ie]),Ri=j.useCallback((E,L,$,z)=>{li({fuel:L.fuel}),_t(E,K=>({...K,recipe:{...K.recipe,inputs:$,fireboxSettings:L,cycle_time:z?z.cycleTime:K.recipe.cycle_time,power_consumption:0}})),Ie("settings")},[Ie]),vi=j.useCallback((E,L,$,z)=>{n(K=>K.map(ne=>{if(ne.id!==E)return ne;const de=kt(ne.data.recipe.machine_id),ae=vn(de==null?void 0:de.id);let Ve=ne.data.recipe.power_type;(de==null?void 0:de.id)==="m_electric_water_heater"&&(Ve=L.temperature>=320?"HV":"MV");let ke={...ne.data.recipe,outputs:$,temperatureSettings:L,power_consumption:z??ne.data.recipe.power_consumption,power_type:Ve};if((de==null?void 0:de.id)==="m_water_treatment_plant"&&ae){const Ne=L.temperature||lr,Pe=Lr(de.id,Ne,1),Ae=90*Pe,Se=17.6,be=17.6;ke={...ke,inputs:ke.inputs.map(ue=>ue.product_id==="p_water"?{...ue,quantity:Se*Pe,originalQuantity:Se}:ue.product_id==="p_distilled_water"?{...ue,quantity:be*Pe,originalQuantity:be}:ue),outputs:ke.outputs.map(ue=>ue.product_id==="p_steam"?{...ue,quantity:Ae,originalQuantity:90}:ue)}}return{...ne,data:{...ne.data,recipe:ke}}})),Ie("temperatureSettings")},[n,Ie]),Vi=j.useCallback((E,L)=>{n($=>$.map(z=>{if(z.id!==E)return z;const K=kt(z.data.recipe.machine_id),ne=oi[K==null?void 0:K.id];return!ne||ne.type!=="boiler"?z:{...z,data:{...z.data,recipe:{...z.data.recipe,temperatureSettings:L}}}})),Ie("boilerSettings")},[n,Ie]),Wi=j.useCallback((E,L,$,z,K)=>{const ne=L==="right"?"output":"input",de=K==null?void 0:K.find(Ve=>Ve.nodeId===E&&Ve.handleType===ne&&Ve.handleIndex===$);if(!de)return;const ae=de.suggestedMachineCount;n(Ve=>Ve.map(ke=>ke.id===E?{...ke,data:{...ke.data,machineCount:ae}}:ke)),Ie("machineCount")},[n,Ie]),Ui=j.useCallback((E,L)=>{n($=>$.map(z=>{if(z.id!==E)return z;const K=kt(z.data.recipe.machine_id);if((K==null?void 0:K.id)!=="m_chemical_plant")return z;const ne=or.find(ae=>ae.id===z.data.recipe.id);if(!ne)return z;const de=CM(ne,L.speedFactor,L.efficiencyFactor);return{...z,data:{...z.data,recipe:de}}})),Ie("settings")},[n,Ie]),sa=j.useCallback((E,L,$,z)=>{yi({itemProductId:L.itemProductId,fluidProductId:L.fluidProductId}),n(K=>K.map(ne=>{if(ne.id!==E)return ne;const de=ne.data.recipe.wasteFacilitySettings||{},ae=de.itemFlowRate||0,Ve=de.fluidFlowRate||0,ke=za(ae,Ve);return{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,wasteFacilitySettings:{...L,itemFlowRate:ae,fluidFlowRate:Ve},cycle_time:ke.cycleTime},leftHandles:Math.max($.length,1)}}})),Mt(E,$,z),Ie("settings")},[Mt,Ie,n]),ot=j.useCallback((E,L,$,z)=>{n(K=>K.map(ne=>ne.id!==E?ne:{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,liquidDumpSettings:L,pollution:Ho($)},leftHandles:Math.max($.length,1)}})),Mt(E,$,z),Ie("settings")},[Mt,Ie,n]),ms=j.useCallback((E,L,$,z)=>{n(K=>K.map(ne=>ne.id!==E?ne:{...ne,data:{...ne.data,recipe:{...ne.data.recipe,inputs:$.length>0?$:ne.data.recipe.inputs,liquidBurnerSettings:L,pollution:Wo($)},leftHandles:Math.max($.length,1)}})),Mt(E,$,z),Ie("settings")},[Mt,Ie,n]),Gi=j.useCallback((E,L=null)=>{var Pe,Ae;const $=kt(E.machine_id);if(!$||!E.inputs||!E.outputs){alert("Error: Invalid machine or recipe data");return}let z=ud(E,$.id);const K=`node-${l}`,ne=T?e.find(Se=>Se.id===T.nodeId):null;let de;if(ne)de={x:ne.position.x+(T.isOutput?400:-400),y:ne.position.y};else if(an.current&&Zt.current){const Se=Zt.current.getBoundingClientRect(),be=Se.width/2,ue=Se.height/2,fe=an.current.screenToFlowPosition({x:Se.left+be,y:Se.top+ue}),Ce=320,qe=300,ze=50;let Ge={x:fe.x-Ce/2,y:fe.y-qe/2},nt=0;const at=20;for(;nt<at&&e.some(In=>{const fr=Math.abs(In.position.x-Ge.x),hr=Math.abs(In.position.y-Ge.y);return fr<Ce+ze&&hr<qe+ze});){const Ct=nt/at*Math.PI*2,pi=100+nt*50;Ge={x:fe.x-Ce/2+Math.cos(Ct)*pi,y:fe.y-qe/2+Math.sin(Ct)*pi},nt++}de=Ge}else de={x:Math.random()*400+100,y:Math.random()*300+100};if(((Pe=oi[$.id])==null?void 0:Pe.type)==="boiler"){const Se={heatLoss:((Ae=z.temperatureSettings)==null?void 0:Ae.heatLoss)??0,coolantTemp:sr},be=fp($.id,Se,sr,null,sr),ue=oi[$.id],fe=Jy(z.outputs,be,!0,ue,sr);z={...z,outputs:fe,temperatureSettings:Se}}const Ve={drillConfig:Rt,assemblerConfig:Vt,treeFarmConfig:Ut,fireboxConfig:Nt};if(tg(z)&&(z=eg(z,T,h,Ve,Ke,mr),z.drillSettings&&si({drillHead:z.drillSettings.drillHead,consumable:z.drillSettings.consumable,machineOil:z.drillSettings.machineOil}),z.assemblerSettings&&hi({outerStage:z.assemblerSettings.outerStage,innerStage:z.assemblerSettings.innerStage,machineOil:z.assemblerSettings.machineOil,tickCircuitDelay:z.assemblerSettings.tickCircuitDelay}),z.treeFarmSettings&&Bt({trees:z.treeFarmSettings.trees,harvesters:z.treeFarmSettings.harvesters,sprinklers:z.treeFarmSettings.sprinklers,outputs:z.treeFarmSettings.outputs}),z.fireboxSettings&&li({fuel:z.fireboxSettings.fuel})),$.id==="m_air_separation_unit"){const Se=D0(Ke),be=z.outputs.map(ue=>ue.product_id==="p_residue"?{...ue,quantity:parseFloat(Se.toFixed(6))}:ue);z={...z,outputs:be}}const ke=L!==null?L:ui[E.id]??1,Ne={id:K,type:"custom",position:de,data:{recipe:z,machine:$,machineCount:ke,displayMode:lt,machineDisplayMode:Lt,leftHandles:Math.max(z.inputs.length,1),rightHandles:Math.max(z.outputs.length,1),onInputClick:gi,onOutputClick:xi,onDrillSettingsChange:wi,onLogicAssemblerSettingsChange:Hi,onTreeFarmSettingsChange:un,onIndustrialFireboxSettingsChange:Ri,onTemperatureSettingsChange:vi,onBoilerSettingsChange:Vi,onChemicalPlantSettingsChange:Ui,onWasteFacilitySettingsChange:sa,onLiquidDumpSettingsChange:ot,onLiquidBurnerSettingsChange:ms,onMiddleClick:di,onHandleDoubleClick:Wi,globalPollution:Ke,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};return n(Se=>{const be=[...Se,Ne];return Ie("node"),T&&ke>0&&setTimeout(()=>{var Ce,qe,ze;const ue=T.isOutput?"inputs":"outputs";let fe=-1;if((z.isWasteFacility||z.id==="r_underground_waste_facility")&&!T.isOutput)T.productId==="p_concrete_block"?fe=2:T.productId==="p_lead_ingot"?fe=3:fe=z[ue].findIndex(Ge=>Ge.product_id===T.productId);else if(T.isOutput&&T.isFromHeatSource){const Ge=kt(z.machine_id);if(Ge&&((Ce=oi[Ge.id])==null?void 0:Ce.type)==="boiler"&&z.inputs.length>=2){const at=(qe=z.inputs[0])==null?void 0:qe.product_id,st=(ze=z.inputs[1])==null?void 0:ze.product_id;at===st&&st===T.productId||st===T.productId?fe=1:fe=z[ue].findIndex(Ct=>Ct.product_id===T.productId)}else fe=z[ue].findIndex(at=>at.product_id===T.productId)}else fe=z[ue].findIndex(Ge=>Ge.product_id===T.productId);if(fe!==-1){const Ge=T.isOutput?T.outputIndex:fe,nt=T.isOutput?fe:T.inputIndex,at={source:T.isOutput?T.nodeId:K,sourceHandle:`right-${Ge}`,target:T.isOutput?K:T.nodeId,targetHandle:`left-${nt}`,type:"custom",animated:!1,data:He};s(st=>Id(at,st)),ir(),Ie("connection")}},50),be}),c(Se=>Se+1),Ie(),K},[l,e,n,s,gi,xi,wi,Hi,un,Ri,vi,Vi,Ui,T,lt,Lt,Rt,Vt,Ut,Nt,mr,ui,Ke,h,Ie]),Wn=j.useCallback(E=>{n(L=>L.filter($=>$.id!==E)),s(L=>L.filter($=>$.source!==E&&$.target!==E)),J(L=>L.filter($=>$.recipeBoxId!==E)),ir(),Ie("node")},[n,s,Ie]),la=j.useCallback(E=>{var $;U.find(z=>z.recipeBoxId===E.id)?(J(z=>z.filter(K=>K.recipeBoxId!==E.id)),_t(E.id,z=>({...z,isTarget:!1}))):($=E.data)!=null&&$.recipe&&(J(z=>[...z,{id:`target_${Q}`,recipeBoxId:E.id}]),F(z=>z+1),_t(E.id,z=>({...z,isTarget:!0})))},[U,Q]),fs=j.useCallback((E,L,$,z)=>{var ue,fe,Ce;const K=U.find(qe=>qe.id===E);if(!K)return;const ne=e.find(qe=>qe.id===K.recipeBoxId);if(!ne)return;const de=(ue=ne.data)==null?void 0:ue.recipe,ae=(fe=ne.data)==null?void 0:fe.machine;if(!de)return;const Ve=de.isMineshaftDrill||de.id==="r_mineshaft_drill";let ke=de.cycle_time;if((typeof ke!="number"||ke<=0)&&(ke=1),vn(ae==null?void 0:ae.id)){const qe=On[ae.id];if((qe==null?void 0:qe.type)==="steam_input"&&ho(de)){const ze=de.tempDependentInputTemp??lr;ke=Lr(ae.id,ze,ke)}}(typeof ke!="number"||ke<=0)&&(ke=1);const Pe=(Ce=Me==null?void 0:Me.flows)==null?void 0:Ce.byNode[K.recipeBoxId];if(!Pe)return;let Ae=0,Se=0;if(L==="output"){const qe=Pe.outputFlows[$];if(!qe)return;Ae=qe.connected;const ze=de.outputs[$],Ge=ze.originalQuantity!==void 0?ze.originalQuantity:ze.quantity;Se=Ve?Ge:Ge/ke}else{const qe=Pe.inputFlows[$];if(!qe)return;Ae=qe.connected;const ze=de.inputs[$];Se=Ve?ze.quantity:ze.quantity/ke}if(Se<=0)return;const be=(Ae+z)/Se;_t(K.recipeBoxId,qe=>({...qe,machineCount:be})),Ie("machineCount")},[U,e,Me,Ie]),hs=j.useCallback(E=>{const L=U.find($=>$.id===E);L&&(J($=>$.filter(z=>z.id!==E)),_t(L.recipeBoxId,$=>({...$,isTarget:!1})))},[U]),ua=j.useCallback((E,L)=>{E.shiftKey&&!E.ctrlKey&&!E.altKey?la(L):E.ctrlKey&&E.altKey&&Wn(L.id)},[la,Wn]),go=j.useCallback((E,L)=>{var $;E.stopPropagation(),me(L.id),xe(String((($=L.data)==null?void 0:$.machineCount)??0)),ce(!0)},[]),Yi=j.useRef(e),Nn=j.useRef(o);j.useEffect(()=>{Yi.current=e},[e]),j.useEffect(()=>{Nn.current=o},[o]);const di=j.useCallback(E=>{const L=Yi.current.find(ne=>ne.id===E);if(!L)return;const $={...L.data.recipe},z=L.data.machine,K=L.data.machineCount;rn({recipe:$,machine:z,machineCount:K})},[]),$r=j.useCallback(E=>{if(!Zt.current)return;const L=Zt.current.getBoundingClientRect();on({x:E.clientX-L.left,y:E.clientY-L.top})},[]),Hr=j.useCallback(E=>{var ne;if(!Et||E.button!==0||(E.stopPropagation(),!an.current)||!((ne=Zt.current)==null?void 0:ne.getBoundingClientRect()))return;const $=an.current.screenToFlowPosition({x:E.clientX,y:E.clientY});$.x-=160,$.y-=150;const K={id:`node-${l}`,type:"custom",position:$,data:{recipe:Et.recipe,machine:Et.machine,machineCount:Et.machineCount,displayMode:lt,machineDisplayMode:Lt,leftHandles:Et.recipe.inputs.length,rightHandles:Et.recipe.outputs.length,onInputClick:gi,onOutputClick:xi,onDrillSettingsChange:wi,onLogicAssemblerSettingsChange:Hi,onTreeFarmSettingsChange:un,onIndustrialFireboxSettingsChange:Ri,onTemperatureSettingsChange:vi,onBoilerSettingsChange:Vi,onChemicalPlantSettingsChange:Ui,onMiddleClick:di,onHandleDoubleClick:Wi,globalPollution:Ke,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};n(de=>[...de,K]),c(de=>de+1),rn(null),Ie("node")},[Et,l,lt,Lt,gi,xi,wi,Hi,un,Ri,vi,Vi,Ui,Ke,n,di]),En=j.useCallback(E=>{E.button===2&&rn(null)},[]),ca=j.useCallback((E=!1)=>{var $,z;let L=parseFloat(ge);if(isNaN(L)||L<0){if(se){alert("Machine count must be 0 or greater. Please enter a valid number.");return}L=0}if(le&&!se){const K=((z=($=e.find(ne=>ne.id===le))==null?void 0:$.data)==null?void 0:z.machineCount)||0;if(E&&K>0&&L!==K){const ne=Ga(e,o);if(Me==null?void 0:Me.flows){const ae=cC(le,K,L,ne);n(Ve=>Ve.map(ke=>{const Ne=ae.get(ke.id);return Ne!==void 0?{...ke,data:{...ke.data,machineCount:Ne}}:ke}))}else _t(le,ae=>({...ae,machineCount:L}))}else _t(le,ne=>({...ne,machineCount:L}))}else se&&_t(se,K=>({...K,machineCount:L}));ce(!1),me(null),xe(""),ve(null),Ie("machineCount")},[le,ge,se,e,o,Me,n,Wn,Ie]),da=j.useCallback(()=>{se&&(Wn(se),m(!0),x(null),M(null),v("product")),ce(!1),me(null),xe(""),ve(null)},[se,Wn]),Wr=j.useCallback(()=>{if(U.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}const E=RC(e,o,U);E.success?(n(L=>L.map($=>{const z=E.updates.get($.id);return z!==void 0?{...$,data:{...$.data,machineCount:z}}:$})),Ie("machineCount"),alert(`Success! Updated ${E.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(E.message||"No changes needed - production line is already balanced.")},[U,e,o,n,Ie]),ys=()=>{if(!h)return[];const E=vt(h.id),L=aC(h.id),$=oC(h.id),z=[Yf,Kf,Zf,Od,Ad,zd],K=z.filter(ae=>uC(ae.id).includes(h.id)),ne=z.filter(ae=>{if(lC(ae.id).includes(h.id))return!0;if(E){if(ae.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner")return!1}return!1}),de=z.filter(ae=>ae.id==="r_liquid_dump"||ae.id==="r_liquid_burner"?(E==null?void 0:E.type)==="fluid":ae.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return ee==="producers"?[...L,...K]:ee==="consumers"?[...$,...ne]:ee==="disposal"?de:Array.from(new Map([...L,...$,...K,...ne,...de].map(ae=>[ae.id,ae])).values())};j.useEffect(()=>{if(p){const E=k==="product"?ys():Nl(b==null?void 0:b.id),L=T?e.find(z=>z.id===T.nodeId):null,$={};E.forEach(z=>{const K=ci(z,L,T);$[z.id]=K}),qn($)}},[p,k,h,b,T,e,ee]);const gs=j.useCallback(()=>{var E;return(E=Pi.current)==null?void 0:E.click()},[]),xo=j.useCallback(E=>{var z;const L=(z=E.target.files)==null?void 0:z[0];if(!L)return;const $=new FileReader;$.onload=K=>{var ne,de;try{const ae=JSON.parse(K.target.result),Ve=ae.products||ae.machines||ae.recipes,ke=ae.canvas;if(Ve){const Ne=new Map((ae.products||[]).map(ue=>[ue.id,ue])),Pe=Array.from(Ne.values()),Ae=new Set(((ne=ae.machines)==null?void 0:ne.map(ue=>ue.id))||[]),Se=(ae.recipes||[]).filter(ue=>Ae.has(ue.machine_id)),be=[...gn];if(Pe.forEach(ue=>{const fe=be.findIndex(Ce=>Ce.id===ue.id);fe>=0?be[fe]=ue:be.push(ue)}),Cy(be),((de=ae.machines)==null?void 0:de.length)>0){const ue=[...rr],fe=new Set(ae.machines.map(qe=>qe.id)),Ce=or.filter(qe=>!fe.has(qe.machine_id));ae.machines.forEach(qe=>{const ze=ue.findIndex(Ge=>Ge.id===qe.id);ze>=0?ue[ze]=qe:ue.push(qe)}),Sy(ue),Ny([...Ce,...Se])}if(!ke){alert("Data import successful!"),window.location.reload();return}}if(ke){const Ne=ae.canvas.nodes||[],Pe=[];if(Ne.forEach(Se=>{var ue,fe,Ce,qe,ze,Ge,nt,at;const be=(fe=(ue=Se.data)==null?void 0:ue.recipe)==null?void 0:fe.machine_id;be&&!kt(be)&&Pe.push(`Machine: ${be}`),(ze=(qe=(Ce=Se.data)==null?void 0:Ce.recipe)==null?void 0:qe.inputs)==null||ze.forEach(st=>{st.product_id!=="p_variableproduct"&&!vt(st.product_id)&&Pe.push(`Product: ${st.product_id}`)}),(at=(nt=(Ge=Se.data)==null?void 0:Ge.recipe)==null?void 0:nt.outputs)==null||at.forEach(st=>{st.product_id!=="p_variableproduct"&&!vt(st.product_id)&&Pe.push(`Product: ${st.product_id}`)})}),Pe.length>0){const Se=[...new Set(Pe)];alert(`Cannot import canvas - missing items:
${Se.slice(0,10).join(`
`)}${Se.length>10?`
...and ${Se.length-10} more`:""}`),E.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){E.target.value="";return}const Ae=Ne.map(Se=>{var fe,Ce,qe,ze;const be=kt((Ce=(fe=Se.data)==null?void 0:fe.recipe)==null?void 0:Ce.machine_id);let ue=(qe=Se.data)==null?void 0:qe.recipe;return be&&ue&&!((ze=ue.outputs)!=null&&ze.some(Ge=>Ge.temperature!==void 0))&&(ue=ud(ue,be.id)),{...Se,data:{...Se.data,recipe:ue,machineCount:Se.data.machineCount??1,displayMode:lt,machineDisplayMode:Lt,onInputClick:gi,onOutputClick:xi,onDrillSettingsChange:wi,onLogicAssemblerSettingsChange:Hi,onTreeFarmSettingsChange:un,onIndustrialFireboxSettingsChange:Ri,onTemperatureSettingsChange:vi,onBoilerSettingsChange:Vi,onChemicalPlantSettingsChange:Ui,onMiddleClick:di,onHandleDoubleClick:Wi,globalPollution:Ke,flows:null,suggestions:[]}}});n(Ae),s(ae.canvas.edges||[]),J(ae.canvas.targetProducts||[]),Kt(ae.canvas.soldProducts||{}),fi(ae.canvas.favoriteRecipes||[]),si(ae.canvas.lastDrillConfig||null),hi(ae.canvas.lastAssemblerConfig||null),Bt(ae.canvas.lastTreeFarmConfig||null),li(ae.canvas.lastFireboxConfig||null),yi(ae.canvas.lastWasteFacilityConfig||null),c(ae.canvas.nodeId||0),F(ae.canvas.targetIdCounter||0),ir(),Ie("node"),alert("Canvas import successful!")}}catch(ae){alert(`Import failed: ${ae.message}`)}},$.readAsText(L),E.target.value=""},[lt,Lt,Ke,gi,xi,wi,Hi,un,Ri,vi,Vi,Ui,di,n,s,J,Kt,fi,si,hi,Bt,li,c,F]),xs=j.useCallback(()=>{const E=new Blob([JSON.stringify({products:gn,machines:rr,recipes:or},null,2)],{type:"application/json"}),L=URL.createObjectURL(E),$=document.createElement("a");$.href=L,$.download=`industrialist-data-${Date.now()}.json`,$.click(),URL.revokeObjectURL(L)},[gn,rr,or]),hu=j.useCallback(()=>{const L={nodes:e.map(ne=>({...ne,data:{...ne.data,flows:void 0,suggestions:void 0}})),edges:o,targetProducts:U,nodeId:l,targetIdCounter:Q,soldProducts:qt,favoriteRecipes:Ot,lastDrillConfig:Rt,lastAssemblerConfig:Vt,lastTreeFarmConfig:Ut,lastFireboxConfig:Nt,lastWasteFacilityConfig:nn},$=new Blob([JSON.stringify({canvas:L},null,2)],{type:"application/json"}),z=URL.createObjectURL($),K=document.createElement("a");K.href=z,K.download=`industrialist-canvas-${Date.now()}.json`,K.click(),URL.revokeObjectURL(z)},[e,o,U,l,Q,qt,Ot,Rt,Vt,Ut,Nt]);j.useCallback(()=>{const E=e.map(K=>({...K,data:{...K.data,flows:void 0,suggestions:void 0}})),L=new Blob([JSON.stringify({products:gn,machines:rr,recipes:or,canvas:{nodes:E,edges:o,targetProducts:U,nodeId:l,targetIdCounter:Q,soldProducts:qt,favoriteRecipes:Ot,lastDrillConfig:Rt,lastAssemblerConfig:Vt,lastTreeFarmConfig:Ut,lastFireboxConfig:Nt,lastWasteFacilityConfig:nn}},null,2)],{type:"application/json"}),$=URL.createObjectURL(L),z=document.createElement("a");z.href=$,z.download=`industrialist-export-${Date.now()}.json`,z.click(),URL.revokeObjectURL($)},[e,o,U,l,Q,qt,Ot,Rt,Vt,Ut,Nt]);const Ur=j.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(Oq(),n([]),s([]),c(0),J([]),F(0),Kt({}),fi([]),si(null),hi(null),Bt(null),li(null),yi(null),window.location.reload())},[n,s]);j.useEffect(()=>{const E=L=>{if(L.key==="industrialist_theme")try{const $=JSON.parse(L.newValue);Ze({edgePath:$.edgePath||"orthogonal",edgeStyle:$.edgeStyle||"animated"})}catch($){console.error("Error parsing theme from storage:",$)}};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[]),j.useEffect(()=>{if(!Le){const E=jl();Ze({edgePath:E.edgePath||"orthogonal",edgeStyle:E.edgeStyle||"animated"})}},[Le]);const Gr=gn.filter(E=>E.name.toLowerCase().includes(C.toLowerCase())&&(V==="all"||E.type===V)).sort((E,L)=>I==="name_asc"?E.name.localeCompare(L.name):I==="name_desc"?L.name.localeCompare(E.name):I==="price_asc"?(E.price==="Variable"?1/0:E.price)-(L.price==="Variable"?1/0:L.price):I==="price_desc"?(L.price==="Variable"?-1/0:L.price)-(E.price==="Variable"?-1/0:E.price):I==="rp_asc"?(E.rp_multiplier==="Variable"?1/0:E.rp_multiplier)-(L.rp_multiplier==="Variable"?1/0:L.rp_multiplier):(L.rp_multiplier==="Variable"?-1/0:L.rp_multiplier)-(E.rp_multiplier==="Variable"?-1/0:E.rp_multiplier)),Un=rr.filter(E=>{const L=E.name.toLowerCase().includes(C.toLowerCase()),$=E.id==="m_mineshaft_drill"||E.id==="m_logic_assembler"||E.id==="m_tree_farm"||E.id==="m_underground_waste_facility"||E.id==="m_liquid_dump"||E.id==="m_liquid_burner"||Nl(E.id).length>0,z=H==="all"||E.tier!==void 0&&E.tier.toString()===H;return L&&$&&z}).sort((E,L)=>E.name.localeCompare(L.name)),wo=E=>{E.id==="m_mineshaft_drill"?(Gi(Yf,1),Ti()):E.id==="m_logic_assembler"?(Gi(Kf,1),Ti()):E.id==="m_tree_farm"?(Gi(Zf,1),Ti()):E.id==="m_underground_waste_facility"?(Gi(Od,1),Ti()):E.id==="m_liquid_dump"?(Gi(Ad,1),Ti()):E.id==="m_liquid_burner"?(Gi(zd,1),Ti()):M(E)},ws=(k==="product"?ys():Nl(b==null?void 0:b.id)).sort((E,L)=>{const $=Ot.includes(E.id),z=Ot.includes(L.id);if($&&!z)return-1;if(!$&&z)return 1;const K=kt(E.machine_id),ne=kt(L.machine_id);return((K==null?void 0:K.name)||"").localeCompare((ne==null?void 0:ne.name)||"")}),yu=E=>{fi(L=>L.includes(E)?L.filter($=>$!==E):[...L,E])};return f.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[f.jsxs(oq,{ref:Zt,nodes:e,edges:o,onNodesChange:et,onEdgesChange:ut,onConnect:oa,onNodeClick:ua,onNodeDoubleClick:go,onMouseMove:$r,onClick:Hr,onContextMenu:En,onInit:E=>{an.current=E},nodeTypes:VC,edgeTypes:jC,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,connectionLineType:He.edgePath==="straight"?"straight":He.edgePath==="orthogonal"?"step":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:He.edgeStyle==="animated"||He.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[f.jsx(pq,{color:"#333",gap:16,size:1}),f.jsx(xq,{className:(Qe||Dt)&&!yt?"controls-shifted":""}),f.jsx(Tq,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim()}),f.jsx(na,{position:"top-left",style:{margin:"10px"},children:f.jsx("div",{className:`left-panel-container ${yt?"collapsed":""}`,children:f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[f.jsxs("div",{className:"stats-panel",children:[f.jsx("h3",{className:"stats-title",children:sn}),f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Power:"}),f.jsx("div",{className:"stat-value",children:rC(Jt.totalPower)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Pollution:"}),f.jsxs("div",{className:"stat-value",style:{color:Jt.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Jt.totalPollution.toFixed(2),"%/hr"]})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),f.jsx("div",{className:"stat-value",children:Jt.totalModelCount.toFixed(0)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Profit:"}),f.jsxs("div",{className:"stat-value",style:{color:zr>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",nr(zr),"/s"]})]})]})]}),f.jsxs("div",{className:"flex-col action-buttons-container",children:[f.jsx("button",{onClick:aa,className:"btn btn-primary",children:"+ Select Recipe"}),f.jsxs("button",{onClick:()=>B(!0),className:"btn btn-secondary",children:["View Targets (",U.length,")"]}),f.jsx("button",{onClick:Wr,className:"btn btn-secondary",children:"Compute Machines"}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>Je(!Qe),className:"btn btn-secondary btn-square",title:Qe?"Close more statistics":"Open more statistics",children:Qe?"":""}),f.jsx("button",{onClick:()=>ai(!yt),className:"btn btn-secondary btn-square btn-panel-toggle",title:yt?"Show left panel":"Hide left panel",children:yt?"":""})]})]})]}),(Qe||Dt)&&f.jsxs("div",{className:`extended-panel ${Dt?"closing":""}`,children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>tn(E=>E==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"var(--font-size-base)",minWidth:"auto"},title:lt==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:lt==="perSecond"?"Per Second":"Per Cycle"}),f.jsx("button",{onClick:()=>kn(E=>E==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:"8px 16px",fontSize:"var(--font-size-base)",minWidth:"auto"},title:Lt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:Lt==="perMachine"?"Per Machine":"Total"})]})]}),f.jsxs("div",{className:"extended-panel-content",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",paddingBottom:"120px"},children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("button",{onClick:()=>Wt(E=>!E),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:Xt?"Resume pollution change":"Pause pollution change",children:Xt?"":""}),f.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:Ke,onFocus:()=>gt(!0),onBlur:E=>{gt(!1);const L=E.target.value,$=parseFloat(L);Ht(!isNaN($)&&isFinite($)?parseFloat($.toFixed(4)):0)},onChange:E=>Ht(E.target.value===""?"":parseFloat(E.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),_r.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_r.map(E=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:E.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:E.product.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[nr(E.excessRate),"/s"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof E.product.price=="number"&&f.jsxs("div",{style:{color:E.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",nr(E.product.price*E.excessRate),"/s"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[f.jsx("input",{type:"checkbox",checked:E.isSold,onChange:L=>Kt($=>({...$,[E.productId]:L.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},E.productId))})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),pr.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:pr.map(E=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:E.product.name}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",nr(E.deficiencyRate),"/s"]})]}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[E.affectedNodes.length," node",E.affectedNodes.length!==1?"s":""," affected"]})]},E.productId))})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Machine Costs:"}),ln.stats.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No machines on canvas."}):f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"15px"},children:ln.stats.map(E=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid var(--border-light)"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:E.machine.tier===1?"var(--tier-1-color)":E.machine.tier===2?"var(--tier-2-color)":E.machine.tier===3?"var(--tier-3-color)":E.machine.tier===4?"var(--tier-4-color)":(E.machine.tier===5,"var(--tier-5-color)"),fontSize:"var(--font-size-sm)",fontWeight:600},children:E.machine.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Count: ",E.count,"  $",nr(E.cost)]})]}),f.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",nr(E.totalCost)]})]},E.machineId))}),f.jsxs("div",{style:{padding:"12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid var(--color-primary)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:700},children:"Total Cost:"}),f.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-md)",fontWeight:700},children:["$",nr(ln.totalCost)]})]}),f.jsx("div",{style:{color:"var(--text-muted)",fontSize:"var(--font-size-xs)",fontStyle:"italic",textAlign:"center"},children:"For machines only. Poles and pipes not accounted for."})]})]})]})]})]})]})})}),f.jsx(na,{position:"top-right",style:{margin:"10px"},children:f.jsxs("div",{className:`menu-container ${Oe?"":"closed"}`,children:[f.jsx("button",{onClick:()=>$e(!Oe),className:"btn btn-secondary btn-menu-toggle",children:Oe?">":"<"}),f.jsxs("div",{className:"menu-buttons",children:[f.jsx("button",{onClick:()=>{n([]),s([]),c(0),J([]),F(0),Kt({}),fi([]),si(null),hi(null),Bt(null),li(null),yi(null),ir(),Ie("node")},className:"btn btn-secondary",children:"Clear All"}),f.jsx("button",{onClick:gs,className:"btn btn-secondary",children:"Import JSON"}),f.jsx("button",{onClick:xs,className:"btn btn-secondary",children:"Export Data"}),f.jsx("button",{onClick:hu,className:"btn btn-secondary",children:"Export Canvas"}),f.jsx("button",{onClick:Ur,className:"btn btn-secondary",children:"Restore Defaults"}),f.jsx("button",{onClick:()=>Fe(!0),className:"btn btn-secondary",children:"Theme Editor"}),f.jsx("button",{onClick:()=>window.open("https://github.com/Pollywrath/Industrialist-Production-Calculator","_blank"),className:"btn btn-secondary",children:"Source Code"})]})]})})]}),f.jsx("input",{ref:Pi,type:"file",accept:".json",style:{display:"none"},onChange:xo}),(G||g)&&f.jsx("div",{className:"modal-overlay",onClick:da,children:G&&f.jsxs("div",{className:"modal",onClick:E=>E.stopPropagation(),style:{width:"450px"},children:[f.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),f.jsx("input",{type:"number",min:"0",step:"0.1",value:ge,onChange:E=>xe(E.target.value),onKeyPress:E=>{E.key==="Enter"&&ca(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0}),f.jsx("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:"Must be a non-negative number (can be decimal)"})]}),le&&!se&&f.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:f.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Changes only this box"]}),f.jsxs("div",{children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Changes this box and propagates to connected boxes"]})]})}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:da,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),f.jsx("button",{onClick:()=>ca(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),le&&!se&&f.jsx("button",{onClick:()=>ca(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),p&&f.jsx("div",{className:"modal-overlay",onClick:Ti,children:f.jsxs("div",{className:"modal",onClick:E=>E.stopPropagation(),children:[f.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:b?`Recipes for ${b.name}`:"Select Product or Machine"}),!h&&!b?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-lg",children:f.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[f.jsx("button",{onClick:()=>v("product"),className:`btn ${k==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),f.jsx("button",{onClick:()=>v("machine"),className:`btn ${k==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),k==="product"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg flex-col",children:[f.jsx("input",{type:"text",placeholder:"Search products...",value:C,onChange:E=>P(E.target.value),className:"input"}),f.jsxs("div",{className:"flex-row",children:[f.jsxs("select",{value:V,onChange:E=>A(E.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Types"}),f.jsx("option",{value:"item",children:"Items Only"}),f.jsx("option",{value:"fluid",children:"Fluids Only"})]}),f.jsxs("select",{value:I,onChange:E=>R(E.target.value),className:"select",children:[f.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),f.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),f.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),f.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),f.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[f.jsxs("div",{className:"product-table-header",children:[f.jsx("div",{children:"Product"}),f.jsx("div",{className:"text-right",children:"Price"}),f.jsx("div",{className:"text-right",children:"RP Mult"})]}),Gr.map(E=>f.jsxs("div",{onClick:()=>x(E),className:"product-row",children:[f.jsxs("div",{children:[f.jsx("div",{className:"product-name",children:E.name}),f.jsx("div",{className:"product-type",children:E.type==="item"?" Item":" Fluid"})]}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:E.price==="Variable"?"Variable":`${nr(E.price)}`}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:E.rp_multiplier==="Variable"?"Variable":E.rp_multiplier>=1e3?`${nr(E.rp_multiplier)}x`:`${E.rp_multiplier.toFixed(1)}x`})]},E.id))]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:"Search machines...",value:C,onChange:E=>P(E.target.value),className:"input",style:{flex:3}}),f.jsxs("select",{value:H,onChange:E=>te(E.target.value),className:"select",style:{flex:1},children:[f.jsx("option",{value:"all",children:"All Tiers"}),f.jsx("option",{value:"1",children:"Tier 1"}),f.jsx("option",{value:"2",children:"Tier 2"}),f.jsx("option",{value:"3",children:"Tier 3"}),f.jsx("option",{value:"4",children:"Tier 4"}),f.jsx("option",{value:"5",children:"Tier 5"})]})]}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:Un.length===0?f.jsx("div",{className:"empty-state",children:"No machines found"}):Un.map(E=>f.jsxs("div",{onClick:()=>wo(E),className:"recipe-card",style:{cursor:"pointer"},children:[f.jsx("div",{className:"recipe-machine",style:{color:E.tier===1?"var(--tier-1-color)":E.tier===2?"var(--tier-2-color)":E.tier===3?"var(--tier-3-color)":E.tier===4?"var(--tier-4-color)":(E.tier===5,"var(--tier-5-color)")},children:E.name}),f.jsx("div",{className:"recipe-details",style:{color:"#999"},children:E.id==="m_mineshaft_drill"||E.id==="m_logic_assembler"||E.id==="m_tree_farm"?"Click to create box":`${Nl(E.id).length} recipe(s)`})]},E.id))})]})]}):f.jsxs(f.Fragment,{children:[S==="button"&&f.jsx("button",{onClick:()=>{x(null),M(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&f.jsx("div",{className:"mb-lg",children:f.jsxs("select",{value:ee,onChange:E=>W(E.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Recipes"}),f.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),f.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),f.jsx("option",{value:"disposal",children:"Disposal"})]})}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:ws.length===0?f.jsx("div",{className:"empty-state",children:"No recipes found"}):ws.map(E=>{const L=kt(E.machine_id),$=Ot.includes(E.id),z=ui[E.id]??1;return L&&E.inputs&&E.outputs?f.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("button",{onClick:K=>{K.stopPropagation(),yu(E.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:$?"none":"grayscale(100%)",opacity:$?1:.4,transition:"all 0.2s"},onMouseEnter:K=>{K.currentTarget.style.transform="scale(1.2)",K.currentTarget.style.opacity="1"},onMouseLeave:K=>{K.currentTarget.style.transform="scale(1)",K.currentTarget.style.opacity=$?"1":"0.4"},title:$?"Remove from favorites":"Add to favorites",children:""}),f.jsx("div",{onClick:K=>{K.stopPropagation();const ne=z<=0?1:z;ui[E.id]===0||ui[E.id];const de=Gi(E,ne);_(!0),m(!1),setTimeout(()=>{ve(de),me(de),xe(String(ne)),ce(!0),_(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:T&&z<=0?"var(--delete-bg)":"var(--color-primary)",color:T&&z<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:T&&z<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:K=>{T&&z<=0?(K.currentTarget.style.background="var(--delete-hover-bg)",K.currentTarget.style.color="var(--delete-hover-color)"):(K.currentTarget.style.background="var(--color-primary-hover)",K.currentTarget.style.transform="scale(1.05)",K.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:K=>{T&&z<=0?(K.currentTarget.style.background="var(--delete-bg)",K.currentTarget.style.color="var(--delete-color)"):(K.currentTarget.style.background="var(--color-primary)",K.currentTarget.style.transform="scale(1)",K.currentTarget.style.borderColor="transparent")},title:T?z<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(z)?z:z.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(z)?z:z.toFixed(2)}),f.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:K=>{if(K.stopPropagation(),z<=0){const de=Gi(E,1);_(!0),m(!1),setTimeout(()=>{ve(de),me(de),xe("1"),ce(!0),_(!1)},50)}else Gi(E),T&&ui[E.id],Ti()},children:[f.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[f.jsx("div",{className:"recipe-machine",style:{color:L.tier===1?"var(--tier-1-color)":L.tier===2?"var(--tier-2-color)":L.tier===3?"var(--tier-3-color)":L.tier===4?"var(--tier-4-color)":(L.tier===5,"var(--tier-5-color)")},children:L.name}),E.power_type==="HV"&&f.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),f.jsx("span",{children:E.inputs.map(K=>Gf(K,vt)).join(", ")})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),f.jsx("span",{children:E.outputs.map(K=>Gf(K,vt)).join(", ")})]})]})]},E.id):null})})]}),f.jsx("button",{onClick:Ti,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),O&&f.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:f.jsxs("div",{className:"modal",onClick:E=>E.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Target Products"}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"70vh",marginBottom:"20px"},children:U.length===0?f.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):U.map(E=>{var Pe,Ae,Se,be;const L=e.find(ue=>ue.id===E.recipeBoxId);if(!L)return null;const $=(Pe=L.data)==null?void 0:Pe.recipe,z=(Ae=L.data)==null?void 0:Ae.machine,K=((Se=L.data)==null?void 0:Se.machineCount)||0;if(!$)return null;let ne=$.cycle_time;if((typeof ne!="number"||ne<=0)&&(ne=1),vn(z==null?void 0:z.id)){const ue=On[z.id];if((ue==null?void 0:ue.type)==="steam_input"&&ho($)){const fe=$.tempDependentInputTemp??lr;ne=Lr(z.id,fe,ne)}}(typeof ne!="number"||ne<=0)&&(ne=1);const ae=$.isMineshaftDrill||$.id==="r_mineshaft_drill",Ve=(be=Me==null?void 0:Me.flows)==null?void 0:be.byNode[E.recipeBoxId],ke={inputs:{},outputs:{}};$.inputs.forEach((ue,fe)=>{var Ce;if(typeof ue.quantity=="number"){const ze=(ae?ue.quantity:ue.quantity/ne)*K,Ge=((Ce=Ve==null?void 0:Ve.inputFlows[fe])==null?void 0:Ce.connected)||0,nt=ze-Ge;ke.inputs[fe]={totalRate:ze,connectedFlow:Ge,deficiency:Math.max(0,nt)}}}),$.outputs.forEach((ue,fe)=>{var qe;const Ce=ue.quantity;if(typeof Ce=="number"){const Ge=(ae?Ce:Ce/ne)*K,nt=((qe=Ve==null?void 0:Ve.outputFlows[fe])==null?void 0:qe.connected)||0,at=Ge-nt;ke.outputs[fe]={totalRate:Ge,connectedFlow:nt,excess:Math.max(0,at)}}});const Ne=(ue,fe,Ce)=>{fs(E.id,ue,fe,Ce)};return f.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",K.toFixed(4)]})]}),f.jsx("button",{onClick:()=>hs(E.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((ue,fe)=>{const Ce=ke.inputs[fe];return Ce?f.jsx(F0,{productName:Ln(ue.product_id,vt),connectedFlow:Ce.connectedFlow,currentExcess:Ce.deficiency,onTargetExcessCommit:qe=>Ne("input",fe,qe),styleType:"input"},fe):null})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((ue,fe)=>{const Ce=ke.outputs[fe];return Ce?f.jsx(F0,{productName:Ln(ue.product_id,vt),connectedFlow:Ce.connectedFlow,currentExcess:Ce.excess,onTargetExcessCommit:qe=>Ne("output",fe,qe),styleType:"output"},fe):null})]})]})]},E.id)})}),f.jsx("button",{onClick:()=>B(!1),className:"btn btn-secondary",children:"Close"})]})}),Le&&f.jsx(zM,{onClose:()=>Fe(!1)}),Et&&f.jsxs("div",{className:"pending-node-preview",style:{left:`${Ii.x+20}px`,top:`${Ii.y+20}px`},children:[f.jsx("div",{className:"pending-node-recipe-name",children:Et.recipe.name}),f.jsx("div",{className:"pending-node-machine-name",children:Et.machine.name}),f.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",Et.machineCount]}),f.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}N1.createRoot(document.getElementById("root")).render(f.jsx(Ei.StrictMode,{children:f.jsx(FC,{})}));

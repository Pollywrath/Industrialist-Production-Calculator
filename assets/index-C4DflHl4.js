(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hp={exports:{}},vs={},yp={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function R5(){if(bx)return Ze;bx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=f&&B[f]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function x(B,J,me){this.props=B,this.context=J,this.refs=k,this.updater=me||v}x.prototype.isReactComponent={},x.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function q(){}q.prototype=x.prototype;function E(B,J,me){this.props=B,this.context=J,this.refs=k,this.updater=me||v}var b=E.prototype=new q;b.constructor=E,w(b,x.prototype),b.isPureReactComponent=!0;var M=Array.isArray,j=Object.prototype.hasOwnProperty,C={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(B,J,me){var $,te={},oe=null,de=null;if(J!=null)for($ in J.ref!==void 0&&(de=J.ref),J.key!==void 0&&(oe=""+J.key),J)j.call(J,$)&&!N.hasOwnProperty($)&&(te[$]=J[$]);var ue=arguments.length-2;if(ue===1)te.children=me;else if(1<ue){for(var ve=Array(ue),Ee=0;Ee<ue;Ee++)ve[Ee]=arguments[Ee+2];te.children=ve}if(B&&B.defaultProps)for($ in ue=B.defaultProps,ue)te[$]===void 0&&(te[$]=ue[$]);return{$$typeof:e,type:B,key:oe,ref:de,props:te,_owner:C.current}}function P(B,J){return{$$typeof:e,type:B.type,key:J,ref:B.ref,props:B.props,_owner:B._owner}}function z(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function F(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(me){return J[me]})}var D=/\/+/g;function Z(B,J){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):J.toString(36)}function T(B,J,me,$,te){var oe=typeof B;(oe==="undefined"||oe==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(oe){case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case e:case t:de=!0}}if(de)return de=B,te=te(de),B=$===""?"."+Z(de,0):$,M(te)?(me="",B!=null&&(me=B.replace(D,"$&/")+"/"),T(te,J,me,"",function(Ee){return Ee})):te!=null&&(z(te)&&(te=P(te,me+(!te.key||de&&de.key===te.key?"":(""+te.key).replace(D,"$&/")+"/")+B)),J.push(te)),1;if(de=0,$=$===""?".":$+":",M(B))for(var ue=0;ue<B.length;ue++){oe=B[ue];var ve=$+Z(oe,ue);de+=T(oe,J,me,ve,te)}else if(ve=y(B),typeof ve=="function")for(B=ve.call(B),ue=0;!(oe=B.next()).done;)oe=oe.value,ve=$+Z(oe,ue++),de+=T(oe,J,me,ve,te);else if(oe==="object")throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return de}function K(B,J,me){if(B==null)return B;var $=[],te=0;return T(B,$,"","",function(oe){return J.call(me,oe,te++)}),$}function U(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(me){(B._status===0||B._status===-1)&&(B._status=1,B._result=me)},function(me){(B._status===0||B._status===-1)&&(B._status=2,B._result=me)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var ne={current:null},Y={transition:null},Q={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Y,ReactCurrentOwner:C};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:K,forEach:function(B,J,me){K(B,function(){J.apply(this,arguments)},me)},count:function(B){var J=0;return K(B,function(){J++}),J},toArray:function(B){return K(B,function(J){return J})||[]},only:function(B){if(!z(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ze.Component=x,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=E,Ze.StrictMode=o,Ze.Suspense=p,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ze.act=ie,Ze.cloneElement=function(B,J,me){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var $=w({},B.props),te=B.key,oe=B.ref,de=B._owner;if(J!=null){if(J.ref!==void 0&&(oe=J.ref,de=C.current),J.key!==void 0&&(te=""+J.key),B.type&&B.type.defaultProps)var ue=B.type.defaultProps;for(ve in J)j.call(J,ve)&&!N.hasOwnProperty(ve)&&($[ve]=J[ve]===void 0&&ue!==void 0?ue[ve]:J[ve])}var ve=arguments.length-2;if(ve===1)$.children=me;else if(1<ve){ue=Array(ve);for(var Ee=0;Ee<ve;Ee++)ue[Ee]=arguments[Ee+2];$.children=ue}return{$$typeof:e,type:B.type,key:te,ref:oe,props:$,_owner:de}},Ze.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},Ze.createElement=A,Ze.createFactory=function(B){var J=A.bind(null,B);return J.type=B,J},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(B){return{$$typeof:c,render:B}},Ze.isValidElement=z,Ze.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:U}},Ze.memo=function(B,J){return{$$typeof:_,type:B,compare:J===void 0?null:J}},Ze.startTransition=function(B){var J=Y.transition;Y.transition={};try{B()}finally{Y.transition=J}},Ze.unstable_act=ie,Ze.useCallback=function(B,J){return ne.current.useCallback(B,J)},Ze.useContext=function(B){return ne.current.useContext(B)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(B){return ne.current.useDeferredValue(B)},Ze.useEffect=function(B,J){return ne.current.useEffect(B,J)},Ze.useId=function(){return ne.current.useId()},Ze.useImperativeHandle=function(B,J,me){return ne.current.useImperativeHandle(B,J,me)},Ze.useInsertionEffect=function(B,J){return ne.current.useInsertionEffect(B,J)},Ze.useLayoutEffect=function(B,J){return ne.current.useLayoutEffect(B,J)},Ze.useMemo=function(B,J){return ne.current.useMemo(B,J)},Ze.useReducer=function(B,J,me){return ne.current.useReducer(B,J,me)},Ze.useRef=function(B){return ne.current.useRef(B)},Ze.useState=function(B){return ne.current.useState(B)},Ze.useSyncExternalStore=function(B,J,me){return ne.current.useSyncExternalStore(B,J,me)},Ze.useTransition=function(){return ne.current.useTransition()},Ze.version="18.3.1",Ze}var qx;function Xs(){return qx||(qx=1,yp.exports=R5()),yp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function A5(){if(Sx)return vs;Sx=1;var e=Xs(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(c,p,_){var h,f={},y=null,v=null;_!==void 0&&(y=""+_),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(v=p.ref);for(h in p)o.call(p,h)&&!s.hasOwnProperty(h)&&(f[h]=p[h]);if(c&&c.defaultProps)for(h in p=c.defaultProps,p)f[h]===void 0&&(f[h]=p[h]);return{$$typeof:t,type:c,key:y,ref:v,props:f,_owner:a.current}}return vs.Fragment=n,vs.jsx=u,vs.jsxs=u,vs}var kx;function F5(){return kx||(kx=1,hp.exports=A5()),hp.exports}var d=F5(),L=Xs();const Ck=Qs(L);var dl={},gp={exports:{}},Rr={},vp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx;function L5(){return Cx||(Cx=1,(function(e){function t(Y,Q){var ie=Y.length;Y.push(Q);e:for(;0<ie;){var B=ie-1>>>1,J=Y[B];if(0<a(J,Q))Y[B]=Q,Y[ie]=J,ie=B;else break e}}function n(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var Q=Y[0],ie=Y.pop();if(ie!==Q){Y[0]=ie;e:for(var B=0,J=Y.length,me=J>>>1;B<me;){var $=2*(B+1)-1,te=Y[$],oe=$+1,de=Y[oe];if(0>a(te,ie))oe<J&&0>a(de,te)?(Y[B]=de,Y[oe]=ie,B=oe):(Y[B]=te,Y[$]=ie,B=$);else if(oe<J&&0>a(de,ie))Y[B]=de,Y[oe]=ie,B=oe;else break e}}return Q}function a(Y,Q){var ie=Y.sortIndex-Q.sortIndex;return ie!==0?ie:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var p=[],_=[],h=1,f=null,y=3,v=!1,w=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var Q=n(_);Q!==null;){if(Q.callback===null)o(_);else if(Q.startTime<=Y)o(_),Q.sortIndex=Q.expirationTime,t(p,Q);else break;Q=n(_)}}function M(Y){if(k=!1,b(Y),!w)if(n(p)!==null)w=!0,U(j);else{var Q=n(_);Q!==null&&ne(M,Q.startTime-Y)}}function j(Y,Q){w=!1,k&&(k=!1,q(A),A=-1),v=!0;var ie=y;try{for(b(Q),f=n(p);f!==null&&(!(f.expirationTime>Q)||Y&&!F());){var B=f.callback;if(typeof B=="function"){f.callback=null,y=f.priorityLevel;var J=B(f.expirationTime<=Q);Q=e.unstable_now(),typeof J=="function"?f.callback=J:f===n(p)&&o(p),b(Q)}else o(p);f=n(p)}if(f!==null)var me=!0;else{var $=n(_);$!==null&&ne(M,$.startTime-Q),me=!1}return me}finally{f=null,y=ie,v=!1}}var C=!1,N=null,A=-1,P=5,z=-1;function F(){return!(e.unstable_now()-z<P)}function D(){if(N!==null){var Y=e.unstable_now();z=Y;var Q=!0;try{Q=N(!0,Y)}finally{Q?Z():(C=!1,N=null)}}else C=!1}var Z;if(typeof E=="function")Z=function(){E(D)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,K=T.port2;T.port1.onmessage=D,Z=function(){K.postMessage(null)}}else Z=function(){x(D,0)};function U(Y){N=Y,C||(C=!0,Z())}function ne(Y,Q){A=x(function(){Y(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,U(j))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var ie=y;y=Q;try{return Y()}finally{y=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ie=y;y=Y;try{return Q()}finally{y=ie}},e.unstable_scheduleCallback=function(Y,Q,ie){var B=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?B+ie:B):ie=B,Y){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,Y={id:h++,callback:Q,priorityLevel:Y,startTime:ie,expirationTime:J,sortIndex:-1},ie>B?(Y.sortIndex=ie,t(_,Y),n(p)===null&&Y===n(_)&&(k?(q(A),A=-1):k=!0,ne(M,ie-B))):(Y.sortIndex=J,t(p,Y),w||v||(w=!0,U(j))),Y},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Y){var Q=y;return function(){var ie=y;y=Q;try{return Y.apply(this,arguments)}finally{y=ie}}}})(xp)),xp}var Mx;function D5(){return Mx||(Mx=1,vp.exports=L5()),vp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function O5(){if(Ex)return Rr;Ex=1;var e=Xs(),t=D5();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function s(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(a[r]=i,r=0;r<i.length;r++)o.add(i[r])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function y(r){return p.call(f,r)?!0:p.call(h,r)?!1:_.test(r)?f[r]=!0:(h[r]=!0,!1)}function v(r,i,l,m){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function w(r,i,l,m){if(i===null||typeof i>"u"||v(r,i,l,m))return!0;if(m)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(r,i,l,m,g,S,R){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=S,this.removeEmptyString=R}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];x[i]=new k(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function E(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(q,E);x[i]=new k(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(q,E);x[i]=new k(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(q,E);x[i]=new k(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function b(r,i,l,m){var g=x.hasOwnProperty(i)?x[i]:null;(g!==null?g.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,l,g,m)&&(l=null),m||g===null?y(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):g.mustUseProperty?r[g.propertyName]=l===null?g.type===3?!1:"":l:(i=g.attributeName,m=g.attributeNamespace,l===null?r.removeAttribute(i):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,m?r.setAttributeNS(m,i,l):r.setAttribute(i,l))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,B;function J(r){if(B===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);B=i&&i[1]||""}return`
`+B+r}var me=!1;function $(r,i){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(_e){var m=_e}Reflect.construct(r,[],i)}else{try{i.call()}catch(_e){m=_e}r.call(i.prototype)}else{try{throw Error()}catch(_e){m=_e}r()}}catch(_e){if(_e&&m&&typeof _e.stack=="string"){for(var g=_e.stack.split(`
`),S=m.stack.split(`
`),R=g.length-1,W=S.length-1;1<=R&&0<=W&&g[R]!==S[W];)W--;for(;1<=R&&0<=W;R--,W--)if(g[R]!==S[W]){if(R!==1||W!==1)do if(R--,W--,0>W||g[R]!==S[W]){var ee=`
`+g[R].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=R&&0<=W);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?J(r):""}function te(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=$(r.type,!1),r;case 11:return r=$(r.type.render,!1),r;case 1:return r=$(r.type,!0),r;default:return""}}function oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case C:return"Portal";case P:return"Profiler";case A:return"StrictMode";case Z:return"Suspense";case T:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case F:return(r.displayName||"Context")+".Consumer";case z:return(r._context.displayName||"Context")+".Provider";case D:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case K:return i=r.displayName||null,i!==null?i:oe(r.type)||"Memo";case U:i=r._payload,r=r._init;try{return oe(r(i))}catch{}}return null}function de(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ve(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ee(r){var i=ve(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,S=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(R){m=""+R,S.call(this,R)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return m},setValue:function(R){m=""+R},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Re(r){r._valueTracker||(r._valueTracker=Ee(r))}function Ie(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),m="";return r&&(m=ve(r)?r.checked?"true":"false":r.value),r=m,r!==l?(i.setValue(r),!0):!1}function je(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Te(r,i){var l=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ae(r,i){var l=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;l=ue(i.value!=null?i.value:l),r._wrapperState={initialChecked:m,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function We(r,i){i=i.checked,i!=null&&b(r,"checked",i,!1)}function Be(r,i){We(r,i);var l=ue(i.value),m=i.type;if(l!=null)m==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?at(r,i.type,l):i.hasOwnProperty("defaultValue")&&at(r,i.type,ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function st(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function at(r,i,l){(i!=="number"||je(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Mt=Array.isArray;function bt(r,i,l,m){if(r=r.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=i.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&m&&(r[l].defaultSelected=!0)}else{for(l=""+ue(l),i=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,m&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function qt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ut(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(n(92));if(Mt(l)){if(1<l.length)throw Error(n(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:ue(l)}}function Cr(r,i){var l=ue(i.value),m=ue(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),m!=null&&(r.defaultValue=""+m)}function tr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Rt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Rt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var it,Lr=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,m,g){MSApp.execUnsafeLocalFunction(function(){return r(i,l,m,g)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(it=it||document.createElement("div"),it.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=it.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Nt(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rr=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(r){rr.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Kr[i]=Kr[r]})});function Ut(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Kr.hasOwnProperty(r)&&Kr[r]?(""+i).trim():i+"px"}function Qe(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var m=l.indexOf("--")===0,g=Ut(l,i[l],m);l==="float"&&(l="cssFloat"),m?r.setProperty(l,g):r[l]=g}}var bi=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(r,i){if(i){if(bi[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function dn(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function ot(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Dr=null,Or=null,gr=null;function ei(r){if(r=is(r)){if(typeof Dr!="function")throw Error(n(280));var i=r.stateNode;i&&(i=ku(i),Dr(r.stateNode,r.type,i))}}function Dn(r){Or?gr?gr.push(r):gr=[r]:Or=r}function At(){if(Or){var r=Or,i=gr;if(gr=Or=null,ei(r),i)for(r=0;r<i.length;r++)ei(i[r])}}function nr(r,i){return r(i)}function Gt(){}var dt=!1;function Bo(r,i,l){if(dt)return r(i,l);dt=!0;try{return nr(r,i,l)}finally{dt=!1,(Or!==null||gr!==null)&&(Gt(),At())}}function ht(r,i){var l=r.stateNode;if(l===null)return null;var m=ku(l);if(m===null)return null;l=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var Ji=!1;if(c)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{Ji=!1}function Yr(r,i,l,m,g,S,R,W,ee){var _e=Array.prototype.slice.call(arguments,3);try{i.apply(l,_e)}catch(qe){this.onError(qe)}}var Ot=!1,Vt=null,Yt=!1,Qt=null,vr={onError:function(r){Ot=!0,Vt=r}};function ur(r,i,l,m,g,S,R,W,ee){Ot=!1,Vt=null,Yr.apply(vr,arguments)}function xr(r,i,l,m,g,S,R,W,ee){if(ur.apply(this,arguments),Ot){if(Ot){var _e=Vt;Ot=!1,Vt=null}else throw Error(n(198));Yt||(Yt=!0,Qt=_e)}}function Et(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Qr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function lr(r){if(Et(r)!==r)throw Error(n(188))}function eo(r){var i=r.alternate;if(!i){if(i=Et(r),i===null)throw Error(n(188));return i!==r?null:r}for(var l=r,m=i;;){var g=l.return;if(g===null)break;var S=g.alternate;if(S===null){if(m=g.return,m!==null){l=m;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===l)return lr(g),r;if(S===m)return lr(g),i;S=S.sibling}throw Error(n(188))}if(l.return!==m.return)l=g,m=S;else{for(var R=!1,W=g.child;W;){if(W===l){R=!0,l=g,m=S;break}if(W===m){R=!0,m=g,l=S;break}W=W.sibling}if(!R){for(W=S.child;W;){if(W===l){R=!0,l=S,m=g;break}if(W===m){R=!0,m=S,l=g;break}W=W.sibling}if(!R)throw Error(n(189))}}if(l.alternate!==m)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:i}function to(r){return r=eo(r),r!==null?cr(r):null}function cr(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=cr(r);if(i!==null)return i;r=r.sibling}return null}var qi=t.unstable_scheduleCallback,Si=t.unstable_cancelCallback,ro=t.unstable_shouldYield,ti=t.unstable_requestPaint,pt=t.unstable_now,pn=t.unstable_getCurrentPriorityLevel,_n=t.unstable_ImmediatePriority,fn=t.unstable_UserBlockingPriority,mn=t.unstable_NormalPriority,_t=t.unstable_LowPriority,Xr=t.unstable_IdlePriority,On=null,Xt=null;function Ho(r){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(On,r,void 0,(r.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:ri,hn=Math.log,yn=Math.LN2;function ri(r){return r>>>=0,r===0?32:31-(hn(r)/yn|0)|0}var Mr=64,ki=4194304;function ir(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function no(r,i){var l=r.pendingLanes;if(l===0)return 0;var m=0,g=r.suspendedLanes,S=r.pingedLanes,R=l&268435455;if(R!==0){var W=R&~g;W!==0?m=ir(W):(S&=R,S!==0&&(m=ir(S)))}else R=l&~g,R!==0?m=ir(R):S!==0&&(m=ir(S));if(m===0)return 0;if(i!==0&&i!==m&&(i&g)===0&&(g=m&-m,S=i&-i,g>=S||g===16&&(S&4194240)!==0))return i;if((m&4)!==0&&(m|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)l=31-wr(i),g=1<<l,m|=r[l],i&=~g;return m}function $o(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function io(r,i){for(var l=r.suspendedLanes,m=r.pingedLanes,g=r.expirationTimes,S=r.pendingLanes;0<S;){var R=31-wr(S),W=1<<R,ee=g[R];ee===-1?((W&l)===0||(W&m)!==0)&&(g[R]=$o(W,i)):ee<=i&&(r.expiredLanes|=W),S&=~W}}function Vn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ci(){var r=Mr;return Mr<<=1,(Mr&4194240)===0&&(Mr=64),r}function oo(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function zt(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-wr(i),r[i]=l}function Zr(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<l;){var g=31-wr(l),S=1<<g;i[g]=0,m[g]=-1,r[g]=-1,l&=~S}}function Oa(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var m=31-wr(l),g=1<<m;g&i|r[m]&i&&(r[m]|=i),l&=~g}}var Je=0;function ao(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Va,$e,du,so,za,uo=!1,Mi=[],Oe=null,gn=null,vn=null,zn=new Map,Ei=new Map,xn=[],Wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ba(r,i){switch(r){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":zn.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(i.pointerId)}}function lo(r,i,l,m,g,S){return r===null||r.nativeEvent!==S?(r={blockedOn:i,domEventName:l,eventSystemFlags:m,nativeEvent:S,targetContainers:[g]},i!==null&&(i=is(i),i!==null&&$e(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Jr(r,i,l,m,g){switch(i){case"focusin":return Oe=lo(Oe,r,i,l,m,g),!0;case"dragenter":return gn=lo(gn,r,i,l,m,g),!0;case"mouseover":return vn=lo(vn,r,i,l,m,g),!0;case"pointerover":var S=g.pointerId;return zn.set(S,lo(zn.get(S)||null,r,i,l,m,g)),!0;case"gotpointercapture":return S=g.pointerId,Ei.set(S,lo(Ei.get(S)||null,r,i,l,m,g)),!0}return!1}function co(r){var i=yo(r.target);if(i!==null){var l=Et(i);if(l!==null){if(i=l.tag,i===13){if(i=Qr(l),i!==null){r.blockedOn=i,za(r.priority,function(){du(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Uo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=$a(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var m=new l.constructor(l.type,l);fe=m,l.target.dispatchEvent(m),fe=null}else return i=is(l),i!==null&&$e(i),r.blockedOn=l,!1;i.shift()}return!0}function pu(r,i,l){Uo(r)&&l.delete(i)}function Go(){uo=!1,Oe!==null&&Uo(Oe)&&(Oe=null),gn!==null&&Uo(gn)&&(gn=null),vn!==null&&Uo(vn)&&(vn=null),zn.forEach(pu),Ei.forEach(pu)}function po(r,i){r.blockedOn===i&&(r.blockedOn=null,uo||(uo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Go)))}function _o(r){function i(g){return po(g,r)}if(0<Mi.length){po(Mi[0],r);for(var l=1;l<Mi.length;l++){var m=Mi[l];m.blockedOn===r&&(m.blockedOn=null)}}for(Oe!==null&&po(Oe,r),gn!==null&&po(gn,r),vn!==null&&po(vn,r),zn.forEach(i),Ei.forEach(i),l=0;l<xn.length;l++)m=xn[l],m.blockedOn===r&&(m.blockedOn=null);for(;0<xn.length&&(l=xn[0],l.blockedOn===null);)co(l),l.blockedOn===null&&xn.shift()}var Ii=M.ReactCurrentBatchConfig,br=!0;function Fc(r,i,l,m){var g=Je,S=Ii.transition;Ii.transition=null;try{Je=1,Ha(r,i,l,m)}finally{Je=g,Ii.transition=S}}function Lc(r,i,l,m){var g=Je,S=Ii.transition;Ii.transition=null;try{Je=4,Ha(r,i,l,m)}finally{Je=g,Ii.transition=S}}function Ha(r,i,l,m){if(br){var g=$a(r,i,l,m);if(g===null)ad(r,i,m,Ko,l),Ba(r,m);else if(Jr(g,r,i,l,m))m.stopPropagation();else if(Ba(r,m),i&4&&-1<Wo.indexOf(r)){for(;g!==null;){var S=is(g);if(S!==null&&Va(S),S=$a(r,i,l,m),S===null&&ad(r,i,m,Ko,l),S===g)break;g=S}g!==null&&m.stopPropagation()}else ad(r,i,m,null,l)}}var Ko=null;function $a(r,i,l,m){if(Ko=null,r=ot(m),r=yo(r),r!==null)if(i=Et(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Qr(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Ko=r,null}function _u(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pn()){case _n:return 1;case fn:return 4;case mn:case _t:return 16;case Xr:return 536870912;default:return 16}default:return 16}}var Bn=null,Wa=null,Yo=null;function fu(){if(Yo)return Yo;var r,i=Wa,l=i.length,m,g="value"in Bn?Bn.value:Bn.textContent,S=g.length;for(r=0;r<l&&i[r]===g[r];r++);var R=l-r;for(m=1;m<=R&&i[l-m]===g[S-m];m++);return Yo=g.slice(r,1<m?1-m:void 0)}function Qo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function ni(){return!1}function or(r){function i(l,m,g,S,R){this._reactName=l,this._targetInst=g,this.type=m,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var W in r)r.hasOwnProperty(W)&&(l=r[W],this[W]=l?l(S):S[W]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Er:ni,this.isPropagationStopped=ni,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),i}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=or(wn),fo=ie({},wn,{view:0,detail:0}),Dc=or(fo),mo,Ua,ho,Zo=ie({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ho&&(ho&&r.type==="mousemove"?(mo=r.screenX-ho.screenX,Ua=r.screenY-ho.screenY):Ua=mo=0,ho=r),mo)},movementY:function(r){return"movementY"in r?r.movementY:Ua}}),mu=or(Zo),Oc=ie({},Zo,{dataTransfer:0}),Ga=or(Oc),hu=ie({},fo,{relatedTarget:0}),Ka=or(hu),Vc=ie({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=or(Vc),Bc=ie({},wn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hc=or(Bc),$c=ie({},wn,{data:0}),Ya=or($c),ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Uc[r])?!!i[r]:!1}function Qa(){return Gc}var Kc=ie({},fo,{key:function(r){if(r.key){var i=ii[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Qo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Wc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(r){return r.type==="keypress"?Qo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Qo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Yc=or(Kc),Qc=ie({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xa=or(Qc),Xc=ie({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),yu=or(Xc),Zc=ie({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=or(Zc),V=ie({},Zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),H=or(V),O=[9,13,27,32],G=c&&"CompositionEvent"in window,X=null;c&&"documentMode"in document&&(X=document.documentMode);var se=c&&"TextEvent"in window&&!X,ce=c&&(!G||X&&8<X&&11>=X),ye=" ",xe=!1;function ke(r,i){switch(r){case"keyup":return O.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var he=!1;function be(r,i){switch(r){case"compositionend":return pe(i);case"keypress":return i.which!==32?null:(xe=!0,ye);case"textInput":return r=i.data,r===ye&&xe?null:r;default:return null}}function ge(r,i){if(he)return r==="compositionend"||!G&&ke(r,i)?(r=fu(),Yo=Wa=Bn=null,he=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ce&&i.locale!=="ko"?null:i.data;default:return null}}var Ce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pe(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ce[r.type]:i==="textarea"}function Ne(r,i,l,m){Dn(m),i=bu(i,"onChange"),0<i.length&&(l=new Xo("onChange","change",null,l,m),r.push({event:l,listeners:i}))}var Ke=null,Xe=null;function lt(r){Dg(r,0)}function et(r){var i=na(r);if(Ie(i))return r}function Bt(r,i){if(r==="change")return i}var dr=!1;if(c){var It;if(c){var oi="oninput"in document;if(!oi){var gu=document.createElement("div");gu.setAttribute("oninput","return;"),oi=typeof gu.oninput=="function"}It=oi}else It=!1;dr=It&&(!document.documentMode||9<document.documentMode)}function qg(){Ke&&(Ke.detachEvent("onpropertychange",Sg),Xe=Ke=null)}function Sg(r){if(r.propertyName==="value"&&et(Xe)){var i=[];Ne(i,Xe,r,ot(r)),Bo(lt,i)}}function FE(r,i,l){r==="focusin"?(qg(),Ke=i,Xe=l,Ke.attachEvent("onpropertychange",Sg)):r==="focusout"&&qg()}function LE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return et(Xe)}function DE(r,i){if(r==="click")return et(i)}function OE(r,i){if(r==="input"||r==="change")return et(i)}function VE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var bn=typeof Object.is=="function"?Object.is:VE;function Za(r,i){if(bn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),m=Object.keys(i);if(l.length!==m.length)return!1;for(m=0;m<l.length;m++){var g=l[m];if(!p.call(i,g)||!bn(r[g],i[g]))return!1}return!0}function kg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Cg(r,i){var l=kg(r);r=0;for(var m;l;){if(l.nodeType===3){if(m=r+l.textContent.length,r<=i&&m>=i)return{node:l,offset:i-r};r=m}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=kg(l)}}function Mg(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Mg(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Eg(){for(var r=window,i=je();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=je(r.document)}return i}function Jc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function zE(r){var i=Eg(),l=r.focusedElem,m=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Mg(l.ownerDocument.documentElement,l)){if(m!==null&&Jc(l)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var g=l.textContent.length,S=Math.min(m.start,g);m=m.end===void 0?S:Math.min(m.end,g),!r.extend&&S>m&&(g=m,m=S,S=g),g=Cg(l,S);var R=Cg(l,m);g&&R&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==R.node||r.focusOffset!==R.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),r.removeAllRanges(),S>m?(r.addRange(i),r.extend(R.node,R.offset)):(i.setEnd(R.node,R.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var BE=c&&"documentMode"in document&&11>=document.documentMode,Jo=null,ed=null,Ja=null,td=!1;function Ig(r,i,l){var m=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;td||Jo==null||Jo!==je(m)||(m=Jo,"selectionStart"in m&&Jc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ja&&Za(Ja,m)||(Ja=m,m=bu(ed,"onSelect"),0<m.length&&(i=new Xo("onSelect","select",null,i,l),r.push({event:i,listeners:m}),i.target=Jo)))}function vu(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ea={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},rd={},jg={};c&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function xu(r){if(rd[r])return rd[r];if(!ea[r])return r;var i=ea[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in jg)return rd[r]=i[l];return r}var Ng=xu("animationend"),Tg=xu("animationiteration"),Pg=xu("animationstart"),Rg=xu("transitionend"),Ag=new Map,Fg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(r,i){Ag.set(r,i),s(i,[r])}for(var nd=0;nd<Fg.length;nd++){var id=Fg[nd],HE=id.toLowerCase(),$E=id[0].toUpperCase()+id.slice(1);ji(HE,"on"+$E)}ji(Ng,"onAnimationEnd"),ji(Tg,"onAnimationIteration"),ji(Pg,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Rg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WE=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Lg(r,i,l){var m=r.type||"unknown-event";r.currentTarget=l,xr(m,i,void 0,r),r.currentTarget=null}function Dg(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var m=r[l],g=m.event;m=m.listeners;e:{var S=void 0;if(i)for(var R=m.length-1;0<=R;R--){var W=m[R],ee=W.instance,_e=W.currentTarget;if(W=W.listener,ee!==S&&g.isPropagationStopped())break e;Lg(g,W,_e),S=ee}else for(R=0;R<m.length;R++){if(W=m[R],ee=W.instance,_e=W.currentTarget,W=W.listener,ee!==S&&g.isPropagationStopped())break e;Lg(g,W,_e),S=ee}}}if(Yt)throw r=Qt,Yt=!1,Qt=null,r}function ft(r,i){var l=i[pd];l===void 0&&(l=i[pd]=new Set);var m=r+"__bubble";l.has(m)||(Og(i,r,2,!1),l.add(m))}function od(r,i,l){var m=0;i&&(m|=4),Og(l,r,m,i)}var wu="_reactListening"+Math.random().toString(36).slice(2);function ts(r){if(!r[wu]){r[wu]=!0,o.forEach(function(l){l!=="selectionchange"&&(WE.has(l)||od(l,!1,r),od(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[wu]||(i[wu]=!0,od("selectionchange",!1,i))}}function Og(r,i,l,m){switch(_u(i)){case 1:var g=Fc;break;case 4:g=Lc;break;default:g=Ha}l=g.bind(null,i,l,r),g=void 0,!Ji||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),m?g!==void 0?r.addEventListener(i,l,{capture:!0,passive:g}):r.addEventListener(i,l,!0):g!==void 0?r.addEventListener(i,l,{passive:g}):r.addEventListener(i,l,!1)}function ad(r,i,l,m,g){var S=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var W=m.stateNode.containerInfo;if(W===g||W.nodeType===8&&W.parentNode===g)break;if(R===4)for(R=m.return;R!==null;){var ee=R.tag;if((ee===3||ee===4)&&(ee=R.stateNode.containerInfo,ee===g||ee.nodeType===8&&ee.parentNode===g))return;R=R.return}for(;W!==null;){if(R=yo(W),R===null)return;if(ee=R.tag,ee===5||ee===6){m=S=R;continue e}W=W.parentNode}}m=m.return}Bo(function(){var _e=S,qe=ot(l),Se=[];e:{var we=Ag.get(r);if(we!==void 0){var Fe=Xo,De=r;switch(r){case"keypress":if(Qo(l)===0)break e;case"keydown":case"keyup":Fe=Yc;break;case"focusin":De="focus",Fe=Ka;break;case"focusout":De="blur",Fe=Ka;break;case"beforeblur":case"afterblur":Fe=Ka;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Ga;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=yu;break;case Ng:case Tg:case Pg:Fe=zc;break;case Rg:Fe=I;break;case"scroll":Fe=Dc;break;case"wheel":Fe=H;break;case"copy":case"cut":case"paste":Fe=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Xa}var Ve=(i&4)!==0,Pt=!Ve&&r==="scroll",ae=Ve?we!==null?we+"Capture":null:we;Ve=[];for(var re=_e,le;re!==null;){le=re;var Me=le.stateNode;if(le.tag===5&&Me!==null&&(le=Me,ae!==null&&(Me=ht(re,ae),Me!=null&&Ve.push(rs(re,Me,le)))),Pt)break;re=re.return}0<Ve.length&&(we=new Fe(we,De,null,l,qe),Se.push({event:we,listeners:Ve}))}}if((i&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Fe=r==="mouseout"||r==="pointerout",we&&l!==fe&&(De=l.relatedTarget||l.fromElement)&&(yo(De)||De[ai]))break e;if((Fe||we)&&(we=qe.window===qe?qe:(we=qe.ownerDocument)?we.defaultView||we.parentWindow:window,Fe?(De=l.relatedTarget||l.toElement,Fe=_e,De=De?yo(De):null,De!==null&&(Pt=Et(De),De!==Pt||De.tag!==5&&De.tag!==6)&&(De=null)):(Fe=null,De=_e),Fe!==De)){if(Ve=mu,Me="onMouseLeave",ae="onMouseEnter",re="mouse",(r==="pointerout"||r==="pointerover")&&(Ve=Xa,Me="onPointerLeave",ae="onPointerEnter",re="pointer"),Pt=Fe==null?we:na(Fe),le=De==null?we:na(De),we=new Ve(Me,re+"leave",Fe,l,qe),we.target=Pt,we.relatedTarget=le,Me=null,yo(qe)===_e&&(Ve=new Ve(ae,re+"enter",De,l,qe),Ve.target=le,Ve.relatedTarget=Pt,Me=Ve),Pt=Me,Fe&&De)t:{for(Ve=Fe,ae=De,re=0,le=Ve;le;le=ta(le))re++;for(le=0,Me=ae;Me;Me=ta(Me))le++;for(;0<re-le;)Ve=ta(Ve),re--;for(;0<le-re;)ae=ta(ae),le--;for(;re--;){if(Ve===ae||ae!==null&&Ve===ae.alternate)break t;Ve=ta(Ve),ae=ta(ae)}Ve=null}else Ve=null;Fe!==null&&Vg(Se,we,Fe,Ve,!1),De!==null&&Pt!==null&&Vg(Se,Pt,De,Ve,!0)}}e:{if(we=_e?na(_e):window,Fe=we.nodeName&&we.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&we.type==="file")var ze=Bt;else if(Pe(we))if(dr)ze=OE;else{ze=LE;var Ue=FE}else(Fe=we.nodeName)&&Fe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(ze=DE);if(ze&&(ze=ze(r,_e))){Ne(Se,ze,l,qe);break e}Ue&&Ue(r,we,_e),r==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&at(we,"number",we.value)}switch(Ue=_e?na(_e):window,r){case"focusin":(Pe(Ue)||Ue.contentEditable==="true")&&(Jo=Ue,ed=_e,Ja=null);break;case"focusout":Ja=ed=Jo=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,Ig(Se,l,qe);break;case"selectionchange":if(BE)break;case"keydown":case"keyup":Ig(Se,l,qe)}var Ge;if(G)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else he?ke(r,l)&&(Ye="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ye="onCompositionStart");Ye&&(ce&&l.locale!=="ko"&&(he||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&he&&(Ge=fu()):(Bn=qe,Wa="value"in Bn?Bn.value:Bn.textContent,he=!0)),Ue=bu(_e,Ye),0<Ue.length&&(Ye=new Ya(Ye,r,null,l,qe),Se.push({event:Ye,listeners:Ue}),Ge?Ye.data=Ge:(Ge=pe(l),Ge!==null&&(Ye.data=Ge)))),(Ge=se?be(r,l):ge(r,l))&&(_e=bu(_e,"onBeforeInput"),0<_e.length&&(qe=new Ya("onBeforeInput","beforeinput",null,l,qe),Se.push({event:qe,listeners:_e}),qe.data=Ge))}Dg(Se,i)})}function rs(r,i,l){return{instance:r,listener:i,currentTarget:l}}function bu(r,i){for(var l=i+"Capture",m=[];r!==null;){var g=r,S=g.stateNode;g.tag===5&&S!==null&&(g=S,S=ht(r,l),S!=null&&m.unshift(rs(r,S,g)),S=ht(r,i),S!=null&&m.push(rs(r,S,g))),r=r.return}return m}function ta(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Vg(r,i,l,m,g){for(var S=i._reactName,R=[];l!==null&&l!==m;){var W=l,ee=W.alternate,_e=W.stateNode;if(ee!==null&&ee===m)break;W.tag===5&&_e!==null&&(W=_e,g?(ee=ht(l,S),ee!=null&&R.unshift(rs(l,ee,W))):g||(ee=ht(l,S),ee!=null&&R.push(rs(l,ee,W)))),l=l.return}R.length!==0&&r.push({event:i,listeners:R})}var UE=/\r\n?/g,GE=/\u0000|\uFFFD/g;function zg(r){return(typeof r=="string"?r:""+r).replace(UE,`
`).replace(GE,"")}function qu(r,i,l){if(i=zg(i),zg(r)!==i&&l)throw Error(n(425))}function Su(){}var sd=null,ud=null;function ld(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,KE=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,YE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(r){return Bg.resolve(null).then(r).catch(QE)}:cd;function QE(r){setTimeout(function(){throw r})}function dd(r,i){var l=i,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(m===0){r.removeChild(g),_o(i);return}m--}else l!=="$"&&l!=="$?"&&l!=="$!"||m++;l=g}while(l);_o(i)}function Ni(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Hg(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var ra=Math.random().toString(36).slice(2),Hn="__reactFiber$"+ra,ns="__reactProps$"+ra,ai="__reactContainer$"+ra,pd="__reactEvents$"+ra,XE="__reactListeners$"+ra,ZE="__reactHandles$"+ra;function yo(r){var i=r[Hn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[ai]||l[Hn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Hg(r);r!==null;){if(l=r[Hn])return l;r=Hg(r)}return i}r=l,l=r.parentNode}return null}function is(r){return r=r[Hn]||r[ai],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function na(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ku(r){return r[ns]||null}var _d=[],ia=-1;function Ti(r){return{current:r}}function mt(r){0>ia||(r.current=_d[ia],_d[ia]=null,ia--)}function ct(r,i){ia++,_d[ia]=r.current,r.current=i}var Pi={},pr=Ti(Pi),Ir=Ti(!1),go=Pi;function oa(r,i){var l=r.type.contextTypes;if(!l)return Pi;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var g={},S;for(S in l)g[S]=i[S];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=g),g}function jr(r){return r=r.childContextTypes,r!=null}function Cu(){mt(Ir),mt(pr)}function $g(r,i,l){if(pr.current!==Pi)throw Error(n(168));ct(pr,i),ct(Ir,l)}function Wg(r,i,l){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return l;m=m.getChildContext();for(var g in m)if(!(g in i))throw Error(n(108,de(r)||"Unknown",g));return ie({},l,m)}function Mu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Pi,go=pr.current,ct(pr,r),ct(Ir,Ir.current),!0}function Ug(r,i,l){var m=r.stateNode;if(!m)throw Error(n(169));l?(r=Wg(r,i,go),m.__reactInternalMemoizedMergedChildContext=r,mt(Ir),mt(pr),ct(pr,r)):mt(Ir),ct(Ir,l)}var si=null,Eu=!1,fd=!1;function Gg(r){si===null?si=[r]:si.push(r)}function JE(r){Eu=!0,Gg(r)}function Ri(){if(!fd&&si!==null){fd=!0;var r=0,i=Je;try{var l=si;for(Je=1;r<l.length;r++){var m=l[r];do m=m(!0);while(m!==null)}si=null,Eu=!1}catch(g){throw si!==null&&(si=si.slice(r+1)),qi(_n,Ri),g}finally{Je=i,fd=!1}}return null}var aa=[],sa=0,Iu=null,ju=0,en=[],tn=0,vo=null,ui=1,li="";function xo(r,i){aa[sa++]=ju,aa[sa++]=Iu,Iu=r,ju=i}function Kg(r,i,l){en[tn++]=ui,en[tn++]=li,en[tn++]=vo,vo=r;var m=ui;r=li;var g=32-wr(m)-1;m&=~(1<<g),l+=1;var S=32-wr(i)+g;if(30<S){var R=g-g%5;S=(m&(1<<R)-1).toString(32),m>>=R,g-=R,ui=1<<32-wr(i)+g|l<<g|m,li=S+r}else ui=1<<S|l<<g|m,li=r}function md(r){r.return!==null&&(xo(r,1),Kg(r,1,0))}function hd(r){for(;r===Iu;)Iu=aa[--sa],aa[sa]=null,ju=aa[--sa],aa[sa]=null;for(;r===vo;)vo=en[--tn],en[tn]=null,li=en[--tn],en[tn]=null,ui=en[--tn],en[tn]=null}var Vr=null,zr=null,yt=!1,qn=null;function Yg(r,i){var l=an(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function Qg(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Vr=r,zr=Ni(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Vr=r,zr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=vo!==null?{id:ui,overflow:li}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=an(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,Vr=r,zr=null,!0):!1;default:return!1}}function yd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gd(r){if(yt){var i=zr;if(i){var l=i;if(!Qg(r,i)){if(yd(r))throw Error(n(418));i=Ni(l.nextSibling);var m=Vr;i&&Qg(r,i)?Yg(m,l):(r.flags=r.flags&-4097|2,yt=!1,Vr=r)}}else{if(yd(r))throw Error(n(418));r.flags=r.flags&-4097|2,yt=!1,Vr=r}}}function Xg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Vr=r}function Nu(r){if(r!==Vr)return!1;if(!yt)return Xg(r),yt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ld(r.type,r.memoizedProps)),i&&(i=zr)){if(yd(r))throw Zg(),Error(n(418));for(;i;)Yg(r,i),i=Ni(i.nextSibling)}if(Xg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){zr=Ni(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}zr=null}}else zr=Vr?Ni(r.stateNode.nextSibling):null;return!0}function Zg(){for(var r=zr;r;)r=Ni(r.nextSibling)}function ua(){zr=Vr=null,yt=!1}function vd(r){qn===null?qn=[r]:qn.push(r)}var e5=M.ReactCurrentBatchConfig;function os(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var m=l.stateNode}if(!m)throw Error(n(147,r));var g=m,S=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(R){var W=g.refs;R===null?delete W[S]:W[S]=R},i._stringRef=S,i)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function Tu(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Jg(r){var i=r._init;return i(r._payload)}function ev(r){function i(ae,re){if(r){var le=ae.deletions;le===null?(ae.deletions=[re],ae.flags|=16):le.push(re)}}function l(ae,re){if(!r)return null;for(;re!==null;)i(ae,re),re=re.sibling;return null}function m(ae,re){for(ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function g(ae,re){return ae=Bi(ae,re),ae.index=0,ae.sibling=null,ae}function S(ae,re,le){return ae.index=le,r?(le=ae.alternate,le!==null?(le=le.index,le<re?(ae.flags|=2,re):le):(ae.flags|=2,re)):(ae.flags|=1048576,re)}function R(ae){return r&&ae.alternate===null&&(ae.flags|=2),ae}function W(ae,re,le,Me){return re===null||re.tag!==6?(re=cp(le,ae.mode,Me),re.return=ae,re):(re=g(re,le),re.return=ae,re)}function ee(ae,re,le,Me){var ze=le.type;return ze===N?qe(ae,re,le.props.children,Me,le.key):re!==null&&(re.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===U&&Jg(ze)===re.type)?(Me=g(re,le.props),Me.ref=os(ae,re,le),Me.return=ae,Me):(Me=rl(le.type,le.key,le.props,null,ae.mode,Me),Me.ref=os(ae,re,le),Me.return=ae,Me)}function _e(ae,re,le,Me){return re===null||re.tag!==4||re.stateNode.containerInfo!==le.containerInfo||re.stateNode.implementation!==le.implementation?(re=dp(le,ae.mode,Me),re.return=ae,re):(re=g(re,le.children||[]),re.return=ae,re)}function qe(ae,re,le,Me,ze){return re===null||re.tag!==7?(re=Eo(le,ae.mode,Me,ze),re.return=ae,re):(re=g(re,le),re.return=ae,re)}function Se(ae,re,le){if(typeof re=="string"&&re!==""||typeof re=="number")return re=cp(""+re,ae.mode,le),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case j:return le=rl(re.type,re.key,re.props,null,ae.mode,le),le.ref=os(ae,null,re),le.return=ae,le;case C:return re=dp(re,ae.mode,le),re.return=ae,re;case U:var Me=re._init;return Se(ae,Me(re._payload),le)}if(Mt(re)||Q(re))return re=Eo(re,ae.mode,le,null),re.return=ae,re;Tu(ae,re)}return null}function we(ae,re,le,Me){var ze=re!==null?re.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return ze!==null?null:W(ae,re,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case j:return le.key===ze?ee(ae,re,le,Me):null;case C:return le.key===ze?_e(ae,re,le,Me):null;case U:return ze=le._init,we(ae,re,ze(le._payload),Me)}if(Mt(le)||Q(le))return ze!==null?null:qe(ae,re,le,Me,null);Tu(ae,le)}return null}function Fe(ae,re,le,Me,ze){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ae=ae.get(le)||null,W(re,ae,""+Me,ze);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case j:return ae=ae.get(Me.key===null?le:Me.key)||null,ee(re,ae,Me,ze);case C:return ae=ae.get(Me.key===null?le:Me.key)||null,_e(re,ae,Me,ze);case U:var Ue=Me._init;return Fe(ae,re,le,Ue(Me._payload),ze)}if(Mt(Me)||Q(Me))return ae=ae.get(le)||null,qe(re,ae,Me,ze,null);Tu(re,Me)}return null}function De(ae,re,le,Me){for(var ze=null,Ue=null,Ge=re,Ye=re=0,er=null;Ge!==null&&Ye<le.length;Ye++){Ge.index>Ye?(er=Ge,Ge=null):er=Ge.sibling;var nt=we(ae,Ge,le[Ye],Me);if(nt===null){Ge===null&&(Ge=er);break}r&&Ge&&nt.alternate===null&&i(ae,Ge),re=S(nt,re,Ye),Ue===null?ze=nt:Ue.sibling=nt,Ue=nt,Ge=er}if(Ye===le.length)return l(ae,Ge),yt&&xo(ae,Ye),ze;if(Ge===null){for(;Ye<le.length;Ye++)Ge=Se(ae,le[Ye],Me),Ge!==null&&(re=S(Ge,re,Ye),Ue===null?ze=Ge:Ue.sibling=Ge,Ue=Ge);return yt&&xo(ae,Ye),ze}for(Ge=m(ae,Ge);Ye<le.length;Ye++)er=Fe(Ge,ae,Ye,le[Ye],Me),er!==null&&(r&&er.alternate!==null&&Ge.delete(er.key===null?Ye:er.key),re=S(er,re,Ye),Ue===null?ze=er:Ue.sibling=er,Ue=er);return r&&Ge.forEach(function(Hi){return i(ae,Hi)}),yt&&xo(ae,Ye),ze}function Ve(ae,re,le,Me){var ze=Q(le);if(typeof ze!="function")throw Error(n(150));if(le=ze.call(le),le==null)throw Error(n(151));for(var Ue=ze=null,Ge=re,Ye=re=0,er=null,nt=le.next();Ge!==null&&!nt.done;Ye++,nt=le.next()){Ge.index>Ye?(er=Ge,Ge=null):er=Ge.sibling;var Hi=we(ae,Ge,nt.value,Me);if(Hi===null){Ge===null&&(Ge=er);break}r&&Ge&&Hi.alternate===null&&i(ae,Ge),re=S(Hi,re,Ye),Ue===null?ze=Hi:Ue.sibling=Hi,Ue=Hi,Ge=er}if(nt.done)return l(ae,Ge),yt&&xo(ae,Ye),ze;if(Ge===null){for(;!nt.done;Ye++,nt=le.next())nt=Se(ae,nt.value,Me),nt!==null&&(re=S(nt,re,Ye),Ue===null?ze=nt:Ue.sibling=nt,Ue=nt);return yt&&xo(ae,Ye),ze}for(Ge=m(ae,Ge);!nt.done;Ye++,nt=le.next())nt=Fe(Ge,ae,Ye,nt.value,Me),nt!==null&&(r&&nt.alternate!==null&&Ge.delete(nt.key===null?Ye:nt.key),re=S(nt,re,Ye),Ue===null?ze=nt:Ue.sibling=nt,Ue=nt);return r&&Ge.forEach(function(P5){return i(ae,P5)}),yt&&xo(ae,Ye),ze}function Pt(ae,re,le,Me){if(typeof le=="object"&&le!==null&&le.type===N&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case j:e:{for(var ze=le.key,Ue=re;Ue!==null;){if(Ue.key===ze){if(ze=le.type,ze===N){if(Ue.tag===7){l(ae,Ue.sibling),re=g(Ue,le.props.children),re.return=ae,ae=re;break e}}else if(Ue.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===U&&Jg(ze)===Ue.type){l(ae,Ue.sibling),re=g(Ue,le.props),re.ref=os(ae,Ue,le),re.return=ae,ae=re;break e}l(ae,Ue);break}else i(ae,Ue);Ue=Ue.sibling}le.type===N?(re=Eo(le.props.children,ae.mode,Me,le.key),re.return=ae,ae=re):(Me=rl(le.type,le.key,le.props,null,ae.mode,Me),Me.ref=os(ae,re,le),Me.return=ae,ae=Me)}return R(ae);case C:e:{for(Ue=le.key;re!==null;){if(re.key===Ue)if(re.tag===4&&re.stateNode.containerInfo===le.containerInfo&&re.stateNode.implementation===le.implementation){l(ae,re.sibling),re=g(re,le.children||[]),re.return=ae,ae=re;break e}else{l(ae,re);break}else i(ae,re);re=re.sibling}re=dp(le,ae.mode,Me),re.return=ae,ae=re}return R(ae);case U:return Ue=le._init,Pt(ae,re,Ue(le._payload),Me)}if(Mt(le))return De(ae,re,le,Me);if(Q(le))return Ve(ae,re,le,Me);Tu(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,re!==null&&re.tag===6?(l(ae,re.sibling),re=g(re,le),re.return=ae,ae=re):(l(ae,re),re=cp(le,ae.mode,Me),re.return=ae,ae=re),R(ae)):l(ae,re)}return Pt}var la=ev(!0),tv=ev(!1),Pu=Ti(null),Ru=null,ca=null,xd=null;function wd(){xd=ca=Ru=null}function bd(r){var i=Pu.current;mt(Pu),r._currentValue=i}function qd(r,i,l){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===l)break;r=r.return}}function da(r,i){Ru=r,xd=ca=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Nr=!0),r.firstContext=null)}function rn(r){var i=r._currentValue;if(xd!==r)if(r={context:r,memoizedValue:i,next:null},ca===null){if(Ru===null)throw Error(n(308));ca=r,Ru.dependencies={lanes:0,firstContext:r}}else ca=ca.next=r;return i}var wo=null;function Sd(r){wo===null?wo=[r]:wo.push(r)}function rv(r,i,l,m){var g=i.interleaved;return g===null?(l.next=l,Sd(i)):(l.next=g.next,g.next=l),i.interleaved=l,ci(r,m)}function ci(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Ai=!1;function kd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function di(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Fi(r,i,l){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(rt&2)!==0){var g=m.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),m.pending=i,ci(r,l)}return g=m.interleaved,g===null?(i.next=i,Sd(m)):(i.next=g.next,g.next=i),m.interleaved=i,ci(r,l)}function Au(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,l|=m,i.lanes=l,Oa(r,l)}}function iv(r,i){var l=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,l===m)){var g=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var R={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?g=S=R:S=S.next=R,l=l.next}while(l!==null);S===null?g=S=i:S=S.next=i}else g=S=i;l={baseState:m.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:m.shared,effects:m.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Fu(r,i,l,m){var g=r.updateQueue;Ai=!1;var S=g.firstBaseUpdate,R=g.lastBaseUpdate,W=g.shared.pending;if(W!==null){g.shared.pending=null;var ee=W,_e=ee.next;ee.next=null,R===null?S=_e:R.next=_e,R=ee;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,W=qe.lastBaseUpdate,W!==R&&(W===null?qe.firstBaseUpdate=_e:W.next=_e,qe.lastBaseUpdate=ee))}if(S!==null){var Se=g.baseState;R=0,qe=_e=ee=null,W=S;do{var we=W.lane,Fe=W.eventTime;if((m&we)===we){qe!==null&&(qe=qe.next={eventTime:Fe,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var De=r,Ve=W;switch(we=i,Fe=l,Ve.tag){case 1:if(De=Ve.payload,typeof De=="function"){Se=De.call(Fe,Se,we);break e}Se=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ve.payload,we=typeof De=="function"?De.call(Fe,Se,we):De,we==null)break e;Se=ie({},Se,we);break e;case 2:Ai=!0}}W.callback!==null&&W.lane!==0&&(r.flags|=64,we=g.effects,we===null?g.effects=[W]:we.push(W))}else Fe={eventTime:Fe,lane:we,tag:W.tag,payload:W.payload,callback:W.callback,next:null},qe===null?(_e=qe=Fe,ee=Se):qe=qe.next=Fe,R|=we;if(W=W.next,W===null){if(W=g.shared.pending,W===null)break;we=W,W=we.next,we.next=null,g.lastBaseUpdate=we,g.shared.pending=null}}while(!0);if(qe===null&&(ee=Se),g.baseState=ee,g.firstBaseUpdate=_e,g.lastBaseUpdate=qe,i=g.shared.interleaved,i!==null){g=i;do R|=g.lane,g=g.next;while(g!==i)}else S===null&&(g.shared.lanes=0);So|=R,r.lanes=R,r.memoizedState=Se}}function ov(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],g=m.callback;if(g!==null){if(m.callback=null,m=l,typeof g!="function")throw Error(n(191,g));g.call(m)}}}var as={},$n=Ti(as),ss=Ti(as),us=Ti(as);function bo(r){if(r===as)throw Error(n(174));return r}function Cd(r,i){switch(ct(us,i),ct(ss,r),ct($n,as),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Wt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Wt(i,r)}mt($n),ct($n,i)}function pa(){mt($n),mt(ss),mt(us)}function av(r){bo(us.current);var i=bo($n.current),l=Wt(i,r.type);i!==l&&(ct(ss,r),ct($n,l))}function Md(r){ss.current===r&&(mt($n),mt(ss))}var St=Ti(0);function Lu(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ed=[];function Id(){for(var r=0;r<Ed.length;r++)Ed[r]._workInProgressVersionPrimary=null;Ed.length=0}var Du=M.ReactCurrentDispatcher,jd=M.ReactCurrentBatchConfig,qo=0,kt=null,Ht=null,Zt=null,Ou=!1,ls=!1,cs=0,t5=0;function _r(){throw Error(n(321))}function Nd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!bn(r[l],i[l]))return!1;return!0}function Td(r,i,l,m,g,S){if(qo=S,kt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Du.current=r===null||r.memoizedState===null?o5:a5,r=l(m,g),ls){S=0;do{if(ls=!1,cs=0,25<=S)throw Error(n(301));S+=1,Zt=Ht=null,i.updateQueue=null,Du.current=s5,r=l(m,g)}while(ls)}if(Du.current=Bu,i=Ht!==null&&Ht.next!==null,qo=0,Zt=Ht=kt=null,Ou=!1,i)throw Error(n(300));return r}function Pd(){var r=cs!==0;return cs=0,r}function Wn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?kt.memoizedState=Zt=r:Zt=Zt.next=r,Zt}function nn(){if(Ht===null){var r=kt.alternate;r=r!==null?r.memoizedState:null}else r=Ht.next;var i=Zt===null?kt.memoizedState:Zt.next;if(i!==null)Zt=i,Ht=r;else{if(r===null)throw Error(n(310));Ht=r,r={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Zt===null?kt.memoizedState=Zt=r:Zt=Zt.next=r}return Zt}function ds(r,i){return typeof i=="function"?i(r):i}function Rd(r){var i=nn(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var m=Ht,g=m.baseQueue,S=l.pending;if(S!==null){if(g!==null){var R=g.next;g.next=S.next,S.next=R}m.baseQueue=g=S,l.pending=null}if(g!==null){S=g.next,m=m.baseState;var W=R=null,ee=null,_e=S;do{var qe=_e.lane;if((qo&qe)===qe)ee!==null&&(ee=ee.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),m=_e.hasEagerState?_e.eagerState:r(m,_e.action);else{var Se={lane:qe,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ee===null?(W=ee=Se,R=m):ee=ee.next=Se,kt.lanes|=qe,So|=qe}_e=_e.next}while(_e!==null&&_e!==S);ee===null?R=m:ee.next=W,bn(m,i.memoizedState)||(Nr=!0),i.memoizedState=m,i.baseState=R,i.baseQueue=ee,l.lastRenderedState=m}if(r=l.interleaved,r!==null){g=r;do S=g.lane,kt.lanes|=S,So|=S,g=g.next;while(g!==r)}else g===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Ad(r){var i=nn(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var m=l.dispatch,g=l.pending,S=i.memoizedState;if(g!==null){l.pending=null;var R=g=g.next;do S=r(S,R.action),R=R.next;while(R!==g);bn(S,i.memoizedState)||(Nr=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,m]}function sv(){}function uv(r,i){var l=kt,m=nn(),g=i(),S=!bn(m.memoizedState,g);if(S&&(m.memoizedState=g,Nr=!0),m=m.queue,Fd(dv.bind(null,l,m,r),[r]),m.getSnapshot!==i||S||Zt!==null&&Zt.memoizedState.tag&1){if(l.flags|=2048,ps(9,cv.bind(null,l,m,g,i),void 0,null),Jt===null)throw Error(n(349));(qo&30)!==0||lv(l,i,g)}return g}function lv(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=kt.updateQueue,i===null?(i={lastEffect:null,stores:null},kt.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function cv(r,i,l,m){i.value=l,i.getSnapshot=m,pv(i)&&_v(r)}function dv(r,i,l){return l(function(){pv(i)&&_v(r)})}function pv(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!bn(r,l)}catch{return!0}}function _v(r){var i=ci(r,1);i!==null&&Mn(i,r,1,-1)}function fv(r){var i=Wn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:r},i.queue=r,r=r.dispatch=i5.bind(null,kt,r),[i.memoizedState,r]}function ps(r,i,l,m){return r={tag:r,create:i,destroy:l,deps:m,next:null},i=kt.updateQueue,i===null?(i={lastEffect:null,stores:null},kt.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(m=l.next,l.next=r,r.next=m,i.lastEffect=r)),r}function mv(){return nn().memoizedState}function Vu(r,i,l,m){var g=Wn();kt.flags|=r,g.memoizedState=ps(1|i,l,void 0,m===void 0?null:m)}function zu(r,i,l,m){var g=nn();m=m===void 0?null:m;var S=void 0;if(Ht!==null){var R=Ht.memoizedState;if(S=R.destroy,m!==null&&Nd(m,R.deps)){g.memoizedState=ps(i,l,S,m);return}}kt.flags|=r,g.memoizedState=ps(1|i,l,S,m)}function hv(r,i){return Vu(8390656,8,r,i)}function Fd(r,i){return zu(2048,8,r,i)}function yv(r,i){return zu(4,2,r,i)}function gv(r,i){return zu(4,4,r,i)}function vv(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function xv(r,i,l){return l=l!=null?l.concat([r]):null,zu(4,4,vv.bind(null,i,r),l)}function Ld(){}function wv(r,i){var l=nn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&Nd(i,m[1])?m[0]:(l.memoizedState=[r,i],r)}function bv(r,i){var l=nn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&Nd(i,m[1])?m[0]:(r=r(),l.memoizedState=[r,i],r)}function qv(r,i,l){return(qo&21)===0?(r.baseState&&(r.baseState=!1,Nr=!0),r.memoizedState=l):(bn(l,i)||(l=Ci(),kt.lanes|=l,So|=l,r.baseState=!0),i)}function r5(r,i){var l=Je;Je=l!==0&&4>l?l:4,r(!0);var m=jd.transition;jd.transition={};try{r(!1),i()}finally{Je=l,jd.transition=m}}function Sv(){return nn().memoizedState}function n5(r,i,l){var m=Vi(r);if(l={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null},kv(r))Cv(i,l);else if(l=rv(r,i,l,m),l!==null){var g=Sr();Mn(l,r,m,g),Mv(l,i,m)}}function i5(r,i,l){var m=Vi(r),g={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null};if(kv(r))Cv(i,g);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var R=i.lastRenderedState,W=S(R,l);if(g.hasEagerState=!0,g.eagerState=W,bn(W,R)){var ee=i.interleaved;ee===null?(g.next=g,Sd(i)):(g.next=ee.next,ee.next=g),i.interleaved=g;return}}catch{}finally{}l=rv(r,i,g,m),l!==null&&(g=Sr(),Mn(l,r,m,g),Mv(l,i,m))}}function kv(r){var i=r.alternate;return r===kt||i!==null&&i===kt}function Cv(r,i){ls=Ou=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Mv(r,i,l){if((l&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,l|=m,i.lanes=l,Oa(r,l)}}var Bu={readContext:rn,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},o5={readContext:rn,useCallback:function(r,i){return Wn().memoizedState=[r,i===void 0?null:i],r},useContext:rn,useEffect:hv,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,Vu(4194308,4,vv.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Vu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Vu(4,2,r,i)},useMemo:function(r,i){var l=Wn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var m=Wn();return i=l!==void 0?l(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=n5.bind(null,kt,r),[m.memoizedState,r]},useRef:function(r){var i=Wn();return r={current:r},i.memoizedState=r},useState:fv,useDebugValue:Ld,useDeferredValue:function(r){return Wn().memoizedState=r},useTransition:function(){var r=fv(!1),i=r[0];return r=r5.bind(null,r[1]),Wn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var m=kt,g=Wn();if(yt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Jt===null)throw Error(n(349));(qo&30)!==0||lv(m,i,l)}g.memoizedState=l;var S={value:l,getSnapshot:i};return g.queue=S,hv(dv.bind(null,m,S,r),[r]),m.flags|=2048,ps(9,cv.bind(null,m,S,l,i),void 0,null),l},useId:function(){var r=Wn(),i=Jt.identifierPrefix;if(yt){var l=li,m=ui;l=(m&~(1<<32-wr(m)-1)).toString(32)+l,i=":"+i+"R"+l,l=cs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=t5++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},a5={readContext:rn,useCallback:wv,useContext:rn,useEffect:Fd,useImperativeHandle:xv,useInsertionEffect:yv,useLayoutEffect:gv,useMemo:bv,useReducer:Rd,useRef:mv,useState:function(){return Rd(ds)},useDebugValue:Ld,useDeferredValue:function(r){var i=nn();return qv(i,Ht.memoizedState,r)},useTransition:function(){var r=Rd(ds)[0],i=nn().memoizedState;return[r,i]},useMutableSource:sv,useSyncExternalStore:uv,useId:Sv,unstable_isNewReconciler:!1},s5={readContext:rn,useCallback:wv,useContext:rn,useEffect:Fd,useImperativeHandle:xv,useInsertionEffect:yv,useLayoutEffect:gv,useMemo:bv,useReducer:Ad,useRef:mv,useState:function(){return Ad(ds)},useDebugValue:Ld,useDeferredValue:function(r){var i=nn();return Ht===null?i.memoizedState=r:qv(i,Ht.memoizedState,r)},useTransition:function(){var r=Ad(ds)[0],i=nn().memoizedState;return[r,i]},useMutableSource:sv,useSyncExternalStore:uv,useId:Sv,unstable_isNewReconciler:!1};function Sn(r,i){if(r&&r.defaultProps){i=ie({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function Dd(r,i,l,m){i=r.memoizedState,l=l(m,i),l=l==null?i:ie({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Hu={isMounted:function(r){return(r=r._reactInternals)?Et(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var m=Sr(),g=Vi(r),S=di(m,g);S.payload=i,l!=null&&(S.callback=l),i=Fi(r,S,g),i!==null&&(Mn(i,r,g,m),Au(i,r,g))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var m=Sr(),g=Vi(r),S=di(m,g);S.tag=1,S.payload=i,l!=null&&(S.callback=l),i=Fi(r,S,g),i!==null&&(Mn(i,r,g,m),Au(i,r,g))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=Sr(),m=Vi(r),g=di(l,m);g.tag=2,i!=null&&(g.callback=i),i=Fi(r,g,m),i!==null&&(Mn(i,r,m,l),Au(i,r,m))}};function Ev(r,i,l,m,g,S,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,S,R):i.prototype&&i.prototype.isPureReactComponent?!Za(l,m)||!Za(g,S):!0}function Iv(r,i,l){var m=!1,g=Pi,S=i.contextType;return typeof S=="object"&&S!==null?S=rn(S):(g=jr(i)?go:pr.current,m=i.contextTypes,S=(m=m!=null)?oa(r,g):Pi),i=new i(l,S),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Hu,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=S),i}function jv(r,i,l,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,m),i.state!==r&&Hu.enqueueReplaceState(i,i.state,null)}function Od(r,i,l,m){var g=r.stateNode;g.props=l,g.state=r.memoizedState,g.refs={},kd(r);var S=i.contextType;typeof S=="object"&&S!==null?g.context=rn(S):(S=jr(i)?go:pr.current,g.context=oa(r,S)),g.state=r.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(Dd(r,i,S,l),g.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Hu.enqueueReplaceState(g,g.state,null),Fu(r,l,g,m),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function _a(r,i){try{var l="",m=i;do l+=te(m),m=m.return;while(m);var g=l}catch(S){g=`
Error generating stack: `+S.message+`
`+S.stack}return{value:r,source:i,stack:g,digest:null}}function Vd(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function zd(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var u5=typeof WeakMap=="function"?WeakMap:Map;function Nv(r,i,l){l=di(-1,l),l.tag=3,l.payload={element:null};var m=i.value;return l.callback=function(){Qu||(Qu=!0,rp=m),zd(r,i)},l}function Tv(r,i,l){l=di(-1,l),l.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var g=i.value;l.payload=function(){return m(g)},l.callback=function(){zd(r,i)}}var S=r.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){zd(r,i),typeof m!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var R=i.stack;this.componentDidCatch(i.value,{componentStack:R!==null?R:""})}),l}function Pv(r,i,l){var m=r.pingCache;if(m===null){m=r.pingCache=new u5;var g=new Set;m.set(i,g)}else g=m.get(i),g===void 0&&(g=new Set,m.set(i,g));g.has(l)||(g.add(l),r=b5.bind(null,r,i,l),i.then(r,r))}function Rv(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Av(r,i,l,m,g){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=di(-1,1),i.tag=2,Fi(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var l5=M.ReactCurrentOwner,Nr=!1;function qr(r,i,l,m){i.child=r===null?tv(i,null,l,m):la(i,r.child,l,m)}function Fv(r,i,l,m,g){l=l.render;var S=i.ref;return da(i,g),m=Td(r,i,l,m,S,g),l=Pd(),r!==null&&!Nr?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,pi(r,i,g)):(yt&&l&&md(i),i.flags|=1,qr(r,i,m,g),i.child)}function Lv(r,i,l,m,g){if(r===null){var S=l.type;return typeof S=="function"&&!lp(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=S,Dv(r,i,S,m,g)):(r=rl(l.type,null,m,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(S=r.child,(r.lanes&g)===0){var R=S.memoizedProps;if(l=l.compare,l=l!==null?l:Za,l(R,m)&&r.ref===i.ref)return pi(r,i,g)}return i.flags|=1,r=Bi(S,m),r.ref=i.ref,r.return=i,i.child=r}function Dv(r,i,l,m,g){if(r!==null){var S=r.memoizedProps;if(Za(S,m)&&r.ref===i.ref)if(Nr=!1,i.pendingProps=m=S,(r.lanes&g)!==0)(r.flags&131072)!==0&&(Nr=!0);else return i.lanes=r.lanes,pi(r,i,g)}return Bd(r,i,l,m,g)}function Ov(r,i,l){var m=i.pendingProps,g=m.children,S=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(ma,Br),Br|=l;else{if((l&1073741824)===0)return r=S!==null?S.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,ct(ma,Br),Br|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:l,ct(ma,Br),Br|=m}else S!==null?(m=S.baseLanes|l,i.memoizedState=null):m=l,ct(ma,Br),Br|=m;return qr(r,i,g,l),i.child}function Vv(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Bd(r,i,l,m,g){var S=jr(l)?go:pr.current;return S=oa(i,S),da(i,g),l=Td(r,i,l,m,S,g),m=Pd(),r!==null&&!Nr?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~g,pi(r,i,g)):(yt&&m&&md(i),i.flags|=1,qr(r,i,l,g),i.child)}function zv(r,i,l,m,g){if(jr(l)){var S=!0;Mu(i)}else S=!1;if(da(i,g),i.stateNode===null)Wu(r,i),Iv(i,l,m),Od(i,l,m,g),m=!0;else if(r===null){var R=i.stateNode,W=i.memoizedProps;R.props=W;var ee=R.context,_e=l.contextType;typeof _e=="object"&&_e!==null?_e=rn(_e):(_e=jr(l)?go:pr.current,_e=oa(i,_e));var qe=l.getDerivedStateFromProps,Se=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function";Se||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W!==m||ee!==_e)&&jv(i,R,m,_e),Ai=!1;var we=i.memoizedState;R.state=we,Fu(i,m,R,g),ee=i.memoizedState,W!==m||we!==ee||Ir.current||Ai?(typeof qe=="function"&&(Dd(i,l,qe,m),ee=i.memoizedState),(W=Ai||Ev(i,l,W,m,we,ee,_e))?(Se||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(i.flags|=4194308)):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=ee),R.props=m,R.state=ee,R.context=_e,m=W):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{R=i.stateNode,nv(r,i),W=i.memoizedProps,_e=i.type===i.elementType?W:Sn(i.type,W),R.props=_e,Se=i.pendingProps,we=R.context,ee=l.contextType,typeof ee=="object"&&ee!==null?ee=rn(ee):(ee=jr(l)?go:pr.current,ee=oa(i,ee));var Fe=l.getDerivedStateFromProps;(qe=typeof Fe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W!==Se||we!==ee)&&jv(i,R,m,ee),Ai=!1,we=i.memoizedState,R.state=we,Fu(i,m,R,g);var De=i.memoizedState;W!==Se||we!==De||Ir.current||Ai?(typeof Fe=="function"&&(Dd(i,l,Fe,m),De=i.memoizedState),(_e=Ai||Ev(i,l,_e,m,we,De,ee)||!1)?(qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(m,De,ee),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(m,De,ee)),typeof R.componentDidUpdate=="function"&&(i.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof R.componentDidUpdate!="function"||W===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=De),R.props=m,R.state=De,R.context=ee,m=_e):(typeof R.componentDidUpdate!="function"||W===r.memoizedProps&&we===r.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&we===r.memoizedState||(i.flags|=1024),m=!1)}return Hd(r,i,l,m,S,g)}function Hd(r,i,l,m,g,S){Vv(r,i);var R=(i.flags&128)!==0;if(!m&&!R)return g&&Ug(i,l,!1),pi(r,i,S);m=i.stateNode,l5.current=i;var W=R&&typeof l.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&R?(i.child=la(i,r.child,null,S),i.child=la(i,null,W,S)):qr(r,i,W,S),i.memoizedState=m.state,g&&Ug(i,l,!0),i.child}function Bv(r){var i=r.stateNode;i.pendingContext?$g(r,i.pendingContext,i.pendingContext!==i.context):i.context&&$g(r,i.context,!1),Cd(r,i.containerInfo)}function Hv(r,i,l,m,g){return ua(),vd(g),i.flags|=256,qr(r,i,l,m),i.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Wd(r){return{baseLanes:r,cachePool:null,transitions:null}}function $v(r,i,l){var m=i.pendingProps,g=St.current,S=!1,R=(i.flags&128)!==0,W;if((W=R)||(W=r!==null&&r.memoizedState===null?!1:(g&2)!==0),W?(S=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),ct(St,g&1),r===null)return gd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(R=m.children,r=m.fallback,S?(m=i.mode,S=i.child,R={mode:"hidden",children:R},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=R):S=nl(R,m,0,null),r=Eo(r,m,l,null),S.return=i,r.return=i,S.sibling=r,i.child=S,i.child.memoizedState=Wd(l),i.memoizedState=$d,r):Ud(i,R));if(g=r.memoizedState,g!==null&&(W=g.dehydrated,W!==null))return c5(r,i,R,m,W,g,l);if(S){S=m.fallback,R=i.mode,g=r.child,W=g.sibling;var ee={mode:"hidden",children:m.children};return(R&1)===0&&i.child!==g?(m=i.child,m.childLanes=0,m.pendingProps=ee,i.deletions=null):(m=Bi(g,ee),m.subtreeFlags=g.subtreeFlags&14680064),W!==null?S=Bi(W,S):(S=Eo(S,R,l,null),S.flags|=2),S.return=i,m.return=i,m.sibling=S,i.child=m,m=S,S=i.child,R=r.child.memoizedState,R=R===null?Wd(l):{baseLanes:R.baseLanes|l,cachePool:null,transitions:R.transitions},S.memoizedState=R,S.childLanes=r.childLanes&~l,i.memoizedState=$d,m}return S=r.child,r=S.sibling,m=Bi(S,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=l),m.return=i,m.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=m,i.memoizedState=null,m}function Ud(r,i){return i=nl({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function $u(r,i,l,m){return m!==null&&vd(m),la(i,r.child,null,l),r=Ud(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function c5(r,i,l,m,g,S,R){if(l)return i.flags&256?(i.flags&=-257,m=Vd(Error(n(422))),$u(r,i,R,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(S=m.fallback,g=i.mode,m=nl({mode:"visible",children:m.children},g,0,null),S=Eo(S,g,R,null),S.flags|=2,m.return=i,S.return=i,m.sibling=S,i.child=m,(i.mode&1)!==0&&la(i,r.child,null,R),i.child.memoizedState=Wd(R),i.memoizedState=$d,S);if((i.mode&1)===0)return $u(r,i,R,null);if(g.data==="$!"){if(m=g.nextSibling&&g.nextSibling.dataset,m)var W=m.dgst;return m=W,S=Error(n(419)),m=Vd(S,m,void 0),$u(r,i,R,m)}if(W=(R&r.childLanes)!==0,Nr||W){if(m=Jt,m!==null){switch(R&-R){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(m.suspendedLanes|R))!==0?0:g,g!==0&&g!==S.retryLane&&(S.retryLane=g,ci(r,g),Mn(m,r,g,-1))}return up(),m=Vd(Error(n(421))),$u(r,i,R,m)}return g.data==="$?"?(i.flags|=128,i.child=r.child,i=q5.bind(null,r),g._reactRetry=i,null):(r=S.treeContext,zr=Ni(g.nextSibling),Vr=i,yt=!0,qn=null,r!==null&&(en[tn++]=ui,en[tn++]=li,en[tn++]=vo,ui=r.id,li=r.overflow,vo=i),i=Ud(i,m.children),i.flags|=4096,i)}function Wv(r,i,l){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),qd(r.return,i,l)}function Gd(r,i,l,m,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:l,tailMode:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=l,S.tailMode=g)}function Uv(r,i,l){var m=i.pendingProps,g=m.revealOrder,S=m.tail;if(qr(r,i,m.children,l),m=St.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wv(r,l,i);else if(r.tag===19)Wv(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(ct(St,m),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(l=i.child,g=null;l!==null;)r=l.alternate,r!==null&&Lu(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),Gd(i,!1,g,l,S);break;case"backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Lu(r)===null){i.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}Gd(i,!0,l,null,S);break;case"together":Gd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function pi(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),So|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,l=Bi(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Bi(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function d5(r,i,l){switch(i.tag){case 3:Bv(i),ua();break;case 5:av(i);break;case 1:jr(i.type)&&Mu(i);break;case 4:Cd(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,g=i.memoizedProps.value;ct(Pu,m._currentValue),m._currentValue=g;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(ct(St,St.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?$v(r,i,l):(ct(St,St.current&1),r=pi(r,i,l),r!==null?r.sibling:null);ct(St,St.current&1);break;case 19:if(m=(l&i.childLanes)!==0,(r.flags&128)!==0){if(m)return Uv(r,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ct(St,St.current),m)break;return null;case 22:case 23:return i.lanes=0,Ov(r,i,l)}return pi(r,i,l)}var Gv,Kd,Kv,Yv;Gv=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Kd=function(){},Kv=function(r,i,l,m){var g=r.memoizedProps;if(g!==m){r=i.stateNode,bo($n.current);var S=null;switch(l){case"input":g=Te(r,g),m=Te(r,m),S=[];break;case"select":g=ie({},g,{value:void 0}),m=ie({},m,{value:void 0}),S=[];break;case"textarea":g=qt(r,g),m=qt(r,m),S=[];break;default:typeof g.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Su)}Tt(l,m);var R;l=null;for(_e in g)if(!m.hasOwnProperty(_e)&&g.hasOwnProperty(_e)&&g[_e]!=null)if(_e==="style"){var W=g[_e];for(R in W)W.hasOwnProperty(R)&&(l||(l={}),l[R]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(a.hasOwnProperty(_e)?S||(S=[]):(S=S||[]).push(_e,null));for(_e in m){var ee=m[_e];if(W=g!=null?g[_e]:void 0,m.hasOwnProperty(_e)&&ee!==W&&(ee!=null||W!=null))if(_e==="style")if(W){for(R in W)!W.hasOwnProperty(R)||ee&&ee.hasOwnProperty(R)||(l||(l={}),l[R]="");for(R in ee)ee.hasOwnProperty(R)&&W[R]!==ee[R]&&(l||(l={}),l[R]=ee[R])}else l||(S||(S=[]),S.push(_e,l)),l=ee;else _e==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,W=W?W.__html:void 0,ee!=null&&W!==ee&&(S=S||[]).push(_e,ee)):_e==="children"?typeof ee!="string"&&typeof ee!="number"||(S=S||[]).push(_e,""+ee):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(a.hasOwnProperty(_e)?(ee!=null&&_e==="onScroll"&&ft("scroll",r),S||W===ee||(S=[])):(S=S||[]).push(_e,ee))}l&&(S=S||[]).push("style",l);var _e=S;(i.updateQueue=_e)&&(i.flags|=4)}},Yv=function(r,i,l,m){l!==m&&(i.flags|=4)};function _s(r,i){if(!yt)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function fr(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,m=0;if(i)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,m|=g.subtreeFlags&14680064,m|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,m|=g.subtreeFlags,m|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=m,r.childLanes=l,i}function p5(r,i,l){var m=i.pendingProps;switch(hd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(i),null;case 1:return jr(i.type)&&Cu(),fr(i),null;case 3:return m=i.stateNode,pa(),mt(Ir),mt(pr),Id(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(Nu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qn!==null&&(op(qn),qn=null))),Kd(r,i),fr(i),null;case 5:Md(i);var g=bo(us.current);if(l=i.type,r!==null&&i.stateNode!=null)Kv(r,i,l,m,g),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(n(166));return fr(i),null}if(r=bo($n.current),Nu(i)){m=i.stateNode,l=i.type;var S=i.memoizedProps;switch(m[Hn]=i,m[ns]=S,r=(i.mode&1)!==0,l){case"dialog":ft("cancel",m),ft("close",m);break;case"iframe":case"object":case"embed":ft("load",m);break;case"video":case"audio":for(g=0;g<es.length;g++)ft(es[g],m);break;case"source":ft("error",m);break;case"img":case"image":case"link":ft("error",m),ft("load",m);break;case"details":ft("toggle",m);break;case"input":Ae(m,S),ft("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},ft("invalid",m);break;case"textarea":ut(m,S),ft("invalid",m)}Tt(l,S),g=null;for(var R in S)if(S.hasOwnProperty(R)){var W=S[R];R==="children"?typeof W=="string"?m.textContent!==W&&(S.suppressHydrationWarning!==!0&&qu(m.textContent,W,r),g=["children",W]):typeof W=="number"&&m.textContent!==""+W&&(S.suppressHydrationWarning!==!0&&qu(m.textContent,W,r),g=["children",""+W]):a.hasOwnProperty(R)&&W!=null&&R==="onScroll"&&ft("scroll",m)}switch(l){case"input":Re(m),st(m,S,!0);break;case"textarea":Re(m),tr(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=Su)}m=g,i.updateQueue=m,m!==null&&(i.flags|=4)}else{R=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Rt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=R.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=R.createElement(l,{is:m.is}):(r=R.createElement(l),l==="select"&&(R=r,m.multiple?R.multiple=!0:m.size&&(R.size=m.size))):r=R.createElementNS(r,l),r[Hn]=i,r[ns]=m,Gv(r,i,!1,!1),i.stateNode=r;e:{switch(R=dn(l,m),l){case"dialog":ft("cancel",r),ft("close",r),g=m;break;case"iframe":case"object":case"embed":ft("load",r),g=m;break;case"video":case"audio":for(g=0;g<es.length;g++)ft(es[g],r);g=m;break;case"source":ft("error",r),g=m;break;case"img":case"image":case"link":ft("error",r),ft("load",r),g=m;break;case"details":ft("toggle",r),g=m;break;case"input":Ae(r,m),g=Te(r,m),ft("invalid",r);break;case"option":g=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},g=ie({},m,{value:void 0}),ft("invalid",r);break;case"textarea":ut(r,m),g=qt(r,m),ft("invalid",r);break;default:g=m}Tt(l,g),W=g;for(S in W)if(W.hasOwnProperty(S)){var ee=W[S];S==="style"?Qe(r,ee):S==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Lr(r,ee)):S==="children"?typeof ee=="string"?(l!=="textarea"||ee!=="")&&Nt(r,ee):typeof ee=="number"&&Nt(r,""+ee):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?ee!=null&&S==="onScroll"&&ft("scroll",r):ee!=null&&b(r,S,ee,R))}switch(l){case"input":Re(r),st(r,m,!1);break;case"textarea":Re(r),tr(r);break;case"option":m.value!=null&&r.setAttribute("value",""+ue(m.value));break;case"select":r.multiple=!!m.multiple,S=m.value,S!=null?bt(r,!!m.multiple,S,!1):m.defaultValue!=null&&bt(r,!!m.multiple,m.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=Su)}switch(l){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return fr(i),null;case 6:if(r&&i.stateNode!=null)Yv(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(n(166));if(l=bo(us.current),bo($n.current),Nu(i)){if(m=i.stateNode,l=i.memoizedProps,m[Hn]=i,(S=m.nodeValue!==l)&&(r=Vr,r!==null))switch(r.tag){case 3:qu(m.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&qu(m.nodeValue,l,(r.mode&1)!==0)}S&&(i.flags|=4)}else m=(l.nodeType===9?l:l.ownerDocument).createTextNode(m),m[Hn]=i,i.stateNode=m}return fr(i),null;case 13:if(mt(St),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(yt&&zr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Zg(),ua(),i.flags|=98560,S=!1;else if(S=Nu(i),m!==null&&m.dehydrated!==null){if(r===null){if(!S)throw Error(n(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Hn]=i}else ua(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fr(i),S=!1}else qn!==null&&(op(qn),qn=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(St.current&1)!==0?$t===0&&($t=3):up())),i.updateQueue!==null&&(i.flags|=4),fr(i),null);case 4:return pa(),Kd(r,i),r===null&&ts(i.stateNode.containerInfo),fr(i),null;case 10:return bd(i.type._context),fr(i),null;case 17:return jr(i.type)&&Cu(),fr(i),null;case 19:if(mt(St),S=i.memoizedState,S===null)return fr(i),null;if(m=(i.flags&128)!==0,R=S.rendering,R===null)if(m)_s(S,!1);else{if($t!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(R=Lu(r),R!==null){for(i.flags|=128,_s(S,!1),m=R.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=l,l=i.child;l!==null;)S=l,r=m,S.flags&=14680066,R=S.alternate,R===null?(S.childLanes=0,S.lanes=r,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=R.childLanes,S.lanes=R.lanes,S.child=R.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=R.memoizedProps,S.memoizedState=R.memoizedState,S.updateQueue=R.updateQueue,S.type=R.type,r=R.dependencies,S.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return ct(St,St.current&1|2),i.child}r=r.sibling}S.tail!==null&&pt()>ha&&(i.flags|=128,m=!0,_s(S,!1),i.lanes=4194304)}else{if(!m)if(r=Lu(R),r!==null){if(i.flags|=128,m=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),_s(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!yt)return fr(i),null}else 2*pt()-S.renderingStartTime>ha&&l!==1073741824&&(i.flags|=128,m=!0,_s(S,!1),i.lanes=4194304);S.isBackwards?(R.sibling=i.child,i.child=R):(l=S.last,l!==null?l.sibling=R:i.child=R,S.last=R)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=pt(),i.sibling=null,l=St.current,ct(St,m?l&1|2:l&1),i):(fr(i),null);case 22:case 23:return sp(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(Br&1073741824)!==0&&(fr(i),i.subtreeFlags&6&&(i.flags|=8192)):fr(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function _5(r,i){switch(hd(i),i.tag){case 1:return jr(i.type)&&Cu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return pa(),mt(Ir),mt(pr),Id(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Md(i),null;case 13:if(mt(St),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ua()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return mt(St),null;case 4:return pa(),null;case 10:return bd(i.type._context),null;case 22:case 23:return sp(),null;case 24:return null;default:return null}}var Uu=!1,mr=!1,f5=typeof WeakSet=="function"?WeakSet:Set,Le=null;function fa(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(m){jt(r,i,m)}else l.current=null}function Yd(r,i,l){try{l()}catch(m){jt(r,i,m)}}var Qv=!1;function m5(r,i){if(sd=br,r=Eg(),Jc(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var m=l.getSelection&&l.getSelection();if(m&&m.rangeCount!==0){l=m.anchorNode;var g=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var R=0,W=-1,ee=-1,_e=0,qe=0,Se=r,we=null;t:for(;;){for(var Fe;Se!==l||g!==0&&Se.nodeType!==3||(W=R+g),Se!==S||m!==0&&Se.nodeType!==3||(ee=R+m),Se.nodeType===3&&(R+=Se.nodeValue.length),(Fe=Se.firstChild)!==null;)we=Se,Se=Fe;for(;;){if(Se===r)break t;if(we===l&&++_e===g&&(W=R),we===S&&++qe===m&&(ee=R),(Fe=Se.nextSibling)!==null)break;Se=we,we=Se.parentNode}Se=Fe}l=W===-1||ee===-1?null:{start:W,end:ee}}else l=null}l=l||{start:0,end:0}}else l=null;for(ud={focusedElem:r,selectionRange:l},br=!1,Le=i;Le!==null;)if(i=Le,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Le=r;else for(;Le!==null;){i=Le;try{var De=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Ve=De.memoizedProps,Pt=De.memoizedState,ae=i.stateNode,re=ae.getSnapshotBeforeUpdate(i.elementType===i.type?Ve:Sn(i.type,Ve),Pt);ae.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var le=i.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){jt(i,i.return,Me)}if(r=i.sibling,r!==null){r.return=i.return,Le=r;break}Le=i.return}return De=Qv,Qv=!1,De}function fs(r,i,l){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var g=m=m.next;do{if((g.tag&r)===r){var S=g.destroy;g.destroy=void 0,S!==void 0&&Yd(i,l,S)}g=g.next}while(g!==m)}}function Gu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var m=l.create;l.destroy=m()}l=l.next}while(l!==i)}}function Qd(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Xv(r){var i=r.alternate;i!==null&&(r.alternate=null,Xv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Hn],delete i[ns],delete i[pd],delete i[XE],delete i[ZE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zv(r){return r.tag===5||r.tag===3||r.tag===4}function Jv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Zv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xd(r,i,l){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Su));else if(m!==4&&(r=r.child,r!==null))for(Xd(r,i,l),r=r.sibling;r!==null;)Xd(r,i,l),r=r.sibling}function Zd(r,i,l){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Zd(r,i,l),r=r.sibling;r!==null;)Zd(r,i,l),r=r.sibling}var ar=null,kn=!1;function Li(r,i,l){for(l=l.child;l!==null;)ex(r,i,l),l=l.sibling}function ex(r,i,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(On,l)}catch{}switch(l.tag){case 5:mr||fa(l,i);case 6:var m=ar,g=kn;ar=null,Li(r,i,l),ar=m,kn=g,ar!==null&&(kn?(r=ar,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):ar.removeChild(l.stateNode));break;case 18:ar!==null&&(kn?(r=ar,l=l.stateNode,r.nodeType===8?dd(r.parentNode,l):r.nodeType===1&&dd(r,l),_o(r)):dd(ar,l.stateNode));break;case 4:m=ar,g=kn,ar=l.stateNode.containerInfo,kn=!0,Li(r,i,l),ar=m,kn=g;break;case 0:case 11:case 14:case 15:if(!mr&&(m=l.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){g=m=m.next;do{var S=g,R=S.destroy;S=S.tag,R!==void 0&&((S&2)!==0||(S&4)!==0)&&Yd(l,i,R),g=g.next}while(g!==m)}Li(r,i,l);break;case 1:if(!mr&&(fa(l,i),m=l.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=l.memoizedProps,m.state=l.memoizedState,m.componentWillUnmount()}catch(W){jt(l,i,W)}Li(r,i,l);break;case 21:Li(r,i,l);break;case 22:l.mode&1?(mr=(m=mr)||l.memoizedState!==null,Li(r,i,l),mr=m):Li(r,i,l);break;default:Li(r,i,l)}}function tx(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new f5),i.forEach(function(m){var g=S5.bind(null,r,m);l.has(m)||(l.add(m),m.then(g,g))})}}function Cn(r,i){var l=i.deletions;if(l!==null)for(var m=0;m<l.length;m++){var g=l[m];try{var S=r,R=i,W=R;e:for(;W!==null;){switch(W.tag){case 5:ar=W.stateNode,kn=!1;break e;case 3:ar=W.stateNode.containerInfo,kn=!0;break e;case 4:ar=W.stateNode.containerInfo,kn=!0;break e}W=W.return}if(ar===null)throw Error(n(160));ex(S,R,g),ar=null,kn=!1;var ee=g.alternate;ee!==null&&(ee.return=null),g.return=null}catch(_e){jt(g,i,_e)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rx(i,r),i=i.sibling}function rx(r,i){var l=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Cn(i,r),Un(r),m&4){try{fs(3,r,r.return),Gu(3,r)}catch(Ve){jt(r,r.return,Ve)}try{fs(5,r,r.return)}catch(Ve){jt(r,r.return,Ve)}}break;case 1:Cn(i,r),Un(r),m&512&&l!==null&&fa(l,l.return);break;case 5:if(Cn(i,r),Un(r),m&512&&l!==null&&fa(l,l.return),r.flags&32){var g=r.stateNode;try{Nt(g,"")}catch(Ve){jt(r,r.return,Ve)}}if(m&4&&(g=r.stateNode,g!=null)){var S=r.memoizedProps,R=l!==null?l.memoizedProps:S,W=r.type,ee=r.updateQueue;if(r.updateQueue=null,ee!==null)try{W==="input"&&S.type==="radio"&&S.name!=null&&We(g,S),dn(W,R);var _e=dn(W,S);for(R=0;R<ee.length;R+=2){var qe=ee[R],Se=ee[R+1];qe==="style"?Qe(g,Se):qe==="dangerouslySetInnerHTML"?Lr(g,Se):qe==="children"?Nt(g,Se):b(g,qe,Se,_e)}switch(W){case"input":Be(g,S);break;case"textarea":Cr(g,S);break;case"select":var we=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!S.multiple;var Fe=S.value;Fe!=null?bt(g,!!S.multiple,Fe,!1):we!==!!S.multiple&&(S.defaultValue!=null?bt(g,!!S.multiple,S.defaultValue,!0):bt(g,!!S.multiple,S.multiple?[]:"",!1))}g[ns]=S}catch(Ve){jt(r,r.return,Ve)}}break;case 6:if(Cn(i,r),Un(r),m&4){if(r.stateNode===null)throw Error(n(162));g=r.stateNode,S=r.memoizedProps;try{g.nodeValue=S}catch(Ve){jt(r,r.return,Ve)}}break;case 3:if(Cn(i,r),Un(r),m&4&&l!==null&&l.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(Ve){jt(r,r.return,Ve)}break;case 4:Cn(i,r),Un(r);break;case 13:Cn(i,r),Un(r),g=r.child,g.flags&8192&&(S=g.memoizedState!==null,g.stateNode.isHidden=S,!S||g.alternate!==null&&g.alternate.memoizedState!==null||(tp=pt())),m&4&&tx(r);break;case 22:if(qe=l!==null&&l.memoizedState!==null,r.mode&1?(mr=(_e=mr)||qe,Cn(i,r),mr=_e):Cn(i,r),Un(r),m&8192){if(_e=r.memoizedState!==null,(r.stateNode.isHidden=_e)&&!qe&&(r.mode&1)!==0)for(Le=r,qe=r.child;qe!==null;){for(Se=Le=qe;Le!==null;){switch(we=Le,Fe=we.child,we.tag){case 0:case 11:case 14:case 15:fs(4,we,we.return);break;case 1:fa(we,we.return);var De=we.stateNode;if(typeof De.componentWillUnmount=="function"){m=we,l=we.return;try{i=m,De.props=i.memoizedProps,De.state=i.memoizedState,De.componentWillUnmount()}catch(Ve){jt(m,l,Ve)}}break;case 5:fa(we,we.return);break;case 22:if(we.memoizedState!==null){ox(Se);continue}}Fe!==null?(Fe.return=we,Le=Fe):ox(Se)}qe=qe.sibling}e:for(qe=null,Se=r;;){if(Se.tag===5){if(qe===null){qe=Se;try{g=Se.stateNode,_e?(S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(W=Se.stateNode,ee=Se.memoizedProps.style,R=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,W.style.display=Ut("display",R))}catch(Ve){jt(r,r.return,Ve)}}}else if(Se.tag===6){if(qe===null)try{Se.stateNode.nodeValue=_e?"":Se.memoizedProps}catch(Ve){jt(r,r.return,Ve)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===r)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===r)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===r)break e;qe===Se&&(qe=null),Se=Se.return}qe===Se&&(qe=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:Cn(i,r),Un(r),m&4&&tx(r);break;case 21:break;default:Cn(i,r),Un(r)}}function Un(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Zv(l)){var m=l;break e}l=l.return}throw Error(n(160))}switch(m.tag){case 5:var g=m.stateNode;m.flags&32&&(Nt(g,""),m.flags&=-33);var S=Jv(r);Zd(r,S,g);break;case 3:case 4:var R=m.stateNode.containerInfo,W=Jv(r);Xd(r,W,R);break;default:throw Error(n(161))}}catch(ee){jt(r,r.return,ee)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function h5(r,i,l){Le=r,nx(r)}function nx(r,i,l){for(var m=(r.mode&1)!==0;Le!==null;){var g=Le,S=g.child;if(g.tag===22&&m){var R=g.memoizedState!==null||Uu;if(!R){var W=g.alternate,ee=W!==null&&W.memoizedState!==null||mr;W=Uu;var _e=mr;if(Uu=R,(mr=ee)&&!_e)for(Le=g;Le!==null;)R=Le,ee=R.child,R.tag===22&&R.memoizedState!==null?ax(g):ee!==null?(ee.return=R,Le=ee):ax(g);for(;S!==null;)Le=S,nx(S),S=S.sibling;Le=g,Uu=W,mr=_e}ix(r)}else(g.subtreeFlags&8772)!==0&&S!==null?(S.return=g,Le=S):ix(r)}}function ix(r){for(;Le!==null;){var i=Le;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:mr||Gu(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!mr)if(l===null)m.componentDidMount();else{var g=i.elementType===i.type?l.memoizedProps:Sn(i.type,l.memoizedProps);m.componentDidUpdate(g,l.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&ov(i,S,m);break;case 3:var R=i.updateQueue;if(R!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}ov(i,R,l)}break;case 5:var W=i.stateNode;if(l===null&&i.flags&4){l=W;var ee=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&l.focus();break;case"img":ee.src&&(l.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var _e=i.alternate;if(_e!==null){var qe=_e.memoizedState;if(qe!==null){var Se=qe.dehydrated;Se!==null&&_o(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mr||i.flags&512&&Qd(i)}catch(we){jt(i,i.return,we)}}if(i===r){Le=null;break}if(l=i.sibling,l!==null){l.return=i.return,Le=l;break}Le=i.return}}function ox(r){for(;Le!==null;){var i=Le;if(i===r){Le=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Le=l;break}Le=i.return}}function ax(r){for(;Le!==null;){var i=Le;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Gu(4,i)}catch(ee){jt(i,l,ee)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var g=i.return;try{m.componentDidMount()}catch(ee){jt(i,g,ee)}}var S=i.return;try{Qd(i)}catch(ee){jt(i,S,ee)}break;case 5:var R=i.return;try{Qd(i)}catch(ee){jt(i,R,ee)}}}catch(ee){jt(i,i.return,ee)}if(i===r){Le=null;break}var W=i.sibling;if(W!==null){W.return=i.return,Le=W;break}Le=i.return}}var y5=Math.ceil,Ku=M.ReactCurrentDispatcher,Jd=M.ReactCurrentOwner,on=M.ReactCurrentBatchConfig,rt=0,Jt=null,Ft=null,sr=0,Br=0,ma=Ti(0),$t=0,ms=null,So=0,Yu=0,ep=0,hs=null,Tr=null,tp=0,ha=1/0,_i=null,Qu=!1,rp=null,Di=null,Xu=!1,Oi=null,Zu=0,ys=0,np=null,Ju=-1,el=0;function Sr(){return(rt&6)!==0?pt():Ju!==-1?Ju:Ju=pt()}function Vi(r){return(r.mode&1)===0?1:(rt&2)!==0&&sr!==0?sr&-sr:e5.transition!==null?(el===0&&(el=Ci()),el):(r=Je,r!==0||(r=window.event,r=r===void 0?16:_u(r.type)),r)}function Mn(r,i,l,m){if(50<ys)throw ys=0,np=null,Error(n(185));zt(r,l,m),((rt&2)===0||r!==Jt)&&(r===Jt&&((rt&2)===0&&(Yu|=l),$t===4&&zi(r,sr)),Pr(r,m),l===1&&rt===0&&(i.mode&1)===0&&(ha=pt()+500,Eu&&Ri()))}function Pr(r,i){var l=r.callbackNode;io(r,i);var m=no(r,r===Jt?sr:0);if(m===0)l!==null&&Si(l),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(l!=null&&Si(l),i===1)r.tag===0?JE(ux.bind(null,r)):Gg(ux.bind(null,r)),YE(function(){(rt&6)===0&&Ri()}),l=null;else{switch(ao(m)){case 1:l=_n;break;case 4:l=fn;break;case 16:l=mn;break;case 536870912:l=Xr;break;default:l=mn}l=hx(l,sx.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function sx(r,i){if(Ju=-1,el=0,(rt&6)!==0)throw Error(n(327));var l=r.callbackNode;if(ya()&&r.callbackNode!==l)return null;var m=no(r,r===Jt?sr:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=tl(r,m);else{i=m;var g=rt;rt|=2;var S=cx();(Jt!==r||sr!==i)&&(_i=null,ha=pt()+500,Co(r,i));do try{x5();break}catch(W){lx(r,W)}while(!0);wd(),Ku.current=S,rt=g,Ft!==null?i=0:(Jt=null,sr=0,i=$t)}if(i!==0){if(i===2&&(g=Vn(r),g!==0&&(m=g,i=ip(r,g))),i===1)throw l=ms,Co(r,0),zi(r,m),Pr(r,pt()),l;if(i===6)zi(r,m);else{if(g=r.current.alternate,(m&30)===0&&!g5(g)&&(i=tl(r,m),i===2&&(S=Vn(r),S!==0&&(m=S,i=ip(r,S))),i===1))throw l=ms,Co(r,0),zi(r,m),Pr(r,pt()),l;switch(r.finishedWork=g,r.finishedLanes=m,i){case 0:case 1:throw Error(n(345));case 2:Mo(r,Tr,_i);break;case 3:if(zi(r,m),(m&130023424)===m&&(i=tp+500-pt(),10<i)){if(no(r,0)!==0)break;if(g=r.suspendedLanes,(g&m)!==m){Sr(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=cd(Mo.bind(null,r,Tr,_i),i);break}Mo(r,Tr,_i);break;case 4:if(zi(r,m),(m&4194240)===m)break;for(i=r.eventTimes,g=-1;0<m;){var R=31-wr(m);S=1<<R,R=i[R],R>g&&(g=R),m&=~S}if(m=g,m=pt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*y5(m/1960))-m,10<m){r.timeoutHandle=cd(Mo.bind(null,r,Tr,_i),m);break}Mo(r,Tr,_i);break;case 5:Mo(r,Tr,_i);break;default:throw Error(n(329))}}}return Pr(r,pt()),r.callbackNode===l?sx.bind(null,r):null}function ip(r,i){var l=hs;return r.current.memoizedState.isDehydrated&&(Co(r,i).flags|=256),r=tl(r,i),r!==2&&(i=Tr,Tr=l,i!==null&&op(i)),r}function op(r){Tr===null?Tr=r:Tr.push.apply(Tr,r)}function g5(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var m=0;m<l.length;m++){var g=l[m],S=g.getSnapshot;g=g.value;try{if(!bn(S(),g))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zi(r,i){for(i&=~ep,i&=~Yu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-wr(i),m=1<<l;r[l]=-1,i&=~m}}function ux(r){if((rt&6)!==0)throw Error(n(327));ya();var i=no(r,0);if((i&1)===0)return Pr(r,pt()),null;var l=tl(r,i);if(r.tag!==0&&l===2){var m=Vn(r);m!==0&&(i=m,l=ip(r,m))}if(l===1)throw l=ms,Co(r,0),zi(r,i),Pr(r,pt()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Mo(r,Tr,_i),Pr(r,pt()),null}function ap(r,i){var l=rt;rt|=1;try{return r(i)}finally{rt=l,rt===0&&(ha=pt()+500,Eu&&Ri())}}function ko(r){Oi!==null&&Oi.tag===0&&(rt&6)===0&&ya();var i=rt;rt|=1;var l=on.transition,m=Je;try{if(on.transition=null,Je=1,r)return r()}finally{Je=m,on.transition=l,rt=i,(rt&6)===0&&Ri()}}function sp(){Br=ma.current,mt(ma)}function Co(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,KE(l)),Ft!==null)for(l=Ft.return;l!==null;){var m=l;switch(hd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Cu();break;case 3:pa(),mt(Ir),mt(pr),Id();break;case 5:Md(m);break;case 4:pa();break;case 13:mt(St);break;case 19:mt(St);break;case 10:bd(m.type._context);break;case 22:case 23:sp()}l=l.return}if(Jt=r,Ft=r=Bi(r.current,null),sr=Br=i,$t=0,ms=null,ep=Yu=So=0,Tr=hs=null,wo!==null){for(i=0;i<wo.length;i++)if(l=wo[i],m=l.interleaved,m!==null){l.interleaved=null;var g=m.next,S=l.pending;if(S!==null){var R=S.next;S.next=g,m.next=R}l.pending=m}wo=null}return r}function lx(r,i){do{var l=Ft;try{if(wd(),Du.current=Bu,Ou){for(var m=kt.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}Ou=!1}if(qo=0,Zt=Ht=kt=null,ls=!1,cs=0,Jd.current=null,l===null||l.return===null){$t=1,ms=i,Ft=null;break}e:{var S=r,R=l.return,W=l,ee=i;if(i=sr,W.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var _e=ee,qe=W,Se=qe.tag;if((qe.mode&1)===0&&(Se===0||Se===11||Se===15)){var we=qe.alternate;we?(qe.updateQueue=we.updateQueue,qe.memoizedState=we.memoizedState,qe.lanes=we.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Fe=Rv(R);if(Fe!==null){Fe.flags&=-257,Av(Fe,R,W,S,i),Fe.mode&1&&Pv(S,_e,i),i=Fe,ee=_e;var De=i.updateQueue;if(De===null){var Ve=new Set;Ve.add(ee),i.updateQueue=Ve}else De.add(ee);break e}else{if((i&1)===0){Pv(S,_e,i),up();break e}ee=Error(n(426))}}else if(yt&&W.mode&1){var Pt=Rv(R);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Av(Pt,R,W,S,i),vd(_a(ee,W));break e}}S=ee=_a(ee,W),$t!==4&&($t=2),hs===null?hs=[S]:hs.push(S),S=R;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var ae=Nv(S,ee,i);iv(S,ae);break e;case 1:W=ee;var re=S.type,le=S.stateNode;if((S.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Di===null||!Di.has(le)))){S.flags|=65536,i&=-i,S.lanes|=i;var Me=Tv(S,W,i);iv(S,Me);break e}}S=S.return}while(S!==null)}px(l)}catch(ze){i=ze,Ft===l&&l!==null&&(Ft=l=l.return);continue}break}while(!0)}function cx(){var r=Ku.current;return Ku.current=Bu,r===null?Bu:r}function up(){($t===0||$t===3||$t===2)&&($t=4),Jt===null||(So&268435455)===0&&(Yu&268435455)===0||zi(Jt,sr)}function tl(r,i){var l=rt;rt|=2;var m=cx();(Jt!==r||sr!==i)&&(_i=null,Co(r,i));do try{v5();break}catch(g){lx(r,g)}while(!0);if(wd(),rt=l,Ku.current=m,Ft!==null)throw Error(n(261));return Jt=null,sr=0,$t}function v5(){for(;Ft!==null;)dx(Ft)}function x5(){for(;Ft!==null&&!ro();)dx(Ft)}function dx(r){var i=mx(r.alternate,r,Br);r.memoizedProps=r.pendingProps,i===null?px(r):Ft=i,Jd.current=null}function px(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=p5(l,i,Br),l!==null){Ft=l;return}}else{if(l=_5(l,i),l!==null){l.flags&=32767,Ft=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{$t=6,Ft=null;return}}if(i=i.sibling,i!==null){Ft=i;return}Ft=i=r}while(i!==null);$t===0&&($t=5)}function Mo(r,i,l){var m=Je,g=on.transition;try{on.transition=null,Je=1,w5(r,i,l,m)}finally{on.transition=g,Je=m}return null}function w5(r,i,l,m){do ya();while(Oi!==null);if((rt&6)!==0)throw Error(n(327));l=r.finishedWork;var g=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var S=l.lanes|l.childLanes;if(Zr(r,S),r===Jt&&(Ft=Jt=null,sr=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,hx(mn,function(){return ya(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=on.transition,on.transition=null;var R=Je;Je=1;var W=rt;rt|=4,Jd.current=null,m5(r,l),rx(l,r),zE(ud),br=!!sd,ud=sd=null,r.current=l,h5(l),ti(),rt=W,Je=R,on.transition=S}else r.current=l;if(Xu&&(Xu=!1,Oi=r,Zu=g),S=r.pendingLanes,S===0&&(Di=null),Ho(l.stateNode),Pr(r,pt()),i!==null)for(m=r.onRecoverableError,l=0;l<i.length;l++)g=i[l],m(g.value,{componentStack:g.stack,digest:g.digest});if(Qu)throw Qu=!1,r=rp,rp=null,r;return(Zu&1)!==0&&r.tag!==0&&ya(),S=r.pendingLanes,(S&1)!==0?r===np?ys++:(ys=0,np=r):ys=0,Ri(),null}function ya(){if(Oi!==null){var r=ao(Zu),i=on.transition,l=Je;try{if(on.transition=null,Je=16>r?16:r,Oi===null)var m=!1;else{if(r=Oi,Oi=null,Zu=0,(rt&6)!==0)throw Error(n(331));var g=rt;for(rt|=4,Le=r.current;Le!==null;){var S=Le,R=S.child;if((Le.flags&16)!==0){var W=S.deletions;if(W!==null){for(var ee=0;ee<W.length;ee++){var _e=W[ee];for(Le=_e;Le!==null;){var qe=Le;switch(qe.tag){case 0:case 11:case 15:fs(8,qe,S)}var Se=qe.child;if(Se!==null)Se.return=qe,Le=Se;else for(;Le!==null;){qe=Le;var we=qe.sibling,Fe=qe.return;if(Xv(qe),qe===_e){Le=null;break}if(we!==null){we.return=Fe,Le=we;break}Le=Fe}}}var De=S.alternate;if(De!==null){var Ve=De.child;if(Ve!==null){De.child=null;do{var Pt=Ve.sibling;Ve.sibling=null,Ve=Pt}while(Ve!==null)}}Le=S}}if((S.subtreeFlags&2064)!==0&&R!==null)R.return=S,Le=R;else e:for(;Le!==null;){if(S=Le,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:fs(9,S,S.return)}var ae=S.sibling;if(ae!==null){ae.return=S.return,Le=ae;break e}Le=S.return}}var re=r.current;for(Le=re;Le!==null;){R=Le;var le=R.child;if((R.subtreeFlags&2064)!==0&&le!==null)le.return=R,Le=le;else e:for(R=re;Le!==null;){if(W=Le,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Gu(9,W)}}catch(ze){jt(W,W.return,ze)}if(W===R){Le=null;break e}var Me=W.sibling;if(Me!==null){Me.return=W.return,Le=Me;break e}Le=W.return}}if(rt=g,Ri(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(On,r)}catch{}m=!0}return m}finally{Je=l,on.transition=i}}return!1}function _x(r,i,l){i=_a(l,i),i=Nv(r,i,1),r=Fi(r,i,1),i=Sr(),r!==null&&(zt(r,1,i),Pr(r,i))}function jt(r,i,l){if(r.tag===3)_x(r,r,l);else for(;i!==null;){if(i.tag===3){_x(i,r,l);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Di===null||!Di.has(m))){r=_a(l,r),r=Tv(i,r,1),i=Fi(i,r,1),r=Sr(),i!==null&&(zt(i,1,r),Pr(i,r));break}}i=i.return}}function b5(r,i,l){var m=r.pingCache;m!==null&&m.delete(i),i=Sr(),r.pingedLanes|=r.suspendedLanes&l,Jt===r&&(sr&l)===l&&($t===4||$t===3&&(sr&130023424)===sr&&500>pt()-tp?Co(r,0):ep|=l),Pr(r,i)}function fx(r,i){i===0&&((r.mode&1)===0?i=1:(i=ki,ki<<=1,(ki&130023424)===0&&(ki=4194304)));var l=Sr();r=ci(r,i),r!==null&&(zt(r,i,l),Pr(r,l))}function q5(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),fx(r,l)}function S5(r,i){var l=0;switch(r.tag){case 13:var m=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(i),fx(r,l)}var mx;mx=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||Ir.current)Nr=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return Nr=!1,d5(r,i,l);Nr=(r.flags&131072)!==0}else Nr=!1,yt&&(i.flags&1048576)!==0&&Kg(i,ju,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Wu(r,i),r=i.pendingProps;var g=oa(i,pr.current);da(i,l),g=Td(null,i,m,r,g,l);var S=Pd();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,jr(m)?(S=!0,Mu(i)):S=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,kd(i),g.updater=Hu,i.stateNode=g,g._reactInternals=i,Od(i,m,r,l),i=Hd(null,i,m,!0,S,l)):(i.tag=0,yt&&S&&md(i),qr(null,i,g,l),i=i.child),i;case 16:m=i.elementType;e:{switch(Wu(r,i),r=i.pendingProps,g=m._init,m=g(m._payload),i.type=m,g=i.tag=C5(m),r=Sn(m,r),g){case 0:i=Bd(null,i,m,r,l);break e;case 1:i=zv(null,i,m,r,l);break e;case 11:i=Fv(null,i,m,r,l);break e;case 14:i=Lv(null,i,m,Sn(m.type,r),l);break e}throw Error(n(306,m,""))}return i;case 0:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Sn(m,g),Bd(r,i,m,g,l);case 1:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Sn(m,g),zv(r,i,m,g,l);case 3:e:{if(Bv(i),r===null)throw Error(n(387));m=i.pendingProps,S=i.memoizedState,g=S.element,nv(r,i),Fu(i,m,null,l);var R=i.memoizedState;if(m=R.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){g=_a(Error(n(423)),i),i=Hv(r,i,m,l,g);break e}else if(m!==g){g=_a(Error(n(424)),i),i=Hv(r,i,m,l,g);break e}else for(zr=Ni(i.stateNode.containerInfo.firstChild),Vr=i,yt=!0,qn=null,l=tv(i,null,m,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ua(),m===g){i=pi(r,i,l);break e}qr(r,i,m,l)}i=i.child}return i;case 5:return av(i),r===null&&gd(i),m=i.type,g=i.pendingProps,S=r!==null?r.memoizedProps:null,R=g.children,ld(m,g)?R=null:S!==null&&ld(m,S)&&(i.flags|=32),Vv(r,i),qr(r,i,R,l),i.child;case 6:return r===null&&gd(i),null;case 13:return $v(r,i,l);case 4:return Cd(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=la(i,null,m,l):qr(r,i,m,l),i.child;case 11:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Sn(m,g),Fv(r,i,m,g,l);case 7:return qr(r,i,i.pendingProps,l),i.child;case 8:return qr(r,i,i.pendingProps.children,l),i.child;case 12:return qr(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(m=i.type._context,g=i.pendingProps,S=i.memoizedProps,R=g.value,ct(Pu,m._currentValue),m._currentValue=R,S!==null)if(bn(S.value,R)){if(S.children===g.children&&!Ir.current){i=pi(r,i,l);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var W=S.dependencies;if(W!==null){R=S.child;for(var ee=W.firstContext;ee!==null;){if(ee.context===m){if(S.tag===1){ee=di(-1,l&-l),ee.tag=2;var _e=S.updateQueue;if(_e!==null){_e=_e.shared;var qe=_e.pending;qe===null?ee.next=ee:(ee.next=qe.next,qe.next=ee),_e.pending=ee}}S.lanes|=l,ee=S.alternate,ee!==null&&(ee.lanes|=l),qd(S.return,l,i),W.lanes|=l;break}ee=ee.next}}else if(S.tag===10)R=S.type===i.type?null:S.child;else if(S.tag===18){if(R=S.return,R===null)throw Error(n(341));R.lanes|=l,W=R.alternate,W!==null&&(W.lanes|=l),qd(R,l,i),R=S.sibling}else R=S.child;if(R!==null)R.return=S;else for(R=S;R!==null;){if(R===i){R=null;break}if(S=R.sibling,S!==null){S.return=R.return,R=S;break}R=R.return}S=R}qr(r,i,g.children,l),i=i.child}return i;case 9:return g=i.type,m=i.pendingProps.children,da(i,l),g=rn(g),m=m(g),i.flags|=1,qr(r,i,m,l),i.child;case 14:return m=i.type,g=Sn(m,i.pendingProps),g=Sn(m.type,g),Lv(r,i,m,g,l);case 15:return Dv(r,i,i.type,i.pendingProps,l);case 17:return m=i.type,g=i.pendingProps,g=i.elementType===m?g:Sn(m,g),Wu(r,i),i.tag=1,jr(m)?(r=!0,Mu(i)):r=!1,da(i,l),Iv(i,m,g),Od(i,m,g,l),Hd(null,i,m,!0,r,l);case 19:return Uv(r,i,l);case 22:return Ov(r,i,l)}throw Error(n(156,i.tag))};function hx(r,i){return qi(r,i)}function k5(r,i,l,m){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(r,i,l,m){return new k5(r,i,l,m)}function lp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function C5(r){if(typeof r=="function")return lp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===K)return 14}return 2}function Bi(r,i){var l=r.alternate;return l===null?(l=an(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function rl(r,i,l,m,g,S){var R=2;if(m=r,typeof r=="function")lp(r)&&(R=1);else if(typeof r=="string")R=5;else e:switch(r){case N:return Eo(l.children,g,S,i);case A:R=8,g|=8;break;case P:return r=an(12,l,i,g|2),r.elementType=P,r.lanes=S,r;case Z:return r=an(13,l,i,g),r.elementType=Z,r.lanes=S,r;case T:return r=an(19,l,i,g),r.elementType=T,r.lanes=S,r;case ne:return nl(l,g,S,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:R=10;break e;case F:R=9;break e;case D:R=11;break e;case K:R=14;break e;case U:R=16,m=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=an(R,l,i,g),i.elementType=r,i.type=m,i.lanes=S,i}function Eo(r,i,l,m){return r=an(7,r,m,i),r.lanes=l,r}function nl(r,i,l,m){return r=an(22,r,m,i),r.elementType=ne,r.lanes=l,r.stateNode={isHidden:!1},r}function cp(r,i,l){return r=an(6,r,null,i),r.lanes=l,r}function dp(r,i,l){return i=an(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function M5(r,i,l,m,g){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oo(0),this.expirationTimes=oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.identifierPrefix=m,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function pp(r,i,l,m,g,S,R,W,ee){return r=new M5(r,i,l,W,ee),i===1?(i=1,S===!0&&(i|=8)):i=0,S=an(3,null,null,i),r.current=S,S.stateNode=r,S.memoizedState={element:m,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(S),r}function E5(r,i,l){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:m==null?null:""+m,children:r,containerInfo:i,implementation:l}}function yx(r){if(!r)return Pi;r=r._reactInternals;e:{if(Et(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(jr(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(jr(l))return Wg(r,l,i)}return i}function gx(r,i,l,m,g,S,R,W,ee){return r=pp(l,m,!0,r,g,S,R,W,ee),r.context=yx(null),l=r.current,m=Sr(),g=Vi(l),S=di(m,g),S.callback=i??null,Fi(l,S,g),r.current.lanes=g,zt(r,g,m),Pr(r,m),r}function il(r,i,l,m){var g=i.current,S=Sr(),R=Vi(g);return l=yx(l),i.context===null?i.context=l:i.pendingContext=l,i=di(S,R),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=Fi(g,i,R),r!==null&&(Mn(r,g,R,S),Au(r,g,R)),R}function ol(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function vx(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function _p(r,i){vx(r,i),(r=r.alternate)&&vx(r,i)}function I5(){return null}var xx=typeof reportError=="function"?reportError:function(r){console.error(r)};function fp(r){this._internalRoot=r}al.prototype.render=fp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));il(r,i,null,null)},al.prototype.unmount=fp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ko(function(){il(null,r,null,null)}),i[ai]=null}};function al(r){this._internalRoot=r}al.prototype.unstable_scheduleHydration=function(r){if(r){var i=so();r={blockedOn:null,target:r,priority:i};for(var l=0;l<xn.length&&i!==0&&i<xn[l].priority;l++);xn.splice(l,0,r),l===0&&co(r)}};function mp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function sl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function wx(){}function j5(r,i,l,m,g){if(g){if(typeof m=="function"){var S=m;m=function(){var _e=ol(R);S.call(_e)}}var R=gx(i,m,r,0,null,!1,!1,"",wx);return r._reactRootContainer=R,r[ai]=R.current,ts(r.nodeType===8?r.parentNode:r),ko(),R}for(;g=r.lastChild;)r.removeChild(g);if(typeof m=="function"){var W=m;m=function(){var _e=ol(ee);W.call(_e)}}var ee=pp(r,0,!1,null,null,!1,!1,"",wx);return r._reactRootContainer=ee,r[ai]=ee.current,ts(r.nodeType===8?r.parentNode:r),ko(function(){il(i,ee,l,m)}),ee}function ul(r,i,l,m,g){var S=l._reactRootContainer;if(S){var R=S;if(typeof g=="function"){var W=g;g=function(){var ee=ol(R);W.call(ee)}}il(i,R,r,g)}else R=j5(l,i,r,g,m);return ol(R)}Va=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=ir(i.pendingLanes);l!==0&&(Oa(i,l|1),Pr(i,pt()),(rt&6)===0&&(ha=pt()+500,Ri()))}break;case 13:ko(function(){var m=ci(r,1);if(m!==null){var g=Sr();Mn(m,r,1,g)}}),_p(r,1)}},$e=function(r){if(r.tag===13){var i=ci(r,134217728);if(i!==null){var l=Sr();Mn(i,r,134217728,l)}_p(r,134217728)}},du=function(r){if(r.tag===13){var i=Vi(r),l=ci(r,i);if(l!==null){var m=Sr();Mn(l,r,i,m)}_p(r,i)}},so=function(){return Je},za=function(r,i){var l=Je;try{return Je=r,i()}finally{Je=l}},Dr=function(r,i,l){switch(i){case"input":if(Be(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var m=l[i];if(m!==r&&m.form===r.form){var g=ku(m);if(!g)throw Error(n(90));Ie(m),Be(m,g)}}}break;case"textarea":Cr(r,l);break;case"select":i=l.value,i!=null&&bt(r,!!l.multiple,i,!1)}},nr=ap,Gt=ko;var N5={usingClientEntryPoint:!1,Events:[is,na,ku,Dn,At,ap]},gs={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T5={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=to(r),r===null?null:r.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||I5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{On=ll.inject(T5),Xt=ll}catch{}}return Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N5,Rr.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(i))throw Error(n(200));return E5(r,i,null,l)},Rr.createRoot=function(r,i){if(!mp(r))throw Error(n(299));var l=!1,m="",g=xx;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=pp(r,1,!1,null,null,l,!1,m,g),r[ai]=i.current,ts(r.nodeType===8?r.parentNode:r),new fp(i)},Rr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=to(i),r=r===null?null:r.stateNode,r},Rr.flushSync=function(r){return ko(r)},Rr.hydrate=function(r,i,l){if(!sl(i))throw Error(n(200));return ul(null,r,i,!0,l)},Rr.hydrateRoot=function(r,i,l){if(!mp(r))throw Error(n(405));var m=l!=null&&l.hydratedSources||null,g=!1,S="",R=xx;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(R=l.onRecoverableError)),i=gx(i,null,r,1,l??null,g,!1,S,R),r[ai]=i.current,ts(r),m)for(r=0;r<m.length;r++)l=m[r],g=l._getVersion,g=g(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,g]:i.mutableSourceEagerHydrationData.push(l,g);return new al(i)},Rr.render=function(r,i,l){if(!sl(i))throw Error(n(200));return ul(null,r,i,!1,l)},Rr.unmountComponentAtNode=function(r){if(!sl(r))throw Error(n(40));return r._reactRootContainer?(ko(function(){ul(null,null,r,!1,function(){r._reactRootContainer=null,r[ai]=null})}),!0):!1},Rr.unstable_batchedUpdates=ap,Rr.unstable_renderSubtreeIntoContainer=function(r,i,l,m){if(!sl(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ul(r,i,l,!1,m)},Rr.version="18.3.1-next-f1338f8080-20240426",Rr}var Ix;function Mk(){if(Ix)return gp.exports;Ix=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gp.exports=O5(),gp.exports}var jx;function V5(){if(jx)return dl;jx=1;var e=Mk();return dl.createRoot=e.createRoot,dl.hydrateRoot=e.hydrateRoot,dl}var z5=V5();const B5=Qs(z5);function Lt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=Lt(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var H5={value:()=>{}};function sc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Il(n)}function Il(e){this._=e}function $5(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Il.prototype=sc.prototype={constructor:Il,on:function(e,t){var n=this._,o=$5(e+"",n),a,s=-1,u=o.length;if(arguments.length<2){for(;++s<u;)if((a=(e=o[s]).type)&&(a=W5(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=o[s]).type)n[a]=Nx(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Nx(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Il(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,s;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,a=s.length;o<a;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,s=o.length;a<s;++a)o[a].value.apply(t,n)}};function W5(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Nx(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=H5,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var t0="http://www.w3.org/1999/xhtml";const Tx={svg:"http://www.w3.org/2000/svg",xhtml:t0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Tx.hasOwnProperty(t)?{space:Tx[t],local:e}:e}function U5(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===t0&&t.documentElement.namespaceURI===t0?t.createElement(e):t.createElementNS(n,e)}}function G5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ek(e){var t=uc(e);return(t.local?G5:U5)(t)}function K5(){}function T0(e){return e==null?K5:function(){return this.querySelector(e)}}function Y5(e){typeof e!="function"&&(e=T0(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=new Array(u),p,_,h=0;h<u;++h)(p=s[h])&&(_=e.call(p,p.__data__,h,s))&&("__data__"in p&&(_.__data__=p.__data__),c[h]=_);return new Gr(o,this._parents)}function Q5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function X5(){return[]}function Ik(e){return e==null?X5:function(){return this.querySelectorAll(e)}}function Z5(e){return function(){return Q5(e.apply(this,arguments))}}function J5(e){typeof e=="function"?e=Z5(e):e=Ik(e);for(var t=this._groups,n=t.length,o=[],a=[],s=0;s<n;++s)for(var u=t[s],c=u.length,p,_=0;_<c;++_)(p=u[_])&&(o.push(e.call(p,p.__data__,_,u)),a.push(p));return new Gr(o,a)}function jk(e){return function(){return this.matches(e)}}function Nk(e){return function(t){return t.matches(e)}}var eI=Array.prototype.find;function tI(e){return function(){return eI.call(this.children,e)}}function rI(){return this.firstElementChild}function nI(e){return this.select(e==null?rI:tI(typeof e=="function"?e:Nk(e)))}var iI=Array.prototype.filter;function oI(){return Array.from(this.children)}function aI(e){return function(){return iI.call(this.children,e)}}function sI(e){return this.selectAll(e==null?oI:aI(typeof e=="function"?e:Nk(e)))}function uI(e){typeof e!="function"&&(e=jk(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=[],p,_=0;_<u;++_)(p=s[_])&&e.call(p,p.__data__,_,s)&&c.push(p);return new Gr(o,this._parents)}function Tk(e){return new Array(e.length)}function lI(){return new Gr(this._enter||this._groups.map(Tk),this._parents)}function Ll(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ll.prototype={constructor:Ll,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cI(e){return function(){return e}}function dI(e,t,n,o,a,s){for(var u=0,c,p=t.length,_=s.length;u<_;++u)(c=t[u])?(c.__data__=s[u],o[u]=c):n[u]=new Ll(e,s[u]);for(;u<p;++u)(c=t[u])&&(a[u]=c)}function pI(e,t,n,o,a,s,u){var c,p,_=new Map,h=t.length,f=s.length,y=new Array(h),v;for(c=0;c<h;++c)(p=t[c])&&(y[c]=v=u.call(p,p.__data__,c,t)+"",_.has(v)?a[c]=p:_.set(v,p));for(c=0;c<f;++c)v=u.call(e,s[c],c,s)+"",(p=_.get(v))?(o[c]=p,p.__data__=s[c],_.delete(v)):n[c]=new Ll(e,s[c]);for(c=0;c<h;++c)(p=t[c])&&_.get(y[c])===p&&(a[c]=p)}function _I(e){return e.__data__}function fI(e,t){if(!arguments.length)return Array.from(this,_I);var n=t?pI:dI,o=this._parents,a=this._groups;typeof e!="function"&&(e=cI(e));for(var s=a.length,u=new Array(s),c=new Array(s),p=new Array(s),_=0;_<s;++_){var h=o[_],f=a[_],y=f.length,v=mI(e.call(h,h&&h.__data__,_,o)),w=v.length,k=c[_]=new Array(w),x=u[_]=new Array(w),q=p[_]=new Array(y);n(h,f,k,x,q,v,t);for(var E=0,b=0,M,j;E<w;++E)if(M=k[E]){for(E>=b&&(b=E+1);!(j=x[b])&&++b<w;);M._next=j||null}}return u=new Gr(u,o),u._enter=c,u._exit=p,u}function mI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hI(){return new Gr(this._exit||this._groups.map(Tk),this._parents)}function yI(e,t,n){var o=this.enter(),a=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),o&&a?o.merge(a).order():a}function gI(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,s=o.length,u=Math.min(a,s),c=new Array(a),p=0;p<u;++p)for(var _=n[p],h=o[p],f=_.length,y=c[p]=new Array(f),v,w=0;w<f;++w)(v=_[w]||h[w])&&(y[w]=v);for(;p<a;++p)c[p]=n[p];return new Gr(c,this._parents)}function vI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,s=o[a],u;--a>=0;)(u=o[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function xI(e){e||(e=wI);function t(f,y){return f&&y?e(f.__data__,y.__data__):!f-!y}for(var n=this._groups,o=n.length,a=new Array(o),s=0;s<o;++s){for(var u=n[s],c=u.length,p=a[s]=new Array(c),_,h=0;h<c;++h)(_=u[h])&&(p[h]=_);p.sort(t)}return new Gr(a,this._parents).order()}function wI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qI(){return Array.from(this)}function SI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,s=o.length;a<s;++a){var u=o[a];if(u)return u}return null}function kI(){let e=0;for(const t of this)++e;return e}function CI(){return!this.node()}function MI(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],s=0,u=a.length,c;s<u;++s)(c=a[s])&&e.call(c,c.__data__,s,a);return this}function EI(e){return function(){this.removeAttribute(e)}}function II(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jI(e,t){return function(){this.setAttribute(e,t)}}function NI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function TI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function PI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function RI(e,t){var n=uc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?II:EI:typeof t=="function"?n.local?PI:TI:n.local?NI:jI)(n,t))}function Pk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function AI(e){return function(){this.style.removeProperty(e)}}function FI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function LI(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function DI(e,t,n){return arguments.length>1?this.each((t==null?AI:typeof t=="function"?LI:FI)(e,t,n??"")):Sa(this.node(),e)}function Sa(e,t){return e.style.getPropertyValue(t)||Pk(e).getComputedStyle(e,null).getPropertyValue(t)}function OI(e){return function(){delete this[e]}}function VI(e,t){return function(){this[e]=t}}function zI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function BI(e,t){return arguments.length>1?this.each((t==null?OI:typeof t=="function"?zI:VI)(e,t)):this.node()[e]}function Rk(e){return e.trim().split(/^|\s+/)}function P0(e){return e.classList||new Ak(e)}function Ak(e){this._node=e,this._names=Rk(e.getAttribute("class")||"")}Ak.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Fk(e,t){for(var n=P0(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Lk(e,t){for(var n=P0(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function HI(e){return function(){Fk(this,e)}}function $I(e){return function(){Lk(this,e)}}function WI(e,t){return function(){(t.apply(this,arguments)?Fk:Lk)(this,e)}}function UI(e,t){var n=Rk(e+"");if(arguments.length<2){for(var o=P0(this.node()),a=-1,s=n.length;++a<s;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?WI:t?HI:$I)(n,t))}function GI(){this.textContent=""}function KI(e){return function(){this.textContent=e}}function YI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QI(e){return arguments.length?this.each(e==null?GI:(typeof e=="function"?YI:KI)(e)):this.node().textContent}function XI(){this.innerHTML=""}function ZI(e){return function(){this.innerHTML=e}}function JI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ej(e){return arguments.length?this.each(e==null?XI:(typeof e=="function"?JI:ZI)(e)):this.node().innerHTML}function tj(){this.nextSibling&&this.parentNode.appendChild(this)}function rj(){return this.each(tj)}function nj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ij(){return this.each(nj)}function oj(e){var t=typeof e=="function"?e:Ek(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function aj(){return null}function sj(e,t){var n=typeof e=="function"?e:Ek(e),o=t==null?aj:typeof t=="function"?t:T0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function uj(){var e=this.parentNode;e&&e.removeChild(this)}function lj(){return this.each(uj)}function cj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pj(e){return this.select(e?dj:cj)}function _j(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fj(e){return function(t){e.call(this,t,this.__data__)}}function mj(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function hj(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function yj(e,t,n){return function(){var o=this.__on,a,s=fj(t);if(o){for(var u=0,c=o.length;u<c;++u)if((a=o[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(a):this.__on=[a]}}function gj(e,t,n){var o=mj(e+""),a,s=o.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var p=0,_=c.length,h;p<_;++p)for(a=0,h=c[p];a<s;++a)if((u=o[a]).type===h.type&&u.name===h.name)return h.value}return}for(c=t?yj:hj,a=0;a<s;++a)this.each(c(o[a],t,n));return this}function Dk(e,t,n){var o=Pk(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function vj(e,t){return function(){return Dk(this,e,t)}}function xj(e,t){return function(){return Dk(this,e,t.apply(this,arguments))}}function wj(e,t){return this.each((typeof t=="function"?xj:vj)(e,t))}function*bj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,s=o.length,u;a<s;++a)(u=o[a])&&(yield u)}var Ok=[null];function Gr(e,t){this._groups=e,this._parents=t}function Zs(){return new Gr([[document.documentElement]],Ok)}function qj(){return this}Gr.prototype=Zs.prototype={constructor:Gr,select:Y5,selectAll:J5,selectChild:nI,selectChildren:sI,filter:uI,data:fI,enter:lI,exit:hI,join:yI,merge:gI,selection:qj,order:vI,sort:xI,call:bI,nodes:qI,node:SI,size:kI,empty:CI,each:MI,attr:RI,style:DI,property:BI,classed:UI,text:QI,html:ej,raise:rj,lower:ij,append:oj,insert:sj,remove:lj,clone:pj,datum:_j,on:gj,dispatch:wj,[Symbol.iterator]:bj};function Wr(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],Ok)}function Sj(e){let t;for(;t=e.sourceEvent;)e=t;return e}function In(e,t){if(e=Sj(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const kj={passive:!1},As={capture:!0,passive:!1};function wp(e){e.stopImmediatePropagation()}function wa(e){e.preventDefault(),e.stopImmediatePropagation()}function Vk(e){var t=e.document.documentElement,n=Wr(e).on("dragstart.drag",wa,As);"onselectstart"in t?n.on("selectstart.drag",wa,As):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function zk(e,t){var n=e.document.documentElement,o=Wr(e).on("dragstart.drag",null);t&&(o.on("click.drag",wa,As),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pl=e=>()=>e;function r0(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:s,x:u,y:c,dx:p,dy:_,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:_,enumerable:!0,configurable:!0},_:{value:h}})}r0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Cj(e){return!e.ctrlKey&&!e.button}function Mj(){return this.parentNode}function Ej(e,t){return t??{x:e.x,y:e.y}}function Ij(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bk(){var e=Cj,t=Mj,n=Ej,o=Ij,a={},s=sc("start","drag","end"),u=0,c,p,_,h,f=0;function y(M){M.on("mousedown.drag",v).filter(o).on("touchstart.drag",x).on("touchmove.drag",q,kj).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,j){if(!(h||!e.call(this,M,j))){var C=b(this,t.call(this,M,j),M,j,"mouse");C&&(Wr(M.view).on("mousemove.drag",w,As).on("mouseup.drag",k,As),Vk(M.view),wp(M),_=!1,c=M.clientX,p=M.clientY,C("start",M))}}function w(M){if(wa(M),!_){var j=M.clientX-c,C=M.clientY-p;_=j*j+C*C>f}a.mouse("drag",M)}function k(M){Wr(M.view).on("mousemove.drag mouseup.drag",null),zk(M.view,_),wa(M),a.mouse("end",M)}function x(M,j){if(e.call(this,M,j)){var C=M.changedTouches,N=t.call(this,M,j),A=C.length,P,z;for(P=0;P<A;++P)(z=b(this,N,M,j,C[P].identifier,C[P]))&&(wp(M),z("start",M,C[P]))}}function q(M){var j=M.changedTouches,C=j.length,N,A;for(N=0;N<C;++N)(A=a[j[N].identifier])&&(wa(M),A("drag",M,j[N]))}function E(M){var j=M.changedTouches,C=j.length,N,A;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),N=0;N<C;++N)(A=a[j[N].identifier])&&(wp(M),A("end",M,j[N]))}function b(M,j,C,N,A,P){var z=s.copy(),F=In(P||C,j),D,Z,T;if((T=n.call(M,new r0("beforestart",{sourceEvent:C,target:y,identifier:A,active:u,x:F[0],y:F[1],dx:0,dy:0,dispatch:z}),N))!=null)return D=T.x-F[0]||0,Z=T.y-F[1]||0,function K(U,ne,Y){var Q=F,ie;switch(U){case"start":a[A]=K,ie=u++;break;case"end":delete a[A],--u;case"drag":F=In(Y||ne,j),ie=u;break}z.call(U,M,new r0(U,{sourceEvent:ne,subject:T,target:y,identifier:A,active:ie,x:F[0]+D,y:F[1]+Z,dx:F[0]-Q[0],dy:F[1]-Q[1],dispatch:z}),N)}}return y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:pl(!!M),y):e},y.container=function(M){return arguments.length?(t=typeof M=="function"?M:pl(M),y):t},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:pl(M),y):n},y.touchable=function(M){return arguments.length?(o=typeof M=="function"?M:pl(!!M),y):o},y.on=function(){var M=s.on.apply(s,arguments);return M===s?y:M},y.clickDistance=function(M){return arguments.length?(f=(M=+M)*M,y):Math.sqrt(f)},y}function R0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hk(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Js(){}var Fs=.7,Dl=1/Fs,ba="\\s*([+-]?\\d+)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jj=/^#([0-9a-f]{3,8})$/,Nj=new RegExp(`^rgb\\(${ba},${ba},${ba}\\)$`),Tj=new RegExp(`^rgb\\(${Qn},${Qn},${Qn}\\)$`),Pj=new RegExp(`^rgba\\(${ba},${ba},${ba},${Ls}\\)$`),Rj=new RegExp(`^rgba\\(${Qn},${Qn},${Qn},${Ls}\\)$`),Aj=new RegExp(`^hsl\\(${Ls},${Qn},${Qn}\\)$`),Fj=new RegExp(`^hsla\\(${Ls},${Qn},${Qn},${Ls}\\)$`),Px={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R0(Js,Po,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rx,formatHex:Rx,formatHex8:Lj,formatHsl:Dj,formatRgb:Ax,toString:Ax});function Rx(){return this.rgb().formatHex()}function Lj(){return this.rgb().formatHex8()}function Dj(){return $k(this).formatHsl()}function Ax(){return this.rgb().formatRgb()}function Po(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jj.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Fx(t):n===3?new Ar(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nj.exec(e))?new Ar(t[1],t[2],t[3],1):(t=Tj.exec(e))?new Ar(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pj.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=Rj.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Aj.exec(e))?Ox(t[1],t[2]/100,t[3]/100,1):(t=Fj.exec(e))?Ox(t[1],t[2]/100,t[3]/100,t[4]):Px.hasOwnProperty(e)?Fx(Px[e]):e==="transparent"?new Ar(NaN,NaN,NaN,0):null}function Fx(e){return new Ar(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ar(e,t,n,o)}function Oj(e){return e instanceof Js||(e=Po(e)),e?(e=e.rgb(),new Ar(e.r,e.g,e.b,e.opacity)):new Ar}function n0(e,t,n,o){return arguments.length===1?Oj(e):new Ar(e,t,n,o??1)}function Ar(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}R0(Ar,n0,Hk(Js,{brighter(e){return e=e==null?Dl:Math.pow(Dl,e),new Ar(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new Ar(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ar(No(this.r),No(this.g),No(this.b),Ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lx,formatHex:Lx,formatHex8:Vj,formatRgb:Dx,toString:Dx}));function Lx(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}`}function Vj(){return`#${jo(this.r)}${jo(this.g)}${jo(this.b)}${jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dx(){const e=Ol(this.opacity);return`${e===1?"rgb(":"rgba("}${No(this.r)}, ${No(this.g)}, ${No(this.b)}${e===1?")":`, ${e})`}`}function Ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function No(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jo(e){return e=No(e),(e<16?"0":"")+e.toString(16)}function Ox(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nn(e,t,n,o)}function $k(e){if(e instanceof Nn)return new Nn(e.h,e.s,e.l,e.opacity);if(e instanceof Js||(e=Po(e)),!e)return new Nn;if(e instanceof Nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),s=Math.max(t,n,o),u=NaN,c=s-a,p=(s+a)/2;return c?(t===s?u=(n-o)/c+(n<o)*6:n===s?u=(o-t)/c+2:u=(t-n)/c+4,c/=p<.5?s+a:2-s-a,u*=60):c=p>0&&p<1?0:u,new Nn(u,c,p,e.opacity)}function zj(e,t,n,o){return arguments.length===1?$k(e):new Nn(e,t,n,o??1)}function Nn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}R0(Nn,zj,Hk(Js,{brighter(e){return e=e==null?Dl:Math.pow(Dl,e),new Nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new Nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new Ar(bp(e>=240?e-240:e+120,a,o),bp(e,a,o),bp(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Nn(Vx(this.h),fl(this.s),fl(this.l),Ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ol(this.opacity);return`${e===1?"hsl(":"hsla("}${Vx(this.h)}, ${fl(this.s)*100}%, ${fl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vx(e){return e=(e||0)%360,e<0?e+360:e}function fl(e){return Math.max(0,Math.min(1,e||0))}function bp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const A0=e=>()=>e;function Bj(e,t){return function(n){return e+n*t}}function Hj(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function $j(e){return(e=+e)==1?Wk:function(t,n){return n-t?Hj(t,n,e):A0(isNaN(t)?n:t)}}function Wk(e,t){var n=t-e;return n?Bj(e,n):A0(isNaN(e)?t:e)}const Vl=(function e(t){var n=$j(t);function o(a,s){var u=n((a=n0(a)).r,(s=n0(s)).r),c=n(a.g,s.g),p=n(a.b,s.b),_=Wk(a.opacity,s.opacity);return function(h){return a.r=u(h),a.g=c(h),a.b=p(h),a.opacity=_(h),a+""}}return o.gamma=e,o})(1);function Wj(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),a;return function(s){for(a=0;a<n;++a)o[a]=e[a]*(1-s)+t[a]*s;return o}}function Uj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gj(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,a=new Array(o),s=new Array(n),u;for(u=0;u<o;++u)a[u]=Is(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(c){for(u=0;u<o;++u)s[u]=a[u](c);return s}}function Kj(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yj(e,t){var n={},o={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Is(e[a],t[a]):o[a]=t[a];return function(s){for(a in n)o[a]=n[a](s);return o}}var i0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qp=new RegExp(i0.source,"g");function Qj(e){return function(){return e}}function Xj(e){return function(t){return e(t)+""}}function Uk(e,t){var n=i0.lastIndex=qp.lastIndex=0,o,a,s,u=-1,c=[],p=[];for(e=e+"",t=t+"";(o=i0.exec(e))&&(a=qp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),c[u]?c[u]+=s:c[++u]=s),(o=o[0])===(a=a[0])?c[u]?c[u]+=a:c[++u]=a:(c[++u]=null,p.push({i:u,x:Kn(o,a)})),n=qp.lastIndex;return n<t.length&&(s=t.slice(n),c[u]?c[u]+=s:c[++u]=s),c.length<2?p[0]?Xj(p[0].x):Qj(t):(t=p.length,function(_){for(var h=0,f;h<t;++h)c[(f=p[h]).i]=f.x(_);return c.join("")})}function Is(e,t){var n=typeof t,o;return t==null||n==="boolean"?A0(t):(n==="number"?Kn:n==="string"?(o=Po(t))?(t=o,Vl):Uk:t instanceof Po?Vl:t instanceof Date?Kj:Uj(t)?Wj:Array.isArray(t)?Gj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yj:Kn)(e,t)}var zx=180/Math.PI,o0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gk(e,t,n,o,a,s){var u,c,p;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(p=e*n+t*o)&&(n-=e*p,o-=t*p),(c=Math.sqrt(n*n+o*o))&&(n/=c,o/=c,p/=c),e*o<t*n&&(e=-e,t=-t,p=-p,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*zx,skewX:Math.atan(p)*zx,scaleX:u,scaleY:c}}var ml;function Zj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?o0:Gk(t.a,t.b,t.c,t.d,t.e,t.f)}function Jj(e){return e==null||(ml||(ml=document.createElementNS("http://www.w3.org/2000/svg","g")),ml.setAttribute("transform",e),!(e=ml.transform.baseVal.consolidate()))?o0:(e=e.matrix,Gk(e.a,e.b,e.c,e.d,e.e,e.f))}function Kk(e,t,n,o){function a(_){return _.length?_.pop()+" ":""}function s(_,h,f,y,v,w){if(_!==f||h!==y){var k=v.push("translate(",null,t,null,n);w.push({i:k-4,x:Kn(_,f)},{i:k-2,x:Kn(h,y)})}else(f||y)&&v.push("translate("+f+t+y+n)}function u(_,h,f,y){_!==h?(_-h>180?h+=360:h-_>180&&(_+=360),y.push({i:f.push(a(f)+"rotate(",null,o)-2,x:Kn(_,h)})):h&&f.push(a(f)+"rotate("+h+o)}function c(_,h,f,y){_!==h?y.push({i:f.push(a(f)+"skewX(",null,o)-2,x:Kn(_,h)}):h&&f.push(a(f)+"skewX("+h+o)}function p(_,h,f,y,v,w){if(_!==f||h!==y){var k=v.push(a(v)+"scale(",null,",",null,")");w.push({i:k-4,x:Kn(_,f)},{i:k-2,x:Kn(h,y)})}else(f!==1||y!==1)&&v.push(a(v)+"scale("+f+","+y+")")}return function(_,h){var f=[],y=[];return _=e(_),h=e(h),s(_.translateX,_.translateY,h.translateX,h.translateY,f,y),u(_.rotate,h.rotate,f,y),c(_.skewX,h.skewX,f,y),p(_.scaleX,_.scaleY,h.scaleX,h.scaleY,f,y),_=h=null,function(v){for(var w=-1,k=y.length,x;++w<k;)f[(x=y[w]).i]=x.x(v);return f.join("")}}}var eN=Kk(Zj,"px, ","px)","deg)"),tN=Kk(Jj,", ",")",")"),rN=1e-12;function Bx(e){return((e=Math.exp(e))+1/e)/2}function nN(e){return((e=Math.exp(e))-1/e)/2}function iN(e){return((e=Math.exp(2*e))-1)/(e+1)}const jl=(function e(t,n,o){function a(s,u){var c=s[0],p=s[1],_=s[2],h=u[0],f=u[1],y=u[2],v=h-c,w=f-p,k=v*v+w*w,x,q;if(k<rN)q=Math.log(y/_)/t,x=function(N){return[c+N*v,p+N*w,_*Math.exp(t*N*q)]};else{var E=Math.sqrt(k),b=(y*y-_*_+o*k)/(2*_*n*E),M=(y*y-_*_-o*k)/(2*y*n*E),j=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(M*M+1)-M);q=(C-j)/t,x=function(N){var A=N*q,P=Bx(j),z=_/(n*E)*(P*iN(t*A+j)-nN(j));return[c+z*v,p+z*w,_*P/Bx(t*A+j)]}}return x.duration=q*1e3*t/Math.SQRT2,x}return a.rho=function(s){var u=Math.max(.001,+s),c=u*u,p=c*c;return e(u,c,p)},a})(Math.SQRT2,2,4);var ka=0,Ss=0,xs=0,Yk=1e3,zl,ks,Bl=0,Ro=0,lc=0,Ds=typeof performance=="object"&&performance.now?performance:Date,Qk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function F0(){return Ro||(Qk(oN),Ro=Ds.now()+lc)}function oN(){Ro=0}function Hl(){this._call=this._time=this._next=null}Hl.prototype=Xk.prototype={constructor:Hl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?F0():+n)+(t==null?0:+t),!this._next&&ks!==this&&(ks?ks._next=this:zl=this,ks=this),this._call=e,this._time=n,a0()},stop:function(){this._call&&(this._call=null,this._time=1/0,a0())}};function Xk(e,t,n){var o=new Hl;return o.restart(e,t,n),o}function aN(){F0(),++ka;for(var e=zl,t;e;)(t=Ro-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ka}function Hx(){Ro=(Bl=Ds.now())+lc,ka=Ss=0;try{aN()}finally{ka=0,uN(),Ro=0}}function sN(){var e=Ds.now(),t=e-Bl;t>Yk&&(lc-=t,Bl=e)}function uN(){for(var e,t=zl,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zl=n);ks=e,a0(o)}function a0(e){if(!ka){Ss&&(Ss=clearTimeout(Ss));var t=e-Ro;t>24?(e<1/0&&(Ss=setTimeout(Hx,e-Ds.now()-lc)),xs&&(xs=clearInterval(xs))):(xs||(Bl=Ds.now(),xs=setInterval(sN,Yk)),ka=1,Qk(Hx))}}function $x(e,t,n){var o=new Hl;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var lN=sc("start","end","cancel","interrupt"),cN=[],Zk=0,Wx=1,s0=2,Nl=3,Ux=4,u0=5,Tl=6;function cc(e,t,n,o,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;dN(e,n,{name:t,index:o,group:a,on:lN,tween:cN,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zk})}function L0(e,t){var n=Fn(e,t);if(n.state>Zk)throw new Error("too late; already scheduled");return n}function Zn(e,t){var n=Fn(e,t);if(n.state>Nl)throw new Error("too late; already running");return n}function Fn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dN(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=Xk(s,0,n.time);function s(_){n.state=Wx,n.timer.restart(u,n.delay,n.time),n.delay<=_&&u(_-n.delay)}function u(_){var h,f,y,v;if(n.state!==Wx)return p();for(h in o)if(v=o[h],v.name===n.name){if(v.state===Nl)return $x(u);v.state===Ux?(v.state=Tl,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete o[h]):+h<t&&(v.state=Tl,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete o[h])}if($x(function(){n.state===Nl&&(n.state=Ux,n.timer.restart(c,n.delay,n.time),c(_))}),n.state=s0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===s0){for(n.state=Nl,a=new Array(y=n.tween.length),h=0,f=-1;h<y;++h)(v=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(a[++f]=v);a.length=f+1}}function c(_){for(var h=_<n.duration?n.ease.call(null,_/n.duration):(n.timer.restart(p),n.state=u0,1),f=-1,y=a.length;++f<y;)a[f].call(e,h);n.state===u0&&(n.on.call("end",e,e.__data__,n.index,n.group),p())}function p(){n.state=Tl,n.timer.stop(),delete o[t];for(var _ in o)return;delete e.__transition}}function Pl(e,t){var n=e.__transition,o,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((o=n[u]).name!==t){s=!1;continue}a=o.state>s0&&o.state<u0,o.state=Tl,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[u]}s&&delete e.__transition}}function pN(e){return this.each(function(){Pl(this,e)})}function _N(e,t){var n,o;return function(){var a=Zn(this,e),s=a.tween;if(s!==n){o=n=s;for(var u=0,c=o.length;u<c;++u)if(o[u].name===t){o=o.slice(),o.splice(u,1);break}}a.tween=o}}function fN(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var s=Zn(this,e),u=s.tween;if(u!==o){a=(o=u).slice();for(var c={name:t,value:n},p=0,_=a.length;p<_;++p)if(a[p].name===t){a[p]=c;break}p===_&&a.push(c)}s.tween=a}}function mN(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Fn(this.node(),n).tween,a=0,s=o.length,u;a<s;++a)if((u=o[a]).name===e)return u.value;return null}return this.each((t==null?_N:fN)(n,e,t))}function D0(e,t,n){var o=e._id;return e.each(function(){var a=Zn(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Fn(a,o).value[t]}}function Jk(e,t){var n;return(typeof t=="number"?Kn:t instanceof Po?Vl:(n=Po(t))?(t=n,Vl):Uk)(e,t)}function hN(e){return function(){this.removeAttribute(e)}}function yN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gN(e,t,n){var o,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===o?s:s=t(o=u,n)}}function vN(e,t,n){var o,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===o?s:s=t(o=u,n)}}function xN(e,t,n){var o,a,s;return function(){var u,c=n(this),p;return c==null?void this.removeAttribute(e):(u=this.getAttribute(e),p=c+"",u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c)))}}function wN(e,t,n){var o,a,s;return function(){var u,c=n(this),p;return c==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),p=c+"",u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c)))}}function bN(e,t){var n=uc(e),o=n==="transform"?tN:Jk;return this.attrTween(e,typeof t=="function"?(n.local?wN:xN)(n,o,D0(this,"attr."+e,t)):t==null?(n.local?yN:hN)(n):(n.local?vN:gN)(n,o,t))}function qN(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SN(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kN(e,t){var n,o;function a(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&SN(e,s)),n}return a._value=t,a}function CN(e,t){var n,o;function a(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&qN(e,s)),n}return a._value=t,a}function MN(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=uc(e);return this.tween(n,(o.local?kN:CN)(o,t))}function EN(e,t){return function(){L0(this,e).delay=+t.apply(this,arguments)}}function IN(e,t){return t=+t,function(){L0(this,e).delay=t}}function jN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?EN:IN)(t,e)):Fn(this.node(),t).delay}function NN(e,t){return function(){Zn(this,e).duration=+t.apply(this,arguments)}}function TN(e,t){return t=+t,function(){Zn(this,e).duration=t}}function PN(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NN:TN)(t,e)):Fn(this.node(),t).duration}function RN(e,t){if(typeof t!="function")throw new Error;return function(){Zn(this,e).ease=t}}function AN(e){var t=this._id;return arguments.length?this.each(RN(t,e)):Fn(this.node(),t).ease}function FN(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Zn(this,e).ease=n}}function LN(e){if(typeof e!="function")throw new Error;return this.each(FN(this._id,e))}function DN(e){typeof e!="function"&&(e=jk(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,c=o[a]=[],p,_=0;_<u;++_)(p=s[_])&&e.call(p,p.__data__,_,s)&&c.push(p);return new gi(o,this._parents,this._name,this._id)}function ON(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,s=Math.min(o,a),u=new Array(o),c=0;c<s;++c)for(var p=t[c],_=n[c],h=p.length,f=u[c]=new Array(h),y,v=0;v<h;++v)(y=p[v]||_[v])&&(f[v]=y);for(;c<o;++c)u[c]=t[c];return new gi(u,this._parents,this._name,this._id)}function VN(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zN(e,t,n){var o,a,s=VN(t)?L0:Zn;return function(){var u=s(this,e),c=u.on;c!==o&&(a=(o=c).copy()).on(t,n),u.on=a}}function BN(e,t){var n=this._id;return arguments.length<2?Fn(this.node(),n).on.on(e):this.each(zN(n,e,t))}function HN(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $N(){return this.on("end.remove",HN(this._id))}function WN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=T0(e));for(var o=this._groups,a=o.length,s=new Array(a),u=0;u<a;++u)for(var c=o[u],p=c.length,_=s[u]=new Array(p),h,f,y=0;y<p;++y)(h=c[y])&&(f=e.call(h,h.__data__,y,c))&&("__data__"in h&&(f.__data__=h.__data__),_[y]=f,cc(_[y],t,n,y,_,Fn(h,n)));return new gi(s,this._parents,t,n)}function UN(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ik(e));for(var o=this._groups,a=o.length,s=[],u=[],c=0;c<a;++c)for(var p=o[c],_=p.length,h,f=0;f<_;++f)if(h=p[f]){for(var y=e.call(h,h.__data__,f,p),v,w=Fn(h,n),k=0,x=y.length;k<x;++k)(v=y[k])&&cc(v,t,n,k,y,w);s.push(y),u.push(h)}return new gi(s,u,t,n)}var GN=Zs.prototype.constructor;function KN(){return new GN(this._groups,this._parents)}function YN(e,t){var n,o,a;return function(){var s=Sa(this,e),u=(this.style.removeProperty(e),Sa(this,e));return s===u?null:s===n&&u===o?a:a=t(n=s,o=u)}}function eC(e){return function(){this.style.removeProperty(e)}}function QN(e,t,n){var o,a=n+"",s;return function(){var u=Sa(this,e);return u===a?null:u===o?s:s=t(o=u,n)}}function XN(e,t,n){var o,a,s;return function(){var u=Sa(this,e),c=n(this),p=c+"";return c==null&&(p=c=(this.style.removeProperty(e),Sa(this,e))),u===p?null:u===o&&p===a?s:(a=p,s=t(o=u,c))}}function ZN(e,t){var n,o,a,s="style."+t,u="end."+s,c;return function(){var p=Zn(this,e),_=p.on,h=p.value[s]==null?c||(c=eC(t)):void 0;(_!==n||a!==h)&&(o=(n=_).copy()).on(u,a=h),p.on=o}}function JN(e,t,n){var o=(e+="")=="transform"?eN:Jk;return t==null?this.styleTween(e,YN(e,o)).on("end.style."+e,eC(e)):typeof t=="function"?this.styleTween(e,XN(e,o,D0(this,"style."+e,t))).each(ZN(this._id,e)):this.styleTween(e,QN(e,o,t),n).on("end.style."+e,null)}function eT(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function tT(e,t,n){var o,a;function s(){var u=t.apply(this,arguments);return u!==a&&(o=(a=u)&&eT(e,u,n)),o}return s._value=t,s}function rT(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,tT(e,t,n??""))}function nT(e){return function(){this.textContent=e}}function iT(e){return function(){var t=e(this);this.textContent=t??""}}function oT(e){return this.tween("text",typeof e=="function"?iT(D0(this,"text",e)):nT(e==null?"":e+""))}function aT(e){return function(t){this.textContent=e.call(this,t)}}function sT(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&aT(a)),t}return o._value=e,o}function uT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,sT(e))}function lT(){for(var e=this._name,t=this._id,n=tC(),o=this._groups,a=o.length,s=0;s<a;++s)for(var u=o[s],c=u.length,p,_=0;_<c;++_)if(p=u[_]){var h=Fn(p,t);cc(p,e,n,_,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new gi(o,this._parents,e,n)}function cT(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(s,u){var c={value:u},p={value:function(){--a===0&&s()}};n.each(function(){var _=Zn(this,o),h=_.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(p)),_.on=t}),a===0&&s()})}var dT=0;function gi(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function tC(){return++dT}var fi=Zs.prototype;gi.prototype={constructor:gi,select:WN,selectAll:UN,selectChild:fi.selectChild,selectChildren:fi.selectChildren,filter:DN,merge:ON,selection:KN,transition:lT,call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:BN,attr:bN,attrTween:MN,style:JN,styleTween:rT,text:oT,textTween:uT,remove:$N,tween:mN,delay:jN,duration:PN,ease:AN,easeVarying:LN,end:cT,[Symbol.iterator]:fi[Symbol.iterator]};function pT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _T={time:null,delay:0,duration:250,ease:pT};function fT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mT(e){var t,n;e instanceof gi?(t=e._id,e=e._name):(t=tC(),(n=_T).time=F0(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,s=0;s<a;++s)for(var u=o[s],c=u.length,p,_=0;_<c;++_)(p=u[_])&&cc(p,e,t,_,u,n||fT(p,t));return new gi(o,this._parents,e,t)}Zs.prototype.interrupt=pN;Zs.prototype.transition=mT;const hl=e=>()=>e;function hT(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function hi(e,t,n){this.k=e,this.x=t,this.y=n}hi.prototype={constructor:hi,scale:function(e){return e===1?this:new hi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dc=new hi(1,0,0);rC.prototype=hi.prototype;function rC(e){for(;!e.__zoom;)if(!(e=e.parentNode))return dc;return e.__zoom}function Sp(e){e.stopImmediatePropagation()}function ws(e){e.preventDefault(),e.stopImmediatePropagation()}function yT(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gT(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gx(){return this.__zoom||dc}function vT(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xT(){return navigator.maxTouchPoints||"ontouchstart"in this}function wT(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function nC(){var e=yT,t=gT,n=wT,o=vT,a=xT,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,p=jl,_=sc("start","zoom","end"),h,f,y,v=500,w=150,k=0,x=10;function q(T){T.property("__zoom",Gx).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}q.transform=function(T,K,U,ne){var Y=T.selection?T.selection():T;Y.property("__zoom",Gx),T!==Y?j(T,K,U,ne):Y.interrupt().each(function(){C(this,arguments).event(ne).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},q.scaleBy=function(T,K,U,ne){q.scaleTo(T,function(){var Y=this.__zoom.k,Q=typeof K=="function"?K.apply(this,arguments):K;return Y*Q},U,ne)},q.scaleTo=function(T,K,U,ne){q.transform(T,function(){var Y=t.apply(this,arguments),Q=this.__zoom,ie=U==null?M(Y):typeof U=="function"?U.apply(this,arguments):U,B=Q.invert(ie),J=typeof K=="function"?K.apply(this,arguments):K;return n(b(E(Q,J),ie,B),Y,u)},U,ne)},q.translateBy=function(T,K,U,ne){q.transform(T,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof U=="function"?U.apply(this,arguments):U),t.apply(this,arguments),u)},null,ne)},q.translateTo=function(T,K,U,ne,Y){q.transform(T,function(){var Q=t.apply(this,arguments),ie=this.__zoom,B=ne==null?M(Q):typeof ne=="function"?ne.apply(this,arguments):ne;return n(dc.translate(B[0],B[1]).scale(ie.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof U=="function"?-U.apply(this,arguments):-U),Q,u)},ne,Y)};function E(T,K){return K=Math.max(s[0],Math.min(s[1],K)),K===T.k?T:new hi(K,T.x,T.y)}function b(T,K,U){var ne=K[0]-U[0]*T.k,Y=K[1]-U[1]*T.k;return ne===T.x&&Y===T.y?T:new hi(T.k,ne,Y)}function M(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function j(T,K,U,ne){T.on("start.zoom",function(){C(this,arguments).event(ne).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(ne).end()}).tween("zoom",function(){var Y=this,Q=arguments,ie=C(Y,Q).event(ne),B=t.apply(Y,Q),J=U==null?M(B):typeof U=="function"?U.apply(Y,Q):U,me=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),$=Y.__zoom,te=typeof K=="function"?K.apply(Y,Q):K,oe=p($.invert(J).concat(me/$.k),te.invert(J).concat(me/te.k));return function(de){if(de===1)de=te;else{var ue=oe(de),ve=me/ue[2];de=new hi(ve,J[0]-ue[0]*ve,J[1]-ue[1]*ve)}ie.zoom(null,de)}})}function C(T,K,U){return!U&&T.__zooming||new N(T,K)}function N(T,K){this.that=T,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,K),this.taps=0}N.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,K){return this.mouse&&T!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var K=Wr(this.that).datum();_.call(T,this.that,new hT(T,{sourceEvent:this.sourceEvent,target:q,transform:this.that.__zoom,dispatch:_}),K)}};function A(T,...K){if(!e.apply(this,arguments))return;var U=C(this,K).event(T),ne=this.__zoom,Y=Math.max(s[0],Math.min(s[1],ne.k*Math.pow(2,o.apply(this,arguments)))),Q=In(T);if(U.wheel)(U.mouse[0][0]!==Q[0]||U.mouse[0][1]!==Q[1])&&(U.mouse[1]=ne.invert(U.mouse[0]=Q)),clearTimeout(U.wheel);else{if(ne.k===Y)return;U.mouse=[Q,ne.invert(Q)],Pl(this),U.start()}ws(T),U.wheel=setTimeout(ie,w),U.zoom("mouse",n(b(E(ne,Y),U.mouse[0],U.mouse[1]),U.extent,u));function ie(){U.wheel=null,U.end()}}function P(T,...K){if(y||!e.apply(this,arguments))return;var U=T.currentTarget,ne=C(this,K,!0).event(T),Y=Wr(T.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",me,!0),Q=In(T,U),ie=T.clientX,B=T.clientY;Vk(T.view),Sp(T),ne.mouse=[Q,this.__zoom.invert(Q)],Pl(this),ne.start();function J($){if(ws($),!ne.moved){var te=$.clientX-ie,oe=$.clientY-B;ne.moved=te*te+oe*oe>k}ne.event($).zoom("mouse",n(b(ne.that.__zoom,ne.mouse[0]=In($,U),ne.mouse[1]),ne.extent,u))}function me($){Y.on("mousemove.zoom mouseup.zoom",null),zk($.view,ne.moved),ws($),ne.event($).end()}}function z(T,...K){if(e.apply(this,arguments)){var U=this.__zoom,ne=In(T.changedTouches?T.changedTouches[0]:T,this),Y=U.invert(ne),Q=U.k*(T.shiftKey?.5:2),ie=n(b(E(U,Q),ne,Y),t.apply(this,K),u);ws(T),c>0?Wr(this).transition().duration(c).call(j,ie,ne,T):Wr(this).call(q.transform,ie,ne,T)}}function F(T,...K){if(e.apply(this,arguments)){var U=T.touches,ne=U.length,Y=C(this,K,T.changedTouches.length===ne).event(T),Q,ie,B,J;for(Sp(T),ie=0;ie<ne;++ie)B=U[ie],J=In(B,this),J=[J,this.__zoom.invert(J),B.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==J[2]&&(Y.touch1=J,Y.taps=0):(Y.touch0=J,Q=!0,Y.taps=1+!!h);h&&(h=clearTimeout(h)),Q&&(Y.taps<2&&(f=J[0],h=setTimeout(function(){h=null},v)),Pl(this),Y.start())}}function D(T,...K){if(this.__zooming){var U=C(this,K).event(T),ne=T.changedTouches,Y=ne.length,Q,ie,B,J;for(ws(T),Q=0;Q<Y;++Q)ie=ne[Q],B=In(ie,this),U.touch0&&U.touch0[2]===ie.identifier?U.touch0[0]=B:U.touch1&&U.touch1[2]===ie.identifier&&(U.touch1[0]=B);if(ie=U.that.__zoom,U.touch1){var me=U.touch0[0],$=U.touch0[1],te=U.touch1[0],oe=U.touch1[1],de=(de=te[0]-me[0])*de+(de=te[1]-me[1])*de,ue=(ue=oe[0]-$[0])*ue+(ue=oe[1]-$[1])*ue;ie=E(ie,Math.sqrt(de/ue)),B=[(me[0]+te[0])/2,(me[1]+te[1])/2],J=[($[0]+oe[0])/2,($[1]+oe[1])/2]}else if(U.touch0)B=U.touch0[0],J=U.touch0[1];else return;U.zoom("touch",n(b(ie,B,J),U.extent,u))}}function Z(T,...K){if(this.__zooming){var U=C(this,K).event(T),ne=T.changedTouches,Y=ne.length,Q,ie;for(Sp(T),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),Q=0;Q<Y;++Q)ie=ne[Q],U.touch0&&U.touch0[2]===ie.identifier?delete U.touch0:U.touch1&&U.touch1[2]===ie.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(ie=In(ie,this),Math.hypot(f[0]-ie[0],f[1]-ie[1])<x)){var B=Wr(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return q.wheelDelta=function(T){return arguments.length?(o=typeof T=="function"?T:hl(+T),q):o},q.filter=function(T){return arguments.length?(e=typeof T=="function"?T:hl(!!T),q):e},q.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:hl(!!T),q):a},q.extent=function(T){return arguments.length?(t=typeof T=="function"?T:hl([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),q):t},q.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],q):[s[0],s[1]]},q.translateExtent=function(T){return arguments.length?(u[0][0]=+T[0][0],u[1][0]=+T[1][0],u[0][1]=+T[0][1],u[1][1]=+T[1][1],q):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},q.constrain=function(T){return arguments.length?(n=T,q):n},q.duration=function(T){return arguments.length?(c=+T,q):c},q.interpolate=function(T){return arguments.length?(p=T,q):p},q.on=function(){var T=_.on.apply(_,arguments);return T===_?q:T},q.clickDistance=function(T){return arguments.length?(k=(T=+T)*T,q):Math.sqrt(k)},q.tapDistance=function(T){return arguments.length?(x=+T,q):x},q}const Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Os=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],iC=["Enter"," ","Escape"],oC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ca;(function(e){e.Strict="strict",e.Loose="loose"})(Ca||(Ca={}));var To;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(To||(To={}));var Vs;(function(e){e.Partial="partial",e.Full="full"})(Vs||(Vs={}));const aC={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Gi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Gi||(Gi={}));var $l;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($l||($l={}));var He;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(He||(He={}));const Kx={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top};function sC(e){return e===null?null:e?"valid":"invalid"}const uC=e=>"id"in e&&"source"in e&&"target"in e,bT=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),O0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),eu=(e,t=[0,0])=>{const{width:n,height:o}=vi(e),a=e.origin??t,s=n*a[0],u=o*a[1];return{x:e.position.x-s,y:e.position.y-u}},qT=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):O0(a)?a:t.nodeLookup.get(a.id));const c=u?Wl(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return pc(o,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _c(n)},tu=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=pc(n,Wl(a)),o=!0)}),o?_c(n):{x:0,y:0,width:0,height:0}},V0=(e,t,[n,o,a]=[0,0,1],s=!1,u=!1)=>{const c={...nu(t,[n,o,a]),width:t.width/a,height:t.height/a},p=[];for(const _ of e.values()){const{measured:h,selectable:f=!0,hidden:y=!1}=_;if(u&&!f||y)continue;const v=h.width??_.width??_.initialWidth??null,w=h.height??_.height??_.initialHeight??null,k=zs(c,Ea(_)),x=(v??0)*(w??0),q=s&&k>0;(!_.internals.handleBounds||q||k>=x||_.dragging)&&p.push(_)}return p},ST=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function kT(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!o||o.has(a.id))&&n.set(a.id,a)}),n}async function CT({nodes:e,width:t,height:n,panZoom:o,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const c=kT(e,u),p=tu(c),_=z0(p,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await o.setViewport(_,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function lC({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),c=u.parentId?n.get(u.parentId):void 0,{x:p,y:_}=c?c.internals.positionAbsolute:{x:0,y:0},h=u.origin??o;let f=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!c)s==null||s("005",Xn.error005());else{const v=c.measured.width,w=c.measured.height;v&&w&&(f=[[p,_],[p+v,_+w]])}else c&&Ia(u.extent)&&(f=[[u.extent[0][0]+p,u.extent[0][1]+_],[u.extent[1][0]+p,u.extent[1][1]+_]]);const y=Ia(f)?Ao(t,f,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Xn.error015())),{position:{x:y.x-p+(u.measured.width??0)*h[0],y:y.y-_+(u.measured.height??0)*h[1]},positionAbsolute:y}}async function MT({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:a}){const s=new Set(e.map(y=>y.id)),u=[];for(const y of n){if(y.deletable===!1)continue;const v=s.has(y.id),w=!v&&y.parentId&&u.find(k=>k.id===y.parentId);(v||w)&&u.push(y)}const c=new Set(t.map(y=>y.id)),p=o.filter(y=>y.deletable!==!1),h=ST(u,p);for(const y of p)c.has(y.id)&&!h.find(w=>w.id===y.id)&&h.push(y);if(!a)return{edges:h,nodes:u};const f=await a({nodes:u,edges:h});return typeof f=="boolean"?f?{edges:h,nodes:u}:{edges:[],nodes:[]}:f}const Ma=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ao=(e={x:0,y:0},t,n)=>({x:Ma(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ma(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function cC(e,t,n){const{width:o,height:a}=vi(n),{x:s,y:u}=n.internals.positionAbsolute;return Ao(e,[[s,u],[s+o,u+a]],t)}const Yx=(e,t,n)=>e<t?Ma(Math.abs(e-t),1,t)/t:e>n?-Ma(Math.abs(e-n),1,t)/t:0,dC=(e,t,n=15,o=40)=>{const a=Yx(e.x,o,t.width-o)*n,s=Yx(e.y,o,t.height-o)*n;return[a,s]},pc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),l0=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),_c=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ea=(e,t=[0,0])=>{var a,s;const{x:n,y:o}=O0(e)?e.internals.positionAbsolute:eu(e,t);return{x:n,y:o,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Wl=(e,t=[0,0])=>{var a,s;const{x:n,y:o}=O0(e)?e.internals.positionAbsolute:eu(e,t);return{x:n,y:o,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:o+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},pC=(e,t)=>_c(pc(l0(e),l0(t))),zs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Qx=e=>Pn(e.width)&&Pn(e.height)&&Pn(e.x)&&Pn(e.y),Pn=e=>!isNaN(e)&&isFinite(e),ET=(e,t)=>{},ru=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),nu=({x:e,y:t},[n,o,a],s=!1,u=[1,1])=>{const c={x:(e-n)/a,y:(t-o)/a};return s?ru(c,u):c},Ul=({x:e,y:t},[n,o,a])=>({x:e*a+n,y:t*a+o});function ga(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function IT(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=ga(e,n),a=ga(e,t);return{top:o,right:a,bottom:o,left:a,x:a*2,y:o*2}}if(typeof e=="object"){const o=ga(e.top??e.y??0,n),a=ga(e.bottom??e.y??0,n),s=ga(e.left??e.x??0,t),u=ga(e.right??e.x??0,t);return{top:o,right:u,bottom:a,left:s,x:s+u,y:o+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function jT(e,t,n,o,a,s){const{x:u,y:c}=Ul(e,[t,n,o]),{x:p,y:_}=Ul({x:e.x+e.width,y:e.y+e.height},[t,n,o]),h=a-p,f=s-_;return{left:Math.floor(u),top:Math.floor(c),right:Math.floor(h),bottom:Math.floor(f)}}const z0=(e,t,n,o,a,s)=>{const u=IT(s,t,n),c=(t-u.x)/e.width,p=(n-u.y)/e.height,_=Math.min(c,p),h=Ma(_,o,a),f=e.x+e.width/2,y=e.y+e.height/2,v=t/2-f*h,w=n/2-y*h,k=jT(e,v,w,h,t,n),x={left:Math.min(k.left-u.left,0),top:Math.min(k.top-u.top,0),right:Math.min(k.right-u.right,0),bottom:Math.min(k.bottom-u.bottom,0)};return{x:v-x.left+x.right,y:w-x.top+x.bottom,zoom:h}},Bs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ia(e){return e!=null&&e!=="parent"}function vi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function _C(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function fC(e,t={width:0,height:0},n,o,a){const s={...e},u=o.get(n);if(u){const c=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*c[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*c[1]}return s}function Xx(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NT(){let e,t;return{promise:new Promise((o,a)=>{e=o,t=a}),resolve:e,reject:t}}function TT(e){return{...oC,...e||{}}}function js(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:a}){const{x:s,y:u}=Rn(e),c=nu({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},o),{x:p,y:_}=n?ru(c,t):c;return{xSnapped:p,ySnapped:_,...c}}const B0=e=>({width:e.offsetWidth,height:e.offsetHeight}),mC=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},PT=["INPUT","SELECT","TEXTAREA"];function hC(e){var o,a;const t=((a=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:PT.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const yC=e=>"clientX"in e,Rn=(e,t)=>{var s,u;const n=yC(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Zx=(e,t,n,o,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(c.left-n.left)/o,y:(c.top-n.top)/o,...B0(u)}})};function gC({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:c}){const p=e*.125+a*.375+u*.375+n*.125,_=t*.125+s*.375+c*.375+o*.125,h=Math.abs(p-e),f=Math.abs(_-t);return[p,_,h,f]}function yl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Jx({pos:e,x1:t,y1:n,x2:o,y2:a,c:s}){switch(e){case He.Left:return[t-yl(t-o,s),n];case He.Right:return[t+yl(o-t,s),n];case He.Top:return[t,n-yl(n-a,s)];case He.Bottom:return[t,n+yl(a-n,s)]}}function H0({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:o,targetY:a,targetPosition:s=He.Top,curvature:u=.25}){const[c,p]=Jx({pos:n,x1:e,y1:t,x2:o,y2:a,c:u}),[_,h]=Jx({pos:s,x1:o,y1:a,x2:e,y2:t,c:u}),[f,y,v,w]=gC({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:c,sourceControlY:p,targetControlX:_,targetControlY:h});return[`M${e},${t} C${c},${p} ${_},${h} ${o},${a}`,f,y,v,w]}function vC({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(o-t)/2,c=o<t?o+u:o-u;return[s,c,a,u]}function RT({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return o;const u=a&&n?o+1e3:o,c=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+c}function AT({sourceNode:e,targetNode:t,width:n,height:o,transform:a}){const s=pc(Wl(e),Wl(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:o/a[2]};return zs(u,_c(s))>0}const FT=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,LT=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),c0=(e,t,n={})=>{if(!e.source||!e.target)return t;const o=n.getEdgeId||FT;let a;return uC(e)?a={...e}:a={...e,id:o(e)},LT(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function $0({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[a,s,u,c]=vC({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,a,s,u,c]}const e1={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},DT=({source:e,sourcePosition:t=He.Bottom,target:n})=>t===He.Left||t===He.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},t1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function OT({source:e,sourcePosition:t=He.Bottom,target:n,targetPosition:o=He.Top,center:a,offset:s,stepPosition:u}){const c=e1[t],p=e1[o],_={x:e.x+c.x*s,y:e.y+c.y*s},h={x:n.x+p.x*s,y:n.y+p.y*s},f=DT({source:_,sourcePosition:t,target:h}),y=f.x!==0?"x":"y",v=f[y];let w=[],k,x;const q={x:0,y:0},E={x:0,y:0},[,,b,M]=vC({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[y]*p[y]===-1){y==="x"?(k=a.x??_.x+(h.x-_.x)*u,x=a.y??(_.y+h.y)/2):(k=a.x??(_.x+h.x)/2,x=a.y??_.y+(h.y-_.y)*u);const C=[{x:k,y:_.y},{x:k,y:h.y}],N=[{x:_.x,y:x},{x:h.x,y:x}];c[y]===v?w=y==="x"?C:N:w=y==="x"?N:C}else{const C=[{x:_.x,y:h.y}],N=[{x:h.x,y:_.y}];if(y==="x"?w=c.x===v?N:C:w=c.y===v?C:N,t===o){const D=Math.abs(e[y]-n[y]);if(D<=s){const Z=Math.min(s-1,s-D);c[y]===v?q[y]=(_[y]>e[y]?-1:1)*Z:E[y]=(h[y]>n[y]?-1:1)*Z}}if(t!==o){const D=y==="x"?"y":"x",Z=c[y]===p[D],T=_[D]>h[D],K=_[D]<h[D];(c[y]===1&&(!Z&&T||Z&&K)||c[y]!==1&&(!Z&&K||Z&&T))&&(w=y==="x"?C:N)}const A={x:_.x+q.x,y:_.y+q.y},P={x:h.x+E.x,y:h.y+E.y},z=Math.max(Math.abs(A.x-w[0].x),Math.abs(P.x-w[0].x)),F=Math.max(Math.abs(A.y-w[0].y),Math.abs(P.y-w[0].y));z>=F?(k=(A.x+P.x)/2,x=w[0].y):(k=w[0].x,x=(A.y+P.y)/2)}return[[e,{x:_.x+q.x,y:_.y+q.y},...w,{x:h.x+E.x,y:h.y+E.y},n],k,x,b,M]}function VT(e,t,n,o){const a=Math.min(t1(e,t)/2,t1(t,n)/2,o),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const _=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+a*_},${u}Q ${s},${u} ${s},${u+a*h}`}const c=e.x<n.x?1:-1,p=e.y<n.y?-1:1;return`L ${s},${u+a*p}Q ${s},${u} ${s+a*c},${u}`}function Gl({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:o,targetY:a,targetPosition:s=He.Top,borderRadius:u=5,centerX:c,centerY:p,offset:_=20,stepPosition:h=.5}){const[f,y,v,w,k]=OT({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:a},targetPosition:s,center:{x:c,y:p},offset:_,stepPosition:h});return[f.reduce((q,E,b)=>{let M="";return b>0&&b<f.length-1?M=VT(f[b-1],E,f[b+1],u):M=`${b===0?"M":"L"}${E.x} ${E.y}`,q+=M,q},""),y,v,w,k]}function r1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function zT(e){var f;const{sourceNode:t,targetNode:n}=e;if(!r1(t)||!r1(n))return null;const o=t.internals.handleBounds||n1(t.handles),a=n.internals.handleBounds||n1(n.handles),s=i1((o==null?void 0:o.source)??[],e.sourceHandle),u=i1(e.connectionMode===Ca.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(f=e.onError)==null||f.call(e,"008",Xn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(s==null?void 0:s.position)||He.Bottom,p=(u==null?void 0:u.position)||He.Top,_=Fo(t,s,c),h=Fo(n,u,p);return{sourceX:_.x,sourceY:_.y,targetX:h.x,targetY:h.y,sourcePosition:c,targetPosition:p}}function n1(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Fo(e,t,n=He.Left,o=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:c}=t??vi(e);if(o)return{x:a+u/2,y:s+c/2};switch((t==null?void 0:t.position)??n){case He.Top:return{x:a+u/2,y:s};case He.Right:return{x:a+u,y:s+c/2};case He.Bottom:return{x:a+u/2,y:s+c};case He.Left:return{x:a,y:s+c/2}}}function i1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function d0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function BT(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,c)=>([c.markerStart||o,c.markerEnd||a].forEach(p=>{if(p&&typeof p=="object"){const _=d0(p,t);s.has(_)||(u.push({id:_,color:p.color||n,...p}),s.add(_))}}),u),[]).sort((u,c)=>u.id.localeCompare(c.id))}const xC=1e3,HT=10,W0={nodeOrigin:[0,0],nodeExtent:Os,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},$T={...W0,checkEquality:!0};function U0(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function WT(e,t,n){const o=U0(W0,n);for(const a of e.values())if(a.parentId)K0(a,e,t,o);else{const s=eu(a,o.nodeOrigin),u=Ia(a.extent)?a.extent:o.nodeExtent,c=Ao(s,u,vi(a));a.internals.positionAbsolute=c}}function UT(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],o=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&o.push(s)}return{source:n,target:o}}function G0(e){return e==="manual"}function p0(e,t,n,o={}){var _,h;const a=U0($T,o),s={i:0},u=new Map(t),c=a!=null&&a.elevateNodesOnSelect&&!G0(a.zIndexMode)?xC:0;let p=e.length>0;t.clear(),n.clear();for(const f of e){let y=u.get(f.id);if(a.checkEquality&&f===(y==null?void 0:y.internals.userNode))t.set(f.id,y);else{const v=eu(f,a.nodeOrigin),w=Ia(f.extent)?f.extent:a.nodeExtent,k=Ao(v,w,vi(f));y={...a.defaults,...f,measured:{width:(_=f.measured)==null?void 0:_.width,height:(h=f.measured)==null?void 0:h.height},internals:{positionAbsolute:k,handleBounds:UT(f,y),z:wC(f,c,a.zIndexMode),userNode:f}},t.set(f.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),f.parentId&&K0(y,t,n,o,s)}return p}function GT(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function K0(e,t,n,o,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:c,zIndexMode:p}=U0(W0,o),_=e.parentId,h=t.get(_);if(!h){console.warn(`Parent node ${_} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}GT(e,n),a&&!h.parentId&&h.internals.rootParentIndex===void 0&&p==="auto"&&(h.internals.rootParentIndex=++a.i,h.internals.z=h.internals.z+a.i*HT),a&&h.internals.rootParentIndex!==void 0&&(a.i=h.internals.rootParentIndex);const f=s&&!G0(p)?xC:0,{x:y,y:v,z:w}=KT(e,h,u,c,f,p),{positionAbsolute:k}=e.internals,x=y!==k.x||v!==k.y;(x||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:y,y:v}:k,z:w}})}function wC(e,t,n){const o=Pn(e.zIndex)?e.zIndex:0;return G0(n)?o:o+(e.selected?t:0)}function KT(e,t,n,o,a,s){const{x:u,y:c}=t.internals.positionAbsolute,p=vi(e),_=eu(e,n),h=Ia(e.extent)?Ao(_,e.extent,p):_;let f=Ao({x:u+h.x,y:c+h.y},o,p);e.extent==="parent"&&(f=cC(f,p,t));const y=wC(e,a,s),v=t.internals.z??0;return{x:f.x,y:f.y,z:v>=y?v+1:y}}function Y0(e,t,n,o=[0,0]){var u;const a=[],s=new Map;for(const c of e){const p=t.get(c.parentId);if(!p)continue;const _=((u=s.get(c.parentId))==null?void 0:u.expandedRect)??Ea(p),h=pC(_,c.rect);s.set(c.parentId,{expandedRect:h,parent:p})}return s.size>0&&s.forEach(({expandedRect:c,parent:p},_)=>{var b;const h=p.internals.positionAbsolute,f=vi(p),y=p.origin??o,v=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,w=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,k=Math.max(f.width,Math.round(c.width)),x=Math.max(f.height,Math.round(c.height)),q=(k-f.width)*y[0],E=(x-f.height)*y[1];(v>0||w>0||q||E)&&(a.push({id:_,type:"position",position:{x:p.position.x-v+q,y:p.position.y-w+E}}),(b=n.get(_))==null||b.forEach(M=>{e.some(j=>j.id===M.id)||a.push({id:M.id,type:"position",position:{x:M.position.x+v,y:M.position.y+w}})})),(f.width<c.width||f.height<c.height||v||w)&&a.push({id:_,type:"dimensions",setAttributes:!0,dimensions:{width:k+(v?y[0]*v-q:0),height:x+(w?y[1]*w-E:0)}})}),a}function YT(e,t,n,o,a,s,u){const c=o==null?void 0:o.querySelector(".xyflow__viewport");let p=!1;if(!c)return{changes:[],updatedInternals:p};const _=[],h=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(h.transform),y=[];for(const v of e.values()){const w=t.get(v.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),p=!0;continue}const k=B0(v.nodeElement),x=w.measured.width!==k.width||w.measured.height!==k.height;if(!!(k.width&&k.height&&(x||!w.internals.handleBounds||v.force))){const E=v.nodeElement.getBoundingClientRect(),b=Ia(w.extent)?w.extent:s;let{positionAbsolute:M}=w.internals;w.parentId&&w.extent==="parent"?M=cC(M,k,t.get(w.parentId)):b&&(M=Ao(M,b,k));const j={...w,measured:k,internals:{...w.internals,positionAbsolute:M,handleBounds:{source:Zx("source",v.nodeElement,E,f,w.id),target:Zx("target",v.nodeElement,E,f,w.id)}}};t.set(w.id,j),w.parentId&&K0(j,t,n,{nodeOrigin:a,zIndexMode:u}),p=!0,x&&(_.push({id:w.id,type:"dimensions",dimensions:k}),w.expandParent&&w.parentId&&y.push({id:w.id,parentId:w.parentId,rect:Ea(j,a)}))}}if(y.length>0){const v=Y0(y,t,n,a);_.push(...v)}return{changes:_,updatedInternals:p}}async function QT({delta:e,panZoom:t,transform:n,translateExtent:o,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],o),c=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(c)}function o1(e,t,n,o,a,s){let u=a;const c=o.get(u)||new Map;o.set(u,c.set(n,t)),u=`${a}-${e}`;const p=o.get(u)||new Map;if(o.set(u,p.set(n,t)),s){u=`${a}-${e}-${s}`;const _=o.get(u)||new Map;o.set(u,_.set(n,t))}}function bC(e,t,n){e.clear(),t.clear();for(const o of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:c=null}=o,p={edgeId:o.id,source:a,target:s,sourceHandle:u,targetHandle:c},_=`${a}-${u}--${s}-${c}`,h=`${s}-${c}--${a}-${u}`;o1("source",p,h,e,a,u),o1("target",p,_,e,s,c),t.set(o.id,o)}}function qC(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:qC(n,t):!1}function a1(e,t,n){var a;let o=e;do{if((a=o==null?void 0:o.matches)!=null&&a.call(o,t))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function XT(e,t,n,o){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===o)&&(!u.parentId||!qC(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const c=e.get(s);c&&a.set(s,{id:s,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return a}function kp({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var u,c,p;const a=[];for(const[_,h]of t){const f=(u=n.get(_))==null?void 0:u.internals.userNode;f&&a.push({...f,position:h.position,dragging:o})}if(!e)return[a[0],a];const s=(c=n.get(e))==null?void 0:c.internals.userNode;return[s?{...s,position:((p=t.get(e))==null?void 0:p.position)||s.position,dragging:o}:a[0],a]}function ZT({dragItems:e,snapGrid:t,x:n,y:o}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:o-a.distance.y},u=ru(s,t);return{x:u.x-s.x,y:u.y-s.y}}function JT({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:a}){let s={x:null,y:null},u=0,c=new Map,p=!1,_={x:0,y:0},h=null,f=!1,y=null,v=!1,w=!1,k=null;function x({noDragClassName:E,handleSelector:b,domNode:M,isSelectable:j,nodeId:C,nodeClickDistance:N=0}){y=Wr(M);function A({x:D,y:Z}){const{nodeLookup:T,nodeExtent:K,snapGrid:U,snapToGrid:ne,nodeOrigin:Y,onNodeDrag:Q,onSelectionDrag:ie,onError:B,updateNodePositions:J}=t();s={x:D,y:Z};let me=!1;const $=c.size>1,te=$&&K?l0(tu(c)):null,oe=$&&ne?ZT({dragItems:c,snapGrid:U,x:D,y:Z}):null;for(const[de,ue]of c){if(!T.has(de))continue;let ve={x:D-ue.distance.x,y:Z-ue.distance.y};ne&&(ve=oe?{x:Math.round(ve.x+oe.x),y:Math.round(ve.y+oe.y)}:ru(ve,U));let Ee=null;if($&&K&&!ue.extent&&te){const{positionAbsolute:je}=ue.internals,Te=je.x-te.x+K[0][0],Ae=je.x+ue.measured.width-te.x2+K[1][0],We=je.y-te.y+K[0][1],Be=je.y+ue.measured.height-te.y2+K[1][1];Ee=[[Te,We],[Ae,Be]]}const{position:Re,positionAbsolute:Ie}=lC({nodeId:de,nextPosition:ve,nodeLookup:T,nodeExtent:Ee||K,nodeOrigin:Y,onError:B});me=me||ue.position.x!==Re.x||ue.position.y!==Re.y,ue.position=Re,ue.internals.positionAbsolute=Ie}if(w=w||me,!!me&&(J(c,!0),k&&(o||Q||!C&&ie))){const[de,ue]=kp({nodeId:C,dragItems:c,nodeLookup:T});o==null||o(k,c,de,ue),Q==null||Q(k,de,ue),C||ie==null||ie(k,ue)}}async function P(){if(!h)return;const{transform:D,panBy:Z,autoPanSpeed:T,autoPanOnNodeDrag:K}=t();if(!K){p=!1,cancelAnimationFrame(u);return}const[U,ne]=dC(_,h,T);(U!==0||ne!==0)&&(s.x=(s.x??0)-U/D[2],s.y=(s.y??0)-ne/D[2],await Z({x:U,y:ne})&&A(s)),u=requestAnimationFrame(P)}function z(D){var $;const{nodeLookup:Z,multiSelectionActive:T,nodesDraggable:K,transform:U,snapGrid:ne,snapToGrid:Y,selectNodesOnDrag:Q,onNodeDragStart:ie,onSelectionDragStart:B,unselectNodesAndEdges:J}=t();f=!0,(!Q||!j)&&!T&&C&&(($=Z.get(C))!=null&&$.selected||J()),j&&Q&&C&&(e==null||e(C));const me=js(D.sourceEvent,{transform:U,snapGrid:ne,snapToGrid:Y,containerBounds:h});if(s=me,c=XT(Z,K,me,C),c.size>0&&(n||ie||!C&&B)){const[te,oe]=kp({nodeId:C,dragItems:c,nodeLookup:Z});n==null||n(D.sourceEvent,c,te,oe),ie==null||ie(D.sourceEvent,te,oe),C||B==null||B(D.sourceEvent,oe)}}const F=Bk().clickDistance(N).on("start",D=>{const{domNode:Z,nodeDragThreshold:T,transform:K,snapGrid:U,snapToGrid:ne}=t();h=(Z==null?void 0:Z.getBoundingClientRect())||null,v=!1,w=!1,k=D.sourceEvent,T===0&&z(D),s=js(D.sourceEvent,{transform:K,snapGrid:U,snapToGrid:ne,containerBounds:h}),_=Rn(D.sourceEvent,h)}).on("drag",D=>{const{autoPanOnNodeDrag:Z,transform:T,snapGrid:K,snapToGrid:U,nodeDragThreshold:ne,nodeLookup:Y}=t(),Q=js(D.sourceEvent,{transform:T,snapGrid:K,snapToGrid:U,containerBounds:h});if(k=D.sourceEvent,(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||C&&!Y.has(C))&&(v=!0),!v){if(!p&&Z&&f&&(p=!0,P()),!f){const ie=Rn(D.sourceEvent,h),B=ie.x-_.x,J=ie.y-_.y;Math.sqrt(B*B+J*J)>ne&&z(D)}(s.x!==Q.xSnapped||s.y!==Q.ySnapped)&&c&&f&&(_=Rn(D.sourceEvent,h),A(Q))}}).on("end",D=>{if(!(!f||v)&&(p=!1,f=!1,cancelAnimationFrame(u),c.size>0)){const{nodeLookup:Z,updateNodePositions:T,onNodeDragStop:K,onSelectionDragStop:U}=t();if(w&&(T(c,!1),w=!1),a||K||!C&&U){const[ne,Y]=kp({nodeId:C,dragItems:c,nodeLookup:Z,dragging:!1});a==null||a(D.sourceEvent,c,ne,Y),K==null||K(D.sourceEvent,ne,Y),C||U==null||U(D.sourceEvent,Y)}}}).filter(D=>{const Z=D.target;return!D.button&&(!E||!a1(Z,`.${E}`,M))&&(!b||a1(Z,b,M))});y.call(F)}function q(){y==null||y.on(".drag",null)}return{update:x,destroy:q}}function eP(e,t,n){const o=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())zs(a,Ea(s))>0&&o.push(s);return o}const tP=250;function rP(e,t,n,o){var c,p;let a=[],s=1/0;const u=eP(e,n,t+tP);for(const _ of u){const h=[...((c=_.internals.handleBounds)==null?void 0:c.source)??[],...((p=_.internals.handleBounds)==null?void 0:p.target)??[]];for(const f of h){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:y,y:v}=Fo(_,f,f.position,!0),w=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(v-e.y,2));w>t||(w<s?(a=[{...f,x:y,y:v}],s=w):w===s&&a.push({...f,x:y,y:v}))}}if(!a.length)return null;if(a.length>1){const _=o.type==="source"?"target":"source";return a.find(h=>h.type===_)??a[0]}return a[0]}function SC(e,t,n,o,a,s=!1){var _,h,f;const u=o.get(e);if(!u)return null;const c=a==="strict"?(_=u.internals.handleBounds)==null?void 0:_[t]:[...((h=u.internals.handleBounds)==null?void 0:h.source)??[],...((f=u.internals.handleBounds)==null?void 0:f.target)??[]],p=(n?c==null?void 0:c.find(y=>y.id===n):c==null?void 0:c[0])??null;return p&&s?{...p,...Fo(u,p,p.position,!0)}:p}function kC(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function nP(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const CC=()=>!0;function iP(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:c,nodeLookup:p,lib:_,autoPanOnConnect:h,flowId:f,panBy:y,cancelConnection:v,onConnectStart:w,onConnect:k,onConnectEnd:x,isValidConnection:q=CC,onReconnectEnd:E,updateConnection:b,getTransform:M,getFromHandle:j,autoPanSpeed:C,dragThreshold:N=1,handleDomNode:A}){const P=mC(e.target);let z=0,F;const{x:D,y:Z}=Rn(e),T=kC(s,A),K=c==null?void 0:c.getBoundingClientRect();let U=!1;if(!K||!T)return;const ne=SC(a,T,o,p,t);if(!ne)return;let Y=Rn(e,K),Q=!1,ie=null,B=!1,J=null;function me(){if(!h||!K)return;const[Re,Ie]=dC(Y,K,C);y({x:Re,y:Ie}),z=requestAnimationFrame(me)}const $={...ne,nodeId:a,type:T,position:ne.position},te=p.get(a);let de={inProgress:!0,isValid:null,from:Fo(te,$,He.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:te,to:Y,toHandle:null,toPosition:Kx[$.position],toNode:null,pointer:Y};function ue(){U=!0,b(de),w==null||w(e,{nodeId:a,handleId:o,handleType:T})}N===0&&ue();function ve(Re){if(!U){const{x:Be,y:st}=Rn(Re),at=Be-D,Mt=st-Z;if(!(at*at+Mt*Mt>N*N))return;ue()}if(!j()||!$){Ee(Re);return}const Ie=M();Y=Rn(Re,K),F=rP(nu(Y,Ie,!1,[1,1]),n,p,$),Q||(me(),Q=!0);const je=MC(Re,{handle:F,connectionMode:t,fromNodeId:a,fromHandleId:o,fromType:u?"target":"source",isValidConnection:q,doc:P,lib:_,flowId:f,nodeLookup:p});J=je.handleDomNode,ie=je.connection,B=nP(!!F,je.isValid);const Te=p.get(a),Ae=Te?Fo(Te,$,He.Left,!0):de.from,We={...de,from:Ae,isValid:B,to:je.toHandle&&B?Ul({x:je.toHandle.x,y:je.toHandle.y},Ie):Y,toHandle:je.toHandle,toPosition:B&&je.toHandle?je.toHandle.position:Kx[$.position],toNode:je.toHandle?p.get(je.toHandle.nodeId):null,pointer:Y};b(We),de=We}function Ee(Re){if(!("touches"in Re&&Re.touches.length>0)){if(U){(F||J)&&ie&&B&&(k==null||k(ie));const{inProgress:Ie,...je}=de,Te={...je,toPosition:de.toHandle?de.toPosition:null};x==null||x(Re,Te),s&&(E==null||E(Re,Te))}v(),cancelAnimationFrame(z),Q=!1,B=!1,ie=null,J=null,P.removeEventListener("mousemove",ve),P.removeEventListener("mouseup",Ee),P.removeEventListener("touchmove",ve),P.removeEventListener("touchend",Ee)}}P.addEventListener("mousemove",ve),P.addEventListener("mouseup",Ee),P.addEventListener("touchmove",ve),P.addEventListener("touchend",Ee)}function MC(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:s,doc:u,lib:c,flowId:p,isValidConnection:_=CC,nodeLookup:h}){const f=s==="target",y=t?u.querySelector(`.${c}-flow__handle[data-id="${p}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:v,y:w}=Rn(e),k=u.elementFromPoint(v,w),x=k!=null&&k.classList.contains(`${c}-flow__handle`)?k:y,q={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const E=kC(void 0,x),b=x.getAttribute("data-nodeid"),M=x.getAttribute("data-handleid"),j=x.classList.contains("connectable"),C=x.classList.contains("connectableend");if(!b||!E)return q;const N={source:f?b:o,sourceHandle:f?M:a,target:f?o:b,targetHandle:f?a:M};q.connection=N;const P=j&&C&&(n===Ca.Strict?f&&E==="source"||!f&&E==="target":b!==o||M!==a);q.isValid=P&&_(N),q.toHandle=SC(b,E,M,h,n,!0)}return q}const _0={onPointerDown:iP,isValid:MC};function oP({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const a=Wr(e);function s({translateExtent:c,width:p,height:_,zoomStep:h=1,pannable:f=!0,zoomable:y=!0,inversePan:v=!1}){const w=b=>{if(b.sourceEvent.type!=="wheel"||!t)return;const M=n(),j=b.sourceEvent.ctrlKey&&Bs()?10:1,C=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*h,N=M[2]*Math.pow(2,C*j);t.scaleTo(N)};let k=[0,0];const x=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(k=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},q=b=>{const M=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const j=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],C=[j[0]-k[0],j[1]-k[1]];k=j;const N=o()*Math.max(M[2],Math.log(M[2]))*(v?-1:1),A={x:M[0]-C[0]*N,y:M[1]-C[1]*N},P=[[0,0],[p,_]];t.setViewportConstrained({x:A.x,y:A.y,zoom:M[2]},P,c)},E=nC().on("start",x).on("zoom",f?q:null).on("zoom.wheel",y?w:null);a.call(E,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:In}}const fc=e=>({x:e.x,y:e.y,zoom:e.k}),Cp=({x:e,y:t,zoom:n})=>dc.translate(e,t).scale(n),va=(e,t)=>e.target.closest(`.${t}`),EC=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),aP=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Mp=(e,t=0,n=aP,o=()=>{})=>{const a=typeof t=="number"&&t>0;return a||o(),a?e.transition().duration(t).ease(n).on("end",o):e},IC=e=>{const t=e.ctrlKey&&Bs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function sP({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:c,onPanZoom:p,onPanZoomEnd:_}){return h=>{if(va(h,t))return h.ctrlKey&&h.preventDefault(),!1;h.preventDefault(),h.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(h.ctrlKey&&u){const x=In(h),q=IC(h),E=f*Math.pow(2,q);o.scaleTo(n,E,x,h);return}const y=h.deltaMode===1?20:1;let v=a===To.Vertical?0:h.deltaX*y,w=a===To.Horizontal?0:h.deltaY*y;!Bs()&&h.shiftKey&&a!==To.Vertical&&(v=h.deltaY*y,w=0),o.translateBy(n,-(v/f)*s,-(w/f)*s,{internal:!0});const k=fc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(p==null||p(h,k),e.panScrollTimeout=setTimeout(()=>{_==null||_(h,k),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c==null||c(h,k))}}function uP({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,a){const s=o.type==="wheel",u=!t&&s&&!o.ctrlKey,c=va(o,e);if(o.ctrlKey&&s&&c&&o.preventDefault(),u||c)return null;o.preventDefault(),n.call(this,o,a)}}function lP({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var s,u,c;if((s=o.sourceEvent)!=null&&s.internal)return;const a=fc(o.transform);e.mouseButton=((u=o.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((c=o.sourceEvent)==null?void 0:c.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,a))}}function cP({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:a}){return s=>{var u,c;e.usedRightMouseButton=!!(n&&EC(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||o([s.transform.x,s.transform.y,s.transform.k]),a&&!((c=s.sourceEvent)!=null&&c.internal)&&(a==null||a(s.sourceEvent,fc(s.transform)))}}function dP({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var c;if(!((c=u.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,s&&EC(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,o(!1),a)){const p=fc(u.transform);e.prevViewport=p,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,p)},n?150:0)}}}function pP({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:c,noPanClassName:p,lib:_,connectionInProgress:h}){return f=>{var x;const y=e||t,v=n&&f.ctrlKey,w=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(va(f,`${_}-flow__node`)||va(f,`${_}-flow__edge`)))return!0;if(!o&&!y&&!a&&!s&&!n||u||h&&!w||va(f,c)&&w||va(f,p)&&(!w||a&&w&&!e)||!n&&f.ctrlKey&&w)return!1;if(!n&&f.type==="touchstart"&&((x=f.touches)==null?void 0:x.length)>1)return f.preventDefault(),!1;if(!y&&!a&&!v&&w||!o&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(o)&&!o.includes(f.button)&&f.type==="mousedown")return!1;const k=Array.isArray(o)&&o.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||w)&&k}}function _P({domNode:e,minZoom:t,maxZoom:n,translateExtent:o,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:c,onDraggingChange:p}){const _={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=nC().scaleExtent([t,n]).translateExtent(o),y=Wr(e).call(f);E({x:a.x,y:a.y,zoom:Ma(a.zoom,t,n)},[[0,0],[h.width,h.height]],o);const v=y.on("wheel.zoom"),w=y.on("dblclick.zoom");f.wheelDelta(IC);function k(F,D){return y?new Promise(Z=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Is:jl).transform(Mp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>Z(!0)),F)}):Promise.resolve(!1)}function x({noWheelClassName:F,noPanClassName:D,onPaneContextMenu:Z,userSelectionActive:T,panOnScroll:K,panOnDrag:U,panOnScrollMode:ne,panOnScrollSpeed:Y,preventScrolling:Q,zoomOnPinch:ie,zoomOnScroll:B,zoomOnDoubleClick:J,zoomActivationKeyPressed:me,lib:$,onTransformChange:te,connectionInProgress:oe,paneClickDistance:de,selectionOnDrag:ue}){T&&!_.isZoomingOrPanning&&q();const ve=K&&!me&&!T;f.clickDistance(ue?1/0:!Pn(de)||de<0?0:de);const Ee=ve?sP({zoomPanValues:_,noWheelClassName:F,d3Selection:y,d3Zoom:f,panOnScrollMode:ne,panOnScrollSpeed:Y,zoomOnPinch:ie,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:c}):uP({noWheelClassName:F,preventScrolling:Q,d3ZoomHandler:v});if(y.on("wheel.zoom",Ee,{passive:!1}),!T){const Ie=lP({zoomPanValues:_,onDraggingChange:p,onPanZoomStart:u});f.on("start",Ie);const je=cP({zoomPanValues:_,panOnDrag:U,onPaneContextMenu:!!Z,onPanZoom:s,onTransformChange:te});f.on("zoom",je);const Te=dP({zoomPanValues:_,panOnDrag:U,panOnScroll:K,onPaneContextMenu:Z,onPanZoomEnd:c,onDraggingChange:p});f.on("end",Te)}const Re=pP({zoomActivationKeyPressed:me,panOnDrag:U,zoomOnScroll:B,panOnScroll:K,zoomOnDoubleClick:J,zoomOnPinch:ie,userSelectionActive:T,noPanClassName:D,noWheelClassName:F,lib:$,connectionInProgress:oe});f.filter(Re),J?y.on("dblclick.zoom",w):y.on("dblclick.zoom",null)}function q(){f.on("zoom",null)}async function E(F,D,Z){const T=Cp(F),K=f==null?void 0:f.constrain()(T,D,Z);return K&&await k(K),new Promise(U=>U(K))}async function b(F,D){const Z=Cp(F);return await k(Z,D),new Promise(T=>T(Z))}function M(F){if(y){const D=Cp(F),Z=y.property("__zoom");(Z.k!==F.zoom||Z.x!==F.x||Z.y!==F.y)&&(f==null||f.transform(y,D,null,{sync:!0}))}}function j(){const F=y?rC(y.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function C(F,D){return y?new Promise(Z=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Is:jl).scaleTo(Mp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>Z(!0)),F)}):Promise.resolve(!1)}function N(F,D){return y?new Promise(Z=>{f==null||f.interpolate((D==null?void 0:D.interpolate)==="linear"?Is:jl).scaleBy(Mp(y,D==null?void 0:D.duration,D==null?void 0:D.ease,()=>Z(!0)),F)}):Promise.resolve(!1)}function A(F){f==null||f.scaleExtent(F)}function P(F){f==null||f.translateExtent(F)}function z(F){const D=!Pn(F)||F<0?0:F;f==null||f.clickDistance(D)}return{update:x,destroy:q,setViewport:b,setViewportConstrained:E,getViewport:j,scaleTo:C,scaleBy:N,setScaleExtent:A,setTranslateExtent:P,syncViewport:M,setClickDistance:z}}var ja;(function(e){e.Line="line",e.Handle="handle"})(ja||(ja={}));function fP({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:a,affectsY:s}){const u=e-t,c=n-o,p=[u>0?1:u<0?-1:0,c>0?1:c<0?-1:0];return u&&a&&(p[0]=p[0]*-1),c&&s&&(p[1]=p[1]*-1),p}function s1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:a}}function $i(e,t){return Math.max(0,t-e)}function Wi(e,t){return Math.max(0,e-t)}function gl(e,t,n){return Math.max(0,t-e,e-n)}function u1(e,t){return e?!t:t}function mP(e,t,n,o,a,s,u,c){let{affectsX:p,affectsY:_}=t;const{isHorizontal:h,isVertical:f}=t,y=h&&f,{xSnapped:v,ySnapped:w}=n,{minWidth:k,maxWidth:x,minHeight:q,maxHeight:E}=o,{x:b,y:M,width:j,height:C,aspectRatio:N}=e;let A=Math.floor(h?v-e.pointerX:0),P=Math.floor(f?w-e.pointerY:0);const z=j+(p?-A:A),F=C+(_?-P:P),D=-s[0]*j,Z=-s[1]*C;let T=gl(z,k,x),K=gl(F,q,E);if(u){let Y=0,Q=0;p&&A<0?Y=$i(b+A+D,u[0][0]):!p&&A>0&&(Y=Wi(b+z+D,u[1][0])),_&&P<0?Q=$i(M+P+Z,u[0][1]):!_&&P>0&&(Q=Wi(M+F+Z,u[1][1])),T=Math.max(T,Y),K=Math.max(K,Q)}if(c){let Y=0,Q=0;p&&A>0?Y=Wi(b+A,c[0][0]):!p&&A<0&&(Y=$i(b+z,c[1][0])),_&&P>0?Q=Wi(M+P,c[0][1]):!_&&P<0&&(Q=$i(M+F,c[1][1])),T=Math.max(T,Y),K=Math.max(K,Q)}if(a){if(h){const Y=gl(z/N,q,E)*N;if(T=Math.max(T,Y),u){let Q=0;!p&&!_||p&&!_&&y?Q=Wi(M+Z+z/N,u[1][1])*N:Q=$i(M+Z+(p?A:-A)/N,u[0][1])*N,T=Math.max(T,Q)}if(c){let Q=0;!p&&!_||p&&!_&&y?Q=$i(M+z/N,c[1][1])*N:Q=Wi(M+(p?A:-A)/N,c[0][1])*N,T=Math.max(T,Q)}}if(f){const Y=gl(F*N,k,x)/N;if(K=Math.max(K,Y),u){let Q=0;!p&&!_||_&&!p&&y?Q=Wi(b+F*N+D,u[1][0])/N:Q=$i(b+(_?P:-P)*N+D,u[0][0])/N,K=Math.max(K,Q)}if(c){let Q=0;!p&&!_||_&&!p&&y?Q=$i(b+F*N,c[1][0])/N:Q=Wi(b+(_?P:-P)*N,c[0][0])/N,K=Math.max(K,Q)}}}P=P+(P<0?K:-K),A=A+(A<0?T:-T),a&&(y?z>F*N?P=(u1(p,_)?-A:A)/N:A=(u1(p,_)?-P:P)*N:h?(P=A/N,_=p):(A=P*N,p=_));const U=p?b+A:b,ne=_?M+P:M;return{width:j+(p?-A:A),height:C+(_?-P:P),x:s[0]*A*(p?-1:1)+U,y:s[1]*P*(_?-1:1)+ne}}const jC={width:0,height:0,x:0,y:0},hP={...jC,pointerX:0,pointerY:0,aspectRatio:1};function yP(e){return[[0,0],[e.measured.width,e.measured.height]]}function gP(e,t,n){const o=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,c=n[0]*s,p=n[1]*u;return[[o-c,a-p],[o+s-c,a+u-p]]}function vP({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:a}){const s=Wr(e);let u={controlDirection:s1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:_,boundaries:h,keepAspectRatio:f,resizeDirection:y,onResizeStart:v,onResize:w,onResizeEnd:k,shouldResize:x}){let q={...jC},E={...hP};u={boundaries:h,resizeDirection:y,keepAspectRatio:f,controlDirection:s1(_)};let b,M=null,j=[],C,N,A,P=!1;const z=Bk().on("start",F=>{const{nodeLookup:D,transform:Z,snapGrid:T,snapToGrid:K,nodeOrigin:U,paneDomNode:ne}=n();if(b=D.get(t),!b)return;M=(ne==null?void 0:ne.getBoundingClientRect())??null;const{xSnapped:Y,ySnapped:Q}=js(F.sourceEvent,{transform:Z,snapGrid:T,snapToGrid:K,containerBounds:M});q={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},E={...q,pointerX:Y,pointerY:Q,aspectRatio:q.width/q.height},C=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(C=D.get(b.parentId),N=C&&b.extent==="parent"?yP(C):void 0),j=[],A=void 0;for(const[ie,B]of D)if(B.parentId===t&&(j.push({id:ie,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const J=gP(B,b,B.origin??U);A?A=[[Math.min(J[0][0],A[0][0]),Math.min(J[0][1],A[0][1])],[Math.max(J[1][0],A[1][0]),Math.max(J[1][1],A[1][1])]]:A=J}v==null||v(F,{...q})}).on("drag",F=>{const{transform:D,snapGrid:Z,snapToGrid:T,nodeOrigin:K}=n(),U=js(F.sourceEvent,{transform:D,snapGrid:Z,snapToGrid:T,containerBounds:M}),ne=[];if(!b)return;const{x:Y,y:Q,width:ie,height:B}=q,J={},me=b.origin??K,{width:$,height:te,x:oe,y:de}=mP(E,u.controlDirection,U,u.boundaries,u.keepAspectRatio,me,N,A),ue=$!==ie,ve=te!==B,Ee=oe!==Y&&ue,Re=de!==Q&&ve;if(!Ee&&!Re&&!ue&&!ve)return;if((Ee||Re||me[0]===1||me[1]===1)&&(J.x=Ee?oe:q.x,J.y=Re?de:q.y,q.x=J.x,q.y=J.y,j.length>0)){const Ae=oe-Y,We=de-Q;for(const Be of j)Be.position={x:Be.position.x-Ae+me[0]*($-ie),y:Be.position.y-We+me[1]*(te-B)},ne.push(Be)}if((ue||ve)&&(J.width=ue&&(!u.resizeDirection||u.resizeDirection==="horizontal")?$:q.width,J.height=ve&&(!u.resizeDirection||u.resizeDirection==="vertical")?te:q.height,q.width=J.width,q.height=J.height),C&&b.expandParent){const Ae=me[0]*(J.width??0);J.x&&J.x<Ae&&(q.x=Ae,E.x=E.x-(J.x-Ae));const We=me[1]*(J.height??0);J.y&&J.y<We&&(q.y=We,E.y=E.y-(J.y-We))}const Ie=fP({width:q.width,prevWidth:ie,height:q.height,prevHeight:B,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),je={...q,direction:Ie};(x==null?void 0:x(F,je))!==!1&&(P=!0,w==null||w(F,je),o(J,ne))}).on("end",F=>{P&&(k==null||k(F,{...q}),a==null||a({...q}),P=!1)});s.call(z)}function p(){s.on(".drag",null)}return{update:c,destroy:p}}var Ep={exports:{}},Ip={},jp={exports:{}},Np={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function xP(){if(l1)return Np;l1=1;var e=Xs();function t(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function c(f,y){var v=y(),w=o({inst:{value:v,getSnapshot:y}}),k=w[0].inst,x=w[1];return s(function(){k.value=v,k.getSnapshot=y,p(k)&&x({inst:k})},[f,v,y]),a(function(){return p(k)&&x({inst:k}),f(function(){p(k)&&x({inst:k})})},[f]),u(v),v}function p(f){var y=f.getSnapshot;f=f.value;try{var v=y();return!n(f,v)}catch{return!0}}function _(f,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:c;return Np.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Np}var c1;function wP(){return c1||(c1=1,jp.exports=xP()),jp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function bP(){if(d1)return Ip;d1=1;var e=Xs(),t=wP();function n(_,h){return _===h&&(_!==0||1/_===1/h)||_!==_&&h!==h}var o=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,c=e.useMemo,p=e.useDebugValue;return Ip.useSyncExternalStoreWithSelector=function(_,h,f,y,v){var w=s(null);if(w.current===null){var k={hasValue:!1,value:null};w.current=k}else k=w.current;w=c(function(){function q(C){if(!E){if(E=!0,b=C,C=y(C),v!==void 0&&k.hasValue){var N=k.value;if(v(N,C))return M=N}return M=C}if(N=M,o(b,C))return N;var A=y(C);return v!==void 0&&v(N,A)?(b=C,N):(b=C,M=A)}var E=!1,b,M,j=f===void 0?null:f;return[function(){return q(h())},j===null?void 0:function(){return q(j())}]},[h,f,y,v]);var x=a(_,w[0],w[1]);return u(function(){k.hasValue=!0,k.value=x},[x]),p(x),x},Ip}var p1;function qP(){return p1||(p1=1,Ep.exports=bP()),Ep.exports}var SP=qP();const kP=Qs(SP),CP={},_1=e=>{let t;const n=new Set,o=(h,f)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const v=t;t=f??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(w=>w(t,v))}},a=()=>t,p={setState:o,getState:a,getInitialState:()=>_,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(CP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},_=t=e(o,a,p);return p},MP=e=>e?_1(e):_1,{useDebugValue:EP}=Ck,{useSyncExternalStoreWithSelector:IP}=kP,jP=e=>e;function NC(e,t=jP,n){const o=IP(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return EP(o),o}const f1=(e,t)=>{const n=MP(e),o=(a,s=t)=>NC(n,a,s);return Object.assign(o,n),o},NP=(e,t)=>e?f1(e,t):f1;function vt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,a]of e)if(!Object.is(a,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var TP=Mk();const PP=Qs(TP),mc=L.createContext(null),RP=mc.Provider,TC=Xn.error001();function tt(e,t){const n=L.useContext(mc);if(n===null)throw new Error(TC);return NC(n,e,t)}function xt(){const e=L.useContext(mc);if(e===null)throw new Error(TC);return L.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const m1={display:"none"},AP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},PC="react-flow__node-desc",RC="react-flow__edge-desc",FP="react-flow__aria-live",LP=e=>e.ariaLiveMessage,DP=e=>e.ariaLabelConfig;function OP({rfId:e}){const t=tt(LP);return d.jsx("div",{id:`${FP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:AP,children:t})}function VP({rfId:e,disableKeyboardA11y:t}){const n=tt(DP);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${PC}-${e}`,style:m1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${RC}-${e}`,style:m1,children:n["edge.a11yDescription.default"]}),!t&&d.jsx(OP,{rfId:e})]})}const Na=L.forwardRef(({position:e="top-left",children:t,className:n,style:o,...a},s)=>{const u=`${e}`.split("-");return d.jsx("div",{className:Lt(["react-flow__panel",n,...u]),style:o,ref:s,...a,children:t})});Na.displayName="Panel";function zP({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:d.jsx(Na,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const BP=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},vl=e=>e.id;function HP(e,t){return vt(e.selectedNodes.map(vl),t.selectedNodes.map(vl))&&vt(e.selectedEdges.map(vl),t.selectedEdges.map(vl))}function $P({onSelectionChange:e}){const t=xt(),{selectedNodes:n,selectedEdges:o}=tt(BP,HP);return L.useEffect(()=>{const a={nodes:n,edges:o};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,o,e]),null}const WP=e=>!!e.onSelectionChangeHandlers;function UP({onSelectionChange:e}){const t=tt(WP);return e||t?d.jsx($P,{onSelectionChange:e}):null}const AC=[0,0],GP={x:0,y:0,zoom:1},KP=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],h1=[...KP,"rfId"],YP=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),y1={translateExtent:Os,nodeOrigin:AC,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function QP(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:c,setDefaultNodesAndEdges:p}=tt(YP,vt),_=xt();L.useEffect(()=>(p(e.defaultNodes,e.defaultEdges),()=>{h.current=y1,c()}),[]);const h=L.useRef(y1);return L.useEffect(()=>{for(const f of h1){const y=e[f],v=h.current[f];y!==v&&(typeof e[f]>"u"||(f==="nodes"?t(y):f==="edges"?n(y):f==="minZoom"?o(y):f==="maxZoom"?a(y):f==="translateExtent"?s(y):f==="nodeExtent"?u(y):f==="ariaLabelConfig"?_.setState({ariaLabelConfig:TT(y)}):f==="fitView"?_.setState({fitViewQueued:y}):f==="fitViewOptions"?_.setState({fitViewOptions:y}):_.setState({[f]:y})))}h.current=e},h1.map(f=>e[f])),null}function g1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function XP(e){var o;const[t,n]=L.useState(e==="system"?null:e);return L.useEffect(()=>{if(e!=="system"){n(e);return}const a=g1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(o=g1())!=null&&o.matches?"dark":"light"}const v1=typeof document<"u"?document:null;function Hs(e=null,t={target:v1,actInsideInputWithModifier:!0}){const[n,o]=L.useState(!1),a=L.useRef(!1),s=L.useRef(new Set([])),[u,c]=L.useMemo(()=>{if(e!==null){const _=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=_.reduce((f,y)=>f.concat(...y),[]);return[_,h]}return[[],[]]},[e]);return L.useEffect(()=>{const p=(t==null?void 0:t.target)??v1,_=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const h=v=>{var x,q;if(a.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!a.current||a.current&&!_)&&hC(v))return!1;const k=w1(v.code,c);if(s.current.add(v[k]),x1(u,s.current,!1)){const E=((q=(x=v.composedPath)==null?void 0:x.call(v))==null?void 0:q[0])||v.target,b=(E==null?void 0:E.nodeName)==="BUTTON"||(E==null?void 0:E.nodeName)==="A";t.preventDefault!==!1&&(a.current||!b)&&v.preventDefault(),o(!0)}},f=v=>{const w=w1(v.code,c);x1(u,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(v[w]),v.key==="Meta"&&s.current.clear(),a.current=!1},y=()=>{s.current.clear(),o(!1)};return p==null||p.addEventListener("keydown",h),p==null||p.addEventListener("keyup",f),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{p==null||p.removeEventListener("keydown",h),p==null||p.removeEventListener("keyup",f),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,o]),n}function x1(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(a=>t.has(a)))}function w1(e,t){return t.includes(e)?"code":"key"}const ZP=()=>{const e=xt();return L.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??o,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{const{width:o,height:a,minZoom:s,maxZoom:u,panZoom:c}=e.getState(),p=z0(t,o,a,s,u,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(p,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:c,y:p}=u.getBoundingClientRect(),_={x:t.x-c,y:t.y-p},h=n.snapGrid??a,f=n.snapToGrid??s;return nu(_,o,f,h)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:a,y:s}=o.getBoundingClientRect(),u=Ul(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function FC(e,t){const n=[],o=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")o.set(s.id,[s]);else{const u=o.get(s.id);u?u.push(s):o.set(s.id,[s])}for(const s of t){const u=o.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const c={...s};for(const p of u)JP(p,c);n.push(c)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function JP(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function LC(e,t){return FC(e,t)}function DC(e,t){return FC(e,t)}function Io(e,t){return{id:e,type:"select",selected:t}}function xa(e,t=new Set,n=!1){const o=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),o.push(Io(s.id,u)))}return o}function b1({items:e=[],lookup:t}){var a;const n=[],o=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const c=t.get(u.id),p=((a=c==null?void 0:c.internals)==null?void 0:a.userNode)??c;p!==void 0&&p!==u&&n.push({id:u.id,item:u,type:"replace"}),p===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)o.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function q1(e){return{id:e.id,type:"remove"}}const S1=e=>bT(e),eR=e=>uC(e);function OC(e){return L.forwardRef(e)}const tR=typeof window<"u"?L.useLayoutEffect:L.useEffect;function k1(e){const[t,n]=L.useState(BigInt(0)),[o]=L.useState(()=>rR(()=>n(a=>a+BigInt(1))));return tR(()=>{const a=o.get();a.length&&(e(a),o.reset())},[t]),o}function rR(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const VC=L.createContext(null);function nR({children:e}){const t=xt(),n=L.useCallback(c=>{const{nodes:p=[],setNodes:_,hasDefaultNodes:h,onNodesChange:f,nodeLookup:y,fitViewQueued:v,onNodesChangeMiddlewareMap:w}=t.getState();let k=p;for(const q of c)k=typeof q=="function"?q(k):q;let x=b1({items:k,lookup:y});for(const q of w.values())x=q(x);h&&_(k),x.length>0?f==null||f(x):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:q,nodes:E,setNodes:b}=t.getState();q&&b(E)})},[]),o=k1(n),a=L.useCallback(c=>{const{edges:p=[],setEdges:_,hasDefaultEdges:h,onEdgesChange:f,edgeLookup:y}=t.getState();let v=p;for(const w of c)v=typeof w=="function"?w(v):w;h?_(v):f&&f(b1({items:v,lookup:y}))},[]),s=k1(a),u=L.useMemo(()=>({nodeQueue:o,edgeQueue:s}),[]);return d.jsx(VC.Provider,{value:u,children:e})}function iR(){const e=L.useContext(VC);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const oR=e=>!!e.panZoom;function Q0(){const e=ZP(),t=xt(),n=iR(),o=tt(oR),a=L.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),u=f=>{n.nodeQueue.push(f)},c=f=>{n.edgeQueue.push(f)},p=f=>{var q,E;const{nodeLookup:y,nodeOrigin:v}=t.getState(),w=S1(f)?f:y.get(f.id),k=w.parentId?fC(w.position,w.measured,w.parentId,y,v):w.position,x={...w,position:k,width:((q=w.measured)==null?void 0:q.width)??w.width,height:((E=w.measured)==null?void 0:E.height)??w.height};return Ea(x)},_=(f,y,v={replace:!1})=>{u(w=>w.map(k=>{if(k.id===f){const x=typeof y=="function"?y(k):y;return v.replace&&S1(x)?x:{...k,...x}}return k}))},h=(f,y,v={replace:!1})=>{c(w=>w.map(k=>{if(k.id===f){const x=typeof y=="function"?y(k):y;return v.replace&&eR(x)?x:{...k,...x}}return k}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var y;return(y=s(f))==null?void 0:y.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(y=>({...y}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:u,setEdges:c,addNodes:f=>{const y=Array.isArray(f)?f:[f];n.nodeQueue.push(v=>[...v,...y])},addEdges:f=>{const y=Array.isArray(f)?f:[f];n.edgeQueue.push(v=>[...v,...y])},toObject:()=>{const{nodes:f=[],edges:y=[],transform:v}=t.getState(),[w,k,x]=v;return{nodes:f.map(q=>({...q})),edges:y.map(q=>({...q})),viewport:{x:w,y:k,zoom:x}}},deleteElements:async({nodes:f=[],edges:y=[]})=>{const{nodes:v,edges:w,onNodesDelete:k,onEdgesDelete:x,triggerNodeChanges:q,triggerEdgeChanges:E,onDelete:b,onBeforeDelete:M}=t.getState(),{nodes:j,edges:C}=await MT({nodesToRemove:f,edgesToRemove:y,nodes:v,edges:w,onBeforeDelete:M}),N=C.length>0,A=j.length>0;if(N){const P=C.map(q1);x==null||x(C),E(P)}if(A){const P=j.map(q1);k==null||k(j),q(P)}return(A||N)&&(b==null||b({nodes:j,edges:C})),{deletedNodes:j,deletedEdges:C}},getIntersectingNodes:(f,y=!0,v)=>{const w=Qx(f),k=w?f:p(f),x=v!==void 0;return k?(v||t.getState().nodes).filter(q=>{const E=t.getState().nodeLookup.get(q.id);if(E&&!w&&(q.id===f.id||!E.internals.positionAbsolute))return!1;const b=Ea(x?q:E),M=zs(b,k);return y&&M>0||M>=b.width*b.height||M>=k.width*k.height}):[]},isNodeIntersecting:(f,y,v=!0)=>{const k=Qx(f)?f:p(f);if(!k)return!1;const x=zs(k,y);return v&&x>0||x>=y.width*y.height||x>=k.width*k.height},updateNode:_,updateNodeData:(f,y,v={replace:!1})=>{_(f,w=>{const k=typeof y=="function"?y(w):y;return v.replace?{...w,data:k}:{...w,data:{...w.data,...k}}},v)},updateEdge:h,updateEdgeData:(f,y,v={replace:!1})=>{h(f,w=>{const k=typeof y=="function"?y(w):y;return v.replace?{...w,data:k}:{...w,data:{...w.data,...k}}},v)},getNodesBounds:f=>{const{nodeLookup:y,nodeOrigin:v}=t.getState();return qT(f,{nodeLookup:y,nodeOrigin:v})},getHandleConnections:({type:f,id:y,nodeId:v})=>{var w;return Array.from(((w=t.getState().connectionLookup.get(`${v}-${f}${y?`-${y}`:""}`))==null?void 0:w.values())??[])},getNodeConnections:({type:f,handleId:y,nodeId:v})=>{var w;return Array.from(((w=t.getState().connectionLookup.get(`${v}${f?y?`-${f}-${y}`:`-${f}`:""}`))==null?void 0:w.values())??[])},fitView:async f=>{const y=t.getState().fitViewResolver??NT();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:y}),n.nodeQueue.push(v=>[...v]),y.promise}}},[]);return L.useMemo(()=>({...a,...e,viewportInitialized:o}),[o])}const C1=e=>e.selected,aR=typeof window<"u"?window:void 0;function sR({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=xt(),{deleteElements:o}=Q0(),a=Hs(e,{actInsideInputWithModifier:!1}),s=Hs(t,{target:aR});L.useEffect(()=>{if(a){const{edges:u,nodes:c}=n.getState();o({nodes:c.filter(C1),edges:u.filter(C1)}),n.setState({nodesSelectionActive:!1})}},[a]),L.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function uR(e){const t=xt();L.useEffect(()=>{const n=()=>{var a,s,u,c;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const o=B0(e.current);(o.height===0||o.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",Xn.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const hc={position:"absolute",width:"100%",height:"100%",top:0,left:0},lR=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function cR({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=To.Free,zoomOnDoubleClick:u=!0,panOnDrag:c=!0,defaultViewport:p,translateExtent:_,minZoom:h,maxZoom:f,zoomActivationKeyCode:y,preventScrolling:v=!0,children:w,noWheelClassName:k,noPanClassName:x,onViewportChange:q,isControlledViewport:E,paneClickDistance:b,selectionOnDrag:M}){const j=xt(),C=L.useRef(null),{userSelectionActive:N,lib:A,connectionInProgress:P}=tt(lR,vt),z=Hs(y),F=L.useRef();uR(C);const D=L.useCallback(Z=>{q==null||q({x:Z[0],y:Z[1],zoom:Z[2]}),E||j.setState({transform:Z})},[q,E]);return L.useEffect(()=>{if(C.current){F.current=_P({domNode:C.current,minZoom:h,maxZoom:f,translateExtent:_,viewport:p,onDraggingChange:U=>j.setState({paneDragging:U}),onPanZoomStart:(U,ne)=>{const{onViewportChangeStart:Y,onMoveStart:Q}=j.getState();Q==null||Q(U,ne),Y==null||Y(ne)},onPanZoom:(U,ne)=>{const{onViewportChange:Y,onMove:Q}=j.getState();Q==null||Q(U,ne),Y==null||Y(ne)},onPanZoomEnd:(U,ne)=>{const{onViewportChangeEnd:Y,onMoveEnd:Q}=j.getState();Q==null||Q(U,ne),Y==null||Y(ne)}});const{x:Z,y:T,zoom:K}=F.current.getViewport();return j.setState({panZoom:F.current,transform:[Z,T,K],domNode:C.current.closest(".react-flow")}),()=>{var U;(U=F.current)==null||U.destroy()}}},[]),L.useEffect(()=>{var Z;(Z=F.current)==null||Z.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:c,zoomActivationKeyPressed:z,preventScrolling:v,noPanClassName:x,userSelectionActive:N,noWheelClassName:k,lib:A,onTransformChange:D,connectionInProgress:P,selectionOnDrag:M,paneClickDistance:b})},[e,t,n,o,a,s,u,c,z,v,x,N,k,A,D,P,M,b]),d.jsx("div",{className:"react-flow__renderer",ref:C,style:hc,children:w})}const dR=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function pR(){const{userSelectionActive:e,userSelectionRect:t}=tt(dR,vt);return e&&t?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Tp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},_R=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function fR({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Vs.Full,panOnDrag:o,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:c,onPaneClick:p,onPaneContextMenu:_,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:y,onPaneMouseLeave:v,children:w}){const k=xt(),{userSelectionActive:x,elementsSelectable:q,dragging:E,connectionInProgress:b}=tt(_R,vt),M=q&&(e||x),j=L.useRef(null),C=L.useRef(),N=L.useRef(new Set),A=L.useRef(new Set),P=L.useRef(!1),z=Y=>{if(P.current||b){P.current=!1;return}p==null||p(Y),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},F=Y=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){Y.preventDefault();return}_==null||_(Y)},D=h?Y=>h(Y):void 0,Z=Y=>{P.current&&(Y.stopPropagation(),P.current=!1)},T=Y=>{var te,oe;const{domNode:Q}=k.getState();if(C.current=Q==null?void 0:Q.getBoundingClientRect(),!C.current)return;const ie=Y.target===j.current;if(!ie&&!!Y.target.closest(".nokey")||!e||!(s&&ie||t)||Y.button!==0||!Y.isPrimary)return;(oe=(te=Y.target)==null?void 0:te.setPointerCapture)==null||oe.call(te,Y.pointerId),P.current=!1;const{x:me,y:$}=Rn(Y.nativeEvent,C.current);k.setState({userSelectionRect:{width:0,height:0,startX:me,startY:$,x:me,y:$}}),ie||(Y.stopPropagation(),Y.preventDefault())},K=Y=>{const{userSelectionRect:Q,transform:ie,nodeLookup:B,edgeLookup:J,connectionLookup:me,triggerNodeChanges:$,triggerEdgeChanges:te,defaultEdgeOptions:oe,resetSelectedElements:de}=k.getState();if(!C.current||!Q)return;const{x:ue,y:ve}=Rn(Y.nativeEvent,C.current),{startX:Ee,startY:Re}=Q;if(!P.current){const We=t?0:a;if(Math.hypot(ue-Ee,ve-Re)<=We)return;de(),u==null||u(Y)}P.current=!0;const Ie={startX:Ee,startY:Re,x:ue<Ee?ue:Ee,y:ve<Re?ve:Re,width:Math.abs(ue-Ee),height:Math.abs(ve-Re)},je=N.current,Te=A.current;N.current=new Set(V0(B,Ie,ie,n===Vs.Partial,!0).map(We=>We.id)),A.current=new Set;const Ae=(oe==null?void 0:oe.selectable)??!0;for(const We of N.current){const Be=me.get(We);if(Be)for(const{edgeId:st}of Be.values()){const at=J.get(st);at&&(at.selectable??Ae)&&A.current.add(st)}}if(!Xx(je,N.current)){const We=xa(B,N.current,!0);$(We)}if(!Xx(Te,A.current)){const We=xa(J,A.current);te(We)}k.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},U=Y=>{var Q,ie;Y.button===0&&((ie=(Q=Y.target)==null?void 0:Q.releasePointerCapture)==null||ie.call(Q,Y.pointerId),!x&&Y.target===j.current&&k.getState().userSelectionRect&&(z==null||z(Y)),k.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(c==null||c(Y),k.setState({nodesSelectionActive:N.current.size>0})))},ne=o===!0||Array.isArray(o)&&o.includes(0);return d.jsxs("div",{className:Lt(["react-flow__pane",{draggable:ne,dragging:E,selection:e}]),onClick:M?void 0:Tp(z,j),onContextMenu:Tp(F,j),onWheel:Tp(D,j),onPointerEnter:M?void 0:f,onPointerMove:M?K:y,onPointerUp:M?U:void 0,onPointerDownCapture:M?T:void 0,onClickCapture:M?Z:void 0,onPointerLeave:v,ref:j,style:hc,children:[w,d.jsx(pR,{})]})}function f0({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:c,onError:p}=t.getState(),_=c.get(e);if(!_){p==null||p("012",Xn.error012(e));return}t.setState({nodesSelectionActive:!1}),_.selected?(n||_.selected&&u)&&(s({nodes:[_],edges:[]}),requestAnimationFrame(()=>{var h;return(h=o==null?void 0:o.current)==null?void 0:h.blur()})):a([e])}function zC({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:a,isSelectable:s,nodeClickDistance:u}){const c=xt(),[p,_]=L.useState(!1),h=L.useRef();return L.useEffect(()=>{h.current=JT({getStoreItems:()=>c.getState(),onNodeMouseDown:f=>{f0({id:f,store:c,nodeRef:e})},onDragStart:()=>{_(!0)},onDragStop:()=>{_(!1)}})},[]),L.useEffect(()=>{var f,y;if(t)(f=h.current)==null||f.destroy();else if(e.current)return(y=h.current)==null||y.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var v;(v=h.current)==null||v.destroy()}},[n,o,t,s,e,a]),p}const mR=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function BC(){const e=xt();return L.useCallback(n=>{const{nodeExtent:o,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:c,updateNodePositions:p,nodeLookup:_,nodeOrigin:h}=e.getState(),f=new Map,y=mR(u),v=a?s[0]:5,w=a?s[1]:5,k=n.direction.x*v*n.factor,x=n.direction.y*w*n.factor;for(const[,q]of _){if(!y(q))continue;let E={x:q.internals.positionAbsolute.x+k,y:q.internals.positionAbsolute.y+x};a&&(E=ru(E,s));const{position:b,positionAbsolute:M}=lC({nodeId:q.id,nextPosition:E,nodeLookup:_,nodeExtent:o,nodeOrigin:h,onError:c});q.position=b,q.internals.positionAbsolute=M,f.set(q.id,q)}p(f)},[])}const X0=L.createContext(null),hR=X0.Provider;X0.Consumer;const HC=()=>L.useContext(X0),yR=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),gR=(e,t,n)=>o=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=o,{fromHandle:c,toHandle:p,isValid:_}=u,h=(p==null?void 0:p.nodeId)===e&&(p==null?void 0:p.id)===t&&(p==null?void 0:p.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,connectingTo:h,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Ca.Strict?(c==null?void 0:c.type)!==n:e!==(c==null?void 0:c.nodeId)||t!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!a,valid:h&&_}};function vR({type:e="source",position:t=He.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:c,children:p,className:_,onMouseDown:h,onTouchStart:f,...y},v){var K,U;const w=u||null,k=e==="target",x=xt(),q=HC(),{connectOnClick:E,noPanClassName:b,rfId:M}=tt(yR,vt),{connectingFrom:j,connectingTo:C,clickConnecting:N,isPossibleEndHandle:A,connectionInProcess:P,clickConnectionInProcess:z,valid:F}=tt(gR(q,w,e),vt);q||(U=(K=x.getState()).onError)==null||U.call(K,"010",Xn.error010());const D=ne=>{const{defaultEdgeOptions:Y,onConnect:Q,hasDefaultEdges:ie}=x.getState(),B={...Y,...ne};if(ie){const{edges:J,setEdges:me}=x.getState();me(c0(B,J))}Q==null||Q(B),c==null||c(B)},Z=ne=>{if(!q)return;const Y=yC(ne.nativeEvent);if(a&&(Y&&ne.button===0||!Y)){const Q=x.getState();_0.onPointerDown(ne.nativeEvent,{handleDomNode:ne.currentTarget,autoPanOnConnect:Q.autoPanOnConnect,connectionMode:Q.connectionMode,connectionRadius:Q.connectionRadius,domNode:Q.domNode,nodeLookup:Q.nodeLookup,lib:Q.lib,isTarget:k,handleId:w,nodeId:q,flowId:Q.rfId,panBy:Q.panBy,cancelConnection:Q.cancelConnection,onConnectStart:Q.onConnectStart,onConnectEnd:Q.onConnectEnd,updateConnection:Q.updateConnection,onConnect:D,isValidConnection:n||Q.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:Q.autoPanSpeed,dragThreshold:Q.connectionDragThreshold})}Y?h==null||h(ne):f==null||f(ne)},T=ne=>{const{onClickConnectStart:Y,onClickConnectEnd:Q,connectionClickStartHandle:ie,connectionMode:B,isValidConnection:J,lib:me,rfId:$,nodeLookup:te,connection:oe}=x.getState();if(!q||!ie&&!a)return;if(!ie){Y==null||Y(ne.nativeEvent,{nodeId:q,handleId:w,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:q,type:e,id:w}});return}const de=mC(ne.target),ue=n||J,{connection:ve,isValid:Ee}=_0.isValid(ne.nativeEvent,{handle:{nodeId:q,id:w,type:e},connectionMode:B,fromNodeId:ie.nodeId,fromHandleId:ie.id||null,fromType:ie.type,isValidConnection:ue,flowId:$,doc:de,lib:me,nodeLookup:te});Ee&&ve&&D(ve);const Re=structuredClone(oe);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,Q==null||Q(ne,Re),x.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":w,"data-nodeid":q,"data-handlepos":t,"data-id":`${M}-${q}-${w}-${e}`,className:Lt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,_,{source:!k,target:k,connectable:o,connectablestart:a,connectableend:s,clickconnecting:N,connectingfrom:j,connectingto:C,valid:F,connectionindicator:o&&(!P||A)&&(P||z?s:a)}]),onMouseDown:Z,onTouchStart:Z,onClick:E?T:void 0,ref:v,...y,children:p})}const $s=L.memo(OC(vR));function xR({data:e,isConnectable:t,sourcePosition:n=He.Bottom}){return d.jsxs(d.Fragment,{children:[e==null?void 0:e.label,d.jsx($s,{type:"source",position:n,isConnectable:t})]})}function wR({data:e,isConnectable:t,targetPosition:n=He.Top,sourcePosition:o=He.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx($s,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,d.jsx($s,{type:"source",position:o,isConnectable:t})]})}function bR(){return null}function qR({data:e,isConnectable:t,targetPosition:n=He.Top}){return d.jsxs(d.Fragment,{children:[d.jsx($s,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Kl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},M1={input:xR,default:wR,output:qR,group:bR};function SR(e){var t,n,o,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const kR=e=>{const{width:t,height:n,x:o,y:a}=tu(e.nodeLookup,{filter:s=>!!s.selected});return{width:Pn(t)?t:null,height:Pn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${a}px)`}};function CR({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=xt(),{width:a,height:s,transformString:u,userSelectionActive:c}=tt(kR,vt),p=BC(),_=L.useRef(null);if(L.useEffect(()=>{var y;n||(y=_.current)==null||y.focus({preventScroll:!0})},[n]),zC({nodeRef:_}),c||!a||!s)return null;const h=e?y=>{const v=o.getState().nodes.filter(w=>w.selected);e(y,v)}:void 0,f=y=>{Object.prototype.hasOwnProperty.call(Kl,y.key)&&(y.preventDefault(),p({direction:Kl[y.key],factor:y.shiftKey?4:1}))};return d.jsx("div",{className:Lt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:d.jsx("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:a,height:s}})})}const E1=typeof window<"u"?window:void 0,MR=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function $C({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:c,deleteKeyCode:p,selectionKeyCode:_,selectionOnDrag:h,selectionMode:f,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:k,zoomActivationKeyCode:x,elementsSelectable:q,zoomOnScroll:E,zoomOnPinch:b,panOnScroll:M,panOnScrollSpeed:j,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:A,defaultViewport:P,translateExtent:z,minZoom:F,maxZoom:D,preventScrolling:Z,onSelectionContextMenu:T,noWheelClassName:K,noPanClassName:U,disableKeyboardA11y:ne,onViewportChange:Y,isControlledViewport:Q}){const{nodesSelectionActive:ie,userSelectionActive:B}=tt(MR,vt),J=Hs(_,{target:E1}),me=Hs(k,{target:E1}),$=me||A,te=me||M,oe=h&&$!==!0,de=J||B||oe;return sR({deleteKeyCode:p,multiSelectionKeyCode:w}),d.jsx(cR,{onPaneContextMenu:s,elementsSelectable:q,zoomOnScroll:E,zoomOnPinch:b,panOnScroll:te,panOnScrollSpeed:j,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!J&&$,defaultViewport:P,translateExtent:z,minZoom:F,maxZoom:D,zoomActivationKeyCode:x,preventScrolling:Z,noWheelClassName:K,noPanClassName:U,onViewportChange:Y,isControlledViewport:Q,paneClickDistance:c,selectionOnDrag:oe,children:d.jsxs(fR,{onSelectionStart:y,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:$,isSelecting:!!de,selectionMode:f,selectionKeyPressed:J,paneClickDistance:c,selectionOnDrag:oe,children:[e,ie&&d.jsx(CR,{onSelectionContextMenu:T,noPanClassName:U,disableKeyboardA11y:ne})]})})}$C.displayName="FlowRenderer";const ER=L.memo($C),IR=e=>t=>e?V0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function jR(e){return tt(L.useCallback(IR(e),[e]),vt)}const NR=e=>e.updateNodeInternals;function TR(){const e=tt(NR),[t]=L.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");o.set(s,{id:s,nodeElement:a.target,force:!0})}),e(o)}));return L.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function PR({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const a=xt(),s=L.useRef(null),u=L.useRef(null),c=L.useRef(e.sourcePosition),p=L.useRef(e.targetPosition),_=L.useRef(t),h=n&&!!e.internals.handleBounds;return L.useEffect(()=>{s.current&&!e.hidden&&(!h||u.current!==s.current)&&(u.current&&(o==null||o.unobserve(u.current)),o==null||o.observe(s.current),u.current=s.current)},[h,e.hidden]),L.useEffect(()=>()=>{u.current&&(o==null||o.unobserve(u.current),u.current=null)},[]),L.useEffect(()=>{if(s.current){const f=_.current!==t,y=c.current!==e.sourcePosition,v=p.current!==e.targetPosition;(f||y||v)&&(_.current=t,c.current=e.sourcePosition,p.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function RR({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:c,elementsSelectable:p,nodesConnectable:_,nodesFocusable:h,resizeObserver:f,noDragClassName:y,noPanClassName:v,disableKeyboardA11y:w,rfId:k,nodeTypes:x,nodeClickDistance:q,onError:E}){const{node:b,internals:M,isParent:j}=tt(ue=>{const ve=ue.nodeLookup.get(e),Ee=ue.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:Ee}},vt);let C=b.type||"default",N=(x==null?void 0:x[C])||M1[C];N===void 0&&(E==null||E("003",Xn.error003(C)),C="default",N=(x==null?void 0:x.default)||M1.default);const A=!!(b.draggable||c&&typeof b.draggable>"u"),P=!!(b.selectable||p&&typeof b.selectable>"u"),z=!!(b.connectable||_&&typeof b.connectable>"u"),F=!!(b.focusable||h&&typeof b.focusable>"u"),D=xt(),Z=_C(b),T=PR({node:b,nodeType:C,hasDimensions:Z,resizeObserver:f}),K=zC({nodeRef:T,disabled:b.hidden||!A,noDragClassName:y,handleSelector:b.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:q}),U=BC();if(b.hidden)return null;const ne=vi(b),Y=SR(b),Q=P||A||t||n||o||a,ie=n?ue=>n(ue,{...M.userNode}):void 0,B=o?ue=>o(ue,{...M.userNode}):void 0,J=a?ue=>a(ue,{...M.userNode}):void 0,me=s?ue=>s(ue,{...M.userNode}):void 0,$=u?ue=>u(ue,{...M.userNode}):void 0,te=ue=>{const{selectNodesOnDrag:ve,nodeDragThreshold:Ee}=D.getState();P&&(!ve||!A||Ee>0)&&f0({id:e,store:D,nodeRef:T}),t&&t(ue,{...M.userNode})},oe=ue=>{if(!(hC(ue.nativeEvent)||w)){if(iC.includes(ue.key)&&P){const ve=ue.key==="Escape";f0({id:e,store:D,unselect:ve,nodeRef:T})}else if(A&&b.selected&&Object.prototype.hasOwnProperty.call(Kl,ue.key)){ue.preventDefault();const{ariaLabelConfig:ve}=D.getState();D.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),U({direction:Kl[ue.key],factor:ue.shiftKey?4:1})}}},de=()=>{var Te;if(w||!((Te=T.current)!=null&&Te.matches(":focus-visible")))return;const{transform:ue,width:ve,height:Ee,autoPanOnNodeFocus:Re,setCenter:Ie}=D.getState();if(!Re)return;V0(new Map([[e,b]]),{x:0,y:0,width:ve,height:Ee},ue,!0).length>0||Ie(b.position.x+ne.width/2,b.position.y+ne.height/2,{zoom:ue[2]})};return d.jsx("div",{className:Lt(["react-flow__node",`react-flow__node-${C}`,{[v]:A},b.className,{selected:b.selected,selectable:P,parent:j,draggable:A,dragging:K}]),ref:T,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:Z?"visible":"hidden",...b.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:ie,onMouseMove:B,onMouseLeave:J,onContextMenu:me,onClick:te,onDoubleClick:$,onKeyDown:F?oe:void 0,tabIndex:F?0:void 0,onFocus:F?de:void 0,role:b.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${PC}-${k}`,"aria-label":b.ariaLabel,...b.domAttributes,children:d.jsx(hR,{value:e,children:d.jsx(N,{id:e,data:b.data,type:C,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:b.selected??!1,selectable:P,draggable:A,deletable:b.deletable??!0,isConnectable:z,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:K,dragHandle:b.dragHandle,zIndex:M.z,parentId:b.parentId,...ne})})})}var AR=L.memo(RR);const FR=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function WC(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,onError:s}=tt(FR,vt),u=jR(e.onlyRenderVisibleElements),c=TR();return d.jsx("div",{className:"react-flow__nodes",style:hc,children:u.map(p=>d.jsx(AR,{id:p,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},p))})}WC.displayName="NodeRenderer";const LR=L.memo(WC);function DR(e){return tt(L.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const o=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&AT({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&o.push(a.id)}return o},[e]),vt)}const OR=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return d.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},VR=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return d.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},I1={[$l.Arrow]:OR,[$l.ArrowClosed]:VR};function zR(e){const t=xt();return L.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(I1,e)?I1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Xn.error009(e)),null)},[e])}const BR=({id:e,type:t,color:n,width:o=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const p=zR(t);return p?d.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:d.jsx(p,{color:n,strokeWidth:u})}):null},UC=({defaultColor:e,rfId:t})=>{const n=tt(s=>s.edges),o=tt(s=>s.defaultEdgeOptions),a=L.useMemo(()=>BT(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return a.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:a.map(s=>d.jsx(BR,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};UC.displayName="MarkerDefinitions";var HR=L.memo(UC);function GC({x:e,y:t,label:n,labelStyle:o,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:p,className:_,...h}){const[f,y]=L.useState({x:1,y:0,width:0,height:0}),v=Lt(["react-flow__edge-textwrapper",_]),w=L.useRef(null);return L.useEffect(()=>{if(w.current){const k=w.current.getBBox();y({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),n?d.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:v,visibility:f.width?"visible":"hidden",...h,children:[a&&d.jsx("rect",{width:f.width+2*u[0],x:-u[0],y:-u[1],height:f.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),d.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:w,style:o,children:n}),p]}):null}GC.displayName="EdgeText";const $R=L.memo(GC);function yc({path:e,labelX:t,labelY:n,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:p,interactionWidth:_=20,...h}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...h,d:e,fill:"none",className:Lt(["react-flow__edge-path",h.className])}),_?d.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}):null,o&&Pn(t)&&Pn(n)?d.jsx($R,{x:t,y:n,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:p}):null]})}function j1({pos:e,x1:t,y1:n,x2:o,y2:a}){return e===He.Left||e===He.Right?[.5*(t+o),n]:[t,.5*(n+a)]}function KC({sourceX:e,sourceY:t,sourcePosition:n=He.Bottom,targetX:o,targetY:a,targetPosition:s=He.Top}){const[u,c]=j1({pos:n,x1:e,y1:t,x2:o,y2:a}),[p,_]=j1({pos:s,x1:o,y1:a,x2:e,y2:t}),[h,f,y,v]=gC({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:u,sourceControlY:c,targetControlX:p,targetControlY:_});return[`M${e},${t} C${u},${c} ${p},${_} ${o},${a}`,h,f,y,v]}function YC(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,sourcePosition:u,targetPosition:c,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:k,markerStart:x,interactionWidth:q})=>{const[E,b,M]=KC({sourceX:n,sourceY:o,sourcePosition:u,targetX:a,targetY:s,targetPosition:c}),j=e.isInternal?void 0:t;return d.jsx(yc,{id:j,path:E,labelX:b,labelY:M,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:k,markerStart:x,interactionWidth:q})})}const WR=YC({isInternal:!1}),QC=YC({isInternal:!0});WR.displayName="SimpleBezierEdge";QC.displayName="SimpleBezierEdgeInternal";function XC(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,sourcePosition:v=He.Bottom,targetPosition:w=He.Top,markerEnd:k,markerStart:x,pathOptions:q,interactionWidth:E})=>{const[b,M,j]=Gl({sourceX:n,sourceY:o,sourcePosition:v,targetX:a,targetY:s,targetPosition:w,borderRadius:q==null?void 0:q.borderRadius,offset:q==null?void 0:q.offset,stepPosition:q==null?void 0:q.stepPosition}),C=e.isInternal?void 0:t;return d.jsx(yc,{id:C,path:b,labelX:M,labelY:j,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:k,markerStart:x,interactionWidth:E})})}const ZC=XC({isInternal:!1}),JC=XC({isInternal:!0});ZC.displayName="SmoothStepEdge";JC.displayName="SmoothStepEdgeInternal";function eM(e){return L.memo(({id:t,...n})=>{var a;const o=e.isInternal?void 0:t;return d.jsx(ZC,{...n,id:o,pathOptions:L.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const UR=eM({isInternal:!1}),tM=eM({isInternal:!0});UR.displayName="StepEdge";tM.displayName="StepEdgeInternal";function rM(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:v,markerStart:w,interactionWidth:k})=>{const[x,q,E]=$0({sourceX:n,sourceY:o,targetX:a,targetY:s}),b=e.isInternal?void 0:t;return d.jsx(yc,{id:b,path:x,labelX:q,labelY:E,label:u,labelStyle:c,labelShowBg:p,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:f,style:y,markerEnd:v,markerStart:w,interactionWidth:k})})}const GR=rM({isInternal:!1}),nM=rM({isInternal:!0});GR.displayName="StraightEdge";nM.displayName="StraightEdgeInternal";function iM(e){return L.memo(({id:t,sourceX:n,sourceY:o,targetX:a,targetY:s,sourcePosition:u=He.Bottom,targetPosition:c=He.Top,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:k,markerStart:x,pathOptions:q,interactionWidth:E})=>{const[b,M,j]=H0({sourceX:n,sourceY:o,sourcePosition:u,targetX:a,targetY:s,targetPosition:c,curvature:q==null?void 0:q.curvature}),C=e.isInternal?void 0:t;return d.jsx(yc,{id:C,path:b,labelX:M,labelY:j,label:p,labelStyle:_,labelShowBg:h,labelBgStyle:f,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:k,markerStart:x,interactionWidth:E})})}const KR=iM({isInternal:!1}),oM=iM({isInternal:!0});KR.displayName="BezierEdge";oM.displayName="BezierEdgeInternal";const N1={default:oM,straight:nM,step:tM,smoothstep:JC,simplebezier:QC},T1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},YR=(e,t,n)=>n===He.Left?e-t:n===He.Right?e+t:e,QR=(e,t,n)=>n===He.Top?e-t:n===He.Bottom?e+t:e,P1="react-flow__edgeupdater";function R1({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:c}){return d.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Lt([P1,`${P1}-${c}`]),cx:YR(t,o,e),cy:QR(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function XR({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:a,targetX:s,targetY:u,sourcePosition:c,targetPosition:p,onReconnect:_,onReconnectStart:h,onReconnectEnd:f,setReconnecting:y,setUpdateHover:v}){const w=xt(),k=(M,j)=>{if(M.button!==0)return;const{autoPanOnConnect:C,domNode:N,isValidConnection:A,connectionMode:P,connectionRadius:z,lib:F,onConnectStart:D,onConnectEnd:Z,cancelConnection:T,nodeLookup:K,rfId:U,panBy:ne,updateConnection:Y}=w.getState(),Q=j.type==="target",ie=(me,$)=>{y(!1),f==null||f(me,n,j.type,$)},B=me=>_==null?void 0:_(n,me),J=(me,$)=>{y(!0),h==null||h(M,n,j.type),D==null||D(me,$)};_0.onPointerDown(M.nativeEvent,{autoPanOnConnect:C,connectionMode:P,connectionRadius:z,domNode:N,handleId:j.id,nodeId:j.nodeId,nodeLookup:K,isTarget:Q,edgeUpdaterType:j.type,lib:F,flowId:U,cancelConnection:T,panBy:ne,isValidConnection:A,onConnect:B,onConnectStart:J,onConnectEnd:Z,onReconnectEnd:ie,updateConnection:Y,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},x=M=>k(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),q=M=>k(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>v(!0),b=()=>v(!1);return d.jsxs(d.Fragment,{children:[(e===!0||e==="source")&&d.jsx(R1,{position:c,centerX:o,centerY:a,radius:t,onMouseDown:x,onMouseEnter:E,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&d.jsx(R1,{position:p,centerX:s,centerY:u,radius:t,onMouseDown:q,onMouseEnter:E,onMouseOut:b,type:"target"})]})}function ZR({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:c,onMouseMove:p,onMouseLeave:_,reconnectRadius:h,onReconnect:f,onReconnectStart:y,onReconnectEnd:v,rfId:w,edgeTypes:k,noPanClassName:x,onError:q,disableKeyboardA11y:E}){let b=tt(Ie=>Ie.edgeLookup.get(e));const M=tt(Ie=>Ie.defaultEdgeOptions);b=M?{...M,...b}:b;let j=b.type||"default",C=(k==null?void 0:k[j])||N1[j];C===void 0&&(q==null||q("011",Xn.error011(j)),j="default",C=(k==null?void 0:k.default)||N1.default);const N=!!(b.focusable||t&&typeof b.focusable>"u"),A=typeof f<"u"&&(b.reconnectable||n&&typeof b.reconnectable>"u"),P=!!(b.selectable||o&&typeof b.selectable>"u"),z=L.useRef(null),[F,D]=L.useState(!1),[Z,T]=L.useState(!1),K=xt(),{zIndex:U,sourceX:ne,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:B,targetPosition:J}=tt(L.useCallback(Ie=>{const je=Ie.nodeLookup.get(b.source),Te=Ie.nodeLookup.get(b.target);if(!je||!Te)return{zIndex:b.zIndex,...T1};const Ae=zT({id:e,sourceNode:je,targetNode:Te,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:Ie.connectionMode,onError:q});return{zIndex:RT({selected:b.selected,zIndex:b.zIndex,sourceNode:je,targetNode:Te,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Ae||T1}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),vt),me=L.useMemo(()=>b.markerStart?`url('#${d0(b.markerStart,w)}')`:void 0,[b.markerStart,w]),$=L.useMemo(()=>b.markerEnd?`url('#${d0(b.markerEnd,w)}')`:void 0,[b.markerEnd,w]);if(b.hidden||ne===null||Y===null||Q===null||ie===null)return null;const te=Ie=>{var We;const{addSelectedEdges:je,unselectNodesAndEdges:Te,multiSelectionActive:Ae}=K.getState();P&&(K.setState({nodesSelectionActive:!1}),b.selected&&Ae?(Te({nodes:[],edges:[b]}),(We=z.current)==null||We.blur()):je([e])),a&&a(Ie,b)},oe=s?Ie=>{s(Ie,{...b})}:void 0,de=u?Ie=>{u(Ie,{...b})}:void 0,ue=c?Ie=>{c(Ie,{...b})}:void 0,ve=p?Ie=>{p(Ie,{...b})}:void 0,Ee=_?Ie=>{_(Ie,{...b})}:void 0,Re=Ie=>{var je;if(!E&&iC.includes(Ie.key)&&P){const{unselectNodesAndEdges:Te,addSelectedEdges:Ae}=K.getState();Ie.key==="Escape"?((je=z.current)==null||je.blur(),Te({edges:[b]})):Ae([e])}};return d.jsx("svg",{style:{zIndex:U},children:d.jsxs("g",{className:Lt(["react-flow__edge",`react-flow__edge-${j}`,b.className,x,{selected:b.selected,animated:b.animated,inactive:!P&&!a,updating:F,selectable:P}]),onClick:te,onDoubleClick:oe,onContextMenu:de,onMouseEnter:ue,onMouseMove:ve,onMouseLeave:Ee,onKeyDown:N?Re:void 0,tabIndex:N?0:void 0,role:b.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":N?`${RC}-${w}`:void 0,ref:z,...b.domAttributes,children:[!Z&&d.jsx(C,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:P,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:ne,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:B,targetPosition:J,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:me,markerEnd:$,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),A&&d.jsx(XR,{edge:b,isReconnectable:A,reconnectRadius:h,onReconnect:f,onReconnectStart:y,onReconnectEnd:v,sourceX:ne,sourceY:Y,targetX:Q,targetY:ie,sourcePosition:B,targetPosition:J,setUpdateHover:D,setReconnecting:T})]})})}var JR=L.memo(ZR);const e4=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function aM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:p,onEdgeMouseLeave:_,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:w,disableKeyboardA11y:k}){const{edgesFocusable:x,edgesReconnectable:q,elementsSelectable:E,onError:b}=tt(e4,vt),M=DR(t);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(HR,{defaultColor:e,rfId:n}),M.map(j=>d.jsx(JR,{id:j,edgesFocusable:x,edgesReconnectable:q,elementsSelectable:E,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:c,onMouseMove:p,onMouseLeave:_,onClick:h,reconnectRadius:f,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:w,rfId:n,onError:b,edgeTypes:o,disableKeyboardA11y:k},j))]})}aM.displayName="EdgeRenderer";const t4=L.memo(aM),r4=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function n4({children:e}){const t=tt(r4);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function i4(e){const t=Q0(),n=L.useRef(!1);L.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const o4=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function a4(e){const t=tt(o4),n=xt();return L.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function s4(e){return e.connection.inProgress?{...e.connection,to:nu(e.connection.to,e.transform)}:{...e.connection}}function u4(e){return s4}function l4(e){const t=u4();return tt(t,vt)}const c4=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function d4({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:a,width:s,height:u,isValid:c,inProgress:p}=tt(c4,vt);return!(s&&a&&p)?null:d.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Lt(["react-flow__connection",sC(c)]),children:d.jsx(sM,{style:t,type:n,CustomComponent:o,isValid:c})})})}const sM=({style:e,type:t=Gi.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:c,fromPosition:p,to:_,toNode:h,toHandle:f,toPosition:y,pointer:v}=l4();if(!a)return;if(n)return d.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:c,fromX:s.x,fromY:s.y,toX:_.x,toY:_.y,fromPosition:p,toPosition:y,connectionStatus:sC(o),toNode:h,toHandle:f,pointer:v});let w="";const k={sourceX:s.x,sourceY:s.y,sourcePosition:p,targetX:_.x,targetY:_.y,targetPosition:y};switch(t){case Gi.Bezier:[w]=H0(k);break;case Gi.SimpleBezier:[w]=KC(k);break;case Gi.Step:[w]=Gl({...k,borderRadius:0});break;case Gi.SmoothStep:[w]=Gl(k);break;default:[w]=$0(k)}return d.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};sM.displayName="ConnectionLine";const p4={};function A1(e=p4){L.useRef(e),xt(),L.useEffect(()=>{},[e])}function _4(){xt(),L.useRef(!1),L.useEffect(()=>{},[])}function uM({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:y,onSelectionEnd:v,connectionLineType:w,connectionLineStyle:k,connectionLineComponent:x,connectionLineContainerStyle:q,selectionKeyCode:E,selectionOnDrag:b,selectionMode:M,multiSelectionKeyCode:j,panActivationKeyCode:C,zoomActivationKeyCode:N,deleteKeyCode:A,onlyRenderVisibleElements:P,elementsSelectable:z,defaultViewport:F,translateExtent:D,minZoom:Z,maxZoom:T,preventScrolling:K,defaultMarkerColor:U,zoomOnScroll:ne,zoomOnPinch:Y,panOnScroll:Q,panOnScrollSpeed:ie,panOnScrollMode:B,zoomOnDoubleClick:J,panOnDrag:me,onPaneClick:$,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneScroll:ue,onPaneContextMenu:ve,paneClickDistance:Ee,nodeClickDistance:Re,onEdgeContextMenu:Ie,onEdgeMouseEnter:je,onEdgeMouseMove:Te,onEdgeMouseLeave:Ae,reconnectRadius:We,onReconnect:Be,onReconnectStart:st,onReconnectEnd:at,noDragClassName:Mt,noWheelClassName:bt,noPanClassName:qt,disableKeyboardA11y:ut,nodeExtent:Cr,rfId:tr,viewport:Rt,onViewportChange:Wt}){return A1(e),A1(t),_4(),i4(n),a4(Rt),d.jsx(ER,{onPaneClick:$,onPaneMouseEnter:te,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneContextMenu:ve,onPaneScroll:ue,paneClickDistance:Ee,deleteKeyCode:A,selectionKeyCode:E,selectionOnDrag:b,selectionMode:M,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:j,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:z,zoomOnScroll:ne,zoomOnPinch:Y,zoomOnDoubleClick:J,panOnScroll:Q,panOnScrollSpeed:ie,panOnScrollMode:B,panOnDrag:me,defaultViewport:F,translateExtent:D,minZoom:Z,maxZoom:T,onSelectionContextMenu:f,preventScrolling:K,noDragClassName:Mt,noWheelClassName:bt,noPanClassName:qt,disableKeyboardA11y:ut,onViewportChange:Wt,isControlledViewport:!!Rt,children:d.jsxs(n4,{children:[d.jsx(t4,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:Be,onReconnectStart:st,onReconnectEnd:at,onlyRenderVisibleElements:P,onEdgeContextMenu:Ie,onEdgeMouseEnter:je,onEdgeMouseMove:Te,onEdgeMouseLeave:Ae,reconnectRadius:We,defaultMarkerColor:U,noPanClassName:qt,disableKeyboardA11y:ut,rfId:tr}),d.jsx(d4,{style:k,type:w,component:x,containerStyle:q}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(LR,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:h,nodeClickDistance:Re,onlyRenderVisibleElements:P,noPanClassName:qt,noDragClassName:Mt,disableKeyboardA11y:ut,nodeExtent:Cr,rfId:tr}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}uM.displayName="GraphView";const f4=L.memo(uM),F1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p=.5,maxZoom:_=2,nodeOrigin:h,nodeExtent:f,zIndexMode:y="basic"}={})=>{const v=new Map,w=new Map,k=new Map,x=new Map,q=o??t??[],E=n??e??[],b=h??[0,0],M=f??Os;bC(k,x,q);const j=p0(E,v,w,{nodeOrigin:b,nodeExtent:M,zIndexMode:y});let C=[0,0,1];if(u&&a&&s){const N=tu(v,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:A,y:P,zoom:z}=z0(N,a,s,p,_,(c==null?void 0:c.padding)??.1);C=[A,P,z]}return{rfId:"1",width:a??0,height:s??0,transform:C,nodes:E,nodesInitialized:j,nodeLookup:v,parentLookup:w,edges:q,edgeLookup:x,connectionLookup:k,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:_,translateExtent:Os,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ca.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:c,fitViewResolver:null,connection:{...aC},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:ET,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:oC,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},m4=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p,maxZoom:_,nodeOrigin:h,nodeExtent:f,zIndexMode:y})=>NP((v,w)=>{async function k(){const{nodeLookup:x,panZoom:q,fitViewOptions:E,fitViewResolver:b,width:M,height:j,minZoom:C,maxZoom:N}=w();q&&(await CT({nodes:x,width:M,height:j,panZoom:q,minZoom:C,maxZoom:N},E),b==null||b.resolve(!0),v({fitViewResolver:null}))}return{...F1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:p,maxZoom:_,nodeOrigin:h,nodeExtent:f,defaultNodes:n,defaultEdges:o,zIndexMode:y}),setNodes:x=>{const{nodeLookup:q,parentLookup:E,nodeOrigin:b,elevateNodesOnSelect:M,fitViewQueued:j,zIndexMode:C}=w(),N=p0(x,q,E,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:C});j&&N?(k(),v({nodes:x,nodesInitialized:N,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:x,nodesInitialized:N})},setEdges:x=>{const{connectionLookup:q,edgeLookup:E}=w();bC(q,E,x),v({edges:x})},setDefaultNodesAndEdges:(x,q)=>{if(x){const{setNodes:E}=w();E(x),v({hasDefaultNodes:!0})}if(q){const{setEdges:E}=w();E(q),v({hasDefaultEdges:!0})}},updateNodeInternals:x=>{const{triggerNodeChanges:q,nodeLookup:E,parentLookup:b,domNode:M,nodeOrigin:j,nodeExtent:C,debug:N,fitViewQueued:A,zIndexMode:P}=w(),{changes:z,updatedInternals:F}=YT(x,E,b,M,j,C,P);F&&(WT(E,b,{nodeOrigin:j,nodeExtent:C,zIndexMode:P}),A?(k(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),(z==null?void 0:z.length)>0&&(N&&console.log("React Flow: trigger node changes",z),q==null||q(z)))},updateNodePositions:(x,q=!1)=>{const E=[];let b=[];const{nodeLookup:M,triggerNodeChanges:j,connection:C,updateConnection:N,onNodesChangeMiddlewareMap:A}=w();for(const[P,z]of x){const F=M.get(P),D=!!(F!=null&&F.expandParent&&(F!=null&&F.parentId)&&(z!=null&&z.position)),Z={id:P,type:"position",position:D?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:q};if(F&&C.inProgress&&C.fromNode.id===F.id){const T=Fo(F,C.fromHandle,He.Left,!0);N({...C,from:T})}D&&F.parentId&&E.push({id:P,parentId:F.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),b.push(Z)}if(E.length>0){const{parentLookup:P,nodeOrigin:z}=w(),F=Y0(E,M,P,z);b.push(...F)}for(const P of A.values())b=P(b);j(b)},triggerNodeChanges:x=>{const{onNodesChange:q,setNodes:E,nodes:b,hasDefaultNodes:M,debug:j}=w();if(x!=null&&x.length){if(M){const C=LC(x,b);E(C)}j&&console.log("React Flow: trigger node changes",x),q==null||q(x)}},triggerEdgeChanges:x=>{const{onEdgesChange:q,setEdges:E,edges:b,hasDefaultEdges:M,debug:j}=w();if(x!=null&&x.length){if(M){const C=DC(x,b);E(C)}j&&console.log("React Flow: trigger edge changes",x),q==null||q(x)}},addSelectedNodes:x=>{const{multiSelectionActive:q,edgeLookup:E,nodeLookup:b,triggerNodeChanges:M,triggerEdgeChanges:j}=w();if(q){const C=x.map(N=>Io(N,!0));M(C);return}M(xa(b,new Set([...x]),!0)),j(xa(E))},addSelectedEdges:x=>{const{multiSelectionActive:q,edgeLookup:E,nodeLookup:b,triggerNodeChanges:M,triggerEdgeChanges:j}=w();if(q){const C=x.map(N=>Io(N,!0));j(C);return}j(xa(E,new Set([...x]))),M(xa(b,new Set,!0))},unselectNodesAndEdges:({nodes:x,edges:q}={})=>{const{edges:E,nodes:b,nodeLookup:M,triggerNodeChanges:j,triggerEdgeChanges:C}=w(),N=x||b,A=q||E,P=N.map(F=>{const D=M.get(F.id);return D&&(D.selected=!1),Io(F.id,!1)}),z=A.map(F=>Io(F.id,!1));j(P),C(z)},setMinZoom:x=>{const{panZoom:q,maxZoom:E}=w();q==null||q.setScaleExtent([x,E]),v({minZoom:x})},setMaxZoom:x=>{const{panZoom:q,minZoom:E}=w();q==null||q.setScaleExtent([E,x]),v({maxZoom:x})},setTranslateExtent:x=>{var q;(q=w().panZoom)==null||q.setTranslateExtent(x),v({translateExtent:x})},resetSelectedElements:()=>{const{edges:x,nodes:q,triggerNodeChanges:E,triggerEdgeChanges:b,elementsSelectable:M}=w();if(!M)return;const j=q.reduce((N,A)=>A.selected?[...N,Io(A.id,!1)]:N,[]),C=x.reduce((N,A)=>A.selected?[...N,Io(A.id,!1)]:N,[]);E(j),b(C)},setNodeExtent:x=>{const{nodes:q,nodeLookup:E,parentLookup:b,nodeOrigin:M,elevateNodesOnSelect:j,nodeExtent:C,zIndexMode:N}=w();x[0][0]===C[0][0]&&x[0][1]===C[0][1]&&x[1][0]===C[1][0]&&x[1][1]===C[1][1]||(p0(q,E,b,{nodeOrigin:M,nodeExtent:x,elevateNodesOnSelect:j,checkEquality:!1,zIndexMode:N}),v({nodeExtent:x}))},panBy:x=>{const{transform:q,width:E,height:b,panZoom:M,translateExtent:j}=w();return QT({delta:x,panZoom:M,transform:q,translateExtent:j,width:E,height:b})},setCenter:async(x,q,E)=>{const{width:b,height:M,maxZoom:j,panZoom:C}=w();if(!C)return Promise.resolve(!1);const N=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:j;return await C.setViewport({x:b/2-x*N,y:M/2-q*N,zoom:N},{duration:E==null?void 0:E.duration,ease:E==null?void 0:E.ease,interpolate:E==null?void 0:E.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...aC}})},updateConnection:x=>{v({connection:x})},reset:()=>v({...F1()})}},Object.is);function h4({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:c,initialFitViewOptions:p,fitView:_,nodeOrigin:h,nodeExtent:f,zIndexMode:y,children:v}){const[w]=L.useState(()=>m4({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:a,height:s,fitView:_,minZoom:u,maxZoom:c,fitViewOptions:p,nodeOrigin:h,nodeExtent:f,zIndexMode:y}));return d.jsx(RP,{value:w,children:d.jsx(nR,{children:v})})}function y4({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:a,width:s,height:u,fitView:c,fitViewOptions:p,minZoom:_,maxZoom:h,nodeOrigin:f,nodeExtent:y,zIndexMode:v}){return L.useContext(mc)?d.jsx(d.Fragment,{children:e}):d.jsx(h4,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:c,initialFitViewOptions:p,initialMinZoom:_,initialMaxZoom:h,nodeOrigin:f,nodeExtent:y,zIndexMode:v,children:e})}const g4={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function v4({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:c,onEdgeClick:p,onInit:_,onMove:h,onMoveStart:f,onMoveEnd:y,onConnect:v,onConnectStart:w,onConnectEnd:k,onClickConnectStart:x,onClickConnectEnd:q,onNodeMouseEnter:E,onNodeMouseMove:b,onNodeMouseLeave:M,onNodeContextMenu:j,onNodeDoubleClick:C,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:F,onDelete:D,onSelectionChange:Z,onSelectionDragStart:T,onSelectionDrag:K,onSelectionDragStop:U,onSelectionContextMenu:ne,onSelectionStart:Y,onSelectionEnd:Q,onBeforeDelete:ie,connectionMode:B,connectionLineType:J=Gi.Bezier,connectionLineStyle:me,connectionLineComponent:$,connectionLineContainerStyle:te,deleteKeyCode:oe="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ue=!1,selectionMode:ve=Vs.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:Re=Bs()?"Meta":"Control",zoomActivationKeyCode:Ie=Bs()?"Meta":"Control",snapToGrid:je,snapGrid:Te,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:We,nodesDraggable:Be,autoPanOnNodeFocus:st,nodesConnectable:at,nodesFocusable:Mt,nodeOrigin:bt=AC,edgesFocusable:qt,edgesReconnectable:ut,elementsSelectable:Cr=!0,defaultViewport:tr=GP,minZoom:Rt=.5,maxZoom:Wt=2,translateExtent:it=Os,preventScrolling:Lr=!0,nodeExtent:Nt,defaultMarkerColor:Kr="#b1b1b7",zoomOnScroll:rr=!0,zoomOnPinch:Ut=!0,panOnScroll:Qe=!1,panOnScrollSpeed:bi=.5,panOnScrollMode:Tt=To.Free,zoomOnDoubleClick:dn=!0,panOnDrag:fe=!0,onPaneClick:ot,onPaneMouseEnter:Dr,onPaneMouseMove:Or,onPaneMouseLeave:gr,onPaneScroll:ei,onPaneContextMenu:Dn,paneClickDistance:At=1,nodeClickDistance:nr=0,children:Gt,onReconnect:dt,onReconnectStart:Bo,onReconnectEnd:ht,onEdgeContextMenu:Ji,onEdgeDoubleClick:Kt,onEdgeMouseEnter:Yr,onEdgeMouseMove:Ot,onEdgeMouseLeave:Vt,reconnectRadius:Yt=10,onNodesChange:Qt,onEdgesChange:vr,noDragClassName:ur="nodrag",noWheelClassName:xr="nowheel",noPanClassName:Et="nopan",fitView:Qr,fitViewOptions:lr,connectOnClick:eo,attributionPosition:to,proOptions:cr,defaultEdgeOptions:qi,elevateNodesOnSelect:Si=!0,elevateEdgesOnSelect:ro=!1,disableKeyboardA11y:ti=!1,autoPanOnConnect:pt,autoPanOnNodeDrag:pn,autoPanSpeed:_n,connectionRadius:fn,isValidConnection:mn,onError:_t,style:Xr,id:On,nodeDragThreshold:Xt,connectionDragThreshold:Ho,viewport:wr,onViewportChange:hn,width:yn,height:ri,colorMode:Mr="light",debug:ki,onScroll:ir,ariaLabelConfig:no,zIndexMode:$o="basic",...io},Vn){const Ci=On||"1",oo=XP(Mr),zt=L.useCallback(Zr=>{Zr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ir==null||ir(Zr)},[ir]);return d.jsx("div",{"data-testid":"rf__wrapper",...io,onScroll:zt,style:{...Xr,...g4},ref:Vn,className:Lt(["react-flow",a,oo]),id:On,role:"application",children:d.jsxs(y4,{nodes:e,edges:t,width:yn,height:ri,fitView:Qr,fitViewOptions:lr,minZoom:Rt,maxZoom:Wt,nodeOrigin:bt,nodeExtent:Nt,zIndexMode:$o,children:[d.jsx(f4,{onInit:_,onNodeClick:c,onEdgeClick:p,onNodeMouseEnter:E,onNodeMouseMove:b,onNodeMouseLeave:M,onNodeContextMenu:j,onNodeDoubleClick:C,nodeTypes:s,edgeTypes:u,connectionLineType:J,connectionLineStyle:me,connectionLineComponent:$,connectionLineContainerStyle:te,selectionKeyCode:de,selectionOnDrag:ue,selectionMode:ve,deleteKeyCode:oe,multiSelectionKeyCode:Re,panActivationKeyCode:Ee,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ae,defaultViewport:tr,translateExtent:it,minZoom:Rt,maxZoom:Wt,preventScrolling:Lr,zoomOnScroll:rr,zoomOnPinch:Ut,zoomOnDoubleClick:dn,panOnScroll:Qe,panOnScrollSpeed:bi,panOnScrollMode:Tt,panOnDrag:fe,onPaneClick:ot,onPaneMouseEnter:Dr,onPaneMouseMove:Or,onPaneMouseLeave:gr,onPaneScroll:ei,onPaneContextMenu:Dn,paneClickDistance:At,nodeClickDistance:nr,onSelectionContextMenu:ne,onSelectionStart:Y,onSelectionEnd:Q,onReconnect:dt,onReconnectStart:Bo,onReconnectEnd:ht,onEdgeContextMenu:Ji,onEdgeDoubleClick:Kt,onEdgeMouseEnter:Yr,onEdgeMouseMove:Ot,onEdgeMouseLeave:Vt,reconnectRadius:Yt,defaultMarkerColor:Kr,noDragClassName:ur,noWheelClassName:xr,noPanClassName:Et,rfId:Ci,disableKeyboardA11y:ti,nodeExtent:Nt,viewport:wr,onViewportChange:hn}),d.jsx(QP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:v,onConnectStart:w,onConnectEnd:k,onClickConnectStart:x,onClickConnectEnd:q,nodesDraggable:Be,autoPanOnNodeFocus:st,nodesConnectable:at,nodesFocusable:Mt,edgesFocusable:qt,edgesReconnectable:ut,elementsSelectable:Cr,elevateNodesOnSelect:Si,elevateEdgesOnSelect:ro,minZoom:Rt,maxZoom:Wt,nodeExtent:Nt,onNodesChange:Qt,onEdgesChange:vr,snapToGrid:je,snapGrid:Te,connectionMode:B,translateExtent:it,connectOnClick:eo,defaultEdgeOptions:qi,fitView:Qr,fitViewOptions:lr,onNodesDelete:z,onEdgesDelete:F,onDelete:D,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:P,onSelectionDrag:K,onSelectionDragStart:T,onSelectionDragStop:U,onMove:h,onMoveStart:f,onMoveEnd:y,noPanClassName:Et,nodeOrigin:bt,rfId:Ci,autoPanOnConnect:pt,autoPanOnNodeDrag:pn,autoPanSpeed:_n,onError:_t,connectionRadius:fn,isValidConnection:mn,selectNodesOnDrag:We,nodeDragThreshold:Xt,connectionDragThreshold:Ho,onBeforeDelete:ie,debug:ki,ariaLabelConfig:no,zIndexMode:$o}),d.jsx(UP,{onSelectionChange:Z}),Gt,d.jsx(zP,{proOptions:cr,position:to}),d.jsx(VP,{rfId:Ci,disableKeyboardA11y:ti})]})})}var x4=OC(v4);function w4(e){const[t,n]=L.useState(e),o=L.useCallback(a=>n(s=>LC(a,s)),[]);return[t,n,o]}function b4(e){const[t,n]=L.useState(e),o=L.useCallback(a=>n(s=>DC(a,s)),[]);return[t,n,o]}function q4({dimensions:e,lineWidth:t,variant:n,className:o}){return d.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Lt(["react-flow__background-pattern",n,o])})}function S4({radius:e,className:t}){return d.jsx("circle",{cx:e,cy:e,r:e,className:Lt(["react-flow__background-pattern","dots",t])})}var Yi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Yi||(Yi={}));const k4={[Yi.Dots]:1,[Yi.Lines]:1,[Yi.Cross]:6},C4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function lM({id:e,variant:t=Yi.Dots,gap:n=20,size:o,lineWidth:a=1,offset:s=0,color:u,bgColor:c,style:p,className:_,patternClassName:h}){const f=L.useRef(null),{transform:y,patternId:v}=tt(C4,vt),w=o||k4[t],k=t===Yi.Dots,x=t===Yi.Cross,q=Array.isArray(n)?n:[n,n],E=[q[0]*y[2]||1,q[1]*y[2]||1],b=w*y[2],M=Array.isArray(s)?s:[s,s],j=x?[b,b]:E,C=[M[0]*y[2]||1+j[0]/2,M[1]*y[2]||1+j[1]/2],N=`${v}${e||""}`;return d.jsxs("svg",{className:Lt(["react-flow__background",_]),style:{...p,...hc,"--xy-background-color-props":c,"--xy-background-pattern-color-props":u},ref:f,"data-testid":"rf__background",children:[d.jsx("pattern",{id:N,x:y[0]%E[0],y:y[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:k?d.jsx(S4,{radius:b/2,className:h}):d.jsx(q4,{dimensions:j,lineWidth:a,variant:t,className:h})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}lM.displayName="Background";const M4=L.memo(lM);function E4(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function I4(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function j4(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function N4(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function T4(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function xl({children:e,className:t,...n}){return d.jsx("button",{type:"button",className:Lt(["react-flow__controls-button",t]),...n,children:e})}const P4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function cM({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:c,onInteractiveChange:p,className:_,children:h,position:f="bottom-left",orientation:y="vertical","aria-label":v}){const w=xt(),{isInteractive:k,minZoomReached:x,maxZoomReached:q,ariaLabelConfig:E}=tt(P4,vt),{zoomIn:b,zoomOut:M,fitView:j}=Q0(),C=()=>{b(),s==null||s()},N=()=>{M(),u==null||u()},A=()=>{j(a),c==null||c()},P=()=>{w.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),p==null||p(!k)},z=y==="horizontal"?"horizontal":"vertical";return d.jsxs(Na,{className:Lt(["react-flow__controls",z,_]),position:f,style:e,"data-testid":"rf__controls","aria-label":v??E["controls.ariaLabel"],children:[t&&d.jsxs(d.Fragment,{children:[d.jsx(xl,{onClick:C,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:q,children:d.jsx(E4,{})}),d.jsx(xl,{onClick:N,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:x,children:d.jsx(I4,{})})]}),n&&d.jsx(xl,{className:"react-flow__controls-fitview",onClick:A,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:d.jsx(j4,{})}),o&&d.jsx(xl,{className:"react-flow__controls-interactive",onClick:P,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:k?d.jsx(T4,{}):d.jsx(N4,{})}),h]})}cM.displayName="Controls";const R4=L.memo(cM);function A4({id:e,x:t,y:n,width:o,height:a,style:s,color:u,strokeColor:c,strokeWidth:p,className:_,borderRadius:h,shapeRendering:f,selected:y,onClick:v}){const{background:w,backgroundColor:k}=s||{},x=u||w||k;return d.jsx("rect",{className:Lt(["react-flow__minimap-node",{selected:y},_]),x:t,y:n,rx:h,ry:h,width:o,height:a,style:{fill:x,stroke:c,strokeWidth:p},shapeRendering:f,onClick:v?q=>v(q,e):void 0})}const F4=L.memo(A4),L4=e=>e.nodes.map(t=>t.id),Pp=e=>e instanceof Function?e:()=>e;function D4({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:s=F4,onClick:u}){const c=tt(L4,vt),p=Pp(t),_=Pp(e),h=Pp(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:c.map(y=>d.jsx(V4,{id:y,nodeColorFunc:p,nodeStrokeColorFunc:_,nodeClassNameFunc:h,nodeBorderRadius:o,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:f},y))})}function O4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:c,onClick:p}){const{node:_,x:h,y:f,width:y,height:v}=tt(w=>{const{internals:k}=w.nodeLookup.get(e),x=k.userNode,{x:q,y:E}=k.positionAbsolute,{width:b,height:M}=vi(x);return{node:x,x:q,y:E,width:b,height:M}},vt);return!_||_.hidden||!_C(_)?null:d.jsx(c,{x:h,y:f,width:y,height:v,style:_.style,selected:!!_.selected,className:o(_),color:t(_),borderRadius:a,strokeColor:n(_),strokeWidth:s,shapeRendering:u,onClick:p,id:_.id})}const V4=L.memo(O4);var z4=L.memo(D4);const B4=200,H4=150,$4=e=>!e.hidden,W4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?pC(tu(e.nodeLookup,{filter:$4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},U4="react-flow__minimap-desc";function dM({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:c,bgColor:p,maskColor:_,maskStrokeColor:h,maskStrokeWidth:f,position:y="bottom-right",onClick:v,onNodeClick:w,pannable:k=!1,zoomable:x=!1,ariaLabel:q,inversePan:E,zoomStep:b=1,offsetScale:M=5}){const j=xt(),C=L.useRef(null),{boundingRect:N,viewBB:A,rfId:P,panZoom:z,translateExtent:F,flowWidth:D,flowHeight:Z,ariaLabelConfig:T}=tt(W4,vt),K=(e==null?void 0:e.width)??B4,U=(e==null?void 0:e.height)??H4,ne=N.width/K,Y=N.height/U,Q=Math.max(ne,Y),ie=Q*K,B=Q*U,J=M*Q,me=N.x-(ie-N.width)/2-J,$=N.y-(B-N.height)/2-J,te=ie+J*2,oe=B+J*2,de=`${U4}-${P}`,ue=L.useRef(0),ve=L.useRef();ue.current=Q,L.useEffect(()=>{if(C.current&&z)return ve.current=oP({domNode:C.current,panZoom:z,getTransform:()=>j.getState().transform,getViewScale:()=>ue.current}),()=>{var je;(je=ve.current)==null||je.destroy()}},[z]),L.useEffect(()=>{var je;(je=ve.current)==null||je.update({translateExtent:F,width:D,height:Z,inversePan:E,pannable:k,zoomStep:b,zoomable:x})},[k,x,E,b,F,D,Z]);const Ee=v?je=>{var We;const[Te,Ae]=((We=ve.current)==null?void 0:We.pointer(je))||[0,0];v(je,{x:Te,y:Ae})}:void 0,Re=w?L.useCallback((je,Te)=>{const Ae=j.getState().nodeLookup.get(Te).internals.userNode;w(je,Ae)},[]):void 0,Ie=q??T["minimap.ariaLabel"];return d.jsx(Na,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof _=="string"?_:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*Q:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Lt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:K,height:U,viewBox:`${me} ${$} ${te} ${oe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:C,onClick:Ee,children:[Ie&&d.jsx("title",{id:de,children:Ie}),d.jsx(z4,{onClick:Re,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:c}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${me-J},${$-J}h${te+J*2}v${oe+J*2}h${-te-J*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}dM.displayName="MiniMap";const G4=L.memo(dM),K4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Y4={[ja.Line]:"right",[ja.Handle]:"bottom-right"};function Q4({nodeId:e,position:t,variant:n=ja.Handle,className:o,style:a=void 0,children:s,color:u,minWidth:c=10,minHeight:p=10,maxWidth:_=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:y,autoScale:v=!0,shouldResize:w,onResizeStart:k,onResize:x,onResizeEnd:q}){const E=HC(),b=typeof e=="string"?e:E,M=xt(),j=L.useRef(null),C=n===ja.Handle,N=tt(L.useCallback(K4(C&&v),[C,v]),vt),A=L.useRef(null),P=t??Y4[n];L.useEffect(()=>{if(!(!j.current||!b))return A.current||(A.current=vP({domNode:j.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:F,transform:D,snapGrid:Z,snapToGrid:T,nodeOrigin:K,domNode:U}=M.getState();return{nodeLookup:F,transform:D,snapGrid:Z,snapToGrid:T,nodeOrigin:K,paneDomNode:U}},onChange:(F,D)=>{const{triggerNodeChanges:Z,nodeLookup:T,parentLookup:K,nodeOrigin:U}=M.getState(),ne=[],Y={x:F.x,y:F.y},Q=T.get(b);if(Q&&Q.expandParent&&Q.parentId){const ie=Q.origin??U,B=F.width??Q.measured.width??0,J=F.height??Q.measured.height??0,me={id:Q.id,parentId:Q.parentId,rect:{width:B,height:J,...fC({x:F.x??Q.position.x,y:F.y??Q.position.y},{width:B,height:J},Q.parentId,T,ie)}},$=Y0([me],T,K,U);ne.push(...$),Y.x=F.x?Math.max(ie[0]*B,F.x):void 0,Y.y=F.y?Math.max(ie[1]*J,F.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const ie={id:b,type:"position",position:{...Y}};ne.push(ie)}if(F.width!==void 0&&F.height!==void 0){const B={id:b,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};ne.push(B)}for(const ie of D){const B={...ie,type:"position"};ne.push(B)}Z(ne)},onEnd:({width:F,height:D})=>{const Z={id:b,type:"dimensions",resizing:!1,dimensions:{width:F,height:D}};M.getState().triggerNodeChanges([Z])}})),A.current.update({controlPosition:P,boundaries:{minWidth:c,minHeight:p,maxWidth:_,maxHeight:h},keepAspectRatio:f,resizeDirection:y,onResizeStart:k,onResize:x,onResizeEnd:q,shouldResize:w}),()=>{var F;(F=A.current)==null||F.destroy()}},[P,c,p,_,h,f,k,x,q,w]);const z=P.split("-");return d.jsx("div",{className:Lt(["react-flow__resize-control","nodrag",...z,n,o]),ref:j,style:{...a,scale:N,...u&&{[C?"backgroundColor":"borderColor"]:u}},children:s})}L.memo(Q4);const Yl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Ql=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Xl=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Qi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},gc=(e,t)=>{try{if(typeof localStorage>"u")return t;const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},X4=(e,t)=>{try{if(typeof localStorage>"u")return;localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let Hr=gc(Qi.PRODUCTS,Yl),sn=gc(Qi.MACHINES,Ql),jn=gc(Qi.RECIPES,Xl);const gt=e=>Hr.find(t=>t.id===e),Ct=e=>sn.find(t=>t.id===e),Z0=(e,t,n)=>{e.length=0,e.push(...t),X4(n,e)},m0=e=>Z0(Hr,e,Qi.PRODUCTS),h0=e=>Z0(sn,e,Qi.MACHINES),y0=e=>Z0(jn,e,Qi.RECIPES),Z4=()=>gc(Qi.CANVAS_STATE,null),J4=()=>{typeof localStorage<"u"&&localStorage.removeItem(Qi.CANVAS_STATE)},e6=()=>{m0(Yl),h0(Ql),y0(Xl),J4()},J0=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),t6=e=>e==="p_variableproduct",mi=(e,t,n)=>{if(t6(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const o=t(e);return o?o.name:"Unknown Product"},r6=e=>J0(e)?"Variable":typeof e=="number"?e.toString():e,bs=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,n6=e=>{if(J0(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:bs(e.drilling),idle:bs(e.idle)};if("max"in e&&"average"in e)return{max:bs(e.max),average:bs(e.average)}}return bs(e)},i6=e=>J0(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,L1=(e,t)=>{const n=r6(e.quantity),o=mi(e.product_id,t);return`${n}x ${o}`},o6=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],pM=e=>o6.includes(e),$r=18,Ki=18,Tn=100,hr={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},eg=(e,t={},n=$r,o=null,a=null)=>{const s=hr[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[o]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Ki,c=t.heatLoss??s.defaultHeatLoss;return u-c;default:return n}},D1=(e,t)=>{const n=hr[e];if(!n||n.type!=="configurable")return null;const o=n.tempOptions.find(a=>a.temp===t);return o?o.power:null},Zl=e=>e==null?"":`${Math.round(e)}C`,a6=e=>{const t=hr[e];return t&&t.type==="configurable"},s6=e=>{const t=hr[e];return t&&t.type==="boiler"},u6=e=>{const t=hr[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},l6=e=>e<=0?1/0:e>=400?2:800/e,c6=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,d6=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,p6=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},_6=e=>e<=0?1/0:64/(.176*Math.abs(e)),un={m_industrial_drill:{type:"steam_input",formula:l6},m_alloyer:{type:"steam_input",formula:c6},m_coal_liquefaction_plant:{type:"steam_input",formula:d6},m_steam_cracking_plant:{type:"steam_input",formula:p6},m_water_treatment_plant:{type:"steam_input",formula:_6}},Ur=e=>e in un,Yn=(e,t,n)=>{const o=un[e];if(!o)return n;const a=o.formula(t);return isFinite(a)?a:n},yi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),O1=(e,t)=>{const n=new Map,o=new Map;Object.keys(e.nodes).forEach(c=>{const p=e.nodes[c];p&&(p.inputs.forEach((_,h)=>{o.set(`${c}:${h}`,$r)}),p.outputs.forEach((_,h)=>{n.set(`${c}:${h}`,$r)}))});const{sorted:a,cycleNodes:s}=m6(e),u=(c,p=!1)=>{const _=e.nodes[c];if(!_)return!1;const h={id:_.recipe.machine_id},f=hr[h.id];let y=!1;return _.inputs.forEach((v,w)=>{const k=f6(e,t,c,w,n,!p),x=o.get(`${c}:${w}`),q=k!==null?k:x;Math.abs(q-x)>.01&&(o.set(`${c}:${w}`,q),y=!0)}),_.outputs.forEach((v,w)=>{var x,q;let k=$r;if(f){if(f.type==="fixed")k=f.outputTemp;else if(f.type==="additive"){if(_.inputs.length>0){const E=o.get(`${c}:0`)||$r;E>f.maxTemp?k=E:k=Math.min(E+f.tempIncrease,f.maxTemp)}}else if(f.type==="configurable")k=((x=_.recipe.temperatureSettings)==null?void 0:x.temperature)||f.tempOptions[0].temp;else if(f.type==="product_dependent"){if(_.inputs.length>0){const E=_.inputs[0].productId;k=f.temps[E]||f.temps.p_water||400}}else if(f.type==="boiler"){if(_.inputs.length>=2){const E=o.get(`${c}:1`)||$r,b=((q=_.recipe.temperatureSettings)==null?void 0:q.heatLoss)||f.defaultHeatLoss,M=E-b;w===0?k=M*.85:w===1&&(M<f.minSteamTemp?k=Math.max(M,$r):k=M)}}else if(f.type==="passthrough"){const E=_.inputs.findIndex(b=>b.productId===f.inputProduct);E>=0&&(k=o.get(`${c}:${E}`)||$r)}}n.set(`${c}:${w}`,k)}),y};if(a.forEach(c=>{s.has(c)||u(c)}),s.size>0){let p=0,_=!0;const h=a.filter(y=>s.has(y));for(;_&&p<100;)_=!1,h.forEach(y=>{u(y,!0)&&(_=!0)}),p++;const f=new Set;a.forEach(y=>{if(s.has(y))return;const v=e.nodes[y];v&&v.inputs.forEach((w,k)=>{const x=e.products[w.productId];if(!x)return;x.connections.filter(E=>E.targetNodeId===y&&E.targetInputIndex===k).forEach(E=>{s.has(E.sourceNodeId)&&f.add(y)})})}),f.forEach(y=>{u(y,!1)})}return{outputTemperatures:n,inputTemperatures:o}},f6=(e,t,n,o,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[o].productId];if(!u)return s?$r:null;const c=u.connections.filter(f=>f.targetNodeId===n&&f.targetInputIndex===o);if(c.length===0)return s?$r:null;const p=[];if(c.forEach(f=>{var v;const y=a.get(`${f.sourceNodeId}:${f.sourceOutputIndex}`);if(y!=null){const w=((v=t.byConnection[f.id])==null?void 0:v.flowRate)||0;p.push({temp:y,flow:w})}}),p.length===0)return s?$r:null;const _=p.reduce((f,y)=>f+y.flow,0);if(_>0){const f=p.reduce((y,v)=>y+v.temp*v.flow,0);return Math.round(f/_*1e10)/1e10}const h=p.reduce((f,y)=>f+y.temp,0);return Math.round(h/p.length*1e10)/1e10},m6=e=>{const t=[],n=new Set,o=new Set,a=new Set,s=(u,c=[])=>{if(n.has(u))return;if(o.has(u)){const h=c.indexOf(u);for(let f=h;f<c.length;f++)a.add(c[f]);a.add(u);return}o.add(u);const p=[...c,u],_=e.nodes[u];_&&_.inputs.forEach((h,f)=>{const y=e.products[h.productId];y&&y.connections.filter(w=>w.targetNodeId===u&&w.targetInputIndex===f).forEach(w=>{n.has(w.sourceNodeId)||s(w.sourceNodeId,p)})}),o.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},g0=(e,t,n)=>e.map(o=>{if(!n.nodes[o.id])return o;const s={id:o.data.recipe.machine_id},u=hr[s.id],c=Ur(s.id),p=o.data.recipe.outputs.map((h,f)=>{const y=t.outputTemperatures.get(`${o.id}:${f}`);if(y!=null){if((u==null?void 0:u.type)==="boiler"&&h.product_id==="p_steam"){const v=u.minSteamTemp||100;return y<v?{...h,temperature:y,quantity:0,originalQuantity:h.originalQuantity||h.quantity}:{...h,temperature:y,quantity:h.originalQuantity||h.quantity,originalQuantity:h.originalQuantity||h.quantity}}return{...h,temperature:y}}return h});let _={...o.data.recipe,outputs:p};if(c){const h=un[s.id];if((h==null?void 0:h.type)==="steam_input"){const f=o.data.recipe.inputs.findIndex(y=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(y.product_id));if(f>=0){const y=t.inputTemperatures.get(`${o.id}:${f}`);if(y!=null&&(_={..._,tempDependentInputTemp:y},s.id==="m_water_treatment_plant")){const w=90*Yn(s.id,y,1);_={..._,inputs:_.inputs.map((k,x)=>x===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(k.product_id)?{...k,quantity:w,originalQuantity:90}:k)}}}}}return{...o,data:{...o.data,recipe:_}}}),v0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],x0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],h6={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},y6=12,g6=3.1,v6=.1,x6=.02,w6=2,Ws={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},b6=()=>Object.keys(Ws).map(e=>parseInt(e)).sort((e,t)=>e-t),q6=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},S6=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Lo=(e,t,n,o)=>{if(!e||!o)return null;const a=q6(e,o),s=S6(t||"none",o),u=n?1.1:1,c=.5*a*s*u,p=Math.ceil(100/c),_=y6,h=n?100:50,f=2*o/h,y=p+_+f,v=p/y;return{deteriorationRate:c,lifeTime:p,replacementTime:_,travelTime:f,totalCycleTime:y,dutyCycle:v,drillingPower:g6,idlePower:v6,pollution:x6}},_M=(e,t,n,o)=>{const a=[],s=Lo(e,t,n,o);if(!s){if(e){const u=v0.find(c=>c.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=x0.find(c=>c.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=v0.find(c=>c.id===e);if(u){const c=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(c.toFixed(6))})}}if(t&&t!=="none"){const u=x0.find(c=>c.id===t);if(u!=null&&u.product_id){const p=(h6[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(p.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:w6}),a},fM=(e,t,n,o)=>{if(!o)return[];const a=Ws[o];if(!a)return[];const s=Lo(e,t,n,o);if(!s)return a.map(c=>({...c,quantity:"Variable"}));const u=n?1.1:1;return a.map(c=>{const p=c.quantity*u*s.dutyCycle;return{product_id:c.product_id,quantity:parseFloat(p.toFixed(4))}})},V1={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},z1=4,k6=20,C6=4,B1=5e5,M6=.3,E6=10,wl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},I6=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),o=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:o,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},mM=I6(),j6=e=>mM.find(t=>t.productId===e),iu=(e,t,n=0)=>{const o=j6(e);if(!o)return null;const s=Math.log2(o.innerStage)+(o.outerStage-1)*6,u=z1*s,c=t?C6:k6,p=n/6,_=s*z1*(c+p)+E6,h=wl.logic_plates*s,f=wl.copper_wires*s,y=wl.semiconductors*s,v=wl.gold_wires*s,w=[{product_id:"p_logic_plate",quantity:h},{product_id:"p_copper_wire",quantity:f},{product_id:"p_semiconductor",quantity:y},{product_id:"p_gold_wire",quantity:v}];t&&w.push({product_id:"p_machine_oil",quantity:parseFloat((M6*_).toFixed(6))});const k=[{product_id:e,quantity:1}],x=B1/c,q=B1/(t?.8:4);return{outerStage:o.outerStage,innerStage:o.innerStage,totalStages:s,totalSteps:u,avgStepTime:c,cycleTime:_,inputs:w,outputs:k,avgPowerConsumption:x,maxPowerConsumption:q,logicPlates:h,copperWires:f,semiconductors:y,goldWires:v}},hM=(e,t)=>{const n=iu(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},yM=(e,t)=>{const n=iu(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},H1={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},w0=11,gM=2,N6=2e5,vM=1,T6=3,xM=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,wM=e=>Math.ceil(e/T6),Jl=(e,t,n,o,a,s)=>{if(!e||!t||!n||!o||a!==1)return null;const u=wM(n),c=xM(s),p=n*vM,_=e/c,h=t/w0,f=Math.min(_,h),y=f*gM,v=t*N6/w0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:o,controller:a,growthTime:c,waterConsumption:p,sustainableHarvestRate:_,maxHarvestRate:h,actualHarvestRate:f,logOutput:y,avgPowerConsumption:v,isTreeLimited:_<h}},bM=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*vM}],tg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const o=xM(n),a=e/o,s=t/w0,c=Math.min(a,s)*gM;return[{product_id:"p_oak_log",quantity:parseFloat(c.toFixed(6))}]},$1={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},rg=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],qM={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},P6={r_industrial_firebox_07:1},SM=e=>rg.find(t=>t.id===e),ec=(e,t)=>{const n=qM[e],o=SM(t);if(!n||!o)return null;const a=n/o.energy,s=P6[e]||0,u=a+s,c=1,p=a;return{energyNeeded:n,fuelEnergy:o.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:c,fuelPerCycle:p}},b0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const o=ec(n,t);if(!o)return e;const a=SM(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(o.fuelPerCycle.toFixed(6))},u=rg.map(p=>p.product_id),c=e.filter(p=>p.product_id!=="p_variableproduct"&&!u.includes(p.product_id));return[s,...c]},kM=e=>e in qM,CM=(e,t)=>{const o=(e-100)/5;let a=1,s=1;e<100?(a=1+o*.05,s=1+o*.06666666666666667):e>100&&(a=1+o*.05,s=1+o*.1);const c=(t-100)/5;let p=1,_=1;t<100?(p=1+c*-.0625,_=1+c*.05):t>100&&(p=1+c*-.0425,_=1+c*.25);const h=a*p,f=a,y=s+_-1;return{inputMultiplier:h,outputMultiplier:f,powerMultiplier:y}},R6=(e,t,n)=>{const o=CM(t,n),a=e.inputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.inputMultiplier).toFixed(6)):c.quantity})),s=e.outputs.map(c=>({...c,quantity:typeof c.quantity=="number"?parseFloat((c.quantity*o.outputMultiplier).toFixed(6)):c.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*o.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Ui=7e3,ng=140,ig=70,MM=1e6,W1=240,Rp=29.166666666666668,Ns=240,EM=480,Rl=(e,t)=>{const n=e+t;let o;return n<=Ns?o=Rp:n>=EM?o=Rp/2:o=Rp*Ns/n,{cycleTime:o,concreteBlocksPerCycle:ng,leadIngotsPerCycle:ig,totalFlow:n,powerConsumption:MM}},tc=(e,t,n,o)=>{const a=Math.min(e,W1),s=Math.min(t,W1),u=a+s;let c,p;return u<=Ns?(c=Ui,p=Ui):u>=EM?(c=Ui/2,p=Ui/2):(c=Ui*Ns/u,p=Ui*Ns/u),[{product_id:n||"p_variableproduct",quantity:c,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:o||"p_variableproduct",quantity:p,isAnyProduct:o==="p_any_fluid"||!o,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:ng},{product_id:"p_lead_ingot",quantity:ig}]},q0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:MM,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Ui,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Ui,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:ng},{product_id:"p_lead_ingot",quantity:ig}],outputs:[],isWasteFacility:!0},S0=15,A6=2,F6=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ts=(e,t=null)=>{let n=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:o.quantity||0;F6.includes(o.product_id)?n+=0:o.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},k0=e=>{const t=[];for(let n=0;n<A6;n++){const o=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:S0})}return t},C0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:S0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:S0}],outputs:[],isLiquidDump:!0},IM=15,jM=8,L6=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ps=(e,t=null)=>{let n=0;return e.forEach((o,a)=>{if(!o.product_id||o.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:o.quantity||0;L6.includes(o.product_id)?n+=0:o.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},M0=e=>{const t=[];for(let n=0;n<jM;n++){const o=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:o,quantity:15,isAnyProduct:o==="p_any_fluid"||o==="p_variableproduct",acceptedType:"fluid",maxFlow:IM})}return t},E0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(jM).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:IM})),outputs:[],isLiquidBurner:!0},U1=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",D6=(e,t,n)=>{switch(e){case"drill":return O6();case"assembler":return V6();case"treeFarm":return z6(n);case"firebox":return B6(t);case"temperature":return H6(t);case"boiler":return $6();case"chemicalPlant":return W6();case"wasteFacility":return U6();case"liquidDump":return G6();case"liquidBurner":return K6();default:return null}},O6=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...v0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:x0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...b6().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Lo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),d.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=_M(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=fM(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),o=e.drillHead&&e.depth?Lo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:o}}}),V6=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,o=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return o?d.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:o}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?iu(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Total Stages: ",e.totalStages]}),d.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),d.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),d.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[d.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),d.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[d.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[d.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),d.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),d.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),d.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,c;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((c=e.microchip)==null?void 0:c.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},o=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=hM(o,t.machineOil),s=yM(o,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),z6=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=wM(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Jl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),d.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),d.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),d.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&d.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const o=bM(t.sprinklers),a=tg(t.trees,t.harvesters,e);return{settings:t,inputs:o,outputs:a,metrics:null}}}),B6=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:rg.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>ec(e.id,t.fuel),renderMetrics:(t,n)=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[d.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),d.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),d.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&d.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),d.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),d.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),d.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),d.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[d.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),d.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:b0(e.inputs,n.fuel,e.id).map((o,a)=>{const s=typeof o.quantity=="number"?o.quantity.toFixed(4):o.quantity,u=mi(o.product_id,gt);return d.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const o=ec(n.id,t.fuel),a=b0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:o}}}),H6=e=>{var o,a;const t=e.machine_id,n=hr[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(o=n.tempOptions)==null?void 0:o[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Zl(s.temp)} - ${U1(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const c=u.temperature,p=D1(t,c);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:["Output Temperature: ",Zl(c)]}),d.jsxs("div",{children:["Power Consumption: ",U1(p)]})]})}}],onApply:(s,u)=>{const c=D1(t,s.temperature),p=u.outputs.map(_=>({..._,temperature:eg(t,s)}));return{settings:s,inputs:[],outputs:p,metrics:c}}}},$6=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[" Boiler uses the ",d.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),d.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),d.jsx("div",{children:" If output temp < 100C, no steam is produced"}),d.jsx("div",{children:" Water output is cooled (no temperature)"}),d.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),W6=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>CM(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),d.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[d.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),d.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),d.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),d.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[d.jsx("div",{children:" Speed affects input/output quantities and power"}),d.jsx("div",{children:" Efficiency affects input quantities and power"}),d.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),U6=()=>{const e=Hr.filter(n=>n.type==="item").sort((n,o)=>n.name.localeCompare(o.name)),t=Hr.filter(n=>n.type==="fluid").sort((n,o)=>n.name.localeCompare(o.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 240/s"}),d.jsx("div",{children:" Fixed requirements per cycle:"}),d.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),d.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const o=tc(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:o,outputs:[],metrics:null}}}},G6=()=>{const e=Hr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const o=[n.fluidProductId0,n.fluidProductId1],a=k0(o),s=Ts(a);return d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Water variants: 0%/hr"}),d.jsx("div",{children:" Residue: 8.64%/hr per /s"}),d.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),d.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:d.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),d.jsx("div",{children:" Connect fluids to dispose of them"}),d.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],o=k0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:o,outputs:[],metrics:null}}}},K6=()=>{const e=Hr.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(o=>({value:o.id,label:o.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const o=Array(8).fill(0).map((u,c)=>n[`fluidProductId${c}`]),a=M0(o),s=Ps(a);return d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Water variants: 0%/hr"}),d.jsx("div",{children:" Residue: 8.64%/hr per /s"}),d.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),d.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:d.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),d.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),d.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),o=M0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:o,outputs:[],metrics:null}}}},Y6=({recipeType:e,nodeId:t,currentSettings:n,recipe:o,globalPollution:a,onSettingsChange:s,onClose:u})=>{var x;const c=D6(e,o,a),[p,_]=L.useState(n||c.defaultSettings),h=L.useRef(null),f=q=>{const E=h.current;if(!E)return;const b=E.scrollHeight>E.clientHeight,M=E.scrollTop===0&&q.deltaY<0,j=E.scrollTop+E.clientHeight>=E.scrollHeight&&q.deltaY>0;b&&!M&&!j||q.preventDefault(),q.stopPropagation()},y=(q,E)=>{_(typeof q=="object"?b=>({...b,...q}):b=>({...b,[q]:E}))},v=()=>{const q=c.onApply(p,o);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,q.settings,q.inputs,q.outputs);break;case"firebox":s(t,q.settings,q.inputs,q.metrics);break;case"temperature":s(t,q.settings,q.outputs,q.metrics);break;case"boiler":case"chemicalPlant":s(t,q.settings);break;default:s(t,q.settings,q.inputs,q.outputs,q.metrics)}u()},w=()=>{_(c.defaultSettings)},k=c.calculateMetrics?c.calculateMetrics(p,o):null;return PP.createPortal(d.jsx("div",{className:"drill-settings-overlay",onClick:u,children:d.jsxs("div",{ref:h,className:"drill-settings-bubble",onClick:q=>q.stopPropagation(),onDoubleClick:q=>q.stopPropagation(),onWheel:f,children:[d.jsx("h3",{className:"drill-settings-title",children:c.title}),d.jsxs("div",{className:"drill-settings-content",children:[c.fields.map((q,E)=>d.jsx(Q6,{field:q,value:p[q.key],settings:p,onChange:(b,M)=>{q.type==="dual-select"?y(b,M):y(q.key,b)}},E)),k&&c.renderMetrics&&d.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:c.renderMetrics(k,p)})]}),d.jsxs("div",{className:"drill-settings-buttons",children:[d.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Reset"}),d.jsx("button",{onClick:v,className:"btn btn-primary",disabled:(x=c.hasErrors)==null?void 0:x.call(c,p),children:"Apply"})]})]})}),document.body)},Q6=({field:e,value:t,settings:n,onChange:o})=>{var a,s;switch(e.type){case"select":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("select",{value:t,onChange:u=>o(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>d.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&d.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return d.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:d.jsxs("label",{className:"drill-setting-label",children:[d.jsx("input",{type:"checkbox",checked:t,onChange:u=>o(u.target.checked),className:"drill-checkbox"}),d.jsx("span",{children:e.label})]})});case"number":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>o(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&d.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("button",{onClick:()=>o(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),d.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),d.jsx("button",{onClick:()=>o(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[d.jsxs("span",{children:["Min: ",e.min]}),d.jsxs("span",{children:["Default: ",e.defaultValue]}),d.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsx("input",{type:"text",value:t,onChange:u=>o(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return d.jsxs("div",{className:"drill-setting-group",children:[d.jsx("label",{className:"drill-setting-label",children:e.label}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[d.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const c=u.target.value;o(e.outerKey,c),c&&parseInt(c)>1&&o(e.innerKey,"64")},className:"select",style:{flex:1},children:[d.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>d.jsxs("option",{value:u,children:[u,"x"]},u))]}),d.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>o(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[d.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?d.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>d.jsxs("option",{value:u,children:[u,"x"]},u))]}),d.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return d.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[d.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),d.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},Rs=44,I0=8,G1=10,K1=20,Y1=380,X6=120,bl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,Z6=L.memo(({data:e,id:t})=>{var rr,Ut,Qe,bi,Tt,dn;const{recipe:n,machine:o,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:c,onOutputClick:p,isTarget:_,onDrillSettingsChange:h,onLogicAssemblerSettingsChange:f,onTreeFarmSettingsChange:y,onIndustrialFireboxSettingsChange:v,onTemperatureSettingsChange:w,onBoilerSettingsChange:k,onChemicalPlantSettingsChange:x,globalPollution:q,flows:E,isMobile:b,mobileActionMode:M,onMachineCountModeChange:j,zoomLevel:C}=e,N=!C||C>=.25,[A,P]=L.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!o)return null;const z=n.isMineshaftDrill||n.id==="r_mineshaft_drill",F=n.isLogicAssembler||n.id==="r_logic_assembler",D=n.isTreeFarm||n.id==="r_tree_farm",Z=n.isWasteFacility||n.id==="r_underground_waste_facility",T=n.isLiquidDump||n.id==="r_liquid_dump",K=n.isLiquidBurner||n.id==="r_liquid_burner",U=z||F||D||Z||T||K,ne=a6(o.id),Y=s6(o.id),Q=hr[o.id],ie=o.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",B=o.id==="m_chemical_plant",J=Ur(o.id),me=J?un[o.id]:null;let $=n.cycle_time;const te=$==="Variable"||typeof $!="number"||$<=0;if(te&&!U?$="Variable":te&&U&&($=1),J&&(me==null?void 0:me.type)==="steam_input"&&typeof $=="number"&&!(o.id==="m_steam_cracking_plant"&&!yi(n))){const fe=n.tempDependentInputTemp??Tn;$=Yn(o.id,fe,$)}const oe={outputs:[]};if(Q){const fe=Q.type==="boiler",ot=(rr=n.outputs)==null?void 0:rr.some(At=>["p_water","p_filtered_water","p_distilled_water"].includes(At.product_id)),Dr=(Ut=n.outputs)==null?void 0:Ut.some(At=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(At.product_id)),Or=(Qe=n.inputs)==null?void 0:Qe.some(At=>["p_water","p_filtered_water","p_distilled_water"].includes(At.product_id)),gr=n.id==="r_industrial_firebox_07",ei=o.id==="m_industrial_firebox";(!ei||ei&&!gr&&(Or||ot))&&((bi=n.outputs)==null||bi.forEach((At,nr)=>{if(pM(At.product_id)&&At.temperature!=null){const Gt=["p_water","p_filtered_water","p_distilled_water"].includes(At.product_id),dt=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(At.product_id);fe?dt&&Dr&&oe.outputs.push({temp:At.temperature,index:nr}):(Gt&&ot||dt&&Dr)&&oe.outputs.push({temp:At.temperature,index:nr})}}))}const de=L.useCallback(fe=>{if(fe==="Variable")return"Variable";if(typeof fe!="number")return String(fe);if($==="Variable")return s==="perSecond"?"Variable":String(bl(fe));let ot=s==="perSecond"?fe/$:fe;return u==="total"&&(ot*=a||0),String(bl(ot))},[$,s,u,a]),ue=L.useCallback(fe=>{if(fe==="Variable"||typeof fe!="number")return fe;if(s==="perSecond")return"1s";if(fe>=60){const ot=Math.floor(fe/60),Dr=fe%60;return`${ot}m ${bl(Dr)}s`}return`${bl(fe)}s`},[s]),ve=L.useMemo(()=>ue($),[$,ue]);let Ee=n.power_consumption,Re=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Ee=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Ee={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Ee={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(Re=n.pollution*a));const Ie=n6(Ee),je=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),Te=n.power_type==="HV"?" HV":"",Ae=n.inputs.length,We=n.outputs.length,Be=Math.max(Ae,We,1),st=Ae>0,at=We>0,Mt=Y1-G1*2,bt=st&&at?Math.floor((Mt-K1)/2):st?Mt:0,qt=st&&at?Math.floor((Mt-K1)/2):at?Mt:0,ut=Y1,tr=Be*Rs+(Be-1)*I0+24,Wt=X6+tr+12,it=a??0,Lr=Number.isInteger(it)?it.toString():it.toFixed(2),Nt=e.machineCountMode||"free",Kr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`custom-node ${_?"target":""}`,style:{width:ut,height:Wt},onMouseDownCapture:fe=>{fe.button===1&&(fe.preventDefault(),fe.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[d.jsxs("div",{className:"node-info-area",children:[oe.outputs.length>0&&d.jsx("div",{onDoubleClick:fe=>fe.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:oe.outputs.map((fe,ot)=>d.jsx("div",{children:Zl(fe.temp)},`output-${ot}`))}),J&&(me==null?void 0:me.type)==="steam_input"&&yi(n)&&d.jsx("div",{onDoubleClick:fe=>fe.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Zl(n.tempDependentInputTemp??Tn)}),z&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("drill")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),F&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("assembler")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),D&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("treeFarm")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),ie&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("firebox")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),B&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("chemicalPlant")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),Z&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("wasteFacility")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),T&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("liquidDump")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),K&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("liquidBurner")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),ne&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("temperature")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),Y&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),P("boiler")},onDoubleClick:fe=>fe.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),d.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),d.jsxs("div",{className:"node-stats-row",children:[d.jsxs("div",{className:"node-stats",style:{gap:je?"1px":"3px",minHeight:"65px",visibility:N?"visible":"hidden"},children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",ve]}),je?"drilling"in Ie?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,Te]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,Te]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,Te]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,Te]})]}):d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,Te]}),d.jsxs("div",{className:"node-stat-row",children:[d.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",i6(Re)]})]}),d.jsxs("div",{className:"node-machine-info",style:{visibility:N?"visible":"hidden"},children:[d.jsx("div",{className:"node-machine-name",title:o.name,style:{color:o.tier===1?"var(--tier-1-color)":o.tier===2?"var(--tier-2-color)":o.tier===3?"var(--tier-3-color)":o.tier===4?"var(--tier-4-color)":(o.tier===5,"var(--tier-5-color)")},children:o.name}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{className:"node-machine-count",style:Kr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Lr}),Nt!=="free"&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),j&&j(t,Nt,a)},onDoubleClick:fe=>fe.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:fe=>fe.currentTarget.style.opacity="1",onMouseLeave:fe=>fe.currentTarget.style.opacity="0.8",title:Nt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Tt=e.cappedMachineCount)==null?void 0:Tt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((dn=e.cappedMachineCount)==null?void 0:dn.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Nt==="locked"?"":""})]})]})]})]}),d.jsxs("div",{className:"node-io-area",children:[d.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:st&&at?`${bt}px 1fr ${qt}px`:"1fr",padding:`0 ${G1}px`},children:[st&&d.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((fe,ot)=>d.jsx("div",{className:"node-rect-wrapper",children:d.jsx(Q1,{side:"left",index:ot,width:bt,input:fe,onClick:c,nodeId:t,formatQuantity:de,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${ot}-${fe.product_id}`))}),st&&at&&d.jsx("div",{className:"node-io-gap"}),at&&d.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((fe,ot)=>d.jsx("div",{className:"node-rect-wrapper",children:d.jsx(Q1,{side:"right",index:ot,width:qt,input:fe,onClick:p,nodeId:t,formatQuantity:de,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${ot}-${fe.product_id}`))})]}),d.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((fe,ot)=>d.jsx(X1,{side:"left",index:ot,onClick:c,nodeId:t,productId:fe.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:fe,data:e,leftCount:Ae,rightCount:We},`handle-left-${t}-${ot}`)),n.outputs.map((fe,ot)=>d.jsx(X1,{side:"right",index:ot,onClick:p,nodeId:t,productId:fe.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:fe,data:e,leftCount:Ae,rightCount:We},`handle-right-${t}-${ot}`))]})]})]}),A&&d.jsx(Y6,{recipeType:A,nodeId:t,currentSettings:A==="drill"?n.drillSettings:A==="assembler"?n.assemblerSettings:A==="treeFarm"?n.treeFarmSettings:A==="firebox"?n.fireboxSettings:A==="temperature"||A==="boiler"?n.temperatureSettings:A==="chemicalPlant"?n.chemicalPlantSettings:A==="wasteFacility"?n.wasteFacilitySettings:A==="liquidDump"?n.liquidDumpSettings:A==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:q||0,onSettingsChange:A==="drill"?h:A==="assembler"?f:A==="treeFarm"?y:A==="firebox"?v:A==="temperature"?w:A==="boiler"?k:A==="chemicalPlant"?x:A==="wasteFacility"?e.onWasteFacilitySettingsChange:A==="liquidDump"?e.onLiquidDumpSettingsChange:A==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>P(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,o=t.data;return!(n.recipe!==o.recipe||n.machineCount!==o.machineCount||n.flows!==o.flows||n.suggestions!==o.suggestions||n.displayMode!==o.displayMode||n.machineDisplayMode!==o.machineDisplayMode||n.isTarget!==o.isTarget||n.zoomLevel!==o.zoomLevel||n.machineCountMode!==o.machineCountMode)}),Q1=({side:e,index:t,width:n,input:o,onClick:a,nodeId:s,formatQuantity:u,isMobile:c,mobileActionMode:p})=>{const _=e==="left",h=mi(o.product_id,gt,o.acceptedType),f=u(o.quantity),y=!c||p==="pan";return d.jsx("div",{onClick:v=>{a&&y&&(v.stopPropagation(),a(o.product_id,s,t,v))},title:`${f}x ${h}`,className:`node-rect ${_?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${Rs}px`,minWidth:`${n}px`},children:d.jsxs("span",{className:"node-rect-text",children:[f,"x ",h]})})},X1=({side:e,index:t,onClick:n,nodeId:o,productId:a,flows:s,onHandleDoubleClick:u,suggestions:c,input:p,data:_,leftCount:h,rightCount:f})=>{var z,F;const v=getComputedStyle(document.documentElement),w=v.getPropertyValue("--handle-input-supplied").trim(),k=v.getPropertyValue("--handle-input-deficient").trim(),x=v.getPropertyValue("--handle-output-connected").trim(),q=v.getPropertyValue("--handle-output-excess").trim();let E=e==="left"?w:x;if(s){const D=e==="left"?(z=s.inputFlows)==null?void 0:z[t]:(F=s.outputFlows)==null?void 0:F[t];if(D){const Z=e==="left"?D.needed-D.connected:D.produced-D.connected;Math.abs(Z)>1e-6&&Z>0&&(E=e==="left"?k:q)}}const b=gt(a),j=(b==null?void 0:b.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",P=12+(Math.max(h,f)-(e==="left"?h:f))*(Rs+I0)/2+t*(Rs+I0)+Rs/2+11;return d.jsx($s,{type:e==="left"?"target":"source",position:e==="left"?He.Left:He.Right,id:`${e}-${t}`,style:{background:E,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:j,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${P}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:D=>{n&&D.ctrlKey&&(D.stopPropagation(),n(a,o,t,D))},onDoubleClick:D=>{u&&(D.stopPropagation(),u(o,e,t,a,c))}})},J6=({id:e,sourceX:t,sourceY:n,targetX:o,targetY:a,sourcePosition:s,targetPosition:u,data:c})=>{const p=(c==null?void 0:c.edgePath)||"orthogonal",_=(c==null?void 0:c.edgeStyle)||"animated",[h]=L.useMemo(()=>p==="straight"?$0({sourceX:t,sourceY:n,targetX:o,targetY:a}):p==="orthogonal"?Gl({sourceX:t,sourceY:n,sourcePosition:s,targetX:o,targetY:a,targetPosition:u,borderRadius:8}):H0({sourceX:t,sourceY:n,sourcePosition:s,targetX:o,targetY:a,targetPosition:u}),[t,n,o,a,s,u,p]),f=_==="animated"?"custom-edge custom-edge-animated":_==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return d.jsx("path",{id:e,className:f,d:h,fill:"none"})},e3=L.memo(J6,(e,t)=>{var n,o,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((o=t.data)==null?void 0:o.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),qa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},t3=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:qa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],rc=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,o])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,o)})},Al=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):qa}catch{return qa}},j0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),r3=()=>(rc(qa),j0(qa),qa),n3=({onClose:e})=>{const[t,n]=L.useState(Al()),[o,a]=L.useState(!1),s=f=>{const y={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},v={...f.theme,...y};n(v),rc(v),j0(v)},u=(f,y)=>{const v={...t,[f]:y};n(v),rc(v),j0(v)},c=()=>{const f=r3();n(f)},p=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],_=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],h=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:f=>f.stopPropagation(),style:{width:o?"700px":"600px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Theme Editor"}),o?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[d.jsxs("div",{className:"theme-group",children:[d.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[d.jsxs("div",{children:[d.jsx("label",{className:"theme-color-label",children:"Path Type:"}),d.jsx("select",{value:t.edgePath||"bezier",onChange:f=>u("edgePath",f.target.value),className:"select",style:{marginTop:"6px"},children:_.map(f=>d.jsx("option",{value:f.value,children:f.label},f.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"theme-color-label",children:"Line Style:"}),d.jsx("select",{value:t.edgeStyle||"animated",onChange:f=>u("edgeStyle",f.target.value),className:"select",style:{marginTop:"6px"},children:h.map(f=>d.jsx("option",{value:f.value,children:f.label},f.value))})]})]})]}),p.map(f=>d.jsxs("div",{className:"theme-group",children:[d.jsx("h3",{className:"theme-group-title",children:f.title}),d.jsx("div",{className:"theme-color-grid",children:f.colors.map(y=>{const v=t[y.key]||"#000000",w=v.length>7?v.substring(0,7):v;return d.jsxs("div",{className:"theme-color-item",children:[d.jsx("label",{className:"theme-color-label",children:y.label}),d.jsxs("div",{className:"theme-color-inputs",children:[d.jsx("input",{type:"color",value:w,onChange:k=>{const x=t[y.key];if(x&&x.length>7){const q=x.substring(7);u(y.key,k.target.value+q)}else u(y.key,k.target.value)},className:"theme-color-picker"}),d.jsx("input",{type:"text",value:t[y.key],onChange:k=>u(y.key,k.target.value),className:"input theme-color-text"})]})]},y.key)})})]},f.title))]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{onClick:c,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),d.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[d.jsx("div",{style:{marginBottom:"20px"},children:d.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t3.map(f=>d.jsx("div",{onClick:()=>s(f),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.02)",y.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow="none"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:f.name}),d.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:f.description})]}),d.jsx("div",{style:{display:"flex",gap:"6px"},children:[f.theme.colorPrimary,f.theme.bgMain,f.theme.inputBorder,f.theme.outputBorder].map((y,v)=>d.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:y,border:"1px solid rgba(255,255,255,0.2)"}},v))})]})},f.id))})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[d.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),d.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},i3=({onClose:e})=>d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Help & Controls"}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),d.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",d.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),d.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[d.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)"},children:[d.jsx("div",{children:"Cycle: 4s"}),d.jsx("div",{children:"Power: 150kW"}),d.jsx("div",{children:"Pollution: 0%/hr"})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),d.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),d.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),d.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),d.jsx("div",{style:{minWidth:"250px"},children:d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),d.jsxs("div",{style:{marginTop:"20px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[d.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),d.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),d.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),d.jsxs("div",{style:{marginTop:"25px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",d.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[d.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),d.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),d.jsxs("div",{style:{marginBottom:"30px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:["Use ",d.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",d.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:[d.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsxs("span",{children:["Use ",d.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[d.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),d.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),d.jsxs("div",{style:{paddingLeft:"15px"},children:[d.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),d.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),d.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),d.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),d.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),o3="industrialist_db",a3=1,yr="canvas_saves",Us="industrialist_current_save_id";let ql=null;const Xi=()=>new Promise((e,t)=>{if(ql){e(ql);return}const n=indexedDB.open(o3,a3);n.onerror=()=>{console.error("IndexedDB failed to open:",n.error),t(n.error)},n.onsuccess=()=>{ql=n.result,e(ql)},n.onupgradeneeded=o=>{const a=o.target.result;if(!a.objectStoreNames.contains(yr)){const s=a.createObjectStore(yr,{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("name","name",{unique:!1})}}}),NM=async()=>{try{const e=await Xi();return new Promise((t,n)=>{const s=e.transaction([yr],"readonly").objectStore(yr).getAll();s.onsuccess=()=>{const u=s.result,c={};u.forEach(p=>{c[p.id]=p}),t(c)},s.onerror=()=>{console.error("Error getting saves:",s.error),n(s.error)}})}catch(e){return console.error("Error accessing IndexedDB:",e),{}}},s3=async(e,t)=>{var n;try{const o=await Xi(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return new Promise((u,c)=>{const h=o.transaction([yr],"readwrite").objectStore(yr).add(s);h.onsuccess=()=>{localStorage.setItem(Us,a),u(s)},h.onerror=()=>{console.error("Error saving canvas:",h.error),c(h.error)}})}catch(o){return console.error("Error saving to IndexedDB:",o),null}},u3=async e=>{try{const t=await Xi();return new Promise((n,o)=>{const u=t.transaction([yr],"readonly").objectStore(yr).get(e);u.onsuccess=()=>{const c=u.result;c?(localStorage.setItem(Us,e),n(c.data)):n(null)},u.onerror=()=>{console.error("Error loading save:",u.error),o(u.error)}})}catch(t){return console.error("Error loading from IndexedDB:",t),null}},l3=async e=>{try{const t=await Xi();return new Promise((n,o)=>{const u=t.transaction([yr],"readwrite").objectStore(yr).delete(e);u.onsuccess=()=>{localStorage.getItem(Us)===e&&localStorage.removeItem(Us),n(!0)},u.onerror=()=>{console.error("Error deleting save:",u.error),o(u.error)}})}catch(t){return console.error("Error deleting from IndexedDB:",t),!1}},c3=async(e,t)=>{try{const n=await Xi();return new Promise((o,a)=>{const u=n.transaction([yr],"readwrite").objectStore(yr),c=u.get(e);c.onsuccess=()=>{const p=c.result;if(p){p.name=t;const _=u.put(p);_.onsuccess=()=>o(!0),_.onerror=()=>{console.error("Error updating save:",_.error),a(_.error)}}else o(!1)},c.onerror=()=>{console.error("Error getting save for rename:",c.error),a(c.error)}})}catch(n){return console.error("Error renaming in IndexedDB:",n),!1}},d3=async()=>{try{const e=localStorage.getItem(Us);if(!e)return"Untitled";const t=await Xi();return new Promise(n=>{const s=t.transaction([yr],"readonly").objectStore(yr).get(e);s.onsuccess=()=>{const u=s.result;n((u==null?void 0:u.name)||"Untitled")},s.onerror=()=>{console.error("Error getting current save name:",s.error),n("Untitled")}})}catch{return"Untitled"}},p3=async()=>{const e="industrialist_saves";try{const t=localStorage.getItem(e);if(!t)return;const n=JSON.parse(t),o=Object.keys(n);if(o.length===0){localStorage.removeItem(e);return}const a=await Xi(),s=await NM();if(Object.keys(s).length>0){localStorage.removeItem(e);return}for(const u of o){const c=n[u];await new Promise((p,_)=>{const y=a.transaction([yr],"readwrite").objectStore(yr).add(c);y.onsuccess=()=>p(),y.onerror=()=>{console.error(`Error migrating save ${u}:`,y.error),p()}})}localStorage.removeItem(e),console.log(`Migrated ${o.length} saves from localStorage to IndexedDB`)}catch(t){console.error("Error during migration:",t)}},_3=async()=>{try{await Xi(),await p3()}catch(e){console.error("Failed to initialize save system:",e)}},f3=({onClose:e,onLoad:t,currentCanvas:n,onImport:o,onExportCanvas:a})=>{const[s,u]=L.useState({}),[c,p]=L.useState(""),[_,h]=L.useState(null),[f,y]=L.useState(""),[v,w]=L.useState(null),[k,x]=L.useState("Untitled"),[q,E]=L.useState(!0),[b,M]=L.useState(!1);L.useEffect(()=>{j()},[]);const j=async()=>{E(!0);try{const T=await NM();u(T);const K=localStorage.getItem("industrialist_current_save_id");w(K);const U=await d3();x(U)}catch(T){console.error("Error loading saves:",T)}finally{E(!1)}},C=async()=>{if(!c.trim()){alert("Please enter a name for your save");return}M(!0);try{const T=await s3(c.trim(),n);T?(p(""),await j(),alert(`Canvas saved as "${T.name}"`)):alert("Failed to save canvas")}catch(T){console.error("Error saving:",T),alert("Failed to save canvas")}finally{M(!1)}},N=async T=>{if(window.confirm("Load this save? Your current canvas will be replaced.")){E(!0);try{const K=await u3(T);K?(w(T),t(K),e()):alert("Failed to load save")}catch(K){console.error("Error loading:",K),alert("Failed to load save")}finally{E(!1)}}},A=async T=>{const K=s[T];if(window.confirm(`Delete save "${K.name}"? This cannot be undone.`))try{await l3(T)?await j():alert("Failed to delete save")}catch(U){console.error("Error deleting:",U),alert("Failed to delete save")}},P=T=>{h(T),y(s[T].name)},z=async T=>{if(!f.trim()){alert("Name cannot be empty");return}try{await c3(T,f.trim())?(await j(),h(null),y("")):alert("Failed to rename save")}catch(K){console.error("Error renaming:",K),alert("Failed to rename save")}},F=()=>{h(null),y("")},D=T=>new Date(T).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),Z=Object.values(s).sort((T,K)=>K.timestamp-T.timestamp);return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[d.jsx("h2",{className:"modal-title",children:"Save Manager"}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",d.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:k})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[d.jsx("input",{type:"text",value:c,onChange:T=>p(T.target.value),onKeyPress:T=>T.key==="Enter"&&C(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),d.jsx("button",{onClick:C,className:"btn btn-primary",style:{minWidth:"120px"},disabled:b,children:b?"Saving...":"Save Current"})]}),d.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:()=>{o&&o()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),d.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[d.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",Z.length,")"]}),q?d.jsx("div",{className:"empty-state",children:"Loading saves..."}):Z.length===0?d.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:Z.map(T=>d.jsxs("div",{style:{padding:"15px",background:v===T.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:v===T.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[_===T.id?d.jsx("div",{style:{marginBottom:"10px"},children:d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("input",{type:"text",value:f,onChange:K=>y(K.target.value),onKeyPress:K=>{K.key==="Enter"&&z(T.id),K.key==="Escape"&&F()},className:"input",style:{flex:1},autoFocus:!0}),d.jsx("button",{onClick:()=>z(T.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),d.jsx("button",{onClick:F,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[T.name,v===T.id&&d.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[D(T.timestamp),"  ",T.nodeCount," nodes"]})]})}),_!==T.id&&d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:()=>N(T.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),d.jsx("button",{onClick:()=>P(T.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),d.jsx("button",{onClick:()=>A(T.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},T.id))})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},m3=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],h3=({recipe:e,onClose:t,onSave:n,availableProducts:o,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var C,N,A;const c=!u&&m3.includes(e.id),p=!u&&(((C=e.inputs)==null?void 0:C.some(P=>P.product_id==="p_variableproduct"))||((N=e.outputs)==null?void 0:N.some(P=>P.product_id==="p_variableproduct"))),[_,h]=L.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),f=(P,z)=>{h(F=>({...F,[P]:z}))},y=(P,z,F)=>{const D=[..._.inputs];D[P]={...D[P],[z]:F},h(Z=>({...Z,inputs:D}))},v=(P,z,F)=>{const D=[..._.outputs];D[P]={...D[P],[z]:F},h(Z=>({...Z,outputs:D}))},w=()=>{const P=[..._.inputs,{product_id:"",quantity:1}];h(z=>({...z,inputs:P}))},k=P=>{const z=_.inputs.filter((F,D)=>D!==P);h(F=>({...F,inputs:z}))},x=()=>{const P=[..._.outputs,{product_id:"",quantity:1}];h(z=>({...z,outputs:P}))},q=P=>{const z=_.outputs.filter((F,D)=>D!==P);h(F=>({...F,outputs:z}))},E=P=>{const F=`r_${P.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,D=s.filter(T=>T.id.startsWith(F)).map(T=>{const K=T.id.match(/_(\d+)$/);return K?parseInt(K[1]):0});let Z=1;for(;D.includes(Z);)Z++;return`${F}${String(Z).padStart(2,"0")}`},b=()=>{if(u){if(!_.name||!_.name.trim())return alert("Recipe name is required"),!1;if(!_.machine_id)return alert("Machine is required"),!1;if(!a.find(K=>K.id===_.machine_id))return alert("Selected machine does not exist"),!1}const z=[..._.inputs.map(T=>T.product_id),..._.outputs.map(T=>T.product_id)].filter(T=>T&&T!=="p_variableproduct"&&T!=="p_any_fluid"&&T!=="p_any_item"&&!o.find(K=>K.id===T));if(z.length>0)return alert(`Invalid product IDs: ${z.join(", ")}`),!1;const F=_.inputs.some(T=>!T.product_id),D=_.outputs.some(T=>!T.product_id);return F||D?(alert("All inputs and outputs must have a product selected"),!1):typeof _.cycle_time=="number"&&_.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((_.inputs.some(T=>T.quantity==="Variable")||_.outputs.some(T=>T.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},M=()=>{if(!b())return;let P={..._};if(u){const z=a.find(F=>F.id===_.machine_id);P.id=E(z.name)}n(P),t()},j=a.find(P=>P.id===e.machine_id);return c||p?d.jsx("div",{className:"modal-overlay",onClick:t,children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"600px"},children:[d.jsx("h2",{className:"modal-title",children:c?"Special Recipe":"Variable Product Recipe"}),d.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:c?d.jsxs(d.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",d.jsx("br",{}),d.jsx("br",{}),"Special recipes include:",d.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[d.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),d.jsx("li",{children:"Logic Assembler (microchip stages)"}),d.jsx("li",{children:"Tree Farm (layout configuration)"}),d.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),d.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):d.jsx(d.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),d.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):d.jsx("div",{className:"modal-overlay",onClick:t,children:d.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[d.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),d.jsx("input",{type:"text",value:_.name,onChange:P=>f("name",P.target.value),placeholder:"Enter recipe name",className:"input"})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?d.jsxs("select",{value:_.machine_id,onChange:P=>f("machine_id",P.target.value),className:"select",children:[d.jsx("option",{value:"",children:"Select a machine"}),a.sort((P,z)=>P.name.localeCompare(z.name)).map(P=>d.jsxs("option",{value:P.id,children:[P.name," (Tier ",P.tier||1,")"]},P.id))]}):d.jsx("div",{style:{color:(j==null?void 0:j.tier)===1?"var(--tier-1-color)":(j==null?void 0:j.tier)===2?"var(--tier-2-color)":(j==null?void 0:j.tier)===3?"var(--tier-3-color)":(j==null?void 0:j.tier)===4?"var(--tier-4-color)":(j==null?void 0:j.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(j==null?void 0:j.name)||e.machine_id}),u&&_.machine_id&&d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",E(((A=a.find(P=>P.id===_.machine_id))==null?void 0:A.name)||"")]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:_.cycle_time==="Variable"?"":_.cycle_time,onChange:P=>f("cycle_time",parseFloat(P.target.value)),placeholder:_.cycle_time==="Variable"?"Variable":"",className:"input",disabled:_.cycle_time==="Variable",title:_.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),d.jsx("input",{type:"number",step:"1000",value:typeof _.power_consumption=="number"?_.power_consumption:"",onChange:P=>f("power_consumption",parseFloat(P.target.value)),placeholder:"Variable",className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),d.jsxs("select",{value:_.power_type||"MV",onChange:P=>f("power_type",P.target.value),className:"select",children:[d.jsx("option",{value:"LV",children:"LV"}),d.jsx("option",{value:"MV",children:"MV"}),d.jsx("option",{value:"HV",children:"HV"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),d.jsx("input",{type:"number",step:"0.1",value:_.pollution,onChange:P=>f("pollution",parseFloat(P.target.value)),className:"input"})]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[d.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),d.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),_.inputs.map((P,z)=>d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[d.jsxs("select",{value:P.product_id,onChange:F=>y(z,"product_id",F.target.value),className:"select",style:{flex:2},children:[d.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>d.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>y(z,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),d.jsx("button",{onClick:()=>k(z),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},z)),_.inputs.length===0&&d.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[d.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),d.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),_.outputs.map((P,z)=>d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[d.jsxs("select",{value:P.product_id,onChange:F=>v(z,"product_id",F.target.value),className:"select",style:{flex:2},children:[d.jsx("option",{value:"",children:"Select Product"}),[...o].filter(F=>F.id!=="p_variableproduct"&&F.id!=="p_any_fluid"&&F.id!=="p_any_item").sort((F,D)=>F.name.localeCompare(D.name)).map(F=>d.jsxs("option",{value:F.id,children:[F.name," (",F.type,")"]},F.id))]}),d.jsx("input",{type:"number",step:"0.1",min:"0",value:P.quantity==="Variable"?"":P.quantity,onChange:F=>v(z,"quantity",parseFloat(F.target.value)),placeholder:P.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:P.quantity==="Variable",title:P.quantity==="Variable"?"Cannot edit Variable quantities":""}),d.jsx("button",{onClick:()=>q(z),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},z)),_.outputs.length===0&&d.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},nc="industrialist_custom_products",ic="industrialist_custom_machines",oc="industrialist_custom_recipes",y3=(e,t,n)=>{localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(e)),localStorage.getItem(ic)||localStorage.setItem(ic,JSON.stringify(t)),localStorage.getItem(oc)||localStorage.setItem(oc,JSON.stringify(n))},Ta=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Pa=()=>{try{const e=localStorage.getItem(ic);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},ou=()=>{try{const e=localStorage.getItem(oc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Gs=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Ks=e=>{try{return localStorage.setItem(ic,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},Ys=e=>{try{return localStorage.setItem(oc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},Z1=(e,t)=>{const n=Ta(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},Gs(n)):!1},J1=(e,t)=>{const n=Pa(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},Ks(n)):!1},g3=(e,t)=>{const n=ou(),o=n.findIndex(a=>a.id===e);return o>=0?(n[o]={...n[o],...t},Ys(n)):!1},v3=e=>Gs(e),x3=e=>Ks(e),w3=e=>Ys(e),b3=(e,t,n)=>{const o={};return e&&(o.products=Ta()),t&&(o.machines=Pa()),n&&(o.recipes=ou()),o},q3=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=Ta(),o=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());Gs(a)&&(t.products=e.products.length)}if(e.machines){const n=Pa(),o=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());Ks(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=ou(),o=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{o.set(s.id,s)});const a=Array.from(o.values());Ys(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,kr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),Ap=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,S3=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return jn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const c=a.inputs.some(_=>_.product_id===e&&_.product_id!=="p_variableproduct"),p=t.includes(e)&&n.includes(a.id)&&a.inputs.some(_=>_.product_id==="p_variableproduct");return c||p||u})},k3=e=>jn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),kl=e=>{const t=jn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[q0]:e==="m_liquid_dump"?[C0]:e==="m_liquid_burner"?[E0]:t},TM=(e,t,n,o,a=$r)=>{const s=(o==null?void 0:o.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const c=Math.max(t,a),p=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return c<s?{...u,temperature:c,quantity:0,originalQuantity:p}:{...u,temperature:c,quantity:p,originalQuantity:p}}return u}if(pM(u.product_id)){const c=Math.max(t,a);return{...u,temperature:c}}return u})},qs=(e,t)=>{let n={...e};const o=hr[t];if(o){const s=u6(t),u=o.type==="boiler",c=u?Ki:$r,p=u?{...s,coolantTemp:Ki}:s;let _=null;if(o.type==="product_dependent"&&e.inputs){const y=e.inputs.find(v=>["p_water","p_filtered_water","p_distilled_water"].includes(v.product_id));_=(y==null?void 0:y.product_id)||null}const h=eg(t,p,c,_,u?Ki:null),f=TM(e.outputs,h,u,o,c);n={...n,outputs:f,temperatureSettings:p}}if(Ur(t)){const s=un[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:Tn})}return n},C3=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:o,onDataChange:a})=>{const[s,u]=L.useState("products"),[c,p]=L.useState(""),[_,h]=L.useState(!0),[f,y]=L.useState(!0),[v,w]=L.useState(!0),k=L.useRef(null),x=()=>{const b=b3(_,f,v),M=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),j=URL.createObjectURL(M),C=document.createElement("a");C.href=j,C.download=`industrialist-data-${Date.now()}.json`,C.click(),URL.revokeObjectURL(j)},q=()=>{var b;(b=k.current)==null||b.click()},E=b=>{var C;const M=(C=b.target.files)==null?void 0:C[0];if(!M)return;const j=new FileReader;j.onload=N=>{try{const A=JSON.parse(N.target.result),P=A.products||A.machines||A.recipes,z=A.canvas;if(!P&&z){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),b.target.value="";return}if(!P){alert("This file does not contain any game data (products, machines, or recipes)."),b.target.value="";return}if(z&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){b.target.value="";return}const F=q3(A);let D=`Import complete:
`;F.products>0&&(D+=`- ${F.products} products imported/updated
`),F.machines>0&&(D+=`- ${F.machines} machines imported/updated
`),F.recipes>0&&(D+=`- ${F.recipes} recipes imported/updated
`),F.errors.length>0&&(D+=`
Errors: ${F.errors.join(", ")}`),alert(D),a()}catch(A){alert(`Import failed: ${A.message}`)}},j.readAsText(M),b.target.value=""};return d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal",onClick:b=>b.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[d.jsx("h2",{className:"modal-title",children:"Data Manager"}),d.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[d.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),d.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:_,onChange:b=>h(b.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:f,onChange:b=>y(b.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[d.jsx("input",{type:"checkbox",checked:v,onChange:b=>w(b.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:q,className:"btn btn-secondary",children:"Import JSON"}),d.jsx("button",{onClick:x,className:"btn btn-primary",children:"Export Data"})]})]}),d.jsx("input",{ref:k,type:"file",accept:".json",style:{display:"none"},onChange:E})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[d.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),d.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),d.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:c,onChange:b=>p(b.target.value),className:"input"})}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&d.jsx(M3,{searchTerm:c,defaultProducts:t,onDataChange:a}),s==="machines"&&d.jsx(E3,{searchTerm:c,defaultMachines:n,onDataChange:a}),s==="recipes"&&d.jsx(I3,{searchTerm:c,defaultRecipes:o,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),d.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},M3=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[o,a]=L.useState([]),[s,u]=L.useState(null),[c,p]=L.useState({}),[_,h]=L.useState(!1),[f,y]=L.useState({name:"",type:"item",price:0,rp_multiplier:1});L.useEffect(()=>{v()},[]);const v=()=>{a(Ta())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,N)=>C.name.localeCompare(N.name)),k=C=>{u(C.id),p({price:C.price==="Variable"?"":C.price,rp_multiplier:C.rp_multiplier==="Variable"?"":C.rp_multiplier,type:C.type})},x=C=>{const N={price:c.price===""?"Variable":parseFloat(c.price),rp_multiplier:c.rp_multiplier===""?"Variable":parseFloat(c.rp_multiplier),type:c.type};Z1(C,N)?(v(),n(),u(null)):alert("Failed to update product")},q=()=>{u(null),p({})},E=C=>{const N=t.find(P=>P.id===C);if(!N){alert("Default product not found");return}const A={price:N.price,rp_multiplier:N.rp_multiplier,type:N.type};Z1(C,A)?(v(),n()):alert("Failed to reset product to default")},b=C=>"p_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!f.name.trim()){alert("Product name is required");return}const C=b(f.name);if(o.find(P=>P.id===C)){alert(`Product ID "${C}" already exists. Please use a different name.`);return}const N={id:C,name:f.name.trim(),type:f.type,price:parseFloat(f.price)||0,rp_multiplier:parseFloat(f.rp_multiplier)||1},A=[...o,N];Gs(A)?(v(),n(),h(!1),y({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},j=C=>{var A;if(!window.confirm(`Delete product "${(A=o.find(P=>P.id===C))==null?void 0:A.name}"? This cannot be undone.`))return;const N=o.filter(P=>P.id!==C);Gs(N)?(v(),n()):alert("Failed to delete product")};return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:()=>h(!_),className:"btn btn-primary",style:{width:"100%"},children:_?"Cancel":"+ Add New Product"})}),_&&d.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),d.jsx("input",{type:"text",value:f.name,onChange:C=>y({...f,name:C.target.value}),className:"input",placeholder:"Product name"}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?b(f.name):"p_..."]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),d.jsxs("select",{value:f.type,onChange:C=>y({...f,type:C.target.value}),className:"select",children:[d.jsx("option",{value:"item",children:"Item"}),d.jsx("option",{value:"fluid",children:"Fluid"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),d.jsx("input",{type:"number",value:f.price,onChange:C=>y({...f,price:C.target.value}),className:"input",placeholder:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),d.jsx("input",{type:"number",step:"0.1",value:f.rp_multiplier,onChange:C=>y({...f,rp_multiplier:C.target.value}),className:"input",placeholder:"1"})]})]}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Product Name"}),d.jsx("div",{children:"Type"}),d.jsx("div",{children:"Price"}),d.jsx("div",{children:"RP Mult"}),d.jsx("div",{children:"Actions"})]}),w.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),s===C.id?d.jsxs(d.Fragment,{children:[d.jsxs("select",{value:c.type,onChange:N=>p({...c,type:N.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[d.jsx("option",{value:"item",children:"Item"}),d.jsx("option",{value:"fluid",children:"Fluid"})]}),d.jsx("input",{type:"number",value:c.price,onChange:N=>p({...c,price:N.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.price==="Variable",title:C.price==="Variable"?"Cannot edit Variable values":""}),d.jsx("input",{type:"number",value:c.rp_multiplier,onChange:N=>p({...c,rp_multiplier:N.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:C.rp_multiplier==="Variable",title:C.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>x(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),d.jsx("button",{onClick:q,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.type}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.price==="Variable"?"Variable":`$${kr(C.price)}`}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:C.rp_multiplier==="Variable"?"Variable":`${C.rp_multiplier>=1e3?kr(C.rp_multiplier):C.rp_multiplier}x`}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),d.jsx("button",{onClick:()=>j(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},E3=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[o,a]=L.useState([]),[s,u]=L.useState(null),[c,p]=L.useState({}),[_,h]=L.useState(!1),[f,y]=L.useState({name:"",cost:0,tier:1});L.useEffect(()=>{v()},[]);const v=()=>{a(Pa())},w=o.filter(C=>C.name.toLowerCase().includes(e.toLowerCase())||C.id.toLowerCase().includes(e.toLowerCase())).sort((C,N)=>C.name.localeCompare(N.name)),k=C=>{u(C.id),p({cost:C.cost,tier:C.tier||1})},x=C=>{const N={cost:parseFloat(c.cost),tier:parseInt(c.tier)};J1(C,N)?(v(),n(),u(null)):alert("Failed to update machine")},q=()=>{u(null),p({})},E=C=>{const N=t.find(P=>P.id===C);if(!N){alert("Default machine not found");return}const A={cost:N.cost,tier:N.tier};J1(C,A)?(v(),n()):alert("Failed to reset machine to default")},b=C=>"m_"+C.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!f.name.trim()){alert("Machine name is required");return}const C=b(f.name);if(o.find(P=>P.id===C)){alert(`Machine ID "${C}" already exists. Please use a different name.`);return}const N={id:C,name:f.name.trim(),cost:parseFloat(f.cost)||0,tier:parseInt(f.tier)||1},A=[...o,N];Ks(A)?(v(),n(),h(!1),y({name:"",cost:0,tier:1})):alert("Failed to add machine")},j=C=>{var A;if(!window.confirm(`Delete machine "${(A=o.find(P=>P.id===C))==null?void 0:A.name}"? This cannot be undone.`))return;const N=o.filter(P=>P.id!==C);Ks(N)?(v(),n()):alert("Failed to delete machine")};return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:()=>h(!_),className:"btn btn-primary",style:{width:"100%"},children:_?"Cancel":"+ Add New Machine"})}),_&&d.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[d.jsxs("div",{style:{gridColumn:"1 / -1"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),d.jsx("input",{type:"text",value:f.name,onChange:C=>y({...f,name:C.target.value}),className:"input",placeholder:"Machine name"}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",f.name?b(f.name):"m_..."]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),d.jsx("input",{type:"number",value:f.cost,onChange:C=>y({...f,cost:C.target.value}),className:"input",placeholder:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),d.jsxs("select",{value:f.tier,onChange:C=>y({...f,tier:C.target.value}),className:"select",children:[d.jsx("option",{value:"1",children:"Tier 1"}),d.jsx("option",{value:"2",children:"Tier 2"}),d.jsx("option",{value:"3",children:"Tier 3"}),d.jsx("option",{value:"4",children:"Tier 4"}),d.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Machine Name"}),d.jsx("div",{children:"Cost"}),d.jsx("div",{children:"Tier"}),d.jsx("div",{children:"Actions"})]}),w.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name}),s===C.id?d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",value:c.cost,onChange:N=>p({...c,cost:N.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),d.jsx("input",{type:"number",min:"1",max:"5",value:c.tier,onChange:N=>p({...c,tier:N.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>x(C.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),d.jsx("button",{onClick:q,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",kr(C.cost)]}),d.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",C.tier||1]}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>k(C),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>E(C.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),d.jsx("button",{onClick:()=>j(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},C.id))]})},I3=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:o,onDataChange:a})=>{const[s,u]=L.useState([]),[c,p]=L.useState([]),[_,h]=L.useState([]),[f,y]=L.useState(null),[v,w]=L.useState(!1);L.useEffect(()=>{k(),x(),q()},[]);const k=()=>{u(ou())},x=()=>{p(Ta())},q=()=>{h(Pa())},E=(C,N=!1)=>{if(N){const A=[...s,C];Ys(A)?(k(),x(),q(),a()):alert("Failed to create recipe")}else g3(C.id,C)?(k(),x(),q(),a()):alert("Failed to save recipe")},b=C=>{var A;if(!window.confirm(`Delete recipe "${((A=s.find(P=>P.id===C))==null?void 0:A.name)||C}"? This cannot be undone.`))return;const N=s.filter(P=>P.id!==C);Ys(N)?(k(),x(),q(),a()):alert("Failed to delete recipe")},M=()=>{y({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),w(!0)},j=s.filter(C=>{var N;return((N=C.name)==null?void 0:N.toLowerCase().includes(e.toLowerCase()))||C.id.toLowerCase().includes(e.toLowerCase())}).sort((C,N)=>{const A=C.name||C.id,P=N.name||N.id;return A.localeCompare(P)});return d.jsxs("div",{children:[d.jsx("div",{style:{marginBottom:"15px"},children:d.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[d.jsx("div",{children:"Recipe Name"}),d.jsx("div",{children:"Machine"}),d.jsx("div",{children:"Cycle Time"}),d.jsx("div",{children:"Power"}),d.jsx("div",{children:"Actions"})]}),j.map(C=>d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:C.name||C.id}),d.jsx("div",{style:{color:(()=>{const N=_.find(A=>A.id===C.machine_id);if(!N)return"var(--text-secondary)";switch(N.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const N=_.find(A=>A.id===C.machine_id);return N?N.name:C.machine_id})()}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.cycle_time=="number"?`${C.cycle_time}s`:String(C.cycle_time)}),d.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof C.power_consumption=="number"?`${kr(C.power_consumption)}W`:typeof C.power_consumption=="object"&&C.power_consumption!==null?`${kr(C.power_consumption.max||C.power_consumption.average||0)}W`:String(C.power_consumption)}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:()=>{y(C),w(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),d.jsx("button",{onClick:()=>b(C.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},C.id)),f&&d.jsx(h3,{recipe:f,onClose:()=>{y(null),w(!1)},onSave:C=>E(C,v),availableProducts:c,defaultMachines:_,allRecipes:s,isCreatingNew:v})]})},Fl=(e,t)=>{var s,u,c,p,_,h;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},o=e.length;for(let f=0;f<o;f++){const y=e[f],v=y.id,w=(s=y.data)==null?void 0:s.recipe,k=((u=y.data)==null?void 0:u.machineCount)||0,x=(c=y.data)==null?void 0:c.machine;if(!w)return;const q=w.isMineshaftDrill||w.id==="r_mineshaft_drill",E=w.isLogicAssembler||w.id==="r_logic_assembler",b=w.isTreeFarm||w.id==="r_tree_farm",M=x&&x.id==="m_industrial_firebox",j=x&&Ur(x.id),C=q||E||b||M||j;let N=w.cycle_time;if(N==="Variable"||typeof N!="number"||N<=0){if(!C)return;N=1}const A=x&&Ur(x.id),P=A?un[x.id]:null;if(A&&(P==null?void 0:P.type)==="steam_input"&&!(x.id==="m_steam_cracking_plant"&&!yi(w))){const D=w.tempDependentInputTemp??Tn;N=Yn(x.id,D,N)}const z={id:v,recipe:w,machineCount:k,cycleTime:N,isSpecialRecipe:C,isMineshaftDrill:q,isLogicAssembler:E,isTempDependent:A,machineCountMode:((p=y.data)==null?void 0:p.machineCountMode)||"free",cappedMachineCount:(_=y.data)==null?void 0:_.cappedMachineCount,inputs:[],outputs:[]};(h=w.inputs)==null||h.forEach((D,Z)=>{const T=D.product_id;if(T==="p_variableproduct")return;const K=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const U=q?K*k:K/N*k,ne=z.inputs.length;z.inputs.push({productId:T,quantity:K,rate:U,index:ne,recipeIndex:Z,connectedRate:0,temperature:null}),n.products[T]||(n.products[T]={producers:[],consumers:[],connections:[]}),n.products[T].consumers.push({nodeId:v,inputIndex:ne,rate:U})});const F=w.outputs;F==null||F.forEach((D,Z)=>{const T=D.product_id;if(T==="p_variableproduct")return;const K=typeof D.quantity=="number"?D.quantity:0;if(D.quantity==="Variable"&&!C)return;const U=q?K*k:K/N*k,ne=z.outputs.length;z.outputs.push({productId:T,quantity:K,rate:U,index:ne,recipeIndex:Z,connectedRate:0,temperature:D.temperature||null}),n.products[T]||(n.products[T]={producers:[],consumers:[],connections:[]}),n.products[T].producers.push({nodeId:v,outputIndex:ne,rate:U})}),n.nodes[v]=z}const a=t.length;for(let f=0;f<a;f++){const y=t[f],v=n.nodes[y.source],w=n.nodes[y.target];if(!v||!w)continue;const k=parseInt(y.sourceHandle.split("-")[1]),x=parseInt(y.targetHandle.split("-")[1]),q=v.outputs.find(j=>j.recipeIndex===k),E=w.inputs.find(j=>j.recipeIndex===x);if(!q||!E||q.productId!==E.productId)return;const b=q.productId;q.temperature!==void 0&&q.temperature!==null&&(E.temperature=q.temperature);const M={id:y.id,sourceNodeId:y.source,targetNodeId:y.target,sourceOutputIndex:q.index,targetInputIndex:E.index,productId:b,sourceRate:q.rate,targetRate:E.rate,flowRate:0,temperature:q.temperature||null};n.connections.push(M),n.products[b]&&n.products[b].connections.push(M)}return n};class j3{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,n)}clear(){this.cache.clear()}}let N0=new j3(100);class N3{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const o=this.find(t),a=this.find(n);o!==a&&(this.rank[o]<this.rank[a]?this.parent[o]=a:this.rank[o]>this.rank[a]?this.parent[a]=o:(this.parent[a]=o,this.rank[o]++))}}const T3=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const o=[],a=new Map;n.producers.forEach(h=>{const f=`out:${h.nodeId}:${h.outputIndex}`;a.has(f)||(a.set(f,o.length),o.push({type:"output",nodeId:h.nodeId,index:h.outputIndex,rate:h.rate}))}),n.consumers.forEach(h=>{const f=`in:${h.nodeId}:${h.inputIndex}`;a.has(f)||(a.set(f,o.length),o.push({type:"input",nodeId:h.nodeId,index:h.inputIndex,rate:h.rate}))});const s=new N3(o.length);n.connections.forEach(h=>{const f=`out:${h.sourceNodeId}:${h.sourceOutputIndex}`,y=`in:${h.targetNodeId}:${h.targetInputIndex}`,v=a.get(f),w=a.get(y);v!==void 0&&w!==void 0&&s.union(v,w)});const u=new Map;for(let h=0;h<o.length;h++){const f=s.find(h);u.has(f)||u.set(f,[]),u.get(f).push(h)}const c=[],p=new Map;let _=0;return u.forEach((h,f)=>{const y={id:_,ports:h.map(v=>o[v]),connections:[]};n.connections.forEach(v=>{const w=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,k=a.get(w);k!==void 0&&s.find(k)===f&&y.connections.push(v)}),h.forEach(v=>{const w=o[v],k=w.type==="output"?`out:${w.nodeId}:${w.index}`:`in:${w.nodeId}:${w.index}`;p.set(k,_)}),c.push(y),_++}),{components:c,portToComponent:p,ports:o,portToIndex:a}},P3=e=>{const t=e.ports.map(o=>`${o.type}:${o.nodeId}:${o.index}:${o.rate}`).sort().join("|"),n=e.connections.map(o=>`${o.sourceNodeId}:${o.sourceOutputIndex}->${o.targetNodeId}:${o.targetInputIndex}`).sort().join("|");return`${t}##${n}`},R3=(e,t,n)=>{const o=PM(e,t),a=RM(e,t),s={totalProduction:o,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:c}=T3(e,t);return u.forEach(p=>{if(p.connections.length===0)return;const _=P3(p),h=`${t}:comp${p.id}`,f=N0.get(h);let y;if(f&&f.hash===_)y=JSON.parse(JSON.stringify(f.result));else{const v=F3(p.connections,o),w=D3(v);y={connectedFlow:0,connections:{}},p.connections.forEach((x,q)=>{const E=w.connectionFlows[q]||0;y.connections[x.id]={flowRate:E,supplyRatio:x.sourceRate>0?E/x.sourceRate:0,demandRatio:x.targetRate>0?E/x.targetRate:0},y.connectedFlow+=E});const k=Object.freeze({connectedFlow:y.connectedFlow,connections:Object.freeze({...y.connections})});N0.set(h,{hash:_,result:k})}Object.assign(s.connections,y.connections),s.connectedFlow+=y.connectedFlow}),s},A3=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,F3=(e,t)=>{const n=new Map;let o=0;const a=v=>{let w=n.get(v);return w===void 0&&(w=o++,n.set(v,w)),w},s=a("virtual-source"),u=a("virtual-sink"),c=new Map,p=new Map;e.forEach(v=>{const w=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,k=`in:${v.targetNodeId}:${v.targetInputIndex}`;a(w),a(k),c.has(w)||c.set(w,v.sourceRate),p.has(k)||p.set(k,v.targetRate)});const _=Array.from({length:o},()=>[]),h=[],f=t||1e6,y=(v,w,k,x=-1)=>{const q=h.length,E=h.length+1;h.push({to:w,cap:k,flow:0,rev:E,connIndex:x}),h.push({to:v,cap:0,flow:0,rev:q,connIndex:-1}),_[v].push(q),_[w].push(E)};return c.forEach((v,w)=>{y(s,a(w),v)}),p.forEach((v,w)=>{y(a(w),u,v)}),e.forEach((v,w)=>{const k=`out:${v.sourceNodeId}:${v.sourceOutputIndex}`,x=`in:${v.targetNodeId}:${v.targetInputIndex}`,q=a(k),E=a(x);y(q,E,f,w)}),{adj:_,edges:h,nodeCount:o,SOURCE:s,SINK:u}};class L3{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const D3=e=>{const{adj:t,edges:n,nodeCount:o,SOURCE:a,SINK:s}=e,u=new Int32Array(o),c=new Int32Array(o),p=new L3(o),_=()=>{for(u.fill(-1),u[a]=0,p.clear(),p.push(a);!p.isEmpty();){const x=p.shift(),q=t[x],E=q.length;for(let b=0;b<E;b++){const M=n[q[b]],j=M.cap-M.flow;u[M.to]<0&&j>1e-15&&(u[M.to]=u[x]+1,p.push(M.to))}}return u[s]>=0},h=()=>{const x=[a],q=new Int32Array(o).fill(-1),E=new Uint8Array(o);for(E[a]=1;x.length>0;){const b=x[x.length-1];if(b===s){let C=1e15,N=s;for(;N!==a;){const A=q[N],P=n[A],z=P.cap-P.flow;C=Math.min(C,z);let F=!1;for(let D=0;D<o;D++){const Z=t[D];for(let T=0;T<Z.length;T++)if(Z[T]===A){N=D,F=!0;break}if(F)break}}for(N=s;N!==a;){const A=q[N];n[A].flow+=C,n[n[A].rev].flow-=C;let P=!1;for(let z=0;z<o;z++){const F=t[z];for(let D=0;D<F.length;D++)if(F[D]===A){N=z,P=!0;break}if(P)break}}return C}let M=!1;const j=t[b];for(let C=c[b];C<j.length;C++){const N=j[C],A=n[N],P=A.cap-A.flow;if(u[b]+1===u[A.to]&&P>1e-15&&!E[A.to]){E[A.to]=1,q[A.to]=N,x.push(A.to),c[b]=C,M=!0;break}}M||(x.pop(),c[b]=j.length)}return 0};let f=0,y=0;const v=1e5;for(;_()&&y++<v;)for(c.fill(0);;){const x=h();if(x===0)break;f+=x}const w=[],k=n.length;for(let x=0;x<k;x++){const q=n[x];q.connIndex>=0&&(w[q.connIndex]=A3(q.flow))}return{totalFlow:f,connectionFlows:w}},Fp=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const o=e.nodes[n];t.byNode[n]={inputFlows:o.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:o.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:PM(e,n),totalConsumption:RM(e,n),connectedFlow:0};return}const s=R3(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const c=s.connections[u.id];if(c){t.byConnection[u.id]=c;const p=t.byNode[u.sourceNodeId];p&&(p.outputFlows[u.sourceOutputIndex].connected+=c.flowRate,p.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const _=t.byNode[u.targetNodeId];_&&(_.inputFlows[u.targetInputIndex].connected+=c.flowRate,_.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},PM=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((o,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return o+u.rate},0):0},RM=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((o,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return o+u.rate},0):0},En=()=>{N0.clear()},Gn=1e-10,O3=(e,t,n,o)=>{var h,f;const a=new Map,s=new Set,u=(h=e.nodes[n])==null?void 0:h.inputs[o];if(!u)return a;const c=u.productId;if(!e.products[c])return a;const _=[{nodeId:n,inputIndex:o,productId:c}];for(s.add(`${n}:${o}`);_.length>0;){const{nodeId:y,inputIndex:v,productId:w}=_.shift();(((f=e.products[w])==null?void 0:f.connections.filter(x=>x.targetNodeId===y&&x.targetInputIndex===v))||[]).forEach(x=>{var M,j;const q=e.nodes[x.sourceNodeId];if(!q)return;const E=`${x.sourceNodeId}:${x.sourceOutputIndex}`,b=(M=t.byNode[x.sourceNodeId])==null?void 0:M.outputFlows[x.sourceOutputIndex];if(b){a.set(E,{nodeId:x.sourceNodeId,outputIndex:x.sourceOutputIndex,maxFlow:b.produced});const C=q.outputs[x.sourceOutputIndex];if(!C)return;(((j=e.products[C.productId])==null?void 0:j.connections.filter(A=>A.sourceNodeId===x.sourceNodeId&&A.sourceOutputIndex===x.sourceOutputIndex))||[]).forEach(A=>{var F;if(A.targetNodeId===y&&A.targetInputIndex===v)return;const P=`${A.targetNodeId}:${A.targetInputIndex}`;if(s.has(P))return;s.add(P);const z=(F=e.nodes[A.targetNodeId])==null?void 0:F.inputs[A.targetInputIndex];z&&_.push({nodeId:A.targetNodeId,inputIndex:A.targetInputIndex,productId:z.productId})})}})}return a},V3=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],s=t.byNode[o];s&&a.inputs.forEach((u,c)=>{const p=s.inputFlows[c];if(!p)return;const _=p.needed-p.connected;if(_<=Gn)return;if(u.productId,O3(e,t,o,c).forEach((y,v)=>{var P;const w=e.nodes[y.nodeId];if(!w)return;const k=w.machineCount||0;if(k<=0)return;const x=w.machineCountMode||"free";if(x==="locked")return;let q=w.cycleTime;(typeof q!="number"||q<=0)&&(q=1);const E=w.outputs[y.outputIndex];if(!E)return;const b=E.originalQuantity!==void 0?E.originalQuantity:E.quantity;if(typeof b!="number")return;const M=w.isMineshaftDrill?b:b/q;if(typeof M!="number"||M<=Gn)return;const j=(P=t.byNode[y.nodeId])==null?void 0:P.outputFlows[y.outputIndex];if(!j)return;const C=_/M;let N=k+C;if(x==="capped"&&w.cappedMachineCount&&(N=Math.min(N,w.cappedMachineCount),N<=k+Gn))return;const A=w.outputs.length>1&&w.outputs.some((z,F)=>{if(F===y.outputIndex)return!1;const D=e.products[z.productId];return!D||!D.connections.some(T=>T.sourceNodeId===y.nodeId&&T.sourceOutputIndex===F)?!1:D.connections.some(T=>T.sourceNodeId!==y.nodeId||T.sourceOutputIndex!==F?!1:D.connections.filter(U=>U.targetNodeId===T.targetNodeId&&U.targetInputIndex===T.targetInputIndex&&U.sourceNodeId!==y.nodeId).length===0)});n.push({nodeId:y.nodeId,handleType:"output",handleIndex:y.outputIndex,productId:E.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:j.produced,targetFlow:j.produced+_,deltaFlow:_,currentMachineCount:k,suggestedMachineCount:N,machineDelta:C,hasConstrainedOutputs:A,isMultiOutput:w.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const y=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof y=="number"&&y>Gn){const v=_/y,w=(a.machineCount||0)-v;w>Gn&&n.push({nodeId:o,handleType:"input",handleIndex:c,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:p.connected,targetFlow:p.connected,deltaFlow:-_,currentMachineCount:a.machineCount||0,suggestedMachineCount:w,machineDelta:-v})}}})}),Object.keys(e.nodes).forEach(o=>{const a=e.nodes[o],s=t.byNode[o];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let c=a.cycleTime;(typeof c!="number"||c<=0)&&(c=1),a.outputs.forEach((p,_)=>{var b;const h=s.outputFlows[_];if(!h)return;const f=h.produced-h.connected;if(f<=Gn||(a.machineCountMode||"free")==="locked")return;const v=p.originalQuantity!==void 0?p.originalQuantity:p.quantity,w=a.isMineshaftDrill?v:v/c;if(typeof w!="number"||w<=Gn)return;const k=f/w,x=u-k;x>Gn&&n.push({nodeId:o,handleType:"output",handleIndex:_,productId:p.productId,adjustmentType:"decrease",reason:"excess",currentFlow:h.produced,targetFlow:h.produced-f,deltaFlow:-f,currentMachineCount:u,suggestedMachineCount:x,machineDelta:-k});const q=p.productId;(((b=e.products[q])==null?void 0:b.connections.filter(M=>M.sourceNodeId===o&&M.sourceOutputIndex===_))||[]).forEach(M=>{var Z,T,K,U;const j=e.nodes[M.targetNodeId];if(!j)return;const C=j.machineCount||0;if(C<=0)return;const N=j.machineCountMode||"free";if(N==="locked")return;let A=j.cycleTime;(typeof A!="number"||A<=0)&&(A=1);const P=j.inputs[M.targetInputIndex];if(!P)return;const z=j.isMineshaftDrill?P.quantity:P.quantity/A;if(typeof z!="number"||z<=Gn)return;const F=f/z;let D=C+F;N==="capped"&&j.cappedMachineCount&&(D=Math.min(D,j.cappedMachineCount),D<=C+Gn)||n.push({nodeId:M.targetNodeId,handleType:"input",handleIndex:M.targetInputIndex,productId:P.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((T=(Z=t.byNode[M.targetNodeId])==null?void 0:Z.inputFlows[M.targetInputIndex])==null?void 0:T.connected)||0,targetFlow:(((U=(K=t.byNode[M.targetNodeId])==null?void 0:K.inputFlows[M.targetInputIndex])==null?void 0:U.connected)||0)+f,deltaFlow:f,currentMachineCount:C,suggestedMachineCount:D,machineDelta:F})})})}),n.forEach(o=>{const a=Math.round(o.suggestedMachineCount*1e10)/1e10,s=Math.round(o.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;o.suggestedMachineCount=u?Math.round(o.suggestedMachineCount*1e20)/1e20:Math.round(o.suggestedMachineCount*1e10)/1e10;const c=Math.round(o.machineDelta*1e10)/1e10,p=Math.round(o.machineDelta*1e20)/1e20,_=Math.abs(p-c)>1e-12;o.machineDelta=_?Math.round(o.machineDelta*1e20)/1e20:Math.round(o.machineDelta*1e10)/1e10}),n},Cl=(e,t)=>{const n=[],o=[];Object.keys(e.products).forEach(u=>{const c=e.products[u],p=t.byProduct[u];if(!p)return;const _=p.totalProduction,h=p.connectedFlow,f=_-h;if(Math.abs(f)>1e-6&&f>0){const y=gt(u);y&&n.push({productId:u,product:y,excessRate:f,totalProduction:_,connectedConsumption:h,percentageExcess:_>0?f/_*100:0})}c.consumers.forEach(y=>{var w;const v=(w=t.byNode[y.nodeId])==null?void 0:w.inputFlows[y.inputIndex];if(v){const k=v.needed-v.connected;if(Math.abs(k)>1e-6&&k>0){const x=gt(u);if(x){let q=o.find(E=>E.productId===u);q?(q.deficiencyRate+=k,q.affectedNodes.push({nodeId:y.nodeId,inputIndex:y.inputIndex,shortage:k})):o.push({productId:u,product:x,deficiencyRate:k,totalConsumption:p.totalConsumption,connectedProduction:h,percentageDeficient:p.totalConsumption>0?k/p.totalConsumption*100:0,affectedNodes:[{nodeId:y.nodeId,inputIndex:y.inputIndex,shortage:k}]})}}}})}),n.sort((u,c)=>c.excessRate-u.excessRate),o.sort((u,c)=>c.deficiencyRate-u.deficiencyRate);const s=n.length>0||o.length>0?V3(e,t):[];return{excess:n,deficiency:o,suggestions:s}},ew=(e,t,n={})=>{const{skipTemperature:o=!1,previousTemperatureData:a=null}=n,s=Fl(e,t),u=Fp(s);if(o){const E=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(s,u),graph:s,flows:u,temperatureData:E}}if(!Object.values(s.nodes).some(E=>{const b=E.recipe.machine_id;return hr[b]||Ur(b)})){const E={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...Cl(s,u),graph:s,flows:u,temperatureData:E}}const p=O1(s,u),_=g0(e,p,s);if(!_.some((E,b)=>{var F,D,Z,T,K,U,ne,Y;const M=e[b],j=(D=(F=M.data)==null?void 0:F.recipe)==null?void 0:D.tempDependentInputTemp,C=(T=(Z=E.data)==null?void 0:Z.recipe)==null?void 0:T.tempDependentInputTemp,N=(U=(K=M.data)==null?void 0:K.recipe)==null?void 0:U.outputs.map(Q=>Q.temperature).filter(Q=>Q!==void 0),A=(Y=(ne=E.data)==null?void 0:ne.recipe)==null?void 0:Y.outputs.map(Q=>Q.temperature).filter(Q=>Q!==void 0),P=Math.abs((j||0)-(C||0))>.1,z=N.length!==A.length||N.some((Q,ie)=>Math.abs((Q||0)-(A[ie]||0))>.1);return P||z}))return{...Cl(s,u),graph:s,flows:u,temperatureData:p};const f=Fl(_,t),y=Fp(f),v=O1(f,y),w=g0(_,v,f),k=Fl(w,t),x=Fp(k);return{...Cl(k,x),graph:k,flows:x,temperatureData:v}},z3=e=>e.excess||[],B3=e=>e.deficiency||[],H3=(e,t,n,o,a,s,u)=>{if(!n||!t)return 1;const c=t.data.recipe,p=t.data.machineCount||0,_=Ct(c.machine_id);let h=c.cycle_time;if((typeof h!="number"||h<=0)&&(h=1),_&&Ur(_.id)){const x=un[_.id];if((x==null?void 0:x.type)==="steam_input"&&(_.id!=="m_steam_cracking_plant"||yi(c))){const q=c.tempDependentInputTemp??Tn;h=Yn(_.id,q,h)}}const f=AM(e,n,null,a,s,o);let y=f.cycle_time;(typeof y!="number"||y<=0)&&(y=1);const v=Ct(f.machine_id);if(v&&Ur(v.id)){const x=un[v.id];if((x==null?void 0:x.type)==="steam_input"&&(v.id!=="m_steam_cracking_plant"||yi(f))){const q=f.tempDependentInputTemp??Tn;y=Yn(v.id,q,y)}}let w=0,k=!1;if(u&&u.byNode&&u.byNode[t.id]){const x=u.byNode[t.id];if(n.isOutput){const q=x.outputFlows[n.outputIndex];if(q){k=!0;const E=q.produced-q.connected;w=Math.max(0,E)}}else{const q=x.inputFlows[n.inputIndex];if(q){k=!0;const E=q.needed-q.connected;w=Math.max(0,E)}}}if(k&&w===0)return 0;if(!k)if(n.isOutput){const x=c.outputs[n.outputIndex];if(x){const q=x.originalQuantity!==void 0?x.originalQuantity:x.quantity;typeof q=="number"&&(w=q/h*p)}}else{const x=c.inputs[n.inputIndex];x&&typeof x.quantity=="number"&&(w=x.quantity/h*p)}if(n.isOutput){const x=f.inputs.find(q=>q.product_id===n.productId);if(x&&typeof x.quantity=="number"&&x.quantity>0){const q=x.quantity/y;return w/q}}else{const x=f.outputs.find(q=>q.product_id===n.productId);if(x){const q=x.originalQuantity!==void 0?x.originalQuantity:x.quantity;if(typeof q=="number"&&q>0){const E=q/y;return w/E}}}return 1},AM=(e,t,n,o,a,s)=>{var p,_,h,f,y,v,w,k,x,q,E,b;let u={...e};const c=Ct(e.machine_id);if(!FM(u))return u;if((c==null?void 0:c.id)==="m_industrial_firebox"&&kM(e.id)){const M=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let j=((p=o==null?void 0:o.fireboxConfig)==null?void 0:p.fuel)||"p_coke_fuel";const C=(t==null?void 0:t.productId)||(n==null?void 0:n.id);C&&M.includes(C)&&(j=C);const N=ec(e.id,j);return N&&(u={...u,inputs:b0(e.inputs,j,e.id),fireboxSettings:{fuel:j},cycle_time:N.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const M=((_=o==null?void 0:o.drillConfig)==null?void 0:_.drillHead)||"steel",j=((h=o==null?void 0:o.drillConfig)==null?void 0:h.consumable)||"hydrochloric_acid",C=((f=o==null?void 0:o.drillConfig)==null?void 0:f.machineOil)!==void 0?o.drillConfig.machineOil:!0,N=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],A={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let P=M,z=100;const F=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(F)if(N.includes(F))P=A[F];else if(t!=null&&t.isOutput)z=100;else{const K=s(F,P,j,C);K&&(z=K)}const D=_M(P,j,C,z),Z=fM(P,j,C,z),T=Lo(P,j,C,z);return u={...u,inputs:D.length>0?D:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:Z.length>0?Z:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:P,consumable:j,machineOil:C,depth:z},cycle_time:1,power_consumption:T?{max:T.drillingPower*1e6,average:(T.drillingPower*T.lifeTime+T.idlePower*(T.replacementTime+T.travelTime))/T.totalCycleTime*1e6}:"Variable",pollution:T?T.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const M=((y=o==null?void 0:o.assemblerConfig)==null?void 0:y.outerStage)||1,j=((v=o==null?void 0:o.assemblerConfig)==null?void 0:v.innerStage)||2,C=((w=o==null?void 0:o.assemblerConfig)==null?void 0:w.machineOil)!==void 0?o.assemblerConfig.machineOil:!0,N=((k=o==null?void 0:o.assemblerConfig)==null?void 0:k.tickCircuitDelay)||0;let A=M===1?`p_${j}x_microchip`:`p_${M}x${j}x_microchip`;const P=(t==null?void 0:t.productId)||(n==null?void 0:n.id);P&&P.includes("microchip")&&(A=P);const z=hM(A,C),F=yM(A,C),D=iu(A,C,N),Z=A.match(/p_(?:(\d+)x)?(\d+)x_microchip/),T=Z&&Z[1]?parseInt(Z[1]):1,K=Z?parseInt(Z[2]):j;return u={...u,inputs:z.length>0?z:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:T,innerStage:K,machineOil:C,tickCircuitDelay:N},cycle_time:D?D.cycleTime:"Variable",power_consumption:D?{max:D.maxPowerConsumption,average:D.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const M=((x=o==null?void 0:o.treeFarmConfig)==null?void 0:x.trees)||450,j=((q=o==null?void 0:o.treeFarmConfig)==null?void 0:q.harvesters)||20,C=((E=o==null?void 0:o.treeFarmConfig)==null?void 0:E.sprinklers)||24,N=((b=o==null?void 0:o.treeFarmConfig)==null?void 0:b.outputs)||8,A=1,P=bM(C),z=tg(M,j,a),F=Jl(M,j,C,N,A,a);return u={...u,inputs:P.length>0?P:[{product_id:"p_water",quantity:"Variable"}],outputs:z.length>0?z:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:M,harvesters:j,sprinklers:C,outputs:N,controller:A},cycle_time:1,power_consumption:F?F.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let M="p_any_item",j="p_any_fluid";const C=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(C)if(C==="p_concrete_block"||C==="p_lead_ingot")M="p_fission_byproducts",j="p_depleted_uf6_waste";else{const P=gt(C);(P==null?void 0:P.type)==="item"?(M=C,j="p_any_fluid"):(P==null?void 0:P.type)==="fluid"&&(M="p_any_item",j=C)}else M="p_fission_byproducts",j="p_depleted_uf6_waste";const N=tc(0,0,M,j),A=Rl(0,0);return u={...u,inputs:N,outputs:[],wasteFacilitySettings:{itemProductId:M,fluidProductId:j,itemFlowRate:0,fluidFlowRate:0},cycle_time:A.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let M=["p_water","p_residue"];const j=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(j){const A=gt(j);(A==null?void 0:A.type)==="fluid"&&(M=[j,j])}const C=k0(M),N=Ts(C);return u={...u,inputs:C,outputs:[],liquidDumpSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:N},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let M=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const j=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(j){const A=gt(j);(A==null?void 0:A.type)==="fluid"&&(M=Array(8).fill(j))}const C=M0(M),N=Ps(C);return u={...u,inputs:C,outputs:[],liquidBurnerSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:N},u}return u},$3=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],W3=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Ws).forEach(n=>{n.forEach(o=>t.add(o.product_id))}),Array.from(t)}return e==="r_logic_assembler"?mM.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},FM=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&kM(e.id),tw=1e-10,U3=(e,t,n,o,a,s=null)=>{if(t<tw)return new Map([[e,n]]);const u=n/t,c=new Map;c.set(e,n);const p=new Map;p.set(e,u);const _=new Set([e]),h=[e];for(;h.length>0;){const w=h.shift(),k=o.nodes[w];k&&(k.outputs.forEach(x=>{var E;(((E=o.products[x.productId])==null?void 0:E.connections.filter(b=>b.sourceNodeId===w))||[]).forEach(b=>{_.has(b.targetNodeId)||(_.add(b.targetNodeId),h.push(b.targetNodeId))})}),k.inputs.forEach(x=>{var E;(((E=o.products[x.productId])==null?void 0:E.connections.filter(b=>b.targetNodeId===w))||[]).forEach(b=>{_.has(b.sourceNodeId)||(_.add(b.sourceNodeId),h.push(b.sourceNodeId))})}))}const f=10;let y=0,v=!0;for(;v&&y<f;)v=!1,y++,_.forEach(w=>{var N;if(w===e)return;const k=o.nodes[w];if(!k)return;const x=(N=s==null?void 0:s.find(A=>A.id===w))==null?void 0:N.data,q=(x==null?void 0:x.machineCountMode)||k.machineCountMode||"free";if(q==="locked")return;const E=k.machineCount||0;if(E<tw)return;const b=[],M=[];if(k.outputs.forEach((A,P)=>{var F;(((F=o.products[A.productId])==null?void 0:F.connections.filter(D=>D.sourceNodeId===w&&D.sourceOutputIndex===P))||[]).forEach(D=>{const Z=p.get(D.targetNodeId);Z!==void 0&&(b.push(Z),M.push({type:"output",productId:A.productId,targetNodeId:D.targetNodeId,ratio:Z}))})}),k.inputs.forEach((A,P)=>{var F;(((F=o.products[A.productId])==null?void 0:F.connections.filter(D=>D.targetNodeId===w&&D.targetInputIndex===P))||[]).forEach(D=>{const Z=p.get(D.sourceNodeId);Z!==void 0&&(b.push(Z),M.push({type:"input",productId:A.productId,sourceNodeId:D.sourceNodeId,ratio:Z}))})}),b.length===0)return;const j=Math.max(...b),C=p.get(w)||1;if(Math.abs(j-C)>1e-4){p.set(w,j);let A=E*j;if(q==="capped"){const P=(x==null?void 0:x.cappedMachineCount)||k.cappedMachineCount;typeof P=="number"&&(A=Math.min(A,P))}c.set(w,A),v=!0}});return c};function og(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lp,rw;function G3(){if(rw)return Lp;rw=1;function e(){this.__data__=[],this.size=0}return Lp=e,Lp}var Dp,nw;function Ra(){if(nw)return Dp;nw=1;function e(t,n){return t===n||t!==t&&n!==n}return Dp=e,Dp}var Op,iw;function vc(){if(iw)return Op;iw=1;var e=Ra();function t(n,o){for(var a=n.length;a--;)if(e(n[a][0],o))return a;return-1}return Op=t,Op}var Vp,ow;function K3(){if(ow)return Vp;ow=1;var e=vc(),t=Array.prototype,n=t.splice;function o(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var c=s.length-1;return u==c?s.pop():n.call(s,u,1),--this.size,!0}return Vp=o,Vp}var zp,aw;function Y3(){if(aw)return zp;aw=1;var e=vc();function t(n){var o=this.__data__,a=e(o,n);return a<0?void 0:o[a][1]}return zp=t,zp}var Bp,sw;function Q3(){if(sw)return Bp;sw=1;var e=vc();function t(n){return e(this.__data__,n)>-1}return Bp=t,Bp}var Hp,uw;function X3(){if(uw)return Hp;uw=1;var e=vc();function t(n,o){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,o])):a[s][1]=o,this}return Hp=t,Hp}var $p,lw;function xc(){if(lw)return $p;lw=1;var e=G3(),t=K3(),n=Y3(),o=Q3(),a=X3();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,$p=s,$p}var Wp,cw;function Z3(){if(cw)return Wp;cw=1;var e=xc();function t(){this.__data__=new e,this.size=0}return Wp=t,Wp}var Up,dw;function J3(){if(dw)return Up;dw=1;function e(t){var n=this.__data__,o=n.delete(t);return this.size=n.size,o}return Up=e,Up}var Gp,pw;function eA(){if(pw)return Gp;pw=1;function e(t){return this.__data__.get(t)}return Gp=e,Gp}var Kp,_w;function tA(){if(_w)return Kp;_w=1;function e(t){return this.__data__.has(t)}return Kp=e,Kp}var Yp,fw;function LM(){if(fw)return Yp;fw=1;var e=typeof cl=="object"&&cl&&cl.Object===Object&&cl;return Yp=e,Yp}var Qp,mw;function Ln(){if(mw)return Qp;mw=1;var e=LM(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Qp=n,Qp}var Xp,hw;function Aa(){if(hw)return Xp;hw=1;var e=Ln(),t=e.Symbol;return Xp=t,Xp}var Zp,yw;function rA(){if(yw)return Zp;yw=1;var e=Aa(),t=Object.prototype,n=t.hasOwnProperty,o=t.toString,a=e?e.toStringTag:void 0;function s(u){var c=n.call(u,a),p=u[a];try{u[a]=void 0;var _=!0}catch{}var h=o.call(u);return _&&(c?u[a]=p:delete u[a]),h}return Zp=s,Zp}var Jp,gw;function nA(){if(gw)return Jp;gw=1;var e=Object.prototype,t=e.toString;function n(o){return t.call(o)}return Jp=n,Jp}var e_,vw;function Do(){if(vw)return e_;vw=1;var e=Aa(),t=rA(),n=nA(),o="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(c){return c==null?c===void 0?a:o:s&&s in Object(c)?t(c):n(c)}return e_=u,e_}var t_,xw;function ln(){if(xw)return t_;xw=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return t_=e,t_}var r_,ww;function au(){if(ww)return r_;ww=1;var e=Do(),t=ln(),n="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(c){if(!t(c))return!1;var p=e(c);return p==o||p==a||p==n||p==s}return r_=u,r_}var n_,bw;function iA(){if(bw)return n_;bw=1;var e=Ln(),t=e["__core-js_shared__"];return n_=t,n_}var i_,qw;function oA(){if(qw)return i_;qw=1;var e=iA(),t=(function(){var o=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})();function n(o){return!!t&&t in o}return i_=n,i_}var o_,Sw;function DM(){if(Sw)return o_;Sw=1;var e=Function.prototype,t=e.toString;function n(o){if(o!=null){try{return t.call(o)}catch{}try{return o+""}catch{}}return""}return o_=n,o_}var a_,kw;function aA(){if(kw)return a_;kw=1;var e=au(),t=oA(),n=ln(),o=DM(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,_=c.hasOwnProperty,h=RegExp("^"+p.call(_).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(y){if(!n(y)||t(y))return!1;var v=e(y)?h:s;return v.test(o(y))}return a_=f,a_}var s_,Cw;function sA(){if(Cw)return s_;Cw=1;function e(t,n){return t==null?void 0:t[n]}return s_=e,s_}var u_,Mw;function Oo(){if(Mw)return u_;Mw=1;var e=aA(),t=sA();function n(o,a){var s=t(o,a);return e(s)?s:void 0}return u_=n,u_}var l_,Ew;function ag(){if(Ew)return l_;Ew=1;var e=Oo(),t=Ln(),n=e(t,"Map");return l_=n,l_}var c_,Iw;function wc(){if(Iw)return c_;Iw=1;var e=Oo(),t=e(Object,"create");return c_=t,c_}var d_,jw;function uA(){if(jw)return d_;jw=1;var e=wc();function t(){this.__data__=e?e(null):{},this.size=0}return d_=t,d_}var p_,Nw;function lA(){if(Nw)return p_;Nw=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return p_=e,p_}var __,Tw;function cA(){if(Tw)return __;Tw=1;var e=wc(),t="__lodash_hash_undefined__",n=Object.prototype,o=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var c=u[s];return c===t?void 0:c}return o.call(u,s)?u[s]:void 0}return __=a,__}var f_,Pw;function dA(){if(Pw)return f_;Pw=1;var e=wc(),t=Object.prototype,n=t.hasOwnProperty;function o(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return f_=o,f_}var m_,Rw;function pA(){if(Rw)return m_;Rw=1;var e=wc(),t="__lodash_hash_undefined__";function n(o,a){var s=this.__data__;return this.size+=this.has(o)?0:1,s[o]=e&&a===void 0?t:a,this}return m_=n,m_}var h_,Aw;function _A(){if(Aw)return h_;Aw=1;var e=uA(),t=lA(),n=cA(),o=dA(),a=pA();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,h_=s,h_}var y_,Fw;function fA(){if(Fw)return y_;Fw=1;var e=_A(),t=xc(),n=ag();function o(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return y_=o,y_}var g_,Lw;function mA(){if(Lw)return g_;Lw=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return g_=e,g_}var v_,Dw;function bc(){if(Dw)return v_;Dw=1;var e=mA();function t(n,o){var a=n.__data__;return e(o)?a[typeof o=="string"?"string":"hash"]:a.map}return v_=t,v_}var x_,Ow;function hA(){if(Ow)return x_;Ow=1;var e=bc();function t(n){var o=e(this,n).delete(n);return this.size-=o?1:0,o}return x_=t,x_}var w_,Vw;function yA(){if(Vw)return w_;Vw=1;var e=bc();function t(n){return e(this,n).get(n)}return w_=t,w_}var b_,zw;function gA(){if(zw)return b_;zw=1;var e=bc();function t(n){return e(this,n).has(n)}return b_=t,b_}var q_,Bw;function vA(){if(Bw)return q_;Bw=1;var e=bc();function t(n,o){var a=e(this,n),s=a.size;return a.set(n,o),this.size+=a.size==s?0:1,this}return q_=t,q_}var S_,Hw;function sg(){if(Hw)return S_;Hw=1;var e=fA(),t=hA(),n=yA(),o=gA(),a=vA();function s(u){var c=-1,p=u==null?0:u.length;for(this.clear();++c<p;){var _=u[c];this.set(_[0],_[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=o,s.prototype.set=a,S_=s,S_}var k_,$w;function xA(){if($w)return k_;$w=1;var e=xc(),t=ag(),n=sg(),o=200;function a(s,u){var c=this.__data__;if(c instanceof e){var p=c.__data__;if(!t||p.length<o-1)return p.push([s,u]),this.size=++c.size,this;c=this.__data__=new n(p)}return c.set(s,u),this.size=c.size,this}return k_=a,k_}var C_,Ww;function qc(){if(Ww)return C_;Ww=1;var e=xc(),t=Z3(),n=J3(),o=eA(),a=tA(),s=xA();function u(c){var p=this.__data__=new e(c);this.size=p.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,C_=u,C_}var M_,Uw;function ug(){if(Uw)return M_;Uw=1;function e(t,n){for(var o=-1,a=t==null?0:t.length;++o<a&&n(t[o],o,t)!==!1;);return t}return M_=e,M_}var E_,Gw;function OM(){if(Gw)return E_;Gw=1;var e=Oo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return E_=t,E_}var I_,Kw;function Sc(){if(Kw)return I_;Kw=1;var e=OM();function t(n,o,a){o=="__proto__"&&e?e(n,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[o]=a}return I_=t,I_}var j_,Yw;function kc(){if(Yw)return j_;Yw=1;var e=Sc(),t=Ra(),n=Object.prototype,o=n.hasOwnProperty;function a(s,u,c){var p=s[u];(!(o.call(s,u)&&t(p,c))||c===void 0&&!(u in s))&&e(s,u,c)}return j_=a,j_}var N_,Qw;function su(){if(Qw)return N_;Qw=1;var e=kc(),t=Sc();function n(o,a,s,u){var c=!s;s||(s={});for(var p=-1,_=a.length;++p<_;){var h=a[p],f=u?u(s[h],o[h],h,s,o):void 0;f===void 0&&(f=o[h]),c?t(s,h,f):e(s,h,f)}return s}return N_=n,N_}var T_,Xw;function wA(){if(Xw)return T_;Xw=1;function e(t,n){for(var o=-1,a=Array(t);++o<t;)a[o]=n(o);return a}return T_=e,T_}var P_,Zw;function Jn(){if(Zw)return P_;Zw=1;function e(t){return t!=null&&typeof t=="object"}return P_=e,P_}var R_,Jw;function bA(){if(Jw)return R_;Jw=1;var e=Do(),t=Jn(),n="[object Arguments]";function o(a){return t(a)&&e(a)==n}return R_=o,R_}var A_,eb;function uu(){if(eb)return A_;eb=1;var e=bA(),t=Jn(),n=Object.prototype,o=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&o.call(u,"callee")&&!a.call(u,"callee")};return A_=s,A_}var F_,tb;function Dt(){if(tb)return F_;tb=1;var e=Array.isArray;return F_=e,F_}var Cs={exports:{}},L_,rb;function qA(){if(rb)return L_;rb=1;function e(){return!1}return L_=e,L_}Cs.exports;var nb;function Fa(){return nb||(nb=1,(function(e,t){var n=Ln(),o=qA(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,c=u?n.Buffer:void 0,p=c?c.isBuffer:void 0,_=p||o;e.exports=_})(Cs,Cs.exports)),Cs.exports}var D_,ib;function Cc(){if(ib)return D_;ib=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(o,a){var s=typeof o;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(o))&&o>-1&&o%1==0&&o<a}return D_=n,D_}var O_,ob;function lg(){if(ob)return O_;ob=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return O_=t,O_}var V_,ab;function SA(){if(ab)return V_;ab=1;var e=Do(),t=lg(),n=Jn(),o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",p="[object Function]",_="[object Map]",h="[object Number]",f="[object Object]",y="[object RegExp]",v="[object Set]",w="[object String]",k="[object WeakMap]",x="[object ArrayBuffer]",q="[object DataView]",E="[object Float32Array]",b="[object Float64Array]",M="[object Int8Array]",j="[object Int16Array]",C="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",P="[object Uint16Array]",z="[object Uint32Array]",F={};F[E]=F[b]=F[M]=F[j]=F[C]=F[N]=F[A]=F[P]=F[z]=!0,F[o]=F[a]=F[x]=F[s]=F[q]=F[u]=F[c]=F[p]=F[_]=F[h]=F[f]=F[y]=F[v]=F[w]=F[k]=!1;function D(Z){return n(Z)&&t(Z.length)&&!!F[e(Z)]}return V_=D,V_}var z_,sb;function Mc(){if(sb)return z_;sb=1;function e(t){return function(n){return t(n)}}return z_=e,z_}var Ms={exports:{}};Ms.exports;var ub;function cg(){return ub||(ub=1,(function(e,t){var n=LM(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s&&n.process,c=(function(){try{var p=a&&a.require&&a.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=c})(Ms,Ms.exports)),Ms.exports}var B_,lb;function lu(){if(lb)return B_;lb=1;var e=SA(),t=Mc(),n=cg(),o=n&&n.isTypedArray,a=o?t(o):e;return B_=a,B_}var H_,cb;function VM(){if(cb)return H_;cb=1;var e=wA(),t=uu(),n=Dt(),o=Fa(),a=Cc(),s=lu(),u=Object.prototype,c=u.hasOwnProperty;function p(_,h){var f=n(_),y=!f&&t(_),v=!f&&!y&&o(_),w=!f&&!y&&!v&&s(_),k=f||y||v||w,x=k?e(_.length,String):[],q=x.length;for(var E in _)(h||c.call(_,E))&&!(k&&(E=="length"||v&&(E=="offset"||E=="parent")||w&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||a(E,q)))&&x.push(E);return x}return H_=p,H_}var $_,db;function Ec(){if(db)return $_;db=1;var e=Object.prototype;function t(n){var o=n&&n.constructor,a=typeof o=="function"&&o.prototype||e;return n===a}return $_=t,$_}var W_,pb;function zM(){if(pb)return W_;pb=1;function e(t,n){return function(o){return t(n(o))}}return W_=e,W_}var U_,_b;function kA(){if(_b)return U_;_b=1;var e=zM(),t=e(Object.keys,Object);return U_=t,U_}var G_,fb;function dg(){if(fb)return G_;fb=1;var e=Ec(),t=kA(),n=Object.prototype,o=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var c in Object(s))o.call(s,c)&&c!="constructor"&&u.push(c);return u}return G_=a,G_}var K_,mb;function xi(){if(mb)return K_;mb=1;var e=au(),t=lg();function n(o){return o!=null&&t(o.length)&&!e(o)}return K_=n,K_}var Y_,hb;function Zi(){if(hb)return Y_;hb=1;var e=VM(),t=dg(),n=xi();function o(a){return n(a)?e(a):t(a)}return Y_=o,Y_}var Q_,yb;function CA(){if(yb)return Q_;yb=1;var e=su(),t=Zi();function n(o,a){return o&&e(a,t(a),o)}return Q_=n,Q_}var X_,gb;function MA(){if(gb)return X_;gb=1;function e(t){var n=[];if(t!=null)for(var o in Object(t))n.push(o);return n}return X_=e,X_}var Z_,vb;function EA(){if(vb)return Z_;vb=1;var e=ln(),t=Ec(),n=MA(),o=Object.prototype,a=o.hasOwnProperty;function s(u){if(!e(u))return n(u);var c=t(u),p=[];for(var _ in u)_=="constructor"&&(c||!a.call(u,_))||p.push(_);return p}return Z_=s,Z_}var J_,xb;function Vo(){if(xb)return J_;xb=1;var e=VM(),t=EA(),n=xi();function o(a){return n(a)?e(a,!0):t(a)}return J_=o,J_}var ef,wb;function IA(){if(wb)return ef;wb=1;var e=su(),t=Vo();function n(o,a){return o&&e(a,t(a),o)}return ef=n,ef}var Es={exports:{}};Es.exports;var bb;function BM(){return bb||(bb=1,(function(e,t){var n=Ln(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?n.Buffer:void 0,c=u?u.allocUnsafe:void 0;function p(_,h){if(h)return _.slice();var f=_.length,y=c?c(f):new _.constructor(f);return _.copy(y),y}e.exports=p})(Es,Es.exports)),Es.exports}var tf,qb;function HM(){if(qb)return tf;qb=1;function e(t,n){var o=-1,a=t.length;for(n||(n=Array(a));++o<a;)n[o]=t[o];return n}return tf=e,tf}var rf,Sb;function $M(){if(Sb)return rf;Sb=1;function e(t,n){for(var o=-1,a=t==null?0:t.length,s=0,u=[];++o<a;){var c=t[o];n(c,o,t)&&(u[s++]=c)}return u}return rf=e,rf}var nf,kb;function WM(){if(kb)return nf;kb=1;function e(){return[]}return nf=e,nf}var of,Cb;function pg(){if(Cb)return of;Cb=1;var e=$M(),t=WM(),n=Object.prototype,o=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(c){return o.call(u,c)}))}:t;return of=s,of}var af,Mb;function jA(){if(Mb)return af;Mb=1;var e=su(),t=pg();function n(o,a){return e(o,t(o),a)}return af=n,af}var sf,Eb;function _g(){if(Eb)return sf;Eb=1;function e(t,n){for(var o=-1,a=n.length,s=t.length;++o<a;)t[s+o]=n[o];return t}return sf=e,sf}var uf,Ib;function Ic(){if(Ib)return uf;Ib=1;var e=zM(),t=e(Object.getPrototypeOf,Object);return uf=t,uf}var lf,jb;function UM(){if(jb)return lf;jb=1;var e=_g(),t=Ic(),n=pg(),o=WM(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var c=[];u;)e(c,n(u)),u=t(u);return c}:o;return lf=s,lf}var cf,Nb;function NA(){if(Nb)return cf;Nb=1;var e=su(),t=UM();function n(o,a){return e(o,t(o),a)}return cf=n,cf}var df,Tb;function GM(){if(Tb)return df;Tb=1;var e=_g(),t=Dt();function n(o,a,s){var u=a(o);return t(o)?u:e(u,s(o))}return df=n,df}var pf,Pb;function KM(){if(Pb)return pf;Pb=1;var e=GM(),t=pg(),n=Zi();function o(a){return e(a,n,t)}return pf=o,pf}var _f,Rb;function TA(){if(Rb)return _f;Rb=1;var e=GM(),t=UM(),n=Vo();function o(a){return e(a,n,t)}return _f=o,_f}var ff,Ab;function PA(){if(Ab)return ff;Ab=1;var e=Oo(),t=Ln(),n=e(t,"DataView");return ff=n,ff}var mf,Fb;function RA(){if(Fb)return mf;Fb=1;var e=Oo(),t=Ln(),n=e(t,"Promise");return mf=n,mf}var hf,Lb;function YM(){if(Lb)return hf;Lb=1;var e=Oo(),t=Ln(),n=e(t,"Set");return hf=n,hf}var yf,Db;function AA(){if(Db)return yf;Db=1;var e=Oo(),t=Ln(),n=e(t,"WeakMap");return yf=n,yf}var gf,Ob;function La(){if(Ob)return gf;Ob=1;var e=PA(),t=ag(),n=RA(),o=YM(),a=AA(),s=Do(),u=DM(),c="[object Map]",p="[object Object]",_="[object Promise]",h="[object Set]",f="[object WeakMap]",y="[object DataView]",v=u(e),w=u(t),k=u(n),x=u(o),q=u(a),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=y||t&&E(new t)!=c||n&&E(n.resolve())!=_||o&&E(new o)!=h||a&&E(new a)!=f)&&(E=function(b){var M=s(b),j=M==p?b.constructor:void 0,C=j?u(j):"";if(C)switch(C){case v:return y;case w:return c;case k:return _;case x:return h;case q:return f}return M}),gf=E,gf}var vf,Vb;function FA(){if(Vb)return vf;Vb=1;var e=Object.prototype,t=e.hasOwnProperty;function n(o){var a=o.length,s=new o.constructor(a);return a&&typeof o[0]=="string"&&t.call(o,"index")&&(s.index=o.index,s.input=o.input),s}return vf=n,vf}var xf,zb;function QM(){if(zb)return xf;zb=1;var e=Ln(),t=e.Uint8Array;return xf=t,xf}var wf,Bb;function fg(){if(Bb)return wf;Bb=1;var e=QM();function t(n){var o=new n.constructor(n.byteLength);return new e(o).set(new e(n)),o}return wf=t,wf}var bf,Hb;function LA(){if(Hb)return bf;Hb=1;var e=fg();function t(n,o){var a=o?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return bf=t,bf}var qf,$b;function DA(){if($b)return qf;$b=1;var e=/\w*$/;function t(n){var o=new n.constructor(n.source,e.exec(n));return o.lastIndex=n.lastIndex,o}return qf=t,qf}var Sf,Wb;function OA(){if(Wb)return Sf;Wb=1;var e=Aa(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function o(a){return n?Object(n.call(a)):{}}return Sf=o,Sf}var kf,Ub;function XM(){if(Ub)return kf;Ub=1;var e=fg();function t(n,o){var a=o?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return kf=t,kf}var Cf,Gb;function VA(){if(Gb)return Cf;Gb=1;var e=fg(),t=LA(),n=DA(),o=OA(),a=XM(),s="[object Boolean]",u="[object Date]",c="[object Map]",p="[object Number]",_="[object RegExp]",h="[object Set]",f="[object String]",y="[object Symbol]",v="[object ArrayBuffer]",w="[object DataView]",k="[object Float32Array]",x="[object Float64Array]",q="[object Int8Array]",E="[object Int16Array]",b="[object Int32Array]",M="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]";function A(P,z,F){var D=P.constructor;switch(z){case v:return e(P);case s:case u:return new D(+P);case w:return t(P,F);case k:case x:case q:case E:case b:case M:case j:case C:case N:return a(P,F);case c:return new D;case p:case f:return new D(P);case _:return n(P);case h:return new D;case y:return o(P)}}return Cf=A,Cf}var Mf,Kb;function ZM(){if(Kb)return Mf;Kb=1;var e=ln(),t=Object.create,n=(function(){function o(){}return function(a){if(!e(a))return{};if(t)return t(a);o.prototype=a;var s=new o;return o.prototype=void 0,s}})();return Mf=n,Mf}var Ef,Yb;function JM(){if(Yb)return Ef;Yb=1;var e=ZM(),t=Ic(),n=Ec();function o(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return Ef=o,Ef}var If,Qb;function zA(){if(Qb)return If;Qb=1;var e=La(),t=Jn(),n="[object Map]";function o(a){return t(a)&&e(a)==n}return If=o,If}var jf,Xb;function BA(){if(Xb)return jf;Xb=1;var e=zA(),t=Mc(),n=cg(),o=n&&n.isMap,a=o?t(o):e;return jf=a,jf}var Nf,Zb;function HA(){if(Zb)return Nf;Zb=1;var e=La(),t=Jn(),n="[object Set]";function o(a){return t(a)&&e(a)==n}return Nf=o,Nf}var Tf,Jb;function $A(){if(Jb)return Tf;Jb=1;var e=HA(),t=Mc(),n=cg(),o=n&&n.isSet,a=o?t(o):e;return Tf=a,Tf}var Pf,e2;function eE(){if(e2)return Pf;e2=1;var e=qc(),t=ug(),n=kc(),o=CA(),a=IA(),s=BM(),u=HM(),c=jA(),p=NA(),_=KM(),h=TA(),f=La(),y=FA(),v=VA(),w=JM(),k=Dt(),x=Fa(),q=BA(),E=ln(),b=$A(),M=Zi(),j=Vo(),C=1,N=2,A=4,P="[object Arguments]",z="[object Array]",F="[object Boolean]",D="[object Date]",Z="[object Error]",T="[object Function]",K="[object GeneratorFunction]",U="[object Map]",ne="[object Number]",Y="[object Object]",Q="[object RegExp]",ie="[object Set]",B="[object String]",J="[object Symbol]",me="[object WeakMap]",$="[object ArrayBuffer]",te="[object DataView]",oe="[object Float32Array]",de="[object Float64Array]",ue="[object Int8Array]",ve="[object Int16Array]",Ee="[object Int32Array]",Re="[object Uint8Array]",Ie="[object Uint8ClampedArray]",je="[object Uint16Array]",Te="[object Uint32Array]",Ae={};Ae[P]=Ae[z]=Ae[$]=Ae[te]=Ae[F]=Ae[D]=Ae[oe]=Ae[de]=Ae[ue]=Ae[ve]=Ae[Ee]=Ae[U]=Ae[ne]=Ae[Y]=Ae[Q]=Ae[ie]=Ae[B]=Ae[J]=Ae[Re]=Ae[Ie]=Ae[je]=Ae[Te]=!0,Ae[Z]=Ae[T]=Ae[me]=!1;function We(Be,st,at,Mt,bt,qt){var ut,Cr=st&C,tr=st&N,Rt=st&A;if(at&&(ut=bt?at(Be,Mt,bt,qt):at(Be)),ut!==void 0)return ut;if(!E(Be))return Be;var Wt=k(Be);if(Wt){if(ut=y(Be),!Cr)return u(Be,ut)}else{var it=f(Be),Lr=it==T||it==K;if(x(Be))return s(Be,Cr);if(it==Y||it==P||Lr&&!bt){if(ut=tr||Lr?{}:w(Be),!Cr)return tr?p(Be,a(ut,Be)):c(Be,o(ut,Be))}else{if(!Ae[it])return bt?Be:{};ut=v(Be,it,Cr)}}qt||(qt=new e);var Nt=qt.get(Be);if(Nt)return Nt;qt.set(Be,ut),b(Be)?Be.forEach(function(Ut){ut.add(We(Ut,st,at,Ut,Be,qt))}):q(Be)&&Be.forEach(function(Ut,Qe){ut.set(Qe,We(Ut,st,at,Qe,Be,qt))});var Kr=Rt?tr?h:_:tr?j:M,rr=Wt?void 0:Kr(Be);return t(rr||Be,function(Ut,Qe){rr&&(Qe=Ut,Ut=Be[Qe]),n(ut,Qe,We(Ut,st,at,Qe,Be,qt))}),ut}return Pf=We,Pf}var Rf,t2;function WA(){if(t2)return Rf;t2=1;var e=eE(),t=4;function n(o){return e(o,t)}return Rf=n,Rf}var Af,r2;function mg(){if(r2)return Af;r2=1;function e(t){return function(){return t}}return Af=e,Af}var Ff,n2;function UA(){if(n2)return Ff;n2=1;function e(t){return function(n,o,a){for(var s=-1,u=Object(n),c=a(n),p=c.length;p--;){var _=c[t?p:++s];if(o(u[_],_,u)===!1)break}return n}}return Ff=e,Ff}var Lf,i2;function hg(){if(i2)return Lf;i2=1;var e=UA(),t=e();return Lf=t,Lf}var Df,o2;function yg(){if(o2)return Df;o2=1;var e=hg(),t=Zi();function n(o,a){return o&&e(o,a,t)}return Df=n,Df}var Of,a2;function GA(){if(a2)return Of;a2=1;var e=xi();function t(n,o){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,c=o?u:-1,p=Object(a);(o?c--:++c<u)&&s(p[c],c,p)!==!1;);return a}}return Of=t,Of}var Vf,s2;function jc(){if(s2)return Vf;s2=1;var e=yg(),t=GA(),n=t(e);return Vf=n,Vf}var zf,u2;function zo(){if(u2)return zf;u2=1;function e(t){return t}return zf=e,zf}var Bf,l2;function tE(){if(l2)return Bf;l2=1;var e=zo();function t(n){return typeof n=="function"?n:e}return Bf=t,Bf}var Hf,c2;function rE(){if(c2)return Hf;c2=1;var e=ug(),t=jc(),n=tE(),o=Dt();function a(s,u){var c=o(s)?e:t;return c(s,n(u))}return Hf=a,Hf}var $f,d2;function nE(){return d2||(d2=1,$f=rE()),$f}var Wf,p2;function KA(){if(p2)return Wf;p2=1;var e=jc();function t(n,o){var a=[];return e(n,function(s,u,c){o(s,u,c)&&a.push(s)}),a}return Wf=t,Wf}var Uf,_2;function YA(){if(_2)return Uf;_2=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Uf=t,Uf}var Gf,f2;function QA(){if(f2)return Gf;f2=1;function e(t){return this.__data__.has(t)}return Gf=e,Gf}var Kf,m2;function iE(){if(m2)return Kf;m2=1;var e=sg(),t=YA(),n=QA();function o(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return o.prototype.add=o.prototype.push=t,o.prototype.has=n,Kf=o,Kf}var Yf,h2;function XA(){if(h2)return Yf;h2=1;function e(t,n){for(var o=-1,a=t==null?0:t.length;++o<a;)if(n(t[o],o,t))return!0;return!1}return Yf=e,Yf}var Qf,y2;function oE(){if(y2)return Qf;y2=1;function e(t,n){return t.has(n)}return Qf=e,Qf}var Xf,g2;function aE(){if(g2)return Xf;g2=1;var e=iE(),t=XA(),n=oE(),o=1,a=2;function s(u,c,p,_,h,f){var y=p&o,v=u.length,w=c.length;if(v!=w&&!(y&&w>v))return!1;var k=f.get(u),x=f.get(c);if(k&&x)return k==c&&x==u;var q=-1,E=!0,b=p&a?new e:void 0;for(f.set(u,c),f.set(c,u);++q<v;){var M=u[q],j=c[q];if(_)var C=y?_(j,M,q,c,u,f):_(M,j,q,u,c,f);if(C!==void 0){if(C)continue;E=!1;break}if(b){if(!t(c,function(N,A){if(!n(b,A)&&(M===N||h(M,N,p,_,f)))return b.push(A)})){E=!1;break}}else if(!(M===j||h(M,j,p,_,f))){E=!1;break}}return f.delete(u),f.delete(c),E}return Xf=s,Xf}var Zf,v2;function ZA(){if(v2)return Zf;v2=1;function e(t){var n=-1,o=Array(t.size);return t.forEach(function(a,s){o[++n]=[s,a]}),o}return Zf=e,Zf}var Jf,x2;function gg(){if(x2)return Jf;x2=1;function e(t){var n=-1,o=Array(t.size);return t.forEach(function(a){o[++n]=a}),o}return Jf=e,Jf}var em,w2;function JA(){if(w2)return em;w2=1;var e=Aa(),t=QM(),n=Ra(),o=aE(),a=ZA(),s=gg(),u=1,c=2,p="[object Boolean]",_="[object Date]",h="[object Error]",f="[object Map]",y="[object Number]",v="[object RegExp]",w="[object Set]",k="[object String]",x="[object Symbol]",q="[object ArrayBuffer]",E="[object DataView]",b=e?e.prototype:void 0,M=b?b.valueOf:void 0;function j(C,N,A,P,z,F,D){switch(A){case E:if(C.byteLength!=N.byteLength||C.byteOffset!=N.byteOffset)return!1;C=C.buffer,N=N.buffer;case q:return!(C.byteLength!=N.byteLength||!F(new t(C),new t(N)));case p:case _:case y:return n(+C,+N);case h:return C.name==N.name&&C.message==N.message;case v:case k:return C==N+"";case f:var Z=a;case w:var T=P&u;if(Z||(Z=s),C.size!=N.size&&!T)return!1;var K=D.get(C);if(K)return K==N;P|=c,D.set(C,N);var U=o(Z(C),Z(N),P,z,F,D);return D.delete(C),U;case x:if(M)return M.call(C)==M.call(N)}return!1}return em=j,em}var tm,b2;function eF(){if(b2)return tm;b2=1;var e=KM(),t=1,n=Object.prototype,o=n.hasOwnProperty;function a(s,u,c,p,_,h){var f=c&t,y=e(s),v=y.length,w=e(u),k=w.length;if(v!=k&&!f)return!1;for(var x=v;x--;){var q=y[x];if(!(f?q in u:o.call(u,q)))return!1}var E=h.get(s),b=h.get(u);if(E&&b)return E==u&&b==s;var M=!0;h.set(s,u),h.set(u,s);for(var j=f;++x<v;){q=y[x];var C=s[q],N=u[q];if(p)var A=f?p(N,C,q,u,s,h):p(C,N,q,s,u,h);if(!(A===void 0?C===N||_(C,N,c,p,h):A)){M=!1;break}j||(j=q=="constructor")}if(M&&!j){var P=s.constructor,z=u.constructor;P!=z&&"constructor"in s&&"constructor"in u&&!(typeof P=="function"&&P instanceof P&&typeof z=="function"&&z instanceof z)&&(M=!1)}return h.delete(s),h.delete(u),M}return tm=a,tm}var rm,q2;function tF(){if(q2)return rm;q2=1;var e=qc(),t=aE(),n=JA(),o=eF(),a=La(),s=Dt(),u=Fa(),c=lu(),p=1,_="[object Arguments]",h="[object Array]",f="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function w(k,x,q,E,b,M){var j=s(k),C=s(x),N=j?h:a(k),A=C?h:a(x);N=N==_?f:N,A=A==_?f:A;var P=N==f,z=A==f,F=N==A;if(F&&u(k)){if(!u(x))return!1;j=!0,P=!1}if(F&&!P)return M||(M=new e),j||c(k)?t(k,x,q,E,b,M):n(k,x,N,q,E,b,M);if(!(q&p)){var D=P&&v.call(k,"__wrapped__"),Z=z&&v.call(x,"__wrapped__");if(D||Z){var T=D?k.value():k,K=Z?x.value():x;return M||(M=new e),b(T,K,q,E,M)}}return F?(M||(M=new e),o(k,x,q,E,b,M)):!1}return rm=w,rm}var nm,S2;function sE(){if(S2)return nm;S2=1;var e=tF(),t=Jn();function n(o,a,s,u,c){return o===a?!0:o==null||a==null||!t(o)&&!t(a)?o!==o&&a!==a:e(o,a,s,u,n,c)}return nm=n,nm}var im,k2;function rF(){if(k2)return im;k2=1;var e=qc(),t=sE(),n=1,o=2;function a(s,u,c,p){var _=c.length,h=_,f=!p;if(s==null)return!h;for(s=Object(s);_--;){var y=c[_];if(f&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++_<h;){y=c[_];var v=y[0],w=s[v],k=y[1];if(f&&y[2]){if(w===void 0&&!(v in s))return!1}else{var x=new e;if(p)var q=p(w,k,v,s,u,x);if(!(q===void 0?t(k,w,n|o,p,x):q))return!1}}return!0}return im=a,im}var om,C2;function uE(){if(C2)return om;C2=1;var e=ln();function t(n){return n===n&&!e(n)}return om=t,om}var am,M2;function nF(){if(M2)return am;M2=1;var e=uE(),t=Zi();function n(o){for(var a=t(o),s=a.length;s--;){var u=a[s],c=o[u];a[s]=[u,c,e(c)]}return a}return am=n,am}var sm,E2;function lE(){if(E2)return sm;E2=1;function e(t,n){return function(o){return o==null?!1:o[t]===n&&(n!==void 0||t in Object(o))}}return sm=e,sm}var um,I2;function iF(){if(I2)return um;I2=1;var e=rF(),t=nF(),n=lE();function o(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return um=o,um}var lm,j2;function Da(){if(j2)return lm;j2=1;var e=Do(),t=Jn(),n="[object Symbol]";function o(a){return typeof a=="symbol"||t(a)&&e(a)==n}return lm=o,lm}var cm,N2;function vg(){if(N2)return cm;N2=1;var e=Dt(),t=Da(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function a(s,u){if(e(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||t(s)?!0:o.test(s)||!n.test(s)||u!=null&&s in Object(u)}return cm=a,cm}var dm,T2;function oF(){if(T2)return dm;T2=1;var e=sg(),t="Expected a function";function n(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,c=a?a.apply(this,u):u[0],p=s.cache;if(p.has(c))return p.get(c);var _=o.apply(this,u);return s.cache=p.set(c,_)||p,_};return s.cache=new(n.Cache||e),s}return n.Cache=e,dm=n,dm}var pm,P2;function aF(){if(P2)return pm;P2=1;var e=oF(),t=500;function n(o){var a=e(o,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return pm=n,pm}var _m,R2;function sF(){if(R2)return _m;R2=1;var e=aF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,o=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,c,p,_){s.push(p?_.replace(n,"$1"):c||u)}),s});return _m=o,_m}var fm,A2;function Nc(){if(A2)return fm;A2=1;function e(t,n){for(var o=-1,a=t==null?0:t.length,s=Array(a);++o<a;)s[o]=n(t[o],o,t);return s}return fm=e,fm}var mm,F2;function uF(){if(F2)return mm;F2=1;var e=Aa(),t=Nc(),n=Dt(),o=Da(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(c){if(typeof c=="string")return c;if(n(c))return t(c,u)+"";if(o(c))return s?s.call(c):"";var p=c+"";return p=="0"&&1/c==-1/0?"-0":p}return mm=u,mm}var hm,L2;function cE(){if(L2)return hm;L2=1;var e=uF();function t(n){return n==null?"":e(n)}return hm=t,hm}var ym,D2;function Tc(){if(D2)return ym;D2=1;var e=Dt(),t=vg(),n=sF(),o=cE();function a(s,u){return e(s)?s:t(s,u)?[s]:n(o(s))}return ym=a,ym}var gm,O2;function cu(){if(O2)return gm;O2=1;var e=Da();function t(n){if(typeof n=="string"||e(n))return n;var o=n+"";return o=="0"&&1/n==-1/0?"-0":o}return gm=t,gm}var vm,V2;function Pc(){if(V2)return vm;V2=1;var e=Tc(),t=cu();function n(o,a){a=e(a,o);for(var s=0,u=a.length;o!=null&&s<u;)o=o[t(a[s++])];return s&&s==u?o:void 0}return vm=n,vm}var xm,z2;function lF(){if(z2)return xm;z2=1;var e=Pc();function t(n,o,a){var s=n==null?void 0:e(n,o);return s===void 0?a:s}return xm=t,xm}var wm,B2;function cF(){if(B2)return wm;B2=1;function e(t,n){return t!=null&&n in Object(t)}return wm=e,wm}var bm,H2;function dE(){if(H2)return bm;H2=1;var e=Tc(),t=uu(),n=Dt(),o=Cc(),a=lg(),s=cu();function u(c,p,_){p=e(p,c);for(var h=-1,f=p.length,y=!1;++h<f;){var v=s(p[h]);if(!(y=c!=null&&_(c,v)))break;c=c[v]}return y||++h!=f?y:(f=c==null?0:c.length,!!f&&a(f)&&o(v,f)&&(n(c)||t(c)))}return bm=u,bm}var qm,$2;function pE(){if($2)return qm;$2=1;var e=cF(),t=dE();function n(o,a){return o!=null&&t(o,a,e)}return qm=n,qm}var Sm,W2;function dF(){if(W2)return Sm;W2=1;var e=sE(),t=lF(),n=pE(),o=vg(),a=uE(),s=lE(),u=cu(),c=1,p=2;function _(h,f){return o(h)&&a(f)?s(u(h),f):function(y){var v=t(y,h);return v===void 0&&v===f?n(y,h):e(f,v,c|p)}}return Sm=_,Sm}var km,U2;function _E(){if(U2)return km;U2=1;function e(t){return function(n){return n==null?void 0:n[t]}}return km=e,km}var Cm,G2;function pF(){if(G2)return Cm;G2=1;var e=Pc();function t(n){return function(o){return e(o,n)}}return Cm=t,Cm}var Mm,K2;function _F(){if(K2)return Mm;K2=1;var e=_E(),t=pF(),n=vg(),o=cu();function a(s){return n(s)?e(o(s)):t(s)}return Mm=a,Mm}var Em,Y2;function wi(){if(Y2)return Em;Y2=1;var e=iF(),t=dF(),n=zo(),o=Dt(),a=_F();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?o(u)?t(u[0],u[1]):e(u):a(u)}return Em=s,Em}var Im,Q2;function fE(){if(Q2)return Im;Q2=1;var e=$M(),t=KA(),n=wi(),o=Dt();function a(s,u){var c=o(s)?e:t;return c(s,n(u,3))}return Im=a,Im}var jm,X2;function fF(){if(X2)return jm;X2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(o,a){return o!=null&&t.call(o,a)}return jm=n,jm}var Nm,Z2;function mE(){if(Z2)return Nm;Z2=1;var e=fF(),t=dE();function n(o,a){return o!=null&&t(o,a,e)}return Nm=n,Nm}var Tm,J2;function mF(){if(J2)return Tm;J2=1;var e=dg(),t=La(),n=uu(),o=Dt(),a=xi(),s=Fa(),u=Ec(),c=lu(),p="[object Map]",_="[object Set]",h=Object.prototype,f=h.hasOwnProperty;function y(v){if(v==null)return!0;if(a(v)&&(o(v)||typeof v=="string"||typeof v.splice=="function"||s(v)||c(v)||n(v)))return!v.length;var w=t(v);if(w==p||w==_)return!v.size;if(u(v))return!e(v).length;for(var k in v)if(f.call(v,k))return!1;return!0}return Tm=y,Tm}var Pm,eq;function hE(){if(eq)return Pm;eq=1;function e(t){return t===void 0}return Pm=e,Pm}var Rm,tq;function yE(){if(tq)return Rm;tq=1;var e=jc(),t=xi();function n(o,a){var s=-1,u=t(o)?Array(o.length):[];return e(o,function(c,p,_){u[++s]=a(c,p,_)}),u}return Rm=n,Rm}var Am,rq;function gE(){if(rq)return Am;rq=1;var e=Nc(),t=wi(),n=yE(),o=Dt();function a(s,u){var c=o(s)?e:n;return c(s,t(u,3))}return Am=a,Am}var Fm,nq;function hF(){if(nq)return Fm;nq=1;function e(t,n,o,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(o=t[++s]);++s<u;)o=n(o,t[s],s,t);return o}return Fm=e,Fm}var Lm,iq;function yF(){if(iq)return Lm;iq=1;function e(t,n,o,a,s){return s(t,function(u,c,p){o=a?(a=!1,u):n(o,u,c,p)}),o}return Lm=e,Lm}var Dm,oq;function vE(){if(oq)return Dm;oq=1;var e=hF(),t=jc(),n=wi(),o=yF(),a=Dt();function s(u,c,p){var _=a(u)?e:o,h=arguments.length<3;return _(u,n(c,4),p,h,t)}return Dm=s,Dm}var Om,aq;function gF(){if(aq)return Om;aq=1;var e=Do(),t=Dt(),n=Jn(),o="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==o}return Om=a,Om}var Vm,sq;function vF(){if(sq)return Vm;sq=1;var e=_E(),t=e("length");return Vm=t,Vm}var zm,uq;function xF(){if(uq)return zm;uq=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=t+n+o,s="\\ufe0e\\ufe0f",u="\\u200d",c=RegExp("["+u+e+a+s+"]");function p(_){return c.test(_)}return zm=p,zm}var Bm,lq;function wF(){if(lq)return Bm;lq=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=t+n+o,s="\\ufe0e\\ufe0f",u="["+e+"]",c="["+a+"]",p="\\ud83c[\\udffb-\\udfff]",_="(?:"+c+"|"+p+")",h="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",w=_+"?",k="["+s+"]?",x="(?:"+v+"(?:"+[h,f,y].join("|")+")"+k+w+")*",q=k+w+x,E="(?:"+[h+c+"?",c,f,y,u].join("|")+")",b=RegExp(p+"(?="+p+")|"+E+q,"g");function M(j){for(var C=b.lastIndex=0;b.test(j);)++C;return C}return Bm=M,Bm}var Hm,cq;function bF(){if(cq)return Hm;cq=1;var e=vF(),t=xF(),n=wF();function o(a){return t(a)?n(a):e(a)}return Hm=o,Hm}var $m,dq;function qF(){if(dq)return $m;dq=1;var e=dg(),t=La(),n=xi(),o=gF(),a=bF(),s="[object Map]",u="[object Set]";function c(p){if(p==null)return 0;if(n(p))return o(p)?a(p):p.length;var _=t(p);return _==s||_==u?p.size:e(p).length}return $m=c,$m}var Wm,pq;function SF(){if(pq)return Wm;pq=1;var e=ug(),t=ZM(),n=yg(),o=wi(),a=Ic(),s=Dt(),u=Fa(),c=au(),p=ln(),_=lu();function h(f,y,v){var w=s(f),k=w||u(f)||_(f);if(y=o(y,4),v==null){var x=f&&f.constructor;k?v=w?new x:[]:p(f)?v=c(x)?t(a(f)):{}:v={}}return(k?e:n)(f,function(q,E,b){return y(v,q,E,b)}),v}return Wm=h,Wm}var Um,_q;function kF(){if(_q)return Um;_q=1;var e=Aa(),t=uu(),n=Dt(),o=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(o&&s&&s[o])}return Um=a,Um}var Gm,fq;function xg(){if(fq)return Gm;fq=1;var e=_g(),t=kF();function n(o,a,s,u,c){var p=-1,_=o.length;for(s||(s=t),c||(c=[]);++p<_;){var h=o[p];a>0&&s(h)?a>1?n(h,a-1,s,u,c):e(c,h):u||(c[c.length]=h)}return c}return Gm=n,Gm}var Km,mq;function CF(){if(mq)return Km;mq=1;function e(t,n,o){switch(o.length){case 0:return t.call(n);case 1:return t.call(n,o[0]);case 2:return t.call(n,o[0],o[1]);case 3:return t.call(n,o[0],o[1],o[2])}return t.apply(n,o)}return Km=e,Km}var Ym,hq;function xE(){if(hq)return Ym;hq=1;var e=CF(),t=Math.max;function n(o,a,s){return a=t(a===void 0?o.length-1:a,0),function(){for(var u=arguments,c=-1,p=t(u.length-a,0),_=Array(p);++c<p;)_[c]=u[a+c];c=-1;for(var h=Array(a+1);++c<a;)h[c]=u[c];return h[a]=s(_),e(o,this,h)}}return Ym=n,Ym}var Qm,yq;function MF(){if(yq)return Qm;yq=1;var e=mg(),t=OM(),n=zo(),o=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return Qm=o,Qm}var Xm,gq;function EF(){if(gq)return Xm;gq=1;var e=800,t=16,n=Date.now;function o(a){var s=0,u=0;return function(){var c=n(),p=t-(c-u);if(u=c,p>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return Xm=o,Xm}var Zm,vq;function wE(){if(vq)return Zm;vq=1;var e=MF(),t=EF(),n=t(e);return Zm=n,Zm}var Jm,xq;function Rc(){if(xq)return Jm;xq=1;var e=zo(),t=xE(),n=wE();function o(a,s){return n(t(a,s,e),a+"")}return Jm=o,Jm}var eh,wq;function bE(){if(wq)return eh;wq=1;function e(t,n,o,a){for(var s=t.length,u=o+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return eh=e,eh}var th,bq;function IF(){if(bq)return th;bq=1;function e(t){return t!==t}return th=e,th}var rh,qq;function jF(){if(qq)return rh;qq=1;function e(t,n,o){for(var a=o-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return rh=e,rh}var nh,Sq;function NF(){if(Sq)return nh;Sq=1;var e=bE(),t=IF(),n=jF();function o(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return nh=o,nh}var ih,kq;function TF(){if(kq)return ih;kq=1;var e=NF();function t(n,o){var a=n==null?0:n.length;return!!a&&e(n,o,0)>-1}return ih=t,ih}var oh,Cq;function PF(){if(Cq)return oh;Cq=1;function e(t,n,o){for(var a=-1,s=t==null?0:t.length;++a<s;)if(o(n,t[a]))return!0;return!1}return oh=e,oh}var ah,Mq;function RF(){if(Mq)return ah;Mq=1;function e(){}return ah=e,ah}var sh,Eq;function AF(){if(Eq)return sh;Eq=1;var e=YM(),t=RF(),n=gg(),o=1/0,a=e&&1/n(new e([,-0]))[1]==o?function(s){return new e(s)}:t;return sh=a,sh}var uh,Iq;function FF(){if(Iq)return uh;Iq=1;var e=iE(),t=TF(),n=PF(),o=oE(),a=AF(),s=gg(),u=200;function c(p,_,h){var f=-1,y=t,v=p.length,w=!0,k=[],x=k;if(h)w=!1,y=n;else if(v>=u){var q=_?null:a(p);if(q)return s(q);w=!1,y=o,x=new e}else x=_?[]:k;e:for(;++f<v;){var E=p[f],b=_?_(E):E;if(E=h||E!==0?E:0,w&&b===b){for(var M=x.length;M--;)if(x[M]===b)continue e;_&&x.push(b),k.push(E)}else y(x,b,h)||(x!==k&&x.push(b),k.push(E))}return k}return uh=c,uh}var lh,jq;function qE(){if(jq)return lh;jq=1;var e=xi(),t=Jn();function n(o){return t(o)&&e(o)}return lh=n,lh}var ch,Nq;function LF(){if(Nq)return ch;Nq=1;var e=xg(),t=Rc(),n=FF(),o=qE(),a=t(function(s){return n(e(s,1,o,!0))});return ch=a,ch}var dh,Tq;function DF(){if(Tq)return dh;Tq=1;var e=Nc();function t(n,o){return e(o,function(a){return n[a]})}return dh=t,dh}var ph,Pq;function SE(){if(Pq)return ph;Pq=1;var e=DF(),t=Zi();function n(o){return o==null?[]:e(o,t(o))}return ph=n,ph}var _h,Rq;function cn(){if(Rq)return _h;Rq=1;var e;if(typeof og=="function")try{e={clone:WA(),constant:mg(),each:nE(),filter:fE(),has:mE(),isArray:Dt(),isEmpty:mF(),isFunction:au(),isUndefined:hE(),keys:Zi(),map:gE(),reduce:vE(),size:qF(),transform:SF(),union:LF(),values:SE()}}catch{}return e||(e=window._),_h=e,_h}var fh,Aq;function wg(){if(Aq)return fh;Aq=1;var e=cn();fh=a;var t="\0",n="\0",o="";function a(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(h){return this._label=h,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(f){return e.isEmpty(h._in[f])})},a.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(f){return e.isEmpty(h._out[f])})},a.prototype.setNodes=function(h,f){var y=arguments,v=this;return e.each(h,function(w){y.length>1?v.setNode(w,f):v.setNode(w)}),this},a.prototype.setNode=function(h,f){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=f),this):(this._nodes[h]=arguments.length>1?f:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},a.prototype.node=function(h){return this._nodes[h]},a.prototype.hasNode=function(h){return e.has(this._nodes,h)},a.prototype.removeNode=function(h){var f=this;if(e.has(this._nodes,h)){var y=function(v){f.removeEdge(f._edgeObjs[v])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(v){f.setParent(v)}),delete this._children[h]),e.each(e.keys(this._in[h]),y),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),y),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},a.prototype.setParent=function(h,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var y=f;!e.isUndefined(y);y=this.parent(y))if(y===h)throw new Error("Setting "+f+" as parent of "+h+" would create a cycle");this.setNode(f)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=f,this._children[f][h]=!0,this},a.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},a.prototype.parent=function(h){if(this._isCompound){var f=this._parent[h];if(f!==n)return f}},a.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var f=this._children[h];if(f)return e.keys(f)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},a.prototype.predecessors=function(h){var f=this._preds[h];if(f)return e.keys(f)},a.prototype.successors=function(h){var f=this._sucs[h];if(f)return e.keys(f)},a.prototype.neighbors=function(h){var f=this.predecessors(h);if(f)return e.union(f,this.successors(h))},a.prototype.isLeaf=function(h){var f;return this.isDirected()?f=this.successors(h):f=this.neighbors(h),f.length===0},a.prototype.filterNodes=function(h){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var y=this;e.each(this._nodes,function(k,x){h(x)&&f.setNode(x,k)}),e.each(this._edgeObjs,function(k){f.hasNode(k.v)&&f.hasNode(k.w)&&f.setEdge(k,y.edge(k))});var v={};function w(k){var x=y.parent(k);return x===void 0||f.hasNode(x)?(v[k]=x,x):x in v?v[x]:w(x)}return this._isCompound&&e.each(f.nodes(),function(k){f.setParent(k,w(k))}),f},a.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(h,f){var y=this,v=arguments;return e.reduce(h,function(w,k){return v.length>1?y.setEdge(w,k,f):y.setEdge(w,k),k}),this},a.prototype.setEdge=function(){var h,f,y,v,w=!1,k=arguments[0];typeof k=="object"&&k!==null&&"v"in k?(h=k.v,f=k.w,y=k.name,arguments.length===2&&(v=arguments[1],w=!0)):(h=k,f=arguments[1],y=arguments[3],arguments.length>2&&(v=arguments[2],w=!0)),h=""+h,f=""+f,e.isUndefined(y)||(y=""+y);var x=c(this._isDirected,h,f,y);if(e.has(this._edgeLabels,x))return w&&(this._edgeLabels[x]=v),this;if(!e.isUndefined(y)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(f),this._edgeLabels[x]=w?v:this._defaultEdgeLabelFn(h,f,y);var q=p(this._isDirected,h,f,y);return h=q.v,f=q.w,Object.freeze(q),this._edgeObjs[x]=q,s(this._preds[f],h),s(this._sucs[h],f),this._in[f][x]=q,this._out[h][x]=q,this._edgeCount++,this},a.prototype.edge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y);return this._edgeLabels[v]},a.prototype.hasEdge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y);return e.has(this._edgeLabels,v)},a.prototype.removeEdge=function(h,f,y){var v=arguments.length===1?_(this._isDirected,arguments[0]):c(this._isDirected,h,f,y),w=this._edgeObjs[v];return w&&(h=w.v,f=w.w,delete this._edgeLabels[v],delete this._edgeObjs[v],u(this._preds[f],h),u(this._sucs[h],f),delete this._in[f][v],delete this._out[h][v],this._edgeCount--),this},a.prototype.inEdges=function(h,f){var y=this._in[h];if(y){var v=e.values(y);return f?e.filter(v,function(w){return w.v===f}):v}},a.prototype.outEdges=function(h,f){var y=this._out[h];if(y){var v=e.values(y);return f?e.filter(v,function(w){return w.w===f}):v}},a.prototype.nodeEdges=function(h,f){var y=this.inEdges(h,f);if(y)return y.concat(this.outEdges(h,f))};function s(h,f){h[f]?h[f]++:h[f]=1}function u(h,f){--h[f]||delete h[f]}function c(h,f,y,v){var w=""+f,k=""+y;if(!h&&w>k){var x=w;w=k,k=x}return w+o+k+o+(e.isUndefined(v)?t:v)}function p(h,f,y,v){var w=""+f,k=""+y;if(!h&&w>k){var x=w;w=k,k=x}var q={v:w,w:k};return v&&(q.name=v),q}function _(h,f){return c(h,f.v,f.w,f.name)}return fh}var mh,Fq;function OF(){return Fq||(Fq=1,mh="2.1.8"),mh}var hh,Lq;function VF(){return Lq||(Lq=1,hh={Graph:wg(),version:OF()}),hh}var yh,Dq;function zF(){if(Dq)return yh;Dq=1;var e=cn(),t=wg();yh={write:n,read:s};function n(u){var c={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:o(u),edges:a(u)};return e.isUndefined(u.graph())||(c.value=e.clone(u.graph())),c}function o(u){return e.map(u.nodes(),function(c){var p=u.node(c),_=u.parent(c),h={v:c};return e.isUndefined(p)||(h.value=p),e.isUndefined(_)||(h.parent=_),h})}function a(u){return e.map(u.edges(),function(c){var p=u.edge(c),_={v:c.v,w:c.w};return e.isUndefined(c.name)||(_.name=c.name),e.isUndefined(p)||(_.value=p),_})}function s(u){var c=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(p){c.setNode(p.v,p.value),p.parent&&c.setParent(p.v,p.parent)}),e.each(u.edges,function(p){c.setEdge({v:p.v,w:p.w,name:p.name},p.value)}),c}return yh}var gh,Oq;function BF(){if(Oq)return gh;Oq=1;var e=cn();gh=t;function t(n){var o={},a=[],s;function u(c){e.has(o,c)||(o[c]=!0,s.push(c),e.each(n.successors(c),u),e.each(n.predecessors(c),u))}return e.each(n.nodes(),function(c){s=[],u(c),s.length&&a.push(s)}),a}return gh}var vh,Vq;function kE(){if(Vq)return vh;Vq=1;var e=cn();vh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var o=this._keyIndices[n];if(o!==void 0)return this._arr[o].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,o){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:o}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,o){var a=this._keyIndices[n];if(o>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+o);this._arr[a].priority=o,this._decrease(a)},t.prototype._heapify=function(n){var o=this._arr,a=2*n,s=a+1,u=n;a<o.length&&(u=o[a].priority<o[u].priority?a:u,s<o.length&&(u=o[s].priority<o[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var o=this._arr,a=o[n].priority,s;n!==0&&(s=n>>1,!(o[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,o){var a=this._arr,s=this._keyIndices,u=a[n],c=a[o];a[n]=c,a[o]=u,s[c.key]=n,s[u.key]=o},vh}var xh,zq;function CE(){if(zq)return xh;zq=1;var e=cn(),t=kE();xh=o;var n=e.constant(1);function o(s,u,c,p){return a(s,String(u),c||n,p||function(_){return s.outEdges(_)})}function a(s,u,c,p){var _={},h=new t,f,y,v=function(w){var k=w.v!==f?w.v:w.w,x=_[k],q=c(w),E=y.distance+q;if(q<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+q);E<x.distance&&(x.distance=E,x.predecessor=f,h.decrease(k,E))};for(s.nodes().forEach(function(w){var k=w===u?0:Number.POSITIVE_INFINITY;_[w]={distance:k},h.add(w,k)});h.size()>0&&(f=h.removeMin(),y=_[f],y.distance!==Number.POSITIVE_INFINITY);)p(f).forEach(v);return _}return xh}var wh,Bq;function HF(){if(Bq)return wh;Bq=1;var e=CE(),t=cn();wh=n;function n(o,a,s){return t.transform(o.nodes(),function(u,c){u[c]=e(o,c,a,s)},{})}return wh}var bh,Hq;function ME(){if(Hq)return bh;Hq=1;var e=cn();bh=t;function t(n){var o=0,a=[],s={},u=[];function c(p){var _=s[p]={onStack:!0,lowlink:o,index:o++};if(a.push(p),n.successors(p).forEach(function(y){e.has(s,y)?s[y].onStack&&(_.lowlink=Math.min(_.lowlink,s[y].index)):(c(y),_.lowlink=Math.min(_.lowlink,s[y].lowlink))}),_.lowlink===_.index){var h=[],f;do f=a.pop(),s[f].onStack=!1,h.push(f);while(p!==f);u.push(h)}}return n.nodes().forEach(function(p){e.has(s,p)||c(p)}),u}return bh}var qh,$q;function $F(){if($q)return qh;$q=1;var e=cn(),t=ME();qh=n;function n(o){return e.filter(t(o),function(a){return a.length>1||a.length===1&&o.hasEdge(a[0],a[0])})}return qh}var Sh,Wq;function WF(){if(Wq)return Sh;Wq=1;var e=cn();Sh=n;var t=e.constant(1);function n(a,s,u){return o(a,s||t,u||function(c){return a.outEdges(c)})}function o(a,s,u){var c={},p=a.nodes();return p.forEach(function(_){c[_]={},c[_][_]={distance:0},p.forEach(function(h){_!==h&&(c[_][h]={distance:Number.POSITIVE_INFINITY})}),u(_).forEach(function(h){var f=h.v===_?h.w:h.v,y=s(h);c[_][f]={distance:y,predecessor:_}})}),p.forEach(function(_){var h=c[_];p.forEach(function(f){var y=c[f];p.forEach(function(v){var w=y[_],k=h[v],x=y[v],q=w.distance+k.distance;q<x.distance&&(x.distance=q,x.predecessor=k.predecessor)})})}),c}return Sh}var kh,Uq;function EE(){if(Uq)return kh;Uq=1;var e=cn();kh=t,t.CycleException=n;function t(o){var a={},s={},u=[];function c(p){if(e.has(s,p))throw new n;e.has(a,p)||(s[p]=!0,a[p]=!0,e.each(o.predecessors(p),c),delete s[p],u.push(p))}if(e.each(o.sinks(),c),e.size(a)!==o.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,kh}var Ch,Gq;function UF(){if(Gq)return Ch;Gq=1;var e=EE();Ch=t;function t(n){try{e(n)}catch(o){if(o instanceof e.CycleException)return!1;throw o}return!0}return Ch}var Mh,Kq;function IE(){if(Kq)return Mh;Kq=1;var e=cn();Mh=t;function t(o,a,s){e.isArray(a)||(a=[a]);var u=(o.isDirected()?o.successors:o.neighbors).bind(o),c=[],p={};return e.each(a,function(_){if(!o.hasNode(_))throw new Error("Graph does not have node: "+_);n(o,_,s==="post",p,u,c)}),c}function n(o,a,s,u,c,p){e.has(u,a)||(u[a]=!0,s||p.push(a),e.each(c(a),function(_){n(o,_,s,u,c,p)}),s&&p.push(a))}return Mh}var Eh,Yq;function GF(){if(Yq)return Eh;Yq=1;var e=IE();Eh=t;function t(n,o){return e(n,o,"post")}return Eh}var Ih,Qq;function KF(){if(Qq)return Ih;Qq=1;var e=IE();Ih=t;function t(n,o){return e(n,o,"pre")}return Ih}var jh,Xq;function YF(){if(Xq)return jh;Xq=1;var e=cn(),t=wg(),n=kE();jh=o;function o(a,s){var u=new t,c={},p=new n,_;function h(y){var v=y.v===_?y.w:y.v,w=p.priority(v);if(w!==void 0){var k=s(y);k<w&&(c[v]=_,p.decrease(v,k))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(y){p.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),p.decrease(a.nodes()[0],0);for(var f=!1;p.size()>0;){if(_=p.removeMin(),e.has(c,_))u.setEdge(_,c[_]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(_).forEach(h)}return u}return jh}var Nh,Zq;function QF(){return Zq||(Zq=1,Nh={components:BF(),dijkstra:CE(),dijkstraAll:HF(),findCycles:$F(),floydWarshall:WF(),isAcyclic:UF(),postorder:GF(),preorder:KF(),prim:YF(),tarjan:ME(),topsort:EE()}),Nh}var Th,Jq;function XF(){if(Jq)return Th;Jq=1;var e=VF();return Th={Graph:e.Graph,json:zF(),alg:QF(),version:e.version},Th}var Ph,eS;function An(){if(eS)return Ph;eS=1;var e;if(typeof og=="function")try{e=XF()}catch{}return e||(e=window.graphlib),Ph=e,Ph}var Rh,tS;function ZF(){if(tS)return Rh;tS=1;var e=eE(),t=1,n=4;function o(a){return e(a,t|n)}return Rh=o,Rh}var Ah,rS;function Ac(){if(rS)return Ah;rS=1;var e=Ra(),t=xi(),n=Cc(),o=ln();function a(s,u,c){if(!o(c))return!1;var p=typeof u;return(p=="number"?t(c)&&n(u,c.length):p=="string"&&u in c)?e(c[u],s):!1}return Ah=a,Ah}var Fh,nS;function JF(){if(nS)return Fh;nS=1;var e=Rc(),t=Ra(),n=Ac(),o=Vo(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(c,p){c=Object(c);var _=-1,h=p.length,f=h>2?p[2]:void 0;for(f&&n(p[0],p[1],f)&&(h=1);++_<h;)for(var y=p[_],v=o(y),w=-1,k=v.length;++w<k;){var x=v[w],q=c[x];(q===void 0||t(q,a[x])&&!s.call(c,x))&&(c[x]=y[x])}return c});return Fh=u,Fh}var Lh,iS;function eL(){if(iS)return Lh;iS=1;var e=wi(),t=xi(),n=Zi();function o(a){return function(s,u,c){var p=Object(s);if(!t(s)){var _=e(u,3);s=n(s),u=function(f){return _(p[f],f,p)}}var h=a(s,u,c);return h>-1?p[_?s[h]:h]:void 0}}return Lh=o,Lh}var Dh,oS;function tL(){if(oS)return Dh;oS=1;var e=/\s/;function t(n){for(var o=n.length;o--&&e.test(n.charAt(o)););return o}return Dh=t,Dh}var Oh,aS;function rL(){if(aS)return Oh;aS=1;var e=tL(),t=/^\s+/;function n(o){return o&&o.slice(0,e(o)+1).replace(t,"")}return Oh=n,Oh}var Vh,sS;function nL(){if(sS)return Vh;sS=1;var e=rL(),t=ln(),n=Da(),o=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function p(_){if(typeof _=="number")return _;if(n(_))return o;if(t(_)){var h=typeof _.valueOf=="function"?_.valueOf():_;_=t(h)?h+"":h}if(typeof _!="string")return _===0?_:+_;_=e(_);var f=s.test(_);return f||u.test(_)?c(_.slice(2),f?2:8):a.test(_)?o:+_}return Vh=p,Vh}var zh,uS;function jE(){if(uS)return zh;uS=1;var e=nL(),t=1/0,n=17976931348623157e292;function o(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return zh=o,zh}var Bh,lS;function iL(){if(lS)return Bh;lS=1;var e=jE();function t(n){var o=e(n),a=o%1;return o===o?a?o-a:o:0}return Bh=t,Bh}var Hh,cS;function oL(){if(cS)return Hh;cS=1;var e=bE(),t=wi(),n=iL(),o=Math.max;function a(s,u,c){var p=s==null?0:s.length;if(!p)return-1;var _=c==null?0:n(c);return _<0&&(_=o(p+_,0)),e(s,t(u,3),_)}return Hh=a,Hh}var $h,dS;function aL(){if(dS)return $h;dS=1;var e=eL(),t=oL(),n=e(t);return $h=n,$h}var Wh,pS;function NE(){if(pS)return Wh;pS=1;var e=xg();function t(n){var o=n==null?0:n.length;return o?e(n,1):[]}return Wh=t,Wh}var Uh,_S;function sL(){if(_S)return Uh;_S=1;var e=hg(),t=tE(),n=Vo();function o(a,s){return a==null?a:e(a,t(s),n)}return Uh=o,Uh}var Gh,fS;function uL(){if(fS)return Gh;fS=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Gh=e,Gh}var Kh,mS;function lL(){if(mS)return Kh;mS=1;var e=Sc(),t=yg(),n=wi();function o(a,s){var u={};return s=n(s,3),t(a,function(c,p,_){e(u,p,s(c,p,_))}),u}return Kh=o,Kh}var Yh,hS;function bg(){if(hS)return Yh;hS=1;var e=Da();function t(n,o,a){for(var s=-1,u=n.length;++s<u;){var c=n[s],p=o(c);if(p!=null&&(_===void 0?p===p&&!e(p):a(p,_)))var _=p,h=c}return h}return Yh=t,Yh}var Qh,yS;function cL(){if(yS)return Qh;yS=1;function e(t,n){return t>n}return Qh=e,Qh}var Xh,gS;function dL(){if(gS)return Xh;gS=1;var e=bg(),t=cL(),n=zo();function o(a){return a&&a.length?e(a,n,t):void 0}return Xh=o,Xh}var Zh,vS;function TE(){if(vS)return Zh;vS=1;var e=Sc(),t=Ra();function n(o,a,s){(s!==void 0&&!t(o[a],s)||s===void 0&&!(a in o))&&e(o,a,s)}return Zh=n,Zh}var Jh,xS;function pL(){if(xS)return Jh;xS=1;var e=Do(),t=Ic(),n=Jn(),o="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,p=u.call(Object);function _(h){if(!n(h)||e(h)!=o)return!1;var f=t(h);if(f===null)return!0;var y=c.call(f,"constructor")&&f.constructor;return typeof y=="function"&&y instanceof y&&u.call(y)==p}return Jh=_,Jh}var ey,wS;function PE(){if(wS)return ey;wS=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return ey=e,ey}var ty,bS;function _L(){if(bS)return ty;bS=1;var e=su(),t=Vo();function n(o){return e(o,t(o))}return ty=n,ty}var ry,qS;function fL(){if(qS)return ry;qS=1;var e=TE(),t=BM(),n=XM(),o=HM(),a=JM(),s=uu(),u=Dt(),c=qE(),p=Fa(),_=au(),h=ln(),f=pL(),y=lu(),v=PE(),w=_L();function k(x,q,E,b,M,j,C){var N=v(x,E),A=v(q,E),P=C.get(A);if(P){e(x,E,P);return}var z=j?j(N,A,E+"",x,q,C):void 0,F=z===void 0;if(F){var D=u(A),Z=!D&&p(A),T=!D&&!Z&&y(A);z=A,D||Z||T?u(N)?z=N:c(N)?z=o(N):Z?(F=!1,z=t(A,!0)):T?(F=!1,z=n(A,!0)):z=[]:f(A)||s(A)?(z=N,s(N)?z=w(N):(!h(N)||_(N))&&(z=a(A))):F=!1}F&&(C.set(A,z),M(z,A,b,j,C),C.delete(A)),e(x,E,z)}return ry=k,ry}var ny,SS;function mL(){if(SS)return ny;SS=1;var e=qc(),t=TE(),n=hg(),o=fL(),a=ln(),s=Vo(),u=PE();function c(p,_,h,f,y){p!==_&&n(_,function(v,w){if(y||(y=new e),a(v))o(p,_,w,h,c,f,y);else{var k=f?f(u(p,w),v,w+"",p,_,y):void 0;k===void 0&&(k=v),t(p,w,k)}},s)}return ny=c,ny}var iy,kS;function hL(){if(kS)return iy;kS=1;var e=Rc(),t=Ac();function n(o){return e(function(a,s){var u=-1,c=s.length,p=c>1?s[c-1]:void 0,_=c>2?s[2]:void 0;for(p=o.length>3&&typeof p=="function"?(c--,p):void 0,_&&t(s[0],s[1],_)&&(p=c<3?void 0:p,c=1),a=Object(a);++u<c;){var h=s[u];h&&o(a,h,u,p)}return a})}return iy=n,iy}var oy,CS;function yL(){if(CS)return oy;CS=1;var e=mL(),t=hL(),n=t(function(o,a,s){e(o,a,s)});return oy=n,oy}var ay,MS;function RE(){if(MS)return ay;MS=1;function e(t,n){return t<n}return ay=e,ay}var sy,ES;function gL(){if(ES)return sy;ES=1;var e=bg(),t=RE(),n=zo();function o(a){return a&&a.length?e(a,n,t):void 0}return sy=o,sy}var uy,IS;function vL(){if(IS)return uy;IS=1;var e=bg(),t=wi(),n=RE();function o(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return uy=o,uy}var ly,jS;function xL(){if(jS)return ly;jS=1;var e=Ln(),t=function(){return e.Date.now()};return ly=t,ly}var cy,NS;function wL(){if(NS)return cy;NS=1;var e=kc(),t=Tc(),n=Cc(),o=ln(),a=cu();function s(u,c,p,_){if(!o(u))return u;c=t(c,u);for(var h=-1,f=c.length,y=f-1,v=u;v!=null&&++h<f;){var w=a(c[h]),k=p;if(w==="__proto__"||w==="constructor"||w==="prototype")return u;if(h!=y){var x=v[w];k=_?_(x,w,v):void 0,k===void 0&&(k=o(x)?x:n(c[h+1])?[]:{})}e(v,w,k),v=v[w]}return u}return cy=s,cy}var dy,TS;function bL(){if(TS)return dy;TS=1;var e=Pc(),t=wL(),n=Tc();function o(a,s,u){for(var c=-1,p=s.length,_={};++c<p;){var h=s[c],f=e(a,h);u(f,h)&&t(_,n(h,a),f)}return _}return dy=o,dy}var py,PS;function qL(){if(PS)return py;PS=1;var e=bL(),t=pE();function n(o,a){return e(o,a,function(s,u){return t(o,u)})}return py=n,py}var _y,RS;function SL(){if(RS)return _y;RS=1;var e=NE(),t=xE(),n=wE();function o(a){return n(t(a,void 0,e),a+"")}return _y=o,_y}var fy,AS;function kL(){if(AS)return fy;AS=1;var e=qL(),t=SL(),n=t(function(o,a){return o==null?{}:e(o,a)});return fy=n,fy}var my,FS;function CL(){if(FS)return my;FS=1;var e=Math.ceil,t=Math.max;function n(o,a,s,u){for(var c=-1,p=t(e((a-o)/(s||1)),0),_=Array(p);p--;)_[u?p:++c]=o,o+=s;return _}return my=n,my}var hy,LS;function ML(){if(LS)return hy;LS=1;var e=CL(),t=Ac(),n=jE();function o(a){return function(s,u,c){return c&&typeof c!="number"&&t(s,u,c)&&(u=c=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),c=c===void 0?s<u?1:-1:n(c),e(s,u,c,a)}}return hy=o,hy}var yy,DS;function EL(){if(DS)return yy;DS=1;var e=ML(),t=e();return yy=t,yy}var gy,OS;function IL(){if(OS)return gy;OS=1;function e(t,n){var o=t.length;for(t.sort(n);o--;)t[o]=t[o].value;return t}return gy=e,gy}var vy,VS;function jL(){if(VS)return vy;VS=1;var e=Da();function t(n,o){if(n!==o){var a=n!==void 0,s=n===null,u=n===n,c=e(n),p=o!==void 0,_=o===null,h=o===o,f=e(o);if(!_&&!f&&!c&&n>o||c&&p&&h&&!_&&!f||s&&p&&h||!a&&h||!u)return 1;if(!s&&!c&&!f&&n<o||f&&a&&u&&!s&&!c||_&&a&&u||!p&&u||!h)return-1}return 0}return vy=t,vy}var xy,zS;function NL(){if(zS)return xy;zS=1;var e=jL();function t(n,o,a){for(var s=-1,u=n.criteria,c=o.criteria,p=u.length,_=a.length;++s<p;){var h=e(u[s],c[s]);if(h){if(s>=_)return h;var f=a[s];return h*(f=="desc"?-1:1)}}return n.index-o.index}return xy=t,xy}var wy,BS;function TL(){if(BS)return wy;BS=1;var e=Nc(),t=Pc(),n=wi(),o=yE(),a=IL(),s=Mc(),u=NL(),c=zo(),p=Dt();function _(h,f,y){f.length?f=e(f,function(k){return p(k)?function(x){return t(x,k.length===1?k[0]:k)}:k}):f=[c];var v=-1;f=e(f,s(n));var w=o(h,function(k,x,q){var E=e(f,function(b){return b(k)});return{criteria:E,index:++v,value:k}});return a(w,function(k,x){return u(k,x,y)})}return wy=_,wy}var by,HS;function PL(){if(HS)return by;HS=1;var e=xg(),t=TL(),n=Rc(),o=Ac(),a=n(function(s,u){if(s==null)return[];var c=u.length;return c>1&&o(s,u[0],u[1])?u=[]:c>2&&o(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return by=a,by}var qy,$S;function RL(){if($S)return qy;$S=1;var e=cE(),t=0;function n(o){var a=++t;return e(o)+a}return qy=n,qy}var Sy,WS;function AL(){if(WS)return Sy;WS=1;function e(t,n,o){for(var a=-1,s=t.length,u=n.length,c={};++a<s;){var p=a<u?n[a]:void 0;o(c,t[a],p)}return c}return Sy=e,Sy}var ky,US;function FL(){if(US)return ky;US=1;var e=kc(),t=AL();function n(o,a){return t(o||[],a||[],e)}return ky=n,ky}var Cy,GS;function wt(){if(GS)return Cy;GS=1;var e;if(typeof og=="function")try{e={cloneDeep:ZF(),constant:mg(),defaults:JF(),each:nE(),filter:fE(),find:aL(),flatten:NE(),forEach:rE(),forIn:sL(),has:mE(),isUndefined:hE(),last:uL(),map:gE(),mapValues:lL(),max:dL(),merge:yL(),min:gL(),minBy:vL(),now:xL(),pick:kL(),range:EL(),reduce:vE(),sortBy:PL(),uniqueId:RL(),values:SE(),zipObject:FL()}}catch{}return e||(e=window._),Cy=e,Cy}var My,KS;function LL(){if(KS)return My;KS=1,My=e;function e(){var o={};o._next=o._prev=o,this._sentinel=o}e.prototype.dequeue=function(){var o=this._sentinel,a=o._prev;if(a!==o)return t(a),a},e.prototype.enqueue=function(o){var a=this._sentinel;o._prev&&o._next&&t(o),o._next=a._next,a._next._prev=o,a._next=o,o._prev=a},e.prototype.toString=function(){for(var o=[],a=this._sentinel,s=a._prev;s!==a;)o.push(JSON.stringify(s,n)),s=s._prev;return"["+o.join(", ")+"]"};function t(o){o._prev._next=o._next,o._next._prev=o._prev,delete o._next,delete o._prev}function n(o,a){if(o!=="_next"&&o!=="_prev")return a}return My}var Ey,YS;function DL(){if(YS)return Ey;YS=1;var e=wt(),t=An().Graph,n=LL();Ey=a;var o=e.constant(1);function a(_,h){if(_.nodeCount()<=1)return[];var f=c(_,h||o),y=s(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(y,function(v){return _.outEdges(v.v,v.w)}),!0)}function s(_,h,f){for(var y=[],v=h[h.length-1],w=h[0],k;_.nodeCount();){for(;k=w.dequeue();)u(_,h,f,k);for(;k=v.dequeue();)u(_,h,f,k);if(_.nodeCount()){for(var x=h.length-2;x>0;--x)if(k=h[x].dequeue(),k){y=y.concat(u(_,h,f,k,!0));break}}}return y}function u(_,h,f,y,v){var w=v?[]:void 0;return e.forEach(_.inEdges(y.v),function(k){var x=_.edge(k),q=_.node(k.v);v&&w.push({v:k.v,w:k.w}),q.out-=x,p(h,f,q)}),e.forEach(_.outEdges(y.v),function(k){var x=_.edge(k),q=k.w,E=_.node(q);E.in-=x,p(h,f,E)}),_.removeNode(y.v),w}function c(_,h){var f=new t,y=0,v=0;e.forEach(_.nodes(),function(x){f.setNode(x,{v:x,in:0,out:0})}),e.forEach(_.edges(),function(x){var q=f.edge(x.v,x.w)||0,E=h(x),b=q+E;f.setEdge(x.v,x.w,b),v=Math.max(v,f.node(x.v).out+=E),y=Math.max(y,f.node(x.w).in+=E)});var w=e.range(v+y+3).map(function(){return new n}),k=y+1;return e.forEach(f.nodes(),function(x){p(w,k,f.node(x))}),{graph:f,buckets:w,zeroIdx:k}}function p(_,h,f){f.out?f.in?_[f.out-f.in+h].enqueue(f):_[_.length-1].enqueue(f):_[0].enqueue(f)}return Ey}var Iy,QS;function OL(){if(QS)return Iy;QS=1;var e=wt(),t=DL();Iy={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,c(s)):o(s);e.forEach(u,function(p){var _=s.edge(p);s.removeEdge(p),_.forwardName=p.name,_.reversed=!0,s.setEdge(p.w,p.v,_,e.uniqueId("rev"))});function c(p){return function(_){return p.edge(_).weight}}}function o(s){var u=[],c={},p={};function _(h){e.has(p,h)||(p[h]=!0,c[h]=!0,e.forEach(s.outEdges(h),function(f){e.has(c,f.w)?u.push(f):_(f.w)}),delete c[h])}return e.forEach(s.nodes(),_),u}function a(s){e.forEach(s.edges(),function(u){var c=s.edge(u);if(c.reversed){s.removeEdge(u);var p=c.forwardName;delete c.reversed,delete c.forwardName,s.setEdge(u.w,u.v,c,p)}})}return Iy}var jy,XS;function Fr(){if(XS)return jy;XS=1;var e=wt(),t=An().Graph;jy={addDummyNode:n,simplify:o,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:c,buildLayerMatrix:p,normalizeRanks:_,removeEmptyRanks:h,addBorderNode:f,maxRank:y,partition:v,time:w,notime:k};function n(x,q,E,b){var M;do M=e.uniqueId(b);while(x.hasNode(M));return E.dummy=q,x.setNode(M,E),M}function o(x){var q=new t().setGraph(x.graph());return e.forEach(x.nodes(),function(E){q.setNode(E,x.node(E))}),e.forEach(x.edges(),function(E){var b=q.edge(E.v,E.w)||{weight:0,minlen:1},M=x.edge(E);q.setEdge(E.v,E.w,{weight:b.weight+M.weight,minlen:Math.max(b.minlen,M.minlen)})}),q}function a(x){var q=new t({multigraph:x.isMultigraph()}).setGraph(x.graph());return e.forEach(x.nodes(),function(E){x.children(E).length||q.setNode(E,x.node(E))}),e.forEach(x.edges(),function(E){q.setEdge(E,x.edge(E))}),q}function s(x){var q=e.map(x.nodes(),function(E){var b={};return e.forEach(x.outEdges(E),function(M){b[M.w]=(b[M.w]||0)+x.edge(M).weight}),b});return e.zipObject(x.nodes(),q)}function u(x){var q=e.map(x.nodes(),function(E){var b={};return e.forEach(x.inEdges(E),function(M){b[M.v]=(b[M.v]||0)+x.edge(M).weight}),b});return e.zipObject(x.nodes(),q)}function c(x,q){var E=x.x,b=x.y,M=q.x-E,j=q.y-b,C=x.width/2,N=x.height/2;if(!M&&!j)throw new Error("Not possible to find intersection inside of the rectangle");var A,P;return Math.abs(j)*C>Math.abs(M)*N?(j<0&&(N=-N),A=N*M/j,P=N):(M<0&&(C=-C),A=C,P=C*j/M),{x:E+A,y:b+P}}function p(x){var q=e.map(e.range(y(x)+1),function(){return[]});return e.forEach(x.nodes(),function(E){var b=x.node(E),M=b.rank;e.isUndefined(M)||(q[M][b.order]=E)}),q}function _(x){var q=e.min(e.map(x.nodes(),function(E){return x.node(E).rank}));e.forEach(x.nodes(),function(E){var b=x.node(E);e.has(b,"rank")&&(b.rank-=q)})}function h(x){var q=e.min(e.map(x.nodes(),function(j){return x.node(j).rank})),E=[];e.forEach(x.nodes(),function(j){var C=x.node(j).rank-q;E[C]||(E[C]=[]),E[C].push(j)});var b=0,M=x.graph().nodeRankFactor;e.forEach(E,function(j,C){e.isUndefined(j)&&C%M!==0?--b:b&&e.forEach(j,function(N){x.node(N).rank+=b})})}function f(x,q,E,b){var M={width:0,height:0};return arguments.length>=4&&(M.rank=E,M.order=b),n(x,"border",M,q)}function y(x){return e.max(e.map(x.nodes(),function(q){var E=x.node(q).rank;if(!e.isUndefined(E))return E}))}function v(x,q){var E={lhs:[],rhs:[]};return e.forEach(x,function(b){q(b)?E.lhs.push(b):E.rhs.push(b)}),E}function w(x,q){var E=e.now();try{return q()}finally{console.log(x+" time: "+(e.now()-E)+"ms")}}function k(x,q){return q()}return jy}var Ny,ZS;function VL(){if(ZS)return Ny;ZS=1;var e=wt(),t=Fr();Ny={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){o(s,u)})}function o(s,u){var c=u.v,p=s.node(c).rank,_=u.w,h=s.node(_).rank,f=u.name,y=s.edge(u),v=y.labelRank;if(h!==p+1){s.removeEdge(u);var w,k,x;for(x=0,++p;p<h;++x,++p)y.points=[],k={width:0,height:0,edgeLabel:y,edgeObj:u,rank:p},w=t.addDummyNode(s,"edge",k,"_d"),p===v&&(k.width=y.width,k.height=y.height,k.dummy="edge-label",k.labelpos=y.labelpos),s.setEdge(c,w,{weight:y.weight},f),x===0&&s.graph().dummyChains.push(w),c=w;s.setEdge(c,_,{weight:y.weight},f)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var c=s.node(u),p=c.edgeLabel,_;for(s.setEdge(c.edgeObj,p);c.dummy;)_=s.successors(u)[0],s.removeNode(u),p.points.push({x:c.x,y:c.y}),c.dummy==="edge-label"&&(p.x=c.x,p.y=c.y,p.width=c.width,p.height=c.height),u=_,c=s.node(u)})}return Ny}var Ty,JS;function ac(){if(JS)return Ty;JS=1;var e=wt();Ty={longestPath:t,slack:n};function t(o){var a={};function s(u){var c=o.node(u);if(e.has(a,u))return c.rank;a[u]=!0;var p=e.min(e.map(o.outEdges(u),function(_){return s(_.w)-o.edge(_).minlen}));return(p===Number.POSITIVE_INFINITY||p===void 0||p===null)&&(p=0),c.rank=p}e.forEach(o.sources(),s)}function n(o,a){return o.node(a.w).rank-o.node(a.v).rank-o.edge(a).minlen}return Ty}var Py,ek;function AE(){if(ek)return Py;ek=1;var e=wt(),t=An().Graph,n=ac().slack;Py=o;function o(c){var p=new t({directed:!1}),_=c.nodes()[0],h=c.nodeCount();p.setNode(_,{});for(var f,y;a(p,c)<h;)f=s(p,c),y=p.hasNode(f.v)?n(c,f):-n(c,f),u(p,c,y);return p}function a(c,p){function _(h){e.forEach(p.nodeEdges(h),function(f){var y=f.v,v=h===y?f.w:y;!c.hasNode(v)&&!n(p,f)&&(c.setNode(v,{}),c.setEdge(h,v,{}),_(v))})}return e.forEach(c.nodes(),_),c.nodeCount()}function s(c,p){return e.minBy(p.edges(),function(_){if(c.hasNode(_.v)!==c.hasNode(_.w))return n(p,_)})}function u(c,p,_){e.forEach(c.nodes(),function(h){p.node(h).rank+=_})}return Py}var Ry,tk;function zL(){if(tk)return Ry;tk=1;var e=wt(),t=AE(),n=ac().slack,o=ac().longestPath,a=An().alg.preorder,s=An().alg.postorder,u=Fr().simplify;Ry=c,c.initLowLimValues=f,c.initCutValues=p,c.calcCutValue=h,c.leaveEdge=v,c.enterEdge=w,c.exchangeEdges=k;function c(b){b=u(b),o(b);var M=t(b);f(M),p(M,b);for(var j,C;j=v(M);)C=w(M,b,j),k(M,b,j,C)}function p(b,M){var j=s(b,b.nodes());j=j.slice(0,j.length-1),e.forEach(j,function(C){_(b,M,C)})}function _(b,M,j){var C=b.node(j),N=C.parent;b.edge(j,N).cutvalue=h(b,M,j)}function h(b,M,j){var C=b.node(j),N=C.parent,A=!0,P=M.edge(j,N),z=0;return P||(A=!1,P=M.edge(N,j)),z=P.weight,e.forEach(M.nodeEdges(j),function(F){var D=F.v===j,Z=D?F.w:F.v;if(Z!==N){var T=D===A,K=M.edge(F).weight;if(z+=T?K:-K,q(b,j,Z)){var U=b.edge(j,Z).cutvalue;z+=T?-U:U}}}),z}function f(b,M){arguments.length<2&&(M=b.nodes()[0]),y(b,{},1,M)}function y(b,M,j,C,N){var A=j,P=b.node(C);return M[C]=!0,e.forEach(b.neighbors(C),function(z){e.has(M,z)||(j=y(b,M,j,z,C))}),P.low=A,P.lim=j++,N?P.parent=N:delete P.parent,j}function v(b){return e.find(b.edges(),function(M){return b.edge(M).cutvalue<0})}function w(b,M,j){var C=j.v,N=j.w;M.hasEdge(C,N)||(C=j.w,N=j.v);var A=b.node(C),P=b.node(N),z=A,F=!1;A.lim>P.lim&&(z=P,F=!0);var D=e.filter(M.edges(),function(Z){return F===E(b,b.node(Z.v),z)&&F!==E(b,b.node(Z.w),z)});return e.minBy(D,function(Z){return n(M,Z)})}function k(b,M,j,C){var N=j.v,A=j.w;b.removeEdge(N,A),b.setEdge(C.v,C.w,{}),f(b),p(b,M),x(b,M)}function x(b,M){var j=e.find(b.nodes(),function(N){return!M.node(N).parent}),C=a(b,j);C=C.slice(1),e.forEach(C,function(N){var A=b.node(N).parent,P=M.edge(N,A),z=!1;P||(P=M.edge(A,N),z=!0),M.node(N).rank=M.node(A).rank+(z?P.minlen:-P.minlen)})}function q(b,M,j){return b.hasEdge(M,j)}function E(b,M,j){return j.low<=M.lim&&M.lim<=j.lim}return Ry}var Ay,rk;function BL(){if(rk)return Ay;rk=1;var e=ac(),t=e.longestPath,n=AE(),o=zL();Ay=a;function a(p){switch(p.graph().ranker){case"network-simplex":c(p);break;case"tight-tree":u(p);break;case"longest-path":s(p);break;default:c(p)}}var s=t;function u(p){t(p),n(p)}function c(p){o(p)}return Ay}var Fy,nk;function HL(){if(nk)return Fy;nk=1;var e=wt();Fy=t;function t(a){var s=o(a);e.forEach(a.graph().dummyChains,function(u){for(var c=a.node(u),p=c.edgeObj,_=n(a,s,p.v,p.w),h=_.path,f=_.lca,y=0,v=h[y],w=!0;u!==p.w;){if(c=a.node(u),w){for(;(v=h[y])!==f&&a.node(v).maxRank<c.rank;)y++;v===f&&(w=!1)}if(!w){for(;y<h.length-1&&a.node(v=h[y+1]).minRank<=c.rank;)y++;v=h[y]}a.setParent(u,v),u=a.successors(u)[0]}})}function n(a,s,u,c){var p=[],_=[],h=Math.min(s[u].low,s[c].low),f=Math.max(s[u].lim,s[c].lim),y,v;y=u;do y=a.parent(y),p.push(y);while(y&&(s[y].low>h||f>s[y].lim));for(v=y,y=c;(y=a.parent(y))!==v;)_.push(y);return{path:p.concat(_.reverse()),lca:v}}function o(a){var s={},u=0;function c(p){var _=u;e.forEach(a.children(p),c),s[p]={low:_,lim:u++}}return e.forEach(a.children(),c),s}return Fy}var Ly,ik;function $L(){if(ik)return Ly;ik=1;var e=wt(),t=Fr();Ly={run:n,cleanup:u};function n(c){var p=t.addDummyNode(c,"root",{},"_root"),_=a(c),h=e.max(e.values(_))-1,f=2*h+1;c.graph().nestingRoot=p,e.forEach(c.edges(),function(v){c.edge(v).minlen*=f});var y=s(c)+1;e.forEach(c.children(),function(v){o(c,p,f,y,h,_,v)}),c.graph().nodeRankFactor=f}function o(c,p,_,h,f,y,v){var w=c.children(v);if(!w.length){v!==p&&c.setEdge(p,v,{weight:0,minlen:_});return}var k=t.addBorderNode(c,"_bt"),x=t.addBorderNode(c,"_bb"),q=c.node(v);c.setParent(k,v),q.borderTop=k,c.setParent(x,v),q.borderBottom=x,e.forEach(w,function(E){o(c,p,_,h,f,y,E);var b=c.node(E),M=b.borderTop?b.borderTop:E,j=b.borderBottom?b.borderBottom:E,C=b.borderTop?h:2*h,N=M!==j?1:f-y[v]+1;c.setEdge(k,M,{weight:C,minlen:N,nestingEdge:!0}),c.setEdge(j,x,{weight:C,minlen:N,nestingEdge:!0})}),c.parent(v)||c.setEdge(p,k,{weight:0,minlen:f+y[v]})}function a(c){var p={};function _(h,f){var y=c.children(h);y&&y.length&&e.forEach(y,function(v){_(v,f+1)}),p[h]=f}return e.forEach(c.children(),function(h){_(h,1)}),p}function s(c){return e.reduce(c.edges(),function(p,_){return p+c.edge(_).weight},0)}function u(c){var p=c.graph();c.removeNode(p.nestingRoot),delete p.nestingRoot,e.forEach(c.edges(),function(_){var h=c.edge(_);h.nestingEdge&&c.removeEdge(_)})}return Ly}var Dy,ok;function WL(){if(ok)return Dy;ok=1;var e=wt(),t=Fr();Dy=n;function n(a){function s(u){var c=a.children(u),p=a.node(u);if(c.length&&e.forEach(c,s),e.has(p,"minRank")){p.borderLeft=[],p.borderRight=[];for(var _=p.minRank,h=p.maxRank+1;_<h;++_)o(a,"borderLeft","_bl",u,p,_),o(a,"borderRight","_br",u,p,_)}}e.forEach(a.children(),s)}function o(a,s,u,c,p,_){var h={width:0,height:0,rank:_,borderType:s},f=p[s][_-1],y=t.addDummyNode(a,"border",h,u);p[s][_]=y,a.setParent(y,c),f&&a.setEdge(f,y,{weight:1})}return Dy}var Oy,ak;function UL(){if(ak)return Oy;ak=1;var e=wt();Oy={adjust:t,undo:n};function t(_){var h=_.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&o(_)}function n(_){var h=_.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(_),(h==="lr"||h==="rl")&&(c(_),o(_))}function o(_){e.forEach(_.nodes(),function(h){a(_.node(h))}),e.forEach(_.edges(),function(h){a(_.edge(h))})}function a(_){var h=_.width;_.width=_.height,_.height=h}function s(_){e.forEach(_.nodes(),function(h){u(_.node(h))}),e.forEach(_.edges(),function(h){var f=_.edge(h);e.forEach(f.points,u),e.has(f,"y")&&u(f)})}function u(_){_.y=-_.y}function c(_){e.forEach(_.nodes(),function(h){p(_.node(h))}),e.forEach(_.edges(),function(h){var f=_.edge(h);e.forEach(f.points,p),e.has(f,"x")&&p(f)})}function p(_){var h=_.x;_.x=_.y,_.y=h}return Oy}var Vy,sk;function GL(){if(sk)return Vy;sk=1;var e=wt();Vy=t;function t(n){var o={},a=e.filter(n.nodes(),function(_){return!n.children(_).length}),s=e.max(e.map(a,function(_){return n.node(_).rank})),u=e.map(e.range(s+1),function(){return[]});function c(_){if(!e.has(o,_)){o[_]=!0;var h=n.node(_);u[h.rank].push(_),e.forEach(n.successors(_),c)}}var p=e.sortBy(a,function(_){return n.node(_).rank});return e.forEach(p,c),u}return Vy}var zy,uk;function KL(){if(uk)return zy;uk=1;var e=wt();zy=t;function t(o,a){for(var s=0,u=1;u<a.length;++u)s+=n(o,a[u-1],a[u]);return s}function n(o,a,s){for(var u=e.zipObject(s,e.map(s,function(y,v){return v})),c=e.flatten(e.map(a,function(y){return e.sortBy(e.map(o.outEdges(y),function(v){return{pos:u[v.w],weight:o.edge(v).weight}}),"pos")}),!0),p=1;p<s.length;)p<<=1;var _=2*p-1;p-=1;var h=e.map(new Array(_),function(){return 0}),f=0;return e.forEach(c.forEach(function(y){var v=y.pos+p;h[v]+=y.weight;for(var w=0;v>0;)v%2&&(w+=h[v+1]),v=v-1>>1,h[v]+=y.weight;f+=y.weight*w})),f}return zy}var By,lk;function YL(){if(lk)return By;lk=1;var e=wt();By=t;function t(n,o){return e.map(o,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(c,p){var _=n.edge(p),h=n.node(p.v);return{sum:c.sum+_.weight*h.order,weight:c.weight+_.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return By}var Hy,ck;function QL(){if(ck)return Hy;ck=1;var e=wt();Hy=t;function t(a,s){var u={};e.forEach(a,function(p,_){var h=u[p.v]={indegree:0,in:[],out:[],vs:[p.v],i:_};e.isUndefined(p.barycenter)||(h.barycenter=p.barycenter,h.weight=p.weight)}),e.forEach(s.edges(),function(p){var _=u[p.v],h=u[p.w];!e.isUndefined(_)&&!e.isUndefined(h)&&(h.indegree++,_.out.push(u[p.w]))});var c=e.filter(u,function(p){return!p.indegree});return n(c)}function n(a){var s=[];function u(_){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(_.barycenter)||h.barycenter>=_.barycenter)&&o(_,h)}}function c(_){return function(h){h.in.push(_),--h.indegree===0&&a.push(h)}}for(;a.length;){var p=a.pop();s.push(p),e.forEach(p.in.reverse(),u(p)),e.forEach(p.out,c(p))}return e.map(e.filter(s,function(_){return!_.merged}),function(_){return e.pick(_,["vs","i","barycenter","weight"])})}function o(a,s){var u=0,c=0;a.weight&&(u+=a.barycenter*a.weight,c+=a.weight),s.weight&&(u+=s.barycenter*s.weight,c+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/c,a.weight=c,a.i=Math.min(s.i,a.i),s.merged=!0}return Hy}var $y,dk;function XL(){if(dk)return $y;dk=1;var e=wt(),t=Fr();$y=n;function n(s,u){var c=t.partition(s,function(k){return e.has(k,"barycenter")}),p=c.lhs,_=e.sortBy(c.rhs,function(k){return-k.i}),h=[],f=0,y=0,v=0;p.sort(a(!!u)),v=o(h,_,v),e.forEach(p,function(k){v+=k.vs.length,h.push(k.vs),f+=k.barycenter*k.weight,y+=k.weight,v=o(h,_,v)});var w={vs:e.flatten(h,!0)};return y&&(w.barycenter=f/y,w.weight=y),w}function o(s,u,c){for(var p;u.length&&(p=e.last(u)).i<=c;)u.pop(),s.push(p.vs),c++;return c}function a(s){return function(u,c){return u.barycenter<c.barycenter?-1:u.barycenter>c.barycenter?1:s?c.i-u.i:u.i-c.i}}return $y}var Wy,pk;function ZL(){if(pk)return Wy;pk=1;var e=wt(),t=YL(),n=QL(),o=XL();Wy=a;function a(c,p,_,h){var f=c.children(p),y=c.node(p),v=y?y.borderLeft:void 0,w=y?y.borderRight:void 0,k={};v&&(f=e.filter(f,function(j){return j!==v&&j!==w}));var x=t(c,f);e.forEach(x,function(j){if(c.children(j.v).length){var C=a(c,j.v,_,h);k[j.v]=C,e.has(C,"barycenter")&&u(j,C)}});var q=n(x,_);s(q,k);var E=o(q,h);if(v&&(E.vs=e.flatten([v,E.vs,w],!0),c.predecessors(v).length)){var b=c.node(c.predecessors(v)[0]),M=c.node(c.predecessors(w)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+b.order+M.order)/(E.weight+2),E.weight+=2}return E}function s(c,p){e.forEach(c,function(_){_.vs=e.flatten(_.vs.map(function(h){return p[h]?p[h].vs:h}),!0)})}function u(c,p){e.isUndefined(c.barycenter)?(c.barycenter=p.barycenter,c.weight=p.weight):(c.barycenter=(c.barycenter*c.weight+p.barycenter*p.weight)/(c.weight+p.weight),c.weight+=p.weight)}return Wy}var Uy,_k;function JL(){if(_k)return Uy;_k=1;var e=wt(),t=An().Graph;Uy=n;function n(a,s,u){var c=o(a),p=new t({compound:!0}).setGraph({root:c}).setDefaultNodeLabel(function(_){return a.node(_)});return e.forEach(a.nodes(),function(_){var h=a.node(_),f=a.parent(_);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(p.setNode(_),p.setParent(_,f||c),e.forEach(a[u](_),function(y){var v=y.v===_?y.w:y.v,w=p.edge(v,_),k=e.isUndefined(w)?0:w.weight;p.setEdge(v,_,{weight:a.edge(y).weight+k})}),e.has(h,"minRank")&&p.setNode(_,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),p}function o(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return Uy}var Gy,fk;function e8(){if(fk)return Gy;fk=1;var e=wt();Gy=t;function t(n,o,a){var s={},u;e.forEach(a,function(c){for(var p=n.parent(c),_,h;p;){if(_=n.parent(p),_?(h=s[_],s[_]=p):(h=u,u=p),h&&h!==p){o.setEdge(h,p);return}p=_}})}return Gy}var Ky,mk;function t8(){if(mk)return Ky;mk=1;var e=wt(),t=GL(),n=KL(),o=ZL(),a=JL(),s=e8(),u=An().Graph,c=Fr();Ky=p;function p(y){var v=c.maxRank(y),w=_(y,e.range(1,v+1),"inEdges"),k=_(y,e.range(v-1,-1,-1),"outEdges"),x=t(y);f(y,x);for(var q=Number.POSITIVE_INFINITY,E,b=0,M=0;M<4;++b,++M){h(b%2?w:k,b%4>=2),x=c.buildLayerMatrix(y);var j=n(y,x);j<q&&(M=0,E=e.cloneDeep(x),q=j)}f(y,E)}function _(y,v,w){return e.map(v,function(k){return a(y,k,w)})}function h(y,v){var w=new u;e.forEach(y,function(k){var x=k.graph().root,q=o(k,x,w,v);e.forEach(q.vs,function(E,b){k.node(E).order=b}),s(k,w,q.vs)})}function f(y,v){e.forEach(v,function(w){e.forEach(w,function(k,x){y.node(k).order=x})})}return Ky}var Yy,hk;function r8(){if(hk)return Yy;hk=1;var e=wt(),t=An().Graph,n=Fr();Yy={positionX:w,findType1Conflicts:o,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:p,horizontalCompaction:_,alignCoordinates:y,findSmallestWidthAlignment:f,balance:v};function o(q,E){var b={};function M(j,C){var N=0,A=0,P=j.length,z=e.last(C);return e.forEach(C,function(F,D){var Z=s(q,F),T=Z?q.node(Z).order:P;(Z||F===z)&&(e.forEach(C.slice(A,D+1),function(K){e.forEach(q.predecessors(K),function(U){var ne=q.node(U),Y=ne.order;(Y<N||T<Y)&&!(ne.dummy&&q.node(K).dummy)&&u(b,U,K)})}),A=D+1,N=T)}),C}return e.reduce(E,M),b}function a(q,E){var b={};function M(C,N,A,P,z){var F;e.forEach(e.range(N,A),function(D){F=C[D],q.node(F).dummy&&e.forEach(q.predecessors(F),function(Z){var T=q.node(Z);T.dummy&&(T.order<P||T.order>z)&&u(b,Z,F)})})}function j(C,N){var A=-1,P,z=0;return e.forEach(N,function(F,D){if(q.node(F).dummy==="border"){var Z=q.predecessors(F);Z.length&&(P=q.node(Z[0]).order,M(N,z,D,A,P),z=D,A=P)}M(N,z,N.length,P,C.length)}),N}return e.reduce(E,j),b}function s(q,E){if(q.node(E).dummy)return e.find(q.predecessors(E),function(b){return q.node(b).dummy})}function u(q,E,b){if(E>b){var M=E;E=b,b=M}var j=q[E];j||(q[E]=j={}),j[b]=!0}function c(q,E,b){if(E>b){var M=E;E=b,b=M}return e.has(q[E],b)}function p(q,E,b,M){var j={},C={},N={};return e.forEach(E,function(A){e.forEach(A,function(P,z){j[P]=P,C[P]=P,N[P]=z})}),e.forEach(E,function(A){var P=-1;e.forEach(A,function(z){var F=M(z);if(F.length){F=e.sortBy(F,function(U){return N[U]});for(var D=(F.length-1)/2,Z=Math.floor(D),T=Math.ceil(D);Z<=T;++Z){var K=F[Z];C[z]===z&&P<N[K]&&!c(b,z,K)&&(C[K]=z,C[z]=j[z]=j[K],P=N[K])}}})}),{root:j,align:C}}function _(q,E,b,M,j){var C={},N=h(q,E,b,j),A=j?"borderLeft":"borderRight";function P(D,Z){for(var T=N.nodes(),K=T.pop(),U={};K;)U[K]?D(K):(U[K]=!0,T.push(K),T=T.concat(Z(K))),K=T.pop()}function z(D){C[D]=N.inEdges(D).reduce(function(Z,T){return Math.max(Z,C[T.v]+N.edge(T))},0)}function F(D){var Z=N.outEdges(D).reduce(function(K,U){return Math.min(K,C[U.w]-N.edge(U))},Number.POSITIVE_INFINITY),T=q.node(D);Z!==Number.POSITIVE_INFINITY&&T.borderType!==A&&(C[D]=Math.max(C[D],Z))}return P(z,N.predecessors.bind(N)),P(F,N.successors.bind(N)),e.forEach(M,function(D){C[D]=C[b[D]]}),C}function h(q,E,b,M){var j=new t,C=q.graph(),N=k(C.nodesep,C.edgesep,M);return e.forEach(E,function(A){var P;e.forEach(A,function(z){var F=b[z];if(j.setNode(F),P){var D=b[P],Z=j.edge(D,F);j.setEdge(D,F,Math.max(N(q,z,P),Z||0))}P=z})}),j}function f(q,E){return e.minBy(e.values(E),function(b){var M=Number.NEGATIVE_INFINITY,j=Number.POSITIVE_INFINITY;return e.forIn(b,function(C,N){var A=x(q,N)/2;M=Math.max(C+A,M),j=Math.min(C-A,j)}),M-j})}function y(q,E){var b=e.values(E),M=e.min(b),j=e.max(b);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(N){var A=C+N,P=q[A],z;if(P!==E){var F=e.values(P);z=N==="l"?M-e.min(F):j-e.max(F),z&&(q[A]=e.mapValues(P,function(D){return D+z}))}})})}function v(q,E){return e.mapValues(q.ul,function(b,M){if(E)return q[E.toLowerCase()][M];var j=e.sortBy(e.map(q,M));return(j[1]+j[2])/2})}function w(q){var E=n.buildLayerMatrix(q),b=e.merge(o(q,E),a(q,E)),M={},j;e.forEach(["u","d"],function(N){j=N==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(A){A==="r"&&(j=e.map(j,function(D){return e.values(D).reverse()}));var P=(N==="u"?q.predecessors:q.successors).bind(q),z=p(q,j,b,P),F=_(q,j,z.root,z.align,A==="r");A==="r"&&(F=e.mapValues(F,function(D){return-D})),M[N+A]=F})});var C=f(q,M);return y(M,C),v(M,q.graph().align)}function k(q,E,b){return function(M,j,C){var N=M.node(j),A=M.node(C),P=0,z;if(P+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":z=-N.width/2;break;case"r":z=N.width/2;break}if(z&&(P+=b?z:-z),z=0,P+=(N.dummy?E:q)/2,P+=(A.dummy?E:q)/2,P+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":z=A.width/2;break;case"r":z=-A.width/2;break}return z&&(P+=b?z:-z),z=0,P}}function x(q,E){return q.node(E).width}return Yy}var Qy,yk;function n8(){if(yk)return Qy;yk=1;var e=wt(),t=Fr(),n=r8().positionX;Qy=o;function o(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,c){s.node(c).x=u})}function a(s){var u=t.buildLayerMatrix(s),c=s.graph().ranksep,p=0;e.forEach(u,function(_){var h=e.max(e.map(_,function(f){return s.node(f).height}));e.forEach(_,function(f){s.node(f).y=p+h/2}),p+=h+c})}return Qy}var Xy,gk;function i8(){if(gk)return Xy;gk=1;var e=wt(),t=OL(),n=VL(),o=BL(),a=Fr().normalizeRanks,s=HL(),u=Fr().removeEmptyRanks,c=$L(),p=WL(),_=UL(),h=t8(),f=n8(),y=Fr(),v=An().Graph;Xy=w;function w($,te){var oe=te&&te.debugTiming?y.time:y.notime;oe("layout",function(){var de=oe("  buildLayoutGraph",function(){return P($)});oe("  runLayout",function(){k(de,oe)}),oe("  updateInputGraph",function(){x($,de)})})}function k($,te){te("    makeSpaceForEdgeLabels",function(){z($)}),te("    removeSelfEdges",function(){Q($)}),te("    acyclic",function(){t.run($)}),te("    nestingGraph.run",function(){c.run($)}),te("    rank",function(){o(y.asNonCompoundGraph($))}),te("    injectEdgeLabelProxies",function(){F($)}),te("    removeEmptyRanks",function(){u($)}),te("    nestingGraph.cleanup",function(){c.cleanup($)}),te("    normalizeRanks",function(){a($)}),te("    assignRankMinMax",function(){D($)}),te("    removeEdgeLabelProxies",function(){Z($)}),te("    normalize.run",function(){n.run($)}),te("    parentDummyChains",function(){s($)}),te("    addBorderSegments",function(){p($)}),te("    order",function(){h($)}),te("    insertSelfEdges",function(){ie($)}),te("    adjustCoordinateSystem",function(){_.adjust($)}),te("    position",function(){f($)}),te("    positionSelfEdges",function(){B($)}),te("    removeBorderNodes",function(){Y($)}),te("    normalize.undo",function(){n.undo($)}),te("    fixupEdgeLabelCoords",function(){U($)}),te("    undoCoordinateSystem",function(){_.undo($)}),te("    translateGraph",function(){T($)}),te("    assignNodeIntersects",function(){K($)}),te("    reversePoints",function(){ne($)}),te("    acyclic.undo",function(){t.undo($)})}function x($,te){e.forEach($.nodes(),function(oe){var de=$.node(oe),ue=te.node(oe);de&&(de.x=ue.x,de.y=ue.y,te.children(oe).length&&(de.width=ue.width,de.height=ue.height))}),e.forEach($.edges(),function(oe){var de=$.edge(oe),ue=te.edge(oe);de.points=ue.points,e.has(ue,"x")&&(de.x=ue.x,de.y=ue.y)}),$.graph().width=te.graph().width,$.graph().height=te.graph().height}var q=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],M=["width","height"],j={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function P($){var te=new v({multigraph:!0,compound:!0}),oe=me($.graph());return te.setGraph(e.merge({},E,J(oe,q),e.pick(oe,b))),e.forEach($.nodes(),function(de){var ue=me($.node(de));te.setNode(de,e.defaults(J(ue,M),j)),te.setParent(de,$.parent(de))}),e.forEach($.edges(),function(de){var ue=me($.edge(de));te.setEdge(de,e.merge({},N,J(ue,C),e.pick(ue,A)))}),te}function z($){var te=$.graph();te.ranksep/=2,e.forEach($.edges(),function(oe){var de=$.edge(oe);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(te.rankdir==="TB"||te.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function F($){e.forEach($.edges(),function(te){var oe=$.edge(te);if(oe.width&&oe.height){var de=$.node(te.v),ue=$.node(te.w),ve={rank:(ue.rank-de.rank)/2+de.rank,e:te};y.addDummyNode($,"edge-proxy",ve,"_ep")}})}function D($){var te=0;e.forEach($.nodes(),function(oe){var de=$.node(oe);de.borderTop&&(de.minRank=$.node(de.borderTop).rank,de.maxRank=$.node(de.borderBottom).rank,te=e.max(te,de.maxRank))}),$.graph().maxRank=te}function Z($){e.forEach($.nodes(),function(te){var oe=$.node(te);oe.dummy==="edge-proxy"&&($.edge(oe.e).labelRank=oe.rank,$.removeNode(te))})}function T($){var te=Number.POSITIVE_INFINITY,oe=0,de=Number.POSITIVE_INFINITY,ue=0,ve=$.graph(),Ee=ve.marginx||0,Re=ve.marginy||0;function Ie(je){var Te=je.x,Ae=je.y,We=je.width,Be=je.height;te=Math.min(te,Te-We/2),oe=Math.max(oe,Te+We/2),de=Math.min(de,Ae-Be/2),ue=Math.max(ue,Ae+Be/2)}e.forEach($.nodes(),function(je){Ie($.node(je))}),e.forEach($.edges(),function(je){var Te=$.edge(je);e.has(Te,"x")&&Ie(Te)}),te-=Ee,de-=Re,e.forEach($.nodes(),function(je){var Te=$.node(je);Te.x-=te,Te.y-=de}),e.forEach($.edges(),function(je){var Te=$.edge(je);e.forEach(Te.points,function(Ae){Ae.x-=te,Ae.y-=de}),e.has(Te,"x")&&(Te.x-=te),e.has(Te,"y")&&(Te.y-=de)}),ve.width=oe-te+Ee,ve.height=ue-de+Re}function K($){e.forEach($.edges(),function(te){var oe=$.edge(te),de=$.node(te.v),ue=$.node(te.w),ve,Ee;oe.points?(ve=oe.points[0],Ee=oe.points[oe.points.length-1]):(oe.points=[],ve=ue,Ee=de),oe.points.unshift(y.intersectRect(de,ve)),oe.points.push(y.intersectRect(ue,Ee))})}function U($){e.forEach($.edges(),function(te){var oe=$.edge(te);if(e.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function ne($){e.forEach($.edges(),function(te){var oe=$.edge(te);oe.reversed&&oe.points.reverse()})}function Y($){e.forEach($.nodes(),function(te){if($.children(te).length){var oe=$.node(te),de=$.node(oe.borderTop),ue=$.node(oe.borderBottom),ve=$.node(e.last(oe.borderLeft)),Ee=$.node(e.last(oe.borderRight));oe.width=Math.abs(Ee.x-ve.x),oe.height=Math.abs(ue.y-de.y),oe.x=ve.x+oe.width/2,oe.y=de.y+oe.height/2}}),e.forEach($.nodes(),function(te){$.node(te).dummy==="border"&&$.removeNode(te)})}function Q($){e.forEach($.edges(),function(te){if(te.v===te.w){var oe=$.node(te.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:te,label:$.edge(te)}),$.removeEdge(te)}})}function ie($){var te=y.buildLayerMatrix($);e.forEach(te,function(oe){var de=0;e.forEach(oe,function(ue,ve){var Ee=$.node(ue);Ee.order=ve+de,e.forEach(Ee.selfEdges,function(Re){y.addDummyNode($,"selfedge",{width:Re.label.width,height:Re.label.height,rank:Ee.rank,order:ve+ ++de,e:Re.e,label:Re.label},"_se")}),delete Ee.selfEdges})})}function B($){e.forEach($.nodes(),function(te){var oe=$.node(te);if(oe.dummy==="selfedge"){var de=$.node(oe.e.v),ue=de.x+de.width/2,ve=de.y,Ee=oe.x-ue,Re=de.height/2;$.setEdge(oe.e,oe.label),$.removeNode(te),oe.label.points=[{x:ue+2*Ee/3,y:ve-Re},{x:ue+5*Ee/6,y:ve-Re},{x:ue+Ee,y:ve},{x:ue+5*Ee/6,y:ve+Re},{x:ue+2*Ee/3,y:ve+Re}],oe.label.x=oe.x,oe.label.y=oe.y}})}function J($,te){return e.mapValues(e.pick($,te),Number)}function me($){var te={};return e.forEach($,function(oe,de){te[de.toLowerCase()]=oe}),te}return Xy}var Zy,vk;function o8(){if(vk)return Zy;vk=1;var e=wt(),t=Fr(),n=An().Graph;Zy={debugOrdering:o};function o(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(c){u.setNode(c,{label:c}),u.setParent(c,"layer"+a.node(c).rank)}),e.forEach(a.edges(),function(c){u.setEdge(c.v,c.w,{},c.name)}),e.forEach(s,function(c,p){var _="layer"+p;u.setNode(_,{rank:"same"}),e.reduce(c,function(h,f){return u.setEdge(h,f,{style:"invis"}),f})}),u}return Zy}var Jy,xk;function a8(){return xk||(xk=1,Jy="0.8.5"),Jy}var e0,wk;function s8(){return wk||(wk=1,e0={graphlib:An(),layout:i8(),debug:o8(),util:{time:Fr().time,notime:Fr().notime},version:a8()}),e0}var u8=s8();const bk=Qs(u8),l8=44,c8=8,qk=120,d8=380,p8=e=>{var p,_,h;const t=(p=e.data)==null?void 0:p.recipe;if(!t)return qk+100;const n=((_=t.inputs)==null?void 0:_.length)||0,o=((h=t.outputs)==null?void 0:h.length)||0,a=Math.max(n,o,1),u=a*l8+(a-1)*c8+24;return qk+u+12},_8=(e,t)=>{if(!e||e.length===0)return e;const n=new bk.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=d8,u=p8(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),bk.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},Sk=["Tip: Lock nodes to prevent the solver from changing their machine counts.","Tip: Use Shift+Click on a node to mark it as a target recipe.","Tip: Capped nodes will not exceed their set machine count during solving.","Tip: Connect excess outputs to inputs of other machines to reduce waste.","Tip: The LP solver prioritizes eliminating deficiencies above all else."],f8=()=>(L.useEffect(()=>{const e="lp-spinner-keyframes";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent="@keyframes lp-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }",document.head.appendChild(t)}},[]),d.jsx("div",{style:{width:"52px",height:"52px",flexShrink:0,border:"5px solid var(--border-primary)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"lp-spin 0.9s linear infinite",willChange:"transform"}})),m8=({phase:e,nodeSnapshot:t,result:n,onCancel:o,onConfirmDeficiency:a,onApply:s})=>{const[u,c]=L.useState(0),[p,_]=L.useState(0),h=L.useRef(Date.now());L.useEffect(()=>{if(e!=="loading")return;h.current=Date.now(),c(0);const b=setInterval(()=>c(Date.now()-h.current),100),M=setInterval(()=>_(j=>(j+1)%Sk.length),4e3);return()=>{clearInterval(b),clearInterval(M)}},[e]);const f=b=>{var N,A,P;const M=t==null?void 0:t.find(z=>z.id===b),j=((N=M==null?void 0:M.data)==null?void 0:N.machineName)||"",C=((P=(A=M==null?void 0:M.data)==null?void 0:A.recipe)==null?void 0:P.name)||b;return j?`${j}  ${C}`:C},y=b=>{var M,j;return((j=(M=t==null?void 0:t.find(C=>C.id===b))==null?void 0:M.data)==null?void 0:j.machineCount)||0},v=b=>typeof b=="number"?Number.isInteger(b)?b.toString():b.toFixed(3):"0",w=b=>d.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"14px",marginBottom:"8px"},children:b}),k=(b,M)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",padding:"6px 12px",fontSize:"12px"},children:[d.jsx("span",{style:{color:"var(--text-secondary)"},children:b}),d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:String(M)})]},b),x=()=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",padding:"32px 24px"},children:[d.jsx(f8,{}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"18px",fontWeight:700,marginBottom:"6px"},children:"Solving Production Network..."}),d.jsxs("div",{style:{color:"var(--color-primary)",fontSize:"26px",fontWeight:700,fontVariantNumeric:"tabular-nums"},children:[(u/1e3).toFixed(1),"s"]})]}),d.jsx("div",{style:{background:"var(--bg-main)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"12px 16px",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center",minHeight:"44px",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"340px"},children:Sk[p]}),d.jsx("button",{onClick:o,className:"btn btn-secondary",style:{minWidth:"100px"},children:"Cancel"})]}),q=()=>{const b=(n==null?void 0:n.deficientNodes)||[];return d.jsxs("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsx("span",{style:{fontSize:"28px"},children:""}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:700},children:"Deficiency Detected"}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginTop:"2px"},children:"The network cannot be fully balanced with the current connections."})]})]}),b.length>0&&d.jsx("div",{style:{maxHeight:"180px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:b.map((M,j)=>d.jsxs("div",{style:{background:"rgba(239,68,68,0.08)",border:"1px solid rgba(239,68,68,0.35)",borderRadius:"var(--radius-sm)",padding:"8px 12px",fontSize:"12px"},children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:M.nodeName}),d.jsxs("span",{style:{color:"#fca5a5",marginLeft:"8px"},children:["needs ",M.deficitAmount.toFixed(4),"/s more of ",M.productId]})]},j))}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",background:"var(--bg-main)",padding:"10px 12px",borderRadius:"var(--radius-sm)"},children:"Do you want to compute anyway? The solver will minimise deficiency as much as possible."}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[d.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),d.jsx("button",{onClick:a,className:"btn btn-primary",children:"Compute Anyway"})]})]})},E=()=>{const b=n==null?void 0:n.updates,M=b&&b.size>0,j=M?Array.from(b.entries()).sort((C,N)=>f(C[0]).localeCompare(f(N[0]))):[];return d.jsxs("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"20px",maxHeight:"70vh",overflowY:"auto"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("span",{style:{fontSize:"26px"},children:n!=null&&n.success?"":""}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:700},children:(n!=null&&n.success,"Computation Complete")}),d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"2px"},children:n==null?void 0:n.message})]})]}),d.jsxs("div",{children:[w(`Machine Count Changes (${j.length})`),M?d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",maxHeight:"240px",overflowY:"auto"},children:j.map(([C,N])=>{const A=y(C),P=N-A;return d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",padding:"7px 12px",fontSize:"13px"},children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:500,marginRight:"12px"},children:f(C)}),d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px",fontVariantNumeric:"tabular-nums",flexShrink:0},children:[d.jsx("span",{style:{color:"var(--text-secondary)"},children:v(A)}),d.jsx("span",{style:{color:"var(--text-muted)"},children:""}),d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:700},children:v(N)}),d.jsx("span",{style:{color:P>0?"#86efac":"#fca5a5",fontSize:"11px",fontWeight:600,minWidth:"40px",textAlign:"right"},children:P>0?`+${v(P)}`:v(P)})]})]},C)})}):d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No changes  network is already balanced."})]}),d.jsxs("div",{children:[w("Solver Info"),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[k("Nodes Updated",j.length),k("Converged",n!=null&&n.converged?"Yes":"No"),k("Iterations",(n==null?void 0:n.iterations)??""),(n==null?void 0:n.elapsedMs)!=null&&k("Solve Time",`${(n.elapsedMs/1e3).toFixed(2)}s`)]})]}),d.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[d.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Dismiss"}),M&&d.jsx("button",{onClick:()=>s(n),className:"btn btn-primary",children:"Apply Changes"})]})]})};return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal",onClick:b=>b.stopPropagation(),style:{width:"460px",padding:0,overflow:"hidden"},children:[d.jsx("div",{style:{background:"var(--bg-secondary)",borderBottom:"2px solid var(--border-divider)",padding:"14px 20px"},children:d.jsxs("h2",{className:"modal-title",style:{margin:0},children:[e==="loading"&&" LP Solver",e==="deficiency_confirm"&&" Deficiency Warning",e==="results"&&" Results"]})}),e==="loading"&&x(),e==="deficiency_confirm"&&q(),e==="results"&&E()]})})},h8={custom:Z6},y8={custom:e3},Ml=e=>typeof e=="number"?e.toFixed(4):"0",El=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:o,styleType:a})=>{const[s,u]=L.useState(""),[c,p]=L.useState(!1),_=c?s:Ml(n),h=()=>{if(!c)return;const k=parseFloat(s);isNaN(k)||o(k),p(!1),u("")},f=a==="input",y=f?"var(--input-bg)":"var(--output-bg)",v=f?"var(--input-border)":"var(--output-border)",w=f?"var(--input-text)":"var(--output-text)";return d.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:y,border:`1px solid ${v}`,borderRadius:"var(--radius-sm)"},children:[d.jsx("div",{style:{color:w,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",Ml(t),"/s"]}),d.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[f?"Current Deficiency:":"Current Excess:"," ",Ml(Math.abs(n)),"/s"]}),d.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:f?"Target Additional Demand:":"Target Excess:"}),d.jsx("input",{type:"text",value:_,onFocus:()=>{p(!0),u(Ml(n))},onChange:k=>u(k.target.value),onBlur:h,onKeyPress:k=>k.key==="Enter"&&h(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),d.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},kk=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function g8(){const[e,t,n]=w4([]),[o,a,s]=b4([]),[u,c]=L.useState(0),[p,_]=L.useState(!1),[h,f]=L.useState(!1),[y,v]=L.useState(null),[w,k]=L.useState(null),[x,q]=L.useState("product"),[E,b]=L.useState("button"),[M,j]=L.useState(""),[C,N]=L.useState("name_asc"),[A,P]=L.useState("all"),[z,F]=L.useState("all"),[D,Z]=L.useState("all"),[T,K]=L.useState(null),[U,ne]=L.useState([]),[Y,Q]=L.useState(!1),[ie,B]=L.useState(!1),[J,me]=L.useState("targets"),[$,te]=L.useState(0),[oe,de]=L.useState(!1),[ue,ve]=L.useState(null),[Ee,Re]=L.useState(""),[Ie,je]=L.useState(null),[Te,Ae]=L.useState("free"),[We,Be]=L.useState(!1),[st,at]=L.useState(!1),[Mt,bt]=L.useState(!1),[qt,ut]=L.useState(!1),[Cr,tr]=L.useState(!1),[Rt,Wt]=L.useState(!1),[it,Lr]=L.useState(()=>{const I=Al();return{edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"}}),[Nt,Kr]=L.useState(!1),[rr,Ut]=L.useState(!1),[Qe,bi]=L.useState(!1),[Tt,dn]=L.useState("pan"),[fe,ot]=L.useState(0),[Dr,Or]=L.useState(!1);L.useEffect(()=>{Qe&&rr&&Rt&&Wt(!1)},[Qe,rr,Rt]);const[gr,ei]=L.useState(!0),[Dn,At]=L.useState(1),[nr,Gt]=L.useState({}),[dt,Bo]=L.useState("perSecond"),[ht,Ji]=L.useState("total"),[Kt,Yr]=L.useState([]),[Ot,Vt]=L.useState(null),[Yt,Qt]=L.useState(null),[vr,ur]=L.useState(null),[xr,Et]=L.useState(null),[Qr,lr]=L.useState(null),[eo,to]=L.useState({}),[cr,qi]=L.useState(null),[Si,ro]=L.useState({}),[ti,pt]=L.useState("all"),[pn,_n]=L.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[fn,mn]=L.useState([]),[_t,Xr]=L.useState(null),[On,Xt]=L.useState(null),[Ho,wr]=L.useState({x:0,y:0}),[hn,yn]=L.useState(null),ri=L.useRef(null),Mr=L.useRef(null),ki=L.useRef(null),ir=L.useRef(null),$o=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",io=L.useRef(null),Vn=L.useRef([]),Ci=L.useCallback(I=>{const V=I.filter(G=>G.type!=="remove"),H=V.filter(G=>G.type==="position"),O=V.filter(G=>G.type!=="position");H.length>0&&n(H),O.length>0&&(Vn.current.push(...O),io.current&&clearTimeout(io.current),io.current=setTimeout(()=>{Vn.current.length>0&&(n(Vn.current),Vn.current=[])},50))},[n]),oo=L.useCallback(I=>{s(I)},[s]);L.useEffect(()=>{const I=Al();rc(I),Lr({edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"}),y3(Hr,sn,jn);const V=()=>{const G="ontouchstart"in window||navigator.maxTouchPoints>0,X=window.matchMedia("(pointer: coarse)").matches,se=window.matchMedia("(hover: none)").matches,ce=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);bi(G&&X||G&&se||ce)};V(),window.addEventListener("resize",V);const H=window.matchMedia("(pointer: coarse)"),O=window.matchMedia("(hover: none)");return H.addEventListener("change",V),O.addEventListener("change",V),()=>{window.removeEventListener("resize",V),H.removeEventListener("change",V),O.removeEventListener("change",V)}},[]);const zt=L.useCallback(()=>({onInputClick:_o,onOutputClick:Ii,isMobile:Qe,mobileActionMode:Tt,onDrillSettingsChange:Fc,onLogicAssemblerSettingsChange:Lc,onTreeFarmSettingsChange:Ha,onIndustrialFireboxSettingsChange:Ko,onTemperatureSettingsChange:$a,onBoilerSettingsChange:_u,onChemicalPlantSettingsChange:Wa,onWasteFacilitySettingsChange:Yo,onLiquidDumpSettingsChange:fu,onLiquidBurnerSettingsChange:Qo,onMiddleClick:ho,onHandleDoubleClick:Bn,onMachineCountModeChange:Ka}),[Qe,Tt]);L.useEffect(()=>{_3().catch(O=>{console.error("Failed to initialize save system:",O)});const I=Z4();if(!(I!=null&&I.nodes))return;const V=zt(),H=I.nodes.map(O=>{var se,ce,ye,xe;const G=Ct((ce=(se=O.data)==null?void 0:se.recipe)==null?void 0:ce.machine_id);let X=(ye=O.data)==null?void 0:ye.recipe;return G&&X&&!((xe=X.outputs)!=null&&xe.some(ke=>ke.temperature!==void 0))&&(X=qs(X,G.id)),{...O,data:{...O.data,recipe:X,machine:G,machineCount:O.data.machineCount??1,displayMode:dt,machineDisplayMode:ht,...V,globalPollution:fe,flows:null,suggestions:[]}}});t(H),a(I.edges||[]),ne(I.targetProducts||[]),Gt(I.soldProducts||{}),Yr(I.favoriteRecipes||[]),Vt(I.lastDrillConfig||null),Qt(I.lastAssemblerConfig||null),ur(I.lastTreeFarmConfig||null),Et(I.lastFireboxConfig||null),lr(I.lastWasteFacilityConfig||null),c(I.nodeId||0),te(I.targetIdCounter||0)},[]),L.useEffect(()=>{t(I=>{let V=!1;const H=I.map(O=>O.data.displayMode===dt&&O.data.machineDisplayMode===ht&&O.data.zoomLevel===Dn?O:(V=!0,{...O,data:{...O.data,displayMode:dt,machineDisplayMode:ht,zoomLevel:Dn}}));return V?H:I})},[dt,ht,Dn,t]),L.useEffect(()=>{a(I=>{let V=!1;const H=I.map(O=>{var G,X;return((G=O.data)==null?void 0:G.edgePath)===it.edgePath&&((X=O.data)==null?void 0:X.edgeStyle)===it.edgeStyle?O:(V=!0,{...O,data:it})});return V?H:I})},[it,a]);const Zr=L.useCallback(I=>({id:I.id,type:I.type,position:I.position,sourcePosition:I.sourcePosition,targetPosition:I.targetPosition,data:{recipe:I.data.recipe,machineCount:I.data.machineCount,machineCountMode:I.data.machineCountMode,cappedMachineCount:I.data.cappedMachineCount,isTarget:I.data.isTarget,leftHandles:I.data.leftHandles,rightHandles:I.data.rightHandles}}),[]);L.useEffect(()=>{const I={nodes:e.map(Zr),edges:o,targetProducts:U,nodeId:u,targetIdCounter:$,soldProducts:nr,favoriteRecipes:Kt,lastDrillConfig:Ot,lastAssemblerConfig:Yt,lastTreeFarmConfig:vr,lastFireboxConfig:xr,lastWasteFacilityConfig:Qr};localStorage.setItem("industrialist_canvas_state",JSON.stringify(I))},[e,o,U,u,$,nr,Kt,Ot,Yt,vr,xr,Qr,Zr]);const Oa=L.useCallback(()=>{var G,X;let I=0,V=0,H=0;const O=e.length;for(let se=0;se<O;se++){const ce=e[se],{recipe:ye,machine:xe,machineCount:ke=0}=ce.data||{};if(!ye)continue;const pe=typeof ye.pollution=="number"?ye.pollution:parseFloat(ye.pollution);!isNaN(pe)&&isFinite(pe)&&(V+=pe*ke);const he=(((G=ye.inputs)==null?void 0:G.length)||0)+(((X=ye.outputs)==null?void 0:X.length)||0),be=Math.ceil(ke);if((xe==null?void 0:xe.id)==="m_industrial_firebox"){H+=be*(1+he*2);continue}if((xe==null?void 0:xe.id)==="m_tree_farm"&&ye.treeFarmSettings){const{trees:Ne,harvesters:Ke,sprinklers:Xe,controller:lt,outputs:et}=ye.treeFarmSettings,Bt=typeof ye.power_consumption=="number"?ye.power_consumption:0;I+=Bt*ke;const dr=Math.ceil(Xe/3),It=ye.power_type==="HV"?2:Math.ceil(Bt/15e5)*2,oi=Ne+Ke+Xe+dr*3+lt+et*3+It;H+=be*oi;continue}const ge=ye.power_consumption;let Ce=0;typeof ge=="number"?(Ce=ge,I+=ge*ke):typeof ge=="object"&&ge!==null&&"max"in ge&&(Ce=ge.max,I+=Ce*ke);const Pe=ye.power_type==="HV"?2:Math.ceil(Ce/15e5)*2;H+=be*(1+Pe+he*2)}return{totalPower:I,totalPollution:V,totalModelCount:H}},[e]),Je=L.useMemo(()=>Oa(),[e]);L.useEffect(()=>{if(gr||Je.totalPollution===0)return;const I=setInterval(()=>{if(Dr)return;const V=Je.totalPollution/3600;ot(H=>{if(typeof H!="number"||isNaN(H)||!isFinite(H))return H;const O=parseFloat((H+V).toFixed(4));return O!==H?O:H})},1e3);return()=>clearInterval(I)},[Je.totalPollution,Dr,gr]),L.useEffect(()=>{const I=setInterval(En,2e4);return()=>clearInterval(I)},[]);const ao=L.useRef(null),Va=L.useRef(fe);L.useEffect(()=>{if(!(Math.abs(fe-Va.current)<.01))return Va.current=fe,ao.current&&clearTimeout(ao.current),ao.current=setTimeout(()=>{t(I=>{let V=!1;const H=I.map(O=>{const{recipe:G,machine:X,globalPollution:se}=O.data||{};if(G!=null&&G.isTreeFarm&&G.treeFarmSettings){const{trees:ce,harvesters:ye,sprinklers:xe,outputs:ke,controller:pe}=G.treeFarmSettings,he=tg(ce,ye,fe),be=Jl(ce,ye,xe,ke,pe,fe);return V=!0,{...O,data:{...O.data,recipe:{...G,outputs:he,power_consumption:be?be.avgPowerConsumption:"Variable"},globalPollution:fe}}}if((X==null?void 0:X.id)==="m_air_separation_unit"){const ce=kk(fe),ye=G.outputs.map(xe=>xe.product_id==="p_residue"?{...xe,quantity:parseFloat(ce.toFixed(6))}:xe);return V=!0,{...O,data:{...O.data,recipe:{...G,outputs:ye},globalPollution:fe}}}return se!==fe?(V=!0,{...O,data:{...O.data,globalPollution:fe}}):O});return V?H:I})},250),()=>clearTimeout(ao.current)},[fe,t]);const[$e,du]=L.useState(()=>ew([],[],{skipTemperature:!0})),so=L.useRef(null),za=L.useRef(""),uo=L.useRef(!1),Mi=L.useRef(null),Oe=L.useCallback((I="general")=>{Mi.current=I,uo.current=!0},[]);L.useEffect(()=>{if(uo.current)return so.current&&clearTimeout(so.current),so.current=setTimeout(()=>{const I=`${e.length}-${o.length}-${e.map(V=>{var H,O,G,X,se,ce,ye,xe,ke,pe,he,be,ge;return`${V.id}:${(H=V.data)==null?void 0:H.machineCount}:${JSON.stringify(((G=(O=V.data)==null?void 0:O.recipe)==null?void 0:G.temperatureSettings)||{})}:${JSON.stringify(((se=(X=V.data)==null?void 0:X.recipe)==null?void 0:se.drillSettings)||{})}:${JSON.stringify(((ye=(ce=V.data)==null?void 0:ce.recipe)==null?void 0:ye.assemblerSettings)||{})}:${JSON.stringify(((ke=(xe=V.data)==null?void 0:xe.recipe)==null?void 0:ke.treeFarmSettings)||{})}:${JSON.stringify(((he=(pe=V.data)==null?void 0:pe.recipe)==null?void 0:he.fireboxSettings)||{})}:${JSON.stringify(((ge=(be=V.data)==null?void 0:be.recipe)==null?void 0:ge.chemicalPlantSettings)||{})}`}).join(",")}`;if(I!==za.current){const V=Mi.current||"general",H=["connection","node","temperatureSettings","boilerSettings"].includes(V);console.log(`[Recalculation] Reason: ${V}, Temperature propagation: ${H}`);const O=ew(e,o,{skipTemperature:!H,previousTemperatureData:H?null:$e==null?void 0:$e.temperatureData});du(O),za.current=I}uo.current=!1,Mi.current=null},100),()=>clearTimeout(so.current)},[e,o,$e]);const gn=L.useMemo(()=>z3($e),[$e]),vn=L.useMemo(()=>B3($e),[$e]),zn=L.useRef(null),Ei=L.useRef(null),xn=L.useCallback((I,V,H)=>{var ce,ye,xe,ke,pe,he;const O=(ce=I.data)==null?void 0:ce.recipe,G=V.byNode[I.id];if(I.data.flows===G&&I.data.suggestions===H)return I;const X=I.data.flows!==G,se=I.data.suggestions!==H&&(((ye=I.data.suggestions)==null?void 0:ye.length)!==(H==null?void 0:H.length)||JSON.stringify(I.data.suggestions)!==JSON.stringify(H||[]));if(O!=null&&O.isWasteFacility){const be=Math.min(((xe=G==null?void 0:G.inputFlows[0])==null?void 0:xe.connected)||0,240),ge=Math.min(((ke=G==null?void 0:G.inputFlows[1])==null?void 0:ke.connected)||0,240),Ce=O.wasteFacilitySettings||{};if(!X&&!se&&Ce.itemFlowRate===be&&Ce.fluidFlowRate===ge)return I;const Pe=Rl(be,ge),Ne=tc(be,ge,O.inputs[0].product_id,O.inputs[1].product_id);return{...I,data:{...I.data,recipe:{...O,inputs:Ne,cycle_time:Pe.cycleTime,wasteFacilitySettings:{...Ce,itemFlowRate:be,fluidFlowRate:ge}},flows:G||null,suggestions:H||[],zoomLevel:I.data.zoomLevel}}}if(O!=null&&O.isLiquidDump){const be=((pe=I.data)==null?void 0:pe.machineCount)||1,ge=O.inputs.map((Pe,Ne)=>{var Xe;return Math.min(((Xe=G==null?void 0:G.inputFlows[Ne])==null?void 0:Xe.connected)||0,15*be)/be}),Ce=Ts(O.inputs,ge);return!X&&!se&&O.pollution===Ce?I:{...I,data:{...I.data,recipe:{...O,pollution:Ce},flows:G||null,suggestions:H||[],zoomLevel:I.data.zoomLevel}}}if(O!=null&&O.isLiquidBurner){const be=((he=I.data)==null?void 0:he.machineCount)||1,ge=O.inputs.map((Pe,Ne)=>{var Xe;return Math.min(((Xe=G==null?void 0:G.inputFlows[Ne])==null?void 0:Xe.connected)||0,15*be)/be}),Ce=Ps(O.inputs,ge);return!X&&!se&&O.pollution===Ce?I:{...I,data:{...I.data,recipe:{...O,pollution:Ce},flows:G||null,suggestions:H||[],zoomLevel:I.data.zoomLevel}}}return!X&&!se?I:{...I,data:{...I.data,flows:G||null,suggestions:H||[],zoomLevel:I.data.zoomLevel}}},[]);L.useEffect(()=>{var I;if((I=$e==null?void 0:$e.flows)!=null&&I.byNode&&Ei.current!==$e.flows)return Ei.current=$e.flows,zn.current&&clearTimeout(zn.current),zn.current=setTimeout(()=>{t(V=>{let H=V;$e.temperatureData&&(H=g0(V,$e.temperatureData,$e.graph));let O=!1;const G=H.map(X=>{const se=xn(X,$e.flows,$e.suggestions);return se!==X&&(O=!0),se});return O?G:V})},250),()=>clearTimeout(zn.current)},[$e,t,xn]);const Wo=L.useMemo(()=>gn.map(I=>{const V=U.some(H=>{var G,X,se;const O=e.find(ce=>ce.id===H.recipeBoxId);return(se=(X=(G=O==null?void 0:O.data)==null?void 0:G.recipe)==null?void 0:X.outputs)==null?void 0:se.some(ce=>ce.product_id===I.productId)});return{...I,isSold:nr[I.productId]??(V&&typeof I.product.price=="number"&&I.product.price>1)}}),[gn,nr,U,e]),Ba=L.useMemo(()=>Wo.reduce((I,V)=>V.isSold&&typeof V.product.price=="number"?I+V.product.price*V.excessRate:I,0),[Wo]),lo=L.useMemo(()=>{const I=new Map,V=new Map,H=(G,X,se)=>{I.set(G,(I.get(G)||0)+X),V.has(G)||V.set(G,se)};e.forEach(G=>{var ye,xe,ke,pe,he,be;const{machine:X,machineCount:se=0,recipe:ce}=G.data||{};if(X){if(X.id==="m_tree_farm"&&(ce!=null&&ce.treeFarmSettings)){const{trees:ge,harvesters:Ce,sprinklers:Pe,outputs:Ne,controller:Ke}=ce.treeFarmSettings,Xe=Math.ceil(Pe/3);H("m_tree",Math.ceil(ge*se),((ye=Ct("m_tree"))==null?void 0:ye.cost)||0),H("m_tree_harvester",Math.ceil(Ce*se),((xe=Ct("m_tree_harvester"))==null?void 0:xe.cost)||0),H("m_tree_farm_sprinkler",Math.ceil(Pe*se),((ke=Ct("m_tree_farm_sprinkler"))==null?void 0:ke.cost)||0),H("m_tree_farm_water_tank",Math.ceil(Xe*se),((pe=Ct("m_tree_farm_water_tank"))==null?void 0:pe.cost)||0),H("m_tree_farm_output",Math.ceil(Ne*se),((he=Ct("m_tree_farm_output"))==null?void 0:he.cost)||0),H("m_tree_farm_controller",Math.ceil(Ke*se),((be=Ct("m_tree_farm_controller"))==null?void 0:be.cost)||0);return}H(X.id,Math.ceil(se),typeof X.cost=="number"?X.cost:0)}});const O=Array.from(I.entries()).map(([G,X])=>{const se=sn.find(ye=>ye.id===G),ce=V.get(G);return{machineId:G,machine:se,count:X,cost:ce,totalCost:X*ce}}).sort((G,X)=>G.machine.name.localeCompare(X.machine.name));return{stats:O,totalCost:O.reduce((G,X)=>G+X.totalCost,0)}},[e,sn]),Jr=(I,V)=>t(H=>H.map(O=>O.id===I?{...O,data:V(O.data)}:O)),co=L.useCallback((I,V,H,O)=>{const G=Object.keys(Ws).map(ce=>parseInt(ce));let X=null,se=0;return G.forEach(ce=>{const xe=Ws[ce].find(ke=>ke.product_id===I);if(xe){const ke=Lo(V,H,O,ce);if(ke){const pe=O?1.1:1,he=xe.quantity*pe*ke.dutyCycle;he>se&&(se=he,X=ce)}}}),X},[]),Uo=L.useCallback((I,V,H)=>{const O={drillConfig:Ot,assemblerConfig:Yt,treeFarmConfig:vr,fireboxConfig:xr},G=($e==null?void 0:$e.flows)||null;return H3(I,V,H,co,O,fe,G)},[Ot,Yt,vr,xr,co,fe,$e]),pu=L.useCallback(I=>{const V=e.find(X=>X.id===I.source),H=e.find(X=>X.id===I.target);if(!V||!H)return;const O=V.data.recipe.outputs[parseInt(I.sourceHandle.split("-")[1])],G=H.data.recipe.inputs[parseInt(I.targetHandle.split("-")[1])];if(!(!O||!G)){if(G.isAnyProduct){const X=gt(O.product_id);if(G.acceptedType&&(X==null?void 0:X.type)!==G.acceptedType)return;t(se=>se.map(ce=>{var ke;if(ce.id!==H.id)return ce;const ye=parseInt(I.targetHandle.split("-")[1]),xe=[...ce.data.recipe.inputs];if(xe[ye]={...xe[ye],product_id:O.product_id,isAnyProduct:!1},ce.data.recipe.isWasteFacility){const pe=ce.data.recipe.wasteFacilitySettings||{},he=(ke=$e==null?void 0:$e.flows)==null?void 0:ke.byNode[I.source],be=parseInt(I.sourceHandle.split("-")[1]),ge=he!=null&&he.outputFlows[be]?he.outputFlows[be].produced-he.outputFlows[be].connected:0,Ce=Math.min(ge,240);ye===0?pe.itemFlowRate=Ce:ye===1&&(pe.fluidFlowRate=Ce);const Pe=Rl(pe.itemFlowRate||0,pe.fluidFlowRate||0),Ne=tc(pe.itemFlowRate||0,pe.fluidFlowRate||0,ye===0?O.product_id:xe[0].product_id,ye===1?O.product_id:xe[1].product_id);return{...ce,data:{...ce.data,recipe:{...ce.data.recipe,inputs:Ne,cycle_time:Pe.cycleTime,wasteFacilitySettings:pe}}}}if(ce.data.recipe.isLiquidDump||ce.data.recipe.isLiquidBurner){const pe=ce.data.recipe.isLiquidDump?Ts(xe):Ps(xe);return{...ce,data:{...ce.data,recipe:{...ce.data.recipe,inputs:xe,pollution:pe}}}}return{...ce,data:{...ce.data,recipe:{...ce.data.recipe,inputs:xe}}}}))}else if(O.product_id!==G.product_id)return;a(X=>c0({...I,type:"custom",animated:!1,data:it},X)),En(),Oe("connection")}},[a,e,it,Oe,t,$e]),Go=()=>{_(!1),v(null),k(null),q("product"),j(""),N("name_asc"),P("all"),F("all"),K(null),b("button"),to({}),Z("all")},po=L.useCallback(()=>{_(!0),K(null),b("button")},[]),_o=L.useCallback((I,V,H,O)=>{if(O!=null&&O.ctrlKey){a(X=>X.filter(se=>!(se.target===V&&se.targetHandle===`left-${H}`))),En(),Oe("connection");return}const G=gt(I);G&&(_(!0),v(G),K({nodeId:V,inputIndex:H,productId:I}),b("rectangle"),F("producers"))},[a,Qe,Tt,Oe]),Ii=L.useCallback((I,V,H,O)=>{var ye,xe;if(O!=null&&O.ctrlKey){a(ke=>ke.filter(pe=>!(pe.source===V&&pe.sourceHandle===`right-${H}`))),En(),Oe("connection");return}const G=mo.current.find(ke=>ke.id===V),X=(xe=(ye=G==null?void 0:G.data)==null?void 0:ye.recipe)==null?void 0:xe.machine_id,se=X&&hr[X],ce=gt(I);ce&&(_(!0),v(ce),K({nodeId:V,outputIndex:H,productId:I,isOutput:!0,isFromHeatSource:!!se}),b("rectangle"),F("consumers"))},[a,Qe,Tt,Oe]),br=L.useCallback((I,V,H)=>{a(O=>{const G=O.filter(X=>{var se,ce,ye,xe;if(X.source===I){const ke=parseInt(X.sourceHandle.split("-")[1]);if(ke>=H.length)return!1;const pe=H[ke],he=e.find(Ce=>Ce.id===X.target);if(!he)return!1;const be=parseInt(X.targetHandle.split("-")[1]),ge=(ce=(se=he.data)==null?void 0:se.recipe)==null?void 0:ce.inputs[be];if(!ge||ge.product_id!==pe.product_id)return!1}if(X.target===I){const ke=parseInt(X.targetHandle.split("-")[1]);if(ke>=V.length)return!1;const pe=V[ke],he=e.find(Ce=>Ce.id===X.source);if(!he)return!1;const be=parseInt(X.sourceHandle.split("-")[1]),ge=(xe=(ye=he.data)==null?void 0:ye.recipe)==null?void 0:xe.outputs[be];if(!ge||ge.product_id!==pe.product_id)return!1}return!0});return G.length!==O.length&&(En(),Oe("connection")),G})},[a,e,Oe]),Fc=L.useCallback((I,V,H,O)=>{Vt({drillHead:V.drillHead,consumable:V.consumable,machineOil:V.machineOil});const G=V.drillHead&&V.depth?Lo(V.drillHead,V.consumable,V.machineOil,V.depth):null;Jr(I,X=>({...X,recipe:{...X.recipe,inputs:H.length>0?H:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:V,cycle_time:1,power_consumption:G?{max:G.drillingPower*1e6,average:(G.drillingPower*G.lifeTime+G.idlePower*(G.replacementTime+G.travelTime))/G.totalCycleTime*1e6}:"Variable",pollution:G?G.pollution:"Variable"},leftHandles:Math.max(H.length,1),rightHandles:Math.max(O.length,1)})),br(I,H,O),Oe("settings")},[br,Oe]),Lc=L.useCallback((I,V,H,O)=>{Qt({outerStage:V.outerStage,innerStage:V.innerStage,machineOil:V.machineOil,tickCircuitDelay:V.tickCircuitDelay});const X=!V.outerStage||!V.innerStage?"":V.outerStage===1?`p_${V.innerStage}x_microchip`:`p_${V.outerStage}x${V.innerStage}x_microchip`,se=X?iu(X,V.machineOil,V.tickCircuitDelay):null;Jr(I,ce=>({...ce,recipe:{...ce.recipe,inputs:H.length>0?H:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:V,cycle_time:se?se.cycleTime:"Variable",power_consumption:se?{max:se.maxPowerConsumption,average:se.avgPowerConsumption}:"Variable"},leftHandles:Math.max(H.length,1),rightHandles:Math.max(O.length,1)})),br(I,H,O),Oe("settings")},[br,Oe]),Ha=L.useCallback((I,V,H,O)=>{ur({trees:V.trees,harvesters:V.harvesters,sprinklers:V.sprinklers,outputs:V.outputs});const G=Jl(V.trees,V.harvesters,V.sprinklers,V.outputs,V.controller,fe);Jr(I,X=>({...X,recipe:{...X.recipe,inputs:H.length>0?H:[{product_id:"p_water",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:V,cycle_time:1,power_consumption:G?G.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max(H.length,1),rightHandles:Math.max(O.length,1)})),a(X=>X.filter(se=>{if(se.source===I||se.target===I){const ce=parseInt((se.source===I?se.sourceHandle:se.targetHandle).split("-")[1]);return se.source===I?ce<O.length:ce<H.length}return!0})),Oe("settings")},[a,fe,Oe]),Ko=L.useCallback((I,V,H,O)=>{Et({fuel:V.fuel}),Jr(I,G=>({...G,recipe:{...G.recipe,inputs:H,fireboxSettings:V,cycle_time:O?O.cycleTime:G.recipe.cycle_time,power_consumption:0}})),Oe("settings")},[Oe]),$a=L.useCallback((I,V,H,O)=>{t(G=>G.map(X=>{if(X.id!==I)return X;const se=Ct(X.data.recipe.machine_id),ce=Ur(se==null?void 0:se.id);let ye=X.data.recipe.power_type;(se==null?void 0:se.id)==="m_electric_water_heater"&&(ye=V.temperature>=320?"HV":"MV");let xe={...X.data.recipe,outputs:H,temperatureSettings:V,power_consumption:O??X.data.recipe.power_consumption,power_type:ye};if((se==null?void 0:se.id)==="m_water_treatment_plant"&&ce){const ke=V.temperature||Tn,pe=Yn(se.id,ke,1),he=90*pe,be=17.6,ge=17.6;xe={...xe,inputs:xe.inputs.map(Ce=>Ce.product_id==="p_water"?{...Ce,quantity:be*pe,originalQuantity:be}:Ce.product_id==="p_distilled_water"?{...Ce,quantity:ge*pe,originalQuantity:ge}:Ce),outputs:xe.outputs.map(Ce=>Ce.product_id==="p_steam"?{...Ce,quantity:he,originalQuantity:90}:Ce)}}return{...X,data:{...X.data,recipe:xe}}})),Oe("temperatureSettings")},[t,Oe]),_u=L.useCallback((I,V)=>{t(H=>H.map(O=>{if(O.id!==I)return O;const G=Ct(O.data.recipe.machine_id),X=hr[G==null?void 0:G.id];return!X||X.type!=="boiler"?O:{...O,data:{...O.data,recipe:{...O.data.recipe,temperatureSettings:V}}}})),Oe("boilerSettings")},[t,Oe]),Bn=L.useCallback((I,V,H,O,G)=>{const X=V==="right"?"output":"input",se=G==null?void 0:G.find(ce=>ce.nodeId===I&&ce.handleType===X&&ce.handleIndex===H);se&&(t(ce=>ce.map(ye=>{var he,be;if(ye.id!==I)return ye;const xe=((he=ye.data)==null?void 0:he.machineCountMode)||"free",ke=(be=ye.data)==null?void 0:be.cappedMachineCount;if(xe==="locked")return console.log(`Node ${I} is locked - suggestion ignored`),ye;let pe=se.suggestedMachineCount;return xe==="capped"&&typeof ke=="number"&&pe>ke&&(console.log(`Node ${I} is capped at ${ke} - clamping suggestion from ${pe} to ${ke}`),pe=ke),{...ye,data:{...ye.data,machineCount:pe}}})),Oe("machineCount"))},[t,Oe]),Wa=L.useCallback((I,V)=>{t(H=>H.map(O=>{if(O.id!==I)return O;const G=Ct(O.data.recipe.machine_id);if((G==null?void 0:G.id)!=="m_chemical_plant")return O;const X=jn.find(ce=>ce.id===O.data.recipe.id);if(!X)return O;const se=R6(X,V.speedFactor,V.efficiencyFactor);return{...O,data:{...O.data,recipe:se}}})),Oe("settings")},[t,Oe]),Yo=L.useCallback((I,V,H,O)=>{lr({itemProductId:V.itemProductId,fluidProductId:V.fluidProductId}),t(G=>G.map(X=>{if(X.id!==I)return X;const se=X.data.recipe.wasteFacilitySettings||{},ce=se.itemFlowRate||0,ye=se.fluidFlowRate||0,xe=Rl(ce,ye);return{...X,data:{...X.data,recipe:{...X.data.recipe,inputs:H.length>0?H:X.data.recipe.inputs,wasteFacilitySettings:{...V,itemFlowRate:ce,fluidFlowRate:ye},cycle_time:xe.cycleTime},leftHandles:Math.max(H.length,1)}}})),br(I,H,O),Oe("settings")},[br,Oe,t]),fu=L.useCallback((I,V,H,O)=>{t(G=>G.map(X=>X.id!==I?X:{...X,data:{...X.data,recipe:{...X.data.recipe,inputs:H.length>0?H:X.data.recipe.inputs,liquidDumpSettings:V,pollution:Ts(H)},leftHandles:Math.max(H.length,1)}})),br(I,H,O),Oe("settings")},[br,Oe,t]),Qo=L.useCallback((I,V,H,O)=>{t(G=>G.map(X=>X.id!==I?X:{...X,data:{...X.data,recipe:{...X.data.recipe,inputs:H.length>0?H:X.data.recipe.inputs,liquidBurnerSettings:V,pollution:Ps(H)},leftHandles:Math.max(H.length,1)}})),br(I,H,O),Oe("settings")},[br,Oe,t]),Er=L.useCallback((I,V=null)=>{var he,be;const H=Ct(I.machine_id);if(!H||!I.inputs||!I.outputs){alert("Error: Invalid machine or recipe data");return}let O=qs(I,H.id);const G=`node-${u}`,X=T?e.find(ge=>ge.id===T.nodeId):null;let se;if(X)se={x:X.position.x+(T.isOutput?400:-400),y:X.position.y};else if(Mr.current&&ri.current){const ge=ri.current.getBoundingClientRect(),Ce=Mr.current.screenToFlowPosition({x:ge.left+ge.width/2,y:ge.top+ge.height/2}),Pe=320,Ne=300,Ke=50;let Xe={x:Ce.x-Pe/2,y:Ce.y-Ne/2},lt=0;for(;lt<20&&e.some(It=>{const oi=Math.abs(It.position.x-Xe.x),gu=Math.abs(It.position.y-Xe.y);return oi<Pe+Ke&&gu<Ne+Ke});){const Bt=lt/20*Math.PI*2,dr=100+lt*50;Xe={x:Ce.x-Pe/2+Math.cos(Bt)*dr,y:Ce.y-Ne/2+Math.sin(Bt)*dr},lt++}se=Xe}else se={x:Math.random()*400+100,y:Math.random()*300+100};if(((he=hr[H.id])==null?void 0:he.type)==="boiler"){const ge={heatLoss:((be=O.temperatureSettings)==null?void 0:be.heatLoss)??0,coolantTemp:Ki},Ce=eg(H.id,ge,Ki,null,Ki),Pe=hr[H.id],Ne=TM(O.outputs,Ce,!0,Pe,Ki);O={...O,outputs:Ne,temperatureSettings:ge}}const ye={drillConfig:Ot,assemblerConfig:Yt,treeFarmConfig:vr,fireboxConfig:xr};if(FM(O)&&(O=AM(O,T,y,ye,fe,co),O.drillSettings&&Vt({drillHead:O.drillSettings.drillHead,consumable:O.drillSettings.consumable,machineOil:O.drillSettings.machineOil}),O.assemblerSettings&&Qt({outerStage:O.assemblerSettings.outerStage,innerStage:O.assemblerSettings.innerStage,machineOil:O.assemblerSettings.machineOil,tickCircuitDelay:O.assemblerSettings.tickCircuitDelay}),O.treeFarmSettings&&ur({trees:O.treeFarmSettings.trees,harvesters:O.treeFarmSettings.harvesters,sprinklers:O.treeFarmSettings.sprinklers,outputs:O.treeFarmSettings.outputs}),O.fireboxSettings&&Et({fuel:O.fireboxSettings.fuel})),H.id==="m_air_separation_unit"){const ge=kk(fe),Ce=O.outputs.map(Pe=>Pe.product_id==="p_residue"?{...Pe,quantity:parseFloat(ge.toFixed(6))}:Pe);O={...O,outputs:Ce}}const xe=V!==null?V:eo[I.id]??1,ke=zt(),pe={id:G,type:"custom",position:se,data:{recipe:O,machine:H,machineCount:xe,machineCountMode:"free",cappedMachineCount:void 0,displayMode:dt,machineDisplayMode:ht,leftHandles:Math.max(O.inputs.length,1),rightHandles:Math.max(O.outputs.length,1),...ke,globalPollution:fe,isTarget:!1,flows:null,suggestions:[],zoomLevel:Dn},sourcePosition:"right",targetPosition:"left"};return t(ge=>{const Ce=[...ge,pe];return Oe("node"),T&&xe>0&&setTimeout(()=>{var Ke,Xe,lt;const Pe=T.isOutput?"inputs":"outputs";let Ne=-1;if((O.isWasteFacility||O.id==="r_underground_waste_facility")&&!T.isOutput)T.productId==="p_concrete_block"?Ne=2:T.productId==="p_lead_ingot"?Ne=3:Ne=O[Pe].findIndex(et=>et.product_id===T.productId);else if(T.isOutput&&T.isFromHeatSource){const et=Ct(O.machine_id);if(et&&((Ke=hr[et.id])==null?void 0:Ke.type)==="boiler"&&O.inputs.length>=2){const dr=(Xe=O.inputs[0])==null?void 0:Xe.product_id,It=(lt=O.inputs[1])==null?void 0:lt.product_id;dr===It&&It===T.productId||It===T.productId?Ne=1:Ne=O[Pe].findIndex(oi=>oi.product_id===T.productId)}else Ne=O[Pe].findIndex(dr=>dr.product_id===T.productId)}else Ne=O[Pe].findIndex(et=>et.product_id===T.productId);if(Ne!==-1){const et=T.isOutput?T.outputIndex:Ne,Bt=T.isOutput?Ne:T.inputIndex,dr={source:T.isOutput?T.nodeId:G,sourceHandle:`right-${et}`,target:T.isOutput?G:T.nodeId,targetHandle:`left-${Bt}`,type:"custom",animated:!1,data:it};a(It=>c0(dr,It)),En(),Oe("connection")}},50),Ce}),c(ge=>ge+1),Oe(),G},[u,e,t,a,dt,ht,Ot,Yt,vr,xr,co,eo,fe,y,Oe,T,it,zt]),ni=L.useCallback(I=>{t(V=>V.filter(H=>H.id!==I)),a(V=>V.filter(H=>H.source!==I&&H.target!==I)),ne(V=>V.filter(H=>H.recipeBoxId!==I)),En(),Oe("node")},[t,a,Oe]),or=L.useCallback(I=>{var H;U.find(O=>O.recipeBoxId===I.id)?(ne(O=>O.filter(G=>G.recipeBoxId!==I.id)),t(O=>O.map(G=>G.id===I.id?{...G,data:{...G.data,isTarget:!1}}:G))):(H=I.data)!=null&&H.recipe&&(ne(O=>[...O,{id:`target_${$}`,recipeBoxId:I.id}]),te(O=>O+1),t(O=>O.map(G=>G.id===I.id?{...G,data:{...G.data,isTarget:!0}}:G)))},[U,$,t]),wn=L.useCallback((I,V,H,O)=>{var Pe;const G=U.find(Ne=>Ne.id===I);if(!G)return;const X=e.find(Ne=>Ne.id===G.recipeBoxId);if(!X)return;const{recipe:se,machine:ce,machineCount:ye=0}=X.data||{};if(!se)return;const xe=se.isMineshaftDrill||se.id==="r_mineshaft_drill";let ke=se.cycle_time;if((typeof ke!="number"||ke<=0)&&(ke=1),Ur(ce==null?void 0:ce.id)){const Ne=un[ce.id];if((Ne==null?void 0:Ne.type)==="steam_input"&&yi(se)){const Ke=se.tempDependentInputTemp??Tn;ke=Yn(ce.id,Ke,ke)}}(typeof ke!="number"||ke<=0)&&(ke=1);const he=(Pe=$e==null?void 0:$e.flows)==null?void 0:Pe.byNode[G.recipeBoxId];if(!he)return;let be=0,ge=0;if(V==="output"){const Ne=he.outputFlows[H];if(!Ne)return;be=Ne.connected;const Ke=se.outputs[H],Xe=Ke.originalQuantity!==void 0?Ke.originalQuantity:Ke.quantity;ge=xe?Xe:Xe/ke}else{const Ne=he.inputFlows[H];if(!Ne)return;be=Ne.connected;const Ke=se.inputs[H];ge=xe?Ke.quantity:Ke.quantity/ke}if(ge<=0)return;const Ce=(be+O)/ge;Jr(G.recipeBoxId,Ne=>({...Ne,machineCount:Ce})),Oe("machineCount")},[U,e,$e,Oe]),Xo=L.useCallback(I=>{const V=U.find(H=>H.id===I);V&&(ne(H=>H.filter(O=>O.id!==I)),Jr(V.recipeBoxId,H=>({...H,isTarget:!1})))},[U]),fo=L.useCallback((I,V)=>{if(Qe){if(Tt==="target"){or(V);return}else if(Tt==="delete"){ni(V.id);return}}I.shiftKey&&!I.ctrlKey&&!I.altKey?or(V):I.ctrlKey&&I.altKey&&ni(V.id)},[Qe,Tt,or,ni]),Dc=L.useCallback((I,V)=>{var H,O;I.stopPropagation(),ve(V.id),Re(String(((H=V.data)==null?void 0:H.machineCount)??0)),Ae(((O=V.data)==null?void 0:O.machineCountMode)||"free"),de(!0)},[]),mo=L.useRef(e),Ua=L.useRef(o);L.useEffect(()=>{mo.current=e},[e]),L.useEffect(()=>{Ua.current=o},[o]);const ho=L.useCallback(I=>{const V=mo.current.find(H=>H.id===I);V&&qi({recipe:{...V.data.recipe},machine:V.data.machine,machineCount:V.data.machineCount})},[]),Zo=L.useCallback(I=>{if(!ri.current)return;const V=ri.current.getBoundingClientRect();wr({x:I.clientX-V.left,y:I.clientY-V.top})},[]),mu=L.useCallback(I=>{if(!cr||I.button!==0||(I.stopPropagation(),!Mr.current))return;const V=Mr.current.screenToFlowPosition({x:I.clientX,y:I.clientY});V.x-=160,V.y-=150;const H=`node-${u}`,O=zt(),G={id:H,type:"custom",position:V,data:{recipe:cr.recipe,machine:cr.machine,machineCount:cr.machineCount,displayMode:dt,machineDisplayMode:ht,leftHandles:cr.recipe.inputs.length,rightHandles:cr.recipe.outputs.length,...O,globalPollution:fe,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(X=>[...X,G]),c(X=>X+1),qi(null),Oe("node")},[cr,u,dt,ht,fe,t,zt,Oe]),Oc=L.useCallback(I=>{I.button===2&&qi(null)},[]),Ga=L.useCallback((I=!1)=>{var H,O;let V=parseFloat(Ee);if(isNaN(V)||V<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}V=0}if(ue&&!Ie){const G=e.find(ce=>ce.id===ue),X=((H=G==null?void 0:G.data)==null?void 0:H.machineCount)||0;let se=(O=G==null?void 0:G.data)==null?void 0:O.cappedMachineCount;if(Te==="capped"?se=V:Te==="free"&&(se=void 0),I&&X>0&&V!==X){const ce=Fl(e,o),ye=$e==null?void 0:$e.flows;if(ye){const xe=U3(ue,X,V,ce,ye,e);t(ke=>ke.map(pe=>{const he=xe.get(pe.id);return pe.id===ue?{...pe,data:{...pe.data,machineCount:V,machineCountMode:Te,cappedMachineCount:se}}:he!==void 0?{...pe,data:{...pe.data,machineCount:he}}:pe}))}else Jr(ue,xe=>({...xe,machineCount:V,machineCountMode:Te,cappedMachineCount:se}))}else Jr(ue,ce=>({...ce,machineCount:V,machineCountMode:Te,cappedMachineCount:se}))}else Ie&&Jr(Ie,G=>({...G,machineCount:V}));de(!1),ve(null),Re(""),Ae("free"),je(null),Oe("machineCount")},[ue,Ee,Te,Ie,e,o,$e,t,ni,Oe]),hu=L.useCallback(()=>{Ie&&(ni(Ie),_(!0),v(null),k(null),q("product")),de(!1),ve(null),Re(""),Ae("free"),je(null)},[Ie,ni]),Ka=L.useCallback((I,V,H)=>{let O,G;V==="free"?(O="capped",G=H):V==="capped"?(O="locked",G=H):(O="free",G=void 0),t(X=>X.map(se=>se.id!==I?se:{...se,data:{...se.data,machineCountMode:O,cappedMachineCount:G}}))},[t]),Vc=L.useCallback(()=>{const I=_8(e,o);t(I)},[e,o,t]),zc=L.useCallback(()=>{if(U.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}const I=e.map(X=>{var se;return{id:X.id,data:{recipe:X.data.recipe,machineCount:X.data.machineCount,machineName:((se=X.data.machine)==null?void 0:se.name)||""}}}),V=Date.now();yn({phase:"loading",nodeSnapshot:I});const H=e.map(X=>({id:X.id,data:{recipe:X.data.recipe,machine:X.data.machine,machineCount:X.data.machineCount,machineCountMode:X.data.machineCountMode,cappedMachineCount:X.data.cappedMachineCount}})),O=o.map(X=>({id:X.id,source:X.source,target:X.target,sourceHandle:X.sourceHandle,targetHandle:X.targetHandle})),G=new Worker(new URL("/Industrialist-Production-Calculator/assets/lpWorker-BXnY4KG9.js",import.meta.url),{type:"module"});ir.current=G,G.onmessage=X=>{ir.current=null,G.terminate();const se=Date.now()-V,{result:ce,deficiencyResult:ye}=X.data,xe={...ce,elapsedMs:se},ke=ye?{...ye,elapsedMs:se}:null;if(!ce.success&&ce.hasDeficiency){yn(pe=>({...pe,phase:"deficiency_confirm",result:xe,deficiencyResult:ke}));return}yn(pe=>({...pe,phase:"results",result:xe}))},G.onerror=X=>{ir.current=null,G.terminate(),yn(null),console.error("[LP Worker] Error:",X),alert("An error occurred while computing. Check the console for details.")},G.postMessage({nodes:H,edges:O,targetProducts:U,activeWeights:pn,unusedWeights:fn,machines:sn})},[U,e,o,pn,fn,t,Oe]),Bc=L.useCallback(()=>{ir.current&&(ir.current.terminate(),ir.current=null),yn(null)},[]),Hc=L.useCallback(()=>{yn(I=>I?{...I,phase:"results",result:I.deficiencyResult}:null)},[]),$c=L.useCallback(I=>{I!=null&&I.success&&(t(V=>V.map(H=>{const O=I.updates.get(H.id);return O!==void 0?{...H,data:{...H.data,machineCount:O}}:H})),Oe("machineCount")),yn(null)},[t,Oe]),Ya=()=>{if(!y)return[];const I=gt(y.id),V=k3(y.id),H=S3(y.id),O=[V1,H1,$1,q0,C0,E0],G=O.filter(ce=>W3(ce.id).includes(y.id)),X=O.filter(ce=>{if($3(ce.id).includes(y.id))return!0;if(I){if(ce.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(y.id);if(ce.id==="r_liquid_dump"||ce.id==="r_liquid_burner")return!1}return!1}),se=O.filter(ce=>ce.id==="r_liquid_dump"||ce.id==="r_liquid_burner"?(I==null?void 0:I.type)==="fluid":ce.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(y.id):!1);return z==="producers"?[...V,...G]:z==="consumers"?[...H,...X]:z==="disposal"?se:Array.from(new Map([...V,...H,...G,...X,...se].map(ce=>[ce.id,ce])).values())};L.useEffect(()=>{if(p){const I=x==="product"?Ya():kl(w==null?void 0:w.id),V=T?e.find(O=>O.id===T.nodeId):null,H={};I.forEach(O=>{H[O.id]=Uo(O,V,T)}),to(H)}},[p,x,y,w,T,e,z]);const ii=L.useCallback(()=>{t([]),a([]),c(0),ne([]),te(0),Gt({}),Vt(null),Qt(null),ur(null),Et(null),lr(null),En()},[t,a,c,ne,te,Gt,Vt,Qt,ur,Et,lr]),Wc=L.useCallback(()=>{const I=document.createElement("input");I.type="file",I.accept=".json",I.onchange=V=>{var G;const H=(G=V.target.files)==null?void 0:G[0];if(!H)return;const O=new FileReader;O.onload=X=>{try{const se=JSON.parse(X.target.result);if(!se.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const ce=se.canvas.nodes||[],ye=[];if(ce.forEach(pe=>{var be,ge,Ce,Pe,Ne,Ke,Xe,lt;const he=(ge=(be=pe.data)==null?void 0:be.recipe)==null?void 0:ge.machine_id;he&&!Ct(he)&&ye.push(`Machine: ${he}`),(Ne=(Pe=(Ce=pe.data)==null?void 0:Ce.recipe)==null?void 0:Pe.inputs)==null||Ne.forEach(et=>{et.product_id!=="p_variableproduct"&&!gt(et.product_id)&&ye.push(`Product: ${et.product_id}`)}),(lt=(Xe=(Ke=pe.data)==null?void 0:Ke.recipe)==null?void 0:Xe.outputs)==null||lt.forEach(et=>{et.product_id!=="p_variableproduct"&&!gt(et.product_id)&&ye.push(`Product: ${et.product_id}`)})}),ye.length>0){const pe=[...new Set(ye)];alert(`Cannot import canvas - missing items:
${pe.slice(0,10).join(`
`)}${pe.length>10?`
...and ${pe.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const xe=zt(),ke=ce.map(pe=>{var ge,Ce,Pe,Ne;const he=Ct((Ce=(ge=pe.data)==null?void 0:ge.recipe)==null?void 0:Ce.machine_id);let be=(Pe=pe.data)==null?void 0:Pe.recipe;return he&&be&&!((Ne=be.outputs)!=null&&Ne.some(Ke=>Ke.temperature!==void 0))&&(be=qs(be,he.id)),{...pe,data:{...pe.data,recipe:be,machine:he,machineCount:pe.data.machineCount??1,displayMode:dt,machineDisplayMode:ht,...xe,globalPollution:fe,flows:null,suggestions:[]}}});ii(),setTimeout(()=>{t(ke),a(se.canvas.edges||[]),ne(se.canvas.targetProducts||[]),Gt(se.canvas.soldProducts||{}),Yr(se.canvas.favoriteRecipes||[]),Vt(se.canvas.lastDrillConfig||null),Qt(se.canvas.lastAssemblerConfig||null),ur(se.canvas.lastTreeFarmConfig||null),Et(se.canvas.lastFireboxConfig||null),lr(se.canvas.lastWasteFacilityConfig||null),c(se.canvas.nodeId||0),te(se.canvas.targetIdCounter||0),En(),Oe("node")},50),alert("Canvas imported successfully!")}catch(se){alert(`Import failed: ${se.message}`)}},O.readAsText(H)},I.click()},[dt,ht,fe,zt,ii,t,a,ne,Gt,Yr,Vt,Qt,ur,Et,lr,c,te,Oe]),Uc=L.useCallback(I=>{var O;const V=(O=I.target.files)==null?void 0:O[0];if(!V)return;const H=new FileReader;H.onload=G=>{var X,se;try{const ce=JSON.parse(G.target.result),ye=ce.products||ce.machines||ce.recipes,xe=ce.canvas;if(ye){const ke=new Map((ce.products||[]).map(Ce=>[Ce.id,Ce])),pe=Array.from(ke.values()),he=new Set(((X=ce.machines)==null?void 0:X.map(Ce=>Ce.id))||[]),be=(ce.recipes||[]).filter(Ce=>he.has(Ce.machine_id)),ge=[...Hr];if(pe.forEach(Ce=>{const Pe=ge.findIndex(Ne=>Ne.id===Ce.id);Pe>=0?ge[Pe]=Ce:ge.push(Ce)}),m0(ge),((se=ce.machines)==null?void 0:se.length)>0){const Ce=[...sn],Pe=new Set(ce.machines.map(Ke=>Ke.id)),Ne=jn.filter(Ke=>!Pe.has(Ke.machine_id));ce.machines.forEach(Ke=>{const Xe=Ce.findIndex(lt=>lt.id===Ke.id);Xe>=0?Ce[Xe]=Ke:Ce.push(Ke)}),h0(Ce),y0([...Ne,...be])}if(!xe){alert("Data import successful!"),window.location.reload();return}}if(xe){const ke=ce.canvas.nodes||[],pe=[];if(ke.forEach(ge=>{var Pe,Ne,Ke,Xe,lt,et,Bt,dr;const Ce=(Ne=(Pe=ge.data)==null?void 0:Pe.recipe)==null?void 0:Ne.machine_id;Ce&&!Ct(Ce)&&pe.push(`Machine: ${Ce}`),(lt=(Xe=(Ke=ge.data)==null?void 0:Ke.recipe)==null?void 0:Xe.inputs)==null||lt.forEach(It=>{It.product_id!=="p_variableproduct"&&!gt(It.product_id)&&pe.push(`Product: ${It.product_id}`)}),(dr=(Bt=(et=ge.data)==null?void 0:et.recipe)==null?void 0:Bt.outputs)==null||dr.forEach(It=>{It.product_id!=="p_variableproduct"&&!gt(It.product_id)&&pe.push(`Product: ${It.product_id}`)})}),pe.length>0){const ge=[...new Set(pe)];alert(`Cannot import canvas - missing items:
${ge.slice(0,10).join(`
`)}${ge.length>10?`
...and ${ge.length-10} more`:""}`),I.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){I.target.value="";return}const he=zt(),be=ke.map(ge=>{var Ne,Ke,Xe,lt;const Ce=Ct((Ke=(Ne=ge.data)==null?void 0:Ne.recipe)==null?void 0:Ke.machine_id);let Pe=(Xe=ge.data)==null?void 0:Xe.recipe;return Ce&&Pe&&!((lt=Pe.outputs)!=null&&lt.some(et=>et.temperature!==void 0))&&(Pe=qs(Pe,Ce.id)),{...ge,data:{...ge.data,recipe:Pe,machine:Ce,machineCount:ge.data.machineCount??1,displayMode:dt,machineDisplayMode:ht,...he,globalPollution:fe,flows:null,suggestions:[]}}});ii(),setTimeout(()=>{t(be),a(ce.canvas.edges||[]),ne(ce.canvas.targetProducts||[]),Gt(ce.canvas.soldProducts||{}),Yr(ce.canvas.favoriteRecipes||[]),Vt(ce.canvas.lastDrillConfig||null),Qt(ce.canvas.lastAssemblerConfig||null),ur(ce.canvas.lastTreeFarmConfig||null),Et(ce.canvas.lastFireboxConfig||null),lr(ce.canvas.lastWasteFacilityConfig||null),c(ce.canvas.nodeId||0),te(ce.canvas.targetIdCounter||0),En(),Oe("node")},50),alert("Canvas import successful!")}}catch(ce){alert(`Import failed: ${ce.message}`)}},H.readAsText(V),I.target.value=""},[dt,ht,fe,zt,ii,t,a,ne,Gt,Yr,Vt,Qt,ur,c,te]);L.useCallback(()=>{const I=new Blob([JSON.stringify({products:Hr,machines:sn,recipes:jn},null,2)],{type:"application/json"}),V=URL.createObjectURL(I),H=document.createElement("a");H.href=V,H.download=`industrialist-data-${Date.now()}.json`,H.click(),URL.revokeObjectURL(V)},[Hr,sn,jn]);const Gc=L.useCallback(()=>{const I={nodes:e.map(Zr),edges:o,targetProducts:U,nodeId:u,targetIdCounter:$,soldProducts:nr,favoriteRecipes:Kt,lastDrillConfig:Ot,lastAssemblerConfig:Yt,lastTreeFarmConfig:vr,lastFireboxConfig:xr,lastWasteFacilityConfig:Qr},V=new Blob([JSON.stringify({canvas:I},null,2)],{type:"application/json"}),H=URL.createObjectURL(V),O=document.createElement("a");O.href=H,O.download=`industrialist-canvas-${Date.now()}.json`,O.click(),URL.revokeObjectURL(H)},[e,o,U,u,$,nr,Kt,Ot,Yt,vr,xr,Qr,Zr]);L.useCallback(()=>{const I=new Blob([JSON.stringify({products:Hr,machines:sn,recipes:jn,canvas:{nodes:e.map(Zr),edges:o,targetProducts:U,nodeId:u,targetIdCounter:$,soldProducts:nr,favoriteRecipes:Kt,lastDrillConfig:Ot,lastAssemblerConfig:Yt,lastTreeFarmConfig:vr,lastFireboxConfig:xr,lastWasteFacilityConfig:Qr}},null,2)],{type:"application/json"}),V=URL.createObjectURL(I),H=document.createElement("a");H.href=V,H.download=`industrialist-export-${Date.now()}.json`,H.click(),URL.revokeObjectURL(V)},[e,o,U,u,$,nr,Kt,Ot,Yt,vr,xr,Zr]);const Qa=L.useCallback(()=>{const I=Ta(),V=Pa(),H=ou();m0(I),h0(V),y0(H),Oe("node")},[Oe]),Kc=L.useCallback(I=>{const V=zt(),H=I.nodes.map(O=>{var se,ce,ye,xe;const G=Ct((ce=(se=O.data)==null?void 0:se.recipe)==null?void 0:ce.machine_id);let X=(ye=O.data)==null?void 0:ye.recipe;return G&&X&&!((xe=X.outputs)!=null&&xe.some(ke=>ke.temperature!==void 0))&&(X=qs(X,G.id)),{...O,data:{...O.data,recipe:X,machine:G,machineCount:O.data.machineCount??1,displayMode:dt,machineDisplayMode:ht,...V,globalPollution:fe,flows:null,suggestions:[]}}});ii(),setTimeout(()=>{t(H),a(I.edges||[]),ne(I.targetProducts||[]),Gt(I.soldProducts||{}),Yr(I.favoriteRecipes||[]),Vt(I.lastDrillConfig||null),Qt(I.lastAssemblerConfig||null),ur(I.lastTreeFarmConfig||null),Et(I.lastFireboxConfig||null),lr(I.lastWasteFacilityConfig||null),c(I.nodeId||0),te(I.targetIdCounter||0),En(),Oe("node")},50)},[dt,ht,fe,zt,ii,t,a,ne,Gt,Yr,Vt,Qt,ur,Et,lr,c,te,Oe]),Yc=L.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(e6(),v3(Yl),x3(Ql),w3(Xl),t([]),a([]),c(0),ne([]),te(0),Gt({}),Vt(null),Qt(null),ur(null),Et(null),lr(null),window.location.reload())},[t,a,Hr,sn,jn]);L.useEffect(()=>{const I=V=>{if(V.key==="industrialist_theme")try{const H=JSON.parse(V.newValue);Lr({edgePath:H.edgePath||"orthogonal",edgeStyle:H.edgeStyle||"animated"})}catch(H){console.error("Error parsing theme from storage:",H)}};return window.addEventListener("storage",I),()=>window.removeEventListener("storage",I)},[]),L.useEffect(()=>{if(!st){const I=Al();Lr({edgePath:I.edgePath||"orthogonal",edgeStyle:I.edgeStyle||"animated"})}},[st]);const Qc=Hr.filter(I=>I.name.toLowerCase().includes(M.toLowerCase())&&(A==="all"||I.type===A)).sort((I,V)=>C==="name_asc"?I.name.localeCompare(V.name):C==="name_desc"?V.name.localeCompare(I.name):C==="price_asc"?(I.price==="Variable"?1/0:I.price)-(V.price==="Variable"?1/0:V.price):C==="price_desc"?(V.price==="Variable"?-1/0:V.price)-(I.price==="Variable"?-1/0:I.price):C==="rp_asc"?(I.rp_multiplier==="Variable"?1/0:I.rp_multiplier)-(V.rp_multiplier==="Variable"?1/0:V.rp_multiplier):(V.rp_multiplier==="Variable"?-1/0:V.rp_multiplier)-(I.rp_multiplier==="Variable"?-1/0:I.rp_multiplier)),Xa=sn.filter(I=>{const V=I.name.toLowerCase().includes(M.toLowerCase()),H=I.id==="m_mineshaft_drill"||I.id==="m_logic_assembler"||I.id==="m_tree_farm"||I.id==="m_underground_waste_facility"||I.id==="m_liquid_dump"||I.id==="m_liquid_burner"||kl(I.id).length>0,O=D==="all"||I.tier!==void 0&&I.tier.toString()===D;return V&&H&&O}).sort((I,V)=>I.name.localeCompare(V.name)),Xc=I=>{if(I.id==="m_mineshaft_drill")Er(V1,1);else if(I.id==="m_logic_assembler")Er(H1,1);else if(I.id==="m_tree_farm")Er($1,1);else if(I.id==="m_underground_waste_facility")Er(q0,1);else if(I.id==="m_liquid_dump")Er(C0,1);else if(I.id==="m_liquid_burner")Er(E0,1);else{k(I);return}Go()},yu=(x==="product"?Ya():kl(w==null?void 0:w.id)).sort((I,V)=>{const H=Kt.includes(I.id),O=Kt.includes(V.id);if(H&&!O)return-1;if(!H&&O)return 1;const G=Ct(I.machine_id),X=Ct(V.machine_id);return((G==null?void 0:G.name)||"").localeCompare((X==null?void 0:X.name)||"")}),Zc=I=>{Yr(V=>V.includes(I)?V.filter(H=>H!==I):[...V,I])};return d.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[d.jsxs(x4,{ref:ri,nodes:e,edges:o,onNodesChange:Ci,onEdgesChange:oo,onConnect:pu,onNodeClick:fo,onNodeDoubleClick:Dc,onMouseMove:Zo,onClick:mu,onContextMenu:Oc,onInit:I=>{Mr.current=I,At(I.getZoom())},onMoveEnd:(I,V)=>{At(V.zoom)},nodeTypes:h8,edgeTypes:y8,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:it.edgePath==="straight"?"straight":it.edgePath==="orthogonal"?"smoothstep":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:it.edgeStyle==="animated"||it.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[d.jsx(M4,{color:"#333",gap:16,size:1}),!Qe&&d.jsx(R4,{className:(Rt||Nt)&&!rr?"controls-shifted":"",position:"bottom-left"}),!Qe&&d.jsx(G4,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),d.jsx(Na,{position:"top-left",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:d.jsx("div",{className:`left-panel-container ${rr?"collapsed":""}`,style:Qe?{maxWidth:"100%"}:{},children:d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[d.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[d.jsxs("div",{className:"stats-panel",children:[d.jsx("h3",{className:"stats-title",children:$o}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Power:"}),d.jsx("div",{className:"stat-value",children:Ap(Je.totalPower)})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Pollution:"}),d.jsxs("div",{className:"stat-value",style:{color:Je.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Je.totalPollution.toFixed(2),"%/hr"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Min Models:"}),d.jsx("div",{className:"stat-value",children:Je.totalModelCount.toFixed(0)})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Profit:"}),d.jsxs("div",{className:"stat-value",style:{color:Ba>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",kr(Ba),"/s"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("div",{className:"stat-label",children:"Total Cost:"}),d.jsxs("div",{className:"stat-value",children:["$",kr(lo.totalCost)]})]})]})]}),d.jsxs("div",{className:"flex-col action-buttons-container",children:[d.jsx("button",{onClick:po,className:"btn btn-primary",children:"+ Select Recipe"}),d.jsx("button",{onClick:()=>{B(!0),me("targets")},className:"btn btn-secondary",children:"View Recipes"}),d.jsx("button",{onClick:zc,className:"btn btn-secondary",disabled:hn!==null,children:hn!==null?"Computing...":"Compute Machines"}),d.jsx("button",{onClick:Vc,className:"btn btn-secondary",children:"Auto Layout"}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:()=>Wt(!Rt),className:"btn btn-secondary btn-square",title:Rt?"Close more statistics":"Open more statistics",children:Rt?"":""}),d.jsx("button",{onClick:()=>Ut(!rr),className:"btn btn-secondary btn-square btn-panel-toggle",title:rr?"Show left panel":"Hide left panel",children:rr?"":""})]})]})]}),(Rt||Nt)&&d.jsxs("div",{className:`extended-panel ${Nt?"closing":""}`,children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Qe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Qe?"wrap":"nowrap",gap:Qe?"10px":"0"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Qe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Qe&&d.jsx("button",{onClick:()=>Wt(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),d.jsxs("div",{style:{display:"flex",gap:Qe?"5px":"10px",flexWrap:"wrap"},children:[d.jsx("button",{onClick:()=>Bo(I=>I==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:dt==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:dt==="perSecond"?"Per Second":"Per Cycle"}),d.jsx("button",{onClick:()=>Ji(I=>I==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:ht==="perMachine"?"Switch to total display":"Switch to per-machine display",children:ht==="perMachine"?"Per Machine":"Total"})]})]}),d.jsxs("div",{className:"extended-panel-content",children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("button",{onClick:()=>ei(I=>!I),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:gr?"Resume pollution change":"Pause pollution change",children:gr?"":""}),d.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:fe,onFocus:()=>Or(!0),onBlur:I=>{Or(!1);const V=I.target.value,H=parseFloat(V);ot(!isNaN(H)&&isFinite(H)?parseFloat(H.toFixed(4)):0)},onChange:I=>ot(I.target.value===""?"":parseFloat(I.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Wo.length===0?d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Wo.map(I=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:I.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:I.product.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[kr(I.excessRate),"/s"]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof I.product.price=="number"&&d.jsxs("div",{style:{color:I.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",kr(I.product.price*I.excessRate),"/s"]}),d.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[d.jsx("input",{type:"checkbox",checked:I.isSold,onChange:V=>Gt(H=>({...H,[I.productId]:V.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},I.productId))})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),vn.length===0?d.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:vn.map(I=>d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:I.product.name}),d.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",kr(I.deficiencyRate),"/s"]})]}),d.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[I.affectedNodes.length," node",I.affectedNodes.length!==1?"s":""," affected"]})]},I.productId))})]})]})]})]})})}),d.jsxs(Na,{position:"top-right",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:[Qe&&d.jsxs("div",{className:"mobile-controls-container",children:[d.jsx("button",{onClick:()=>dn(I=>I==="target"?"pan":"target"),className:`btn ${Tt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),d.jsx("button",{onClick:()=>dn(I=>I==="delete"?"pan":"delete"),className:`btn ${Tt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),d.jsxs("div",{className:`menu-container ${We?"":"closed"}`,style:Qe?{maxWidth:"calc(100vw - 10px)"}:{},children:[d.jsx("button",{onClick:()=>Be(!We),className:"btn btn-secondary btn-menu-toggle",style:Qe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:We?">":"<"}),d.jsxs("div",{className:"menu-buttons",style:Qe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[d.jsx("button",{onClick:()=>{ii(),Oe("node")},className:"btn btn-secondary",children:"Clear All"}),d.jsx("button",{onClick:()=>ut(!0),className:"btn btn-secondary",children:"Saves"}),d.jsx("button",{onClick:()=>tr(!0),className:"btn btn-secondary",children:"Data"}),d.jsx("button",{onClick:Yc,className:"btn btn-secondary",children:"Restore Defaults"}),d.jsx("button",{onClick:()=>at(!0),className:"btn btn-secondary",children:"Theme Editor"}),d.jsx("button",{onClick:()=>bt(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),d.jsx("input",{ref:ki,type:"file",accept:".json",style:{display:"none"},onChange:Uc}),(oe||h)&&d.jsx("div",{className:"modal-overlay",onClick:hu,children:oe&&d.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),style:{width:"450px"},children:[d.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),d.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[d.jsx("button",{onClick:()=>{const I=["free","capped","locked"],H=(I.indexOf(Te)+1)%I.length,O=I[H];Ae(O)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:Te==="locked"?"#ef4444":Te==="capped"?"#f59e0b":"var(--bg-secondary)",color:Te==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${Te==="free"?"Free (LP/suggestions can change)":Te==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:Te==="free"?" Free":Te==="capped"?" Cap":" Lock"}),d.jsx("input",{type:"number",min:"0",step:"0.1",value:Ee,onChange:I=>Re(I.target.value),onKeyPress:I=>{I.key==="Enter"&&Ga(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),d.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[Te==="free"&&"Free: LP solver and suggestions can modify this count",Te==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Ee)||0} (the value when Apply is pressed)`,Te==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ue&&!Ie&&d.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:d.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),d.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),d.jsxs("div",{style:{display:"flex",gap:"10px"},children:[d.jsx("button",{onClick:hu,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),d.jsx("button",{onClick:()=>Ga(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ue&&!Ie&&d.jsx("button",{onClick:()=>Ga(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),p&&d.jsx("div",{className:"modal-overlay",onClick:Go,children:d.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),children:[d.jsx("h2",{className:"modal-title",children:y?`Recipes for ${y.name}`:w?`Recipes for ${w.name}`:"Select Product or Machine"}),!y&&!w?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mb-lg",children:d.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[d.jsx("button",{onClick:()=>q("product"),className:`btn ${x==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),d.jsx("button",{onClick:()=>q("machine"),className:`btn ${x==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),x==="product"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-lg flex-col",children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:M,onChange:I=>j(I.target.value),className:"input"}),d.jsxs("div",{className:"flex-row",children:[d.jsxs("select",{value:A,onChange:I=>P(I.target.value),className:"select",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"item",children:"Items Only"}),d.jsx("option",{value:"fluid",children:"Fluids Only"})]}),d.jsxs("select",{value:C,onChange:I=>N(I.target.value),className:"select",children:[d.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),d.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),d.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),d.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),d.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),d.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),d.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[d.jsxs("div",{className:"product-table-header",children:[d.jsx("div",{children:"Product"}),d.jsx("div",{className:"text-right",children:"Price"}),d.jsx("div",{className:"text-right",children:"RP Mult"})]}),Qc.map(I=>d.jsxs("div",{onClick:()=>v(I),className:"product-row",children:[d.jsxs("div",{children:[d.jsx("div",{className:"product-name",children:I.name}),d.jsx("div",{className:"product-type",children:I.type==="item"?" Item":" Fluid"})]}),d.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:I.price==="Variable"?"Variable":`${kr(I.price)}`}),d.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:I.rp_multiplier==="Variable"?"Variable":I.rp_multiplier>=1e3?`${kr(I.rp_multiplier)}x`:`${I.rp_multiplier.toFixed(1)}x`})]},I.id))]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[d.jsx("input",{type:"text",placeholder:"Search machines...",value:M,onChange:I=>j(I.target.value),className:"input",style:{flex:3}}),d.jsxs("select",{value:D,onChange:I=>Z(I.target.value),className:"select",style:{flex:1},children:[d.jsx("option",{value:"all",children:"All Tiers"}),d.jsx("option",{value:"1",children:"Tier 1"}),d.jsx("option",{value:"2",children:"Tier 2"}),d.jsx("option",{value:"3",children:"Tier 3"}),d.jsx("option",{value:"4",children:"Tier 4"}),d.jsx("option",{value:"5",children:"Tier 5"})]})]}),d.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:Xa.length===0?d.jsx("div",{className:"empty-state",children:"No machines found"}):Xa.map(I=>d.jsxs("div",{onClick:()=>Xc(I),className:"recipe-card",style:{cursor:"pointer"},children:[d.jsx("div",{className:"recipe-machine",style:{color:I.tier===1?"var(--tier-1-color)":I.tier===2?"var(--tier-2-color)":I.tier===3?"var(--tier-3-color)":I.tier===4?"var(--tier-4-color)":(I.tier===5,"var(--tier-5-color)")},children:I.name}),d.jsx("div",{className:"recipe-details",style:{color:"#999"},children:I.id==="m_mineshaft_drill"||I.id==="m_logic_assembler"||I.id==="m_tree_farm"?"Click to create box":`${kl(I.id).length} recipe(s)`})]},I.id))})]})]}):d.jsxs(d.Fragment,{children:[E==="button"&&d.jsx("button",{onClick:()=>{v(null),k(null)},className:"btn btn-secondary btn-back",children:" Back"}),y&&d.jsx("div",{className:"mb-lg",children:d.jsxs("select",{value:z,onChange:I=>F(I.target.value),className:"select",children:[d.jsx("option",{value:"all",children:"All Recipes"}),d.jsxs("option",{value:"producers",children:["Producers (Outputs ",y.name,")"]}),d.jsxs("option",{value:"consumers",children:["Consumers (Uses ",y.name,")"]}),d.jsx("option",{value:"disposal",children:"Disposal"})]})}),d.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:yu.length===0?d.jsx("div",{className:"empty-state",children:"No recipes found"}):yu.map(I=>{const V=Ct(I.machine_id),H=Kt.includes(I.id),O=eo[I.id]??1;return V&&I.inputs&&I.outputs?d.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[d.jsx("button",{onClick:G=>{G.stopPropagation(),Zc(I.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:H?"none":"grayscale(100%)",opacity:H?1:.4,transition:"all 0.2s"},onMouseEnter:G=>{G.currentTarget.style.transform="scale(1.2)",G.currentTarget.style.opacity="1"},onMouseLeave:G=>{G.currentTarget.style.transform="scale(1)",G.currentTarget.style.opacity=H?"1":"0.4"},title:H?"Remove from favorites":"Add to favorites",children:""}),d.jsx("div",{onClick:G=>{G.stopPropagation();const X=O<=0?1:O,se=Er(I,X);f(!0),_(!1),setTimeout(()=>{je(se),ve(se),Re(String(X)),de(!0),f(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:T&&O<=0?"var(--delete-bg)":"var(--color-primary)",color:T&&O<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:T&&O<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:G=>{T&&O<=0?(G.currentTarget.style.background="var(--delete-hover-bg)",G.currentTarget.style.color="var(--delete-hover-color)"):(G.currentTarget.style.background="var(--color-primary-hover)",G.currentTarget.style.transform="scale(1.05)",G.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:G=>{T&&O<=0?(G.currentTarget.style.background="var(--delete-bg)",G.currentTarget.style.color="var(--delete-color)"):(G.currentTarget.style.background="var(--color-primary)",G.currentTarget.style.transform="scale(1)",G.currentTarget.style.borderColor="transparent")},title:T?O<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(O)?O:O.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(O)?O:O.toFixed(2)}),d.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:G=>{if(G.stopPropagation(),O<=0){const se=Er(I,1);f(!0),_(!1),setTimeout(()=>{je(se),ve(se),Re("1"),de(!0),f(!1)},50)}else Er(I),Go()},children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[d.jsx("div",{className:"recipe-machine",style:{color:V.tier===1?"var(--tier-1-color)":V.tier===2?"var(--tier-2-color)":V.tier===3?"var(--tier-3-color)":V.tier===4?"var(--tier-4-color)":(V.tier===5,"var(--tier-5-color)")},children:V.name}),I.power_type==="HV"&&d.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),d.jsxs("div",{className:"recipe-details",children:[d.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),d.jsx("span",{children:I.inputs.map(G=>L1(G,gt)).join(", ")})]}),d.jsxs("div",{className:"recipe-details",children:[d.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),d.jsx("span",{children:I.outputs.map(G=>L1(G,gt)).join(", ")})]})]})]},I.id):null})})]}),d.jsx("button",{onClick:Go,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),Y&&d.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:d.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[d.jsx("h2",{className:"modal-title",children:"Target Products"}),d.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:U.length===0?d.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):U.map(I=>{var ke;const V=e.find(pe=>pe.id===I.recipeBoxId);if(!V)return null;const{recipe:H,machine:O,machineCount:G=0}=V.data||{};if(!H)return null;let X=H.cycle_time;if((typeof X!="number"||X<=0)&&(X=1),Ur(O==null?void 0:O.id)){const pe=un[O.id];if((pe==null?void 0:pe.type)==="steam_input"&&yi(H)){const he=H.tempDependentInputTemp??Tn;X=Yn(O.id,he,X)}}(typeof X!="number"||X<=0)&&(X=1);const ce=H.isMineshaftDrill||H.id==="r_mineshaft_drill",ye=(ke=$e==null?void 0:$e.flows)==null?void 0:ke.byNode[I.recipeBoxId],xe={inputs:{},outputs:{}};return H.inputs.forEach((pe,he)=>{var be;if(typeof pe.quantity=="number"){const Ce=(ce?pe.quantity:pe.quantity/X)*G,Pe=((be=ye==null?void 0:ye.inputFlows[he])==null?void 0:be.connected)||0;xe.inputs[he]={totalRate:Ce,connectedFlow:Pe,deficiency:Math.max(0,Ce-Pe)}}}),H.outputs.forEach((pe,he)=>{var ge;const be=pe.quantity;if(typeof be=="number"){const Pe=(ce?be:be/X)*G,Ne=((ge=ye==null?void 0:ye.outputFlows[he])==null?void 0:ge.connected)||0;xe.outputs[he]={totalRate:Pe,connectedFlow:Ne,excess:Math.max(0,Pe-Ne)}}}),d.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:H.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",G.toFixed(4)]})]}),d.jsx("button",{onClick:()=>Xo(I.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),H.inputs.map((pe,he)=>{const be=xe.inputs[he];return be?d.jsx(El,{productName:mi(pe.product_id,gt),connectedFlow:be.connectedFlow,currentExcess:be.deficiency,onTargetExcessCommit:ge=>wn(I.id,"input",he,ge),styleType:"input"},he):null})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),H.outputs.map((pe,he)=>{const be=xe.outputs[he];return be?d.jsx(El,{productName:mi(pe.product_id,gt),connectedFlow:be.connectedFlow,currentExcess:be.excess,onTargetExcessCommit:ge=>wn(I.id,"output",he,ge),styleType:"output"},he):null})]})]})]},I.id)})}),d.jsx("button",{onClick:()=>Q(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),ie&&d.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:d.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[d.jsx("h2",{className:"modal-title",children:"Recipes"}),d.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[d.jsx("button",{onClick:()=>me("targets"),className:J==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:J==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),d.jsx("button",{onClick:()=>me("canvas"),className:J==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:J==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),J==="canvas"&&d.jsx("div",{style:{marginBottom:"15px"},children:d.jsxs("select",{value:ti,onChange:I=>pt(I.target.value),className:"select",style:{width:"100%"},children:[d.jsx("option",{value:"all",children:"All Recipes"}),d.jsx("option",{value:"excess",children:"Has Excess"}),d.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),d.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:J==="targets"?d.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[d.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),d.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d.jsx("button",{onClick:()=>{_n(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),mn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),d.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:I=>I.preventDefault(),onDrop:I=>{I.preventDefault(),_t&&_t!=="Deficiencies"&&fn.includes(_t)&&(mn(V=>V.filter(H=>H!==_t)),_n(V=>[...V,_t])),Xr(null),Xt(null)},children:pn.length===0?d.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):pn.map((I,V)=>{const H=pn.length,O=H>1?V/(H-1):0,G=Math.round(239-205*O),X=Math.round(68+129*O),se=Math.round(68+26*O),ce=`rgb(${G}, ${X}, ${se})`;return d.jsx("div",{draggable:I!=="Deficiencies",onDragStart:()=>I!=="Deficiencies"&&Xr(I),onDragOver:ye=>{ye.preventDefault(),_t&&_t!==I&&I!=="Deficiencies"&&Xt(V)},onDragLeave:()=>Xt(null),onDrop:ye=>{ye.preventDefault(),ye.stopPropagation(),_t&&_t!==I&&I!=="Deficiencies"&&(fn.includes(_t)?(mn(xe=>xe.filter(ke=>ke!==_t)),_n(xe=>{const ke=[...xe];return ke.splice(V,0,_t),ke})):pn.includes(_t)&&_n(xe=>{const ke=xe.filter(he=>he!==_t),pe=ke.indexOf(I);return ke.splice(pe,0,_t),ke})),Xt(null),Xr(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${ce}`,borderRadius:"var(--radius-sm)",cursor:I==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:I==="Deficiencies"?.7:_t===I?.5:1,boxShadow:On===V&&I!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:On===V&&I!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{Xr(null),Xt(null)},title:I==="Deficiencies"?"Deficiencies must always be active":"",children:I},I)})})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),d.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:I=>I.preventDefault(),onDrop:I=>{I.preventDefault(),_t&&_t!=="Deficiencies"&&pn.includes(_t)&&(_n(V=>V.filter(H=>H!==_t)),mn(V=>[...V,_t])),Xr(null)},children:fn.length===0?d.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):fn.map(I=>d.jsx("div",{draggable:!0,onDragStart:()=>Xr(I),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>Xr(null),children:I},I))})]})]})]}),d.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),d.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[d.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),d.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:U.length===0?d.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):U.map(I=>{var ke;const V=e.find(pe=>pe.id===I.recipeBoxId);if(!V)return null;const{recipe:H,machine:O,machineCount:G=0}=V.data||{};if(!H)return null;let X=H.cycle_time;if((typeof X!="number"||X<=0)&&(X=1),Ur(O==null?void 0:O.id)){const pe=un[O.id];if((pe==null?void 0:pe.type)==="steam_input"&&yi(H)){const he=H.tempDependentInputTemp??Tn;X=Yn(O.id,he,X)}}(typeof X!="number"||X<=0)&&(X=1);const ce=H.isMineshaftDrill||H.id==="r_mineshaft_drill",ye=(ke=$e==null?void 0:$e.flows)==null?void 0:ke.byNode[I.recipeBoxId],xe={inputs:{},outputs:{}};return H.inputs.forEach((pe,he)=>{var be;if(typeof pe.quantity=="number"){const Ce=(ce?pe.quantity:pe.quantity/X)*G,Pe=((be=ye==null?void 0:ye.inputFlows[he])==null?void 0:be.connected)||0;xe.inputs[he]={totalRate:Ce,connectedFlow:Pe,deficiency:Math.max(0,Ce-Pe)}}}),H.outputs.forEach((pe,he)=>{var ge;const be=pe.quantity;if(typeof be=="number"){const Pe=(ce?be:be/X)*G,Ne=((ge=ye==null?void 0:ye.outputFlows[he])==null?void 0:ge.connected)||0;xe.outputs[he]={totalRate:Pe,connectedFlow:Ne,excess:Math.max(0,Pe-Ne)}}}),d.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:H.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",G.toFixed(4)]})]}),d.jsx("button",{onClick:()=>Xo(I.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),H.inputs.map((pe,he)=>{const be=xe.inputs[he];return be?d.jsx(El,{productName:mi(pe.product_id,gt),connectedFlow:be.connectedFlow,currentExcess:be.deficiency,onTargetExcessCommit:ge=>wn(I.id,"input",he,ge),styleType:"input"},he):null})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),H.outputs.map((pe,he)=>{const be=xe.outputs[he];return be?d.jsx(El,{productName:mi(pe.product_id,gt),connectedFlow:be.connectedFlow,currentExcess:be.excess,onTargetExcessCommit:ge=>wn(I.id,"output",he,ge),styleType:"output"},he):null})]})]})]},I.id)})})]})]}):d.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?d.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(I=>{var ye;if(ti==="all")return!0;const{recipe:V,machineCount:H=0}=I.data||{};if(!V)return!1;let O=V.cycle_time;(typeof O!="number"||O<=0)&&(O=1);const G=(ye=$e==null?void 0:$e.flows)==null?void 0:ye.byNode[I.id];if(!G)return!1;const X=V.isMineshaftDrill||V.id==="r_mineshaft_drill";let se=!1,ce=!1;return V.inputs.forEach((xe,ke)=>{var pe;if(typeof xe.quantity=="number"){const be=(X?xe.quantity:xe.quantity/O)*H,ge=((pe=G.inputFlows[ke])==null?void 0:pe.connected)||0;Math.max(0,be-ge)>.001&&(ce=!0)}}),V.outputs.forEach((xe,ke)=>{var he;const pe=xe.originalQuantity!==void 0?xe.originalQuantity:xe.quantity;if(typeof pe=="number"){const ge=(X?pe:pe/O)*H,Ce=((he=G.outputFlows[ke])==null?void 0:he.connected)||0;Math.max(0,ge-Ce)>.001&&(se=!0)}}),ti==="excess"?se:ti==="deficiency"?ce:!0}).map(I=>{const{recipe:V,machine:H,machineCount:O=0,machineCountMode:G="free",cappedMachineCount:X}=I.data||{};if(!V||!H)return null;let se=V.cycle_time;if((typeof se!="number"||se<=0)&&(se=1),Ur(H==null?void 0:H.id)){const pe=un[H.id];if((pe==null?void 0:pe.type)==="steam_input"&&yi(V)){const he=V.tempDependentInputTemp??Tn;se=Yn(H.id,he,se)}}const ye=V.power_consumption;let xe="Variable";typeof ye=="number"?xe=Ap(ye*O):typeof ye=="object"&&ye!==null&&"max"in ye&&(xe=`${Ap(ye.max*O)} (max)`);const ke=typeof V.pollution=="number"?V.pollution*O:0;return d.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:V.name}),d.jsxs("div",{style:{marginBottom:"8px"},children:[d.jsx("div",{style:{color:H.tier===1?"var(--tier-1-color)":H.tier===2?"var(--tier-2-color)":H.tier===3?"var(--tier-3-color)":H.tier===4?"var(--tier-4-color)":(H.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:H.name}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",kr(Math.ceil(O)*(typeof H.cost=="number"?H.cost:0))]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof se=="number"?`${se.toFixed(2)}s`:"Variable"]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",xe]}),d.jsxs("div",{children:[d.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",ke.toFixed(2),"%/hr"]})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),V.inputs.map((pe,he)=>{var et,Bt;const be=V.isMineshaftDrill||V.id==="r_mineshaft_drill",ge=pe.quantity,Pe=(typeof ge=="number"?be?ge:ge/se:0)*O,Ne=(et=$e==null?void 0:$e.flows)==null?void 0:et.byNode[I.id],Ke=((Bt=Ne==null?void 0:Ne.inputFlows[he])==null?void 0:Bt.connected)||0,lt=Math.max(0,Pe-Ke)>.001;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:lt?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:lt?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),d.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:mi(pe.product_id,gt)}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ge=="number"?kr(Pe):"Var","/s"]})]},he)})]}),d.jsxs("div",{children:[d.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),V.outputs.map((pe,he)=>{var et,Bt;const be=V.isMineshaftDrill||V.id==="r_mineshaft_drill",ge=pe.originalQuantity!==void 0?pe.originalQuantity:pe.quantity,Pe=(typeof ge=="number"?be?ge:ge/se:0)*O,Ne=(et=$e==null?void 0:$e.flows)==null?void 0:et.byNode[I.id],Ke=((Bt=Ne==null?void 0:Ne.outputFlows[he])==null?void 0:Bt.connected)||0,lt=Math.max(0,Pe-Ke)>.001;return d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:lt?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:lt?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),d.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:mi(pe.product_id,gt)}),d.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ge=="number"?kr(Pe):"Var","/s"]})]},he)})]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[d.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),d.jsx("input",{type:"number",min:"0",step:"0.1",value:Si[I.id]!==void 0?Si[I.id]:O.toFixed(2),onFocus:()=>{ro(pe=>({...pe,[I.id]:O.toFixed(2)}))},onChange:pe=>{ro(he=>({...he,[I.id]:pe.target.value}))},onBlur:()=>{const pe=parseFloat(Si[I.id]);!isNaN(pe)&&pe>=0&&(Jr(I.id,he=>({...he,machineCount:pe})),Oe("machineCount")),ro(he=>{const be={...he};return delete be[I.id],be})},onKeyPress:pe=>{pe.key==="Enter"&&pe.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),d.jsx("button",{onClick:()=>{const pe=["free","capped","locked"],be=(pe.indexOf(G)+1)%pe.length,ge=pe[be];t(Ce=>Ce.map(Pe=>Pe.id!==I.id?Pe:{...Pe,data:{...Pe.data,machineCountMode:ge,cappedMachineCount:ge==="free"?void 0:O}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:G==="locked"?"#ef4444":G==="capped"?"#f59e0b":"var(--bg-secondary)",color:G==="free"?"var(--text-primary)":"#fff",border:G==="free"?"2px solid var(--border-primary)":"none"},title:G==="free"?"Free: LP/suggestions can change":G==="capped"?`Capped: Max ${(X==null?void 0:X.toFixed(2))||O.toFixed(2)}`:"Locked: Cannot be changed",children:G==="free"?" Free":G==="capped"?" Cap":" Lock"}),d.jsx("button",{onClick:()=>{Mr.current&&(Mr.current.fitView({nodes:[{id:I.id}],padding:.5,duration:500}),B(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},I.id)})})})}),d.jsx("button",{onClick:()=>B(!1),className:"btn btn-secondary",children:"Close"})]})}),hn&&d.jsx(m8,{phase:hn.phase,nodeSnapshot:hn.nodeSnapshot,result:hn.result,deficiencyResult:hn.deficiencyResult,onCancel:Bc,onConfirmDeficiency:Hc,onApply:$c}),st&&d.jsx(n3,{onClose:()=>at(!1)}),Mt&&d.jsx(i3,{onClose:()=>bt(!1)}),qt&&d.jsx(f3,{onClose:()=>ut(!1),onLoad:Kc,currentCanvas:{nodes:e.map(Zr),edges:o,targetProducts:U,nodeId:u,targetIdCounter:$,soldProducts:nr,favoriteRecipes:Kt,lastDrillConfig:Ot,lastAssemblerConfig:Yt,lastTreeFarmConfig:vr,lastFireboxConfig:xr,lastWasteFacilityConfig:Qr},onImport:Wc,onExportCanvas:Gc}),Cr&&d.jsx(C3,{onClose:()=>tr(!1),defaultProducts:Yl,defaultMachines:Ql,defaultRecipes:Xl,onDataChange:Qa}),Qe&&Tt!=="pan"&&d.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Tt==="target"&&" Target Mode: Tap nodes to mark as targets",Tt==="delete"&&" Delete Mode: Tap nodes to delete"]}),cr&&d.jsxs("div",{className:"pending-node-preview",style:{left:`${Ho.x+20}px`,top:`${Ho.y+20}px`},children:[d.jsx("div",{className:"pending-node-recipe-name",children:cr.recipe.name}),d.jsx("div",{className:"pending-node-machine-name",children:cr.machine.name}),d.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",cr.machineCount]}),d.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}B5.createRoot(document.getElementById("root")).render(d.jsx(Ck.StrictMode,{children:d.jsx(g8,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Na(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function RT(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var _p={exports:{}},gs={},mp={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function VT(){if(Fx)return Ze;Fx=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,q={};function w(z,Q,_e){this.props=z,this.context=Q,this.refs=q,this.updater=_e||g}w.prototype.isReactComponent={},w.prototype.setState=function(z,Q){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Q,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function b(){}b.prototype=w.prototype;function k(z,Q,_e){this.props=z,this.context=Q,this.refs=q,this.updater=_e||g}var S=k.prototype=new b;S.constructor=k,x(S,w.prototype),S.isPureReactComponent=!0;var M=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function P(z,Q,_e){var H,J={},ne=null,ue=null;if(Q!=null)for(H in Q.ref!==void 0&&(ue=Q.ref),Q.key!==void 0&&(ne=""+Q.key),Q)I.call(Q,H)&&!T.hasOwnProperty(H)&&(J[H]=Q[H]);var ae=arguments.length-2;if(ae===1)J.children=_e;else if(1<ae){for(var he=Array(ae),Ee=0;Ee<ae;Ee++)he[Ee]=arguments[Ee+2];J.children=he}if(z&&z.defaultProps)for(H in ae=z.defaultProps,ae)J[H]===void 0&&(J[H]=ae[H]);return{$$typeof:e,type:z,key:ne,ref:ue,props:J,_owner:E.current}}function j(z,Q){return{$$typeof:e,type:z.type,key:Q,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function O(z){var Q={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(_e){return Q[_e]})}var F=/\/+/g;function X(z,Q){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):Q.toString(36)}function V(z,Q,_e,H,J){var ne=typeof z;(ne==="undefined"||ne==="boolean")&&(z=null);var ue=!1;if(z===null)ue=!0;else switch(ne){case"string":case"number":ue=!0;break;case"object":switch(z.$$typeof){case e:case t:ue=!0}}if(ue)return ue=z,J=J(ue),z=H===""?"."+X(ue,0):H,M(J)?(_e="",z!=null&&(_e=z.replace(F,"$&/")+"/"),V(J,Q,_e,"",function(Ee){return Ee})):J!=null&&(D(J)&&(J=j(J,_e+(!J.key||ue&&ue.key===J.key?"":(""+J.key).replace(F,"$&/")+"/")+z)),Q.push(J)),1;if(ue=0,H=H===""?".":H+":",M(z))for(var ae=0;ae<z.length;ae++){ne=z[ae];var he=H+X(ne,ae);ue+=V(ne,Q,_e,he,J)}else if(he=h(z),typeof he=="function")for(z=he.call(z),ae=0;!(ne=z.next()).done;)ne=ne.value,he=H+X(ne,ae++),ue+=V(ne,Q,_e,he,J);else if(ne==="object")throw Q=String(z),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ue}function Z(z,Q,_e){if(z==null)return z;var H=[],J=0;return V(z,H,"","",function(ne){return Q.call(_e,ne,J++)}),H}function W(z){if(z._status===-1){var Q=z._result;Q=Q(),Q.then(function(_e){(z._status===0||z._status===-1)&&(z._status=1,z._result=_e)},function(_e){(z._status===0||z._status===-1)&&(z._status=2,z._result=_e)}),z._status===-1&&(z._status=0,z._result=Q)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},U={transition:null},K={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:U,ReactCurrentOwner:E};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:Z,forEach:function(z,Q,_e){Z(z,function(){Q.apply(this,arguments)},_e)},count:function(z){var Q=0;return Z(z,function(){Q++}),Q},toArray:function(z){return Z(z,function(Q){return Q})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ze.Component=w,Ze.Fragment=n,Ze.Profiler=a,Ze.PureComponent=k,Ze.StrictMode=i,Ze.Suspense=d,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ze.act=oe,Ze.cloneElement=function(z,Q,_e){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var H=x({},z.props),J=z.key,ne=z.ref,ue=z._owner;if(Q!=null){if(Q.ref!==void 0&&(ne=Q.ref,ue=E.current),Q.key!==void 0&&(J=""+Q.key),z.type&&z.type.defaultProps)var ae=z.type.defaultProps;for(he in Q)I.call(Q,he)&&!T.hasOwnProperty(he)&&(H[he]=Q[he]===void 0&&ae!==void 0?ae[he]:Q[he])}var he=arguments.length-2;if(he===1)H.children=_e;else if(1<he){ae=Array(he);for(var Ee=0;Ee<he;Ee++)ae[Ee]=arguments[Ee+2];H.children=ae}return{$$typeof:e,type:z.type,key:J,ref:ne,props:H,_owner:ue}},Ze.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},Ze.createElement=P,Ze.createFactory=function(z){var Q=P.bind(null,z);return Q.type=z,Q},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(z){return{$$typeof:l,render:z}},Ze.isValidElement=D,Ze.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:W}},Ze.memo=function(z,Q){return{$$typeof:p,type:z,compare:Q===void 0?null:Q}},Ze.startTransition=function(z){var Q=U.transition;U.transition={};try{z()}finally{U.transition=Q}},Ze.unstable_act=oe,Ze.useCallback=function(z,Q){return te.current.useCallback(z,Q)},Ze.useContext=function(z){return te.current.useContext(z)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(z){return te.current.useDeferredValue(z)},Ze.useEffect=function(z,Q){return te.current.useEffect(z,Q)},Ze.useId=function(){return te.current.useId()},Ze.useImperativeHandle=function(z,Q,_e){return te.current.useImperativeHandle(z,Q,_e)},Ze.useInsertionEffect=function(z,Q){return te.current.useInsertionEffect(z,Q)},Ze.useLayoutEffect=function(z,Q){return te.current.useLayoutEffect(z,Q)},Ze.useMemo=function(z,Q){return te.current.useMemo(z,Q)},Ze.useReducer=function(z,Q,_e){return te.current.useReducer(z,Q,_e)},Ze.useRef=function(z){return te.current.useRef(z)},Ze.useState=function(z){return te.current.useState(z)},Ze.useSyncExternalStore=function(z,Q,_e){return te.current.useSyncExternalStore(z,Q,_e)},Ze.useTransition=function(){return te.current.useTransition()},Ze.version="18.3.1",Ze}var Ax;function Ys(){return Ax||(Ax=1,mp.exports=VT()),mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function OT(){if(Lx)return gs;Lx=1;var e=Ys(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,p){var m,_={},h=null,g=null;p!==void 0&&(h=""+p),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(g=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(_[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)_[m]===void 0&&(_[m]=d[m]);return{$$typeof:t,type:l,key:h,ref:g,props:_,_owner:a.current}}return gs.Fragment=n,gs.jsx=u,gs.jsxs=u,gs}var Dx;function FT(){return Dx||(Dx=1,_p.exports=OT()),_p.exports}var f=FT(),A=Ys();const yk=Na(A);var pl={},hp={exports:{}},Nr={},yp={exports:{}},gp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function AT(){return Bx||(Bx=1,(function(e){function t(U,K){var oe=U.length;U.push(K);e:for(;0<oe;){var z=oe-1>>>1,Q=U[z];if(0<a(Q,K))U[z]=K,U[oe]=Q,oe=z;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],oe=U.pop();if(oe!==K){U[0]=oe;e:for(var z=0,Q=U.length,_e=Q>>>1;z<_e;){var H=2*(z+1)-1,J=U[H],ne=H+1,ue=U[ne];if(0>a(J,oe))ne<Q&&0>a(ue,J)?(U[z]=ue,U[ne]=oe,z=ne):(U[z]=J,U[H]=oe,z=H);else if(ne<Q&&0>a(ue,oe))U[z]=ue,U[ne]=oe,z=ne;else break e}}return K}function a(U,K){var oe=U.sortIndex-K.sortIndex;return oe!==0?oe:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}var d=[],p=[],m=1,_=null,h=3,g=!1,x=!1,q=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=U)i(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=n(p)}}function M(U){if(q=!1,S(U),!x)if(n(d)!==null)x=!0,W(I);else{var K=n(p);K!==null&&te(M,K.startTime-U)}}function I(U,K){x=!1,q&&(q=!1,b(P),P=-1),g=!0;var oe=h;try{for(S(K),_=n(d);_!==null&&(!(_.expirationTime>K)||U&&!O());){var z=_.callback;if(typeof z=="function"){_.callback=null,h=_.priorityLevel;var Q=z(_.expirationTime<=K);K=e.unstable_now(),typeof Q=="function"?_.callback=Q:_===n(d)&&i(d),S(K)}else i(d);_=n(d)}if(_!==null)var _e=!0;else{var H=n(p);H!==null&&te(M,H.startTime-K),_e=!1}return _e}finally{_=null,h=oe,g=!1}}var E=!1,T=null,P=-1,j=5,D=-1;function O(){return!(e.unstable_now()-D<j)}function F(){if(T!==null){var U=e.unstable_now();D=U;var K=!0;try{K=T(!0,U)}finally{K?X():(E=!1,T=null)}}else E=!1}var X;if(typeof k=="function")X=function(){k(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Z=V.port2;V.port1.onmessage=F,X=function(){Z.postMessage(null)}}else X=function(){w(F,0)};function W(U){T=U,E||(E=!0,X())}function te(U,K){P=w(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,W(I))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var oe=h;h=K;try{return U()}finally{h=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var oe=h;h=U;try{return K()}finally{h=oe}},e.unstable_scheduleCallback=function(U,K,oe){var z=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?z+oe:z):oe=z,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,U={id:m++,callback:K,priorityLevel:U,startTime:oe,expirationTime:Q,sortIndex:-1},oe>z?(U.sortIndex=oe,t(p,U),n(d)===null&&U===n(p)&&(q?(b(P),P=-1):q=!0,te(M,oe-z))):(U.sortIndex=Q,t(d,U),x||g||(x=!0,W(I))),U},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(U){var K=h;return function(){var oe=h;h=K;try{return U.apply(this,arguments)}finally{h=oe}}}})(gp)),gp}var zx;function LT(){return zx||(zx=1,yp.exports=AT()),yp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function DT(){if($x)return Nr;$x=1;var e=Ys(),t=LT();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function s(r,o){u(r,o),u(r+"Capture",o)}function u(r,o){for(a[r]=o,r=0;r<o.length;r++)i.add(o[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function h(r){return d.call(_,r)?!0:d.call(m,r)?!1:p.test(r)?_[r]=!0:(m[r]=!0,!1)}function g(r,o,c,y){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,o,c,y){if(o===null||typeof o>"u"||g(r,o,c,y))return!0;if(y)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function q(r,o,c,y,v,C,R){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=r,this.type=o,this.sanitizeURL=C,this.removeEmptyString=R}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];w[o]=new q(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function k(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(b,k);w[o]=new q(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(b,k);w[o]=new q(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(b,k);w[o]=new q(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function S(r,o,c,y){var v=w.hasOwnProperty(o)?w[o]:null;(v!==null?v.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,v,y)&&(c=null),y||v===null?h(o)&&(c===null?r.removeAttribute(o):r.setAttribute(o,""+c)):v.mustUseProperty?r[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,y=v.attributeNamespace,c===null?r.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,y?r.setAttributeNS(y,o,c):r.setAttribute(o,c))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),U=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Object.assign,z;function Q(r){if(z===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+r}var _e=!1;function H(r,o){if(!r||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(pe){var y=pe}Reflect.construct(r,[],o)}else{try{o.call()}catch(pe){y=pe}r.call(o.prototype)}else{try{throw Error()}catch(pe){y=pe}r()}}catch(pe){if(pe&&y&&typeof pe.stack=="string"){for(var v=pe.stack.split(`
`),C=y.stack.split(`
`),R=v.length-1,G=C.length-1;1<=R&&0<=G&&v[R]!==C[G];)G--;for(;1<=R&&0<=G;R--,G--)if(v[R]!==C[G]){if(R!==1||G!==1)do if(R--,G--,0>G||v[R]!==C[G]){var ee=`
`+v[R].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=R&&0<=G);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?Q(r):""}function J(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=H(r.type,!1),r;case 11:return r=H(r.type.render,!1),r;case 1:return r=H(r.type,!0),r;default:return""}}function ne(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case E:return"Portal";case j:return"Profiler";case P:return"StrictMode";case X:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case F:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Z:return o=r.displayName||null,o!==null?o:ne(r.type)||"Memo";case W:o=r._payload,r=r._init;try{return ne(r(o))}catch{}}return null}function ue(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(o);case 8:return o===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ae(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function he(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ee(r){var o=he(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,C=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(R){y=""+R,C.call(this,R)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return y},setValue:function(R){y=""+R},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ne(r){r._valueTracker||(r._valueTracker=Ee(r))}function Ie(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),y="";return r&&(y=he(r)?r.checked?"true":"false":r.value),r=y,r!==c?(o.setValue(r),!0):!1}function Te(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Pe(r,o){var c=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Ve(r,o){var c=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;c=ae(o.value!=null?o.value:c),r._wrapperState={initialChecked:y,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function He(r,o){o=o.checked,o!=null&&S(r,"checked",o,!1)}function De(r,o){He(r,o);var c=ae(o.value),y=o.type;if(c!=null)y==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?et(r,o.type,c):o.hasOwnProperty("defaultValue")&&et(r,o.type,ae(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function nt(r,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,c||o===r.value||(r.value=o),r.defaultValue=o}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function et(r,o,c){(o!=="number"||Te(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var ft=Array.isArray;function ct(r,o,c,y){if(r=r.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=o.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&y&&(r[c].defaultSelected=!0)}else{for(c=""+ae(c),o=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,y&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function dt(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lt(r,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(ft(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}r._wrapperState={initialValue:ae(c)}}function Sr(r,o){var c=ae(o.value),y=ae(o.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),o.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),y!=null&&(r.defaultValue=""+y)}function Zt(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function $t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?$t(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var at,Rr=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,y,v){MSApp.execUnsafeLocalFunction(function(){return r(o,c,y,v)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(at=at||document.createElement("div"),at.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=at.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Tt(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(r){pr.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Kr[o]=Kr[r]})});function Ht(r,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Kr.hasOwnProperty(r)&&Kr[r]?(""+o).trim():o+"px"}function Qe(r,o){r=r.style;for(var c in o)if(o.hasOwnProperty(c)){var y=c.indexOf("--")===0,v=Ht(c,o[c],y);c==="float"&&(c="cssFloat"),y?r.setProperty(c,v):r[c]=v}}var wi=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nt(r,o){if(o){if(wi[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function ln(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function st(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vr=null,Or=null,fr=null;function Xn(r){if(r=ns(r)){if(typeof Vr!="function")throw Error(n(280));var o=r.stateNode;o&&(o=ku(o),Vr(r.stateNode,r.type,o))}}function Vn(r){Or?fr?fr.push(r):fr=[r]:Or=r}function Rt(){if(Or){var r=Or,o=fr;if(fr=Or=null,Xn(r),o)for(r=0;r<o.length;r++)Xn(o[r])}}function er(r,o){return r(o)}function tr(){}var _t=!1;function Do(r,o,c){if(_t)return r(o,c);_t=!0;try{return er(r,o,c)}finally{_t=!1,(Or!==null||fr!==null)&&(tr(),Rt())}}function xt(r,o){var c=r.stateNode;if(c===null)return null;var y=ku(c);if(y===null)return null;c=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Xi=!1;if(l)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Xi=!1}function Yr(r,o,c,y,v,C,R,G,ee){var pe=Array.prototype.slice.call(arguments,3);try{o.apply(c,pe)}catch(qe){this.onError(qe)}}var At=!1,Ut=null,Gt=!1,rr=null,_r={onError:function(r){At=!0,Ut=r}};function mr(r,o,c,y,v,C,R,G,ee){At=!1,Ut=null,Yr.apply(_r,arguments)}function hr(r,o,c,y,v,C,R,G,ee){if(mr.apply(this,arguments),At){if(At){var pe=Ut;At=!1,Ut=null}else throw Error(n(198));Gt||(Gt=!0,rr=pe)}}function Et(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function cn(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function yr(r){if(Et(r)!==r)throw Error(n(188))}function Zi(r){var o=r.alternate;if(!o){if(o=Et(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,y=o;;){var v=c.return;if(v===null)break;var C=v.alternate;if(C===null){if(y=v.return,y!==null){c=y;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===c)return yr(v),r;if(C===y)return yr(v),o;C=C.sibling}throw Error(n(188))}if(c.return!==y.return)c=v,y=C;else{for(var R=!1,G=v.child;G;){if(G===c){R=!0,c=v,y=C;break}if(G===y){R=!0,y=v,c=C;break}G=G.sibling}if(!R){for(G=C.child;G;){if(G===c){R=!0,c=C,y=v;break}if(G===y){R=!0,y=C,c=v;break}G=G.sibling}if(!R)throw Error(n(189))}}if(c.alternate!==y)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function Ji(r){return r=Zi(r),r!==null?ar(r):null}function ar(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=ar(r);if(o!==null)return o;r=r.sibling}return null}var bi=t.unstable_scheduleCallback,qi=t.unstable_cancelCallback,eo=t.unstable_shouldYield,Zn=t.unstable_requestPaint,mt=t.unstable_now,Jn=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,ei=t.unstable_UserBlockingPriority,pn=t.unstable_NormalPriority,ht=t.unstable_LowPriority,Qr=t.unstable_IdlePriority,On=null,Kt=null;function Bo(r){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(On,r,void 0,(r.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:Da,ti=Math.log,fn=Math.LN2;function Da(r){return r>>>=0,r===0?32:31-(ti(r)/fn|0)|0}var to=64,Si=4194304;function Cr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function _n(r,o){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,C=r.pingedLanes,R=c&268435455;if(R!==0){var G=R&~v;G!==0?y=Cr(G):(C&=R,C!==0&&(y=Cr(C)))}else R=c&~v,R!==0?y=Cr(R):C!==0&&(y=Cr(C));if(y===0)return 0;if(o!==0&&o!==y&&(o&v)===0&&(v=y&-y,C=o&-o,v>=C||v===16&&(C&4194240)!==0))return o;if((y&4)!==0&&(y|=c&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)c=31-gr(o),v=1<<c,y|=r[c],o&=~v;return y}function zo(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(r,o){for(var c=r.suspendedLanes,y=r.pingedLanes,v=r.expirationTimes,C=r.pendingLanes;0<C;){var R=31-gr(C),G=1<<R,ee=v[R];ee===-1?((G&c)===0||(G&y)!==0)&&(v[R]=zo(G,o)):ee<=o&&(r.expiredLanes|=G),C&=~G}}function nr(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ci(){var r=to;return to<<=1,(to&4194240)===0&&(to=64),r}function Fr(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Xr(r,o,c){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-gr(o),r[o]=c}function ro(r,o){var c=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<c;){var v=31-gr(c),C=1<<v;o[v]=0,y[v]=-1,r[v]=-1,c&=~C}}function We(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var y=31-gr(c),v=1<<y;v&o|r[y]&o&&(r[y]|=o),c&=~v}}var ut=0;function no(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var za,io,$o,ze,$a,Ho=!1,ri=[],mn=null,hn=null,Ar=null,ki=new Map,oo=new Map,Lt=[],Wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(r,o){switch(r){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(o.pointerId)}}function ao(r,o,c,y,v,C){return r===null||r.nativeEvent!==C?(r={blockedOn:o,domEventName:c,eventSystemFlags:y,nativeEvent:C,targetContainers:[v]},o!==null&&(o=ns(o),o!==null&&io(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function Uo(r,o,c,y,v){switch(o){case"focusin":return mn=ao(mn,r,o,c,y,v),!0;case"dragenter":return hn=ao(hn,r,o,c,y,v),!0;case"mouseover":return Ar=ao(Ar,r,o,c,y,v),!0;case"pointerover":var C=v.pointerId;return ki.set(C,ao(ki.get(C)||null,r,o,c,y,v)),!0;case"gotpointercapture":return C=v.pointerId,oo.set(C,ao(oo.get(C)||null,r,o,c,y,v)),!0}return!1}function cu(r){var o=_o(r.target);if(o!==null){var c=Et(o);if(c!==null){if(o=c.tag,o===13){if(o=cn(c),o!==null){r.blockedOn=o,$a(r.priority,function(){$o(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Go(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Wa(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var y=new c.constructor(c.type,c);me=y,c.target.dispatchEvent(y),me=null}else return o=ns(c),o!==null&&io(o),r.blockedOn=c,!1;o.shift()}return!0}function du(r,o,c){Go(r)&&c.delete(o)}function Zr(){Ho=!1,mn!==null&&Go(mn)&&(mn=null),hn!==null&&Go(hn)&&(hn=null),Ar!==null&&Go(Ar)&&(Ar=null),ki.forEach(du),oo.forEach(du)}function so(r,o){r.blockedOn===o&&(r.blockedOn=null,Ho||(Ho=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zr)))}function uo(r){function o(v){return so(v,r)}if(0<ri.length){so(ri[0],r);for(var c=1;c<ri.length;c++){var y=ri[c];y.blockedOn===r&&(y.blockedOn=null)}}for(mn!==null&&so(mn,r),hn!==null&&so(hn,r),Ar!==null&&so(Ar,r),ki.forEach(o),oo.forEach(o),c=0;c<Lt.length;c++)y=Lt[c],y.blockedOn===r&&(y.blockedOn=null);for(;0<Lt.length&&(c=Lt[0],c.blockedOn===null);)cu(c),c.blockedOn===null&&Lt.shift()}var Mi=M.ReactCurrentBatchConfig,Ko=!0;function Fc(r,o,c,y){var v=ut,C=Mi.transition;Mi.transition=null;try{ut=1,Ha(r,o,c,y)}finally{ut=v,Mi.transition=C}}function Ac(r,o,c,y){var v=ut,C=Mi.transition;Mi.transition=null;try{ut=4,Ha(r,o,c,y)}finally{ut=v,Mi.transition=C}}function Ha(r,o,c,y){if(Ko){var v=Wa(r,o,c,y);if(v===null)id(r,o,y,Yo,c),lu(r,y);else if(Uo(v,r,o,c,y))y.stopPropagation();else if(lu(r,y),o&4&&-1<Wo.indexOf(r)){for(;v!==null;){var C=ns(v);if(C!==null&&za(C),C=Wa(r,o,c,y),C===null&&id(r,o,y,Yo,c),C===v)break;v=C}v!==null&&y.stopPropagation()}else id(r,o,y,null,c)}}var Yo=null;function Wa(r,o,c,y){if(Yo=null,r=st(y),r=_o(r),r!==null)if(o=Et(r),o===null)r=null;else if(c=o.tag,c===13){if(r=cn(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Yo=r,null}function pu(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jn()){case dn:return 1;case ei:return 4;case pn:case ht:return 16;case Qr:return 536870912;default:return 16}default:return 16}}var Fn=null,Lr=null,yn=null;function Qo(){if(yn)return yn;var r,o=Lr,c=o.length,y,v="value"in Fn?Fn.value:Fn.textContent,C=v.length;for(r=0;r<c&&o[r]===v[r];r++);var R=c-r;for(y=1;y<=R&&o[c-y]===v[C-y];y++);return yn=v.slice(r,1<y?1-y:void 0)}function ni(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function lo(){return!0}function fu(){return!1}function vr(r){function o(c,y,v,C,R){this._reactName=c,this._targetInst=v,this.type=y,this.nativeEvent=C,this.target=R,this.currentTarget=null;for(var G in r)r.hasOwnProperty(G)&&(c=r[G],this[G]=c?c(C):C[G]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?lo:fu,this.isPropagationStopped=fu,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),o}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=vr(An),co=oe({},An,{view:0,detail:0}),Lc=vr(co),Ga,Ka,ii,po=oe({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(Ga=r.screenX-ii.screenX,Ka=r.screenY-ii.screenY):Ka=Ga=0,ii=r),Ga)},movementY:function(r){return"movementY"in r?r.movementY:Ka}}),_u=vr(po),Dc=oe({},po,{dataTransfer:0}),Bc=vr(Dc),mu=oe({},co,{relatedTarget:0}),Ya=vr(mu),zc=oe({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=vr(zc),Hc=oe({},An,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wc=vr(Hc),Uc=oe({},An,{data:0}),hu=vr(Uc),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=gu[r])?!!o[r]:!1}function N(){return Kc}var B=oe({},co,{key:function(r){if(r.key){var o=yu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N,charCode:function(r){return r.type==="keypress"?ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$=vr(B),L=oe({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y=vr(L),re=oe({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N}),ce=vr(re),de=oe({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),ve=vr(de),be=oe({},po,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=vr(be),fe=[9,13,27,32],ge=l&&"CompositionEvent"in window,xe=null;l&&"documentMode"in document&&(xe=document.documentMode);var ye=l&&"TextEvent"in window&&!xe,Ce=l&&(!ge||xe&&8<xe&&11>=xe),Re=" ",je=!1;function Ye(r,o){switch(r){case"keyup":return fe.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var tt=!1;function it(r,o){switch(r){case"compositionend":return Xe(o);case"keypress":return o.which!==32?null:(je=!0,Re);case"textInput":return r=o.data,r===Re&&je?null:r;default:return null}}function Dt(r,o){if(tt)return r==="compositionend"||!ge&&Ye(r,o)?(r=Qo(),yn=Lr=Fn=null,tt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ce&&o.locale!=="ko"?null:o.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!xr[r.type]:o==="textarea"}function Ei(r,o,c,y){Vn(y),o=qu(o,"onChange"),0<o.length&&(c=new Ua("onChange","change",null,c,y),r.push({event:c,listeners:o}))}var fo=null,Qa=null;function RI(r){Jg(r,0)}function vu(r){var o=ta(r);if(Ie(o))return r}function VI(r,o){if(r==="change")return o}var Og=!1;if(l){var Yc;if(l){var Qc="oninput"in document;if(!Qc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Qc=typeof Fg.oninput=="function"}Yc=Qc}else Yc=!1;Og=Yc&&(!document.documentMode||9<document.documentMode)}function Ag(){fo&&(fo.detachEvent("onpropertychange",Lg),Qa=fo=null)}function Lg(r){if(r.propertyName==="value"&&vu(Qa)){var o=[];Ei(o,Qa,r,st(r)),Do(RI,o)}}function OI(r,o,c){r==="focusin"?(Ag(),fo=o,Qa=c,fo.attachEvent("onpropertychange",Lg)):r==="focusout"&&Ag()}function FI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Qa)}function AI(r,o){if(r==="click")return vu(o)}function LI(r,o){if(r==="input"||r==="change")return vu(o)}function DI(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gn=typeof Object.is=="function"?Object.is:DI;function Xa(r,o){if(gn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),y=Object.keys(o);if(c.length!==y.length)return!1;for(y=0;y<c.length;y++){var v=c[y];if(!d.call(o,v)||!gn(r[v],o[v]))return!1}return!0}function Dg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bg(r,o){var c=Dg(r);r=0;for(var y;c;){if(c.nodeType===3){if(y=r+c.textContent.length,r<=o&&y>=o)return{node:c,offset:o-r};r=y}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Dg(c)}}function zg(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?zg(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function $g(){for(var r=window,o=Te();o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Te(r.document)}return o}function Xc(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function BI(r){var o=$g(),c=r.focusedElem,y=r.selectionRange;if(o!==c&&c&&c.ownerDocument&&zg(c.ownerDocument.documentElement,c)){if(y!==null&&Xc(c)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(r,c.value.length);else if(r=(o=c.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var v=c.textContent.length,C=Math.min(y.start,v);y=y.end===void 0?C:Math.min(y.end,v),!r.extend&&C>y&&(v=y,y=C,C=v),v=Bg(c,C);var R=Bg(c,y);v&&R&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==R.node||r.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),r.removeAllRanges(),C>y?(r.addRange(o),r.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),r.addRange(o)))}}for(o=[],r=c;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)r=o[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var zI=l&&"documentMode"in document&&11>=document.documentMode,Xo=null,Zc=null,Za=null,Jc=!1;function Hg(r,o,c){var y=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Jc||Xo==null||Xo!==Te(y)||(y=Xo,"selectionStart"in y&&Xc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Za&&Xa(Za,y)||(Za=y,y=qu(Zc,"onSelect"),0<y.length&&(o=new Ua("onSelect","select",null,o,c),r.push({event:o,listeners:y}),o.target=Xo)))}function xu(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Zo={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},ed={},Wg={};l&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function wu(r){if(ed[r])return ed[r];if(!Zo[r])return r;var o=Zo[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Wg)return ed[r]=o[c];return r}var Ug=wu("animationend"),Gg=wu("animationiteration"),Kg=wu("animationstart"),Yg=wu("transitionend"),Qg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(r,o){Qg.set(r,o),s(o,[r])}for(var td=0;td<Xg.length;td++){var rd=Xg[td],$I=rd.toLowerCase(),HI=rd[0].toUpperCase()+rd.slice(1);Ii($I,"on"+HI)}Ii(Ug,"onAnimationEnd"),Ii(Gg,"onAnimationIteration"),Ii(Kg,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Yg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Zg(r,o,c){var y=r.type||"unknown-event";r.currentTarget=c,hr(y,o,void 0,r),r.currentTarget=null}function Jg(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var y=r[c],v=y.event;y=y.listeners;e:{var C=void 0;if(o)for(var R=y.length-1;0<=R;R--){var G=y[R],ee=G.instance,pe=G.currentTarget;if(G=G.listener,ee!==C&&v.isPropagationStopped())break e;Zg(v,G,pe),C=ee}else for(R=0;R<y.length;R++){if(G=y[R],ee=G.instance,pe=G.currentTarget,G=G.listener,ee!==C&&v.isPropagationStopped())break e;Zg(v,G,pe),C=ee}}}if(Gt)throw r=rr,Gt=!1,rr=null,r}function yt(r,o){var c=o[cd];c===void 0&&(c=o[cd]=new Set);var y=r+"__bubble";c.has(y)||(ev(o,r,2,!1),c.add(y))}function nd(r,o,c){var y=0;o&&(y|=4),ev(c,r,y,o)}var bu="_reactListening"+Math.random().toString(36).slice(2);function es(r){if(!r[bu]){r[bu]=!0,i.forEach(function(c){c!=="selectionchange"&&(WI.has(c)||nd(c,!1,r),nd(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[bu]||(o[bu]=!0,nd("selectionchange",!1,o))}}function ev(r,o,c,y){switch(pu(o)){case 1:var v=Fc;break;case 4:v=Ac;break;default:v=Ha}c=v.bind(null,o,c,r),v=void 0,!Xi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),y?v!==void 0?r.addEventListener(o,c,{capture:!0,passive:v}):r.addEventListener(o,c,!0):v!==void 0?r.addEventListener(o,c,{passive:v}):r.addEventListener(o,c,!1)}function id(r,o,c,y,v){var C=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var R=y.tag;if(R===3||R===4){var G=y.stateNode.containerInfo;if(G===v||G.nodeType===8&&G.parentNode===v)break;if(R===4)for(R=y.return;R!==null;){var ee=R.tag;if((ee===3||ee===4)&&(ee=R.stateNode.containerInfo,ee===v||ee.nodeType===8&&ee.parentNode===v))return;R=R.return}for(;G!==null;){if(R=_o(G),R===null)return;if(ee=R.tag,ee===5||ee===6){y=C=R;continue e}G=G.parentNode}}y=y.return}Do(function(){var pe=C,qe=st(c),Se=[];e:{var we=Qg.get(r);if(we!==void 0){var Oe=Ua,Ae=r;switch(r){case"keypress":if(ni(c)===0)break e;case"keydown":case"keyup":Oe=$;break;case"focusin":Ae="focus",Oe=Ya;break;case"focusout":Ae="blur",Oe=Ya;break;case"beforeblur":case"afterblur":Oe=Ya;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=ce;break;case Ug:case Gg:case Kg:Oe=$c;break;case Yg:Oe=ve;break;case"scroll":Oe=Lc;break;case"wheel":Oe=ke;break;case"copy":case"cut":case"paste":Oe=Wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Y}var Le=(o&4)!==0,jt=!Le&&r==="scroll",se=Le?we!==null?we+"Capture":null:we;Le=[];for(var ie=pe,le;ie!==null;){le=ie;var Me=le.stateNode;if(le.tag===5&&Me!==null&&(le=Me,se!==null&&(Me=xt(ie,se),Me!=null&&Le.push(ts(ie,Me,le)))),jt)break;ie=ie.return}0<Le.length&&(we=new Oe(we,Ae,null,c,qe),Se.push({event:we,listeners:Le}))}}if((o&7)===0){e:{if(we=r==="mouseover"||r==="pointerover",Oe=r==="mouseout"||r==="pointerout",we&&c!==me&&(Ae=c.relatedTarget||c.fromElement)&&(_o(Ae)||Ae[oi]))break e;if((Oe||we)&&(we=qe.window===qe?qe:(we=qe.ownerDocument)?we.defaultView||we.parentWindow:window,Oe?(Ae=c.relatedTarget||c.toElement,Oe=pe,Ae=Ae?_o(Ae):null,Ae!==null&&(jt=Et(Ae),Ae!==jt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Oe=null,Ae=pe),Oe!==Ae)){if(Le=_u,Me="onMouseLeave",se="onMouseEnter",ie="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Y,Me="onPointerLeave",se="onPointerEnter",ie="pointer"),jt=Oe==null?we:ta(Oe),le=Ae==null?we:ta(Ae),we=new Le(Me,ie+"leave",Oe,c,qe),we.target=jt,we.relatedTarget=le,Me=null,_o(qe)===pe&&(Le=new Le(se,ie+"enter",Ae,c,qe),Le.target=le,Le.relatedTarget=jt,Me=Le),jt=Me,Oe&&Ae)t:{for(Le=Oe,se=Ae,ie=0,le=Le;le;le=Jo(le))ie++;for(le=0,Me=se;Me;Me=Jo(Me))le++;for(;0<ie-le;)Le=Jo(Le),ie--;for(;0<le-ie;)se=Jo(se),le--;for(;ie--;){if(Le===se||se!==null&&Le===se.alternate)break t;Le=Jo(Le),se=Jo(se)}Le=null}else Le=null;Oe!==null&&tv(Se,we,Oe,Le,!1),Ae!==null&&jt!==null&&tv(Se,jt,Ae,Le,!0)}}e:{if(we=pe?ta(pe):window,Oe=we.nodeName&&we.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&we.type==="file")var Be=VI;else if(Pt(we))if(Og)Be=LI;else{Be=FI;var Ue=OI}else(Oe=we.nodeName)&&Oe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Be=AI);if(Be&&(Be=Be(r,pe))){Ei(Se,Be,c,qe);break e}Ue&&Ue(r,we,pe),r==="focusout"&&(Ue=we._wrapperState)&&Ue.controlled&&we.type==="number"&&et(we,"number",we.value)}switch(Ue=pe?ta(pe):window,r){case"focusin":(Pt(Ue)||Ue.contentEditable==="true")&&(Xo=Ue,Zc=pe,Za=null);break;case"focusout":Za=Zc=Xo=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Hg(Se,c,qe);break;case"selectionchange":if(zI)break;case"keydown":case"keyup":Hg(Se,c,qe)}var Ge;if(ge)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else tt?Ye(r,c)&&(Ke="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ke="onCompositionStart");Ke&&(Ce&&c.locale!=="ko"&&(tt||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&tt&&(Ge=Qo()):(Fn=qe,Lr="value"in Fn?Fn.value:Fn.textContent,tt=!0)),Ue=qu(pe,Ke),0<Ue.length&&(Ke=new hu(Ke,r,null,c,qe),Se.push({event:Ke,listeners:Ue}),Ge?Ke.data=Ge:(Ge=Xe(c),Ge!==null&&(Ke.data=Ge)))),(Ge=ye?it(r,c):Dt(r,c))&&(pe=qu(pe,"onBeforeInput"),0<pe.length&&(qe=new hu("onBeforeInput","beforeinput",null,c,qe),Se.push({event:qe,listeners:pe}),qe.data=Ge))}Jg(Se,o)})}function ts(r,o,c){return{instance:r,listener:o,currentTarget:c}}function qu(r,o){for(var c=o+"Capture",y=[];r!==null;){var v=r,C=v.stateNode;v.tag===5&&C!==null&&(v=C,C=xt(r,c),C!=null&&y.unshift(ts(r,C,v)),C=xt(r,o),C!=null&&y.push(ts(r,C,v))),r=r.return}return y}function Jo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function tv(r,o,c,y,v){for(var C=o._reactName,R=[];c!==null&&c!==y;){var G=c,ee=G.alternate,pe=G.stateNode;if(ee!==null&&ee===y)break;G.tag===5&&pe!==null&&(G=pe,v?(ee=xt(c,C),ee!=null&&R.unshift(ts(c,ee,G))):v||(ee=xt(c,C),ee!=null&&R.push(ts(c,ee,G)))),c=c.return}R.length!==0&&r.push({event:o,listeners:R})}var UI=/\r\n?/g,GI=/\u0000|\uFFFD/g;function rv(r){return(typeof r=="string"?r:""+r).replace(UI,`
`).replace(GI,"")}function Su(r,o,c){if(o=rv(o),rv(r)!==o&&c)throw Error(n(425))}function Cu(){}var od=null,ad=null;function sd(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,KI=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,YI=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(r){return nv.resolve(null).then(r).catch(QI)}:ud;function QI(r){setTimeout(function(){throw r})}function ld(r,o){var c=o,y=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(y===0){r.removeChild(v),uo(o);return}y--}else c!=="$"&&c!=="$?"&&c!=="$!"||y++;c=v}while(c);uo(o)}function Ti(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function iv(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ea,rs="__reactProps$"+ea,oi="__reactContainer$"+ea,cd="__reactEvents$"+ea,XI="__reactListeners$"+ea,ZI="__reactHandles$"+ea;function _o(r){var o=r[Ln];if(o)return o;for(var c=r.parentNode;c;){if(o=c[oi]||c[Ln]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=iv(r);r!==null;){if(c=r[Ln])return c;r=iv(r)}return o}r=c,c=r.parentNode}return null}function ns(r){return r=r[Ln]||r[oi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ta(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function ku(r){return r[rs]||null}var dd=[],ra=-1;function Ni(r){return{current:r}}function gt(r){0>ra||(r.current=dd[ra],dd[ra]=null,ra--)}function pt(r,o){ra++,dd[ra]=r.current,r.current=o}var Pi={},sr=Ni(Pi),kr=Ni(!1),mo=Pi;function na(r,o){var c=r.type.contextTypes;if(!c)return Pi;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var v={},C;for(C in c)v[C]=o[C];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=v),v}function Mr(r){return r=r.childContextTypes,r!=null}function Mu(){gt(kr),gt(sr)}function ov(r,o,c){if(sr.current!==Pi)throw Error(n(168));pt(sr,o),pt(kr,c)}function av(r,o,c){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return c;y=y.getChildContext();for(var v in y)if(!(v in o))throw Error(n(108,ue(r)||"Unknown",v));return oe({},c,y)}function Eu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Pi,mo=sr.current,pt(sr,r),pt(kr,kr.current),!0}function sv(r,o,c){var y=r.stateNode;if(!y)throw Error(n(169));c?(r=av(r,o,mo),y.__reactInternalMemoizedMergedChildContext=r,gt(kr),gt(sr),pt(sr,r)):gt(kr),pt(kr,c)}var ai=null,Iu=!1,pd=!1;function uv(r){ai===null?ai=[r]:ai.push(r)}function JI(r){Iu=!0,uv(r)}function ji(){if(!pd&&ai!==null){pd=!0;var r=0,o=ut;try{var c=ai;for(ut=1;r<c.length;r++){var y=c[r];do y=y(!0);while(y!==null)}ai=null,Iu=!1}catch(v){throw ai!==null&&(ai=ai.slice(r+1)),bi(dn,ji),v}finally{ut=o,pd=!1}}return null}var ia=[],oa=0,Tu=null,Nu=0,Jr=[],en=0,ho=null,si=1,ui="";function yo(r,o){ia[oa++]=Nu,ia[oa++]=Tu,Tu=r,Nu=o}function lv(r,o,c){Jr[en++]=si,Jr[en++]=ui,Jr[en++]=ho,ho=r;var y=si;r=ui;var v=32-gr(y)-1;y&=~(1<<v),c+=1;var C=32-gr(o)+v;if(30<C){var R=v-v%5;C=(y&(1<<R)-1).toString(32),y>>=R,v-=R,si=1<<32-gr(o)+v|c<<v|y,ui=C+r}else si=1<<C|c<<v|y,ui=r}function fd(r){r.return!==null&&(yo(r,1),lv(r,1,0))}function _d(r){for(;r===Tu;)Tu=ia[--oa],ia[oa]=null,Nu=ia[--oa],ia[oa]=null;for(;r===ho;)ho=Jr[--en],Jr[en]=null,ui=Jr[--en],Jr[en]=null,si=Jr[--en],Jr[en]=null}var Dr=null,Br=null,wt=!1,vn=null;function cv(r,o){var c=on(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=r,o=r.deletions,o===null?(r.deletions=[c],r.flags|=16):o.push(c)}function dv(r,o){switch(r.tag){case 5:var c=r.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,Dr=r,Br=Ti(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,Dr=r,Br=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=ho!==null?{id:si,overflow:ui}:null,r.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=on(18,null,null,0),c.stateNode=o,c.return=r,r.child=c,Dr=r,Br=null,!0):!1;default:return!1}}function md(r){return(r.mode&1)!==0&&(r.flags&128)===0}function hd(r){if(wt){var o=Br;if(o){var c=o;if(!dv(r,o)){if(md(r))throw Error(n(418));o=Ti(c.nextSibling);var y=Dr;o&&dv(r,o)?cv(y,c):(r.flags=r.flags&-4097|2,wt=!1,Dr=r)}}else{if(md(r))throw Error(n(418));r.flags=r.flags&-4097|2,wt=!1,Dr=r}}}function pv(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Dr=r}function Pu(r){if(r!==Dr)return!1;if(!wt)return pv(r),wt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!sd(r.type,r.memoizedProps)),o&&(o=Br)){if(md(r))throw fv(),Error(n(418));for(;o;)cv(r,o),o=Ti(o.nextSibling)}if(pv(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(o===0){Br=Ti(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}r=r.nextSibling}Br=null}}else Br=Dr?Ti(r.stateNode.nextSibling):null;return!0}function fv(){for(var r=Br;r;)r=Ti(r.nextSibling)}function aa(){Br=Dr=null,wt=!1}function yd(r){vn===null?vn=[r]:vn.push(r)}var eT=M.ReactCurrentBatchConfig;function is(r,o,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var y=c.stateNode}if(!y)throw Error(n(147,r));var v=y,C=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===C?o.ref:(o=function(R){var G=v.refs;R===null?delete G[C]:G[C]=R},o._stringRef=C,o)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function ju(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function _v(r){var o=r._init;return o(r._payload)}function mv(r){function o(se,ie){if(r){var le=se.deletions;le===null?(se.deletions=[ie],se.flags|=16):le.push(ie)}}function c(se,ie){if(!r)return null;for(;ie!==null;)o(se,ie),ie=ie.sibling;return null}function y(se,ie){for(se=new Map;ie!==null;)ie.key!==null?se.set(ie.key,ie):se.set(ie.index,ie),ie=ie.sibling;return se}function v(se,ie){return se=Bi(se,ie),se.index=0,se.sibling=null,se}function C(se,ie,le){return se.index=le,r?(le=se.alternate,le!==null?(le=le.index,le<ie?(se.flags|=2,ie):le):(se.flags|=2,ie)):(se.flags|=1048576,ie)}function R(se){return r&&se.alternate===null&&(se.flags|=2),se}function G(se,ie,le,Me){return ie===null||ie.tag!==6?(ie=up(le,se.mode,Me),ie.return=se,ie):(ie=v(ie,le),ie.return=se,ie)}function ee(se,ie,le,Me){var Be=le.type;return Be===T?qe(se,ie,le.props.children,Me,le.key):ie!==null&&(ie.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===W&&_v(Be)===ie.type)?(Me=v(ie,le.props),Me.ref=is(se,ie,le),Me.return=se,Me):(Me=nl(le.type,le.key,le.props,null,se.mode,Me),Me.ref=is(se,ie,le),Me.return=se,Me)}function pe(se,ie,le,Me){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=lp(le,se.mode,Me),ie.return=se,ie):(ie=v(ie,le.children||[]),ie.return=se,ie)}function qe(se,ie,le,Me,Be){return ie===null||ie.tag!==7?(ie=Co(le,se.mode,Me,Be),ie.return=se,ie):(ie=v(ie,le),ie.return=se,ie)}function Se(se,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=up(""+ie,se.mode,le),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:return le=nl(ie.type,ie.key,ie.props,null,se.mode,le),le.ref=is(se,null,ie),le.return=se,le;case E:return ie=lp(ie,se.mode,le),ie.return=se,ie;case W:var Me=ie._init;return Se(se,Me(ie._payload),le)}if(ft(ie)||K(ie))return ie=Co(ie,se.mode,le,null),ie.return=se,ie;ju(se,ie)}return null}function we(se,ie,le,Me){var Be=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Be!==null?null:G(se,ie,""+le,Me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return le.key===Be?ee(se,ie,le,Me):null;case E:return le.key===Be?pe(se,ie,le,Me):null;case W:return Be=le._init,we(se,ie,Be(le._payload),Me)}if(ft(le)||K(le))return Be!==null?null:qe(se,ie,le,Me,null);ju(se,le)}return null}function Oe(se,ie,le,Me,Be){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return se=se.get(le)||null,G(ie,se,""+Me,Be);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:return se=se.get(Me.key===null?le:Me.key)||null,ee(ie,se,Me,Be);case E:return se=se.get(Me.key===null?le:Me.key)||null,pe(ie,se,Me,Be);case W:var Ue=Me._init;return Oe(se,ie,le,Ue(Me._payload),Be)}if(ft(Me)||K(Me))return se=se.get(le)||null,qe(ie,se,Me,Be,null);ju(ie,Me)}return null}function Ae(se,ie,le,Me){for(var Be=null,Ue=null,Ge=ie,Ke=ie=0,Xt=null;Ge!==null&&Ke<le.length;Ke++){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var ot=we(se,Ge,le[Ke],Me);if(ot===null){Ge===null&&(Ge=Xt);break}r&&Ge&&ot.alternate===null&&o(se,Ge),ie=C(ot,ie,Ke),Ue===null?Be=ot:Ue.sibling=ot,Ue=ot,Ge=Xt}if(Ke===le.length)return c(se,Ge),wt&&yo(se,Ke),Be;if(Ge===null){for(;Ke<le.length;Ke++)Ge=Se(se,le[Ke],Me),Ge!==null&&(ie=C(Ge,ie,Ke),Ue===null?Be=Ge:Ue.sibling=Ge,Ue=Ge);return wt&&yo(se,Ke),Be}for(Ge=y(se,Ge);Ke<le.length;Ke++)Xt=Oe(Ge,se,Ke,le[Ke],Me),Xt!==null&&(r&&Xt.alternate!==null&&Ge.delete(Xt.key===null?Ke:Xt.key),ie=C(Xt,ie,Ke),Ue===null?Be=Xt:Ue.sibling=Xt,Ue=Xt);return r&&Ge.forEach(function(zi){return o(se,zi)}),wt&&yo(se,Ke),Be}function Le(se,ie,le,Me){var Be=K(le);if(typeof Be!="function")throw Error(n(150));if(le=Be.call(le),le==null)throw Error(n(151));for(var Ue=Be=null,Ge=ie,Ke=ie=0,Xt=null,ot=le.next();Ge!==null&&!ot.done;Ke++,ot=le.next()){Ge.index>Ke?(Xt=Ge,Ge=null):Xt=Ge.sibling;var zi=we(se,Ge,ot.value,Me);if(zi===null){Ge===null&&(Ge=Xt);break}r&&Ge&&zi.alternate===null&&o(se,Ge),ie=C(zi,ie,Ke),Ue===null?Be=zi:Ue.sibling=zi,Ue=zi,Ge=Xt}if(ot.done)return c(se,Ge),wt&&yo(se,Ke),Be;if(Ge===null){for(;!ot.done;Ke++,ot=le.next())ot=Se(se,ot.value,Me),ot!==null&&(ie=C(ot,ie,Ke),Ue===null?Be=ot:Ue.sibling=ot,Ue=ot);return wt&&yo(se,Ke),Be}for(Ge=y(se,Ge);!ot.done;Ke++,ot=le.next())ot=Oe(Ge,se,Ke,ot.value,Me),ot!==null&&(r&&ot.alternate!==null&&Ge.delete(ot.key===null?Ke:ot.key),ie=C(ot,ie,Ke),Ue===null?Be=ot:Ue.sibling=ot,Ue=ot);return r&&Ge.forEach(function(jT){return o(se,jT)}),wt&&yo(se,Ke),Be}function jt(se,ie,le,Me){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case I:e:{for(var Be=le.key,Ue=ie;Ue!==null;){if(Ue.key===Be){if(Be=le.type,Be===T){if(Ue.tag===7){c(se,Ue.sibling),ie=v(Ue,le.props.children),ie.return=se,se=ie;break e}}else if(Ue.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===W&&_v(Be)===Ue.type){c(se,Ue.sibling),ie=v(Ue,le.props),ie.ref=is(se,Ue,le),ie.return=se,se=ie;break e}c(se,Ue);break}else o(se,Ue);Ue=Ue.sibling}le.type===T?(ie=Co(le.props.children,se.mode,Me,le.key),ie.return=se,se=ie):(Me=nl(le.type,le.key,le.props,null,se.mode,Me),Me.ref=is(se,ie,le),Me.return=se,se=Me)}return R(se);case E:e:{for(Ue=le.key;ie!==null;){if(ie.key===Ue)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){c(se,ie.sibling),ie=v(ie,le.children||[]),ie.return=se,se=ie;break e}else{c(se,ie);break}else o(se,ie);ie=ie.sibling}ie=lp(le,se.mode,Me),ie.return=se,se=ie}return R(se);case W:return Ue=le._init,jt(se,ie,Ue(le._payload),Me)}if(ft(le))return Ae(se,ie,le,Me);if(K(le))return Le(se,ie,le,Me);ju(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ie!==null&&ie.tag===6?(c(se,ie.sibling),ie=v(ie,le),ie.return=se,se=ie):(c(se,ie),ie=up(le,se.mode,Me),ie.return=se,se=ie),R(se)):c(se,ie)}return jt}var sa=mv(!0),hv=mv(!1),Ru=Ni(null),Vu=null,ua=null,gd=null;function vd(){gd=ua=Vu=null}function xd(r){var o=Ru.current;gt(Ru),r._currentValue=o}function wd(r,o,c){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===c)break;r=r.return}}function la(r,o){Vu=r,gd=ua=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Er=!0),r.firstContext=null)}function tn(r){var o=r._currentValue;if(gd!==r)if(r={context:r,memoizedValue:o,next:null},ua===null){if(Vu===null)throw Error(n(308));ua=r,Vu.dependencies={lanes:0,firstContext:r}}else ua=ua.next=r;return o}var go=null;function bd(r){go===null?go=[r]:go.push(r)}function yv(r,o,c,y){var v=o.interleaved;return v===null?(c.next=c,bd(o)):(c.next=v.next,v.next=c),o.interleaved=c,li(r,y)}function li(r,o){r.lanes|=o;var c=r.alternate;for(c!==null&&(c.lanes|=o),c=r,r=r.return;r!==null;)r.childLanes|=o,c=r.alternate,c!==null&&(c.childLanes|=o),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Ri=!1;function qd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ci(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Vi(r,o,c){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(rt&2)!==0){var v=y.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),y.pending=o,li(r,c)}return v=y.interleaved,v===null?(o.next=o,bd(y)):(o.next=v.next,v.next=o),y.interleaved=o,li(r,c)}function Ou(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,We(r,c)}}function vv(r,o){var c=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,c===y)){var v=null,C=null;if(c=c.firstBaseUpdate,c!==null){do{var R={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};C===null?v=C=R:C=C.next=R,c=c.next}while(c!==null);C===null?v=C=o:C=C.next=o}else v=C=o;c={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:y.shared,effects:y.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}function Fu(r,o,c,y){var v=r.updateQueue;Ri=!1;var C=v.firstBaseUpdate,R=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var ee=G,pe=ee.next;ee.next=null,R===null?C=pe:R.next=pe,R=ee;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,G=qe.lastBaseUpdate,G!==R&&(G===null?qe.firstBaseUpdate=pe:G.next=pe,qe.lastBaseUpdate=ee))}if(C!==null){var Se=v.baseState;R=0,qe=pe=ee=null,G=C;do{var we=G.lane,Oe=G.eventTime;if((y&we)===we){qe!==null&&(qe=qe.next={eventTime:Oe,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ae=r,Le=G;switch(we=o,Oe=c,Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){Se=Ae.call(Oe,Se,we);break e}Se=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,we=typeof Ae=="function"?Ae.call(Oe,Se,we):Ae,we==null)break e;Se=oe({},Se,we);break e;case 2:Ri=!0}}G.callback!==null&&G.lane!==0&&(r.flags|=64,we=v.effects,we===null?v.effects=[G]:we.push(G))}else Oe={eventTime:Oe,lane:we,tag:G.tag,payload:G.payload,callback:G.callback,next:null},qe===null?(pe=qe=Oe,ee=Se):qe=qe.next=Oe,R|=we;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;we=G,G=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);if(qe===null&&(ee=Se),v.baseState=ee,v.firstBaseUpdate=pe,v.lastBaseUpdate=qe,o=v.shared.interleaved,o!==null){v=o;do R|=v.lane,v=v.next;while(v!==o)}else C===null&&(v.shared.lanes=0);wo|=R,r.lanes=R,r.memoizedState=Se}}function xv(r,o,c){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],v=y.callback;if(v!==null){if(y.callback=null,y=c,typeof v!="function")throw Error(n(191,v));v.call(y)}}}var os={},Dn=Ni(os),as=Ni(os),ss=Ni(os);function vo(r){if(r===os)throw Error(n(174));return r}function Sd(r,o){switch(pt(ss,o),pt(as,r),pt(Dn,os),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Jt(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Jt(o,r)}gt(Dn),pt(Dn,o)}function ca(){gt(Dn),gt(as),gt(ss)}function wv(r){vo(ss.current);var o=vo(Dn.current),c=Jt(o,r.type);o!==c&&(pt(as,r),pt(Dn,c))}function Cd(r){as.current===r&&(gt(Dn),gt(as))}var kt=Ni(0);function Au(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var kd=[];function Md(){for(var r=0;r<kd.length;r++)kd[r]._workInProgressVersionPrimary=null;kd.length=0}var Lu=M.ReactCurrentDispatcher,Ed=M.ReactCurrentBatchConfig,xo=0,Mt=null,Bt=null,Yt=null,Du=!1,us=!1,ls=0,tT=0;function ur(){throw Error(n(321))}function Id(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!gn(r[c],o[c]))return!1;return!0}function Td(r,o,c,y,v,C){if(xo=C,Mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Lu.current=r===null||r.memoizedState===null?oT:aT,r=c(y,v),us){C=0;do{if(us=!1,ls=0,25<=C)throw Error(n(301));C+=1,Yt=Bt=null,o.updateQueue=null,Lu.current=sT,r=c(y,v)}while(us)}if(Lu.current=$u,o=Bt!==null&&Bt.next!==null,xo=0,Yt=Bt=Mt=null,Du=!1,o)throw Error(n(300));return r}function Nd(){var r=ls!==0;return ls=0,r}function Bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r,Yt}function rn(){if(Bt===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var o=Yt===null?Mt.memoizedState:Yt.next;if(o!==null)Yt=o,Bt=r;else{if(r===null)throw Error(n(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Yt===null?Mt.memoizedState=Yt=r:Yt=Yt.next=r}return Yt}function cs(r,o){return typeof o=="function"?o(r):o}function Pd(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=Bt,v=y.baseQueue,C=c.pending;if(C!==null){if(v!==null){var R=v.next;v.next=C.next,C.next=R}y.baseQueue=v=C,c.pending=null}if(v!==null){C=v.next,y=y.baseState;var G=R=null,ee=null,pe=C;do{var qe=pe.lane;if((xo&qe)===qe)ee!==null&&(ee=ee.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),y=pe.hasEagerState?pe.eagerState:r(y,pe.action);else{var Se={lane:qe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};ee===null?(G=ee=Se,R=y):ee=ee.next=Se,Mt.lanes|=qe,wo|=qe}pe=pe.next}while(pe!==null&&pe!==C);ee===null?R=y:ee.next=G,gn(y,o.memoizedState)||(Er=!0),o.memoizedState=y,o.baseState=R,o.baseQueue=ee,c.lastRenderedState=y}if(r=c.interleaved,r!==null){v=r;do C=v.lane,Mt.lanes|=C,wo|=C,v=v.next;while(v!==r)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function jd(r){var o=rn(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var y=c.dispatch,v=c.pending,C=o.memoizedState;if(v!==null){c.pending=null;var R=v=v.next;do C=r(C,R.action),R=R.next;while(R!==v);gn(C,o.memoizedState)||(Er=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),c.lastRenderedState=C}return[C,y]}function bv(){}function qv(r,o){var c=Mt,y=rn(),v=o(),C=!gn(y.memoizedState,v);if(C&&(y.memoizedState=v,Er=!0),y=y.queue,Rd(kv.bind(null,c,y,r),[r]),y.getSnapshot!==o||C||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,ds(9,Cv.bind(null,c,y,v,o),void 0,null),Qt===null)throw Error(n(349));(xo&30)!==0||Sv(c,o,v)}return v}function Sv(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Cv(r,o,c,y){o.value=c,o.getSnapshot=y,Mv(o)&&Ev(r)}function kv(r,o,c){return c(function(){Mv(o)&&Ev(r)})}function Mv(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!gn(r,c)}catch{return!0}}function Ev(r){var o=li(r,1);o!==null&&qn(o,r,1,-1)}function Iv(r){var o=Bn();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},o.queue=r,r=r.dispatch=iT.bind(null,Mt,r),[o.memoizedState,r]}function ds(r,o,c,y){return r={tag:r,create:o,destroy:c,deps:y,next:null},o=Mt.updateQueue,o===null?(o={lastEffect:null,stores:null},Mt.updateQueue=o,o.lastEffect=r.next=r):(c=o.lastEffect,c===null?o.lastEffect=r.next=r:(y=c.next,c.next=r,r.next=y,o.lastEffect=r)),r}function Tv(){return rn().memoizedState}function Bu(r,o,c,y){var v=Bn();Mt.flags|=r,v.memoizedState=ds(1|o,c,void 0,y===void 0?null:y)}function zu(r,o,c,y){var v=rn();y=y===void 0?null:y;var C=void 0;if(Bt!==null){var R=Bt.memoizedState;if(C=R.destroy,y!==null&&Id(y,R.deps)){v.memoizedState=ds(o,c,C,y);return}}Mt.flags|=r,v.memoizedState=ds(1|o,c,C,y)}function Nv(r,o){return Bu(8390656,8,r,o)}function Rd(r,o){return zu(2048,8,r,o)}function Pv(r,o){return zu(4,2,r,o)}function jv(r,o){return zu(4,4,r,o)}function Rv(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Vv(r,o,c){return c=c!=null?c.concat([r]):null,zu(4,4,Rv.bind(null,o,r),c)}function Vd(){}function Ov(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Id(o,y[1])?y[0]:(c.memoizedState=[r,o],r)}function Fv(r,o){var c=rn();o=o===void 0?null:o;var y=c.memoizedState;return y!==null&&o!==null&&Id(o,y[1])?y[0]:(r=r(),c.memoizedState=[r,o],r)}function Av(r,o,c){return(xo&21)===0?(r.baseState&&(r.baseState=!1,Er=!0),r.memoizedState=c):(gn(c,o)||(c=Ci(),Mt.lanes|=c,wo|=c,r.baseState=!0),o)}function rT(r,o){var c=ut;ut=c!==0&&4>c?c:4,r(!0);var y=Ed.transition;Ed.transition={};try{r(!1),o()}finally{ut=c,Ed.transition=y}}function Lv(){return rn().memoizedState}function nT(r,o,c){var y=Li(r);if(c={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null},Dv(r))Bv(o,c);else if(c=yv(r,o,c,y),c!==null){var v=br();qn(c,r,y,v),zv(c,o,y)}}function iT(r,o,c){var y=Li(r),v={lane:y,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dv(r))Bv(o,v);else{var C=r.alternate;if(r.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var R=o.lastRenderedState,G=C(R,c);if(v.hasEagerState=!0,v.eagerState=G,gn(G,R)){var ee=o.interleaved;ee===null?(v.next=v,bd(o)):(v.next=ee.next,ee.next=v),o.interleaved=v;return}}catch{}finally{}c=yv(r,o,v,y),c!==null&&(v=br(),qn(c,r,y,v),zv(c,o,y))}}function Dv(r){var o=r.alternate;return r===Mt||o!==null&&o===Mt}function Bv(r,o){us=Du=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function zv(r,o,c){if((c&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,c|=y,o.lanes=c,We(r,c)}}var $u={readContext:tn,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},oT={readContext:tn,useCallback:function(r,o){return Bn().memoizedState=[r,o===void 0?null:o],r},useContext:tn,useEffect:Nv,useImperativeHandle:function(r,o,c){return c=c!=null?c.concat([r]):null,Bu(4194308,4,Rv.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Bu(4194308,4,r,o)},useInsertionEffect:function(r,o){return Bu(4,2,r,o)},useMemo:function(r,o){var c=Bn();return o=o===void 0?null:o,r=r(),c.memoizedState=[r,o],r},useReducer:function(r,o,c){var y=Bn();return o=c!==void 0?c(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=nT.bind(null,Mt,r),[y.memoizedState,r]},useRef:function(r){var o=Bn();return r={current:r},o.memoizedState=r},useState:Iv,useDebugValue:Vd,useDeferredValue:function(r){return Bn().memoizedState=r},useTransition:function(){var r=Iv(!1),o=r[0];return r=rT.bind(null,r[1]),Bn().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,c){var y=Mt,v=Bn();if(wt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Qt===null)throw Error(n(349));(xo&30)!==0||Sv(y,o,c)}v.memoizedState=c;var C={value:c,getSnapshot:o};return v.queue=C,Nv(kv.bind(null,y,C,r),[r]),y.flags|=2048,ds(9,Cv.bind(null,y,C,c,o),void 0,null),c},useId:function(){var r=Bn(),o=Qt.identifierPrefix;if(wt){var c=ui,y=si;c=(y&~(1<<32-gr(y)-1)).toString(32)+c,o=":"+o+"R"+c,c=ls++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=tT++,o=":"+o+"r"+c.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},aT={readContext:tn,useCallback:Ov,useContext:tn,useEffect:Rd,useImperativeHandle:Vv,useInsertionEffect:Pv,useLayoutEffect:jv,useMemo:Fv,useReducer:Pd,useRef:Tv,useState:function(){return Pd(cs)},useDebugValue:Vd,useDeferredValue:function(r){var o=rn();return Av(o,Bt.memoizedState,r)},useTransition:function(){var r=Pd(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1},sT={readContext:tn,useCallback:Ov,useContext:tn,useEffect:Rd,useImperativeHandle:Vv,useInsertionEffect:Pv,useLayoutEffect:jv,useMemo:Fv,useReducer:jd,useRef:Tv,useState:function(){return jd(cs)},useDebugValue:Vd,useDeferredValue:function(r){var o=rn();return Bt===null?o.memoizedState=r:Av(o,Bt.memoizedState,r)},useTransition:function(){var r=jd(cs)[0],o=rn().memoizedState;return[r,o]},useMutableSource:bv,useSyncExternalStore:qv,useId:Lv,unstable_isNewReconciler:!1};function xn(r,o){if(r&&r.defaultProps){o=oe({},o),r=r.defaultProps;for(var c in r)o[c]===void 0&&(o[c]=r[c]);return o}return o}function Od(r,o,c,y){o=r.memoizedState,c=c(y,o),c=c==null?o:oe({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Hu={isMounted:function(r){return(r=r._reactInternals)?Et(r)===r:!1},enqueueSetState:function(r,o,c){r=r._reactInternals;var y=br(),v=Li(r),C=ci(y,v);C.payload=o,c!=null&&(C.callback=c),o=Vi(r,C,v),o!==null&&(qn(o,r,v,y),Ou(o,r,v))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var y=br(),v=Li(r),C=ci(y,v);C.tag=1,C.payload=o,c!=null&&(C.callback=c),o=Vi(r,C,v),o!==null&&(qn(o,r,v,y),Ou(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=br(),y=Li(r),v=ci(c,y);v.tag=2,o!=null&&(v.callback=o),o=Vi(r,v,y),o!==null&&(qn(o,r,y,c),Ou(o,r,y))}};function $v(r,o,c,y,v,C,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,C,R):o.prototype&&o.prototype.isPureReactComponent?!Xa(c,y)||!Xa(v,C):!0}function Hv(r,o,c){var y=!1,v=Pi,C=o.contextType;return typeof C=="object"&&C!==null?C=tn(C):(v=Mr(o)?mo:sr.current,y=o.contextTypes,C=(y=y!=null)?na(r,v):Pi),o=new o(c,C),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Hu,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=C),o}function Wv(r,o,c,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,y),o.state!==r&&Hu.enqueueReplaceState(o,o.state,null)}function Fd(r,o,c,y){var v=r.stateNode;v.props=c,v.state=r.memoizedState,v.refs={},qd(r);var C=o.contextType;typeof C=="object"&&C!==null?v.context=tn(C):(C=Mr(o)?mo:sr.current,v.context=na(r,C)),v.state=r.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Od(r,o,C,c),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Hu.enqueueReplaceState(v,v.state,null),Fu(r,c,v,y),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function da(r,o){try{var c="",y=o;do c+=J(y),y=y.return;while(y);var v=c}catch(C){v=`
Error generating stack: `+C.message+`
`+C.stack}return{value:r,source:o,stack:v,digest:null}}function Ad(r,o,c){return{value:r,source:null,stack:c??null,digest:o??null}}function Ld(r,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var uT=typeof WeakMap=="function"?WeakMap:Map;function Uv(r,o,c){c=ci(-1,c),c.tag=3,c.payload={element:null};var y=o.value;return c.callback=function(){Xu||(Xu=!0,ep=y),Ld(r,o)},c}function Gv(r,o,c){c=ci(-1,c),c.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var v=o.value;c.payload=function(){return y(v)},c.callback=function(){Ld(r,o)}}var C=r.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(c.callback=function(){Ld(r,o),typeof y!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})}),c}function Kv(r,o,c){var y=r.pingCache;if(y===null){y=r.pingCache=new uT;var v=new Set;y.set(o,v)}else v=y.get(o),v===void 0&&(v=new Set,y.set(o,v));v.has(c)||(v.add(c),r=bT.bind(null,r,o,c),o.then(r,r))}function Yv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Qv(r,o,c,y,v){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=ci(-1,1),o.tag=2,Vi(c,o,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var lT=M.ReactCurrentOwner,Er=!1;function wr(r,o,c,y){o.child=r===null?hv(o,null,c,y):sa(o,r.child,c,y)}function Xv(r,o,c,y,v){c=c.render;var C=o.ref;return la(o,v),y=Td(r,o,c,y,C,v),c=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(wt&&c&&fd(o),o.flags|=1,wr(r,o,y,v),o.child)}function Zv(r,o,c,y,v){if(r===null){var C=c.type;return typeof C=="function"&&!sp(C)&&C.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=C,Jv(r,o,C,y,v)):(r=nl(c.type,null,y,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(C=r.child,(r.lanes&v)===0){var R=C.memoizedProps;if(c=c.compare,c=c!==null?c:Xa,c(R,y)&&r.ref===o.ref)return di(r,o,v)}return o.flags|=1,r=Bi(C,y),r.ref=o.ref,r.return=o,o.child=r}function Jv(r,o,c,y,v){if(r!==null){var C=r.memoizedProps;if(Xa(C,y)&&r.ref===o.ref)if(Er=!1,o.pendingProps=y=C,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Er=!0);else return o.lanes=r.lanes,di(r,o,v)}return Dd(r,o,c,y,v)}function ex(r,o,c){var y=o.pendingProps,v=y.children,C=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(fa,zr),zr|=c;else{if((c&1073741824)===0)return r=C!==null?C.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,pt(fa,zr),zr|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=C!==null?C.baseLanes:c,pt(fa,zr),zr|=y}else C!==null?(y=C.baseLanes|c,o.memoizedState=null):y=c,pt(fa,zr),zr|=y;return wr(r,o,v,c),o.child}function tx(r,o){var c=o.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Dd(r,o,c,y,v){var C=Mr(c)?mo:sr.current;return C=na(o,C),la(o,v),c=Td(r,o,c,y,C,v),y=Nd(),r!==null&&!Er?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,di(r,o,v)):(wt&&y&&fd(o),o.flags|=1,wr(r,o,c,v),o.child)}function rx(r,o,c,y,v){if(Mr(c)){var C=!0;Eu(o)}else C=!1;if(la(o,v),o.stateNode===null)Uu(r,o),Hv(o,c,y),Fd(o,c,y,v),y=!0;else if(r===null){var R=o.stateNode,G=o.memoizedProps;R.props=G;var ee=R.context,pe=c.contextType;typeof pe=="object"&&pe!==null?pe=tn(pe):(pe=Mr(c)?mo:sr.current,pe=na(o,pe));var qe=c.getDerivedStateFromProps,Se=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function";Se||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G!==y||ee!==pe)&&Wv(o,R,y,pe),Ri=!1;var we=o.memoizedState;R.state=we,Fu(o,y,R,v),ee=o.memoizedState,G!==y||we!==ee||kr.current||Ri?(typeof qe=="function"&&(Od(o,c,qe,y),ee=o.memoizedState),(G=Ri||$v(o,c,G,y,we,ee,pe))?(Se||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=ee),R.props=y,R.state=ee,R.context=pe,y=G):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{R=o.stateNode,gv(r,o),G=o.memoizedProps,pe=o.type===o.elementType?G:xn(o.type,G),R.props=pe,Se=o.pendingProps,we=R.context,ee=c.contextType,typeof ee=="object"&&ee!==null?ee=tn(ee):(ee=Mr(c)?mo:sr.current,ee=na(o,ee));var Oe=c.getDerivedStateFromProps;(qe=typeof Oe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G!==Se||we!==ee)&&Wv(o,R,y,ee),Ri=!1,we=o.memoizedState,R.state=we,Fu(o,y,R,v);var Ae=o.memoizedState;G!==Se||we!==Ae||kr.current||Ri?(typeof Oe=="function"&&(Od(o,c,Oe,y),Ae=o.memoizedState),(pe=Ri||$v(o,c,pe,y,we,Ae,ee)||!1)?(qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Ae,ee),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Ae,ee)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ae),R.props=y,R.state=Ae,R.context=ee,y=pe):(typeof R.componentDidUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&we===r.memoizedState||(o.flags|=1024),y=!1)}return Bd(r,o,c,y,C,v)}function Bd(r,o,c,y,v,C){tx(r,o);var R=(o.flags&128)!==0;if(!y&&!R)return v&&sv(o,c,!1),di(r,o,C);y=o.stateNode,lT.current=o;var G=R&&typeof c.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&R?(o.child=sa(o,r.child,null,C),o.child=sa(o,null,G,C)):wr(r,o,G,C),o.memoizedState=y.state,v&&sv(o,c,!0),o.child}function nx(r){var o=r.stateNode;o.pendingContext?ov(r,o.pendingContext,o.pendingContext!==o.context):o.context&&ov(r,o.context,!1),Sd(r,o.containerInfo)}function ix(r,o,c,y,v){return aa(),yd(v),o.flags|=256,wr(r,o,c,y),o.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function $d(r){return{baseLanes:r,cachePool:null,transitions:null}}function ox(r,o,c){var y=o.pendingProps,v=kt.current,C=!1,R=(o.flags&128)!==0,G;if((G=R)||(G=r!==null&&r.memoizedState===null?!1:(v&2)!==0),G?(C=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),pt(kt,v&1),r===null)return hd(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(R=y.children,r=y.fallback,C?(y=o.mode,C=o.child,R={mode:"hidden",children:R},(y&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=R):C=il(R,y,0,null),r=Co(r,y,c,null),C.return=o,r.return=o,C.sibling=r,o.child=C,o.child.memoizedState=$d(c),o.memoizedState=zd,r):Hd(o,R));if(v=r.memoizedState,v!==null&&(G=v.dehydrated,G!==null))return cT(r,o,R,y,G,v,c);if(C){C=y.fallback,R=o.mode,v=r.child,G=v.sibling;var ee={mode:"hidden",children:y.children};return(R&1)===0&&o.child!==v?(y=o.child,y.childLanes=0,y.pendingProps=ee,o.deletions=null):(y=Bi(v,ee),y.subtreeFlags=v.subtreeFlags&14680064),G!==null?C=Bi(G,C):(C=Co(C,R,c,null),C.flags|=2),C.return=o,y.return=o,y.sibling=C,o.child=y,y=C,C=o.child,R=r.child.memoizedState,R=R===null?$d(c):{baseLanes:R.baseLanes|c,cachePool:null,transitions:R.transitions},C.memoizedState=R,C.childLanes=r.childLanes&~c,o.memoizedState=zd,y}return C=r.child,r=C.sibling,y=Bi(C,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=c),y.return=o,y.sibling=null,r!==null&&(c=o.deletions,c===null?(o.deletions=[r],o.flags|=16):c.push(r)),o.child=y,o.memoizedState=null,y}function Hd(r,o){return o=il({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Wu(r,o,c,y){return y!==null&&yd(y),sa(o,r.child,null,c),r=Hd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function cT(r,o,c,y,v,C,R){if(c)return o.flags&256?(o.flags&=-257,y=Ad(Error(n(422))),Wu(r,o,R,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(C=y.fallback,v=o.mode,y=il({mode:"visible",children:y.children},v,0,null),C=Co(C,v,R,null),C.flags|=2,y.return=o,C.return=o,y.sibling=C,o.child=y,(o.mode&1)!==0&&sa(o,r.child,null,R),o.child.memoizedState=$d(R),o.memoizedState=zd,C);if((o.mode&1)===0)return Wu(r,o,R,null);if(v.data==="$!"){if(y=v.nextSibling&&v.nextSibling.dataset,y)var G=y.dgst;return y=G,C=Error(n(419)),y=Ad(C,y,void 0),Wu(r,o,R,y)}if(G=(R&r.childLanes)!==0,Er||G){if(y=Qt,y!==null){switch(R&-R){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(y.suspendedLanes|R))!==0?0:v,v!==0&&v!==C.retryLane&&(C.retryLane=v,li(r,v),qn(y,r,v,-1))}return ap(),y=Ad(Error(n(421))),Wu(r,o,R,y)}return v.data==="$?"?(o.flags|=128,o.child=r.child,o=qT.bind(null,r),v._reactRetry=o,null):(r=C.treeContext,Br=Ti(v.nextSibling),Dr=o,wt=!0,vn=null,r!==null&&(Jr[en++]=si,Jr[en++]=ui,Jr[en++]=ho,si=r.id,ui=r.overflow,ho=o),o=Hd(o,y.children),o.flags|=4096,o)}function ax(r,o,c){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),wd(r.return,o,c)}function Wd(r,o,c,y,v){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:c,tailMode:v}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=c,C.tailMode=v)}function sx(r,o,c){var y=o.pendingProps,v=y.revealOrder,C=y.tail;if(wr(r,o,y.children,c),y=kt.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ax(r,c,o);else if(r.tag===19)ax(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(pt(kt,y),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)r=c.alternate,r!==null&&Au(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Wd(o,!1,v,c,C);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Au(r)===null){o.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Wd(o,!0,c,null,C);break;case"together":Wd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Uu(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function di(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),wo|=o.lanes,(c&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Bi(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Bi(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function dT(r,o,c){switch(o.tag){case 3:nx(o),aa();break;case 5:wv(o);break;case 1:Mr(o.type)&&Eu(o);break;case 4:Sd(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,v=o.memoizedProps.value;pt(Ru,y._currentValue),y._currentValue=v;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(pt(kt,kt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?ox(r,o,c):(pt(kt,kt.current&1),r=di(r,o,c),r!==null?r.sibling:null);pt(kt,kt.current&1);break;case 19:if(y=(c&o.childLanes)!==0,(r.flags&128)!==0){if(y)return sx(r,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pt(kt,kt.current),y)break;return null;case 22:case 23:return o.lanes=0,ex(r,o,c)}return di(r,o,c)}var ux,Ud,lx,cx;ux=function(r,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ud=function(){},lx=function(r,o,c,y){var v=r.memoizedProps;if(v!==y){r=o.stateNode,vo(Dn.current);var C=null;switch(c){case"input":v=Pe(r,v),y=Pe(r,y),C=[];break;case"select":v=oe({},v,{value:void 0}),y=oe({},y,{value:void 0}),C=[];break;case"textarea":v=dt(r,v),y=dt(r,y),C=[];break;default:typeof v.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Cu)}Nt(c,y);var R;c=null;for(pe in v)if(!y.hasOwnProperty(pe)&&v.hasOwnProperty(pe)&&v[pe]!=null)if(pe==="style"){var G=v[pe];for(R in G)G.hasOwnProperty(R)&&(c||(c={}),c[R]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(a.hasOwnProperty(pe)?C||(C=[]):(C=C||[]).push(pe,null));for(pe in y){var ee=y[pe];if(G=v!=null?v[pe]:void 0,y.hasOwnProperty(pe)&&ee!==G&&(ee!=null||G!=null))if(pe==="style")if(G){for(R in G)!G.hasOwnProperty(R)||ee&&ee.hasOwnProperty(R)||(c||(c={}),c[R]="");for(R in ee)ee.hasOwnProperty(R)&&G[R]!==ee[R]&&(c||(c={}),c[R]=ee[R])}else c||(C||(C=[]),C.push(pe,c)),c=ee;else pe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,G=G?G.__html:void 0,ee!=null&&G!==ee&&(C=C||[]).push(pe,ee)):pe==="children"?typeof ee!="string"&&typeof ee!="number"||(C=C||[]).push(pe,""+ee):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(a.hasOwnProperty(pe)?(ee!=null&&pe==="onScroll"&&yt("scroll",r),C||G===ee||(C=[])):(C=C||[]).push(pe,ee))}c&&(C=C||[]).push("style",c);var pe=C;(o.updateQueue=pe)&&(o.flags|=4)}},cx=function(r,o,c,y){c!==y&&(o.flags|=4)};function ps(r,o){if(!wt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var y=null;c!==null;)c.alternate!==null&&(y=c),c=c.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function lr(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,y=0;if(o)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags&14680064,y|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=y,r.childLanes=c,o}function pT(r,o,c){var y=o.pendingProps;switch(_d(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(o),null;case 1:return Mr(o.type)&&Mu(),lr(o),null;case 3:return y=o.stateNode,ca(),gt(kr),gt(sr),Md(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(Pu(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vn!==null&&(np(vn),vn=null))),Ud(r,o),lr(o),null;case 5:Cd(o);var v=vo(ss.current);if(c=o.type,r!==null&&o.stateNode!=null)lx(r,o,c,y,v),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(n(166));return lr(o),null}if(r=vo(Dn.current),Pu(o)){y=o.stateNode,c=o.type;var C=o.memoizedProps;switch(y[Ln]=o,y[rs]=C,r=(o.mode&1)!==0,c){case"dialog":yt("cancel",y),yt("close",y);break;case"iframe":case"object":case"embed":yt("load",y);break;case"video":case"audio":for(v=0;v<Ja.length;v++)yt(Ja[v],y);break;case"source":yt("error",y);break;case"img":case"image":case"link":yt("error",y),yt("load",y);break;case"details":yt("toggle",y);break;case"input":Ve(y,C),yt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!C.multiple},yt("invalid",y);break;case"textarea":lt(y,C),yt("invalid",y)}Nt(c,C),v=null;for(var R in C)if(C.hasOwnProperty(R)){var G=C[R];R==="children"?typeof G=="string"?y.textContent!==G&&(C.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",G]):typeof G=="number"&&y.textContent!==""+G&&(C.suppressHydrationWarning!==!0&&Su(y.textContent,G,r),v=["children",""+G]):a.hasOwnProperty(R)&&G!=null&&R==="onScroll"&&yt("scroll",y)}switch(c){case"input":Ne(y),nt(y,C,!0);break;case"textarea":Ne(y),Zt(y);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(y.onclick=Cu)}y=v,o.updateQueue=y,y!==null&&(o.flags|=4)}else{R=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$t(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=R.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=R.createElement(c,{is:y.is}):(r=R.createElement(c),c==="select"&&(R=r,y.multiple?R.multiple=!0:y.size&&(R.size=y.size))):r=R.createElementNS(r,c),r[Ln]=o,r[rs]=y,ux(r,o,!1,!1),o.stateNode=r;e:{switch(R=ln(c,y),c){case"dialog":yt("cancel",r),yt("close",r),v=y;break;case"iframe":case"object":case"embed":yt("load",r),v=y;break;case"video":case"audio":for(v=0;v<Ja.length;v++)yt(Ja[v],r);v=y;break;case"source":yt("error",r),v=y;break;case"img":case"image":case"link":yt("error",r),yt("load",r),v=y;break;case"details":yt("toggle",r),v=y;break;case"input":Ve(r,y),v=Pe(r,y),yt("invalid",r);break;case"option":v=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},v=oe({},y,{value:void 0}),yt("invalid",r);break;case"textarea":lt(r,y),v=dt(r,y),yt("invalid",r);break;default:v=y}Nt(c,v),G=v;for(C in G)if(G.hasOwnProperty(C)){var ee=G[C];C==="style"?Qe(r,ee):C==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Rr(r,ee)):C==="children"?typeof ee=="string"?(c!=="textarea"||ee!=="")&&Tt(r,ee):typeof ee=="number"&&Tt(r,""+ee):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(a.hasOwnProperty(C)?ee!=null&&C==="onScroll"&&yt("scroll",r):ee!=null&&S(r,C,ee,R))}switch(c){case"input":Ne(r),nt(r,y,!1);break;case"textarea":Ne(r),Zt(r);break;case"option":y.value!=null&&r.setAttribute("value",""+ae(y.value));break;case"select":r.multiple=!!y.multiple,C=y.value,C!=null?ct(r,!!y.multiple,C,!1):y.defaultValue!=null&&ct(r,!!y.multiple,y.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Cu)}switch(c){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return lr(o),null;case 6:if(r&&o.stateNode!=null)cx(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(c=vo(ss.current),vo(Dn.current),Pu(o)){if(y=o.stateNode,c=o.memoizedProps,y[Ln]=o,(C=y.nodeValue!==c)&&(r=Dr,r!==null))switch(r.tag){case 3:Su(y.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Su(y.nodeValue,c,(r.mode&1)!==0)}C&&(o.flags|=4)}else y=(c.nodeType===9?c:c.ownerDocument).createTextNode(y),y[Ln]=o,o.stateNode=y}return lr(o),null;case 13:if(gt(kt),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&Br!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fv(),aa(),o.flags|=98560,C=!1;else if(C=Pu(o),y!==null&&y.dehydrated!==null){if(r===null){if(!C)throw Error(n(318));if(C=o.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Ln]=o}else aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lr(o),C=!1}else vn!==null&&(np(vn),vn=null),C=!0;if(!C)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(kt.current&1)!==0?zt===0&&(zt=3):ap())),o.updateQueue!==null&&(o.flags|=4),lr(o),null);case 4:return ca(),Ud(r,o),r===null&&es(o.stateNode.containerInfo),lr(o),null;case 10:return xd(o.type._context),lr(o),null;case 17:return Mr(o.type)&&Mu(),lr(o),null;case 19:if(gt(kt),C=o.memoizedState,C===null)return lr(o),null;if(y=(o.flags&128)!==0,R=C.rendering,R===null)if(y)ps(C,!1);else{if(zt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(R=Au(r),R!==null){for(o.flags|=128,ps(C,!1),y=R.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=c,c=o.child;c!==null;)C=c,r=y,C.flags&=14680066,R=C.alternate,R===null?(C.childLanes=0,C.lanes=r,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=R.childLanes,C.lanes=R.lanes,C.child=R.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=R.memoizedProps,C.memoizedState=R.memoizedState,C.updateQueue=R.updateQueue,C.type=R.type,r=R.dependencies,C.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return pt(kt,kt.current&1|2),o.child}r=r.sibling}C.tail!==null&&mt()>_a&&(o.flags|=128,y=!0,ps(C,!1),o.lanes=4194304)}else{if(!y)if(r=Au(R),r!==null){if(o.flags|=128,y=!0,c=r.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),ps(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!wt)return lr(o),null}else 2*mt()-C.renderingStartTime>_a&&c!==1073741824&&(o.flags|=128,y=!0,ps(C,!1),o.lanes=4194304);C.isBackwards?(R.sibling=o.child,o.child=R):(c=C.last,c!==null?c.sibling=R:o.child=R,C.last=R)}return C.tail!==null?(o=C.tail,C.rendering=o,C.tail=o.sibling,C.renderingStartTime=mt(),o.sibling=null,c=kt.current,pt(kt,y?c&1|2:c&1),o):(lr(o),null);case 22:case 23:return op(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(zr&1073741824)!==0&&(lr(o),o.subtreeFlags&6&&(o.flags|=8192)):lr(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function fT(r,o){switch(_d(o),o.tag){case 1:return Mr(o.type)&&Mu(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ca(),gt(kr),gt(sr),Md(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Cd(o),null;case 13:if(gt(kt),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));aa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return gt(kt),null;case 4:return ca(),null;case 10:return xd(o.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var Gu=!1,cr=!1,_T=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function pa(r,o){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(y){It(r,o,y)}else c.current=null}function Gd(r,o,c){try{c()}catch(y){It(r,o,y)}}var dx=!1;function mT(r,o){if(od=Ko,r=$g(),Xc(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var y=c.getSelection&&c.getSelection();if(y&&y.rangeCount!==0){c=y.anchorNode;var v=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{c.nodeType,C.nodeType}catch{c=null;break e}var R=0,G=-1,ee=-1,pe=0,qe=0,Se=r,we=null;t:for(;;){for(var Oe;Se!==c||v!==0&&Se.nodeType!==3||(G=R+v),Se!==C||y!==0&&Se.nodeType!==3||(ee=R+y),Se.nodeType===3&&(R+=Se.nodeValue.length),(Oe=Se.firstChild)!==null;)we=Se,Se=Oe;for(;;){if(Se===r)break t;if(we===c&&++pe===v&&(G=R),we===C&&++qe===y&&(ee=R),(Oe=Se.nextSibling)!==null)break;Se=we,we=Se.parentNode}Se=Oe}c=G===-1||ee===-1?null:{start:G,end:ee}}else c=null}c=c||{start:0,end:0}}else c=null;for(ad={focusedElem:r,selectionRange:c},Ko=!1,Fe=o;Fe!==null;)if(o=Fe,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Fe=r;else for(;Fe!==null;){o=Fe;try{var Ae=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Le=Ae.memoizedProps,jt=Ae.memoizedState,se=o.stateNode,ie=se.getSnapshotBeforeUpdate(o.elementType===o.type?Le:xn(o.type,Le),jt);se.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var le=o.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Me){It(o,o.return,Me)}if(r=o.sibling,r!==null){r.return=o.return,Fe=r;break}Fe=o.return}return Ae=dx,dx=!1,Ae}function fs(r,o,c){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var v=y=y.next;do{if((v.tag&r)===r){var C=v.destroy;v.destroy=void 0,C!==void 0&&Gd(o,c,C)}v=v.next}while(v!==y)}}function Ku(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&r)===r){var y=c.create;c.destroy=y()}c=c.next}while(c!==o)}}function Kd(r){var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof o=="function"?o(r):o.current=r}}function px(r){var o=r.alternate;o!==null&&(r.alternate=null,px(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Ln],delete o[rs],delete o[cd],delete o[XI],delete o[ZI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function fx(r){return r.tag===5||r.tag===3||r.tag===4}function _x(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||fx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(r,o):c.insertBefore(r,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(r,c)):(o=c,o.appendChild(r)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Cu));else if(y!==4&&(r=r.child,r!==null))for(Yd(r,o,c),r=r.sibling;r!==null;)Yd(r,o,c),r=r.sibling}function Qd(r,o,c){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(Qd(r,o,c),r=r.sibling;r!==null;)Qd(r,o,c),r=r.sibling}var ir=null,wn=!1;function Oi(r,o,c){for(c=c.child;c!==null;)mx(r,o,c),c=c.sibling}function mx(r,o,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(On,c)}catch{}switch(c.tag){case 5:cr||pa(c,o);case 6:var y=ir,v=wn;ir=null,Oi(r,o,c),ir=y,wn=v,ir!==null&&(wn?(r=ir,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):ir.removeChild(c.stateNode));break;case 18:ir!==null&&(wn?(r=ir,c=c.stateNode,r.nodeType===8?ld(r.parentNode,c):r.nodeType===1&&ld(r,c),uo(r)):ld(ir,c.stateNode));break;case 4:y=ir,v=wn,ir=c.stateNode.containerInfo,wn=!0,Oi(r,o,c),ir=y,wn=v;break;case 0:case 11:case 14:case 15:if(!cr&&(y=c.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){v=y=y.next;do{var C=v,R=C.destroy;C=C.tag,R!==void 0&&((C&2)!==0||(C&4)!==0)&&Gd(c,o,R),v=v.next}while(v!==y)}Oi(r,o,c);break;case 1:if(!cr&&(pa(c,o),y=c.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=c.memoizedProps,y.state=c.memoizedState,y.componentWillUnmount()}catch(G){It(c,o,G)}Oi(r,o,c);break;case 21:Oi(r,o,c);break;case 22:c.mode&1?(cr=(y=cr)||c.memoizedState!==null,Oi(r,o,c),cr=y):Oi(r,o,c);break;default:Oi(r,o,c)}}function hx(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new _T),o.forEach(function(y){var v=ST.bind(null,r,y);c.has(y)||(c.add(y),y.then(v,v))})}}function bn(r,o){var c=o.deletions;if(c!==null)for(var y=0;y<c.length;y++){var v=c[y];try{var C=r,R=o,G=R;e:for(;G!==null;){switch(G.tag){case 5:ir=G.stateNode,wn=!1;break e;case 3:ir=G.stateNode.containerInfo,wn=!0;break e;case 4:ir=G.stateNode.containerInfo,wn=!0;break e}G=G.return}if(ir===null)throw Error(n(160));mx(C,R,v),ir=null,wn=!1;var ee=v.alternate;ee!==null&&(ee.return=null),v.return=null}catch(pe){It(v,o,pe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)yx(o,r),o=o.sibling}function yx(r,o){var c=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bn(o,r),zn(r),y&4){try{fs(3,r,r.return),Ku(3,r)}catch(Le){It(r,r.return,Le)}try{fs(5,r,r.return)}catch(Le){It(r,r.return,Le)}}break;case 1:bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return);break;case 5:if(bn(o,r),zn(r),y&512&&c!==null&&pa(c,c.return),r.flags&32){var v=r.stateNode;try{Tt(v,"")}catch(Le){It(r,r.return,Le)}}if(y&4&&(v=r.stateNode,v!=null)){var C=r.memoizedProps,R=c!==null?c.memoizedProps:C,G=r.type,ee=r.updateQueue;if(r.updateQueue=null,ee!==null)try{G==="input"&&C.type==="radio"&&C.name!=null&&He(v,C),ln(G,R);var pe=ln(G,C);for(R=0;R<ee.length;R+=2){var qe=ee[R],Se=ee[R+1];qe==="style"?Qe(v,Se):qe==="dangerouslySetInnerHTML"?Rr(v,Se):qe==="children"?Tt(v,Se):S(v,qe,Se,pe)}switch(G){case"input":De(v,C);break;case"textarea":Sr(v,C);break;case"select":var we=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!C.multiple;var Oe=C.value;Oe!=null?ct(v,!!C.multiple,Oe,!1):we!==!!C.multiple&&(C.defaultValue!=null?ct(v,!!C.multiple,C.defaultValue,!0):ct(v,!!C.multiple,C.multiple?[]:"",!1))}v[rs]=C}catch(Le){It(r,r.return,Le)}}break;case 6:if(bn(o,r),zn(r),y&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,C=r.memoizedProps;try{v.nodeValue=C}catch(Le){It(r,r.return,Le)}}break;case 3:if(bn(o,r),zn(r),y&4&&c!==null&&c.memoizedState.isDehydrated)try{uo(o.containerInfo)}catch(Le){It(r,r.return,Le)}break;case 4:bn(o,r),zn(r);break;case 13:bn(o,r),zn(r),v=r.child,v.flags&8192&&(C=v.memoizedState!==null,v.stateNode.isHidden=C,!C||v.alternate!==null&&v.alternate.memoizedState!==null||(Jd=mt())),y&4&&hx(r);break;case 22:if(qe=c!==null&&c.memoizedState!==null,r.mode&1?(cr=(pe=cr)||qe,bn(o,r),cr=pe):bn(o,r),zn(r),y&8192){if(pe=r.memoizedState!==null,(r.stateNode.isHidden=pe)&&!qe&&(r.mode&1)!==0)for(Fe=r,qe=r.child;qe!==null;){for(Se=Fe=qe;Fe!==null;){switch(we=Fe,Oe=we.child,we.tag){case 0:case 11:case 14:case 15:fs(4,we,we.return);break;case 1:pa(we,we.return);var Ae=we.stateNode;if(typeof Ae.componentWillUnmount=="function"){y=we,c=we.return;try{o=y,Ae.props=o.memoizedProps,Ae.state=o.memoizedState,Ae.componentWillUnmount()}catch(Le){It(y,c,Le)}}break;case 5:pa(we,we.return);break;case 22:if(we.memoizedState!==null){xx(Se);continue}}Oe!==null?(Oe.return=we,Fe=Oe):xx(Se)}qe=qe.sibling}e:for(qe=null,Se=r;;){if(Se.tag===5){if(qe===null){qe=Se;try{v=Se.stateNode,pe?(C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(G=Se.stateNode,ee=Se.memoizedProps.style,R=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,G.style.display=Ht("display",R))}catch(Le){It(r,r.return,Le)}}}else if(Se.tag===6){if(qe===null)try{Se.stateNode.nodeValue=pe?"":Se.memoizedProps}catch(Le){It(r,r.return,Le)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===r)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===r)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===r)break e;qe===Se&&(qe=null),Se=Se.return}qe===Se&&(qe=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:bn(o,r),zn(r),y&4&&hx(r);break;case 21:break;default:bn(o,r),zn(r)}}function zn(r){var o=r.flags;if(o&2){try{e:{for(var c=r.return;c!==null;){if(fx(c)){var y=c;break e}c=c.return}throw Error(n(160))}switch(y.tag){case 5:var v=y.stateNode;y.flags&32&&(Tt(v,""),y.flags&=-33);var C=_x(r);Qd(r,C,v);break;case 3:case 4:var R=y.stateNode.containerInfo,G=_x(r);Yd(r,G,R);break;default:throw Error(n(161))}}catch(ee){It(r,r.return,ee)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function hT(r,o,c){Fe=r,gx(r)}function gx(r,o,c){for(var y=(r.mode&1)!==0;Fe!==null;){var v=Fe,C=v.child;if(v.tag===22&&y){var R=v.memoizedState!==null||Gu;if(!R){var G=v.alternate,ee=G!==null&&G.memoizedState!==null||cr;G=Gu;var pe=cr;if(Gu=R,(cr=ee)&&!pe)for(Fe=v;Fe!==null;)R=Fe,ee=R.child,R.tag===22&&R.memoizedState!==null?wx(v):ee!==null?(ee.return=R,Fe=ee):wx(v);for(;C!==null;)Fe=C,gx(C),C=C.sibling;Fe=v,Gu=G,cr=pe}vx(r)}else(v.subtreeFlags&8772)!==0&&C!==null?(C.return=v,Fe=C):vx(r)}}function vx(r){for(;Fe!==null;){var o=Fe;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:cr||Ku(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!cr)if(c===null)y.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:xn(o.type,c.memoizedProps);y.componentDidUpdate(v,c.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var C=o.updateQueue;C!==null&&xv(o,C,y);break;case 3:var R=o.updateQueue;if(R!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}xv(o,R,c)}break;case 5:var G=o.stateNode;if(c===null&&o.flags&4){c=G;var ee=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&c.focus();break;case"img":ee.src&&(c.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var pe=o.alternate;if(pe!==null){var qe=pe.memoizedState;if(qe!==null){var Se=qe.dehydrated;Se!==null&&uo(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}cr||o.flags&512&&Kd(o)}catch(we){It(o,o.return,we)}}if(o===r){Fe=null;break}if(c=o.sibling,c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function xx(r){for(;Fe!==null;){var o=Fe;if(o===r){Fe=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Fe=c;break}Fe=o.return}}function wx(r){for(;Fe!==null;){var o=Fe;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Ku(4,o)}catch(ee){It(o,c,ee)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var v=o.return;try{y.componentDidMount()}catch(ee){It(o,v,ee)}}var C=o.return;try{Kd(o)}catch(ee){It(o,C,ee)}break;case 5:var R=o.return;try{Kd(o)}catch(ee){It(o,R,ee)}}}catch(ee){It(o,o.return,ee)}if(o===r){Fe=null;break}var G=o.sibling;if(G!==null){G.return=o.return,Fe=G;break}Fe=o.return}}var yT=Math.ceil,Yu=M.ReactCurrentDispatcher,Xd=M.ReactCurrentOwner,nn=M.ReactCurrentBatchConfig,rt=0,Qt=null,Vt=null,or=0,zr=0,fa=Ni(0),zt=0,_s=null,wo=0,Qu=0,Zd=0,ms=null,Ir=null,Jd=0,_a=1/0,pi=null,Xu=!1,ep=null,Fi=null,Zu=!1,Ai=null,Ju=0,hs=0,tp=null,el=-1,tl=0;function br(){return(rt&6)!==0?mt():el!==-1?el:el=mt()}function Li(r){return(r.mode&1)===0?1:(rt&2)!==0&&or!==0?or&-or:eT.transition!==null?(tl===0&&(tl=Ci()),tl):(r=ut,r!==0||(r=window.event,r=r===void 0?16:pu(r.type)),r)}function qn(r,o,c,y){if(50<hs)throw hs=0,tp=null,Error(n(185));Xr(r,c,y),((rt&2)===0||r!==Qt)&&(r===Qt&&((rt&2)===0&&(Qu|=c),zt===4&&Di(r,or)),Tr(r,y),c===1&&rt===0&&(o.mode&1)===0&&(_a=mt()+500,Iu&&ji()))}function Tr(r,o){var c=r.callbackNode;Ba(r,o);var y=_n(r,r===Qt?or:0);if(y===0)c!==null&&qi(c),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(c!=null&&qi(c),o===1)r.tag===0?JI(qx.bind(null,r)):uv(qx.bind(null,r)),YI(function(){(rt&6)===0&&ji()}),c=null;else{switch(no(y)){case 1:c=dn;break;case 4:c=ei;break;case 16:c=pn;break;case 536870912:c=Qr;break;default:c=pn}c=Nx(c,bx.bind(null,r))}r.callbackPriority=o,r.callbackNode=c}}function bx(r,o){if(el=-1,tl=0,(rt&6)!==0)throw Error(n(327));var c=r.callbackNode;if(ma()&&r.callbackNode!==c)return null;var y=_n(r,r===Qt?or:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=rl(r,y);else{o=y;var v=rt;rt|=2;var C=Cx();(Qt!==r||or!==o)&&(pi=null,_a=mt()+500,qo(r,o));do try{xT();break}catch(G){Sx(r,G)}while(!0);vd(),Yu.current=C,rt=v,Vt!==null?o=0:(Qt=null,or=0,o=zt)}if(o!==0){if(o===2&&(v=nr(r),v!==0&&(y=v,o=rp(r,v))),o===1)throw c=_s,qo(r,0),Di(r,y),Tr(r,mt()),c;if(o===6)Di(r,y);else{if(v=r.current.alternate,(y&30)===0&&!gT(v)&&(o=rl(r,y),o===2&&(C=nr(r),C!==0&&(y=C,o=rp(r,C))),o===1))throw c=_s,qo(r,0),Di(r,y),Tr(r,mt()),c;switch(r.finishedWork=v,r.finishedLanes=y,o){case 0:case 1:throw Error(n(345));case 2:So(r,Ir,pi);break;case 3:if(Di(r,y),(y&130023424)===y&&(o=Jd+500-mt(),10<o)){if(_n(r,0)!==0)break;if(v=r.suspendedLanes,(v&y)!==y){br(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=ud(So.bind(null,r,Ir,pi),o);break}So(r,Ir,pi);break;case 4:if(Di(r,y),(y&4194240)===y)break;for(o=r.eventTimes,v=-1;0<y;){var R=31-gr(y);C=1<<R,R=o[R],R>v&&(v=R),y&=~C}if(y=v,y=mt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*yT(y/1960))-y,10<y){r.timeoutHandle=ud(So.bind(null,r,Ir,pi),y);break}So(r,Ir,pi);break;case 5:So(r,Ir,pi);break;default:throw Error(n(329))}}}return Tr(r,mt()),r.callbackNode===c?bx.bind(null,r):null}function rp(r,o){var c=ms;return r.current.memoizedState.isDehydrated&&(qo(r,o).flags|=256),r=rl(r,o),r!==2&&(o=Ir,Ir=c,o!==null&&np(o)),r}function np(r){Ir===null?Ir=r:Ir.push.apply(Ir,r)}function gT(r){for(var o=r;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var y=0;y<c.length;y++){var v=c[y],C=v.getSnapshot;v=v.value;try{if(!gn(C(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Di(r,o){for(o&=~Zd,o&=~Qu,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var c=31-gr(o),y=1<<c;r[c]=-1,o&=~y}}function qx(r){if((rt&6)!==0)throw Error(n(327));ma();var o=_n(r,0);if((o&1)===0)return Tr(r,mt()),null;var c=rl(r,o);if(r.tag!==0&&c===2){var y=nr(r);y!==0&&(o=y,c=rp(r,y))}if(c===1)throw c=_s,qo(r,0),Di(r,o),Tr(r,mt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,So(r,Ir,pi),Tr(r,mt()),null}function ip(r,o){var c=rt;rt|=1;try{return r(o)}finally{rt=c,rt===0&&(_a=mt()+500,Iu&&ji())}}function bo(r){Ai!==null&&Ai.tag===0&&(rt&6)===0&&ma();var o=rt;rt|=1;var c=nn.transition,y=ut;try{if(nn.transition=null,ut=1,r)return r()}finally{ut=y,nn.transition=c,rt=o,(rt&6)===0&&ji()}}function op(){zr=fa.current,gt(fa)}function qo(r,o){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,KI(c)),Vt!==null)for(c=Vt.return;c!==null;){var y=c;switch(_d(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Mu();break;case 3:ca(),gt(kr),gt(sr),Md();break;case 5:Cd(y);break;case 4:ca();break;case 13:gt(kt);break;case 19:gt(kt);break;case 10:xd(y.type._context);break;case 22:case 23:op()}c=c.return}if(Qt=r,Vt=r=Bi(r.current,null),or=zr=o,zt=0,_s=null,Zd=Qu=wo=0,Ir=ms=null,go!==null){for(o=0;o<go.length;o++)if(c=go[o],y=c.interleaved,y!==null){c.interleaved=null;var v=y.next,C=c.pending;if(C!==null){var R=C.next;C.next=v,y.next=R}c.pending=y}go=null}return r}function Sx(r,o){do{var c=Vt;try{if(vd(),Lu.current=$u,Du){for(var y=Mt.memoizedState;y!==null;){var v=y.queue;v!==null&&(v.pending=null),y=y.next}Du=!1}if(xo=0,Yt=Bt=Mt=null,us=!1,ls=0,Xd.current=null,c===null||c.return===null){zt=1,_s=o,Vt=null;break}e:{var C=r,R=c.return,G=c,ee=o;if(o=or,G.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var pe=ee,qe=G,Se=qe.tag;if((qe.mode&1)===0&&(Se===0||Se===11||Se===15)){var we=qe.alternate;we?(qe.updateQueue=we.updateQueue,qe.memoizedState=we.memoizedState,qe.lanes=we.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Oe=Yv(R);if(Oe!==null){Oe.flags&=-257,Qv(Oe,R,G,C,o),Oe.mode&1&&Kv(C,pe,o),o=Oe,ee=pe;var Ae=o.updateQueue;if(Ae===null){var Le=new Set;Le.add(ee),o.updateQueue=Le}else Ae.add(ee);break e}else{if((o&1)===0){Kv(C,pe,o),ap();break e}ee=Error(n(426))}}else if(wt&&G.mode&1){var jt=Yv(R);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),Qv(jt,R,G,C,o),yd(da(ee,G));break e}}C=ee=da(ee,G),zt!==4&&(zt=2),ms===null?ms=[C]:ms.push(C),C=R;do{switch(C.tag){case 3:C.flags|=65536,o&=-o,C.lanes|=o;var se=Uv(C,ee,o);vv(C,se);break e;case 1:G=ee;var ie=C.type,le=C.stateNode;if((C.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Fi===null||!Fi.has(le)))){C.flags|=65536,o&=-o,C.lanes|=o;var Me=Gv(C,G,o);vv(C,Me);break e}}C=C.return}while(C!==null)}Mx(c)}catch(Be){o=Be,Vt===c&&c!==null&&(Vt=c=c.return);continue}break}while(!0)}function Cx(){var r=Yu.current;return Yu.current=$u,r===null?$u:r}function ap(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||(wo&268435455)===0&&(Qu&268435455)===0||Di(Qt,or)}function rl(r,o){var c=rt;rt|=2;var y=Cx();(Qt!==r||or!==o)&&(pi=null,qo(r,o));do try{vT();break}catch(v){Sx(r,v)}while(!0);if(vd(),rt=c,Yu.current=y,Vt!==null)throw Error(n(261));return Qt=null,or=0,zt}function vT(){for(;Vt!==null;)kx(Vt)}function xT(){for(;Vt!==null&&!eo();)kx(Vt)}function kx(r){var o=Tx(r.alternate,r,zr);r.memoizedProps=r.pendingProps,o===null?Mx(r):Vt=o,Xd.current=null}function Mx(r){var o=r;do{var c=o.alternate;if(r=o.return,(o.flags&32768)===0){if(c=pT(c,o,zr),c!==null){Vt=c;return}}else{if(c=fT(c,o),c!==null){c.flags&=32767,Vt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{zt=6,Vt=null;return}}if(o=o.sibling,o!==null){Vt=o;return}Vt=o=r}while(o!==null);zt===0&&(zt=5)}function So(r,o,c){var y=ut,v=nn.transition;try{nn.transition=null,ut=1,wT(r,o,c,y)}finally{nn.transition=v,ut=y}return null}function wT(r,o,c,y){do ma();while(Ai!==null);if((rt&6)!==0)throw Error(n(327));c=r.finishedWork;var v=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var C=c.lanes|c.childLanes;if(ro(r,C),r===Qt&&(Vt=Qt=null,or=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Zu||(Zu=!0,Nx(pn,function(){return ma(),null})),C=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||C){C=nn.transition,nn.transition=null;var R=ut;ut=1;var G=rt;rt|=4,Xd.current=null,mT(r,c),yx(c,r),BI(ad),Ko=!!od,ad=od=null,r.current=c,hT(c),Zn(),rt=G,ut=R,nn.transition=C}else r.current=c;if(Zu&&(Zu=!1,Ai=r,Ju=v),C=r.pendingLanes,C===0&&(Fi=null),Bo(c.stateNode),Tr(r,mt()),o!==null)for(y=r.onRecoverableError,c=0;c<o.length;c++)v=o[c],y(v.value,{componentStack:v.stack,digest:v.digest});if(Xu)throw Xu=!1,r=ep,ep=null,r;return(Ju&1)!==0&&r.tag!==0&&ma(),C=r.pendingLanes,(C&1)!==0?r===tp?hs++:(hs=0,tp=r):hs=0,ji(),null}function ma(){if(Ai!==null){var r=no(Ju),o=nn.transition,c=ut;try{if(nn.transition=null,ut=16>r?16:r,Ai===null)var y=!1;else{if(r=Ai,Ai=null,Ju=0,(rt&6)!==0)throw Error(n(331));var v=rt;for(rt|=4,Fe=r.current;Fe!==null;){var C=Fe,R=C.child;if((Fe.flags&16)!==0){var G=C.deletions;if(G!==null){for(var ee=0;ee<G.length;ee++){var pe=G[ee];for(Fe=pe;Fe!==null;){var qe=Fe;switch(qe.tag){case 0:case 11:case 15:fs(8,qe,C)}var Se=qe.child;if(Se!==null)Se.return=qe,Fe=Se;else for(;Fe!==null;){qe=Fe;var we=qe.sibling,Oe=qe.return;if(px(qe),qe===pe){Fe=null;break}if(we!==null){we.return=Oe,Fe=we;break}Fe=Oe}}}var Ae=C.alternate;if(Ae!==null){var Le=Ae.child;if(Le!==null){Ae.child=null;do{var jt=Le.sibling;Le.sibling=null,Le=jt}while(Le!==null)}}Fe=C}}if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,Fe=R;else e:for(;Fe!==null;){if(C=Fe,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:fs(9,C,C.return)}var se=C.sibling;if(se!==null){se.return=C.return,Fe=se;break e}Fe=C.return}}var ie=r.current;for(Fe=ie;Fe!==null;){R=Fe;var le=R.child;if((R.subtreeFlags&2064)!==0&&le!==null)le.return=R,Fe=le;else e:for(R=ie;Fe!==null;){if(G=Fe,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Ku(9,G)}}catch(Be){It(G,G.return,Be)}if(G===R){Fe=null;break e}var Me=G.sibling;if(Me!==null){Me.return=G.return,Fe=Me;break e}Fe=G.return}}if(rt=v,ji(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(On,r)}catch{}y=!0}return y}finally{ut=c,nn.transition=o}}return!1}function Ex(r,o,c){o=da(c,o),o=Uv(r,o,1),r=Vi(r,o,1),o=br(),r!==null&&(Xr(r,1,o),Tr(r,o))}function It(r,o,c){if(r.tag===3)Ex(r,r,c);else for(;o!==null;){if(o.tag===3){Ex(o,r,c);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Fi===null||!Fi.has(y))){r=da(c,r),r=Gv(o,r,1),o=Vi(o,r,1),r=br(),o!==null&&(Xr(o,1,r),Tr(o,r));break}}o=o.return}}function bT(r,o,c){var y=r.pingCache;y!==null&&y.delete(o),o=br(),r.pingedLanes|=r.suspendedLanes&c,Qt===r&&(or&c)===c&&(zt===4||zt===3&&(or&130023424)===or&&500>mt()-Jd?qo(r,0):Zd|=c),Tr(r,o)}function Ix(r,o){o===0&&((r.mode&1)===0?o=1:(o=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var c=br();r=li(r,o),r!==null&&(Xr(r,o,c),Tr(r,c))}function qT(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),Ix(r,c)}function ST(r,o){var c=0;switch(r.tag){case 13:var y=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(o),Ix(r,c)}var Tx;Tx=function(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps||kr.current)Er=!0;else{if((r.lanes&c)===0&&(o.flags&128)===0)return Er=!1,dT(r,o,c);Er=(r.flags&131072)!==0}else Er=!1,wt&&(o.flags&1048576)!==0&&lv(o,Nu,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;Uu(r,o),r=o.pendingProps;var v=na(o,sr.current);la(o,c),v=Td(null,o,y,r,v,c);var C=Nd();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mr(y)?(C=!0,Eu(o)):C=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,qd(o),v.updater=Hu,o.stateNode=v,v._reactInternals=o,Fd(o,y,r,c),o=Bd(null,o,y,!0,C,c)):(o.tag=0,wt&&C&&fd(o),wr(null,o,v,c),o=o.child),o;case 16:y=o.elementType;e:{switch(Uu(r,o),r=o.pendingProps,v=y._init,y=v(y._payload),o.type=y,v=o.tag=kT(y),r=xn(y,r),v){case 0:o=Dd(null,o,y,r,c);break e;case 1:o=rx(null,o,y,r,c);break e;case 11:o=Xv(null,o,y,r,c);break e;case 14:o=Zv(null,o,y,xn(y.type,r),c);break e}throw Error(n(306,y,""))}return o;case 0:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Dd(r,o,y,v,c);case 1:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),rx(r,o,y,v,c);case 3:e:{if(nx(o),r===null)throw Error(n(387));y=o.pendingProps,C=o.memoizedState,v=C.element,gv(r,o),Fu(o,y,null,c);var R=o.memoizedState;if(y=R.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){v=da(Error(n(423)),o),o=ix(r,o,y,c,v);break e}else if(y!==v){v=da(Error(n(424)),o),o=ix(r,o,y,c,v);break e}else for(Br=Ti(o.stateNode.containerInfo.firstChild),Dr=o,wt=!0,vn=null,c=hv(o,null,y,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(aa(),y===v){o=di(r,o,c);break e}wr(r,o,y,c)}o=o.child}return o;case 5:return wv(o),r===null&&hd(o),y=o.type,v=o.pendingProps,C=r!==null?r.memoizedProps:null,R=v.children,sd(y,v)?R=null:C!==null&&sd(y,C)&&(o.flags|=32),tx(r,o),wr(r,o,R,c),o.child;case 6:return r===null&&hd(o),null;case 13:return ox(r,o,c);case 4:return Sd(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=sa(o,null,y,c):wr(r,o,y,c),o.child;case 11:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Xv(r,o,y,v,c);case 7:return wr(r,o,o.pendingProps,c),o.child;case 8:return wr(r,o,o.pendingProps.children,c),o.child;case 12:return wr(r,o,o.pendingProps.children,c),o.child;case 10:e:{if(y=o.type._context,v=o.pendingProps,C=o.memoizedProps,R=v.value,pt(Ru,y._currentValue),y._currentValue=R,C!==null)if(gn(C.value,R)){if(C.children===v.children&&!kr.current){o=di(r,o,c);break e}}else for(C=o.child,C!==null&&(C.return=o);C!==null;){var G=C.dependencies;if(G!==null){R=C.child;for(var ee=G.firstContext;ee!==null;){if(ee.context===y){if(C.tag===1){ee=ci(-1,c&-c),ee.tag=2;var pe=C.updateQueue;if(pe!==null){pe=pe.shared;var qe=pe.pending;qe===null?ee.next=ee:(ee.next=qe.next,qe.next=ee),pe.pending=ee}}C.lanes|=c,ee=C.alternate,ee!==null&&(ee.lanes|=c),wd(C.return,c,o),G.lanes|=c;break}ee=ee.next}}else if(C.tag===10)R=C.type===o.type?null:C.child;else if(C.tag===18){if(R=C.return,R===null)throw Error(n(341));R.lanes|=c,G=R.alternate,G!==null&&(G.lanes|=c),wd(R,c,o),R=C.sibling}else R=C.child;if(R!==null)R.return=C;else for(R=C;R!==null;){if(R===o){R=null;break}if(C=R.sibling,C!==null){C.return=R.return,R=C;break}R=R.return}C=R}wr(r,o,v.children,c),o=o.child}return o;case 9:return v=o.type,y=o.pendingProps.children,la(o,c),v=tn(v),y=y(v),o.flags|=1,wr(r,o,y,c),o.child;case 14:return y=o.type,v=xn(y,o.pendingProps),v=xn(y.type,v),Zv(r,o,y,v,c);case 15:return Jv(r,o,o.type,o.pendingProps,c);case 17:return y=o.type,v=o.pendingProps,v=o.elementType===y?v:xn(y,v),Uu(r,o),o.tag=1,Mr(y)?(r=!0,Eu(o)):r=!1,la(o,c),Hv(o,y,v),Fd(o,y,v,c),Bd(null,o,y,!0,r,c);case 19:return sx(r,o,c);case 22:return ex(r,o,c)}throw Error(n(156,o.tag))};function Nx(r,o){return bi(r,o)}function CT(r,o,c,y){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(r,o,c,y){return new CT(r,o,c,y)}function sp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kT(r){if(typeof r=="function")return sp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===Z)return 14}return 2}function Bi(r,o){var c=r.alternate;return c===null?(c=on(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function nl(r,o,c,y,v,C){var R=2;if(y=r,typeof r=="function")sp(r)&&(R=1);else if(typeof r=="string")R=5;else e:switch(r){case T:return Co(c.children,v,C,o);case P:R=8,v|=8;break;case j:return r=on(12,c,o,v|2),r.elementType=j,r.lanes=C,r;case X:return r=on(13,c,o,v),r.elementType=X,r.lanes=C,r;case V:return r=on(19,c,o,v),r.elementType=V,r.lanes=C,r;case te:return il(c,v,C,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:R=10;break e;case O:R=9;break e;case F:R=11;break e;case Z:R=14;break e;case W:R=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=on(R,c,o,v),o.elementType=r,o.type=y,o.lanes=C,o}function Co(r,o,c,y){return r=on(7,r,y,o),r.lanes=c,r}function il(r,o,c,y){return r=on(22,r,y,o),r.elementType=te,r.lanes=c,r.stateNode={isHidden:!1},r}function up(r,o,c){return r=on(6,r,null,o),r.lanes=c,r}function lp(r,o,c){return o=on(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function MT(r,o,c,y,v){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=y,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function cp(r,o,c,y,v,C,R,G,ee){return r=new MT(r,o,c,G,ee),o===1?(o=1,C===!0&&(o|=8)):o=0,C=on(3,null,null,o),r.current=C,C.stateNode=r,C.memoizedState={element:y,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(C),r}function ET(r,o,c){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:y==null?null:""+y,children:r,containerInfo:o,implementation:c}}function Px(r){if(!r)return Pi;r=r._reactInternals;e:{if(Et(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Mr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Mr(c))return av(r,c,o)}return o}function jx(r,o,c,y,v,C,R,G,ee){return r=cp(c,y,!0,r,v,C,R,G,ee),r.context=Px(null),c=r.current,y=br(),v=Li(c),C=ci(y,v),C.callback=o??null,Vi(c,C,v),r.current.lanes=v,Xr(r,v,y),Tr(r,y),r}function ol(r,o,c,y){var v=o.current,C=br(),R=Li(v);return c=Px(c),o.context===null?o.context=c:o.pendingContext=c,o=ci(C,R),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=Vi(v,o,R),r!==null&&(qn(r,v,R,C),Ou(r,v,R)),R}function al(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Rx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function dp(r,o){Rx(r,o),(r=r.alternate)&&Rx(r,o)}function IT(){return null}var Vx=typeof reportError=="function"?reportError:function(r){console.error(r)};function pp(r){this._internalRoot=r}sl.prototype.render=pp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));ol(r,o,null,null)},sl.prototype.unmount=pp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;bo(function(){ol(null,r,null,null)}),o[oi]=null}};function sl(r){this._internalRoot=r}sl.prototype.unstable_scheduleHydration=function(r){if(r){var o=ze();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Lt.length&&o!==0&&o<Lt[c].priority;c++);Lt.splice(c,0,r),c===0&&cu(r)}};function fp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function TT(r,o,c,y,v){if(v){if(typeof y=="function"){var C=y;y=function(){var pe=al(R);C.call(pe)}}var R=jx(o,y,r,0,null,!1,!1,"",Ox);return r._reactRootContainer=R,r[oi]=R.current,es(r.nodeType===8?r.parentNode:r),bo(),R}for(;v=r.lastChild;)r.removeChild(v);if(typeof y=="function"){var G=y;y=function(){var pe=al(ee);G.call(pe)}}var ee=cp(r,0,!1,null,null,!1,!1,"",Ox);return r._reactRootContainer=ee,r[oi]=ee.current,es(r.nodeType===8?r.parentNode:r),bo(function(){ol(o,ee,c,y)}),ee}function ll(r,o,c,y,v){var C=c._reactRootContainer;if(C){var R=C;if(typeof v=="function"){var G=v;v=function(){var ee=al(R);G.call(ee)}}ol(o,R,r,v)}else R=TT(c,o,r,v,y);return al(R)}za=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var c=Cr(o.pendingLanes);c!==0&&(We(o,c|1),Tr(o,mt()),(rt&6)===0&&(_a=mt()+500,ji()))}break;case 13:bo(function(){var y=li(r,1);if(y!==null){var v=br();qn(y,r,1,v)}}),dp(r,1)}},io=function(r){if(r.tag===13){var o=li(r,134217728);if(o!==null){var c=br();qn(o,r,134217728,c)}dp(r,134217728)}},$o=function(r){if(r.tag===13){var o=Li(r),c=li(r,o);if(c!==null){var y=br();qn(c,r,o,y)}dp(r,o)}},ze=function(){return ut},$a=function(r,o){var c=ut;try{return ut=r,o()}finally{ut=c}},Vr=function(r,o,c){switch(o){case"input":if(De(r,c),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var y=c[o];if(y!==r&&y.form===r.form){var v=ku(y);if(!v)throw Error(n(90));Ie(y),De(y,v)}}}break;case"textarea":Sr(r,c);break;case"select":o=c.value,o!=null&&ct(r,!!c.multiple,o,!1)}},er=ip,tr=bo;var NT={usingClientEntryPoint:!1,Events:[ns,ta,ku,Vn,Rt,ip]},ys={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PT={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ji(r),r===null?null:r.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||IT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{On=cl.inject(PT),Kt=cl}catch{}}return Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT,Nr.createPortal=function(r,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(o))throw Error(n(200));return ET(r,o,null,c)},Nr.createRoot=function(r,o){if(!fp(r))throw Error(n(299));var c=!1,y="",v=Vx;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=cp(r,1,!1,null,null,c,!1,y,v),r[oi]=o.current,es(r.nodeType===8?r.parentNode:r),new pp(o)},Nr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Ji(o),r=r===null?null:r.stateNode,r},Nr.flushSync=function(r){return bo(r)},Nr.hydrate=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!0,c)},Nr.hydrateRoot=function(r,o,c){if(!fp(r))throw Error(n(405));var y=c!=null&&c.hydratedSources||null,v=!1,C="",R=Vx;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(C=c.identifierPrefix),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),o=jx(o,null,r,1,c??null,v,!1,C,R),r[oi]=o.current,es(r),y)for(r=0;r<y.length;r++)c=y[r],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new sl(o)},Nr.render=function(r,o,c){if(!ul(o))throw Error(n(200));return ll(null,r,o,!1,c)},Nr.unmountComponentAtNode=function(r){if(!ul(r))throw Error(n(40));return r._reactRootContainer?(bo(function(){ll(null,null,r,!1,function(){r._reactRootContainer=null,r[oi]=null})}),!0):!1},Nr.unstable_batchedUpdates=ip,Nr.unstable_renderSubtreeIntoContainer=function(r,o,c,y){if(!ul(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return ll(r,o,c,!1,y)},Nr.version="18.3.1-next-f1338f8080-20240426",Nr}var Hx;function gk(){if(Hx)return hp.exports;Hx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hp.exports=DT(),hp.exports}var Wx;function BT(){if(Wx)return pl;Wx=1;var e=gk();return pl.createRoot=e.createRoot,pl.hydrateRoot=e.hydrateRoot,pl}var zT=BT();const $T=Na(zT);function Ot(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Ot(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var HT={value:()=>{}};function sc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Tl(n)}function Tl(e){this._=e}function WT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Tl.prototype=sc.prototype={constructor:Tl,on:function(e,t){var n=this._,i=WT(e+"",n),a,s=-1,u=i.length;if(arguments.length<2){for(;++s<u;)if((a=(e=i[s]).type)&&(a=UT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(a=(e=i[s]).type)n[a]=Ux(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Ux(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Tl(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,s;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,n)}};function UT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Ux(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=HT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var c0="http://www.w3.org/1999/xhtml";const Gx={svg:"http://www.w3.org/2000/svg",xhtml:c0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gx.hasOwnProperty(t)?{space:Gx[t],local:e}:e}function GT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===c0&&t.documentElement.namespaceURI===c0?t.createElement(e):t.createElementNS(n,e)}}function KT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vk(e){var t=uc(e);return(t.local?KT:GT)(t)}function YT(){}function H0(e){return e==null?YT:function(){return this.querySelector(e)}}function QT(e){typeof e!="function"&&(e=H0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=new Array(u),d,p,m=0;m<u;++m)(d=s[m])&&(p=e.call(d,d.__data__,m,s))&&("__data__"in d&&(p.__data__=d.__data__),l[m]=p);return new Gr(i,this._parents)}function XT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ZT(){return[]}function xk(e){return e==null?ZT:function(){return this.querySelectorAll(e)}}function JT(e){return function(){return XT(e.apply(this,arguments))}}function e5(e){typeof e=="function"?e=JT(e):e=xk(e);for(var t=this._groups,n=t.length,i=[],a=[],s=0;s<n;++s)for(var u=t[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&(i.push(e.call(d,d.__data__,p,u)),a.push(d));return new Gr(i,a)}function wk(e){return function(){return this.matches(e)}}function bk(e){return function(t){return t.matches(e)}}var t5=Array.prototype.find;function r5(e){return function(){return t5.call(this.children,e)}}function n5(){return this.firstElementChild}function i5(e){return this.select(e==null?n5:r5(typeof e=="function"?e:bk(e)))}var o5=Array.prototype.filter;function a5(){return Array.from(this.children)}function s5(e){return function(){return o5.call(this.children,e)}}function u5(e){return this.selectAll(e==null?a5:s5(typeof e=="function"?e:bk(e)))}function l5(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new Gr(i,this._parents)}function qk(e){return new Array(e.length)}function c5(){return new Gr(this._enter||this._groups.map(qk),this._parents)}function Fl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fl.prototype={constructor:Fl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function d5(e){return function(){return e}}function p5(e,t,n,i,a,s){for(var u=0,l,d=t.length,p=s.length;u<p;++u)(l=t[u])?(l.__data__=s[u],i[u]=l):n[u]=new Fl(e,s[u]);for(;u<d;++u)(l=t[u])&&(a[u]=l)}function f5(e,t,n,i,a,s,u){var l,d,p=new Map,m=t.length,_=s.length,h=new Array(m),g;for(l=0;l<m;++l)(d=t[l])&&(h[l]=g=u.call(d,d.__data__,l,t)+"",p.has(g)?a[l]=d:p.set(g,d));for(l=0;l<_;++l)g=u.call(e,s[l],l,s)+"",(d=p.get(g))?(i[l]=d,d.__data__=s[l],p.delete(g)):n[l]=new Fl(e,s[l]);for(l=0;l<m;++l)(d=t[l])&&p.get(h[l])===d&&(a[l]=d)}function _5(e){return e.__data__}function m5(e,t){if(!arguments.length)return Array.from(this,_5);var n=t?f5:p5,i=this._parents,a=this._groups;typeof e!="function"&&(e=d5(e));for(var s=a.length,u=new Array(s),l=new Array(s),d=new Array(s),p=0;p<s;++p){var m=i[p],_=a[p],h=_.length,g=h5(e.call(m,m&&m.__data__,p,i)),x=g.length,q=l[p]=new Array(x),w=u[p]=new Array(x),b=d[p]=new Array(h);n(m,_,q,w,b,g,t);for(var k=0,S=0,M,I;k<x;++k)if(M=q[k]){for(k>=S&&(S=k+1);!(I=w[S])&&++S<x;);M._next=I||null}}return u=new Gr(u,i),u._enter=l,u._exit=d,u}function h5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function y5(){return new Gr(this._exit||this._groups.map(qk),this._parents)}function g5(e,t,n){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?s.remove():n(s),i&&a?i.merge(a).order():a}function v5(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,s=i.length,u=Math.min(a,s),l=new Array(a),d=0;d<u;++d)for(var p=n[d],m=i[d],_=p.length,h=l[d]=new Array(_),g,x=0;x<_;++x)(g=p[x]||m[x])&&(h[x]=g);for(;d<a;++d)l[d]=n[d];return new Gr(l,this._parents)}function x5(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,s=i[a],u;--a>=0;)(u=i[a])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function w5(e){e||(e=b5);function t(_,h){return _&&h?e(_.__data__,h.__data__):!_-!h}for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var u=n[s],l=u.length,d=a[s]=new Array(l),p,m=0;m<l;++m)(p=u[m])&&(d[m]=p);d.sort(t)}return new Gr(a,this._parents).order()}function b5(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function q5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function S5(){return Array.from(this)}function C5(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length;a<s;++a){var u=i[a];if(u)return u}return null}function k5(){let e=0;for(const t of this)++e;return e}function M5(){return!this.node()}function E5(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],s=0,u=a.length,l;s<u;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function I5(e){return function(){this.removeAttribute(e)}}function T5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function N5(e,t){return function(){this.setAttribute(e,t)}}function P5(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function j5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function R5(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function V5(e,t){var n=uc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?T5:I5:typeof t=="function"?n.local?R5:j5:n.local?P5:N5)(n,t))}function Sk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function O5(e){return function(){this.style.removeProperty(e)}}function F5(e,t,n){return function(){this.style.setProperty(e,t,n)}}function A5(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function L5(e,t,n){return arguments.length>1?this.each((t==null?O5:typeof t=="function"?A5:F5)(e,t,n??"")):ba(this.node(),e)}function ba(e,t){return e.style.getPropertyValue(t)||Sk(e).getComputedStyle(e,null).getPropertyValue(t)}function D5(e){return function(){delete this[e]}}function B5(e,t){return function(){this[e]=t}}function z5(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $5(e,t){return arguments.length>1?this.each((t==null?D5:typeof t=="function"?z5:B5)(e,t)):this.node()[e]}function Ck(e){return e.trim().split(/^|\s+/)}function W0(e){return e.classList||new kk(e)}function kk(e){this._node=e,this._names=Ck(e.getAttribute("class")||"")}kk.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mk(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function Ek(e,t){for(var n=W0(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function H5(e){return function(){Mk(this,e)}}function W5(e){return function(){Ek(this,e)}}function U5(e,t){return function(){(t.apply(this,arguments)?Mk:Ek)(this,e)}}function G5(e,t){var n=Ck(e+"");if(arguments.length<2){for(var i=W0(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?U5:t?H5:W5)(n,t))}function K5(){this.textContent=""}function Y5(e){return function(){this.textContent=e}}function Q5(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function X5(e){return arguments.length?this.each(e==null?K5:(typeof e=="function"?Q5:Y5)(e)):this.node().textContent}function Z5(){this.innerHTML=""}function J5(e){return function(){this.innerHTML=e}}function eN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tN(e){return arguments.length?this.each(e==null?Z5:(typeof e=="function"?eN:J5)(e)):this.node().innerHTML}function rN(){this.nextSibling&&this.parentNode.appendChild(this)}function nN(){return this.each(rN)}function iN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oN(){return this.each(iN)}function aN(e){var t=typeof e=="function"?e:vk(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sN(){return null}function uN(e,t){var n=typeof e=="function"?e:vk(e),i=t==null?sN:typeof t=="function"?t:H0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function lN(){var e=this.parentNode;e&&e.removeChild(this)}function cN(){return this.each(lN)}function dN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fN(e){return this.select(e?pN:dN)}function _N(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mN(e){return function(t){e.call(this,t,this.__data__)}}function hN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function yN(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,s;n<a;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function gN(e,t,n){return function(){var i=this.__on,a,s=mN(t);if(i){for(var u=0,l=i.length;u<l;++u)if((a=i[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=t;return}}this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(a):this.__on=[a]}}function vN(e,t,n){var i=hN(e+""),a,s=i.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,p=l.length,m;d<p;++d)for(a=0,m=l[d];a<s;++a)if((u=i[a]).type===m.type&&u.name===m.name)return m.value}return}for(l=t?gN:yN,a=0;a<s;++a)this.each(l(i[a],t,n));return this}function Ik(e,t,n){var i=Sk(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function xN(e,t){return function(){return Ik(this,e,t)}}function wN(e,t){return function(){return Ik(this,e,t.apply(this,arguments))}}function bN(e,t){return this.each((typeof t=="function"?wN:xN)(e,t))}function*qN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,s=i.length,u;a<s;++a)(u=i[a])&&(yield u)}var Tk=[null];function Gr(e,t){this._groups=e,this._parents=t}function Qs(){return new Gr([[document.documentElement]],Tk)}function SN(){return this}Gr.prototype=Qs.prototype={constructor:Gr,select:QT,selectAll:e5,selectChild:i5,selectChildren:u5,filter:l5,data:m5,enter:c5,exit:y5,join:g5,merge:v5,selection:SN,order:x5,sort:w5,call:q5,nodes:S5,node:C5,size:k5,empty:M5,each:E5,attr:V5,style:L5,property:$5,classed:G5,text:X5,html:tN,raise:nN,lower:oN,append:aN,insert:uN,remove:cN,clone:fN,datum:_N,on:vN,dispatch:bN,[Symbol.iterator]:qN};function Wr(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],Tk)}function CN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kn(e,t){if(e=CN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const kN={passive:!1},Vs={capture:!0,passive:!1};function vp(e){e.stopImmediatePropagation()}function va(e){e.preventDefault(),e.stopImmediatePropagation()}function Nk(e){var t=e.document.documentElement,n=Wr(e).on("dragstart.drag",va,Vs);"onselectstart"in t?n.on("selectstart.drag",va,Vs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pk(e,t){var n=e.document.documentElement,i=Wr(e).on("dragstart.drag",null);t&&(i.on("click.drag",va,Vs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fl=e=>()=>e;function d0(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:s,x:u,y:l,dx:d,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}d0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function MN(e){return!e.ctrlKey&&!e.button}function EN(){return this.parentNode}function IN(e,t){return t??{x:e.x,y:e.y}}function TN(){return navigator.maxTouchPoints||"ontouchstart"in this}function jk(){var e=MN,t=EN,n=IN,i=TN,a={},s=sc("start","drag","end"),u=0,l,d,p,m,_=0;function h(M){M.on("mousedown.drag",g).filter(i).on("touchstart.drag",w).on("touchmove.drag",b,kN).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(M,I){if(!(m||!e.call(this,M,I))){var E=S(this,t.call(this,M,I),M,I,"mouse");E&&(Wr(M.view).on("mousemove.drag",x,Vs).on("mouseup.drag",q,Vs),Nk(M.view),vp(M),p=!1,l=M.clientX,d=M.clientY,E("start",M))}}function x(M){if(va(M),!p){var I=M.clientX-l,E=M.clientY-d;p=I*I+E*E>_}a.mouse("drag",M)}function q(M){Wr(M.view).on("mousemove.drag mouseup.drag",null),Pk(M.view,p),va(M),a.mouse("end",M)}function w(M,I){if(e.call(this,M,I)){var E=M.changedTouches,T=t.call(this,M,I),P=E.length,j,D;for(j=0;j<P;++j)(D=S(this,T,M,I,E[j].identifier,E[j]))&&(vp(M),D("start",M,E[j]))}}function b(M){var I=M.changedTouches,E=I.length,T,P;for(T=0;T<E;++T)(P=a[I[T].identifier])&&(va(M),P("drag",M,I[T]))}function k(M){var I=M.changedTouches,E=I.length,T,P;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<E;++T)(P=a[I[T].identifier])&&(vp(M),P("end",M,I[T]))}function S(M,I,E,T,P,j){var D=s.copy(),O=kn(j||E,I),F,X,V;if((V=n.call(M,new d0("beforestart",{sourceEvent:E,target:h,identifier:P,active:u,x:O[0],y:O[1],dx:0,dy:0,dispatch:D}),T))!=null)return F=V.x-O[0]||0,X=V.y-O[1]||0,function Z(W,te,U){var K=O,oe;switch(W){case"start":a[P]=Z,oe=u++;break;case"end":delete a[P],--u;case"drag":O=kn(U||te,I),oe=u;break}D.call(W,M,new d0(W,{sourceEvent:te,subject:V,target:h,identifier:P,active:oe,x:O[0]+F,y:O[1]+X,dx:O[0]-K[0],dy:O[1]-K[1],dispatch:D}),T)}}return h.filter=function(M){return arguments.length?(e=typeof M=="function"?M:fl(!!M),h):e},h.container=function(M){return arguments.length?(t=typeof M=="function"?M:fl(M),h):t},h.subject=function(M){return arguments.length?(n=typeof M=="function"?M:fl(M),h):n},h.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:fl(!!M),h):i},h.on=function(){var M=s.on.apply(s,arguments);return M===s?h:M},h.clickDistance=function(M){return arguments.length?(_=(M=+M)*M,h):Math.sqrt(_)},h}function U0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rk(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xs(){}var Os=.7,Al=1/Os,xa="\\s*([+-]?\\d+)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NN=/^#([0-9a-f]{3,8})$/,PN=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),jN=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),RN=new RegExp(`^rgba\\(${xa},${xa},${xa},${Fs}\\)$`),VN=new RegExp(`^rgba\\(${Un},${Un},${Un},${Fs}\\)$`),ON=new RegExp(`^hsl\\(${Fs},${Un},${Un}\\)$`),FN=new RegExp(`^hsla\\(${Fs},${Un},${Un},${Fs}\\)$`),Kx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U0(Xs,No,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yx,formatHex:Yx,formatHex8:AN,formatHsl:LN,formatRgb:Qx,toString:Qx});function Yx(){return this.rgb().formatHex()}function AN(){return this.rgb().formatHex8()}function LN(){return Vk(this).formatHsl()}function Qx(){return this.rgb().formatRgb()}function No(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=NN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xx(t):n===3?new Pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PN.exec(e))?new Pr(t[1],t[2],t[3],1):(t=jN.exec(e))?new Pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RN.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=VN.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ON.exec(e))?e1(t[1],t[2]/100,t[3]/100,1):(t=FN.exec(e))?e1(t[1],t[2]/100,t[3]/100,t[4]):Kx.hasOwnProperty(e)?Xx(Kx[e]):e==="transparent"?new Pr(NaN,NaN,NaN,0):null}function Xx(e){return new Pr(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,i){return i<=0&&(e=t=n=NaN),new Pr(e,t,n,i)}function DN(e){return e instanceof Xs||(e=No(e)),e?(e=e.rgb(),new Pr(e.r,e.g,e.b,e.opacity)):new Pr}function p0(e,t,n,i){return arguments.length===1?DN(e):new Pr(e,t,n,i??1)}function Pr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}U0(Pr,p0,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new Pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pr(Io(this.r),Io(this.g),Io(this.b),Ll(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zx,formatHex:Zx,formatHex8:BN,formatRgb:Jx,toString:Jx}));function Zx(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function BN(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jx(){const e=Ll(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function Ll(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mo(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function e1(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,n,i)}function Vk(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Xs||(e=No(e)),!e)return new En;if(e instanceof En)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),u=NaN,l=s-a,d=(s+a)/2;return l?(t===s?u=(n-i)/l+(n<i)*6:n===s?u=(i-t)/l+2:u=(t-n)/l+4,l/=d<.5?s+a:2-s-a,u*=60):l=d>0&&d<1?0:u,new En(u,l,d,e.opacity)}function zN(e,t,n,i){return arguments.length===1?Vk(e):new En(e,t,n,i??1)}function En(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}U0(En,zN,Rk(Xs,{brighter(e){return e=e==null?Al:Math.pow(Al,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Pr(xp(e>=240?e-240:e+120,a,i),xp(e,a,i),xp(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new En(t1(this.h),ml(this.s),ml(this.l),Ll(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ll(this.opacity);return`${e===1?"hsl(":"hsla("}${t1(this.h)}, ${ml(this.s)*100}%, ${ml(this.l)*100}%${e===1?")":`, ${e})`}`}}));function t1(e){return e=(e||0)%360,e<0?e+360:e}function ml(e){return Math.max(0,Math.min(1,e||0))}function xp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const G0=e=>()=>e;function $N(e,t){return function(n){return e+n*t}}function HN(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function WN(e){return(e=+e)==1?Ok:function(t,n){return n-t?HN(t,n,e):G0(isNaN(t)?n:t)}}function Ok(e,t){var n=t-e;return n?$N(e,n):G0(isNaN(e)?t:e)}const Dl=(function e(t){var n=WN(t);function i(a,s){var u=n((a=p0(a)).r,(s=p0(s)).r),l=n(a.g,s.g),d=n(a.b,s.b),p=Ok(a.opacity,s.opacity);return function(m){return a.r=u(m),a.g=l(m),a.b=d(m),a.opacity=p(m),a+""}}return i.gamma=e,i})(1);function UN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function GN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function KN(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),u;for(u=0;u<i;++u)a[u]=Es(e[u],t[u]);for(;u<n;++u)s[u]=t[u];return function(l){for(u=0;u<i;++u)s[u]=a[u](l);return s}}function YN(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Hn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function QN(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Es(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var f0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wp=new RegExp(f0.source,"g");function XN(e){return function(){return e}}function ZN(e){return function(t){return e(t)+""}}function Fk(e,t){var n=f0.lastIndex=wp.lastIndex=0,i,a,s,u=-1,l=[],d=[];for(e=e+"",t=t+"";(i=f0.exec(e))&&(a=wp.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[u]?l[u]+=s:l[++u]=s),(i=i[0])===(a=a[0])?l[u]?l[u]+=a:l[++u]=a:(l[++u]=null,d.push({i:u,x:Hn(i,a)})),n=wp.lastIndex;return n<t.length&&(s=t.slice(n),l[u]?l[u]+=s:l[++u]=s),l.length<2?d[0]?ZN(d[0].x):XN(t):(t=d.length,function(p){for(var m=0,_;m<t;++m)l[(_=d[m]).i]=_.x(p);return l.join("")})}function Es(e,t){var n=typeof t,i;return t==null||n==="boolean"?G0(t):(n==="number"?Hn:n==="string"?(i=No(t))?(t=i,Dl):Fk:t instanceof No?Dl:t instanceof Date?YN:GN(t)?UN:Array.isArray(t)?KN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QN:Hn)(e,t)}var r1=180/Math.PI,_0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ak(e,t,n,i,a,s){var u,l,d;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),e*i<t*n&&(e=-e,t=-t,d=-d,u=-u),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*r1,skewX:Math.atan(d)*r1,scaleX:u,scaleY:l}}var hl;function JN(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_0:Ak(t.a,t.b,t.c,t.d,t.e,t.f)}function eP(e){return e==null||(hl||(hl=document.createElementNS("http://www.w3.org/2000/svg","g")),hl.setAttribute("transform",e),!(e=hl.transform.baseVal.consolidate()))?_0:(e=e.matrix,Ak(e.a,e.b,e.c,e.d,e.e,e.f))}function Lk(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function s(p,m,_,h,g,x){if(p!==_||m!==h){var q=g.push("translate(",null,t,null,n);x.push({i:q-4,x:Hn(p,_)},{i:q-2,x:Hn(m,h)})}else(_||h)&&g.push("translate("+_+t+h+n)}function u(p,m,_,h){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),h.push({i:_.push(a(_)+"rotate(",null,i)-2,x:Hn(p,m)})):m&&_.push(a(_)+"rotate("+m+i)}function l(p,m,_,h){p!==m?h.push({i:_.push(a(_)+"skewX(",null,i)-2,x:Hn(p,m)}):m&&_.push(a(_)+"skewX("+m+i)}function d(p,m,_,h,g,x){if(p!==_||m!==h){var q=g.push(a(g)+"scale(",null,",",null,")");x.push({i:q-4,x:Hn(p,_)},{i:q-2,x:Hn(m,h)})}else(_!==1||h!==1)&&g.push(a(g)+"scale("+_+","+h+")")}return function(p,m){var _=[],h=[];return p=e(p),m=e(m),s(p.translateX,p.translateY,m.translateX,m.translateY,_,h),u(p.rotate,m.rotate,_,h),l(p.skewX,m.skewX,_,h),d(p.scaleX,p.scaleY,m.scaleX,m.scaleY,_,h),p=m=null,function(g){for(var x=-1,q=h.length,w;++x<q;)_[(w=h[x]).i]=w.x(g);return _.join("")}}}var tP=Lk(JN,"px, ","px)","deg)"),rP=Lk(eP,", ",")",")"),nP=1e-12;function n1(e){return((e=Math.exp(e))+1/e)/2}function iP(e){return((e=Math.exp(e))-1/e)/2}function oP(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nl=(function e(t,n,i){function a(s,u){var l=s[0],d=s[1],p=s[2],m=u[0],_=u[1],h=u[2],g=m-l,x=_-d,q=g*g+x*x,w,b;if(q<nP)b=Math.log(h/p)/t,w=function(T){return[l+T*g,d+T*x,p*Math.exp(t*T*b)]};else{var k=Math.sqrt(q),S=(h*h-p*p+i*q)/(2*p*n*k),M=(h*h-p*p-i*q)/(2*h*n*k),I=Math.log(Math.sqrt(S*S+1)-S),E=Math.log(Math.sqrt(M*M+1)-M);b=(E-I)/t,w=function(T){var P=T*b,j=n1(I),D=p/(n*k)*(j*oP(t*P+I)-iP(I));return[l+D*g,d+D*x,p*j/n1(t*P+I)]}}return w.duration=b*1e3*t/Math.SQRT2,w}return a.rho=function(s){var u=Math.max(.001,+s),l=u*u,d=l*l;return e(u,l,d)},a})(Math.SQRT2,2,4);var qa=0,qs=0,vs=0,Dk=1e3,Bl,Ss,zl=0,Po=0,lc=0,As=typeof performance=="object"&&performance.now?performance:Date,Bk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K0(){return Po||(Bk(aP),Po=As.now()+lc)}function aP(){Po=0}function $l(){this._call=this._time=this._next=null}$l.prototype=zk.prototype={constructor:$l,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?K0():+n)+(t==null?0:+t),!this._next&&Ss!==this&&(Ss?Ss._next=this:Bl=this,Ss=this),this._call=e,this._time=n,m0()},stop:function(){this._call&&(this._call=null,this._time=1/0,m0())}};function zk(e,t,n){var i=new $l;return i.restart(e,t,n),i}function sP(){K0(),++qa;for(var e=Bl,t;e;)(t=Po-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qa}function i1(){Po=(zl=As.now())+lc,qa=qs=0;try{sP()}finally{qa=0,lP(),Po=0}}function uP(){var e=As.now(),t=e-zl;t>Dk&&(lc-=t,zl=e)}function lP(){for(var e,t=Bl,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bl=n);Ss=e,m0(i)}function m0(e){if(!qa){qs&&(qs=clearTimeout(qs));var t=e-Po;t>24?(e<1/0&&(qs=setTimeout(i1,e-As.now()-lc)),vs&&(vs=clearInterval(vs))):(vs||(zl=As.now(),vs=setInterval(uP,Dk)),qa=1,Bk(i1))}}function o1(e,t,n){var i=new $l;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var cP=sc("start","end","cancel","interrupt"),dP=[],$k=0,a1=1,h0=2,Pl=3,s1=4,y0=5,jl=6;function cc(e,t,n,i,a,s){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;pP(e,n,{name:t,index:i,group:a,on:cP,tween:dP,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$k})}function Y0(e,t){var n=jn(e,t);if(n.state>$k)throw new Error("too late; already scheduled");return n}function Kn(e,t){var n=jn(e,t);if(n.state>Pl)throw new Error("too late; already running");return n}function jn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pP(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=zk(s,0,n.time);function s(p){n.state=a1,n.timer.restart(u,n.delay,n.time),n.delay<=p&&u(p-n.delay)}function u(p){var m,_,h,g;if(n.state!==a1)return d();for(m in i)if(g=i[m],g.name===n.name){if(g.state===Pl)return o1(u);g.state===s1?(g.state=jl,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[m]):+m<t&&(g.state=jl,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[m])}if(o1(function(){n.state===Pl&&(n.state=s1,n.timer.restart(l,n.delay,n.time),l(p))}),n.state=h0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===h0){for(n.state=Pl,a=new Array(h=n.tween.length),m=0,_=-1;m<h;++m)(g=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++_]=g);a.length=_+1}}function l(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=y0,1),_=-1,h=a.length;++_<h;)a[_].call(e,m);n.state===y0&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=jl,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Rl(e,t){var n=e.__transition,i,a,s=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((i=n[u]).name!==t){s=!1;continue}a=i.state>h0&&i.state<y0,i.state=jl,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[u]}s&&delete e.__transition}}function fP(e){return this.each(function(){Rl(this,e)})}function _P(e,t){var n,i;return function(){var a=Kn(this,e),s=a.tween;if(s!==n){i=n=s;for(var u=0,l=i.length;u<l;++u)if(i[u].name===t){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function mP(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var s=Kn(this,e),u=s.tween;if(u!==i){a=(i=u).slice();for(var l={name:t,value:n},d=0,p=a.length;d<p;++d)if(a[d].name===t){a[d]=l;break}d===p&&a.push(l)}s.tween=a}}function hP(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=jn(this.node(),n).tween,a=0,s=i.length,u;a<s;++a)if((u=i[a]).name===e)return u.value;return null}return this.each((t==null?_P:mP)(n,e,t))}function Q0(e,t,n){var i=e._id;return e.each(function(){var a=Kn(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return jn(a,i).value[t]}}function Hk(e,t){var n;return(typeof t=="number"?Hn:t instanceof No?Dl:(n=No(t))?(t=n,Dl):Fk)(e,t)}function yP(e){return function(){this.removeAttribute(e)}}function gP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vP(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttribute(e);return u===a?null:u===i?s:s=t(i=u,n)}}function xP(e,t,n){var i,a=n+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===i?s:s=t(i=u,n)}}function wP(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function bP(e,t,n){var i,a,s;return function(){var u,l=n(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l)))}}function qP(e,t){var n=uc(e),i=n==="transform"?rP:Hk;return this.attrTween(e,typeof t=="function"?(n.local?bP:wP)(n,i,Q0(this,"attr."+e,t)):t==null?(n.local?gP:yP)(n):(n.local?xP:vP)(n,i,t))}function SP(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function CP(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kP(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&CP(e,s)),n}return a._value=t,a}function MP(e,t){var n,i;function a(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&SP(e,s)),n}return a._value=t,a}function EP(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=uc(e);return this.tween(n,(i.local?kP:MP)(i,t))}function IP(e,t){return function(){Y0(this,e).delay=+t.apply(this,arguments)}}function TP(e,t){return t=+t,function(){Y0(this,e).delay=t}}function NP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?IP:TP)(t,e)):jn(this.node(),t).delay}function PP(e,t){return function(){Kn(this,e).duration=+t.apply(this,arguments)}}function jP(e,t){return t=+t,function(){Kn(this,e).duration=t}}function RP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PP:jP)(t,e)):jn(this.node(),t).duration}function VP(e,t){if(typeof t!="function")throw new Error;return function(){Kn(this,e).ease=t}}function OP(e){var t=this._id;return arguments.length?this.each(VP(t,e)):jn(this.node(),t).ease}function FP(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Kn(this,e).ease=n}}function AP(e){if(typeof e!="function")throw new Error;return this.each(FP(this._id,e))}function LP(e){typeof e!="function"&&(e=wk(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s=t[a],u=s.length,l=i[a]=[],d,p=0;p<u;++p)(d=s[p])&&e.call(d,d.__data__,p,s)&&l.push(d);return new yi(i,this._parents,this._name,this._id)}function DP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,s=Math.min(i,a),u=new Array(i),l=0;l<s;++l)for(var d=t[l],p=n[l],m=d.length,_=u[l]=new Array(m),h,g=0;g<m;++g)(h=d[g]||p[g])&&(_[g]=h);for(;l<i;++l)u[l]=t[l];return new yi(u,this._parents,this._name,this._id)}function BP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zP(e,t,n){var i,a,s=BP(t)?Y0:Kn;return function(){var u=s(this,e),l=u.on;l!==i&&(a=(i=l).copy()).on(t,n),u.on=a}}function $P(e,t){var n=this._id;return arguments.length<2?jn(this.node(),n).on.on(e):this.each(zP(n,e,t))}function HP(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function WP(){return this.on("end.remove",HP(this._id))}function UP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=H0(e));for(var i=this._groups,a=i.length,s=new Array(a),u=0;u<a;++u)for(var l=i[u],d=l.length,p=s[u]=new Array(d),m,_,h=0;h<d;++h)(m=l[h])&&(_=e.call(m,m.__data__,h,l))&&("__data__"in m&&(_.__data__=m.__data__),p[h]=_,cc(p[h],t,n,h,p,jn(m,n)));return new yi(s,this._parents,t,n)}function GP(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xk(e));for(var i=this._groups,a=i.length,s=[],u=[],l=0;l<a;++l)for(var d=i[l],p=d.length,m,_=0;_<p;++_)if(m=d[_]){for(var h=e.call(m,m.__data__,_,d),g,x=jn(m,n),q=0,w=h.length;q<w;++q)(g=h[q])&&cc(g,t,n,q,h,x);s.push(h),u.push(m)}return new yi(s,u,t,n)}var KP=Qs.prototype.constructor;function YP(){return new KP(this._groups,this._parents)}function QP(e,t){var n,i,a;return function(){var s=ba(this,e),u=(this.style.removeProperty(e),ba(this,e));return s===u?null:s===n&&u===i?a:a=t(n=s,i=u)}}function Wk(e){return function(){this.style.removeProperty(e)}}function XP(e,t,n){var i,a=n+"",s;return function(){var u=ba(this,e);return u===a?null:u===i?s:s=t(i=u,n)}}function ZP(e,t,n){var i,a,s;return function(){var u=ba(this,e),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),ba(this,e))),u===d?null:u===i&&d===a?s:(a=d,s=t(i=u,l))}}function JP(e,t){var n,i,a,s="style."+t,u="end."+s,l;return function(){var d=Kn(this,e),p=d.on,m=d.value[s]==null?l||(l=Wk(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(u,a=m),d.on=i}}function ej(e,t,n){var i=(e+="")=="transform"?tP:Hk;return t==null?this.styleTween(e,QP(e,i)).on("end.style."+e,Wk(e)):typeof t=="function"?this.styleTween(e,ZP(e,i,Q0(this,"style."+e,t))).each(JP(this._id,e)):this.styleTween(e,XP(e,i,t),n).on("end.style."+e,null)}function tj(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function rj(e,t,n){var i,a;function s(){var u=t.apply(this,arguments);return u!==a&&(i=(a=u)&&tj(e,u,n)),i}return s._value=t,s}function nj(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,rj(e,t,n??""))}function ij(e){return function(){this.textContent=e}}function oj(e){return function(){var t=e(this);this.textContent=t??""}}function aj(e){return this.tween("text",typeof e=="function"?oj(Q0(this,"text",e)):ij(e==null?"":e+""))}function sj(e){return function(t){this.textContent=e.call(this,t)}}function uj(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&sj(a)),t}return i._value=e,i}function lj(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,uj(e))}function cj(){for(var e=this._name,t=this._id,n=Uk(),i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)if(d=u[p]){var m=jn(d,t);cc(d,e,n,p,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new yi(i,this._parents,e,n)}function dj(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(s,u){var l={value:u},d={value:function(){--a===0&&s()}};n.each(function(){var p=Kn(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),p.on=t}),a===0&&s()})}var pj=0;function yi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Uk(){return++pj}var fi=Qs.prototype;yi.prototype={constructor:yi,select:UP,selectAll:GP,selectChild:fi.selectChild,selectChildren:fi.selectChildren,filter:LP,merge:DP,selection:YP,transition:cj,call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:$P,attr:qP,attrTween:EP,style:ej,styleTween:nj,text:aj,textTween:lj,remove:WP,tween:hP,delay:NP,duration:RP,ease:OP,easeVarying:AP,end:dj,[Symbol.iterator]:fi[Symbol.iterator]};function fj(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _j={time:null,delay:0,duration:250,ease:fj};function mj(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hj(e){var t,n;e instanceof yi?(t=e._id,e=e._name):(t=Uk(),(n=_j).time=K0(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var u=i[s],l=u.length,d,p=0;p<l;++p)(d=u[p])&&cc(d,e,t,p,u,n||mj(d,t));return new yi(i,this._parents,e,t)}Qs.prototype.interrupt=fP;Qs.prototype.transition=hj;const yl=e=>()=>e;function yj(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function mi(e,t,n){this.k=e,this.x=t,this.y=n}mi.prototype={constructor:mi,scale:function(e){return e===1?this:new mi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dc=new mi(1,0,0);Gk.prototype=mi.prototype;function Gk(e){for(;!e.__zoom;)if(!(e=e.parentNode))return dc;return e.__zoom}function bp(e){e.stopImmediatePropagation()}function xs(e){e.preventDefault(),e.stopImmediatePropagation()}function gj(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vj(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function u1(){return this.__zoom||dc}function xj(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wj(){return navigator.maxTouchPoints||"ontouchstart"in this}function bj(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),u>s?(s+u)/2:Math.min(0,s)||Math.max(0,u))}function Kk(){var e=gj,t=vj,n=bj,i=xj,a=wj,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=Nl,p=sc("start","zoom","end"),m,_,h,g=500,x=150,q=0,w=10;function b(V){V.property("__zoom",u1).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(V,Z,W,te){var U=V.selection?V.selection():V;U.property("__zoom",u1),V!==U?I(V,Z,W,te):U.interrupt().each(function(){E(this,arguments).event(te).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},b.scaleBy=function(V,Z,W,te){b.scaleTo(V,function(){var U=this.__zoom.k,K=typeof Z=="function"?Z.apply(this,arguments):Z;return U*K},W,te)},b.scaleTo=function(V,Z,W,te){b.transform(V,function(){var U=t.apply(this,arguments),K=this.__zoom,oe=W==null?M(U):typeof W=="function"?W.apply(this,arguments):W,z=K.invert(oe),Q=typeof Z=="function"?Z.apply(this,arguments):Z;return n(S(k(K,Q),oe,z),U,u)},W,te)},b.translateBy=function(V,Z,W,te){b.transform(V,function(){return n(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),u)},null,te)},b.translateTo=function(V,Z,W,te,U){b.transform(V,function(){var K=t.apply(this,arguments),oe=this.__zoom,z=te==null?M(K):typeof te=="function"?te.apply(this,arguments):te;return n(dc.translate(z[0],z[1]).scale(oe.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof W=="function"?-W.apply(this,arguments):-W),K,u)},te,U)};function k(V,Z){return Z=Math.max(s[0],Math.min(s[1],Z)),Z===V.k?V:new mi(Z,V.x,V.y)}function S(V,Z,W){var te=Z[0]-W[0]*V.k,U=Z[1]-W[1]*V.k;return te===V.x&&U===V.y?V:new mi(V.k,te,U)}function M(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function I(V,Z,W,te){V.on("start.zoom",function(){E(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(te).end()}).tween("zoom",function(){var U=this,K=arguments,oe=E(U,K).event(te),z=t.apply(U,K),Q=W==null?M(z):typeof W=="function"?W.apply(U,K):W,_e=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),H=U.__zoom,J=typeof Z=="function"?Z.apply(U,K):Z,ne=d(H.invert(Q).concat(_e/H.k),J.invert(Q).concat(_e/J.k));return function(ue){if(ue===1)ue=J;else{var ae=ne(ue),he=_e/ae[2];ue=new mi(he,Q[0]-ae[0]*he,Q[1]-ae[1]*he)}oe.zoom(null,ue)}})}function E(V,Z,W){return!W&&V.__zooming||new T(V,Z)}function T(V,Z){this.that=V,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=t.apply(V,Z),this.taps=0}T.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,Z){return this.mouse&&V!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var Z=Wr(this.that).datum();p.call(V,this.that,new yj(V,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:p}),Z)}};function P(V,...Z){if(!e.apply(this,arguments))return;var W=E(this,Z).event(V),te=this.__zoom,U=Math.max(s[0],Math.min(s[1],te.k*Math.pow(2,i.apply(this,arguments)))),K=kn(V);if(W.wheel)(W.mouse[0][0]!==K[0]||W.mouse[0][1]!==K[1])&&(W.mouse[1]=te.invert(W.mouse[0]=K)),clearTimeout(W.wheel);else{if(te.k===U)return;W.mouse=[K,te.invert(K)],Rl(this),W.start()}xs(V),W.wheel=setTimeout(oe,x),W.zoom("mouse",n(S(k(te,U),W.mouse[0],W.mouse[1]),W.extent,u));function oe(){W.wheel=null,W.end()}}function j(V,...Z){if(h||!e.apply(this,arguments))return;var W=V.currentTarget,te=E(this,Z,!0).event(V),U=Wr(V.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",_e,!0),K=kn(V,W),oe=V.clientX,z=V.clientY;Nk(V.view),bp(V),te.mouse=[K,this.__zoom.invert(K)],Rl(this),te.start();function Q(H){if(xs(H),!te.moved){var J=H.clientX-oe,ne=H.clientY-z;te.moved=J*J+ne*ne>q}te.event(H).zoom("mouse",n(S(te.that.__zoom,te.mouse[0]=kn(H,W),te.mouse[1]),te.extent,u))}function _e(H){U.on("mousemove.zoom mouseup.zoom",null),Pk(H.view,te.moved),xs(H),te.event(H).end()}}function D(V,...Z){if(e.apply(this,arguments)){var W=this.__zoom,te=kn(V.changedTouches?V.changedTouches[0]:V,this),U=W.invert(te),K=W.k*(V.shiftKey?.5:2),oe=n(S(k(W,K),te,U),t.apply(this,Z),u);xs(V),l>0?Wr(this).transition().duration(l).call(I,oe,te,V):Wr(this).call(b.transform,oe,te,V)}}function O(V,...Z){if(e.apply(this,arguments)){var W=V.touches,te=W.length,U=E(this,Z,V.changedTouches.length===te).event(V),K,oe,z,Q;for(bp(V),oe=0;oe<te;++oe)z=W[oe],Q=kn(z,this),Q=[Q,this.__zoom.invert(Q),z.identifier],U.touch0?!U.touch1&&U.touch0[2]!==Q[2]&&(U.touch1=Q,U.taps=0):(U.touch0=Q,K=!0,U.taps=1+!!m);m&&(m=clearTimeout(m)),K&&(U.taps<2&&(_=Q[0],m=setTimeout(function(){m=null},g)),Rl(this),U.start())}}function F(V,...Z){if(this.__zooming){var W=E(this,Z).event(V),te=V.changedTouches,U=te.length,K,oe,z,Q;for(xs(V),K=0;K<U;++K)oe=te[K],z=kn(oe,this),W.touch0&&W.touch0[2]===oe.identifier?W.touch0[0]=z:W.touch1&&W.touch1[2]===oe.identifier&&(W.touch1[0]=z);if(oe=W.that.__zoom,W.touch1){var _e=W.touch0[0],H=W.touch0[1],J=W.touch1[0],ne=W.touch1[1],ue=(ue=J[0]-_e[0])*ue+(ue=J[1]-_e[1])*ue,ae=(ae=ne[0]-H[0])*ae+(ae=ne[1]-H[1])*ae;oe=k(oe,Math.sqrt(ue/ae)),z=[(_e[0]+J[0])/2,(_e[1]+J[1])/2],Q=[(H[0]+ne[0])/2,(H[1]+ne[1])/2]}else if(W.touch0)z=W.touch0[0],Q=W.touch0[1];else return;W.zoom("touch",n(S(oe,z,Q),W.extent,u))}}function X(V,...Z){if(this.__zooming){var W=E(this,Z).event(V),te=V.changedTouches,U=te.length,K,oe;for(bp(V),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),K=0;K<U;++K)oe=te[K],W.touch0&&W.touch0[2]===oe.identifier?delete W.touch0:W.touch1&&W.touch1[2]===oe.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(oe=kn(oe,this),Math.hypot(_[0]-oe[0],_[1]-oe[1])<w)){var z=Wr(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(V){return arguments.length?(i=typeof V=="function"?V:yl(+V),b):i},b.filter=function(V){return arguments.length?(e=typeof V=="function"?V:yl(!!V),b):e},b.touchable=function(V){return arguments.length?(a=typeof V=="function"?V:yl(!!V),b):a},b.extent=function(V){return arguments.length?(t=typeof V=="function"?V:yl([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),b):t},b.scaleExtent=function(V){return arguments.length?(s[0]=+V[0],s[1]=+V[1],b):[s[0],s[1]]},b.translateExtent=function(V){return arguments.length?(u[0][0]=+V[0][0],u[1][0]=+V[1][0],u[0][1]=+V[0][1],u[1][1]=+V[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(V){return arguments.length?(n=V,b):n},b.duration=function(V){return arguments.length?(l=+V,b):l},b.interpolate=function(V){return arguments.length?(d=V,b):d},b.on=function(){var V=p.on.apply(p,arguments);return V===p?b:V},b.clickDistance=function(V){return arguments.length?(q=(V=+V)*V,b):Math.sqrt(q)},b.tapDistance=function(V){return arguments.length?(w=+V,b):w},b}const Gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ls=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Yk=["Enter"," ","Escape"],Qk={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Sa;(function(e){e.Strict="strict",e.Loose="loose"})(Sa||(Sa={}));var To;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(To||(To={}));var Ds;(function(e){e.Partial="partial",e.Full="full"})(Ds||(Ds={}));const Xk={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ui;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ui||(Ui={}));var Hl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hl||(Hl={}));var $e;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($e||($e={}));const l1={[$e.Left]:$e.Right,[$e.Right]:$e.Left,[$e.Top]:$e.Bottom,[$e.Bottom]:$e.Top};function Zk(e){return e===null?null:e?"valid":"invalid"}const Jk=e=>"id"in e&&"source"in e&&"target"in e,qj=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),X0=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Zs=(e,t=[0,0])=>{const{width:n,height:i}=gi(e),a=e.origin??t,s=n*a[0],u=i*a[1];return{x:e.position.x-s,y:e.position.y-u}},Sj=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const s=typeof a=="string";let u=!t.nodeLookup&&!s?a:void 0;t.nodeLookup&&(u=s?t.nodeLookup.get(a):X0(a)?a:t.nodeLookup.get(a.id));const l=u?Wl(u,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return pc(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fc(n)},Js=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(n=pc(n,Wl(a)),i=!0)}),i?fc(n):{x:0,y:0,width:0,height:0}},Z0=(e,t,[n,i,a]=[0,0,1],s=!1,u=!1)=>{const l={...tu(t,[n,i,a]),width:t.width/a,height:t.height/a},d=[];for(const p of e.values()){const{measured:m,selectable:_=!0,hidden:h=!1}=p;if(u&&!_||h)continue;const g=m.width??p.width??p.initialWidth??null,x=m.height??p.height??p.initialHeight??null,q=Bs(l,ka(p)),w=(g??0)*(x??0),b=s&&q>0;(!p.internals.handleBounds||b||q>=w||p.dragging)&&d.push(p)}return d},Cj=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function kj(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!a.hidden)&&(!i||i.has(a.id))&&n.set(a.id,a)}),n}async function Mj({nodes:e,width:t,height:n,panZoom:i,minZoom:a,maxZoom:s},u){if(e.size===0)return Promise.resolve(!0);const l=kj(e,u),d=Js(l),p=J0(d,t,n,(u==null?void 0:u.minZoom)??a,(u==null?void 0:u.maxZoom)??s,(u==null?void 0:u.padding)??.1);return await i.setViewport(p,{duration:u==null?void 0:u.duration,ease:u==null?void 0:u.ease,interpolate:u==null?void 0:u.interpolate}),Promise.resolve(!0)}function eM({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:a,onError:s}){const u=n.get(e),l=u.parentId?n.get(u.parentId):void 0,{x:d,y:p}=l?l.internals.positionAbsolute:{x:0,y:0},m=u.origin??i;let _=u.extent||a;if(u.extent==="parent"&&!u.expandParent)if(!l)s==null||s("005",Gn.error005());else{const g=l.measured.width,x=l.measured.height;g&&x&&(_=[[d,p],[d+g,p+x]])}else l&&Ma(u.extent)&&(_=[[u.extent[0][0]+d,u.extent[0][1]+p],[u.extent[1][0]+d,u.extent[1][1]+p]]);const h=Ma(_)?jo(t,_,u.measured):t;return(u.measured.width===void 0||u.measured.height===void 0)&&(s==null||s("015",Gn.error015())),{position:{x:h.x-d+(u.measured.width??0)*m[0],y:h.y-p+(u.measured.height??0)*m[1]},positionAbsolute:h}}async function Ej({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:a}){const s=new Set(e.map(h=>h.id)),u=[];for(const h of n){if(h.deletable===!1)continue;const g=s.has(h.id),x=!g&&h.parentId&&u.find(q=>q.id===h.parentId);(g||x)&&u.push(h)}const l=new Set(t.map(h=>h.id)),d=i.filter(h=>h.deletable!==!1),m=Cj(u,d);for(const h of d)l.has(h.id)&&!m.find(x=>x.id===h.id)&&m.push(h);if(!a)return{edges:m,nodes:u};const _=await a({nodes:u,edges:m});return typeof _=="boolean"?_?{edges:m,nodes:u}:{edges:[],nodes:[]}:_}const Ca=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),jo=(e={x:0,y:0},t,n)=>({x:Ca(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ca(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function tM(e,t,n){const{width:i,height:a}=gi(n),{x:s,y:u}=n.internals.positionAbsolute;return jo(e,[[s,u],[s+i,u+a]],t)}const c1=(e,t,n)=>e<t?Ca(Math.abs(e-t),1,t)/t:e>n?-Ca(Math.abs(e-n),1,t)/t:0,rM=(e,t,n=15,i=40)=>{const a=c1(e.x,i,t.width-i)*n,s=c1(e.y,i,t.height-i)*n;return[a,s]},pc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),g0=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),fc=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),ka=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,width:((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Wl=(e,t=[0,0])=>{var a,s;const{x:n,y:i}=X0(e)?e.internals.positionAbsolute:Zs(e,t);return{x:n,y:i,x2:n+(((a=e.measured)==null?void 0:a.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},nM=(e,t)=>fc(pc(g0(e),g0(t))),Bs=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},d1=e=>Tn(e.width)&&Tn(e.height)&&Tn(e.x)&&Tn(e.y),Tn=e=>!isNaN(e)&&isFinite(e),Ij=(e,t)=>{},eu=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),tu=({x:e,y:t},[n,i,a],s=!1,u=[1,1])=>{const l={x:(e-n)/a,y:(t-i)/a};return s?eu(l,u):l},Ul=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i});function ha(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Tj(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=ha(e,n),a=ha(e,t);return{top:i,right:a,bottom:i,left:a,x:a*2,y:i*2}}if(typeof e=="object"){const i=ha(e.top??e.y??0,n),a=ha(e.bottom??e.y??0,n),s=ha(e.left??e.x??0,t),u=ha(e.right??e.x??0,t);return{top:i,right:u,bottom:a,left:s,x:s+u,y:i+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Nj(e,t,n,i,a,s){const{x:u,y:l}=Ul(e,[t,n,i]),{x:d,y:p}=Ul({x:e.x+e.width,y:e.y+e.height},[t,n,i]),m=a-d,_=s-p;return{left:Math.floor(u),top:Math.floor(l),right:Math.floor(m),bottom:Math.floor(_)}}const J0=(e,t,n,i,a,s)=>{const u=Tj(s,t,n),l=(t-u.x)/e.width,d=(n-u.y)/e.height,p=Math.min(l,d),m=Ca(p,i,a),_=e.x+e.width/2,h=e.y+e.height/2,g=t/2-_*m,x=n/2-h*m,q=Nj(e,g,x,m,t,n),w={left:Math.min(q.left-u.left,0),top:Math.min(q.top-u.top,0),right:Math.min(q.right-u.right,0),bottom:Math.min(q.bottom-u.bottom,0)};return{x:g-w.left+w.right,y:x-w.top+w.bottom,zoom:m}},zs=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ma(e){return e!=null&&e!=="parent"}function gi(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function iM(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function oM(e,t={width:0,height:0},n,i,a){const s={...e},u=i.get(n);if(u){const l=u.origin||a;s.x+=u.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=u.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function p1(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Pj(){let e,t;return{promise:new Promise((i,a)=>{e=i,t=a}),resolve:e,reject:t}}function jj(e){return{...Qk,...e||{}}}function Is(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:a}){const{x:s,y:u}=Nn(e),l=tu({x:s-((a==null?void 0:a.left)??0),y:u-((a==null?void 0:a.top)??0)},i),{x:d,y:p}=n?eu(l,t):l;return{xSnapped:d,ySnapped:p,...l}}const eg=e=>({width:e.offsetWidth,height:e.offsetHeight}),aM=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Rj=["INPUT","SELECT","TEXTAREA"];function sM(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Rj.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const uM=e=>"clientX"in e,Nn=(e,t)=>{var s,u;const n=uM(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=n?e.clientY:(u=e.touches)==null?void 0:u[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},f1=(e,t,n,i,a)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:a,position:u.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...eg(u)}})};function lM({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l}){const d=e*.125+a*.375+u*.375+n*.125,p=t*.125+s*.375+l*.375+i*.125,m=Math.abs(d-e),_=Math.abs(p-t);return[d,p,m,_]}function gl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function _1({pos:e,x1:t,y1:n,x2:i,y2:a,c:s}){switch(e){case $e.Left:return[t-gl(t-i,s),n];case $e.Right:return[t+gl(i-t,s),n];case $e.Top:return[t,n-gl(n-a,s)];case $e.Bottom:return[t,n+gl(a-n,s)]}}function tg({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,curvature:u=.25}){const[l,d]=_1({pos:n,x1:e,y1:t,x2:i,y2:a,c:u}),[p,m]=_1({pos:s,x1:i,y1:a,x2:e,y2:t,c:u}),[_,h,g,x]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:l,sourceControlY:d,targetControlX:p,targetControlY:m});return[`M${e},${t} C${l},${d} ${p},${m} ${i},${a}`,_,h,g,x]}function cM({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,s=n<e?n+a:n-a,u=Math.abs(i-t)/2,l=i<t?i+u:i-u;return[s,l,a,u]}function Vj({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:a=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const u=a&&n?i+1e3:i,l=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return u+l}function Oj({sourceNode:e,targetNode:t,width:n,height:i,transform:a}){const s=pc(Wl(e),Wl(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:i/a[2]};return Bs(u,fc(s))>0}const Fj=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Aj=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),v0=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||Fj;let a;return Jk(e)?a={...e}:a={...e,id:i(e)},Aj(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function rg({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,s,u,l]=cM({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,s,u,l]}const m1={[$e.Left]:{x:-1,y:0},[$e.Right]:{x:1,y:0},[$e.Top]:{x:0,y:-1},[$e.Bottom]:{x:0,y:1}},Lj=({source:e,sourcePosition:t=$e.Bottom,target:n})=>t===$e.Left||t===$e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},h1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Dj({source:e,sourcePosition:t=$e.Bottom,target:n,targetPosition:i=$e.Top,center:a,offset:s,stepPosition:u}){const l=m1[t],d=m1[i],p={x:e.x+l.x*s,y:e.y+l.y*s},m={x:n.x+d.x*s,y:n.y+d.y*s},_=Lj({source:p,sourcePosition:t,target:m}),h=_.x!==0?"x":"y",g=_[h];let x=[],q,w;const b={x:0,y:0},k={x:0,y:0},[,,S,M]=cM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[h]*d[h]===-1){h==="x"?(q=a.x??p.x+(m.x-p.x)*u,w=a.y??(p.y+m.y)/2):(q=a.x??(p.x+m.x)/2,w=a.y??p.y+(m.y-p.y)*u);const E=[{x:q,y:p.y},{x:q,y:m.y}],T=[{x:p.x,y:w},{x:m.x,y:w}];l[h]===g?x=h==="x"?E:T:x=h==="x"?T:E}else{const E=[{x:p.x,y:m.y}],T=[{x:m.x,y:p.y}];if(h==="x"?x=l.x===g?T:E:x=l.y===g?E:T,t===i){const F=Math.abs(e[h]-n[h]);if(F<=s){const X=Math.min(s-1,s-F);l[h]===g?b[h]=(p[h]>e[h]?-1:1)*X:k[h]=(m[h]>n[h]?-1:1)*X}}if(t!==i){const F=h==="x"?"y":"x",X=l[h]===d[F],V=p[F]>m[F],Z=p[F]<m[F];(l[h]===1&&(!X&&V||X&&Z)||l[h]!==1&&(!X&&Z||X&&V))&&(x=h==="x"?E:T)}const P={x:p.x+b.x,y:p.y+b.y},j={x:m.x+k.x,y:m.y+k.y},D=Math.max(Math.abs(P.x-x[0].x),Math.abs(j.x-x[0].x)),O=Math.max(Math.abs(P.y-x[0].y),Math.abs(j.y-x[0].y));D>=O?(q=(P.x+j.x)/2,w=x[0].y):(q=x[0].x,w=(P.y+j.y)/2)}return[[e,{x:p.x+b.x,y:p.y+b.y},...x,{x:m.x+k.x,y:m.y+k.y},n],q,w,S,M]}function Bj(e,t,n,i){const a=Math.min(h1(e,t)/2,h1(t,n)/2,i),{x:s,y:u}=t;if(e.x===s&&s===n.x||e.y===u&&u===n.y)return`L${s} ${u}`;if(e.y===u){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${s+a*p},${u}Q ${s},${u} ${s},${u+a*m}`}const l=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${s},${u+a*d}Q ${s},${u} ${s+a*l},${u}`}function Gl({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top,borderRadius:u=5,centerX:l,centerY:d,offset:p=20,stepPosition:m=.5}){const[_,h,g,x,q]=Dj({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:s,center:{x:l,y:d},offset:p,stepPosition:m});return[_.reduce((b,k,S)=>{let M="";return S>0&&S<_.length-1?M=Bj(_[S-1],k,_[S+1],u):M=`${S===0?"M":"L"}${k.x} ${k.y}`,b+=M,b},""),h,g,x,q]}function y1(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function zj(e){var _;const{sourceNode:t,targetNode:n}=e;if(!y1(t)||!y1(n))return null;const i=t.internals.handleBounds||g1(t.handles),a=n.internals.handleBounds||g1(n.handles),s=v1((i==null?void 0:i.source)??[],e.sourceHandle),u=v1(e.connectionMode===Sa.Strict?(a==null?void 0:a.target)??[]:((a==null?void 0:a.target)??[]).concat((a==null?void 0:a.source)??[]),e.targetHandle);if(!s||!u)return(_=e.onError)==null||_.call(e,"008",Gn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||$e.Bottom,d=(u==null?void 0:u.position)||$e.Top,p=Ro(t,s,l),m=Ro(n,u,d);return{sourceX:p.x,sourceY:p.y,targetX:m.x,targetY:m.y,sourcePosition:l,targetPosition:d}}function g1(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Ro(e,t,n=$e.Left,i=!1){const a=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??gi(e);if(i)return{x:a+u/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case $e.Top:return{x:a+u/2,y:s};case $e.Right:return{x:a+u,y:s+l/2};case $e.Bottom:return{x:a+u/2,y:s+l};case $e.Left:return{x:a,y:s+l/2}}}function v1(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function x0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function $j(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:a}){const s=new Set;return e.reduce((u,l)=>([l.markerStart||i,l.markerEnd||a].forEach(d=>{if(d&&typeof d=="object"){const p=x0(d,t);s.has(p)||(u.push({id:p,color:d.color||n,...d}),s.add(p))}}),u),[]).sort((u,l)=>u.id.localeCompare(l.id))}const dM=1e3,Hj=10,ng={nodeOrigin:[0,0],nodeExtent:Ls,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Wj={...ng,checkEquality:!0};function ig(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Uj(e,t,n){const i=ig(ng,n);for(const a of e.values())if(a.parentId)ag(a,e,t,i);else{const s=Zs(a,i.nodeOrigin),u=Ma(a.extent)?a.extent:i.nodeExtent,l=jo(s,u,gi(a));a.internals.positionAbsolute=l}}function Gj(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],i=[];for(const a of e.handles){const s={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?n.push(s):a.type==="target"&&i.push(s)}return{source:n,target:i}}function og(e){return e==="manual"}function w0(e,t,n,i={}){var p,m;const a=ig(Wj,i),s={i:0},u=new Map(t),l=a!=null&&a.elevateNodesOnSelect&&!og(a.zIndexMode)?dM:0;let d=e.length>0;t.clear(),n.clear();for(const _ of e){let h=u.get(_.id);if(a.checkEquality&&_===(h==null?void 0:h.internals.userNode))t.set(_.id,h);else{const g=Zs(_,a.nodeOrigin),x=Ma(_.extent)?_.extent:a.nodeExtent,q=jo(g,x,gi(_));h={...a.defaults,..._,measured:{width:(p=_.measured)==null?void 0:p.width,height:(m=_.measured)==null?void 0:m.height},internals:{positionAbsolute:q,handleBounds:Gj(_,h),z:pM(_,l,a.zIndexMode),userNode:_}},t.set(_.id,h)}(h.measured===void 0||h.measured.width===void 0||h.measured.height===void 0)&&!h.hidden&&(d=!1),_.parentId&&ag(h,t,n,i,s)}return d}function Kj(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ag(e,t,n,i,a){const{elevateNodesOnSelect:s,nodeOrigin:u,nodeExtent:l,zIndexMode:d}=ig(ng,i),p=e.parentId,m=t.get(p);if(!m){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Kj(e,n),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*Hj),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const _=s&&!og(d)?dM:0,{x:h,y:g,z:x}=Yj(e,m,u,l,_,d),{positionAbsolute:q}=e.internals,w=h!==q.x||g!==q.y;(w||x!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:h,y:g}:q,z:x}})}function pM(e,t,n){const i=Tn(e.zIndex)?e.zIndex:0;return og(n)?i:i+(e.selected?t:0)}function Yj(e,t,n,i,a,s){const{x:u,y:l}=t.internals.positionAbsolute,d=gi(e),p=Zs(e,n),m=Ma(e.extent)?jo(p,e.extent,d):p;let _=jo({x:u+m.x,y:l+m.y},i,d);e.extent==="parent"&&(_=tM(_,d,t));const h=pM(e,a,s),g=t.internals.z??0;return{x:_.x,y:_.y,z:g>=h?g+1:h}}function sg(e,t,n,i=[0,0]){var u;const a=[],s=new Map;for(const l of e){const d=t.get(l.parentId);if(!d)continue;const p=((u=s.get(l.parentId))==null?void 0:u.expandedRect)??ka(d),m=nM(p,l.rect);s.set(l.parentId,{expandedRect:m,parent:d})}return s.size>0&&s.forEach(({expandedRect:l,parent:d},p)=>{var S;const m=d.internals.positionAbsolute,_=gi(d),h=d.origin??i,g=l.x<m.x?Math.round(Math.abs(m.x-l.x)):0,x=l.y<m.y?Math.round(Math.abs(m.y-l.y)):0,q=Math.max(_.width,Math.round(l.width)),w=Math.max(_.height,Math.round(l.height)),b=(q-_.width)*h[0],k=(w-_.height)*h[1];(g>0||x>0||b||k)&&(a.push({id:p,type:"position",position:{x:d.position.x-g+b,y:d.position.y-x+k}}),(S=n.get(p))==null||S.forEach(M=>{e.some(I=>I.id===M.id)||a.push({id:M.id,type:"position",position:{x:M.position.x+g,y:M.position.y+x}})})),(_.width<l.width||_.height<l.height||g||x)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:q+(g?h[0]*g-b:0),height:w+(x?h[1]*x-k:0)}})}),a}function Qj(e,t,n,i,a,s,u){const l=i==null?void 0:i.querySelector(".xyflow__viewport");let d=!1;if(!l)return{changes:[],updatedInternals:d};const p=[],m=window.getComputedStyle(l),{m22:_}=new window.DOMMatrixReadOnly(m.transform),h=[];for(const g of e.values()){const x=t.get(g.id);if(!x)continue;if(x.hidden){t.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),d=!0;continue}const q=eg(g.nodeElement),w=x.measured.width!==q.width||x.measured.height!==q.height;if(!!(q.width&&q.height&&(w||!x.internals.handleBounds||g.force))){const k=g.nodeElement.getBoundingClientRect(),S=Ma(x.extent)?x.extent:s;let{positionAbsolute:M}=x.internals;x.parentId&&x.extent==="parent"?M=tM(M,q,t.get(x.parentId)):S&&(M=jo(M,S,q));const I={...x,measured:q,internals:{...x.internals,positionAbsolute:M,handleBounds:{source:f1("source",g.nodeElement,k,_,x.id),target:f1("target",g.nodeElement,k,_,x.id)}}};t.set(x.id,I),x.parentId&&ag(I,t,n,{nodeOrigin:a,zIndexMode:u}),d=!0,w&&(p.push({id:x.id,type:"dimensions",dimensions:q}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:ka(I,a)}))}}if(h.length>0){const g=sg(h,t,n,a);p.push(...g)}return{changes:p,updatedInternals:d}}async function Xj({delta:e,panZoom:t,transform:n,translateExtent:i,width:a,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,s]],i),l=!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]);return Promise.resolve(l)}function x1(e,t,n,i,a,s){let u=a;const l=i.get(u)||new Map;i.set(u,l.set(n,t)),u=`${a}-${e}`;const d=i.get(u)||new Map;if(i.set(u,d.set(n,t)),s){u=`${a}-${e}-${s}`;const p=i.get(u)||new Map;i.set(u,p.set(n,t))}}function fM(e,t,n){e.clear(),t.clear();for(const i of n){const{source:a,target:s,sourceHandle:u=null,targetHandle:l=null}=i,d={edgeId:i.id,source:a,target:s,sourceHandle:u,targetHandle:l},p=`${a}-${u}--${s}-${l}`,m=`${s}-${l}--${a}-${u}`;x1("source",d,m,e,a,u),x1("target",d,p,e,s,l),t.set(i.id,i)}}function _M(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:_M(n,t):!1}function w1(e,t,n){var a;let i=e;do{if((a=i==null?void 0:i.matches)!=null&&a.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function Zj(e,t,n,i){const a=new Map;for(const[s,u]of e)if((u.selected||u.id===i)&&(!u.parentId||!_M(u,e))&&(u.draggable||t&&typeof u.draggable>"u")){const l=e.get(s);l&&a.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function qp({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var u,l,d;const a=[];for(const[p,m]of t){const _=(u=n.get(p))==null?void 0:u.internals.userNode;_&&a.push({..._,position:m.position,dragging:i})}if(!e)return[a[0],a];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((d=t.get(e))==null?void 0:d.position)||s.position,dragging:i}:a[0],a]}function Jj({dragItems:e,snapGrid:t,x:n,y:i}){const a=e.values().next().value;if(!a)return null;const s={x:n-a.distance.x,y:i-a.distance.y},u=eu(s,t);return{x:u.x-s.x,y:u.y-s.y}}function eR({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:a}){let s={x:null,y:null},u=0,l=new Map,d=!1,p={x:0,y:0},m=null,_=!1,h=null,g=!1,x=!1,q=null;function w({noDragClassName:k,handleSelector:S,domNode:M,isSelectable:I,nodeId:E,nodeClickDistance:T=0}){h=Wr(M);function P({x:F,y:X}){const{nodeLookup:V,nodeExtent:Z,snapGrid:W,snapToGrid:te,nodeOrigin:U,onNodeDrag:K,onSelectionDrag:oe,onError:z,updateNodePositions:Q}=t();s={x:F,y:X};let _e=!1;const H=l.size>1,J=H&&Z?g0(Js(l)):null,ne=H&&te?Jj({dragItems:l,snapGrid:W,x:F,y:X}):null;for(const[ue,ae]of l){if(!V.has(ue))continue;let he={x:F-ae.distance.x,y:X-ae.distance.y};te&&(he=ne?{x:Math.round(he.x+ne.x),y:Math.round(he.y+ne.y)}:eu(he,W));let Ee=null;if(H&&Z&&!ae.extent&&J){const{positionAbsolute:Te}=ae.internals,Pe=Te.x-J.x+Z[0][0],Ve=Te.x+ae.measured.width-J.x2+Z[1][0],He=Te.y-J.y+Z[0][1],De=Te.y+ae.measured.height-J.y2+Z[1][1];Ee=[[Pe,He],[Ve,De]]}const{position:Ne,positionAbsolute:Ie}=eM({nodeId:ue,nextPosition:he,nodeLookup:V,nodeExtent:Ee||Z,nodeOrigin:U,onError:z});_e=_e||ae.position.x!==Ne.x||ae.position.y!==Ne.y,ae.position=Ne,ae.internals.positionAbsolute=Ie}if(x=x||_e,!!_e&&(Q(l,!0),q&&(i||K||!E&&oe))){const[ue,ae]=qp({nodeId:E,dragItems:l,nodeLookup:V});i==null||i(q,l,ue,ae),K==null||K(q,ue,ae),E||oe==null||oe(q,ae)}}async function j(){if(!m)return;const{transform:F,panBy:X,autoPanSpeed:V,autoPanOnNodeDrag:Z}=t();if(!Z){d=!1,cancelAnimationFrame(u);return}const[W,te]=rM(p,m,V);(W!==0||te!==0)&&(s.x=(s.x??0)-W/F[2],s.y=(s.y??0)-te/F[2],await X({x:W,y:te})&&P(s)),u=requestAnimationFrame(j)}function D(F){var H;const{nodeLookup:X,multiSelectionActive:V,nodesDraggable:Z,transform:W,snapGrid:te,snapToGrid:U,selectNodesOnDrag:K,onNodeDragStart:oe,onSelectionDragStart:z,unselectNodesAndEdges:Q}=t();_=!0,(!K||!I)&&!V&&E&&((H=X.get(E))!=null&&H.selected||Q()),I&&K&&E&&(e==null||e(E));const _e=Is(F.sourceEvent,{transform:W,snapGrid:te,snapToGrid:U,containerBounds:m});if(s=_e,l=Zj(X,Z,_e,E),l.size>0&&(n||oe||!E&&z)){const[J,ne]=qp({nodeId:E,dragItems:l,nodeLookup:X});n==null||n(F.sourceEvent,l,J,ne),oe==null||oe(F.sourceEvent,J,ne),E||z==null||z(F.sourceEvent,ne)}}const O=jk().clickDistance(T).on("start",F=>{const{domNode:X,nodeDragThreshold:V,transform:Z,snapGrid:W,snapToGrid:te}=t();m=(X==null?void 0:X.getBoundingClientRect())||null,g=!1,x=!1,q=F.sourceEvent,V===0&&D(F),s=Is(F.sourceEvent,{transform:Z,snapGrid:W,snapToGrid:te,containerBounds:m}),p=Nn(F.sourceEvent,m)}).on("drag",F=>{const{autoPanOnNodeDrag:X,transform:V,snapGrid:Z,snapToGrid:W,nodeDragThreshold:te,nodeLookup:U}=t(),K=Is(F.sourceEvent,{transform:V,snapGrid:Z,snapToGrid:W,containerBounds:m});if(q=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||E&&!U.has(E))&&(g=!0),!g){if(!d&&X&&_&&(d=!0,j()),!_){const oe=Nn(F.sourceEvent,m),z=oe.x-p.x,Q=oe.y-p.y;Math.sqrt(z*z+Q*Q)>te&&D(F)}(s.x!==K.xSnapped||s.y!==K.ySnapped)&&l&&_&&(p=Nn(F.sourceEvent,m),P(K))}}).on("end",F=>{if(!(!_||g)&&(d=!1,_=!1,cancelAnimationFrame(u),l.size>0)){const{nodeLookup:X,updateNodePositions:V,onNodeDragStop:Z,onSelectionDragStop:W}=t();if(x&&(V(l,!1),x=!1),a||Z||!E&&W){const[te,U]=qp({nodeId:E,dragItems:l,nodeLookup:X,dragging:!1});a==null||a(F.sourceEvent,l,te,U),Z==null||Z(F.sourceEvent,te,U),E||W==null||W(F.sourceEvent,U)}}}).filter(F=>{const X=F.target;return!F.button&&(!k||!w1(X,`.${k}`,M))&&(!S||w1(X,S,M))});h.call(O)}function b(){h==null||h.on(".drag",null)}return{update:w,destroy:b}}function tR(e,t,n){const i=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Bs(a,ka(s))>0&&i.push(s);return i}const rR=250;function nR(e,t,n,i){var l,d;let a=[],s=1/0;const u=tR(e,n,t+rR);for(const p of u){const m=[...((l=p.internals.handleBounds)==null?void 0:l.source)??[],...((d=p.internals.handleBounds)==null?void 0:d.target)??[]];for(const _ of m){if(i.nodeId===_.nodeId&&i.type===_.type&&i.id===_.id)continue;const{x:h,y:g}=Ro(p,_,_.position,!0),x=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));x>t||(x<s?(a=[{..._,x:h,y:g}],s=x):x===s&&a.push({..._,x:h,y:g}))}}if(!a.length)return null;if(a.length>1){const p=i.type==="source"?"target":"source";return a.find(m=>m.type===p)??a[0]}return a[0]}function mM(e,t,n,i,a,s=!1){var p,m,_;const u=i.get(e);if(!u)return null;const l=a==="strict"?(p=u.internals.handleBounds)==null?void 0:p[t]:[...((m=u.internals.handleBounds)==null?void 0:m.source)??[],...((_=u.internals.handleBounds)==null?void 0:_.target)??[]],d=(n?l==null?void 0:l.find(h=>h.id===n):l==null?void 0:l[0])??null;return d&&s?{...d,...Ro(u,d,d.position,!0)}:d}function hM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function iR(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const yM=()=>!0;function oR(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:a,edgeUpdaterType:s,isTarget:u,domNode:l,nodeLookup:d,lib:p,autoPanOnConnect:m,flowId:_,panBy:h,cancelConnection:g,onConnectStart:x,onConnect:q,onConnectEnd:w,isValidConnection:b=yM,onReconnectEnd:k,updateConnection:S,getTransform:M,getFromHandle:I,autoPanSpeed:E,dragThreshold:T=1,handleDomNode:P}){const j=aM(e.target);let D=0,O;const{x:F,y:X}=Nn(e),V=hM(s,P),Z=l==null?void 0:l.getBoundingClientRect();let W=!1;if(!Z||!V)return;const te=mM(a,V,i,d,t);if(!te)return;let U=Nn(e,Z),K=!1,oe=null,z=!1,Q=null;function _e(){if(!m||!Z)return;const[Ne,Ie]=rM(U,Z,E);h({x:Ne,y:Ie}),D=requestAnimationFrame(_e)}const H={...te,nodeId:a,type:V,position:te.position},J=d.get(a);let ue={inProgress:!0,isValid:null,from:Ro(J,H,$e.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:J,to:U,toHandle:null,toPosition:l1[H.position],toNode:null,pointer:U};function ae(){W=!0,S(ue),x==null||x(e,{nodeId:a,handleId:i,handleType:V})}T===0&&ae();function he(Ne){if(!W){const{x:De,y:nt}=Nn(Ne),et=De-F,ft=nt-X;if(!(et*et+ft*ft>T*T))return;ae()}if(!I()||!H){Ee(Ne);return}const Ie=M();U=Nn(Ne,Z),O=nR(tu(U,Ie,!1,[1,1]),n,d,H),K||(_e(),K=!0);const Te=gM(Ne,{handle:O,connectionMode:t,fromNodeId:a,fromHandleId:i,fromType:u?"target":"source",isValidConnection:b,doc:j,lib:p,flowId:_,nodeLookup:d});Q=Te.handleDomNode,oe=Te.connection,z=iR(!!O,Te.isValid);const Pe=d.get(a),Ve=Pe?Ro(Pe,H,$e.Left,!0):ue.from,He={...ue,from:Ve,isValid:z,to:Te.toHandle&&z?Ul({x:Te.toHandle.x,y:Te.toHandle.y},Ie):U,toHandle:Te.toHandle,toPosition:z&&Te.toHandle?Te.toHandle.position:l1[H.position],toNode:Te.toHandle?d.get(Te.toHandle.nodeId):null,pointer:U};S(He),ue=He}function Ee(Ne){if(!("touches"in Ne&&Ne.touches.length>0)){if(W){(O||Q)&&oe&&z&&(q==null||q(oe));const{inProgress:Ie,...Te}=ue,Pe={...Te,toPosition:ue.toHandle?ue.toPosition:null};w==null||w(Ne,Pe),s&&(k==null||k(Ne,Pe))}g(),cancelAnimationFrame(D),K=!1,z=!1,oe=null,Q=null,j.removeEventListener("mousemove",he),j.removeEventListener("mouseup",Ee),j.removeEventListener("touchmove",he),j.removeEventListener("touchend",Ee)}}j.addEventListener("mousemove",he),j.addEventListener("mouseup",Ee),j.addEventListener("touchmove",he),j.addEventListener("touchend",Ee)}function gM(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:a,fromType:s,doc:u,lib:l,flowId:d,isValidConnection:p=yM,nodeLookup:m}){const _=s==="target",h=t?u.querySelector(`.${l}-flow__handle[data-id="${d}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:x}=Nn(e),q=u.elementFromPoint(g,x),w=q!=null&&q.classList.contains(`${l}-flow__handle`)?q:h,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const k=hM(void 0,w),S=w.getAttribute("data-nodeid"),M=w.getAttribute("data-handleid"),I=w.classList.contains("connectable"),E=w.classList.contains("connectableend");if(!S||!k)return b;const T={source:_?S:i,sourceHandle:_?M:a,target:_?i:S,targetHandle:_?a:M};b.connection=T;const j=I&&E&&(n===Sa.Strict?_&&k==="source"||!_&&k==="target":S!==i||M!==a);b.isValid=j&&p(T),b.toHandle=mM(S,k,M,m,n,!0)}return b}const b0={onPointerDown:oR,isValid:gM};function aR({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const a=Wr(e);function s({translateExtent:l,width:d,height:p,zoomStep:m=1,pannable:_=!0,zoomable:h=!0,inversePan:g=!1}){const x=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const M=n(),I=S.sourceEvent.ctrlKey&&zs()?10:1,E=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*m,T=M[2]*Math.pow(2,E*I);t.scaleTo(T)};let q=[0,0];const w=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(q=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},b=S=>{const M=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const I=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],E=[I[0]-q[0],I[1]-q[1]];q=I;const T=i()*Math.max(M[2],Math.log(M[2]))*(g?-1:1),P={x:M[0]-E[0]*T,y:M[1]-E[1]*T},j=[[0,0],[d,p]];t.setViewportConstrained({x:P.x,y:P.y,zoom:M[2]},j,l)},k=Kk().on("start",w).on("zoom",_?b:null).on("zoom.wheel",h?x:null);a.call(k,{})}function u(){a.on("zoom",null)}return{update:s,destroy:u,pointer:kn}}const _c=e=>({x:e.x,y:e.y,zoom:e.k}),Sp=({x:e,y:t,zoom:n})=>dc.translate(e,t).scale(n),ya=(e,t)=>e.target.closest(`.${t}`),vM=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),sR=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Cp=(e,t=0,n=sR,i=()=>{})=>{const a=typeof t=="number"&&t>0;return a||i(),a?e.transition().duration(t).ease(n).on("end",i):e},xM=e=>{const t=e.ctrlKey&&zs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function uR({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:a,panOnScrollSpeed:s,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:d,onPanZoomEnd:p}){return m=>{if(ya(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const _=n.property("__zoom").k||1;if(m.ctrlKey&&u){const w=kn(m),b=xM(m),k=_*Math.pow(2,b);i.scaleTo(n,k,w,m);return}const h=m.deltaMode===1?20:1;let g=a===To.Vertical?0:m.deltaX*h,x=a===To.Horizontal?0:m.deltaY*h;!zs()&&m.shiftKey&&a!==To.Vertical&&(g=m.deltaY*h,x=0),i.translateBy(n,-(g/_)*s,-(x/_)*s,{internal:!0});const q=_c(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d==null||d(m,q),e.panScrollTimeout=setTimeout(()=>{p==null||p(m,q),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l==null||l(m,q))}}function lR({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,a){const s=i.type==="wheel",u=!t&&s&&!i.ctrlKey,l=ya(i,e);if(i.ctrlKey&&s&&l&&i.preventDefault(),u||l)return null;i.preventDefault(),n.call(this,i,a)}}function cR({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,u,l;if((s=i.sourceEvent)!=null&&s.internal)return;const a=_c(i.transform);e.mouseButton=((u=i.sourceEvent)==null?void 0:u.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=a,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,a))}}function dR({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:a}){return s=>{var u,l;e.usedRightMouseButton=!!(n&&vM(t,e.mouseButton??0)),(u=s.sourceEvent)!=null&&u.sync||i([s.transform.x,s.transform.y,s.transform.k]),a&&!((l=s.sourceEvent)!=null&&l.internal)&&(a==null||a(s.sourceEvent,_c(s.transform)))}}function pR({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:a,onPaneContextMenu:s}){return u=>{var l;if(!((l=u.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&vM(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&s(u.sourceEvent),e.usedRightMouseButton=!1,i(!1),a)){const d=_c(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a==null||a(u.sourceEvent,d)},n?150:0)}}}function fR({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:a,zoomOnDoubleClick:s,userSelectionActive:u,noWheelClassName:l,noPanClassName:d,lib:p,connectionInProgress:m}){return _=>{var w;const h=e||t,g=n&&_.ctrlKey,x=_.type==="wheel";if(_.button===1&&_.type==="mousedown"&&(ya(_,`${p}-flow__node`)||ya(_,`${p}-flow__edge`)))return!0;if(!i&&!h&&!a&&!s&&!n||u||m&&!x||ya(_,l)&&x||ya(_,d)&&(!x||a&&x&&!e)||!n&&_.ctrlKey&&x)return!1;if(!n&&_.type==="touchstart"&&((w=_.touches)==null?void 0:w.length)>1)return _.preventDefault(),!1;if(!h&&!a&&!g&&x||!i&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(i)&&!i.includes(_.button)&&_.type==="mousedown")return!1;const q=Array.isArray(i)&&i.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||x)&&q}}function _R({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),_=Kk().scaleExtent([t,n]).translateExtent(i),h=Wr(e).call(_);k({x:a.x,y:a.y,zoom:Ca(a.zoom,t,n)},[[0,0],[m.width,m.height]],i);const g=h.on("wheel.zoom"),x=h.on("dblclick.zoom");_.wheelDelta(xM);function q(O,F){return h?new Promise(X=>{_==null||_.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).transform(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>X(!0)),O)}):Promise.resolve(!1)}function w({noWheelClassName:O,noPanClassName:F,onPaneContextMenu:X,userSelectionActive:V,panOnScroll:Z,panOnDrag:W,panOnScrollMode:te,panOnScrollSpeed:U,preventScrolling:K,zoomOnPinch:oe,zoomOnScroll:z,zoomOnDoubleClick:Q,zoomActivationKeyPressed:_e,lib:H,onTransformChange:J,connectionInProgress:ne,paneClickDistance:ue,selectionOnDrag:ae}){V&&!p.isZoomingOrPanning&&b();const he=Z&&!_e&&!V;_.clickDistance(ae?1/0:!Tn(ue)||ue<0?0:ue);const Ee=he?uR({zoomPanValues:p,noWheelClassName:O,d3Selection:h,d3Zoom:_,panOnScrollMode:te,panOnScrollSpeed:U,zoomOnPinch:oe,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):lR({noWheelClassName:O,preventScrolling:K,d3ZoomHandler:g});if(h.on("wheel.zoom",Ee,{passive:!1}),!V){const Ie=cR({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:u});_.on("start",Ie);const Te=dR({zoomPanValues:p,panOnDrag:W,onPaneContextMenu:!!X,onPanZoom:s,onTransformChange:J});_.on("zoom",Te);const Pe=pR({zoomPanValues:p,panOnDrag:W,panOnScroll:Z,onPaneContextMenu:X,onPanZoomEnd:l,onDraggingChange:d});_.on("end",Pe)}const Ne=fR({zoomActivationKeyPressed:_e,panOnDrag:W,zoomOnScroll:z,panOnScroll:Z,zoomOnDoubleClick:Q,zoomOnPinch:oe,userSelectionActive:V,noPanClassName:F,noWheelClassName:O,lib:H,connectionInProgress:ne});_.filter(Ne),Q?h.on("dblclick.zoom",x):h.on("dblclick.zoom",null)}function b(){_.on("zoom",null)}async function k(O,F,X){const V=Sp(O),Z=_==null?void 0:_.constrain()(V,F,X);return Z&&await q(Z),new Promise(W=>W(Z))}async function S(O,F){const X=Sp(O);return await q(X,F),new Promise(V=>V(X))}function M(O){if(h){const F=Sp(O),X=h.property("__zoom");(X.k!==O.zoom||X.x!==O.x||X.y!==O.y)&&(_==null||_.transform(h,F,null,{sync:!0}))}}function I(){const O=h?Gk(h.node()):{x:0,y:0,k:1};return{x:O.x,y:O.y,zoom:O.k}}function E(O,F){return h?new Promise(X=>{_==null||_.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).scaleTo(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>X(!0)),O)}):Promise.resolve(!1)}function T(O,F){return h?new Promise(X=>{_==null||_.interpolate((F==null?void 0:F.interpolate)==="linear"?Es:Nl).scaleBy(Cp(h,F==null?void 0:F.duration,F==null?void 0:F.ease,()=>X(!0)),O)}):Promise.resolve(!1)}function P(O){_==null||_.scaleExtent(O)}function j(O){_==null||_.translateExtent(O)}function D(O){const F=!Tn(O)||O<0?0:O;_==null||_.clickDistance(F)}return{update:w,destroy:b,setViewport:S,setViewportConstrained:k,getViewport:I,scaleTo:E,scaleBy:T,setScaleExtent:P,setTranslateExtent:j,syncViewport:M,setClickDistance:D}}var Ea;(function(e){e.Line="line",e.Handle="handle"})(Ea||(Ea={}));function mR({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:a,affectsY:s}){const u=e-t,l=n-i,d=[u>0?1:u<0?-1:0,l>0?1:l<0?-1:0];return u&&a&&(d[0]=d[0]*-1),l&&s&&(d[1]=d[1]*-1),d}function b1(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:a}}function $i(e,t){return Math.max(0,t-e)}function Hi(e,t){return Math.max(0,e-t)}function vl(e,t,n){return Math.max(0,t-e,e-n)}function q1(e,t){return e?!t:t}function hR(e,t,n,i,a,s,u,l){let{affectsX:d,affectsY:p}=t;const{isHorizontal:m,isVertical:_}=t,h=m&&_,{xSnapped:g,ySnapped:x}=n,{minWidth:q,maxWidth:w,minHeight:b,maxHeight:k}=i,{x:S,y:M,width:I,height:E,aspectRatio:T}=e;let P=Math.floor(m?g-e.pointerX:0),j=Math.floor(_?x-e.pointerY:0);const D=I+(d?-P:P),O=E+(p?-j:j),F=-s[0]*I,X=-s[1]*E;let V=vl(D,q,w),Z=vl(O,b,k);if(u){let U=0,K=0;d&&P<0?U=$i(S+P+F,u[0][0]):!d&&P>0&&(U=Hi(S+D+F,u[1][0])),p&&j<0?K=$i(M+j+X,u[0][1]):!p&&j>0&&(K=Hi(M+O+X,u[1][1])),V=Math.max(V,U),Z=Math.max(Z,K)}if(l){let U=0,K=0;d&&P>0?U=Hi(S+P,l[0][0]):!d&&P<0&&(U=$i(S+D,l[1][0])),p&&j>0?K=Hi(M+j,l[0][1]):!p&&j<0&&(K=$i(M+O,l[1][1])),V=Math.max(V,U),Z=Math.max(Z,K)}if(a){if(m){const U=vl(D/T,b,k)*T;if(V=Math.max(V,U),u){let K=0;!d&&!p||d&&!p&&h?K=Hi(M+X+D/T,u[1][1])*T:K=$i(M+X+(d?P:-P)/T,u[0][1])*T,V=Math.max(V,K)}if(l){let K=0;!d&&!p||d&&!p&&h?K=$i(M+D/T,l[1][1])*T:K=Hi(M+(d?P:-P)/T,l[0][1])*T,V=Math.max(V,K)}}if(_){const U=vl(O*T,q,w)/T;if(Z=Math.max(Z,U),u){let K=0;!d&&!p||p&&!d&&h?K=Hi(S+O*T+F,u[1][0])/T:K=$i(S+(p?j:-j)*T+F,u[0][0])/T,Z=Math.max(Z,K)}if(l){let K=0;!d&&!p||p&&!d&&h?K=$i(S+O*T,l[1][0])/T:K=Hi(S+(p?j:-j)*T,l[0][0])/T,Z=Math.max(Z,K)}}}j=j+(j<0?Z:-Z),P=P+(P<0?V:-V),a&&(h?D>O*T?j=(q1(d,p)?-P:P)/T:P=(q1(d,p)?-j:j)*T:m?(j=P/T,p=d):(P=j*T,d=p));const W=d?S+P:S,te=p?M+j:M;return{width:I+(d?-P:P),height:E+(p?-j:j),x:s[0]*P*(d?-1:1)+W,y:s[1]*j*(p?-1:1)+te}}const wM={width:0,height:0,x:0,y:0},yR={...wM,pointerX:0,pointerY:0,aspectRatio:1};function gR(e){return[[0,0],[e.measured.width,e.measured.height]]}function vR(e,t,n){const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=e.measured.width??0,u=e.measured.height??0,l=n[0]*s,d=n[1]*u;return[[i-l,a-d],[i+s-l,a+u-d]]}function xR({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:a}){const s=Wr(e);let u={controlDirection:b1("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:p,boundaries:m,keepAspectRatio:_,resizeDirection:h,onResizeStart:g,onResize:x,onResizeEnd:q,shouldResize:w}){let b={...wM},k={...yR};u={boundaries:m,resizeDirection:h,keepAspectRatio:_,controlDirection:b1(p)};let S,M=null,I=[],E,T,P,j=!1;const D=jk().on("start",O=>{const{nodeLookup:F,transform:X,snapGrid:V,snapToGrid:Z,nodeOrigin:W,paneDomNode:te}=n();if(S=F.get(t),!S)return;M=(te==null?void 0:te.getBoundingClientRect())??null;const{xSnapped:U,ySnapped:K}=Is(O.sourceEvent,{transform:X,snapGrid:V,snapToGrid:Z,containerBounds:M});b={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},k={...b,pointerX:U,pointerY:K,aspectRatio:b.width/b.height},E=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(E=F.get(S.parentId),T=E&&S.extent==="parent"?gR(E):void 0),I=[],P=void 0;for(const[oe,z]of F)if(z.parentId===t&&(I.push({id:oe,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const Q=vR(z,S,z.origin??W);P?P=[[Math.min(Q[0][0],P[0][0]),Math.min(Q[0][1],P[0][1])],[Math.max(Q[1][0],P[1][0]),Math.max(Q[1][1],P[1][1])]]:P=Q}g==null||g(O,{...b})}).on("drag",O=>{const{transform:F,snapGrid:X,snapToGrid:V,nodeOrigin:Z}=n(),W=Is(O.sourceEvent,{transform:F,snapGrid:X,snapToGrid:V,containerBounds:M}),te=[];if(!S)return;const{x:U,y:K,width:oe,height:z}=b,Q={},_e=S.origin??Z,{width:H,height:J,x:ne,y:ue}=hR(k,u.controlDirection,W,u.boundaries,u.keepAspectRatio,_e,T,P),ae=H!==oe,he=J!==z,Ee=ne!==U&&ae,Ne=ue!==K&&he;if(!Ee&&!Ne&&!ae&&!he)return;if((Ee||Ne||_e[0]===1||_e[1]===1)&&(Q.x=Ee?ne:b.x,Q.y=Ne?ue:b.y,b.x=Q.x,b.y=Q.y,I.length>0)){const Ve=ne-U,He=ue-K;for(const De of I)De.position={x:De.position.x-Ve+_e[0]*(H-oe),y:De.position.y-He+_e[1]*(J-z)},te.push(De)}if((ae||he)&&(Q.width=ae&&(!u.resizeDirection||u.resizeDirection==="horizontal")?H:b.width,Q.height=he&&(!u.resizeDirection||u.resizeDirection==="vertical")?J:b.height,b.width=Q.width,b.height=Q.height),E&&S.expandParent){const Ve=_e[0]*(Q.width??0);Q.x&&Q.x<Ve&&(b.x=Ve,k.x=k.x-(Q.x-Ve));const He=_e[1]*(Q.height??0);Q.y&&Q.y<He&&(b.y=He,k.y=k.y-(Q.y-He))}const Ie=mR({width:b.width,prevWidth:oe,height:b.height,prevHeight:z,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),Te={...b,direction:Ie};(w==null?void 0:w(O,Te))!==!1&&(j=!0,x==null||x(O,Te),i(Q,te))}).on("end",O=>{j&&(q==null||q(O,{...b}),a==null||a({...b}),j=!1)});s.call(D)}function d(){s.on(".drag",null)}return{update:l,destroy:d}}var kp={exports:{}},Mp={},Ep={exports:{}},Ip={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function wR(){if(S1)return Ip;S1=1;var e=Ys();function t(_,h){return _===h&&(_!==0||1/_===1/h)||_!==_&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,s=e.useLayoutEffect,u=e.useDebugValue;function l(_,h){var g=h(),x=i({inst:{value:g,getSnapshot:h}}),q=x[0].inst,w=x[1];return s(function(){q.value=g,q.getSnapshot=h,d(q)&&w({inst:q})},[_,g,h]),a(function(){return d(q)&&w({inst:q}),_(function(){d(q)&&w({inst:q})})},[_]),u(g),g}function d(_){var h=_.getSnapshot;_=_.value;try{var g=h();return!n(_,g)}catch{return!0}}function p(_,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:l;return Ip.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Ip}var C1;function bR(){return C1||(C1=1,Ep.exports=wR()),Ep.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function qR(){if(k1)return Mp;k1=1;var e=Ys(),t=bR();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,s=e.useRef,u=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Mp.useSyncExternalStoreWithSelector=function(p,m,_,h,g){var x=s(null);if(x.current===null){var q={hasValue:!1,value:null};x.current=q}else q=x.current;x=l(function(){function b(E){if(!k){if(k=!0,S=E,E=h(E),g!==void 0&&q.hasValue){var T=q.value;if(g(T,E))return M=T}return M=E}if(T=M,i(S,E))return T;var P=h(E);return g!==void 0&&g(T,P)?(S=E,T):(S=E,M=P)}var k=!1,S,M,I=_===void 0?null:_;return[function(){return b(m())},I===null?void 0:function(){return b(I())}]},[m,_,h,g]);var w=a(p,x[0],x[1]);return u(function(){q.hasValue=!0,q.value=w},[w]),d(w),w},Mp}var M1;function SR(){return M1||(M1=1,kp.exports=qR()),kp.exports}var CR=SR();const kR=Na(CR),MR={},E1=e=>{let t;const n=new Set,i=(m,_)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const g=t;t=_??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,g))}},a=()=>t,d={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(MR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,d);return d},ER=e=>e?E1(e):E1,{useDebugValue:IR}=yk,{useSyncExternalStoreWithSelector:TR}=kR,NR=e=>e;function bM(e,t=NR,n){const i=TR(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return IR(i),i}const I1=(e,t)=>{const n=ER(e),i=(a,s=t)=>bM(n,a,s);return Object.assign(i,n),i},PR=(e,t)=>e?I1(e,t):I1;function qt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var jR=gk();const RR=Na(jR),mc=A.createContext(null),VR=mc.Provider,qM=Gn.error001();function Je(e,t){const n=A.useContext(mc);if(n===null)throw new Error(qM);return bM(n,e,t)}function St(){const e=A.useContext(mc);if(e===null)throw new Error(qM);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const T1={display:"none"},OR={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},SM="react-flow__node-desc",CM="react-flow__edge-desc",FR="react-flow__aria-live",AR=e=>e.ariaLiveMessage,LR=e=>e.ariaLabelConfig;function DR({rfId:e}){const t=Je(AR);return f.jsx("div",{id:`${FR}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:OR,children:t})}function BR({rfId:e,disableKeyboardA11y:t}){const n=Je(LR);return f.jsxs(f.Fragment,{children:[f.jsx("div",{id:`${SM}-${e}`,style:T1,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),f.jsx("div",{id:`${CM}-${e}`,style:T1,children:n["edge.a11yDescription.default"]}),!t&&f.jsx(DR,{rfId:e})]})}const Ia=A.forwardRef(({position:e="top-left",children:t,className:n,style:i,...a},s)=>{const u=`${e}`.split("-");return f.jsx("div",{className:Ot(["react-flow__panel",n,...u]),style:i,ref:s,...a,children:t})});Ia.displayName="Panel";function zR({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:f.jsx(Ia,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const $R=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},xl=e=>e.id;function HR(e,t){return qt(e.selectedNodes.map(xl),t.selectedNodes.map(xl))&&qt(e.selectedEdges.map(xl),t.selectedEdges.map(xl))}function WR({onSelectionChange:e}){const t=St(),{selectedNodes:n,selectedEdges:i}=Je($R,HR);return A.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChangeHandlers.forEach(s=>s(a))},[n,i,e]),null}const UR=e=>!!e.onSelectionChangeHandlers;function GR({onSelectionChange:e}){const t=Je(UR);return e||t?f.jsx(WR,{onSelectionChange:e}):null}const kM=[0,0],KR={x:0,y:0,zoom:1},YR=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],N1=[...YR,"rfId"],QR=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),P1={translateExtent:Ls,nodeOrigin:kM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function XR(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:a,setTranslateExtent:s,setNodeExtent:u,reset:l,setDefaultNodesAndEdges:d}=Je(QR,qt),p=St();A.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=P1,l()}),[]);const m=A.useRef(P1);return A.useEffect(()=>{for(const _ of N1){const h=e[_],g=m.current[_];h!==g&&(typeof e[_]>"u"||(_==="nodes"?t(h):_==="edges"?n(h):_==="minZoom"?i(h):_==="maxZoom"?a(h):_==="translateExtent"?s(h):_==="nodeExtent"?u(h):_==="ariaLabelConfig"?p.setState({ariaLabelConfig:jj(h)}):_==="fitView"?p.setState({fitViewQueued:h}):_==="fitViewOptions"?p.setState({fitViewOptions:h}):p.setState({[_]:h})))}m.current=e},N1.map(_=>e[_])),null}function j1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ZR(e){var i;const[t,n]=A.useState(e==="system"?null:e);return A.useEffect(()=>{if(e!=="system"){n(e);return}const a=j1(),s=()=>n(a!=null&&a.matches?"dark":"light");return s(),a==null||a.addEventListener("change",s),()=>{a==null||a.removeEventListener("change",s)}},[e]),t!==null?t:(i=j1())!=null&&i.matches?"dark":"light"}const R1=typeof document<"u"?document:null;function $s(e=null,t={target:R1,actInsideInputWithModifier:!0}){const[n,i]=A.useState(!1),a=A.useRef(!1),s=A.useRef(new Set([])),[u,l]=A.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(_=>typeof _=="string").map(_=>_.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=p.reduce((_,h)=>_.concat(...h),[]);return[p,m]}return[[],[]]},[e]);return A.useEffect(()=>{const d=(t==null?void 0:t.target)??R1,p=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const m=g=>{var w,b;if(a.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!a.current||a.current&&!p)&&sM(g))return!1;const q=O1(g.code,l);if(s.current.add(g[q]),V1(u,s.current,!1)){const k=((b=(w=g.composedPath)==null?void 0:w.call(g))==null?void 0:b[0])||g.target,S=(k==null?void 0:k.nodeName)==="BUTTON"||(k==null?void 0:k.nodeName)==="A";t.preventDefault!==!1&&(a.current||!S)&&g.preventDefault(),i(!0)}},_=g=>{const x=O1(g.code,l);V1(u,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(g[x]),g.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),i(!1)};return d==null||d.addEventListener("keydown",m),d==null||d.addEventListener("keyup",_),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{d==null||d.removeEventListener("keydown",m),d==null||d.removeEventListener("keyup",_),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),n}function V1(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function O1(e,t){return t.includes(e)?"code":"key"}const JR=()=>{const e=St();return A.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,a,s],panZoom:u}=e.getState();return u?(await u.setViewport({x:t.x??i,y:t.y??a,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:a,minZoom:s,maxZoom:u,panZoom:l}=e.getState(),d=J0(t,i,a,s,u,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(d,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:d}=u.getBoundingClientRect(),p={x:t.x-l,y:t.y-d},m=n.snapGrid??a,_=n.snapToGrid??s;return tu(p,i,_,m)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),u=Ul(t,n);return{x:u.x+a,y:u.y+s}}}),[])};function MM(e,t){const n=[],i=new Map,a=[];for(const s of e)if(s.type==="add"){a.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const u=i.get(s.id);u?u.push(s):i.set(s.id,[s])}for(const s of t){const u=i.get(s.id);if(!u){n.push(s);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){n.push({...u[0].item});continue}const l={...s};for(const d of u)e4(d,l);n.push(l)}return a.length&&a.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function e4(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function EM(e,t){return MM(e,t)}function IM(e,t){return MM(e,t)}function ko(e,t){return{id:e,type:"select",selected:t}}function ga(e,t=new Set,n=!1){const i=[];for(const[a,s]of e){const u=t.has(a);!(s.selected===void 0&&!u)&&s.selected!==u&&(n&&(s.selected=u),i.push(ko(s.id,u)))}return i}function F1({items:e=[],lookup:t}){var a;const n=[],i=new Map(e.map(s=>[s.id,s]));for(const[s,u]of e.entries()){const l=t.get(u.id),d=((a=l==null?void 0:l.internals)==null?void 0:a.userNode)??l;d!==void 0&&d!==u&&n.push({id:u.id,item:u,type:"replace"}),d===void 0&&n.push({item:u,type:"add",index:s})}for(const[s]of t)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function A1(e){return{id:e.id,type:"remove"}}const L1=e=>qj(e),t4=e=>Jk(e);function TM(e){return A.forwardRef(e)}const r4=typeof window<"u"?A.useLayoutEffect:A.useEffect;function D1(e){const[t,n]=A.useState(BigInt(0)),[i]=A.useState(()=>n4(()=>n(a=>a+BigInt(1))));return r4(()=>{const a=i.get();a.length&&(e(a),i.reset())},[t]),i}function n4(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const NM=A.createContext(null);function i4({children:e}){const t=St(),n=A.useCallback(l=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:m,onNodesChange:_,nodeLookup:h,fitViewQueued:g,onNodesChangeMiddlewareMap:x}=t.getState();let q=d;for(const b of l)q=typeof b=="function"?b(q):b;let w=F1({items:q,lookup:h});for(const b of x.values())w=b(w);m&&p(q),w.length>0?_==null||_(w):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:k,setNodes:S}=t.getState();b&&S(k)})},[]),i=D1(n),a=A.useCallback(l=>{const{edges:d=[],setEdges:p,hasDefaultEdges:m,onEdgesChange:_,edgeLookup:h}=t.getState();let g=d;for(const x of l)g=typeof x=="function"?x(g):x;m?p(g):_&&_(F1({items:g,lookup:h}))},[]),s=D1(a),u=A.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return f.jsx(NM.Provider,{value:u,children:e})}function o4(){const e=A.useContext(NM);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const a4=e=>!!e.panZoom;function ug(){const e=JR(),t=St(),n=o4(),i=Je(a4),a=A.useMemo(()=>{const s=_=>t.getState().nodeLookup.get(_),u=_=>{n.nodeQueue.push(_)},l=_=>{n.edgeQueue.push(_)},d=_=>{var b,k;const{nodeLookup:h,nodeOrigin:g}=t.getState(),x=L1(_)?_:h.get(_.id),q=x.parentId?oM(x.position,x.measured,x.parentId,h,g):x.position,w={...x,position:q,width:((b=x.measured)==null?void 0:b.width)??x.width,height:((k=x.measured)==null?void 0:k.height)??x.height};return ka(w)},p=(_,h,g={replace:!1})=>{u(x=>x.map(q=>{if(q.id===_){const w=typeof h=="function"?h(q):h;return g.replace&&L1(w)?w:{...q,...w}}return q}))},m=(_,h,g={replace:!1})=>{l(x=>x.map(q=>{if(q.id===_){const w=typeof h=="function"?h(q):h;return g.replace&&t4(w)?w:{...q,...w}}return q}))};return{getNodes:()=>t.getState().nodes.map(_=>({..._})),getNode:_=>{var h;return(h=s(_))==null?void 0:h.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:_=[]}=t.getState();return _.map(h=>({...h}))},getEdge:_=>t.getState().edgeLookup.get(_),setNodes:u,setEdges:l,addNodes:_=>{const h=Array.isArray(_)?_:[_];n.nodeQueue.push(g=>[...g,...h])},addEdges:_=>{const h=Array.isArray(_)?_:[_];n.edgeQueue.push(g=>[...g,...h])},toObject:()=>{const{nodes:_=[],edges:h=[],transform:g}=t.getState(),[x,q,w]=g;return{nodes:_.map(b=>({...b})),edges:h.map(b=>({...b})),viewport:{x,y:q,zoom:w}}},deleteElements:async({nodes:_=[],edges:h=[]})=>{const{nodes:g,edges:x,onNodesDelete:q,onEdgesDelete:w,triggerNodeChanges:b,triggerEdgeChanges:k,onDelete:S,onBeforeDelete:M}=t.getState(),{nodes:I,edges:E}=await Ej({nodesToRemove:_,edgesToRemove:h,nodes:g,edges:x,onBeforeDelete:M}),T=E.length>0,P=I.length>0;if(T){const j=E.map(A1);w==null||w(E),k(j)}if(P){const j=I.map(A1);q==null||q(I),b(j)}return(P||T)&&(S==null||S({nodes:I,edges:E})),{deletedNodes:I,deletedEdges:E}},getIntersectingNodes:(_,h=!0,g)=>{const x=d1(_),q=x?_:d(_),w=g!==void 0;return q?(g||t.getState().nodes).filter(b=>{const k=t.getState().nodeLookup.get(b.id);if(k&&!x&&(b.id===_.id||!k.internals.positionAbsolute))return!1;const S=ka(w?b:k),M=Bs(S,q);return h&&M>0||M>=S.width*S.height||M>=q.width*q.height}):[]},isNodeIntersecting:(_,h,g=!0)=>{const q=d1(_)?_:d(_);if(!q)return!1;const w=Bs(q,h);return g&&w>0||w>=h.width*h.height||w>=q.width*q.height},updateNode:p,updateNodeData:(_,h,g={replace:!1})=>{p(_,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},updateEdge:m,updateEdgeData:(_,h,g={replace:!1})=>{m(_,x=>{const q=typeof h=="function"?h(x):h;return g.replace?{...x,data:q}:{...x,data:{...x.data,...q}}},g)},getNodesBounds:_=>{const{nodeLookup:h,nodeOrigin:g}=t.getState();return Sj(_,{nodeLookup:h,nodeOrigin:g})},getHandleConnections:({type:_,id:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}-${_}${h?`-${h}`:""}`))==null?void 0:x.values())??[])},getNodeConnections:({type:_,handleId:h,nodeId:g})=>{var x;return Array.from(((x=t.getState().connectionLookup.get(`${g}${_?h?`-${_}-${h}`:`-${_}`:""}`))==null?void 0:x.values())??[])},fitView:async _=>{const h=t.getState().fitViewResolver??Pj();return t.setState({fitViewQueued:!0,fitViewOptions:_,fitViewResolver:h}),n.nodeQueue.push(g=>[...g]),h.promise}}},[]);return A.useMemo(()=>({...a,...e,viewportInitialized:i}),[i])}const B1=e=>e.selected,s4=typeof window<"u"?window:void 0;function u4({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=St(),{deleteElements:i}=ug(),a=$s(e,{actInsideInputWithModifier:!1}),s=$s(t,{target:s4});A.useEffect(()=>{if(a){const{edges:u,nodes:l}=n.getState();i({nodes:l.filter(B1),edges:u.filter(B1)}),n.setState({nodesSelectionActive:!1})}},[a]),A.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function l4(e){const t=St();A.useEffect(()=>{const n=()=>{var a,s,u,l;if(!e.current||!(((s=(a=e.current).checkVisibility)==null?void 0:s.call(a))??!0))return!1;const i=eg(e.current);(i.height===0||i.width===0)&&((l=(u=t.getState()).onError)==null||l.call(u,"004",Gn.error004())),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const hc={position:"absolute",width:"100%",height:"100%",top:0,left:0},c4=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function d4({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=To.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:d,translateExtent:p,minZoom:m,maxZoom:_,zoomActivationKeyCode:h,preventScrolling:g=!0,children:x,noWheelClassName:q,noPanClassName:w,onViewportChange:b,isControlledViewport:k,paneClickDistance:S,selectionOnDrag:M}){const I=St(),E=A.useRef(null),{userSelectionActive:T,lib:P,connectionInProgress:j}=Je(c4,qt),D=$s(h),O=A.useRef();l4(E);const F=A.useCallback(X=>{b==null||b({x:X[0],y:X[1],zoom:X[2]}),k||I.setState({transform:X})},[b,k]);return A.useEffect(()=>{if(E.current){O.current=_R({domNode:E.current,minZoom:m,maxZoom:_,translateExtent:p,viewport:d,onDraggingChange:W=>I.setState({paneDragging:W}),onPanZoomStart:(W,te)=>{const{onViewportChangeStart:U,onMoveStart:K}=I.getState();K==null||K(W,te),U==null||U(te)},onPanZoom:(W,te)=>{const{onViewportChange:U,onMove:K}=I.getState();K==null||K(W,te),U==null||U(te)},onPanZoomEnd:(W,te)=>{const{onViewportChangeEnd:U,onMoveEnd:K}=I.getState();K==null||K(W,te),U==null||U(te)}});const{x:X,y:V,zoom:Z}=O.current.getViewport();return I.setState({panZoom:O.current,transform:[X,V,Z],domNode:E.current.closest(".react-flow")}),()=>{var W;(W=O.current)==null||W.destroy()}}},[]),A.useEffect(()=>{var X;(X=O.current)==null||X.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:w,userSelectionActive:T,noWheelClassName:q,lib:P,onTransformChange:F,connectionInProgress:j,selectionOnDrag:M,paneClickDistance:S})},[e,t,n,i,a,s,u,l,D,g,w,T,q,P,F,j,M,S]),f.jsx("div",{className:"react-flow__renderer",ref:E,style:hc,children:x})}const p4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function f4(){const{userSelectionActive:e,userSelectionRect:t}=Je(p4,qt);return e&&t?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Tp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},_4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function m4({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ds.Full,panOnDrag:i,paneClickDistance:a,selectionOnDrag:s,onSelectionStart:u,onSelectionEnd:l,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:_,onPaneMouseMove:h,onPaneMouseLeave:g,children:x}){const q=St(),{userSelectionActive:w,elementsSelectable:b,dragging:k,connectionInProgress:S}=Je(_4,qt),M=b&&(e||w),I=A.useRef(null),E=A.useRef(),T=A.useRef(new Set),P=A.useRef(new Set),j=A.useRef(!1),D=U=>{if(j.current||S){j.current=!1;return}d==null||d(U),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},O=U=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){U.preventDefault();return}p==null||p(U)},F=m?U=>m(U):void 0,X=U=>{j.current&&(U.stopPropagation(),j.current=!1)},V=U=>{var J,ne;const{domNode:K}=q.getState();if(E.current=K==null?void 0:K.getBoundingClientRect(),!E.current)return;const oe=U.target===I.current;if(!oe&&!!U.target.closest(".nokey")||!e||!(s&&oe||t)||U.button!==0||!U.isPrimary)return;(ne=(J=U.target)==null?void 0:J.setPointerCapture)==null||ne.call(J,U.pointerId),j.current=!1;const{x:_e,y:H}=Nn(U.nativeEvent,E.current);q.setState({userSelectionRect:{width:0,height:0,startX:_e,startY:H,x:_e,y:H}}),oe||(U.stopPropagation(),U.preventDefault())},Z=U=>{const{userSelectionRect:K,transform:oe,nodeLookup:z,edgeLookup:Q,connectionLookup:_e,triggerNodeChanges:H,triggerEdgeChanges:J,defaultEdgeOptions:ne,resetSelectedElements:ue}=q.getState();if(!E.current||!K)return;const{x:ae,y:he}=Nn(U.nativeEvent,E.current),{startX:Ee,startY:Ne}=K;if(!j.current){const He=t?0:a;if(Math.hypot(ae-Ee,he-Ne)<=He)return;ue(),u==null||u(U)}j.current=!0;const Ie={startX:Ee,startY:Ne,x:ae<Ee?ae:Ee,y:he<Ne?he:Ne,width:Math.abs(ae-Ee),height:Math.abs(he-Ne)},Te=T.current,Pe=P.current;T.current=new Set(Z0(z,Ie,oe,n===Ds.Partial,!0).map(He=>He.id)),P.current=new Set;const Ve=(ne==null?void 0:ne.selectable)??!0;for(const He of T.current){const De=_e.get(He);if(De)for(const{edgeId:nt}of De.values()){const et=Q.get(nt);et&&(et.selectable??Ve)&&P.current.add(nt)}}if(!p1(Te,T.current)){const He=ga(z,T.current,!0);H(He)}if(!p1(Pe,P.current)){const He=ga(Q,P.current);J(He)}q.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},W=U=>{var K,oe;U.button===0&&((oe=(K=U.target)==null?void 0:K.releasePointerCapture)==null||oe.call(K,U.pointerId),!w&&U.target===I.current&&q.getState().userSelectionRect&&(D==null||D(U)),q.setState({userSelectionActive:!1,userSelectionRect:null}),j.current&&(l==null||l(U),q.setState({nodesSelectionActive:T.current.size>0})))},te=i===!0||Array.isArray(i)&&i.includes(0);return f.jsxs("div",{className:Ot(["react-flow__pane",{draggable:te,dragging:k,selection:e}]),onClick:M?void 0:Tp(D,I),onContextMenu:Tp(O,I),onWheel:Tp(F,I),onPointerEnter:M?void 0:_,onPointerMove:M?Z:h,onPointerUp:M?W:void 0,onPointerDownCapture:M?V:void 0,onClickCapture:M?X:void 0,onPointerLeave:g,ref:I,style:hc,children:[x,f.jsx(f4,{})]})}function q0({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:u,nodeLookup:l,onError:d}=t.getState(),p=l.get(e);if(!p){d==null||d("012",Gn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&u)&&(s({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function PM({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}){const l=St(),[d,p]=A.useState(!1),m=A.useRef();return A.useEffect(()=>{m.current=eR({getStoreItems:()=>l.getState(),onNodeMouseDown:_=>{q0({id:_,store:l,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),A.useEffect(()=>{var _,h;if(t)(_=m.current)==null||_.destroy();else if(e.current)return(h=m.current)==null||h.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var g;(g=m.current)==null||g.destroy()}},[n,i,t,s,e,a]),d}const h4=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function jM(){const e=St();return A.useCallback(n=>{const{nodeExtent:i,snapToGrid:a,snapGrid:s,nodesDraggable:u,onError:l,updateNodePositions:d,nodeLookup:p,nodeOrigin:m}=e.getState(),_=new Map,h=h4(u),g=a?s[0]:5,x=a?s[1]:5,q=n.direction.x*g*n.factor,w=n.direction.y*x*n.factor;for(const[,b]of p){if(!h(b))continue;let k={x:b.internals.positionAbsolute.x+q,y:b.internals.positionAbsolute.y+w};a&&(k=eu(k,s));const{position:S,positionAbsolute:M}=eM({nodeId:b.id,nextPosition:k,nodeLookup:p,nodeExtent:i,nodeOrigin:m,onError:l});b.position=S,b.internals.positionAbsolute=M,_.set(b.id,b)}d(_)},[])}const lg=A.createContext(null),y4=lg.Provider;lg.Consumer;const RM=()=>A.useContext(lg),g4=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),v4=(e,t,n)=>i=>{const{connectionClickStartHandle:a,connectionMode:s,connection:u}=i,{fromHandle:l,toHandle:d,isValid:p}=u,m=(d==null?void 0:d.nodeId)===e&&(d==null?void 0:d.id)===t&&(d==null?void 0:d.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:m,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,isPossibleEndHandle:s===Sa.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:m&&p}};function x4({type:e="source",position:t=$e.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:l,children:d,className:p,onMouseDown:m,onTouchStart:_,...h},g){var Z,W;const x=u||null,q=e==="target",w=St(),b=RM(),{connectOnClick:k,noPanClassName:S,rfId:M}=Je(g4,qt),{connectingFrom:I,connectingTo:E,clickConnecting:T,isPossibleEndHandle:P,connectionInProcess:j,clickConnectionInProcess:D,valid:O}=Je(v4(b,x,e),qt);b||(W=(Z=w.getState()).onError)==null||W.call(Z,"010",Gn.error010());const F=te=>{const{defaultEdgeOptions:U,onConnect:K,hasDefaultEdges:oe}=w.getState(),z={...U,...te};if(oe){const{edges:Q,setEdges:_e}=w.getState();_e(v0(z,Q))}K==null||K(z),l==null||l(z)},X=te=>{if(!b)return;const U=uM(te.nativeEvent);if(a&&(U&&te.button===0||!U)){const K=w.getState();b0.onPointerDown(te.nativeEvent,{handleDomNode:te.currentTarget,autoPanOnConnect:K.autoPanOnConnect,connectionMode:K.connectionMode,connectionRadius:K.connectionRadius,domNode:K.domNode,nodeLookup:K.nodeLookup,lib:K.lib,isTarget:q,handleId:x,nodeId:b,flowId:K.rfId,panBy:K.panBy,cancelConnection:K.cancelConnection,onConnectStart:K.onConnectStart,onConnectEnd:K.onConnectEnd,updateConnection:K.updateConnection,onConnect:F,isValidConnection:n||K.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:K.autoPanSpeed,dragThreshold:K.connectionDragThreshold})}U?m==null||m(te):_==null||_(te)},V=te=>{const{onClickConnectStart:U,onClickConnectEnd:K,connectionClickStartHandle:oe,connectionMode:z,isValidConnection:Q,lib:_e,rfId:H,nodeLookup:J,connection:ne}=w.getState();if(!b||!oe&&!a)return;if(!oe){U==null||U(te.nativeEvent,{nodeId:b,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:b,type:e,id:x}});return}const ue=aM(te.target),ae=n||Q,{connection:he,isValid:Ee}=b0.isValid(te.nativeEvent,{handle:{nodeId:b,id:x,type:e},connectionMode:z,fromNodeId:oe.nodeId,fromHandleId:oe.id||null,fromType:oe.type,isValidConnection:ae,flowId:H,doc:ue,lib:_e,nodeLookup:J});Ee&&he&&F(he);const Ne=structuredClone(ne);delete Ne.inProgress,Ne.toPosition=Ne.toHandle?Ne.toHandle.position:null,K==null||K(te,Ne),w.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${M}-${b}-${x}-${e}`,className:Ot(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,p,{source:!q,target:q,connectable:i,connectablestart:a,connectableend:s,clickconnecting:T,connectingfrom:I,connectingto:E,valid:O,connectionindicator:i&&(!j||P)&&(j||D?s:a)}]),onMouseDown:X,onTouchStart:X,onClick:k?V:void 0,ref:g,...h,children:d})}const Hs=A.memo(TM(x4));function w4({data:e,isConnectable:t,sourcePosition:n=$e.Bottom}){return f.jsxs(f.Fragment,{children:[e==null?void 0:e.label,f.jsx(Hs,{type:"source",position:n,isConnectable:t})]})}function b4({data:e,isConnectable:t,targetPosition:n=$e.Top,sourcePosition:i=$e.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,f.jsx(Hs,{type:"source",position:i,isConnectable:t})]})}function q4(){return null}function S4({data:e,isConnectable:t,targetPosition:n=$e.Top}){return f.jsxs(f.Fragment,{children:[f.jsx(Hs,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Kl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},z1={input:w4,default:b4,output:S4,group:q4};function C4(e){var t,n,i,a;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((i=e.style)==null?void 0:i.width),height:e.height??((a=e.style)==null?void 0:a.height)}}const k4=e=>{const{width:t,height:n,x:i,y:a}=Js(e.nodeLookup,{filter:s=>!!s.selected});return{width:Tn(t)?t:null,height:Tn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${a}px)`}};function M4({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=St(),{width:a,height:s,transformString:u,userSelectionActive:l}=Je(k4,qt),d=jM(),p=A.useRef(null);if(A.useEffect(()=>{var h;n||(h=p.current)==null||h.focus({preventScroll:!0})},[n]),PM({nodeRef:p}),l||!a||!s)return null;const m=e?h=>{const g=i.getState().nodes.filter(x=>x.selected);e(h,g)}:void 0,_=h=>{Object.prototype.hasOwnProperty.call(Kl,h.key)&&(h.preventDefault(),d({direction:Kl[h.key],factor:h.shiftKey?4:1}))};return f.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:f.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:_,style:{width:a,height:s}})})}const $1=typeof window<"u"?window:void 0,E4=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function VM({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:m,selectionMode:_,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:q,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:k,zoomOnPinch:S,panOnScroll:M,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:j,translateExtent:D,minZoom:O,maxZoom:F,preventScrolling:X,onSelectionContextMenu:V,noWheelClassName:Z,noPanClassName:W,disableKeyboardA11y:te,onViewportChange:U,isControlledViewport:K}){const{nodesSelectionActive:oe,userSelectionActive:z}=Je(E4,qt),Q=$s(p,{target:$1}),_e=$s(q,{target:$1}),H=_e||P,J=_e||M,ne=m&&H!==!0,ue=Q||z||ne;return u4({deleteKeyCode:d,multiSelectionKeyCode:x}),f.jsx(d4,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:k,zoomOnPinch:S,panOnScroll:J,panOnScrollSpeed:I,panOnScrollMode:E,zoomOnDoubleClick:T,panOnDrag:!Q&&H,defaultViewport:j,translateExtent:D,minZoom:O,maxZoom:F,zoomActivationKeyCode:w,preventScrolling:X,noWheelClassName:Z,noPanClassName:W,onViewportChange:U,isControlledViewport:K,paneClickDistance:l,selectionOnDrag:ne,children:f.jsxs(m4,{onSelectionStart:h,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:H,isSelecting:!!ue,selectionMode:_,selectionKeyPressed:Q,paneClickDistance:l,selectionOnDrag:ne,children:[e,oe&&f.jsx(M4,{onSelectionContextMenu:V,noPanClassName:W,disableKeyboardA11y:te})]})})}VM.displayName="FlowRenderer";const I4=A.memo(VM),T4=e=>t=>e?Z0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function N4(e){return Je(A.useCallback(T4(e),[e]),qt)}const P4=e=>e.updateNodeInternals;function j4(){const e=Je(P4),[t]=A.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(a=>{const s=a.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:a.target,force:!0})}),e(i)}));return A.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function R4({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const a=St(),s=A.useRef(null),u=A.useRef(null),l=A.useRef(e.sourcePosition),d=A.useRef(e.targetPosition),p=A.useRef(t),m=n&&!!e.internals.handleBounds;return A.useEffect(()=>{s.current&&!e.hidden&&(!m||u.current!==s.current)&&(u.current&&(i==null||i.unobserve(u.current)),i==null||i.observe(s.current),u.current=s.current)},[m,e.hidden]),A.useEffect(()=>()=>{u.current&&(i==null||i.unobserve(u.current),u.current=null)},[]),A.useEffect(()=>{if(s.current){const _=p.current!==t,h=l.current!==e.sourcePosition,g=d.current!==e.targetPosition;(_||h||g)&&(p.current=t,l.current=e.sourcePosition,d.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function V4({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:u,nodesDraggable:l,elementsSelectable:d,nodesConnectable:p,nodesFocusable:m,resizeObserver:_,noDragClassName:h,noPanClassName:g,disableKeyboardA11y:x,rfId:q,nodeTypes:w,nodeClickDistance:b,onError:k}){const{node:S,internals:M,isParent:I}=Je(ae=>{const he=ae.nodeLookup.get(e),Ee=ae.parentLookup.has(e);return{node:he,internals:he.internals,isParent:Ee}},qt);let E=S.type||"default",T=(w==null?void 0:w[E])||z1[E];T===void 0&&(k==null||k("003",Gn.error003(E)),E="default",T=(w==null?void 0:w.default)||z1.default);const P=!!(S.draggable||l&&typeof S.draggable>"u"),j=!!(S.selectable||d&&typeof S.selectable>"u"),D=!!(S.connectable||p&&typeof S.connectable>"u"),O=!!(S.focusable||m&&typeof S.focusable>"u"),F=St(),X=iM(S),V=R4({node:S,nodeType:E,hasDimensions:X,resizeObserver:_}),Z=PM({nodeRef:V,disabled:S.hidden||!P,noDragClassName:h,handleSelector:S.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:b}),W=jM();if(S.hidden)return null;const te=gi(S),U=C4(S),K=j||P||t||n||i||a,oe=n?ae=>n(ae,{...M.userNode}):void 0,z=i?ae=>i(ae,{...M.userNode}):void 0,Q=a?ae=>a(ae,{...M.userNode}):void 0,_e=s?ae=>s(ae,{...M.userNode}):void 0,H=u?ae=>u(ae,{...M.userNode}):void 0,J=ae=>{const{selectNodesOnDrag:he,nodeDragThreshold:Ee}=F.getState();j&&(!he||!P||Ee>0)&&q0({id:e,store:F,nodeRef:V}),t&&t(ae,{...M.userNode})},ne=ae=>{if(!(sM(ae.nativeEvent)||x)){if(Yk.includes(ae.key)&&j){const he=ae.key==="Escape";q0({id:e,store:F,unselect:he,nodeRef:V})}else if(P&&S.selected&&Object.prototype.hasOwnProperty.call(Kl,ae.key)){ae.preventDefault();const{ariaLabelConfig:he}=F.getState();F.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),W({direction:Kl[ae.key],factor:ae.shiftKey?4:1})}}},ue=()=>{var Pe;if(x||!((Pe=V.current)!=null&&Pe.matches(":focus-visible")))return;const{transform:ae,width:he,height:Ee,autoPanOnNodeFocus:Ne,setCenter:Ie}=F.getState();if(!Ne)return;Z0(new Map([[e,S]]),{x:0,y:0,width:he,height:Ee},ae,!0).length>0||Ie(S.position.x+te.width/2,S.position.y+te.height/2,{zoom:ae[2]})};return f.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${E}`,{[g]:P},S.className,{selected:S.selected,selectable:j,parent:I,draggable:P,dragging:Z}]),ref:V,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:X?"visible":"hidden",...S.style,...U},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:oe,onMouseMove:z,onMouseLeave:Q,onContextMenu:_e,onClick:J,onDoubleClick:H,onKeyDown:O?ne:void 0,tabIndex:O?0:void 0,onFocus:O?ue:void 0,role:S.ariaRole??(O?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${SM}-${q}`,"aria-label":S.ariaLabel,...S.domAttributes,children:f.jsx(y4,{value:e,children:f.jsx(T,{id:e,data:S.data,type:E,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:S.selected??!1,selectable:j,draggable:P,deletable:S.deletable??!0,isConnectable:D,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:Z,dragHandle:S.dragHandle,zIndex:M.z,parentId:S.parentId,...te})})})}var O4=A.memo(V4);const F4=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function OM(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=Je(F4,qt),u=N4(e.onlyRenderVisibleElements),l=j4();return f.jsx("div",{className:"react-flow__nodes",style:hc,children:u.map(d=>f.jsx(O4,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},d))})}OM.displayName="NodeRenderer";const A4=A.memo(OM);function L4(e){return Je(A.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const i=[];if(n.width&&n.height)for(const a of n.edges){const s=n.nodeLookup.get(a.source),u=n.nodeLookup.get(a.target);s&&u&&Oj({sourceNode:s,targetNode:u,width:n.width,height:n.height,transform:n.transform})&&i.push(a.id)}return i},[e]),qt)}const D4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return f.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},B4=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return f.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},H1={[Hl.Arrow]:D4,[Hl.ArrowClosed]:B4};function z4(e){const t=St();return A.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(H1,e)?H1[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Gn.error009(e)),null)},[e])}const $4=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=z4(t);return d?f.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:f.jsx(d,{color:n,strokeWidth:u})}):null},FM=({defaultColor:e,rfId:t})=>{const n=Je(s=>s.edges),i=Je(s=>s.defaultEdgeOptions),a=A.useMemo(()=>$j(n,{id:t,defaultColor:e,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[n,i,t,e]);return a.length?f.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:f.jsx("defs",{children:a.map(s=>f.jsx($4,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};FM.displayName="MarkerDefinitions";var H4=A.memo(FM);function AM({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:p,...m}){const[_,h]=A.useState({x:1,y:0,width:0,height:0}),g=Ot(["react-flow__edge-textwrapper",p]),x=A.useRef(null);return A.useEffect(()=>{if(x.current){const q=x.current.getBBox();h({x:q.x,y:q.y,width:q.width,height:q.height})}},[n]),n?f.jsxs("g",{transform:`translate(${e-_.width/2} ${t-_.height/2})`,className:g,visibility:_.width?"visible":"hidden",...m,children:[a&&f.jsx("rect",{width:_.width+2*u[0],x:-u[0],y:-u[1],height:_.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),f.jsx("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:x,style:i,children:n}),d]}):null}AM.displayName="EdgeText";const W4=A.memo(AM);function yc({path:e,labelX:t,labelY:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,interactionWidth:p=20,...m}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...m,d:e,fill:"none",className:Ot(["react-flow__edge-path",m.className])}),p?f.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,i&&Tn(t)&&Tn(n)?f.jsx(W4,{x:t,y:n,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d}):null]})}function W1({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===$e.Left||e===$e.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function LM({sourceX:e,sourceY:t,sourcePosition:n=$e.Bottom,targetX:i,targetY:a,targetPosition:s=$e.Top}){const[u,l]=W1({pos:n,x1:e,y1:t,x2:i,y2:a}),[d,p]=W1({pos:s,x1:i,y1:a,x2:e,y2:t}),[m,_,h,g]=lM({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:p});return[`M${e},${t} C${u},${l} ${d},${p} ${i},${a}`,m,_,h,g]}function DM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})=>{const[k,S,M]=LM({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l}),I=e.isInternal?void 0:t;return f.jsx(yc,{id:I,path:k,labelX:S,labelY:M,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:b})})}const U4=DM({isInternal:!1}),BM=DM({isInternal:!0});U4.displayName="SimpleBezierEdge";BM.displayName="SimpleBezierEdgeInternal";function zM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,sourcePosition:g=$e.Bottom,targetPosition:x=$e.Top,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:k})=>{const[S,M,I]=Gl({sourceX:n,sourceY:i,sourcePosition:g,targetX:a,targetY:s,targetPosition:x,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),E=e.isInternal?void 0:t;return f.jsx(yc,{id:E,path:S,labelX:M,labelY:I,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:q,markerStart:w,interactionWidth:k})})}const $M=zM({isInternal:!1}),HM=zM({isInternal:!0});$M.displayName="SmoothStepEdge";HM.displayName="SmoothStepEdgeInternal";function WM(e){return A.memo(({id:t,...n})=>{var a;const i=e.isInternal?void 0:t;return f.jsx($M,{...n,id:i,pathOptions:A.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(a=n.pathOptions)==null?void 0:a.offset])})})}const G4=WM({isInternal:!1}),UM=WM({isInternal:!0});G4.displayName="StepEdge";UM.displayName="StepEdgeInternal";function GM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:g,markerStart:x,interactionWidth:q})=>{const[w,b,k]=rg({sourceX:n,sourceY:i,targetX:a,targetY:s}),S=e.isInternal?void 0:t;return f.jsx(yc,{id:S,path:w,labelX:b,labelY:k,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:_,style:h,markerEnd:g,markerStart:x,interactionWidth:q})})}const K4=GM({isInternal:!1}),KM=GM({isInternal:!0});K4.displayName="StraightEdge";KM.displayName="StraightEdgeInternal";function YM(e){return A.memo(({id:t,sourceX:n,sourceY:i,targetX:a,targetY:s,sourcePosition:u=$e.Bottom,targetPosition:l=$e.Top,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,pathOptions:b,interactionWidth:k})=>{const[S,M,I]=tg({sourceX:n,sourceY:i,sourcePosition:u,targetX:a,targetY:s,targetPosition:l,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return f.jsx(yc,{id:E,path:S,labelX:M,labelY:I,label:d,labelStyle:p,labelShowBg:m,labelBgStyle:_,labelBgPadding:h,labelBgBorderRadius:g,style:x,markerEnd:q,markerStart:w,interactionWidth:k})})}const Y4=YM({isInternal:!1}),QM=YM({isInternal:!0});Y4.displayName="BezierEdge";QM.displayName="BezierEdgeInternal";const U1={default:QM,straight:KM,step:UM,smoothstep:HM,simplebezier:BM},G1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Q4=(e,t,n)=>n===$e.Left?e-t:n===$e.Right?e+t:e,X4=(e,t,n)=>n===$e.Top?e-t:n===$e.Bottom?e+t:e,K1="react-flow__edgeupdater";function Y1({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:s,onMouseOut:u,type:l}){return f.jsx("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:u,className:Ot([K1,`${K1}-${l}`]),cx:Q4(t,i,e),cy:X4(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function Z4({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:a,targetX:s,targetY:u,sourcePosition:l,targetPosition:d,onReconnect:p,onReconnectStart:m,onReconnectEnd:_,setReconnecting:h,setUpdateHover:g}){const x=St(),q=(M,I)=>{if(M.button!==0)return;const{autoPanOnConnect:E,domNode:T,isValidConnection:P,connectionMode:j,connectionRadius:D,lib:O,onConnectStart:F,onConnectEnd:X,cancelConnection:V,nodeLookup:Z,rfId:W,panBy:te,updateConnection:U}=x.getState(),K=I.type==="target",oe=(_e,H)=>{h(!1),_==null||_(_e,n,I.type,H)},z=_e=>p==null?void 0:p(n,_e),Q=(_e,H)=>{h(!0),m==null||m(M,n,I.type),F==null||F(_e,H)};b0.onPointerDown(M.nativeEvent,{autoPanOnConnect:E,connectionMode:j,connectionRadius:D,domNode:T,handleId:I.id,nodeId:I.nodeId,nodeLookup:Z,isTarget:K,edgeUpdaterType:I.type,lib:O,flowId:W,cancelConnection:V,panBy:te,isValidConnection:P,onConnect:z,onConnectStart:Q,onConnectEnd:X,onReconnectEnd:oe,updateConnection:U,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},w=M=>q(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=M=>q(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),k=()=>g(!0),S=()=>g(!1);return f.jsxs(f.Fragment,{children:[(e===!0||e==="source")&&f.jsx(Y1,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:w,onMouseEnter:k,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&f.jsx(Y1,{position:d,centerX:s,centerY:u,radius:t,onMouseDown:b,onMouseEnter:k,onMouseOut:S,type:"target"})]})}function J4({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,reconnectRadius:m,onReconnect:_,onReconnectStart:h,onReconnectEnd:g,rfId:x,edgeTypes:q,noPanClassName:w,onError:b,disableKeyboardA11y:k}){let S=Je(Ie=>Ie.edgeLookup.get(e));const M=Je(Ie=>Ie.defaultEdgeOptions);S=M?{...M,...S}:S;let I=S.type||"default",E=(q==null?void 0:q[I])||U1[I];E===void 0&&(b==null||b("011",Gn.error011(I)),I="default",E=(q==null?void 0:q.default)||U1.default);const T=!!(S.focusable||t&&typeof S.focusable>"u"),P=typeof _<"u"&&(S.reconnectable||n&&typeof S.reconnectable>"u"),j=!!(S.selectable||i&&typeof S.selectable>"u"),D=A.useRef(null),[O,F]=A.useState(!1),[X,V]=A.useState(!1),Z=St(),{zIndex:W,sourceX:te,sourceY:U,targetX:K,targetY:oe,sourcePosition:z,targetPosition:Q}=Je(A.useCallback(Ie=>{const Te=Ie.nodeLookup.get(S.source),Pe=Ie.nodeLookup.get(S.target);if(!Te||!Pe)return{zIndex:S.zIndex,...G1};const Ve=zj({id:e,sourceNode:Te,targetNode:Pe,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:Ie.connectionMode,onError:b});return{zIndex:Vj({selected:S.selected,zIndex:S.zIndex,sourceNode:Te,targetNode:Pe,elevateOnSelect:Ie.elevateEdgesOnSelect,zIndexMode:Ie.zIndexMode}),...Ve||G1}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),qt),_e=A.useMemo(()=>S.markerStart?`url('#${x0(S.markerStart,x)}')`:void 0,[S.markerStart,x]),H=A.useMemo(()=>S.markerEnd?`url('#${x0(S.markerEnd,x)}')`:void 0,[S.markerEnd,x]);if(S.hidden||te===null||U===null||K===null||oe===null)return null;const J=Ie=>{var He;const{addSelectedEdges:Te,unselectNodesAndEdges:Pe,multiSelectionActive:Ve}=Z.getState();j&&(Z.setState({nodesSelectionActive:!1}),S.selected&&Ve?(Pe({nodes:[],edges:[S]}),(He=D.current)==null||He.blur()):Te([e])),a&&a(Ie,S)},ne=s?Ie=>{s(Ie,{...S})}:void 0,ue=u?Ie=>{u(Ie,{...S})}:void 0,ae=l?Ie=>{l(Ie,{...S})}:void 0,he=d?Ie=>{d(Ie,{...S})}:void 0,Ee=p?Ie=>{p(Ie,{...S})}:void 0,Ne=Ie=>{var Te;if(!k&&Yk.includes(Ie.key)&&j){const{unselectNodesAndEdges:Pe,addSelectedEdges:Ve}=Z.getState();Ie.key==="Escape"?((Te=D.current)==null||Te.blur(),Pe({edges:[S]})):Ve([e])}};return f.jsx("svg",{style:{zIndex:W},children:f.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${I}`,S.className,w,{selected:S.selected,animated:S.animated,inactive:!j&&!a,updating:O,selectable:j}]),onClick:J,onDoubleClick:ne,onContextMenu:ue,onMouseEnter:ae,onMouseMove:he,onMouseLeave:Ee,onKeyDown:T?Ne:void 0,tabIndex:T?0:void 0,role:S.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":T?`${CM}-${x}`:void 0,ref:D,...S.domAttributes,children:[!X&&f.jsx(E,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:j,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:te,sourceY:U,targetX:K,targetY:oe,sourcePosition:z,targetPosition:Q,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:_e,markerEnd:H,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),P&&f.jsx(Z4,{edge:S,isReconnectable:P,reconnectRadius:m,onReconnect:_,onReconnectStart:h,onReconnectEnd:g,sourceX:te,sourceY:U,targetX:K,targetY:oe,sourcePosition:z,targetPosition:Q,setUpdateHover:F,setReconnecting:V})]})})}var e6=A.memo(J4);const t6=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function XM({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:m,reconnectRadius:_,onEdgeDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:q}){const{edgesFocusable:w,edgesReconnectable:b,elementsSelectable:k,onError:S}=Je(t6,qt),M=L4(t);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(H4,{defaultColor:e,rfId:n}),M.map(I=>f.jsx(e6,{id:I,edgesFocusable:w,edgesReconnectable:b,elementsSelectable:k,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,onClick:m,reconnectRadius:_,onDoubleClick:h,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:S,edgeTypes:i,disableKeyboardA11y:q},I))]})}XM.displayName="EdgeRenderer";const r6=A.memo(XM),n6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function i6({children:e}){const t=Je(n6);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function o6(e){const t=ug(),n=A.useRef(!1);A.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const a6=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function s6(e){const t=Je(a6),n=St();return A.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function u6(e){return e.connection.inProgress?{...e.connection,to:tu(e.connection.to,e.transform)}:{...e.connection}}function l6(e){return u6}function c6(e){const t=l6();return Je(t,qt)}const d6=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function p6({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:a,width:s,height:u,isValid:l,inProgress:d}=Je(d6,qt);return!(s&&a&&d)?null:f.jsx("svg",{style:e,width:s,height:u,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Ot(["react-flow__connection",Zk(l)]),children:f.jsx(ZM,{style:t,type:n,CustomComponent:i,isValid:l})})})}const ZM=({style:e,type:t=Ui.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:a,from:s,fromNode:u,fromHandle:l,fromPosition:d,to:p,toNode:m,toHandle:_,toPosition:h,pointer:g}=c6();if(!a)return;if(n)return f.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:u,fromHandle:l,fromX:s.x,fromY:s.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:h,connectionStatus:Zk(i),toNode:m,toHandle:_,pointer:g});let x="";const q={sourceX:s.x,sourceY:s.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:h};switch(t){case Ui.Bezier:[x]=tg(q);break;case Ui.SimpleBezier:[x]=LM(q);break;case Ui.Step:[x]=Gl({...q,borderRadius:0});break;case Ui.SmoothStep:[x]=Gl(q);break;default:[x]=rg(q)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};ZM.displayName="ConnectionLine";const f6={};function Q1(e=f6){A.useRef(e),St(),A.useEffect(()=>{},[e])}function _6(){St(),A.useRef(!1),A.useEffect(()=>{},[])}function JM({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:_,onSelectionStart:h,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:q,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:k,selectionOnDrag:S,selectionMode:M,multiSelectionKeyCode:I,panActivationKeyCode:E,zoomActivationKeyCode:T,deleteKeyCode:P,onlyRenderVisibleElements:j,elementsSelectable:D,defaultViewport:O,translateExtent:F,minZoom:X,maxZoom:V,preventScrolling:Z,defaultMarkerColor:W,zoomOnScroll:te,zoomOnPinch:U,panOnScroll:K,panOnScrollSpeed:oe,panOnScrollMode:z,zoomOnDoubleClick:Q,panOnDrag:_e,onPaneClick:H,onPaneMouseEnter:J,onPaneMouseMove:ne,onPaneMouseLeave:ue,onPaneScroll:ae,onPaneContextMenu:he,paneClickDistance:Ee,nodeClickDistance:Ne,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ve,reconnectRadius:He,onReconnect:De,onReconnectStart:nt,onReconnectEnd:et,noDragClassName:ft,noWheelClassName:ct,noPanClassName:dt,disableKeyboardA11y:lt,nodeExtent:Sr,rfId:Zt,viewport:$t,onViewportChange:Jt}){return Q1(e),Q1(t),_6(),o6(n),s6($t),f.jsx(I4,{onPaneClick:H,onPaneMouseEnter:J,onPaneMouseMove:ne,onPaneMouseLeave:ue,onPaneContextMenu:he,onPaneScroll:ae,paneClickDistance:Ee,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:S,selectionMode:M,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:I,panActivationKeyCode:E,zoomActivationKeyCode:T,elementsSelectable:D,zoomOnScroll:te,zoomOnPinch:U,zoomOnDoubleClick:Q,panOnScroll:K,panOnScrollSpeed:oe,panOnScrollMode:z,panOnDrag:_e,defaultViewport:O,translateExtent:F,minZoom:X,maxZoom:V,onSelectionContextMenu:_,preventScrolling:Z,noDragClassName:ft,noWheelClassName:ct,noPanClassName:dt,disableKeyboardA11y:lt,onViewportChange:Jt,isControlledViewport:!!$t,children:f.jsxs(i6,{children:[f.jsx(r6,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:De,onReconnectStart:nt,onReconnectEnd:et,onlyRenderVisibleElements:j,onEdgeContextMenu:Ie,onEdgeMouseEnter:Te,onEdgeMouseMove:Pe,onEdgeMouseLeave:Ve,reconnectRadius:He,defaultMarkerColor:W,noPanClassName:dt,disableKeyboardA11y:lt,rfId:Zt}),f.jsx(p6,{style:q,type:x,component:w,containerStyle:b}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(A4,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:m,nodeClickDistance:Ne,onlyRenderVisibleElements:j,noPanClassName:dt,noDragClassName:ft,disableKeyboardA11y:lt,nodeExtent:Sr,rfId:Zt}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}JM.displayName="GraphView";const m6=A.memo(JM),X1=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d=.5,maxZoom:p=2,nodeOrigin:m,nodeExtent:_,zIndexMode:h="basic"}={})=>{const g=new Map,x=new Map,q=new Map,w=new Map,b=i??t??[],k=n??e??[],S=m??[0,0],M=_??Ls;fM(q,w,b);const I=w0(k,g,x,{nodeOrigin:S,nodeExtent:M,zIndexMode:h});let E=[0,0,1];if(u&&a&&s){const T=Js(g,{filter:O=>!!((O.width||O.initialWidth)&&(O.height||O.initialHeight))}),{x:P,y:j,zoom:D}=J0(T,a,s,d,p,(l==null?void 0:l.padding)??.1);E=[P,j,D]}return{rfId:"1",width:a??0,height:s??0,transform:E,nodes:k,nodesInitialized:I,nodeLookup:g,parentLookup:x,edges:b,edgeLookup:w,connectionLookup:q,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:Ls,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Sa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Xk},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Ij,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Qk,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},h6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:_,zIndexMode:h})=>PR((g,x)=>{async function q(){const{nodeLookup:w,panZoom:b,fitViewOptions:k,fitViewResolver:S,width:M,height:I,minZoom:E,maxZoom:T}=x();b&&(await Mj({nodes:w,width:M,height:I,panZoom:b,minZoom:E,maxZoom:T},k),S==null||S.resolve(!0),g({fitViewResolver:null}))}return{...X1({nodes:e,edges:t,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:d,maxZoom:p,nodeOrigin:m,nodeExtent:_,defaultNodes:n,defaultEdges:i,zIndexMode:h}),setNodes:w=>{const{nodeLookup:b,parentLookup:k,nodeOrigin:S,elevateNodesOnSelect:M,fitViewQueued:I,zIndexMode:E}=x(),T=w0(w,b,k,{nodeOrigin:S,nodeExtent:_,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:E});I&&T?(q(),g({nodes:w,nodesInitialized:T,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:w,nodesInitialized:T})},setEdges:w=>{const{connectionLookup:b,edgeLookup:k}=x();fM(b,k,w),g({edges:w})},setDefaultNodesAndEdges:(w,b)=>{if(w){const{setNodes:k}=x();k(w),g({hasDefaultNodes:!0})}if(b){const{setEdges:k}=x();k(b),g({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:b,nodeLookup:k,parentLookup:S,domNode:M,nodeOrigin:I,nodeExtent:E,debug:T,fitViewQueued:P,zIndexMode:j}=x(),{changes:D,updatedInternals:O}=Qj(w,k,S,M,I,E,j);O&&(Uj(k,S,{nodeOrigin:I,nodeExtent:E,zIndexMode:j}),P?(q(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),(D==null?void 0:D.length)>0&&(T&&console.log("React Flow: trigger node changes",D),b==null||b(D)))},updateNodePositions:(w,b=!1)=>{const k=[];let S=[];const{nodeLookup:M,triggerNodeChanges:I,connection:E,updateConnection:T,onNodesChangeMiddlewareMap:P}=x();for(const[j,D]of w){const O=M.get(j),F=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(D!=null&&D.position)),X={id:j,type:"position",position:F?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:b};if(O&&E.inProgress&&E.fromNode.id===O.id){const V=Ro(O,E.fromHandle,$e.Left,!0);T({...E,from:V})}F&&O.parentId&&k.push({id:j,parentId:O.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),S.push(X)}if(k.length>0){const{parentLookup:j,nodeOrigin:D}=x(),O=sg(k,M,j,D);S.push(...O)}for(const j of P.values())S=j(S);I(S)},triggerNodeChanges:w=>{const{onNodesChange:b,setNodes:k,nodes:S,hasDefaultNodes:M,debug:I}=x();if(w!=null&&w.length){if(M){const E=EM(w,S);k(E)}I&&console.log("React Flow: trigger node changes",w),b==null||b(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:b,setEdges:k,edges:S,hasDefaultEdges:M,debug:I}=x();if(w!=null&&w.length){if(M){const E=IM(w,S);k(E)}I&&console.log("React Flow: trigger edge changes",w),b==null||b(w)}},addSelectedNodes:w=>{const{multiSelectionActive:b,edgeLookup:k,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const E=w.map(T=>ko(T,!0));M(E);return}M(ga(S,new Set([...w]),!0)),I(ga(k))},addSelectedEdges:w=>{const{multiSelectionActive:b,edgeLookup:k,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:I}=x();if(b){const E=w.map(T=>ko(T,!0));I(E);return}I(ga(k,new Set([...w]))),M(ga(S,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:b}={})=>{const{edges:k,nodes:S,nodeLookup:M,triggerNodeChanges:I,triggerEdgeChanges:E}=x(),T=w||S,P=b||k,j=T.map(O=>{const F=M.get(O.id);return F&&(F.selected=!1),ko(O.id,!1)}),D=P.map(O=>ko(O.id,!1));I(j),E(D)},setMinZoom:w=>{const{panZoom:b,maxZoom:k}=x();b==null||b.setScaleExtent([w,k]),g({minZoom:w})},setMaxZoom:w=>{const{panZoom:b,minZoom:k}=x();b==null||b.setScaleExtent([k,w]),g({maxZoom:w})},setTranslateExtent:w=>{var b;(b=x().panZoom)==null||b.setTranslateExtent(w),g({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:b,triggerNodeChanges:k,triggerEdgeChanges:S,elementsSelectable:M}=x();if(!M)return;const I=b.reduce((T,P)=>P.selected?[...T,ko(P.id,!1)]:T,[]),E=w.reduce((T,P)=>P.selected?[...T,ko(P.id,!1)]:T,[]);k(I),S(E)},setNodeExtent:w=>{const{nodes:b,nodeLookup:k,parentLookup:S,nodeOrigin:M,elevateNodesOnSelect:I,nodeExtent:E,zIndexMode:T}=x();w[0][0]===E[0][0]&&w[0][1]===E[0][1]&&w[1][0]===E[1][0]&&w[1][1]===E[1][1]||(w0(b,k,S,{nodeOrigin:M,nodeExtent:w,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:T}),g({nodeExtent:w}))},panBy:w=>{const{transform:b,width:k,height:S,panZoom:M,translateExtent:I}=x();return Xj({delta:w,panZoom:M,transform:b,translateExtent:I,width:k,height:S})},setCenter:async(w,b,k)=>{const{width:S,height:M,maxZoom:I,panZoom:E}=x();if(!E)return Promise.resolve(!1);const T=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:I;return await E.setViewport({x:S/2-w*T,y:M/2-b*T,zoom:T},{duration:k==null?void 0:k.duration,ease:k==null?void 0:k.ease,interpolate:k==null?void 0:k.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Xk}})},updateConnection:w=>{g({connection:w})},reset:()=>g({...X1()})}},Object.is);function y6({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:d,fitView:p,nodeOrigin:m,nodeExtent:_,zIndexMode:h,children:g}){const[x]=A.useState(()=>h6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:p,minZoom:u,maxZoom:l,fitViewOptions:d,nodeOrigin:m,nodeExtent:_,zIndexMode:h}));return f.jsx(VR,{value:x,children:f.jsx(i4,{children:g})})}function g6({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:d,minZoom:p,maxZoom:m,nodeOrigin:_,nodeExtent:h,zIndexMode:g}){return A.useContext(mc)?f.jsx(f.Fragment,{children:e}):f.jsx(y6,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:m,nodeOrigin:_,nodeExtent:h,zIndexMode:g,children:e})}const v6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function x6({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:u,onNodeClick:l,onEdgeClick:d,onInit:p,onMove:m,onMoveStart:_,onMoveEnd:h,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,onNodeMouseEnter:k,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:E,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:j,onNodesDelete:D,onEdgesDelete:O,onDelete:F,onSelectionChange:X,onSelectionDragStart:V,onSelectionDrag:Z,onSelectionDragStop:W,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onBeforeDelete:oe,connectionMode:z,connectionLineType:Q=Ui.Bezier,connectionLineStyle:_e,connectionLineComponent:H,connectionLineContainerStyle:J,deleteKeyCode:ne="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:ae=!1,selectionMode:he=Ds.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:Ne=zs()?"Meta":"Control",zoomActivationKeyCode:Ie=zs()?"Meta":"Control",snapToGrid:Te,snapGrid:Pe,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:He,nodesDraggable:De,autoPanOnNodeFocus:nt,nodesConnectable:et,nodesFocusable:ft,nodeOrigin:ct=kM,edgesFocusable:dt,edgesReconnectable:lt,elementsSelectable:Sr=!0,defaultViewport:Zt=KR,minZoom:$t=.5,maxZoom:Jt=2,translateExtent:at=Ls,preventScrolling:Rr=!0,nodeExtent:Tt,defaultMarkerColor:Kr="#b1b1b7",zoomOnScroll:pr=!0,zoomOnPinch:Ht=!0,panOnScroll:Qe=!1,panOnScrollSpeed:wi=.5,panOnScrollMode:Nt=To.Free,zoomOnDoubleClick:ln=!0,panOnDrag:me=!0,onPaneClick:st,onPaneMouseEnter:Vr,onPaneMouseMove:Or,onPaneMouseLeave:fr,onPaneScroll:Xn,onPaneContextMenu:Vn,paneClickDistance:Rt=1,nodeClickDistance:er=0,children:tr,onReconnect:_t,onReconnectStart:Do,onReconnectEnd:xt,onEdgeContextMenu:Xi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt=10,onNodesChange:rr,onEdgesChange:_r,noDragClassName:mr="nodrag",noWheelClassName:hr="nowheel",noPanClassName:Et="nopan",fitView:cn,fitViewOptions:yr,connectOnClick:Zi,attributionPosition:Ji,proOptions:ar,defaultEdgeOptions:bi,elevateNodesOnSelect:qi=!0,elevateEdgesOnSelect:eo=!1,disableKeyboardA11y:Zn=!1,autoPanOnConnect:mt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,connectionRadius:ei,isValidConnection:pn,onError:ht,style:Qr,id:On,nodeDragThreshold:Kt,connectionDragThreshold:Bo,viewport:gr,onViewportChange:ti,width:fn,height:Da,colorMode:to="light",debug:Si,onScroll:Cr,ariaLabelConfig:_n,zIndexMode:zo="basic",...Ba},nr){const Ci=On||"1",Fr=ZR(to),Xr=A.useCallback(ro=>{ro.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Cr==null||Cr(ro)},[Cr]);return f.jsx("div",{"data-testid":"rf__wrapper",...Ba,onScroll:Xr,style:{...Qr,...v6},ref:nr,className:Ot(["react-flow",a,Fr]),id:On,role:"application",children:f.jsxs(g6,{nodes:e,edges:t,width:fn,height:Da,fitView:cn,fitViewOptions:yr,minZoom:$t,maxZoom:Jt,nodeOrigin:ct,nodeExtent:Tt,zIndexMode:zo,children:[f.jsx(m6,{onInit:p,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:k,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:I,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:u,connectionLineType:Q,connectionLineStyle:_e,connectionLineComponent:H,connectionLineContainerStyle:J,selectionKeyCode:ue,selectionOnDrag:ae,selectionMode:he,deleteKeyCode:ne,multiSelectionKeyCode:Ne,panActivationKeyCode:Ee,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ve,defaultViewport:Zt,translateExtent:at,minZoom:$t,maxZoom:Jt,preventScrolling:Rr,zoomOnScroll:pr,zoomOnPinch:Ht,zoomOnDoubleClick:ln,panOnScroll:Qe,panOnScrollSpeed:wi,panOnScrollMode:Nt,panOnDrag:me,onPaneClick:st,onPaneMouseEnter:Vr,onPaneMouseMove:Or,onPaneMouseLeave:fr,onPaneScroll:Xn,onPaneContextMenu:Vn,paneClickDistance:Rt,nodeClickDistance:er,onSelectionContextMenu:te,onSelectionStart:U,onSelectionEnd:K,onReconnect:_t,onReconnectStart:Do,onReconnectEnd:xt,onEdgeContextMenu:Xi,onEdgeDoubleClick:Wt,onEdgeMouseEnter:Yr,onEdgeMouseMove:At,onEdgeMouseLeave:Ut,reconnectRadius:Gt,defaultMarkerColor:Kr,noDragClassName:mr,noWheelClassName:hr,noPanClassName:Et,rfId:Ci,disableKeyboardA11y:Zn,nodeExtent:Tt,viewport:gr,onViewportChange:ti}),f.jsx(XR,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:g,onConnectStart:x,onConnectEnd:q,onClickConnectStart:w,onClickConnectEnd:b,nodesDraggable:De,autoPanOnNodeFocus:nt,nodesConnectable:et,nodesFocusable:ft,edgesFocusable:dt,edgesReconnectable:lt,elementsSelectable:Sr,elevateNodesOnSelect:qi,elevateEdgesOnSelect:eo,minZoom:$t,maxZoom:Jt,nodeExtent:Tt,onNodesChange:rr,onEdgesChange:_r,snapToGrid:Te,snapGrid:Pe,connectionMode:z,translateExtent:at,connectOnClick:Zi,defaultEdgeOptions:bi,fitView:cn,fitViewOptions:yr,onNodesDelete:D,onEdgesDelete:O,onDelete:F,onNodeDragStart:T,onNodeDrag:P,onNodeDragStop:j,onSelectionDrag:Z,onSelectionDragStart:V,onSelectionDragStop:W,onMove:m,onMoveStart:_,onMoveEnd:h,noPanClassName:Et,nodeOrigin:ct,rfId:Ci,autoPanOnConnect:mt,autoPanOnNodeDrag:Jn,autoPanSpeed:dn,onError:ht,connectionRadius:ei,isValidConnection:pn,selectNodesOnDrag:He,nodeDragThreshold:Kt,connectionDragThreshold:Bo,onBeforeDelete:oe,debug:Si,ariaLabelConfig:_n,zIndexMode:zo}),f.jsx(GR,{onSelectionChange:X}),tr,f.jsx(zR,{proOptions:ar,position:Ji}),f.jsx(BR,{rfId:Ci,disableKeyboardA11y:Zn})]})})}var w6=TM(x6);function b6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>EM(a,s)),[]);return[t,n,i]}function q6(e){const[t,n]=A.useState(e),i=A.useCallback(a=>n(s=>IM(a,s)),[]);return[t,n,i]}function S6({dimensions:e,lineWidth:t,variant:n,className:i}){return f.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ot(["react-flow__background-pattern",n,i])})}function C6({radius:e,className:t}){return f.jsx("circle",{cx:e,cy:e,r:e,className:Ot(["react-flow__background-pattern","dots",t])})}var Ki;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ki||(Ki={}));const k6={[Ki.Dots]:1,[Ki.Lines]:1,[Ki.Cross]:6},M6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eE({id:e,variant:t=Ki.Dots,gap:n=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:l,style:d,className:p,patternClassName:m}){const _=A.useRef(null),{transform:h,patternId:g}=Je(M6,qt),x=i||k6[t],q=t===Ki.Dots,w=t===Ki.Cross,b=Array.isArray(n)?n:[n,n],k=[b[0]*h[2]||1,b[1]*h[2]||1],S=x*h[2],M=Array.isArray(s)?s:[s,s],I=w?[S,S]:k,E=[M[0]*h[2]||1+I[0]/2,M[1]*h[2]||1+I[1]/2],T=`${g}${e||""}`;return f.jsxs("svg",{className:Ot(["react-flow__background",p]),style:{...d,...hc,"--xy-background-color-props":l,"--xy-background-pattern-color-props":u},ref:_,"data-testid":"rf__background",children:[f.jsx("pattern",{id:T,x:h[0]%k[0],y:h[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:q?f.jsx(C6,{radius:S/2,className:m}):f.jsx(S6,{dimensions:I,lineWidth:a,variant:t,className:m})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}eE.displayName="Background";const E6=A.memo(eE);function I6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function T6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function N6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function P6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function j6(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function wl({children:e,className:t,...n}){return f.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",t]),...n,children:e})}const R6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function tE({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:p,children:m,position:_="bottom-left",orientation:h="vertical","aria-label":g}){const x=St(),{isInteractive:q,minZoomReached:w,maxZoomReached:b,ariaLabelConfig:k}=Je(R6,qt),{zoomIn:S,zoomOut:M,fitView:I}=ug(),E=()=>{S(),s==null||s()},T=()=>{M(),u==null||u()},P=()=>{I(a),l==null||l()},j=()=>{x.setState({nodesDraggable:!q,nodesConnectable:!q,elementsSelectable:!q}),d==null||d(!q)},D=h==="horizontal"?"horizontal":"vertical";return f.jsxs(Ia,{className:Ot(["react-flow__controls",D,p]),position:_,style:e,"data-testid":"rf__controls","aria-label":g??k["controls.ariaLabel"],children:[t&&f.jsxs(f.Fragment,{children:[f.jsx(wl,{onClick:E,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:b,children:f.jsx(I6,{})}),f.jsx(wl,{onClick:T,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:w,children:f.jsx(T6,{})})]}),n&&f.jsx(wl,{className:"react-flow__controls-fitview",onClick:P,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:f.jsx(N6,{})}),i&&f.jsx(wl,{className:"react-flow__controls-interactive",onClick:j,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:q?f.jsx(j6,{}):f.jsx(P6,{})}),m]})}tE.displayName="Controls";const V6=A.memo(tE);function O6({id:e,x:t,y:n,width:i,height:a,style:s,color:u,strokeColor:l,strokeWidth:d,className:p,borderRadius:m,shapeRendering:_,selected:h,onClick:g}){const{background:x,backgroundColor:q}=s||{},w=u||x||q;return f.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:h},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,style:{fill:w,stroke:l,strokeWidth:d},shapeRendering:_,onClick:g?b=>g(b,e):void 0})}const F6=A.memo(O6),A6=e=>e.nodes.map(t=>t.id),Np=e=>e instanceof Function?e:()=>e;function L6({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s=F6,onClick:u}){const l=Je(A6,qt),d=Np(t),p=Np(e),m=Np(n),_=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:l.map(h=>f.jsx(B6,{id:h,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:m,nodeBorderRadius:i,nodeStrokeWidth:a,NodeComponent:s,onClick:u,shapeRendering:_},h))})}function D6({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:a,nodeStrokeWidth:s,shapeRendering:u,NodeComponent:l,onClick:d}){const{node:p,x:m,y:_,width:h,height:g}=Je(x=>{const{internals:q}=x.nodeLookup.get(e),w=q.userNode,{x:b,y:k}=q.positionAbsolute,{width:S,height:M}=gi(w);return{node:w,x:b,y:k,width:S,height:M}},qt);return!p||p.hidden||!iM(p)?null:f.jsx(l,{x:m,y:_,width:h,height:g,style:p.style,selected:!!p.selected,className:i(p),color:t(p),borderRadius:a,strokeColor:n(p),strokeWidth:s,shapeRendering:u,onClick:d,id:p.id})}const B6=A.memo(D6);var z6=A.memo(L6);const $6=200,H6=150,W6=e=>!e.hidden,U6=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nM(Js(e.nodeLookup,{filter:W6}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},G6="react-flow__minimap-desc";function rE({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:u,nodeComponent:l,bgColor:d,maskColor:p,maskStrokeColor:m,maskStrokeWidth:_,position:h="bottom-right",onClick:g,onNodeClick:x,pannable:q=!1,zoomable:w=!1,ariaLabel:b,inversePan:k,zoomStep:S=1,offsetScale:M=5}){const I=St(),E=A.useRef(null),{boundingRect:T,viewBB:P,rfId:j,panZoom:D,translateExtent:O,flowWidth:F,flowHeight:X,ariaLabelConfig:V}=Je(U6,qt),Z=(e==null?void 0:e.width)??$6,W=(e==null?void 0:e.height)??H6,te=T.width/Z,U=T.height/W,K=Math.max(te,U),oe=K*Z,z=K*W,Q=M*K,_e=T.x-(oe-T.width)/2-Q,H=T.y-(z-T.height)/2-Q,J=oe+Q*2,ne=z+Q*2,ue=`${G6}-${j}`,ae=A.useRef(0),he=A.useRef();ae.current=K,A.useEffect(()=>{if(E.current&&D)return he.current=aR({domNode:E.current,panZoom:D,getTransform:()=>I.getState().transform,getViewScale:()=>ae.current}),()=>{var Te;(Te=he.current)==null||Te.destroy()}},[D]),A.useEffect(()=>{var Te;(Te=he.current)==null||Te.update({translateExtent:O,width:F,height:X,inversePan:k,pannable:q,zoomStep:S,zoomable:w})},[q,w,k,S,O,F,X]);const Ee=g?Te=>{var He;const[Pe,Ve]=((He=he.current)==null?void 0:He.pointer(Te))||[0,0];g(Te,{x:Pe,y:Ve})}:void 0,Ne=x?A.useCallback((Te,Pe)=>{const Ve=I.getState().nodeLookup.get(Pe).internals.userNode;x(Te,Ve)},[]):void 0,Ie=b??V["minimap.ariaLabel"];return f.jsx(Ia,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof _=="number"?_*K:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:Ot(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:Z,height:W,viewBox:`${_e} ${H} ${J} ${ne}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:E,onClick:Ee,children:[Ie&&f.jsx("title",{id:ue,children:Ie}),f.jsx(z6,{onClick:Ne,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:u,nodeComponent:l}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${_e-Q},${H-Q}h${J+Q*2}v${ne+Q*2}h${-J-Q*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}rE.displayName="MiniMap";const K6=A.memo(rE),Y6=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Q6={[Ea.Line]:"right",[Ea.Handle]:"bottom-right"};function X6({nodeId:e,position:t,variant:n=Ea.Handle,className:i,style:a=void 0,children:s,color:u,minWidth:l=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:_=!1,resizeDirection:h,autoScale:g=!0,shouldResize:x,onResizeStart:q,onResize:w,onResizeEnd:b}){const k=RM(),S=typeof e=="string"?e:k,M=St(),I=A.useRef(null),E=n===Ea.Handle,T=Je(A.useCallback(Y6(E&&g),[E,g]),qt),P=A.useRef(null),j=t??Q6[n];A.useEffect(()=>{if(!(!I.current||!S))return P.current||(P.current=xR({domNode:I.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:O,transform:F,snapGrid:X,snapToGrid:V,nodeOrigin:Z,domNode:W}=M.getState();return{nodeLookup:O,transform:F,snapGrid:X,snapToGrid:V,nodeOrigin:Z,paneDomNode:W}},onChange:(O,F)=>{const{triggerNodeChanges:X,nodeLookup:V,parentLookup:Z,nodeOrigin:W}=M.getState(),te=[],U={x:O.x,y:O.y},K=V.get(S);if(K&&K.expandParent&&K.parentId){const oe=K.origin??W,z=O.width??K.measured.width??0,Q=O.height??K.measured.height??0,_e={id:K.id,parentId:K.parentId,rect:{width:z,height:Q,...oM({x:O.x??K.position.x,y:O.y??K.position.y},{width:z,height:Q},K.parentId,V,oe)}},H=sg([_e],V,Z,W);te.push(...H),U.x=O.x?Math.max(oe[0]*z,O.x):void 0,U.y=O.y?Math.max(oe[1]*Q,O.y):void 0}if(U.x!==void 0&&U.y!==void 0){const oe={id:S,type:"position",position:{...U}};te.push(oe)}if(O.width!==void 0&&O.height!==void 0){const z={id:S,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:O.width,height:O.height}};te.push(z)}for(const oe of F){const z={...oe,type:"position"};te.push(z)}X(te)},onEnd:({width:O,height:F})=>{const X={id:S,type:"dimensions",resizing:!1,dimensions:{width:O,height:F}};M.getState().triggerNodeChanges([X])}})),P.current.update({controlPosition:j,boundaries:{minWidth:l,minHeight:d,maxWidth:p,maxHeight:m},keepAspectRatio:_,resizeDirection:h,onResizeStart:q,onResize:w,onResizeEnd:b,shouldResize:x}),()=>{var O;(O=P.current)==null||O.destroy()}},[j,l,d,p,m,_,q,w,b,x]);const D=j.split("-");return f.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...D,n,i]),ref:I,style:{...a,scale:T,...u&&{[E?"backgroundColor":"borderColor"]:u}},children:s})}A.memo(X6);const Yl=JSON.parse('[{"id":"p_coal","name":"Coal","type":"item","price":5.22,"rp_multiplier":1},{"id":"p_raw_copper","name":"Raw Copper","type":"item","price":5.51,"rp_multiplier":1},{"id":"p_steam","name":"Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_raw_iron","name":"Raw Iron","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_bauxite_residue","name":"Bauxite Residue","type":"item","price":50,"rp_multiplier":1},{"id":"p_machine_oil","name":"Machine Oil","type":"fluid","price":29,"rp_multiplier":4},{"id":"p_lithium_ore","name":"Lithium Ore","type":"item","price":10,"rp_multiplier":1},{"id":"p_soil","name":"Soil","type":"item","price":2,"rp_multiplier":0.1},{"id":"p_clay","name":"Clay","type":"item","price":2,"rp_multiplier":0.2},{"id":"p_sand","name":"Sand","type":"item","price":5,"rp_multiplier":0.1},{"id":"p_limestone","name":"Limestone","type":"item","price":1,"rp_multiplier":0},{"id":"p_water","name":"Water","type":"fluid","price":0.23,"rp_multiplier":1},{"id":"p_liquid_nitrogen","name":"Liquid Nitrogen","type":"fluid","price":4,"rp_multiplier":3},{"id":"p_liquid_oxygen","name":"Liquid Oxygen","type":"fluid","price":6,"rp_multiplier":3},{"id":"p_liquid_argon","name":"Liquid Argon","type":"fluid","price":50,"rp_multiplier":3},{"id":"p_residue","name":"Residue","type":"fluid","price":-5.8,"rp_multiplier":0},{"id":"p_crude_oil","name":"Crude Oil","type":"fluid","price":11.6,"rp_multiplier":0.2},{"id":"p_hydrochloric_acid","name":"Hydrochloric Acid","type":"fluid","price":80,"rp_multiplier":10},{"id":"p_sulfuric_acid","name":"Sulfuric Acid","type":"fluid","price":65,"rp_multiplier":4},{"id":"p_acetic_acid","name":"Acetic Acid","type":"fluid","price":14.5,"rp_multiplier":7},{"id":"p_lithium_brine","name":"Lithium Brine","type":"fluid","price":25,"rp_multiplier":1},{"id":"p_raw_gas","name":"Raw Gas","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_fracking_oil","name":"Fracking Oil","type":"fluid","price":1,"rp_multiplier":0.2},{"id":"p_planks","name":"Planks","type":"item","price":13.05,"rp_multiplier":5},{"id":"p_nails","name":"Nails","type":"item","price":2.9,"rp_multiplier":1},{"id":"p_chair","name":"Chair","type":"item","price":1029.5,"rp_multiplier":30},{"id":"p_steel_rod","name":"Steel Rod","type":"item","price":92.8,"rp_multiplier":1},{"id":"p_gear","name":"Gear","type":"item","price":98.6,"rp_multiplier":20},{"id":"p_crankshaft","name":"Crankshaft","type":"item","price":754,"rp_multiplier":35},{"id":"p_black_dye","name":"Black Dye","type":"item","price":8.7,"rp_multiplier":1},{"id":"p_toy","name":"Toy","type":"item","price":101.5,"rp_multiplier":1},{"id":"p_copper_wire","name":"Copper Wire","type":"item","price":7.31,"rp_multiplier":1},{"id":"p_rubber","name":"Rubber","type":"item","price":19.4,"rp_multiplier":90},{"id":"p_insulated_wire","name":"Insulated Wire","type":"item","price":40,"rp_multiplier":1},{"id":"p_plastic_casing","name":"Plastic Casing","type":"item","price":145,"rp_multiplier":7},{"id":"p_gearbox","name":"Gearbox","type":"item","price":2552,"rp_multiplier":50},{"id":"p_hardened_plastic_casing","name":"Hardened Plastic Casing","type":"item","price":200,"rp_multiplier":20},{"id":"p_aluminium_ingot","name":"Aluminium Ingot","type":"item","price":800,"rp_multiplier":65},{"id":"p_steel_ingot","name":"Steel Ingot","type":"item","price":48.72,"rp_multiplier":1},{"id":"p_tire_rim","name":"Tire Rim","type":"item","price":1800,"rp_multiplier":1},{"id":"p_tire","name":"Tire","type":"item","price":2000,"rp_multiplier":40},{"id":"p_graphite_iron_electrode","name":"Graphite Iron Electrode","type":"item","price":80,"rp_multiplier":1},{"id":"p_plastic_pellets","name":"Plastic Pellets","type":"item","price":0.87,"rp_multiplier":25},{"id":"p_lithium_carbonate","name":"Lithium Carbonate","type":"item","price":200,"rp_multiplier":40},{"id":"p_uncharged_lithium_ion_battery","name":"Uncharged Lithium Ion Battery","type":"item","price":2000,"rp_multiplier":1},{"id":"p_graphite_zinc_electrode","name":"Graphite Zinc Electrode","type":"item","price":60,"rp_multiplier":1},{"id":"p_charged_lithium_ion_battery","name":"Charged Lithium Ion Battery","type":"item","price":4000,"rp_multiplier":1},{"id":"p_copper_plate","name":"Copper Plate","type":"item","price":32.86,"rp_multiplier":6},{"id":"p_lithium_battery_pack","name":"Lithium Battery Pack","type":"item","price":85000,"rp_multiplier":180},{"id":"p_iron_coil","name":"Iron Coil","type":"item","price":43.85,"rp_multiplier":4},{"id":"p_paper","name":"Paper","type":"item","price":14.5,"rp_multiplier":7},{"id":"p_filter","name":"Filter","type":"item","price":20,"rp_multiplier":1},{"id":"p_gravel","name":"Gravel","type":"item","price":4,"rp_multiplier":0.1},{"id":"p_gunpowder","name":"Gunpowder","type":"item","price":70,"rp_multiplier":1},{"id":"p_dynamite","name":"Dynamite","type":"item","price":120,"rp_multiplier":25},{"id":"p_electromagnet","name":"Electromagnet","type":"item","price":950,"rp_multiplier":1},{"id":"p_steel_plate","name":"Steel Plate","type":"item","price":89.9,"rp_multiplier":18},{"id":"p_electric_motor","name":"Electric Motor","type":"item","price":4500,"rp_multiplier":200},{"id":"p_ferroaluminium_magnet","name":"Ferroaluminium Magnet","type":"item","price":8500,"rp_multiplier":120},{"id":"p_present_box","name":"Present Box","type":"item","price":174,"rp_multiplier":1},{"id":"p_silicon","name":"Silicon","type":"item","price":50,"rp_multiplier":1},{"id":"p_logic_plate","name":"Logic Plate","type":"item","price":65,"rp_multiplier":1},{"id":"p_semiconductor","name":"Semiconductor","type":"item","price":650,"rp_multiplier":30},{"id":"p_iron_ingot","name":"Iron Ingot","type":"item","price":65.54,"rp_multiplier":1},{"id":"p_zinc","name":"Zinc","type":"item","price":20,"rp_multiplier":1},{"id":"p_gold_wire","name":"Gold Wire","type":"item","price":200,"rp_multiplier":1},{"id":"p_zirconium_rod","name":"Zirconium Rod","type":"item","price":180,"rp_multiplier":1},{"id":"p_enriched_uo2_pellets","name":"Enriched Uo2 Pellets","type":"item","price":256,"rp_multiplier":1},{"id":"p_standard_fuel_rod","name":"Standard Fuel Rod","type":"item","price":150000,"rp_multiplier":100},{"id":"p_boron","name":"Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_control_rod","name":"Control Rod","type":"item","price":150000,"rp_multiplier":1},{"id":"p_plutonium_oxide_pellets","name":"Plutonium Oxide Pellets","type":"item","price":1250,"rp_multiplier":0},{"id":"p_yellowcake","name":"Yellowcake","type":"item","price":0,"rp_multiplier":5},{"id":"p_mox_fuel_rod","name":"MOX Fuel Rod","type":"item","price":1000000,"rp_multiplier":100},{"id":"p_low_enrichment_fuel_rod","name":"Low Enrichment Fuel Rod","type":"item","price":20000,"rp_multiplier":1},{"id":"p_iron_mix","name":"Iron Mix","type":"item","price":10,"rp_multiplier":1},{"id":"p_iron_powder","name":"Iron Powder","type":"item","price":15,"rp_multiplier":1},{"id":"p_copper_powder","name":"Copper Powder","type":"item","price":7,"rp_multiplier":1},{"id":"p_copper_mix","name":"Copper Mix","type":"item","price":3,"rp_multiplier":1},{"id":"p_oak_log","name":"Oak Log","type":"item","price":5.8,"rp_multiplier":1},{"id":"p_coke_fuel","name":"Coke Fuel","type":"item","price":18,"rp_multiplier":9},{"id":"p_crushed_bauxite","name":"Crushed Bauxite","type":"item","price":75,"rp_multiplier":1},{"id":"p_alumina","name":"Alumina","type":"item","price":100,"rp_multiplier":1},{"id":"p_rock","name":"Rock","type":"item","price":4,"rp_multiplier":1},{"id":"p_gold_ingot","name":"Gold Ingot","type":"item","price":4250,"rp_multiplier":70},{"id":"p_molten_purple_gold","name":"Molten Purple Gold","type":"fluid","price":580,"rp_multiplier":1},{"id":"p_molten_ferroaluminium_alloy","name":"Molten Ferroaluminium Alloy","type":"fluid","price":1100,"rp_multiplier":1},{"id":"p_copper_ingot","name":"Copper Ingot","type":"item","price":26.68,"rp_multiplier":1.5},{"id":"p_liquid_brass","name":"Liquid Brass","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_liquid_copper","name":"Liquid Copper","type":"fluid","price":7.54,"rp_multiplier":0},{"id":"p_liquid_iron","name":"Liquid Iron","type":"fluid","price":23.2,"rp_multiplier":0},{"id":"p_sulfur","name":"Sulfur","type":"item","price":30,"rp_multiplier":12},{"id":"p_liquid_sulfur","name":"Liquid Sulfur","type":"fluid","price":12,"rp_multiplier":0},{"id":"p_8_karat_gold","name":"8 Karat Gold","type":"item","price":160,"rp_multiplier":1},{"id":"p_liquid_gold","name":"Liquid Gold","type":"fluid","price":1000,"rp_multiplier":0},{"id":"p_10_karat_gold","name":"10 Karat Gold","type":"item","price":300,"rp_multiplier":1},{"id":"p_12_karat_gold","name":"12 Karat Gold","type":"item","price":500,"rp_multiplier":1},{"id":"p_18_karat_gold","name":"18 Karat Gold","type":"item","price":800,"rp_multiplier":1},{"id":"p_24_karat_gold","name":"24 Karat Gold","type":"item","price":1200,"rp_multiplier":1},{"id":"p_alumina_dust","name":"Alumina Dust","type":"item","price":90,"rp_multiplier":1},{"id":"p_liquid_aluminium","name":"Liquid Aluminium","type":"fluid","price":200,"rp_multiplier":0},{"id":"p_liquid_glass","name":"Liquid Glass","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_treated_raw_iron","name":"Treated Raw Iron","type":"item","price":8,"rp_multiplier":1},{"id":"p_treated_raw_copper","name":"Treated Raw Copper","type":"item","price":6,"rp_multiplier":1},{"id":"p_raw_lead","name":"Raw Lead","type":"item","price":10,"rp_multiplier":1},{"id":"p_liquid_lead","name":"Liquid Lead","type":"fluid","price":5,"rp_multiplier":0},{"id":"p_rawmix","name":"Rawmix","type":"item","price":2,"rp_multiplier":1},{"id":"p_cement","name":"Cement","type":"item","price":30,"rp_multiplier":1},{"id":"p_clay_brick","name":"Clay Brick","type":"item","price":28,"rp_multiplier":1},{"id":"p_brick","name":"Brick","type":"item","price":50,"rp_multiplier":2},{"id":"p_naphtha","name":"Naphtha","type":"fluid","price":15.6,"rp_multiplier":0.1},{"id":"p_heavy_oil","name":"Heavy Oil","type":"fluid","price":5,"rp_multiplier":0.2},{"id":"p_sulfur_trioxide","name":"Sulfur Trioxide","type":"fluid","price":2.5,"rp_multiplier":0},{"id":"p_distilled_water","name":"Distilled Water","type":"fluid","price":1,"rp_multiplier":0.3},{"id":"p_gasoline","name":"Gasoline","type":"fluid","price":40.6,"rp_multiplier":5},{"id":"p_ethanol","name":"Ethanol","type":"fluid","price":5.8,"rp_multiplier":2},{"id":"p_gasolinee10","name":"Gasolinee10","type":"fluid","price":57,"rp_multiplier":13},{"id":"p_tetraethyllead","name":"Tetraethyllead","type":"item","price":21,"rp_multiplier":7},{"id":"p_leaded_gasoline","name":"Leaded Gasoline","type":"fluid","price":112,"rp_multiplier":23},{"id":"p_microchip_scrap","name":"Microchip Scrap","type":"item","price":0,"rp_multiplier":1},{"id":"p_dirty_lithium_sulfate","name":"Dirty Lithium Sulfate","type":"item","price":60,"rp_multiplier":1},{"id":"p_lithium_sulfate","name":"Lithium Sulfate","type":"item","price":100,"rp_multiplier":1},{"id":"p_sodium_carbonate","name":"Sodium Carbonate","type":"item","price":8,"rp_multiplier":1},{"id":"p_table_salt","name":"Table Salt","type":"item","price":4,"rp_multiplier":1},{"id":"p_raw_zinc","name":"Raw Zinc","type":"item","price":5,"rp_multiplier":1},{"id":"p_zinc_sulfate","name":"Zinc Sulfate","type":"item","price":10,"rp_multiplier":1},{"id":"p_chlorine","name":"Chlorine","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_hydrogen","name":"Hydrogen","type":"fluid","price":0.2,"rp_multiplier":0.5},{"id":"p_galvanized_steel","name":"Galvanized Steel","type":"item","price":123,"rp_multiplier":33},{"id":"p_lead_ingot","name":"Lead Ingot","type":"item","price":25,"rp_multiplier":1},{"id":"p_powdered_tungsten","name":"Powdered Tungsten","type":"item","price":150,"rp_multiplier":1},{"id":"p_powdered_tungsten_carbide","name":"Powdered Tungsten Carbide","type":"item","price":210,"rp_multiplier":1},{"id":"p_filtered_water","name":"Filtered Water","type":"fluid","price":0.55,"rp_multiplier":0.2},{"id":"p_treated_rock","name":"Treated Rock","type":"item","price":15,"rp_multiplier":1},{"id":"p_raw_zirconium","name":"Raw Zirconium","type":"item","price":32,"rp_multiplier":1},{"id":"p_zirconium_chloride","name":"Zirconium Chloride","type":"item","price":30,"rp_multiplier":1},{"id":"p_zirconium_dioxide","name":"Zirconium Dioxide","type":"item","price":45,"rp_multiplier":1},{"id":"p_deep_earth_fragment","name":"Deep Earth Fragment","type":"item","price":200,"rp_multiplier":1},{"id":"p_hydrofluoric_acid","name":"Hydrofluoric Acid","type":"fluid","price":600,"rp_multiplier":13},{"id":"p_water_free_gas","name":"Water Free Gas","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_hot_crude_oil","name":"Hot Crude Oil","type":"fluid","price":0.14,"rp_multiplier":0},{"id":"p_meg","name":"Meg","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_pta","name":"Pta","type":"fluid","price":2.9,"rp_multiplier":0.2},{"id":"p_rich_soil","name":"Rich Soil","type":"item","price":4,"rp_multiplier":1},{"id":"p_medium_earth_fragment","name":"Medium Earth Fragment","type":"item","price":120,"rp_multiplier":1},{"id":"p_concentrated_salt_solution","name":"Concentrated Salt Solution","type":"fluid","price":2,"rp_multiplier":1},{"id":"p_nitrogen","name":"Nitrogen","type":"fluid","price":0.15,"rp_multiplier":0},{"id":"p_oxygen","name":"Oxygen","type":"fluid","price":0.1,"rp_multiplier":0.5},{"id":"p_argon","name":"Argon","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_plastic_bottle","name":"Plastic Bottle","type":"item","price":72.5,"rp_multiplier":30},{"id":"p_hardened_plastic_pellets","name":"Hardened Plastic Pellets","type":"item","price":2.5,"rp_multiplier":10},{"id":"p_ferroaluminium_alloy_ingot","name":"Ferroaluminium Alloy Ingot","type":"item","price":2500,"rp_multiplier":1},{"id":"p_purple_gold_ingot","name":"Purple Gold Ingot","type":"item","price":20000,"rp_multiplier":100},{"id":"p_glass","name":"Glass","type":"item","price":80,"rp_multiplier":14},{"id":"p_brass_ingot","name":"Brass Ingot","type":"item","price":80,"rp_multiplier":35},{"id":"p_mixed_uranium_oxides","name":"Mixed Uranium Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_ammonia","name":"Ammonia","type":"fluid","price":1,"rp_multiplier":15},{"id":"p_mixed_fissile_nitrates","name":"Mixed Fissile Nitrates","type":"item","price":0,"rp_multiplier":1},{"id":"p_mixed_fissile_oxides","name":"Mixed Fissile Oxides","type":"item","price":0,"rp_multiplier":1},{"id":"p_fission_byproducts","name":"Fission Byproducts","type":"item","price":-5000000,"rp_multiplier":0},{"id":"p_tributyl_phosphate","name":"Tributyl Phosphate","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_refined_gas","name":"Refined Gas","type":"fluid","price":0.29,"rp_multiplier":0.01},{"id":"p_ethylene","name":"Ethylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_hydrogen_sulfide","name":"Hydrogen Sulfide","type":"fluid","price":8,"rp_multiplier":0},{"id":"p_sulfur_dioxide","name":"Sulfur Dioxide","type":"fluid","price":2,"rp_multiplier":0},{"id":"p_light_oil","name":"Light Oil","type":"fluid","price":7,"rp_multiplier":0.1},{"id":"p_water_bottle","name":"Water Bottle","type":"item","price":174,"rp_multiplier":20},{"id":"p_cheap_water_bottle","name":"Cheap Water Bottle","type":"item","price":130.5,"rp_multiplier":5},{"id":"p_residue_bottle","name":"Residue Bottle","type":"item","price":0,"rp_multiplier":0},{"id":"p_refined_diesel","name":"Refined Diesel","type":"fluid","price":40.6,"rp_multiplier":3},{"id":"p_refined_diesel_bottle","name":"Refined Diesel Bottle","type":"item","price":449.5,"rp_multiplier":15},{"id":"p_oil_bottle","name":"Oil Bottle","type":"item","price":208.8,"rp_multiplier":20},{"id":"p_unenriched_uf6_gas","name":"Unenriched Uf6 Gas","type":"fluid","price":30,"rp_multiplier":0},{"id":"p_sodium_hydroxide_solution","name":"Sodium Hydroxide Solution","type":"fluid","price":10,"rp_multiplier":1},{"id":"p_reprocessed_uranium","name":"Reprocessed Uranium","type":"item","price":0,"rp_multiplier":1},{"id":"p_slightly_enriched_uf6_gas","name":"Slightly Enriched Uf6 Gas","type":"fluid","price":45,"rp_multiplier":0},{"id":"p_impure_boron","name":"Impure Boron","type":"item","price":0,"rp_multiplier":1},{"id":"p_boric_acid","name":"Boric Acid","type":"fluid","price":1500,"rp_multiplier":12},{"id":"p_shallow_earth_fragment","name":"Shallow Earth Fragment","type":"item","price":30,"rp_multiplier":1},{"id":"p_phosphorus_oxychloride","name":"Phosphorus Oxychloride","type":"fluid","price":0,"rp_multiplier":0},{"id":"p_enriched_uf6_gas","name":"Enriched Uf6 Gas","type":"fluid","price":150,"rp_multiplier":0},{"id":"p_aggregate","name":"Aggregate","type":"item","price":14.59,"rp_multiplier":1},{"id":"p_wet_concrete","name":"Wet Concrete","type":"item","price":120,"rp_multiplier":1},{"id":"p_concrete_block","name":"Concrete Block","type":"item","price":150,"rp_multiplier":1},{"id":"p_reinforced_concrete_block","name":"Reinforced Concrete Block","type":"item","price":630,"rp_multiplier":4},{"id":"p_crude_diesel","name":"Crude Diesel","type":"fluid","price":13.05,"rp_multiplier":1},{"id":"p_lng","name":"Lng","type":"fluid","price":160,"rp_multiplier":2},{"id":"p_paraxylene","name":"Paraxylene","type":"fluid","price":14.5,"rp_multiplier":0.2},{"id":"p_condensate","name":"Condensate","type":"fluid","price":0.1,"rp_multiplier":0},{"id":"p_contaminated_water","name":"Contaminated Water","type":"fluid","price":-241,"rp_multiplier":0},{"id":"p_iron_plate","name":"Iron Plate","type":"item","price":70.18,"rp_multiplier":1},{"id":"p_cut_oak_log","name":"Cut Oak Log","type":"item","price":3.48,"rp_multiplier":1},{"id":"p_chunk_plank","name":"Chunk Plank","type":"item","price":3.5,"rp_multiplier":1},{"id":"p_copper_drill_head","name":"Copper Drill Head","type":"item","price":20000,"rp_multiplier":25},{"id":"p_iron_drill_head","name":"Iron Drill Head","type":"item","price":145000,"rp_multiplier":30},{"id":"p_steel_drill_head","name":"Steel Drill Head","type":"item","price":190000,"rp_multiplier":125},{"id":"p_tungsten_carbide_plate","name":"Tungsten Carbide Plate","type":"item","price":600,"rp_multiplier":70},{"id":"p_tungsten_carbide_drill_head","name":"Tungsten Carbide Drill Head","type":"item","price":800000,"rp_multiplier":225},{"id":"p_steel_coil","name":"Steel Coil","type":"item","price":75,"rp_multiplier":1},{"id":"p_plank^2","name":"Plank^2","type":"item","price":40.6,"rp_multiplier":1},{"id":"p_iron_plate^2","name":"Iron Plate^2","type":"item","price":295.8,"rp_multiplier":1},{"id":"p_poor_quality_diesel","name":"Poor Quality Diesel","type":"fluid","price":21.75,"rp_multiplier":1.5},{"id":"p_diesel","name":"Diesel","type":"fluid","price":30.45,"rp_multiplier":2},{"id":"p_depleted_uf6_waste","name":"Depleted Uf6 Waste","type":"fluid","price":-250,"rp_multiplier":0},{"id":"p_raw_uranium","name":"Raw Uranium","type":"item","price":54,"rp_multiplier":1},{"id":"p_spent_fuel","name":"Spent Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_exhaust","name":"Exhaust","type":"fluid","price":-0.5,"rp_multiplier":0},{"id":"p_high_pressure_steam","name":"High Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_spent_mox_fuel","name":"Spent MOX Fuel","type":"item","price":-1000000,"rp_multiplier":0},{"id":"p_low_pressure_steam","name":"Low Pressure Steam","type":"fluid","price":0.03,"rp_multiplier":0},{"id":"p_2x_microchip","name":"2x Microchip","type":"item","price":4000,"rp_multiplier":"Variable"},{"id":"p_4x_microchip","name":"4x Microchip","type":"item","price":8400,"rp_multiplier":"Variable"},{"id":"p_8x_microchip","name":"8x Microchip","type":"item","price":13200,"rp_multiplier":"Variable"},{"id":"p_16x_microchip","name":"16x Microchip","type":"item","price":17600,"rp_multiplier":"Variable"},{"id":"p_32x_microchip","name":"32x Microchip","type":"item","price":22000,"rp_multiplier":"Variable"},{"id":"p_64x_microchip","name":"64x Microchip","type":"item","price":28220,"rp_multiplier":"Variable"},{"id":"p_2x64x_microchip","name":"2x64x Microchip","type":"item","price":100000,"rp_multiplier":"Variable"},{"id":"p_3x64x_microchip","name":"3x64x Microchip","type":"item","price":250000,"rp_multiplier":"Variable"},{"id":"p_4x64x_microchip","name":"4x64x Microchip","type":"item","price":375000,"rp_multiplier":"Variable"},{"id":"p_5x64x_microchip","name":"5x64x Microchip","type":"item","price":1000000,"rp_multiplier":"Variable"},{"id":"p_6x64x_microchip","name":"6x64x Microchip","type":"item","price":2000000,"rp_multiplier":"Variable"},{"id":"p_7x64x_microchip","name":"7x64x Microchip","type":"item","price":3000000,"rp_multiplier":"Variable"},{"id":"p_8x64x_microchip","name":"8x64x Microchip","type":"item","price":5000000,"rp_multiplier":"Variable"}]'),Ql=JSON.parse('[{"id":"m_advanced_coal_drill","name":"Advanced Coal Drill","cost":1000,"tier":2},{"id":"m_advanced_copper_drill","name":"Advanced Copper Drill","cost":520,"tier":2},{"id":"m_coal_drill","name":"Coal Drill","cost":50,"tier":1},{"id":"m_copper_drill","name":"Copper Drill","cost":190,"tier":1},{"id":"m_industrial_drill","name":"Industrial Drill","cost":100000,"tier":3},{"id":"m_iron_drill","name":"Iron Drill","cost":350,"tier":2},{"id":"m_lithium_ore_drill","name":"Lithium Ore Drill","cost":250000,"tier":3},{"id":"m_quarry","name":"Quarry","cost":1500,"tier":2},{"id":"m_sand_excavator","name":"Sand Excavator","cost":10000,"tier":3},{"id":"m_soil_excavator","name":"Soil Excavator","cost":250000,"tier":3},{"id":"m_air_separation_unit","name":"Air Separation Unit","cost":1500000,"tier":3},{"id":"m_large_pumpjack","name":"Large Pumpjack","cost":120000,"tier":3},{"id":"m_lithium_brine_extractor","name":"Lithium Brine Extractor","cost":100000,"tier":3},{"id":"m_natural_gas_well","name":"Natural Gas Well","cost":60000,"tier":3},{"id":"m_oil_fracking_tower","name":"Oil Fracking Tower","cost":500000,"tier":3},{"id":"m_oil_rig","name":"Oil Rig","cost":1200,"tier":2},{"id":"m_water_pump","name":"Water Pump","cost":60,"tier":1},{"id":"m_water_pump2","name":"Water Pump2","cost":6000,"tier":2},{"id":"m_advanced_assembler","name":"Advanced Assembler","cost":150000,"tier":4},{"id":"m_craft_assembler","name":"Craft Assembler","cost":1000,"tier":1},{"id":"m_precision_assembler","name":"Precision Assembler","cost":1000000,"tier":4},{"id":"m_blast_furnace","name":"Blast Furnace","cost":60000,"tier":3},{"id":"m_alloyer","name":"Alloyer","cost":999999,"tier":3},{"id":"m_blast_furnace_mk2","name":"Blast Furnace MK2","cost":5000000,"tier":3},{"id":"m_battery_charger","name":"Battery Charger","cost":100000,"tier":3},{"id":"m_electric_furnace","name":"Electric Furnace","cost":190,"tier":1},{"id":"m_industrial_electric_furnace","name":"Industrial Electric Furnace","cost":1000000,"tier":3},{"id":"m_industrial_kiln","name":"Industrial Kiln","cost":7500,"tier":2},{"id":"m_kiln","name":"Kiln","cost":3200,"tier":2},{"id":"m_chemical_reactor","name":"Chemical Reactor","cost":750000,"tier":3},{"id":"m_condenser","name":"Condenser","cost":75000,"tier":3},{"id":"m_liquid_boiler","name":"Liquid Boiler","cost":900,"tier":2},{"id":"m_paper_mill","name":"Paper Mill","cost":80000,"tier":2},{"id":"m_plastic_production_facility","name":"Plastic Production Facility","cost":100000,"tier":3},{"id":"m_pressurized_water_filter","name":"Pressurized Water Filter","cost":350000,"tier":3},{"id":"m_vaporizer","name":"Vaporizer","cost":10000,"tier":3},{"id":"m_foundry","name":"Foundry","cost":2000000,"tier":4},{"id":"m_industrial_plastic_molder","name":"Industrial Plastic Molder","cost":200000,"tier":3},{"id":"m_ingot_molder","name":"Ingot Molder","cost":150,"tier":1},{"id":"m_plastic_molding_machine","name":"Plastic Molding Machine","cost":100000,"tier":3},{"id":"m_advanced_oxidation_plant","name":"Advanced Oxidation Plant","cost":2000000,"tier":4},{"id":"m_atmospheric_distillation_plant","name":"Atmospheric Distillation Plant","cost":1000000,"tier":3},{"id":"m_bottling_plant","name":"Bottling Plant","cost":100000,"tier":3},{"id":"m_chemical_plant","name":"Chemical Plant","cost":2340000,"tier":4},{"id":"m_coal_liquefaction_plant","name":"Coal Liquefaction Plant","cost":750000,"tier":3},{"id":"m_concrete_plant","name":"Concrete Plant","cost":2000,"tier":2},{"id":"m_electrolysis_plant","name":"Electrolysis Plant","cost":650000,"tier":4},{"id":"m_filtration_plant","name":"Filtration Plant","cost":20000,"tier":2},{"id":"m_lng_plant","name":"LNG Plant","cost":1250000,"tier":3},{"id":"m_oxidation_plant","name":"Oxidation Plant","cost":200000,"tier":3},{"id":"m_steam_cracking_plant","name":"Steam Cracking Plant","cost":150000,"tier":3},{"id":"m_water_treatment_plant","name":"Water Treatment Plant","cost":700001,"tier":4},{"id":"m_grinder","name":"Grinder","cost":10000,"tier":2},{"id":"m_grinder_mk2","name":"Grinder MK2","cost":125000,"tier":3},{"id":"m_industrial_roller","name":"Industrial Roller","cost":150000,"tier":3},{"id":"m_industrial_sawmill","name":"Industrial Sawmill","cost":75000,"tier":3},{"id":"m_lathe","name":"Lathe","cost":5000000,"tier":4},{"id":"m_press","name":"Press","cost":409,"tier":1},{"id":"m_press_mk2","name":"Press MK2","cost":333333,"tier":3},{"id":"m_raw_mill","name":"Raw Mill","cost":1250,"tier":2},{"id":"m_roller","name":"Roller","cost":411,"tier":1},{"id":"m_roller_mk2","name":"Roller MK2","cost":150000,"tier":3},{"id":"m_sawmill","name":"Sawmill","cost":800,"tier":1},{"id":"m_trommel","name":"Trommel","cost":1000000,"tier":3},{"id":"m_diesel_refinery","name":"Diesel Refinery","cost":1000,"tier":2},{"id":"m_gas_refinery","name":"Gas Refinery","cost":175000,"tier":3},{"id":"m_gold_acid_refinery","name":"Gold Acid Refinery","cost":1000000,"tier":3},{"id":"m_industrial_diesel_refinery","name":"Industrial Diesel Refinery","cost":150000,"tier":3},{"id":"m_plastic_refinery","name":"Plastic Refinery","cost":100000,"tier":3},{"id":"m_advanced_oil_separator","name":"Advanced Oil Separator","cost":1250000,"tier":3},{"id":"m_crude_oil_separator","name":"Crude Oil Separator","cost":1500,"tier":2},{"id":"m_gas_centrifuge","name":"Gas Centrifuge","cost":3000000,"tier":4},{"id":"m_industrial_oil_separator","name":"Industrial Oil Separator","cost":150000,"tier":3},{"id":"m_ore_enrichment_facility","name":"Ore Enrichment Facility","cost":4000000,"tier":4},{"id":"m_coal_power_plant","name":"Coal Power Plant","cost":10001984,"tier":4},{"id":"m_exhaust_stack","name":"Exhaust Stack","cost":220000,"tier":4},{"id":"m_heat_exchanger","name":"Heat Exchanger","cost":2718281,"tier":4},{"id":"m_nuclear_power_plant","name":"Nuclear Power Plant","cost":200000000,"tier":4},{"id":"m_polisher","name":"Polisher","cost":1200000,"tier":4},{"id":"m_steam_condenser","name":"Steam Condenser","cost":2400000,"tier":4},{"id":"m_vertical_heat_exchanger","name":"Vertical Heat Exchanger","cost":2718281,"tier":4},{"id":"m_coal_generator","name":"Coal Generator","cost":160,"tier":1},{"id":"m_compact_coal_power_plant","name":"Compact Coal Power Plant","cost":550,"tier":1},{"id":"m_diesel_generator","name":"Diesel Generator","cost":4500,"tier":2},{"id":"m_electric_water_heater","name":"Electric Water Heater","cost":100020,"tier":3},{"id":"m_firebox","name":"Firebox","cost":550,"tier":2},{"id":"m_gas_burner","name":"Gas Burner","cost":100000,"tier":3},{"id":"m_gasoline_generator","name":"Gasoline Generator","cost":900,"tier":2},{"id":"m_industrial_firebox","name":"Industrial Firebox","cost":250000,"tier":3},{"id":"m_large_diesel_engine","name":"Large Diesel Engine","cost":100000,"tier":3},{"id":"m_large_turbine","name":"Large Turbine","cost":4000,"tier":2},{"id":"m_boiler","name":"Boiler","cost":900,"tier":2},{"id":"m_tree_farm_controller","name":"Tree Farm Controller","cost":750,"tier":1},{"id":"m_tree","name":"Tree","cost":80,"tier":1},{"id":"m_tree_harvester","name":"Tree Harvester","cost":650,"tier":1},{"id":"m_tree_farm_sprinkler","name":"Tree Farm Sprinkler","cost":200,"tier":1},{"id":"m_tree_farm_water_tank","name":"Tree Farm Water Tank","cost":500,"tier":1},{"id":"m_tree_farm_output","name":"Tree Farm Output","cost":200,"tier":1},{"id":"m_tree_farm","name":"Tree Farm","cost":"Variable","tier":1},{"id":"m_turbine_input","name":"Turbine Input","cost":150000,"tier":4},{"id":"m_high_pressure_turbine","name":"High Pressure Turbine","cost":1000000,"tier":4},{"id":"m_intermediate_pressure_turbine","name":"Intermediate Pressure Turbine","cost":500000,"tier":4},{"id":"m_low_pressure_turbine","name":"Low Pressure Turbine","cost":1000000,"tier":4},{"id":"m_turbine_generator","name":"Turbine Generator","cost":5000000,"tier":4},{"id":"m_turbine_output","name":"Turbine Output","cost":150000,"tier":4},{"id":"m_modular_turbine","name":"Modular Turbine","cost":"Variable","tier":4},{"id":"m_scrubber","name":"Scrubber","cost":30000,"tier":3},{"id":"m_logic_assembler","name":"Logic Assembler","cost":25000000,"tier":4},{"id":"m_mineshaft_drill","name":"Mineshaft Drill","cost":1100000,"tier":4},{"id":"m_geothermal_well","name":"Geothermal Well","cost":1500,"tier":2},{"id":"m_underground_waste_facility","name":"Underground Waste Facility","cost":2500000,"tier":4},{"id":"m_liquid_dump","name":"Liquid Dump","cost":500,"tier":2},{"id":"m_liquid_burner","name":"Liquid Burner","cost":1000,"tier":2},{"id":"m_truck_depot","name":"Truck Depot","cost":100,"tier":1},{"id":"m_van_depot","name":"Van Depot","cost":160,"tier":2},{"id":"m_huge_truck_depot","name":"Huge Truck Depot","cost":3200,"tier":3},{"id":"m_liquid_truck_depot","name":"Liquid Truck Depot","cost":500,"tier":2},{"id":"m_large_liquid_truck_depot","name":"Large Liquid Truck Depot","cost":50000,"tier":3}]'),Xl=JSON.parse('[{"id":"r_advanced_coal_drill_01","name":"Extracts Coal","machine_id":"m_advanced_coal_drill","cycle_time":12,"power_consumption":9000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":3}]},{"id":"r_advanced_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_advanced_copper_drill","cycle_time":12,"power_consumption":6000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":4}]},{"id":"r_coal_drill_01","name":"Extracts Coal","machine_id":"m_coal_drill","cycle_time":4,"power_consumption":120,"power_type":"MV","pollution":0.864,"inputs":[],"outputs":[{"product_id":"p_coal","quantity":1}]},{"id":"r_copper_drill_01","name":"Extracts Raw Copper","machine_id":"m_copper_drill","cycle_time":9,"power_consumption":360,"power_type":"MV","pollution":0.108,"inputs":[],"outputs":[{"product_id":"p_raw_copper","quantity":1}]},{"id":"r_industrial_drill_01","name":"Extracts Raw Copper","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_copper","quantity":10}]},{"id":"r_industrial_drill_02","name":"Extracts Raw Iron","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_raw_iron","quantity":10}]},{"id":"r_industrial_drill_03","name":"Extracts Bauxite Residue","machine_id":"m_industrial_drill","cycle_time":8,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_steam","quantity":720}],"outputs":[{"product_id":"p_bauxite_residue","quantity":0.5}]},{"id":"r_iron_drill_01","name":"Extracts Raw Iron","machine_id":"m_iron_drill","cycle_time":15,"power_consumption":1200,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_iron","quantity":1}]},{"id":"r_lithium_ore_drill_01","name":"Extracts Lithium Ore","machine_id":"m_lithium_ore_drill","cycle_time":10,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_lithium_ore","quantity":10}]},{"id":"r_quarry_01","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_soil","quantity":60},{"product_id":"p_clay","quantity":60}]},{"id":"r_quarry_02","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":60}]},{"id":"r_quarry_03","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[],"outputs":[{"product_id":"p_limestone","quantity":60}]},{"id":"r_quarry_04","name":"Extracts Soil, Clay","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_soil","quantity":120},{"product_id":"p_clay","quantity":120}]},{"id":"r_quarry_05","name":"Extracts Sand","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_sand","quantity":120}]},{"id":"r_quarry_06","name":"Extracts Limestone","machine_id":"m_quarry","cycle_time":20,"power_consumption":50000,"power_type":"MV","pollution":0.5,"inputs":[{"product_id":"p_water","quantity":240}],"outputs":[{"product_id":"p_limestone","quantity":120}]},{"id":"r_sand_excavator_01","name":"Extracts Sand","machine_id":"m_sand_excavator","cycle_time":2,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_sand","quantity":4}]},{"id":"r_soil_excavator_01","name":"Extracts Soil","machine_id":"m_soil_excavator","cycle_time":1,"power_consumption":300000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_soil","quantity":1}]},{"id":"r_air_separation_unit_01","name":"Extracts Liquid Nitrogen, Liquid Oxygen, Liquid Argon, Residue","machine_id":"m_air_separation_unit","cycle_time":1,"power_consumption":20000000,"power_type":"HV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_liquid_nitrogen","quantity":60},{"product_id":"p_liquid_oxygen","quantity":15},{"product_id":"p_liquid_argon","quantity":3},{"product_id":"p_residue","quantity":"Variable"}]},{"id":"r_large_pumpjack_01","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":1}]},{"id":"r_large_pumpjack_02","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2.5}]},{"id":"r_large_pumpjack_03","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_large_pumpjack_04","name":"Extracts Crude Oil","machine_id":"m_large_pumpjack","cycle_time":1,"power_consumption":30000,"power_type":"MV","pollution":1.44,"inputs":[{"product_id":"p_acetic_acid","quantity":1}],"outputs":[{"product_id":"p_crude_oil","quantity":2}]},{"id":"r_lithium_brine_extractor_01","name":"Extracts Lithium Brine, Residue","machine_id":"m_lithium_brine_extractor","cycle_time":120,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":300}],"outputs":[{"product_id":"p_lithium_brine","quantity":120},{"product_id":"p_residue","quantity":10}]},{"id":"r_natural_gas_well_01","name":"Extracts Raw Gas","machine_id":"m_natural_gas_well","cycle_time":1,"power_consumption":45000,"power_type":"MV","pollution":0.432,"inputs":[],"outputs":[{"product_id":"p_raw_gas","quantity":30}]},{"id":"r_oil_fracking_tower_01","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_sulfuric_acid","quantity":7.5},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_fracking_tower_02","name":"Extracts Fracking Oil","machine_id":"m_oil_fracking_tower","cycle_time":8,"power_consumption":62500,"power_type":"MV","pollution":0.0013,"inputs":[{"product_id":"p_sand","quantity":16},{"product_id":"p_acetic_acid","quantity":16},{"product_id":"p_water","quantity":40},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_fracking_oil","quantity":100}]},{"id":"r_oil_rig_01","name":"Extracts Crude Oil","machine_id":"m_oil_rig","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0.0288,"inputs":[],"outputs":[{"product_id":"p_crude_oil","quantity":0.12}]},{"id":"r_water_pump_01","name":"Extracts Water","machine_id":"m_water_pump","cycle_time":1,"power_consumption":600,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":1.35}]},{"id":"r_water_pump2_01","name":"Extracts Water","machine_id":"m_water_pump2","cycle_time":6,"power_consumption":700,"power_type":"MV","pollution":0,"inputs":[],"outputs":[{"product_id":"p_water","quantity":36}]},{"id":"r_advanced_assembler_01","name":"Makes Chair","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_advanced_assembler_02","name":"Makes Crankshaft","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_advanced_assembler_03","name":"Makes Toy","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_advanced_assembler_04","name":"Makes Insulated Wire","machine_id":"m_advanced_assembler","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_wire","quantity":4},{"product_id":"p_rubber","quantity":8}],"outputs":[{"product_id":"p_insulated_wire","quantity":8}]},{"id":"r_advanced_assembler_05","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_06","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_casing","quantity":2},{"product_id":"p_steel_rod","quantity":4},{"product_id":"p_gear","quantity":8}],"outputs":[{"product_id":"p_gearbox","quantity":2}]},{"id":"r_advanced_assembler_07","name":"Makes Gearbox","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_advanced_assembler_08","name":"Makes Tire Rim","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_advanced_assembler_09","name":"Makes Tire","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":4},{"product_id":"p_tire_rim","quantity":1}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_advanced_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_iron_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_graphite_zinc_electrode","quantity":2},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_lithium_carbonate","quantity":4}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":1}]},{"id":"r_advanced_assembler_12","name":"Makes Lithium Battery Pack","machine_id":"m_advanced_assembler","cycle_time":10,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":8},{"product_id":"p_rubber","quantity":8},{"product_id":"p_copper_plate","quantity":12}],"outputs":[{"product_id":"p_lithium_battery_pack","quantity":1}]},{"id":"r_advanced_assembler_13","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_14","name":"Makes Filter","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_coil","quantity":2},{"product_id":"p_paper","quantity":2},{"product_id":"p_gravel","quantity":2}],"outputs":[{"product_id":"p_filter","quantity":1}]},{"id":"r_advanced_assembler_15","name":"Makes Dynamite","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gunpowder","quantity":6},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_dynamite","quantity":1}]},{"id":"r_advanced_assembler_16","name":"Makes Electromagnet","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_insulated_wire","quantity":40},{"product_id":"p_steel_rod","quantity":2}],"outputs":[{"product_id":"p_electromagnet","quantity":2}]},{"id":"r_advanced_assembler_17","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":6},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_18","name":"Makes Electric Motor","machine_id":"m_advanced_assembler","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_electromagnet","quantity":4},{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_steel_plate","quantity":4},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_ferroaluminium_magnet","quantity":0.2}],"outputs":[{"product_id":"p_electric_motor","quantity":2}]},{"id":"r_advanced_assembler_19","name":"Makes Present Box","machine_id":"m_advanced_assembler","cycle_time":8,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_craft_assembler_01","name":"Makes Chair","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":12},{"product_id":"p_nails","quantity":20}],"outputs":[{"product_id":"p_chair","quantity":1}]},{"id":"r_craft_assembler_02","name":"Makes Tire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_tire_rim","quantity":1},{"product_id":"p_rubber","quantity":4}],"outputs":[{"product_id":"p_tire","quantity":1}]},{"id":"r_craft_assembler_03","name":"Makes Tire Rim","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steel_ingot","quantity":4}],"outputs":[{"product_id":"p_tire_rim","quantity":1}]},{"id":"r_craft_assembler_04","name":"Makes Insulated Wire","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rubber","quantity":20},{"product_id":"p_copper_wire","quantity":40}],"outputs":[{"product_id":"p_insulated_wire","quantity":40}]},{"id":"r_craft_assembler_05","name":"Makes Crankshaft","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_rod","quantity":2},{"product_id":"p_gear","quantity":4}],"outputs":[{"product_id":"p_crankshaft","quantity":1}]},{"id":"r_craft_assembler_06","name":"Makes Gearbox","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_casing","quantity":2},{"product_id":"p_crankshaft","quantity":1}],"outputs":[{"product_id":"p_gearbox","quantity":1}]},{"id":"r_craft_assembler_07","name":"Makes Toy","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":6},{"product_id":"p_planks","quantity":3}],"outputs":[{"product_id":"p_toy","quantity":1}]},{"id":"r_craft_assembler_08","name":"Makes Present Box","machine_id":"m_craft_assembler","cycle_time":15,"power_consumption":4000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_black_dye","quantity":9},{"product_id":"p_paper","quantity":6}],"outputs":[{"product_id":"p_present_box","quantity":2}]},{"id":"r_precision_assembler_01","name":"Makes Logic Plate","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_plastic_pellets","quantity":10},{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_logic_plate","quantity":2}]},{"id":"r_precision_assembler_02","name":"Makes Semiconductor","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_silicon","quantity":4},{"product_id":"p_aluminium_ingot","quantity":1}],"outputs":[{"product_id":"p_semiconductor","quantity":2}]},{"id":"r_precision_assembler_03","name":"Makes Graphite Iron Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_ingot","quantity":14}],"outputs":[{"product_id":"p_graphite_iron_electrode","quantity":20}]},{"id":"r_precision_assembler_04","name":"Makes Graphite Zinc Electrode","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_zinc","quantity":14}],"outputs":[{"product_id":"p_graphite_zinc_electrode","quantity":10}]},{"id":"r_precision_assembler_05","name":"Makes 8X Microchip","machine_id":"m_precision_assembler","cycle_time":30,"power_consumption":167000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_logic_plate","quantity":6},{"product_id":"p_copper_wire","quantity":16},{"product_id":"p_semiconductor","quantity":5},{"product_id":"p_gold_wire","quantity":10}],"outputs":[{"product_id":"p_8x_microchip","quantity":1}]},{"id":"r_precision_assembler_06","name":"Makes Standard Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_enriched_uo2_pellets","quantity":20}],"outputs":[{"product_id":"p_standard_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_07","name":"Makes Control Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_boron","quantity":40}],"outputs":[{"product_id":"p_control_rod","quantity":1}]},{"id":"r_precision_assembler_08","name":"Makes Mox Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_plutonium_oxide_pellets","quantity":20},{"product_id":"p_yellowcake","quantity":10}],"outputs":[{"product_id":"p_mox_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_09","name":"Makes Low Enrichment Fuel Rod","machine_id":"m_precision_assembler","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_rod","quantity":1},{"product_id":"p_yellowcake","quantity":30}],"outputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":1}]},{"id":"r_precision_assembler_10","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_iron_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_precision_assembler_11","name":"Makes Uncharged Lithium Ion Battery","machine_id":"m_precision_assembler","cycle_time":20,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_lithium_carbonate","quantity":40},{"product_id":"p_graphite_zinc_electrode","quantity":16},{"product_id":"p_hardened_plastic_casing","quantity":1}],"outputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":8}]},{"id":"r_blast_furnace_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_ingot","quantity":2}]},{"id":"r_blast_furnace_02","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":5},{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_03","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":1.66},{"product_id":"p_iron_powder","quantity":1.6}],"outputs":[{"product_id":"p_iron_mix","quantity":3.2}]},{"id":"r_blast_furnace_04","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":3.32},{"product_id":"p_copper_powder","quantity":2.66}],"outputs":[{"product_id":"p_copper_mix","quantity":5.32}]},{"id":"r_blast_furnace_05","name":"Makes Coke Fuel","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_oak_log","quantity":2}],"outputs":[{"product_id":"p_coke_fuel","quantity":6}]},{"id":"r_blast_furnace_06","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":5}]},{"id":"r_blast_furnace_07","name":"Makes Silicon","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_sand","quantity":4}],"outputs":[{"product_id":"p_silicon","quantity":10}]},{"id":"r_blast_furnace_08","name":"Makes Alumina","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_crushed_bauxite","quantity":4}],"outputs":[{"product_id":"p_alumina","quantity":6}]},{"id":"r_blast_furnace_09","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_ingot","quantity":6}]},{"id":"r_blast_furnace_10","name":"Makes Steel Ingot","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1.5},{"product_id":"p_iron_mix","quantity":19.2}],"outputs":[{"product_id":"p_steel_ingot","quantity":24}]},{"id":"r_blast_furnace_11","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_iron_powder","quantity":4.8}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_blast_furnace_12","name":"Makes Copper Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":1},{"product_id":"p_copper_powder","quantity":7.98}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_blast_furnace_13","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coke_fuel","quantity":2},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":6}]},{"id":"r_blast_furnace_14","name":"Makes Iron Mix","machine_id":"m_blast_furnace","cycle_time":5,"power_consumption":15000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_coal","quantity":4},{"product_id":"p_rock","quantity":4}],"outputs":[{"product_id":"p_iron_mix","quantity":4}]},{"id":"r_alloyer_01","name":"Makes Molten Purple Gold","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_gold_ingot","quantity":1},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_purple_gold","quantity":2}]},{"id":"r_alloyer_02","name":"Makes Molten Ferroaluminium Alloy","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_iron_ingot","quantity":4},{"product_id":"p_aluminium_ingot","quantity":2},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":2}]},{"id":"r_alloyer_03","name":"Makes Liquid Brass","machine_id":"m_alloyer","cycle_time":20,"power_consumption":150000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_copper_ingot","quantity":6},{"product_id":"p_zinc","quantity":3},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_liquid_brass","quantity":9}]},{"id":"r_blast_furnace_mk2_01","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":300},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":200}]},{"id":"r_blast_furnace_mk2_02","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coal","quantity":200},{"product_id":"p_oak_log","quantity":50}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_03","name":"Makes Coke Fuel","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":200},{"product_id":"p_oak_log","quantity":10}],"outputs":[{"product_id":"p_coke_fuel","quantity":300}]},{"id":"r_blast_furnace_mk2_04","name":"Makes Steel Ingot","machine_id":"m_blast_furnace_mk2","cycle_time":20,"power_consumption":1250000,"power_type":"MV","pollution":0.36,"inputs":[{"product_id":"p_coke_fuel","quantity":50},{"product_id":"p_iron_ingot","quantity":100}],"outputs":[{"product_id":"p_steel_ingot","quantity":300}]},{"id":"r_electric_furnace_01","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":1}]},{"id":"r_electric_furnace_02","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1}]},{"id":"r_electric_furnace_03","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":10,"power_consumption":120,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":1.8}]},{"id":"r_electric_furnace_04","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":6,"power_consumption":200,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_ingot","quantity":1.8}],"outputs":[{"product_id":"p_liquid_copper","quantity":1.8}]},{"id":"r_electric_furnace_05","name":"Makes Liquid Copper","machine_id":"m_electric_furnace","cycle_time":3,"power_consumption":400,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_copper_mix","quantity":2.67}],"outputs":[{"product_id":"p_liquid_copper","quantity":5.2}]},{"id":"r_electric_furnace_06","name":"Makes Liquid Iron","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_iron_mix","quantity":3.2}],"outputs":[{"product_id":"p_liquid_iron","quantity":7}]},{"id":"r_electric_furnace_07","name":"Makes Liquid Sulfur","machine_id":"m_electric_furnace","cycle_time":5,"power_consumption":240,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":10}]},{"id":"r_industrial_electric_furnace_01","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_8_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.08}]},{"id":"r_industrial_electric_furnace_02","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_10_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.1}]},{"id":"r_industrial_electric_furnace_03","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.2}]},{"id":"r_industrial_electric_furnace_04","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_18_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":0.4}]},{"id":"r_industrial_electric_furnace_05","name":"Makes Liquid Gold","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_24_karat_gold","quantity":1}],"outputs":[{"product_id":"p_liquid_gold","quantity":1}]},{"id":"r_industrial_electric_furnace_06","name":"Makes Liquid Aluminium","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_alumina_dust","quantity":1}],"outputs":[{"product_id":"p_liquid_aluminium","quantity":1}]},{"id":"r_industrial_electric_furnace_07","name":"Makes Liquid Glass","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sand","quantity":2}],"outputs":[{"product_id":"p_liquid_glass","quantity":1}]},{"id":"r_industrial_electric_furnace_08","name":"Makes Liquid Iron","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_iron","quantity":1}],"outputs":[{"product_id":"p_liquid_iron","quantity":5}]},{"id":"r_industrial_electric_furnace_09","name":"Makes Liquid Copper","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_treated_raw_copper","quantity":1}],"outputs":[{"product_id":"p_liquid_copper","quantity":5}]},{"id":"r_industrial_electric_furnace_10","name":"Makes Liquid Lead","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_raw_lead","quantity":5}],"outputs":[{"product_id":"p_liquid_lead","quantity":5}]},{"id":"r_industrial_electric_furnace_11","name":"Makes Liquid Sulfur","machine_id":"m_industrial_electric_furnace","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0.158,"inputs":[{"product_id":"p_sulfur","quantity":10}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":20}]},{"id":"r_industrial_kiln_01","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":6.64},{"product_id":"p_iron_powder","quantity":6.4}],"outputs":[{"product_id":"p_iron_mix","quantity":12.8}]},{"id":"r_industrial_kiln_02","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":13.28},{"product_id":"p_copper_powder","quantity":10.64}],"outputs":[{"product_id":"p_copper_mix","quantity":21.28}]},{"id":"r_industrial_kiln_03","name":"Makes Alumina Dust","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":16},{"product_id":"p_crushed_bauxite","quantity":16}],"outputs":[{"product_id":"p_alumina_dust","quantity":22.8}]},{"id":"r_industrial_kiln_04","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":16},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":16}]},{"id":"r_industrial_kiln_05","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coal","quantity":20},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_06","name":"Makes Cement","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":10},{"product_id":"p_rawmix","quantity":30}],"outputs":[{"product_id":"p_cement","quantity":20}]},{"id":"r_industrial_kiln_07","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":8},{"product_id":"p_rock","quantity":16}],"outputs":[{"product_id":"p_iron_mix","quantity":24}]},{"id":"r_industrial_kiln_08","name":"Makes Iron Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_iron_powder","quantity":19.2}],"outputs":[{"product_id":"p_iron_mix","quantity":51.2}]},{"id":"r_industrial_kiln_09","name":"Makes Copper Mix","machine_id":"m_industrial_kiln","cycle_time":20,"power_consumption":15000,"power_type":"MV","pollution":0.86,"inputs":[{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_copper_powder","quantity":31.92}],"outputs":[{"product_id":"p_copper_mix","quantity":85.12}]},{"id":"r_battery_charger_01","name":"Makes Charged Lithium Ion Battery","machine_id":"m_battery_charger","cycle_time":11,"power_consumption":318000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_uncharged_lithium_ion_battery","quantity":2}],"outputs":[{"product_id":"p_charged_lithium_ion_battery","quantity":2}]},{"id":"r_chemical_reactor_01","name":"Makes Residue, Rubber","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_naphtha","quantity":10},{"product_id":"p_heavy_oil","quantity":16}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_rubber","quantity":8}]},{"id":"r_chemical_reactor_02","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_03","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":15}]},{"id":"r_chemical_reactor_04","name":"Makes Sulfuric Acid","machine_id":"m_chemical_reactor","cycle_time":3,"power_consumption":1000000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":20},{"product_id":"p_distilled_water","quantity":20},{"product_id":"p_sulfuric_acid","quantity":2}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":17}]},{"id":"r_chemical_reactor_05","name":"Makes Gasolinee10","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_ethanol","quantity":1}],"outputs":[{"product_id":"p_gasolinee10","quantity":10}]},{"id":"r_chemical_reactor_06","name":"Makes Leaded Gasoline","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_gasoline","quantity":9},{"product_id":"p_tetraethyllead","quantity":1}],"outputs":[{"product_id":"p_leaded_gasoline","quantity":10}]},{"id":"r_chemical_reactor_07","name":"Makes Gold Ingot","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_gold_ingot","quantity":1}]},{"id":"r_chemical_reactor_08","name":"Makes Dirty Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_lithium_brine","quantity":6},{"product_id":"p_sulfuric_acid","quantity":0.9}],"outputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_09","name":"Makes Lithium Carbonate","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_lithium_sulfate","quantity":8},{"product_id":"p_sodium_carbonate","quantity":4}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":4}]},{"id":"r_chemical_reactor_10","name":"Makes Lithium Sulfate","machine_id":"m_chemical_reactor","cycle_time":2,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1.4},{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":2}],"outputs":[{"product_id":"p_lithium_sulfate","quantity":4}]},{"id":"r_chemical_reactor_11","name":"Makes Hydrochloric Acid, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":1500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_table_salt","quantity":4}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":4},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_reactor_12","name":"Makes Zinc Sulfate, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_raw_zinc","quantity":20}],"outputs":[{"product_id":"p_zinc_sulfate","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_reactor_13","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":5}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":5}]},{"id":"r_chemical_reactor_14","name":"Makes Treated Raw Iron, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_iron","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_15","name":"Makes Treated Raw Copper, Residue","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_raw_copper","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":20},{"product_id":"p_residue","quantity":4}]},{"id":"r_chemical_reactor_16","name":"Makes Galvanized Steel","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_zinc","quantity":5},{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_galvanized_steel","quantity":20}]},{"id":"r_chemical_reactor_17","name":"Makes Tetraethyllead","machine_id":"m_chemical_reactor","cycle_time":5,"power_consumption":600000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_ethanol","quantity":4},{"product_id":"p_lead_ingot","quantity":1}],"outputs":[{"product_id":"p_tetraethyllead","quantity":10}]},{"id":"r_chemical_reactor_18","name":"Makes Powdered Tungsten Carbide","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_powdered_tungsten","quantity":4},{"product_id":"p_black_dye","quantity":3}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":2}]},{"id":"r_chemical_reactor_19","name":"Makes Gunpowder","machine_id":"m_chemical_reactor","cycle_time":6,"power_consumption":500000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_water","quantity":10},{"product_id":"p_sulfur","quantity":8},{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_gunpowder","quantity":4}]},{"id":"r_chemical_reactor_20","name":"Makes Sulfur","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_filtered_water","quantity":6},{"product_id":"p_treated_rock","quantity":2}],"outputs":[{"product_id":"p_sulfur","quantity":1}]},{"id":"r_chemical_reactor_21","name":"Makes Zirconium Chloride, Residue","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_chlorine","quantity":2},{"product_id":"p_raw_zirconium","quantity":2}],"outputs":[{"product_id":"p_zirconium_chloride","quantity":4},{"product_id":"p_residue","quantity":1}]},{"id":"r_chemical_reactor_22","name":"Makes Zirconium Dioxide, Hydrochloric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_distilled_water","quantity":6},{"product_id":"p_zirconium_chloride","quantity":2}],"outputs":[{"product_id":"p_zirconium_dioxide","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":3}]},{"id":"r_chemical_reactor_23","name":"Makes Residue, Hydrofluoric Acid","machine_id":"m_chemical_reactor","cycle_time":4,"power_consumption":750000,"power_type":"MV","pollution":1.62,"inputs":[{"product_id":"p_sulfuric_acid","quantity":0.8},{"product_id":"p_deep_earth_fragment","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":2},{"product_id":"p_hydrofluoric_acid","quantity":1.8}]},{"id":"r_condenser_01","name":"Makes Water Free Gas, Water, Crude Oil","machine_id":"m_condenser","cycle_time":1,"power_consumption":21000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_gas","quantity":60}],"outputs":[{"product_id":"p_water_free_gas","quantity":30},{"product_id":"p_water","quantity":1.5},{"product_id":"p_crude_oil","quantity":0.3}]},{"id":"r_liquid_boiler_01","name":"Makes Hot Crude Oil","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_crude_oil","quantity":0.75}],"outputs":[{"product_id":"p_hot_crude_oil","quantity":0.75}]},{"id":"r_liquid_boiler_02","name":"Makes Water","machine_id":"m_liquid_boiler","cycle_time":1,"power_consumption":10000,"power_type":"MV","pollution":0.184,"inputs":[{"product_id":"p_water","quantity":0.6}],"outputs":[{"product_id":"p_water","quantity":0.6}]},{"id":"r_paper_mill_01","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":4,"power_consumption":62500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4}],"outputs":[{"product_id":"p_paper","quantity":8}]},{"id":"r_paper_mill_02","name":"Makes Paper","machine_id":"m_paper_mill","cycle_time":2,"power_consumption":125000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_chlorine","quantity":2}],"outputs":[{"product_id":"p_paper","quantity":16}]},{"id":"r_plastic_production_facility_01","name":"Makes Plastic Pellets","machine_id":"m_plastic_production_facility","cycle_time":6,"power_consumption":80000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_meg","quantity":1},{"product_id":"p_pta","quantity":1}],"outputs":[{"product_id":"p_plastic_pellets","quantity":80}]},{"id":"r_pressurized_water_filter_01","name":"Makes Residue, 8 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rich_soil","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_8_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_02","name":"Makes Residue, 12 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_10_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_12_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_03","name":"Makes Residue, 24 Karat Gold","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_18_karat_gold","quantity":4},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_24_karat_gold","quantity":2}]},{"id":"r_pressurized_water_filter_04","name":"Makes Residue, Lithium Sulfate","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_dirty_lithium_sulfate","quantity":10},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_lithium_sulfate","quantity":10}]},{"id":"r_pressurized_water_filter_05","name":"Makes Concentrated Salt Solution, Raw Iron","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":10},{"product_id":"p_raw_iron","quantity":5}]},{"id":"r_pressurized_water_filter_06","name":"Makes Naphtha, Coal","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_naphtha","quantity":2.5},{"product_id":"p_coal","quantity":10}]},{"id":"r_pressurized_water_filter_07","name":"Makes Residue, Rock","machine_id":"m_pressurized_water_filter","cycle_time":5,"power_consumption":200000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":5},{"product_id":"p_water","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_rock","quantity":5}]},{"id":"r_vaporizer_01","name":"Makes Nitrogen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_nitrogen","quantity":4}],"outputs":[{"product_id":"p_nitrogen","quantity":120}]},{"id":"r_vaporizer_02","name":"Makes Oxygen","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_oxygen","quantity":3}],"outputs":[{"product_id":"p_oxygen","quantity":90}]},{"id":"r_vaporizer_03","name":"Makes Argon","machine_id":"m_vaporizer","cycle_time":1,"power_consumption":15000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_argon","quantity":3}],"outputs":[{"product_id":"p_argon","quantity":90}]},{"id":"r_foundry_01","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_02","name":"Makes Lead Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_lead","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_lead_ingot","quantity":1000}]},{"id":"r_foundry_03","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_04","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_iron","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1000}]},{"id":"r_foundry_05","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_06","name":"Makes Iron Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_iron","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_iron_ingot","quantity":1200}]},{"id":"r_foundry_07","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_08","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_raw_copper","quantity":2000},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1000}]},{"id":"r_foundry_09","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.5,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coke_fuel","quantity":168},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_foundry_10","name":"Makes Copper Ingot","machine_id":"m_foundry","cycle_time":182,"power_consumption":6000000,"power_type":"HV","pollution":0.29,"inputs":[{"product_id":"p_treated_raw_copper","quantity":400},{"product_id":"p_coal","quantity":1680},{"product_id":"p_water","quantity":5000}],"outputs":[{"product_id":"p_copper_ingot","quantity":1200}]},{"id":"r_ingot_molder_01","name":"Makes Copper Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_copper","quantity":4}],"outputs":[{"product_id":"p_copper_ingot","quantity":2}]},{"id":"r_ingot_molder_02","name":"Makes Sulfur","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_sulfur","quantity":4}],"outputs":[{"product_id":"p_sulfur","quantity":2}]},{"id":"r_ingot_molder_03","name":"Makes Iron Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_iron","quantity":4}],"outputs":[{"product_id":"p_iron_ingot","quantity":2}]},{"id":"r_ingot_molder_04","name":"Makes Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_gold","quantity":4}],"outputs":[{"product_id":"p_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_05","name":"Makes Ferroaluminium Alloy Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_ferroaluminium_alloy","quantity":4}],"outputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}]},{"id":"r_ingot_molder_06","name":"Makes Purple Gold Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_molten_purple_gold","quantity":4}],"outputs":[{"product_id":"p_purple_gold_ingot","quantity":2}]},{"id":"r_ingot_molder_07","name":"Makes Aluminium Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_aluminium","quantity":4}],"outputs":[{"product_id":"p_aluminium_ingot","quantity":2}]},{"id":"r_ingot_molder_08","name":"Makes Glass","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_glass","quantity":4}],"outputs":[{"product_id":"p_glass","quantity":2}]},{"id":"r_ingot_molder_09","name":"Makes Lead Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_lead","quantity":8}],"outputs":[{"product_id":"p_lead_ingot","quantity":4}]},{"id":"r_ingot_molder_10","name":"Makes Brass Ingot","machine_id":"m_ingot_molder","cycle_time":4,"power_consumption":150,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_liquid_brass","quantity":8}],"outputs":[{"product_id":"p_brass_ingot","quantity":4}]},{"id":"r_plastic_molding_machine_01","name":"Makes Plastic Bottle","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_bottle","quantity":2}]},{"id":"r_plastic_molding_machine_02","name":"Makes Plastic Casing","machine_id":"m_plastic_molding_machine","cycle_time":7,"power_consumption":14000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":20}],"outputs":[{"product_id":"p_plastic_casing","quantity":1}]},{"id":"r_advanced_oxidation_plant_01","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_oxygen","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":4}]},{"id":"r_advanced_oxidation_plant_02","name":"Makes Yellowcake","machine_id":"m_advanced_oxidation_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_uranium_oxides","quantity":10},{"product_id":"p_ammonia","quantity":100},{"product_id":"p_sulfuric_acid","quantity":100}],"outputs":[{"product_id":"p_yellowcake","quantity":8}]},{"id":"r_advanced_oxidation_plant_03","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":10},{"product_id":"p_oxygen","quantity":120},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":1},{"product_id":"p_fission_byproducts","quantity":4},{"product_id":"p_residue","quantity":20}]},{"id":"r_advanced_oxidation_plant_04","name":"Makes Mixed Fissile Oxides, Fission Byproducts, Residue","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":1},{"product_id":"p_limestone","quantity":2},{"product_id":"p_tributyl_phosphate","quantity":6},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_mixed_fissile_oxides","quantity":2},{"product_id":"p_fission_byproducts","quantity":2},{"product_id":"p_residue","quantity":15}]},{"id":"r_advanced_oxidation_plant_05","name":"Makes Ethanol, Hydrogen","machine_id":"m_advanced_oxidation_plant","cycle_time":6,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_hydrogen","quantity":30}]},{"id":"r_advanced_oxidation_plant_06","name":"Makes Acetic Acid","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":30}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_advanced_oxidation_plant_07","name":"Makes Meg","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":60},{"product_id":"p_oxygen","quantity":45}],"outputs":[{"product_id":"p_meg","quantity":45}]},{"id":"r_advanced_oxidation_plant_08","name":"Makes Liquid Sulfur","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_advanced_oxidation_plant_09","name":"Makes Sulfur Trioxide","machine_id":"m_advanced_oxidation_plant","cycle_time":2,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":60},{"product_id":"p_oxygen","quantity":60}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_atmospheric_distillation_plant_01","name":"Makes Residue, Heavy Oil, Light Oil, Naphtha, Gasoline, Water Free Gas, Crude Oil","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_fracking_oil","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":80},{"product_id":"p_naphtha","quantity":10},{"product_id":"p_gasoline","quantity":20},{"product_id":"p_water_free_gas","quantity":720},{"product_id":"p_crude_oil","quantity":20}]},{"id":"r_atmospheric_distillation_plant_02","name":"Makes Concentrated Salt Solution, Distilled Water","machine_id":"m_atmospheric_distillation_plant","cycle_time":8,"power_consumption":625000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_water","quantity":200}],"outputs":[{"product_id":"p_concentrated_salt_solution","quantity":64},{"product_id":"p_distilled_water","quantity":136}]},{"id":"r_bottling_plant_01","name":"Makes Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_water_bottle","quantity":1}]},{"id":"r_bottling_plant_02","name":"Makes Cheap Water Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_cheap_water_bottle","quantity":1}]},{"id":"r_bottling_plant_03","name":"Makes Residue Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_residue_bottle","quantity":1}]},{"id":"r_bottling_plant_04","name":"Makes Refined Diesel Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_refined_diesel_bottle","quantity":1}]},{"id":"r_bottling_plant_05","name":"Makes Oil Bottle","machine_id":"m_bottling_plant","cycle_time":3.5,"power_consumption":2860,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_crude_oil","quantity":8},{"product_id":"p_plastic_bottle","quantity":1}],"outputs":[{"product_id":"p_oil_bottle","quantity":1}]},{"id":"r_coal_liquefaction_plant_01","name":"Makes Residue, Heavy Oil, Light Oil","machine_id":"m_coal_liquefaction_plant","cycle_time":40,"power_consumption":1000000,"power_type":"MV","pollution":6.48,"inputs":[{"product_id":"p_coal","quantity":40},{"product_id":"p_crude_oil","quantity":10},{"product_id":"p_steam","quantity":200}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_heavy_oil","quantity":40},{"product_id":"p_light_oil","quantity":30}]},{"id":"r_concrete_plant_01","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":10}]},{"id":"r_concrete_plant_02","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_iron_powder","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":20}]},{"id":"r_concrete_plant_03","name":"Makes Clay Brick","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_clay","quantity":10},{"product_id":"p_limestone","quantity":10},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_clay_brick","quantity":15}]},{"id":"r_concrete_plant_04","name":"Makes Wet Concrete","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_cement","quantity":10},{"product_id":"p_aggregate","quantity":20},{"product_id":"p_water","quantity":60}],"outputs":[{"product_id":"p_wet_concrete","quantity":20}]},{"id":"r_concrete_plant_05","name":"Makes Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":20},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_concrete_block","quantity":20}]},{"id":"r_concrete_plant_06","name":"Makes Reinforced Concrete Block","machine_id":"m_concrete_plant","cycle_time":10,"power_consumption":4000,"power_type":"MV","pollution":0.4,"inputs":[{"product_id":"p_wet_concrete","quantity":10},{"product_id":"p_steel_rod","quantity":40}],"outputs":[{"product_id":"p_reinforced_concrete_block","quantity":10}]},{"id":"r_electrolysis_plant_01","name":"Makes Oxygen, Hydrogen","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_water","quantity":8}],"outputs":[{"product_id":"p_oxygen","quantity":30},{"product_id":"p_hydrogen","quantity":60}]},{"id":"r_electrolysis_plant_02","name":"Makes Chlorine, Sodium Hydroxide Solution","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_concentrated_salt_solution","quantity":8}],"outputs":[{"product_id":"p_chlorine","quantity":60},{"product_id":"p_sodium_hydroxide_solution","quantity":6}]},{"id":"r_electrolysis_plant_03","name":"Makes Zinc, Residue","machine_id":"m_electrolysis_plant","cycle_time":30,"power_consumption":750000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_zinc_sulfate","quantity":30}],"outputs":[{"product_id":"p_zinc","quantity":20},{"product_id":"p_residue","quantity":10}]},{"id":"r_filtration_plant_01","name":"Makes Filtered Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_filtered_water","quantity":3}]},{"id":"r_filtration_plant_02","name":"Makes Water","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_filtration_plant_03","name":"Makes Crude Diesel","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gasoline","quantity":4}],"outputs":[{"product_id":"p_crude_diesel","quantity":2.4}]},{"id":"r_filtration_plant_04","name":"Makes Machine Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_diesel","quantity":4}],"outputs":[{"product_id":"p_machine_oil","quantity":2.4}]},{"id":"r_filtration_plant_05","name":"Makes Residue","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_residue","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":4.4}]},{"id":"r_filtration_plant_06","name":"Makes Crude Oil","machine_id":"m_filtration_plant","cycle_time":2,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_heavy_oil","quantity":4}],"outputs":[{"product_id":"p_crude_oil","quantity":3}]},{"id":"r_lng_plant_01","name":"Makes Lng","machine_id":"m_lng_plant","cycle_time":1,"power_consumption":2250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_refined_gas","quantity":120}],"outputs":[{"product_id":"p_lng","quantity":6.6}]},{"id":"r_oxidation_plant_01","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_02","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_03","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":20,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_04","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":12,"power_consumption":833000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_oxidation_plant_05","name":"Makes Acetic Acid","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethanol","quantity":60},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_acetic_acid","quantity":60}]},{"id":"r_oxidation_plant_06","name":"Makes Meg","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ethylene","quantity":24},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_meg","quantity":18}]},{"id":"r_oxidation_plant_07","name":"Makes Liquid Sulfur","machine_id":"m_oxidation_plant","cycle_time":5,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrogen_sulfide","quantity":20},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_liquid_sulfur","quantity":30}]},{"id":"r_oxidation_plant_08","name":"Makes Sulfur Trioxide","machine_id":"m_oxidation_plant","cycle_time":3,"power_consumption":1670000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_sulfur_dioxide","quantity":40},{"product_id":"p_oxygen","quantity":5}],"outputs":[{"product_id":"p_sulfur_trioxide","quantity":40}]},{"id":"r_steam_cracking_plant_01","name":"Makes Paraxylene, Ethylene","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_crude_oil","quantity":2},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_paraxylene","quantity":2},{"product_id":"p_ethylene","quantity":3}]},{"id":"r_steam_cracking_plant_02","name":"Makes Crude Diesel, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_crude_diesel","quantity":12},{"product_id":"p_residue","quantity":3}]},{"id":"r_steam_cracking_plant_03","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":21.67507568,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_steam","quantity":150}],"outputs":[{"product_id":"p_light_oil","quantity":12},{"product_id":"p_residue","quantity":8}]},{"id":"r_steam_cracking_plant_04","name":"Makes Naphtha, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_heavy_oil","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_naphtha","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_steam_cracking_plant_05","name":"Makes Light Oil, Residue","machine_id":"m_steam_cracking_plant","cycle_time":3,"power_consumption":60000,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_naphtha","quantity":20},{"product_id":"p_hydrogen","quantity":3}],"outputs":[{"product_id":"p_light_oil","quantity":15},{"product_id":"p_residue","quantity":5}]},{"id":"r_water_treatment_plant_01","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_02","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_water_treatment_plant_03","name":"Makes Distilled Water","machine_id":"m_water_treatment_plant","cycle_time":3.6363636363636362,"power_consumption":2000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":64},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_distilled_water","quantity":64}]},{"id":"r_grinder_01","name":"Makes Black Dye","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":4}],"outputs":[{"product_id":"p_black_dye","quantity":3}]},{"id":"r_grinder_02","name":"Makes Paper","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":4},{"product_id":"p_water","quantity":10}],"outputs":[{"product_id":"p_paper","quantity":3}]},{"id":"r_grinder_03","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":3.2}],"outputs":[{"product_id":"p_iron_powder","quantity":1.9}]},{"id":"r_grinder_04","name":"Makes Iron Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":6}],"outputs":[{"product_id":"p_iron_powder","quantity":0.5}]},{"id":"r_grinder_05","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":5.33}],"outputs":[{"product_id":"p_copper_powder","quantity":2.66}]},{"id":"r_grinder_06","name":"Makes Copper Powder","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":6}],"outputs":[{"product_id":"p_copper_powder","quantity":0.5}]},{"id":"r_grinder_07","name":"Makes Sand","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":8}],"outputs":[{"product_id":"p_sand","quantity":10}]},{"id":"r_grinder_08","name":"Makes Crushed Bauxite","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":8}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":6}]},{"id":"r_grinder_09","name":"Makes Alumina Dust","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":4}],"outputs":[{"product_id":"p_alumina_dust","quantity":4}]},{"id":"r_grinder_10","name":"Makes Gold Ingot","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_microchip_scrap","quantity":5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_gold_ingot","quantity":0.5}]},{"id":"r_grinder_11","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_12","name":"Makes Gravel","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":12}],"outputs":[{"product_id":"p_gravel","quantity":12}]},{"id":"r_grinder_13","name":"Makes Raw Iron","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6},{"product_id":"p_filtered_water","quantity":4}],"outputs":[{"product_id":"p_raw_iron","quantity":6}]},{"id":"r_grinder_14","name":"Makes Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}],"outputs":[{"product_id":"p_rock","quantity":6}]},{"id":"r_grinder_15","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":3},{"product_id":"p_machine_oil","quantity":2}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":6}]},{"id":"r_grinder_16","name":"Makes Treated Rock","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_treated_rock","quantity":6}]},{"id":"r_grinder_17","name":"Makes Rich Soil","machine_id":"m_grinder","cycle_time":12,"power_consumption":33000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":6}],"outputs":[{"product_id":"p_rich_soil","quantity":6}]},{"id":"r_grinder_mk2_01","name":"Makes Impure Boron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":40},{"product_id":"p_distilled_water","quantity":60}],"outputs":[{"product_id":"p_impure_boron","quantity":2}]},{"id":"r_grinder_mk2_02","name":"Makes Iron Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":40}],"outputs":[{"product_id":"p_iron_powder","quantity":25.6}]},{"id":"r_grinder_mk2_03","name":"Makes Copper Powder","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":53.3}],"outputs":[{"product_id":"p_copper_powder","quantity":26.6}]},{"id":"r_grinder_mk2_04","name":"Makes Sand","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":80}],"outputs":[{"product_id":"p_sand","quantity":100}]},{"id":"r_grinder_mk2_05","name":"Makes Crushed Bauxite","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_bauxite_residue","quantity":80}],"outputs":[{"product_id":"p_crushed_bauxite","quantity":60}]},{"id":"r_grinder_mk2_06","name":"Makes Alumina Dust","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_alumina","quantity":40}],"outputs":[{"product_id":"p_alumina_dust","quantity":40}]},{"id":"r_grinder_mk2_07","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_soil","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_08","name":"Makes Gravel","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_rock","quantity":120}],"outputs":[{"product_id":"p_gravel","quantity":120}]},{"id":"r_grinder_mk2_09","name":"Makes Raw Iron","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60},{"product_id":"p_filtered_water","quantity":40}],"outputs":[{"product_id":"p_raw_iron","quantity":60}]},{"id":"r_grinder_mk2_10","name":"Makes Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}],"outputs":[{"product_id":"p_rock","quantity":60}]},{"id":"r_grinder_mk2_11","name":"Makes Shallow Earth Fragment","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_medium_earth_fragment","quantity":30},{"product_id":"p_machine_oil","quantity":20}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":60}]},{"id":"r_grinder_mk2_12","name":"Makes Treated Rock","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":30}],"outputs":[{"product_id":"p_treated_rock","quantity":60}]},{"id":"r_grinder_mk2_13","name":"Makes Rich Soil","machine_id":"m_grinder_mk2","cycle_time":16,"power_consumption":1250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_treated_rock","quantity":60}],"outputs":[{"product_id":"p_rich_soil","quantity":60}]},{"id":"r_kiln_01","name":"Makes Brick","machine_id":"m_kiln","cycle_time":60,"power_consumption":750000,"power_type":"MV","pollution":0.144,"inputs":[{"product_id":"p_clay_brick","quantity":30}],"outputs":[{"product_id":"p_brick","quantity":30}]},{"id":"r_industrial_plastic_molder_01","name":"Makes Plastic Bottle","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_plastic_bottle","quantity":6}]},{"id":"r_industrial_plastic_molder_02","name":"Makes Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_plastic_pellets","quantity":120}],"outputs":[{"product_id":"p_plastic_casing","quantity":6}]},{"id":"r_industrial_plastic_molder_03","name":"Makes Hardened Plastic Casing","machine_id":"m_industrial_plastic_molder","cycle_time":12,"power_consumption":20000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hardened_plastic_pellets","quantity":60}],"outputs":[{"product_id":"p_hardened_plastic_casing","quantity":6}]},{"id":"r_chemical_plant_01","name":"Makes Ammonia","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_hydrogen","quantity":30},{"product_id":"p_nitrogen","quantity":10}],"outputs":[{"product_id":"p_ammonia","quantity":20}]},{"id":"r_chemical_plant_02","name":"Makes Hardened Plastic Pellets","machine_id":"m_chemical_plant","cycle_time":5,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_ammonia","quantity":25},{"product_id":"p_naphtha","quantity":5}],"outputs":[{"product_id":"p_hardened_plastic_pellets","quantity":50}]},{"id":"r_chemical_plant_03","name":"Makes Hydrogen","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_steam","quantity":90},{"product_id":"p_refined_gas","quantity":60}],"outputs":[{"product_id":"p_hydrogen","quantity":15}]},{"id":"r_chemical_plant_04","name":"Makes Unenriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_yellowcake","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_unenriched_uf6_gas","quantity":1.5}]},{"id":"r_chemical_plant_05","name":"Makes Residue, Reprocessed Uranium, Plutonium Oxide Pellets","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_mixed_fissile_oxides","quantity":0.5},{"product_id":"p_hydrochloric_acid","quantity":0.5},{"product_id":"p_sodium_hydroxide_solution","quantity":0.5},{"product_id":"p_argon","quantity":10}],"outputs":[{"product_id":"p_residue","quantity":3},{"product_id":"p_reprocessed_uranium","quantity":0.1},{"product_id":"p_plutonium_oxide_pellets","quantity":0.05}]},{"id":"r_chemical_plant_06","name":"Makes Hydrofluoric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":0.5},{"product_id":"p_sulfuric_acid","quantity":0.5}],"outputs":[{"product_id":"p_hydrofluoric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_07","name":"Makes Slightly Enriched Uf6 Gas","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_reprocessed_uranium","quantity":0.5},{"product_id":"p_hydrofluoric_acid","quantity":0.5}],"outputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":2}]},{"id":"r_chemical_plant_08","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_hydrochloric_acid","quantity":0.5}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_09","name":"Makes Boric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":10,"power_consumption":250000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_impure_boron","quantity":1.6},{"product_id":"p_sulfuric_acid","quantity":0.35}],"outputs":[{"product_id":"p_boric_acid","quantity":2},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_10","name":"Makes Phosphorus Oxychloride, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_shallow_earth_fragment","quantity":2},{"product_id":"p_hydrochloric_acid","quantity":6}],"outputs":[{"product_id":"p_phosphorus_oxychloride","quantity":3},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_11","name":"Makes Tributyl Phosphate, Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1100000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_phosphorus_oxychloride","quantity":1.5},{"product_id":"p_ethanol","quantity":1.5},{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_tributyl_phosphate","quantity":1},{"product_id":"p_hydrochloric_acid","quantity":1}]},{"id":"r_chemical_plant_12","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2000000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_steam","quantity":90},{"product_id":"p_tributyl_phosphate","quantity":1}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.05},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_13","name":"Makes Enriched Uo2 Pellets, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":2500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_enriched_uf6_gas","quantity":0.02},{"product_id":"p_steam","quantity":90},{"product_id":"p_hydrogen","quantity":4}],"outputs":[{"product_id":"p_enriched_uo2_pellets","quantity":0.01},{"product_id":"p_residue","quantity":5}]},{"id":"r_chemical_plant_14","name":"Makes Sulfuric Acid, Residue","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_sulfur_trioxide","quantity":14},{"product_id":"p_distilled_water","quantity":11},{"product_id":"p_argon","quantity":70}],"outputs":[{"product_id":"p_sulfuric_acid","quantity":11},{"product_id":"p_residue","quantity":2}]},{"id":"r_chemical_plant_15","name":"Makes Hydrochloric Acid","machine_id":"m_chemical_plant","cycle_time":1,"power_consumption":1500000,"power_type":"HV","pollution":0.72,"inputs":[{"product_id":"p_chlorine","quantity":20},{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":10},{"product_id":"p_argon","quantity":20}],"outputs":[{"product_id":"p_hydrochloric_acid","quantity":10}]},{"id":"r_industrial_roller_01","name":"Makes Copper Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_industrial_roller_02","name":"Makes Iron Coil","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_industrial_roller_03","name":"Makes Steel Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_industrial_roller_04","name":"Makes Gear","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":9375,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_industrial_roller_05","name":"Makes Nails","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_industrial_roller_06","name":"Makes Ferroaluminium Magnet","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":1125,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_ferroaluminium_alloy_ingot","quantity":2}],"outputs":[{"product_id":"p_ferroaluminium_magnet","quantity":1}]},{"id":"r_industrial_roller_07","name":"Makes Gold Wire","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":11250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":20}]},{"id":"r_industrial_roller_08","name":"Makes Zirconium Rod","machine_id":"m_industrial_roller","cycle_time":6,"power_consumption":100000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_zirconium_dioxide","quantity":10}],"outputs":[{"product_id":"p_zirconium_rod","quantity":0.1}]},{"id":"r_industrial_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_cut_oak_log","quantity":16}]},{"id":"r_industrial_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_chunk_plank","quantity":8}]},{"id":"r_industrial_sawmill_03","name":"Makes Planks","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":8},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_planks","quantity":24}]},{"id":"r_industrial_sawmill_04","name":"Makes Iron Plate","machine_id":"m_industrial_sawmill","cycle_time":10,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":3},{"product_id":"p_steam","quantity":300}],"outputs":[{"product_id":"p_iron_plate","quantity":12}]},{"id":"r_lathe_01","name":"Makes Copper Drill Head","machine_id":"m_lathe","cycle_time":60,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":700}],"outputs":[{"product_id":"p_copper_drill_head","quantity":1}]},{"id":"r_lathe_02","name":"Makes Iron Drill Head","machine_id":"m_lathe","cycle_time":160,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2100}],"outputs":[{"product_id":"p_iron_drill_head","quantity":1}]},{"id":"r_lathe_03","name":"Makes Steel Drill Head","machine_id":"m_lathe","cycle_time":200,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":3500}],"outputs":[{"product_id":"p_steel_drill_head","quantity":1}]},{"id":"r_lathe_04","name":"Makes Tungsten Carbide Drill Head","machine_id":"m_lathe","cycle_time":240,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1275}],"outputs":[{"product_id":"p_tungsten_carbide_drill_head","quantity":1}]},{"id":"r_lathe_05","name":"Makes Steel Rod","machine_id":"m_lathe","cycle_time":30,"power_consumption":100000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_steel_coil","quantity":60}],"outputs":[{"product_id":"p_steel_rod","quantity":60}]},{"id":"r_press_01","name":"Makes Copper Plate","machine_id":"m_press","cycle_time":4,"power_consumption":1000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":1}],"outputs":[{"product_id":"p_copper_plate","quantity":1}]},{"id":"r_press_02","name":"Makes Iron Plate","machine_id":"m_press","cycle_time":4,"power_consumption":2000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":1}]},{"id":"r_press_03","name":"Makes Steel Plate","machine_id":"m_press","cycle_time":4,"power_consumption":12500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":1}],"outputs":[{"product_id":"p_steel_plate","quantity":1}]},{"id":"r_press_04","name":"Makes Plank^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_planks","quantity":1}],"outputs":[{"product_id":"p_plank^2","quantity":0.25}]},{"id":"r_press_05","name":"Makes Iron Plate^2","machine_id":"m_press","cycle_time":4,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":1}],"outputs":[{"product_id":"p_iron_plate^2","quantity":0.25}]},{"id":"r_press_mk2_01","name":"Makes Iron Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":20}],"outputs":[{"product_id":"p_iron_plate","quantity":20}]},{"id":"r_press_mk2_02","name":"Makes Steel Plate","machine_id":"m_press_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_plate","quantity":20}]},{"id":"r_press_mk2_03","name":"Makes Copper Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_ingot","quantity":20}],"outputs":[{"product_id":"p_copper_plate","quantity":20}]},{"id":"r_press_mk2_04","name":"Makes Tungsten Carbide Plate","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":250000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":3}],"outputs":[{"product_id":"p_tungsten_carbide_plate","quantity":1.5}]},{"id":"r_press_mk2_05","name":"Makes Gear","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":20}],"outputs":[{"product_id":"p_gear","quantity":20}]},{"id":"r_press_mk2_06","name":"Makes Iron Plate^2","machine_id":"m_press_mk2","cycle_time":4,"power_consumption":40000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":6}],"outputs":[{"product_id":"p_iron_plate^2","quantity":3}]},{"id":"r_raw_mill_01","name":"Makes Rawmix, Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":20},{"product_id":"p_clay","quantity":20},{"product_id":"p_limestone","quantity":20}],"outputs":[{"product_id":"p_rawmix","quantity":20},{"product_id":"p_aggregate","quantity":20}]},{"id":"r_raw_mill_02","name":"Makes Rawmix","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_clay","quantity":30},{"product_id":"p_limestone","quantity":30}],"outputs":[{"product_id":"p_rawmix","quantity":20}]},{"id":"r_raw_mill_03","name":"Makes Aggregate","machine_id":"m_raw_mill","cycle_time":20,"power_consumption":2500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gravel","quantity":30}],"outputs":[{"product_id":"p_aggregate","quantity":20}]},{"id":"r_roller_01","name":"Makes Copper Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":2}],"outputs":[{"product_id":"p_copper_wire","quantity":12}]},{"id":"r_roller_02","name":"Makes Iron Coil","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":2}],"outputs":[{"product_id":"p_iron_coil","quantity":4}]},{"id":"r_roller_03","name":"Makes Steel Rod","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":2}],"outputs":[{"product_id":"p_steel_rod","quantity":2}]},{"id":"r_roller_04","name":"Makes Gear","machine_id":"m_roller","cycle_time":8,"power_consumption":6250,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_plate","quantity":2}],"outputs":[{"product_id":"p_gear","quantity":2}]},{"id":"r_roller_05","name":"Makes Nails","machine_id":"m_roller","cycle_time":8,"power_consumption":750,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":2}],"outputs":[{"product_id":"p_nails","quantity":16}]},{"id":"r_roller_06","name":"Makes Gold Wire","machine_id":"m_roller","cycle_time":8,"power_consumption":7500,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":2}],"outputs":[{"product_id":"p_gold_wire","quantity":2}]},{"id":"r_roller_mk2_01","name":"Makes Copper Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_copper_plate","quantity":20}],"outputs":[{"product_id":"p_copper_wire","quantity":120}]},{"id":"r_roller_mk2_02","name":"Makes Iron Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":50000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_plate","quantity":20}],"outputs":[{"product_id":"p_iron_coil","quantity":40}]},{"id":"r_roller_mk2_03","name":"Makes Steel Coil","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":75000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steel_ingot","quantity":20}],"outputs":[{"product_id":"p_steel_coil","quantity":20}]},{"id":"r_roller_mk2_04","name":"Makes Gold Wire","machine_id":"m_roller_mk2","cycle_time":8,"power_consumption":25000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_gold_ingot","quantity":4}],"outputs":[{"product_id":"p_gold_wire","quantity":40}]},{"id":"r_sawmill_01","name":"Makes Cut Oak Log","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_cut_oak_log","quantity":2}]},{"id":"r_sawmill_02","name":"Makes Chunk Plank","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_cut_oak_log","quantity":1}],"outputs":[{"product_id":"p_chunk_plank","quantity":1}]},{"id":"r_sawmill_03","name":"Makes Planks","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_chunk_plank","quantity":1}],"outputs":[{"product_id":"p_planks","quantity":3}]},{"id":"r_sawmill_04","name":"Makes Iron Plate","machine_id":"m_sawmill","cycle_time":20,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_iron_ingot","quantity":1}],"outputs":[{"product_id":"p_iron_plate","quantity":4}]},{"id":"r_trommel_01","name":"Makes Rich Soil, Bauxite Residue, Gravel, Sand","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":80},{"product_id":"p_soil","quantity":40}],"outputs":[{"product_id":"p_rich_soil","quantity":16},{"product_id":"p_bauxite_residue","quantity":8},{"product_id":"p_gravel","quantity":4},{"product_id":"p_sand","quantity":4}]},{"id":"r_trommel_02","name":"Makes 10 Karat Gold, Rich Soil, Raw Lead, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_treated_rock","quantity":14}],"outputs":[{"product_id":"p_10_karat_gold","quantity":7},{"product_id":"p_rich_soil","quantity":14},{"product_id":"p_raw_lead","quantity":7},{"product_id":"p_bauxite_residue","quantity":7}]},{"id":"r_trommel_03","name":"Makes Shallow Earth Fragment, Raw Iron, Table Salt, Rock","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":28},{"product_id":"p_medium_earth_fragment","quantity":28}],"outputs":[{"product_id":"p_shallow_earth_fragment","quantity":14},{"product_id":"p_raw_iron","quantity":14},{"product_id":"p_table_salt","quantity":7},{"product_id":"p_rock","quantity":7}]},{"id":"r_trommel_04","name":"Makes 18 Karat Gold, Bauxite Residue","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":5.6},{"product_id":"p_deep_earth_fragment","quantity":29}],"outputs":[{"product_id":"p_18_karat_gold","quantity":11.2},{"product_id":"p_bauxite_residue","quantity":10}]},{"id":"r_trommel_05","name":"Makes Coal, Powdered Tungsten","machine_id":"m_trommel","cycle_time":28,"power_consumption":17900,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":21},{"product_id":"p_deep_earth_fragment","quantity":9.3}],"outputs":[{"product_id":"p_coal","quantity":7},{"product_id":"p_powdered_tungsten","quantity":9.3}]},{"id":"r_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_diesel","quantity":0.45}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.41}],"outputs":[{"product_id":"p_diesel","quantity":0.37},{"product_id":"p_residue","quantity":0.04}]},{"id":"r_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_diesel","quantity":0.37}],"outputs":[{"product_id":"p_refined_diesel","quantity":0.34},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_diesel_refinery","cycle_time":1,"power_consumption":1000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_refined_diesel","quantity":0.34}],"outputs":[{"product_id":"p_gasoline","quantity":0.31},{"product_id":"p_residue","quantity":0.03}]},{"id":"r_gas_refinery_01","name":"Makes Refined Gas, Residue","machine_id":"m_gas_refinery","cycle_time":1,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_water_free_gas","quantity":90}],"outputs":[{"product_id":"p_refined_gas","quantity":60},{"product_id":"p_residue","quantity":3}]},{"id":"r_gold_acid_refinery_01","name":"Makes Residue, 10 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_10_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_02","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":6},{"product_id":"p_12_karat_gold","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_03","name":"Makes Residue, 18 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":4},{"product_id":"p_water","quantity":4},{"product_id":"p_rich_soil","quantity":1}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_18_karat_gold","quantity":1}]},{"id":"r_gold_acid_refinery_04","name":"Makes Residue, Bauxite Residue","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_shallow_earth_fragment","quantity":4}],"outputs":[{"product_id":"p_residue","quantity":8},{"product_id":"p_bauxite_residue","quantity":1}]},{"id":"r_gold_acid_refinery_05","name":"Makes Residue, Raw Zinc","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4},{"product_id":"p_raw_zinc","quantity":4}]},{"id":"r_gold_acid_refinery_06","name":"Makes Lithium Brine, Rich Soil","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_lithium_brine","quantity":10},{"product_id":"p_rich_soil","quantity":5}]},{"id":"r_gold_acid_refinery_07","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_medium_earth_fragment","quantity":3}],"outputs":[{"product_id":"p_residue","quantity":6},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_08","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":5}]},{"id":"r_gold_acid_refinery_09","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_hydrochloric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":10}]},{"id":"r_gold_acid_refinery_10","name":"Makes Residue, Coal","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_sulfuric_acid","quantity":2},{"product_id":"p_water","quantity":5},{"product_id":"p_deep_earth_fragment","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coal","quantity":20}]},{"id":"r_gold_acid_refinery_11","name":"Makes Residue, 8 Karat Gold","machine_id":"m_gold_acid_refinery","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_acetic_acid","quantity":1},{"product_id":"p_water","quantity":5},{"product_id":"p_treated_rock","quantity":5}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_8_karat_gold","quantity":5}]},{"id":"r_plastic_refinery_01","name":"Makes Ethanol","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_crude_oil","quantity":1},{"product_id":"p_water","quantity":4}],"outputs":[{"product_id":"p_ethanol","quantity":2}]},{"id":"r_plastic_refinery_02","name":"Makes Pta","machine_id":"m_plastic_refinery","cycle_time":4,"power_consumption":60000,"power_type":"MV","pollution":0.216,"inputs":[{"product_id":"p_paraxylene","quantity":1},{"product_id":"p_acetic_acid","quantity":4}],"outputs":[{"product_id":"p_pta","quantity":2}]},{"id":"r_industrial_diesel_refinery_01","name":"Makes Poor Quality Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_crude_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_poor_quality_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_02","name":"Makes Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_03","name":"Makes Refined Diesel, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_refined_diesel","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_industrial_diesel_refinery_04","name":"Makes Gasoline, Residue","machine_id":"m_industrial_diesel_refinery","cycle_time":1,"power_consumption":750000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_refined_diesel","quantity":2},{"product_id":"p_machine_oil","quantity":0.2}],"outputs":[{"product_id":"p_gasoline","quantity":1.8},{"product_id":"p_residue","quantity":0.2}]},{"id":"r_advanced_oil_separator_01","name":"Makes Residue, Coke Fuel, Light Oil, Hydrogen Sulfide","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_crude_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":5},{"product_id":"p_coke_fuel","quantity":4},{"product_id":"p_light_oil","quantity":20},{"product_id":"p_hydrogen_sulfide","quantity":12}]},{"id":"r_advanced_oil_separator_02","name":"Makes Residue, Coke Fuel","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_heavy_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_coke_fuel","quantity":44}]},{"id":"r_advanced_oil_separator_03","name":"Makes Residue, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_fracking_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_heavy_oil","quantity":20}]},{"id":"r_advanced_oil_separator_04","name":"Makes Residue, Hydrogen Sulfide, Heavy Oil","machine_id":"m_advanced_oil_separator","cycle_time":10,"power_consumption":2500000,"power_type":"MV","pollution":0.324,"inputs":[{"product_id":"p_steam","quantity":500},{"product_id":"p_light_oil","quantity":40}],"outputs":[{"product_id":"p_residue","quantity":15},{"product_id":"p_hydrogen_sulfide","quantity":6},{"product_id":"p_heavy_oil","quantity":10}]},{"id":"r_crude_oil_separator_01","name":"Makes Crude Diesel, Gasoline, Residue","machine_id":"m_crude_oil_separator","cycle_time":1,"power_consumption":2200,"power_type":"MV","pollution":0.432,"inputs":[{"product_id":"p_hot_crude_oil","quantity":1.5}],"outputs":[{"product_id":"p_crude_diesel","quantity":0.675},{"product_id":"p_gasoline","quantity":0.3},{"product_id":"p_residue","quantity":0.3}]},{"id":"r_gas_centrifuge_01","name":"Makes Depleted Uf6 Waste, Slightly Enriched Uf6 Gas, Unenriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_unenriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.1},{"product_id":"p_unenriched_uf6_gas","quantity":0.25}]},{"id":"r_gas_centrifuge_02","name":"Makes Depleted Uf6 Waste, Enriched Uf6 Gas, Slightly Enriched Uf6 Gas","machine_id":"m_gas_centrifuge","cycle_time":1,"power_consumption":1000000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.5}],"outputs":[{"product_id":"p_depleted_uf6_waste","quantity":0.1},{"product_id":"p_enriched_uf6_gas","quantity":0.05},{"product_id":"p_slightly_enriched_uf6_gas","quantity":0.3}]},{"id":"r_industrial_oil_separator_01","name":"Makes Residue, Machine Oil, Light Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_heavy_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":0.5},{"product_id":"p_machine_oil","quantity":2},{"product_id":"p_light_oil","quantity":1}]},{"id":"r_industrial_oil_separator_02","name":"Makes Residue, Diesel, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_light_oil","quantity":4},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":1.5},{"product_id":"p_diesel","quantity":2},{"product_id":"p_crude_oil","quantity":0.5}]},{"id":"r_industrial_oil_separator_03","name":"Makes Residue, Crude Oil","machine_id":"m_industrial_oil_separator","cycle_time":5,"power_consumption":100000,"power_type":"MV","pollution":0.32,"inputs":[{"product_id":"p_fracking_oil","quantity":40},{"product_id":"p_steam","quantity":20}],"outputs":[{"product_id":"p_residue","quantity":10},{"product_id":"p_crude_oil","quantity":30}]},{"id":"r_ore_enrichment_facility_01","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":5},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_02","name":"Makes Mixed Uranium Oxides, Sand, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_uranium","quantity":20},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_mixed_uranium_oxides","quantity":6},{"product_id":"p_sand","quantity":20},{"product_id":"p_residue","quantity":60}]},{"id":"r_ore_enrichment_facility_03","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":5},{"product_id":"p_fission_byproducts","quantity":95},{"product_id":"p_residue","quantity":5}]},{"id":"r_ore_enrichment_facility_04","name":"Makes Mixed Fissile Nitrates, Fission Byproducts, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":10,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_spent_fuel","quantity":50},{"product_id":"p_sulfuric_acid","quantity":1},{"product_id":"p_nitrogen","quantity":120}],"outputs":[{"product_id":"p_mixed_fissile_nitrates","quantity":7},{"product_id":"p_fission_byproducts","quantity":93},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_05","name":"Makes Lithium Carbonate, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":500000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_lithium_ore","quantity":4},{"product_id":"p_sodium_carbonate","quantity":8},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_distilled_water","quantity":10}],"outputs":[{"product_id":"p_lithium_carbonate","quantity":18},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_06","name":"Makes Powdered Tungsten Carbide, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":4,"power_consumption":1000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":6},{"product_id":"p_coal","quantity":40},{"product_id":"p_sulfuric_acid","quantity":6},{"product_id":"p_ammonia","quantity":60}],"outputs":[{"product_id":"p_powdered_tungsten_carbide","quantity":7},{"product_id":"p_residue","quantity":20}]},{"id":"r_ore_enrichment_facility_07","name":"Makes 24 Karat Gold, Bauxite Residue, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":2,"power_consumption":2000000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_deep_earth_fragment","quantity":10},{"product_id":"p_sulfuric_acid","quantity":5}],"outputs":[{"product_id":"p_24_karat_gold","quantity":1.8},{"product_id":"p_bauxite_residue","quantity":4},{"product_id":"p_residue","quantity":10}]},{"id":"r_ore_enrichment_facility_08","name":"Makes Treated Raw Iron, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_iron","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_iron","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_ore_enrichment_facility_09","name":"Makes Treated Raw Copper, Residue","machine_id":"m_ore_enrichment_facility","cycle_time":15,"power_consumption":800000,"power_type":"HV","pollution":0,"inputs":[{"product_id":"p_raw_copper","quantity":50},{"product_id":"p_sulfuric_acid","quantity":10}],"outputs":[{"product_id":"p_treated_raw_copper","quantity":75},{"product_id":"p_residue","quantity":50}]},{"id":"r_coal_power_plant_01","name":"Makes Distilled Water, Exhaust","machine_id":"m_coal_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_coal","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_distilled_water","quantity":"Variable"},{"product_id":"p_exhaust","quantity":"Variable"}]},{"id":"r_exhaust_stack_01","name":"Consumes Exhaust, Filter","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":86.4,"inputs":[{"product_id":"p_exhaust","quantity":120000},{"product_id":"p_filter","quantity":1}],"outputs":[]},{"id":"r_exhaust_stack_02","name":"Consumes Exhaust","machine_id":"m_exhaust_stack","cycle_time":5,"power_consumption":0,"power_type":"None","pollution":691.2,"inputs":[{"product_id":"p_exhaust","quantity":120000}],"outputs":[]},{"id":"r_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_nuclear_power_plant_01","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_low_enrichment_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_02","name":"Makes Contaminated Water, Spent Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_standard_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_fuel","quantity":"Variable"}]},{"id":"r_nuclear_power_plant_03","name":"Makes Contaminated Water, Spent MOX Fuel","machine_id":"m_nuclear_power_plant","cycle_time":"Variable","power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_mox_fuel_rod","quantity":"Variable"},{"product_id":"p_control_rod","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":"Variable"}],"outputs":[{"product_id":"p_contaminated_water","quantity":"Variable"},{"product_id":"p_spent_mox_fuel","quantity":"Variable"}]},{"id":"r_polisher_01","name":"Makes Distilled Water","machine_id":"m_polisher","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_condensate","quantity":400},{"product_id":"p_hydrochloric_acid","quantity":1},{"product_id":"p_sodium_hydroxide_solution","quantity":1}],"outputs":[{"product_id":"p_distilled_water","quantity":400}]},{"id":"r_steam_condenser_01","name":"Makes Distilled Water, Condensate","machine_id":"m_steam_condenser","cycle_time":1,"power_consumption":500000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_low_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_distilled_water","quantity":800},{"product_id":"p_condensate","quantity":800}]},{"id":"r_vertical_heat_exchanger_01","name":"Makes Distilled Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_distilled_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_vertical_heat_exchanger_02","name":"Makes Contaminated Water, High Pressure Steam","machine_id":"m_vertical_heat_exchanger","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_distilled_water","quantity":400}],"outputs":[{"product_id":"p_contaminated_water","quantity":400},{"product_id":"p_high_pressure_steam","quantity":12000}]},{"id":"r_coal_generator_01","name":"Produces Power. Makes Steam","machine_id":"m_coal_generator","cycle_time":1,"power_consumption":-7000,"power_type":"MV","pollution":0.27,"inputs":[{"product_id":"p_coal","quantity":0.25},{"product_id":"p_water","quantity":1.45}],"outputs":[{"product_id":"p_steam","quantity":3}]},{"id":"r_compact_coal_power_plant_01","name":"Produces Power. Consumes Coal","machine_id":"m_compact_coal_power_plant","cycle_time":3.33,"power_consumption":-13500,"power_type":"MV","pollution":0.821,"inputs":[{"product_id":"p_coal","quantity":2}],"outputs":[]},{"id":"r_diesel_generator_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_diesel_generator","cycle_time":5,"power_consumption":-55200,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_diesel_generator","cycle_time":6,"power_consumption":-66000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_03","name":"Produces Power. Consumes Diesel","machine_id":"m_diesel_generator","cycle_time":7.67,"power_consumption":-78000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":0.1}],"outputs":[]},{"id":"r_diesel_generator_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_diesel_generator","cycle_time":10.33,"power_consumption":-90000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":0.1}],"outputs":[]},{"id":"r_electric_water_heater_01","name":"Makes Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_electric_water_heater_02","name":"Makes Filtered Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_electric_water_heater_03","name":"Makes Distilled Water","machine_id":"m_electric_water_heater","cycle_time":1,"power_consumption":"Variable","power_type":"Variable","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_firebox_01","name":"Makes Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_water","quantity":6}],"outputs":[{"product_id":"p_water","quantity":6}]},{"id":"r_firebox_02","name":"Makes Filtered Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_filtered_water","quantity":6}],"outputs":[{"product_id":"p_filtered_water","quantity":6}]},{"id":"r_firebox_03","name":"Makes Distilled Water","machine_id":"m_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.08,"inputs":[{"product_id":"p_coal","quantity":1},{"product_id":"p_distilled_water","quantity":6}],"outputs":[{"product_id":"p_distilled_water","quantity":6}]},{"id":"r_gas_burner_01","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_02","name":"Makes Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_water","quantity":30}],"outputs":[{"product_id":"p_water","quantity":30}]},{"id":"r_gas_burner_03","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_04","name":"Makes Filtered Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_filtered_water","quantity":30}],"outputs":[{"product_id":"p_filtered_water","quantity":30}]},{"id":"r_gas_burner_05","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0.173,"inputs":[{"product_id":"p_refined_gas","quantity":30},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gas_burner_06","name":"Makes Distilled Water","machine_id":"m_gas_burner","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_hydrogen","quantity":20},{"product_id":"p_distilled_water","quantity":30}],"outputs":[{"product_id":"p_distilled_water","quantity":30}]},{"id":"r_gasoline_generator_01","name":"Produces Power. Consumes Gasoline","machine_id":"m_gasoline_generator","cycle_time":2,"power_consumption":-12000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_02","name":"Produces Power. Consumes Gasoline E10","machine_id":"m_gasoline_generator","cycle_time":10,"power_consumption":-24000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_gasolinee10","quantity":0.1}],"outputs":[]},{"id":"r_gasoline_generator_03","name":"Produces Power. Consumes Leaded Gasoline","machine_id":"m_gasoline_generator","cycle_time":5,"power_consumption":-100000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_leaded_gasoline","quantity":0.1}],"outputs":[]},{"id":"r_industrial_firebox_01","name":"Makes Sulfur Dioxide","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_liquid_sulfur","quantity":4.5}],"outputs":[{"product_id":"p_sulfur_dioxide","quantity":9}]},{"id":"r_industrial_firebox_02","name":"Makes Boron","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_boric_acid","quantity":2}],"outputs":[{"product_id":"p_boron","quantity":1}]},{"id":"r_industrial_firebox_03","name":"Makes Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_water","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12}]},{"id":"r_industrial_firebox_04","name":"Makes Filtered Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_filtered_water","quantity":12}],"outputs":[{"product_id":"p_filtered_water","quantity":12}]},{"id":"r_industrial_firebox_05","name":"Makes Distilled Water","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_distilled_water","quantity":12}],"outputs":[{"product_id":"p_distilled_water","quantity":12}]},{"id":"r_industrial_firebox_06","name":"Makes Water, Table Salt","machine_id":"m_industrial_firebox","cycle_time":"Variable","power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_variableproduct","quantity":"Variable"},{"product_id":"p_concentrated_salt_solution","quantity":12}],"outputs":[{"product_id":"p_water","quantity":12},{"product_id":"p_table_salt","quantity":2}]},{"id":"r_industrial_firebox_07","name":"Makes Sodium Carbonate","machine_id":"m_industrial_firebox","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":1.8,"inputs":[{"product_id":"p_water","quantity":1},{"product_id":"p_oak_log","quantity":1}],"outputs":[{"product_id":"p_sodium_carbonate","quantity":16}]},{"id":"r_large_diesel_engine_01","name":"Produces Power. Consumes Crude Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_crude_diesel","quantity":20},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_02","name":"Produces Power. Consumes Poor Quality Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_poor_quality_diesel","quantity":15},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_03","name":"Produces Power. Consumes Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_diesel","quantity":10},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_diesel_engine_04","name":"Produces Power. Consumes Refined Diesel","machine_id":"m_large_diesel_engine","cycle_time":10,"power_consumption":-5000000,"power_type":"MV","pollution":0.648,"inputs":[{"product_id":"p_refined_diesel","quantity":7},{"product_id":"p_machine_oil","quantity":1}],"outputs":[]},{"id":"r_large_turbine_01","name":"Produces Power. Makes Water","machine_id":"m_large_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"MV","pollution":0,"inputs":[{"product_id":"p_steam","quantity":90}],"outputs":[{"product_id":"p_water","quantity":3}]},{"id":"r_boiler_01","name":"Makes Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_water","quantity":3}],"outputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_02","name":"Makes Filtered Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_filtered_water","quantity":3}],"outputs":[{"product_id":"p_filtered_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_boiler_03","name":"Makes Distilled Water, Steam","machine_id":"m_boiler","cycle_time":1,"power_consumption":0,"power_type":"None","pollution":0,"inputs":[{"product_id":"p_water","quantity":3},{"product_id":"p_distilled_water","quantity":3}],"outputs":[{"product_id":"p_distilled_water","quantity":3},{"product_id":"p_steam","quantity":90}]},{"id":"r_modular_turbine_01","name":"Produces Power. Makes Low Pressure Steam","machine_id":"m_modular_turbine","cycle_time":1,"power_consumption":"Variable","power_type":"HV","pollution":0,"inputs":[{"product_id":"p_high_pressure_steam","quantity":24000}],"outputs":[{"product_id":"p_low_pressure_steam","quantity":24000}]},{"id":"r_scrubber_01","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.24","inputs":[{"product_id":"p_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_02","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-3.57","inputs":[{"product_id":"p_filtered_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_03","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"-6.29","inputs":[{"product_id":"p_distilled_water","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_scrubber_04","name":"Makes Residue","machine_id":"m_scrubber","cycle_time":4,"power_consumption":15000,"power_type":"MV","pollution":"6.48","inputs":[{"product_id":"p_residue","quantity":2}],"outputs":[{"product_id":"p_residue","quantity":4}]},{"id":"r_geothermal_well_01","name":"Makes Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_water","quantity":9.09}],"outputs":[{"product_id":"p_water","quantity":6.05}]},{"id":"r_geothermal_well_02","name":"Makes Filtered Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_filtered_water","quantity":9.09}],"outputs":[{"product_id":"p_filtered_water","quantity":6.05}]},{"id":"r_geothermal_well_03","name":"Makes Distilled Water","machine_id":"m_geothermal_well","cycle_time":1,"power_consumption":3000,"power_type":"MV","pollution":0,"inputs":[{"product_id":"p_distilled_water","quantity":9.09}],"outputs":[{"product_id":"p_distilled_water","quantity":6.05}]}]'),Yi={PRODUCTS:"industrialist_products",MACHINES:"industrialist_machines",RECIPES:"industrialist_recipes",CANVAS_STATE:"industrialist_canvas_state"},gc=(e,t)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error(`Error loading ${e}:`,n),t}},Z6=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving ${e}:`,n)}};let $r=gc(Yi.PRODUCTS,Yl),Cn=gc(Yi.MACHINES,Ql),Mn=gc(Yi.RECIPES,Xl);const bt=e=>$r.find(t=>t.id===e),vt=e=>Cn.find(t=>t.id===e),cg=(e,t,n)=>{e.length=0,e.push(...t),Z6(n,e)},S0=e=>cg($r,e,Yi.PRODUCTS),C0=e=>cg(Cn,e,Yi.MACHINES),k0=e=>cg(Mn,e,Yi.RECIPES),J6=()=>gc(Yi.CANVAS_STATE,null),e3=()=>localStorage.removeItem(Yi.CANVAS_STATE),t3=()=>{S0(Yl),C0(Ql),k0(Xl),e3()},dg=e=>e==="Variable"||typeof e=="string"&&e.toLowerCase().includes("variable"),r3=e=>e==="p_variableproduct",_i=(e,t,n)=>{if(r3(e))return n==="item"?"Variable Item":n==="fluid"?"Variable Fluid":"Variable Product";if(e==="p_any_item")return"Variable Item";if(e==="p_any_fluid")return"Variable Fluid";const i=t(e);return i?i.name:"Unknown Product"},n3=e=>dg(e)?"Variable":typeof e=="number"?e.toString():e,ws=e=>typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(2)}MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)}kMF/s`:`${e.toFixed(2)}MF/s`:e,i3=e=>{if(dg(e))return"Variable";if(typeof e=="object"&&e!==null){if("drilling"in e&&"idle"in e)return{drilling:ws(e.drilling),idle:ws(e.idle)};if("max"in e&&"average"in e)return{max:ws(e.max),average:ws(e.average)}}return ws(e)},o3=e=>dg(e)?"Variable":typeof e=="number"?`${e.toFixed(3)}%/hr`:typeof e=="string"?e.includes("%")?e:`${e}%/hr`:e,Z1=(e,t)=>{const n=n3(e.quantity),i=_i(e.product_id,t);return`${n}x ${i}`},a3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],nE=e=>a3.includes(e),Hr=18,Gi=18,In=100,dr={m_geothermal_well:{id:"m_geothermal_well",name:"Geothermal Well",type:"additive",tempIncrease:80,maxTemp:220,canChain:!0,maxChains:3},m_firebox:{id:"m_firebox",name:"Firebox",type:"fixed",outputTemp:240},m_industrial_firebox:{id:"m_industrial_firebox",name:"Industrial Firebox",type:"fixed",outputTemp:300},m_electric_water_heater:{id:"m_electric_water_heater",name:"Electric Water Heater",type:"configurable",tempOptions:[{temp:120,power:1e6},{temp:220,power:25e5},{temp:320,power:5e6}]},m_gas_burner:{id:"m_gas_burner",name:"Gas Burner",type:"product_dependent",temps:{p_water:400,p_filtered_water:405,p_distilled_water:410}},m_liquid_boiler:{id:"m_liquid_boiler",name:"Liquid Boiler",type:"product_dependent",temps:{p_water:105}},m_boiler:{id:"m_boiler",name:"Boiler",type:"boiler",defaultHeatLoss:0,steamOutputProduct:"p_steam",minSteamTemp:100},m_coal_generator:{id:"m_coal_generator",name:"Coal Generator",type:"fixed",outputTemp:150,outputProduct:"p_steam"},m_coal_power_plant:{id:"m_coal_power_plant",name:"Coal Power Plant",type:"fixed",outputTemp:500,outputProduct:"p_high_pressure_steam"},m_nuclear_power_plant:{id:"m_nuclear_power_plant",name:"Nuclear Power Plant",type:"fixed",outputTemp:1500,outputProduct:"p_high_pressure_steam"},m_modular_turbine:{id:"m_modular_turbine",name:"Modular Turbine",type:"passthrough",inputProduct:"p_high_pressure_steam",outputProduct:"p_low_pressure_steam"}},pg=(e,t={},n=Hr,i=null,a=null)=>{const s=dr[e];if(!s)return n;switch(s.type){case"fixed":return s.outputTemp;case"additive":return Math.min(n+s.tempIncrease,s.maxTemp);case"configurable":return t.temperature||s.tempOptions[0].temp;case"product_dependent":return s.temps[i]||s.temps.p_water||400;case"passthrough":return n;case"boiler":const u=a??Gi,l=t.heatLoss??s.defaultHeatLoss;return u-l;default:return n}},J1=(e,t)=>{const n=dr[e];if(!n||n.type!=="configurable")return null;const i=n.tempOptions.find(a=>a.temp===t);return i?i.power:null},Zl=e=>e==null?"":`${Math.round(e)}C`,s3=e=>{const t=dr[e];return t&&t.type==="configurable"},u3=e=>{const t=dr[e];return t&&t.type==="boiler"},l3=e=>{const t=dr[e];return t?t.type==="configurable"?{temperature:t.tempOptions[0].temp}:t.type==="boiler"?{heatLoss:t.defaultHeatLoss}:{}:{}},c3=e=>e<=0?1/0:e>=400?2:800/e,d3=e=>e<=0?40:e<=300?1500/e+5:e<350?10-(e-300)/25:8,p3=e=>e<=18?88:e<=300?3e3/e+10:e<350?20-.2*(e-300):10,f3=e=>{if(e<=0)return 30;const t=2973/11,n=4e3/11;return e<=t?30+-165/1982*e:e<n?-99/2054*e+21081/1027:3},_3=e=>e<=0?1/0:64/(.176*Math.abs(e)),an={m_industrial_drill:{type:"steam_input",formula:c3},m_alloyer:{type:"steam_input",formula:d3},m_coal_liquefaction_plant:{type:"steam_input",formula:p3},m_steam_cracking_plant:{type:"steam_input",formula:f3},m_water_treatment_plant:{type:"steam_input",formula:_3}},Ur=e=>e in an,Wn=(e,t,n)=>{const i=an[e];if(!i)return n;const a=i.formula(t);return isFinite(a)?a:n},hi=e=>!e||!e.inputs?!1:e.inputs.some(t=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(t.product_id)),ew=(e,t)=>{const n=new Map,i=new Map;Object.keys(e.nodes).forEach(l=>{const d=e.nodes[l];d&&(d.inputs.forEach((p,m)=>{i.set(`${l}:${m}`,Hr)}),d.outputs.forEach((p,m)=>{n.set(`${l}:${m}`,Hr)}))});const{sorted:a,cycleNodes:s}=h3(e),u=(l,d=!1)=>{const p=e.nodes[l];if(!p)return!1;const m={id:p.recipe.machine_id},_=dr[m.id];let h=!1;return p.inputs.forEach((g,x)=>{const q=m3(e,t,l,x,n,!d),w=i.get(`${l}:${x}`),b=q!==null?q:w;Math.abs(b-w)>.01&&(i.set(`${l}:${x}`,b),h=!0)}),p.outputs.forEach((g,x)=>{var w,b;let q=Hr;if(_){if(_.type==="fixed")q=_.outputTemp;else if(_.type==="additive"){if(p.inputs.length>0){const k=i.get(`${l}:0`)||Hr;k>_.maxTemp?q=k:q=Math.min(k+_.tempIncrease,_.maxTemp)}}else if(_.type==="configurable")q=((w=p.recipe.temperatureSettings)==null?void 0:w.temperature)||_.tempOptions[0].temp;else if(_.type==="product_dependent"){if(p.inputs.length>0){const k=p.inputs[0].productId;q=_.temps[k]||_.temps.p_water||400}}else if(_.type==="boiler"){if(p.inputs.length>=2){const k=i.get(`${l}:1`)||Hr,S=((b=p.recipe.temperatureSettings)==null?void 0:b.heatLoss)||_.defaultHeatLoss,M=k-S;x===0?q=M*.85:x===1&&(M<_.minSteamTemp?q=Math.max(M,Hr):q=M)}}else if(_.type==="passthrough"){const k=p.inputs.findIndex(S=>S.productId===_.inputProduct);k>=0&&(q=i.get(`${l}:${k}`)||Hr)}}n.set(`${l}:${x}`,q)}),h};if(a.forEach(l=>{s.has(l)||u(l)}),s.size>0){let d=0,p=!0;const m=a.filter(h=>s.has(h));for(;p&&d<100;)p=!1,m.forEach(h=>{u(h,!0)&&(p=!0)}),d++;const _=new Set;a.forEach(h=>{if(s.has(h))return;const g=e.nodes[h];g&&g.inputs.forEach((x,q)=>{const w=e.products[x.productId];if(!w)return;w.connections.filter(k=>k.targetNodeId===h&&k.targetInputIndex===q).forEach(k=>{s.has(k.sourceNodeId)&&_.add(h)})})}),_.forEach(h=>{u(h,!1)})}return{outputTemperatures:n,inputTemperatures:i}},m3=(e,t,n,i,a,s=!0)=>{const u=e.products[e.nodes[n].inputs[i].productId];if(!u)return s?Hr:null;const l=u.connections.filter(_=>_.targetNodeId===n&&_.targetInputIndex===i);if(l.length===0)return s?Hr:null;const d=[];if(l.forEach(_=>{var g;const h=a.get(`${_.sourceNodeId}:${_.sourceOutputIndex}`);if(h!=null){const x=((g=t.byConnection[_.id])==null?void 0:g.flowRate)||0;d.push({temp:h,flow:x})}}),d.length===0)return s?Hr:null;const p=d.reduce((_,h)=>_+h.flow,0);if(p>0){const _=d.reduce((h,g)=>h+g.temp*g.flow,0);return Math.round(_/p*1e10)/1e10}const m=d.reduce((_,h)=>_+h.temp,0);return Math.round(m/d.length*1e10)/1e10},h3=e=>{const t=[],n=new Set,i=new Set,a=new Set,s=(u,l=[])=>{if(n.has(u))return;if(i.has(u)){const m=l.indexOf(u);for(let _=m;_<l.length;_++)a.add(l[_]);a.add(u);return}i.add(u);const d=[...l,u],p=e.nodes[u];p&&p.inputs.forEach((m,_)=>{const h=e.products[m.productId];h&&h.connections.filter(x=>x.targetNodeId===u&&x.targetInputIndex===_).forEach(x=>{n.has(x.sourceNodeId)||s(x.sourceNodeId,d)})}),i.delete(u),n.add(u),t.push(u)};return Object.keys(e.nodes).forEach(u=>{n.has(u)||s(u)}),{sorted:t,cycleNodes:a}},M0=(e,t,n)=>e.map(i=>{if(!n.nodes[i.id])return i;const s={id:i.data.recipe.machine_id},u=dr[s.id],l=Ur(s.id),d=i.data.recipe.outputs.map((m,_)=>{const h=t.outputTemperatures.get(`${i.id}:${_}`);if(h!=null){if((u==null?void 0:u.type)==="boiler"&&m.product_id==="p_steam"){const g=u.minSteamTemp||100;return h<g?{...m,temperature:h,quantity:0,originalQuantity:m.originalQuantity||m.quantity}:{...m,temperature:h,quantity:m.originalQuantity||m.quantity,originalQuantity:m.originalQuantity||m.quantity}}return{...m,temperature:h}}return m});let p={...i.data.recipe,outputs:d};if(l){const m=an[s.id];if((m==null?void 0:m.type)==="steam_input"){const _=i.data.recipe.inputs.findIndex(h=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(h.product_id));if(_>=0){const h=t.inputTemperatures.get(`${i.id}:${_}`);if(h!=null&&(p={...p,tempDependentInputTemp:h},s.id==="m_water_treatment_plant")){const x=90*Wn(s.id,h,1);p={...p,inputs:p.inputs.map((q,w)=>w===1&&["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(q.product_id)?{...q,quantity:x,originalQuantity:90}:q)}}}}}return{...i,data:{...i.data,recipe:p}}}),E0=[{id:"copper",name:"Copper Drill Head",product_id:"p_copper_drill_head"},{id:"iron",name:"Iron Drill Head",product_id:"p_iron_drill_head"},{id:"steel",name:"Steel Drill Head",product_id:"p_steel_drill_head"},{id:"tungsten_carbide",name:"Tungsten-Carbide Drill Head",product_id:"p_tungsten_carbide_drill_head"}],I0=[{id:"none",name:"None",product_id:null},{id:"water",name:"Water",product_id:"p_water"},{id:"acetic_acid",name:"Acetic Acid",product_id:"p_acetic_acid"},{id:"hydrochloric_acid",name:"Hydrochloric Acid",product_id:"p_hydrochloric_acid"},{id:"sulfuric_acid",name:"Sulfuric Acid",product_id:"p_sulfuric_acid"}],y3={water:10,acetic_acid:3,hydrochloric_acid:1.5,sulfuric_acid:1},g3=12,v3=3.1,x3=.1,w3=.02,b3=2,Ws={100:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],300:[{product_id:"p_sand",quantity:3},{product_id:"p_gravel",quantity:3},{product_id:"p_soil",quantity:3},{product_id:"p_rich_soil",quantity:1}],900:[{product_id:"p_coal",quantity:6},{product_id:"p_gravel",quantity:9},{product_id:"p_raw_iron",quantity:5},{product_id:"p_raw_copper",quantity:5}],1200:[{product_id:"p_coal",quantity:20},{product_id:"p_gravel",quantity:6},{product_id:"p_raw_iron",quantity:10},{product_id:"p_shallow_earth_fragment",quantity:3}],1500:[{product_id:"p_raw_lead",quantity:1},{product_id:"p_gravel",quantity:8},{product_id:"p_raw_iron",quantity:8},{product_id:"p_shallow_earth_fragment",quantity:5}],1800:[{product_id:"p_raw_lead",quantity:5},{product_id:"p_rock",quantity:8},{product_id:"p_medium_earth_fragment",quantity:2},{product_id:"p_shallow_earth_fragment",quantity:1}],2e3:[{product_id:"p_raw_lead",quantity:9.27},{product_id:"p_medium_earth_fragment",quantity:3.35},{product_id:"p_rock",quantity:9.36}],2200:[{product_id:"p_raw_iron",quantity:9.57},{product_id:"p_shallow_earth_fragment",quantity:2.31},{product_id:"p_raw_lead",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:3.13}],2400:[{product_id:"p_medium_earth_fragment",quantity:4.46},{product_id:"p_rock",quantity:9.79}],2600:[{product_id:"p_medium_earth_fragment",quantity:8.44},{product_id:"p_rock",quantity:10.22}],2800:[{product_id:"p_gravel",quantity:1.78},{product_id:"p_raw_iron",quantity:10.35},{product_id:"p_shallow_earth_fragment",quantity:2.51},{product_id:"p_raw_lead",quantity:2.9}],3e3:[{product_id:"p_shallow_earth_fragment",quantity:1.54},{product_id:"p_raw_lead",quantity:1.92},{product_id:"p_rock",quantity:6.04}],3200:[{product_id:"p_rock",quantity:5.14},{product_id:"p_medium_earth_fragment",quantity:4.62},{product_id:"p_raw_lead",quantity:3.1},{product_id:"p_raw_iron",quantity:6.51}],3400:[{product_id:"p_raw_iron",quantity:8.26},{product_id:"p_raw_lead",quantity:8.58},{product_id:"p_rock",quantity:7.76}],3600:[{product_id:"p_medium_earth_fragment",quantity:6.34},{product_id:"p_raw_lead",quantity:6.41},{product_id:"p_rock",quantity:6.15}],3800:[{product_id:"p_medium_earth_fragment",quantity:6.39},{product_id:"p_rock",quantity:9.58},{product_id:"p_raw_lead",quantity:3.45},{product_id:"p_coal",quantity:30.39}],4e3:[{product_id:"p_table_salt",quantity:58.54},{product_id:"p_medium_earth_fragment",quantity:3.67},{product_id:"p_rock",quantity:5.93},{product_id:"p_raw_lead",quantity:9.58}],4200:[{product_id:"p_medium_earth_fragment",quantity:6.31},{product_id:"p_rock",quantity:5.01},{product_id:"p_raw_lead",quantity:4.81},{product_id:"p_coal",quantity:39.32}],4400:[{product_id:"p_rock",quantity:14.79},{product_id:"p_coal",quantity:40.21}],4600:[{product_id:"p_raw_zinc",quantity:7.61},{product_id:"p_bauxite_residue",quantity:1.59},{product_id:"p_rock",quantity:7.83}],4800:[{product_id:"p_medium_earth_fragment",quantity:7.77},{product_id:"p_raw_zinc",quantity:9.79},{product_id:"p_bauxite_residue",quantity:1.2},{product_id:"p_rock",quantity:2.63}],5e3:[{product_id:"p_medium_earth_fragment",quantity:10.88},{product_id:"p_raw_zinc",quantity:4.8},{product_id:"p_bauxite_residue",quantity:1.22},{product_id:"p_rock",quantity:5.18}],5200:[{product_id:"p_raw_iron",quantity:21.61},{product_id:"p_rock",quantity:7.61},{product_id:"p_deep_earth_fragment",quantity:1.4},{product_id:"p_raw_lead",quantity:4.79}],5400:[{product_id:"p_medium_earth_fragment",quantity:9.5},{product_id:"p_bauxite_residue",quantity:1},{product_id:"p_rock",quantity:8.5}],5600:[{product_id:"p_rock",quantity:5.4},{product_id:"p_raw_lead",quantity:3.82},{product_id:"p_raw_copper",quantity:18.32},{product_id:"p_bauxite_residue",quantity:.92}],5800:[{product_id:"p_medium_earth_fragment",quantity:10.86},{product_id:"p_raw_lead",quantity:15.83}],6e3:[{product_id:"p_coal",quantity:54},{product_id:"p_raw_lead",quantity:12.06},{product_id:"p_rock",quantity:5.18}],6200:[{product_id:"p_raw_copper",quantity:50.73},{product_id:"p_deep_earth_fragment",quantity:4.42},{product_id:"p_bauxite_residue",quantity:.96},{product_id:"p_rock",quantity:6.55}],6400:[{product_id:"p_bauxite_residue",quantity:2.3},{product_id:"p_deep_earth_fragment",quantity:7.71},{product_id:"p_rock",quantity:7.69}],6600:[{product_id:"p_rock",quantity:8.81},{product_id:"p_deep_earth_fragment",quantity:9.03},{product_id:"p_bauxite_residue",quantity:1.9}],6800:[{product_id:"p_raw_copper",quantity:80.75},{product_id:"p_bauxite_residue",quantity:1.6},{product_id:"p_deep_earth_fragment",quantity:5.87},{product_id:"p_rock",quantity:10.35}],7e3:[{product_id:"p_raw_lead",quantity:4.3},{product_id:"p_deep_earth_fragment",quantity:10.9},{product_id:"p_rock",quantity:11.65},{product_id:"p_bauxite_residue",quantity:1.33}],7200:[{product_id:"p_raw_lead",quantity:5.54},{product_id:"p_bauxite_residue",quantity:1.06},{product_id:"p_deep_earth_fragment",quantity:8.57},{product_id:"p_rock",quantity:10.79}],7400:[{product_id:"p_raw_copper",quantity:42.95},{product_id:"p_bauxite_residue",quantity:1.05},{product_id:"p_deep_earth_fragment",quantity:8.7},{product_id:"p_rock",quantity:11.38}],7600:[{product_id:"p_deep_earth_fragment",quantity:4.9},{product_id:"p_bauxite_residue",quantity:.99},{product_id:"p_rock",quantity:9.79}],7800:[{product_id:"p_medium_earth_fragment",quantity:7.67},{product_id:"p_bauxite_residue",quantity:2.23},{product_id:"p_deep_earth_fragment",quantity:8.43}],8e3:[{product_id:"p_bauxite_residue",quantity:2.11},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:11.65}],8200:[{product_id:"p_raw_zirconium",quantity:.61},{product_id:"p_rock",quantity:10.65},{product_id:"p_deep_earth_fragment",quantity:3.52}],8400:[{product_id:"p_raw_zirconium",quantity:1.73},{product_id:"p_raw_uranium",quantity:.15},{product_id:"p_deep_earth_fragment",quantity:1.52}],8600:[{product_id:"p_raw_zirconium",quantity:.53},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:10.52}],8800:[{product_id:"p_deep_earth_fragment",quantity:4.24},{product_id:"p_raw_uranium",quantity:2.15},{product_id:"p_raw_iron",quantity:13.52}],9e3:[{product_id:"p_raw_lead",quantity:8.59},{product_id:"p_raw_zirconium",quantity:.72},{product_id:"p_raw_iron",quantity:3.52}]},q3=()=>Object.keys(Ws).map(e=>parseInt(e)).sort((e,t)=>e-t),S3=(e,t)=>{switch(e){case"copper":return t/150;case"iron":return .04*Math.pow(t,.25);case"steel":return .02*Math.pow(t,.25);case"tungsten_carbide":return .005*Math.pow(t,.25);default:return 1}},C3=(e,t)=>{switch(e){case"none":return Math.pow(t,2)/9e5;case"water":return Math.pow(t,2)/1875e3;case"acetic_acid":return Math.pow(t,.8)/450;case"sulfuric_acid":return .09*Math.pow(t,.25);case"hydrochloric_acid":return t<6e3?13e-6*Math.pow(t,1.5-5e-5*t)+4.3875*Math.pow(10,-13.3)*Math.pow(t,3):.09*Math.pow(t,.25);default:return 1}},Vo=(e,t,n,i)=>{if(!e||!i)return null;const a=S3(e,i),s=C3(t||"none",i),u=n?1.1:1,l=.5*a*s*u,d=Math.ceil(100/l),p=g3,m=n?100:50,_=2*i/m,h=d+p+_,g=d/h;return{deteriorationRate:l,lifeTime:d,replacementTime:p,travelTime:_,totalCycleTime:h,dutyCycle:g,drillingPower:v3,idlePower:x3,pollution:w3}},iE=(e,t,n,i)=>{const a=[],s=Vo(e,t,n,i);if(!s){if(e){const u=E0.find(l=>l.id===e);u&&a.push({product_id:u.product_id,quantity:"Variable"})}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);u!=null&&u.product_id&&a.push({product_id:u.product_id,quantity:"Variable"})}return n&&a.push({product_id:"p_machine_oil",quantity:"Variable"}),a}if(e){const u=E0.find(l=>l.id===e);if(u){const l=1/s.totalCycleTime;a.push({product_id:u.product_id,quantity:parseFloat(l.toFixed(6))})}}if(t&&t!=="none"){const u=I0.find(l=>l.id===t);if(u!=null&&u.product_id){const d=(y3[t]||0)*s.dutyCycle;a.push({product_id:u.product_id,quantity:parseFloat(d.toFixed(6))})}}return n&&a.push({product_id:"p_machine_oil",quantity:b3}),a},oE=(e,t,n,i)=>{if(!i)return[];const a=Ws[i];if(!a)return[];const s=Vo(e,t,n,i);if(!s)return a.map(l=>({...l,quantity:"Variable"}));const u=n?1.1:1;return a.map(l=>{const d=l.quantity*u*s.dutyCycle;return{product_id:l.product_id,quantity:parseFloat(d.toFixed(4))}})},tw={id:"r_mineshaft_drill",name:"Mineshaft Drill",machine_id:"m_mineshaft_drill",cycle_time:1,power_consumption:"Variable",power_type:"HV",pollution:"Variable",inputs:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isMineshaftDrill:!0},rw=4,k3=20,M3=4,nw=5e5,E3=.3,I3=10,bl={logic_plates:3,copper_wires:12,semiconductors:3,gold_wires:6},T3=()=>{const e=[];for(let t=1;t<=6;t++){const n=Math.pow(2,t),i=`${n}x Microchip`,a=`p_${n}x_microchip`;e.push({outerStage:1,innerStage:n,innerPower:t,name:i,productId:a})}for(let t=2;t<=8;t++){const a=`${t}x64x Microchip`,s=`p_${t}x64x_microchip`;e.push({outerStage:t,innerStage:64,innerPower:6,name:a,productId:s})}return e},aE=T3(),N3=e=>aE.find(t=>t.productId===e),ru=(e,t,n=0)=>{const i=N3(e);if(!i)return null;const s=Math.log2(i.innerStage)+(i.outerStage-1)*6,u=rw*s,l=t?M3:k3,d=n/6,p=s*rw*(l+d)+I3,m=bl.logic_plates*s,_=bl.copper_wires*s,h=bl.semiconductors*s,g=bl.gold_wires*s,x=[{product_id:"p_logic_plate",quantity:m},{product_id:"p_copper_wire",quantity:_},{product_id:"p_semiconductor",quantity:h},{product_id:"p_gold_wire",quantity:g}];t&&x.push({product_id:"p_machine_oil",quantity:parseFloat((E3*p).toFixed(6))});const q=[{product_id:e,quantity:1}],w=nw/l,b=nw/(t?.8:4);return{outerStage:i.outerStage,innerStage:i.innerStage,totalStages:s,totalSteps:u,avgStepTime:l,cycleTime:p,inputs:x,outputs:q,avgPowerConsumption:w,maxPowerConsumption:b,logicPlates:m,copperWires:_,semiconductors:h,goldWires:g}},sE=(e,t)=>{const n=ru(e,t,0);return n?n.inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}]},uE=(e,t)=>{const n=ru(e,t,0);return n?n.outputs:[{product_id:"p_variableproduct",quantity:"Variable"}]},iw={id:"r_logic_assembler",name:"Logic Assembler",machine_id:"m_logic_assembler",cycle_time:"Variable",power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:[{product_id:"p_variableproduct",quantity:"Variable"}],isLogicAssembler:!0},T0=11,lE=2,P3=2e5,cE=1,j3=3,dE=e=>e>=-60&&e<25||e>=50&&e<75?345:e>=25&&e<50?325:e>=75&&e<100||e>=-150&&e<-60?425:690,pE=e=>Math.ceil(e/j3),Jl=(e,t,n,i,a,s)=>{if(!e||!t||!n||!i||a!==1)return null;const u=pE(n),l=dE(s),d=n*cE,p=e/l,m=t/T0,_=Math.min(p,m),h=_*lE,g=t*P3/T0;return{trees:e,harvesters:t,sprinklers:n,waterTanks:u,outputs:i,controller:a,growthTime:l,waterConsumption:d,sustainableHarvestRate:p,maxHarvestRate:m,actualHarvestRate:_,logOutput:h,avgPowerConsumption:g,isTreeLimited:p<m}},fE=e=>!e||e<1?[{product_id:"p_water",quantity:"Variable"}]:[{product_id:"p_water",quantity:e*cE}],fg=(e,t,n)=>{if(!e||!t)return[{product_id:"p_oak_log",quantity:"Variable"}];const i=dE(n),a=e/i,s=t/T0,l=Math.min(a,s)*lE;return[{product_id:"p_oak_log",quantity:parseFloat(l.toFixed(6))}]},ow={id:"r_tree_farm",name:"Tree Farm",machine_id:"m_tree_farm",cycle_time:1,power_consumption:"Variable",power_type:"MV",pollution:0,inputs:[{product_id:"p_water",quantity:"Variable"}],outputs:[{product_id:"p_oak_log",quantity:"Variable"}],isTreeFarm:!0},_g=[{id:"p_coal",name:"Coal",product_id:"p_coal",energy:3e4},{id:"p_coke_fuel",name:"Coke Fuel",product_id:"p_coke_fuel",energy:6e5},{id:"p_planks",name:"Planks",product_id:"p_planks",energy:9e3},{id:"p_oak_log",name:"Oak Log",product_id:"p_oak_log",energy:16e3}],_E={r_industrial_firebox_01:9e5,r_industrial_firebox_02:9e5,r_industrial_firebox_03:3e5,r_industrial_firebox_04:3e5,r_industrial_firebox_05:3e5,r_industrial_firebox_06:3e5,r_industrial_firebox_07:16e3},R3={r_industrial_firebox_07:1},mE=e=>_g.find(t=>t.id===e),ec=(e,t)=>{const n=_E[e],i=mE(t);if(!n||!i)return null;const a=n/i.energy,s=R3[e]||0,u=a+s,l=1,d=a;return{energyNeeded:n,fuelEnergy:i.energy,waitTime:a,additionalWait:s,cycleTime:u,fuelConsumptionRate:l,fuelPerCycle:d}},N0=(e,t,n)=>{if(n==="r_industrial_firebox_07")return e;const i=ec(n,t);if(!i)return e;const a=mE(t);if(!a)return e;const s={product_id:a.product_id,quantity:parseFloat(i.fuelPerCycle.toFixed(6))},u=_g.map(d=>d.product_id),l=e.filter(d=>d.product_id!=="p_variableproduct"&&!u.includes(d.product_id));return[s,...l]},hE=e=>e in _E,yE=(e,t)=>{const i=(e-100)/5;let a=1,s=1;e<100?(a=1+i*.05,s=1+i*.06666666666666667):e>100&&(a=1+i*.05,s=1+i*.1);const l=(t-100)/5;let d=1,p=1;t<100?(d=1+l*-.0625,p=1+l*.05):t>100&&(d=1+l*-.0425,p=1+l*.25);const m=a*d,_=a,h=s+p-1;return{inputMultiplier:m,outputMultiplier:_,powerMultiplier:h}},V3=(e,t,n)=>{const i=yE(t,n),a=e.inputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.inputMultiplier).toFixed(6)):l.quantity})),s=e.outputs.map(l=>({...l,quantity:typeof l.quantity=="number"?parseFloat((l.quantity*i.outputMultiplier).toFixed(6)):l.quantity})),u=typeof e.power_consumption=="number"?parseFloat((e.power_consumption*i.powerMultiplier).toFixed(2)):e.power_consumption;return{...e,inputs:a,outputs:s,power_consumption:u,chemicalPlantSettings:{speedFactor:t,efficiencyFactor:n}}},Wi=7e3,mg=140,hg=70,gE=1e6,aw=240,Pp=29.166666666666668,Ts=240,vE=480,Vl=(e,t)=>{const n=e+t;let i;return n<=Ts?i=Pp:n>=vE?i=Pp/2:i=Pp*Ts/n,{cycleTime:i,concreteBlocksPerCycle:mg,leadIngotsPerCycle:hg,totalFlow:n,powerConsumption:gE}},tc=(e,t,n,i)=>{const a=Math.min(e,aw),s=Math.min(t,aw),u=a+s;let l,d;return u<=Ts?(l=Wi,d=Wi):u>=vE?(l=Wi/2,d=Wi/2):(l=Wi*Ts/u,d=Wi*Ts/u),[{product_id:n||"p_variableproduct",quantity:l,isAnyProduct:n==="p_any_item"||!n,acceptedType:"item"},{product_id:i||"p_variableproduct",quantity:d,isAnyProduct:i==="p_any_fluid"||!i,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}]},P0={id:"r_underground_waste_facility",name:"Underground Waste Facility",machine_id:"m_underground_waste_facility",cycle_time:29.166666666666668,power_consumption:gE,power_type:"MV",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"item"},{product_id:"p_variableproduct",quantity:Wi,isAnyProduct:!0,acceptedType:"fluid"},{product_id:"p_concrete_block",quantity:mg},{product_id:"p_lead_ingot",quantity:hg}],outputs:[],isWasteFacility:!0},j0=15,O3=2,F3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ns=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;F3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},R0=e=>{const t=[];for(let n=0;n<O3;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:j0})}return t},V0={id:"r_liquid_dump",name:"Liquid Dump",machine_id:"m_liquid_dump",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:[{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:j0},{product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:j0}],outputs:[],isLiquidDump:!0},xE=15,wE=8,A3=["p_water","p_filtered_water","p_distilled_water","p_steam","p_low_pressure_steam","p_high_pressure_steam"],Ps=(e,t=null)=>{let n=0;return e.forEach((i,a)=>{if(!i.product_id||i.product_id==="p_any_fluid")return;const s=t&&t[a]!==void 0?t[a]:i.quantity||0;A3.includes(i.product_id)?n+=0:i.product_id==="p_residue"?n+=8.64*s:n+=.0216*s}),n},O0=e=>{const t=[];for(let n=0;n<wE;n++){const i=(e==null?void 0:e[n])||"p_variableproduct";t.push({product_id:i,quantity:15,isAnyProduct:i==="p_any_fluid"||i==="p_variableproduct",acceptedType:"fluid",maxFlow:xE})}return t},F0={id:"r_liquid_burner",name:"Liquid Burner",machine_id:"m_liquid_burner",cycle_time:1,power_consumption:0,power_type:"None",pollution:0,inputs:Array(wE).fill(null).map(()=>({product_id:"p_variableproduct",quantity:15,isAnyProduct:!0,acceptedType:"fluid",maxFlow:xE})),outputs:[],isLiquidBurner:!0},sw=e=>e?e>=1e6?`${(e/1e6).toFixed(1)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(1)} kMF/s`:`${e.toFixed(0)} MF/s`:"N/A",L3=(e,t,n)=>{switch(e){case"drill":return D3();case"assembler":return B3();case"treeFarm":return z3(n);case"firebox":return $3(t);case"temperature":return H3(t);case"boiler":return W3();case"chemicalPlant":return U3();case"wasteFacility":return G3();case"liquidDump":return K3();case"liquidBurner":return Y3();default:return null}},D3=()=>({title:"Mineshaft Drill Settings",defaultSettings:{drillHead:"",consumable:"none",machineOil:!1,depth:""},fields:[{type:"select",key:"drillHead",label:"Drill Head:",options:[{value:"",label:"None (Variable)"},...E0.map(e=>({value:e.id,label:e.name}))]},{type:"select",key:"consumable",label:"Consumable:",options:I0.map(e=>({value:e.id,label:e.name}))},{type:"checkbox",key:"machineOil",label:"Machine Oil (2/s)"},{type:"select",key:"depth",label:"Target Depth:",options:[{value:"",label:"None (Variable)"},...q3().map(e=>({value:e.toString(),label:`${e} m`}))]}],calculateMetrics:e=>e.drillHead&&e.depth?Vo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null,renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Deterioration: ",e.deteriorationRate.toFixed(4),"%/s"]}),f.jsxs("div",{children:["Life Time: ",e.lifeTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Replacement: ",e.replacementTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Travel Time: ",e.travelTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Total Cycle: ",e.totalCycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Efficiency: ",(e.dutyCycle*100).toFixed(1),"%"]})]})]}),onApply:e=>{const t=iE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),n=oE(e.drillHead,e.consumable,e.machineOil,e.depth?parseInt(e.depth):null),i=e.drillHead&&e.depth?Vo(e.drillHead,e.consumable,e.machineOil,parseInt(e.depth)):null;return{settings:e,inputs:t,outputs:n,metrics:i}}}),B3=()=>({title:"Logic Assembler Settings",defaultSettings:{outerStage:"",innerStage:"",machineOil:!1,tickCircuitDelay:0},fields:[{type:"dual-select",key:"microchip",outerKey:"outerStage",innerKey:"innerStage",label:"Target Microchip:",outerOptions:[1,2,3,4,5,6,7,8],innerOptions:[2,4,8,16,32,64],suffix:"Microchip",renderPreview:e=>{const t=e.outerStage,n=e.innerStage,i=t&&n?parseInt(t)===1?`${n}x Microchip`:`${t}x${n}x Microchip`:"";return i?f.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:i}):null}},{type:"checkbox",key:"machineOil",label:"Machine Oil (0.3/s, 5x speed)"},{type:"number",key:"tickCircuitDelay",label:"Tick Circuit Delay (ticks):",min:0,step:.1,placeholder:"0",parse:e=>e===""?0:parseFloat(e)}],calculateMetrics:e=>{const n=!e.outerStage||!e.innerStage?"":e.outerStage==="1"||parseInt(e.outerStage)===1?`p_${e.innerStage}x_microchip`:`p_${e.outerStage}x${e.innerStage}x_microchip`;return n?ru(n,e.machineOil,e.tickCircuitDelay):null},renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Total Stages: ",e.totalStages]}),f.jsxs("div",{children:["Total Steps: ",e.totalSteps]}),f.jsxs("div",{children:["Avg Step Time: ",e.avgStepTime,"s"]}),f.jsxs("div",{children:["Cycle Time: ",e.cycleTime.toFixed(2),"s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px",marginBottom:"10px"},children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"6px"},children:"Power Consumption:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Max: ",(e.maxPowerConsumption/1e3).toFixed(2)," kMF/s"]}),f.jsxs("div",{children:["Avg: ",(e.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]})]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"10px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"6px"},children:"Materials per Cycle:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px",paddingLeft:"10px"},children:[f.jsxs("div",{children:["Logic Plates: ",e.logicPlates]}),f.jsxs("div",{children:["Copper Wires: ",e.copperWires]}),f.jsxs("div",{children:["Semiconductors: ",e.semiconductors]}),f.jsxs("div",{children:["Gold Wires: ",e.goldWires]})]})]})]}),onApply:e=>{var u,l;const t={outerStage:e.outerStage||((u=e.microchip)==null?void 0:u.outer)||"",innerStage:e.innerStage||((l=e.microchip)==null?void 0:l.inner)||"",machineOil:e.machineOil,tickCircuitDelay:e.tickCircuitDelay},i=!t.outerStage||!t.innerStage?"":parseInt(t.outerStage)===1?`p_${t.innerStage}x_microchip`:`p_${t.outerStage}x${t.innerStage}x_microchip`,a=sE(i,t.machineOil),s=uE(i,t.machineOil);return{settings:t,inputs:a,outputs:s,metrics:null}}}),z3=e=>({title:"Tree Farm Settings",defaultSettings:{trees:450,harvesters:20,sprinklers:24,outputs:8,controller:1},fields:[{type:"number",key:"trees",label:"Trees (max 500):",min:1,max:500,step:1,hasError:t=>t>500||t<1},{type:"number",key:"harvesters",label:"Harvesters:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"sprinklers",label:"Sprinklers:",min:1,step:1,hasError:t=>t<1,hint:function(t){const n=pE(t);return`Requires ${n} water tank${n!==1?"s":""} (3 sprinklers per tank)`}},{type:"number",key:"outputs",label:"Outputs:",min:1,step:1,hasError:t=>t<1},{type:"number",key:"controller",label:"Controller:",min:1,max:1,step:1,disabled:()=>!0}],calculateMetrics:t=>Jl(t.trees,t.harvesters,t.sprinklers,t.outputs,t.controller,e),renderMetrics:(t,n)=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Growth Time: ",t.growthTime,"s (at ",typeof e=="number"?e.toFixed(1):e,"% pollution)"]}),f.jsxs("div",{children:["Water Tanks: ",t.waterTanks]}),f.jsxs("div",{children:["Sustainable Rate: ",t.sustainableHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Max Harvest Rate: ",t.maxHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Actual Rate: ",t.actualHarvestRate.toFixed(4)," trees/s"]}),f.jsxs("div",{children:["Power: ",(t.avgPowerConsumption/1e3).toFixed(2)," kMF/s"]}),t.isTreeLimited&&f.jsx("div",{style:{color:"var(--settings-output-label)",marginTop:"8px",fontStyle:"italic"},children:" Limited by tree regrowth rate"})]})]}),hasErrors:t=>t.trees>500||t.trees<1||t.harvesters<1||t.sprinklers<1||t.outputs<1,onApply:(t,n)=>{const i=fE(t.sprinklers),a=fg(t.trees,t.harvesters,e);return{settings:t,inputs:i,outputs:a,metrics:null}}}),$3=e=>({title:"Industrial Firebox Settings",defaultSettings:{fuel:"p_coal"},fields:[{type:"select",key:"fuel",label:"Fuel Type:",options:_g.map(t=>({value:t.id,label:`${t.name} (${(t.energy/1e3).toFixed(0)}k energy)`}))}],calculateMetrics:t=>ec(e.id,t.fuel),renderMetrics:(t,n)=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Calculated Metrics:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6",marginBottom:"12px"},children:[f.jsxs("div",{children:["Energy Needed: ",(t.energyNeeded/1e3).toFixed(0),"k"]}),f.jsxs("div",{children:["Fuel Energy: ",(t.fuelEnergy/1e3).toFixed(0),"k per unit"]}),f.jsxs("div",{children:["Wait Time: ",t.waitTime.toFixed(2),"s"]}),t.additionalWait>0&&f.jsxs("div",{children:["Additional Wait: +",t.additionalWait,"s"]}),f.jsxs("div",{style:{fontWeight:600,marginTop:"8px",color:"#f5d56a"},children:["Total Cycle: ",t.cycleTime.toFixed(2),"s"]}),f.jsxs("div",{children:["Fuel Per Cycle: ",t.fuelPerCycle.toFixed(2)," units"]}),f.jsxs("div",{style:{fontSize:"11px",fontStyle:"italic",marginTop:"8px",color:"var(--text-muted)"},children:["Rate: ",(1/t.cycleTime).toFixed(4)," cycles/s"]})]}),f.jsxs("div",{style:{borderTop:"1px solid rgba(212, 166, 55, 0.3)",paddingTop:"12px"},children:[f.jsx("div",{style:{color:"var(--settings-input-label)",fontWeight:600,marginBottom:"8px",fontSize:"12px"},children:"Inputs (per cycle):"}),f.jsx("div",{style:{color:"#999",lineHeight:"1.5",fontSize:"12px"},children:N0(e.inputs,n.fuel,e.id).map((i,a)=>{const s=typeof i.quantity=="number"?i.quantity.toFixed(4):i.quantity,u=_i(i.product_id,bt);return f.jsxs("div",{children:[s,"x ",u]},a)})})]})]}),onApply:(t,n)=>{const i=ec(n.id,t.fuel),a=N0(n.inputs,t.fuel,n.id);return{settings:t,inputs:a,outputs:[],metrics:i}}}),H3=e=>{var i,a;const t=e.machine_id,n=dr[t];return{title:`${n.name} Settings`,defaultSettings:{temperature:((a=(i=n.tempOptions)==null?void 0:i[0])==null?void 0:a.temp)||120},fields:[{type:"select",key:"temperature",label:"Output Temperature:",parse:s=>parseInt(s),options:n.tempOptions.map(s=>({value:s.temp,label:`${Zl(s.temp)} - ${sw(s.power)}`}))},{type:"info-box",key:"temperature",title:"Preview:",render:(s,u)=>{const l=u.temperature,d=J1(t,l);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:["Output Temperature: ",Zl(l)]}),f.jsxs("div",{children:["Power Consumption: ",sw(d)]})]})}}],onApply:(s,u)=>{const l=J1(t,s.temperature),d=u.outputs.map(p=>({...p,temperature:pg(t,s)}));return{settings:s,inputs:[],outputs:d,metrics:l}}}},W3=()=>({title:"Boiler Settings",defaultSettings:{heatLoss:0},fields:[{type:"number",key:"heatLoss",label:"Heat Loss (C):",min:0,max:50,step:.1,placeholder:"8",hint:"Temperature loss when converting hot water to steam. Default is 0C."},{type:"info-box",title:"How it works:",render:e=>f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[" Boiler uses the ",f.jsx("strong",{children:"second input"})," (hot water coolant) temperature"]}),f.jsxs("div",{children:[" Steam output temp = Coolant temp - ",e,"C"]}),f.jsx("div",{children:" If output temp < 100C, no steam is produced"}),f.jsx("div",{children:" Water output is cooled (no temperature)"}),f.jsxs("div",{style:{marginTop:"8px",fontStyle:"italic",fontSize:"12px"},children:["Tip: For 100C steam with ",e,"C loss, use ",100+e,"C coolant"]})]})}],onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),U3=()=>({title:"Chemical Plant Settings",defaultSettings:{speedFactor:100,efficiencyFactor:100},fields:[{type:"number-buttons",key:"speedFactor",label:"Speed Factor",min:50,max:200,step:5,defaultValue:100},{type:"number-buttons",key:"efficiencyFactor",label:"Efficiency Factor",min:80,max:120,step:5,defaultValue:100}],calculateMetrics:e=>yE(e.speedFactor,e.efficiencyFactor),renderMetrics:e=>f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"#f5d56a",fontWeight:600,marginBottom:"12px"},children:"Applied Multipliers:"}),f.jsxs("div",{style:{color:"#999",lineHeight:"1.6"},children:[f.jsxs("div",{children:["Input Multiplier: ",e.inputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Output Multiplier: ",e.outputMultiplier.toFixed(4),"x"]}),f.jsxs("div",{children:["Power Multiplier: ",e.powerMultiplier.toFixed(4),"x"]})]}),f.jsxs("div",{style:{marginTop:"12px",fontSize:"11px",color:"var(--text-muted)",fontStyle:"italic"},children:[f.jsx("div",{children:" Speed affects input/output quantities and power"}),f.jsx("div",{children:" Efficiency affects input quantities and power"}),f.jsx("div",{children:" Effects combine additively"})]})]}),onApply:e=>({settings:e,inputs:[],outputs:[],metrics:null})}),G3=()=>{const e=$r.filter(n=>n.type==="item").sort((n,i)=>n.name.localeCompare(i.name)),t=$r.filter(n=>n.type==="fluid").sort((n,i)=>n.name.localeCompare(i.name));return{title:"Underground Waste Facility Settings",defaultSettings:{itemProductId:"p_any_item",fluidProductId:"p_any_fluid",itemSearchTerm:"",fluidSearchTerm:""},fields:[{type:"text-input",key:"itemSearchTerm",label:"Search Items:",placeholder:"Search items...",noMargin:!0},{type:"select",key:"itemProductId",label:"Item Input Product:",options:[{value:"p_any_item",label:"Any Item"},...e.map(n=>({value:n.id,label:n.name}))]},{type:"text-input",key:"fluidSearchTerm",label:"Search Fluids:",placeholder:"Search fluids...",noMargin:!0},{type:"select",key:"fluidProductId",label:"Fluid Input Product:",options:[{value:"p_any_fluid",label:"Any Fluid"},...t.map(n=>({value:n.id,label:n.name}))]},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 240/s"}),f.jsx("div",{children:" Fixed requirements per cycle:"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 4.8 Concrete Blocks/s"}),f.jsx("div",{style:{marginLeft:"15px"},children:"- 2.4 Lead Ingots/s"})]})}],onApply:n=>{const i=tc(0,0,n.itemProductId,n.fluidProductId);return{settings:n,inputs:i,outputs:[],metrics:null}}}},K3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Dump Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(2).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=[n.fluidProductId0,n.fluidProductId1],a=R0(i),s=Ns(a);return f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to dispose of them"}),f.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=[t.fluidProductId0,t.fluidProductId1],i=R0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},Y3=()=>{const e=$r.filter(t=>t.type==="fluid").sort((t,n)=>t.name.localeCompare(n.name));return{title:"Liquid Burner Info",defaultSettings:{fluidProductId0:"p_any_fluid",fluidProductId1:"p_any_fluid",fluidProductId2:"p_any_fluid",fluidProductId3:"p_any_fluid",fluidProductId4:"p_any_fluid",fluidProductId5:"p_any_fluid",fluidProductId6:"p_any_fluid",fluidProductId7:"p_any_fluid",searchTerm:""},fields:[{type:"text-input",key:"searchTerm",label:"Search Products:",placeholder:"Search fluids...",noMargin:!0},...Array(8).fill(0).map((t,n)=>({type:"select",key:`fluidProductId${n}`,label:`Input ${n+1} Product:`,options:[{value:"p_any_fluid",label:"Any Fluid"},...e.map(i=>({value:i.id,label:i.name}))]})),{type:"info-box",title:"Pollution Calculation:",render:(t,n)=>{const i=Array(8).fill(0).map((u,l)=>n[`fluidProductId${l}`]),a=O0(i),s=Ps(a);return f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Water variants: 0%/hr"}),f.jsx("div",{children:" Residue: 8.64%/hr per /s"}),f.jsx("div",{children:" Other fluids: 0.0216%/hr per /s"}),f.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid rgba(212, 166, 55, 0.3)"},children:f.jsxs("strong",{children:["Current Pollution: ",s.toFixed(4),"%/hr"]})})]})}},{type:"info-box",title:" How it works:",background:"rgba(59, 130, 246, 0.1)",titleColor:"#60a5fa",render:()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{children:" Each input accepts up to 15/s of the selected fluid"}),f.jsx("div",{children:" Connect fluids to burn them for energy disposal"}),f.jsx("div",{children:" Water variants produce no pollution"})]})}],onApply:t=>{const n=Array(8).fill(0).map((a,s)=>t[`fluidProductId${s}`]),i=O0(n);return{settings:{fluidProductIds:n,searchTerm:t.searchTerm},inputs:i,outputs:[],metrics:null}}}},Q3=({recipeType:e,nodeId:t,currentSettings:n,recipe:i,globalPollution:a,onSettingsChange:s,onClose:u})=>{var w;const l=L3(e,i,a),[d,p]=A.useState(n||l.defaultSettings),m=A.useRef(null),_=b=>{const k=m.current;if(!k)return;const S=k.scrollHeight>k.clientHeight,M=k.scrollTop===0&&b.deltaY<0,I=k.scrollTop+k.clientHeight>=k.scrollHeight&&b.deltaY>0;S&&!M&&!I||b.preventDefault(),b.stopPropagation()},h=(b,k)=>{p(typeof b=="object"?S=>({...S,...b}):S=>({...S,[b]:k}))},g=()=>{const b=l.onApply(d,i);switch(e){case"drill":case"assembler":case"treeFarm":case"wasteFacility":case"liquidDump":case"liquidBurner":s(t,b.settings,b.inputs,b.outputs);break;case"firebox":s(t,b.settings,b.inputs,b.metrics);break;case"temperature":s(t,b.settings,b.outputs,b.metrics);break;case"boiler":case"chemicalPlant":s(t,b.settings);break;default:s(t,b.settings,b.inputs,b.outputs,b.metrics)}u()},x=()=>{p(l.defaultSettings)},q=l.calculateMetrics?l.calculateMetrics(d,i):null;return RR.createPortal(f.jsx("div",{className:"drill-settings-overlay",onClick:u,children:f.jsxs("div",{ref:m,className:"drill-settings-bubble",onClick:b=>b.stopPropagation(),onDoubleClick:b=>b.stopPropagation(),onWheel:_,children:[f.jsx("h3",{className:"drill-settings-title",children:l.title}),f.jsxs("div",{className:"drill-settings-content",children:[l.fields.map((b,k)=>f.jsx(X3,{field:b,value:d[b.key],settings:d,onChange:(S,M)=>{b.type==="dual-select"?h(S,M):h(b.key,S)}},k)),q&&l.renderMetrics&&f.jsx("div",{className:"drill-setting-group",style:{marginTop:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:l.renderMetrics(q,d)})]}),f.jsxs("div",{className:"drill-settings-buttons",children:[f.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Reset"}),f.jsx("button",{onClick:g,className:"btn btn-primary",disabled:(w=l.hasErrors)==null?void 0:w.call(l,d),children:"Apply"})]})]})}),document.body)},X3=({field:e,value:t,settings:n,onChange:i})=>{var a,s;switch(e.type){case"select":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("select",{value:t,onChange:u=>i(e.parse?e.parse(u.target.value):u.target.value),className:"select",disabled:(a=e.disabled)==null?void 0:a.call(e,n),children:e.options.map(u=>f.jsx("option",{value:u.value,children:u.label},u.value))}),e.hint&&f.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"checkbox":return f.jsx("div",{className:"drill-setting-group drill-setting-checkbox",children:f.jsxs("label",{className:"drill-setting-label",children:[f.jsx("input",{type:"checkbox",checked:t,onChange:u=>i(u.target.checked),className:"drill-checkbox"}),f.jsx("span",{children:e.label})]})});case"number":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("input",{type:"number",min:e.min,max:e.max,step:e.step,value:t,onChange:u=>i(e.parse?e.parse(u.target.value):parseFloat(u.target.value)),className:"input",placeholder:e.placeholder,style:(s=e.hasError)!=null&&s.call(e,t)?{borderColor:"#ef4444"}:{}}),e.hint&&f.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",marginTop:"4px"},children:typeof e.hint=="function"?e.hint(t,n):e.hint})]});case"number-buttons":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[f.jsx("button",{onClick:()=>i(Math.max(e.min,t-e.step)),disabled:t<=e.min,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t<=e.min?.5:1,cursor:t<=e.min?"not-allowed":"pointer"},children:""}),f.jsx("div",{style:{flex:1,textAlign:"center",padding:"12px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"20px",fontWeight:700},children:t}),f.jsx("button",{onClick:()=>i(Math.min(e.max,t+e.step)),disabled:t>=e.max,className:"btn btn-secondary",style:{padding:"8px 16px",minWidth:"auto",fontSize:"18px",opacity:t>=e.max?.5:1,cursor:t>=e.max?"not-allowed":"pointer"},children:""})]}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"var(--text-secondary)",marginTop:"8px"},children:[f.jsxs("span",{children:["Min: ",e.min]}),f.jsxs("span",{children:["Default: ",e.defaultValue]}),f.jsxs("span",{children:["Max: ",e.max]})]})]});case"text-input":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsx("input",{type:"text",value:t,onChange:u=>i(u.target.value),placeholder:e.placeholder,className:"input",style:{marginBottom:e.noMargin?0:"15px"}})]});case"dual-select":return f.jsxs("div",{className:"drill-setting-group",children:[f.jsx("label",{className:"drill-setting-label",children:e.label}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsxs("select",{value:n[e.outerKey]||"",onChange:u=>{const l=u.target.value;i(e.outerKey,l),l&&parseInt(l)>1&&i(e.innerKey,"64")},className:"select",style:{flex:1},children:[f.jsx("option",{value:"",children:"Outer"}),e.outerOptions.map(u=>f.jsxs("option",{value:u,children:[u,"x"]},u))]}),f.jsxs("select",{value:n[e.innerKey]||"",onChange:u=>i(e.innerKey,u.target.value),className:"select",style:{flex:1},disabled:n[e.outerKey]&&parseInt(n[e.outerKey])>1,children:[f.jsx("option",{value:"",children:"Inner"}),n[e.outerKey]&&parseInt(n[e.outerKey])>1?f.jsx("option",{value:"64",children:"64x"}):e.innerOptions.map(u=>f.jsxs("option",{value:u,children:[u,"x"]},u))]}),f.jsx("span",{style:{color:"#f5d56a",fontWeight:600,whiteSpace:"nowrap"},children:e.suffix})]}),e.renderPreview&&e.renderPreview(n)]});case"info-box":return f.jsxs("div",{className:"drill-setting-group",style:{marginTop:e.marginTop||"20px",padding:"12px",background:e.background||"rgba(212, 166, 55, 0.1)",borderRadius:"8px",fontSize:"13px"},children:[f.jsx("div",{style:{color:e.titleColor||"#f5d56a",fontWeight:600,marginBottom:"8px"},children:e.title}),f.jsx("div",{style:{color:"#999",lineHeight:"1.6"},children:e.render(t,n)})]});default:return null}},js=44,A0=8,uw=10,lw=20,cw=380,Z3=120,ql=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,J3=A.memo(({data:e,id:t})=>{var pr,Ht,Qe,wi,Nt,ln;const{recipe:n,machine:i,machineCount:a,displayMode:s,machineDisplayMode:u,onInputClick:l,onOutputClick:d,isTarget:p,onDrillSettingsChange:m,onLogicAssemblerSettingsChange:_,onTreeFarmSettingsChange:h,onIndustrialFireboxSettingsChange:g,onTemperatureSettingsChange:x,onBoilerSettingsChange:q,onChemicalPlantSettingsChange:w,globalPollution:b,flows:k,isMobile:S,mobileActionMode:M,onMachineCountModeChange:I,zoomLevel:E}=e,T=!E||E>=.25,[P,j]=A.useState(null);if(!(n!=null&&n.inputs)||!(n!=null&&n.outputs)||!i)return null;const D=n.isMineshaftDrill||n.id==="r_mineshaft_drill",O=n.isLogicAssembler||n.id==="r_logic_assembler",F=n.isTreeFarm||n.id==="r_tree_farm",X=n.isWasteFacility||n.id==="r_underground_waste_facility",V=n.isLiquidDump||n.id==="r_liquid_dump",Z=n.isLiquidBurner||n.id==="r_liquid_burner",W=D||O||F||X||V||Z,te=s3(i.id),U=u3(i.id),K=dr[i.id],oe=i.id==="m_industrial_firebox"&&n.id!=="r_industrial_firebox_07",z=i.id==="m_chemical_plant",Q=Ur(i.id),_e=Q?an[i.id]:null;let H=n.cycle_time;const J=H==="Variable"||typeof H!="number"||H<=0;if(J&&!W?H="Variable":J&&W&&(H=1),Q&&(_e==null?void 0:_e.type)==="steam_input"&&typeof H=="number"&&!(i.id==="m_steam_cracking_plant"&&!hi(n))){const me=n.tempDependentInputTemp??In;H=Wn(i.id,me,H)}const ne={outputs:[]};if(K){const me=K.type==="boiler",st=(pr=n.outputs)==null?void 0:pr.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),Vr=(Ht=n.outputs)==null?void 0:Ht.some(Rt=>["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id)),Or=(Qe=n.inputs)==null?void 0:Qe.some(Rt=>["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id)),fr=n.id==="r_industrial_firebox_07",Xn=i.id==="m_industrial_firebox";(!Xn||Xn&&!fr&&(Or||st))&&((wi=n.outputs)==null||wi.forEach((Rt,er)=>{if(nE(Rt.product_id)&&Rt.temperature!=null){const tr=["p_water","p_filtered_water","p_distilled_water"].includes(Rt.product_id),_t=["p_steam","p_low_pressure_steam","p_high_pressure_steam"].includes(Rt.product_id);me?_t&&Vr&&ne.outputs.push({temp:Rt.temperature,index:er}):(tr&&st||_t&&Vr)&&ne.outputs.push({temp:Rt.temperature,index:er})}}))}const ue=A.useCallback(me=>{if(me==="Variable")return"Variable";if(typeof me!="number")return String(me);if(H==="Variable")return s==="perSecond"?"Variable":String(ql(me));let st=s==="perSecond"?me/H:me;return u==="total"&&(st*=a||0),String(ql(st))},[H,s,u,a]),ae=A.useCallback(me=>{if(me==="Variable"||typeof me!="number")return me;if(s==="perSecond")return"1s";if(me>=60){const st=Math.floor(me/60),Vr=me%60;return`${st}m ${ql(Vr)}s`}return`${ql(me)}s`},[s]),he=A.useMemo(()=>ae(H),[H,ae]);let Ee=n.power_consumption,Ne=n.pollution;u==="total"&&typeof a=="number"&&a>0&&(typeof n.power_consumption=="number"?Ee=n.power_consumption*a:typeof n.power_consumption=="object"&&n.power_consumption!==null&&n.power_consumption!=="Variable"&&("drilling"in n.power_consumption&&"idle"in n.power_consumption?Ee={drilling:typeof n.power_consumption.drilling=="number"?n.power_consumption.drilling*a:n.power_consumption.drilling,idle:typeof n.power_consumption.idle=="number"?n.power_consumption.idle*a:n.power_consumption.idle}:"max"in n.power_consumption&&"average"in n.power_consumption&&(Ee={max:typeof n.power_consumption.max=="number"?n.power_consumption.max*a:n.power_consumption.max,average:typeof n.power_consumption.average=="number"?n.power_consumption.average*a:n.power_consumption.average})),typeof n.pollution=="number"&&(Ne=n.pollution*a));const Ie=i3(Ee),Te=typeof Ie=="object"&&Ie!==null&&("drilling"in Ie&&"idle"in Ie||"max"in Ie&&"average"in Ie),Pe=n.power_type==="HV"?" HV":"",Ve=n.inputs.length,He=n.outputs.length,De=Math.max(Ve,He,1),nt=Ve>0,et=He>0,ft=cw-uw*2,ct=nt&&et?Math.floor((ft-lw)/2):nt?ft:0,dt=nt&&et?Math.floor((ft-lw)/2):et?ft:0,lt=cw,Zt=De*js+(De-1)*A0+24,Jt=Z3+Zt+12,at=a??0,Rr=Number.isInteger(at)?at.toString():at.toFixed(2),Tt=e.machineCountMode||"free",Kr=u==="total"?{color:"var(--text-muted)",opacity:.5}:{};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`custom-node ${p?"target":""}`,style:{width:lt,height:Jt},onMouseDownCapture:me=>{me.button===1&&(me.preventDefault(),me.stopPropagation(),e.onMiddleClick&&e.onMiddleClick(t))},children:[f.jsxs("div",{className:"node-info-area",children:[ne.outputs.length>0&&f.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)",zIndex:5},children:ne.outputs.map((me,st)=>f.jsx("div",{children:Zl(me.temp)},`output-${st}`))}),Q&&(_e==null?void 0:_e.type)==="steam_input"&&hi(n)&&f.jsx("div",{onDoubleClick:me=>me.stopPropagation(),style:{position:"absolute",top:"10px",left:"10px",background:"var(--bg-secondary)",border:"2px solid var(--input-border)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--input-text)",zIndex:5},children:Zl(n.tempDependentInputTemp??In)}),D&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("drill")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Drill",children:""}),O&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("assembler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Assembler",children:""}),F&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("treeFarm")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Tree Farm",children:""}),oe&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("firebox")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Firebox",children:""}),z&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("chemicalPlant")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Chemical Plant",children:""}),X&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("wasteFacility")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Waste Facility",children:""}),V&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("liquidDump")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Dump Info",children:""}),Z&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("liquidBurner")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Liquid Burner Info",children:""}),te&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("temperature")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Temperature",children:""}),U&&f.jsx("button",{onClick:me=>{me.stopPropagation(),j("boiler")},onDoubleClick:me=>me.stopPropagation(),className:"drill-settings-button",title:"Configure Boiler",style:{right:"10px"},children:""}),f.jsx("div",{className:"node-recipe-name",title:n.name,children:n.name}),f.jsxs("div",{className:"node-stats-row",children:[f.jsxs("div",{className:"node-stats",style:{gap:Te?"1px":"3px",minHeight:"65px",visibility:T?"visible":"hidden"},children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Cycle:"})," ",he]}),Te?"drilling"in Ie?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Drilling):"})," ",Ie.drilling,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Idle):"})," ",Ie.idle,Pe]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Max):"})," ",Ie.max,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power (Avg):"})," ",Ie.average,Pe]})]}):f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Power:"})," ",Ie,Pe]}),f.jsxs("div",{className:"node-stat-row",children:[f.jsx("span",{className:"node-stat-label",children:"Pollution:"})," ",o3(Ne)]})]}),f.jsxs("div",{className:"node-machine-info",style:{visibility:T?"visible":"hidden"},children:[f.jsx("div",{className:"node-machine-name",title:i.name,style:{color:i.tier===1?"var(--tier-1-color)":i.tier===2?"var(--tier-2-color)":i.tier===3?"var(--tier-3-color)":i.tier===4?"var(--tier-4-color)":(i.tier===5,"var(--tier-5-color)")},children:i.name}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{className:"node-machine-count",style:Kr,title:u==="total"?"Machine count (display mode: Total)":"Double-click node to edit",children:Rr}),Tt!=="free"&&f.jsx("button",{onClick:me=>{me.stopPropagation(),I&&I(t,Tt,a)},onDoubleClick:me=>me.stopPropagation(),style:{background:"none",border:"none",cursor:"pointer",fontSize:"14px",lineHeight:1,opacity:.8,padding:"2px",display:"flex",alignItems:"center",transition:"opacity 0.2s"},onMouseEnter:me=>me.currentTarget.style.opacity="1",onMouseLeave:me=>me.currentTarget.style.opacity="0.8",title:Tt==="locked"?`Locked: LP/suggestions cannot change (cap: ${((Nt=e.cappedMachineCount)==null?void 0:Nt.toFixed(2))||a.toFixed(2)})
Click to unlock`:`Capped: LP/suggestions max ${((ln=e.cappedMachineCount)==null?void 0:ln.toFixed(2))||a.toFixed(2)}
Click to lock`,children:Tt==="locked"?"":""})]})]})]})]}),f.jsxs("div",{className:"node-io-area",children:[f.jsxs("div",{className:"node-io-columns",style:{gridTemplateColumns:nt&&et?`${ct}px 1fr ${dt}px`:"1fr",padding:`0 ${uw}px`},children:[nt&&f.jsx("div",{className:"node-io-column node-io-left",children:n.inputs.map((me,st)=>f.jsx("div",{className:"node-rect-wrapper",children:f.jsx(dw,{side:"left",index:st,width:ct,input:me,onClick:l,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`left-${t}-${st}-${me.product_id}`))}),nt&&et&&f.jsx("div",{className:"node-io-gap"}),et&&f.jsx("div",{className:"node-io-column node-io-right",children:n.outputs.map((me,st)=>f.jsx("div",{className:"node-rect-wrapper",children:f.jsx(dw,{side:"right",index:st,width:dt,input:me,onClick:d,nodeId:t,formatQuantity:ue,isMobile:e.isMobile,mobileActionMode:e.mobileActionMode})},`right-${t}-${st}-${me.product_id}`))})]}),f.jsxs("div",{className:"node-handles-container",children:[n.inputs.map((me,st)=>f.jsx(pw,{side:"left",index:st,onClick:l,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Ve,rightCount:He},`handle-left-${t}-${st}`)),n.outputs.map((me,st)=>f.jsx(pw,{side:"right",index:st,onClick:d,nodeId:t,productId:me.product_id,flows:e.flows,onHandleDoubleClick:e.onHandleDoubleClick,suggestions:e.suggestions,input:me,data:e,leftCount:Ve,rightCount:He},`handle-right-${t}-${st}`))]})]})]}),P&&f.jsx(Q3,{recipeType:P,nodeId:t,currentSettings:P==="drill"?n.drillSettings:P==="assembler"?n.assemblerSettings:P==="treeFarm"?n.treeFarmSettings:P==="firebox"?n.fireboxSettings:P==="temperature"||P==="boiler"?n.temperatureSettings:P==="chemicalPlant"?n.chemicalPlantSettings:P==="wasteFacility"?n.wasteFacilitySettings:P==="liquidDump"?n.liquidDumpSettings:P==="liquidBurner"?n.liquidBurnerSettings:{},recipe:n,globalPollution:b||0,onSettingsChange:P==="drill"?m:P==="assembler"?_:P==="treeFarm"?h:P==="firebox"?g:P==="temperature"?x:P==="boiler"?q:P==="chemicalPlant"?w:P==="wasteFacility"?e.onWasteFacilitySettingsChange:P==="liquidDump"?e.onLiquidDumpSettingsChange:P==="liquidBurner"?e.onLiquidBurnerSettingsChange:()=>{},onClose:()=>j(null)})]})},(e,t)=>{if(e.data===t.data&&e.id===t.id)return!0;if(e.id!==t.id)return!1;const n=e.data,i=t.data;return!(n.recipe!==i.recipe||n.machineCount!==i.machineCount||n.flows!==i.flows||n.suggestions!==i.suggestions||n.displayMode!==i.displayMode||n.machineDisplayMode!==i.machineDisplayMode||n.isTarget!==i.isTarget||n.zoomLevel!==i.zoomLevel||n.machineCountMode!==i.machineCountMode)}),dw=({side:e,index:t,width:n,input:i,onClick:a,nodeId:s,formatQuantity:u,isMobile:l,mobileActionMode:d})=>{const p=e==="left",m=_i(i.product_id,bt,i.acceptedType),_=u(i.quantity),h=!l||d==="pan";return f.jsx("div",{onClick:g=>{a&&h&&(g.stopPropagation(),a(i.product_id,s,t,g))},title:`${_}x ${m}`,className:`node-rect ${p?"input":"output"} ${a?"clickable":""}`,style:{width:`${n}px`,height:`${js}px`,minWidth:`${n}px`},children:f.jsxs("span",{className:"node-rect-text",children:[_,"x ",m]})})},pw=({side:e,index:t,onClick:n,nodeId:i,productId:a,flows:s,onHandleDoubleClick:u,suggestions:l,input:d,data:p,leftCount:m,rightCount:_})=>{var D,O;const g=getComputedStyle(document.documentElement),x=g.getPropertyValue("--handle-input-supplied").trim(),q=g.getPropertyValue("--handle-input-deficient").trim(),w=g.getPropertyValue("--handle-output-connected").trim(),b=g.getPropertyValue("--handle-output-excess").trim();let k=e==="left"?x:w;if(s){const F=e==="left"?(D=s.inputFlows)==null?void 0:D[t]:(O=s.outputFlows)==null?void 0:O[t];if(F){const X=e==="left"?F.needed-F.connected:F.produced-F.connected;Math.abs(X)>1e-6&&X>0&&(k=e==="left"?q:b)}}const S=bt(a),I=(S==null?void 0:S.type)==="fluid"||a==="p_any_fluid"?"50%":"2px",j=12+(Math.max(m,_)-(e==="left"?m:_))*(js+A0)/2+t*(js+A0)+js/2+11;return f.jsx(Hs,{type:e==="left"?"target":"source",position:e==="left"?$e.Left:$e.Right,id:`${e}-${t}`,style:{background:k,width:"12px",height:"12px",border:"2px solid #1a1a1a",borderRadius:I,cursor:"pointer",position:"absolute",[e==="left"?"left":"right"]:"0",top:`${j}px`,transform:e==="left"?"translate(-50%, -50%)":"translate(50%, -50%)"},onClick:F=>{n&&F.ctrlKey&&(F.stopPropagation(),n(a,i,t,F))},onDoubleClick:F=>{u&&(F.stopPropagation(),u(i,e,t,a,l))}})},eV=({id:e,sourceX:t,sourceY:n,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,data:l})=>{const d=(l==null?void 0:l.edgePath)||"orthogonal",p=(l==null?void 0:l.edgeStyle)||"animated",[m]=A.useMemo(()=>d==="straight"?rg({sourceX:t,sourceY:n,targetX:i,targetY:a}):d==="orthogonal"?Gl({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u,borderRadius:8}):tg({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),[t,n,i,a,s,u,d]),_=p==="animated"?"custom-edge custom-edge-animated":p==="dashed"?"custom-edge custom-edge-dashed":"custom-edge custom-edge-solid";return f.jsx("path",{id:e,className:_,d:m,fill:"none"})},tV=A.memo(eV,(e,t)=>{var n,i,a,s;return e.sourceX===t.sourceX&&e.sourceY===t.sourceY&&e.targetX===t.targetX&&e.targetY===t.targetY&&((n=e.data)==null?void 0:n.edgePath)===((i=t.data)==null?void 0:i.edgePath)&&((a=e.data)==null?void 0:a.edgeStyle)===((s=t.data)==null?void 0:s.edgeStyle)}),wa={colorPrimary:"#d4a637",colorPrimaryHover:"#f5d56a",colorPrimaryDark:"#0a0a0a",colorSecondary:"#1a1a1a",bgMain:"#0a0a0a",bgSecondary:"#1a1a1a",textPrimary:"#f5d56a",textSecondary:"#999999",textMuted:"#aaaaaa",statValue:"#e0e0e0",borderPrimary:"#d4a637",borderLight:"#333333",borderDivider:"#d4a63755",inputBg:"#1a3a2a",inputBorder:"#22c55e",inputText:"#86efac",outputBg:"#3a1a1a",outputBorder:"#ef4444",outputText:"#fca5a5",deleteBg:"#3a1a1a",deleteColor:"#ef4444",deleteHoverBg:"#ef4444",deleteHoverColor:"#0a0a0a",nodeBg:"#1a1a1a",nodeBorder:"#d4a637",nodeTargetBg:"#2d2416",nodeTargetBorder:"#f5d56a",handleInputSupplied:"#22c55e",handleInputDeficient:"#ef4444",handleOutputConnected:"#ef4444",handleOutputExcess:"#22c55e",statPositive:"#86efac",statNegative:"#fca5a5",settingsInputLabel:"#86efac",settingsOutputLabel:"#fca5a5",tier1Color:"#888888",tier2Color:"#4ade80",tier3Color:"#60a5fa",tier4Color:"#c084fc",tier5Color:"#fbbf24",edgePath:"orthogonal",edgeStyle:"animated"},rV=[{id:"default",name:"Golden Industrial (Default)",description:"Original golden theme with warm tones",theme:wa},{id:"dracula",name:"Dracula",description:"Grimace Shake",theme:{colorPrimary:"#bd93f9",colorPrimaryHover:"#d6acff",colorPrimaryDark:"#282a36",colorSecondary:"#44475a",bgMain:"#282a36",bgSecondary:"#44475a",textPrimary:"#f8f8f2",textSecondary:"#6272a4",textMuted:"#6272a4",statValue:"#f8f8f2",borderPrimary:"#bd93f9",borderLight:"#44475a",borderDivider:"#bd93f955",inputBg:"#1a2a3a",inputBorder:"#50fa7b",inputText:"#50fa7b",outputBg:"#3a1a2a",outputBorder:"#ff5555",outputText:"#ff79c6",deleteBg:"#44475a",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#282a36",nodeBg:"#44475a",nodeBorder:"#bd93f9",nodeTargetBg:"#5a4a6a",nodeTargetBorder:"#ff79c6",handleInputSupplied:"#50fa7b",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#50fa7b",statPositive:"#50fa7b",statNegative:"#ff5555",settingsInputLabel:"#50fa7b",settingsOutputLabel:"#ff79c6",tier1Color:"#999999",tier2Color:"#50fa7b",tier3Color:"#8be9fd",tier4Color:"#bd93f9",tier5Color:"#f1fa8c",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"nord",name:"Nord",description:"Cool arctic bluish palette",theme:{colorPrimary:"#88c0d0",colorPrimaryHover:"#8fbcbb",colorPrimaryDark:"#2e3440",colorSecondary:"#3b4252",bgMain:"#2e3440",bgSecondary:"#3b4252",textPrimary:"#eceff4",textSecondary:"#d8dee9",textMuted:"#4c566a",statValue:"#e5e9f0",borderPrimary:"#88c0d0",borderLight:"#4c566a",borderDivider:"#88c0d055",inputBg:"#2a3a3a",inputBorder:"#a3be8c",inputText:"#a3be8c",outputBg:"#3a2a2a",outputBorder:"#bf616a",outputText:"#d08770",deleteBg:"#3b4252",deleteColor:"#bf616a",deleteHoverBg:"#bf616a",deleteHoverColor:"#2e3440",nodeBg:"#3b4252",nodeBorder:"#88c0d0",nodeTargetBg:"#4c5a68",nodeTargetBorder:"#8fbcbb",handleInputSupplied:"#a3be8c",handleInputDeficient:"#bf616a",handleOutputConnected:"#bf616a",handleOutputExcess:"#a3be8c",statPositive:"#a3be8c",statNegative:"#bf616a",settingsInputLabel:"#a3be8c",settingsOutputLabel:"#d08770",tier1Color:"#999999",tier2Color:"#a3be8c",tier3Color:"#88c0d0",tier4Color:"#b48ead",tier5Color:"#ebcb8b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision dark theme with balanced contrast",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#002b36",colorSecondary:"#073642",bgMain:"#002b36",bgSecondary:"#073642",textPrimary:"#839496",textSecondary:"#586e75",textMuted:"#657b83",statValue:"#93a1a1",borderPrimary:"#268bd2",borderLight:"#073642",borderDivider:"#268bd255",inputBg:"#073a3a",inputBorder:"#859900",inputText:"#859900",outputBg:"#3a0707",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#073642",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#002b36",nodeBg:"#073642",nodeBorder:"#268bd2",nodeTargetBg:"#0f4a52",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#93a1a1",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"solarized-light",name:"Solarized Light",description:"For those who want to burn their eyes out",theme:{colorPrimary:"#268bd2",colorPrimaryHover:"#2aa198",colorPrimaryDark:"#fdf6e3",colorSecondary:"#eee8d5",bgMain:"#fdf6e3",bgSecondary:"#eee8d5",textPrimary:"#657b83",textSecondary:"#586e75",textMuted:"#93a1a1",statValue:"#073642",borderPrimary:"#268bd2",borderLight:"#93a1a1",borderDivider:"#268bd255",inputBg:"#e5f5e5",inputBorder:"#859900",inputText:"#859900",outputBg:"#f5e5e5",outputBorder:"#dc322f",outputText:"#cb4b16",deleteBg:"#eee8d5",deleteColor:"#dc322f",deleteHoverBg:"#dc322f",deleteHoverColor:"#fdf6e3",nodeBg:"#eee8d5",nodeBorder:"#268bd2",nodeTargetBg:"#d9d2c2",nodeTargetBorder:"#2aa198",handleInputSupplied:"#859900",handleInputDeficient:"#dc322f",handleOutputConnected:"#dc322f",handleOutputExcess:"#859900",statPositive:"#859900",statNegative:"#dc322f",settingsInputLabel:"#859900",settingsOutputLabel:"#cb4b16",tier1Color:"#839496",tier2Color:"#859900",tier3Color:"#268bd2",tier4Color:"#6c71c4",tier5Color:"#b58900",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"midnight",name:"Midnight Blue",description:"Deep blue dark theme",theme:{colorPrimary:"#4a9eff",colorPrimaryHover:"#70b4ff",colorPrimaryDark:"#0a0e1a",colorSecondary:"#151a2e",bgMain:"#0a0e1a",bgSecondary:"#151a2e",textPrimary:"#e0e6ff",textSecondary:"#8892b0",textMuted:"#a8b2d1",statValue:"#ccd6f6",borderPrimary:"#4a9eff",borderLight:"#233554",borderDivider:"#4a9eff55",inputBg:"#1a2a3a",inputBorder:"#64ffda",inputText:"#64ffda",outputBg:"#3a1a2a",outputBorder:"#ff6b9d",outputText:"#ffa7c4",deleteBg:"#151a2e",deleteColor:"#ff6b9d",deleteHoverBg:"#ff6b9d",deleteHoverColor:"#0a0e1a",nodeBg:"#151a2e",nodeBorder:"#4a9eff",nodeTargetBg:"#1e2a45",nodeTargetBorder:"#70b4ff",handleInputSupplied:"#64ffda",handleInputDeficient:"#ff6b9d",handleOutputConnected:"#ff6b9d",handleOutputExcess:"#64ffda",statPositive:"#64ffda",statNegative:"#ff6b9d",settingsInputLabel:"#64ffda",settingsOutputLabel:"#ffa7c4",tier1Color:"#9099b0",tier2Color:"#64ffda",tier3Color:"#4a9eff",tier4Color:"#c792ea",tier5Color:"#ffcb6b",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"forest",name:"Forest Green",description:"Natural green theme",theme:{colorPrimary:"#5fb573",colorPrimaryHover:"#7fc794",colorPrimaryDark:"#0a1a0f",colorSecondary:"#152820",bgMain:"#0a1a0f",bgSecondary:"#152820",textPrimary:"#c8e6c9",textSecondary:"#81c784",textMuted:"#a5d6a7",statValue:"#e0f2e0",borderPrimary:"#5fb573",borderLight:"#2e4a35",borderDivider:"#5fb57355",inputBg:"#1a3a2a",inputBorder:"#66bb6a",inputText:"#a5d6a7",outputBg:"#3a1a1a",outputBorder:"#ef5350",outputText:"#ff8a80",deleteBg:"#152820",deleteColor:"#ef5350",deleteHoverBg:"#ef5350",deleteHoverColor:"#0a1a0f",nodeBg:"#152820",nodeBorder:"#5fb573",nodeTargetBg:"#243a2d",nodeTargetBorder:"#7fc794",handleInputSupplied:"#66bb6a",handleInputDeficient:"#ef5350",handleOutputConnected:"#ef5350",handleOutputExcess:"#66bb6a",statPositive:"#a5d6a7",statNegative:"#ff8a80",settingsInputLabel:"#a5d6a7",settingsOutputLabel:"#ff8a80",tier1Color:"#9e9e9e",tier2Color:"#66bb6a",tier3Color:"#42a5f5",tier4Color:"#ab47bc",tier5Color:"#ffca28",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"sunset",name:"Sunset Orange",description:"Warm sunset-inspired theme, steampunk-esque",theme:{colorPrimary:"#ff8c42",colorPrimaryHover:"#ffaa6f",colorPrimaryDark:"#1a0f0a",colorSecondary:"#281912",bgMain:"#1a0f0a",bgSecondary:"#281912",textPrimary:"#ffe4d1",textSecondary:"#ffb88c",textMuted:"#ffc9a3",statValue:"#fff0e0",borderPrimary:"#ff8c42",borderLight:"#4a2e1f",borderDivider:"#ff8c4255",inputBg:"#2a3a1a",inputBorder:"#a3e048",inputText:"#c6f68d",outputBg:"#3a1a1a",outputBorder:"#ff5555",outputText:"#ff8787",deleteBg:"#281912",deleteColor:"#ff5555",deleteHoverBg:"#ff5555",deleteHoverColor:"#1a0f0a",nodeBg:"#281912",nodeBorder:"#ff8c42",nodeTargetBg:"#3d2a1a",nodeTargetBorder:"#ffaa6f",handleInputSupplied:"#a3e048",handleInputDeficient:"#ff5555",handleOutputConnected:"#ff5555",handleOutputExcess:"#a3e048",statPositive:"#c6f68d",statNegative:"#ff8787",settingsInputLabel:"#c6f68d",settingsOutputLabel:"#ff8787",tier1Color:"#a89984",tier2Color:"#a3e048",tier3Color:"#83a598",tier4Color:"#d3869b",tier5Color:"#fabd2f",edgePath:"orthogonal",edgeStyle:"animated"}},{id:"cyberpunk",name:"Cyberpunk",description:"Neon-inspired futuristic theme",theme:{colorPrimary:"#00ff9f",colorPrimaryHover:"#00ffbf",colorPrimaryDark:"#0a0a15",colorSecondary:"#1a1a2e",bgMain:"#0a0a15",bgSecondary:"#1a1a2e",textPrimary:"#00ff9f",textSecondary:"#00d4aa",textMuted:"#00b494",statValue:"#d0fff0",borderPrimary:"#00ff9f",borderLight:"#16213e",borderDivider:"#00ff9f55",inputBg:"#1a2a3a",inputBorder:"#00ff9f",inputText:"#00ffbf",outputBg:"#3a1a2a",outputBorder:"#ff006e",outputText:"#ff4d9d",deleteBg:"#1a1a2e",deleteColor:"#ff006e",deleteHoverBg:"#ff006e",deleteHoverColor:"#0a0a15",nodeBg:"#1a1a2e",nodeBorder:"#00ff9f",nodeTargetBg:"#2a2a45",nodeTargetBorder:"#00ffbf",handleInputSupplied:"#00ff9f",handleInputDeficient:"#ff006e",handleOutputConnected:"#ff006e",handleOutputExcess:"#00ff9f",statPositive:"#00ffbf",statNegative:"#ff4d9d",settingsInputLabel:"#00ffbf",settingsOutputLabel:"#ff4d9d",tier1Color:"#9999aa",tier2Color:"#00ff9f",tier3Color:"#00d4ff",tier4Color:"#d946ef",tier5Color:"#ffd700",edgePath:"orthogonal",edgeStyle:"animated"}}],rc=e=>{const t=document.documentElement;Object.entries(e).forEach(([n,i])=>{const a="--"+n.replace(/([A-Z])/g,"-$1").toLowerCase();t.style.setProperty(a,i)})},Ol=()=>{try{const e=localStorage.getItem("industrialist_theme");return e?JSON.parse(e):wa}catch{return wa}},L0=e=>localStorage.setItem("industrialist_theme",JSON.stringify(e)),nV=()=>(rc(wa),L0(wa),wa),iV=({onClose:e})=>{const[t,n]=A.useState(Ol()),[i,a]=A.useState(!1),s=_=>{const h={edgePath:t.edgePath||"orthogonal",edgeStyle:t.edgeStyle||"animated"},g={..._.theme,...h};n(g),rc(g),L0(g)},u=(_,h)=>{const g={...t,[_]:h};n(g),rc(g),L0(g)},l=()=>{const _=nV();n(_)},d=[{title:"Primary Colors",colors:[{key:"colorPrimary",label:"Primary"},{key:"colorPrimaryHover",label:"Primary Hover"},{key:"colorPrimaryDark",label:"Primary Dark"},{key:"colorSecondary",label:"Secondary"}]},{title:"Background Colors",colors:[{key:"bgMain",label:"Main Background"},{key:"bgSecondary",label:"Secondary Background"}]},{title:"Text Colors",colors:[{key:"textPrimary",label:"Primary Text"},{key:"textSecondary",label:"Secondary Text"},{key:"textMuted",label:"Muted Text"},{key:"statValue",label:"Stat Values (Cycle/Power/Pollution)"}]},{title:"Border Colors",colors:[{key:"borderPrimary",label:"Primary Border"},{key:"borderLight",label:"Light Border"},{key:"borderDivider",label:"Divider"}]},{title:"Input/Output Colors",colors:[{key:"inputBg",label:"Input Background"},{key:"inputBorder",label:"Input Border"},{key:"inputText",label:"Input Text"},{key:"outputBg",label:"Output Background"},{key:"outputBorder",label:"Output Border"},{key:"outputText",label:"Output Text"}]},{title:"Node Colors",colors:[{key:"nodeBg",label:"Node Background"},{key:"nodeBorder",label:"Node Border"},{key:"nodeTargetBg",label:"Target Node Background"},{key:"nodeTargetBorder",label:"Target Node Border"}]},{title:"Delete Button",colors:[{key:"deleteBg",label:"Background"},{key:"deleteColor",label:"Color"},{key:"deleteHoverBg",label:"Hover Background"},{key:"deleteHoverColor",label:"Hover Color"}]},{title:"Node Handles",colors:[{key:"handleInputSupplied",label:"Input Supplied"},{key:"handleInputDeficient",label:"Input Deficient"},{key:"handleOutputConnected",label:"Output Connected"},{key:"handleOutputExcess",label:"Output Excess"}]},{title:"Statistics & Settings",colors:[{key:"statPositive",label:"Positive Stats"},{key:"statNegative",label:"Negative Stats"},{key:"settingsInputLabel",label:"Settings Input Label"},{key:"settingsOutputLabel",label:"Settings Output Label"}]},{title:"Machine Tier Colors",colors:[{key:"tier1Color",label:"Tier 1 (Grey)"},{key:"tier2Color",label:"Tier 2 (Green)"},{key:"tier3Color",label:"Tier 3 (Blue)"},{key:"tier4Color",label:"Tier 4 (Purple)"},{key:"tier5Color",label:"Tier 5 (Yellow)"}]}],p=[{value:"bezier",label:"Bezier (Curved)"},{value:"straight",label:"Straight"},{value:"orthogonal",label:"Orthogonal (90 angles)"}],m=[{value:"animated",label:"Animated Dash"},{value:"dashed",label:"Static Dash"},{value:"solid",label:"Solid Line"}];return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),style:{width:i?"700px":"600px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Theme Editor"}),i?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-back",children:" Back to Presets"}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"55vh"},children:[f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:"Edge Settings"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Path Type:"}),f.jsx("select",{value:t.edgePath||"bezier",onChange:_=>u("edgePath",_.target.value),className:"select",style:{marginTop:"6px"},children:p.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"theme-color-label",children:"Line Style:"}),f.jsx("select",{value:t.edgeStyle||"animated",onChange:_=>u("edgeStyle",_.target.value),className:"select",style:{marginTop:"6px"},children:m.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]})]})]}),d.map(_=>f.jsxs("div",{className:"theme-group",children:[f.jsx("h3",{className:"theme-group-title",children:_.title}),f.jsx("div",{className:"theme-color-grid",children:_.colors.map(h=>{const g=t[h.key]||"#000000",x=g.length>7?g.substring(0,7):g;return f.jsxs("div",{className:"theme-color-item",children:[f.jsx("label",{className:"theme-color-label",children:h.label}),f.jsxs("div",{className:"theme-color-inputs",children:[f.jsx("input",{type:"color",value:x,onChange:q=>{const w=t[h.key];if(w&&w.length>7){const b=w.substring(7);u(h.key,q.target.value+b)}else u(h.key,q.target.value)},className:"theme-color-picker"}),f.jsx("input",{type:"text",value:t[h.key],onChange:q=>u(h.key,q.target.value),className:"input theme-color-text"})]})]},h.key)})})]},_.title))]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:l,className:"btn btn-secondary",style:{flex:1},children:"Reset to Default"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Done"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"modal-content",style:{maxHeight:"60vh"},children:[f.jsx("div",{style:{marginBottom:"20px"},children:f.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px",textAlign:"center"},children:"Choose a preset theme or customize your own"})}),f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:rV.map(_=>f.jsx("div",{onClick:()=>s(_),className:"theme-preset-card",style:{padding:"15px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"8px",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.02)",h.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow="none"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"4px"},children:_.name}),f.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:_.description})]}),f.jsx("div",{style:{display:"flex",gap:"6px"},children:[_.theme.colorPrimary,_.theme.bgMain,_.theme.inputBorder,_.theme.outputBorder].map((h,g)=>f.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"4px",background:h,border:"1px solid rgba(255,255,255,0.2)"}},g))})]})},_.id))})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[f.jsx("button",{onClick:()=>a(!0),className:"btn btn-secondary",style:{flex:1},children:"Advanced Editing"}),f.jsx("button",{onClick:e,className:"btn btn-primary",style:{flex:1},children:"Close"})]})]})]})})},oV=({onClose:e})=>f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:t=>t.stopPropagation(),style:{width:"800px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Help & Controls"}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 120px)",overflowY:"auto",paddingRight:"10px"},children:[f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Controls"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Basic"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Add Recipe:"}),' Click "+ Select Recipe"']}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pan:"})," Left-drag on canvas"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Zoom:"})," Mouse wheel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Connect:"})," Drag from output (right) to input (left)"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Node Actions"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Edit Count:"})," Double-click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Lock/Cap Count:"})," Click // icon on node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Balance:"})," Double-click handle"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Set Target:"})," Shift+Click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Alt+Click node"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Duplicate:"})," Middle-click node, left-click to place"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Configure:"})," Click  on special recipes"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Connection Actions"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Delete:"})," Ctrl+Click input/output rectangle"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Auto-Connect:"})," Click input/output rectangle"]})]})]}),f.jsx("div",{style:{borderTop:"1px solid var(--border-divider)",margin:"15px 0"}}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"10px"},children:"Display"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Per Second/Cycle:"})," Toggle in extended panel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Total/Per Machine:"})," Toggle in extended panel"]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:"Pause Pollution:"})," / button"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Understanding Nodes"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:["A ",f.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:"node"})," represents a recipe box on the canvas. Each node shows inputs (left), outputs (right), and production statistics."]}),f.jsx("div",{style:{background:"var(--bg-main)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",padding:"30px 20px",marginBottom:"20px"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px",flexWrap:"wrap"},children:[f.jsxs("div",{style:{width:"320px",minHeight:"200px",background:"var(--bg-secondary)",border:"3px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"15px",position:"relative"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,textAlign:"center",marginBottom:"10px"},children:"Makes Iron Ingot"}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"50px",paddingBottom:"10px",borderBottom:"1px solid var(--border-divider)",fontSize:"11px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)"},children:[f.jsx("div",{children:"Cycle: 4s"}),f.jsx("div",{children:"Power: 150kW"}),f.jsx("div",{children:"Pollution: 0%/hr"})]}),f.jsxs("div",{style:{textAlign:"right"},children:[f.jsx("div",{style:{color:"var(--tier-1-color)",fontWeight:600},children:"Ingot Molder"}),f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"18px"},children:"5.0"})]})]}),f.jsx("div",{style:{position:"absolute",left:"-12px",top:"140px"},children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("div",{style:{background:"var(--input-bg)",border:"2px solid var(--input-border)",color:"var(--input-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"4x Liquid Iron"})]})})}),f.jsx("div",{style:{position:"absolute",right:"-12px",top:"140px"},children:f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[f.jsx("div",{style:{background:"var(--output-bg)",border:"2px solid var(--output-border)",color:"var(--output-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",fontSize:"11px",fontWeight:600,whiteSpace:"nowrap"},children:"2x Iron Ingot"}),f.jsx("div",{style:{width:"12px",height:"12px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"2px"}})]})})})]}),f.jsx("div",{style:{minWidth:"250px"},children:f.jsxs("div",{style:{marginBottom:"15px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:600,fontSize:"13px",marginBottom:"8px"},children:"Node Components:"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Recipe name at top"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Production stats (cycle, power, pollution)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Machine name and count"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Input rectangles (left, green)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Output rectangles (right, red)"}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:" Handles for connections"})]})]})})]})}),f.jsxs("div",{style:{marginTop:"20px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Handle States"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-supplied)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Supplied:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input is fully connected to outputs (square for items)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-input-deficient)",border:"2px solid #1a1a1a",borderRadius:"2px"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Input Deficient:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Input needs more supply (not enough connected)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-connected)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Connected:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output is fully consumed by inputs (circle for fluids)"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"180px"},children:[f.jsx("div",{style:{width:"14px",height:"14px",background:"var(--handle-output-excess)",border:"2px solid #1a1a1a",borderRadius:"50%"}}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Output Excess:"})]}),f.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"Output has excess production (not fully consumed)"})]}),f.jsxs("div",{style:{marginTop:"8px",padding:"10px",background:"rgba(212, 166, 55, 0.1)",border:"1px solid var(--border-divider)",borderRadius:"var(--radius-sm)",fontSize:"12px",color:"var(--text-secondary)"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Note:"})," Handle shapes indicate product type - squares for items, circles for fluids"]})]})]}),f.jsxs("div",{style:{marginTop:"25px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:"Special Node Features"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",paddingLeft:"15px"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"11px",fontWeight:700,color:"var(--output-text)"},children:"450C"}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Temperature Indicator"})]}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:"Appears on nodes with heat sources (boilers, heaters) or temperature-dependent recipes. Shows output temperature for heat sources (red border) or input temperature for temperature-dependent machines (green border). Connect heat sources to boilers and boilers to temperature-dependent recipes to change their values."})]}),f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{fontSize:"18px",lineHeight:1},children:""}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Settings Button"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:["Appears on special recipe nodes. Click to configure:",f.jsxs("ul",{style:{margin:"6px 0 0 0",paddingLeft:"20px"},children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Mineshaft Drill:"})," Drill head, consumables, depth, machine oil"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Logic Assembler:"})," Microchip stages, tick delays, machine oil"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Tree Farm:"})," Trees, harvesters, sprinklers, output hoppers"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Industrial Firebox:"})," Fuel type selection"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Chemical Plant:"})," Speed and efficiency factors"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Temperature Machines:"})," Output temperature settings"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Boilers:"})," Heat loss and coolant temperature"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Underground Waste Facility:"})," Input product types"]}),f.jsxs("li",{children:[f.jsx("strong",{children:"Liquid Dump/Burner:"})," View pollution calculations"]})]})]})]}),f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[f.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid var(--color-primary)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:700,color:"var(--color-primary)",boxShadow:"0 0 8px var(--color-primary)"},children:"T"}),f.jsx("span",{style:{color:"var(--text-primary)",fontSize:"13px",fontWeight:600},children:"Target Node"})]}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",paddingLeft:"15px"},children:'Nodes marked as targets (Shift+Click) show a glowing border. Use "View Targets" to manage production goals or "Compute Machines" to optimize machine counts across all targets.'})]})]})]})]})]}),f.jsxs("div",{style:{marginBottom:"30px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Capabilities"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Automatic Ratio Calculation:"})," Determines optimal production ratios for most recipes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Temperature System:"})," Full support for heat sources, boilers, and temperature-dependent recipes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Special Recipes:"})," Mineshaft Drill, Logic Assembler, Tree Farm, Industrial Firebox, Chemical Plant, Underground Waste Facility, Liquid Dump/Burner"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"LP Solver:"})," Set production targets and compute optimal machine counts across the entire production line"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Flow Analysis:"})," Real-time detection of excess production and deficiencies with visual indicators"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Pollution Tracking:"})," Global pollution simulation with real-time updates affecting tree farms and air separation units"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Data Management:"})," Import/export custom products, machines, recipes, and complete canvas layouts"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Theme Customization:"})," Full theme editor with color schemes, edge styles, and visual preferences"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--stat-positive)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Auto-Save:"})," Canvas state automatically persists to browser storage"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"#fca5a5",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Current Limitations"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Power Production:"})," Cannot calculate power generation from generators or power plants"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"CPP Setups:"})," Coal Power Plant configurations not yet supported"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"NPP Setups:"})," Nuclear Power Plant configurations not yet supported"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"#fca5a5",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Some Variable Recipes:"})," A few recipes still have variable quantities that cannot be auto-calculated"]})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Tips"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"15px"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:["Use ",f.jsx("span",{style:{fontWeight:600},children:"Shift+Click"})," to mark nodes as targets, then click ",f.jsx("span",{style:{fontWeight:600},children:"Compute Machines"})," to balance your entire production line"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:[f.jsx("span",{style:{fontWeight:600},children:"Machine Count Modes:"})," Free () allows LP/suggestions to change count, Capped () limits max value, Locked () prevents all changes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Handle colors indicate flow status: deficient inputs and excess outputs are highlighted"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Click input/output rectangles to auto-create and connect matching recipes"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsxs("span",{children:["Use ",f.jsx("span",{style:{fontWeight:600},children:"Apply to All"})," when editing machine counts to propagate changes through connected nodes"]})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[f.jsx("span",{style:{color:"var(--color-primary)",fontSize:"16px",lineHeight:"20px"},children:""}),f.jsx("span",{children:"Favorite recipes () appear at the top of the recipe selector for quick access"})]})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"18px",fontWeight:700,marginBottom:"15px",borderBottom:"2px solid var(--border-divider)",paddingBottom:"8px"},children:"Contact & Links"}),f.jsxs("div",{style:{paddingLeft:"15px"},children:[f.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"15px"},children:"Found a bug? Have suggestions? Want to contribute?"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px 20px",fontSize:"14px"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Discord: "}),f.jsx("a",{href:"https://discord.com/users/pollywrath4961",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"pollywrath4961"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Reddit: "}),f.jsx("a",{href:"https://www.reddit.com/user/Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"u/Pollywrath5"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Roblox: "}),f.jsx("a",{href:"https://www.roblox.com/users/profile?username=Pollywrath5",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Pollywrath5"})]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"GitHub: "}),f.jsx("a",{href:"https://github.com/Pollywrath/Industrialist-Production-Calculator",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary)",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.textDecoration="underline"},onMouseLeave:t=>{t.currentTarget.style.textDecoration="none"},children:"Source Code"})]})]})]})]})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),vc="industrialist_saves",Ta="industrialist_current_save_id",Pa=()=>{try{const e=localStorage.getItem(vc);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading saves:",e),{}}},aV=(e,t)=>{var n;try{const i=Pa(),a=`save_${Date.now()}`,s={id:a,name:e||"Untitled Save",timestamp:Date.now(),nodeCount:((n=t.nodes)==null?void 0:n.length)||0,data:t};return i[a]=s,localStorage.setItem(vc,JSON.stringify(i)),localStorage.setItem(Ta,a),s}catch(i){return console.error("Error saving canvas:",i),null}},sV=e=>{try{const n=Pa()[e];return n?(localStorage.setItem(Ta,e),n.data):null}catch(t){return console.error("Error loading save:",t),null}},uV=e=>{try{const t=Pa();return delete t[e],localStorage.setItem(vc,JSON.stringify(t)),localStorage.getItem(Ta)===e&&localStorage.removeItem(Ta),!0}catch(t){return console.error("Error deleting save:",t),!1}},lV=(e,t)=>{try{const n=Pa();return n[e]?(n[e].name=t,localStorage.setItem(vc,JSON.stringify(n)),!0):!1}catch(n){return console.error("Error renaming save:",n),!1}},cV=()=>{var e;try{const t=localStorage.getItem(Ta);return t&&((e=Pa()[t])==null?void 0:e.name)||"Untitled"}catch{return"Untitled"}},dV=({onClose:e,onLoad:t,currentCanvas:n,onImport:i,onExportCanvas:a})=>{const[s,u]=A.useState({}),[l,d]=A.useState(""),[p,m]=A.useState(null),[_,h]=A.useState(""),[g,x]=A.useState(null);A.useEffect(()=>{q()},[]);const q=()=>{const P=Pa();u(P);const j=localStorage.getItem(Ta);x(j)},w=()=>{if(!l.trim()){alert("Please enter a name for your save");return}const P=aV(l.trim(),n);P?(d(""),q(),alert(`Canvas saved as "${P.name}"`)):alert("Failed to save canvas")},b=P=>{if(!window.confirm("Load this save? Your current canvas will be replaced."))return;const j=sV(P);j?(x(P),t(j),e()):alert("Failed to load save")},k=P=>{const j=s[P];window.confirm(`Delete save "${j.name}"? This cannot be undone.`)&&(uV(P)?q():alert("Failed to delete save"))},S=P=>{m(P),h(s[P].name)},M=P=>{if(!_.trim()){alert("Name cannot be empty");return}lV(P,_.trim())?(q(),m(null),h("")):alert("Failed to rename save")},I=()=>{m(null),h("")},E=P=>new Date(P).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),T=Object.values(s).sort((P,j)=>j.timestamp-P.timestamp);return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"700px",maxHeight:"85vh"},children:[f.jsx("h2",{className:"modal-title",children:"Save Manager"}),f.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"10px"},children:["Current Canvas: ",f.jsx("span",{style:{color:"var(--color-primary)",fontWeight:600},children:cV()})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[f.jsx("input",{type:"text",value:l,onChange:P=>d(P.target.value),onKeyPress:P=>P.key==="Enter"&&w(),placeholder:"Enter save name...",className:"input",style:{flex:1}}),f.jsx("button",{onClick:w,className:"btn btn-primary",style:{minWidth:"120px"},children:"Save Current"})]}),f.jsxs("div",{style:{paddingTop:"10px",borderTop:"1px solid var(--border-divider)"},children:[f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"8px",fontWeight:600},children:"Import/Export"}),f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("button",{onClick:()=>{i&&i()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Import Canvas"}),f.jsx("button",{onClick:()=>{a&&a()},className:"btn btn-secondary",style:{flex:1,padding:"8px 12px",fontSize:"13px"},children:" Export Canvas"})]})]})]}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(85vh - 250px)",overflowY:"auto"},children:[f.jsxs("h3",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"12px"},children:["Saved Canvases (",T.length,")"]}),T.length===0?f.jsx("div",{className:"empty-state",children:"No saves yet. Save your current canvas to get started."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:T.map(P=>f.jsxs("div",{style:{padding:"15px",background:g===P.id?"rgba(212, 166, 55, 0.15)":"var(--bg-main)",border:g===P.id?"2px solid var(--color-primary)":"2px solid var(--border-light)",borderRadius:"var(--radius-md)",transition:"all 0.2s"},children:[p===P.id?f.jsx("div",{style:{marginBottom:"10px"},children:f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("input",{type:"text",value:_,onChange:j=>h(j.target.value),onKeyPress:j=>{j.key==="Enter"&&M(P.id),j.key==="Escape"&&I()},className:"input",style:{flex:1},autoFocus:!0}),f.jsx("button",{onClick:()=>M(P.id),className:"btn btn-primary",style:{padding:"8px 16px"},children:""}),f.jsx("button",{onClick:I,className:"btn btn-secondary",style:{padding:"8px 16px"},children:""})]})}):f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:[P.name,g===P.id&&f.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",color:"var(--color-primary)",fontWeight:600,padding:"2px 6px",background:"rgba(212, 166, 55, 0.2)",borderRadius:"4px"},children:"CURRENT"})]}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:[E(P.timestamp),"  ",P.nodeCount," nodes"]})]})}),p!==P.id&&f.jsxs("div",{style:{display:"flex",gap:"8px"},children:[f.jsx("button",{onClick:()=>b(P.id),className:"btn btn-primary",style:{flex:1,padding:"8px 16px"},children:"Load"}),f.jsx("button",{onClick:()=>S(P.id),className:"btn btn-secondary",style:{flex:1,padding:"8px 16px"},children:"Rename"}),f.jsx("button",{onClick:()=>k(P.id),className:"btn btn-delete",style:{padding:"8px 16px"},children:"Delete"})]})]},P.id))})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},pV=["r_mineshaft_drill","r_logic_assembler","r_tree_farm","r_underground_waste_facility","r_liquid_dump","r_liquid_burner"],fV=({recipe:e,onClose:t,onSave:n,availableProducts:i,defaultMachines:a,allRecipes:s=[],isCreatingNew:u=!1})=>{var E,T,P;const l=!u&&pV.includes(e.id),d=!u&&(((E=e.inputs)==null?void 0:E.some(j=>j.product_id==="p_variableproduct"))||((T=e.outputs)==null?void 0:T.some(j=>j.product_id==="p_variableproduct"))),[p,m]=A.useState({...e,inputs:e.inputs?[...e.inputs]:[],outputs:e.outputs?[...e.outputs]:[]}),_=(j,D)=>{m(O=>({...O,[j]:D}))},h=(j,D,O)=>{const F=[...p.inputs];F[j]={...F[j],[D]:O},m(X=>({...X,inputs:F}))},g=(j,D,O)=>{const F=[...p.outputs];F[j]={...F[j],[D]:O},m(X=>({...X,outputs:F}))},x=()=>{const j=[...p.inputs,{product_id:"",quantity:1}];m(D=>({...D,inputs:j}))},q=j=>{const D=p.inputs.filter((O,F)=>F!==j);m(O=>({...O,inputs:D}))},w=()=>{const j=[...p.outputs,{product_id:"",quantity:1}];m(D=>({...D,outputs:j}))},b=j=>{const D=p.outputs.filter((O,F)=>F!==j);m(O=>({...O,outputs:D}))},k=j=>{const O=`r_${j.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}_`,F=s.filter(V=>V.id.startsWith(O)).map(V=>{const Z=V.id.match(/_(\d+)$/);return Z?parseInt(Z[1]):0});let X=1;for(;F.includes(X);)X++;return`${O}${String(X).padStart(2,"0")}`},S=()=>{if(u){if(!p.name||!p.name.trim())return alert("Recipe name is required"),!1;if(!p.machine_id)return alert("Machine is required"),!1;if(!a.find(Z=>Z.id===p.machine_id))return alert("Selected machine does not exist"),!1}const D=[...p.inputs.map(V=>V.product_id),...p.outputs.map(V=>V.product_id)].filter(V=>V&&V!=="p_variableproduct"&&V!=="p_any_fluid"&&V!=="p_any_item"&&!i.find(Z=>Z.id===V));if(D.length>0)return alert(`Invalid product IDs: ${D.join(", ")}`),!1;const O=p.inputs.some(V=>!V.product_id),F=p.outputs.some(V=>!V.product_id);return O||F?(alert("All inputs and outputs must have a product selected"),!1):typeof p.cycle_time=="number"&&p.cycle_time<=0?(alert("Cycle time must be greater than 0"),!1):((p.inputs.some(V=>V.quantity==="Variable")||p.outputs.some(V=>V.quantity==="Variable"))&&console.log("Recipe contains Variable quantities - these will be preserved"),!0)},M=()=>{if(!S())return;let j={...p};if(u){const D=a.find(O=>O.id===p.machine_id);j.id=k(D.name)}n(j),t()},I=a.find(j=>j.id===e.machine_id);return l||d?f.jsx("div",{className:"modal-overlay",onClick:t,children:f.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"600px"},children:[f.jsx("h2",{className:"modal-title",children:l?"Special Recipe":"Variable Product Recipe"}),f.jsxs("div",{style:{padding:"20px",background:"rgba(212, 166, 55, 0.1)",border:"2px solid var(--border-divider)",borderRadius:"var(--radius-md)",marginBottom:"20px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600,marginBottom:"12px"},children:e.name||e.id}),f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:"1.6"},children:l?f.jsxs(f.Fragment,{children:["This is a special recipe with dynamic behavior configured per-node. It cannot be edited in the Data Manager.",f.jsx("br",{}),f.jsx("br",{}),"Special recipes include:",f.jsxs("ul",{style:{marginTop:"10px",paddingLeft:"20px"},children:[f.jsx("li",{children:"Mineshaft Drill (depth, consumables)"}),f.jsx("li",{children:"Logic Assembler (microchip stages)"}),f.jsx("li",{children:"Tree Farm (layout configuration)"}),f.jsx("li",{children:"Underground Waste Facility (variable inputs)"}),f.jsx("li",{children:"Liquid Dump/Burner (pollution calculation)"})]})]}):f.jsx(f.Fragment,{children:"This recipe contains variable products (p_variableproduct) and cannot be edited in the Data Manager. Variable products are dynamically determined at runtime based on node configuration."})})]}),f.jsx("button",{onClick:t,className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}):f.jsx("div",{className:"modal-overlay",onClick:t,children:f.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),style:{width:"700px",maxHeight:"90vh",overflowY:"auto"},children:[f.jsx("h2",{className:"modal-title",children:u?"Create New Recipe":`Edit Recipe: ${e.name||e.id}`}),u&&f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Recipe Name *"}),f.jsx("input",{type:"text",value:p.name,onChange:j=>_("name",j.target.value),placeholder:"Enter recipe name",className:"input"})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:["Machine ",u?"*":""]}),u?f.jsxs("select",{value:p.machine_id,onChange:j=>_("machine_id",j.target.value),className:"select",children:[f.jsx("option",{value:"",children:"Select a machine"}),a.sort((j,D)=>j.name.localeCompare(D.name)).map(j=>f.jsxs("option",{value:j.id,children:[j.name," (Tier ",j.tier||1,")"]},j.id))]}):f.jsx("div",{style:{color:(I==null?void 0:I.tier)===1?"var(--tier-1-color)":(I==null?void 0:I.tier)===2?"var(--tier-2-color)":(I==null?void 0:I.tier)===3?"var(--tier-3-color)":(I==null?void 0:I.tier)===4?"var(--tier-4-color)":(I==null?void 0:I.tier)===5?"var(--tier-5-color)":"var(--text-secondary)",fontWeight:600,fontSize:"14px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:(I==null?void 0:I.name)||e.machine_id}),u&&p.machine_id&&f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:["Recipe ID will be: ",k(((P=a.find(j=>j.id===p.machine_id))==null?void 0:P.name)||"")]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Cycle Time (seconds)"}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:p.cycle_time==="Variable"?"":p.cycle_time,onChange:j=>_("cycle_time",parseFloat(j.target.value)),placeholder:p.cycle_time==="Variable"?"Variable":"",className:"input",disabled:p.cycle_time==="Variable",title:p.cycle_time==="Variable"?"Cannot edit Variable values":""})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Consumption (W)"}),f.jsx("input",{type:"number",step:"1000",value:typeof p.power_consumption=="number"?p.power_consumption:"",onChange:j=>_("power_consumption",parseFloat(j.target.value)),placeholder:"Variable",className:"input"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Power Type"}),f.jsxs("select",{value:p.power_type||"MV",onChange:j=>_("power_type",j.target.value),className:"select",children:[f.jsx("option",{value:"LV",children:"LV"}),f.jsx("option",{value:"MV",children:"MV"}),f.jsx("option",{value:"HV",children:"HV"})]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"13px",fontWeight:600,marginBottom:"6px"},children:"Pollution (%/hr)"}),f.jsx("input",{type:"number",step:"0.1",value:p.pollution,onChange:j=>_("pollution",parseFloat(j.target.value)),className:"input"})]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[f.jsx("label",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600},children:"Inputs"}),f.jsx("button",{onClick:x,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Input"})]}),p.inputs.map((j,D)=>f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--input-bg)",border:"1px solid var(--input-border)",borderRadius:"var(--radius-sm)"},children:[f.jsxs("select",{value:j.product_id,onChange:O=>h(D,"product_id",O.target.value),className:"select",style:{flex:2},children:[f.jsx("option",{value:"",children:"Select Product"}),[...i].filter(O=>O.id!=="p_variableproduct"&&O.id!=="p_any_fluid"&&O.id!=="p_any_item").sort((O,F)=>O.name.localeCompare(F.name)).map(O=>f.jsxs("option",{value:O.id,children:[O.name," (",O.type,")"]},O.id))]}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:j.quantity==="Variable"?"":j.quantity,onChange:O=>h(D,"quantity",parseFloat(O.target.value)),placeholder:j.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:j.quantity==="Variable",title:j.quantity==="Variable"?"Cannot edit Variable quantities":""}),f.jsx("button",{onClick:()=>q(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.inputs.length===0&&f.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No inputs. Click "Add Input" to add one.'})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[f.jsx("label",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600},children:"Outputs"}),f.jsx("button",{onClick:w,className:"btn btn-secondary",style:{padding:"4px 12px",fontSize:"12px"},children:"+ Add Output"})]}),p.outputs.map((j,D)=>f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",padding:"10px",background:"var(--output-bg)",border:"1px solid var(--output-border)",borderRadius:"var(--radius-sm)"},children:[f.jsxs("select",{value:j.product_id,onChange:O=>g(D,"product_id",O.target.value),className:"select",style:{flex:2},children:[f.jsx("option",{value:"",children:"Select Product"}),[...i].filter(O=>O.id!=="p_variableproduct"&&O.id!=="p_any_fluid"&&O.id!=="p_any_item").sort((O,F)=>O.name.localeCompare(F.name)).map(O=>f.jsxs("option",{value:O.id,children:[O.name," (",O.type,")"]},O.id))]}),f.jsx("input",{type:"number",step:"0.1",min:"0",value:j.quantity==="Variable"?"":j.quantity,onChange:O=>g(D,"quantity",parseFloat(O.target.value)),placeholder:j.quantity==="Variable"?"Variable":"Quantity",className:"input",style:{flex:1},disabled:j.quantity==="Variable",title:j.quantity==="Variable"?"Cannot edit Variable quantities":""}),f.jsx("button",{onClick:()=>b(D),className:"btn btn-delete",style:{padding:"4px 12px",fontSize:"12px"},children:"Remove"})]},D)),p.outputs.length===0&&f.jsx("div",{style:{padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",color:"var(--text-secondary)",fontSize:"13px",textAlign:"center"},children:'No outputs. Click "Add Output" to add one.'})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:t,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{flex:1},children:"Save Changes"})]})]})})},nc="industrialist_custom_products",ic="industrialist_custom_machines",oc="industrialist_custom_recipes",_V=(e,t,n)=>{localStorage.getItem(nc)||localStorage.setItem(nc,JSON.stringify(e)),localStorage.getItem(ic)||localStorage.setItem(ic,JSON.stringify(t)),localStorage.getItem(oc)||localStorage.setItem(oc,JSON.stringify(n))},ja=()=>{try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom products:",e),[]}},Ra=()=>{try{const e=localStorage.getItem(ic);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom machines:",e),[]}},nu=()=>{try{const e=localStorage.getItem(oc);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom recipes:",e),[]}},Us=e=>{try{return localStorage.setItem(nc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom products:",t),!1}},Gs=e=>{try{return localStorage.setItem(ic,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom machines:",t),!1}},Ks=e=>{try{return localStorage.setItem(oc,JSON.stringify(e)),!0}catch(t){return console.error("Error saving custom recipes:",t),!1}},fw=(e,t)=>{const n=ja(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Us(n)):!1},_w=(e,t)=>{const n=Ra(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Gs(n)):!1},mV=(e,t)=>{const n=nu(),i=n.findIndex(a=>a.id===e);return i>=0?(n[i]={...n[i],...t},Ks(n)):!1},hV=e=>Us(e),yV=e=>Gs(e),gV=e=>Ks(e),vV=(e,t,n)=>{const i={};return e&&(i.products=ja()),t&&(i.machines=Ra()),n&&(i.recipes=nu()),i},xV=e=>{const t={products:0,machines:0,recipes:0,errors:[]};try{if(e.products){const n=ja(),i=new Map(n.map(s=>[s.id,s]));e.products.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Us(a)&&(t.products=e.products.length)}if(e.machines){const n=Ra(),i=new Map(n.map(s=>[s.id,s]));e.machines.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Gs(a)&&(t.machines=e.machines.length)}if(e.recipes){const n=nu(),i=new Map(n.map(s=>[s.id,s]));e.recipes.forEach(s=>{i.set(s.id,s)});const a=Array.from(i.values());Ks(a)&&(t.recipes=e.recipes.length)}}catch(n){t.errors.push(n.message)}return t},Sl=e=>typeof e=="number"?Math.round(e*1e4)/1e4:e,qr=e=>typeof e!="number"?e:e>=1e9?Sl(e/1e9)+"B":e>=1e6?Sl(e/1e6)+"M":e>=1e3?Sl(e/1e3)+"k":Sl(e),jp=e=>e>=1e6?`${(e/1e6).toFixed(2)} MMF/s`:e>=1e3?`${(e/1e3).toFixed(2)} kMF/s`:`${e.toFixed(2)} MF/s`,wV=e=>{const t=["p_coal","p_coke_fuel","p_planks","p_oak_log"],n=["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"];return Mn.filter(a=>{if(["r_mineshaft_drill_01","r_logic_assembler_01"].includes(a.id))return!1;const s=["r_liquid_dump","r_liquid_burner"].includes(a.id),u=a.id==="r_underground_waste_facility"&&["p_concrete_block","p_lead_ingot"].includes(e);if(s||a.id==="r_underground_waste_facility"&&!u)return!1;const l=a.inputs.some(p=>p.product_id===e&&p.product_id!=="p_variableproduct"),d=t.includes(e)&&n.includes(a.id)&&a.inputs.some(p=>p.product_id==="p_variableproduct");return l||d||u})},bV=e=>Mn.filter(t=>!["r_mineshaft_drill_01","r_logic_assembler_01"].includes(t.id)&&t.outputs.some(n=>n.product_id===e&&n.product_id!=="p_variableproduct")),Cl=e=>{const t=Mn.filter(n=>n.machine_id===e);return e==="m_underground_waste_facility"?[P0]:e==="m_liquid_dump"?[V0]:e==="m_liquid_burner"?[F0]:t},bE=(e,t,n,i,a=Hr)=>{const s=(i==null?void 0:i.minSteamTemp)||100;return e.map(u=>{if(n){if(u.product_id==="p_steam"){const l=Math.max(t,a),d=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;return l<s?{...u,temperature:l,quantity:0,originalQuantity:d}:{...u,temperature:l,quantity:d,originalQuantity:d}}return u}if(nE(u.product_id)){const l=Math.max(t,a);return{...u,temperature:l}}return u})},bs=(e,t)=>{let n={...e};const i=dr[t];if(i){const s=l3(t),u=i.type==="boiler",l=u?Gi:Hr,d=u?{...s,coolantTemp:Gi}:s;let p=null;if(i.type==="product_dependent"&&e.inputs){const h=e.inputs.find(g=>["p_water","p_filtered_water","p_distilled_water"].includes(g.product_id));p=(h==null?void 0:h.product_id)||null}const m=pg(t,d,l,p,u?Gi:null),_=bE(e.outputs,m,u,i,l);n={...n,outputs:_,temperatureSettings:d}}if(Ur(t)){const s=an[t];(s==null?void 0:s.type)==="steam_input"&&(n={...n,tempDependentInputTemp:In})}return n},qV=({onClose:e,defaultProducts:t,defaultMachines:n,defaultRecipes:i,onDataChange:a})=>{const[s,u]=A.useState("products"),[l,d]=A.useState(""),[p,m]=A.useState(!0),[_,h]=A.useState(!0),[g,x]=A.useState(!0),q=A.useRef(null),w=()=>{const S=vV(p,_,g),M=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),I=URL.createObjectURL(M),E=document.createElement("a");E.href=I,E.download=`industrialist-data-${Date.now()}.json`,E.click(),URL.revokeObjectURL(I)},b=()=>{var S;(S=q.current)==null||S.click()},k=S=>{var E;const M=(E=S.target.files)==null?void 0:E[0];if(!M)return;const I=new FileReader;I.onload=T=>{try{const P=JSON.parse(T.target.result),j=P.products||P.machines||P.recipes,D=P.canvas;if(!j&&D){alert("This file only contains canvas data. Please use Save Manager to import canvas layouts."),S.target.value="";return}if(!j){alert("This file does not contain any game data (products, machines, or recipes)."),S.target.value="";return}if(D&&!window.confirm(`This file contains canvas data which will be IGNORED.

Only game data (products/machines/recipes) will be imported.

To import canvas data, use Save Manager > Import Canvas.

Continue with data-only import?`)){S.target.value="";return}const O=xV(P);let F=`Import complete:
`;O.products>0&&(F+=`- ${O.products} products imported/updated
`),O.machines>0&&(F+=`- ${O.machines} machines imported/updated
`),O.recipes>0&&(F+=`- ${O.recipes} recipes imported/updated
`),O.errors.length>0&&(F+=`
Errors: ${O.errors.join(", ")}`),alert(F),a()}catch(P){alert(`Import failed: ${P.message}`)}},I.readAsText(M),S.target.value=""};return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),style:{width:"750px",maxWidth:"95vw",maxHeight:"90vh"},children:[f.jsx("h2",{className:"modal-title",children:"Data Manager"}),f.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"var(--bg-main)",borderRadius:"var(--radius-md)",border:"2px solid var(--border-divider)"},children:[f.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"Import/Export Data"}),f.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:p,onChange:S=>m(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Products"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:_,onChange:S=>h(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Machines"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-secondary)",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},children:[f.jsx("input",{type:"checkbox",checked:g,onChange:S=>x(S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Recipes"]})]}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Import JSON"}),f.jsx("button",{onClick:w,className:"btn btn-primary",children:"Export Data"})]})]}),f.jsx("input",{ref:q,type:"file",accept:".json",style:{display:"none"},onChange:k})]}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",borderBottom:"2px solid var(--border-divider)"},children:[f.jsx("button",{onClick:()=>u("products"),className:`btn ${s==="products"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Products"}),f.jsx("button",{onClick:()=>u("machines"),className:`btn ${s==="machines"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Machines"}),f.jsx("button",{onClick:()=>u("recipes"),className:`btn ${s==="recipes"?"btn-primary":"btn-secondary"}`,style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0"},children:"Recipes"})]}),f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:l,onChange:S=>d(S.target.value),className:"input"})}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"calc(90vh - 400px)",overflowY:"auto"},children:[s==="products"&&f.jsx(SV,{searchTerm:l,defaultProducts:t,onDataChange:a}),s==="machines"&&f.jsx(CV,{searchTerm:l,defaultMachines:n,onDataChange:a}),s==="recipes"&&f.jsx(kV,{searchTerm:l,defaultRecipes:i,defaultMachines:n,defaultProducts:t,onDataChange:a})]}),f.jsx("button",{onClick:e,className:"btn btn-secondary",style:{marginTop:"20px",width:"100%"},children:"Close"})]})})},SV=({searchTerm:e,defaultProducts:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[_,h]=A.useState({name:"",type:"item",price:0,rp_multiplier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(ja())},x=i.filter(E=>E.name.toLowerCase().includes(e.toLowerCase())||E.id.toLowerCase().includes(e.toLowerCase())).sort((E,T)=>E.name.localeCompare(T.name)),q=E=>{u(E.id),d({price:E.price==="Variable"?"":E.price,rp_multiplier:E.rp_multiplier==="Variable"?"":E.rp_multiplier,type:E.type})},w=E=>{const T={price:l.price===""?"Variable":parseFloat(l.price),rp_multiplier:l.rp_multiplier===""?"Variable":parseFloat(l.rp_multiplier),type:l.type};fw(E,T)?(g(),n(),u(null)):alert("Failed to update product")},b=()=>{u(null),d({})},k=E=>{const T=t.find(j=>j.id===E);if(!T){alert("Default product not found");return}const P={price:T.price,rp_multiplier:T.rp_multiplier,type:T.type};fw(E,P)?(g(),n()):alert("Failed to reset product to default")},S=E=>"p_"+E.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!_.name.trim()){alert("Product name is required");return}const E=S(_.name);if(i.find(j=>j.id===E)){alert(`Product ID "${E}" already exists. Please use a different name.`);return}const T={id:E,name:_.name.trim(),type:_.type,price:parseFloat(_.price)||0,rp_multiplier:parseFloat(_.rp_multiplier)||1},P=[...i,T];Us(P)?(g(),n(),m(!1),h({name:"",type:"item",price:0,rp_multiplier:1})):alert("Failed to add product")},I=E=>{var P;if(!window.confirm(`Delete product "${(P=i.find(j=>j.id===E))==null?void 0:P.name}"? This cannot be undone.`))return;const T=i.filter(j=>j.id!==E);Us(T)?(g(),n()):alert("Failed to delete product")};return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Product"})}),p&&f.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Product"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),f.jsx("input",{type:"text",value:_.name,onChange:E=>h({..._,name:E.target.value}),className:"input",placeholder:"Product name"}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",_.name?S(_.name):"p_..."]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Type"}),f.jsxs("select",{value:_.type,onChange:E=>h({..._,type:E.target.value}),className:"select",children:[f.jsx("option",{value:"item",children:"Item"}),f.jsx("option",{value:"fluid",children:"Fluid"})]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Price"}),f.jsx("input",{type:"number",value:_.price,onChange:E=>h({..._,price:E.target.value}),className:"input",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"RP Multiplier"}),f.jsx("input",{type:"number",step:"0.1",value:_.rp_multiplier,onChange:E=>h({..._,rp_multiplier:E.target.value}),className:"input",placeholder:"1"})]})]}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Product"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Product Name"}),f.jsx("div",{children:"Type"}),f.jsx("div",{children:"Price"}),f.jsx("div",{children:"RP Mult"}),f.jsx("div",{children:"Actions"})]}),x.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 100px 100px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name}),s===E.id?f.jsxs(f.Fragment,{children:[f.jsxs("select",{value:l.type,onChange:T=>d({...l,type:T.target.value}),className:"select",style:{padding:"6px",fontSize:"12px"},children:[f.jsx("option",{value:"item",children:"Item"}),f.jsx("option",{value:"fluid",children:"Fluid"})]}),f.jsx("input",{type:"number",value:l.price,onChange:T=>d({...l,price:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:E.price==="Variable",title:E.price==="Variable"?"Cannot edit Variable values":""}),f.jsx("input",{type:"number",value:l.rp_multiplier,onChange:T=>d({...l,rp_multiplier:T.target.value}),placeholder:"Variable",className:"input",style:{padding:"6px",fontSize:"12px"},disabled:E.rp_multiplier==="Variable",title:E.rp_multiplier==="Variable"?"Cannot edit Variable values":""}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>w(E.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),f.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.type}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.price==="Variable"?"Variable":`$${qr(E.price)}`}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:E.rp_multiplier==="Variable"?"Variable":`${E.rp_multiplier>=1e3?qr(E.rp_multiplier):E.rp_multiplier}x`}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>q(E),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>k(E.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),f.jsx("button",{onClick:()=>I(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},E.id))]})},CV=({searchTerm:e,defaultMachines:t,onDataChange:n})=>{const[i,a]=A.useState([]),[s,u]=A.useState(null),[l,d]=A.useState({}),[p,m]=A.useState(!1),[_,h]=A.useState({name:"",cost:0,tier:1});A.useEffect(()=>{g()},[]);const g=()=>{a(Ra())},x=i.filter(E=>E.name.toLowerCase().includes(e.toLowerCase())||E.id.toLowerCase().includes(e.toLowerCase())).sort((E,T)=>E.name.localeCompare(T.name)),q=E=>{u(E.id),d({cost:E.cost,tier:E.tier||1})},w=E=>{const T={cost:parseFloat(l.cost),tier:parseInt(l.tier)};_w(E,T)?(g(),n(),u(null)):alert("Failed to update machine")},b=()=>{u(null),d({})},k=E=>{const T=t.find(j=>j.id===E);if(!T){alert("Default machine not found");return}const P={cost:T.cost,tier:T.tier};_w(E,P)?(g(),n()):alert("Failed to reset machine to default")},S=E=>"m_"+E.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),M=()=>{if(!_.name.trim()){alert("Machine name is required");return}const E=S(_.name);if(i.find(j=>j.id===E)){alert(`Machine ID "${E}" already exists. Please use a different name.`);return}const T={id:E,name:_.name.trim(),cost:parseFloat(_.cost)||0,tier:parseInt(_.tier)||1},P=[...i,T];Gs(P)?(g(),n(),m(!1),h({name:"",cost:0,tier:1})):alert("Failed to add machine")},I=E=>{var P;if(!window.confirm(`Delete machine "${(P=i.find(j=>j.id===E))==null?void 0:P.name}"? This cannot be undone.`))return;const T=i.filter(j=>j.id!==E);Gs(T)?(g(),n()):alert("Failed to delete machine")};return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:()=>m(!p),className:"btn btn-primary",style:{width:"100%"},children:p?"Cancel":"+ Add New Machine"})}),p&&f.jsxs("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"15px",border:"2px solid var(--border-primary)"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:"New Machine"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px",marginBottom:"10px"},children:[f.jsxs("div",{style:{gridColumn:"1 / -1"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Name"}),f.jsx("input",{type:"text",value:_.name,onChange:E=>h({..._,name:E.target.value}),className:"input",placeholder:"Machine name"}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:["ID: ",_.name?S(_.name):"m_..."]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Cost"}),f.jsx("input",{type:"number",value:_.cost,onChange:E=>h({..._,cost:E.target.value}),className:"input",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",color:"var(--text-secondary)",fontSize:"12px",marginBottom:"4px"},children:"Tier"}),f.jsxs("select",{value:_.tier,onChange:E=>h({..._,tier:E.target.value}),className:"select",children:[f.jsx("option",{value:"1",children:"Tier 1"}),f.jsx("option",{value:"2",children:"Tier 2"}),f.jsx("option",{value:"3",children:"Tier 3"}),f.jsx("option",{value:"4",children:"Tier 4"}),f.jsx("option",{value:"5",children:"Tier 5"})]})]})]}),f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"Create Machine"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Machine Name"}),f.jsx("div",{children:"Cost"}),f.jsx("div",{children:"Tier"}),f.jsx("div",{children:"Actions"})]}),x.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 80px 130px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name}),s===E.id?f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"number",value:l.cost,onChange:T=>d({...l,cost:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),f.jsx("input",{type:"number",min:"1",max:"5",value:l.tier,onChange:T=>d({...l,tier:T.target.value}),className:"input",style:{padding:"6px",fontSize:"12px"}}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>w(E.id),className:"btn btn-primary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Save",children:""}),f.jsx("button",{onClick:b,className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Cancel",children:""})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{color:"var(--text-secondary)"},children:["$",qr(E.cost)]}),f.jsxs("div",{style:{color:"var(--text-secondary)"},children:["Tier ",E.tier||1]}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>q(E),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>k(E.id),className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Reset",children:""}),f.jsx("button",{onClick:()=>I(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]})]},E.id))]})},kV=({searchTerm:e,defaultRecipes:t,defaultMachines:n,defaultProducts:i,onDataChange:a})=>{const[s,u]=A.useState([]),[l,d]=A.useState([]),[p,m]=A.useState([]),[_,h]=A.useState(null),[g,x]=A.useState(!1);A.useEffect(()=>{q(),w(),b()},[]);const q=()=>{u(nu())},w=()=>{d(ja())},b=()=>{m(Ra())},k=(E,T=!1)=>{if(T){const P=[...s,E];Ks(P)?(q(),w(),b(),a()):alert("Failed to create recipe")}else mV(E.id,E)?(q(),w(),b(),a()):alert("Failed to save recipe")},S=E=>{var P;if(!window.confirm(`Delete recipe "${((P=s.find(j=>j.id===E))==null?void 0:P.name)||E}"? This cannot be undone.`))return;const T=s.filter(j=>j.id!==E);Ks(T)?(q(),w(),b(),a()):alert("Failed to delete recipe")},M=()=>{h({id:"",name:"",machine_id:"",cycle_time:1,power_consumption:0,power_type:"MV",pollution:0,inputs:[],outputs:[]}),x(!0)},I=s.filter(E=>{var T;return((T=E.name)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))||E.id.toLowerCase().includes(e.toLowerCase())}).sort((E,T)=>{const P=E.name||E.id,j=T.name||T.id;return P.localeCompare(j)});return f.jsxs("div",{children:[f.jsx("div",{style:{marginBottom:"15px"},children:f.jsx("button",{onClick:M,className:"btn btn-primary",style:{width:"100%"},children:"+ Add New Recipe"})}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",fontWeight:600,fontSize:"13px",color:"var(--text-primary)",marginBottom:"10px"},children:[f.jsx("div",{children:"Recipe Name"}),f.jsx("div",{children:"Machine"}),f.jsx("div",{children:"Cycle Time"}),f.jsx("div",{children:"Power"}),f.jsx("div",{children:"Actions"})]}),I.map(E=>f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 110px 110px 110px",gap:"8px",padding:"10px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",marginBottom:"8px",alignItems:"center",fontSize:"13px"},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontWeight:500},children:E.name||E.id}),f.jsx("div",{style:{color:(()=>{const T=p.find(P=>P.id===E.machine_id);if(!T)return"var(--text-secondary)";switch(T.tier){case 1:return"var(--tier-1-color)";case 2:return"var(--tier-2-color)";case 3:return"var(--tier-3-color)";case 4:return"var(--tier-4-color)";case 5:return"var(--tier-5-color)";default:return"var(--text-secondary)"}})(),fontWeight:500},children:(()=>{const T=p.find(P=>P.id===E.machine_id);return T?T.name:E.machine_id})()}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof E.cycle_time=="number"?`${E.cycle_time}s`:String(E.cycle_time)}),f.jsx("div",{style:{color:"var(--text-secondary)"},children:typeof E.power_consumption=="number"?`${qr(E.power_consumption)}W`:typeof E.power_consumption=="object"&&E.power_consumption!==null?`${qr(E.power_consumption.max||E.power_consumption.average||0)}W`:String(E.power_consumption)}),f.jsxs("div",{style:{display:"flex",gap:"4px"},children:[f.jsx("button",{onClick:()=>{h(E),x(!1)},className:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Edit",children:""}),f.jsx("button",{onClick:()=>S(E.id),className:"btn btn-delete",style:{padding:"2px 6px",fontSize:"11px",minWidth:"auto",width:"auto"},title:"Delete",children:""})]})]},E.id)),_&&f.jsx(fV,{recipe:_,onClose:()=>{h(null),x(!1)},onSave:E=>k(E,g),availableProducts:l,defaultMachines:p,allRecipes:s,isCreatingNew:g})]})},Rs=(e,t)=>{var s,u,l,d,p,m;if(!e||e.length===0)return{nodes:{},products:{},connections:[]};const n={nodes:{},products:{},connections:[]},i=e.length;for(let _=0;_<i;_++){const h=e[_],g=h.id,x=(s=h.data)==null?void 0:s.recipe,q=((u=h.data)==null?void 0:u.machineCount)||0,w=(l=h.data)==null?void 0:l.machine;if(!x)return;const b=x.isMineshaftDrill||x.id==="r_mineshaft_drill",k=x.isLogicAssembler||x.id==="r_logic_assembler",S=x.isTreeFarm||x.id==="r_tree_farm",M=w&&w.id==="m_industrial_firebox",I=w&&Ur(w.id),E=b||k||S||M||I;let T=x.cycle_time;if(T==="Variable"||typeof T!="number"||T<=0){if(!E)return;T=1}const P=w&&Ur(w.id),j=P?an[w.id]:null;if(P&&(j==null?void 0:j.type)==="steam_input"&&!(w.id==="m_steam_cracking_plant"&&!hi(x))){const F=x.tempDependentInputTemp??In;T=Wn(w.id,F,T)}const D={id:g,recipe:x,machineCount:q,cycleTime:T,isSpecialRecipe:E,isMineshaftDrill:b,isLogicAssembler:k,isTempDependent:P,machineCountMode:((d=h.data)==null?void 0:d.machineCountMode)||"free",cappedMachineCount:(p=h.data)==null?void 0:p.cappedMachineCount,inputs:[],outputs:[]};(m=x.inputs)==null||m.forEach((F,X)=>{const V=F.product_id;if(V==="p_variableproduct")return;const Z=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!E)return;const W=b?Z*q:Z/T*q,te=D.inputs.length;D.inputs.push({productId:V,quantity:Z,rate:W,index:te,recipeIndex:X,connectedRate:0,temperature:null}),n.products[V]||(n.products[V]={producers:[],consumers:[],connections:[]}),n.products[V].consumers.push({nodeId:g,inputIndex:te,rate:W})});const O=x.outputs;O==null||O.forEach((F,X)=>{const V=F.product_id;if(V==="p_variableproduct")return;const Z=typeof F.quantity=="number"?F.quantity:0;if(F.quantity==="Variable"&&!E)return;const W=b?Z*q:Z/T*q,te=D.outputs.length;D.outputs.push({productId:V,quantity:Z,rate:W,index:te,recipeIndex:X,connectedRate:0,temperature:F.temperature||null}),n.products[V]||(n.products[V]={producers:[],consumers:[],connections:[]}),n.products[V].producers.push({nodeId:g,outputIndex:te,rate:W})}),n.nodes[g]=D}const a=t.length;for(let _=0;_<a;_++){const h=t[_],g=n.nodes[h.source],x=n.nodes[h.target];if(!g||!x)continue;const q=parseInt(h.sourceHandle.split("-")[1]),w=parseInt(h.targetHandle.split("-")[1]),b=g.outputs.find(I=>I.recipeIndex===q),k=x.inputs.find(I=>I.recipeIndex===w);if(!b||!k||b.productId!==k.productId)return;const S=b.productId;b.temperature!==void 0&&b.temperature!==null&&(k.temperature=b.temperature);const M={id:h.id,sourceNodeId:h.source,targetNodeId:h.target,sourceOutputIndex:b.index,targetInputIndex:k.index,productId:S,sourceRate:b.rate,targetRate:k.rate,flowRate:0,temperature:b.temperature||null};n.connections.push(M),n.products[S]&&n.products[S].connections.push(M)}return n};class MV{constructor(t=100){this.cache=new Map,this.maxSize=t}get(t){if(!this.cache.has(t))return null;const n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,n)}clear(){this.cache.clear()}}let D0=new MV(100);class EV{constructor(t){this.parent=new Int32Array(t),this.rank=new Int32Array(t);for(let n=0;n<t;n++)this.parent[n]=n}find(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}union(t,n){const i=this.find(t),a=this.find(n);i!==a&&(this.rank[i]<this.rank[a]?this.parent[i]=a:this.rank[i]>this.rank[a]?this.parent[a]=i:(this.parent[a]=i,this.rank[i]++))}}const IV=(e,t)=>{const n=e.products[t];if(!n)return{components:[],portToComponent:new Map};const i=[],a=new Map;n.producers.forEach(m=>{const _=`out:${m.nodeId}:${m.outputIndex}`;a.has(_)||(a.set(_,i.length),i.push({type:"output",nodeId:m.nodeId,index:m.outputIndex,rate:m.rate}))}),n.consumers.forEach(m=>{const _=`in:${m.nodeId}:${m.inputIndex}`;a.has(_)||(a.set(_,i.length),i.push({type:"input",nodeId:m.nodeId,index:m.inputIndex,rate:m.rate}))});const s=new EV(i.length);n.connections.forEach(m=>{const _=`out:${m.sourceNodeId}:${m.sourceOutputIndex}`,h=`in:${m.targetNodeId}:${m.targetInputIndex}`,g=a.get(_),x=a.get(h);g!==void 0&&x!==void 0&&s.union(g,x)});const u=new Map;for(let m=0;m<i.length;m++){const _=s.find(m);u.has(_)||u.set(_,[]),u.get(_).push(m)}const l=[],d=new Map;let p=0;return u.forEach((m,_)=>{const h={id:p,ports:m.map(g=>i[g]),connections:[]};n.connections.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=a.get(x);q!==void 0&&s.find(q)===_&&h.connections.push(g)}),m.forEach(g=>{const x=i[g],q=x.type==="output"?`out:${x.nodeId}:${x.index}`:`in:${x.nodeId}:${x.index}`;d.set(q,p)}),l.push(h),p++}),{components:l,portToComponent:d,ports:i,portToIndex:a}},TV=e=>{const t=e.ports.map(i=>`${i.type}:${i.nodeId}:${i.index}:${i.rate}`).sort().join("|"),n=e.connections.map(i=>`${i.sourceNodeId}:${i.sourceOutputIndex}->${i.targetNodeId}:${i.targetInputIndex}`).sort().join("|");return`${t}##${n}`},NV=(e,t,n)=>{const i=qE(e,t),a=SE(e,t),s={totalProduction:i,totalConsumption:a,connectedFlow:0,connections:{}};if(n.length===0)return s;const{components:u,portToComponent:l}=IV(e,t);return u.forEach(d=>{if(d.connections.length===0)return;const p=TV(d),m=`${t}:comp${d.id}`,_=D0.get(m);let h;if(_&&_.hash===p)h=JSON.parse(JSON.stringify(_.result));else{const g=jV(d.connections,i),x=VV(g);h={connectedFlow:0,connections:{}},d.connections.forEach((w,b)=>{const k=x.connectionFlows[b]||0;h.connections[w.id]={flowRate:k,supplyRatio:w.sourceRate>0?k/w.sourceRate:0,demandRatio:w.targetRate>0?k/w.targetRate:0},h.connectedFlow+=k});const q=Object.freeze({connectedFlow:h.connectedFlow,connections:Object.freeze({...h.connections})});D0.set(m,{hash:p,result:q})}Object.assign(s.connections,h.connections),s.connectedFlow+=h.connectedFlow}),s},PV=e=>Math.abs(e)<1e-12?0:Math.round(e*1e12)/1e12,jV=(e,t)=>{const n=new Map;let i=0;const a=g=>{let x=n.get(g);return x===void 0&&(x=i++,n.set(g,x)),x},s=a("virtual-source"),u=a("virtual-sink"),l=new Map,d=new Map;e.forEach(g=>{const x=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,q=`in:${g.targetNodeId}:${g.targetInputIndex}`;a(x),a(q),l.has(x)||l.set(x,g.sourceRate),d.has(q)||d.set(q,g.targetRate)});const p=Array.from({length:i},()=>[]),m=[],_=t||1e6,h=(g,x,q,w=-1)=>{const b=m.length,k=m.length+1;m.push({to:x,cap:q,flow:0,rev:k,connIndex:w}),m.push({to:g,cap:0,flow:0,rev:b,connIndex:-1}),p[g].push(b),p[x].push(k)};return l.forEach((g,x)=>{h(s,a(x),g)}),d.forEach((g,x)=>{h(a(x),u,g)}),e.forEach((g,x)=>{const q=`out:${g.sourceNodeId}:${g.sourceOutputIndex}`,w=`in:${g.targetNodeId}:${g.targetInputIndex}`,b=a(q),k=a(w);h(b,k,_,x)}),{adj:p,edges:m,nodeCount:i,SOURCE:s,SINK:u}};class RV{constructor(t){this.buffer=new Array(t),this.head=0,this.tail=0,this.size=0,this.capacity=t}push(t){this.buffer[this.tail]=t,this.tail=(this.tail+1)%this.capacity,this.size++}shift(){const t=this.buffer[this.head];return this.head=(this.head+1)%this.capacity,this.size--,t}isEmpty(){return this.size===0}clear(){this.head=0,this.tail=0,this.size=0}}const VV=e=>{const{adj:t,edges:n,nodeCount:i,SOURCE:a,SINK:s}=e,u=new Int32Array(i),l=new Int32Array(i),d=new RV(i),p=()=>{for(u.fill(-1),u[a]=0,d.clear(),d.push(a);!d.isEmpty();){const w=d.shift(),b=t[w],k=b.length;for(let S=0;S<k;S++){const M=n[b[S]],I=M.cap-M.flow;u[M.to]<0&&I>1e-15&&(u[M.to]=u[w]+1,d.push(M.to))}}return u[s]>=0},m=()=>{const w=[a],b=new Int32Array(i).fill(-1),k=new Uint8Array(i);for(k[a]=1;w.length>0;){const S=w[w.length-1];if(S===s){let E=1e15,T=s;for(;T!==a;){const P=b[T],j=n[P],D=j.cap-j.flow;E=Math.min(E,D);let O=!1;for(let F=0;F<i;F++){const X=t[F];for(let V=0;V<X.length;V++)if(X[V]===P){T=F,O=!0;break}if(O)break}}for(T=s;T!==a;){const P=b[T];n[P].flow+=E,n[n[P].rev].flow-=E;let j=!1;for(let D=0;D<i;D++){const O=t[D];for(let F=0;F<O.length;F++)if(O[F]===P){T=D,j=!0;break}if(j)break}}return E}let M=!1;const I=t[S];for(let E=l[S];E<I.length;E++){const T=I[E],P=n[T],j=P.cap-P.flow;if(u[S]+1===u[P.to]&&j>1e-15&&!k[P.to]){k[P.to]=1,b[P.to]=T,w.push(P.to),l[S]=E,M=!0;break}}M||(w.pop(),l[S]=I.length)}return 0};let _=0,h=0;const g=1e5;for(;p()&&h++<g;)for(l.fill(0);;){const w=m();if(w===0)break;_+=w}const x=[],q=n.length;for(let w=0;w<q;w++){const b=n[w];b.connIndex>=0&&(x[b.connIndex]=PV(b.flow))}return{totalFlow:_,connectionFlows:x}},Rp=e=>{const t={byProduct:{},byConnection:{},byNode:{}};return Object.keys(e.nodes).forEach(n=>{const i=e.nodes[n];t.byNode[n]={inputFlows:i.inputs.map(a=>({connected:0,needed:a.rate})),outputFlows:i.outputs.map(a=>({connected:0,produced:a.rate}))}}),Object.keys(e.products).forEach(n=>{const a=e.products[n].connections;if(a.length===0){t.byProduct[n]={totalProduction:qE(e,n),totalConsumption:SE(e,n),connectedFlow:0};return}const s=NV(e,n,a);t.byProduct[n]=s,a.forEach(u=>{const l=s.connections[u.id];if(l){t.byConnection[u.id]=l;const d=t.byNode[u.sourceNodeId];d&&(d.outputFlows[u.sourceOutputIndex].connected+=l.flowRate,d.outputFlows[u.sourceOutputIndex].produced=u.sourceRate);const p=t.byNode[u.targetNodeId];p&&(p.inputFlows[u.targetInputIndex].connected+=l.flowRate,p.inputFlows[u.targetInputIndex].needed=u.targetRate)}})}),t},qE=(e,t)=>{const n=e.products[t];return n?n.producers.reduce((i,a)=>{const u=e.nodes[a.nodeId].outputs[a.outputIndex];return i+u.rate},0):0},SE=(e,t)=>{const n=e.products[t];return n?n.consumers.reduce((i,a)=>{const u=e.nodes[a.nodeId].inputs[a.inputIndex];return i+u.rate},0):0},Sn=()=>{D0.clear()},$n=1e-10,OV=(e,t,n,i)=>{var m,_;const a=new Map,s=new Set,u=(m=e.nodes[n])==null?void 0:m.inputs[i];if(!u)return a;const l=u.productId;if(!e.products[l])return a;const p=[{nodeId:n,inputIndex:i,productId:l}];for(s.add(`${n}:${i}`);p.length>0;){const{nodeId:h,inputIndex:g,productId:x}=p.shift();(((_=e.products[x])==null?void 0:_.connections.filter(w=>w.targetNodeId===h&&w.targetInputIndex===g))||[]).forEach(w=>{var M,I;const b=e.nodes[w.sourceNodeId];if(!b)return;const k=`${w.sourceNodeId}:${w.sourceOutputIndex}`,S=(M=t.byNode[w.sourceNodeId])==null?void 0:M.outputFlows[w.sourceOutputIndex];if(S){a.set(k,{nodeId:w.sourceNodeId,outputIndex:w.sourceOutputIndex,maxFlow:S.produced});const E=b.outputs[w.sourceOutputIndex];if(!E)return;(((I=e.products[E.productId])==null?void 0:I.connections.filter(P=>P.sourceNodeId===w.sourceNodeId&&P.sourceOutputIndex===w.sourceOutputIndex))||[]).forEach(P=>{var O;if(P.targetNodeId===h&&P.targetInputIndex===g)return;const j=`${P.targetNodeId}:${P.targetInputIndex}`;if(s.has(j))return;s.add(j);const D=(O=e.nodes[P.targetNodeId])==null?void 0:O.inputs[P.targetInputIndex];D&&p.push({nodeId:P.targetNodeId,inputIndex:P.targetInputIndex,productId:D.productId})})}})}return a},FV=(e,t)=>{const n=[];return Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];s&&a.inputs.forEach((u,l)=>{const d=s.inputFlows[l];if(!d)return;const p=d.needed-d.connected;if(p<=$n)return;if(u.productId,OV(e,t,i,l).forEach((h,g)=>{var j;const x=e.nodes[h.nodeId];if(!x)return;const q=x.machineCount||0;if(q<=0)return;const w=x.machineCountMode||"free";if(w==="locked")return;let b=x.cycleTime;(typeof b!="number"||b<=0)&&(b=1);const k=x.outputs[h.outputIndex];if(!k)return;const S=k.originalQuantity!==void 0?k.originalQuantity:k.quantity;if(typeof S!="number")return;const M=x.isMineshaftDrill?S:S/b;if(typeof M!="number"||M<=$n)return;const I=(j=t.byNode[h.nodeId])==null?void 0:j.outputFlows[h.outputIndex];if(!I)return;const E=p/M;let T=q+E;if(w==="capped"&&x.cappedMachineCount&&(T=Math.min(T,x.cappedMachineCount),T<=q+$n))return;const P=x.outputs.length>1&&x.outputs.some((D,O)=>{if(O===h.outputIndex)return!1;const F=e.products[D.productId];return!F||!F.connections.some(V=>V.sourceNodeId===h.nodeId&&V.sourceOutputIndex===O)?!1:F.connections.some(V=>V.sourceNodeId!==h.nodeId||V.sourceOutputIndex!==O?!1:F.connections.filter(W=>W.targetNodeId===V.targetNodeId&&W.targetInputIndex===V.targetInputIndex&&W.sourceNodeId!==h.nodeId).length===0)});n.push({nodeId:h.nodeId,handleType:"output",handleIndex:h.outputIndex,productId:k.productId,adjustmentType:"increase",reason:"connected_shortage",currentFlow:I.produced,targetFlow:I.produced+p,deltaFlow:p,currentMachineCount:q,suggestedMachineCount:T,machineDelta:E,hasConstrainedOutputs:P,isMultiOutput:x.outputs.length>1})}),(a.machineCountMode||"free")!=="locked"){const h=a.isMineshaftDrill?u.quantity:u.quantity/(a.cycleTime||1);if(typeof h=="number"&&h>$n){const g=p/h,x=(a.machineCount||0)-g;x>$n&&n.push({nodeId:i,handleType:"input",handleIndex:l,productId:u.productId,adjustmentType:"decrease",reason:"shortage",currentFlow:d.connected,targetFlow:d.connected,deltaFlow:-p,currentMachineCount:a.machineCount||0,suggestedMachineCount:x,machineDelta:-g})}}})}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.byNode[i];if(!s)return;const u=a.machineCount||0;if(u<=0)return;let l=a.cycleTime;(typeof l!="number"||l<=0)&&(l=1),a.outputs.forEach((d,p)=>{var S;const m=s.outputFlows[p];if(!m)return;const _=m.produced-m.connected;if(_<=$n||(a.machineCountMode||"free")==="locked")return;const g=d.originalQuantity!==void 0?d.originalQuantity:d.quantity,x=a.isMineshaftDrill?g:g/l;if(typeof x!="number"||x<=$n)return;const q=_/x,w=u-q;w>$n&&n.push({nodeId:i,handleType:"output",handleIndex:p,productId:d.productId,adjustmentType:"decrease",reason:"excess",currentFlow:m.produced,targetFlow:m.produced-_,deltaFlow:-_,currentMachineCount:u,suggestedMachineCount:w,machineDelta:-q});const b=d.productId;(((S=e.products[b])==null?void 0:S.connections.filter(M=>M.sourceNodeId===i&&M.sourceOutputIndex===p))||[]).forEach(M=>{var X,V,Z,W;const I=e.nodes[M.targetNodeId];if(!I)return;const E=I.machineCount||0;if(E<=0)return;const T=I.machineCountMode||"free";if(T==="locked")return;let P=I.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const j=I.inputs[M.targetInputIndex];if(!j)return;const D=I.isMineshaftDrill?j.quantity:j.quantity/P;if(typeof D!="number"||D<=$n)return;const O=_/D;let F=E+O;T==="capped"&&I.cappedMachineCount&&(F=Math.min(F,I.cappedMachineCount),F<=E+$n)||n.push({nodeId:M.targetNodeId,handleType:"input",handleIndex:M.targetInputIndex,productId:j.productId,adjustmentType:"increase",reason:"excess_available",currentFlow:((V=(X=t.byNode[M.targetNodeId])==null?void 0:X.inputFlows[M.targetInputIndex])==null?void 0:V.connected)||0,targetFlow:(((W=(Z=t.byNode[M.targetNodeId])==null?void 0:Z.inputFlows[M.targetInputIndex])==null?void 0:W.connected)||0)+_,deltaFlow:_,currentMachineCount:E,suggestedMachineCount:F,machineDelta:O})})})}),n.forEach(i=>{const a=Math.round(i.suggestedMachineCount*1e10)/1e10,s=Math.round(i.suggestedMachineCount*1e20)/1e20,u=Math.abs(s-a)>1e-12;i.suggestedMachineCount=u?Math.round(i.suggestedMachineCount*1e20)/1e20:Math.round(i.suggestedMachineCount*1e10)/1e10;const l=Math.round(i.machineDelta*1e10)/1e10,d=Math.round(i.machineDelta*1e20)/1e20,p=Math.abs(d-l)>1e-12;i.machineDelta=p?Math.round(i.machineDelta*1e20)/1e20:Math.round(i.machineDelta*1e10)/1e10}),n},kl=(e,t)=>{const n=[],i=[];Object.keys(e.products).forEach(u=>{const l=e.products[u],d=t.byProduct[u];if(!d)return;const p=d.totalProduction,m=d.connectedFlow,_=p-m;if(Math.abs(_)>1e-6&&_>0){const h=bt(u);h&&n.push({productId:u,product:h,excessRate:_,totalProduction:p,connectedConsumption:m,percentageExcess:p>0?_/p*100:0})}l.consumers.forEach(h=>{var x;const g=(x=t.byNode[h.nodeId])==null?void 0:x.inputFlows[h.inputIndex];if(g){const q=g.needed-g.connected;if(Math.abs(q)>1e-6&&q>0){const w=bt(u);if(w){let b=i.find(k=>k.productId===u);b?(b.deficiencyRate+=q,b.affectedNodes.push({nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q})):i.push({productId:u,product:w,deficiencyRate:q,totalConsumption:d.totalConsumption,connectedProduction:m,percentageDeficient:d.totalConsumption>0?q/d.totalConsumption*100:0,affectedNodes:[{nodeId:h.nodeId,inputIndex:h.inputIndex,shortage:q}]})}}}})}),n.sort((u,l)=>l.excessRate-u.excessRate),i.sort((u,l)=>l.deficiencyRate-u.deficiencyRate);const s=n.length>0||i.length>0?FV(e,t):[];return{excess:n,deficiency:i,suggestions:s}},mw=(e,t,n={})=>{const{skipTemperature:i=!1,previousTemperatureData:a=null}=n,s=Rs(e,t),u=Rp(s);if(i){const k=a||{outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:k}}if(!Object.values(s.nodes).some(k=>{const S=k.recipe.machine_id;return dr[S]||Ur(S)})){const k={outputTemperatures:new Map,inputTemperatures:new Map,geothermalChains:new Map};return{...kl(s,u),graph:s,flows:u,temperatureData:k}}const d=ew(s,u),p=M0(e,d,s);if(!p.some((k,S)=>{var O,F,X,V,Z,W,te,U;const M=e[S],I=(F=(O=M.data)==null?void 0:O.recipe)==null?void 0:F.tempDependentInputTemp,E=(V=(X=k.data)==null?void 0:X.recipe)==null?void 0:V.tempDependentInputTemp,T=(W=(Z=M.data)==null?void 0:Z.recipe)==null?void 0:W.outputs.map(K=>K.temperature).filter(K=>K!==void 0),P=(U=(te=k.data)==null?void 0:te.recipe)==null?void 0:U.outputs.map(K=>K.temperature).filter(K=>K!==void 0),j=Math.abs((I||0)-(E||0))>.1,D=T.length!==P.length||T.some((K,oe)=>Math.abs((K||0)-(P[oe]||0))>.1);return j||D}))return{...kl(s,u),graph:s,flows:u,temperatureData:d};const _=Rs(p,t),h=Rp(_),g=ew(_,h),x=M0(p,g,_),q=Rs(x,t),w=Rp(q);return{...kl(q,w),graph:q,flows:w,temperatureData:g}},AV=e=>e.excess||[],LV=e=>e.deficiency||[],DV=(e,t,n,i,a,s,u)=>{if(!n||!t)return 1;const l=t.data.recipe,d=t.data.machineCount||0,p=vt(l.machine_id);let m=l.cycle_time;if((typeof m!="number"||m<=0)&&(m=1),p&&Ur(p.id)){const w=an[p.id];if((w==null?void 0:w.type)==="steam_input"&&(p.id!=="m_steam_cracking_plant"||hi(l))){const b=l.tempDependentInputTemp??In;m=Wn(p.id,b,m)}}const _=CE(e,n,null,a,s,i);let h=_.cycle_time;(typeof h!="number"||h<=0)&&(h=1);const g=vt(_.machine_id);if(g&&Ur(g.id)){const w=an[g.id];if((w==null?void 0:w.type)==="steam_input"&&(g.id!=="m_steam_cracking_plant"||hi(_))){const b=_.tempDependentInputTemp??In;h=Wn(g.id,b,h)}}let x=0,q=!1;if(u&&u.byNode&&u.byNode[t.id]){const w=u.byNode[t.id];if(n.isOutput){const b=w.outputFlows[n.outputIndex];if(b){q=!0;const k=b.produced-b.connected;x=Math.max(0,k)}}else{const b=w.inputFlows[n.inputIndex];if(b){q=!0;const k=b.needed-b.connected;x=Math.max(0,k)}}}if(q&&x===0)return 0;if(!q)if(n.isOutput){const w=l.outputs[n.outputIndex];if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;typeof b=="number"&&(x=b/m*d)}}else{const w=l.inputs[n.inputIndex];w&&typeof w.quantity=="number"&&(x=w.quantity/m*d)}if(n.isOutput){const w=_.inputs.find(b=>b.product_id===n.productId);if(w&&typeof w.quantity=="number"&&w.quantity>0){const b=w.quantity/h;return x/b}}else{const w=_.outputs.find(b=>b.product_id===n.productId);if(w){const b=w.originalQuantity!==void 0?w.originalQuantity:w.quantity;if(typeof b=="number"&&b>0){const k=b/h;return x/k}}}return 1},CE=(e,t,n,i,a,s)=>{var d,p,m,_,h,g,x,q,w,b,k,S;let u={...e};const l=vt(e.machine_id);if(!kE(u))return u;if((l==null?void 0:l.id)==="m_industrial_firebox"&&hE(e.id)){const M=["p_coal","p_coke_fuel","p_planks","p_oak_log"];let I=((d=i==null?void 0:i.fireboxConfig)==null?void 0:d.fuel)||"p_coke_fuel";const E=(t==null?void 0:t.productId)||(n==null?void 0:n.id);E&&M.includes(E)&&(I=E);const T=ec(e.id,I);return T&&(u={...u,inputs:N0(e.inputs,I,e.id),fireboxSettings:{fuel:I},cycle_time:T.cycleTime,power_consumption:0}),u}if(e.isMineshaftDrill||e.id==="r_mineshaft_drill"){const M=((p=i==null?void 0:i.drillConfig)==null?void 0:p.drillHead)||"steel",I=((m=i==null?void 0:i.drillConfig)==null?void 0:m.consumable)||"hydrochloric_acid",E=((_=i==null?void 0:i.drillConfig)==null?void 0:_.machineOil)!==void 0?i.drillConfig.machineOil:!0,T=["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head"],P={p_copper_drill_head:"copper",p_iron_drill_head:"iron",p_steel_drill_head:"steel",p_tungsten_carbide_drill_head:"tungsten_carbide"};let j=M,D=100;const O=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(O)if(T.includes(O))j=P[O];else if(t!=null&&t.isOutput)D=100;else{const Z=s(O,j,I,E);Z&&(D=Z)}const F=iE(j,I,E,D),X=oE(j,I,E,D),V=Vo(j,I,E,D);return u={...u,inputs:F.length>0?F:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:X.length>0?X:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:{drillHead:j,consumable:I,machineOil:E,depth:D},cycle_time:1,power_consumption:V?{max:V.drillingPower*1e6,average:(V.drillingPower*V.lifeTime+V.idlePower*(V.replacementTime+V.travelTime))/V.totalCycleTime*1e6}:"Variable",pollution:V?V.pollution:"Variable"},u}if(e.isLogicAssembler||e.id==="r_logic_assembler"){const M=((h=i==null?void 0:i.assemblerConfig)==null?void 0:h.outerStage)||1,I=((g=i==null?void 0:i.assemblerConfig)==null?void 0:g.innerStage)||2,E=((x=i==null?void 0:i.assemblerConfig)==null?void 0:x.machineOil)!==void 0?i.assemblerConfig.machineOil:!0,T=((q=i==null?void 0:i.assemblerConfig)==null?void 0:q.tickCircuitDelay)||0;let P=M===1?`p_${I}x_microchip`:`p_${M}x${I}x_microchip`;const j=(t==null?void 0:t.productId)||(n==null?void 0:n.id);j&&j.includes("microchip")&&(P=j);const D=sE(P,E),O=uE(P,E),F=ru(P,E,T),X=P.match(/p_(?:(\d+)x)?(\d+)x_microchip/),V=X&&X[1]?parseInt(X[1]):1,Z=X?parseInt(X[2]):I;return u={...u,inputs:D.length>0?D:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:O.length>0?O:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:{outerStage:V,innerStage:Z,machineOil:E,tickCircuitDelay:T},cycle_time:F?F.cycleTime:"Variable",power_consumption:F?{max:F.maxPowerConsumption,average:F.avgPowerConsumption}:"Variable"},u}if(e.isTreeFarm||e.id==="r_tree_farm"){const M=((w=i==null?void 0:i.treeFarmConfig)==null?void 0:w.trees)||450,I=((b=i==null?void 0:i.treeFarmConfig)==null?void 0:b.harvesters)||20,E=((k=i==null?void 0:i.treeFarmConfig)==null?void 0:k.sprinklers)||24,T=((S=i==null?void 0:i.treeFarmConfig)==null?void 0:S.outputs)||8,P=1,j=fE(E),D=fg(M,I,a),O=Jl(M,I,E,T,P,a);return u={...u,inputs:j.length>0?j:[{product_id:"p_water",quantity:"Variable"}],outputs:D.length>0?D:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:{trees:M,harvesters:I,sprinklers:E,outputs:T,controller:P},cycle_time:1,power_consumption:O?O.avgPowerConsumption:"Variable",pollution:0},u}if(e.isWasteFacility||e.id==="r_underground_waste_facility"){let M="p_any_item",I="p_any_fluid";const E=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(E)if(E==="p_concrete_block"||E==="p_lead_ingot")M="p_fission_byproducts",I="p_depleted_uf6_waste";else{const j=bt(E);(j==null?void 0:j.type)==="item"?(M=E,I="p_any_fluid"):(j==null?void 0:j.type)==="fluid"&&(M="p_any_item",I=E)}else M="p_fission_byproducts",I="p_depleted_uf6_waste";const T=tc(0,0,M,I),P=Vl(0,0);return u={...u,inputs:T,outputs:[],wasteFacilitySettings:{itemProductId:M,fluidProductId:I,itemFlowRate:0,fluidFlowRate:0},cycle_time:P.cycleTime,power_consumption:1e6,pollution:0},u}if(e.isLiquidDump||e.id==="r_liquid_dump"){let M=["p_water","p_residue"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const P=bt(I);(P==null?void 0:P.type)==="fluid"&&(M=[I,I])}const E=R0(M),T=Ns(E);return u={...u,inputs:E,outputs:[],liquidDumpSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:T},u}if(e.isLiquidBurner||e.id==="r_liquid_burner"){let M=["p_water","p_filtered_water","p_distilled_water","p_steam","p_oxygen","p_hydrogen","p_residue","p_depleted_uf6_waste"];const I=(t==null?void 0:t.productId)||(n==null?void 0:n.id);if(I){const P=bt(I);(P==null?void 0:P.type)==="fluid"&&(M=Array(8).fill(I))}const E=O0(M),T=Ps(E);return u={...u,inputs:E,outputs:[],liquidBurnerSettings:{fluidProductIds:M},cycle_time:1,power_consumption:0,pollution:T},u}return u},BV=e=>e==="r_mineshaft_drill"?["p_copper_drill_head","p_iron_drill_head","p_steel_drill_head","p_tungsten_carbide_drill_head","p_water","p_acetic_acid","p_hydrochloric_acid","p_sulfuric_acid","p_machine_oil"]:e==="r_logic_assembler"?["p_logic_plate","p_copper_wire","p_semiconductor","p_gold_wire","p_machine_oil"]:e==="r_tree_farm"?["p_water"]:["r_industrial_firebox_01","r_industrial_firebox_02","r_industrial_firebox_03","r_industrial_firebox_04","r_industrial_firebox_05","r_industrial_firebox_06"].includes(e)?["p_coal","p_coke_fuel","p_planks","p_oak_log"]:e==="r_underground_waste_facility"?["p_any_item","p_any_fluid","p_concrete_blocks","p_lead_ingot"]:e==="r_liquid_dump"||e==="r_liquid_burner"?["p_any_fluid"]:[],zV=e=>{if(e==="r_mineshaft_drill"){const t=new Set;return Object.values(Ws).forEach(n=>{n.forEach(i=>t.add(i.product_id))}),Array.from(t)}return e==="r_logic_assembler"?aE.map(t=>t.productId):e==="r_tree_farm"?["p_oak_log"]:[]},kE=e=>e.isMineshaftDrill||e.id==="r_mineshaft_drill"||e.isLogicAssembler||e.id==="r_logic_assembler"||e.isTreeFarm||e.id==="r_tree_farm"||e.isWasteFacility||e.id==="r_underground_waste_facility"||e.isLiquidDump||e.id==="r_liquid_dump"||e.isLiquidBurner||e.id==="r_liquid_burner"||e.machine_id==="m_industrial_firebox"&&hE(e.id),hw=1e-10,$V=(e,t,n,i,a,s=null)=>{if(t<hw)return new Map([[e,n]]);const u=n/t,l=new Map;l.set(e,n);const d=new Map;d.set(e,u);const p=new Set([e]),m=[e];for(;m.length>0;){const x=m.shift(),q=i.nodes[x];q&&(q.outputs.forEach(w=>{var k;(((k=i.products[w.productId])==null?void 0:k.connections.filter(S=>S.sourceNodeId===x))||[]).forEach(S=>{p.has(S.targetNodeId)||(p.add(S.targetNodeId),m.push(S.targetNodeId))})}),q.inputs.forEach(w=>{var k;(((k=i.products[w.productId])==null?void 0:k.connections.filter(S=>S.targetNodeId===x))||[]).forEach(S=>{p.has(S.sourceNodeId)||(p.add(S.sourceNodeId),m.push(S.sourceNodeId))})}))}const _=10;let h=0,g=!0;for(;g&&h<_;)g=!1,h++,p.forEach(x=>{var T;if(x===e)return;const q=i.nodes[x];if(!q)return;const w=(T=s==null?void 0:s.find(P=>P.id===x))==null?void 0:T.data,b=(w==null?void 0:w.machineCountMode)||q.machineCountMode||"free";if(b==="locked")return;const k=q.machineCount||0;if(k<hw)return;const S=[],M=[];if(q.outputs.forEach((P,j)=>{var O;(((O=i.products[P.productId])==null?void 0:O.connections.filter(F=>F.sourceNodeId===x&&F.sourceOutputIndex===j))||[]).forEach(F=>{const X=d.get(F.targetNodeId);X!==void 0&&(S.push(X),M.push({type:"output",productId:P.productId,targetNodeId:F.targetNodeId,ratio:X}))})}),q.inputs.forEach((P,j)=>{var O;(((O=i.products[P.productId])==null?void 0:O.connections.filter(F=>F.targetNodeId===x&&F.targetInputIndex===j))||[]).forEach(F=>{const X=d.get(F.sourceNodeId);X!==void 0&&(S.push(X),M.push({type:"input",productId:P.productId,sourceNodeId:F.sourceNodeId,ratio:X}))})}),S.length===0)return;const I=Math.max(...S),E=d.get(x)||1;if(Math.abs(I-E)>1e-4){d.set(x,I);let P=k*I;if(b==="capped"){const j=(w==null?void 0:w.cappedMachineCount)||q.cappedMachineCount;typeof j=="number"&&(P=Math.min(P,j))}l.set(x,P),g=!0}});return l};var yw={},Vp,gw;function ME(){if(gw)return Vp;gw=1;function e(t,n,i,a){this.feasible=i,this.evaluation=n,this.bounded=a,this._tableau=t}return Vp=e,e.prototype.generateSolutionSet=function(){for(var t={},n=this._tableau,i=n.varIndexByRow,a=n.variablesPerIndex,s=n.matrix,u=n.rhsColumn,l=n.height-1,d=Math.round(1/n.precision),p=1;p<=l;p+=1){var m=i[p],_=a[m];if(!(_===void 0||_.isSlack===!0)){var h=s[p][u];t[_.id]=Math.round((Number.EPSILON+h)*d)/d}}return t},Vp}var Op,vw;function HV(){if(vw)return Op;vw=1;var e=ME();function t(n,i,a,s,u){e.call(this,n,i,a,s),this.iter=u}return Op=t,t.prototype=Object.create(e.prototype),t.constructor=t,Op}var Fp,xw;function Yn(){if(xw)return Fp;xw=1;var e=ME(),t=HV();function n(a){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=a||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}Fp=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function i(a,s){this.priority=a,this.reducedCosts=new Array(s);for(var u=0;u<s;u+=1)this.reducedCosts[u]=0}return i.prototype.copy=function(){var a=new i(this.priority,this.reducedCosts.length);return a.reducedCosts=this.reducedCosts.slice(),a},n.prototype.setOptionalObjective=function(a,s,u){var l=this.objectivesByPriority[a];if(l===void 0){var d=Math.max(this.width,s+1);l=new i(a,d),this.objectivesByPriority[a]=l,this.optionalObjectives.push(l),this.optionalObjectives.sort(function(p,m){return p.priority-m.priority})}l.reducedCosts[s]=u},n.prototype.initialize=function(a,s,u,l){this.variables=u,this.unrestrictedVars=l,this.width=a,this.height=s;for(var d=new Array(a),p=0;p<a;p++)d[p]=0;this.matrix=new Array(s);for(var m=0;m<s;m++)this.matrix[m]=d.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=a+s-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var a=this.model.variables,s=this.model.constraints,u=a.length,l=s.length,d,p,m=this.matrix[0],_=this.model.isMinimization===!0?-1:1;for(d=0;d<u;d+=1){var h=a[d],g=h.priority,x=_*h.cost;g===0?m[d+1]=x:this.setOptionalObjective(g,d+1,x),p=a[d].index,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=d+1,this.varIndexByCol[d+1]=p}for(var q=1,w=0;w<l;w+=1){var b=s[w],k=b.index;this.rowByVarIndex[k]=q,this.colByVarIndex[k]=-1,this.varIndexByRow[q]=k;var S,M,I,E=b.terms,T=E.length,P=this.matrix[q++];if(b.isUpperBound){for(S=0;S<T;S+=1)M=E[S],I=this.colByVarIndex[M.variable.index],P[I]=M.coefficient;P[0]=b.rhs}else{for(S=0;S<T;S+=1)M=E[S],I=this.colByVarIndex[M.variable.index],P[I]=-M.coefficient;P[0]=-b.rhs}}},n.prototype.setModel=function(a){this.model=a;var s=a.nVariables+1,u=a.nConstraints+1;return this.initialize(s,u,a.variables,a.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var a=this.lastElementIndex;return this.lastElementIndex+=1,a},n.prototype.density=function(){for(var a=0,s=this.matrix,u=0;u<this.height;u++)for(var l=s[u],d=0;d<this.width;d++)l[d]!==0&&(a+=1);return a/(this.height*this.width)},n.prototype.setEvaluation=function(){var a=Math.round(1/this.precision),s=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+s)*a)/a;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},n.prototype.getSolution=function(){var a=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new t(this,a,this.feasible,this.bounded,this.branchAndCutIterations):new e(this,a,this.feasible,this.bounded)},Fp}var ww;function WV(){if(ww)return yw;ww=1;var e=Yn();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d,p=0;;){for(var m=0,_=-this.precision,h=1;h<=l;h++){d=this.unrestrictedVars[this.varIndexByRow[h]]===!0;var g=a[h][s];g<_&&(_=g,m=h)}if(m===0)return this.feasible=!0,p;for(var x=0,q=-1/0,w=a[0],b=a[m],k=1;k<=u;k++){var S=b[k];if(d=this.unrestrictedVars[this.varIndexByCol[k]]===!0,d||S<-this.precision){var M=-w[k]/S;q<M&&(q=M,x=k)}}if(x===0)return this.feasible=!1,p;if(n){i.push([this.varIndexByRow[m],this.varIndexByCol[x]]);var I=this.checkForCycles(i);if(I.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+I[0]),this.model.messages.push("Length :"+I[1]),this.feasible=!1,p}this.pivot(m,x),p+=1}},e.prototype.phase2=function(){for(var n=this.model.checkForCycles,i=[],a=this.matrix,s=this.rhsColumn,u=this.width-1,l=this.height-1,d=this.precision,p=this.optionalObjectives.length,m=null,_=0,h,g;;){var x=a[this.costRowIndex];p>0&&(m=[]);for(var q=0,w=d,b=!1,k=1;k<=u;k++){if(h=x[k],g=this.unrestrictedVars[this.varIndexByCol[k]]===!0,p>0&&-d<h&&h<d){m.push(k);continue}if(g&&h<0){-h>w&&(w=-h,q=k,b=!0);continue}h>w&&(w=h,q=k,b=!1)}if(p>0)for(var S=0;q===0&&m.length>0&&S<p;){var M=[],I=this.optionalObjectives[S].reducedCosts;w=d;for(var E=0;E<m.length;E++){if(k=m[E],h=I[k],g=this.unrestrictedVars[this.varIndexByCol[k]]===!0,-d<h&&h<d){M.push(k);continue}if(g&&h<0){-h>w&&(w=-h,q=k,b=!0);continue}h>w&&(w=h,q=k,b=!1)}m=M,S+=1}if(q===0)return this.setEvaluation(),this.simplexIters+=1,_;var T=0,P=1/0;this.varIndexByRow;for(var j=1;j<=l;j++){var D=a[j],O=D[s],F=D[q];if(!(-d<F&&F<d)){if(F>0&&d>O&&O>-d){P=0,T=j;break}var X=b?-O/F:O/F;X>d&&P>X&&(P=X,T=j)}}if(P===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[q],_;if(n){i.push([this.varIndexByRow[T],this.varIndexByCol[q]]);var V=this.checkForCycles(i);if(V.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+V[0]),this.model.messages.push("Length :"+V[1]),this.feasible=!1,_}this.pivot(T,q,!0),_+=1}};var t=[];return e.prototype.pivot=function(n,i){var a=this.matrix,s=a[n][i],u=this.height-1,l=this.width-1,d=this.varIndexByRow[n],p=this.varIndexByCol[i];this.varIndexByRow[n]=p,this.varIndexByCol[i]=d,this.rowByVarIndex[p]=n,this.rowByVarIndex[d]=-1,this.colByVarIndex[p]=-1,this.colByVarIndex[d]=i;for(var m=a[n],_=0,h=0;h<=l;h++)m[h]>=-1e-16&&m[h]<=1e-16?m[h]=0:(m[h]/=s,t[_]=h,_+=1);m[i]=1/s;var g,x,q;this.precision;for(var w=0;w<=u;w++)if(w!==n&&!(a[w][i]>=-1e-16&&a[w][i]<=1e-16)){var b=a[w];if(g=b[i],g>=-1e-16&&g<=1e-16)g!==0&&(b[i]=0);else{for(x=0;x<_;x++)h=t[x],q=m[h],q>=-1e-16&&q<=1e-16?q!==0&&(m[h]=0):b[h]=b[h]-g*q;b[i]=-g/s}}var k=this.optionalObjectives.length;if(k>0)for(var S=0;S<k;S+=1){var M=this.optionalObjectives[S].reducedCosts;if(g=M[i],g!==0){for(x=0;x<_;x++)h=t[x],q=m[h],q!==0&&(M[h]=M[h]-g*q);M[i]=-g/s}}},e.prototype.checkForCycles=function(n){for(var i=0;i<n.length-1;i++)for(var a=i+1;a<n.length;a++){var s=n[i],u=n[a];if(s[0]===u[0]&&s[1]===u[1]){if(a-i>n.length-a)break;for(var l=!0,d=1;d<a-i;d++){var p=n[i+d],m=n[a+d];if(p[0]!==m[0]||p[1]!==m[1]){l=!1;break}}if(l)return[i,a-i]}}return[]},yw}var bw={},Ap,qw;function yg(){if(qw)return Ap;qw=1;function e(l,d,p,m){this.id=l,this.cost=d,this.index=p,this.value=0,this.priority=m}function t(l,d,p,m){e.call(this,l,d,p,m)}t.prototype.isInteger=!0;function n(l,d){e.call(this,l,0,d,0)}n.prototype.isSlack=!0;function i(l,d){this.variable=l,this.coefficient=d}function a(l,d,p){return p===0||p==="required"?null:(d=d||1,p=p||1,l.isMinimization===!1&&(d=-d),l.addVariable(d,"r"+l.relaxationIndex++,!1,!1,p))}function s(l,d,p,m){this.slack=new n("s"+p,p),this.index=p,this.model=m,this.rhs=l,this.isUpperBound=d,this.terms=[],this.termsByVarIndex={},this.relaxation=null}s.prototype.addTerm=function(l,d){var p=d.index,m=this.termsByVarIndex[p];if(m===void 0)m=new i(d,l),this.termsByVarIndex[p]=m,this.terms.push(m),this.isUpperBound===!0&&(l=-l),this.model.updateConstraintCoefficient(this,d,l);else{var _=m.coefficient+l;this.setVariableCoefficient(_,d)}return this},s.prototype.removeTerm=function(l){return this},s.prototype.setRightHandSide=function(l){if(l!==this.rhs){var d=l-this.rhs;this.isUpperBound===!0&&(d=-d),this.rhs=l,this.model.updateRightHandSide(this,d)}return this},s.prototype.setVariableCoefficient=function(l,d){var p=d.index;if(p===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var m=this.termsByVarIndex[p];if(m===void 0)this.addTerm(l,d);else if(l!==m.coefficient){var _=l-m.coefficient;this.isUpperBound===!0&&(_=-_),m.coefficient=l,this.model.updateConstraintCoefficient(this,d,_)}return this},s.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this._relax(this.relaxation)},s.prototype._relax=function(l){l!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,l):this.setVariableCoefficient(1,l))};function u(l,d){this.upperBound=l,this.lowerBound=d,this.model=l.model,this.rhs=l.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(l,d){return this.upperBound.addTerm(l,d),this.lowerBound.addTerm(l,d),this},u.prototype.removeTerm=function(l){return this.upperBound.removeTerm(l),this.lowerBound.removeTerm(l),this},u.prototype.setRightHandSide=function(l){this.upperBound.setRightHandSide(l),this.lowerBound.setRightHandSide(l),this.rhs=l},u.prototype.relax=function(l,d){this.relaxation=a(this.model,l,d),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},Ap={Constraint:s,Variable:e,IntegerVariable:t,SlackVariable:n,Equality:u,Term:i},Ap}var Sw;function UV(){if(Sw)return bw;Sw=1;var e=Yn(),t=yg().SlackVariable;return e.prototype.addCutConstraints=function(n){for(var i=n.length,a=this.height,s=a+i,u=a;u<s;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=s,this.nVars=this.width+this.height-2;for(var l,d=this.width-1,p=0;p<i;p+=1){var m=n[p],_=a+p,h=m.type==="min"?-1:1,g=m.varIndex,x=this.rowByVarIndex[g],q=this.matrix[_];if(x===-1){for(q[this.rhsColumn]=h*m.value,l=1;l<=d;l+=1)q[l]=0;q[this.colByVarIndex[g]]=h}else{var w=this.matrix[x],b=w[this.rhsColumn];for(q[this.rhsColumn]=h*(m.value-b),l=1;l<=d;l+=1)q[l]=-h*w[l]}var k=this.getNewElementIndex();this.varIndexByRow[_]=k,this.rowByVarIndex[k]=_,this.colByVarIndex[k]=-1,this.variablesPerIndex[k]=new t("s"+k,k),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=Math.floor(s);for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]];if(!m.isInteger)i[l][p]=Math.min(0,i[n][p]/(1-u));else{var _=i[n][p],h=Math.floor(_)+Math.max(0,_-Math.floor(_)-u)/(1-u);i[l][p]=h}}for(var g=0;g<this.width;g+=1)i[l][g]-=i[n][g];return!0},e.prototype._addUpperBoundMIRCut=function(n){if(n===this.costRowIndex)return!1;this.model;var i=this.matrix,a=this.variablesPerIndex[this.varIndexByRow[n]];if(!a.isInteger)return!1;var s=i[n][this.rhsColumn],u=s-Math.floor(s);if(u<this.precision||1-this.precision<u)return!1;var l=this.height;i[l]=i[l-1].slice(),this.height+=1,this.nVars+=1;var d=this.getNewElementIndex();this.varIndexByRow[l]=d,this.rowByVarIndex[d]=l,this.colByVarIndex[d]=-1,this.variablesPerIndex[d]=new t("s"+d,d),i[l][this.rhsColumn]=-u;for(var p=1;p<this.varIndexByCol.length;p+=1){var m=this.variablesPerIndex[this.varIndexByCol[p]],_=i[n][p],h=_-Math.floor(_);m.isInteger?h<=u?i[l][p]=-h:i[l][p]=-(1-h)*u/h:_>=0?i[l][p]=-_:i[l][p]=_*u/(1-u)}return!0},e.prototype.applyMIRCuts=function(){},bw}var Cw={},kw;function GV(){if(kw)return Cw;kw=1;var e=Yn();return e.prototype._putInBase=function(t){var n=this.rowByVarIndex[t];if(n===-1){for(var i=this.colByVarIndex[t],a=1;a<this.height;a+=1){var s=this.matrix[a][i];if(s<-this.precision||this.precision<s){n=a;break}}this.pivot(n,i)}return n},e.prototype._takeOutOfBase=function(t){var n=this.colByVarIndex[t];if(n===-1){for(var i=this.rowByVarIndex[t],a=this.matrix[i],s=1;s<this.height;s+=1){var u=a[s];if(u<-this.precision||this.precision<u){n=s;break}}this.pivot(i,n)}return n},e.prototype.updateVariableValues=function(){for(var t=this.variables.length,n=Math.round(1/this.precision),i=0;i<t;i+=1){var a=this.variables[i],s=a.index,u=this.rowByVarIndex[s];if(u===-1)a.value=0;else{var l=this.matrix[u][this.rhsColumn];a.value=Math.round((l+Number.EPSILON)*n)/n}}},e.prototype.updateRightHandSide=function(t,n){var i=this.height-1,a=this.rowByVarIndex[t.index];if(a===-1){for(var s=this.colByVarIndex[t.index],u=0;u<=i;u+=1){var l=this.matrix[u];l[this.rhsColumn]-=n*l[s]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[this.rhsColumn]-=n*m[s]}}else this.matrix[a][this.rhsColumn]-=n},e.prototype.updateConstraintCoefficient=function(t,n,i){if(t.index===n.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var a=this._putInBase(t.index),s=this.colByVarIndex[n.index];if(s===-1)for(var u=this.rowByVarIndex[n.index],l=0;l<this.width;l+=1)this.matrix[a][l]+=i*this.matrix[u][l];else this.matrix[a][s]-=i},e.prototype.updateCost=function(t,n){var i=t.index,a=this.width-1,s=this.colByVarIndex[i];if(s===-1){var u=this.matrix[this.rowByVarIndex[i]],l;if(t.priority===0){var d=this.matrix[0];for(l=0;l<=a;l+=1)d[l]+=n*u[l]}else{var p=this.objectivesByPriority[t.priority].reducedCosts;for(l=0;l<=a;l+=1)p[l]+=n*u[l]}}else this.matrix[0][s]-=n},e.prototype.addConstraint=function(t){var n=t.isUpperBound?1:-1,i=this.height,a=this.matrix[i];a===void 0&&(a=this.matrix[0].slice(),this.matrix[i]=a);for(var s=this.width-1,u=0;u<=s;u+=1)a[u]=0;a[this.rhsColumn]=n*t.rhs;for(var l=t.terms,d=l.length,p=0;p<d;p+=1){var m=l[p],_=m.coefficient,h=m.variable.index,g=this.rowByVarIndex[h];if(g===-1)a[this.colByVarIndex[h]]+=n*_;else{var x=this.matrix[g];for(x[this.rhsColumn],u=0;u<=s;u+=1)a[u]-=n*_*x[u]}}var q=t.index;this.varIndexByRow[i]=q,this.rowByVarIndex[q]=i,this.colByVarIndex[q]=-1,this.height+=1},e.prototype.removeConstraint=function(t){var n=t.index,i=this.height-1,a=this._putInBase(n),s=this.matrix[i];this.matrix[i]=this.matrix[a],this.matrix[a]=s,this.varIndexByRow[a]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.slack.index=-1,this.height-=1},e.prototype.addVariable=function(t){var n=this.height-1,i=this.width,a=this.model.isMinimization===!0?-t.cost:t.cost,s=t.priority,u=this.optionalObjectives.length;if(u>0)for(var l=0;l<u;l+=1)this.optionalObjectives[l].reducedCosts[i]=0;s===0?this.matrix[0][i]=a:(this.setOptionalObjective(s,i,a),this.matrix[0][i]=0);for(var d=1;d<=n;d+=1)this.matrix[d][i]=0;var p=t.index;this.varIndexByCol[i]=p,this.rowByVarIndex[p]=-1,this.colByVarIndex[p]=i,this.width+=1},e.prototype.removeVariable=function(t){var n=t.index,i=this._takeOutOfBase(n),a=this.width-1;if(i!==a){for(var s=this.height-1,u=0;u<=s;u+=1){var l=this.matrix[u];l[i]=l[a]}var d=this.optionalObjectives.length;if(d>0)for(var p=0;p<d;p+=1){var m=this.optionalObjectives[p].reducedCosts;m[i]=m[a]}var _=this.varIndexByCol[a];this.varIndexByCol[i]=_,this.colByVarIndex[_]=i}this.varIndexByCol[a]=-1,this.colByVarIndex[n]=-1,this.availableIndexes[this.availableIndexes.length]=n,t.index=-1,this.width-=1},Cw}var Mw={},Ew;function KV(){if(Ew)return Mw;Ew=1;var e=Yn();return e.prototype.log=function(t,n){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i=5,a="",s=[" "],u,l,d,p,m,_,h,g,x,q,w;for(l=1;l<this.width;l+=1)m=this.varIndexByCol[l],p=this.variablesPerIndex[m],p===void 0?_="c"+m:_=p.id,h=_.length,g=" ",x="	",h>5?g+=" ":x+="	",s[l]=g,a+=x+_;console.log(a);var b,k=this.matrix[this.costRowIndex],S="	";for(u=1;u<this.width;u+=1)b="	",S+=b,S+=s[u],S+=k[u].toFixed(i);for(b="	",S+=b+s[0]+k[0].toFixed(i),console.log(S+"	Z"),d=1;d<this.height;d+=1){for(q=this.matrix[d],w="	",l=1;l<this.width;l+=1)b="	",w+=b+s[l]+q[l].toFixed(i);b="	",w+=b+s[0]+q[0].toFixed(i),m=this.varIndexByRow[d],p=this.variablesPerIndex[m],p===void 0?_="c"+m:_=p.id,console.log(w+"	"+_)}console.log("");var M=this.optionalObjectives.length;if(M>0){console.log("    Optional objectives:");for(var I=0;I<M;I+=1){var E=this.optionalObjectives[I].reducedCosts,T="";for(u=1;u<this.width;u+=1)b=E[u]<0?"":" ",T+=b,T+=s[u],T+=E[u].toFixed(i);b=E[0]<0?"":" ",T+=b+s[0]+E[0].toFixed(i),console.log(T+" z"+I)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},Mw}var Iw={},Tw;function YV(){if(Tw)return Iw;Tw=1;var e=Yn();return e.prototype.copy=function(){var t=new e(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var n=[],i=0;i<this.optionalObjectives.length;i++)n[i]=this.optionalObjectives[i].copy();t.optionalObjectives=n;for(var a=this.matrix,s=new Array(this.height),u=0;u<this.height;u++)s[u]=a[u].slice();return t.matrix=s,t},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var t=this.savedState,n=t.matrix;this.nVars=t.nVars,this.model=t.model,this.variables=t.variables,this.variablesPerIndex=t.variablesPerIndex,this.unrestrictedVars=t.unrestrictedVars,this.lastElementIndex=t.lastElementIndex,this.width=t.width,this.height=t.height;var i,a;for(i=0;i<this.height;i+=1){var s=n[i],u=this.matrix[i];for(a=0;a<this.width;a+=1)u[a]=s[a]}var l=t.varIndexByRow;for(a=0;a<this.height;a+=1)this.varIndexByRow[a]=l[a];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var d=t.varIndexByCol;for(i=0;i<this.width;i+=1)this.varIndexByCol[i]=d[i];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var p=t.rowByVarIndex,m=t.colByVarIndex,_=0;_<this.nVars;_+=1)this.rowByVarIndex[_]=p[_],this.colByVarIndex[_]=m[_];if(t.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var h=0;h<t.optionalObjectives.length;h++){var g=t.optionalObjectives[h].copy();this.optionalObjectives[h]=g,this.optionalObjectivePerPriority[g.priority]=g}}}},Iw}var Nw={},Pw;function QV(){if(Pw)return Nw;Pw=1;var e=Yn();function t(n,i){this.index=n,this.value=i}return e.prototype.getMostFractionalVar=function(){for(var n=0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l].index,p=this.rowByVarIndex[d];if(p!==-1){var m=this.matrix[p][this.rhsColumn],_=Math.abs(m-Math.round(m));n<_&&(n=_,i=d,a=m)}}return new t(i,a)},e.prototype.getFractionalVarWithLowestCost=function(){for(var n=1/0,i=null,a=null,s=this.model.integerVariables,u=s.length,l=0;l<u;l++){var d=s[l],p=d.index,m=this.rowByVarIndex[p];if(m!==-1){var _=this.matrix[m][this.rhsColumn];if(Math.abs(_-Math.round(_))>this.precision){var h=d.cost;n>h&&(n=h,i=p,a=_)}}}return new t(i,a)},Nw}var jw={},Rw;function XV(){if(Rw)return jw;Rw=1;var e=Yn();return e.prototype.countIntegerValues=function(){for(var t=0,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=i-Math.floor(i),i<this.precision&&-i<this.precision&&(t+=1)}return t},e.prototype.isIntegral=function(){for(var t=this.model.integerVariables,n=t.length,i=0;i<n;i++){var a=this.rowByVarIndex[t[i].index];if(a!==-1){var s=this.matrix[a][this.rhsColumn];if(Math.abs(s-Math.round(s))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(t){for(var n=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var a=this.matrix[i][this.rhsColumn];a=Math.abs(a);var s=Math.min(a-Math.floor(a),Math.floor(a+1));if(s<this.precision){if(!t)return 0}else n===-1?n=a:n*=a}return n===-1?0:n},jw}var Lp,Vw;function ZV(){return Vw||(Vw=1,WV(),UV(),GV(),KV(),YV(),QV(),XV(),Lp=Yn()),Lp}var Ow={},Fw;function EE(){if(Fw)return Ow;Fw=1;var e=Yn();function t(a,s,u){this.type=a,this.varIndex=s,this.value=u}function n(a,s){this.relaxedEvaluation=a,this.cuts=s}function i(a,s){return s.relaxedEvaluation-a.relaxedEvaluation}return e.prototype.applyCuts=function(a){if(this.restore(),this.addCutConstraints(a),this.simplex(),this.model.useMIRCuts)for(var s=!0;s;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var l=this.computeFractionalVolume(!0);l>=.9*u&&(s=!1)}},e.prototype.branchAndCut=function(){var a=[],s=0,u=this.model.tolerance,l=!0,d=1e99;this.model.timeout&&(d=Date.now()+this.model.timeout);for(var p=1/0,m=null,_=[],h=0;h<this.optionalObjectives.length;h+=1)_.push(1/0);var g=new n(-1/0,[]),x;for(a.push(g);a.length>0&&l===!0&&Date.now()<d;)if(this.model.isMinimization?x=this.bestPossibleEval*(1+u):x=this.bestPossibleEval*(1-u),u>0&&p<x&&(l=!1),g=a.pop(),!(g.relaxedEvaluation>p)){var q=g.cuts;if(this.applyCuts(q),s++,this.feasible!==!1){var w=this.evaluation;if(!(w>p)){if(w===p){for(var b=!0,k=0;k<this.optionalObjectives.length&&!(this.optionalObjectives[k].reducedCosts[0]>_[k]);k+=1)if(this.optionalObjectives[k].reducedCosts[0]<_[k]){b=!1;break}if(b)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,s===1){this.branchAndCutIterations=s;return}m=g,p=w;for(var S=0;S<this.optionalObjectives.length;S+=1)_[S]=this.optionalObjectives[S].reducedCosts[0]}else{s===1&&this.save();for(var M=this.getMostFractionalVar(),I=M.index,E=[],T=[],P=q.length,j=0;j<P;j+=1){var D=q[j];D.varIndex===I?D.type==="min"?T.push(D):E.push(D):(E.push(D),T.push(D))}var O=Math.ceil(M.value),F=Math.floor(M.value),X=new t("min",I,O);E.push(X);var V=new t("max",I,F);T.push(V),a.push(new n(w,E)),a.push(new n(w,T)),a.sort(i)}}}}m!==null&&this.applyCuts(m.cuts),this.branchAndCutIterations=s},Ow}var Dp,Aw;function JV(){if(Aw)return Dp;Aw=1;var e=Yn();EE();var t=yg(),n=t.Constraint,i=t.Equality,a=t.Variable,s=t.IntegerVariable;t.Term;function u(l,d){this.tableau=new e(l),this.name=d,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return Dp=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var l=this.lastElementIndex;return this.lastElementIndex+=1,l},u.prototype._addConstraint=function(l){var d=l.slack;this.tableau.variablesPerIndex[d.index]=d,this.constraints.push(l),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(l)},u.prototype.smallerThan=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.greaterThan=function(l){var d=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(d),d},u.prototype.equal=function(l){var d=new n(l,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(d);var p=new n(l,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(p),new i(d,p)},u.prototype.addVariable=function(l,d,p,m,_){if(typeof _=="string")switch(_){case"required":_=0;break;case"strong":_=1;break;case"medium":_=2;break;case"weak":_=3;break;default:_=0;break}var h=this.tableau.getNewElementIndex();d==null&&(d="v"+h),l==null&&(l=0),_==null&&(_=0);var g;return p?(g=new s(d,l,h,_),this.integerVariables.push(g)):g=new a(d,l,h,_),this.variables.push(g),this.tableau.variablesPerIndex[h]=g,m&&(this.unrestrictedVariables[h]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(g),g},u.prototype._removeConstraint=function(l){var d=this.constraints.indexOf(l);if(d===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(d,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(l),l.relaxation&&this.removeVariable(l.relaxation)},u.prototype.removeConstraint=function(l){return l.isEquality?(this._removeConstraint(l.upperBound),this._removeConstraint(l.lowerBound)):this._removeConstraint(l),this},u.prototype.removeVariable=function(l){var d=this.variables.indexOf(l);if(d===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(d,1),this.tableauInitialized===!0&&this.tableau.removeVariable(l),this},u.prototype.updateRightHandSide=function(l,d){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(l,d),this},u.prototype.updateConstraintCoefficient=function(l,d,p){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(l,d,p),this},u.prototype.setCost=function(l,d){var p=l-d.cost;return this.isMinimization===!1&&(p=-p),d.cost=l,this.tableau.updateCost(d,p),this},u.prototype.loadJson=function(l){this.isMinimization=l.opType!=="max";for(var d=l.variables,p=l.constraints,m={},_={},h=Object.keys(p),g=h.length,x=0;x<g;x+=1){var q=h[x],w=p[q],b=w.equal,k=w.weight,S=w.priority,M=k!==void 0||S!==void 0,I,E;if(b===void 0){var T=w.min;T!==void 0&&(I=this.greaterThan(T),m[q]=I,M&&I.relax(k,S));var P=w.max;P!==void 0&&(E=this.smallerThan(P),_[q]=E,M&&E.relax(k,S))}else{I=this.greaterThan(b),m[q]=I,E=this.smallerThan(b),_[q]=E;var j=new i(I,E);M&&j.relax(k,S)}}var D=Object.keys(d),O=D.length;this.tolerance=l.tolerance||0,l.timeout&&(this.timeout=l.timeout),l.options&&(l.options.timeout&&(this.timeout=l.options.timeout),this.tolerance===0&&(this.tolerance=l.options.tolerance||0),l.options.useMIRCuts&&(this.useMIRCuts=l.options.useMIRCuts),typeof l.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=l.options.exitOnCycles);for(var F=l.ints||{},X=l.binaries||{},V=l.unrestricted||{},Z=l.optimize,W=0;W<O;W+=1){var te=D[W],U=d[te],K=U[Z]||0,oe=!!X[te],z=!!F[te]||oe,Q=!!V[te],_e=this.addVariable(K,te,z,Q);oe&&this.smallerThan(1).addTerm(1,_e);var H=Object.keys(U);for(x=0;x<H.length;x+=1){var J=H[x];if(J!==Z){var ne=U[J],ue=m[J];ue!==void 0&&ue.addTerm(ne,_e);var ae=_[J];ae!==void 0&&ae.addTerm(ne,_e)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(l){this.useMIRCuts=l},u.prototype.debug=function(l){this.checkForCycles=l},u.prototype.log=function(l){return this.tableau.log(l)},Dp}var Bp={},Lw;function eO(){return Lw||(Lw=1,Bp.CleanObjectiveAttributes=function(e){var t,n,i;if(typeof e.optimize=="string")if(e.constraints[e.optimize]){t=Math.random();for(n in e.variables)e.variables[n][e.optimize]&&(e.variables[n][t]=e.variables[n][e.optimize]);return e.constraints[t]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}else return e;else{for(i in e.optimize)if(e.constraints[i])if(e.constraints[i]==="equal")delete e.optimize[i];else{t=Math.random();for(n in e.variables)e.variables[n][i]&&(e.variables[n][t]=e.variables[n][i]);e.constraints[t]=e.constraints[i],delete e.constraints[i]}return e}}),Bp}var Ml={},zp,Dw;function B0(){if(Dw)return zp;Dw=1;function e(n){var i={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},a={opType:"",optimize:"_obj",constraints:{},variables:{}},s={">=":"min","<=":"max","=":"equal"},u="",l=null,d="",p="",m="",_=0;typeof n=="string"&&(n=n.split(`
`));for(var h=0;h<n.length;h++)if(m="__"+h,u=n[h],l=null,i.is_objective.test(u))a.opType=u.match(/(max|min)/gi)[0],l=u.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}).slice(1),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0].replace(/\;$/,""),a.variables[p]=a.variables[p]||{},a.variables[p]._obj=d});else if(i.is_int.test(u))l=u.match(i.parse_int).slice(1),a.ints=a.ints||{},l.forEach(function(q){q=q.replace(";",""),a.ints[q]=1});else if(i.is_bin.test(u))l=u.match(i.parse_bin).slice(1),a.binaries=a.binaries||{},l.forEach(function(q){q=q.replace(";",""),a.binaries[q]=1});else if(i.is_constraint.test(u)){var g=u.indexOf(":"),x=g===-1?u:u.slice(g+1);l=x.match(i.parse_lhs).map(function(q){return q.replace(/\s+/,"")}),l.forEach(function(q){d=q.match(i.get_num),d===null?q.substr(0,1)==="-"?d=-1:d=1:d=d[0],d=parseFloat(d),p=q.match(i.get_word)[0],a.variables[p]=a.variables[p]||{},a.variables[p][m]=d}),_=parseFloat(u.match(i.parse_rhs)[0]),u=s[u.match(i.parse_dir)[0]],a.constraints[m]=a.constraints[m]||{},a.constraints[m][u]=_}else i.is_unrestricted.test(u)&&(l=u.match(i.parse_int).slice(1),a.unrestricted=a.unrestricted||{},l.forEach(function(q){q=q.replace(";",""),a.unrestricted[q]=1}));return a}function t(n){if(!n)throw new Error("Solver requires a model to operate on");var i="",a={max:"<=",min:">=",equal:"="},s=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(n.opType){i+=n.opType+":";for(var u in n.variables)n.variables[u][u]=n.variables[u][u]?n.variables[u][u]:1,n.variables[u][n.optimize]&&(i+=" "+n.variables[u][n.optimize]+" "+u.replace(s,"_"))}else i+="max:";i+=`;

`;for(var l in n.constraints)for(var d in n.constraints[l])if(typeof a[d]<"u"){for(var p in n.variables)typeof n.variables[p][l]<"u"&&(i+=" "+n.variables[p][l]+" "+p.replace(s,"_"));i+=" "+a[d]+" "+n.constraints[l][d],i+=`;
`}if(n.ints){i+=`

`;for(var m in n.ints)i+="int "+m.replace(s,"_")+`;
`}if(n.unrestricted){i+=`

`;for(var _ in n.unrestricted)i+="unrestricted "+_.replace(s,"_")+`;
`}return i}return zp=function(n){return n.length?e(n):t(n)},zp}const tO={},rO=Object.freeze(Object.defineProperty({__proto__:null,default:tO},Symbol.toStringTag,{value:"Module"})),Bw=RT(rO);var zw;function nO(){if(zw)return Ml;zw=1,Ml.reformat=B0();function e(t){return t=t.replace("\\r\\n",`\r
`),t=t.split(`\r
`),t=t.filter(function(n){var i;return i=new RegExp(" 0$","gi"),!(i.test(n)===!0||(i=new RegExp("\\d$","gi"),i.test(n)===!1))}).map(function(n){return n.split(/\:{0,1} +(?=\d)/)}).reduce(function(n,i,a){return n[i[0]]=i[1],n},{}),t}return Ml.solve=function(t){return new Promise(function(n,i){typeof window<"u"&&i("Function Not Available in Browser");var a=B0()(t);t.external||i("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||i("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||i("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||i("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var s=Bw;s.writeFile(t.external.tempName,a,function(u,l){if(u)i(u);else{var d=Bw.execFile;t.external.args.push(t.external.tempName),d(t.external.binPath,t.external.args,function(p,m){if(p)if(p.code===1)n(e(m));else{var _={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},h={code:p.code,meaning:_[p.code],data:m};i(h)}else n(e(m))})}})})},Ml}var $p,$w;function iO(){return $w||($w=1,$p={lpsolve:nO()}),$p}var Hp,Hw;function Ww(){return Hw||(Hw=1,Hp=function(e,t){var n=t.optimize,i=JSON.parse(JSON.stringify(t.optimize)),a=Object.keys(t.optimize),s,u=0,l={},d="",p={},m=[],_,h,g,x;for(delete t.optimize,_=0;_<a.length;_++)i[a[_]]=0;for(_=0;_<a.length;_++){t.optimize=a[_],t.opType=n[a[_]],s=e.Solve(t,void 0,void 0,!0);for(x in a)if(!t.variables[a[x]]){s[a[x]]=s[a[x]]?s[a[x]]:0;for(g in t.variables)t.variables[g][a[x]]&&s[g]&&(s[a[x]]+=s[g]*t.variables[g][a[x]])}for(d="base",h=0;h<a.length;h++)s[a[h]]?d+="-"+(s[a[h]]*1e3|0)/1e3:d+="-0";if(!l[d]){for(l[d]=1,u++,h=0;h<a.length;h++)s[a[h]]&&(i[a[h]]+=s[a[h]]);delete s.feasible,delete s.result,m.push(s)}}for(_=0;_<a.length;_++)t.constraints[a[_]]={equal:i[a[_]]/u};t.optimize="cheater-"+Math.random(),t.opType="max";for(_ in t.variables)t.variables[_].cheater=1;for(_ in m)for(g in m[_])p[g]=p[g]||{min:1e99,max:-1e99};for(_ in p)for(g in m)m[g][_]?(m[g][_]>p[_].max&&(p[_].max=m[g][_]),m[g][_]<p[_].min&&(p[_].min=m[g][_])):(m[g][_]=0,p[_].min=0);return s=e.Solve(t,void 0,void 0,!0),{midpoint:s,vertices:m,ranges:p}}),Hp}var Wp,Uw;function oO(){if(Uw)return Wp;Uw=1;var e=ZV(),t=JV(),n=EE(),i=yg(),a=eO(),s=i.Constraint,u=i.Variable,l=i.Numeral,d=i.Term,p=iO(),m=function(){this.Model=t,this.branchAndCut=n,this.Constraint=s,this.Variable=u,this.Numeral=l,this.Term=d,this.Tableau=e,this.lastSolvedModel=null,this.External=p,this.Solve=function(_,h,g,x){if(x)for(var q in a)_=a[q](_);if(!_)throw new Error("Solver requires a model to operate on");if(typeof _.optimize=="object"&&Object.keys(_.optimize>1))return Ww()(this,_);if(_.external){var w=Object.keys(p);if(w=JSON.stringify(w),!_.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+w);if(!p[_.external.solver])throw new Error("No support (yet) for "+_.external.solver+". Please use one of these instead:"+w);return p[_.external.solver].solve(_)}else{_ instanceof t||(_=new t(h).loadJson(_));var b=_.solve();if(this.lastSolvedModel=_,b.solutionSet=b.generateSolutionSet(),g)return b;var k={};return k.feasible=b.feasible,k.result=b.evaluation,k.bounded=b.bounded,b._tableau.__isIntegral&&(k.isIntegral=!0),Object.keys(b.solutionSet).forEach(function(S){b.solutionSet[S]!==0&&(k[S]=b.solutionSet[S])}),k}},this.ReformatLP=B0(),this.MultiObjective=function(_){return Ww()(this,_)}};return typeof window=="object"?window.solver=new m:typeof self=="object"&&(self.solver=new m),Wp=new m,Wp}var aO=oO();const sO=Na(aO),Eo=1e-8,IE=1e15,TE=1e12,NE=1e9,z0=1e3,$0=100,PE=10,jE=1e-5,RE=1e-6,uO=(e,t=new Set)=>{const n={optimize:"total_cost",opType:"min",constraints:{},variables:{},ints:{}};return Object.keys(e.nodes).forEach(i=>{var E,T;const a=e.nodes[i],s=`m_${i}`,u=`mc_${i}`,l=a.machineCount||0,d=a.machineCountMode||"free",p=a.cappedMachineCount;a.cycleTime;const m=a.recipe.power_consumption;let _=0;typeof m=="number"?_=m:typeof m=="object"&&m!==null&&"max"in m&&(_=m.max);const h=a.recipe.pollution,g=typeof h=="number"?h:0,x=vt(a.recipe.machine_id),q=x&&typeof x.cost=="number"?x.cost:0,w=(((E=a.recipe.inputs)==null?void 0:E.length)||0)+(((T=a.recipe.outputs)==null?void 0:T.length)||0),b=Math.ceil(_/15e5)*2,k=w*2,S=1+b+k;n.variables[s]={total_cost:jE*_+PE*g+RE*q},n.variables[u]={total_cost:NE*S},n.ints[u]=1;const M=`ceiling_${i}`;n.constraints[M]={min:0},n.variables[u][M]=1,n.variables[s][M]=-1;const I=`nonneg_${i}`;if(n.constraints[I]={min:0},n.variables[s][I]=1,d==="locked"){const P=`lock_${i}`;n.constraints[P]={equal:l},n.variables[s][P]=1}else if(d==="capped"&&typeof p=="number"){const P=`cap_${i}`;n.constraints[P]={max:p},n.variables[s][P]=1}}),e.connections.forEach(i=>{const a=`f_${i.id}`;n.variables[a]={total_cost:0};const s=`flow_nonneg_${i.id}`;n.constraints[s]={min:0},n.variables[a][s]=1}),Object.keys(e.nodes).forEach(i=>{const a=e.nodes[i],s=t.has(i);a.outputs.forEach((u,l)=>{const d=`flow_out_${i}_${l}`,p=`excess_${i}_${l}`,m=e.connections.filter(k=>k.sourceNodeId===i&&k.sourceOutputIndex===l),h=m.length>0?z0:$0,g=s?1:h;n.variables[p]={total_cost:g,[d]:-1};const x=`m_${i}`;let q=a.cycleTime;(typeof q!="number"||q<=0)&&(q=1);const w=u.originalQuantity!==void 0?u.originalQuantity:u.quantity;if(typeof w!="number")return;const b=a.isMineshaftDrill?w:w/q;n.constraints[d]={equal:0},n.variables[x][d]||(n.variables[x][d]=0),n.variables[x][d]+=b,m.forEach(k=>{const S=`f_${k.id}`;n.variables[S][d]||(n.variables[S][d]=0),n.variables[S][d]-=1})}),a.inputs.forEach((u,l)=>{const d=e.connections.filter(M=>M.targetNodeId===i&&M.targetInputIndex===l);if(d.length===0)return;const p=`flow_in_${i}_${l}`,m=`deficit_${i}_${l}`,_=`m_${i}`;let h=a.cycleTime;(typeof h!="number"||h<=0)&&(h=1);const g=u.quantity;if(typeof g!="number")return;const x=a.isMineshaftDrill?g:g/h;n.variables[m]={total_cost:TE,[p]:1};const q=`deficit_indicator_${i}_${l}`;n.variables[q]={total_cost:IE},n.ints[q]=1;const w=`deficit_binary_${i}_${l}`;n.constraints[w]={min:0,max:1},n.variables[q][w]=1;const b=`deficit_link_${i}_${l}`;n.constraints[b]={max:0};const k=x*1e4;n.variables[m][b]=1,n.variables[q][b]=-k,n.constraints[p]={min:0},d.forEach(M=>{const I=`f_${M.id}`;n.variables[I][p]||(n.variables[I][p]=0),n.variables[I][p]+=1}),n.variables[_][p]||(n.variables[_][p]=0),n.variables[_][p]-=x;const S=`max_flow_in_${i}_${l}`;n.constraints[S]={max:0},d.forEach(M=>{const I=`f_${M.id}`;n.variables[I][S]||(n.variables[I][S]=0),n.variables[I][S]+=1}),n.variables[_][S]=-x})}),t.forEach(i=>{const a=e.nodes[i];a&&a.outputs.forEach((s,u)=>{const l=`excess_${i}_${u}`,d=e.connections.filter(w=>w.sourceNodeId===i&&w.sourceOutputIndex===u);let p=a.cycleTime;(typeof p!="number"||p<=0)&&(p=1);const m=s.originalQuantity!==void 0?s.originalQuantity:s.quantity;if(typeof m!="number")return;const h=(a.isMineshaftDrill?m:m/p)*(a.machineCount||0);let g=0;d.forEach(w=>{const b=e.nodes[w.targetNodeId];if(!b)return;const k=b.inputs[w.targetInputIndex];if(!k)return;let S=b.cycleTime;(typeof S!="number"||S<=0)&&(S=1);const M=k.quantity;if(typeof M!="number")return;const E=(b.isMineshaftDrill?M:M/S)*(b.machineCount||0);g+=Math.min(h-g,E)});const x=Math.max(0,h-g),q=`min_excess_${i}_${u}`;n.constraints[q]={min:x},n.variables[l][q]=1})}),n},lO=e=>{const t=Object.keys(e.nodes),n=new Map;t.forEach((g,x)=>n.set(g,x));const i=t.length,a=new Int32Array(i).fill(-1),s=new Int32Array(i),u=new Uint8Array(i),l=[];let d=0;const p=[],m=g=>{a[g]=d,s[g]=d,d++,l.push(g),u[g]=1;const x=t[g];if(e.nodes[x].outputs.forEach(w=>{const b=e.products[w.productId];b&&b.connections.forEach(k=>{if(k.sourceNodeId!==x)return;const S=n.get(k.targetNodeId);S!==void 0&&(a[S]===-1?(m(S),s[g]=Math.min(s[g],s[S])):u[S]&&(s[g]=Math.min(s[g],a[S])))})}),s[g]===a[g]){const w=[];let b;do b=l.pop(),u[b]=0,w.push(t[b]);while(b!==g);w.length>1&&p.push(w)}};for(let g=0;g<i;g++)a[g]===-1&&m(g);const _=[];p.forEach(g=>{var S;const x=new Set(g),q=new Set;if(e.connections.forEach(M=>{const I=x.has(M.sourceNodeId),E=x.has(M.targetNodeId);if(I&&E){const T=M.productId;q.add(T)}}),q.size===0)return;let w=!1;for(const M of q)if(e.connections.some(E=>{if(E.productId!==M)return!1;const T=!x.has(E.sourceNodeId),P=x.has(E.targetNodeId);return T&&P})){w=!0;break}if(w)return;let b=!0;const k=[];for(const M of q){let I=!1;for(const E of g){const T=e.nodes[E];let P=T.cycleTime;(typeof P!="number"||P<=0)&&(P=1);const j=T.isMineshaftDrill||((S=T.recipe)==null?void 0:S.isMineshaftDrill);let D=0;T.outputs.forEach(F=>{if(F.productId===M){const X=F.originalQuantity!==void 0?F.originalQuantity:F.quantity;typeof X=="number"&&(D+=j?X:X/P)}});let O=0;if(T.inputs.forEach(F=>{F.productId===M&&typeof F.quantity=="number"&&(O+=j?F.quantity:F.quantity/P)}),D>=O-1e-10){I=!0;break}}I||(b=!1,k.push(M))}b||_.push({nodes:g,nodeNames:g.map(M=>{var I,E;return((E=(I=e.nodes[M])==null?void 0:I.recipe)==null?void 0:E.name)||M}),problematicProducts:k})});const h=new Set;return p.forEach(g=>g.forEach(x=>h.add(x))),t.forEach(g=>{var w;if(h.has(g))return;const x=e.nodes[g];if(!x)return;const q=new Map;if(e.connections.forEach(b=>{if(b.sourceNodeId===g&&b.targetNodeId===g){const k=b.productId,S=x.outputs[b.sourceOutputIndex],M=x.inputs[b.targetInputIndex];S&&M&&S.productId===k&&M.productId===k&&q.set(k,{inputRate:M.rate,outputRate:S.rate})}}),q.size>0){let b=!1;for(const[k,S]of q){const M=e.products[k],I=1e-10;if(!(S.outputRate>S.inputRate+I)){if(S.outputRate<S.inputRate-I){if(!M.producers.some(T=>T.nodeId!==g)){b=!0;break}continue}if(Math.abs(S.outputRate-S.inputRate)<I){const E=M.consumers.some(P=>P.nodeId!==g),T=M.producers.some(P=>P.nodeId!==g);if(!E&&!T)continue;if(E&&!T){b=!0;break}if(T)continue}}}b&&_.push({nodes:[g],nodeNames:[((w=x.recipe)==null?void 0:w.name)||g],isSelfFeeding:!0})}}),_},cO=(e,t=new Set)=>{const n=lO(e);if(n.length>0)return{feasible:!1,unsustainableLoops:n,message:"Unsustainable loops detected - these machines depend on each other with no external input source"};const i=uO(e,t),a=Object.keys(i.variables).length,s=Object.keys(i.constraints).length,u=Object.keys(i.ints).length,l=a-u,d=Object.keys(e.nodes).length,p=e.connections.length;console.log("%c[LP Solver] Model Statistics:","color: #3498db; font-weight: bold"),console.log(`  Graph: ${d} nodes, ${p} connections`),console.log(`  Variables: ${a} total (${l} continuous, ${u} integer)`),console.log(`  Constraints: ${s}`);let m=0,_=0,h=0,g=0,x=0,q=0;Object.keys(i.variables).forEach(M=>{M.startsWith("m_")&&!M.startsWith("mc_")?m++:M.startsWith("mc_")?_++:M.startsWith("f_")?h++:M.startsWith("excess_")?g++:M.startsWith("deficit_")&&!M.includes("indicator")?x++:M.startsWith("deficit_indicator_")&&q++}),console.log("  Variable breakdown:"),console.log(`    Machine counts: ${m}`),console.log(`    Ceiling vars (model count): ${_}`),console.log(`    Flow vars: ${h}`),console.log(`    Excess vars (amount only): ${g}`),console.log(`    Deficit vars: ${x}`),console.log(`    Deficit indicators: ${q}`),console.log("%c[LP Solver] Solving...","color: #f39c12; font-weight: bold");const w=performance.now(),b=sO.Solve(i),S=performance.now()-w;if(b.feasible){console.log(`%c[LP Solver] Solution found in ${S.toFixed(2)}ms`,"color: #2ecc71; font-weight: bold"),console.log("%c[LP Solver] Solution Found","color: #2ecc71; font-weight: bold");let M=0,I=0,E=0,T=0,P=0,j=0,D=0,O=0,F=0,X=0,V=0,Z=0,W=0,te=0,U=0,K=0,oe=0;Object.keys(b).forEach(Q=>{var _e,H;if(Q.startsWith("deficit_indicator_")){const J=b[Q]||0;J>Eo&&(X+=J,I+=J*IE)}if(Q.startsWith("deficit_")&&!Q.includes("indicator")){const J=b[Q]||0;J>Eo&&(V+=J,E+=J*TE)}if(Q.startsWith("excess_")){const J=b[Q]||0;if(J>Eo){const ne=Q.split("_"),ue=ne.slice(1,-1).join("_"),ae=parseInt(ne[ne.length-1]),he=e.connections.some(Ne=>Ne.sourceNodeId===ue&&Ne.sourceOutputIndex===ae),Ee=he?z0:$0;he?Z+=J:W+=J,P+=J*Ee}}if(Q.startsWith("m_")){const J=Q.substring(2),ne=e.nodes[J],ue=b[Q]||0;ne.cycleTime;const ae=ne.recipe.power_consumption;let he=0;typeof ae=="number"?he=ae:typeof ae=="object"&&ae!==null&&"max"in ae&&(he=ae.max);const Ee=ne.recipe.pollution,Ne=typeof Ee=="number"?Ee:0,Ie=vt(ne.recipe.machine_id),Te=Ie&&typeof Ie.cost=="number"?Ie.cost:0,Pe=(((_e=ne.recipe.inputs)==null?void 0:_e.length)||0)+(((H=ne.recipe.outputs)==null?void 0:H.length)||0),Ve=Math.ceil(he/15e5)*2,He=Pe*2,De=1+Ve+He,nt=Math.ceil(ue),et=nt*De,ft=ue*he,ct=ue*Ne,dt=nt*Te;te+=et,U+=ft,K+=ct,oe+=dt,j+=et*NE,D+=ft*jE,O+=ct*PE,F+=dt*RE}}),M=I+E+T+P+j+D+O+F,console.log("  Cost Breakdown:"),console.log(`    Deficiency count: ${X} inputs (cost: ${I.toExponential(2)})`),console.log(`    Deficiency amount: ${V.toFixed(4)} (cost: ${E.toExponential(2)})`),console.log(`    Connected excess amount: ${Z.toFixed(4)} (cost: ${(Z*z0).toExponential(2)})`),console.log(`    Unconnected excess amount: ${W.toFixed(4)} (cost: ${(W*$0).toExponential(2)})`),console.log(`    Model count: ${te.toFixed(0)} (cost: ${j.toExponential(2)})`),console.log(`    Power: ${U.toFixed(0)} W (cost: ${D.toFixed(2)})`),console.log(`    Pollution: ${K.toFixed(2)} %/hr (cost: ${O.toFixed(2)})`),console.log(`    Machine cost: $${oe.toFixed(0)} (cost: ${F.toFixed(2)})`),console.log(`    Total: ${M.toExponential(2)}`),console.log("  Machine Count Changes:");let z=!1;Object.keys(e.nodes).forEach(Q=>{var ae;const _e=e.nodes[Q],H=`m_${Q}`,J=b[H]||0,ne=_e.machineCount||0;Math.abs(J-ne)>Eo&&(z=!0,console.log(`    ${((ae=_e==null?void 0:_e.recipe)==null?void 0:ae.name)||Q}: ${ne.toFixed(4)}  ${J.toFixed(4)}`))}),z||console.log("    No changes needed")}else console.log("%c[LP Solver] No feasible solution","color: #e74c3c; font-weight: bold");return b},dO=(e,t)=>{const n=new Map;return!e.feasible||e.unsustainableLoops||Object.keys(t.nodes).forEach(i=>{const a=t.nodes[i],s=`m_${i}`,u=e[s]!==void 0?e[s]:0,l=a.machineCount||0;if(u>=-Eo){const d=Math.max(0,u);Math.abs(d-l)>Eo&&n.set(i,d)}}),n},Gw=(e,t,n,i={})=>{const{allowDeficiency:a=!1}=i;if(n.length===0)return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No target recipes selected"};const s=Rs(e,t),u=new Set(n.map(_=>_.recipeBoxId)),l=cO(s,u);if(!l.feasible){if(l.unsustainableLoops){const _=l.unsustainableLoops.map(h=>h.nodeNames.join("  ")).join(`
  `);return{success:!1,updates:new Map,converged:!1,iterations:0,message:`Unsustainable loops detected:
  ${_}

These machines form cycles with no external input source.`}}return{success:!1,updates:new Map,converged:!1,iterations:0,message:"No feasible solution found (infeasible constraints)"}}let d=!1;const p=[];if(Object.keys(l).forEach(_=>{var h;if(_.startsWith("deficit_")&&!_.includes("indicator")){const g=l[_]||0;if(g>Eo){d=!0;const x=_.split("_"),q=parseInt(x[x.length-1]),w=x.slice(1,-1).join("_"),b=s.nodes[w];if(b){const k=b.inputs[q];p.push({nodeId:w,nodeName:((h=b.recipe)==null?void 0:h.name)||w,inputIndex:q,productId:k==null?void 0:k.productId,deficitAmount:g})}}}}),d&&!a){const _=p.map(h=>`  ${h.nodeName}: needs ${h.deficitAmount.toFixed(4)}/s more of product ${h.productId}`).join(`
`);return{success:!1,updates:new Map,converged:!1,iterations:1,message:`Cannot balance production - insufficient input supply detected:
${_}

This usually means a loop consumes more than it produces.`,hasDeficiency:!0,deficientNodes:p}}const m=dO(l,s);return{success:m.size>0,updates:m,converged:!0,iterations:1,message:m.size>0?`Updated ${m.size} nodes`:"Network already balanced"}};function gg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Up,Kw;function pO(){if(Kw)return Up;Kw=1;function e(){this.__data__=[],this.size=0}return Up=e,Up}var Gp,Yw;function Va(){if(Yw)return Gp;Yw=1;function e(t,n){return t===n||t!==t&&n!==n}return Gp=e,Gp}var Kp,Qw;function xc(){if(Qw)return Kp;Qw=1;var e=Va();function t(n,i){for(var a=n.length;a--;)if(e(n[a][0],i))return a;return-1}return Kp=t,Kp}var Yp,Xw;function fO(){if(Xw)return Yp;Xw=1;var e=xc(),t=Array.prototype,n=t.splice;function i(a){var s=this.__data__,u=e(s,a);if(u<0)return!1;var l=s.length-1;return u==l?s.pop():n.call(s,u,1),--this.size,!0}return Yp=i,Yp}var Qp,Zw;function _O(){if(Zw)return Qp;Zw=1;var e=xc();function t(n){var i=this.__data__,a=e(i,n);return a<0?void 0:i[a][1]}return Qp=t,Qp}var Xp,Jw;function mO(){if(Jw)return Xp;Jw=1;var e=xc();function t(n){return e(this.__data__,n)>-1}return Xp=t,Xp}var Zp,eb;function hO(){if(eb)return Zp;eb=1;var e=xc();function t(n,i){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return Zp=t,Zp}var Jp,tb;function wc(){if(tb)return Jp;tb=1;var e=pO(),t=fO(),n=_O(),i=mO(),a=hO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Jp=s,Jp}var ef,rb;function yO(){if(rb)return ef;rb=1;var e=wc();function t(){this.__data__=new e,this.size=0}return ef=t,ef}var tf,nb;function gO(){if(nb)return tf;nb=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return tf=e,tf}var rf,ib;function vO(){if(ib)return rf;ib=1;function e(t){return this.__data__.get(t)}return rf=e,rf}var nf,ob;function xO(){if(ob)return nf;ob=1;function e(t){return this.__data__.has(t)}return nf=e,nf}var of,ab;function VE(){if(ab)return of;ab=1;var e=typeof dl=="object"&&dl&&dl.Object===Object&&dl;return of=e,of}var af,sb;function Rn(){if(sb)return af;sb=1;var e=VE(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return af=n,af}var sf,ub;function Oa(){if(ub)return sf;ub=1;var e=Rn(),t=e.Symbol;return sf=t,sf}var uf,lb;function wO(){if(lb)return uf;lb=1;var e=Oa(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;function s(u){var l=n.call(u,a),d=u[a];try{u[a]=void 0;var p=!0}catch{}var m=i.call(u);return p&&(l?u[a]=d:delete u[a]),m}return uf=s,uf}var lf,cb;function bO(){if(cb)return lf;cb=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return lf=n,lf}var cf,db;function Oo(){if(db)return cf;db=1;var e=Oa(),t=wO(),n=bO(),i="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function u(l){return l==null?l===void 0?a:i:s&&s in Object(l)?t(l):n(l)}return cf=u,cf}var df,pb;function sn(){if(pb)return df;pb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return df=e,df}var pf,fb;function iu(){if(fb)return pf;fb=1;var e=Oo(),t=sn(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function u(l){if(!t(l))return!1;var d=e(l);return d==i||d==a||d==n||d==s}return pf=u,pf}var ff,_b;function qO(){if(_b)return ff;_b=1;var e=Rn(),t=e["__core-js_shared__"];return ff=t,ff}var _f,mb;function SO(){if(mb)return _f;mb=1;var e=qO(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!t&&t in i}return _f=n,_f}var mf,hb;function OE(){if(hb)return mf;hb=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return mf=n,mf}var hf,yb;function CO(){if(yb)return hf;yb=1;var e=iu(),t=SO(),n=sn(),i=OE(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(h){if(!n(h)||t(h))return!1;var g=e(h)?m:s;return g.test(i(h))}return hf=_,hf}var yf,gb;function kO(){if(gb)return yf;gb=1;function e(t,n){return t==null?void 0:t[n]}return yf=e,yf}var gf,vb;function Fo(){if(vb)return gf;vb=1;var e=CO(),t=kO();function n(i,a){var s=t(i,a);return e(s)?s:void 0}return gf=n,gf}var vf,xb;function vg(){if(xb)return vf;xb=1;var e=Fo(),t=Rn(),n=e(t,"Map");return vf=n,vf}var xf,wb;function bc(){if(wb)return xf;wb=1;var e=Fo(),t=e(Object,"create");return xf=t,xf}var wf,bb;function MO(){if(bb)return wf;bb=1;var e=bc();function t(){this.__data__=e?e(null):{},this.size=0}return wf=t,wf}var bf,qb;function EO(){if(qb)return bf;qb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return bf=e,bf}var qf,Sb;function IO(){if(Sb)return qf;Sb=1;var e=bc(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var u=this.__data__;if(e){var l=u[s];return l===t?void 0:l}return i.call(u,s)?u[s]:void 0}return qf=a,qf}var Sf,Cb;function TO(){if(Cb)return Sf;Cb=1;var e=bc(),t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return Sf=i,Sf}var Cf,kb;function NO(){if(kb)return Cf;kb=1;var e=bc(),t="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&a===void 0?t:a,this}return Cf=n,Cf}var kf,Mb;function PO(){if(Mb)return kf;Mb=1;var e=MO(),t=EO(),n=IO(),i=TO(),a=NO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,kf=s,kf}var Mf,Eb;function jO(){if(Eb)return Mf;Eb=1;var e=PO(),t=wc(),n=vg();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Mf=i,Mf}var Ef,Ib;function RO(){if(Ib)return Ef;Ib=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ef=e,Ef}var If,Tb;function qc(){if(Tb)return If;Tb=1;var e=RO();function t(n,i){var a=n.__data__;return e(i)?a[typeof i=="string"?"string":"hash"]:a.map}return If=t,If}var Tf,Nb;function VO(){if(Nb)return Tf;Nb=1;var e=qc();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return Tf=t,Tf}var Nf,Pb;function OO(){if(Pb)return Nf;Pb=1;var e=qc();function t(n){return e(this,n).get(n)}return Nf=t,Nf}var Pf,jb;function FO(){if(jb)return Pf;jb=1;var e=qc();function t(n){return e(this,n).has(n)}return Pf=t,Pf}var jf,Rb;function AO(){if(Rb)return jf;Rb=1;var e=qc();function t(n,i){var a=e(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return jf=t,jf}var Rf,Vb;function xg(){if(Vb)return Rf;Vb=1;var e=jO(),t=VO(),n=OO(),i=FO(),a=AO();function s(u){var l=-1,d=u==null?0:u.length;for(this.clear();++l<d;){var p=u[l];this.set(p[0],p[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Rf=s,Rf}var Vf,Ob;function LO(){if(Ob)return Vf;Ob=1;var e=wc(),t=vg(),n=xg(),i=200;function a(s,u){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<i-1)return d.push([s,u]),this.size=++l.size,this;l=this.__data__=new n(d)}return l.set(s,u),this.size=l.size,this}return Vf=a,Vf}var Of,Fb;function Sc(){if(Fb)return Of;Fb=1;var e=wc(),t=yO(),n=gO(),i=vO(),a=xO(),s=LO();function u(l){var d=this.__data__=new e(l);this.size=d.size}return u.prototype.clear=t,u.prototype.delete=n,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,Of=u,Of}var Ff,Ab;function wg(){if(Ab)return Ff;Ab=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a&&n(t[i],i,t)!==!1;);return t}return Ff=e,Ff}var Af,Lb;function FE(){if(Lb)return Af;Lb=1;var e=Fo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Af=t,Af}var Lf,Db;function Cc(){if(Db)return Lf;Db=1;var e=FE();function t(n,i,a){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return Lf=t,Lf}var Df,Bb;function kc(){if(Bb)return Df;Bb=1;var e=Cc(),t=Va(),n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l){var d=s[u];(!(i.call(s,u)&&t(d,l))||l===void 0&&!(u in s))&&e(s,u,l)}return Df=a,Df}var Bf,zb;function ou(){if(zb)return Bf;zb=1;var e=kc(),t=Cc();function n(i,a,s,u){var l=!s;s||(s={});for(var d=-1,p=a.length;++d<p;){var m=a[d],_=u?u(s[m],i[m],m,s,i):void 0;_===void 0&&(_=i[m]),l?t(s,m,_):e(s,m,_)}return s}return Bf=n,Bf}var zf,$b;function DO(){if($b)return zf;$b=1;function e(t,n){for(var i=-1,a=Array(t);++i<t;)a[i]=n(i);return a}return zf=e,zf}var $f,Hb;function Qn(){if(Hb)return $f;Hb=1;function e(t){return t!=null&&typeof t=="object"}return $f=e,$f}var Hf,Wb;function BO(){if(Wb)return Hf;Wb=1;var e=Oo(),t=Qn(),n="[object Arguments]";function i(a){return t(a)&&e(a)==n}return Hf=i,Hf}var Wf,Ub;function au(){if(Ub)return Wf;Ub=1;var e=BO(),t=Qn(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&i.call(u,"callee")&&!a.call(u,"callee")};return Wf=s,Wf}var Uf,Gb;function Ft(){if(Gb)return Uf;Gb=1;var e=Array.isArray;return Uf=e,Uf}var Cs={exports:{}},Gf,Kb;function zO(){if(Kb)return Gf;Kb=1;function e(){return!1}return Gf=e,Gf}Cs.exports;var Yb;function Fa(){return Yb||(Yb=1,(function(e,t){var n=Rn(),i=zO(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===a,l=u?n.Buffer:void 0,d=l?l.isBuffer:void 0,p=d||i;e.exports=p})(Cs,Cs.exports)),Cs.exports}var Kf,Qb;function Mc(){if(Qb)return Kf;Qb=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return Kf=n,Kf}var Yf,Xb;function bg(){if(Xb)return Yf;Xb=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Yf=t,Yf}var Qf,Zb;function $O(){if(Zb)return Qf;Zb=1;var e=Oo(),t=bg(),n=Qn(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",m="[object Number]",_="[object Object]",h="[object RegExp]",g="[object Set]",x="[object String]",q="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",k="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",T="[object Uint8Array]",P="[object Uint8ClampedArray]",j="[object Uint16Array]",D="[object Uint32Array]",O={};O[k]=O[S]=O[M]=O[I]=O[E]=O[T]=O[P]=O[j]=O[D]=!0,O[i]=O[a]=O[w]=O[s]=O[b]=O[u]=O[l]=O[d]=O[p]=O[m]=O[_]=O[h]=O[g]=O[x]=O[q]=!1;function F(X){return n(X)&&t(X.length)&&!!O[e(X)]}return Qf=F,Qf}var Xf,Jb;function Ec(){if(Jb)return Xf;Jb=1;function e(t){return function(n){return t(n)}}return Xf=e,Xf}var ks={exports:{}};ks.exports;var e2;function qg(){return e2||(e2=1,(function(e,t){var n=VE(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s&&n.process,l=(function(){try{var d=a&&a.require&&a.require("util").types;return d||u&&u.binding&&u.binding("util")}catch{}})();e.exports=l})(ks,ks.exports)),ks.exports}var Zf,t2;function su(){if(t2)return Zf;t2=1;var e=$O(),t=Ec(),n=qg(),i=n&&n.isTypedArray,a=i?t(i):e;return Zf=a,Zf}var Jf,r2;function AE(){if(r2)return Jf;r2=1;var e=DO(),t=au(),n=Ft(),i=Fa(),a=Mc(),s=su(),u=Object.prototype,l=u.hasOwnProperty;function d(p,m){var _=n(p),h=!_&&t(p),g=!_&&!h&&i(p),x=!_&&!h&&!g&&s(p),q=_||h||g||x,w=q?e(p.length,String):[],b=w.length;for(var k in p)(m||l.call(p,k))&&!(q&&(k=="length"||g&&(k=="offset"||k=="parent")||x&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||a(k,b)))&&w.push(k);return w}return Jf=d,Jf}var e_,n2;function Ic(){if(n2)return e_;n2=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||e;return n===a}return e_=t,e_}var t_,i2;function LE(){if(i2)return t_;i2=1;function e(t,n){return function(i){return t(n(i))}}return t_=e,t_}var r_,o2;function HO(){if(o2)return r_;o2=1;var e=LE(),t=e(Object.keys,Object);return r_=t,r_}var n_,a2;function Sg(){if(a2)return n_;a2=1;var e=Ic(),t=HO(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var u=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&u.push(l);return u}return n_=a,n_}var i_,s2;function vi(){if(s2)return i_;s2=1;var e=iu(),t=bg();function n(i){return i!=null&&t(i.length)&&!e(i)}return i_=n,i_}var o_,u2;function Qi(){if(u2)return o_;u2=1;var e=AE(),t=Sg(),n=vi();function i(a){return n(a)?e(a):t(a)}return o_=i,o_}var a_,l2;function WO(){if(l2)return a_;l2=1;var e=ou(),t=Qi();function n(i,a){return i&&e(a,t(a),i)}return a_=n,a_}var s_,c2;function UO(){if(c2)return s_;c2=1;function e(t){var n=[];if(t!=null)for(var i in Object(t))n.push(i);return n}return s_=e,s_}var u_,d2;function GO(){if(d2)return u_;d2=1;var e=sn(),t=Ic(),n=UO(),i=Object.prototype,a=i.hasOwnProperty;function s(u){if(!e(u))return n(u);var l=t(u),d=[];for(var p in u)p=="constructor"&&(l||!a.call(u,p))||d.push(p);return d}return u_=s,u_}var l_,p2;function Ao(){if(p2)return l_;p2=1;var e=AE(),t=GO(),n=vi();function i(a){return n(a)?e(a,!0):t(a)}return l_=i,l_}var c_,f2;function KO(){if(f2)return c_;f2=1;var e=ou(),t=Ao();function n(i,a){return i&&e(a,t(a),i)}return c_=n,c_}var Ms={exports:{}};Ms.exports;var _2;function DE(){return _2||(_2=1,(function(e,t){var n=Rn(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?n.Buffer:void 0,l=u?u.allocUnsafe:void 0;function d(p,m){if(m)return p.slice();var _=p.length,h=l?l(_):new p.constructor(_);return p.copy(h),h}e.exports=d})(Ms,Ms.exports)),Ms.exports}var d_,m2;function BE(){if(m2)return d_;m2=1;function e(t,n){var i=-1,a=t.length;for(n||(n=Array(a));++i<a;)n[i]=t[i];return n}return d_=e,d_}var p_,h2;function zE(){if(h2)return p_;h2=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=0,u=[];++i<a;){var l=t[i];n(l,i,t)&&(u[s++]=l)}return u}return p_=e,p_}var f_,y2;function $E(){if(y2)return f_;y2=1;function e(){return[]}return f_=e,f_}var __,g2;function Cg(){if(g2)return __;g2=1;var e=zE(),t=$E(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(u){return u==null?[]:(u=Object(u),e(a(u),function(l){return i.call(u,l)}))}:t;return __=s,__}var m_,v2;function YO(){if(v2)return m_;v2=1;var e=ou(),t=Cg();function n(i,a){return e(i,t(i),a)}return m_=n,m_}var h_,x2;function kg(){if(x2)return h_;x2=1;function e(t,n){for(var i=-1,a=n.length,s=t.length;++i<a;)t[s+i]=n[i];return t}return h_=e,h_}var y_,w2;function Tc(){if(w2)return y_;w2=1;var e=LE(),t=e(Object.getPrototypeOf,Object);return y_=t,y_}var g_,b2;function HE(){if(b2)return g_;b2=1;var e=kg(),t=Tc(),n=Cg(),i=$E(),a=Object.getOwnPropertySymbols,s=a?function(u){for(var l=[];u;)e(l,n(u)),u=t(u);return l}:i;return g_=s,g_}var v_,q2;function QO(){if(q2)return v_;q2=1;var e=ou(),t=HE();function n(i,a){return e(i,t(i),a)}return v_=n,v_}var x_,S2;function WE(){if(S2)return x_;S2=1;var e=kg(),t=Ft();function n(i,a,s){var u=a(i);return t(i)?u:e(u,s(i))}return x_=n,x_}var w_,C2;function UE(){if(C2)return w_;C2=1;var e=WE(),t=Cg(),n=Qi();function i(a){return e(a,n,t)}return w_=i,w_}var b_,k2;function XO(){if(k2)return b_;k2=1;var e=WE(),t=HE(),n=Ao();function i(a){return e(a,n,t)}return b_=i,b_}var q_,M2;function ZO(){if(M2)return q_;M2=1;var e=Fo(),t=Rn(),n=e(t,"DataView");return q_=n,q_}var S_,E2;function JO(){if(E2)return S_;E2=1;var e=Fo(),t=Rn(),n=e(t,"Promise");return S_=n,S_}var C_,I2;function GE(){if(I2)return C_;I2=1;var e=Fo(),t=Rn(),n=e(t,"Set");return C_=n,C_}var k_,T2;function eF(){if(T2)return k_;T2=1;var e=Fo(),t=Rn(),n=e(t,"WeakMap");return k_=n,k_}var M_,N2;function Aa(){if(N2)return M_;N2=1;var e=ZO(),t=vg(),n=JO(),i=GE(),a=eF(),s=Oo(),u=OE(),l="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",_="[object WeakMap]",h="[object DataView]",g=u(e),x=u(t),q=u(n),w=u(i),b=u(a),k=s;return(e&&k(new e(new ArrayBuffer(1)))!=h||t&&k(new t)!=l||n&&k(n.resolve())!=p||i&&k(new i)!=m||a&&k(new a)!=_)&&(k=function(S){var M=s(S),I=M==d?S.constructor:void 0,E=I?u(I):"";if(E)switch(E){case g:return h;case x:return l;case q:return p;case w:return m;case b:return _}return M}),M_=k,M_}var E_,P2;function tF(){if(P2)return E_;P2=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=i.length,s=new i.constructor(a);return a&&typeof i[0]=="string"&&t.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return E_=n,E_}var I_,j2;function KE(){if(j2)return I_;j2=1;var e=Rn(),t=e.Uint8Array;return I_=t,I_}var T_,R2;function Mg(){if(R2)return T_;R2=1;var e=KE();function t(n){var i=new n.constructor(n.byteLength);return new e(i).set(new e(n)),i}return T_=t,T_}var N_,V2;function rF(){if(V2)return N_;V2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}return N_=t,N_}var P_,O2;function nF(){if(O2)return P_;O2=1;var e=/\w*$/;function t(n){var i=new n.constructor(n.source,e.exec(n));return i.lastIndex=n.lastIndex,i}return P_=t,P_}var j_,F2;function iF(){if(F2)return j_;F2=1;var e=Oa(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function i(a){return n?Object(n.call(a)):{}}return j_=i,j_}var R_,A2;function YE(){if(A2)return R_;A2=1;var e=Mg();function t(n,i){var a=i?e(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}return R_=t,R_}var V_,L2;function oF(){if(L2)return V_;L2=1;var e=Mg(),t=rF(),n=nF(),i=iF(),a=YE(),s="[object Boolean]",u="[object Date]",l="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",_="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",M="[object Uint8Array]",I="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]";function P(j,D,O){var F=j.constructor;switch(D){case g:return e(j);case s:case u:return new F(+j);case x:return t(j,O);case q:case w:case b:case k:case S:case M:case I:case E:case T:return a(j,O);case l:return new F;case d:case _:return new F(j);case p:return n(j);case m:return new F;case h:return i(j)}}return V_=P,V_}var O_,D2;function QE(){if(D2)return O_;D2=1;var e=sn(),t=Object.create,n=(function(){function i(){}return function(a){if(!e(a))return{};if(t)return t(a);i.prototype=a;var s=new i;return i.prototype=void 0,s}})();return O_=n,O_}var F_,B2;function XE(){if(B2)return F_;B2=1;var e=QE(),t=Tc(),n=Ic();function i(a){return typeof a.constructor=="function"&&!n(a)?e(t(a)):{}}return F_=i,F_}var A_,z2;function aF(){if(z2)return A_;z2=1;var e=Aa(),t=Qn(),n="[object Map]";function i(a){return t(a)&&e(a)==n}return A_=i,A_}var L_,$2;function sF(){if($2)return L_;$2=1;var e=aF(),t=Ec(),n=qg(),i=n&&n.isMap,a=i?t(i):e;return L_=a,L_}var D_,H2;function uF(){if(H2)return D_;H2=1;var e=Aa(),t=Qn(),n="[object Set]";function i(a){return t(a)&&e(a)==n}return D_=i,D_}var B_,W2;function lF(){if(W2)return B_;W2=1;var e=uF(),t=Ec(),n=qg(),i=n&&n.isSet,a=i?t(i):e;return B_=a,B_}var z_,U2;function ZE(){if(U2)return z_;U2=1;var e=Sc(),t=wg(),n=kc(),i=WO(),a=KO(),s=DE(),u=BE(),l=YO(),d=QO(),p=UE(),m=XO(),_=Aa(),h=tF(),g=oF(),x=XE(),q=Ft(),w=Fa(),b=sF(),k=sn(),S=lF(),M=Qi(),I=Ao(),E=1,T=2,P=4,j="[object Arguments]",D="[object Array]",O="[object Boolean]",F="[object Date]",X="[object Error]",V="[object Function]",Z="[object GeneratorFunction]",W="[object Map]",te="[object Number]",U="[object Object]",K="[object RegExp]",oe="[object Set]",z="[object String]",Q="[object Symbol]",_e="[object WeakMap]",H="[object ArrayBuffer]",J="[object DataView]",ne="[object Float32Array]",ue="[object Float64Array]",ae="[object Int8Array]",he="[object Int16Array]",Ee="[object Int32Array]",Ne="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Te="[object Uint16Array]",Pe="[object Uint32Array]",Ve={};Ve[j]=Ve[D]=Ve[H]=Ve[J]=Ve[O]=Ve[F]=Ve[ne]=Ve[ue]=Ve[ae]=Ve[he]=Ve[Ee]=Ve[W]=Ve[te]=Ve[U]=Ve[K]=Ve[oe]=Ve[z]=Ve[Q]=Ve[Ne]=Ve[Ie]=Ve[Te]=Ve[Pe]=!0,Ve[X]=Ve[V]=Ve[_e]=!1;function He(De,nt,et,ft,ct,dt){var lt,Sr=nt&E,Zt=nt&T,$t=nt&P;if(et&&(lt=ct?et(De,ft,ct,dt):et(De)),lt!==void 0)return lt;if(!k(De))return De;var Jt=q(De);if(Jt){if(lt=h(De),!Sr)return u(De,lt)}else{var at=_(De),Rr=at==V||at==Z;if(w(De))return s(De,Sr);if(at==U||at==j||Rr&&!ct){if(lt=Zt||Rr?{}:x(De),!Sr)return Zt?d(De,a(lt,De)):l(De,i(lt,De))}else{if(!Ve[at])return ct?De:{};lt=g(De,at,Sr)}}dt||(dt=new e);var Tt=dt.get(De);if(Tt)return Tt;dt.set(De,lt),S(De)?De.forEach(function(Ht){lt.add(He(Ht,nt,et,Ht,De,dt))}):b(De)&&De.forEach(function(Ht,Qe){lt.set(Qe,He(Ht,nt,et,Qe,De,dt))});var Kr=$t?Zt?m:p:Zt?I:M,pr=Jt?void 0:Kr(De);return t(pr||De,function(Ht,Qe){pr&&(Qe=Ht,Ht=De[Qe]),n(lt,Qe,He(Ht,nt,et,Qe,De,dt))}),lt}return z_=He,z_}var $_,G2;function cF(){if(G2)return $_;G2=1;var e=ZE(),t=4;function n(i){return e(i,t)}return $_=n,$_}var H_,K2;function Eg(){if(K2)return H_;K2=1;function e(t){return function(){return t}}return H_=e,H_}var W_,Y2;function dF(){if(Y2)return W_;Y2=1;function e(t){return function(n,i,a){for(var s=-1,u=Object(n),l=a(n),d=l.length;d--;){var p=l[t?d:++s];if(i(u[p],p,u)===!1)break}return n}}return W_=e,W_}var U_,Q2;function Ig(){if(Q2)return U_;Q2=1;var e=dF(),t=e();return U_=t,U_}var G_,X2;function Tg(){if(X2)return G_;X2=1;var e=Ig(),t=Qi();function n(i,a){return i&&e(i,a,t)}return G_=n,G_}var K_,Z2;function pF(){if(Z2)return K_;Z2=1;var e=vi();function t(n,i){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var u=a.length,l=i?u:-1,d=Object(a);(i?l--:++l<u)&&s(d[l],l,d)!==!1;);return a}}return K_=t,K_}var Y_,J2;function Nc(){if(J2)return Y_;J2=1;var e=Tg(),t=pF(),n=t(e);return Y_=n,Y_}var Q_,eq;function Lo(){if(eq)return Q_;eq=1;function e(t){return t}return Q_=e,Q_}var X_,tq;function JE(){if(tq)return X_;tq=1;var e=Lo();function t(n){return typeof n=="function"?n:e}return X_=t,X_}var Z_,rq;function eI(){if(rq)return Z_;rq=1;var e=wg(),t=Nc(),n=JE(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u))}return Z_=a,Z_}var J_,nq;function tI(){return nq||(nq=1,J_=eI()),J_}var em,iq;function fF(){if(iq)return em;iq=1;var e=Nc();function t(n,i){var a=[];return e(n,function(s,u,l){i(s,u,l)&&a.push(s)}),a}return em=t,em}var tm,oq;function _F(){if(oq)return tm;oq=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return tm=t,tm}var rm,aq;function mF(){if(aq)return rm;aq=1;function e(t){return this.__data__.has(t)}return rm=e,rm}var nm,sq;function rI(){if(sq)return nm;sq=1;var e=xg(),t=_F(),n=mF();function i(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new e;++s<u;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,nm=i,nm}var im,uq;function hF(){if(uq)return im;uq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(t[i],i,t))return!0;return!1}return im=e,im}var om,lq;function nI(){if(lq)return om;lq=1;function e(t,n){return t.has(n)}return om=e,om}var am,cq;function iI(){if(cq)return am;cq=1;var e=rI(),t=hF(),n=nI(),i=1,a=2;function s(u,l,d,p,m,_){var h=d&i,g=u.length,x=l.length;if(g!=x&&!(h&&x>g))return!1;var q=_.get(u),w=_.get(l);if(q&&w)return q==l&&w==u;var b=-1,k=!0,S=d&a?new e:void 0;for(_.set(u,l),_.set(l,u);++b<g;){var M=u[b],I=l[b];if(p)var E=h?p(I,M,b,l,u,_):p(M,I,b,u,l,_);if(E!==void 0){if(E)continue;k=!1;break}if(S){if(!t(l,function(T,P){if(!n(S,P)&&(M===T||m(M,T,d,p,_)))return S.push(P)})){k=!1;break}}else if(!(M===I||m(M,I,d,p,_))){k=!1;break}}return _.delete(u),_.delete(l),k}return am=s,am}var sm,dq;function yF(){if(dq)return sm;dq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a,s){i[++n]=[s,a]}),i}return sm=e,sm}var um,pq;function Ng(){if(pq)return um;pq=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a){i[++n]=a}),i}return um=e,um}var lm,fq;function gF(){if(fq)return lm;fq=1;var e=Oa(),t=KE(),n=Va(),i=iI(),a=yF(),s=Ng(),u=1,l=2,d="[object Boolean]",p="[object Date]",m="[object Error]",_="[object Map]",h="[object Number]",g="[object RegExp]",x="[object Set]",q="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",S=e?e.prototype:void 0,M=S?S.valueOf:void 0;function I(E,T,P,j,D,O,F){switch(P){case k:if(E.byteLength!=T.byteLength||E.byteOffset!=T.byteOffset)return!1;E=E.buffer,T=T.buffer;case b:return!(E.byteLength!=T.byteLength||!O(new t(E),new t(T)));case d:case p:case h:return n(+E,+T);case m:return E.name==T.name&&E.message==T.message;case g:case q:return E==T+"";case _:var X=a;case x:var V=j&u;if(X||(X=s),E.size!=T.size&&!V)return!1;var Z=F.get(E);if(Z)return Z==T;j|=l,F.set(E,T);var W=i(X(E),X(T),j,D,O,F);return F.delete(E),W;case w:if(M)return M.call(E)==M.call(T)}return!1}return lm=I,lm}var cm,_q;function vF(){if(_q)return cm;_q=1;var e=UE(),t=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,u,l,d,p,m){var _=l&t,h=e(s),g=h.length,x=e(u),q=x.length;if(g!=q&&!_)return!1;for(var w=g;w--;){var b=h[w];if(!(_?b in u:i.call(u,b)))return!1}var k=m.get(s),S=m.get(u);if(k&&S)return k==u&&S==s;var M=!0;m.set(s,u),m.set(u,s);for(var I=_;++w<g;){b=h[w];var E=s[b],T=u[b];if(d)var P=_?d(T,E,b,u,s,m):d(E,T,b,s,u,m);if(!(P===void 0?E===T||p(E,T,l,d,m):P)){M=!1;break}I||(I=b=="constructor")}if(M&&!I){var j=s.constructor,D=u.constructor;j!=D&&"constructor"in s&&"constructor"in u&&!(typeof j=="function"&&j instanceof j&&typeof D=="function"&&D instanceof D)&&(M=!1)}return m.delete(s),m.delete(u),M}return cm=a,cm}var dm,mq;function xF(){if(mq)return dm;mq=1;var e=Sc(),t=iI(),n=gF(),i=vF(),a=Aa(),s=Ft(),u=Fa(),l=su(),d=1,p="[object Arguments]",m="[object Array]",_="[object Object]",h=Object.prototype,g=h.hasOwnProperty;function x(q,w,b,k,S,M){var I=s(q),E=s(w),T=I?m:a(q),P=E?m:a(w);T=T==p?_:T,P=P==p?_:P;var j=T==_,D=P==_,O=T==P;if(O&&u(q)){if(!u(w))return!1;I=!0,j=!1}if(O&&!j)return M||(M=new e),I||l(q)?t(q,w,b,k,S,M):n(q,w,T,b,k,S,M);if(!(b&d)){var F=j&&g.call(q,"__wrapped__"),X=D&&g.call(w,"__wrapped__");if(F||X){var V=F?q.value():q,Z=X?w.value():w;return M||(M=new e),S(V,Z,b,k,M)}}return O?(M||(M=new e),i(q,w,b,k,S,M)):!1}return dm=x,dm}var pm,hq;function oI(){if(hq)return pm;hq=1;var e=xF(),t=Qn();function n(i,a,s,u,l){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:e(i,a,s,u,n,l)}return pm=n,pm}var fm,yq;function wF(){if(yq)return fm;yq=1;var e=Sc(),t=oI(),n=1,i=2;function a(s,u,l,d){var p=l.length,m=p,_=!d;if(s==null)return!m;for(s=Object(s);p--;){var h=l[p];if(_&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++p<m;){h=l[p];var g=h[0],x=s[g],q=h[1];if(_&&h[2]){if(x===void 0&&!(g in s))return!1}else{var w=new e;if(d)var b=d(x,q,g,s,u,w);if(!(b===void 0?t(q,x,n|i,d,w):b))return!1}}return!0}return fm=a,fm}var _m,gq;function aI(){if(gq)return _m;gq=1;var e=sn();function t(n){return n===n&&!e(n)}return _m=t,_m}var mm,vq;function bF(){if(vq)return mm;vq=1;var e=aI(),t=Qi();function n(i){for(var a=t(i),s=a.length;s--;){var u=a[s],l=i[u];a[s]=[u,l,e(l)]}return a}return mm=n,mm}var hm,xq;function sI(){if(xq)return hm;xq=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return hm=e,hm}var ym,wq;function qF(){if(wq)return ym;wq=1;var e=wF(),t=bF(),n=sI();function i(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(u){return u===a||e(u,a,s)}}return ym=i,ym}var gm,bq;function La(){if(bq)return gm;bq=1;var e=Oo(),t=Qn(),n="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&e(a)==n}return gm=i,gm}var vm,qq;function Pg(){if(qq)return vm;qq=1;var e=Ft(),t=La(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,u){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:i.test(s)||!n.test(s)||u!=null&&s in Object(u)}return vm=a,vm}var xm,Sq;function SF(){if(Sq)return xm;Sq=1;var e=xg(),t="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var u=arguments,l=a?a.apply(this,u):u[0],d=s.cache;if(d.has(l))return d.get(l);var p=i.apply(this,u);return s.cache=d.set(l,p)||d,p};return s.cache=new(n.Cache||e),s}return n.Cache=e,xm=n,xm}var wm,Cq;function CF(){if(Cq)return wm;Cq=1;var e=SF(),t=500;function n(i){var a=e(i,function(u){return s.size===t&&s.clear(),u}),s=a.cache;return a}return wm=n,wm}var bm,kq;function kF(){if(kq)return bm;kq=1;var e=CF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(u,l,d,p){s.push(d?p.replace(n,"$1"):l||u)}),s});return bm=i,bm}var qm,Mq;function Pc(){if(Mq)return qm;Mq=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=n(t[i],i,t);return s}return qm=e,qm}var Sm,Eq;function MF(){if(Eq)return Sm;Eq=1;var e=Oa(),t=Pc(),n=Ft(),i=La(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function u(l){if(typeof l=="string")return l;if(n(l))return t(l,u)+"";if(i(l))return s?s.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Sm=u,Sm}var Cm,Iq;function uI(){if(Iq)return Cm;Iq=1;var e=MF();function t(n){return n==null?"":e(n)}return Cm=t,Cm}var km,Tq;function jc(){if(Tq)return km;Tq=1;var e=Ft(),t=Pg(),n=kF(),i=uI();function a(s,u){return e(s)?s:t(s,u)?[s]:n(i(s))}return km=a,km}var Mm,Nq;function uu(){if(Nq)return Mm;Nq=1;var e=La();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return Mm=t,Mm}var Em,Pq;function Rc(){if(Pq)return Em;Pq=1;var e=jc(),t=uu();function n(i,a){a=e(a,i);for(var s=0,u=a.length;i!=null&&s<u;)i=i[t(a[s++])];return s&&s==u?i:void 0}return Em=n,Em}var Im,jq;function EF(){if(jq)return Im;jq=1;var e=Rc();function t(n,i,a){var s=n==null?void 0:e(n,i);return s===void 0?a:s}return Im=t,Im}var Tm,Rq;function IF(){if(Rq)return Tm;Rq=1;function e(t,n){return t!=null&&n in Object(t)}return Tm=e,Tm}var Nm,Vq;function lI(){if(Vq)return Nm;Vq=1;var e=jc(),t=au(),n=Ft(),i=Mc(),a=bg(),s=uu();function u(l,d,p){d=e(d,l);for(var m=-1,_=d.length,h=!1;++m<_;){var g=s(d[m]);if(!(h=l!=null&&p(l,g)))break;l=l[g]}return h||++m!=_?h:(_=l==null?0:l.length,!!_&&a(_)&&i(g,_)&&(n(l)||t(l)))}return Nm=u,Nm}var Pm,Oq;function cI(){if(Oq)return Pm;Oq=1;var e=IF(),t=lI();function n(i,a){return i!=null&&t(i,a,e)}return Pm=n,Pm}var jm,Fq;function TF(){if(Fq)return jm;Fq=1;var e=oI(),t=EF(),n=cI(),i=Pg(),a=aI(),s=sI(),u=uu(),l=1,d=2;function p(m,_){return i(m)&&a(_)?s(u(m),_):function(h){var g=t(h,m);return g===void 0&&g===_?n(h,m):e(_,g,l|d)}}return jm=p,jm}var Rm,Aq;function dI(){if(Aq)return Rm;Aq=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Rm=e,Rm}var Vm,Lq;function NF(){if(Lq)return Vm;Lq=1;var e=Rc();function t(n){return function(i){return e(i,n)}}return Vm=t,Vm}var Om,Dq;function PF(){if(Dq)return Om;Dq=1;var e=dI(),t=NF(),n=Pg(),i=uu();function a(s){return n(s)?e(i(s)):t(s)}return Om=a,Om}var Fm,Bq;function xi(){if(Bq)return Fm;Bq=1;var e=qF(),t=TF(),n=Lo(),i=Ft(),a=PF();function s(u){return typeof u=="function"?u:u==null?n:typeof u=="object"?i(u)?t(u[0],u[1]):e(u):a(u)}return Fm=s,Fm}var Am,zq;function pI(){if(zq)return Am;zq=1;var e=zE(),t=fF(),n=xi(),i=Ft();function a(s,u){var l=i(s)?e:t;return l(s,n(u,3))}return Am=a,Am}var Lm,$q;function jF(){if($q)return Lm;$q=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i,a){return i!=null&&t.call(i,a)}return Lm=n,Lm}var Dm,Hq;function fI(){if(Hq)return Dm;Hq=1;var e=jF(),t=lI();function n(i,a){return i!=null&&t(i,a,e)}return Dm=n,Dm}var Bm,Wq;function RF(){if(Wq)return Bm;Wq=1;var e=Sg(),t=Aa(),n=au(),i=Ft(),a=vi(),s=Fa(),u=Ic(),l=su(),d="[object Map]",p="[object Set]",m=Object.prototype,_=m.hasOwnProperty;function h(g){if(g==null)return!0;if(a(g)&&(i(g)||typeof g=="string"||typeof g.splice=="function"||s(g)||l(g)||n(g)))return!g.length;var x=t(g);if(x==d||x==p)return!g.size;if(u(g))return!e(g).length;for(var q in g)if(_.call(g,q))return!1;return!0}return Bm=h,Bm}var zm,Uq;function _I(){if(Uq)return zm;Uq=1;function e(t){return t===void 0}return zm=e,zm}var $m,Gq;function mI(){if(Gq)return $m;Gq=1;var e=Nc(),t=vi();function n(i,a){var s=-1,u=t(i)?Array(i.length):[];return e(i,function(l,d,p){u[++s]=a(l,d,p)}),u}return $m=n,$m}var Hm,Kq;function hI(){if(Kq)return Hm;Kq=1;var e=Pc(),t=xi(),n=mI(),i=Ft();function a(s,u){var l=i(s)?e:n;return l(s,t(u,3))}return Hm=a,Hm}var Wm,Yq;function VF(){if(Yq)return Wm;Yq=1;function e(t,n,i,a){var s=-1,u=t==null?0:t.length;for(a&&u&&(i=t[++s]);++s<u;)i=n(i,t[s],s,t);return i}return Wm=e,Wm}var Um,Qq;function OF(){if(Qq)return Um;Qq=1;function e(t,n,i,a,s){return s(t,function(u,l,d){i=a?(a=!1,u):n(i,u,l,d)}),i}return Um=e,Um}var Gm,Xq;function yI(){if(Xq)return Gm;Xq=1;var e=VF(),t=Nc(),n=xi(),i=OF(),a=Ft();function s(u,l,d){var p=a(u)?e:i,m=arguments.length<3;return p(u,n(l,4),d,m,t)}return Gm=s,Gm}var Km,Zq;function FF(){if(Zq)return Km;Zq=1;var e=Oo(),t=Ft(),n=Qn(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==i}return Km=a,Km}var Ym,Jq;function AF(){if(Jq)return Ym;Jq=1;var e=dI(),t=e("length");return Ym=t,Ym}var Qm,eS;function LF(){if(eS)return Qm;eS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="\\u200d",l=RegExp("["+u+e+a+s+"]");function d(p){return l.test(p)}return Qm=d,Qm}var Xm,tS;function DF(){if(tS)return Xm;tS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",u="["+e+"]",l="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+d+")",m="[^"+e+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",x=p+"?",q="["+s+"]?",w="(?:"+g+"(?:"+[m,_,h].join("|")+")"+q+x+")*",b=q+x+w,k="(?:"+[m+l+"?",l,_,h,u].join("|")+")",S=RegExp(d+"(?="+d+")|"+k+b,"g");function M(I){for(var E=S.lastIndex=0;S.test(I);)++E;return E}return Xm=M,Xm}var Zm,rS;function BF(){if(rS)return Zm;rS=1;var e=AF(),t=LF(),n=DF();function i(a){return t(a)?n(a):e(a)}return Zm=i,Zm}var Jm,nS;function zF(){if(nS)return Jm;nS=1;var e=Sg(),t=Aa(),n=vi(),i=FF(),a=BF(),s="[object Map]",u="[object Set]";function l(d){if(d==null)return 0;if(n(d))return i(d)?a(d):d.length;var p=t(d);return p==s||p==u?d.size:e(d).length}return Jm=l,Jm}var eh,iS;function $F(){if(iS)return eh;iS=1;var e=wg(),t=QE(),n=Tg(),i=xi(),a=Tc(),s=Ft(),u=Fa(),l=iu(),d=sn(),p=su();function m(_,h,g){var x=s(_),q=x||u(_)||p(_);if(h=i(h,4),g==null){var w=_&&_.constructor;q?g=x?new w:[]:d(_)?g=l(w)?t(a(_)):{}:g={}}return(q?e:n)(_,function(b,k,S){return h(g,b,k,S)}),g}return eh=m,eh}var th,oS;function HF(){if(oS)return th;oS=1;var e=Oa(),t=au(),n=Ft(),i=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(i&&s&&s[i])}return th=a,th}var rh,aS;function jg(){if(aS)return rh;aS=1;var e=kg(),t=HF();function n(i,a,s,u,l){var d=-1,p=i.length;for(s||(s=t),l||(l=[]);++d<p;){var m=i[d];a>0&&s(m)?a>1?n(m,a-1,s,u,l):e(l,m):u||(l[l.length]=m)}return l}return rh=n,rh}var nh,sS;function WF(){if(sS)return nh;sS=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return nh=e,nh}var ih,uS;function gI(){if(uS)return ih;uS=1;var e=WF(),t=Math.max;function n(i,a,s){return a=t(a===void 0?i.length-1:a,0),function(){for(var u=arguments,l=-1,d=t(u.length-a,0),p=Array(d);++l<d;)p[l]=u[a+l];l=-1;for(var m=Array(a+1);++l<a;)m[l]=u[l];return m[a]=s(p),e(i,this,m)}}return ih=n,ih}var oh,lS;function UF(){if(lS)return oh;lS=1;var e=Eg(),t=FE(),n=Lo(),i=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return oh=i,oh}var ah,cS;function GF(){if(cS)return ah;cS=1;var e=800,t=16,n=Date.now;function i(a){var s=0,u=0;return function(){var l=n(),d=t-(l-u);if(u=l,d>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return ah=i,ah}var sh,dS;function vI(){if(dS)return sh;dS=1;var e=UF(),t=GF(),n=t(e);return sh=n,sh}var uh,pS;function Vc(){if(pS)return uh;pS=1;var e=Lo(),t=gI(),n=vI();function i(a,s){return n(t(a,s,e),a+"")}return uh=i,uh}var lh,fS;function xI(){if(fS)return lh;fS=1;function e(t,n,i,a){for(var s=t.length,u=i+(a?1:-1);a?u--:++u<s;)if(n(t[u],u,t))return u;return-1}return lh=e,lh}var ch,_S;function KF(){if(_S)return ch;_S=1;function e(t){return t!==t}return ch=e,ch}var dh,mS;function YF(){if(mS)return dh;mS=1;function e(t,n,i){for(var a=i-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return dh=e,dh}var ph,hS;function QF(){if(hS)return ph;hS=1;var e=xI(),t=KF(),n=YF();function i(a,s,u){return s===s?n(a,s,u):e(a,t,u)}return ph=i,ph}var fh,yS;function XF(){if(yS)return fh;yS=1;var e=QF();function t(n,i){var a=n==null?0:n.length;return!!a&&e(n,i,0)>-1}return fh=t,fh}var _h,gS;function ZF(){if(gS)return _h;gS=1;function e(t,n,i){for(var a=-1,s=t==null?0:t.length;++a<s;)if(i(n,t[a]))return!0;return!1}return _h=e,_h}var mh,vS;function JF(){if(vS)return mh;vS=1;function e(){}return mh=e,mh}var hh,xS;function eA(){if(xS)return hh;xS=1;var e=GE(),t=JF(),n=Ng(),i=1/0,a=e&&1/n(new e([,-0]))[1]==i?function(s){return new e(s)}:t;return hh=a,hh}var yh,wS;function tA(){if(wS)return yh;wS=1;var e=rI(),t=XF(),n=ZF(),i=nI(),a=eA(),s=Ng(),u=200;function l(d,p,m){var _=-1,h=t,g=d.length,x=!0,q=[],w=q;if(m)x=!1,h=n;else if(g>=u){var b=p?null:a(d);if(b)return s(b);x=!1,h=i,w=new e}else w=p?[]:q;e:for(;++_<g;){var k=d[_],S=p?p(k):k;if(k=m||k!==0?k:0,x&&S===S){for(var M=w.length;M--;)if(w[M]===S)continue e;p&&w.push(S),q.push(k)}else h(w,S,m)||(w!==q&&w.push(S),q.push(k))}return q}return yh=l,yh}var gh,bS;function wI(){if(bS)return gh;bS=1;var e=vi(),t=Qn();function n(i){return t(i)&&e(i)}return gh=n,gh}var vh,qS;function rA(){if(qS)return vh;qS=1;var e=jg(),t=Vc(),n=tA(),i=wI(),a=t(function(s){return n(e(s,1,i,!0))});return vh=a,vh}var xh,SS;function nA(){if(SS)return xh;SS=1;var e=Pc();function t(n,i){return e(i,function(a){return n[a]})}return xh=t,xh}var wh,CS;function bI(){if(CS)return wh;CS=1;var e=nA(),t=Qi();function n(i){return i==null?[]:e(i,t(i))}return wh=n,wh}var bh,kS;function un(){if(kS)return bh;kS=1;var e;if(typeof gg=="function")try{e={clone:cF(),constant:Eg(),each:tI(),filter:pI(),has:fI(),isArray:Ft(),isEmpty:RF(),isFunction:iu(),isUndefined:_I(),keys:Qi(),map:hI(),reduce:yI(),size:zF(),transform:$F(),union:rA(),values:bI()}}catch{}return e||(e=window._),bh=e,bh}var qh,MS;function Rg(){if(MS)return qh;MS=1;var e=un();qh=a;var t="\0",n="\0",i="";function a(m){this._isDirected=e.has(m,"directed")?m.directed:!0,this._isMultigraph=e.has(m,"multigraph")?m.multigraph:!1,this._isCompound=e.has(m,"compound")?m.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(m){return this._label=m,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultNodeLabelFn=m,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return e.keys(this._nodes)},a.prototype.sources=function(){var m=this;return e.filter(this.nodes(),function(_){return e.isEmpty(m._in[_])})},a.prototype.sinks=function(){var m=this;return e.filter(this.nodes(),function(_){return e.isEmpty(m._out[_])})},a.prototype.setNodes=function(m,_){var h=arguments,g=this;return e.each(m,function(x){h.length>1?g.setNode(x,_):g.setNode(x)}),this},a.prototype.setNode=function(m,_){return e.has(this._nodes,m)?(arguments.length>1&&(this._nodes[m]=_),this):(this._nodes[m]=arguments.length>1?_:this._defaultNodeLabelFn(m),this._isCompound&&(this._parent[m]=n,this._children[m]={},this._children[n][m]=!0),this._in[m]={},this._preds[m]={},this._out[m]={},this._sucs[m]={},++this._nodeCount,this)},a.prototype.node=function(m){return this._nodes[m]},a.prototype.hasNode=function(m){return e.has(this._nodes,m)},a.prototype.removeNode=function(m){var _=this;if(e.has(this._nodes,m)){var h=function(g){_.removeEdge(_._edgeObjs[g])};delete this._nodes[m],this._isCompound&&(this._removeFromParentsChildList(m),delete this._parent[m],e.each(this.children(m),function(g){_.setParent(g)}),delete this._children[m]),e.each(e.keys(this._in[m]),h),delete this._in[m],delete this._preds[m],e.each(e.keys(this._out[m]),h),delete this._out[m],delete this._sucs[m],--this._nodeCount}return this},a.prototype.setParent=function(m,_){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(_))_=n;else{_+="";for(var h=_;!e.isUndefined(h);h=this.parent(h))if(h===m)throw new Error("Setting "+_+" as parent of "+m+" would create a cycle");this.setNode(_)}return this.setNode(m),this._removeFromParentsChildList(m),this._parent[m]=_,this._children[_][m]=!0,this},a.prototype._removeFromParentsChildList=function(m){delete this._children[this._parent[m]][m]},a.prototype.parent=function(m){if(this._isCompound){var _=this._parent[m];if(_!==n)return _}},a.prototype.children=function(m){if(e.isUndefined(m)&&(m=n),this._isCompound){var _=this._children[m];if(_)return e.keys(_)}else{if(m===n)return this.nodes();if(this.hasNode(m))return[]}},a.prototype.predecessors=function(m){var _=this._preds[m];if(_)return e.keys(_)},a.prototype.successors=function(m){var _=this._sucs[m];if(_)return e.keys(_)},a.prototype.neighbors=function(m){var _=this.predecessors(m);if(_)return e.union(_,this.successors(m))},a.prototype.isLeaf=function(m){var _;return this.isDirected()?_=this.successors(m):_=this.neighbors(m),_.length===0},a.prototype.filterNodes=function(m){var _=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});_.setGraph(this.graph());var h=this;e.each(this._nodes,function(q,w){m(w)&&_.setNode(w,q)}),e.each(this._edgeObjs,function(q){_.hasNode(q.v)&&_.hasNode(q.w)&&_.setEdge(q,h.edge(q))});var g={};function x(q){var w=h.parent(q);return w===void 0||_.hasNode(w)?(g[q]=w,w):w in g?g[w]:x(w)}return this._isCompound&&e.each(_.nodes(),function(q){_.setParent(q,x(q))}),_},a.prototype.setDefaultEdgeLabel=function(m){return e.isFunction(m)||(m=e.constant(m)),this._defaultEdgeLabelFn=m,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return e.values(this._edgeObjs)},a.prototype.setPath=function(m,_){var h=this,g=arguments;return e.reduce(m,function(x,q){return g.length>1?h.setEdge(x,q,_):h.setEdge(x,q),q}),this},a.prototype.setEdge=function(){var m,_,h,g,x=!1,q=arguments[0];typeof q=="object"&&q!==null&&"v"in q?(m=q.v,_=q.w,h=q.name,arguments.length===2&&(g=arguments[1],x=!0)):(m=q,_=arguments[1],h=arguments[3],arguments.length>2&&(g=arguments[2],x=!0)),m=""+m,_=""+_,e.isUndefined(h)||(h=""+h);var w=l(this._isDirected,m,_,h);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=g),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(m),this.setNode(_),this._edgeLabels[w]=x?g:this._defaultEdgeLabelFn(m,_,h);var b=d(this._isDirected,m,_,h);return m=b.v,_=b.w,Object.freeze(b),this._edgeObjs[w]=b,s(this._preds[_],m),s(this._sucs[m],_),this._in[_][w]=b,this._out[m][w]=b,this._edgeCount++,this},a.prototype.edge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h);return this._edgeLabels[g]},a.prototype.hasEdge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h);return e.has(this._edgeLabels,g)},a.prototype.removeEdge=function(m,_,h){var g=arguments.length===1?p(this._isDirected,arguments[0]):l(this._isDirected,m,_,h),x=this._edgeObjs[g];return x&&(m=x.v,_=x.w,delete this._edgeLabels[g],delete this._edgeObjs[g],u(this._preds[_],m),u(this._sucs[m],_),delete this._in[_][g],delete this._out[m][g],this._edgeCount--),this},a.prototype.inEdges=function(m,_){var h=this._in[m];if(h){var g=e.values(h);return _?e.filter(g,function(x){return x.v===_}):g}},a.prototype.outEdges=function(m,_){var h=this._out[m];if(h){var g=e.values(h);return _?e.filter(g,function(x){return x.w===_}):g}},a.prototype.nodeEdges=function(m,_){var h=this.inEdges(m,_);if(h)return h.concat(this.outEdges(m,_))};function s(m,_){m[_]?m[_]++:m[_]=1}function u(m,_){--m[_]||delete m[_]}function l(m,_,h,g){var x=""+_,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}return x+i+q+i+(e.isUndefined(g)?t:g)}function d(m,_,h,g){var x=""+_,q=""+h;if(!m&&x>q){var w=x;x=q,q=w}var b={v:x,w:q};return g&&(b.name=g),b}function p(m,_){return l(m,_.v,_.w,_.name)}return qh}var Sh,ES;function iA(){return ES||(ES=1,Sh="2.1.8"),Sh}var Ch,IS;function oA(){return IS||(IS=1,Ch={Graph:Rg(),version:iA()}),Ch}var kh,TS;function aA(){if(TS)return kh;TS=1;var e=un(),t=Rg();kh={write:n,read:s};function n(u){var l={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:i(u),edges:a(u)};return e.isUndefined(u.graph())||(l.value=e.clone(u.graph())),l}function i(u){return e.map(u.nodes(),function(l){var d=u.node(l),p=u.parent(l),m={v:l};return e.isUndefined(d)||(m.value=d),e.isUndefined(p)||(m.parent=p),m})}function a(u){return e.map(u.edges(),function(l){var d=u.edge(l),p={v:l.v,w:l.w};return e.isUndefined(l.name)||(p.name=l.name),e.isUndefined(d)||(p.value=d),p})}function s(u){var l=new t(u.options).setGraph(u.value);return e.each(u.nodes,function(d){l.setNode(d.v,d.value),d.parent&&l.setParent(d.v,d.parent)}),e.each(u.edges,function(d){l.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),l}return kh}var Mh,NS;function sA(){if(NS)return Mh;NS=1;var e=un();Mh=t;function t(n){var i={},a=[],s;function u(l){e.has(i,l)||(i[l]=!0,s.push(l),e.each(n.successors(l),u),e.each(n.predecessors(l),u))}return e.each(n.nodes(),function(l){s=[],u(l),s.length&&a.push(s)}),a}return Mh}var Eh,PS;function qI(){if(PS)return Eh;PS=1;var e=un();Eh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,i){var a=this._keyIndices;if(n=String(n),!e.has(a,n)){var s=this._arr,u=s.length;return a[n]=u,s.push({key:n,priority:i}),this._decrease(u),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,i){var a=this._keyIndices[n];if(i>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[a].priority+" New: "+i);this._arr[a].priority=i,this._decrease(a)},t.prototype._heapify=function(n){var i=this._arr,a=2*n,s=a+1,u=n;a<i.length&&(u=i[a].priority<i[u].priority?a:u,s<i.length&&(u=i[s].priority<i[u].priority?s:u),u!==n&&(this._swap(n,u),this._heapify(u)))},t.prototype._decrease=function(n){for(var i=this._arr,a=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<a));)this._swap(n,s),n=s},t.prototype._swap=function(n,i){var a=this._arr,s=this._keyIndices,u=a[n],l=a[i];a[n]=l,a[i]=u,s[l.key]=n,s[u.key]=i},Eh}var Ih,jS;function SI(){if(jS)return Ih;jS=1;var e=un(),t=qI();Ih=i;var n=e.constant(1);function i(s,u,l,d){return a(s,String(u),l||n,d||function(p){return s.outEdges(p)})}function a(s,u,l,d){var p={},m=new t,_,h,g=function(x){var q=x.v!==_?x.v:x.w,w=p[q],b=l(x),k=h.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+b);k<w.distance&&(w.distance=k,w.predecessor=_,m.decrease(q,k))};for(s.nodes().forEach(function(x){var q=x===u?0:Number.POSITIVE_INFINITY;p[x]={distance:q},m.add(x,q)});m.size()>0&&(_=m.removeMin(),h=p[_],h.distance!==Number.POSITIVE_INFINITY);)d(_).forEach(g);return p}return Ih}var Th,RS;function uA(){if(RS)return Th;RS=1;var e=SI(),t=un();Th=n;function n(i,a,s){return t.transform(i.nodes(),function(u,l){u[l]=e(i,l,a,s)},{})}return Th}var Nh,VS;function CI(){if(VS)return Nh;VS=1;var e=un();Nh=t;function t(n){var i=0,a=[],s={},u=[];function l(d){var p=s[d]={onStack:!0,lowlink:i,index:i++};if(a.push(d),n.successors(d).forEach(function(h){e.has(s,h)?s[h].onStack&&(p.lowlink=Math.min(p.lowlink,s[h].index)):(l(h),p.lowlink=Math.min(p.lowlink,s[h].lowlink))}),p.lowlink===p.index){var m=[],_;do _=a.pop(),s[_].onStack=!1,m.push(_);while(d!==_);u.push(m)}}return n.nodes().forEach(function(d){e.has(s,d)||l(d)}),u}return Nh}var Ph,OS;function lA(){if(OS)return Ph;OS=1;var e=un(),t=CI();Ph=n;function n(i){return e.filter(t(i),function(a){return a.length>1||a.length===1&&i.hasEdge(a[0],a[0])})}return Ph}var jh,FS;function cA(){if(FS)return jh;FS=1;var e=un();jh=n;var t=e.constant(1);function n(a,s,u){return i(a,s||t,u||function(l){return a.outEdges(l)})}function i(a,s,u){var l={},d=a.nodes();return d.forEach(function(p){l[p]={},l[p][p]={distance:0},d.forEach(function(m){p!==m&&(l[p][m]={distance:Number.POSITIVE_INFINITY})}),u(p).forEach(function(m){var _=m.v===p?m.w:m.v,h=s(m);l[p][_]={distance:h,predecessor:p}})}),d.forEach(function(p){var m=l[p];d.forEach(function(_){var h=l[_];d.forEach(function(g){var x=h[p],q=m[g],w=h[g],b=x.distance+q.distance;b<w.distance&&(w.distance=b,w.predecessor=q.predecessor)})})}),l}return jh}var Rh,AS;function kI(){if(AS)return Rh;AS=1;var e=un();Rh=t,t.CycleException=n;function t(i){var a={},s={},u=[];function l(d){if(e.has(s,d))throw new n;e.has(a,d)||(s[d]=!0,a[d]=!0,e.each(i.predecessors(d),l),delete s[d],u.push(d))}if(e.each(i.sinks(),l),e.size(a)!==i.nodeCount())throw new n;return u}function n(){}return n.prototype=new Error,Rh}var Vh,LS;function dA(){if(LS)return Vh;LS=1;var e=kI();Vh=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Vh}var Oh,DS;function MI(){if(DS)return Oh;DS=1;var e=un();Oh=t;function t(i,a,s){e.isArray(a)||(a=[a]);var u=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],d={};return e.each(a,function(p){if(!i.hasNode(p))throw new Error("Graph does not have node: "+p);n(i,p,s==="post",d,u,l)}),l}function n(i,a,s,u,l,d){e.has(u,a)||(u[a]=!0,s||d.push(a),e.each(l(a),function(p){n(i,p,s,u,l,d)}),s&&d.push(a))}return Oh}var Fh,BS;function pA(){if(BS)return Fh;BS=1;var e=MI();Fh=t;function t(n,i){return e(n,i,"post")}return Fh}var Ah,zS;function fA(){if(zS)return Ah;zS=1;var e=MI();Ah=t;function t(n,i){return e(n,i,"pre")}return Ah}var Lh,$S;function _A(){if($S)return Lh;$S=1;var e=un(),t=Rg(),n=qI();Lh=i;function i(a,s){var u=new t,l={},d=new n,p;function m(h){var g=h.v===p?h.w:h.v,x=d.priority(g);if(x!==void 0){var q=s(h);q<x&&(l[g]=p,d.decrease(g,q))}}if(a.nodeCount()===0)return u;e.each(a.nodes(),function(h){d.add(h,Number.POSITIVE_INFINITY),u.setNode(h)}),d.decrease(a.nodes()[0],0);for(var _=!1;d.size()>0;){if(p=d.removeMin(),e.has(l,p))u.setEdge(p,l[p]);else{if(_)throw new Error("Input graph is not connected: "+a);_=!0}a.nodeEdges(p).forEach(m)}return u}return Lh}var Dh,HS;function mA(){return HS||(HS=1,Dh={components:sA(),dijkstra:SI(),dijkstraAll:uA(),findCycles:lA(),floydWarshall:cA(),isAcyclic:dA(),postorder:pA(),preorder:fA(),prim:_A(),tarjan:CI(),topsort:kI()}),Dh}var Bh,WS;function hA(){if(WS)return Bh;WS=1;var e=oA();return Bh={Graph:e.Graph,json:aA(),alg:mA(),version:e.version},Bh}var zh,US;function Pn(){if(US)return zh;US=1;var e;if(typeof gg=="function")try{e=hA()}catch{}return e||(e=window.graphlib),zh=e,zh}var $h,GS;function yA(){if(GS)return $h;GS=1;var e=ZE(),t=1,n=4;function i(a){return e(a,t|n)}return $h=i,$h}var Hh,KS;function Oc(){if(KS)return Hh;KS=1;var e=Va(),t=vi(),n=Mc(),i=sn();function a(s,u,l){if(!i(l))return!1;var d=typeof u;return(d=="number"?t(l)&&n(u,l.length):d=="string"&&u in l)?e(l[u],s):!1}return Hh=a,Hh}var Wh,YS;function gA(){if(YS)return Wh;YS=1;var e=Vc(),t=Va(),n=Oc(),i=Ao(),a=Object.prototype,s=a.hasOwnProperty,u=e(function(l,d){l=Object(l);var p=-1,m=d.length,_=m>2?d[2]:void 0;for(_&&n(d[0],d[1],_)&&(m=1);++p<m;)for(var h=d[p],g=i(h),x=-1,q=g.length;++x<q;){var w=g[x],b=l[w];(b===void 0||t(b,a[w])&&!s.call(l,w))&&(l[w]=h[w])}return l});return Wh=u,Wh}var Uh,QS;function vA(){if(QS)return Uh;QS=1;var e=xi(),t=vi(),n=Qi();function i(a){return function(s,u,l){var d=Object(s);if(!t(s)){var p=e(u,3);s=n(s),u=function(_){return p(d[_],_,d)}}var m=a(s,u,l);return m>-1?d[p?s[m]:m]:void 0}}return Uh=i,Uh}var Gh,XS;function xA(){if(XS)return Gh;XS=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return Gh=t,Gh}var Kh,ZS;function wA(){if(ZS)return Kh;ZS=1;var e=xA(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return Kh=n,Kh}var Yh,JS;function bA(){if(JS)return Yh;JS=1;var e=wA(),t=sn(),n=La(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return i;if(t(p)){var m=typeof p.valueOf=="function"?p.valueOf():p;p=t(m)?m+"":m}if(typeof p!="string")return p===0?p:+p;p=e(p);var _=s.test(p);return _||u.test(p)?l(p.slice(2),_?2:8):a.test(p)?i:+p}return Yh=d,Yh}var Qh,eC;function EI(){if(eC)return Qh;eC=1;var e=bA(),t=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-t){var s=a<0?-1:1;return s*n}return a===a?a:0}return Qh=i,Qh}var Xh,tC;function qA(){if(tC)return Xh;tC=1;var e=EI();function t(n){var i=e(n),a=i%1;return i===i?a?i-a:i:0}return Xh=t,Xh}var Zh,rC;function SA(){if(rC)return Zh;rC=1;var e=xI(),t=xi(),n=qA(),i=Math.max;function a(s,u,l){var d=s==null?0:s.length;if(!d)return-1;var p=l==null?0:n(l);return p<0&&(p=i(d+p,0)),e(s,t(u,3),p)}return Zh=a,Zh}var Jh,nC;function CA(){if(nC)return Jh;nC=1;var e=vA(),t=SA(),n=e(t);return Jh=n,Jh}var ey,iC;function II(){if(iC)return ey;iC=1;var e=jg();function t(n){var i=n==null?0:n.length;return i?e(n,1):[]}return ey=t,ey}var ty,oC;function kA(){if(oC)return ty;oC=1;var e=Ig(),t=JE(),n=Ao();function i(a,s){return a==null?a:e(a,t(s),n)}return ty=i,ty}var ry,aC;function MA(){if(aC)return ry;aC=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ry=e,ry}var ny,sC;function EA(){if(sC)return ny;sC=1;var e=Cc(),t=Tg(),n=xi();function i(a,s){var u={};return s=n(s,3),t(a,function(l,d,p){e(u,d,s(l,d,p))}),u}return ny=i,ny}var iy,uC;function Vg(){if(uC)return iy;uC=1;var e=La();function t(n,i,a){for(var s=-1,u=n.length;++s<u;){var l=n[s],d=i(l);if(d!=null&&(p===void 0?d===d&&!e(d):a(d,p)))var p=d,m=l}return m}return iy=t,iy}var oy,lC;function IA(){if(lC)return oy;lC=1;function e(t,n){return t>n}return oy=e,oy}var ay,cC;function TA(){if(cC)return ay;cC=1;var e=Vg(),t=IA(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return ay=i,ay}var sy,dC;function TI(){if(dC)return sy;dC=1;var e=Cc(),t=Va();function n(i,a,s){(s!==void 0&&!t(i[a],s)||s===void 0&&!(a in i))&&e(i,a,s)}return sy=n,sy}var uy,pC;function NA(){if(pC)return uy;pC=1;var e=Oo(),t=Tc(),n=Qn(),i="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,d=u.call(Object);function p(m){if(!n(m)||e(m)!=i)return!1;var _=t(m);if(_===null)return!0;var h=l.call(_,"constructor")&&_.constructor;return typeof h=="function"&&h instanceof h&&u.call(h)==d}return uy=p,uy}var ly,fC;function NI(){if(fC)return ly;fC=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return ly=e,ly}var cy,_C;function PA(){if(_C)return cy;_C=1;var e=ou(),t=Ao();function n(i){return e(i,t(i))}return cy=n,cy}var dy,mC;function jA(){if(mC)return dy;mC=1;var e=TI(),t=DE(),n=YE(),i=BE(),a=XE(),s=au(),u=Ft(),l=wI(),d=Fa(),p=iu(),m=sn(),_=NA(),h=su(),g=NI(),x=PA();function q(w,b,k,S,M,I,E){var T=g(w,k),P=g(b,k),j=E.get(P);if(j){e(w,k,j);return}var D=I?I(T,P,k+"",w,b,E):void 0,O=D===void 0;if(O){var F=u(P),X=!F&&d(P),V=!F&&!X&&h(P);D=P,F||X||V?u(T)?D=T:l(T)?D=i(T):X?(O=!1,D=t(P,!0)):V?(O=!1,D=n(P,!0)):D=[]:_(P)||s(P)?(D=T,s(T)?D=x(T):(!m(T)||p(T))&&(D=a(P))):O=!1}O&&(E.set(P,D),M(D,P,S,I,E),E.delete(P)),e(w,k,D)}return dy=q,dy}var py,hC;function RA(){if(hC)return py;hC=1;var e=Sc(),t=TI(),n=Ig(),i=jA(),a=sn(),s=Ao(),u=NI();function l(d,p,m,_,h){d!==p&&n(p,function(g,x){if(h||(h=new e),a(g))i(d,p,x,m,l,_,h);else{var q=_?_(u(d,x),g,x+"",d,p,h):void 0;q===void 0&&(q=g),t(d,x,q)}},s)}return py=l,py}var fy,yC;function VA(){if(yC)return fy;yC=1;var e=Vc(),t=Oc();function n(i){return e(function(a,s){var u=-1,l=s.length,d=l>1?s[l-1]:void 0,p=l>2?s[2]:void 0;for(d=i.length>3&&typeof d=="function"?(l--,d):void 0,p&&t(s[0],s[1],p)&&(d=l<3?void 0:d,l=1),a=Object(a);++u<l;){var m=s[u];m&&i(a,m,u,d)}return a})}return fy=n,fy}var _y,gC;function OA(){if(gC)return _y;gC=1;var e=RA(),t=VA(),n=t(function(i,a,s){e(i,a,s)});return _y=n,_y}var my,vC;function PI(){if(vC)return my;vC=1;function e(t,n){return t<n}return my=e,my}var hy,xC;function FA(){if(xC)return hy;xC=1;var e=Vg(),t=PI(),n=Lo();function i(a){return a&&a.length?e(a,n,t):void 0}return hy=i,hy}var yy,wC;function AA(){if(wC)return yy;wC=1;var e=Vg(),t=xi(),n=PI();function i(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return yy=i,yy}var gy,bC;function LA(){if(bC)return gy;bC=1;var e=Rn(),t=function(){return e.Date.now()};return gy=t,gy}var vy,qC;function DA(){if(qC)return vy;qC=1;var e=kc(),t=jc(),n=Mc(),i=sn(),a=uu();function s(u,l,d,p){if(!i(u))return u;l=t(l,u);for(var m=-1,_=l.length,h=_-1,g=u;g!=null&&++m<_;){var x=a(l[m]),q=d;if(x==="__proto__"||x==="constructor"||x==="prototype")return u;if(m!=h){var w=g[x];q=p?p(w,x,g):void 0,q===void 0&&(q=i(w)?w:n(l[m+1])?[]:{})}e(g,x,q),g=g[x]}return u}return vy=s,vy}var xy,SC;function BA(){if(SC)return xy;SC=1;var e=Rc(),t=DA(),n=jc();function i(a,s,u){for(var l=-1,d=s.length,p={};++l<d;){var m=s[l],_=e(a,m);u(_,m)&&t(p,n(m,a),_)}return p}return xy=i,xy}var wy,CC;function zA(){if(CC)return wy;CC=1;var e=BA(),t=cI();function n(i,a){return e(i,a,function(s,u){return t(i,u)})}return wy=n,wy}var by,kC;function $A(){if(kC)return by;kC=1;var e=II(),t=gI(),n=vI();function i(a){return n(t(a,void 0,e),a+"")}return by=i,by}var qy,MC;function HA(){if(MC)return qy;MC=1;var e=zA(),t=$A(),n=t(function(i,a){return i==null?{}:e(i,a)});return qy=n,qy}var Sy,EC;function WA(){if(EC)return Sy;EC=1;var e=Math.ceil,t=Math.max;function n(i,a,s,u){for(var l=-1,d=t(e((a-i)/(s||1)),0),p=Array(d);d--;)p[u?d:++l]=i,i+=s;return p}return Sy=n,Sy}var Cy,IC;function UA(){if(IC)return Cy;IC=1;var e=WA(),t=Oc(),n=EI();function i(a){return function(s,u,l){return l&&typeof l!="number"&&t(s,u,l)&&(u=l=void 0),s=n(s),u===void 0?(u=s,s=0):u=n(u),l=l===void 0?s<u?1:-1:n(l),e(s,u,l,a)}}return Cy=i,Cy}var ky,TC;function GA(){if(TC)return ky;TC=1;var e=UA(),t=e();return ky=t,ky}var My,NC;function KA(){if(NC)return My;NC=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return My=e,My}var Ey,PC;function YA(){if(PC)return Ey;PC=1;var e=La();function t(n,i){if(n!==i){var a=n!==void 0,s=n===null,u=n===n,l=e(n),d=i!==void 0,p=i===null,m=i===i,_=e(i);if(!p&&!_&&!l&&n>i||l&&d&&m&&!p&&!_||s&&d&&m||!a&&m||!u)return 1;if(!s&&!l&&!_&&n<i||_&&a&&u&&!s&&!l||p&&a&&u||!d&&u||!m)return-1}return 0}return Ey=t,Ey}var Iy,jC;function QA(){if(jC)return Iy;jC=1;var e=YA();function t(n,i,a){for(var s=-1,u=n.criteria,l=i.criteria,d=u.length,p=a.length;++s<d;){var m=e(u[s],l[s]);if(m){if(s>=p)return m;var _=a[s];return m*(_=="desc"?-1:1)}}return n.index-i.index}return Iy=t,Iy}var Ty,RC;function XA(){if(RC)return Ty;RC=1;var e=Pc(),t=Rc(),n=xi(),i=mI(),a=KA(),s=Ec(),u=QA(),l=Lo(),d=Ft();function p(m,_,h){_.length?_=e(_,function(q){return d(q)?function(w){return t(w,q.length===1?q[0]:q)}:q}):_=[l];var g=-1;_=e(_,s(n));var x=i(m,function(q,w,b){var k=e(_,function(S){return S(q)});return{criteria:k,index:++g,value:q}});return a(x,function(q,w){return u(q,w,h)})}return Ty=p,Ty}var Ny,VC;function ZA(){if(VC)return Ny;VC=1;var e=jg(),t=XA(),n=Vc(),i=Oc(),a=n(function(s,u){if(s==null)return[];var l=u.length;return l>1&&i(s,u[0],u[1])?u=[]:l>2&&i(u[0],u[1],u[2])&&(u=[u[0]]),t(s,e(u,1),[])});return Ny=a,Ny}var Py,OC;function JA(){if(OC)return Py;OC=1;var e=uI(),t=0;function n(i){var a=++t;return e(i)+a}return Py=n,Py}var jy,FC;function eL(){if(FC)return jy;FC=1;function e(t,n,i){for(var a=-1,s=t.length,u=n.length,l={};++a<s;){var d=a<u?n[a]:void 0;i(l,t[a],d)}return l}return jy=e,jy}var Ry,AC;function tL(){if(AC)return Ry;AC=1;var e=kc(),t=eL();function n(i,a){return t(i||[],a||[],e)}return Ry=n,Ry}var Vy,LC;function Ct(){if(LC)return Vy;LC=1;var e;if(typeof gg=="function")try{e={cloneDeep:yA(),constant:Eg(),defaults:gA(),each:tI(),filter:pI(),find:CA(),flatten:II(),forEach:eI(),forIn:kA(),has:fI(),isUndefined:_I(),last:MA(),map:hI(),mapValues:EA(),max:TA(),merge:OA(),min:FA(),minBy:AA(),now:LA(),pick:HA(),range:GA(),reduce:yI(),sortBy:ZA(),uniqueId:JA(),values:bI(),zipObject:tL()}}catch{}return e||(e=window._),Vy=e,Vy}var Oy,DC;function rL(){if(DC)return Oy;DC=1,Oy=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,a=i._prev;if(a!==i)return t(a),a},e.prototype.enqueue=function(i){var a=this._sentinel;i._prev&&i._next&&t(i),i._next=a._next,a._next._prev=i,a._next=i,i._prev=a},e.prototype.toString=function(){for(var i=[],a=this._sentinel,s=a._prev;s!==a;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"};function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,a){if(i!=="_next"&&i!=="_prev")return a}return Oy}var Fy,BC;function nL(){if(BC)return Fy;BC=1;var e=Ct(),t=Pn().Graph,n=rL();Fy=a;var i=e.constant(1);function a(p,m){if(p.nodeCount()<=1)return[];var _=l(p,m||i),h=s(_.graph,_.buckets,_.zeroIdx);return e.flatten(e.map(h,function(g){return p.outEdges(g.v,g.w)}),!0)}function s(p,m,_){for(var h=[],g=m[m.length-1],x=m[0],q;p.nodeCount();){for(;q=x.dequeue();)u(p,m,_,q);for(;q=g.dequeue();)u(p,m,_,q);if(p.nodeCount()){for(var w=m.length-2;w>0;--w)if(q=m[w].dequeue(),q){h=h.concat(u(p,m,_,q,!0));break}}}return h}function u(p,m,_,h,g){var x=g?[]:void 0;return e.forEach(p.inEdges(h.v),function(q){var w=p.edge(q),b=p.node(q.v);g&&x.push({v:q.v,w:q.w}),b.out-=w,d(m,_,b)}),e.forEach(p.outEdges(h.v),function(q){var w=p.edge(q),b=q.w,k=p.node(b);k.in-=w,d(m,_,k)}),p.removeNode(h.v),x}function l(p,m){var _=new t,h=0,g=0;e.forEach(p.nodes(),function(w){_.setNode(w,{v:w,in:0,out:0})}),e.forEach(p.edges(),function(w){var b=_.edge(w.v,w.w)||0,k=m(w),S=b+k;_.setEdge(w.v,w.w,S),g=Math.max(g,_.node(w.v).out+=k),h=Math.max(h,_.node(w.w).in+=k)});var x=e.range(g+h+3).map(function(){return new n}),q=h+1;return e.forEach(_.nodes(),function(w){d(x,q,_.node(w))}),{graph:_,buckets:x,zeroIdx:q}}function d(p,m,_){_.out?_.in?p[_.out-_.in+m].enqueue(_):p[p.length-1].enqueue(_):p[0].enqueue(_)}return Fy}var Ay,zC;function iL(){if(zC)return Ay;zC=1;var e=Ct(),t=nL();Ay={run:n,undo:a};function n(s){var u=s.graph().acyclicer==="greedy"?t(s,l(s)):i(s);e.forEach(u,function(d){var p=s.edge(d);s.removeEdge(d),p.forwardName=d.name,p.reversed=!0,s.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function l(d){return function(p){return d.edge(p).weight}}}function i(s){var u=[],l={},d={};function p(m){e.has(d,m)||(d[m]=!0,l[m]=!0,e.forEach(s.outEdges(m),function(_){e.has(l,_.w)?u.push(_):p(_.w)}),delete l[m])}return e.forEach(s.nodes(),p),u}function a(s){e.forEach(s.edges(),function(u){var l=s.edge(u);if(l.reversed){s.removeEdge(u);var d=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(u.w,u.v,l,d)}})}return Ay}var Ly,$C;function jr(){if($C)return Ly;$C=1;var e=Ct(),t=Pn().Graph;Ly={addDummyNode:n,simplify:i,asNonCompoundGraph:a,successorWeights:s,predecessorWeights:u,intersectRect:l,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:m,addBorderNode:_,maxRank:h,partition:g,time:x,notime:q};function n(w,b,k,S){var M;do M=e.uniqueId(S);while(w.hasNode(M));return k.dummy=b,w.setNode(M,k),M}function i(w){var b=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(k){b.setNode(k,w.node(k))}),e.forEach(w.edges(),function(k){var S=b.edge(k.v,k.w)||{weight:0,minlen:1},M=w.edge(k);b.setEdge(k.v,k.w,{weight:S.weight+M.weight,minlen:Math.max(S.minlen,M.minlen)})}),b}function a(w){var b=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(k){w.children(k).length||b.setNode(k,w.node(k))}),e.forEach(w.edges(),function(k){b.setEdge(k,w.edge(k))}),b}function s(w){var b=e.map(w.nodes(),function(k){var S={};return e.forEach(w.outEdges(k),function(M){S[M.w]=(S[M.w]||0)+w.edge(M).weight}),S});return e.zipObject(w.nodes(),b)}function u(w){var b=e.map(w.nodes(),function(k){var S={};return e.forEach(w.inEdges(k),function(M){S[M.v]=(S[M.v]||0)+w.edge(M).weight}),S});return e.zipObject(w.nodes(),b)}function l(w,b){var k=w.x,S=w.y,M=b.x-k,I=b.y-S,E=w.width/2,T=w.height/2;if(!M&&!I)throw new Error("Not possible to find intersection inside of the rectangle");var P,j;return Math.abs(I)*E>Math.abs(M)*T?(I<0&&(T=-T),P=T*M/I,j=T):(M<0&&(E=-E),P=E,j=E*I/M),{x:k+P,y:S+j}}function d(w){var b=e.map(e.range(h(w)+1),function(){return[]});return e.forEach(w.nodes(),function(k){var S=w.node(k),M=S.rank;e.isUndefined(M)||(b[M][S.order]=k)}),b}function p(w){var b=e.min(e.map(w.nodes(),function(k){return w.node(k).rank}));e.forEach(w.nodes(),function(k){var S=w.node(k);e.has(S,"rank")&&(S.rank-=b)})}function m(w){var b=e.min(e.map(w.nodes(),function(I){return w.node(I).rank})),k=[];e.forEach(w.nodes(),function(I){var E=w.node(I).rank-b;k[E]||(k[E]=[]),k[E].push(I)});var S=0,M=w.graph().nodeRankFactor;e.forEach(k,function(I,E){e.isUndefined(I)&&E%M!==0?--S:S&&e.forEach(I,function(T){w.node(T).rank+=S})})}function _(w,b,k,S){var M={width:0,height:0};return arguments.length>=4&&(M.rank=k,M.order=S),n(w,"border",M,b)}function h(w){return e.max(e.map(w.nodes(),function(b){var k=w.node(b).rank;if(!e.isUndefined(k))return k}))}function g(w,b){var k={lhs:[],rhs:[]};return e.forEach(w,function(S){b(S)?k.lhs.push(S):k.rhs.push(S)}),k}function x(w,b){var k=e.now();try{return b()}finally{console.log(w+" time: "+(e.now()-k)+"ms")}}function q(w,b){return b()}return Ly}var Dy,HC;function oL(){if(HC)return Dy;HC=1;var e=Ct(),t=jr();Dy={run:n,undo:a};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(u){i(s,u)})}function i(s,u){var l=u.v,d=s.node(l).rank,p=u.w,m=s.node(p).rank,_=u.name,h=s.edge(u),g=h.labelRank;if(m!==d+1){s.removeEdge(u);var x,q,w;for(w=0,++d;d<m;++w,++d)h.points=[],q={width:0,height:0,edgeLabel:h,edgeObj:u,rank:d},x=t.addDummyNode(s,"edge",q,"_d"),d===g&&(q.width=h.width,q.height=h.height,q.dummy="edge-label",q.labelpos=h.labelpos),s.setEdge(l,x,{weight:h.weight},_),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,p,{weight:h.weight},_)}}function a(s){e.forEach(s.graph().dummyChains,function(u){var l=s.node(u),d=l.edgeLabel,p;for(s.setEdge(l.edgeObj,d);l.dummy;)p=s.successors(u)[0],s.removeNode(u),d.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(d.x=l.x,d.y=l.y,d.width=l.width,d.height=l.height),u=p,l=s.node(u)})}return Dy}var By,WC;function ac(){if(WC)return By;WC=1;var e=Ct();By={longestPath:t,slack:n};function t(i){var a={};function s(u){var l=i.node(u);if(e.has(a,u))return l.rank;a[u]=!0;var d=e.min(e.map(i.outEdges(u),function(p){return s(p.w)-i.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),l.rank=d}e.forEach(i.sources(),s)}function n(i,a){return i.node(a.w).rank-i.node(a.v).rank-i.edge(a).minlen}return By}var zy,UC;function jI(){if(UC)return zy;UC=1;var e=Ct(),t=Pn().Graph,n=ac().slack;zy=i;function i(l){var d=new t({directed:!1}),p=l.nodes()[0],m=l.nodeCount();d.setNode(p,{});for(var _,h;a(d,l)<m;)_=s(d,l),h=d.hasNode(_.v)?n(l,_):-n(l,_),u(d,l,h);return d}function a(l,d){function p(m){e.forEach(d.nodeEdges(m),function(_){var h=_.v,g=m===h?_.w:h;!l.hasNode(g)&&!n(d,_)&&(l.setNode(g,{}),l.setEdge(m,g,{}),p(g))})}return e.forEach(l.nodes(),p),l.nodeCount()}function s(l,d){return e.minBy(d.edges(),function(p){if(l.hasNode(p.v)!==l.hasNode(p.w))return n(d,p)})}function u(l,d,p){e.forEach(l.nodes(),function(m){d.node(m).rank+=p})}return zy}var $y,GC;function aL(){if(GC)return $y;GC=1;var e=Ct(),t=jI(),n=ac().slack,i=ac().longestPath,a=Pn().alg.preorder,s=Pn().alg.postorder,u=jr().simplify;$y=l,l.initLowLimValues=_,l.initCutValues=d,l.calcCutValue=m,l.leaveEdge=g,l.enterEdge=x,l.exchangeEdges=q;function l(S){S=u(S),i(S);var M=t(S);_(M),d(M,S);for(var I,E;I=g(M);)E=x(M,S,I),q(M,S,I,E)}function d(S,M){var I=s(S,S.nodes());I=I.slice(0,I.length-1),e.forEach(I,function(E){p(S,M,E)})}function p(S,M,I){var E=S.node(I),T=E.parent;S.edge(I,T).cutvalue=m(S,M,I)}function m(S,M,I){var E=S.node(I),T=E.parent,P=!0,j=M.edge(I,T),D=0;return j||(P=!1,j=M.edge(T,I)),D=j.weight,e.forEach(M.nodeEdges(I),function(O){var F=O.v===I,X=F?O.w:O.v;if(X!==T){var V=F===P,Z=M.edge(O).weight;if(D+=V?Z:-Z,b(S,I,X)){var W=S.edge(I,X).cutvalue;D+=V?-W:W}}}),D}function _(S,M){arguments.length<2&&(M=S.nodes()[0]),h(S,{},1,M)}function h(S,M,I,E,T){var P=I,j=S.node(E);return M[E]=!0,e.forEach(S.neighbors(E),function(D){e.has(M,D)||(I=h(S,M,I,D,E))}),j.low=P,j.lim=I++,T?j.parent=T:delete j.parent,I}function g(S){return e.find(S.edges(),function(M){return S.edge(M).cutvalue<0})}function x(S,M,I){var E=I.v,T=I.w;M.hasEdge(E,T)||(E=I.w,T=I.v);var P=S.node(E),j=S.node(T),D=P,O=!1;P.lim>j.lim&&(D=j,O=!0);var F=e.filter(M.edges(),function(X){return O===k(S,S.node(X.v),D)&&O!==k(S,S.node(X.w),D)});return e.minBy(F,function(X){return n(M,X)})}function q(S,M,I,E){var T=I.v,P=I.w;S.removeEdge(T,P),S.setEdge(E.v,E.w,{}),_(S),d(S,M),w(S,M)}function w(S,M){var I=e.find(S.nodes(),function(T){return!M.node(T).parent}),E=a(S,I);E=E.slice(1),e.forEach(E,function(T){var P=S.node(T).parent,j=M.edge(T,P),D=!1;j||(j=M.edge(P,T),D=!0),M.node(T).rank=M.node(P).rank+(D?j.minlen:-j.minlen)})}function b(S,M,I){return S.hasEdge(M,I)}function k(S,M,I){return I.low<=M.lim&&M.lim<=I.lim}return $y}var Hy,KC;function sL(){if(KC)return Hy;KC=1;var e=ac(),t=e.longestPath,n=jI(),i=aL();Hy=a;function a(d){switch(d.graph().ranker){case"network-simplex":l(d);break;case"tight-tree":u(d);break;case"longest-path":s(d);break;default:l(d)}}var s=t;function u(d){t(d),n(d)}function l(d){i(d)}return Hy}var Wy,YC;function uL(){if(YC)return Wy;YC=1;var e=Ct();Wy=t;function t(a){var s=i(a);e.forEach(a.graph().dummyChains,function(u){for(var l=a.node(u),d=l.edgeObj,p=n(a,s,d.v,d.w),m=p.path,_=p.lca,h=0,g=m[h],x=!0;u!==d.w;){if(l=a.node(u),x){for(;(g=m[h])!==_&&a.node(g).maxRank<l.rank;)h++;g===_&&(x=!1)}if(!x){for(;h<m.length-1&&a.node(g=m[h+1]).minRank<=l.rank;)h++;g=m[h]}a.setParent(u,g),u=a.successors(u)[0]}})}function n(a,s,u,l){var d=[],p=[],m=Math.min(s[u].low,s[l].low),_=Math.max(s[u].lim,s[l].lim),h,g;h=u;do h=a.parent(h),d.push(h);while(h&&(s[h].low>m||_>s[h].lim));for(g=h,h=l;(h=a.parent(h))!==g;)p.push(h);return{path:d.concat(p.reverse()),lca:g}}function i(a){var s={},u=0;function l(d){var p=u;e.forEach(a.children(d),l),s[d]={low:p,lim:u++}}return e.forEach(a.children(),l),s}return Wy}var Uy,QC;function lL(){if(QC)return Uy;QC=1;var e=Ct(),t=jr();Uy={run:n,cleanup:u};function n(l){var d=t.addDummyNode(l,"root",{},"_root"),p=a(l),m=e.max(e.values(p))-1,_=2*m+1;l.graph().nestingRoot=d,e.forEach(l.edges(),function(g){l.edge(g).minlen*=_});var h=s(l)+1;e.forEach(l.children(),function(g){i(l,d,_,h,m,p,g)}),l.graph().nodeRankFactor=_}function i(l,d,p,m,_,h,g){var x=l.children(g);if(!x.length){g!==d&&l.setEdge(d,g,{weight:0,minlen:p});return}var q=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),b=l.node(g);l.setParent(q,g),b.borderTop=q,l.setParent(w,g),b.borderBottom=w,e.forEach(x,function(k){i(l,d,p,m,_,h,k);var S=l.node(k),M=S.borderTop?S.borderTop:k,I=S.borderBottom?S.borderBottom:k,E=S.borderTop?m:2*m,T=M!==I?1:_-h[g]+1;l.setEdge(q,M,{weight:E,minlen:T,nestingEdge:!0}),l.setEdge(I,w,{weight:E,minlen:T,nestingEdge:!0})}),l.parent(g)||l.setEdge(d,q,{weight:0,minlen:_+h[g]})}function a(l){var d={};function p(m,_){var h=l.children(m);h&&h.length&&e.forEach(h,function(g){p(g,_+1)}),d[m]=_}return e.forEach(l.children(),function(m){p(m,1)}),d}function s(l){return e.reduce(l.edges(),function(d,p){return d+l.edge(p).weight},0)}function u(l){var d=l.graph();l.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(l.edges(),function(p){var m=l.edge(p);m.nestingEdge&&l.removeEdge(p)})}return Uy}var Gy,XC;function cL(){if(XC)return Gy;XC=1;var e=Ct(),t=jr();Gy=n;function n(a){function s(u){var l=a.children(u),d=a.node(u);if(l.length&&e.forEach(l,s),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,m=d.maxRank+1;p<m;++p)i(a,"borderLeft","_bl",u,d,p),i(a,"borderRight","_br",u,d,p)}}e.forEach(a.children(),s)}function i(a,s,u,l,d,p){var m={width:0,height:0,rank:p,borderType:s},_=d[s][p-1],h=t.addDummyNode(a,"border",m,u);d[s][p]=h,a.setParent(h,l),_&&a.setEdge(_,h,{weight:1})}return Gy}var Ky,ZC;function dL(){if(ZC)return Ky;ZC=1;var e=Ct();Ky={adjust:t,undo:n};function t(p){var m=p.graph().rankdir.toLowerCase();(m==="lr"||m==="rl")&&i(p)}function n(p){var m=p.graph().rankdir.toLowerCase();(m==="bt"||m==="rl")&&s(p),(m==="lr"||m==="rl")&&(l(p),i(p))}function i(p){e.forEach(p.nodes(),function(m){a(p.node(m))}),e.forEach(p.edges(),function(m){a(p.edge(m))})}function a(p){var m=p.width;p.width=p.height,p.height=m}function s(p){e.forEach(p.nodes(),function(m){u(p.node(m))}),e.forEach(p.edges(),function(m){var _=p.edge(m);e.forEach(_.points,u),e.has(_,"y")&&u(_)})}function u(p){p.y=-p.y}function l(p){e.forEach(p.nodes(),function(m){d(p.node(m))}),e.forEach(p.edges(),function(m){var _=p.edge(m);e.forEach(_.points,d),e.has(_,"x")&&d(_)})}function d(p){var m=p.x;p.x=p.y,p.y=m}return Ky}var Yy,JC;function pL(){if(JC)return Yy;JC=1;var e=Ct();Yy=t;function t(n){var i={},a=e.filter(n.nodes(),function(p){return!n.children(p).length}),s=e.max(e.map(a,function(p){return n.node(p).rank})),u=e.map(e.range(s+1),function(){return[]});function l(p){if(!e.has(i,p)){i[p]=!0;var m=n.node(p);u[m.rank].push(p),e.forEach(n.successors(p),l)}}var d=e.sortBy(a,function(p){return n.node(p).rank});return e.forEach(d,l),u}return Yy}var Qy,ek;function fL(){if(ek)return Qy;ek=1;var e=Ct();Qy=t;function t(i,a){for(var s=0,u=1;u<a.length;++u)s+=n(i,a[u-1],a[u]);return s}function n(i,a,s){for(var u=e.zipObject(s,e.map(s,function(h,g){return g})),l=e.flatten(e.map(a,function(h){return e.sortBy(e.map(i.outEdges(h),function(g){return{pos:u[g.w],weight:i.edge(g).weight}}),"pos")}),!0),d=1;d<s.length;)d<<=1;var p=2*d-1;d-=1;var m=e.map(new Array(p),function(){return 0}),_=0;return e.forEach(l.forEach(function(h){var g=h.pos+d;m[g]+=h.weight;for(var x=0;g>0;)g%2&&(x+=m[g+1]),g=g-1>>1,m[g]+=h.weight;_+=h.weight*x})),_}return Qy}var Xy,tk;function _L(){if(tk)return Xy;tk=1;var e=Ct();Xy=t;function t(n,i){return e.map(i,function(a){var s=n.inEdges(a);if(s.length){var u=e.reduce(s,function(l,d){var p=n.edge(d),m=n.node(d.v);return{sum:l.sum+p.weight*m.order,weight:l.weight+p.weight}},{sum:0,weight:0});return{v:a,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:a}})}return Xy}var Zy,rk;function mL(){if(rk)return Zy;rk=1;var e=Ct();Zy=t;function t(a,s){var u={};e.forEach(a,function(d,p){var m=u[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(m.barycenter=d.barycenter,m.weight=d.weight)}),e.forEach(s.edges(),function(d){var p=u[d.v],m=u[d.w];!e.isUndefined(p)&&!e.isUndefined(m)&&(m.indegree++,p.out.push(u[d.w]))});var l=e.filter(u,function(d){return!d.indegree});return n(l)}function n(a){var s=[];function u(p){return function(m){m.merged||(e.isUndefined(m.barycenter)||e.isUndefined(p.barycenter)||m.barycenter>=p.barycenter)&&i(p,m)}}function l(p){return function(m){m.in.push(p),--m.indegree===0&&a.push(m)}}for(;a.length;){var d=a.pop();s.push(d),e.forEach(d.in.reverse(),u(d)),e.forEach(d.out,l(d))}return e.map(e.filter(s,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function i(a,s){var u=0,l=0;a.weight&&(u+=a.barycenter*a.weight,l+=a.weight),s.weight&&(u+=s.barycenter*s.weight,l+=s.weight),a.vs=s.vs.concat(a.vs),a.barycenter=u/l,a.weight=l,a.i=Math.min(s.i,a.i),s.merged=!0}return Zy}var Jy,nk;function hL(){if(nk)return Jy;nk=1;var e=Ct(),t=jr();Jy=n;function n(s,u){var l=t.partition(s,function(q){return e.has(q,"barycenter")}),d=l.lhs,p=e.sortBy(l.rhs,function(q){return-q.i}),m=[],_=0,h=0,g=0;d.sort(a(!!u)),g=i(m,p,g),e.forEach(d,function(q){g+=q.vs.length,m.push(q.vs),_+=q.barycenter*q.weight,h+=q.weight,g=i(m,p,g)});var x={vs:e.flatten(m,!0)};return h&&(x.barycenter=_/h,x.weight=h),x}function i(s,u,l){for(var d;u.length&&(d=e.last(u)).i<=l;)u.pop(),s.push(d.vs),l++;return l}function a(s){return function(u,l){return u.barycenter<l.barycenter?-1:u.barycenter>l.barycenter?1:s?l.i-u.i:u.i-l.i}}return Jy}var e0,ik;function yL(){if(ik)return e0;ik=1;var e=Ct(),t=_L(),n=mL(),i=hL();e0=a;function a(l,d,p,m){var _=l.children(d),h=l.node(d),g=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,q={};g&&(_=e.filter(_,function(I){return I!==g&&I!==x}));var w=t(l,_);e.forEach(w,function(I){if(l.children(I.v).length){var E=a(l,I.v,p,m);q[I.v]=E,e.has(E,"barycenter")&&u(I,E)}});var b=n(w,p);s(b,q);var k=i(b,m);if(g&&(k.vs=e.flatten([g,k.vs,x],!0),l.predecessors(g).length)){var S=l.node(l.predecessors(g)[0]),M=l.node(l.predecessors(x)[0]);e.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+S.order+M.order)/(k.weight+2),k.weight+=2}return k}function s(l,d){e.forEach(l,function(p){p.vs=e.flatten(p.vs.map(function(m){return d[m]?d[m].vs:m}),!0)})}function u(l,d){e.isUndefined(l.barycenter)?(l.barycenter=d.barycenter,l.weight=d.weight):(l.barycenter=(l.barycenter*l.weight+d.barycenter*d.weight)/(l.weight+d.weight),l.weight+=d.weight)}return e0}var t0,ok;function gL(){if(ok)return t0;ok=1;var e=Ct(),t=Pn().Graph;t0=n;function n(a,s,u){var l=i(a),d=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(p){return a.node(p)});return e.forEach(a.nodes(),function(p){var m=a.node(p),_=a.parent(p);(m.rank===s||m.minRank<=s&&s<=m.maxRank)&&(d.setNode(p),d.setParent(p,_||l),e.forEach(a[u](p),function(h){var g=h.v===p?h.w:h.v,x=d.edge(g,p),q=e.isUndefined(x)?0:x.weight;d.setEdge(g,p,{weight:a.edge(h).weight+q})}),e.has(m,"minRank")&&d.setNode(p,{borderLeft:m.borderLeft[s],borderRight:m.borderRight[s]}))}),d}function i(a){for(var s;a.hasNode(s=e.uniqueId("_root")););return s}return t0}var r0,ak;function vL(){if(ak)return r0;ak=1;var e=Ct();r0=t;function t(n,i,a){var s={},u;e.forEach(a,function(l){for(var d=n.parent(l),p,m;d;){if(p=n.parent(d),p?(m=s[p],s[p]=d):(m=u,u=d),m&&m!==d){i.setEdge(m,d);return}d=p}})}return r0}var n0,sk;function xL(){if(sk)return n0;sk=1;var e=Ct(),t=pL(),n=fL(),i=yL(),a=gL(),s=vL(),u=Pn().Graph,l=jr();n0=d;function d(h){var g=l.maxRank(h),x=p(h,e.range(1,g+1),"inEdges"),q=p(h,e.range(g-1,-1,-1),"outEdges"),w=t(h);_(h,w);for(var b=Number.POSITIVE_INFINITY,k,S=0,M=0;M<4;++S,++M){m(S%2?x:q,S%4>=2),w=l.buildLayerMatrix(h);var I=n(h,w);I<b&&(M=0,k=e.cloneDeep(w),b=I)}_(h,k)}function p(h,g,x){return e.map(g,function(q){return a(h,q,x)})}function m(h,g){var x=new u;e.forEach(h,function(q){var w=q.graph().root,b=i(q,w,x,g);e.forEach(b.vs,function(k,S){q.node(k).order=S}),s(q,x,b.vs)})}function _(h,g){e.forEach(g,function(x){e.forEach(x,function(q,w){h.node(q).order=w})})}return n0}var i0,uk;function wL(){if(uk)return i0;uk=1;var e=Ct(),t=Pn().Graph,n=jr();i0={positionX:x,findType1Conflicts:i,findType2Conflicts:a,addConflict:u,hasConflict:l,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:h,findSmallestWidthAlignment:_,balance:g};function i(b,k){var S={};function M(I,E){var T=0,P=0,j=I.length,D=e.last(E);return e.forEach(E,function(O,F){var X=s(b,O),V=X?b.node(X).order:j;(X||O===D)&&(e.forEach(E.slice(P,F+1),function(Z){e.forEach(b.predecessors(Z),function(W){var te=b.node(W),U=te.order;(U<T||V<U)&&!(te.dummy&&b.node(Z).dummy)&&u(S,W,Z)})}),P=F+1,T=V)}),E}return e.reduce(k,M),S}function a(b,k){var S={};function M(E,T,P,j,D){var O;e.forEach(e.range(T,P),function(F){O=E[F],b.node(O).dummy&&e.forEach(b.predecessors(O),function(X){var V=b.node(X);V.dummy&&(V.order<j||V.order>D)&&u(S,X,O)})})}function I(E,T){var P=-1,j,D=0;return e.forEach(T,function(O,F){if(b.node(O).dummy==="border"){var X=b.predecessors(O);X.length&&(j=b.node(X[0]).order,M(T,D,F,P,j),D=F,P=j)}M(T,D,T.length,j,E.length)}),T}return e.reduce(k,I),S}function s(b,k){if(b.node(k).dummy)return e.find(b.predecessors(k),function(S){return b.node(S).dummy})}function u(b,k,S){if(k>S){var M=k;k=S,S=M}var I=b[k];I||(b[k]=I={}),I[S]=!0}function l(b,k,S){if(k>S){var M=k;k=S,S=M}return e.has(b[k],S)}function d(b,k,S,M){var I={},E={},T={};return e.forEach(k,function(P){e.forEach(P,function(j,D){I[j]=j,E[j]=j,T[j]=D})}),e.forEach(k,function(P){var j=-1;e.forEach(P,function(D){var O=M(D);if(O.length){O=e.sortBy(O,function(W){return T[W]});for(var F=(O.length-1)/2,X=Math.floor(F),V=Math.ceil(F);X<=V;++X){var Z=O[X];E[D]===D&&j<T[Z]&&!l(S,D,Z)&&(E[Z]=D,E[D]=I[D]=I[Z],j=T[Z])}}})}),{root:I,align:E}}function p(b,k,S,M,I){var E={},T=m(b,k,S,I),P=I?"borderLeft":"borderRight";function j(F,X){for(var V=T.nodes(),Z=V.pop(),W={};Z;)W[Z]?F(Z):(W[Z]=!0,V.push(Z),V=V.concat(X(Z))),Z=V.pop()}function D(F){E[F]=T.inEdges(F).reduce(function(X,V){return Math.max(X,E[V.v]+T.edge(V))},0)}function O(F){var X=T.outEdges(F).reduce(function(Z,W){return Math.min(Z,E[W.w]-T.edge(W))},Number.POSITIVE_INFINITY),V=b.node(F);X!==Number.POSITIVE_INFINITY&&V.borderType!==P&&(E[F]=Math.max(E[F],X))}return j(D,T.predecessors.bind(T)),j(O,T.successors.bind(T)),e.forEach(M,function(F){E[F]=E[S[F]]}),E}function m(b,k,S,M){var I=new t,E=b.graph(),T=q(E.nodesep,E.edgesep,M);return e.forEach(k,function(P){var j;e.forEach(P,function(D){var O=S[D];if(I.setNode(O),j){var F=S[j],X=I.edge(F,O);I.setEdge(F,O,Math.max(T(b,D,j),X||0))}j=D})}),I}function _(b,k){return e.minBy(e.values(k),function(S){var M=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;return e.forIn(S,function(E,T){var P=w(b,T)/2;M=Math.max(E+P,M),I=Math.min(E-P,I)}),M-I})}function h(b,k){var S=e.values(k),M=e.min(S),I=e.max(S);e.forEach(["u","d"],function(E){e.forEach(["l","r"],function(T){var P=E+T,j=b[P],D;if(j!==k){var O=e.values(j);D=T==="l"?M-e.min(O):I-e.max(O),D&&(b[P]=e.mapValues(j,function(F){return F+D}))}})})}function g(b,k){return e.mapValues(b.ul,function(S,M){if(k)return b[k.toLowerCase()][M];var I=e.sortBy(e.map(b,M));return(I[1]+I[2])/2})}function x(b){var k=n.buildLayerMatrix(b),S=e.merge(i(b,k),a(b,k)),M={},I;e.forEach(["u","d"],function(T){I=T==="u"?k:e.values(k).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(I=e.map(I,function(F){return e.values(F).reverse()}));var j=(T==="u"?b.predecessors:b.successors).bind(b),D=d(b,I,S,j),O=p(b,I,D.root,D.align,P==="r");P==="r"&&(O=e.mapValues(O,function(F){return-F})),M[T+P]=O})});var E=_(b,M);return h(M,E),g(M,b.graph().align)}function q(b,k,S){return function(M,I,E){var T=M.node(I),P=M.node(E),j=0,D;if(j+=T.width/2,e.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":D=-T.width/2;break;case"r":D=T.width/2;break}if(D&&(j+=S?D:-D),D=0,j+=(T.dummy?k:b)/2,j+=(P.dummy?k:b)/2,j+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":D=P.width/2;break;case"r":D=-P.width/2;break}return D&&(j+=S?D:-D),D=0,j}}function w(b,k){return b.node(k).width}return i0}var o0,lk;function bL(){if(lk)return o0;lk=1;var e=Ct(),t=jr(),n=wL().positionX;o0=i;function i(s){s=t.asNonCompoundGraph(s),a(s),e.forEach(n(s),function(u,l){s.node(l).x=u})}function a(s){var u=t.buildLayerMatrix(s),l=s.graph().ranksep,d=0;e.forEach(u,function(p){var m=e.max(e.map(p,function(_){return s.node(_).height}));e.forEach(p,function(_){s.node(_).y=d+m/2}),d+=m+l})}return o0}var a0,ck;function qL(){if(ck)return a0;ck=1;var e=Ct(),t=iL(),n=oL(),i=sL(),a=jr().normalizeRanks,s=uL(),u=jr().removeEmptyRanks,l=lL(),d=cL(),p=dL(),m=xL(),_=bL(),h=jr(),g=Pn().Graph;a0=x;function x(H,J){var ne=J&&J.debugTiming?h.time:h.notime;ne("layout",function(){var ue=ne("  buildLayoutGraph",function(){return j(H)});ne("  runLayout",function(){q(ue,ne)}),ne("  updateInputGraph",function(){w(H,ue)})})}function q(H,J){J("    makeSpaceForEdgeLabels",function(){D(H)}),J("    removeSelfEdges",function(){K(H)}),J("    acyclic",function(){t.run(H)}),J("    nestingGraph.run",function(){l.run(H)}),J("    rank",function(){i(h.asNonCompoundGraph(H))}),J("    injectEdgeLabelProxies",function(){O(H)}),J("    removeEmptyRanks",function(){u(H)}),J("    nestingGraph.cleanup",function(){l.cleanup(H)}),J("    normalizeRanks",function(){a(H)}),J("    assignRankMinMax",function(){F(H)}),J("    removeEdgeLabelProxies",function(){X(H)}),J("    normalize.run",function(){n.run(H)}),J("    parentDummyChains",function(){s(H)}),J("    addBorderSegments",function(){d(H)}),J("    order",function(){m(H)}),J("    insertSelfEdges",function(){oe(H)}),J("    adjustCoordinateSystem",function(){p.adjust(H)}),J("    position",function(){_(H)}),J("    positionSelfEdges",function(){z(H)}),J("    removeBorderNodes",function(){U(H)}),J("    normalize.undo",function(){n.undo(H)}),J("    fixupEdgeLabelCoords",function(){W(H)}),J("    undoCoordinateSystem",function(){p.undo(H)}),J("    translateGraph",function(){V(H)}),J("    assignNodeIntersects",function(){Z(H)}),J("    reversePoints",function(){te(H)}),J("    acyclic.undo",function(){t.undo(H)})}function w(H,J){e.forEach(H.nodes(),function(ne){var ue=H.node(ne),ae=J.node(ne);ue&&(ue.x=ae.x,ue.y=ae.y,J.children(ne).length&&(ue.width=ae.width,ue.height=ae.height))}),e.forEach(H.edges(),function(ne){var ue=H.edge(ne),ae=J.edge(ne);ue.points=ae.points,e.has(ae,"x")&&(ue.x=ae.x,ue.y=ae.y)}),H.graph().width=J.graph().width,H.graph().height=J.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],M=["width","height"],I={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function j(H){var J=new g({multigraph:!0,compound:!0}),ne=_e(H.graph());return J.setGraph(e.merge({},k,Q(ne,b),e.pick(ne,S))),e.forEach(H.nodes(),function(ue){var ae=_e(H.node(ue));J.setNode(ue,e.defaults(Q(ae,M),I)),J.setParent(ue,H.parent(ue))}),e.forEach(H.edges(),function(ue){var ae=_e(H.edge(ue));J.setEdge(ue,e.merge({},T,Q(ae,E),e.pick(ae,P)))}),J}function D(H){var J=H.graph();J.ranksep/=2,e.forEach(H.edges(),function(ne){var ue=H.edge(ne);ue.minlen*=2,ue.labelpos.toLowerCase()!=="c"&&(J.rankdir==="TB"||J.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})}function O(H){e.forEach(H.edges(),function(J){var ne=H.edge(J);if(ne.width&&ne.height){var ue=H.node(J.v),ae=H.node(J.w),he={rank:(ae.rank-ue.rank)/2+ue.rank,e:J};h.addDummyNode(H,"edge-proxy",he,"_ep")}})}function F(H){var J=0;e.forEach(H.nodes(),function(ne){var ue=H.node(ne);ue.borderTop&&(ue.minRank=H.node(ue.borderTop).rank,ue.maxRank=H.node(ue.borderBottom).rank,J=e.max(J,ue.maxRank))}),H.graph().maxRank=J}function X(H){e.forEach(H.nodes(),function(J){var ne=H.node(J);ne.dummy==="edge-proxy"&&(H.edge(ne.e).labelRank=ne.rank,H.removeNode(J))})}function V(H){var J=Number.POSITIVE_INFINITY,ne=0,ue=Number.POSITIVE_INFINITY,ae=0,he=H.graph(),Ee=he.marginx||0,Ne=he.marginy||0;function Ie(Te){var Pe=Te.x,Ve=Te.y,He=Te.width,De=Te.height;J=Math.min(J,Pe-He/2),ne=Math.max(ne,Pe+He/2),ue=Math.min(ue,Ve-De/2),ae=Math.max(ae,Ve+De/2)}e.forEach(H.nodes(),function(Te){Ie(H.node(Te))}),e.forEach(H.edges(),function(Te){var Pe=H.edge(Te);e.has(Pe,"x")&&Ie(Pe)}),J-=Ee,ue-=Ne,e.forEach(H.nodes(),function(Te){var Pe=H.node(Te);Pe.x-=J,Pe.y-=ue}),e.forEach(H.edges(),function(Te){var Pe=H.edge(Te);e.forEach(Pe.points,function(Ve){Ve.x-=J,Ve.y-=ue}),e.has(Pe,"x")&&(Pe.x-=J),e.has(Pe,"y")&&(Pe.y-=ue)}),he.width=ne-J+Ee,he.height=ae-ue+Ne}function Z(H){e.forEach(H.edges(),function(J){var ne=H.edge(J),ue=H.node(J.v),ae=H.node(J.w),he,Ee;ne.points?(he=ne.points[0],Ee=ne.points[ne.points.length-1]):(ne.points=[],he=ae,Ee=ue),ne.points.unshift(h.intersectRect(ue,he)),ne.points.push(h.intersectRect(ae,Ee))})}function W(H){e.forEach(H.edges(),function(J){var ne=H.edge(J);if(e.has(ne,"x"))switch((ne.labelpos==="l"||ne.labelpos==="r")&&(ne.width-=ne.labeloffset),ne.labelpos){case"l":ne.x-=ne.width/2+ne.labeloffset;break;case"r":ne.x+=ne.width/2+ne.labeloffset;break}})}function te(H){e.forEach(H.edges(),function(J){var ne=H.edge(J);ne.reversed&&ne.points.reverse()})}function U(H){e.forEach(H.nodes(),function(J){if(H.children(J).length){var ne=H.node(J),ue=H.node(ne.borderTop),ae=H.node(ne.borderBottom),he=H.node(e.last(ne.borderLeft)),Ee=H.node(e.last(ne.borderRight));ne.width=Math.abs(Ee.x-he.x),ne.height=Math.abs(ae.y-ue.y),ne.x=he.x+ne.width/2,ne.y=ue.y+ne.height/2}}),e.forEach(H.nodes(),function(J){H.node(J).dummy==="border"&&H.removeNode(J)})}function K(H){e.forEach(H.edges(),function(J){if(J.v===J.w){var ne=H.node(J.v);ne.selfEdges||(ne.selfEdges=[]),ne.selfEdges.push({e:J,label:H.edge(J)}),H.removeEdge(J)}})}function oe(H){var J=h.buildLayerMatrix(H);e.forEach(J,function(ne){var ue=0;e.forEach(ne,function(ae,he){var Ee=H.node(ae);Ee.order=he+ue,e.forEach(Ee.selfEdges,function(Ne){h.addDummyNode(H,"selfedge",{width:Ne.label.width,height:Ne.label.height,rank:Ee.rank,order:he+ ++ue,e:Ne.e,label:Ne.label},"_se")}),delete Ee.selfEdges})})}function z(H){e.forEach(H.nodes(),function(J){var ne=H.node(J);if(ne.dummy==="selfedge"){var ue=H.node(ne.e.v),ae=ue.x+ue.width/2,he=ue.y,Ee=ne.x-ae,Ne=ue.height/2;H.setEdge(ne.e,ne.label),H.removeNode(J),ne.label.points=[{x:ae+2*Ee/3,y:he-Ne},{x:ae+5*Ee/6,y:he-Ne},{x:ae+Ee,y:he},{x:ae+5*Ee/6,y:he+Ne},{x:ae+2*Ee/3,y:he+Ne}],ne.label.x=ne.x,ne.label.y=ne.y}})}function Q(H,J){return e.mapValues(e.pick(H,J),Number)}function _e(H){var J={};return e.forEach(H,function(ne,ue){J[ue.toLowerCase()]=ne}),J}return a0}var s0,dk;function SL(){if(dk)return s0;dk=1;var e=Ct(),t=jr(),n=Pn().Graph;s0={debugOrdering:i};function i(a){var s=t.buildLayerMatrix(a),u=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(a.nodes(),function(l){u.setNode(l,{label:l}),u.setParent(l,"layer"+a.node(l).rank)}),e.forEach(a.edges(),function(l){u.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,d){var p="layer"+d;u.setNode(p,{rank:"same"}),e.reduce(l,function(m,_){return u.setEdge(m,_,{style:"invis"}),_})}),u}return s0}var u0,pk;function CL(){return pk||(pk=1,u0="0.8.5"),u0}var l0,fk;function kL(){return fk||(fk=1,l0={graphlib:Pn(),layout:qL(),debug:SL(),util:{time:jr().time,notime:jr().notime},version:CL()}),l0}var ML=kL();const _k=Na(ML),EL=44,IL=8,mk=120,TL=380,NL=e=>{var d,p,m;const t=(d=e.data)==null?void 0:d.recipe;if(!t)return mk+100;const n=((p=t.inputs)==null?void 0:p.length)||0,i=((m=t.outputs)==null?void 0:m.length)||0,a=Math.max(n,i,1),u=a*EL+(a-1)*IL+24;return mk+u+12},PL=(e,t)=>{if(!e||e.length===0)return e;const n=new _k.graphlib.Graph({multigraph:!0});return n.setGraph({rankdir:"LR",nodesep:200,ranksep:200,edgesep:100,ranker:"network-simplex",acyclicer:"greedy",marginx:50,marginy:50}),n.setDefaultEdgeLabel(()=>({})),e.forEach(a=>{const s=TL,u=NL(a);n.setNode(a.id,{width:s,height:u})}),t.forEach(a=>{n.setEdge(a.source,a.target,{id:a.id},a.id)}),_k.layout(n),e.map(a=>{const s=n.node(a.id);return{...a,position:{x:s.x-s.width/2,y:s.y-s.height/2}}})},jL={custom:J3},RL={custom:tV},El=e=>typeof e=="number"?e.toFixed(4):"0",Il=({productName:e,connectedFlow:t,currentExcess:n,onTargetExcessCommit:i,styleType:a})=>{const[s,u]=A.useState(""),[l,d]=A.useState(!1),p=l?s:El(n),m=()=>{if(!l)return;const q=parseFloat(s);isNaN(q)||i(q),d(!1),u("")},_=a==="input",h=_?"var(--input-bg)":"var(--output-bg)",g=_?"var(--input-border)":"var(--output-border)",x=_?"var(--input-text)":"var(--output-text)";return f.jsxs("div",{style:{marginBottom:"10px",padding:"8px",background:h,border:`1px solid ${g}`,borderRadius:"var(--radius-sm)"},children:[f.jsx("div",{style:{color:x,fontSize:"12px",marginBottom:"6px",fontWeight:600},children:e}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"6px"},children:["Connected: ",El(t),"/s"]}),f.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:[_?"Current Deficiency:":"Current Excess:"," ",El(Math.abs(n)),"/s"]}),f.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"4px"},children:_?"Target Additional Demand:":"Target Excess:"}),f.jsx("input",{type:"text",value:p,onFocus:()=>{d(!0),u(El(n))},onChange:q=>u(q.target.value),onBlur:m,onKeyPress:q=>q.key==="Enter"&&m(),className:"input",style:{padding:"6px",fontSize:"13px",width:"100%"}}),f.jsx("div",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px",textAlign:"right"},children:"/s"})]})},hk=e=>{if(e<0)return 0;const t=1+5429*e/7322;return Math.pow(Math.log(t),1.1)};function VL(){const[e,t,n]=b6([]),[i,a,s]=q6([]),[u,l]=A.useState(0),[d,p]=A.useState(!1),[m,_]=A.useState(!1),[h,g]=A.useState(null),[x,q]=A.useState(null),[w,b]=A.useState("product"),[k,S]=A.useState("button"),[M,I]=A.useState(""),[E,T]=A.useState("name_asc"),[P,j]=A.useState("all"),[D,O]=A.useState("all"),[F,X]=A.useState("all"),[V,Z]=A.useState(null),[W,te]=A.useState([]),[U,K]=A.useState(!1),[oe,z]=A.useState(!1),[Q,_e]=A.useState("targets"),[H,J]=A.useState(0),[ne,ue]=A.useState(!1),[ae,he]=A.useState(null),[Ee,Ne]=A.useState(""),[Ie,Te]=A.useState(null),[Pe,Ve]=A.useState("free"),[He,De]=A.useState(!1),[nt,et]=A.useState(!1),[ft,ct]=A.useState(!1),[dt,lt]=A.useState(!1),[Sr,Zt]=A.useState(!1),[$t,Jt]=A.useState(!1),[at,Rr]=A.useState(()=>{const N=Ol();return{edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}}),[Tt,Kr]=A.useState(!1),[pr,Ht]=A.useState(!1),[Qe,wi]=A.useState(!1),[Nt,ln]=A.useState("pan"),[me,st]=A.useState(0),[Vr,Or]=A.useState(!1),[fr,Xn]=A.useState(!0),[Vn,Rt]=A.useState(1),[er,tr]=A.useState({}),[_t,Do]=A.useState("perSecond"),[xt,Xi]=A.useState("total"),[Wt,Yr]=A.useState([]),[At,Ut]=A.useState(null),[Gt,rr]=A.useState(null),[_r,mr]=A.useState(null),[hr,Et]=A.useState(null),[cn,yr]=A.useState(null),[Zi,Ji]=A.useState({}),[ar,bi]=A.useState(null),[qi,eo]=A.useState({}),[Zn,mt]=A.useState("all"),[Jn,dn]=A.useState(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),[ei,pn]=A.useState([]),[ht,Qr]=A.useState(null),[On,Kt]=A.useState(null),[Bo,gr]=A.useState({x:0,y:0}),ti=A.useRef(null),fn=A.useRef(null),Da=A.useRef(null),Si=getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim().toLowerCase()==="#5fb573"?"Plant Statistics":"Plan Statistics",Cr=A.useRef(null),_n=A.useRef([]),zo=A.useCallback(N=>{const B=N.filter(Y=>Y.type!=="remove"),$=B.filter(Y=>Y.type==="position"),L=B.filter(Y=>Y.type!=="position");$.length>0&&n($),L.length>0&&(_n.current.push(...L),Cr.current&&clearTimeout(Cr.current),Cr.current=setTimeout(()=>{_n.current.length>0&&(n(_n.current),_n.current=[])},50))},[n]),Ba=A.useCallback(N=>{s(N)},[s]);A.useEffect(()=>{const N=Ol();rc(N),Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"}),_V($r,Cn,Mn);const B=()=>{const $="ontouchstart"in window||navigator.maxTouchPoints>0,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);wi($&&L)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const nr=A.useCallback(()=>({onInputClick:Go,onOutputClick:du,isMobile:Qe,mobileActionMode:Nt,onDrillSettingsChange:so,onLogicAssemblerSettingsChange:uo,onTreeFarmSettingsChange:Mi,onIndustrialFireboxSettingsChange:Ko,onTemperatureSettingsChange:Fc,onBoilerSettingsChange:Ac,onChemicalPlantSettingsChange:Yo,onWasteFacilitySettingsChange:Wa,onLiquidDumpSettingsChange:pu,onLiquidBurnerSettingsChange:Fn,onMiddleClick:co,onHandleDoubleClick:Ha,onMachineCountModeChange:_u}),[Qe,Nt]);A.useEffect(()=>{const N=J6();if(!(N!=null&&N.nodes))return;const B=nr(),$=N.nodes.map(L=>{var ce,de,ve,be;const Y=vt((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...B,globalPollution:me,flows:null,suggestions:[]}}});t($),a(N.edges||[]),te(N.targetProducts||[]),tr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),rr(N.lastAssemblerConfig||null),mr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),yr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),J(N.targetIdCounter||0)},[]),A.useEffect(()=>{t(N=>{let B=!1;const $=N.map(L=>L.data.displayMode===_t&&L.data.machineDisplayMode===xt&&L.data.zoomLevel===Vn?L:(B=!0,{...L,data:{...L.data,displayMode:_t,machineDisplayMode:xt,zoomLevel:Vn}}));return B?$:N})},[_t,xt,Vn,t]),A.useEffect(()=>{a(N=>{let B=!1;const $=N.map(L=>{var Y,re;return((Y=L.data)==null?void 0:Y.edgePath)===at.edgePath&&((re=L.data)==null?void 0:re.edgeStyle)===at.edgeStyle?L:(B=!0,{...L,data:at})});return B?$:N})},[at,a]),A.useEffect(()=>{const N={nodes:e,edges:i,targetProducts:W,nodeId:u,targetIdCounter:H,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn};localStorage.setItem("industrialist_canvas_state",JSON.stringify(N))},[e,i,W,u,H,er,Wt,At,Gt,_r,hr,cn]);const Ci=A.useCallback(()=>{var Y,re;let N=0,B=0,$=0;const L=e.length;for(let ce=0;ce<L;ce++){const de=e[ce],{recipe:ve,machine:be,machineCount:ke=0}=de.data||{};if(!ve)continue;const fe=typeof ve.pollution=="number"?ve.pollution:parseFloat(ve.pollution);!isNaN(fe)&&isFinite(fe)&&(B+=fe*ke);const ge=(((Y=ve.inputs)==null?void 0:Y.length)||0)+(((re=ve.outputs)==null?void 0:re.length)||0),xe=Math.ceil(ke);if((be==null?void 0:be.id)==="m_industrial_firebox"){$+=xe*(1+ge*2);continue}if((be==null?void 0:be.id)==="m_tree_farm"&&ve.treeFarmSettings){const{trees:je,harvesters:Ye,sprinklers:Xe,controller:tt,outputs:it}=ve.treeFarmSettings,Dt=typeof ve.power_consumption=="number"?ve.power_consumption:0;N+=Dt*ke;const xr=Math.ceil(Xe/3),Pt=ve.power_type==="HV"?2:Math.ceil(Dt/15e5)*2,Ei=je+Ye+Xe+xr*3+tt+it*3+Pt;$+=xe*Ei;continue}const ye=ve.power_consumption;let Ce=0;typeof ye=="number"?(Ce=ye,N+=ye*ke):typeof ye=="object"&&ye!==null&&"max"in ye&&(Ce=ye.max,N+=Ce*ke);const Re=ve.power_type==="HV"?2:Math.ceil(Ce/15e5)*2;$+=xe*(1+Re+ge*2)}return{totalPower:N,totalPollution:B,totalModelCount:$}},[e]),Fr=A.useMemo(()=>Ci(),[e]);A.useEffect(()=>{if(fr||Fr.totalPollution===0)return;const N=setInterval(()=>{if(Vr)return;const B=Fr.totalPollution/3600;st($=>{if(typeof $!="number"||isNaN($)||!isFinite($))return $;const L=parseFloat(($+B).toFixed(4));return L!==$?L:$})},1e3);return()=>clearInterval(N)},[Fr.totalPollution,Vr,fr]),A.useEffect(()=>{const N=setInterval(Sn,2e4);return()=>clearInterval(N)},[]);const Xr=A.useRef(null),ro=A.useRef(me);A.useEffect(()=>{if(!(Math.abs(me-ro.current)<.01))return ro.current=me,Xr.current&&clearTimeout(Xr.current),Xr.current=setTimeout(()=>{t(N=>{let B=!1;const $=N.map(L=>{const{recipe:Y,machine:re,globalPollution:ce}=L.data||{};if(Y!=null&&Y.isTreeFarm&&Y.treeFarmSettings){const{trees:de,harvesters:ve,sprinklers:be,outputs:ke,controller:fe}=Y.treeFarmSettings,ge=fg(de,ve,me),xe=Jl(de,ve,be,ke,fe,me);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ge,power_consumption:xe?xe.avgPowerConsumption:"Variable"},globalPollution:me}}}if((re==null?void 0:re.id)==="m_air_separation_unit"){const de=hk(me),ve=Y.outputs.map(be=>be.product_id==="p_residue"?{...be,quantity:parseFloat(de.toFixed(6))}:be);return B=!0,{...L,data:{...L.data,recipe:{...Y,outputs:ve},globalPollution:me}}}return ce!==me?(B=!0,{...L,data:{...L.data,globalPollution:me}}):L});return B?$:N})},250),()=>clearTimeout(Xr.current)},[me,t]);const[We,ut]=A.useState(()=>mw([],[],{skipTemperature:!0})),no=A.useRef(null),za=A.useRef(""),io=A.useRef(!1),$o=A.useRef(null),ze=A.useCallback((N="general")=>{$o.current=N,io.current=!0},[]);A.useEffect(()=>{if(io.current)return no.current&&clearTimeout(no.current),no.current=setTimeout(()=>{const N=`${e.length}-${i.length}-${e.map(B=>{var $,L,Y,re,ce,de,ve,be,ke,fe,ge,xe,ye;return`${B.id}:${($=B.data)==null?void 0:$.machineCount}:${JSON.stringify(((Y=(L=B.data)==null?void 0:L.recipe)==null?void 0:Y.temperatureSettings)||{})}:${JSON.stringify(((ce=(re=B.data)==null?void 0:re.recipe)==null?void 0:ce.drillSettings)||{})}:${JSON.stringify(((ve=(de=B.data)==null?void 0:de.recipe)==null?void 0:ve.assemblerSettings)||{})}:${JSON.stringify(((ke=(be=B.data)==null?void 0:be.recipe)==null?void 0:ke.treeFarmSettings)||{})}:${JSON.stringify(((ge=(fe=B.data)==null?void 0:fe.recipe)==null?void 0:ge.fireboxSettings)||{})}:${JSON.stringify(((ye=(xe=B.data)==null?void 0:xe.recipe)==null?void 0:ye.chemicalPlantSettings)||{})}`}).join(",")}`;if(N!==za.current){const B=$o.current||"general",$=["connection","node","temperatureSettings","boilerSettings"].includes(B);console.log(`[Recalculation] Reason: ${B}, Temperature propagation: ${$}`);const L=mw(e,i,{skipTemperature:!$,previousTemperatureData:$?null:We==null?void 0:We.temperatureData});ut(L),za.current=N}io.current=!1,$o.current=null},100),()=>clearTimeout(no.current)},[e,i,We]);const $a=A.useMemo(()=>AV(We),[We]),Ho=A.useMemo(()=>LV(We),[We]),ri=A.useRef(null),mn=A.useRef(null),hn=A.useCallback((N,B,$)=>{var de,ve,be,ke,fe,ge;const L=(de=N.data)==null?void 0:de.recipe,Y=B.byNode[N.id];if(N.data.flows===Y&&N.data.suggestions===$)return N;const re=N.data.flows!==Y,ce=N.data.suggestions!==$&&(((ve=N.data.suggestions)==null?void 0:ve.length)!==($==null?void 0:$.length)||JSON.stringify(N.data.suggestions)!==JSON.stringify($||[]));if(L!=null&&L.isWasteFacility){const xe=Math.min(((be=Y==null?void 0:Y.inputFlows[0])==null?void 0:be.connected)||0,240),ye=Math.min(((ke=Y==null?void 0:Y.inputFlows[1])==null?void 0:ke.connected)||0,240),Ce=L.wasteFacilitySettings||{};if(!re&&!ce&&Ce.itemFlowRate===xe&&Ce.fluidFlowRate===ye)return N;const Re=Vl(xe,ye),je=tc(xe,ye,L.inputs[0].product_id,L.inputs[1].product_id);return{...N,data:{...N.data,recipe:{...L,inputs:je,cycle_time:Re.cycleTime,wasteFacilitySettings:{...Ce,itemFlowRate:xe,fluidFlowRate:ye}},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidDump){const xe=((fe=N.data)==null?void 0:fe.machineCount)||1,ye=L.inputs.map((Re,je)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[je])==null?void 0:Xe.connected)||0,15*xe)/xe}),Ce=Ns(L.inputs,ye);return!re&&!ce&&L.pollution===Ce?N:{...N,data:{...N.data,recipe:{...L,pollution:Ce},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}if(L!=null&&L.isLiquidBurner){const xe=((ge=N.data)==null?void 0:ge.machineCount)||1,ye=L.inputs.map((Re,je)=>{var Xe;return Math.min(((Xe=Y==null?void 0:Y.inputFlows[je])==null?void 0:Xe.connected)||0,15*xe)/xe}),Ce=Ps(L.inputs,ye);return!re&&!ce&&L.pollution===Ce?N:{...N,data:{...N.data,recipe:{...L,pollution:Ce},flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}}return!re&&!ce?N:{...N,data:{...N.data,flows:Y||null,suggestions:$||[],zoomLevel:N.data.zoomLevel}}},[]);A.useEffect(()=>{var N;if((N=We==null?void 0:We.flows)!=null&&N.byNode&&mn.current!==We.flows)return mn.current=We.flows,ri.current&&clearTimeout(ri.current),ri.current=setTimeout(()=>{t(B=>{let $=B;We.temperatureData&&($=M0(B,We.temperatureData,We.graph));let L=!1;const Y=$.map(re=>{const ce=hn(re,We.flows,We.suggestions);return ce!==re&&(L=!0),ce});return L?Y:B})},250),()=>clearTimeout(ri.current)},[We,t,hn]);const Ar=A.useMemo(()=>$a.map(N=>{const B=W.some($=>{var Y,re,ce;const L=e.find(de=>de.id===$.recipeBoxId);return(ce=(re=(Y=L==null?void 0:L.data)==null?void 0:Y.recipe)==null?void 0:re.outputs)==null?void 0:ce.some(de=>de.product_id===N.productId)});return{...N,isSold:er[N.productId]??(B&&typeof N.product.price=="number"&&N.product.price>1)}}),[$a,er,W,e]),ki=A.useMemo(()=>Ar.reduce((N,B)=>B.isSold&&typeof B.product.price=="number"?N+B.product.price*B.excessRate:N,0),[Ar]),oo=A.useMemo(()=>{const N=new Map,B=new Map,$=(Y,re,ce)=>{N.set(Y,(N.get(Y)||0)+re),B.has(Y)||B.set(Y,ce)};e.forEach(Y=>{var ve,be,ke,fe,ge,xe;const{machine:re,machineCount:ce=0,recipe:de}=Y.data||{};if(re){if(re.id==="m_tree_farm"&&(de!=null&&de.treeFarmSettings)){const{trees:ye,harvesters:Ce,sprinklers:Re,outputs:je,controller:Ye}=de.treeFarmSettings,Xe=Math.ceil(Re/3);$("m_tree",Math.ceil(ye*ce),((ve=vt("m_tree"))==null?void 0:ve.cost)||0),$("m_tree_harvester",Math.ceil(Ce*ce),((be=vt("m_tree_harvester"))==null?void 0:be.cost)||0),$("m_tree_farm_sprinkler",Math.ceil(Re*ce),((ke=vt("m_tree_farm_sprinkler"))==null?void 0:ke.cost)||0),$("m_tree_farm_water_tank",Math.ceil(Xe*ce),((fe=vt("m_tree_farm_water_tank"))==null?void 0:fe.cost)||0),$("m_tree_farm_output",Math.ceil(je*ce),((ge=vt("m_tree_farm_output"))==null?void 0:ge.cost)||0),$("m_tree_farm_controller",Math.ceil(Ye*ce),((xe=vt("m_tree_farm_controller"))==null?void 0:xe.cost)||0);return}$(re.id,Math.ceil(ce),typeof re.cost=="number"?re.cost:0)}});const L=Array.from(N.entries()).map(([Y,re])=>{const ce=Cn.find(ve=>ve.id===Y),de=B.get(Y);return{machineId:Y,machine:ce,count:re,cost:de,totalCost:re*de}}).sort((Y,re)=>Y.machine.name.localeCompare(re.machine.name));return{stats:L,totalCost:L.reduce((Y,re)=>Y+re.totalCost,0)}},[e,Cn]),Lt=(N,B)=>t($=>$.map(L=>L.id===N?{...L,data:B(L.data)}:L)),Wo=A.useCallback((N,B,$,L)=>{const Y=Object.keys(Ws).map(de=>parseInt(de));let re=null,ce=0;return Y.forEach(de=>{const be=Ws[de].find(ke=>ke.product_id===N);if(be){const ke=Vo(B,$,L,de);if(ke){const fe=L?1.1:1,ge=be.quantity*fe*ke.dutyCycle;ge>ce&&(ce=ge,re=de)}}}),re},[]),lu=A.useCallback((N,B,$)=>{const L={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:_r,fireboxConfig:hr},Y=(We==null?void 0:We.flows)||null;return DV(N,B,$,Wo,L,me,Y)},[At,Gt,_r,hr,Wo,me,We]),ao=A.useCallback(N=>{const B=e.find(re=>re.id===N.source),$=e.find(re=>re.id===N.target);if(!B||!$)return;const L=B.data.recipe.outputs[parseInt(N.sourceHandle.split("-")[1])],Y=$.data.recipe.inputs[parseInt(N.targetHandle.split("-")[1])];if(!(!L||!Y)){if(Y.isAnyProduct){const re=bt(L.product_id);if(Y.acceptedType&&(re==null?void 0:re.type)!==Y.acceptedType)return;t(ce=>ce.map(de=>{var ke;if(de.id!==$.id)return de;const ve=parseInt(N.targetHandle.split("-")[1]),be=[...de.data.recipe.inputs];if(be[ve]={...be[ve],product_id:L.product_id,isAnyProduct:!1},de.data.recipe.isWasteFacility){const fe=de.data.recipe.wasteFacilitySettings||{},ge=(ke=We==null?void 0:We.flows)==null?void 0:ke.byNode[N.source],xe=parseInt(N.sourceHandle.split("-")[1]),ye=ge!=null&&ge.outputFlows[xe]?ge.outputFlows[xe].produced-ge.outputFlows[xe].connected:0,Ce=Math.min(ye,240);ve===0?fe.itemFlowRate=Ce:ve===1&&(fe.fluidFlowRate=Ce);const Re=Vl(fe.itemFlowRate||0,fe.fluidFlowRate||0),je=tc(fe.itemFlowRate||0,fe.fluidFlowRate||0,ve===0?L.product_id:be[0].product_id,ve===1?L.product_id:be[1].product_id);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:je,cycle_time:Re.cycleTime,wasteFacilitySettings:fe}}}}if(de.data.recipe.isLiquidDump||de.data.recipe.isLiquidBurner){const fe=de.data.recipe.isLiquidDump?Ns(be):Ps(be);return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be,pollution:fe}}}}return{...de,data:{...de.data,recipe:{...de.data.recipe,inputs:be}}}}))}else if(L.product_id!==Y.product_id)return;a(re=>v0({...N,type:"custom",animated:!1,data:at},re)),Sn(),ze("connection")}},[a,e,at,ze,t,We]),Uo=()=>{p(!1),g(null),q(null),b("product"),I(""),T("name_asc"),j("all"),O("all"),Z(null),S("button"),Ji({}),X("all")},cu=A.useCallback(()=>{p(!0),Z(null),S("button")},[]),Go=A.useCallback((N,B,$,L)=>{if(L!=null&&L.ctrlKey){a(re=>re.filter(ce=>!(ce.target===B&&ce.targetHandle===`left-${$}`))),Sn(),ze("connection");return}const Y=bt(N);Y&&(p(!0),g(Y),Z({nodeId:B,inputIndex:$,productId:N}),S("rectangle"),O("producers"))},[a,Qe,Nt,ze]),du=A.useCallback((N,B,$,L)=>{var ve,be;if(L!=null&&L.ctrlKey){a(ke=>ke.filter(fe=>!(fe.source===B&&fe.sourceHandle===`right-${$}`))),Sn(),ze("connection");return}const Y=An.current.find(ke=>ke.id===B),re=(be=(ve=Y==null?void 0:Y.data)==null?void 0:ve.recipe)==null?void 0:be.machine_id,ce=re&&dr[re],de=bt(N);de&&(p(!0),g(de),Z({nodeId:B,outputIndex:$,productId:N,isOutput:!0,isFromHeatSource:!!ce}),S("rectangle"),O("consumers"))},[a,Qe,Nt,ze]),Zr=A.useCallback((N,B,$)=>{a(L=>{const Y=L.filter(re=>{var ce,de,ve,be;if(re.source===N){const ke=parseInt(re.sourceHandle.split("-")[1]);if(ke>=$.length)return!1;const fe=$[ke],ge=e.find(Ce=>Ce.id===re.target);if(!ge)return!1;const xe=parseInt(re.targetHandle.split("-")[1]),ye=(de=(ce=ge.data)==null?void 0:ce.recipe)==null?void 0:de.inputs[xe];if(!ye||ye.product_id!==fe.product_id)return!1}if(re.target===N){const ke=parseInt(re.targetHandle.split("-")[1]);if(ke>=B.length)return!1;const fe=B[ke],ge=e.find(Ce=>Ce.id===re.source);if(!ge)return!1;const xe=parseInt(re.sourceHandle.split("-")[1]),ye=(be=(ve=ge.data)==null?void 0:ve.recipe)==null?void 0:be.outputs[xe];if(!ye||ye.product_id!==fe.product_id)return!1}return!0});return Y.length!==L.length&&(Sn(),ze("connection")),Y})},[a,e,ze]),so=A.useCallback((N,B,$,L)=>{Ut({drillHead:B.drillHead,consumable:B.consumable,machineOil:B.machineOil});const Y=B.drillHead&&B.depth?Vo(B.drillHead,B.consumable,B.machineOil,B.depth):null;Lt(N,re=>({...re,recipe:{...re.recipe,inputs:$.length>0?$:[{product_id:"p_variableproduct",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],drillSettings:B,cycle_time:1,power_consumption:Y?{max:Y.drillingPower*1e6,average:(Y.drillingPower*Y.lifeTime+Y.idlePower*(Y.replacementTime+Y.travelTime))/Y.totalCycleTime*1e6}:"Variable",pollution:Y?Y.pollution:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,$,L),ze("settings")},[Zr,ze]),uo=A.useCallback((N,B,$,L)=>{rr({outerStage:B.outerStage,innerStage:B.innerStage,machineOil:B.machineOil,tickCircuitDelay:B.tickCircuitDelay});const re=!B.outerStage||!B.innerStage?"":B.outerStage===1?`p_${B.innerStage}x_microchip`:`p_${B.outerStage}x${B.innerStage}x_microchip`,ce=re?ru(re,B.machineOil,B.tickCircuitDelay):null;Lt(N,de=>({...de,recipe:{...de.recipe,inputs:$.length>0?$:[{product_id:"p_logic_plate",quantity:"Variable"},{product_id:"p_copper_wire",quantity:"Variable"},{product_id:"p_semiconductor",quantity:"Variable"},{product_id:"p_gold_wire",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_variableproduct",quantity:"Variable"}],assemblerSettings:B,cycle_time:ce?ce.cycleTime:"Variable",power_consumption:ce?{max:ce.maxPowerConsumption,average:ce.avgPowerConsumption}:"Variable"},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),Zr(N,$,L),ze("settings")},[Zr,ze]),Mi=A.useCallback((N,B,$,L)=>{mr({trees:B.trees,harvesters:B.harvesters,sprinklers:B.sprinklers,outputs:B.outputs});const Y=Jl(B.trees,B.harvesters,B.sprinklers,B.outputs,B.controller,me);Lt(N,re=>({...re,recipe:{...re.recipe,inputs:$.length>0?$:[{product_id:"p_water",quantity:"Variable"}],outputs:L.length>0?L:[{product_id:"p_oak_log",quantity:"Variable"}],treeFarmSettings:B,cycle_time:1,power_consumption:Y?Y.avgPowerConsumption:"Variable",pollution:0},leftHandles:Math.max($.length,1),rightHandles:Math.max(L.length,1)})),a(re=>re.filter(ce=>{if(ce.source===N||ce.target===N){const de=parseInt((ce.source===N?ce.sourceHandle:ce.targetHandle).split("-")[1]);return ce.source===N?de<L.length:de<$.length}return!0})),ze("settings")},[a,me,ze]),Ko=A.useCallback((N,B,$,L)=>{Et({fuel:B.fuel}),Lt(N,Y=>({...Y,recipe:{...Y.recipe,inputs:$,fireboxSettings:B,cycle_time:L?L.cycleTime:Y.recipe.cycle_time,power_consumption:0}})),ze("settings")},[ze]),Fc=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=vt(re.data.recipe.machine_id),de=Ur(ce==null?void 0:ce.id);let ve=re.data.recipe.power_type;(ce==null?void 0:ce.id)==="m_electric_water_heater"&&(ve=B.temperature>=320?"HV":"MV");let be={...re.data.recipe,outputs:$,temperatureSettings:B,power_consumption:L??re.data.recipe.power_consumption,power_type:ve};if((ce==null?void 0:ce.id)==="m_water_treatment_plant"&&de){const ke=B.temperature||In,fe=Wn(ce.id,ke,1),ge=90*fe,xe=17.6,ye=17.6;be={...be,inputs:be.inputs.map(Ce=>Ce.product_id==="p_water"?{...Ce,quantity:xe*fe,originalQuantity:xe}:Ce.product_id==="p_distilled_water"?{...Ce,quantity:ye*fe,originalQuantity:ye}:Ce),outputs:be.outputs.map(Ce=>Ce.product_id==="p_steam"?{...Ce,quantity:ge,originalQuantity:90}:Ce)}}return{...re,data:{...re.data,recipe:be}}})),ze("temperatureSettings")},[t,ze]),Ac=A.useCallback((N,B)=>{t($=>$.map(L=>{if(L.id!==N)return L;const Y=vt(L.data.recipe.machine_id),re=dr[Y==null?void 0:Y.id];return!re||re.type!=="boiler"?L:{...L,data:{...L.data,recipe:{...L.data.recipe,temperatureSettings:B}}}})),ze("boilerSettings")},[t,ze]),Ha=A.useCallback((N,B,$,L,Y)=>{const re=B==="right"?"output":"input",ce=Y==null?void 0:Y.find(de=>de.nodeId===N&&de.handleType===re&&de.handleIndex===$);ce&&(t(de=>de.map(ve=>{var ge,xe;if(ve.id!==N)return ve;const be=((ge=ve.data)==null?void 0:ge.machineCountMode)||"free",ke=(xe=ve.data)==null?void 0:xe.cappedMachineCount;if(be==="locked")return console.log(`Node ${N} is locked - suggestion ignored`),ve;let fe=ce.suggestedMachineCount;return be==="capped"&&typeof ke=="number"&&fe>ke&&(console.log(`Node ${N} is capped at ${ke} - clamping suggestion from ${fe} to ${ke}`),fe=ke),{...ve,data:{...ve.data,machineCount:fe}}})),ze("machineCount"))},[t,ze]),Yo=A.useCallback((N,B)=>{t($=>$.map(L=>{if(L.id!==N)return L;const Y=vt(L.data.recipe.machine_id);if((Y==null?void 0:Y.id)!=="m_chemical_plant")return L;const re=Mn.find(de=>de.id===L.data.recipe.id);if(!re)return L;const ce=V3(re,B.speedFactor,B.efficiencyFactor);return{...L,data:{...L.data,recipe:ce}}})),ze("settings")},[t,ze]),Wa=A.useCallback((N,B,$,L)=>{yr({itemProductId:B.itemProductId,fluidProductId:B.fluidProductId}),t(Y=>Y.map(re=>{if(re.id!==N)return re;const ce=re.data.recipe.wasteFacilitySettings||{},de=ce.itemFlowRate||0,ve=ce.fluidFlowRate||0,be=Vl(de,ve);return{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,wasteFacilitySettings:{...B,itemFlowRate:de,fluidFlowRate:ve},cycle_time:be.cycleTime},leftHandles:Math.max($.length,1)}}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),pu=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,liquidDumpSettings:B,pollution:Ns($)},leftHandles:Math.max($.length,1)}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),Fn=A.useCallback((N,B,$,L)=>{t(Y=>Y.map(re=>re.id!==N?re:{...re,data:{...re.data,recipe:{...re.data.recipe,inputs:$.length>0?$:re.data.recipe.inputs,liquidBurnerSettings:B,pollution:Ps($)},leftHandles:Math.max($.length,1)}})),Zr(N,$,L),ze("settings")},[Zr,ze,t]),Lr=A.useCallback((N,B=null)=>{var ge,xe;const $=vt(N.machine_id);if(!$||!N.inputs||!N.outputs){alert("Error: Invalid machine or recipe data");return}let L=bs(N,$.id);const Y=`node-${u}`,re=V?e.find(ye=>ye.id===V.nodeId):null;let ce;if(re)ce={x:re.position.x+(V.isOutput?400:-400),y:re.position.y};else if(fn.current&&ti.current){const ye=ti.current.getBoundingClientRect(),Ce=fn.current.screenToFlowPosition({x:ye.left+ye.width/2,y:ye.top+ye.height/2}),Re=320,je=300,Ye=50;let Xe={x:Ce.x-Re/2,y:Ce.y-je/2},tt=0;for(;tt<20&&e.some(Pt=>{const Ei=Math.abs(Pt.position.x-Xe.x),fo=Math.abs(Pt.position.y-Xe.y);return Ei<Re+Ye&&fo<je+Ye});){const Dt=tt/20*Math.PI*2,xr=100+tt*50;Xe={x:Ce.x-Re/2+Math.cos(Dt)*xr,y:Ce.y-je/2+Math.sin(Dt)*xr},tt++}ce=Xe}else ce={x:Math.random()*400+100,y:Math.random()*300+100};if(((ge=dr[$.id])==null?void 0:ge.type)==="boiler"){const ye={heatLoss:((xe=L.temperatureSettings)==null?void 0:xe.heatLoss)??0,coolantTemp:Gi},Ce=pg($.id,ye,Gi,null,Gi),Re=dr[$.id],je=bE(L.outputs,Ce,!0,Re,Gi);L={...L,outputs:je,temperatureSettings:ye}}const ve={drillConfig:At,assemblerConfig:Gt,treeFarmConfig:_r,fireboxConfig:hr};if(kE(L)&&(L=CE(L,V,h,ve,me,Wo),L.drillSettings&&Ut({drillHead:L.drillSettings.drillHead,consumable:L.drillSettings.consumable,machineOil:L.drillSettings.machineOil}),L.assemblerSettings&&rr({outerStage:L.assemblerSettings.outerStage,innerStage:L.assemblerSettings.innerStage,machineOil:L.assemblerSettings.machineOil,tickCircuitDelay:L.assemblerSettings.tickCircuitDelay}),L.treeFarmSettings&&mr({trees:L.treeFarmSettings.trees,harvesters:L.treeFarmSettings.harvesters,sprinklers:L.treeFarmSettings.sprinklers,outputs:L.treeFarmSettings.outputs}),L.fireboxSettings&&Et({fuel:L.fireboxSettings.fuel})),$.id==="m_air_separation_unit"){const ye=hk(me),Ce=L.outputs.map(Re=>Re.product_id==="p_residue"?{...Re,quantity:parseFloat(ye.toFixed(6))}:Re);L={...L,outputs:Ce}}const be=B!==null?B:Zi[N.id]??1,ke=nr(),fe={id:Y,type:"custom",position:ce,data:{recipe:L,machine:$,machineCount:be,machineCountMode:"free",cappedMachineCount:void 0,displayMode:_t,machineDisplayMode:xt,leftHandles:Math.max(L.inputs.length,1),rightHandles:Math.max(L.outputs.length,1),...ke,globalPollution:me,isTarget:!1,flows:null,suggestions:[],zoomLevel:Vn},sourcePosition:"right",targetPosition:"left"};return t(ye=>{const Ce=[...ye,fe];return ze("node"),V&&be>0&&setTimeout(()=>{var Ye,Xe,tt;const Re=V.isOutput?"inputs":"outputs";let je=-1;if((L.isWasteFacility||L.id==="r_underground_waste_facility")&&!V.isOutput)V.productId==="p_concrete_block"?je=2:V.productId==="p_lead_ingot"?je=3:je=L[Re].findIndex(it=>it.product_id===V.productId);else if(V.isOutput&&V.isFromHeatSource){const it=vt(L.machine_id);if(it&&((Ye=dr[it.id])==null?void 0:Ye.type)==="boiler"&&L.inputs.length>=2){const xr=(Xe=L.inputs[0])==null?void 0:Xe.product_id,Pt=(tt=L.inputs[1])==null?void 0:tt.product_id;xr===Pt&&Pt===V.productId||Pt===V.productId?je=1:je=L[Re].findIndex(Ei=>Ei.product_id===V.productId)}else je=L[Re].findIndex(xr=>xr.product_id===V.productId)}else je=L[Re].findIndex(it=>it.product_id===V.productId);if(je!==-1){const it=V.isOutput?V.outputIndex:je,Dt=V.isOutput?je:V.inputIndex,xr={source:V.isOutput?V.nodeId:Y,sourceHandle:`right-${it}`,target:V.isOutput?Y:V.nodeId,targetHandle:`left-${Dt}`,type:"custom",animated:!1,data:at};a(Pt=>v0(xr,Pt)),Sn(),ze("connection")}},50),Ce}),l(ye=>ye+1),ze(),Y},[u,e,t,a,_t,xt,At,Gt,_r,hr,Wo,Zi,me,h,ze,V,at,nr]),yn=A.useCallback(N=>{t(B=>B.filter($=>$.id!==N)),a(B=>B.filter($=>$.source!==N&&$.target!==N)),te(B=>B.filter($=>$.recipeBoxId!==N)),Sn(),ze("node")},[t,a,ze]),Qo=A.useCallback(N=>{var $;W.find(L=>L.recipeBoxId===N.id)?(te(L=>L.filter(Y=>Y.recipeBoxId!==N.id)),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!1}}:Y))):($=N.data)!=null&&$.recipe&&(te(L=>[...L,{id:`target_${H}`,recipeBoxId:N.id}]),J(L=>L+1),t(L=>L.map(Y=>Y.id===N.id?{...Y,data:{...Y.data,isTarget:!0}}:Y)))},[W,H,t]),ni=A.useCallback((N,B,$,L)=>{var Re;const Y=W.find(je=>je.id===N);if(!Y)return;const re=e.find(je=>je.id===Y.recipeBoxId);if(!re)return;const{recipe:ce,machine:de,machineCount:ve=0}=re.data||{};if(!ce)return;const be=ce.isMineshaftDrill||ce.id==="r_mineshaft_drill";let ke=ce.cycle_time;if((typeof ke!="number"||ke<=0)&&(ke=1),Ur(de==null?void 0:de.id)){const je=an[de.id];if((je==null?void 0:je.type)==="steam_input"&&hi(ce)){const Ye=ce.tempDependentInputTemp??In;ke=Wn(de.id,Ye,ke)}}(typeof ke!="number"||ke<=0)&&(ke=1);const ge=(Re=We==null?void 0:We.flows)==null?void 0:Re.byNode[Y.recipeBoxId];if(!ge)return;let xe=0,ye=0;if(B==="output"){const je=ge.outputFlows[$];if(!je)return;xe=je.connected;const Ye=ce.outputs[$],Xe=Ye.originalQuantity!==void 0?Ye.originalQuantity:Ye.quantity;ye=be?Xe:Xe/ke}else{const je=ge.inputFlows[$];if(!je)return;xe=je.connected;const Ye=ce.inputs[$];ye=be?Ye.quantity:Ye.quantity/ke}if(ye<=0)return;const Ce=(xe+L)/ye;Lt(Y.recipeBoxId,je=>({...je,machineCount:Ce})),ze("machineCount")},[W,e,We,ze]),lo=A.useCallback(N=>{const B=W.find($=>$.id===N);B&&(te($=>$.filter(L=>L.id!==N)),Lt(B.recipeBoxId,$=>({...$,isTarget:!1})))},[W]),fu=A.useCallback((N,B)=>{if(Qe){if(Nt==="target"){Qo(B);return}else if(Nt==="delete"){yn(B.id);return}}N.shiftKey&&!N.ctrlKey&&!N.altKey?Qo(B):N.ctrlKey&&N.altKey&&yn(B.id)},[Qe,Nt,Qo,yn]),vr=A.useCallback((N,B)=>{var $,L;N.stopPropagation(),he(B.id),Ne(String((($=B.data)==null?void 0:$.machineCount)??0)),Ve(((L=B.data)==null?void 0:L.machineCountMode)||"free"),ue(!0)},[]),An=A.useRef(e),Ua=A.useRef(i);A.useEffect(()=>{An.current=e},[e]),A.useEffect(()=>{Ua.current=i},[i]);const co=A.useCallback(N=>{const B=An.current.find($=>$.id===N);B&&bi({recipe:{...B.data.recipe},machine:B.data.machine,machineCount:B.data.machineCount})},[]),Lc=A.useCallback(N=>{if(!ti.current)return;const B=ti.current.getBoundingClientRect();gr({x:N.clientX-B.left,y:N.clientY-B.top})},[]),Ga=A.useCallback(N=>{if(!ar||N.button!==0||(N.stopPropagation(),!fn.current))return;const B=fn.current.screenToFlowPosition({x:N.clientX,y:N.clientY});B.x-=160,B.y-=150;const $=`node-${u}`,L=nr(),Y={id:$,type:"custom",position:B,data:{recipe:ar.recipe,machine:ar.machine,machineCount:ar.machineCount,displayMode:_t,machineDisplayMode:xt,leftHandles:ar.recipe.inputs.length,rightHandles:ar.recipe.outputs.length,...L,globalPollution:me,isTarget:!1,flows:null,suggestions:[]},sourcePosition:"right",targetPosition:"left"};t(re=>[...re,Y]),l(re=>re+1),bi(null),ze("node")},[ar,u,_t,xt,me,t,nr,ze]),Ka=A.useCallback(N=>{N.button===2&&bi(null)},[]),ii=A.useCallback((N=!1)=>{var $,L;let B=parseFloat(Ee);if(isNaN(B)||B<0){if(Ie){alert("Machine count must be 0 or greater. Please enter a valid number.");return}B=0}if(ae&&!Ie){const Y=e.find(de=>de.id===ae),re=(($=Y==null?void 0:Y.data)==null?void 0:$.machineCount)||0;let ce=(L=Y==null?void 0:Y.data)==null?void 0:L.cappedMachineCount;if(Pe==="capped"?ce=B:Pe==="free"&&(ce=void 0),N&&re>0&&B!==re){const de=Rs(e,i),ve=We==null?void 0:We.flows;if(ve){const be=$V(ae,re,B,de,ve,e);t(ke=>ke.map(fe=>{const ge=be.get(fe.id);return fe.id===ae?{...fe,data:{...fe.data,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}}:ge!==void 0?{...fe,data:{...fe.data,machineCount:ge}}:fe}))}else Lt(ae,be=>({...be,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Lt(ae,de=>({...de,machineCount:B,machineCountMode:Pe,cappedMachineCount:ce}))}else Ie&&Lt(Ie,Y=>({...Y,machineCount:B}));ue(!1),he(null),Ne(""),Ve("free"),Te(null),ze("machineCount")},[ae,Ee,Pe,Ie,e,i,We,t,yn,ze]),po=A.useCallback(()=>{Ie&&(yn(Ie),p(!0),g(null),q(null),b("product")),ue(!1),he(null),Ne(""),Ve("free"),Te(null)},[Ie,yn]),_u=A.useCallback((N,B,$)=>{let L,Y;B==="free"?(L="capped",Y=$):B==="capped"?(L="locked",Y=$):(L="free",Y=void 0),t(re=>re.map(ce=>ce.id!==N?ce:{...ce,data:{...ce.data,machineCountMode:L,cappedMachineCount:Y}}))},[t]),Dc=A.useCallback(()=>{const N=PL(e,i);t(N)},[e,i,t]),Bc=A.useCallback(()=>{if(W.length===0){alert("No target recipes. Please add target recipes (Shift+Click a node) before computing.");return}let N=Gw(e,i,W,{allowDeficiency:!1});if(!N.success&&N.hasDeficiency)if(window.confirm(`${N.message}

Do you want to compute anyway? The solver will do its best to minimize deficiency.`))N=Gw(e,i,W,{allowDeficiency:!0});else return;N.success?(t(B=>B.map($=>{const L=N.updates.get($.id);return L!==void 0?{...$,data:{...$.data,machineCount:L}}:$})),ze("machineCount"),alert(`Success! Updated ${N.updates.size} nodes to balance production.

Check console for detailed LP solver output.`)):alert(N.message||"No changes needed - production line is already balanced.")},[W,e,i,t,ze]),mu=()=>{if(!h)return[];const N=bt(h.id),B=bV(h.id),$=wV(h.id),L=[tw,iw,ow,P0,V0,F0],Y=L.filter(de=>zV(de.id).includes(h.id)),re=L.filter(de=>{if(BV(de.id).includes(h.id))return!0;if(N){if(de.id==="r_underground_waste_facility")return!!["p_concrete_block","p_lead_ingot"].includes(h.id);if(de.id==="r_liquid_dump"||de.id==="r_liquid_burner")return!1}return!1}),ce=L.filter(de=>de.id==="r_liquid_dump"||de.id==="r_liquid_burner"?(N==null?void 0:N.type)==="fluid":de.id==="r_underground_waste_facility"?!["p_concrete_block","p_lead_ingot"].includes(h.id):!1);return D==="producers"?[...B,...Y]:D==="consumers"?[...$,...re]:D==="disposal"?ce:Array.from(new Map([...B,...$,...Y,...re,...ce].map(de=>[de.id,de])).values())};A.useEffect(()=>{if(d){const N=w==="product"?mu():Cl(x==null?void 0:x.id),B=V?e.find(L=>L.id===V.nodeId):null,$={};N.forEach(L=>{$[L.id]=lu(L,B,V)}),Ji($)}},[d,w,h,x,V,e,D]);const Ya=A.useCallback(()=>{const N=document.createElement("input");N.type="file",N.accept=".json",N.onchange=B=>{var Y;const $=(Y=B.target.files)==null?void 0:Y[0];if(!$)return;const L=new FileReader;L.onload=re=>{try{const ce=JSON.parse(re.target.result);if(!ce.canvas){alert("This file does not contain canvas data. Please use the Data Manager to import game data (products, machines, recipes).");return}const de=ce.canvas.nodes||[],ve=[];if(de.forEach(fe=>{var xe,ye,Ce,Re,je,Ye,Xe,tt;const ge=(ye=(xe=fe.data)==null?void 0:xe.recipe)==null?void 0:ye.machine_id;ge&&!vt(ge)&&ve.push(`Machine: ${ge}`),(je=(Re=(Ce=fe.data)==null?void 0:Ce.recipe)==null?void 0:Re.inputs)==null||je.forEach(it=>{it.product_id!=="p_variableproduct"&&!bt(it.product_id)&&ve.push(`Product: ${it.product_id}`)}),(tt=(Xe=(Ye=fe.data)==null?void 0:Ye.recipe)==null?void 0:Xe.outputs)==null||tt.forEach(it=>{it.product_id!=="p_variableproduct"&&!bt(it.product_id)&&ve.push(`Product: ${it.product_id}`)})}),ve.length>0){const fe=[...new Set(ve)];alert(`Cannot import canvas - missing items:
${fe.slice(0,10).join(`
`)}${fe.length>10?`
...and ${fe.length-10} more`:""}`);return}if(!window.confirm("Import this canvas? Your current canvas will be replaced."))return;const be=nr(),ke=de.map(fe=>{var ye,Ce,Re,je;const ge=vt((Ce=(ye=fe.data)==null?void 0:ye.recipe)==null?void 0:Ce.machine_id);let xe=(Re=fe.data)==null?void 0:Re.recipe;return ge&&xe&&!((je=xe.outputs)!=null&&je.some(Ye=>Ye.temperature!==void 0))&&(xe=bs(xe,ge.id)),{...fe,data:{...fe.data,recipe:xe,machineCount:fe.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...be,globalPollution:me,flows:null,suggestions:[]}}});t(ke),a(ce.canvas.edges||[]),te(ce.canvas.targetProducts||[]),tr(ce.canvas.soldProducts||{}),Yr(ce.canvas.favoriteRecipes||[]),Ut(ce.canvas.lastDrillConfig||null),rr(ce.canvas.lastAssemblerConfig||null),mr(ce.canvas.lastTreeFarmConfig||null),Et(ce.canvas.lastFireboxConfig||null),yr(ce.canvas.lastWasteFacilityConfig||null),l(ce.canvas.nodeId||0),J(ce.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas imported successfully!")}catch(ce){alert(`Import failed: ${ce.message}`)}},L.readAsText($)},N.click()},[_t,xt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,yr,l,J,ze]),zc=A.useCallback(N=>{var L;const B=(L=N.target.files)==null?void 0:L[0];if(!B)return;const $=new FileReader;$.onload=Y=>{var re,ce;try{const de=JSON.parse(Y.target.result),ve=de.products||de.machines||de.recipes,be=de.canvas;if(ve){const ke=new Map((de.products||[]).map(Ce=>[Ce.id,Ce])),fe=Array.from(ke.values()),ge=new Set(((re=de.machines)==null?void 0:re.map(Ce=>Ce.id))||[]),xe=(de.recipes||[]).filter(Ce=>ge.has(Ce.machine_id)),ye=[...$r];if(fe.forEach(Ce=>{const Re=ye.findIndex(je=>je.id===Ce.id);Re>=0?ye[Re]=Ce:ye.push(Ce)}),S0(ye),((ce=de.machines)==null?void 0:ce.length)>0){const Ce=[...Cn],Re=new Set(de.machines.map(Ye=>Ye.id)),je=Mn.filter(Ye=>!Re.has(Ye.machine_id));de.machines.forEach(Ye=>{const Xe=Ce.findIndex(tt=>tt.id===Ye.id);Xe>=0?Ce[Xe]=Ye:Ce.push(Ye)}),C0(Ce),k0([...je,...xe])}if(!be){alert("Data import successful!"),window.location.reload();return}}if(be){const ke=de.canvas.nodes||[],fe=[];if(ke.forEach(ye=>{var Re,je,Ye,Xe,tt,it,Dt,xr;const Ce=(je=(Re=ye.data)==null?void 0:Re.recipe)==null?void 0:je.machine_id;Ce&&!vt(Ce)&&fe.push(`Machine: ${Ce}`),(tt=(Xe=(Ye=ye.data)==null?void 0:Ye.recipe)==null?void 0:Xe.inputs)==null||tt.forEach(Pt=>{Pt.product_id!=="p_variableproduct"&&!bt(Pt.product_id)&&fe.push(`Product: ${Pt.product_id}`)}),(xr=(Dt=(it=ye.data)==null?void 0:it.recipe)==null?void 0:Dt.outputs)==null||xr.forEach(Pt=>{Pt.product_id!=="p_variableproduct"&&!bt(Pt.product_id)&&fe.push(`Product: ${Pt.product_id}`)})}),fe.length>0){const ye=[...new Set(fe)];alert(`Cannot import canvas - missing items:
${ye.slice(0,10).join(`
`)}${ye.length>10?`
...and ${ye.length-10} more`:""}`),N.target.value="";return}if(!window.confirm("Clear current canvas and load imported layout?")){N.target.value="";return}const ge=nr(),xe=ke.map(ye=>{var je,Ye,Xe,tt;const Ce=vt((Ye=(je=ye.data)==null?void 0:je.recipe)==null?void 0:Ye.machine_id);let Re=(Xe=ye.data)==null?void 0:Xe.recipe;return Ce&&Re&&!((tt=Re.outputs)!=null&&tt.some(it=>it.temperature!==void 0))&&(Re=bs(Re,Ce.id)),{...ye,data:{...ye.data,recipe:Re,machineCount:ye.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...ge,globalPollution:me,flows:null,suggestions:[]}}});t(xe),a(de.canvas.edges||[]),te(de.canvas.targetProducts||[]),tr(de.canvas.soldProducts||{}),Yr(de.canvas.favoriteRecipes||[]),Ut(de.canvas.lastDrillConfig||null),rr(de.canvas.lastAssemblerConfig||null),mr(de.canvas.lastTreeFarmConfig||null),Et(de.canvas.lastFireboxConfig||null),yr(de.canvas.lastWasteFacilityConfig||null),l(de.canvas.nodeId||0),J(de.canvas.targetIdCounter||0),Sn(),ze("node"),alert("Canvas import successful!")}}catch(de){alert(`Import failed: ${de.message}`)}},$.readAsText(B),N.target.value=""},[_t,xt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,l,J]);A.useCallback(()=>{const N=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn},null,2)],{type:"application/json"}),B=URL.createObjectURL(N),$=document.createElement("a");$.href=B,$.download=`industrialist-data-${Date.now()}.json`,$.click(),URL.revokeObjectURL(B)},[$r,Cn,Mn]);const $c=A.useCallback(()=>{const B={nodes:e.map(re=>({...re,data:{...re.data,flows:void 0,suggestions:void 0}})),edges:i,targetProducts:W,nodeId:u,targetIdCounter:H,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn},$=new Blob([JSON.stringify({canvas:B},null,2)],{type:"application/json"}),L=URL.createObjectURL($),Y=document.createElement("a");Y.href=L,Y.download=`industrialist-canvas-${Date.now()}.json`,Y.click(),URL.revokeObjectURL(L)},[e,i,W,u,H,er,Wt,At,Gt,_r,hr]);A.useCallback(()=>{const N=e.map(Y=>({...Y,data:{...Y.data,flows:void 0,suggestions:void 0}})),B=new Blob([JSON.stringify({products:$r,machines:Cn,recipes:Mn,canvas:{nodes:N,edges:i,targetProducts:W,nodeId:u,targetIdCounter:H,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn}},null,2)],{type:"application/json"}),$=URL.createObjectURL(B),L=document.createElement("a");L.href=$,L.download=`industrialist-export-${Date.now()}.json`,L.click(),URL.revokeObjectURL($)},[e,i,W,u,H,er,Wt,At,Gt,_r,hr]);const Hc=A.useCallback(()=>{const N=ja(),B=Ra(),$=nu();S0(N),C0(B),k0($),ze("node")},[ze]),Wc=A.useCallback(N=>{const B=nr(),$=N.nodes.map(L=>{var ce,de,ve,be;const Y=vt((de=(ce=L.data)==null?void 0:ce.recipe)==null?void 0:de.machine_id);let re=(ve=L.data)==null?void 0:ve.recipe;return Y&&re&&!((be=re.outputs)!=null&&be.some(ke=>ke.temperature!==void 0))&&(re=bs(re,Y.id)),{...L,data:{...L.data,recipe:re,machineCount:L.data.machineCount??1,displayMode:_t,machineDisplayMode:xt,...B,globalPollution:me,flows:null,suggestions:[]}}});t($),a(N.edges||[]),te(N.targetProducts||[]),tr(N.soldProducts||{}),Yr(N.favoriteRecipes||[]),Ut(N.lastDrillConfig||null),rr(N.lastAssemblerConfig||null),mr(N.lastTreeFarmConfig||null),Et(N.lastFireboxConfig||null),yr(N.lastWasteFacilityConfig||null),l(N.nodeId||0),J(N.targetIdCounter||0),Sn(),ze("node")},[_t,xt,me,nr,t,a,te,tr,Yr,Ut,rr,mr,Et,yr,l,J,ze]),Uc=A.useCallback(()=>{window.confirm("Restore all data to defaults? This will clear the canvas and reset all products, machines, and recipes.")&&(t3(),hV(Yl),yV(Ql),gV(Xl),t([]),a([]),l(0),te([]),J(0),tr({}),Ut(null),rr(null),mr(null),Et(null),yr(null),window.location.reload())},[t,a,$r,Cn,Mn]);A.useEffect(()=>{const N=B=>{if(B.key==="industrialist_theme")try{const $=JSON.parse(B.newValue);Rr({edgePath:$.edgePath||"orthogonal",edgeStyle:$.edgeStyle||"animated"})}catch($){console.error("Error parsing theme from storage:",$)}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),A.useEffect(()=>{if(!nt){const N=Ol();Rr({edgePath:N.edgePath||"orthogonal",edgeStyle:N.edgeStyle||"animated"})}},[nt]);const hu=$r.filter(N=>N.name.toLowerCase().includes(M.toLowerCase())&&(P==="all"||N.type===P)).sort((N,B)=>E==="name_asc"?N.name.localeCompare(B.name):E==="name_desc"?B.name.localeCompare(N.name):E==="price_asc"?(N.price==="Variable"?1/0:N.price)-(B.price==="Variable"?1/0:B.price):E==="price_desc"?(B.price==="Variable"?-1/0:B.price)-(N.price==="Variable"?-1/0:N.price):E==="rp_asc"?(N.rp_multiplier==="Variable"?1/0:N.rp_multiplier)-(B.rp_multiplier==="Variable"?1/0:B.rp_multiplier):(B.rp_multiplier==="Variable"?-1/0:B.rp_multiplier)-(N.rp_multiplier==="Variable"?-1/0:N.rp_multiplier)),yu=Cn.filter(N=>{const B=N.name.toLowerCase().includes(M.toLowerCase()),$=N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"||N.id==="m_underground_waste_facility"||N.id==="m_liquid_dump"||N.id==="m_liquid_burner"||Cl(N.id).length>0,L=F==="all"||N.tier!==void 0&&N.tier.toString()===F;return B&&$&&L}).sort((N,B)=>N.name.localeCompare(B.name)),Gc=N=>{if(N.id==="m_mineshaft_drill")Lr(tw,1);else if(N.id==="m_logic_assembler")Lr(iw,1);else if(N.id==="m_tree_farm")Lr(ow,1);else if(N.id==="m_underground_waste_facility")Lr(P0,1);else if(N.id==="m_liquid_dump")Lr(V0,1);else if(N.id==="m_liquid_burner")Lr(F0,1);else{q(N);return}Uo()},gu=(w==="product"?mu():Cl(x==null?void 0:x.id)).sort((N,B)=>{const $=Wt.includes(N.id),L=Wt.includes(B.id);if($&&!L)return-1;if(!$&&L)return 1;const Y=vt(N.machine_id),re=vt(B.machine_id);return((Y==null?void 0:Y.name)||"").localeCompare((re==null?void 0:re.name)||"")}),Kc=N=>{Yr(B=>B.includes(N)?B.filter($=>$!==N):[...B,N])};return f.jsxs("div",{style:{width:"100vw",height:"100vh"},children:[f.jsxs(w6,{ref:ti,nodes:e,edges:i,onNodesChange:zo,onEdgesChange:Ba,onConnect:ao,onNodeClick:fu,onNodeDoubleClick:vr,onMouseMove:Lc,onClick:Ga,onContextMenu:Ka,onInit:N=>{fn.current=N,Rt(N.getZoom())},onMoveEnd:(N,B)=>{Rt(B.zoom)},nodeTypes:jL,edgeTypes:RL,panOnDrag:[0,2],panOnScroll:!1,selectionOnDrag:!1,fitView:!0,elevateNodesOnSelect:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,minZoom:.1,maxZoom:4,autoPanOnNodeDrag:!1,zoomOnDoubleClick:!1,preventScrolling:!0,nodeOrigin:[0,0],snapToGrid:!1,onlyRenderVisibleElements:!0,disableKeyboardA11y:!0,deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,panActivationKeyCode:null,zoomActivationKeyCode:null,connectionLineType:at.edgePath==="straight"?"straight":at.edgePath==="orthogonal"?"smoothstep":"default",connectionLineStyle:{stroke:getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),strokeWidth:2,strokeDasharray:at.edgeStyle==="animated"||at.edgeStyle==="dashed"?"8 4":"none"},defaultEdgeOptions:{type:"custom"},children:[f.jsx(E6,{color:"#333",gap:16,size:1}),!Qe&&f.jsx(V6,{className:($t||Tt)&&!pr?"controls-shifted":"",position:"bottom-left"}),!Qe&&f.jsx(K6,{nodeColor:()=>getComputedStyle(document.documentElement).getPropertyValue("--color-primary").trim(),maskColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-overlay").trim(),position:"bottom-right"}),f.jsx(Ia,{position:"top-left",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:f.jsx("div",{className:`left-panel-container ${pr?"collapsed":""}`,style:Qe?{maxWidth:"100%"}:{},children:f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start",flexDirection:"column"},children:[f.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[f.jsxs("div",{className:"stats-panel",children:[f.jsx("h3",{className:"stats-title",children:Si}),f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Power:"}),f.jsx("div",{className:"stat-value",children:jp(Fr.totalPower)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Pollution:"}),f.jsxs("div",{className:"stat-value",style:{color:Fr.totalPollution>=0?"var(--stat-negative)":"var(--stat-positive)"},children:[Fr.totalPollution.toFixed(2),"%/hr"]})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Minimum Model Count:"}),f.jsx("div",{className:"stat-value",children:Fr.totalModelCount.toFixed(0)})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Profit:"}),f.jsxs("div",{className:"stat-value",style:{color:ki>=0?"var(--stat-positive)":"var(--stat-negative)"},children:["$",qr(ki),"/s"]})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("div",{className:"stat-label",children:"Total Cost:"}),f.jsxs("div",{className:"stat-value",children:["$",qr(oo.totalCost)]})]})]})]}),f.jsxs("div",{className:"flex-col action-buttons-container",children:[f.jsx("button",{onClick:cu,className:"btn btn-primary",children:"+ Select Recipe"}),f.jsx("button",{onClick:()=>{z(!0),_e("targets")},className:"btn btn-secondary",children:"View Recipes"}),f.jsx("button",{onClick:Bc,className:"btn btn-secondary",children:"Compute Machines"}),f.jsx("button",{onClick:Dc,className:"btn btn-secondary",children:"Auto Layout"}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:()=>Jt(!$t),className:"btn btn-secondary btn-square",title:$t?"Close more statistics":"Open more statistics",children:$t?"":""}),f.jsx("button",{onClick:()=>Ht(!pr),className:"btn btn-secondary btn-square btn-panel-toggle",title:pr?"Show left panel":"Hide left panel",children:pr?"":""})]})]})]}),($t||Tt)&&f.jsxs("div",{className:`extended-panel ${Tt?"closing":""}`,children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:Qe?"10px":"15px",borderBottom:"2px solid var(--border-divider)",position:"sticky",top:0,background:"var(--bg-secondary)",zIndex:1,flexWrap:Qe?"wrap":"nowrap",gap:Qe?"10px":"0"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:Qe?"var(--font-size-base)":"var(--font-size-md)",fontWeight:700,margin:0},children:"More Statistics"}),Qe&&f.jsx("button",{onClick:()=>Jt(!1),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:"var(--font-size-sm)",minWidth:"auto"},children:"Close"}),f.jsxs("div",{style:{display:"flex",gap:Qe?"5px":"10px",flexWrap:"wrap"},children:[f.jsx("button",{onClick:()=>Do(N=>N==="perSecond"?"perCycle":"perSecond"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:_t==="perSecond"?"Switch to per-cycle display":"Switch to per-second display",children:_t==="perSecond"?"Per Second":"Per Cycle"}),f.jsx("button",{onClick:()=>Xi(N=>N==="perMachine"?"total":"perMachine"),className:"btn btn-secondary",style:{padding:Qe?"6px 10px":"8px 16px",fontSize:Qe?"var(--font-size-sm)":"var(--font-size-base)",minWidth:"auto"},title:xt==="perMachine"?"Switch to total display":"Switch to per-machine display",children:xt==="perMachine"?"Per Machine":"Total"})]})]}),f.jsxs("div",{className:"extended-panel-content",children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{htmlFor:"global-pollution",style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,display:"block",marginBottom:"8px"},children:"Global Pollution (%):"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("button",{onClick:()=>Xn(N=>!N),className:"btn btn-secondary",style:{padding:"10px 16px",minWidth:"auto",fontSize:"var(--font-size-lg)",lineHeight:1},title:fr?"Resume pollution change":"Pause pollution change",children:fr?"":""}),f.jsx("input",{id:"global-pollution",type:"number",step:"0.0001",value:me,onFocus:()=>Or(!0),onBlur:N=>{Or(!1);const B=N.target.value,$=parseFloat(B);st(!isNaN($)&&isFinite($)?parseFloat($.toFixed(4)):0)},onChange:N=>st(N.target.value===""?"":parseFloat(N.target.value)),className:"input",placeholder:"Enter global pollution",style:{flex:1,textAlign:"left"}})]})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Excess Products:"}),Ar.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No excess products. All outputs are consumed by connected inputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ar.map(N=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:N.isSold?"2px solid var(--color-primary)":"2px solid var(--border-light)"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:[qr(N.excessRate),"/s"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[typeof N.product.price=="number"&&f.jsxs("div",{style:{color:N.isSold?"var(--color-primary)":"var(--text-muted)",fontSize:"var(--font-size-sm)",fontWeight:600},children:["$",qr(N.product.price*N.excessRate),"/s"]}),f.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",color:"var(--text-primary)",fontSize:"var(--font-size-sm)"},children:[f.jsx("input",{type:"checkbox",checked:N.isSold,onChange:B=>tr($=>({...$,[N.productId]:B.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"var(--color-primary)"}}),"Sell"]})]})]},N.productId))})]}),f.jsxs("div",{style:{marginTop:"30px"},children:[f.jsx("h4",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"12px"},children:"Deficient Products:"}),Ho.length===0?f.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"var(--font-size-sm)",padding:"15px",textAlign:"center",background:"var(--bg-main)",borderRadius:"var(--radius-sm)"},children:"No deficient products. All inputs are fully supplied by connected outputs."}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ho.map(N=>f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-main)",borderRadius:"var(--radius-sm)",border:"2px solid #fca5a5"},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600},children:N.product.name}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",marginTop:"2px"},children:["Shortage: ",qr(N.deficiencyRate),"/s"]})]}),f.jsxs("div",{style:{color:"#fca5a5",fontSize:"var(--font-size-xs)",fontWeight:600,textAlign:"right"},children:[N.affectedNodes.length," node",N.affectedNodes.length!==1?"s":""," affected"]})]},N.productId))})]})]})]})]})})}),f.jsxs(Ia,{position:"top-right",style:{margin:Qe?"5px":"10px",maxWidth:Qe?"calc(100vw - 10px)":"none"},children:[Qe&&f.jsxs("div",{className:"mobile-controls-container",children:[f.jsx("button",{onClick:()=>ln(N=>N==="target"?"pan":"target"),className:`btn ${Nt==="target"?"btn-primary":"btn-secondary"}`,title:"Target mode - Tap nodes to mark as targets",children:""}),f.jsx("button",{onClick:()=>ln(N=>N==="delete"?"pan":"delete"),className:`btn ${Nt==="delete"?"btn-primary":"btn-secondary"}`,title:"Delete mode - Tap nodes to delete",children:""})]}),f.jsxs("div",{className:`menu-container ${He?"":"closed"}`,style:Qe?{maxWidth:"calc(100vw - 10px)"}:{},children:[f.jsx("button",{onClick:()=>De(!He),className:"btn btn-secondary btn-menu-toggle",style:Qe?{fontSize:"var(--font-size-sm)",padding:"6px 10px"}:{},children:He?">":"<"}),f.jsxs("div",{className:"menu-buttons",style:Qe?{maxHeight:"calc(100vh - 100px)",overflowY:"auto"}:{},children:[f.jsx("button",{onClick:()=>{t([]),a([]),l(0),te([]),J(0),tr({}),Ut(null),rr(null),mr(null),Et(null),yr(null),Sn(),ze("node")},className:"btn btn-secondary",children:"Clear All"}),f.jsx("button",{onClick:()=>lt(!0),className:"btn btn-secondary",children:"Saves"}),f.jsx("button",{onClick:()=>Zt(!0),className:"btn btn-secondary",children:"Data"}),f.jsx("button",{onClick:Uc,className:"btn btn-secondary",children:"Restore Defaults"}),f.jsx("button",{onClick:()=>et(!0),className:"btn btn-secondary",children:"Theme Editor"}),f.jsx("button",{onClick:()=>ct(!0),className:"btn btn-secondary",children:"Help"})]})]})]})]}),f.jsx("input",{ref:Da,type:"file",accept:".json",style:{display:"none"},onChange:zc}),(ne||m)&&f.jsx("div",{className:"modal-overlay",onClick:po,children:ne&&f.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"450px"},children:[f.jsx("h2",{className:"modal-title",children:"Edit Machine Count"}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("label",{style:{display:"block",color:"var(--text-primary)",fontSize:"var(--font-size-base)",fontWeight:600,marginBottom:"10px"},children:"Machine Count:"}),f.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[f.jsx("button",{onClick:()=>{const N=["free","capped","locked"],$=(N.indexOf(Pe)+1)%N.length,L=N[$];Ve(L)},className:"btn btn-secondary",style:{minWidth:"80px",padding:"10px",fontWeight:600,background:Pe==="locked"?"#ef4444":Pe==="capped"?"#f59e0b":"var(--bg-secondary)",color:Pe==="free"?"var(--text-primary)":"#fff"},title:`Mode: ${Pe==="free"?"Free (LP/suggestions can change)":Pe==="capped"?"Capped (LP/suggestions cannot exceed cap)":"Locked (LP/suggestions cannot change)"}`,children:Pe==="free"?" Free":Pe==="capped"?" Cap":" Lock"}),f.jsx("input",{type:"number",min:"0",step:"0.1",value:Ee,onChange:N=>Ne(N.target.value),onKeyPress:N=>{N.key==="Enter"&&ii(!1)},className:"input",placeholder:"Enter machine count",autoFocus:!0,style:{flex:1}})]}),f.jsxs("p",{style:{marginTop:"8px",fontSize:"var(--font-size-sm)",color:"var(--text-secondary)"},children:[Pe==="free"&&"Free: LP solver and suggestions can modify this count",Pe==="capped"&&`Capped: LP/suggestions cannot exceed ${parseFloat(Ee)||0} (the value when Apply is pressed)`,Pe==="locked"&&"Locked: LP solver and suggestions cannot modify this count"]})]}),ae&&!Ie&&f.jsx("div",{style:{marginBottom:"20px",padding:"12px",background:"rgba(212, 166, 55, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid var(--border-divider)"},children:f.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--text-secondary)",lineHeight:"1.6"},children:[f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply:"})," Applies machine count and lock/cap mode to this node only"]}),f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("strong",{style:{color:"var(--text-primary)"},children:"Apply to All:"})," Applies machine count to this node and propagates count changes to connected nodes. Lock/cap mode only applies to this node."]}),f.jsx("div",{style:{fontSize:"11px",fontStyle:"italic",color:"var(--text-muted)"},children:"Note: Lock/cap mode is never propagated to other nodes"})]})}),f.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.jsx("button",{onClick:po,className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),f.jsx("button",{onClick:()=>ii(!1),className:"btn btn-primary",style:{flex:1},children:"Apply"}),ae&&!Ie&&f.jsx("button",{onClick:()=>ii(!0),className:"btn btn-primary",style:{flex:1,background:"var(--color-primary-hover)",fontWeight:700},title:"Apply changes and propagate to connected nodes",children:"Apply to All"})]})]})}),d&&f.jsx("div",{className:"modal-overlay",onClick:Uo,children:f.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),children:[f.jsx("h2",{className:"modal-title",children:h?`Recipes for ${h.name}`:x?`Recipes for ${x.name}`:"Select Product or Machine"}),!h&&!x?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-lg",children:f.jsxs("div",{className:"flex-row",style:{gap:"10px",marginBottom:"15px"},children:[f.jsx("button",{onClick:()=>b("product"),className:`btn ${w==="product"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Products"}),f.jsx("button",{onClick:()=>b("machine"),className:`btn ${w==="machine"?"btn-primary":"btn-secondary"}`,style:{flex:1},children:"By Machines"})]})}),w==="product"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg flex-col",children:[f.jsx("input",{type:"text",placeholder:"Search products...",value:M,onChange:N=>I(N.target.value),className:"input"}),f.jsxs("div",{className:"flex-row",children:[f.jsxs("select",{value:P,onChange:N=>j(N.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Types"}),f.jsx("option",{value:"item",children:"Items Only"}),f.jsx("option",{value:"fluid",children:"Fluids Only"})]}),f.jsxs("select",{value:E,onChange:N=>T(N.target.value),className:"select",children:[f.jsx("option",{value:"name_asc",children:"Name  (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Name  (Z-A)"}),f.jsx("option",{value:"price_asc",children:"Price  (Low-High)"}),f.jsx("option",{value:"price_desc",children:"Price  (High-Low)"}),f.jsx("option",{value:"rp_asc",children:"RP Mult  (Low-High)"}),f.jsx("option",{value:"rp_desc",children:"RP Mult  (High-Low)"})]})]})]}),f.jsxs("div",{className:"modal-content",style:{maxHeight:"400px"},children:[f.jsxs("div",{className:"product-table-header",children:[f.jsx("div",{children:"Product"}),f.jsx("div",{className:"text-right",children:"Price"}),f.jsx("div",{className:"text-right",children:"RP Mult"})]}),hu.map(N=>f.jsxs("div",{onClick:()=>g(N),className:"product-row",children:[f.jsxs("div",{children:[f.jsx("div",{className:"product-name",children:N.name}),f.jsx("div",{className:"product-type",children:N.type==="item"?" Item":" Fluid"})]}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.price==="Variable"?"Variable":`${qr(N.price)}`}),f.jsx("div",{className:"text-right",style:{alignSelf:"center"},children:N.rp_multiplier==="Variable"?"Variable":N.rp_multiplier>=1e3?`${qr(N.rp_multiplier)}x`:`${N.rp_multiplier.toFixed(1)}x`})]},N.id))]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-lg",style:{display:"flex",gap:"10px"},children:[f.jsx("input",{type:"text",placeholder:"Search machines...",value:M,onChange:N=>I(N.target.value),className:"input",style:{flex:3}}),f.jsxs("select",{value:F,onChange:N=>X(N.target.value),className:"select",style:{flex:1},children:[f.jsx("option",{value:"all",children:"All Tiers"}),f.jsx("option",{value:"1",children:"Tier 1"}),f.jsx("option",{value:"2",children:"Tier 2"}),f.jsx("option",{value:"3",children:"Tier 3"}),f.jsx("option",{value:"4",children:"Tier 4"}),f.jsx("option",{value:"5",children:"Tier 5"})]})]}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:yu.length===0?f.jsx("div",{className:"empty-state",children:"No machines found"}):yu.map(N=>f.jsxs("div",{onClick:()=>Gc(N),className:"recipe-card",style:{cursor:"pointer"},children:[f.jsx("div",{className:"recipe-machine",style:{color:N.tier===1?"var(--tier-1-color)":N.tier===2?"var(--tier-2-color)":N.tier===3?"var(--tier-3-color)":N.tier===4?"var(--tier-4-color)":(N.tier===5,"var(--tier-5-color)")},children:N.name}),f.jsx("div",{className:"recipe-details",style:{color:"#999"},children:N.id==="m_mineshaft_drill"||N.id==="m_logic_assembler"||N.id==="m_tree_farm"?"Click to create box":`${Cl(N.id).length} recipe(s)`})]},N.id))})]})]}):f.jsxs(f.Fragment,{children:[k==="button"&&f.jsx("button",{onClick:()=>{g(null),q(null)},className:"btn btn-secondary btn-back",children:" Back"}),h&&f.jsx("div",{className:"mb-lg",children:f.jsxs("select",{value:D,onChange:N=>O(N.target.value),className:"select",children:[f.jsx("option",{value:"all",children:"All Recipes"}),f.jsxs("option",{value:"producers",children:["Producers (Outputs ",h.name,")"]}),f.jsxs("option",{value:"consumers",children:["Consumers (Uses ",h.name,")"]}),f.jsx("option",{value:"disposal",children:"Disposal"})]})}),f.jsx("div",{className:"modal-content flex-col",style:{maxHeight:"400px"},children:gu.length===0?f.jsx("div",{className:"empty-state",children:"No recipes found"}):gu.map(N=>{const B=vt(N.machine_id),$=Wt.includes(N.id),L=Zi[N.id]??1;return B&&N.inputs&&N.outputs?f.jsxs("div",{className:"recipe-card",style:{display:"flex",alignItems:"center",gap:"12px"},children:[f.jsx("button",{onClick:Y=>{Y.stopPropagation(),Kc(N.id)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px",lineHeight:1,filter:$?"none":"grayscale(100%)",opacity:$?1:.4,transition:"all 0.2s"},onMouseEnter:Y=>{Y.currentTarget.style.transform="scale(1.2)",Y.currentTarget.style.opacity="1"},onMouseLeave:Y=>{Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.opacity=$?"1":"0.4"},title:$?"Remove from favorites":"Add to favorites",children:""}),f.jsx("div",{onClick:Y=>{Y.stopPropagation();const re=L<=0?1:L,ce=Lr(N,re);_(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),Ne(String(re)),ue(!0),_(!1)},50)},style:{minWidth:"70px",padding:"10px 12px",background:V&&L<=0?"var(--delete-bg)":"var(--color-primary)",color:V&&L<=0?"var(--delete-color)":"var(--color-primary-dark)",borderRadius:"var(--radius-sm)",fontWeight:700,fontSize:"18px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",userSelect:"none",border:V&&L<=0?"2px solid var(--delete-color)":"2px solid transparent"},onMouseEnter:Y=>{V&&L<=0?(Y.currentTarget.style.background="var(--delete-hover-bg)",Y.currentTarget.style.color="var(--delete-hover-color)"):(Y.currentTarget.style.background="var(--color-primary-hover)",Y.currentTarget.style.transform="scale(1.05)",Y.currentTarget.style.borderColor="var(--color-primary-hover)")},onMouseLeave:Y=>{V&&L<=0?(Y.currentTarget.style.background="var(--delete-bg)",Y.currentTarget.style.color="var(--delete-color)"):(Y.currentTarget.style.background="var(--color-primary)",Y.currentTarget.style.transform="scale(1)",Y.currentTarget.style.borderColor="transparent")},title:V?L<=0?"Cannot create: machine count is 0":`Click to edit before creating (${Number.isInteger(L)?L:L.toFixed(2)} calculated)`:"Click to set machine count",children:Number.isInteger(L)?L:L.toFixed(2)}),f.jsxs("div",{style:{flex:1,cursor:"pointer",minWidth:0},onClick:Y=>{if(Y.stopPropagation(),L<=0){const ce=Lr(N,1);_(!0),p(!1),setTimeout(()=>{Te(ce),he(ce),Ne("1"),ue(!0),_(!1)},50)}else Lr(N),Uo()},children:[f.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px",marginBottom:"4px"},children:[f.jsx("div",{className:"recipe-machine",style:{color:B.tier===1?"var(--tier-1-color)":B.tier===2?"var(--tier-2-color)":B.tier===3?"var(--tier-3-color)":B.tier===4?"var(--tier-4-color)":(B.tier===5,"var(--tier-5-color)")},children:B.name}),N.power_type==="HV"&&f.jsx("div",{style:{fontSize:"12px",color:"var(--text-primary)",fontWeight:500},children:"HV"})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-input",children:"Inputs: "}),f.jsx("span",{children:N.inputs.map(Y=>Z1(Y,bt)).join(", ")})]}),f.jsxs("div",{className:"recipe-details",children:[f.jsx("span",{className:"recipe-label-output",children:"Outputs: "}),f.jsx("span",{children:N.outputs.map(Y=>Z1(Y,bt)).join(", ")})]})]})]},N.id):null})})]}),f.jsx("button",{onClick:Uo,className:"btn btn-secondary",style:{marginTop:"20px"},children:"Close"})]})}),U&&f.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:f.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"800px",maxHeight:"85vh",display:"flex",flexDirection:"column"},children:[f.jsx("h2",{className:"modal-title",children:"Target Products"}),f.jsx("div",{className:"modal-content flex-col",style:{flex:1,overflowY:"auto",paddingBottom:"20px",marginBottom:"0"},children:W.length===0?f.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):W.map(N=>{var ke;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Y=0}=B.data||{};if(!$)return null;let re=$.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi($)){const ge=$.tempDependentInputTemp??In;re=Wn(L.id,ge,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=We==null?void 0:We.flows)==null?void 0:ke.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((fe,ge)=>{var xe;if(typeof fe.quantity=="number"){const Ce=(de?fe.quantity:fe.quantity/re)*Y,Re=((xe=ve==null?void 0:ve.inputFlows[ge])==null?void 0:xe.connected)||0;be.inputs[ge]={totalRate:Ce,connectedFlow:Re,deficiency:Math.max(0,Ce-Re)}}}),$.outputs.forEach((fe,ge)=>{var ye;const xe=fe.quantity;if(typeof xe=="number"){const Re=(de?xe:xe/re)*Y,je=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Re,connectedFlow:je,excess:Math.max(0,Re-je)}}}),f.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),f.jsx("button",{onClick:()=>lo(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((fe,ge)=>{const xe=be.inputs[ge];return xe?f.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:ye=>ni(N.id,"input",ge,ye),styleType:"input"},ge):null})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((fe,ge)=>{const xe=be.outputs[ge];return xe?f.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:ye=>ni(N.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},N.id)})}),f.jsx("button",{onClick:()=>K(!1),className:"btn btn-secondary",style:{width:"100%"},children:"Close"})]})}),oe&&f.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:f.jsxs("div",{className:"modal",onClick:N=>N.stopPropagation(),style:{width:"1400px",maxWidth:"95vw",maxHeight:"90vh"},children:[f.jsx("h2",{className:"modal-title",children:"Recipes"}),f.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid var(--border-divider)"},children:[f.jsx("button",{onClick:()=>_e("targets"),className:Q==="targets"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Q==="targets"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Solver & Targets"}),f.jsx("button",{onClick:()=>_e("canvas"),className:Q==="canvas"?"btn btn-primary":"btn btn-secondary",style:{flex:1,borderRadius:"var(--radius-sm) var(--radius-sm) 0 0",borderBottom:Q==="canvas"?"3px solid var(--color-primary)":"none",minWidth:"auto"},children:"Canvas Recipes"})]}),Q==="canvas"&&f.jsx("div",{style:{marginBottom:"15px"},children:f.jsxs("select",{value:Zn,onChange:N=>mt(N.target.value),className:"select",style:{width:"100%"},children:[f.jsx("option",{value:"all",children:"All Recipes"}),f.jsx("option",{value:"excess",children:"Has Excess"}),f.jsx("option",{value:"deficiency",children:"Has Deficiency"})]})}),f.jsx("div",{style:{maxHeight:"calc(90vh - 300px)",marginBottom:"20px"},children:Q==="targets"?f.jsxs("div",{style:{display:"flex",gap:"0",height:"calc(90vh - 180px)"},children:[f.jsxs("div",{style:{flex:"0 0 25%",display:"flex",flexDirection:"column",paddingRight:"20px"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Solver Configuration"}),f.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"15px"},children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:f.jsx("button",{onClick:()=>{dn(["Deficiencies","Model Count","Excesses","Pollution","Power","Cost"]),pn([])},className:"btn btn-secondary",style:{padding:"8px 12px",fontSize:"var(--font-size-sm)"},children:"Restore to Defaults"})}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Active Weights (Higher = More Priority)"}),f.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ht&&ht!=="Deficiencies"&&ei.includes(ht)&&(pn(B=>B.filter($=>$!==ht)),dn(B=>[...B,ht])),Qr(null),Kt(null)},children:Jn.length===0?f.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"Drag weights here"}):Jn.map((N,B)=>{const $=Jn.length,L=$>1?B/($-1):0,Y=Math.round(239-205*L),re=Math.round(68+129*L),ce=Math.round(68+26*L),de=`rgb(${Y}, ${re}, ${ce})`;return f.jsx("div",{draggable:N!=="Deficiencies",onDragStart:()=>N!=="Deficiencies"&&Qr(N),onDragOver:ve=>{ve.preventDefault(),ht&&ht!==N&&N!=="Deficiencies"&&Kt(B)},onDragLeave:()=>Kt(null),onDrop:ve=>{ve.preventDefault(),ve.stopPropagation(),ht&&ht!==N&&N!=="Deficiencies"&&(ei.includes(ht)?(pn(be=>be.filter(ke=>ke!==ht)),dn(be=>{const ke=[...be];return ke.splice(B,0,ht),ke})):Jn.includes(ht)&&dn(be=>{const ke=be.filter(ge=>ge!==ht),fe=ke.indexOf(N);return ke.splice(fe,0,ht),ke})),Kt(null),Qr(null)},style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-primary)",border:`3px solid ${de}`,borderRadius:"var(--radius-sm)",cursor:N==="Deficiencies"?"not-allowed":"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"all 0.2s",opacity:N==="Deficiencies"?.7:ht===N?.5:1,boxShadow:On===B&&N!=="Deficiencies"?"0 -3px 0 0 var(--color-primary-hover)":"none",marginTop:On===B&&N!=="Deficiencies"?"3px":"0"},onDragEnd:()=>{Qr(null),Kt(null)},title:N==="Deficiencies"?"Deficiencies must always be active":"",children:N},N)})})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-sm)",fontWeight:600,marginBottom:"8px"},children:"Unused Weights"}),f.jsx("div",{style:{minHeight:"80px",padding:"10px",background:"var(--bg-main)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-md)",display:"flex",flexDirection:"column",gap:"8px"},onDragOver:N=>N.preventDefault(),onDrop:N=>{N.preventDefault(),ht&&ht!=="Deficiencies"&&Jn.includes(ht)&&(dn(B=>B.filter($=>$!==ht)),pn(B=>[...B,ht])),Qr(null)},children:ei.length===0?f.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"var(--font-size-xs)",fontStyle:"italic"},children:"All weights active"}):ei.map(N=>f.jsx("div",{draggable:!0,onDragStart:()=>Qr(N),style:{padding:"10px 12px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"2px solid var(--border-light)",borderRadius:"var(--radius-sm)",cursor:"grab",fontWeight:600,fontSize:"var(--font-size-sm)",textAlign:"center",userSelect:"none",transition:"opacity 0.2s"},onDragEnd:()=>Qr(null),children:N},N))})]})]})]}),f.jsx("div",{style:{width:"2px",background:"var(--border-divider)",margin:"0 20px"}}),f.jsxs("div",{style:{flex:"0 0 calc(75% - 42px)",display:"flex",flexDirection:"column"},children:[f.jsx("h3",{style:{color:"var(--color-primary)",fontSize:"var(--font-size-lg)",fontWeight:700,marginBottom:"15px",textAlign:"center"},children:"Target Products"}),f.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",maxHeight:"calc(90vh - 350px)"},children:W.length===0?f.jsx("div",{className:"empty-state",children:"No target products yet. Shift+Click a recipe box to mark it as a target."}):W.map(N=>{var ke;const B=e.find(fe=>fe.id===N.recipeBoxId);if(!B)return null;const{recipe:$,machine:L,machineCount:Y=0}=B.data||{};if(!$)return null;let re=$.cycle_time;if((typeof re!="number"||re<=0)&&(re=1),Ur(L==null?void 0:L.id)){const fe=an[L.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi($)){const ge=$.tempDependentInputTemp??In;re=Wn(L.id,ge,re)}}(typeof re!="number"||re<=0)&&(re=1);const de=$.isMineshaftDrill||$.id==="r_mineshaft_drill",ve=(ke=We==null?void 0:We.flows)==null?void 0:ke.byNode[N.recipeBoxId],be={inputs:{},outputs:{}};return $.inputs.forEach((fe,ge)=>{var xe;if(typeof fe.quantity=="number"){const Ce=(de?fe.quantity:fe.quantity/re)*Y,Re=((xe=ve==null?void 0:ve.inputFlows[ge])==null?void 0:xe.connected)||0;be.inputs[ge]={totalRate:Ce,connectedFlow:Re,deficiency:Math.max(0,Ce-Re)}}}),$.outputs.forEach((fe,ge)=>{var ye;const xe=fe.quantity;if(typeof xe=="number"){const Re=(de?xe:xe/re)*Y,je=((ye=ve==null?void 0:ve.outputFlows[ge])==null?void 0:ye.connected)||0;be.outputs[ge]={totalRate:Re,connectedFlow:je,excess:Math.max(0,Re-je)}}}),f.jsxs("div",{style:{padding:"20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",marginBottom:"15px"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"4px"},children:["Machine Count: ",Y.toFixed(4)]})]}),f.jsx("button",{onClick:()=>lo(N.id),className:"btn btn-delete",style:{padding:"6px 12px"},children:"Remove"})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",borderTop:"1px solid var(--border-divider)",paddingTop:"15px"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Inputs"}),$.inputs.map((fe,ge)=>{const xe=be.inputs[ge];return xe?f.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.deficiency,onTargetExcessCommit:ye=>ni(N.id,"input",ge,ye),styleType:"input"},ge):null})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"14px",fontWeight:600,marginBottom:"12px",textAlign:"center"},children:"Outputs"}),$.outputs.map((fe,ge)=>{const xe=be.outputs[ge];return xe?f.jsx(Il,{productName:_i(fe.product_id,bt),connectedFlow:xe.connectedFlow,currentExcess:xe.excess,onTargetExcessCommit:ye=>ni(N.id,"output",ge,ye),styleType:"output"},ge):null})]})]})]},N.id)})})]})]}):f.jsx("div",{style:{height:"calc(90vh - 300px)",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},children:e.length===0?f.jsx("div",{className:"empty-state",children:"No recipes on canvas"}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"20px"},children:e.filter(N=>{var ve;if(Zn==="all")return!0;const{recipe:B,machineCount:$=0}=N.data||{};if(!B)return!1;let L=B.cycle_time;(typeof L!="number"||L<=0)&&(L=1);const Y=(ve=We==null?void 0:We.flows)==null?void 0:ve.byNode[N.id];if(!Y)return!1;const re=B.isMineshaftDrill||B.id==="r_mineshaft_drill";let ce=!1,de=!1;return B.inputs.forEach((be,ke)=>{var fe;if(typeof be.quantity=="number"){const xe=(re?be.quantity:be.quantity/L)*$,ye=((fe=Y.inputFlows[ke])==null?void 0:fe.connected)||0;Math.max(0,xe-ye)>.001&&(de=!0)}}),B.outputs.forEach((be,ke)=>{var ge;const fe=be.originalQuantity!==void 0?be.originalQuantity:be.quantity;if(typeof fe=="number"){const ye=(re?fe:fe/L)*$,Ce=((ge=Y.outputFlows[ke])==null?void 0:ge.connected)||0;Math.max(0,ye-Ce)>.001&&(ce=!0)}}),Zn==="excess"?ce:Zn==="deficiency"?de:!0}).map(N=>{const{recipe:B,machine:$,machineCount:L=0,machineCountMode:Y="free",cappedMachineCount:re}=N.data||{};if(!B||!$)return null;let ce=B.cycle_time;if((typeof ce!="number"||ce<=0)&&(ce=1),Ur($==null?void 0:$.id)){const fe=an[$.id];if((fe==null?void 0:fe.type)==="steam_input"&&hi(B)){const ge=B.tempDependentInputTemp??In;ce=Wn($.id,ge,ce)}}const ve=B.power_consumption;let be="Variable";typeof ve=="number"?be=jp(ve*L):typeof ve=="object"&&ve!==null&&"max"in ve&&(be=`${jp(ve.max*L)} (max)`);const ke=typeof B.pollution=="number"?B.pollution*L:0;return f.jsxs("div",{style:{padding:"15px 20px",background:"var(--bg-main)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"15px"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsx("div",{style:{color:"var(--text-primary)",fontSize:"15px",fontWeight:600,marginBottom:"4px"},children:B.name}),f.jsxs("div",{style:{marginBottom:"8px"},children:[f.jsx("div",{style:{color:$.tier===1?"var(--tier-1-color)":$.tier===2?"var(--tier-2-color)":$.tier===3?"var(--tier-3-color)":$.tier===4?"var(--tier-4-color)":($.tier===5,"var(--tier-5-color)"),fontSize:"13px",fontWeight:500},children:$.name}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"11px",marginTop:"2px"},children:["Cost: $",qr(Math.ceil(L)*(typeof $.cost=="number"?$.cost:0))]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Cycle:"})," ",typeof ce=="number"?`${ce.toFixed(2)}s`:"Variable"]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Power:"})," ",be]}),f.jsxs("div",{children:[f.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:"Pollution:"})," ",ke.toFixed(2),"%/hr"]})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-divider)"},children:[f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--input-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Inputs"}),B.inputs.map((fe,ge)=>{var it,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=fe.quantity,Re=(typeof ye=="number"?xe?ye:ye/ce:0)*L,je=(it=We==null?void 0:We.flows)==null?void 0:it.byNode[N.id],Ye=((Dt=je==null?void 0:je.inputFlows[ge])==null?void 0:Dt.connected)||0,tt=Math.max(0,Re-Ye)>.001;return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:tt?"1px solid var(--delete-color)":"1px solid var(--border-light)"},children:[f.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:tt?"var(--delete-color)":"var(--handle-input-supplied)",flexShrink:0}}),f.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,bt)}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?qr(Re):"Var","/s"]})]},ge)})]}),f.jsxs("div",{children:[f.jsx("div",{style:{color:"var(--output-text)",fontSize:"11px",fontWeight:600,marginBottom:"6px"},children:"Outputs"}),B.outputs.map((fe,ge)=>{var it,Dt;const xe=B.isMineshaftDrill||B.id==="r_mineshaft_drill",ye=fe.originalQuantity!==void 0?fe.originalQuantity:fe.quantity,Re=(typeof ye=="number"?xe?ye:ye/ce:0)*L,je=(it=We==null?void 0:We.flows)==null?void 0:it.byNode[N.id],Ye=((Dt=je==null?void 0:je.outputFlows[ge])==null?void 0:Dt.connected)||0,tt=Math.max(0,Re-Ye)>.001;return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",padding:"4px 6px",background:"var(--bg-secondary)",borderRadius:"var(--radius-sm)",marginBottom:"4px",border:tt?"1px solid var(--handle-output-excess)":"1px solid var(--border-light)"},children:[f.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:tt?"var(--handle-output-excess)":"var(--handle-output-connected)",flexShrink:0}}),f.jsx("div",{style:{flex:1,color:"var(--text-primary)",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_i(fe.product_id,bt)}),f.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"10px",whiteSpace:"nowrap"},children:[typeof ye=="number"?qr(Re):"Var","/s"]})]},ge)})]})]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"10px"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[f.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Machine Count"}),f.jsx("input",{type:"number",min:"0",step:"0.1",value:qi[N.id]!==void 0?qi[N.id]:L.toFixed(2),onFocus:()=>{eo(fe=>({...fe,[N.id]:L.toFixed(2)}))},onChange:fe=>{eo(ge=>({...ge,[N.id]:fe.target.value}))},onBlur:()=>{const fe=parseFloat(qi[N.id]);!isNaN(fe)&&fe>=0&&(Lt(N.id,ge=>({...ge,machineCount:fe})),ze("machineCount")),eo(ge=>{const xe={...ge};return delete xe[N.id],xe})},onKeyPress:fe=>{fe.key==="Enter"&&fe.target.blur()},className:"input",style:{width:"100px",padding:"8px",fontSize:"13px",textAlign:"center"}})]}),f.jsx("button",{onClick:()=>{const fe=["free","capped","locked"],xe=(fe.indexOf(Y)+1)%fe.length,ye=fe[xe];t(Ce=>Ce.map(Re=>Re.id!==N.id?Re:{...Re,data:{...Re.data,machineCountMode:ye,cappedMachineCount:ye==="free"?void 0:L}}))},className:"btn btn-secondary",style:{minWidth:"70px",padding:"8px",fontWeight:600,fontSize:"12px",background:Y==="locked"?"#ef4444":Y==="capped"?"#f59e0b":"var(--bg-secondary)",color:Y==="free"?"var(--text-primary)":"#fff",border:Y==="free"?"2px solid var(--border-primary)":"none"},title:Y==="free"?"Free: LP/suggestions can change":Y==="capped"?`Capped: Max ${(re==null?void 0:re.toFixed(2))||L.toFixed(2)}`:"Locked: Cannot be changed",children:Y==="free"?" Free":Y==="capped"?" Cap":" Lock"}),f.jsx("button",{onClick:()=>{fn.current&&(fn.current.fitView({nodes:[{id:N.id}],padding:.5,duration:500}),z(!1))},className:"btn btn-primary",style:{minWidth:"80px",padding:"8px 12px",fontSize:"12px"},title:"Locate this recipe on canvas",children:" Locate"})]})]},N.id)})})})}),f.jsx("button",{onClick:()=>z(!1),className:"btn btn-secondary",children:"Close"})]})}),nt&&f.jsx(iV,{onClose:()=>et(!1)}),ft&&f.jsx(oV,{onClose:()=>ct(!1)}),dt&&f.jsx(dV,{onClose:()=>lt(!1),onLoad:Wc,currentCanvas:{nodes:e,edges:i,targetProducts:W,nodeId:u,targetIdCounter:H,soldProducts:er,favoriteRecipes:Wt,lastDrillConfig:At,lastAssemblerConfig:Gt,lastTreeFarmConfig:_r,lastFireboxConfig:hr,lastWasteFacilityConfig:cn},onImport:Ya,onExportCanvas:$c}),Sr&&f.jsx(qV,{onClose:()=>Zt(!1),defaultProducts:Yl,defaultMachines:Ql,defaultRecipes:Xl,onDataChange:Hc}),Qe&&Nt!=="pan"&&f.jsxs("div",{style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"var(--bg-secondary)",border:"2px solid var(--border-primary)",borderRadius:"var(--radius-md)",padding:"8px 16px",color:"var(--color-primary)",fontSize:"14px",fontWeight:600,zIndex:1e3,pointerEvents:"none",boxShadow:"var(--shadow-lg)"},children:[Nt==="target"&&" Target Mode: Tap nodes to mark as targets",Nt==="delete"&&" Delete Mode: Tap nodes to delete"]}),ar&&f.jsxs("div",{className:"pending-node-preview",style:{left:`${Bo.x+20}px`,top:`${Bo.y+20}px`},children:[f.jsx("div",{className:"pending-node-recipe-name",children:ar.recipe.name}),f.jsx("div",{className:"pending-node-machine-name",children:ar.machine.name}),f.jsxs("div",{className:"pending-node-machine-name",children:["Count: ",ar.machineCount]}),f.jsx("div",{className:"pending-node-hint",children:"Left-click to place | Right-click to cancel"})]})]})}$T.createRoot(document.getElementById("root")).render(f.jsx(yk.StrictMode,{children:f.jsx(VL,{})}));
